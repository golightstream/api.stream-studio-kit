(function polyfill() {
  const relList = document.createElement("link").relList;
  if (relList && relList.supports && relList.supports("modulepreload")) {
    return;
  }
  for (const link of document.querySelectorAll('link[rel="modulepreload"]')) {
    processPreload(link);
  }
  new MutationObserver((mutations) => {
    for (const mutation of mutations) {
      if (mutation.type !== "childList") {
        continue;
      }
      for (const node2 of mutation.addedNodes) {
        if (node2.tagName === "LINK" && node2.rel === "modulepreload")
          processPreload(node2);
      }
    }
  }).observe(document, { childList: true, subtree: true });
  function getFetchOpts(link) {
    const fetchOpts = {};
    if (link.integrity)
      fetchOpts.integrity = link.integrity;
    if (link.referrerPolicy)
      fetchOpts.referrerPolicy = link.referrerPolicy;
    if (link.crossOrigin === "use-credentials")
      fetchOpts.credentials = "include";
    else if (link.crossOrigin === "anonymous")
      fetchOpts.credentials = "omit";
    else
      fetchOpts.credentials = "same-origin";
    return fetchOpts;
  }
  function processPreload(link) {
    if (link.ep)
      return;
    link.ep = true;
    const fetchOpts = getFetchOpts(link);
    fetch(link.href, fetchOpts);
  }
})();
function getDefaultExportFromCjs$3(x2) {
  return x2 && x2.__esModule && Object.prototype.hasOwnProperty.call(x2, "default") ? x2["default"] : x2;
}
var reactDom = { exports: {} };
var reactDom_production_min = {};
var react$1 = { exports: {} };
var react_production_min = {};
/*
object-assign
(c) Sindre Sorhus
@license MIT
*/
var getOwnPropertySymbols = Object.getOwnPropertySymbols;
var hasOwnProperty$h = Object.prototype.hasOwnProperty;
var propIsEnumerable = Object.prototype.propertyIsEnumerable;
function toObject(val) {
  if (val === null || val === void 0) {
    throw new TypeError("Object.assign cannot be called with null or undefined");
  }
  return Object(val);
}
function shouldUseNative() {
  try {
    if (!Object.assign) {
      return false;
    }
    var test1 = new String("abc");
    test1[5] = "de";
    if (Object.getOwnPropertyNames(test1)[0] === "5") {
      return false;
    }
    var test2 = {};
    for (var i2 = 0; i2 < 10; i2++) {
      test2["_" + String.fromCharCode(i2)] = i2;
    }
    var order2 = Object.getOwnPropertyNames(test2).map(function(n2) {
      return test2[n2];
    });
    if (order2.join("") !== "0123456789") {
      return false;
    }
    var test3 = {};
    "abcdefghijklmnopqrst".split("").forEach(function(letter) {
      test3[letter] = letter;
    });
    if (Object.keys(Object.assign({}, test3)).join("") !== "abcdefghijklmnopqrst") {
      return false;
    }
    return true;
  } catch (err) {
    return false;
  }
}
var objectAssign$1 = shouldUseNative() ? Object.assign : function(target, source) {
  var from2;
  var to = toObject(target);
  var symbols;
  for (var s2 = 1; s2 < arguments.length; s2++) {
    from2 = Object(arguments[s2]);
    for (var key2 in from2) {
      if (hasOwnProperty$h.call(from2, key2)) {
        to[key2] = from2[key2];
      }
    }
    if (getOwnPropertySymbols) {
      symbols = getOwnPropertySymbols(from2);
      for (var i2 = 0; i2 < symbols.length; i2++) {
        if (propIsEnumerable.call(from2, symbols[i2])) {
          to[symbols[i2]] = from2[symbols[i2]];
        }
      }
    }
  }
  return to;
};
/** @license React v17.0.2
 * react.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */
var l = objectAssign$1, n$2 = 60103, p$1 = 60106;
react_production_min.Fragment = 60107;
react_production_min.StrictMode = 60108;
react_production_min.Profiler = 60114;
var q$1 = 60109, r$4 = 60110, t$1 = 60112;
react_production_min.Suspense = 60113;
var u = 60115, v = 60116;
if ("function" === typeof Symbol && Symbol.for) {
  var w$1 = Symbol.for;
  n$2 = w$1("react.element");
  p$1 = w$1("react.portal");
  react_production_min.Fragment = w$1("react.fragment");
  react_production_min.StrictMode = w$1("react.strict_mode");
  react_production_min.Profiler = w$1("react.profiler");
  q$1 = w$1("react.provider");
  r$4 = w$1("react.context");
  t$1 = w$1("react.forward_ref");
  react_production_min.Suspense = w$1("react.suspense");
  u = w$1("react.memo");
  v = w$1("react.lazy");
}
var x = "function" === typeof Symbol && Symbol.iterator;
function y$2(a420) {
  if (null === a420 || "object" !== typeof a420)
    return null;
  a420 = x && a420[x] || a420["@@iterator"];
  return "function" === typeof a420 ? a420 : null;
}
function z(a420) {
  for (var b = "https://reactjs.org/docs/error-decoder.html?invariant=" + a420, c = 1; c < arguments.length; c++)
    b += "&args[]=" + encodeURIComponent(arguments[c]);
  return "Minified React error #" + a420 + "; visit " + b + " for the full message or use the non-minified dev environment for full errors and additional helpful warnings.";
}
var A = { isMounted: function() {
  return false;
}, enqueueForceUpdate: function() {
}, enqueueReplaceState: function() {
}, enqueueSetState: function() {
} }, B$1 = {};
function C(a420, b, c) {
  this.props = a420;
  this.context = b;
  this.refs = B$1;
  this.updater = c || A;
}
C.prototype.isReactComponent = {};
C.prototype.setState = function(a420, b) {
  if ("object" !== typeof a420 && "function" !== typeof a420 && null != a420)
    throw Error(z(85));
  this.updater.enqueueSetState(this, a420, b, "setState");
};
C.prototype.forceUpdate = function(a420) {
  this.updater.enqueueForceUpdate(this, a420, "forceUpdate");
};
function D$1() {
}
D$1.prototype = C.prototype;
function E$1(a420, b, c) {
  this.props = a420;
  this.context = b;
  this.refs = B$1;
  this.updater = c || A;
}
var F$1 = E$1.prototype = new D$1();
F$1.constructor = E$1;
l(F$1, C.prototype);
F$1.isPureReactComponent = true;
var G$2 = { current: null }, H$1 = Object.prototype.hasOwnProperty, I$1 = { key: true, ref: true, __self: true, __source: true };
function J(a420, b, c) {
  var e2, d2 = {}, k = null, h2 = null;
  if (null != b)
    for (e2 in void 0 !== b.ref && (h2 = b.ref), void 0 !== b.key && (k = "" + b.key), b)
      H$1.call(b, e2) && !I$1.hasOwnProperty(e2) && (d2[e2] = b[e2]);
  var g2 = arguments.length - 2;
  if (1 === g2)
    d2.children = c;
  else if (1 < g2) {
    for (var f2 = Array(g2), m2 = 0; m2 < g2; m2++)
      f2[m2] = arguments[m2 + 2];
    d2.children = f2;
  }
  if (a420 && a420.defaultProps)
    for (e2 in g2 = a420.defaultProps, g2)
      void 0 === d2[e2] && (d2[e2] = g2[e2]);
  return { $$typeof: n$2, type: a420, key: k, ref: h2, props: d2, _owner: G$2.current };
}
function K$5(a420, b) {
  return { $$typeof: n$2, type: a420.type, key: b, ref: a420.ref, props: a420.props, _owner: a420._owner };
}
function L(a420) {
  return "object" === typeof a420 && null !== a420 && a420.$$typeof === n$2;
}
function escape(a420) {
  var b = { "=": "=0", ":": "=2" };
  return "$" + a420.replace(/[=:]/g, function(a421) {
    return b[a421];
  });
}
var M$1 = /\/+/g;
function N$1(a420, b) {
  return "object" === typeof a420 && null !== a420 && null != a420.key ? escape("" + a420.key) : b.toString(36);
}
function O$1(a420, b, c, e2, d2) {
  var k = typeof a420;
  if ("undefined" === k || "boolean" === k)
    a420 = null;
  var h2 = false;
  if (null === a420)
    h2 = true;
  else
    switch (k) {
      case "string":
      case "number":
        h2 = true;
        break;
      case "object":
        switch (a420.$$typeof) {
          case n$2:
          case p$1:
            h2 = true;
        }
    }
  if (h2)
    return h2 = a420, d2 = d2(h2), a420 = "" === e2 ? "." + N$1(h2, 0) : e2, Array.isArray(d2) ? (c = "", null != a420 && (c = a420.replace(M$1, "$&/") + "/"), O$1(d2, b, c, "", function(a421) {
      return a421;
    })) : null != d2 && (L(d2) && (d2 = K$5(d2, c + (!d2.key || h2 && h2.key === d2.key ? "" : ("" + d2.key).replace(M$1, "$&/") + "/") + a420)), b.push(d2)), 1;
  h2 = 0;
  e2 = "" === e2 ? "." : e2 + ":";
  if (Array.isArray(a420))
    for (var g2 = 0; g2 < a420.length; g2++) {
      k = a420[g2];
      var f2 = e2 + N$1(k, g2);
      h2 += O$1(k, b, c, f2, d2);
    }
  else if (f2 = y$2(a420), "function" === typeof f2)
    for (a420 = f2.call(a420), g2 = 0; !(k = a420.next()).done; )
      k = k.value, f2 = e2 + N$1(k, g2++), h2 += O$1(k, b, c, f2, d2);
  else if ("object" === k)
    throw b = "" + a420, Error(z(31, "[object Object]" === b ? "object with keys {" + Object.keys(a420).join(", ") + "}" : b));
  return h2;
}
function P$1(a420, b, c) {
  if (null == a420)
    return a420;
  var e2 = [], d2 = 0;
  O$1(a420, e2, "", "", function(a421) {
    return b.call(c, a421, d2++);
  });
  return e2;
}
function Q(a420) {
  if (-1 === a420._status) {
    var b = a420._result;
    b = b();
    a420._status = 0;
    a420._result = b;
    b.then(function(b2) {
      0 === a420._status && (b2 = b2.default, a420._status = 1, a420._result = b2);
    }, function(b2) {
      0 === a420._status && (a420._status = 2, a420._result = b2);
    });
  }
  if (1 === a420._status)
    return a420._result;
  throw a420._result;
}
var R$3 = { current: null };
function S$1() {
  var a420 = R$3.current;
  if (null === a420)
    throw Error(z(321));
  return a420;
}
var T$1 = { ReactCurrentDispatcher: R$3, ReactCurrentBatchConfig: { transition: 0 }, ReactCurrentOwner: G$2, IsSomeRendererActing: { current: false }, assign: l };
react_production_min.Children = { map: P$1, forEach: function(a420, b, c) {
  P$1(a420, function() {
    b.apply(this, arguments);
  }, c);
}, count: function(a420) {
  var b = 0;
  P$1(a420, function() {
    b++;
  });
  return b;
}, toArray: function(a420) {
  return P$1(a420, function(a421) {
    return a421;
  }) || [];
}, only: function(a420) {
  if (!L(a420))
    throw Error(z(143));
  return a420;
} };
react_production_min.Component = C;
react_production_min.PureComponent = E$1;
react_production_min.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED = T$1;
react_production_min.cloneElement = function(a420, b, c) {
  if (null === a420 || void 0 === a420)
    throw Error(z(267, a420));
  var e2 = l({}, a420.props), d2 = a420.key, k = a420.ref, h2 = a420._owner;
  if (null != b) {
    void 0 !== b.ref && (k = b.ref, h2 = G$2.current);
    void 0 !== b.key && (d2 = "" + b.key);
    if (a420.type && a420.type.defaultProps)
      var g2 = a420.type.defaultProps;
    for (f2 in b)
      H$1.call(b, f2) && !I$1.hasOwnProperty(f2) && (e2[f2] = void 0 === b[f2] && void 0 !== g2 ? g2[f2] : b[f2]);
  }
  var f2 = arguments.length - 2;
  if (1 === f2)
    e2.children = c;
  else if (1 < f2) {
    g2 = Array(f2);
    for (var m2 = 0; m2 < f2; m2++)
      g2[m2] = arguments[m2 + 2];
    e2.children = g2;
  }
  return {
    $$typeof: n$2,
    type: a420.type,
    key: d2,
    ref: k,
    props: e2,
    _owner: h2
  };
};
react_production_min.createContext = function(a420, b) {
  void 0 === b && (b = null);
  a420 = { $$typeof: r$4, _calculateChangedBits: b, _currentValue: a420, _currentValue2: a420, _threadCount: 0, Provider: null, Consumer: null };
  a420.Provider = { $$typeof: q$1, _context: a420 };
  return a420.Consumer = a420;
};
react_production_min.createElement = J;
react_production_min.createFactory = function(a420) {
  var b = J.bind(null, a420);
  b.type = a420;
  return b;
};
react_production_min.createRef = function() {
  return { current: null };
};
react_production_min.forwardRef = function(a420) {
  return { $$typeof: t$1, render: a420 };
};
react_production_min.isValidElement = L;
react_production_min.lazy = function(a420) {
  return { $$typeof: v, _payload: { _status: -1, _result: a420 }, _init: Q };
};
react_production_min.memo = function(a420, b) {
  return { $$typeof: u, type: a420, compare: void 0 === b ? null : b };
};
react_production_min.useCallback = function(a420, b) {
  return S$1().useCallback(a420, b);
};
react_production_min.useContext = function(a420, b) {
  return S$1().useContext(a420, b);
};
react_production_min.useDebugValue = function() {
};
react_production_min.useEffect = function(a420, b) {
  return S$1().useEffect(a420, b);
};
react_production_min.useImperativeHandle = function(a420, b, c) {
  return S$1().useImperativeHandle(a420, b, c);
};
react_production_min.useLayoutEffect = function(a420, b) {
  return S$1().useLayoutEffect(a420, b);
};
react_production_min.useMemo = function(a420, b) {
  return S$1().useMemo(a420, b);
};
react_production_min.useReducer = function(a420, b, c) {
  return S$1().useReducer(a420, b, c);
};
react_production_min.useRef = function(a420) {
  return S$1().useRef(a420);
};
react_production_min.useState = function(a420) {
  return S$1().useState(a420);
};
react_production_min.version = "17.0.2";
{
  react$1.exports = react_production_min;
}
var reactExports = react$1.exports;
const React = /* @__PURE__ */ getDefaultExportFromCjs$3(reactExports);
var scheduler = { exports: {} };
var scheduler_production_min = {};
/** @license React v0.20.2
 * scheduler.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */
(function(exports2) {
  var f2, g2, h2, k;
  if ("object" === typeof performance && "function" === typeof performance.now) {
    var l2 = performance;
    exports2.unstable_now = function() {
      return l2.now();
    };
  } else {
    var p2 = Date, q2 = p2.now();
    exports2.unstable_now = function() {
      return p2.now() - q2;
    };
  }
  if ("undefined" === typeof window || "function" !== typeof MessageChannel) {
    var t2 = null, u2 = null, w2 = function() {
      if (null !== t2)
        try {
          var a420 = exports2.unstable_now();
          t2(true, a420);
          t2 = null;
        } catch (b) {
          throw setTimeout(w2, 0), b;
        }
    };
    f2 = function(a420) {
      null !== t2 ? setTimeout(f2, 0, a420) : (t2 = a420, setTimeout(w2, 0));
    };
    g2 = function(a420, b) {
      u2 = setTimeout(a420, b);
    };
    h2 = function() {
      clearTimeout(u2);
    };
    exports2.unstable_shouldYield = function() {
      return false;
    };
    k = exports2.unstable_forceFrameRate = function() {
    };
  } else {
    var x2 = window.setTimeout, y2 = window.clearTimeout;
    if ("undefined" !== typeof console) {
      var z2 = window.cancelAnimationFrame;
      "function" !== typeof window.requestAnimationFrame && console.error("This browser doesn't support requestAnimationFrame. Make sure that you load a polyfill in older browsers. https://reactjs.org/link/react-polyfills");
      "function" !== typeof z2 && console.error("This browser doesn't support cancelAnimationFrame. Make sure that you load a polyfill in older browsers. https://reactjs.org/link/react-polyfills");
    }
    var A2 = false, B2 = null, C2 = -1, D2 = 5, E2 = 0;
    exports2.unstable_shouldYield = function() {
      return exports2.unstable_now() >= E2;
    };
    k = function() {
    };
    exports2.unstable_forceFrameRate = function(a420) {
      0 > a420 || 125 < a420 ? console.error("forceFrameRate takes a positive int between 0 and 125, forcing frame rates higher than 125 fps is not supported") : D2 = 0 < a420 ? Math.floor(1e3 / a420) : 5;
    };
    var F2 = new MessageChannel(), G2 = F2.port2;
    F2.port1.onmessage = function() {
      if (null !== B2) {
        var a420 = exports2.unstable_now();
        E2 = a420 + D2;
        try {
          B2(true, a420) ? G2.postMessage(null) : (A2 = false, B2 = null);
        } catch (b) {
          throw G2.postMessage(null), b;
        }
      } else
        A2 = false;
    };
    f2 = function(a420) {
      B2 = a420;
      A2 || (A2 = true, G2.postMessage(null));
    };
    g2 = function(a420, b) {
      C2 = x2(function() {
        a420(exports2.unstable_now());
      }, b);
    };
    h2 = function() {
      y2(C2);
      C2 = -1;
    };
  }
  function H2(a420, b) {
    var c = a420.length;
    a420.push(b);
    a:
      for (; ; ) {
        var d2 = c - 1 >>> 1, e2 = a420[d2];
        if (void 0 !== e2 && 0 < I2(e2, b))
          a420[d2] = b, a420[c] = e2, c = d2;
        else
          break a;
      }
  }
  function J2(a420) {
    a420 = a420[0];
    return void 0 === a420 ? null : a420;
  }
  function K2(a420) {
    var b = a420[0];
    if (void 0 !== b) {
      var c = a420.pop();
      if (c !== b) {
        a420[0] = c;
        a:
          for (var d2 = 0, e2 = a420.length; d2 < e2; ) {
            var m2 = 2 * (d2 + 1) - 1, n2 = a420[m2], v2 = m2 + 1, r2 = a420[v2];
            if (void 0 !== n2 && 0 > I2(n2, c))
              void 0 !== r2 && 0 > I2(r2, n2) ? (a420[d2] = r2, a420[v2] = c, d2 = v2) : (a420[d2] = n2, a420[m2] = c, d2 = m2);
            else if (void 0 !== r2 && 0 > I2(r2, c))
              a420[d2] = r2, a420[v2] = c, d2 = v2;
            else
              break a;
          }
      }
      return b;
    }
    return null;
  }
  function I2(a420, b) {
    var c = a420.sortIndex - b.sortIndex;
    return 0 !== c ? c : a420.id - b.id;
  }
  var L2 = [], M2 = [], N2 = 1, O2 = null, P2 = 3, Q2 = false, R2 = false, S2 = false;
  function T2(a420) {
    for (var b = J2(M2); null !== b; ) {
      if (null === b.callback)
        K2(M2);
      else if (b.startTime <= a420)
        K2(M2), b.sortIndex = b.expirationTime, H2(L2, b);
      else
        break;
      b = J2(M2);
    }
  }
  function U2(a420) {
    S2 = false;
    T2(a420);
    if (!R2)
      if (null !== J2(L2))
        R2 = true, f2(V2);
      else {
        var b = J2(M2);
        null !== b && g2(U2, b.startTime - a420);
      }
  }
  function V2(a420, b) {
    R2 = false;
    S2 && (S2 = false, h2());
    Q2 = true;
    var c = P2;
    try {
      T2(b);
      for (O2 = J2(L2); null !== O2 && (!(O2.expirationTime > b) || a420 && !exports2.unstable_shouldYield()); ) {
        var d2 = O2.callback;
        if ("function" === typeof d2) {
          O2.callback = null;
          P2 = O2.priorityLevel;
          var e2 = d2(O2.expirationTime <= b);
          b = exports2.unstable_now();
          "function" === typeof e2 ? O2.callback = e2 : O2 === J2(L2) && K2(L2);
          T2(b);
        } else
          K2(L2);
        O2 = J2(L2);
      }
      if (null !== O2)
        var m2 = true;
      else {
        var n2 = J2(M2);
        null !== n2 && g2(U2, n2.startTime - b);
        m2 = false;
      }
      return m2;
    } finally {
      O2 = null, P2 = c, Q2 = false;
    }
  }
  var W2 = k;
  exports2.unstable_IdlePriority = 5;
  exports2.unstable_ImmediatePriority = 1;
  exports2.unstable_LowPriority = 4;
  exports2.unstable_NormalPriority = 3;
  exports2.unstable_Profiling = null;
  exports2.unstable_UserBlockingPriority = 2;
  exports2.unstable_cancelCallback = function(a420) {
    a420.callback = null;
  };
  exports2.unstable_continueExecution = function() {
    R2 || Q2 || (R2 = true, f2(V2));
  };
  exports2.unstable_getCurrentPriorityLevel = function() {
    return P2;
  };
  exports2.unstable_getFirstCallbackNode = function() {
    return J2(L2);
  };
  exports2.unstable_next = function(a420) {
    switch (P2) {
      case 1:
      case 2:
      case 3:
        var b = 3;
        break;
      default:
        b = P2;
    }
    var c = P2;
    P2 = b;
    try {
      return a420();
    } finally {
      P2 = c;
    }
  };
  exports2.unstable_pauseExecution = function() {
  };
  exports2.unstable_requestPaint = W2;
  exports2.unstable_runWithPriority = function(a420, b) {
    switch (a420) {
      case 1:
      case 2:
      case 3:
      case 4:
      case 5:
        break;
      default:
        a420 = 3;
    }
    var c = P2;
    P2 = a420;
    try {
      return b();
    } finally {
      P2 = c;
    }
  };
  exports2.unstable_scheduleCallback = function(a420, b, c) {
    var d2 = exports2.unstable_now();
    "object" === typeof c && null !== c ? (c = c.delay, c = "number" === typeof c && 0 < c ? d2 + c : d2) : c = d2;
    switch (a420) {
      case 1:
        var e2 = -1;
        break;
      case 2:
        e2 = 250;
        break;
      case 5:
        e2 = 1073741823;
        break;
      case 4:
        e2 = 1e4;
        break;
      default:
        e2 = 5e3;
    }
    e2 = c + e2;
    a420 = { id: N2++, callback: b, priorityLevel: a420, startTime: c, expirationTime: e2, sortIndex: -1 };
    c > d2 ? (a420.sortIndex = c, H2(M2, a420), null === J2(L2) && a420 === J2(M2) && (S2 ? h2() : S2 = true, g2(U2, c - d2))) : (a420.sortIndex = e2, H2(L2, a420), R2 || Q2 || (R2 = true, f2(V2)));
    return a420;
  };
  exports2.unstable_wrapCallback = function(a420) {
    var b = P2;
    return function() {
      var c = P2;
      P2 = b;
      try {
        return a420.apply(this, arguments);
      } finally {
        P2 = c;
      }
    };
  };
})(scheduler_production_min);
{
  scheduler.exports = scheduler_production_min;
}
var schedulerExports = scheduler.exports;
/** @license React v17.0.2
 * react-dom.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */
var aa = reactExports, m$3 = objectAssign$1, r$3 = schedulerExports;
function y$1(a420) {
  for (var b = "https://reactjs.org/docs/error-decoder.html?invariant=" + a420, c = 1; c < arguments.length; c++)
    b += "&args[]=" + encodeURIComponent(arguments[c]);
  return "Minified React error #" + a420 + "; visit " + b + " for the full message or use the non-minified dev environment for full errors and additional helpful warnings.";
}
if (!aa)
  throw Error(y$1(227));
var ba = /* @__PURE__ */ new Set(), ca = {};
function da(a420, b) {
  ea(a420, b);
  ea(a420 + "Capture", b);
}
function ea(a420, b) {
  ca[a420] = b;
  for (a420 = 0; a420 < b.length; a420++)
    ba.add(b[a420]);
}
var fa = !("undefined" === typeof window || "undefined" === typeof window.document || "undefined" === typeof window.document.createElement), ha = /^[:A-Z_a-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD][:A-Z_a-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD\-.0-9\u00B7\u0300-\u036F\u203F-\u2040]*$/, ia = Object.prototype.hasOwnProperty, ja = {}, ka = {};
function la(a420) {
  if (ia.call(ka, a420))
    return true;
  if (ia.call(ja, a420))
    return false;
  if (ha.test(a420))
    return ka[a420] = true;
  ja[a420] = true;
  return false;
}
function ma(a420, b, c, d2) {
  if (null !== c && 0 === c.type)
    return false;
  switch (typeof b) {
    case "function":
    case "symbol":
      return true;
    case "boolean":
      if (d2)
        return false;
      if (null !== c)
        return !c.acceptsBooleans;
      a420 = a420.toLowerCase().slice(0, 5);
      return "data-" !== a420 && "aria-" !== a420;
    default:
      return false;
  }
}
function na(a420, b, c, d2) {
  if (null === b || "undefined" === typeof b || ma(a420, b, c, d2))
    return true;
  if (d2)
    return false;
  if (null !== c)
    switch (c.type) {
      case 3:
        return !b;
      case 4:
        return false === b;
      case 5:
        return isNaN(b);
      case 6:
        return isNaN(b) || 1 > b;
    }
  return false;
}
function B(a420, b, c, d2, e2, f2, g2) {
  this.acceptsBooleans = 2 === b || 3 === b || 4 === b;
  this.attributeName = d2;
  this.attributeNamespace = e2;
  this.mustUseProperty = c;
  this.propertyName = a420;
  this.type = b;
  this.sanitizeURL = f2;
  this.removeEmptyString = g2;
}
var D = {};
"children dangerouslySetInnerHTML defaultValue defaultChecked innerHTML suppressContentEditableWarning suppressHydrationWarning style".split(" ").forEach(function(a420) {
  D[a420] = new B(a420, 0, false, a420, null, false, false);
});
[["acceptCharset", "accept-charset"], ["className", "class"], ["htmlFor", "for"], ["httpEquiv", "http-equiv"]].forEach(function(a420) {
  var b = a420[0];
  D[b] = new B(b, 1, false, a420[1], null, false, false);
});
["contentEditable", "draggable", "spellCheck", "value"].forEach(function(a420) {
  D[a420] = new B(a420, 2, false, a420.toLowerCase(), null, false, false);
});
["autoReverse", "externalResourcesRequired", "focusable", "preserveAlpha"].forEach(function(a420) {
  D[a420] = new B(a420, 2, false, a420, null, false, false);
});
"allowFullScreen async autoFocus autoPlay controls default defer disabled disablePictureInPicture disableRemotePlayback formNoValidate hidden loop noModule noValidate open playsInline readOnly required reversed scoped seamless itemScope".split(" ").forEach(function(a420) {
  D[a420] = new B(a420, 3, false, a420.toLowerCase(), null, false, false);
});
["checked", "multiple", "muted", "selected"].forEach(function(a420) {
  D[a420] = new B(a420, 3, true, a420, null, false, false);
});
["capture", "download"].forEach(function(a420) {
  D[a420] = new B(a420, 4, false, a420, null, false, false);
});
["cols", "rows", "size", "span"].forEach(function(a420) {
  D[a420] = new B(a420, 6, false, a420, null, false, false);
});
["rowSpan", "start"].forEach(function(a420) {
  D[a420] = new B(a420, 5, false, a420.toLowerCase(), null, false, false);
});
var oa = /[\-:]([a-z])/g;
function pa(a420) {
  return a420[1].toUpperCase();
}
"accent-height alignment-baseline arabic-form baseline-shift cap-height clip-path clip-rule color-interpolation color-interpolation-filters color-profile color-rendering dominant-baseline enable-background fill-opacity fill-rule flood-color flood-opacity font-family font-size font-size-adjust font-stretch font-style font-variant font-weight glyph-name glyph-orientation-horizontal glyph-orientation-vertical horiz-adv-x horiz-origin-x image-rendering letter-spacing lighting-color marker-end marker-mid marker-start overline-position overline-thickness paint-order panose-1 pointer-events rendering-intent shape-rendering stop-color stop-opacity strikethrough-position strikethrough-thickness stroke-dasharray stroke-dashoffset stroke-linecap stroke-linejoin stroke-miterlimit stroke-opacity stroke-width text-anchor text-decoration text-rendering underline-position underline-thickness unicode-bidi unicode-range units-per-em v-alphabetic v-hanging v-ideographic v-mathematical vector-effect vert-adv-y vert-origin-x vert-origin-y word-spacing writing-mode xmlns:xlink x-height".split(" ").forEach(function(a420) {
  var b = a420.replace(
    oa,
    pa
  );
  D[b] = new B(b, 1, false, a420, null, false, false);
});
"xlink:actuate xlink:arcrole xlink:role xlink:show xlink:title xlink:type".split(" ").forEach(function(a420) {
  var b = a420.replace(oa, pa);
  D[b] = new B(b, 1, false, a420, "http://www.w3.org/1999/xlink", false, false);
});
["xml:base", "xml:lang", "xml:space"].forEach(function(a420) {
  var b = a420.replace(oa, pa);
  D[b] = new B(b, 1, false, a420, "http://www.w3.org/XML/1998/namespace", false, false);
});
["tabIndex", "crossOrigin"].forEach(function(a420) {
  D[a420] = new B(a420, 1, false, a420.toLowerCase(), null, false, false);
});
D.xlinkHref = new B("xlinkHref", 1, false, "xlink:href", "http://www.w3.org/1999/xlink", true, false);
["src", "href", "action", "formAction"].forEach(function(a420) {
  D[a420] = new B(a420, 1, false, a420.toLowerCase(), null, true, true);
});
function qa(a420, b, c, d2) {
  var e2 = D.hasOwnProperty(b) ? D[b] : null;
  var f2 = null !== e2 ? 0 === e2.type : d2 ? false : !(2 < b.length) || "o" !== b[0] && "O" !== b[0] || "n" !== b[1] && "N" !== b[1] ? false : true;
  f2 || (na(b, c, e2, d2) && (c = null), d2 || null === e2 ? la(b) && (null === c ? a420.removeAttribute(b) : a420.setAttribute(b, "" + c)) : e2.mustUseProperty ? a420[e2.propertyName] = null === c ? 3 === e2.type ? false : "" : c : (b = e2.attributeName, d2 = e2.attributeNamespace, null === c ? a420.removeAttribute(b) : (e2 = e2.type, c = 3 === e2 || 4 === e2 && true === c ? "" : "" + c, d2 ? a420.setAttributeNS(d2, b, c) : a420.setAttribute(b, c))));
}
var ra = aa.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED, sa = 60103, ta = 60106, ua = 60107, wa = 60108, xa = 60114, ya = 60109, za = 60110, Aa = 60112, Ba = 60113, Ca = 60120, Da = 60115, Ea = 60116, Fa = 60121, Ga = 60128, Ha = 60129, Ia = 60130, Ja = 60131;
if ("function" === typeof Symbol && Symbol.for) {
  var E = Symbol.for;
  sa = E("react.element");
  ta = E("react.portal");
  ua = E("react.fragment");
  wa = E("react.strict_mode");
  xa = E("react.profiler");
  ya = E("react.provider");
  za = E("react.context");
  Aa = E("react.forward_ref");
  Ba = E("react.suspense");
  Ca = E("react.suspense_list");
  Da = E("react.memo");
  Ea = E("react.lazy");
  Fa = E("react.block");
  E("react.scope");
  Ga = E("react.opaque.id");
  Ha = E("react.debug_trace_mode");
  Ia = E("react.offscreen");
  Ja = E("react.legacy_hidden");
}
var Ka = "function" === typeof Symbol && Symbol.iterator;
function La(a420) {
  if (null === a420 || "object" !== typeof a420)
    return null;
  a420 = Ka && a420[Ka] || a420["@@iterator"];
  return "function" === typeof a420 ? a420 : null;
}
var Ma;
function Na(a420) {
  if (void 0 === Ma)
    try {
      throw Error();
    } catch (c) {
      var b = c.stack.trim().match(/\n( *(at )?)/);
      Ma = b && b[1] || "";
    }
  return "\n" + Ma + a420;
}
var Oa = false;
function Pa(a420, b) {
  if (!a420 || Oa)
    return "";
  Oa = true;
  var c = Error.prepareStackTrace;
  Error.prepareStackTrace = void 0;
  try {
    if (b)
      if (b = function() {
        throw Error();
      }, Object.defineProperty(b.prototype, "props", { set: function() {
        throw Error();
      } }), "object" === typeof Reflect && Reflect.construct) {
        try {
          Reflect.construct(b, []);
        } catch (k) {
          var d2 = k;
        }
        Reflect.construct(a420, [], b);
      } else {
        try {
          b.call();
        } catch (k) {
          d2 = k;
        }
        a420.call(b.prototype);
      }
    else {
      try {
        throw Error();
      } catch (k) {
        d2 = k;
      }
      a420();
    }
  } catch (k) {
    if (k && d2 && "string" === typeof k.stack) {
      for (var e2 = k.stack.split("\n"), f2 = d2.stack.split("\n"), g2 = e2.length - 1, h2 = f2.length - 1; 1 <= g2 && 0 <= h2 && e2[g2] !== f2[h2]; )
        h2--;
      for (; 1 <= g2 && 0 <= h2; g2--, h2--)
        if (e2[g2] !== f2[h2]) {
          if (1 !== g2 || 1 !== h2) {
            do
              if (g2--, h2--, 0 > h2 || e2[g2] !== f2[h2])
                return "\n" + e2[g2].replace(" at new ", " at ");
            while (1 <= g2 && 0 <= h2);
          }
          break;
        }
    }
  } finally {
    Oa = false, Error.prepareStackTrace = c;
  }
  return (a420 = a420 ? a420.displayName || a420.name : "") ? Na(a420) : "";
}
function Qa(a420) {
  switch (a420.tag) {
    case 5:
      return Na(a420.type);
    case 16:
      return Na("Lazy");
    case 13:
      return Na("Suspense");
    case 19:
      return Na("SuspenseList");
    case 0:
    case 2:
    case 15:
      return a420 = Pa(a420.type, false), a420;
    case 11:
      return a420 = Pa(a420.type.render, false), a420;
    case 22:
      return a420 = Pa(a420.type._render, false), a420;
    case 1:
      return a420 = Pa(a420.type, true), a420;
    default:
      return "";
  }
}
function Ra(a420) {
  if (null == a420)
    return null;
  if ("function" === typeof a420)
    return a420.displayName || a420.name || null;
  if ("string" === typeof a420)
    return a420;
  switch (a420) {
    case ua:
      return "Fragment";
    case ta:
      return "Portal";
    case xa:
      return "Profiler";
    case wa:
      return "StrictMode";
    case Ba:
      return "Suspense";
    case Ca:
      return "SuspenseList";
  }
  if ("object" === typeof a420)
    switch (a420.$$typeof) {
      case za:
        return (a420.displayName || "Context") + ".Consumer";
      case ya:
        return (a420._context.displayName || "Context") + ".Provider";
      case Aa:
        var b = a420.render;
        b = b.displayName || b.name || "";
        return a420.displayName || ("" !== b ? "ForwardRef(" + b + ")" : "ForwardRef");
      case Da:
        return Ra(a420.type);
      case Fa:
        return Ra(a420._render);
      case Ea:
        b = a420._payload;
        a420 = a420._init;
        try {
          return Ra(a420(b));
        } catch (c) {
        }
    }
  return null;
}
function Sa(a420) {
  switch (typeof a420) {
    case "boolean":
    case "number":
    case "object":
    case "string":
    case "undefined":
      return a420;
    default:
      return "";
  }
}
function Ta(a420) {
  var b = a420.type;
  return (a420 = a420.nodeName) && "input" === a420.toLowerCase() && ("checkbox" === b || "radio" === b);
}
function Ua(a420) {
  var b = Ta(a420) ? "checked" : "value", c = Object.getOwnPropertyDescriptor(a420.constructor.prototype, b), d2 = "" + a420[b];
  if (!a420.hasOwnProperty(b) && "undefined" !== typeof c && "function" === typeof c.get && "function" === typeof c.set) {
    var e2 = c.get, f2 = c.set;
    Object.defineProperty(a420, b, { configurable: true, get: function() {
      return e2.call(this);
    }, set: function(a421) {
      d2 = "" + a421;
      f2.call(this, a421);
    } });
    Object.defineProperty(a420, b, { enumerable: c.enumerable });
    return { getValue: function() {
      return d2;
    }, setValue: function(a421) {
      d2 = "" + a421;
    }, stopTracking: function() {
      a420._valueTracker = null;
      delete a420[b];
    } };
  }
}
function Va(a420) {
  a420._valueTracker || (a420._valueTracker = Ua(a420));
}
function Wa(a420) {
  if (!a420)
    return false;
  var b = a420._valueTracker;
  if (!b)
    return true;
  var c = b.getValue();
  var d2 = "";
  a420 && (d2 = Ta(a420) ? a420.checked ? "true" : "false" : a420.value);
  a420 = d2;
  return a420 !== c ? (b.setValue(a420), true) : false;
}
function Xa(a420) {
  a420 = a420 || ("undefined" !== typeof document ? document : void 0);
  if ("undefined" === typeof a420)
    return null;
  try {
    return a420.activeElement || a420.body;
  } catch (b) {
    return a420.body;
  }
}
function Ya(a420, b) {
  var c = b.checked;
  return m$3({}, b, { defaultChecked: void 0, defaultValue: void 0, value: void 0, checked: null != c ? c : a420._wrapperState.initialChecked });
}
function Za(a420, b) {
  var c = null == b.defaultValue ? "" : b.defaultValue, d2 = null != b.checked ? b.checked : b.defaultChecked;
  c = Sa(null != b.value ? b.value : c);
  a420._wrapperState = { initialChecked: d2, initialValue: c, controlled: "checkbox" === b.type || "radio" === b.type ? null != b.checked : null != b.value };
}
function $a(a420, b) {
  b = b.checked;
  null != b && qa(a420, "checked", b, false);
}
function ab(a420, b) {
  $a(a420, b);
  var c = Sa(b.value), d2 = b.type;
  if (null != c)
    if ("number" === d2) {
      if (0 === c && "" === a420.value || a420.value != c)
        a420.value = "" + c;
    } else
      a420.value !== "" + c && (a420.value = "" + c);
  else if ("submit" === d2 || "reset" === d2) {
    a420.removeAttribute("value");
    return;
  }
  b.hasOwnProperty("value") ? bb(a420, b.type, c) : b.hasOwnProperty("defaultValue") && bb(a420, b.type, Sa(b.defaultValue));
  null == b.checked && null != b.defaultChecked && (a420.defaultChecked = !!b.defaultChecked);
}
function cb(a420, b, c) {
  if (b.hasOwnProperty("value") || b.hasOwnProperty("defaultValue")) {
    var d2 = b.type;
    if (!("submit" !== d2 && "reset" !== d2 || void 0 !== b.value && null !== b.value))
      return;
    b = "" + a420._wrapperState.initialValue;
    c || b === a420.value || (a420.value = b);
    a420.defaultValue = b;
  }
  c = a420.name;
  "" !== c && (a420.name = "");
  a420.defaultChecked = !!a420._wrapperState.initialChecked;
  "" !== c && (a420.name = c);
}
function bb(a420, b, c) {
  if ("number" !== b || Xa(a420.ownerDocument) !== a420)
    null == c ? a420.defaultValue = "" + a420._wrapperState.initialValue : a420.defaultValue !== "" + c && (a420.defaultValue = "" + c);
}
function db(a420) {
  var b = "";
  aa.Children.forEach(a420, function(a421) {
    null != a421 && (b += a421);
  });
  return b;
}
function eb(a420, b) {
  a420 = m$3({ children: void 0 }, b);
  if (b = db(b.children))
    a420.children = b;
  return a420;
}
function fb(a420, b, c, d2) {
  a420 = a420.options;
  if (b) {
    b = {};
    for (var e2 = 0; e2 < c.length; e2++)
      b["$" + c[e2]] = true;
    for (c = 0; c < a420.length; c++)
      e2 = b.hasOwnProperty("$" + a420[c].value), a420[c].selected !== e2 && (a420[c].selected = e2), e2 && d2 && (a420[c].defaultSelected = true);
  } else {
    c = "" + Sa(c);
    b = null;
    for (e2 = 0; e2 < a420.length; e2++) {
      if (a420[e2].value === c) {
        a420[e2].selected = true;
        d2 && (a420[e2].defaultSelected = true);
        return;
      }
      null !== b || a420[e2].disabled || (b = a420[e2]);
    }
    null !== b && (b.selected = true);
  }
}
function gb(a420, b) {
  if (null != b.dangerouslySetInnerHTML)
    throw Error(y$1(91));
  return m$3({}, b, { value: void 0, defaultValue: void 0, children: "" + a420._wrapperState.initialValue });
}
function hb(a420, b) {
  var c = b.value;
  if (null == c) {
    c = b.children;
    b = b.defaultValue;
    if (null != c) {
      if (null != b)
        throw Error(y$1(92));
      if (Array.isArray(c)) {
        if (!(1 >= c.length))
          throw Error(y$1(93));
        c = c[0];
      }
      b = c;
    }
    null == b && (b = "");
    c = b;
  }
  a420._wrapperState = { initialValue: Sa(c) };
}
function ib(a420, b) {
  var c = Sa(b.value), d2 = Sa(b.defaultValue);
  null != c && (c = "" + c, c !== a420.value && (a420.value = c), null == b.defaultValue && a420.defaultValue !== c && (a420.defaultValue = c));
  null != d2 && (a420.defaultValue = "" + d2);
}
function jb(a420) {
  var b = a420.textContent;
  b === a420._wrapperState.initialValue && "" !== b && null !== b && (a420.value = b);
}
var kb = { html: "http://www.w3.org/1999/xhtml", mathml: "http://www.w3.org/1998/Math/MathML", svg: "http://www.w3.org/2000/svg" };
function lb(a420) {
  switch (a420) {
    case "svg":
      return "http://www.w3.org/2000/svg";
    case "math":
      return "http://www.w3.org/1998/Math/MathML";
    default:
      return "http://www.w3.org/1999/xhtml";
  }
}
function mb(a420, b) {
  return null == a420 || "http://www.w3.org/1999/xhtml" === a420 ? lb(b) : "http://www.w3.org/2000/svg" === a420 && "foreignObject" === b ? "http://www.w3.org/1999/xhtml" : a420;
}
var nb, ob = function(a420) {
  return "undefined" !== typeof MSApp && MSApp.execUnsafeLocalFunction ? function(b, c, d2, e2) {
    MSApp.execUnsafeLocalFunction(function() {
      return a420(b, c, d2, e2);
    });
  } : a420;
}(function(a420, b) {
  if (a420.namespaceURI !== kb.svg || "innerHTML" in a420)
    a420.innerHTML = b;
  else {
    nb = nb || document.createElement("div");
    nb.innerHTML = "<svg>" + b.valueOf().toString() + "</svg>";
    for (b = nb.firstChild; a420.firstChild; )
      a420.removeChild(a420.firstChild);
    for (; b.firstChild; )
      a420.appendChild(b.firstChild);
  }
});
function pb(a420, b) {
  if (b) {
    var c = a420.firstChild;
    if (c && c === a420.lastChild && 3 === c.nodeType) {
      c.nodeValue = b;
      return;
    }
  }
  a420.textContent = b;
}
var qb = {
  animationIterationCount: true,
  borderImageOutset: true,
  borderImageSlice: true,
  borderImageWidth: true,
  boxFlex: true,
  boxFlexGroup: true,
  boxOrdinalGroup: true,
  columnCount: true,
  columns: true,
  flex: true,
  flexGrow: true,
  flexPositive: true,
  flexShrink: true,
  flexNegative: true,
  flexOrder: true,
  gridArea: true,
  gridRow: true,
  gridRowEnd: true,
  gridRowSpan: true,
  gridRowStart: true,
  gridColumn: true,
  gridColumnEnd: true,
  gridColumnSpan: true,
  gridColumnStart: true,
  fontWeight: true,
  lineClamp: true,
  lineHeight: true,
  opacity: true,
  order: true,
  orphans: true,
  tabSize: true,
  widows: true,
  zIndex: true,
  zoom: true,
  fillOpacity: true,
  floodOpacity: true,
  stopOpacity: true,
  strokeDasharray: true,
  strokeDashoffset: true,
  strokeMiterlimit: true,
  strokeOpacity: true,
  strokeWidth: true
}, rb = ["Webkit", "ms", "Moz", "O"];
Object.keys(qb).forEach(function(a420) {
  rb.forEach(function(b) {
    b = b + a420.charAt(0).toUpperCase() + a420.substring(1);
    qb[b] = qb[a420];
  });
});
function sb(a420, b, c) {
  return null == b || "boolean" === typeof b || "" === b ? "" : c || "number" !== typeof b || 0 === b || qb.hasOwnProperty(a420) && qb[a420] ? ("" + b).trim() : b + "px";
}
function tb(a420, b) {
  a420 = a420.style;
  for (var c in b)
    if (b.hasOwnProperty(c)) {
      var d2 = 0 === c.indexOf("--"), e2 = sb(c, b[c], d2);
      "float" === c && (c = "cssFloat");
      d2 ? a420.setProperty(c, e2) : a420[c] = e2;
    }
}
var ub = m$3({ menuitem: true }, { area: true, base: true, br: true, col: true, embed: true, hr: true, img: true, input: true, keygen: true, link: true, meta: true, param: true, source: true, track: true, wbr: true });
function vb(a420, b) {
  if (b) {
    if (ub[a420] && (null != b.children || null != b.dangerouslySetInnerHTML))
      throw Error(y$1(137, a420));
    if (null != b.dangerouslySetInnerHTML) {
      if (null != b.children)
        throw Error(y$1(60));
      if (!("object" === typeof b.dangerouslySetInnerHTML && "__html" in b.dangerouslySetInnerHTML))
        throw Error(y$1(61));
    }
    if (null != b.style && "object" !== typeof b.style)
      throw Error(y$1(62));
  }
}
function wb(a420, b) {
  if (-1 === a420.indexOf("-"))
    return "string" === typeof b.is;
  switch (a420) {
    case "annotation-xml":
    case "color-profile":
    case "font-face":
    case "font-face-src":
    case "font-face-uri":
    case "font-face-format":
    case "font-face-name":
    case "missing-glyph":
      return false;
    default:
      return true;
  }
}
function xb(a420) {
  a420 = a420.target || a420.srcElement || window;
  a420.correspondingUseElement && (a420 = a420.correspondingUseElement);
  return 3 === a420.nodeType ? a420.parentNode : a420;
}
var yb = null, zb = null, Ab = null;
function Bb(a420) {
  if (a420 = Cb(a420)) {
    if ("function" !== typeof yb)
      throw Error(y$1(280));
    var b = a420.stateNode;
    b && (b = Db(b), yb(a420.stateNode, a420.type, b));
  }
}
function Eb(a420) {
  zb ? Ab ? Ab.push(a420) : Ab = [a420] : zb = a420;
}
function Fb() {
  if (zb) {
    var a420 = zb, b = Ab;
    Ab = zb = null;
    Bb(a420);
    if (b)
      for (a420 = 0; a420 < b.length; a420++)
        Bb(b[a420]);
  }
}
function Gb(a420, b) {
  return a420(b);
}
function Hb(a420, b, c, d2, e2) {
  return a420(b, c, d2, e2);
}
function Ib() {
}
var Jb = Gb, Kb = false, Lb = false;
function Mb() {
  if (null !== zb || null !== Ab)
    Ib(), Fb();
}
function Nb(a420, b, c) {
  if (Lb)
    return a420(b, c);
  Lb = true;
  try {
    return Jb(a420, b, c);
  } finally {
    Lb = false, Mb();
  }
}
function Ob(a420, b) {
  var c = a420.stateNode;
  if (null === c)
    return null;
  var d2 = Db(c);
  if (null === d2)
    return null;
  c = d2[b];
  a:
    switch (b) {
      case "onClick":
      case "onClickCapture":
      case "onDoubleClick":
      case "onDoubleClickCapture":
      case "onMouseDown":
      case "onMouseDownCapture":
      case "onMouseMove":
      case "onMouseMoveCapture":
      case "onMouseUp":
      case "onMouseUpCapture":
      case "onMouseEnter":
        (d2 = !d2.disabled) || (a420 = a420.type, d2 = !("button" === a420 || "input" === a420 || "select" === a420 || "textarea" === a420));
        a420 = !d2;
        break a;
      default:
        a420 = false;
    }
  if (a420)
    return null;
  if (c && "function" !== typeof c)
    throw Error(y$1(231, b, typeof c));
  return c;
}
var Pb = false;
if (fa)
  try {
    var Qb = {};
    Object.defineProperty(Qb, "passive", { get: function() {
      Pb = true;
    } });
    window.addEventListener("test", Qb, Qb);
    window.removeEventListener("test", Qb, Qb);
  } catch (a420) {
    Pb = false;
  }
function Rb(a420, b, c, d2, e2, f2, g2, h2, k) {
  var l2 = Array.prototype.slice.call(arguments, 3);
  try {
    b.apply(c, l2);
  } catch (n2) {
    this.onError(n2);
  }
}
var Sb = false, Tb = null, Ub = false, Vb = null, Wb = { onError: function(a420) {
  Sb = true;
  Tb = a420;
} };
function Xb(a420, b, c, d2, e2, f2, g2, h2, k) {
  Sb = false;
  Tb = null;
  Rb.apply(Wb, arguments);
}
function Yb(a420, b, c, d2, e2, f2, g2, h2, k) {
  Xb.apply(this, arguments);
  if (Sb) {
    if (Sb) {
      var l2 = Tb;
      Sb = false;
      Tb = null;
    } else
      throw Error(y$1(198));
    Ub || (Ub = true, Vb = l2);
  }
}
function Zb(a420) {
  var b = a420, c = a420;
  if (a420.alternate)
    for (; b.return; )
      b = b.return;
  else {
    a420 = b;
    do
      b = a420, 0 !== (b.flags & 1026) && (c = b.return), a420 = b.return;
    while (a420);
  }
  return 3 === b.tag ? c : null;
}
function $b(a420) {
  if (13 === a420.tag) {
    var b = a420.memoizedState;
    null === b && (a420 = a420.alternate, null !== a420 && (b = a420.memoizedState));
    if (null !== b)
      return b.dehydrated;
  }
  return null;
}
function ac(a420) {
  if (Zb(a420) !== a420)
    throw Error(y$1(188));
}
function bc(a420) {
  var b = a420.alternate;
  if (!b) {
    b = Zb(a420);
    if (null === b)
      throw Error(y$1(188));
    return b !== a420 ? null : a420;
  }
  for (var c = a420, d2 = b; ; ) {
    var e2 = c.return;
    if (null === e2)
      break;
    var f2 = e2.alternate;
    if (null === f2) {
      d2 = e2.return;
      if (null !== d2) {
        c = d2;
        continue;
      }
      break;
    }
    if (e2.child === f2.child) {
      for (f2 = e2.child; f2; ) {
        if (f2 === c)
          return ac(e2), a420;
        if (f2 === d2)
          return ac(e2), b;
        f2 = f2.sibling;
      }
      throw Error(y$1(188));
    }
    if (c.return !== d2.return)
      c = e2, d2 = f2;
    else {
      for (var g2 = false, h2 = e2.child; h2; ) {
        if (h2 === c) {
          g2 = true;
          c = e2;
          d2 = f2;
          break;
        }
        if (h2 === d2) {
          g2 = true;
          d2 = e2;
          c = f2;
          break;
        }
        h2 = h2.sibling;
      }
      if (!g2) {
        for (h2 = f2.child; h2; ) {
          if (h2 === c) {
            g2 = true;
            c = f2;
            d2 = e2;
            break;
          }
          if (h2 === d2) {
            g2 = true;
            d2 = f2;
            c = e2;
            break;
          }
          h2 = h2.sibling;
        }
        if (!g2)
          throw Error(y$1(189));
      }
    }
    if (c.alternate !== d2)
      throw Error(y$1(190));
  }
  if (3 !== c.tag)
    throw Error(y$1(188));
  return c.stateNode.current === c ? a420 : b;
}
function cc(a420) {
  a420 = bc(a420);
  if (!a420)
    return null;
  for (var b = a420; ; ) {
    if (5 === b.tag || 6 === b.tag)
      return b;
    if (b.child)
      b.child.return = b, b = b.child;
    else {
      if (b === a420)
        break;
      for (; !b.sibling; ) {
        if (!b.return || b.return === a420)
          return null;
        b = b.return;
      }
      b.sibling.return = b.return;
      b = b.sibling;
    }
  }
  return null;
}
function dc(a420, b) {
  for (var c = a420.alternate; null !== b; ) {
    if (b === a420 || b === c)
      return true;
    b = b.return;
  }
  return false;
}
var ec$1, fc, gc, hc, ic = false, jc = [], kc = null, lc = null, mc = null, nc = /* @__PURE__ */ new Map(), oc = /* @__PURE__ */ new Map(), pc = [], qc = "mousedown mouseup touchcancel touchend touchstart auxclick dblclick pointercancel pointerdown pointerup dragend dragstart drop compositionend compositionstart keydown keypress keyup input textInput copy cut paste click change contextmenu reset submit".split(" ");
function rc(a420, b, c, d2, e2) {
  return { blockedOn: a420, domEventName: b, eventSystemFlags: c | 16, nativeEvent: e2, targetContainers: [d2] };
}
function sc(a420, b) {
  switch (a420) {
    case "focusin":
    case "focusout":
      kc = null;
      break;
    case "dragenter":
    case "dragleave":
      lc = null;
      break;
    case "mouseover":
    case "mouseout":
      mc = null;
      break;
    case "pointerover":
    case "pointerout":
      nc.delete(b.pointerId);
      break;
    case "gotpointercapture":
    case "lostpointercapture":
      oc.delete(b.pointerId);
  }
}
function tc(a420, b, c, d2, e2, f2) {
  if (null === a420 || a420.nativeEvent !== f2)
    return a420 = rc(b, c, d2, e2, f2), null !== b && (b = Cb(b), null !== b && fc(b)), a420;
  a420.eventSystemFlags |= d2;
  b = a420.targetContainers;
  null !== e2 && -1 === b.indexOf(e2) && b.push(e2);
  return a420;
}
function uc(a420, b, c, d2, e2) {
  switch (b) {
    case "focusin":
      return kc = tc(kc, a420, b, c, d2, e2), true;
    case "dragenter":
      return lc = tc(lc, a420, b, c, d2, e2), true;
    case "mouseover":
      return mc = tc(mc, a420, b, c, d2, e2), true;
    case "pointerover":
      var f2 = e2.pointerId;
      nc.set(f2, tc(nc.get(f2) || null, a420, b, c, d2, e2));
      return true;
    case "gotpointercapture":
      return f2 = e2.pointerId, oc.set(f2, tc(oc.get(f2) || null, a420, b, c, d2, e2)), true;
  }
  return false;
}
function vc(a420) {
  var b = wc(a420.target);
  if (null !== b) {
    var c = Zb(b);
    if (null !== c) {
      if (b = c.tag, 13 === b) {
        if (b = $b(c), null !== b) {
          a420.blockedOn = b;
          hc(a420.lanePriority, function() {
            r$3.unstable_runWithPriority(a420.priority, function() {
              gc(c);
            });
          });
          return;
        }
      } else if (3 === b && c.stateNode.hydrate) {
        a420.blockedOn = 3 === c.tag ? c.stateNode.containerInfo : null;
        return;
      }
    }
  }
  a420.blockedOn = null;
}
function xc(a420) {
  if (null !== a420.blockedOn)
    return false;
  for (var b = a420.targetContainers; 0 < b.length; ) {
    var c = yc(a420.domEventName, a420.eventSystemFlags, b[0], a420.nativeEvent);
    if (null !== c)
      return b = Cb(c), null !== b && fc(b), a420.blockedOn = c, false;
    b.shift();
  }
  return true;
}
function zc(a420, b, c) {
  xc(a420) && c.delete(b);
}
function Ac() {
  for (ic = false; 0 < jc.length; ) {
    var a420 = jc[0];
    if (null !== a420.blockedOn) {
      a420 = Cb(a420.blockedOn);
      null !== a420 && ec$1(a420);
      break;
    }
    for (var b = a420.targetContainers; 0 < b.length; ) {
      var c = yc(a420.domEventName, a420.eventSystemFlags, b[0], a420.nativeEvent);
      if (null !== c) {
        a420.blockedOn = c;
        break;
      }
      b.shift();
    }
    null === a420.blockedOn && jc.shift();
  }
  null !== kc && xc(kc) && (kc = null);
  null !== lc && xc(lc) && (lc = null);
  null !== mc && xc(mc) && (mc = null);
  nc.forEach(zc);
  oc.forEach(zc);
}
function Bc(a420, b) {
  a420.blockedOn === b && (a420.blockedOn = null, ic || (ic = true, r$3.unstable_scheduleCallback(r$3.unstable_NormalPriority, Ac)));
}
function Cc(a420) {
  function b(b2) {
    return Bc(b2, a420);
  }
  if (0 < jc.length) {
    Bc(jc[0], a420);
    for (var c = 1; c < jc.length; c++) {
      var d2 = jc[c];
      d2.blockedOn === a420 && (d2.blockedOn = null);
    }
  }
  null !== kc && Bc(kc, a420);
  null !== lc && Bc(lc, a420);
  null !== mc && Bc(mc, a420);
  nc.forEach(b);
  oc.forEach(b);
  for (c = 0; c < pc.length; c++)
    d2 = pc[c], d2.blockedOn === a420 && (d2.blockedOn = null);
  for (; 0 < pc.length && (c = pc[0], null === c.blockedOn); )
    vc(c), null === c.blockedOn && pc.shift();
}
function Dc(a420, b) {
  var c = {};
  c[a420.toLowerCase()] = b.toLowerCase();
  c["Webkit" + a420] = "webkit" + b;
  c["Moz" + a420] = "moz" + b;
  return c;
}
var Ec = { animationend: Dc("Animation", "AnimationEnd"), animationiteration: Dc("Animation", "AnimationIteration"), animationstart: Dc("Animation", "AnimationStart"), transitionend: Dc("Transition", "TransitionEnd") }, Fc = {}, Gc = {};
fa && (Gc = document.createElement("div").style, "AnimationEvent" in window || (delete Ec.animationend.animation, delete Ec.animationiteration.animation, delete Ec.animationstart.animation), "TransitionEvent" in window || delete Ec.transitionend.transition);
function Hc(a420) {
  if (Fc[a420])
    return Fc[a420];
  if (!Ec[a420])
    return a420;
  var b = Ec[a420], c;
  for (c in b)
    if (b.hasOwnProperty(c) && c in Gc)
      return Fc[a420] = b[c];
  return a420;
}
var Ic = Hc("animationend"), Jc = Hc("animationiteration"), Kc = Hc("animationstart"), Lc = Hc("transitionend"), Mc = /* @__PURE__ */ new Map(), Nc = /* @__PURE__ */ new Map(), Oc = [
  "abort",
  "abort",
  Ic,
  "animationEnd",
  Jc,
  "animationIteration",
  Kc,
  "animationStart",
  "canplay",
  "canPlay",
  "canplaythrough",
  "canPlayThrough",
  "durationchange",
  "durationChange",
  "emptied",
  "emptied",
  "encrypted",
  "encrypted",
  "ended",
  "ended",
  "error",
  "error",
  "gotpointercapture",
  "gotPointerCapture",
  "load",
  "load",
  "loadeddata",
  "loadedData",
  "loadedmetadata",
  "loadedMetadata",
  "loadstart",
  "loadStart",
  "lostpointercapture",
  "lostPointerCapture",
  "playing",
  "playing",
  "progress",
  "progress",
  "seeking",
  "seeking",
  "stalled",
  "stalled",
  "suspend",
  "suspend",
  "timeupdate",
  "timeUpdate",
  Lc,
  "transitionEnd",
  "waiting",
  "waiting"
];
function Pc(a420, b) {
  for (var c = 0; c < a420.length; c += 2) {
    var d2 = a420[c], e2 = a420[c + 1];
    e2 = "on" + (e2[0].toUpperCase() + e2.slice(1));
    Nc.set(d2, b);
    Mc.set(d2, e2);
    da(e2, [d2]);
  }
}
var Qc = r$3.unstable_now;
Qc();
var F = 8;
function Rc(a420) {
  if (0 !== (1 & a420))
    return F = 15, 1;
  if (0 !== (2 & a420))
    return F = 14, 2;
  if (0 !== (4 & a420))
    return F = 13, 4;
  var b = 24 & a420;
  if (0 !== b)
    return F = 12, b;
  if (0 !== (a420 & 32))
    return F = 11, 32;
  b = 192 & a420;
  if (0 !== b)
    return F = 10, b;
  if (0 !== (a420 & 256))
    return F = 9, 256;
  b = 3584 & a420;
  if (0 !== b)
    return F = 8, b;
  if (0 !== (a420 & 4096))
    return F = 7, 4096;
  b = 4186112 & a420;
  if (0 !== b)
    return F = 6, b;
  b = 62914560 & a420;
  if (0 !== b)
    return F = 5, b;
  if (a420 & 67108864)
    return F = 4, 67108864;
  if (0 !== (a420 & 134217728))
    return F = 3, 134217728;
  b = 805306368 & a420;
  if (0 !== b)
    return F = 2, b;
  if (0 !== (1073741824 & a420))
    return F = 1, 1073741824;
  F = 8;
  return a420;
}
function Sc(a420) {
  switch (a420) {
    case 99:
      return 15;
    case 98:
      return 10;
    case 97:
    case 96:
      return 8;
    case 95:
      return 2;
    default:
      return 0;
  }
}
function Tc(a420) {
  switch (a420) {
    case 15:
    case 14:
      return 99;
    case 13:
    case 12:
    case 11:
    case 10:
      return 98;
    case 9:
    case 8:
    case 7:
    case 6:
    case 4:
    case 5:
      return 97;
    case 3:
    case 2:
    case 1:
      return 95;
    case 0:
      return 90;
    default:
      throw Error(y$1(358, a420));
  }
}
function Uc(a420, b) {
  var c = a420.pendingLanes;
  if (0 === c)
    return F = 0;
  var d2 = 0, e2 = 0, f2 = a420.expiredLanes, g2 = a420.suspendedLanes, h2 = a420.pingedLanes;
  if (0 !== f2)
    d2 = f2, e2 = F = 15;
  else if (f2 = c & 134217727, 0 !== f2) {
    var k = f2 & ~g2;
    0 !== k ? (d2 = Rc(k), e2 = F) : (h2 &= f2, 0 !== h2 && (d2 = Rc(h2), e2 = F));
  } else
    f2 = c & ~g2, 0 !== f2 ? (d2 = Rc(f2), e2 = F) : 0 !== h2 && (d2 = Rc(h2), e2 = F);
  if (0 === d2)
    return 0;
  d2 = 31 - Vc(d2);
  d2 = c & ((0 > d2 ? 0 : 1 << d2) << 1) - 1;
  if (0 !== b && b !== d2 && 0 === (b & g2)) {
    Rc(b);
    if (e2 <= F)
      return b;
    F = e2;
  }
  b = a420.entangledLanes;
  if (0 !== b)
    for (a420 = a420.entanglements, b &= d2; 0 < b; )
      c = 31 - Vc(b), e2 = 1 << c, d2 |= a420[c], b &= ~e2;
  return d2;
}
function Wc(a420) {
  a420 = a420.pendingLanes & -1073741825;
  return 0 !== a420 ? a420 : a420 & 1073741824 ? 1073741824 : 0;
}
function Xc(a420, b) {
  switch (a420) {
    case 15:
      return 1;
    case 14:
      return 2;
    case 12:
      return a420 = Yc(24 & ~b), 0 === a420 ? Xc(10, b) : a420;
    case 10:
      return a420 = Yc(192 & ~b), 0 === a420 ? Xc(8, b) : a420;
    case 8:
      return a420 = Yc(3584 & ~b), 0 === a420 && (a420 = Yc(4186112 & ~b), 0 === a420 && (a420 = 512)), a420;
    case 2:
      return b = Yc(805306368 & ~b), 0 === b && (b = 268435456), b;
  }
  throw Error(y$1(358, a420));
}
function Yc(a420) {
  return a420 & -a420;
}
function Zc(a420) {
  for (var b = [], c = 0; 31 > c; c++)
    b.push(a420);
  return b;
}
function $c(a420, b, c) {
  a420.pendingLanes |= b;
  var d2 = b - 1;
  a420.suspendedLanes &= d2;
  a420.pingedLanes &= d2;
  a420 = a420.eventTimes;
  b = 31 - Vc(b);
  a420[b] = c;
}
var Vc = Math.clz32 ? Math.clz32 : ad, bd = Math.log, cd = Math.LN2;
function ad(a420) {
  return 0 === a420 ? 32 : 31 - (bd(a420) / cd | 0) | 0;
}
var dd = r$3.unstable_UserBlockingPriority, ed = r$3.unstable_runWithPriority, fd = true;
function gd(a420, b, c, d2) {
  Kb || Ib();
  var e2 = hd, f2 = Kb;
  Kb = true;
  try {
    Hb(e2, a420, b, c, d2);
  } finally {
    (Kb = f2) || Mb();
  }
}
function id(a420, b, c, d2) {
  ed(dd, hd.bind(null, a420, b, c, d2));
}
function hd(a420, b, c, d2) {
  if (fd) {
    var e2;
    if ((e2 = 0 === (b & 4)) && 0 < jc.length && -1 < qc.indexOf(a420))
      a420 = rc(null, a420, b, c, d2), jc.push(a420);
    else {
      var f2 = yc(a420, b, c, d2);
      if (null === f2)
        e2 && sc(a420, d2);
      else {
        if (e2) {
          if (-1 < qc.indexOf(a420)) {
            a420 = rc(f2, a420, b, c, d2);
            jc.push(a420);
            return;
          }
          if (uc(f2, a420, b, c, d2))
            return;
          sc(a420, d2);
        }
        jd(a420, b, d2, null, c);
      }
    }
  }
}
function yc(a420, b, c, d2) {
  var e2 = xb(d2);
  e2 = wc(e2);
  if (null !== e2) {
    var f2 = Zb(e2);
    if (null === f2)
      e2 = null;
    else {
      var g2 = f2.tag;
      if (13 === g2) {
        e2 = $b(f2);
        if (null !== e2)
          return e2;
        e2 = null;
      } else if (3 === g2) {
        if (f2.stateNode.hydrate)
          return 3 === f2.tag ? f2.stateNode.containerInfo : null;
        e2 = null;
      } else
        f2 !== e2 && (e2 = null);
    }
  }
  jd(a420, b, d2, e2, c);
  return null;
}
var kd = null, ld = null, md = null;
function nd() {
  if (md)
    return md;
  var a420, b = ld, c = b.length, d2, e2 = "value" in kd ? kd.value : kd.textContent, f2 = e2.length;
  for (a420 = 0; a420 < c && b[a420] === e2[a420]; a420++)
    ;
  var g2 = c - a420;
  for (d2 = 1; d2 <= g2 && b[c - d2] === e2[f2 - d2]; d2++)
    ;
  return md = e2.slice(a420, 1 < d2 ? 1 - d2 : void 0);
}
function od(a420) {
  var b = a420.keyCode;
  "charCode" in a420 ? (a420 = a420.charCode, 0 === a420 && 13 === b && (a420 = 13)) : a420 = b;
  10 === a420 && (a420 = 13);
  return 32 <= a420 || 13 === a420 ? a420 : 0;
}
function pd() {
  return true;
}
function qd() {
  return false;
}
function rd(a420) {
  function b(b2, d2, e2, f2, g2) {
    this._reactName = b2;
    this._targetInst = e2;
    this.type = d2;
    this.nativeEvent = f2;
    this.target = g2;
    this.currentTarget = null;
    for (var c in a420)
      a420.hasOwnProperty(c) && (b2 = a420[c], this[c] = b2 ? b2(f2) : f2[c]);
    this.isDefaultPrevented = (null != f2.defaultPrevented ? f2.defaultPrevented : false === f2.returnValue) ? pd : qd;
    this.isPropagationStopped = qd;
    return this;
  }
  m$3(b.prototype, { preventDefault: function() {
    this.defaultPrevented = true;
    var a421 = this.nativeEvent;
    a421 && (a421.preventDefault ? a421.preventDefault() : "unknown" !== typeof a421.returnValue && (a421.returnValue = false), this.isDefaultPrevented = pd);
  }, stopPropagation: function() {
    var a421 = this.nativeEvent;
    a421 && (a421.stopPropagation ? a421.stopPropagation() : "unknown" !== typeof a421.cancelBubble && (a421.cancelBubble = true), this.isPropagationStopped = pd);
  }, persist: function() {
  }, isPersistent: pd });
  return b;
}
var sd = { eventPhase: 0, bubbles: 0, cancelable: 0, timeStamp: function(a420) {
  return a420.timeStamp || Date.now();
}, defaultPrevented: 0, isTrusted: 0 }, td = rd(sd), ud = m$3({}, sd, { view: 0, detail: 0 }), vd = rd(ud), wd, xd, yd, Ad = m$3({}, ud, { screenX: 0, screenY: 0, clientX: 0, clientY: 0, pageX: 0, pageY: 0, ctrlKey: 0, shiftKey: 0, altKey: 0, metaKey: 0, getModifierState: zd, button: 0, buttons: 0, relatedTarget: function(a420) {
  return void 0 === a420.relatedTarget ? a420.fromElement === a420.srcElement ? a420.toElement : a420.fromElement : a420.relatedTarget;
}, movementX: function(a420) {
  if ("movementX" in a420)
    return a420.movementX;
  a420 !== yd && (yd && "mousemove" === a420.type ? (wd = a420.screenX - yd.screenX, xd = a420.screenY - yd.screenY) : xd = wd = 0, yd = a420);
  return wd;
}, movementY: function(a420) {
  return "movementY" in a420 ? a420.movementY : xd;
} }), Bd = rd(Ad), Cd = m$3({}, Ad, { dataTransfer: 0 }), Dd = rd(Cd), Ed = m$3({}, ud, { relatedTarget: 0 }), Fd = rd(Ed), Gd = m$3({}, sd, { animationName: 0, elapsedTime: 0, pseudoElement: 0 }), Hd = rd(Gd), Id = m$3({}, sd, { clipboardData: function(a420) {
  return "clipboardData" in a420 ? a420.clipboardData : window.clipboardData;
} }), Jd = rd(Id), Kd = m$3({}, sd, { data: 0 }), Ld = rd(Kd), Md = {
  Esc: "Escape",
  Spacebar: " ",
  Left: "ArrowLeft",
  Up: "ArrowUp",
  Right: "ArrowRight",
  Down: "ArrowDown",
  Del: "Delete",
  Win: "OS",
  Menu: "ContextMenu",
  Apps: "ContextMenu",
  Scroll: "ScrollLock",
  MozPrintableKey: "Unidentified"
}, Nd = {
  8: "Backspace",
  9: "Tab",
  12: "Clear",
  13: "Enter",
  16: "Shift",
  17: "Control",
  18: "Alt",
  19: "Pause",
  20: "CapsLock",
  27: "Escape",
  32: " ",
  33: "PageUp",
  34: "PageDown",
  35: "End",
  36: "Home",
  37: "ArrowLeft",
  38: "ArrowUp",
  39: "ArrowRight",
  40: "ArrowDown",
  45: "Insert",
  46: "Delete",
  112: "F1",
  113: "F2",
  114: "F3",
  115: "F4",
  116: "F5",
  117: "F6",
  118: "F7",
  119: "F8",
  120: "F9",
  121: "F10",
  122: "F11",
  123: "F12",
  144: "NumLock",
  145: "ScrollLock",
  224: "Meta"
}, Od = { Alt: "altKey", Control: "ctrlKey", Meta: "metaKey", Shift: "shiftKey" };
function Pd(a420) {
  var b = this.nativeEvent;
  return b.getModifierState ? b.getModifierState(a420) : (a420 = Od[a420]) ? !!b[a420] : false;
}
function zd() {
  return Pd;
}
var Qd = m$3({}, ud, { key: function(a420) {
  if (a420.key) {
    var b = Md[a420.key] || a420.key;
    if ("Unidentified" !== b)
      return b;
  }
  return "keypress" === a420.type ? (a420 = od(a420), 13 === a420 ? "Enter" : String.fromCharCode(a420)) : "keydown" === a420.type || "keyup" === a420.type ? Nd[a420.keyCode] || "Unidentified" : "";
}, code: 0, location: 0, ctrlKey: 0, shiftKey: 0, altKey: 0, metaKey: 0, repeat: 0, locale: 0, getModifierState: zd, charCode: function(a420) {
  return "keypress" === a420.type ? od(a420) : 0;
}, keyCode: function(a420) {
  return "keydown" === a420.type || "keyup" === a420.type ? a420.keyCode : 0;
}, which: function(a420) {
  return "keypress" === a420.type ? od(a420) : "keydown" === a420.type || "keyup" === a420.type ? a420.keyCode : 0;
} }), Rd = rd(Qd), Sd = m$3({}, Ad, { pointerId: 0, width: 0, height: 0, pressure: 0, tangentialPressure: 0, tiltX: 0, tiltY: 0, twist: 0, pointerType: 0, isPrimary: 0 }), Td = rd(Sd), Ud = m$3({}, ud, { touches: 0, targetTouches: 0, changedTouches: 0, altKey: 0, metaKey: 0, ctrlKey: 0, shiftKey: 0, getModifierState: zd }), Vd = rd(Ud), Wd = m$3({}, sd, { propertyName: 0, elapsedTime: 0, pseudoElement: 0 }), Xd = rd(Wd), Yd = m$3({}, Ad, {
  deltaX: function(a420) {
    return "deltaX" in a420 ? a420.deltaX : "wheelDeltaX" in a420 ? -a420.wheelDeltaX : 0;
  },
  deltaY: function(a420) {
    return "deltaY" in a420 ? a420.deltaY : "wheelDeltaY" in a420 ? -a420.wheelDeltaY : "wheelDelta" in a420 ? -a420.wheelDelta : 0;
  },
  deltaZ: 0,
  deltaMode: 0
}), Zd = rd(Yd), $d = [9, 13, 27, 32], ae = fa && "CompositionEvent" in window, be = null;
fa && "documentMode" in document && (be = document.documentMode);
var ce = fa && "TextEvent" in window && !be, de = fa && (!ae || be && 8 < be && 11 >= be), ee = String.fromCharCode(32), fe = false;
function ge(a420, b) {
  switch (a420) {
    case "keyup":
      return -1 !== $d.indexOf(b.keyCode);
    case "keydown":
      return 229 !== b.keyCode;
    case "keypress":
    case "mousedown":
    case "focusout":
      return true;
    default:
      return false;
  }
}
function he(a420) {
  a420 = a420.detail;
  return "object" === typeof a420 && "data" in a420 ? a420.data : null;
}
var ie = false;
function je(a420, b) {
  switch (a420) {
    case "compositionend":
      return he(b);
    case "keypress":
      if (32 !== b.which)
        return null;
      fe = true;
      return ee;
    case "textInput":
      return a420 = b.data, a420 === ee && fe ? null : a420;
    default:
      return null;
  }
}
function ke(a420, b) {
  if (ie)
    return "compositionend" === a420 || !ae && ge(a420, b) ? (a420 = nd(), md = ld = kd = null, ie = false, a420) : null;
  switch (a420) {
    case "paste":
      return null;
    case "keypress":
      if (!(b.ctrlKey || b.altKey || b.metaKey) || b.ctrlKey && b.altKey) {
        if (b.char && 1 < b.char.length)
          return b.char;
        if (b.which)
          return String.fromCharCode(b.which);
      }
      return null;
    case "compositionend":
      return de && "ko" !== b.locale ? null : b.data;
    default:
      return null;
  }
}
var le = { color: true, date: true, datetime: true, "datetime-local": true, email: true, month: true, number: true, password: true, range: true, search: true, tel: true, text: true, time: true, url: true, week: true };
function me(a420) {
  var b = a420 && a420.nodeName && a420.nodeName.toLowerCase();
  return "input" === b ? !!le[a420.type] : "textarea" === b ? true : false;
}
function ne(a420, b, c, d2) {
  Eb(d2);
  b = oe(b, "onChange");
  0 < b.length && (c = new td("onChange", "change", null, c, d2), a420.push({ event: c, listeners: b }));
}
var pe = null, qe = null;
function re(a420) {
  se(a420, 0);
}
function te(a420) {
  var b = ue(a420);
  if (Wa(b))
    return a420;
}
function ve(a420, b) {
  if ("change" === a420)
    return b;
}
var we = false;
if (fa) {
  var xe;
  if (fa) {
    var ye = "oninput" in document;
    if (!ye) {
      var ze = document.createElement("div");
      ze.setAttribute("oninput", "return;");
      ye = "function" === typeof ze.oninput;
    }
    xe = ye;
  } else
    xe = false;
  we = xe && (!document.documentMode || 9 < document.documentMode);
}
function Ae() {
  pe && (pe.detachEvent("onpropertychange", Be), qe = pe = null);
}
function Be(a420) {
  if ("value" === a420.propertyName && te(qe)) {
    var b = [];
    ne(b, qe, a420, xb(a420));
    a420 = re;
    if (Kb)
      a420(b);
    else {
      Kb = true;
      try {
        Gb(a420, b);
      } finally {
        Kb = false, Mb();
      }
    }
  }
}
function Ce(a420, b, c) {
  "focusin" === a420 ? (Ae(), pe = b, qe = c, pe.attachEvent("onpropertychange", Be)) : "focusout" === a420 && Ae();
}
function De(a420) {
  if ("selectionchange" === a420 || "keyup" === a420 || "keydown" === a420)
    return te(qe);
}
function Ee(a420, b) {
  if ("click" === a420)
    return te(b);
}
function Fe(a420, b) {
  if ("input" === a420 || "change" === a420)
    return te(b);
}
function Ge(a420, b) {
  return a420 === b && (0 !== a420 || 1 / a420 === 1 / b) || a420 !== a420 && b !== b;
}
var He = "function" === typeof Object.is ? Object.is : Ge, Ie = Object.prototype.hasOwnProperty;
function Je(a420, b) {
  if (He(a420, b))
    return true;
  if ("object" !== typeof a420 || null === a420 || "object" !== typeof b || null === b)
    return false;
  var c = Object.keys(a420), d2 = Object.keys(b);
  if (c.length !== d2.length)
    return false;
  for (d2 = 0; d2 < c.length; d2++)
    if (!Ie.call(b, c[d2]) || !He(a420[c[d2]], b[c[d2]]))
      return false;
  return true;
}
function Ke(a420) {
  for (; a420 && a420.firstChild; )
    a420 = a420.firstChild;
  return a420;
}
function Le(a420, b) {
  var c = Ke(a420);
  a420 = 0;
  for (var d2; c; ) {
    if (3 === c.nodeType) {
      d2 = a420 + c.textContent.length;
      if (a420 <= b && d2 >= b)
        return { node: c, offset: b - a420 };
      a420 = d2;
    }
    a: {
      for (; c; ) {
        if (c.nextSibling) {
          c = c.nextSibling;
          break a;
        }
        c = c.parentNode;
      }
      c = void 0;
    }
    c = Ke(c);
  }
}
function Me(a420, b) {
  return a420 && b ? a420 === b ? true : a420 && 3 === a420.nodeType ? false : b && 3 === b.nodeType ? Me(a420, b.parentNode) : "contains" in a420 ? a420.contains(b) : a420.compareDocumentPosition ? !!(a420.compareDocumentPosition(b) & 16) : false : false;
}
function Ne() {
  for (var a420 = window, b = Xa(); b instanceof a420.HTMLIFrameElement; ) {
    try {
      var c = "string" === typeof b.contentWindow.location.href;
    } catch (d2) {
      c = false;
    }
    if (c)
      a420 = b.contentWindow;
    else
      break;
    b = Xa(a420.document);
  }
  return b;
}
function Oe(a420) {
  var b = a420 && a420.nodeName && a420.nodeName.toLowerCase();
  return b && ("input" === b && ("text" === a420.type || "search" === a420.type || "tel" === a420.type || "url" === a420.type || "password" === a420.type) || "textarea" === b || "true" === a420.contentEditable);
}
var Pe = fa && "documentMode" in document && 11 >= document.documentMode, Qe = null, Re = null, Se = null, Te = false;
function Ue(a420, b, c) {
  var d2 = c.window === c ? c.document : 9 === c.nodeType ? c : c.ownerDocument;
  Te || null == Qe || Qe !== Xa(d2) || (d2 = Qe, "selectionStart" in d2 && Oe(d2) ? d2 = { start: d2.selectionStart, end: d2.selectionEnd } : (d2 = (d2.ownerDocument && d2.ownerDocument.defaultView || window).getSelection(), d2 = { anchorNode: d2.anchorNode, anchorOffset: d2.anchorOffset, focusNode: d2.focusNode, focusOffset: d2.focusOffset }), Se && Je(Se, d2) || (Se = d2, d2 = oe(Re, "onSelect"), 0 < d2.length && (b = new td("onSelect", "select", null, b, c), a420.push({ event: b, listeners: d2 }), b.target = Qe)));
}
Pc(
  "cancel cancel click click close close contextmenu contextMenu copy copy cut cut auxclick auxClick dblclick doubleClick dragend dragEnd dragstart dragStart drop drop focusin focus focusout blur input input invalid invalid keydown keyDown keypress keyPress keyup keyUp mousedown mouseDown mouseup mouseUp paste paste pause pause play play pointercancel pointerCancel pointerdown pointerDown pointerup pointerUp ratechange rateChange reset reset seeked seeked submit submit touchcancel touchCancel touchend touchEnd touchstart touchStart volumechange volumeChange".split(" "),
  0
);
Pc("drag drag dragenter dragEnter dragexit dragExit dragleave dragLeave dragover dragOver mousemove mouseMove mouseout mouseOut mouseover mouseOver pointermove pointerMove pointerout pointerOut pointerover pointerOver scroll scroll toggle toggle touchmove touchMove wheel wheel".split(" "), 1);
Pc(Oc, 2);
for (var Ve = "change selectionchange textInput compositionstart compositionend compositionupdate".split(" "), We = 0; We < Ve.length; We++)
  Nc.set(Ve[We], 0);
ea("onMouseEnter", ["mouseout", "mouseover"]);
ea("onMouseLeave", ["mouseout", "mouseover"]);
ea("onPointerEnter", ["pointerout", "pointerover"]);
ea("onPointerLeave", ["pointerout", "pointerover"]);
da("onChange", "change click focusin focusout input keydown keyup selectionchange".split(" "));
da("onSelect", "focusout contextmenu dragend focusin keydown keyup mousedown mouseup selectionchange".split(" "));
da("onBeforeInput", ["compositionend", "keypress", "textInput", "paste"]);
da("onCompositionEnd", "compositionend focusout keydown keypress keyup mousedown".split(" "));
da("onCompositionStart", "compositionstart focusout keydown keypress keyup mousedown".split(" "));
da("onCompositionUpdate", "compositionupdate focusout keydown keypress keyup mousedown".split(" "));
var Xe = "abort canplay canplaythrough durationchange emptied encrypted ended error loadeddata loadedmetadata loadstart pause play playing progress ratechange seeked seeking stalled suspend timeupdate volumechange waiting".split(" "), Ye = new Set("cancel close invalid load scroll toggle".split(" ").concat(Xe));
function Ze(a420, b, c) {
  var d2 = a420.type || "unknown-event";
  a420.currentTarget = c;
  Yb(d2, b, void 0, a420);
  a420.currentTarget = null;
}
function se(a420, b) {
  b = 0 !== (b & 4);
  for (var c = 0; c < a420.length; c++) {
    var d2 = a420[c], e2 = d2.event;
    d2 = d2.listeners;
    a: {
      var f2 = void 0;
      if (b)
        for (var g2 = d2.length - 1; 0 <= g2; g2--) {
          var h2 = d2[g2], k = h2.instance, l2 = h2.currentTarget;
          h2 = h2.listener;
          if (k !== f2 && e2.isPropagationStopped())
            break a;
          Ze(e2, h2, l2);
          f2 = k;
        }
      else
        for (g2 = 0; g2 < d2.length; g2++) {
          h2 = d2[g2];
          k = h2.instance;
          l2 = h2.currentTarget;
          h2 = h2.listener;
          if (k !== f2 && e2.isPropagationStopped())
            break a;
          Ze(e2, h2, l2);
          f2 = k;
        }
    }
  }
  if (Ub)
    throw a420 = Vb, Ub = false, Vb = null, a420;
}
function G$1(a420, b) {
  var c = $e(b), d2 = a420 + "__bubble";
  c.has(d2) || (af(b, a420, 2, false), c.add(d2));
}
var bf = "_reactListening" + Math.random().toString(36).slice(2);
function cf(a420) {
  a420[bf] || (a420[bf] = true, ba.forEach(function(b) {
    Ye.has(b) || df(b, false, a420, null);
    df(b, true, a420, null);
  }));
}
function df(a420, b, c, d2) {
  var e2 = 4 < arguments.length && void 0 !== arguments[4] ? arguments[4] : 0, f2 = c;
  "selectionchange" === a420 && 9 !== c.nodeType && (f2 = c.ownerDocument);
  if (null !== d2 && !b && Ye.has(a420)) {
    if ("scroll" !== a420)
      return;
    e2 |= 2;
    f2 = d2;
  }
  var g2 = $e(f2), h2 = a420 + "__" + (b ? "capture" : "bubble");
  g2.has(h2) || (b && (e2 |= 4), af(f2, a420, e2, b), g2.add(h2));
}
function af(a420, b, c, d2) {
  var e2 = Nc.get(b);
  switch (void 0 === e2 ? 2 : e2) {
    case 0:
      e2 = gd;
      break;
    case 1:
      e2 = id;
      break;
    default:
      e2 = hd;
  }
  c = e2.bind(null, b, c, a420);
  e2 = void 0;
  !Pb || "touchstart" !== b && "touchmove" !== b && "wheel" !== b || (e2 = true);
  d2 ? void 0 !== e2 ? a420.addEventListener(b, c, { capture: true, passive: e2 }) : a420.addEventListener(b, c, true) : void 0 !== e2 ? a420.addEventListener(b, c, { passive: e2 }) : a420.addEventListener(b, c, false);
}
function jd(a420, b, c, d2, e2) {
  var f2 = d2;
  if (0 === (b & 1) && 0 === (b & 2) && null !== d2)
    a:
      for (; ; ) {
        if (null === d2)
          return;
        var g2 = d2.tag;
        if (3 === g2 || 4 === g2) {
          var h2 = d2.stateNode.containerInfo;
          if (h2 === e2 || 8 === h2.nodeType && h2.parentNode === e2)
            break;
          if (4 === g2)
            for (g2 = d2.return; null !== g2; ) {
              var k = g2.tag;
              if (3 === k || 4 === k) {
                if (k = g2.stateNode.containerInfo, k === e2 || 8 === k.nodeType && k.parentNode === e2)
                  return;
              }
              g2 = g2.return;
            }
          for (; null !== h2; ) {
            g2 = wc(h2);
            if (null === g2)
              return;
            k = g2.tag;
            if (5 === k || 6 === k) {
              d2 = f2 = g2;
              continue a;
            }
            h2 = h2.parentNode;
          }
        }
        d2 = d2.return;
      }
  Nb(function() {
    var d3 = f2, e3 = xb(c), g3 = [];
    a: {
      var h3 = Mc.get(a420);
      if (void 0 !== h3) {
        var k2 = td, x2 = a420;
        switch (a420) {
          case "keypress":
            if (0 === od(c))
              break a;
          case "keydown":
          case "keyup":
            k2 = Rd;
            break;
          case "focusin":
            x2 = "focus";
            k2 = Fd;
            break;
          case "focusout":
            x2 = "blur";
            k2 = Fd;
            break;
          case "beforeblur":
          case "afterblur":
            k2 = Fd;
            break;
          case "click":
            if (2 === c.button)
              break a;
          case "auxclick":
          case "dblclick":
          case "mousedown":
          case "mousemove":
          case "mouseup":
          case "mouseout":
          case "mouseover":
          case "contextmenu":
            k2 = Bd;
            break;
          case "drag":
          case "dragend":
          case "dragenter":
          case "dragexit":
          case "dragleave":
          case "dragover":
          case "dragstart":
          case "drop":
            k2 = Dd;
            break;
          case "touchcancel":
          case "touchend":
          case "touchmove":
          case "touchstart":
            k2 = Vd;
            break;
          case Ic:
          case Jc:
          case Kc:
            k2 = Hd;
            break;
          case Lc:
            k2 = Xd;
            break;
          case "scroll":
            k2 = vd;
            break;
          case "wheel":
            k2 = Zd;
            break;
          case "copy":
          case "cut":
          case "paste":
            k2 = Jd;
            break;
          case "gotpointercapture":
          case "lostpointercapture":
          case "pointercancel":
          case "pointerdown":
          case "pointermove":
          case "pointerout":
          case "pointerover":
          case "pointerup":
            k2 = Td;
        }
        var w2 = 0 !== (b & 4), z2 = !w2 && "scroll" === a420, u2 = w2 ? null !== h3 ? h3 + "Capture" : null : h3;
        w2 = [];
        for (var t2 = d3, q2; null !== t2; ) {
          q2 = t2;
          var v2 = q2.stateNode;
          5 === q2.tag && null !== v2 && (q2 = v2, null !== u2 && (v2 = Ob(t2, u2), null != v2 && w2.push(ef(t2, v2, q2))));
          if (z2)
            break;
          t2 = t2.return;
        }
        0 < w2.length && (h3 = new k2(h3, x2, null, c, e3), g3.push({ event: h3, listeners: w2 }));
      }
    }
    if (0 === (b & 7)) {
      a: {
        h3 = "mouseover" === a420 || "pointerover" === a420;
        k2 = "mouseout" === a420 || "pointerout" === a420;
        if (h3 && 0 === (b & 16) && (x2 = c.relatedTarget || c.fromElement) && (wc(x2) || x2[ff]))
          break a;
        if (k2 || h3) {
          h3 = e3.window === e3 ? e3 : (h3 = e3.ownerDocument) ? h3.defaultView || h3.parentWindow : window;
          if (k2) {
            if (x2 = c.relatedTarget || c.toElement, k2 = d3, x2 = x2 ? wc(x2) : null, null !== x2 && (z2 = Zb(x2), x2 !== z2 || 5 !== x2.tag && 6 !== x2.tag))
              x2 = null;
          } else
            k2 = null, x2 = d3;
          if (k2 !== x2) {
            w2 = Bd;
            v2 = "onMouseLeave";
            u2 = "onMouseEnter";
            t2 = "mouse";
            if ("pointerout" === a420 || "pointerover" === a420)
              w2 = Td, v2 = "onPointerLeave", u2 = "onPointerEnter", t2 = "pointer";
            z2 = null == k2 ? h3 : ue(k2);
            q2 = null == x2 ? h3 : ue(x2);
            h3 = new w2(v2, t2 + "leave", k2, c, e3);
            h3.target = z2;
            h3.relatedTarget = q2;
            v2 = null;
            wc(e3) === d3 && (w2 = new w2(u2, t2 + "enter", x2, c, e3), w2.target = q2, w2.relatedTarget = z2, v2 = w2);
            z2 = v2;
            if (k2 && x2)
              b: {
                w2 = k2;
                u2 = x2;
                t2 = 0;
                for (q2 = w2; q2; q2 = gf(q2))
                  t2++;
                q2 = 0;
                for (v2 = u2; v2; v2 = gf(v2))
                  q2++;
                for (; 0 < t2 - q2; )
                  w2 = gf(w2), t2--;
                for (; 0 < q2 - t2; )
                  u2 = gf(u2), q2--;
                for (; t2--; ) {
                  if (w2 === u2 || null !== u2 && w2 === u2.alternate)
                    break b;
                  w2 = gf(w2);
                  u2 = gf(u2);
                }
                w2 = null;
              }
            else
              w2 = null;
            null !== k2 && hf(g3, h3, k2, w2, false);
            null !== x2 && null !== z2 && hf(g3, z2, x2, w2, true);
          }
        }
      }
      a: {
        h3 = d3 ? ue(d3) : window;
        k2 = h3.nodeName && h3.nodeName.toLowerCase();
        if ("select" === k2 || "input" === k2 && "file" === h3.type)
          var J2 = ve;
        else if (me(h3))
          if (we)
            J2 = Fe;
          else {
            J2 = De;
            var K2 = Ce;
          }
        else
          (k2 = h3.nodeName) && "input" === k2.toLowerCase() && ("checkbox" === h3.type || "radio" === h3.type) && (J2 = Ee);
        if (J2 && (J2 = J2(a420, d3))) {
          ne(g3, J2, c, e3);
          break a;
        }
        K2 && K2(a420, h3, d3);
        "focusout" === a420 && (K2 = h3._wrapperState) && K2.controlled && "number" === h3.type && bb(h3, "number", h3.value);
      }
      K2 = d3 ? ue(d3) : window;
      switch (a420) {
        case "focusin":
          if (me(K2) || "true" === K2.contentEditable)
            Qe = K2, Re = d3, Se = null;
          break;
        case "focusout":
          Se = Re = Qe = null;
          break;
        case "mousedown":
          Te = true;
          break;
        case "contextmenu":
        case "mouseup":
        case "dragend":
          Te = false;
          Ue(g3, c, e3);
          break;
        case "selectionchange":
          if (Pe)
            break;
        case "keydown":
        case "keyup":
          Ue(g3, c, e3);
      }
      var Q2;
      if (ae)
        b: {
          switch (a420) {
            case "compositionstart":
              var L2 = "onCompositionStart";
              break b;
            case "compositionend":
              L2 = "onCompositionEnd";
              break b;
            case "compositionupdate":
              L2 = "onCompositionUpdate";
              break b;
          }
          L2 = void 0;
        }
      else
        ie ? ge(a420, c) && (L2 = "onCompositionEnd") : "keydown" === a420 && 229 === c.keyCode && (L2 = "onCompositionStart");
      L2 && (de && "ko" !== c.locale && (ie || "onCompositionStart" !== L2 ? "onCompositionEnd" === L2 && ie && (Q2 = nd()) : (kd = e3, ld = "value" in kd ? kd.value : kd.textContent, ie = true)), K2 = oe(d3, L2), 0 < K2.length && (L2 = new Ld(L2, a420, null, c, e3), g3.push({ event: L2, listeners: K2 }), Q2 ? L2.data = Q2 : (Q2 = he(c), null !== Q2 && (L2.data = Q2))));
      if (Q2 = ce ? je(a420, c) : ke(a420, c))
        d3 = oe(d3, "onBeforeInput"), 0 < d3.length && (e3 = new Ld(
          "onBeforeInput",
          "beforeinput",
          null,
          c,
          e3
        ), g3.push({ event: e3, listeners: d3 }), e3.data = Q2);
    }
    se(g3, b);
  });
}
function ef(a420, b, c) {
  return { instance: a420, listener: b, currentTarget: c };
}
function oe(a420, b) {
  for (var c = b + "Capture", d2 = []; null !== a420; ) {
    var e2 = a420, f2 = e2.stateNode;
    5 === e2.tag && null !== f2 && (e2 = f2, f2 = Ob(a420, c), null != f2 && d2.unshift(ef(a420, f2, e2)), f2 = Ob(a420, b), null != f2 && d2.push(ef(a420, f2, e2)));
    a420 = a420.return;
  }
  return d2;
}
function gf(a420) {
  if (null === a420)
    return null;
  do
    a420 = a420.return;
  while (a420 && 5 !== a420.tag);
  return a420 ? a420 : null;
}
function hf(a420, b, c, d2, e2) {
  for (var f2 = b._reactName, g2 = []; null !== c && c !== d2; ) {
    var h2 = c, k = h2.alternate, l2 = h2.stateNode;
    if (null !== k && k === d2)
      break;
    5 === h2.tag && null !== l2 && (h2 = l2, e2 ? (k = Ob(c, f2), null != k && g2.unshift(ef(c, k, h2))) : e2 || (k = Ob(c, f2), null != k && g2.push(ef(c, k, h2))));
    c = c.return;
  }
  0 !== g2.length && a420.push({ event: b, listeners: g2 });
}
function jf() {
}
var kf = null, lf = null;
function mf(a420, b) {
  switch (a420) {
    case "button":
    case "input":
    case "select":
    case "textarea":
      return !!b.autoFocus;
  }
  return false;
}
function nf(a420, b) {
  return "textarea" === a420 || "option" === a420 || "noscript" === a420 || "string" === typeof b.children || "number" === typeof b.children || "object" === typeof b.dangerouslySetInnerHTML && null !== b.dangerouslySetInnerHTML && null != b.dangerouslySetInnerHTML.__html;
}
var of = "function" === typeof setTimeout ? setTimeout : void 0, pf = "function" === typeof clearTimeout ? clearTimeout : void 0;
function qf(a420) {
  1 === a420.nodeType ? a420.textContent = "" : 9 === a420.nodeType && (a420 = a420.body, null != a420 && (a420.textContent = ""));
}
function rf(a420) {
  for (; null != a420; a420 = a420.nextSibling) {
    var b = a420.nodeType;
    if (1 === b || 3 === b)
      break;
  }
  return a420;
}
function sf(a420) {
  a420 = a420.previousSibling;
  for (var b = 0; a420; ) {
    if (8 === a420.nodeType) {
      var c = a420.data;
      if ("$" === c || "$!" === c || "$?" === c) {
        if (0 === b)
          return a420;
        b--;
      } else
        "/$" === c && b++;
    }
    a420 = a420.previousSibling;
  }
  return null;
}
var tf = 0;
function uf(a420) {
  return { $$typeof: Ga, toString: a420, valueOf: a420 };
}
var vf = Math.random().toString(36).slice(2), wf = "__reactFiber$" + vf, xf = "__reactProps$" + vf, ff = "__reactContainer$" + vf, yf = "__reactEvents$" + vf;
function wc(a420) {
  var b = a420[wf];
  if (b)
    return b;
  for (var c = a420.parentNode; c; ) {
    if (b = c[ff] || c[wf]) {
      c = b.alternate;
      if (null !== b.child || null !== c && null !== c.child)
        for (a420 = sf(a420); null !== a420; ) {
          if (c = a420[wf])
            return c;
          a420 = sf(a420);
        }
      return b;
    }
    a420 = c;
    c = a420.parentNode;
  }
  return null;
}
function Cb(a420) {
  a420 = a420[wf] || a420[ff];
  return !a420 || 5 !== a420.tag && 6 !== a420.tag && 13 !== a420.tag && 3 !== a420.tag ? null : a420;
}
function ue(a420) {
  if (5 === a420.tag || 6 === a420.tag)
    return a420.stateNode;
  throw Error(y$1(33));
}
function Db(a420) {
  return a420[xf] || null;
}
function $e(a420) {
  var b = a420[yf];
  void 0 === b && (b = a420[yf] = /* @__PURE__ */ new Set());
  return b;
}
var zf = [], Af = -1;
function Bf(a420) {
  return { current: a420 };
}
function H(a420) {
  0 > Af || (a420.current = zf[Af], zf[Af] = null, Af--);
}
function I(a420, b) {
  Af++;
  zf[Af] = a420.current;
  a420.current = b;
}
var Cf = {}, M = Bf(Cf), N = Bf(false), Df = Cf;
function Ef(a420, b) {
  var c = a420.type.contextTypes;
  if (!c)
    return Cf;
  var d2 = a420.stateNode;
  if (d2 && d2.__reactInternalMemoizedUnmaskedChildContext === b)
    return d2.__reactInternalMemoizedMaskedChildContext;
  var e2 = {}, f2;
  for (f2 in c)
    e2[f2] = b[f2];
  d2 && (a420 = a420.stateNode, a420.__reactInternalMemoizedUnmaskedChildContext = b, a420.__reactInternalMemoizedMaskedChildContext = e2);
  return e2;
}
function Ff(a420) {
  a420 = a420.childContextTypes;
  return null !== a420 && void 0 !== a420;
}
function Gf() {
  H(N);
  H(M);
}
function Hf(a420, b, c) {
  if (M.current !== Cf)
    throw Error(y$1(168));
  I(M, b);
  I(N, c);
}
function If(a420, b, c) {
  var d2 = a420.stateNode;
  a420 = b.childContextTypes;
  if ("function" !== typeof d2.getChildContext)
    return c;
  d2 = d2.getChildContext();
  for (var e2 in d2)
    if (!(e2 in a420))
      throw Error(y$1(108, Ra(b) || "Unknown", e2));
  return m$3({}, c, d2);
}
function Jf(a420) {
  a420 = (a420 = a420.stateNode) && a420.__reactInternalMemoizedMergedChildContext || Cf;
  Df = M.current;
  I(M, a420);
  I(N, N.current);
  return true;
}
function Kf(a420, b, c) {
  var d2 = a420.stateNode;
  if (!d2)
    throw Error(y$1(169));
  c ? (a420 = If(a420, b, Df), d2.__reactInternalMemoizedMergedChildContext = a420, H(N), H(M), I(M, a420)) : H(N);
  I(N, c);
}
var Lf = null, Mf = null, Nf = r$3.unstable_runWithPriority, Of = r$3.unstable_scheduleCallback, Pf = r$3.unstable_cancelCallback, Qf = r$3.unstable_shouldYield, Rf = r$3.unstable_requestPaint, Sf = r$3.unstable_now, Tf = r$3.unstable_getCurrentPriorityLevel, Uf = r$3.unstable_ImmediatePriority, Vf = r$3.unstable_UserBlockingPriority, Wf = r$3.unstable_NormalPriority, Xf = r$3.unstable_LowPriority, Yf = r$3.unstable_IdlePriority, Zf = {}, $f = void 0 !== Rf ? Rf : function() {
}, ag = null, bg = null, cg = false, dg = Sf(), O = 1e4 > dg ? Sf : function() {
  return Sf() - dg;
};
function eg() {
  switch (Tf()) {
    case Uf:
      return 99;
    case Vf:
      return 98;
    case Wf:
      return 97;
    case Xf:
      return 96;
    case Yf:
      return 95;
    default:
      throw Error(y$1(332));
  }
}
function fg(a420) {
  switch (a420) {
    case 99:
      return Uf;
    case 98:
      return Vf;
    case 97:
      return Wf;
    case 96:
      return Xf;
    case 95:
      return Yf;
    default:
      throw Error(y$1(332));
  }
}
function gg(a420, b) {
  a420 = fg(a420);
  return Nf(a420, b);
}
function hg(a420, b, c) {
  a420 = fg(a420);
  return Of(a420, b, c);
}
function ig() {
  if (null !== bg) {
    var a420 = bg;
    bg = null;
    Pf(a420);
  }
  jg();
}
function jg() {
  if (!cg && null !== ag) {
    cg = true;
    var a420 = 0;
    try {
      var b = ag;
      gg(99, function() {
        for (; a420 < b.length; a420++) {
          var c = b[a420];
          do
            c = c(true);
          while (null !== c);
        }
      });
      ag = null;
    } catch (c) {
      throw null !== ag && (ag = ag.slice(a420 + 1)), Of(Uf, ig), c;
    } finally {
      cg = false;
    }
  }
}
var kg = ra.ReactCurrentBatchConfig;
function lg(a420, b) {
  if (a420 && a420.defaultProps) {
    b = m$3({}, b);
    a420 = a420.defaultProps;
    for (var c in a420)
      void 0 === b[c] && (b[c] = a420[c]);
    return b;
  }
  return b;
}
var mg = Bf(null), ng = null, og = null, pg = null;
function qg() {
  pg = og = ng = null;
}
function rg(a420) {
  var b = mg.current;
  H(mg);
  a420.type._context._currentValue = b;
}
function sg(a420, b) {
  for (; null !== a420; ) {
    var c = a420.alternate;
    if ((a420.childLanes & b) === b)
      if (null === c || (c.childLanes & b) === b)
        break;
      else
        c.childLanes |= b;
    else
      a420.childLanes |= b, null !== c && (c.childLanes |= b);
    a420 = a420.return;
  }
}
function tg(a420, b) {
  ng = a420;
  pg = og = null;
  a420 = a420.dependencies;
  null !== a420 && null !== a420.firstContext && (0 !== (a420.lanes & b) && (ug = true), a420.firstContext = null);
}
function vg(a420, b) {
  if (pg !== a420 && false !== b && 0 !== b) {
    if ("number" !== typeof b || 1073741823 === b)
      pg = a420, b = 1073741823;
    b = { context: a420, observedBits: b, next: null };
    if (null === og) {
      if (null === ng)
        throw Error(y$1(308));
      og = b;
      ng.dependencies = { lanes: 0, firstContext: b, responders: null };
    } else
      og = og.next = b;
  }
  return a420._currentValue;
}
var wg = false;
function xg(a420) {
  a420.updateQueue = { baseState: a420.memoizedState, firstBaseUpdate: null, lastBaseUpdate: null, shared: { pending: null }, effects: null };
}
function yg(a420, b) {
  a420 = a420.updateQueue;
  b.updateQueue === a420 && (b.updateQueue = { baseState: a420.baseState, firstBaseUpdate: a420.firstBaseUpdate, lastBaseUpdate: a420.lastBaseUpdate, shared: a420.shared, effects: a420.effects });
}
function zg(a420, b) {
  return { eventTime: a420, lane: b, tag: 0, payload: null, callback: null, next: null };
}
function Ag(a420, b) {
  a420 = a420.updateQueue;
  if (null !== a420) {
    a420 = a420.shared;
    var c = a420.pending;
    null === c ? b.next = b : (b.next = c.next, c.next = b);
    a420.pending = b;
  }
}
function Bg(a420, b) {
  var c = a420.updateQueue, d2 = a420.alternate;
  if (null !== d2 && (d2 = d2.updateQueue, c === d2)) {
    var e2 = null, f2 = null;
    c = c.firstBaseUpdate;
    if (null !== c) {
      do {
        var g2 = { eventTime: c.eventTime, lane: c.lane, tag: c.tag, payload: c.payload, callback: c.callback, next: null };
        null === f2 ? e2 = f2 = g2 : f2 = f2.next = g2;
        c = c.next;
      } while (null !== c);
      null === f2 ? e2 = f2 = b : f2 = f2.next = b;
    } else
      e2 = f2 = b;
    c = { baseState: d2.baseState, firstBaseUpdate: e2, lastBaseUpdate: f2, shared: d2.shared, effects: d2.effects };
    a420.updateQueue = c;
    return;
  }
  a420 = c.lastBaseUpdate;
  null === a420 ? c.firstBaseUpdate = b : a420.next = b;
  c.lastBaseUpdate = b;
}
function Cg(a420, b, c, d2) {
  var e2 = a420.updateQueue;
  wg = false;
  var f2 = e2.firstBaseUpdate, g2 = e2.lastBaseUpdate, h2 = e2.shared.pending;
  if (null !== h2) {
    e2.shared.pending = null;
    var k = h2, l2 = k.next;
    k.next = null;
    null === g2 ? f2 = l2 : g2.next = l2;
    g2 = k;
    var n2 = a420.alternate;
    if (null !== n2) {
      n2 = n2.updateQueue;
      var A2 = n2.lastBaseUpdate;
      A2 !== g2 && (null === A2 ? n2.firstBaseUpdate = l2 : A2.next = l2, n2.lastBaseUpdate = k);
    }
  }
  if (null !== f2) {
    A2 = e2.baseState;
    g2 = 0;
    n2 = l2 = k = null;
    do {
      h2 = f2.lane;
      var p2 = f2.eventTime;
      if ((d2 & h2) === h2) {
        null !== n2 && (n2 = n2.next = {
          eventTime: p2,
          lane: 0,
          tag: f2.tag,
          payload: f2.payload,
          callback: f2.callback,
          next: null
        });
        a: {
          var C2 = a420, x2 = f2;
          h2 = b;
          p2 = c;
          switch (x2.tag) {
            case 1:
              C2 = x2.payload;
              if ("function" === typeof C2) {
                A2 = C2.call(p2, A2, h2);
                break a;
              }
              A2 = C2;
              break a;
            case 3:
              C2.flags = C2.flags & -4097 | 64;
            case 0:
              C2 = x2.payload;
              h2 = "function" === typeof C2 ? C2.call(p2, A2, h2) : C2;
              if (null === h2 || void 0 === h2)
                break a;
              A2 = m$3({}, A2, h2);
              break a;
            case 2:
              wg = true;
          }
        }
        null !== f2.callback && (a420.flags |= 32, h2 = e2.effects, null === h2 ? e2.effects = [f2] : h2.push(f2));
      } else
        p2 = { eventTime: p2, lane: h2, tag: f2.tag, payload: f2.payload, callback: f2.callback, next: null }, null === n2 ? (l2 = n2 = p2, k = A2) : n2 = n2.next = p2, g2 |= h2;
      f2 = f2.next;
      if (null === f2)
        if (h2 = e2.shared.pending, null === h2)
          break;
        else
          f2 = h2.next, h2.next = null, e2.lastBaseUpdate = h2, e2.shared.pending = null;
    } while (1);
    null === n2 && (k = A2);
    e2.baseState = k;
    e2.firstBaseUpdate = l2;
    e2.lastBaseUpdate = n2;
    Dg |= g2;
    a420.lanes = g2;
    a420.memoizedState = A2;
  }
}
function Eg(a420, b, c) {
  a420 = b.effects;
  b.effects = null;
  if (null !== a420)
    for (b = 0; b < a420.length; b++) {
      var d2 = a420[b], e2 = d2.callback;
      if (null !== e2) {
        d2.callback = null;
        d2 = c;
        if ("function" !== typeof e2)
          throw Error(y$1(191, e2));
        e2.call(d2);
      }
    }
}
var Fg = new aa.Component().refs;
function Gg(a420, b, c, d2) {
  b = a420.memoizedState;
  c = c(d2, b);
  c = null === c || void 0 === c ? b : m$3({}, b, c);
  a420.memoizedState = c;
  0 === a420.lanes && (a420.updateQueue.baseState = c);
}
var Kg = { isMounted: function(a420) {
  return (a420 = a420._reactInternals) ? Zb(a420) === a420 : false;
}, enqueueSetState: function(a420, b, c) {
  a420 = a420._reactInternals;
  var d2 = Hg(), e2 = Ig(a420), f2 = zg(d2, e2);
  f2.payload = b;
  void 0 !== c && null !== c && (f2.callback = c);
  Ag(a420, f2);
  Jg(a420, e2, d2);
}, enqueueReplaceState: function(a420, b, c) {
  a420 = a420._reactInternals;
  var d2 = Hg(), e2 = Ig(a420), f2 = zg(d2, e2);
  f2.tag = 1;
  f2.payload = b;
  void 0 !== c && null !== c && (f2.callback = c);
  Ag(a420, f2);
  Jg(a420, e2, d2);
}, enqueueForceUpdate: function(a420, b) {
  a420 = a420._reactInternals;
  var c = Hg(), d2 = Ig(a420), e2 = zg(c, d2);
  e2.tag = 2;
  void 0 !== b && null !== b && (e2.callback = b);
  Ag(a420, e2);
  Jg(a420, d2, c);
} };
function Lg(a420, b, c, d2, e2, f2, g2) {
  a420 = a420.stateNode;
  return "function" === typeof a420.shouldComponentUpdate ? a420.shouldComponentUpdate(d2, f2, g2) : b.prototype && b.prototype.isPureReactComponent ? !Je(c, d2) || !Je(e2, f2) : true;
}
function Mg(a420, b, c) {
  var d2 = false, e2 = Cf;
  var f2 = b.contextType;
  "object" === typeof f2 && null !== f2 ? f2 = vg(f2) : (e2 = Ff(b) ? Df : M.current, d2 = b.contextTypes, f2 = (d2 = null !== d2 && void 0 !== d2) ? Ef(a420, e2) : Cf);
  b = new b(c, f2);
  a420.memoizedState = null !== b.state && void 0 !== b.state ? b.state : null;
  b.updater = Kg;
  a420.stateNode = b;
  b._reactInternals = a420;
  d2 && (a420 = a420.stateNode, a420.__reactInternalMemoizedUnmaskedChildContext = e2, a420.__reactInternalMemoizedMaskedChildContext = f2);
  return b;
}
function Ng(a420, b, c, d2) {
  a420 = b.state;
  "function" === typeof b.componentWillReceiveProps && b.componentWillReceiveProps(c, d2);
  "function" === typeof b.UNSAFE_componentWillReceiveProps && b.UNSAFE_componentWillReceiveProps(c, d2);
  b.state !== a420 && Kg.enqueueReplaceState(b, b.state, null);
}
function Og(a420, b, c, d2) {
  var e2 = a420.stateNode;
  e2.props = c;
  e2.state = a420.memoizedState;
  e2.refs = Fg;
  xg(a420);
  var f2 = b.contextType;
  "object" === typeof f2 && null !== f2 ? e2.context = vg(f2) : (f2 = Ff(b) ? Df : M.current, e2.context = Ef(a420, f2));
  Cg(a420, c, e2, d2);
  e2.state = a420.memoizedState;
  f2 = b.getDerivedStateFromProps;
  "function" === typeof f2 && (Gg(a420, b, f2, c), e2.state = a420.memoizedState);
  "function" === typeof b.getDerivedStateFromProps || "function" === typeof e2.getSnapshotBeforeUpdate || "function" !== typeof e2.UNSAFE_componentWillMount && "function" !== typeof e2.componentWillMount || (b = e2.state, "function" === typeof e2.componentWillMount && e2.componentWillMount(), "function" === typeof e2.UNSAFE_componentWillMount && e2.UNSAFE_componentWillMount(), b !== e2.state && Kg.enqueueReplaceState(e2, e2.state, null), Cg(a420, c, e2, d2), e2.state = a420.memoizedState);
  "function" === typeof e2.componentDidMount && (a420.flags |= 4);
}
var Pg = Array.isArray;
function Qg(a420, b, c) {
  a420 = c.ref;
  if (null !== a420 && "function" !== typeof a420 && "object" !== typeof a420) {
    if (c._owner) {
      c = c._owner;
      if (c) {
        if (1 !== c.tag)
          throw Error(y$1(309));
        var d2 = c.stateNode;
      }
      if (!d2)
        throw Error(y$1(147, a420));
      var e2 = "" + a420;
      if (null !== b && null !== b.ref && "function" === typeof b.ref && b.ref._stringRef === e2)
        return b.ref;
      b = function(a421) {
        var b2 = d2.refs;
        b2 === Fg && (b2 = d2.refs = {});
        null === a421 ? delete b2[e2] : b2[e2] = a421;
      };
      b._stringRef = e2;
      return b;
    }
    if ("string" !== typeof a420)
      throw Error(y$1(284));
    if (!c._owner)
      throw Error(y$1(290, a420));
  }
  return a420;
}
function Rg(a420, b) {
  if ("textarea" !== a420.type)
    throw Error(y$1(31, "[object Object]" === Object.prototype.toString.call(b) ? "object with keys {" + Object.keys(b).join(", ") + "}" : b));
}
function Sg(a420) {
  function b(b2, c2) {
    if (a420) {
      var d3 = b2.lastEffect;
      null !== d3 ? (d3.nextEffect = c2, b2.lastEffect = c2) : b2.firstEffect = b2.lastEffect = c2;
      c2.nextEffect = null;
      c2.flags = 8;
    }
  }
  function c(c2, d3) {
    if (!a420)
      return null;
    for (; null !== d3; )
      b(c2, d3), d3 = d3.sibling;
    return null;
  }
  function d2(a421, b2) {
    for (a421 = /* @__PURE__ */ new Map(); null !== b2; )
      null !== b2.key ? a421.set(b2.key, b2) : a421.set(b2.index, b2), b2 = b2.sibling;
    return a421;
  }
  function e2(a421, b2) {
    a421 = Tg(a421, b2);
    a421.index = 0;
    a421.sibling = null;
    return a421;
  }
  function f2(b2, c2, d3) {
    b2.index = d3;
    if (!a420)
      return c2;
    d3 = b2.alternate;
    if (null !== d3)
      return d3 = d3.index, d3 < c2 ? (b2.flags = 2, c2) : d3;
    b2.flags = 2;
    return c2;
  }
  function g2(b2) {
    a420 && null === b2.alternate && (b2.flags = 2);
    return b2;
  }
  function h2(a421, b2, c2, d3) {
    if (null === b2 || 6 !== b2.tag)
      return b2 = Ug(c2, a421.mode, d3), b2.return = a421, b2;
    b2 = e2(b2, c2);
    b2.return = a421;
    return b2;
  }
  function k(a421, b2, c2, d3) {
    if (null !== b2 && b2.elementType === c2.type)
      return d3 = e2(b2, c2.props), d3.ref = Qg(a421, b2, c2), d3.return = a421, d3;
    d3 = Vg(c2.type, c2.key, c2.props, null, a421.mode, d3);
    d3.ref = Qg(a421, b2, c2);
    d3.return = a421;
    return d3;
  }
  function l2(a421, b2, c2, d3) {
    if (null === b2 || 4 !== b2.tag || b2.stateNode.containerInfo !== c2.containerInfo || b2.stateNode.implementation !== c2.implementation)
      return b2 = Wg(c2, a421.mode, d3), b2.return = a421, b2;
    b2 = e2(b2, c2.children || []);
    b2.return = a421;
    return b2;
  }
  function n2(a421, b2, c2, d3, f3) {
    if (null === b2 || 7 !== b2.tag)
      return b2 = Xg(c2, a421.mode, d3, f3), b2.return = a421, b2;
    b2 = e2(b2, c2);
    b2.return = a421;
    return b2;
  }
  function A2(a421, b2, c2) {
    if ("string" === typeof b2 || "number" === typeof b2)
      return b2 = Ug("" + b2, a421.mode, c2), b2.return = a421, b2;
    if ("object" === typeof b2 && null !== b2) {
      switch (b2.$$typeof) {
        case sa:
          return c2 = Vg(b2.type, b2.key, b2.props, null, a421.mode, c2), c2.ref = Qg(a421, null, b2), c2.return = a421, c2;
        case ta:
          return b2 = Wg(b2, a421.mode, c2), b2.return = a421, b2;
      }
      if (Pg(b2) || La(b2))
        return b2 = Xg(
          b2,
          a421.mode,
          c2,
          null
        ), b2.return = a421, b2;
      Rg(a421, b2);
    }
    return null;
  }
  function p2(a421, b2, c2, d3) {
    var e3 = null !== b2 ? b2.key : null;
    if ("string" === typeof c2 || "number" === typeof c2)
      return null !== e3 ? null : h2(a421, b2, "" + c2, d3);
    if ("object" === typeof c2 && null !== c2) {
      switch (c2.$$typeof) {
        case sa:
          return c2.key === e3 ? c2.type === ua ? n2(a421, b2, c2.props.children, d3, e3) : k(a421, b2, c2, d3) : null;
        case ta:
          return c2.key === e3 ? l2(a421, b2, c2, d3) : null;
      }
      if (Pg(c2) || La(c2))
        return null !== e3 ? null : n2(a421, b2, c2, d3, null);
      Rg(a421, c2);
    }
    return null;
  }
  function C2(a421, b2, c2, d3, e3) {
    if ("string" === typeof d3 || "number" === typeof d3)
      return a421 = a421.get(c2) || null, h2(b2, a421, "" + d3, e3);
    if ("object" === typeof d3 && null !== d3) {
      switch (d3.$$typeof) {
        case sa:
          return a421 = a421.get(null === d3.key ? c2 : d3.key) || null, d3.type === ua ? n2(b2, a421, d3.props.children, e3, d3.key) : k(b2, a421, d3, e3);
        case ta:
          return a421 = a421.get(null === d3.key ? c2 : d3.key) || null, l2(b2, a421, d3, e3);
      }
      if (Pg(d3) || La(d3))
        return a421 = a421.get(c2) || null, n2(b2, a421, d3, e3, null);
      Rg(b2, d3);
    }
    return null;
  }
  function x2(e3, g3, h3, k2) {
    for (var l3 = null, t2 = null, u2 = g3, z2 = g3 = 0, q2 = null; null !== u2 && z2 < h3.length; z2++) {
      u2.index > z2 ? (q2 = u2, u2 = null) : q2 = u2.sibling;
      var n3 = p2(e3, u2, h3[z2], k2);
      if (null === n3) {
        null === u2 && (u2 = q2);
        break;
      }
      a420 && u2 && null === n3.alternate && b(e3, u2);
      g3 = f2(n3, g3, z2);
      null === t2 ? l3 = n3 : t2.sibling = n3;
      t2 = n3;
      u2 = q2;
    }
    if (z2 === h3.length)
      return c(e3, u2), l3;
    if (null === u2) {
      for (; z2 < h3.length; z2++)
        u2 = A2(e3, h3[z2], k2), null !== u2 && (g3 = f2(u2, g3, z2), null === t2 ? l3 = u2 : t2.sibling = u2, t2 = u2);
      return l3;
    }
    for (u2 = d2(e3, u2); z2 < h3.length; z2++)
      q2 = C2(u2, e3, z2, h3[z2], k2), null !== q2 && (a420 && null !== q2.alternate && u2.delete(null === q2.key ? z2 : q2.key), g3 = f2(q2, g3, z2), null === t2 ? l3 = q2 : t2.sibling = q2, t2 = q2);
    a420 && u2.forEach(function(a421) {
      return b(e3, a421);
    });
    return l3;
  }
  function w2(e3, g3, h3, k2) {
    var l3 = La(h3);
    if ("function" !== typeof l3)
      throw Error(y$1(150));
    h3 = l3.call(h3);
    if (null == h3)
      throw Error(y$1(151));
    for (var t2 = l3 = null, u2 = g3, z2 = g3 = 0, q2 = null, n3 = h3.next(); null !== u2 && !n3.done; z2++, n3 = h3.next()) {
      u2.index > z2 ? (q2 = u2, u2 = null) : q2 = u2.sibling;
      var w3 = p2(e3, u2, n3.value, k2);
      if (null === w3) {
        null === u2 && (u2 = q2);
        break;
      }
      a420 && u2 && null === w3.alternate && b(e3, u2);
      g3 = f2(w3, g3, z2);
      null === t2 ? l3 = w3 : t2.sibling = w3;
      t2 = w3;
      u2 = q2;
    }
    if (n3.done)
      return c(e3, u2), l3;
    if (null === u2) {
      for (; !n3.done; z2++, n3 = h3.next())
        n3 = A2(e3, n3.value, k2), null !== n3 && (g3 = f2(n3, g3, z2), null === t2 ? l3 = n3 : t2.sibling = n3, t2 = n3);
      return l3;
    }
    for (u2 = d2(e3, u2); !n3.done; z2++, n3 = h3.next())
      n3 = C2(u2, e3, z2, n3.value, k2), null !== n3 && (a420 && null !== n3.alternate && u2.delete(null === n3.key ? z2 : n3.key), g3 = f2(n3, g3, z2), null === t2 ? l3 = n3 : t2.sibling = n3, t2 = n3);
    a420 && u2.forEach(function(a421) {
      return b(e3, a421);
    });
    return l3;
  }
  return function(a421, d3, f3, h3) {
    var k2 = "object" === typeof f3 && null !== f3 && f3.type === ua && null === f3.key;
    k2 && (f3 = f3.props.children);
    var l3 = "object" === typeof f3 && null !== f3;
    if (l3)
      switch (f3.$$typeof) {
        case sa:
          a: {
            l3 = f3.key;
            for (k2 = d3; null !== k2; ) {
              if (k2.key === l3) {
                switch (k2.tag) {
                  case 7:
                    if (f3.type === ua) {
                      c(a421, k2.sibling);
                      d3 = e2(k2, f3.props.children);
                      d3.return = a421;
                      a421 = d3;
                      break a;
                    }
                    break;
                  default:
                    if (k2.elementType === f3.type) {
                      c(a421, k2.sibling);
                      d3 = e2(k2, f3.props);
                      d3.ref = Qg(a421, k2, f3);
                      d3.return = a421;
                      a421 = d3;
                      break a;
                    }
                }
                c(a421, k2);
                break;
              } else
                b(a421, k2);
              k2 = k2.sibling;
            }
            f3.type === ua ? (d3 = Xg(f3.props.children, a421.mode, h3, f3.key), d3.return = a421, a421 = d3) : (h3 = Vg(f3.type, f3.key, f3.props, null, a421.mode, h3), h3.ref = Qg(a421, d3, f3), h3.return = a421, a421 = h3);
          }
          return g2(a421);
        case ta:
          a: {
            for (k2 = f3.key; null !== d3; ) {
              if (d3.key === k2)
                if (4 === d3.tag && d3.stateNode.containerInfo === f3.containerInfo && d3.stateNode.implementation === f3.implementation) {
                  c(a421, d3.sibling);
                  d3 = e2(d3, f3.children || []);
                  d3.return = a421;
                  a421 = d3;
                  break a;
                } else {
                  c(a421, d3);
                  break;
                }
              else
                b(a421, d3);
              d3 = d3.sibling;
            }
            d3 = Wg(f3, a421.mode, h3);
            d3.return = a421;
            a421 = d3;
          }
          return g2(a421);
      }
    if ("string" === typeof f3 || "number" === typeof f3)
      return f3 = "" + f3, null !== d3 && 6 === d3.tag ? (c(a421, d3.sibling), d3 = e2(d3, f3), d3.return = a421, a421 = d3) : (c(a421, d3), d3 = Ug(f3, a421.mode, h3), d3.return = a421, a421 = d3), g2(a421);
    if (Pg(f3))
      return x2(a421, d3, f3, h3);
    if (La(f3))
      return w2(a421, d3, f3, h3);
    l3 && Rg(a421, f3);
    if ("undefined" === typeof f3 && !k2)
      switch (a421.tag) {
        case 1:
        case 22:
        case 0:
        case 11:
        case 15:
          throw Error(y$1(152, Ra(a421.type) || "Component"));
      }
    return c(a421, d3);
  };
}
var Yg = Sg(true), Zg = Sg(false), $g = {}, ah = Bf($g), bh = Bf($g), ch$1 = Bf($g);
function dh$1(a420) {
  if (a420 === $g)
    throw Error(y$1(174));
  return a420;
}
function eh(a420, b) {
  I(ch$1, b);
  I(bh, a420);
  I(ah, $g);
  a420 = b.nodeType;
  switch (a420) {
    case 9:
    case 11:
      b = (b = b.documentElement) ? b.namespaceURI : mb(null, "");
      break;
    default:
      a420 = 8 === a420 ? b.parentNode : b, b = a420.namespaceURI || null, a420 = a420.tagName, b = mb(b, a420);
  }
  H(ah);
  I(ah, b);
}
function fh() {
  H(ah);
  H(bh);
  H(ch$1);
}
function gh(a420) {
  dh$1(ch$1.current);
  var b = dh$1(ah.current);
  var c = mb(b, a420.type);
  b !== c && (I(bh, a420), I(ah, c));
}
function hh(a420) {
  bh.current === a420 && (H(ah), H(bh));
}
var P = Bf(0);
function ih(a420) {
  for (var b = a420; null !== b; ) {
    if (13 === b.tag) {
      var c = b.memoizedState;
      if (null !== c && (c = c.dehydrated, null === c || "$?" === c.data || "$!" === c.data))
        return b;
    } else if (19 === b.tag && void 0 !== b.memoizedProps.revealOrder) {
      if (0 !== (b.flags & 64))
        return b;
    } else if (null !== b.child) {
      b.child.return = b;
      b = b.child;
      continue;
    }
    if (b === a420)
      break;
    for (; null === b.sibling; ) {
      if (null === b.return || b.return === a420)
        return null;
      b = b.return;
    }
    b.sibling.return = b.return;
    b = b.sibling;
  }
  return null;
}
var jh = null, kh = null, lh = false;
function mh(a420, b) {
  var c = nh(5, null, null, 0);
  c.elementType = "DELETED";
  c.type = "DELETED";
  c.stateNode = b;
  c.return = a420;
  c.flags = 8;
  null !== a420.lastEffect ? (a420.lastEffect.nextEffect = c, a420.lastEffect = c) : a420.firstEffect = a420.lastEffect = c;
}
function oh(a420, b) {
  switch (a420.tag) {
    case 5:
      var c = a420.type;
      b = 1 !== b.nodeType || c.toLowerCase() !== b.nodeName.toLowerCase() ? null : b;
      return null !== b ? (a420.stateNode = b, true) : false;
    case 6:
      return b = "" === a420.pendingProps || 3 !== b.nodeType ? null : b, null !== b ? (a420.stateNode = b, true) : false;
    case 13:
      return false;
    default:
      return false;
  }
}
function ph(a420) {
  if (lh) {
    var b = kh;
    if (b) {
      var c = b;
      if (!oh(a420, b)) {
        b = rf(c.nextSibling);
        if (!b || !oh(a420, b)) {
          a420.flags = a420.flags & -1025 | 2;
          lh = false;
          jh = a420;
          return;
        }
        mh(jh, c);
      }
      jh = a420;
      kh = rf(b.firstChild);
    } else
      a420.flags = a420.flags & -1025 | 2, lh = false, jh = a420;
  }
}
function qh(a420) {
  for (a420 = a420.return; null !== a420 && 5 !== a420.tag && 3 !== a420.tag && 13 !== a420.tag; )
    a420 = a420.return;
  jh = a420;
}
function rh$1(a420) {
  if (a420 !== jh)
    return false;
  if (!lh)
    return qh(a420), lh = true, false;
  var b = a420.type;
  if (5 !== a420.tag || "head" !== b && "body" !== b && !nf(b, a420.memoizedProps))
    for (b = kh; b; )
      mh(a420, b), b = rf(b.nextSibling);
  qh(a420);
  if (13 === a420.tag) {
    a420 = a420.memoizedState;
    a420 = null !== a420 ? a420.dehydrated : null;
    if (!a420)
      throw Error(y$1(317));
    a: {
      a420 = a420.nextSibling;
      for (b = 0; a420; ) {
        if (8 === a420.nodeType) {
          var c = a420.data;
          if ("/$" === c) {
            if (0 === b) {
              kh = rf(a420.nextSibling);
              break a;
            }
            b--;
          } else
            "$" !== c && "$!" !== c && "$?" !== c || b++;
        }
        a420 = a420.nextSibling;
      }
      kh = null;
    }
  } else
    kh = jh ? rf(a420.stateNode.nextSibling) : null;
  return true;
}
function sh$1() {
  kh = jh = null;
  lh = false;
}
var th = [];
function uh() {
  for (var a420 = 0; a420 < th.length; a420++)
    th[a420]._workInProgressVersionPrimary = null;
  th.length = 0;
}
var vh = ra.ReactCurrentDispatcher, wh = ra.ReactCurrentBatchConfig, xh = 0, R$2 = null, S = null, T = null, yh = false, zh = false;
function Ah() {
  throw Error(y$1(321));
}
function Bh(a420, b) {
  if (null === b)
    return false;
  for (var c = 0; c < b.length && c < a420.length; c++)
    if (!He(a420[c], b[c]))
      return false;
  return true;
}
function Ch$1(a420, b, c, d2, e2, f2) {
  xh = f2;
  R$2 = b;
  b.memoizedState = null;
  b.updateQueue = null;
  b.lanes = 0;
  vh.current = null === a420 || null === a420.memoizedState ? Dh : Eh;
  a420 = c(d2, e2);
  if (zh) {
    f2 = 0;
    do {
      zh = false;
      if (!(25 > f2))
        throw Error(y$1(301));
      f2 += 1;
      T = S = null;
      b.updateQueue = null;
      vh.current = Fh;
      a420 = c(d2, e2);
    } while (zh);
  }
  vh.current = Gh;
  b = null !== S && null !== S.next;
  xh = 0;
  T = S = R$2 = null;
  yh = false;
  if (b)
    throw Error(y$1(300));
  return a420;
}
function Hh() {
  var a420 = { memoizedState: null, baseState: null, baseQueue: null, queue: null, next: null };
  null === T ? R$2.memoizedState = T = a420 : T = T.next = a420;
  return T;
}
function Ih() {
  if (null === S) {
    var a420 = R$2.alternate;
    a420 = null !== a420 ? a420.memoizedState : null;
  } else
    a420 = S.next;
  var b = null === T ? R$2.memoizedState : T.next;
  if (null !== b)
    T = b, S = a420;
  else {
    if (null === a420)
      throw Error(y$1(310));
    S = a420;
    a420 = { memoizedState: S.memoizedState, baseState: S.baseState, baseQueue: S.baseQueue, queue: S.queue, next: null };
    null === T ? R$2.memoizedState = T = a420 : T = T.next = a420;
  }
  return T;
}
function Jh(a420, b) {
  return "function" === typeof b ? b(a420) : b;
}
function Kh$1(a420) {
  var b = Ih(), c = b.queue;
  if (null === c)
    throw Error(y$1(311));
  c.lastRenderedReducer = a420;
  var d2 = S, e2 = d2.baseQueue, f2 = c.pending;
  if (null !== f2) {
    if (null !== e2) {
      var g2 = e2.next;
      e2.next = f2.next;
      f2.next = g2;
    }
    d2.baseQueue = e2 = f2;
    c.pending = null;
  }
  if (null !== e2) {
    e2 = e2.next;
    d2 = d2.baseState;
    var h2 = g2 = f2 = null, k = e2;
    do {
      var l2 = k.lane;
      if ((xh & l2) === l2)
        null !== h2 && (h2 = h2.next = { lane: 0, action: k.action, eagerReducer: k.eagerReducer, eagerState: k.eagerState, next: null }), d2 = k.eagerReducer === a420 ? k.eagerState : a420(d2, k.action);
      else {
        var n2 = {
          lane: l2,
          action: k.action,
          eagerReducer: k.eagerReducer,
          eagerState: k.eagerState,
          next: null
        };
        null === h2 ? (g2 = h2 = n2, f2 = d2) : h2 = h2.next = n2;
        R$2.lanes |= l2;
        Dg |= l2;
      }
      k = k.next;
    } while (null !== k && k !== e2);
    null === h2 ? f2 = d2 : h2.next = g2;
    He(d2, b.memoizedState) || (ug = true);
    b.memoizedState = d2;
    b.baseState = f2;
    b.baseQueue = h2;
    c.lastRenderedState = d2;
  }
  return [b.memoizedState, c.dispatch];
}
function Lh(a420) {
  var b = Ih(), c = b.queue;
  if (null === c)
    throw Error(y$1(311));
  c.lastRenderedReducer = a420;
  var d2 = c.dispatch, e2 = c.pending, f2 = b.memoizedState;
  if (null !== e2) {
    c.pending = null;
    var g2 = e2 = e2.next;
    do
      f2 = a420(f2, g2.action), g2 = g2.next;
    while (g2 !== e2);
    He(f2, b.memoizedState) || (ug = true);
    b.memoizedState = f2;
    null === b.baseQueue && (b.baseState = f2);
    c.lastRenderedState = f2;
  }
  return [f2, d2];
}
function Mh(a420, b, c) {
  var d2 = b._getVersion;
  d2 = d2(b._source);
  var e2 = b._workInProgressVersionPrimary;
  if (null !== e2)
    a420 = e2 === d2;
  else if (a420 = a420.mutableReadLanes, a420 = (xh & a420) === a420)
    b._workInProgressVersionPrimary = d2, th.push(b);
  if (a420)
    return c(b._source);
  th.push(b);
  throw Error(y$1(350));
}
function Nh(a420, b, c, d2) {
  var e2 = U;
  if (null === e2)
    throw Error(y$1(349));
  var f2 = b._getVersion, g2 = f2(b._source), h2 = vh.current, k = h2.useState(function() {
    return Mh(e2, b, c);
  }), l2 = k[1], n2 = k[0];
  k = T;
  var A2 = a420.memoizedState, p2 = A2.refs, C2 = p2.getSnapshot, x2 = A2.source;
  A2 = A2.subscribe;
  var w2 = R$2;
  a420.memoizedState = { refs: p2, source: b, subscribe: d2 };
  h2.useEffect(function() {
    p2.getSnapshot = c;
    p2.setSnapshot = l2;
    var a421 = f2(b._source);
    if (!He(g2, a421)) {
      a421 = c(b._source);
      He(n2, a421) || (l2(a421), a421 = Ig(w2), e2.mutableReadLanes |= a421 & e2.pendingLanes);
      a421 = e2.mutableReadLanes;
      e2.entangledLanes |= a421;
      for (var d3 = e2.entanglements, h3 = a421; 0 < h3; ) {
        var k2 = 31 - Vc(h3), v2 = 1 << k2;
        d3[k2] |= a421;
        h3 &= ~v2;
      }
    }
  }, [c, b, d2]);
  h2.useEffect(function() {
    return d2(b._source, function() {
      var a421 = p2.getSnapshot, c2 = p2.setSnapshot;
      try {
        c2(a421(b._source));
        var d3 = Ig(w2);
        e2.mutableReadLanes |= d3 & e2.pendingLanes;
      } catch (q2) {
        c2(function() {
          throw q2;
        });
      }
    });
  }, [b, d2]);
  He(C2, c) && He(x2, b) && He(A2, d2) || (a420 = { pending: null, dispatch: null, lastRenderedReducer: Jh, lastRenderedState: n2 }, a420.dispatch = l2 = Oh.bind(null, R$2, a420), k.queue = a420, k.baseQueue = null, n2 = Mh(e2, b, c), k.memoizedState = k.baseState = n2);
  return n2;
}
function Ph(a420, b, c) {
  var d2 = Ih();
  return Nh(d2, a420, b, c);
}
function Qh(a420) {
  var b = Hh();
  "function" === typeof a420 && (a420 = a420());
  b.memoizedState = b.baseState = a420;
  a420 = b.queue = { pending: null, dispatch: null, lastRenderedReducer: Jh, lastRenderedState: a420 };
  a420 = a420.dispatch = Oh.bind(null, R$2, a420);
  return [b.memoizedState, a420];
}
function Rh(a420, b, c, d2) {
  a420 = { tag: a420, create: b, destroy: c, deps: d2, next: null };
  b = R$2.updateQueue;
  null === b ? (b = { lastEffect: null }, R$2.updateQueue = b, b.lastEffect = a420.next = a420) : (c = b.lastEffect, null === c ? b.lastEffect = a420.next = a420 : (d2 = c.next, c.next = a420, a420.next = d2, b.lastEffect = a420));
  return a420;
}
function Sh(a420) {
  var b = Hh();
  a420 = { current: a420 };
  return b.memoizedState = a420;
}
function Th() {
  return Ih().memoizedState;
}
function Uh(a420, b, c, d2) {
  var e2 = Hh();
  R$2.flags |= a420;
  e2.memoizedState = Rh(1 | b, c, void 0, void 0 === d2 ? null : d2);
}
function Vh(a420, b, c, d2) {
  var e2 = Ih();
  d2 = void 0 === d2 ? null : d2;
  var f2 = void 0;
  if (null !== S) {
    var g2 = S.memoizedState;
    f2 = g2.destroy;
    if (null !== d2 && Bh(d2, g2.deps)) {
      Rh(b, c, f2, d2);
      return;
    }
  }
  R$2.flags |= a420;
  e2.memoizedState = Rh(1 | b, c, f2, d2);
}
function Wh(a420, b) {
  return Uh(516, 4, a420, b);
}
function Xh(a420, b) {
  return Vh(516, 4, a420, b);
}
function Yh(a420, b) {
  return Vh(4, 2, a420, b);
}
function Zh(a420, b) {
  if ("function" === typeof b)
    return a420 = a420(), b(a420), function() {
      b(null);
    };
  if (null !== b && void 0 !== b)
    return a420 = a420(), b.current = a420, function() {
      b.current = null;
    };
}
function $h(a420, b, c) {
  c = null !== c && void 0 !== c ? c.concat([a420]) : null;
  return Vh(4, 2, Zh.bind(null, b, a420), c);
}
function ai() {
}
function bi(a420, b) {
  var c = Ih();
  b = void 0 === b ? null : b;
  var d2 = c.memoizedState;
  if (null !== d2 && null !== b && Bh(b, d2[1]))
    return d2[0];
  c.memoizedState = [a420, b];
  return a420;
}
function ci(a420, b) {
  var c = Ih();
  b = void 0 === b ? null : b;
  var d2 = c.memoizedState;
  if (null !== d2 && null !== b && Bh(b, d2[1]))
    return d2[0];
  a420 = a420();
  c.memoizedState = [a420, b];
  return a420;
}
function di(a420, b) {
  var c = eg();
  gg(98 > c ? 98 : c, function() {
    a420(true);
  });
  gg(97 < c ? 97 : c, function() {
    var c2 = wh.transition;
    wh.transition = 1;
    try {
      a420(false), b();
    } finally {
      wh.transition = c2;
    }
  });
}
function Oh(a420, b, c) {
  var d2 = Hg(), e2 = Ig(a420), f2 = { lane: e2, action: c, eagerReducer: null, eagerState: null, next: null }, g2 = b.pending;
  null === g2 ? f2.next = f2 : (f2.next = g2.next, g2.next = f2);
  b.pending = f2;
  g2 = a420.alternate;
  if (a420 === R$2 || null !== g2 && g2 === R$2)
    zh = yh = true;
  else {
    if (0 === a420.lanes && (null === g2 || 0 === g2.lanes) && (g2 = b.lastRenderedReducer, null !== g2))
      try {
        var h2 = b.lastRenderedState, k = g2(h2, c);
        f2.eagerReducer = g2;
        f2.eagerState = k;
        if (He(k, h2))
          return;
      } catch (l2) {
      } finally {
      }
    Jg(a420, e2, d2);
  }
}
var Gh = { readContext: vg, useCallback: Ah, useContext: Ah, useEffect: Ah, useImperativeHandle: Ah, useLayoutEffect: Ah, useMemo: Ah, useReducer: Ah, useRef: Ah, useState: Ah, useDebugValue: Ah, useDeferredValue: Ah, useTransition: Ah, useMutableSource: Ah, useOpaqueIdentifier: Ah, unstable_isNewReconciler: false }, Dh = { readContext: vg, useCallback: function(a420, b) {
  Hh().memoizedState = [a420, void 0 === b ? null : b];
  return a420;
}, useContext: vg, useEffect: Wh, useImperativeHandle: function(a420, b, c) {
  c = null !== c && void 0 !== c ? c.concat([a420]) : null;
  return Uh(4, 2, Zh.bind(
    null,
    b,
    a420
  ), c);
}, useLayoutEffect: function(a420, b) {
  return Uh(4, 2, a420, b);
}, useMemo: function(a420, b) {
  var c = Hh();
  b = void 0 === b ? null : b;
  a420 = a420();
  c.memoizedState = [a420, b];
  return a420;
}, useReducer: function(a420, b, c) {
  var d2 = Hh();
  b = void 0 !== c ? c(b) : b;
  d2.memoizedState = d2.baseState = b;
  a420 = d2.queue = { pending: null, dispatch: null, lastRenderedReducer: a420, lastRenderedState: b };
  a420 = a420.dispatch = Oh.bind(null, R$2, a420);
  return [d2.memoizedState, a420];
}, useRef: Sh, useState: Qh, useDebugValue: ai, useDeferredValue: function(a420) {
  var b = Qh(a420), c = b[0], d2 = b[1];
  Wh(function() {
    var b2 = wh.transition;
    wh.transition = 1;
    try {
      d2(a420);
    } finally {
      wh.transition = b2;
    }
  }, [a420]);
  return c;
}, useTransition: function() {
  var a420 = Qh(false), b = a420[0];
  a420 = di.bind(null, a420[1]);
  Sh(a420);
  return [a420, b];
}, useMutableSource: function(a420, b, c) {
  var d2 = Hh();
  d2.memoizedState = { refs: { getSnapshot: b, setSnapshot: null }, source: a420, subscribe: c };
  return Nh(d2, a420, b, c);
}, useOpaqueIdentifier: function() {
  if (lh) {
    var a420 = false, b = uf(function() {
      a420 || (a420 = true, c("r:" + (tf++).toString(36)));
      throw Error(y$1(355));
    }), c = Qh(b)[1];
    0 === (R$2.mode & 2) && (R$2.flags |= 516, Rh(
      5,
      function() {
        c("r:" + (tf++).toString(36));
      },
      void 0,
      null
    ));
    return b;
  }
  b = "r:" + (tf++).toString(36);
  Qh(b);
  return b;
}, unstable_isNewReconciler: false }, Eh = { readContext: vg, useCallback: bi, useContext: vg, useEffect: Xh, useImperativeHandle: $h, useLayoutEffect: Yh, useMemo: ci, useReducer: Kh$1, useRef: Th, useState: function() {
  return Kh$1(Jh);
}, useDebugValue: ai, useDeferredValue: function(a420) {
  var b = Kh$1(Jh), c = b[0], d2 = b[1];
  Xh(function() {
    var b2 = wh.transition;
    wh.transition = 1;
    try {
      d2(a420);
    } finally {
      wh.transition = b2;
    }
  }, [a420]);
  return c;
}, useTransition: function() {
  var a420 = Kh$1(Jh)[0];
  return [
    Th().current,
    a420
  ];
}, useMutableSource: Ph, useOpaqueIdentifier: function() {
  return Kh$1(Jh)[0];
}, unstable_isNewReconciler: false }, Fh = { readContext: vg, useCallback: bi, useContext: vg, useEffect: Xh, useImperativeHandle: $h, useLayoutEffect: Yh, useMemo: ci, useReducer: Lh, useRef: Th, useState: function() {
  return Lh(Jh);
}, useDebugValue: ai, useDeferredValue: function(a420) {
  var b = Lh(Jh), c = b[0], d2 = b[1];
  Xh(function() {
    var b2 = wh.transition;
    wh.transition = 1;
    try {
      d2(a420);
    } finally {
      wh.transition = b2;
    }
  }, [a420]);
  return c;
}, useTransition: function() {
  var a420 = Lh(Jh)[0];
  return [
    Th().current,
    a420
  ];
}, useMutableSource: Ph, useOpaqueIdentifier: function() {
  return Lh(Jh)[0];
}, unstable_isNewReconciler: false }, ei = ra.ReactCurrentOwner, ug = false;
function fi(a420, b, c, d2) {
  b.child = null === a420 ? Zg(b, null, c, d2) : Yg(b, a420.child, c, d2);
}
function gi(a420, b, c, d2, e2) {
  c = c.render;
  var f2 = b.ref;
  tg(b, e2);
  d2 = Ch$1(a420, b, c, d2, f2, e2);
  if (null !== a420 && !ug)
    return b.updateQueue = a420.updateQueue, b.flags &= -517, a420.lanes &= ~e2, hi(a420, b, e2);
  b.flags |= 1;
  fi(a420, b, d2, e2);
  return b.child;
}
function ii(a420, b, c, d2, e2, f2) {
  if (null === a420) {
    var g2 = c.type;
    if ("function" === typeof g2 && !ji(g2) && void 0 === g2.defaultProps && null === c.compare && void 0 === c.defaultProps)
      return b.tag = 15, b.type = g2, ki(a420, b, g2, d2, e2, f2);
    a420 = Vg(c.type, null, d2, b, b.mode, f2);
    a420.ref = b.ref;
    a420.return = b;
    return b.child = a420;
  }
  g2 = a420.child;
  if (0 === (e2 & f2) && (e2 = g2.memoizedProps, c = c.compare, c = null !== c ? c : Je, c(e2, d2) && a420.ref === b.ref))
    return hi(a420, b, f2);
  b.flags |= 1;
  a420 = Tg(g2, d2);
  a420.ref = b.ref;
  a420.return = b;
  return b.child = a420;
}
function ki(a420, b, c, d2, e2, f2) {
  if (null !== a420 && Je(a420.memoizedProps, d2) && a420.ref === b.ref)
    if (ug = false, 0 !== (f2 & e2))
      0 !== (a420.flags & 16384) && (ug = true);
    else
      return b.lanes = a420.lanes, hi(a420, b, f2);
  return li(a420, b, c, d2, f2);
}
function mi(a420, b, c) {
  var d2 = b.pendingProps, e2 = d2.children, f2 = null !== a420 ? a420.memoizedState : null;
  if ("hidden" === d2.mode || "unstable-defer-without-hiding" === d2.mode)
    if (0 === (b.mode & 4))
      b.memoizedState = { baseLanes: 0 }, ni(b, c);
    else if (0 !== (c & 1073741824))
      b.memoizedState = { baseLanes: 0 }, ni(b, null !== f2 ? f2.baseLanes : c);
    else
      return a420 = null !== f2 ? f2.baseLanes | c : c, b.lanes = b.childLanes = 1073741824, b.memoizedState = { baseLanes: a420 }, ni(b, a420), null;
  else
    null !== f2 ? (d2 = f2.baseLanes | c, b.memoizedState = null) : d2 = c, ni(b, d2);
  fi(a420, b, e2, c);
  return b.child;
}
function oi(a420, b) {
  var c = b.ref;
  if (null === a420 && null !== c || null !== a420 && a420.ref !== c)
    b.flags |= 128;
}
function li(a420, b, c, d2, e2) {
  var f2 = Ff(c) ? Df : M.current;
  f2 = Ef(b, f2);
  tg(b, e2);
  c = Ch$1(a420, b, c, d2, f2, e2);
  if (null !== a420 && !ug)
    return b.updateQueue = a420.updateQueue, b.flags &= -517, a420.lanes &= ~e2, hi(a420, b, e2);
  b.flags |= 1;
  fi(a420, b, c, e2);
  return b.child;
}
function pi(a420, b, c, d2, e2) {
  if (Ff(c)) {
    var f2 = true;
    Jf(b);
  } else
    f2 = false;
  tg(b, e2);
  if (null === b.stateNode)
    null !== a420 && (a420.alternate = null, b.alternate = null, b.flags |= 2), Mg(b, c, d2), Og(b, c, d2, e2), d2 = true;
  else if (null === a420) {
    var g2 = b.stateNode, h2 = b.memoizedProps;
    g2.props = h2;
    var k = g2.context, l2 = c.contextType;
    "object" === typeof l2 && null !== l2 ? l2 = vg(l2) : (l2 = Ff(c) ? Df : M.current, l2 = Ef(b, l2));
    var n2 = c.getDerivedStateFromProps, A2 = "function" === typeof n2 || "function" === typeof g2.getSnapshotBeforeUpdate;
    A2 || "function" !== typeof g2.UNSAFE_componentWillReceiveProps && "function" !== typeof g2.componentWillReceiveProps || (h2 !== d2 || k !== l2) && Ng(b, g2, d2, l2);
    wg = false;
    var p2 = b.memoizedState;
    g2.state = p2;
    Cg(b, d2, g2, e2);
    k = b.memoizedState;
    h2 !== d2 || p2 !== k || N.current || wg ? ("function" === typeof n2 && (Gg(b, c, n2, d2), k = b.memoizedState), (h2 = wg || Lg(b, c, h2, d2, p2, k, l2)) ? (A2 || "function" !== typeof g2.UNSAFE_componentWillMount && "function" !== typeof g2.componentWillMount || ("function" === typeof g2.componentWillMount && g2.componentWillMount(), "function" === typeof g2.UNSAFE_componentWillMount && g2.UNSAFE_componentWillMount()), "function" === typeof g2.componentDidMount && (b.flags |= 4)) : ("function" === typeof g2.componentDidMount && (b.flags |= 4), b.memoizedProps = d2, b.memoizedState = k), g2.props = d2, g2.state = k, g2.context = l2, d2 = h2) : ("function" === typeof g2.componentDidMount && (b.flags |= 4), d2 = false);
  } else {
    g2 = b.stateNode;
    yg(a420, b);
    h2 = b.memoizedProps;
    l2 = b.type === b.elementType ? h2 : lg(b.type, h2);
    g2.props = l2;
    A2 = b.pendingProps;
    p2 = g2.context;
    k = c.contextType;
    "object" === typeof k && null !== k ? k = vg(k) : (k = Ff(c) ? Df : M.current, k = Ef(b, k));
    var C2 = c.getDerivedStateFromProps;
    (n2 = "function" === typeof C2 || "function" === typeof g2.getSnapshotBeforeUpdate) || "function" !== typeof g2.UNSAFE_componentWillReceiveProps && "function" !== typeof g2.componentWillReceiveProps || (h2 !== A2 || p2 !== k) && Ng(b, g2, d2, k);
    wg = false;
    p2 = b.memoizedState;
    g2.state = p2;
    Cg(b, d2, g2, e2);
    var x2 = b.memoizedState;
    h2 !== A2 || p2 !== x2 || N.current || wg ? ("function" === typeof C2 && (Gg(b, c, C2, d2), x2 = b.memoizedState), (l2 = wg || Lg(b, c, l2, d2, p2, x2, k)) ? (n2 || "function" !== typeof g2.UNSAFE_componentWillUpdate && "function" !== typeof g2.componentWillUpdate || ("function" === typeof g2.componentWillUpdate && g2.componentWillUpdate(
      d2,
      x2,
      k
    ), "function" === typeof g2.UNSAFE_componentWillUpdate && g2.UNSAFE_componentWillUpdate(d2, x2, k)), "function" === typeof g2.componentDidUpdate && (b.flags |= 4), "function" === typeof g2.getSnapshotBeforeUpdate && (b.flags |= 256)) : ("function" !== typeof g2.componentDidUpdate || h2 === a420.memoizedProps && p2 === a420.memoizedState || (b.flags |= 4), "function" !== typeof g2.getSnapshotBeforeUpdate || h2 === a420.memoizedProps && p2 === a420.memoizedState || (b.flags |= 256), b.memoizedProps = d2, b.memoizedState = x2), g2.props = d2, g2.state = x2, g2.context = k, d2 = l2) : ("function" !== typeof g2.componentDidUpdate || h2 === a420.memoizedProps && p2 === a420.memoizedState || (b.flags |= 4), "function" !== typeof g2.getSnapshotBeforeUpdate || h2 === a420.memoizedProps && p2 === a420.memoizedState || (b.flags |= 256), d2 = false);
  }
  return qi(a420, b, c, d2, f2, e2);
}
function qi(a420, b, c, d2, e2, f2) {
  oi(a420, b);
  var g2 = 0 !== (b.flags & 64);
  if (!d2 && !g2)
    return e2 && Kf(b, c, false), hi(a420, b, f2);
  d2 = b.stateNode;
  ei.current = b;
  var h2 = g2 && "function" !== typeof c.getDerivedStateFromError ? null : d2.render();
  b.flags |= 1;
  null !== a420 && g2 ? (b.child = Yg(b, a420.child, null, f2), b.child = Yg(b, null, h2, f2)) : fi(a420, b, h2, f2);
  b.memoizedState = d2.state;
  e2 && Kf(b, c, true);
  return b.child;
}
function ri(a420) {
  var b = a420.stateNode;
  b.pendingContext ? Hf(a420, b.pendingContext, b.pendingContext !== b.context) : b.context && Hf(a420, b.context, false);
  eh(a420, b.containerInfo);
}
var si = { dehydrated: null, retryLane: 0 };
function ti(a420, b, c) {
  var d2 = b.pendingProps, e2 = P.current, f2 = false, g2;
  (g2 = 0 !== (b.flags & 64)) || (g2 = null !== a420 && null === a420.memoizedState ? false : 0 !== (e2 & 2));
  g2 ? (f2 = true, b.flags &= -65) : null !== a420 && null === a420.memoizedState || void 0 === d2.fallback || true === d2.unstable_avoidThisFallback || (e2 |= 1);
  I(P, e2 & 1);
  if (null === a420) {
    void 0 !== d2.fallback && ph(b);
    a420 = d2.children;
    e2 = d2.fallback;
    if (f2)
      return a420 = ui(b, a420, e2, c), b.child.memoizedState = { baseLanes: c }, b.memoizedState = si, a420;
    if ("number" === typeof d2.unstable_expectedLoadTime)
      return a420 = ui(b, a420, e2, c), b.child.memoizedState = { baseLanes: c }, b.memoizedState = si, b.lanes = 33554432, a420;
    c = vi({ mode: "visible", children: a420 }, b.mode, c, null);
    c.return = b;
    return b.child = c;
  }
  if (null !== a420.memoizedState) {
    if (f2)
      return d2 = wi(a420, b, d2.children, d2.fallback, c), f2 = b.child, e2 = a420.child.memoizedState, f2.memoizedState = null === e2 ? { baseLanes: c } : { baseLanes: e2.baseLanes | c }, f2.childLanes = a420.childLanes & ~c, b.memoizedState = si, d2;
    c = xi(a420, b, d2.children, c);
    b.memoizedState = null;
    return c;
  }
  if (f2)
    return d2 = wi(a420, b, d2.children, d2.fallback, c), f2 = b.child, e2 = a420.child.memoizedState, f2.memoizedState = null === e2 ? { baseLanes: c } : { baseLanes: e2.baseLanes | c }, f2.childLanes = a420.childLanes & ~c, b.memoizedState = si, d2;
  c = xi(a420, b, d2.children, c);
  b.memoizedState = null;
  return c;
}
function ui(a420, b, c, d2) {
  var e2 = a420.mode, f2 = a420.child;
  b = { mode: "hidden", children: b };
  0 === (e2 & 2) && null !== f2 ? (f2.childLanes = 0, f2.pendingProps = b) : f2 = vi(b, e2, 0, null);
  c = Xg(c, e2, d2, null);
  f2.return = a420;
  c.return = a420;
  f2.sibling = c;
  a420.child = f2;
  return c;
}
function xi(a420, b, c, d2) {
  var e2 = a420.child;
  a420 = e2.sibling;
  c = Tg(e2, { mode: "visible", children: c });
  0 === (b.mode & 2) && (c.lanes = d2);
  c.return = b;
  c.sibling = null;
  null !== a420 && (a420.nextEffect = null, a420.flags = 8, b.firstEffect = b.lastEffect = a420);
  return b.child = c;
}
function wi(a420, b, c, d2, e2) {
  var f2 = b.mode, g2 = a420.child;
  a420 = g2.sibling;
  var h2 = { mode: "hidden", children: c };
  0 === (f2 & 2) && b.child !== g2 ? (c = b.child, c.childLanes = 0, c.pendingProps = h2, g2 = c.lastEffect, null !== g2 ? (b.firstEffect = c.firstEffect, b.lastEffect = g2, g2.nextEffect = null) : b.firstEffect = b.lastEffect = null) : c = Tg(g2, h2);
  null !== a420 ? d2 = Tg(a420, d2) : (d2 = Xg(d2, f2, e2, null), d2.flags |= 2);
  d2.return = b;
  c.return = b;
  c.sibling = d2;
  b.child = c;
  return d2;
}
function yi(a420, b) {
  a420.lanes |= b;
  var c = a420.alternate;
  null !== c && (c.lanes |= b);
  sg(a420.return, b);
}
function zi(a420, b, c, d2, e2, f2) {
  var g2 = a420.memoizedState;
  null === g2 ? a420.memoizedState = { isBackwards: b, rendering: null, renderingStartTime: 0, last: d2, tail: c, tailMode: e2, lastEffect: f2 } : (g2.isBackwards = b, g2.rendering = null, g2.renderingStartTime = 0, g2.last = d2, g2.tail = c, g2.tailMode = e2, g2.lastEffect = f2);
}
function Ai(a420, b, c) {
  var d2 = b.pendingProps, e2 = d2.revealOrder, f2 = d2.tail;
  fi(a420, b, d2.children, c);
  d2 = P.current;
  if (0 !== (d2 & 2))
    d2 = d2 & 1 | 2, b.flags |= 64;
  else {
    if (null !== a420 && 0 !== (a420.flags & 64))
      a:
        for (a420 = b.child; null !== a420; ) {
          if (13 === a420.tag)
            null !== a420.memoizedState && yi(a420, c);
          else if (19 === a420.tag)
            yi(a420, c);
          else if (null !== a420.child) {
            a420.child.return = a420;
            a420 = a420.child;
            continue;
          }
          if (a420 === b)
            break a;
          for (; null === a420.sibling; ) {
            if (null === a420.return || a420.return === b)
              break a;
            a420 = a420.return;
          }
          a420.sibling.return = a420.return;
          a420 = a420.sibling;
        }
    d2 &= 1;
  }
  I(P, d2);
  if (0 === (b.mode & 2))
    b.memoizedState = null;
  else
    switch (e2) {
      case "forwards":
        c = b.child;
        for (e2 = null; null !== c; )
          a420 = c.alternate, null !== a420 && null === ih(a420) && (e2 = c), c = c.sibling;
        c = e2;
        null === c ? (e2 = b.child, b.child = null) : (e2 = c.sibling, c.sibling = null);
        zi(b, false, e2, c, f2, b.lastEffect);
        break;
      case "backwards":
        c = null;
        e2 = b.child;
        for (b.child = null; null !== e2; ) {
          a420 = e2.alternate;
          if (null !== a420 && null === ih(a420)) {
            b.child = e2;
            break;
          }
          a420 = e2.sibling;
          e2.sibling = c;
          c = e2;
          e2 = a420;
        }
        zi(b, true, c, null, f2, b.lastEffect);
        break;
      case "together":
        zi(b, false, null, null, void 0, b.lastEffect);
        break;
      default:
        b.memoizedState = null;
    }
  return b.child;
}
function hi(a420, b, c) {
  null !== a420 && (b.dependencies = a420.dependencies);
  Dg |= b.lanes;
  if (0 !== (c & b.childLanes)) {
    if (null !== a420 && b.child !== a420.child)
      throw Error(y$1(153));
    if (null !== b.child) {
      a420 = b.child;
      c = Tg(a420, a420.pendingProps);
      b.child = c;
      for (c.return = b; null !== a420.sibling; )
        a420 = a420.sibling, c = c.sibling = Tg(a420, a420.pendingProps), c.return = b;
      c.sibling = null;
    }
    return b.child;
  }
  return null;
}
var Bi, Ci, Di, Ei;
Bi = function(a420, b) {
  for (var c = b.child; null !== c; ) {
    if (5 === c.tag || 6 === c.tag)
      a420.appendChild(c.stateNode);
    else if (4 !== c.tag && null !== c.child) {
      c.child.return = c;
      c = c.child;
      continue;
    }
    if (c === b)
      break;
    for (; null === c.sibling; ) {
      if (null === c.return || c.return === b)
        return;
      c = c.return;
    }
    c.sibling.return = c.return;
    c = c.sibling;
  }
};
Ci = function() {
};
Di = function(a420, b, c, d2) {
  var e2 = a420.memoizedProps;
  if (e2 !== d2) {
    a420 = b.stateNode;
    dh$1(ah.current);
    var f2 = null;
    switch (c) {
      case "input":
        e2 = Ya(a420, e2);
        d2 = Ya(a420, d2);
        f2 = [];
        break;
      case "option":
        e2 = eb(a420, e2);
        d2 = eb(a420, d2);
        f2 = [];
        break;
      case "select":
        e2 = m$3({}, e2, { value: void 0 });
        d2 = m$3({}, d2, { value: void 0 });
        f2 = [];
        break;
      case "textarea":
        e2 = gb(a420, e2);
        d2 = gb(a420, d2);
        f2 = [];
        break;
      default:
        "function" !== typeof e2.onClick && "function" === typeof d2.onClick && (a420.onclick = jf);
    }
    vb(c, d2);
    var g2;
    c = null;
    for (l2 in e2)
      if (!d2.hasOwnProperty(l2) && e2.hasOwnProperty(l2) && null != e2[l2])
        if ("style" === l2) {
          var h2 = e2[l2];
          for (g2 in h2)
            h2.hasOwnProperty(g2) && (c || (c = {}), c[g2] = "");
        } else
          "dangerouslySetInnerHTML" !== l2 && "children" !== l2 && "suppressContentEditableWarning" !== l2 && "suppressHydrationWarning" !== l2 && "autoFocus" !== l2 && (ca.hasOwnProperty(l2) ? f2 || (f2 = []) : (f2 = f2 || []).push(l2, null));
    for (l2 in d2) {
      var k = d2[l2];
      h2 = null != e2 ? e2[l2] : void 0;
      if (d2.hasOwnProperty(l2) && k !== h2 && (null != k || null != h2))
        if ("style" === l2)
          if (h2) {
            for (g2 in h2)
              !h2.hasOwnProperty(g2) || k && k.hasOwnProperty(g2) || (c || (c = {}), c[g2] = "");
            for (g2 in k)
              k.hasOwnProperty(g2) && h2[g2] !== k[g2] && (c || (c = {}), c[g2] = k[g2]);
          } else
            c || (f2 || (f2 = []), f2.push(l2, c)), c = k;
        else
          "dangerouslySetInnerHTML" === l2 ? (k = k ? k.__html : void 0, h2 = h2 ? h2.__html : void 0, null != k && h2 !== k && (f2 = f2 || []).push(l2, k)) : "children" === l2 ? "string" !== typeof k && "number" !== typeof k || (f2 = f2 || []).push(l2, "" + k) : "suppressContentEditableWarning" !== l2 && "suppressHydrationWarning" !== l2 && (ca.hasOwnProperty(l2) ? (null != k && "onScroll" === l2 && G$1("scroll", a420), f2 || h2 === k || (f2 = [])) : "object" === typeof k && null !== k && k.$$typeof === Ga ? k.toString() : (f2 = f2 || []).push(l2, k));
    }
    c && (f2 = f2 || []).push(
      "style",
      c
    );
    var l2 = f2;
    if (b.updateQueue = l2)
      b.flags |= 4;
  }
};
Ei = function(a420, b, c, d2) {
  c !== d2 && (b.flags |= 4);
};
function Fi(a420, b) {
  if (!lh)
    switch (a420.tailMode) {
      case "hidden":
        b = a420.tail;
        for (var c = null; null !== b; )
          null !== b.alternate && (c = b), b = b.sibling;
        null === c ? a420.tail = null : c.sibling = null;
        break;
      case "collapsed":
        c = a420.tail;
        for (var d2 = null; null !== c; )
          null !== c.alternate && (d2 = c), c = c.sibling;
        null === d2 ? b || null === a420.tail ? a420.tail = null : a420.tail.sibling = null : d2.sibling = null;
    }
}
function Gi(a420, b, c) {
  var d2 = b.pendingProps;
  switch (b.tag) {
    case 2:
    case 16:
    case 15:
    case 0:
    case 11:
    case 7:
    case 8:
    case 12:
    case 9:
    case 14:
      return null;
    case 1:
      return Ff(b.type) && Gf(), null;
    case 3:
      fh();
      H(N);
      H(M);
      uh();
      d2 = b.stateNode;
      d2.pendingContext && (d2.context = d2.pendingContext, d2.pendingContext = null);
      if (null === a420 || null === a420.child)
        rh$1(b) ? b.flags |= 4 : d2.hydrate || (b.flags |= 256);
      Ci(b);
      return null;
    case 5:
      hh(b);
      var e2 = dh$1(ch$1.current);
      c = b.type;
      if (null !== a420 && null != b.stateNode)
        Di(a420, b, c, d2, e2), a420.ref !== b.ref && (b.flags |= 128);
      else {
        if (!d2) {
          if (null === b.stateNode)
            throw Error(y$1(166));
          return null;
        }
        a420 = dh$1(ah.current);
        if (rh$1(b)) {
          d2 = b.stateNode;
          c = b.type;
          var f2 = b.memoizedProps;
          d2[wf] = b;
          d2[xf] = f2;
          switch (c) {
            case "dialog":
              G$1("cancel", d2);
              G$1("close", d2);
              break;
            case "iframe":
            case "object":
            case "embed":
              G$1("load", d2);
              break;
            case "video":
            case "audio":
              for (a420 = 0; a420 < Xe.length; a420++)
                G$1(Xe[a420], d2);
              break;
            case "source":
              G$1("error", d2);
              break;
            case "img":
            case "image":
            case "link":
              G$1("error", d2);
              G$1("load", d2);
              break;
            case "details":
              G$1("toggle", d2);
              break;
            case "input":
              Za(d2, f2);
              G$1("invalid", d2);
              break;
            case "select":
              d2._wrapperState = { wasMultiple: !!f2.multiple };
              G$1("invalid", d2);
              break;
            case "textarea":
              hb(d2, f2), G$1("invalid", d2);
          }
          vb(c, f2);
          a420 = null;
          for (var g2 in f2)
            f2.hasOwnProperty(g2) && (e2 = f2[g2], "children" === g2 ? "string" === typeof e2 ? d2.textContent !== e2 && (a420 = ["children", e2]) : "number" === typeof e2 && d2.textContent !== "" + e2 && (a420 = ["children", "" + e2]) : ca.hasOwnProperty(g2) && null != e2 && "onScroll" === g2 && G$1("scroll", d2));
          switch (c) {
            case "input":
              Va(d2);
              cb(d2, f2, true);
              break;
            case "textarea":
              Va(d2);
              jb(d2);
              break;
            case "select":
            case "option":
              break;
            default:
              "function" === typeof f2.onClick && (d2.onclick = jf);
          }
          d2 = a420;
          b.updateQueue = d2;
          null !== d2 && (b.flags |= 4);
        } else {
          g2 = 9 === e2.nodeType ? e2 : e2.ownerDocument;
          a420 === kb.html && (a420 = lb(c));
          a420 === kb.html ? "script" === c ? (a420 = g2.createElement("div"), a420.innerHTML = "<script><\/script>", a420 = a420.removeChild(a420.firstChild)) : "string" === typeof d2.is ? a420 = g2.createElement(c, { is: d2.is }) : (a420 = g2.createElement(c), "select" === c && (g2 = a420, d2.multiple ? g2.multiple = true : d2.size && (g2.size = d2.size))) : a420 = g2.createElementNS(a420, c);
          a420[wf] = b;
          a420[xf] = d2;
          Bi(a420, b, false, false);
          b.stateNode = a420;
          g2 = wb(c, d2);
          switch (c) {
            case "dialog":
              G$1("cancel", a420);
              G$1("close", a420);
              e2 = d2;
              break;
            case "iframe":
            case "object":
            case "embed":
              G$1("load", a420);
              e2 = d2;
              break;
            case "video":
            case "audio":
              for (e2 = 0; e2 < Xe.length; e2++)
                G$1(Xe[e2], a420);
              e2 = d2;
              break;
            case "source":
              G$1("error", a420);
              e2 = d2;
              break;
            case "img":
            case "image":
            case "link":
              G$1("error", a420);
              G$1("load", a420);
              e2 = d2;
              break;
            case "details":
              G$1("toggle", a420);
              e2 = d2;
              break;
            case "input":
              Za(a420, d2);
              e2 = Ya(a420, d2);
              G$1("invalid", a420);
              break;
            case "option":
              e2 = eb(a420, d2);
              break;
            case "select":
              a420._wrapperState = { wasMultiple: !!d2.multiple };
              e2 = m$3({}, d2, { value: void 0 });
              G$1("invalid", a420);
              break;
            case "textarea":
              hb(a420, d2);
              e2 = gb(a420, d2);
              G$1("invalid", a420);
              break;
            default:
              e2 = d2;
          }
          vb(c, e2);
          var h2 = e2;
          for (f2 in h2)
            if (h2.hasOwnProperty(f2)) {
              var k = h2[f2];
              "style" === f2 ? tb(a420, k) : "dangerouslySetInnerHTML" === f2 ? (k = k ? k.__html : void 0, null != k && ob(a420, k)) : "children" === f2 ? "string" === typeof k ? ("textarea" !== c || "" !== k) && pb(a420, k) : "number" === typeof k && pb(a420, "" + k) : "suppressContentEditableWarning" !== f2 && "suppressHydrationWarning" !== f2 && "autoFocus" !== f2 && (ca.hasOwnProperty(f2) ? null != k && "onScroll" === f2 && G$1("scroll", a420) : null != k && qa(a420, f2, k, g2));
            }
          switch (c) {
            case "input":
              Va(a420);
              cb(a420, d2, false);
              break;
            case "textarea":
              Va(a420);
              jb(a420);
              break;
            case "option":
              null != d2.value && a420.setAttribute("value", "" + Sa(d2.value));
              break;
            case "select":
              a420.multiple = !!d2.multiple;
              f2 = d2.value;
              null != f2 ? fb(a420, !!d2.multiple, f2, false) : null != d2.defaultValue && fb(a420, !!d2.multiple, d2.defaultValue, true);
              break;
            default:
              "function" === typeof e2.onClick && (a420.onclick = jf);
          }
          mf(c, d2) && (b.flags |= 4);
        }
        null !== b.ref && (b.flags |= 128);
      }
      return null;
    case 6:
      if (a420 && null != b.stateNode)
        Ei(a420, b, a420.memoizedProps, d2);
      else {
        if ("string" !== typeof d2 && null === b.stateNode)
          throw Error(y$1(166));
        c = dh$1(ch$1.current);
        dh$1(ah.current);
        rh$1(b) ? (d2 = b.stateNode, c = b.memoizedProps, d2[wf] = b, d2.nodeValue !== c && (b.flags |= 4)) : (d2 = (9 === c.nodeType ? c : c.ownerDocument).createTextNode(d2), d2[wf] = b, b.stateNode = d2);
      }
      return null;
    case 13:
      H(P);
      d2 = b.memoizedState;
      if (0 !== (b.flags & 64))
        return b.lanes = c, b;
      d2 = null !== d2;
      c = false;
      null === a420 ? void 0 !== b.memoizedProps.fallback && rh$1(b) : c = null !== a420.memoizedState;
      if (d2 && !c && 0 !== (b.mode & 2))
        if (null === a420 && true !== b.memoizedProps.unstable_avoidThisFallback || 0 !== (P.current & 1))
          0 === V && (V = 3);
        else {
          if (0 === V || 3 === V)
            V = 4;
          null === U || 0 === (Dg & 134217727) && 0 === (Hi & 134217727) || Ii(U, W$6);
        }
      if (d2 || c)
        b.flags |= 4;
      return null;
    case 4:
      return fh(), Ci(b), null === a420 && cf(b.stateNode.containerInfo), null;
    case 10:
      return rg(b), null;
    case 17:
      return Ff(b.type) && Gf(), null;
    case 19:
      H(P);
      d2 = b.memoizedState;
      if (null === d2)
        return null;
      f2 = 0 !== (b.flags & 64);
      g2 = d2.rendering;
      if (null === g2)
        if (f2)
          Fi(d2, false);
        else {
          if (0 !== V || null !== a420 && 0 !== (a420.flags & 64))
            for (a420 = b.child; null !== a420; ) {
              g2 = ih(a420);
              if (null !== g2) {
                b.flags |= 64;
                Fi(d2, false);
                f2 = g2.updateQueue;
                null !== f2 && (b.updateQueue = f2, b.flags |= 4);
                null === d2.lastEffect && (b.firstEffect = null);
                b.lastEffect = d2.lastEffect;
                d2 = c;
                for (c = b.child; null !== c; )
                  f2 = c, a420 = d2, f2.flags &= 2, f2.nextEffect = null, f2.firstEffect = null, f2.lastEffect = null, g2 = f2.alternate, null === g2 ? (f2.childLanes = 0, f2.lanes = a420, f2.child = null, f2.memoizedProps = null, f2.memoizedState = null, f2.updateQueue = null, f2.dependencies = null, f2.stateNode = null) : (f2.childLanes = g2.childLanes, f2.lanes = g2.lanes, f2.child = g2.child, f2.memoizedProps = g2.memoizedProps, f2.memoizedState = g2.memoizedState, f2.updateQueue = g2.updateQueue, f2.type = g2.type, a420 = g2.dependencies, f2.dependencies = null === a420 ? null : { lanes: a420.lanes, firstContext: a420.firstContext }), c = c.sibling;
                I(P, P.current & 1 | 2);
                return b.child;
              }
              a420 = a420.sibling;
            }
          null !== d2.tail && O() > Ji && (b.flags |= 64, f2 = true, Fi(d2, false), b.lanes = 33554432);
        }
      else {
        if (!f2)
          if (a420 = ih(g2), null !== a420) {
            if (b.flags |= 64, f2 = true, c = a420.updateQueue, null !== c && (b.updateQueue = c, b.flags |= 4), Fi(d2, true), null === d2.tail && "hidden" === d2.tailMode && !g2.alternate && !lh)
              return b = b.lastEffect = d2.lastEffect, null !== b && (b.nextEffect = null), null;
          } else
            2 * O() - d2.renderingStartTime > Ji && 1073741824 !== c && (b.flags |= 64, f2 = true, Fi(d2, false), b.lanes = 33554432);
        d2.isBackwards ? (g2.sibling = b.child, b.child = g2) : (c = d2.last, null !== c ? c.sibling = g2 : b.child = g2, d2.last = g2);
      }
      return null !== d2.tail ? (c = d2.tail, d2.rendering = c, d2.tail = c.sibling, d2.lastEffect = b.lastEffect, d2.renderingStartTime = O(), c.sibling = null, b = P.current, I(P, f2 ? b & 1 | 2 : b & 1), c) : null;
    case 23:
    case 24:
      return Ki(), null !== a420 && null !== a420.memoizedState !== (null !== b.memoizedState) && "unstable-defer-without-hiding" !== d2.mode && (b.flags |= 4), null;
  }
  throw Error(y$1(156, b.tag));
}
function Li(a420) {
  switch (a420.tag) {
    case 1:
      Ff(a420.type) && Gf();
      var b = a420.flags;
      return b & 4096 ? (a420.flags = b & -4097 | 64, a420) : null;
    case 3:
      fh();
      H(N);
      H(M);
      uh();
      b = a420.flags;
      if (0 !== (b & 64))
        throw Error(y$1(285));
      a420.flags = b & -4097 | 64;
      return a420;
    case 5:
      return hh(a420), null;
    case 13:
      return H(P), b = a420.flags, b & 4096 ? (a420.flags = b & -4097 | 64, a420) : null;
    case 19:
      return H(P), null;
    case 4:
      return fh(), null;
    case 10:
      return rg(a420), null;
    case 23:
    case 24:
      return Ki(), null;
    default:
      return null;
  }
}
function Mi(a420, b) {
  try {
    var c = "", d2 = b;
    do
      c += Qa(d2), d2 = d2.return;
    while (d2);
    var e2 = c;
  } catch (f2) {
    e2 = "\nError generating stack: " + f2.message + "\n" + f2.stack;
  }
  return { value: a420, source: b, stack: e2 };
}
function Ni(a420, b) {
  try {
    console.error(b.value);
  } catch (c) {
    setTimeout(function() {
      throw c;
    });
  }
}
var Oi = "function" === typeof WeakMap ? WeakMap : Map;
function Pi(a420, b, c) {
  c = zg(-1, c);
  c.tag = 3;
  c.payload = { element: null };
  var d2 = b.value;
  c.callback = function() {
    Qi || (Qi = true, Ri = d2);
    Ni(a420, b);
  };
  return c;
}
function Si(a420, b, c) {
  c = zg(-1, c);
  c.tag = 3;
  var d2 = a420.type.getDerivedStateFromError;
  if ("function" === typeof d2) {
    var e2 = b.value;
    c.payload = function() {
      Ni(a420, b);
      return d2(e2);
    };
  }
  var f2 = a420.stateNode;
  null !== f2 && "function" === typeof f2.componentDidCatch && (c.callback = function() {
    "function" !== typeof d2 && (null === Ti ? Ti = /* @__PURE__ */ new Set([this]) : Ti.add(this), Ni(a420, b));
    var c2 = b.stack;
    this.componentDidCatch(b.value, { componentStack: null !== c2 ? c2 : "" });
  });
  return c;
}
var Ui = "function" === typeof WeakSet ? WeakSet : Set;
function Vi(a420) {
  var b = a420.ref;
  if (null !== b)
    if ("function" === typeof b)
      try {
        b(null);
      } catch (c) {
        Wi(a420, c);
      }
    else
      b.current = null;
}
function Xi(a420, b) {
  switch (b.tag) {
    case 0:
    case 11:
    case 15:
    case 22:
      return;
    case 1:
      if (b.flags & 256 && null !== a420) {
        var c = a420.memoizedProps, d2 = a420.memoizedState;
        a420 = b.stateNode;
        b = a420.getSnapshotBeforeUpdate(b.elementType === b.type ? c : lg(b.type, c), d2);
        a420.__reactInternalSnapshotBeforeUpdate = b;
      }
      return;
    case 3:
      b.flags & 256 && qf(b.stateNode.containerInfo);
      return;
    case 5:
    case 6:
    case 4:
    case 17:
      return;
  }
  throw Error(y$1(163));
}
function Yi(a420, b, c) {
  switch (c.tag) {
    case 0:
    case 11:
    case 15:
    case 22:
      b = c.updateQueue;
      b = null !== b ? b.lastEffect : null;
      if (null !== b) {
        a420 = b = b.next;
        do {
          if (3 === (a420.tag & 3)) {
            var d2 = a420.create;
            a420.destroy = d2();
          }
          a420 = a420.next;
        } while (a420 !== b);
      }
      b = c.updateQueue;
      b = null !== b ? b.lastEffect : null;
      if (null !== b) {
        a420 = b = b.next;
        do {
          var e2 = a420;
          d2 = e2.next;
          e2 = e2.tag;
          0 !== (e2 & 4) && 0 !== (e2 & 1) && (Zi(c, a420), $i(c, a420));
          a420 = d2;
        } while (a420 !== b);
      }
      return;
    case 1:
      a420 = c.stateNode;
      c.flags & 4 && (null === b ? a420.componentDidMount() : (d2 = c.elementType === c.type ? b.memoizedProps : lg(c.type, b.memoizedProps), a420.componentDidUpdate(
        d2,
        b.memoizedState,
        a420.__reactInternalSnapshotBeforeUpdate
      )));
      b = c.updateQueue;
      null !== b && Eg(c, b, a420);
      return;
    case 3:
      b = c.updateQueue;
      if (null !== b) {
        a420 = null;
        if (null !== c.child)
          switch (c.child.tag) {
            case 5:
              a420 = c.child.stateNode;
              break;
            case 1:
              a420 = c.child.stateNode;
          }
        Eg(c, b, a420);
      }
      return;
    case 5:
      a420 = c.stateNode;
      null === b && c.flags & 4 && mf(c.type, c.memoizedProps) && a420.focus();
      return;
    case 6:
      return;
    case 4:
      return;
    case 12:
      return;
    case 13:
      null === c.memoizedState && (c = c.alternate, null !== c && (c = c.memoizedState, null !== c && (c = c.dehydrated, null !== c && Cc(c))));
      return;
    case 19:
    case 17:
    case 20:
    case 21:
    case 23:
    case 24:
      return;
  }
  throw Error(y$1(163));
}
function aj(a420, b) {
  for (var c = a420; ; ) {
    if (5 === c.tag) {
      var d2 = c.stateNode;
      if (b)
        d2 = d2.style, "function" === typeof d2.setProperty ? d2.setProperty("display", "none", "important") : d2.display = "none";
      else {
        d2 = c.stateNode;
        var e2 = c.memoizedProps.style;
        e2 = void 0 !== e2 && null !== e2 && e2.hasOwnProperty("display") ? e2.display : null;
        d2.style.display = sb("display", e2);
      }
    } else if (6 === c.tag)
      c.stateNode.nodeValue = b ? "" : c.memoizedProps;
    else if ((23 !== c.tag && 24 !== c.tag || null === c.memoizedState || c === a420) && null !== c.child) {
      c.child.return = c;
      c = c.child;
      continue;
    }
    if (c === a420)
      break;
    for (; null === c.sibling; ) {
      if (null === c.return || c.return === a420)
        return;
      c = c.return;
    }
    c.sibling.return = c.return;
    c = c.sibling;
  }
}
function bj(a420, b) {
  if (Mf && "function" === typeof Mf.onCommitFiberUnmount)
    try {
      Mf.onCommitFiberUnmount(Lf, b);
    } catch (f2) {
    }
  switch (b.tag) {
    case 0:
    case 11:
    case 14:
    case 15:
    case 22:
      a420 = b.updateQueue;
      if (null !== a420 && (a420 = a420.lastEffect, null !== a420)) {
        var c = a420 = a420.next;
        do {
          var d2 = c, e2 = d2.destroy;
          d2 = d2.tag;
          if (void 0 !== e2)
            if (0 !== (d2 & 4))
              Zi(b, c);
            else {
              d2 = b;
              try {
                e2();
              } catch (f2) {
                Wi(d2, f2);
              }
            }
          c = c.next;
        } while (c !== a420);
      }
      break;
    case 1:
      Vi(b);
      a420 = b.stateNode;
      if ("function" === typeof a420.componentWillUnmount)
        try {
          a420.props = b.memoizedProps, a420.state = b.memoizedState, a420.componentWillUnmount();
        } catch (f2) {
          Wi(
            b,
            f2
          );
        }
      break;
    case 5:
      Vi(b);
      break;
    case 4:
      cj(a420, b);
  }
}
function dj(a420) {
  a420.alternate = null;
  a420.child = null;
  a420.dependencies = null;
  a420.firstEffect = null;
  a420.lastEffect = null;
  a420.memoizedProps = null;
  a420.memoizedState = null;
  a420.pendingProps = null;
  a420.return = null;
  a420.updateQueue = null;
}
function ej(a420) {
  return 5 === a420.tag || 3 === a420.tag || 4 === a420.tag;
}
function fj(a420) {
  a: {
    for (var b = a420.return; null !== b; ) {
      if (ej(b))
        break a;
      b = b.return;
    }
    throw Error(y$1(160));
  }
  var c = b;
  b = c.stateNode;
  switch (c.tag) {
    case 5:
      var d2 = false;
      break;
    case 3:
      b = b.containerInfo;
      d2 = true;
      break;
    case 4:
      b = b.containerInfo;
      d2 = true;
      break;
    default:
      throw Error(y$1(161));
  }
  c.flags & 16 && (pb(b, ""), c.flags &= -17);
  a:
    b:
      for (c = a420; ; ) {
        for (; null === c.sibling; ) {
          if (null === c.return || ej(c.return)) {
            c = null;
            break a;
          }
          c = c.return;
        }
        c.sibling.return = c.return;
        for (c = c.sibling; 5 !== c.tag && 6 !== c.tag && 18 !== c.tag; ) {
          if (c.flags & 2)
            continue b;
          if (null === c.child || 4 === c.tag)
            continue b;
          else
            c.child.return = c, c = c.child;
        }
        if (!(c.flags & 2)) {
          c = c.stateNode;
          break a;
        }
      }
  d2 ? gj(a420, c, b) : hj(a420, c, b);
}
function gj(a420, b, c) {
  var d2 = a420.tag, e2 = 5 === d2 || 6 === d2;
  if (e2)
    a420 = e2 ? a420.stateNode : a420.stateNode.instance, b ? 8 === c.nodeType ? c.parentNode.insertBefore(a420, b) : c.insertBefore(a420, b) : (8 === c.nodeType ? (b = c.parentNode, b.insertBefore(a420, c)) : (b = c, b.appendChild(a420)), c = c._reactRootContainer, null !== c && void 0 !== c || null !== b.onclick || (b.onclick = jf));
  else if (4 !== d2 && (a420 = a420.child, null !== a420))
    for (gj(a420, b, c), a420 = a420.sibling; null !== a420; )
      gj(a420, b, c), a420 = a420.sibling;
}
function hj(a420, b, c) {
  var d2 = a420.tag, e2 = 5 === d2 || 6 === d2;
  if (e2)
    a420 = e2 ? a420.stateNode : a420.stateNode.instance, b ? c.insertBefore(a420, b) : c.appendChild(a420);
  else if (4 !== d2 && (a420 = a420.child, null !== a420))
    for (hj(a420, b, c), a420 = a420.sibling; null !== a420; )
      hj(a420, b, c), a420 = a420.sibling;
}
function cj(a420, b) {
  for (var c = b, d2 = false, e2, f2; ; ) {
    if (!d2) {
      d2 = c.return;
      a:
        for (; ; ) {
          if (null === d2)
            throw Error(y$1(160));
          e2 = d2.stateNode;
          switch (d2.tag) {
            case 5:
              f2 = false;
              break a;
            case 3:
              e2 = e2.containerInfo;
              f2 = true;
              break a;
            case 4:
              e2 = e2.containerInfo;
              f2 = true;
              break a;
          }
          d2 = d2.return;
        }
      d2 = true;
    }
    if (5 === c.tag || 6 === c.tag) {
      a:
        for (var g2 = a420, h2 = c, k = h2; ; )
          if (bj(g2, k), null !== k.child && 4 !== k.tag)
            k.child.return = k, k = k.child;
          else {
            if (k === h2)
              break a;
            for (; null === k.sibling; ) {
              if (null === k.return || k.return === h2)
                break a;
              k = k.return;
            }
            k.sibling.return = k.return;
            k = k.sibling;
          }
      f2 ? (g2 = e2, h2 = c.stateNode, 8 === g2.nodeType ? g2.parentNode.removeChild(h2) : g2.removeChild(h2)) : e2.removeChild(c.stateNode);
    } else if (4 === c.tag) {
      if (null !== c.child) {
        e2 = c.stateNode.containerInfo;
        f2 = true;
        c.child.return = c;
        c = c.child;
        continue;
      }
    } else if (bj(a420, c), null !== c.child) {
      c.child.return = c;
      c = c.child;
      continue;
    }
    if (c === b)
      break;
    for (; null === c.sibling; ) {
      if (null === c.return || c.return === b)
        return;
      c = c.return;
      4 === c.tag && (d2 = false);
    }
    c.sibling.return = c.return;
    c = c.sibling;
  }
}
function ij(a420, b) {
  switch (b.tag) {
    case 0:
    case 11:
    case 14:
    case 15:
    case 22:
      var c = b.updateQueue;
      c = null !== c ? c.lastEffect : null;
      if (null !== c) {
        var d2 = c = c.next;
        do
          3 === (d2.tag & 3) && (a420 = d2.destroy, d2.destroy = void 0, void 0 !== a420 && a420()), d2 = d2.next;
        while (d2 !== c);
      }
      return;
    case 1:
      return;
    case 5:
      c = b.stateNode;
      if (null != c) {
        d2 = b.memoizedProps;
        var e2 = null !== a420 ? a420.memoizedProps : d2;
        a420 = b.type;
        var f2 = b.updateQueue;
        b.updateQueue = null;
        if (null !== f2) {
          c[xf] = d2;
          "input" === a420 && "radio" === d2.type && null != d2.name && $a(c, d2);
          wb(a420, e2);
          b = wb(a420, d2);
          for (e2 = 0; e2 < f2.length; e2 += 2) {
            var g2 = f2[e2], h2 = f2[e2 + 1];
            "style" === g2 ? tb(c, h2) : "dangerouslySetInnerHTML" === g2 ? ob(c, h2) : "children" === g2 ? pb(c, h2) : qa(c, g2, h2, b);
          }
          switch (a420) {
            case "input":
              ab(c, d2);
              break;
            case "textarea":
              ib(c, d2);
              break;
            case "select":
              a420 = c._wrapperState.wasMultiple, c._wrapperState.wasMultiple = !!d2.multiple, f2 = d2.value, null != f2 ? fb(c, !!d2.multiple, f2, false) : a420 !== !!d2.multiple && (null != d2.defaultValue ? fb(c, !!d2.multiple, d2.defaultValue, true) : fb(c, !!d2.multiple, d2.multiple ? [] : "", false));
          }
        }
      }
      return;
    case 6:
      if (null === b.stateNode)
        throw Error(y$1(162));
      b.stateNode.nodeValue = b.memoizedProps;
      return;
    case 3:
      c = b.stateNode;
      c.hydrate && (c.hydrate = false, Cc(c.containerInfo));
      return;
    case 12:
      return;
    case 13:
      null !== b.memoizedState && (jj = O(), aj(b.child, true));
      kj(b);
      return;
    case 19:
      kj(b);
      return;
    case 17:
      return;
    case 23:
    case 24:
      aj(b, null !== b.memoizedState);
      return;
  }
  throw Error(y$1(163));
}
function kj(a420) {
  var b = a420.updateQueue;
  if (null !== b) {
    a420.updateQueue = null;
    var c = a420.stateNode;
    null === c && (c = a420.stateNode = new Ui());
    b.forEach(function(b2) {
      var d2 = lj.bind(null, a420, b2);
      c.has(b2) || (c.add(b2), b2.then(d2, d2));
    });
  }
}
function mj(a420, b) {
  return null !== a420 && (a420 = a420.memoizedState, null === a420 || null !== a420.dehydrated) ? (b = b.memoizedState, null !== b && null === b.dehydrated) : false;
}
var nj = Math.ceil, oj = ra.ReactCurrentDispatcher, pj = ra.ReactCurrentOwner, X = 0, U = null, Y = null, W$6 = 0, qj = 0, rj = Bf(0), V = 0, sj = null, tj = 0, Dg = 0, Hi = 0, uj = 0, vj = null, jj = 0, Ji = Infinity;
function wj() {
  Ji = O() + 500;
}
var Z = null, Qi = false, Ri = null, Ti = null, xj = false, yj = null, zj = 90, Aj = [], Bj = [], Cj = null, Dj = 0, Ej = null, Fj = -1, Gj = 0, Hj = 0, Ij = null, Jj = false;
function Hg() {
  return 0 !== (X & 48) ? O() : -1 !== Fj ? Fj : Fj = O();
}
function Ig(a420) {
  a420 = a420.mode;
  if (0 === (a420 & 2))
    return 1;
  if (0 === (a420 & 4))
    return 99 === eg() ? 1 : 2;
  0 === Gj && (Gj = tj);
  if (0 !== kg.transition) {
    0 !== Hj && (Hj = null !== vj ? vj.pendingLanes : 0);
    a420 = Gj;
    var b = 4186112 & ~Hj;
    b &= -b;
    0 === b && (a420 = 4186112 & ~a420, b = a420 & -a420, 0 === b && (b = 8192));
    return b;
  }
  a420 = eg();
  0 !== (X & 4) && 98 === a420 ? a420 = Xc(12, Gj) : (a420 = Sc(a420), a420 = Xc(a420, Gj));
  return a420;
}
function Jg(a420, b, c) {
  if (50 < Dj)
    throw Dj = 0, Ej = null, Error(y$1(185));
  a420 = Kj(a420, b);
  if (null === a420)
    return null;
  $c(a420, b, c);
  a420 === U && (Hi |= b, 4 === V && Ii(a420, W$6));
  var d2 = eg();
  1 === b ? 0 !== (X & 8) && 0 === (X & 48) ? Lj(a420) : (Mj(a420, c), 0 === X && (wj(), ig())) : (0 === (X & 4) || 98 !== d2 && 99 !== d2 || (null === Cj ? Cj = /* @__PURE__ */ new Set([a420]) : Cj.add(a420)), Mj(a420, c));
  vj = a420;
}
function Kj(a420, b) {
  a420.lanes |= b;
  var c = a420.alternate;
  null !== c && (c.lanes |= b);
  c = a420;
  for (a420 = a420.return; null !== a420; )
    a420.childLanes |= b, c = a420.alternate, null !== c && (c.childLanes |= b), c = a420, a420 = a420.return;
  return 3 === c.tag ? c.stateNode : null;
}
function Mj(a420, b) {
  for (var c = a420.callbackNode, d2 = a420.suspendedLanes, e2 = a420.pingedLanes, f2 = a420.expirationTimes, g2 = a420.pendingLanes; 0 < g2; ) {
    var h2 = 31 - Vc(g2), k = 1 << h2, l2 = f2[h2];
    if (-1 === l2) {
      if (0 === (k & d2) || 0 !== (k & e2)) {
        l2 = b;
        Rc(k);
        var n2 = F;
        f2[h2] = 10 <= n2 ? l2 + 250 : 6 <= n2 ? l2 + 5e3 : -1;
      }
    } else
      l2 <= b && (a420.expiredLanes |= k);
    g2 &= ~k;
  }
  d2 = Uc(a420, a420 === U ? W$6 : 0);
  b = F;
  if (0 === d2)
    null !== c && (c !== Zf && Pf(c), a420.callbackNode = null, a420.callbackPriority = 0);
  else {
    if (null !== c) {
      if (a420.callbackPriority === b)
        return;
      c !== Zf && Pf(c);
    }
    15 === b ? (c = Lj.bind(null, a420), null === ag ? (ag = [c], bg = Of(Uf, jg)) : ag.push(c), c = Zf) : 14 === b ? c = hg(99, Lj.bind(null, a420)) : (c = Tc(b), c = hg(c, Nj.bind(null, a420)));
    a420.callbackPriority = b;
    a420.callbackNode = c;
  }
}
function Nj(a420) {
  Fj = -1;
  Hj = Gj = 0;
  if (0 !== (X & 48))
    throw Error(y$1(327));
  var b = a420.callbackNode;
  if (Oj() && a420.callbackNode !== b)
    return null;
  var c = Uc(a420, a420 === U ? W$6 : 0);
  if (0 === c)
    return null;
  var d2 = c;
  var e2 = X;
  X |= 16;
  var f2 = Pj();
  if (U !== a420 || W$6 !== d2)
    wj(), Qj(a420, d2);
  do
    try {
      Rj();
      break;
    } catch (h2) {
      Sj(a420, h2);
    }
  while (1);
  qg();
  oj.current = f2;
  X = e2;
  null !== Y ? d2 = 0 : (U = null, W$6 = 0, d2 = V);
  if (0 !== (tj & Hi))
    Qj(a420, 0);
  else if (0 !== d2) {
    2 === d2 && (X |= 64, a420.hydrate && (a420.hydrate = false, qf(a420.containerInfo)), c = Wc(a420), 0 !== c && (d2 = Tj(a420, c)));
    if (1 === d2)
      throw b = sj, Qj(a420, 0), Ii(a420, c), Mj(a420, O()), b;
    a420.finishedWork = a420.current.alternate;
    a420.finishedLanes = c;
    switch (d2) {
      case 0:
      case 1:
        throw Error(y$1(345));
      case 2:
        Uj(a420);
        break;
      case 3:
        Ii(a420, c);
        if ((c & 62914560) === c && (d2 = jj + 500 - O(), 10 < d2)) {
          if (0 !== Uc(a420, 0))
            break;
          e2 = a420.suspendedLanes;
          if ((e2 & c) !== c) {
            Hg();
            a420.pingedLanes |= a420.suspendedLanes & e2;
            break;
          }
          a420.timeoutHandle = of(Uj.bind(null, a420), d2);
          break;
        }
        Uj(a420);
        break;
      case 4:
        Ii(a420, c);
        if ((c & 4186112) === c)
          break;
        d2 = a420.eventTimes;
        for (e2 = -1; 0 < c; ) {
          var g2 = 31 - Vc(c);
          f2 = 1 << g2;
          g2 = d2[g2];
          g2 > e2 && (e2 = g2);
          c &= ~f2;
        }
        c = e2;
        c = O() - c;
        c = (120 > c ? 120 : 480 > c ? 480 : 1080 > c ? 1080 : 1920 > c ? 1920 : 3e3 > c ? 3e3 : 4320 > c ? 4320 : 1960 * nj(c / 1960)) - c;
        if (10 < c) {
          a420.timeoutHandle = of(Uj.bind(null, a420), c);
          break;
        }
        Uj(a420);
        break;
      case 5:
        Uj(a420);
        break;
      default:
        throw Error(y$1(329));
    }
  }
  Mj(a420, O());
  return a420.callbackNode === b ? Nj.bind(null, a420) : null;
}
function Ii(a420, b) {
  b &= ~uj;
  b &= ~Hi;
  a420.suspendedLanes |= b;
  a420.pingedLanes &= ~b;
  for (a420 = a420.expirationTimes; 0 < b; ) {
    var c = 31 - Vc(b), d2 = 1 << c;
    a420[c] = -1;
    b &= ~d2;
  }
}
function Lj(a420) {
  if (0 !== (X & 48))
    throw Error(y$1(327));
  Oj();
  if (a420 === U && 0 !== (a420.expiredLanes & W$6)) {
    var b = W$6;
    var c = Tj(a420, b);
    0 !== (tj & Hi) && (b = Uc(a420, b), c = Tj(a420, b));
  } else
    b = Uc(a420, 0), c = Tj(a420, b);
  0 !== a420.tag && 2 === c && (X |= 64, a420.hydrate && (a420.hydrate = false, qf(a420.containerInfo)), b = Wc(a420), 0 !== b && (c = Tj(a420, b)));
  if (1 === c)
    throw c = sj, Qj(a420, 0), Ii(a420, b), Mj(a420, O()), c;
  a420.finishedWork = a420.current.alternate;
  a420.finishedLanes = b;
  Uj(a420);
  Mj(a420, O());
  return null;
}
function Vj() {
  if (null !== Cj) {
    var a420 = Cj;
    Cj = null;
    a420.forEach(function(a421) {
      a421.expiredLanes |= 24 & a421.pendingLanes;
      Mj(a421, O());
    });
  }
  ig();
}
function Wj(a420, b) {
  var c = X;
  X |= 1;
  try {
    return a420(b);
  } finally {
    X = c, 0 === X && (wj(), ig());
  }
}
function Xj(a420, b) {
  var c = X;
  X &= -2;
  X |= 8;
  try {
    return a420(b);
  } finally {
    X = c, 0 === X && (wj(), ig());
  }
}
function ni(a420, b) {
  I(rj, qj);
  qj |= b;
  tj |= b;
}
function Ki() {
  qj = rj.current;
  H(rj);
}
function Qj(a420, b) {
  a420.finishedWork = null;
  a420.finishedLanes = 0;
  var c = a420.timeoutHandle;
  -1 !== c && (a420.timeoutHandle = -1, pf(c));
  if (null !== Y)
    for (c = Y.return; null !== c; ) {
      var d2 = c;
      switch (d2.tag) {
        case 1:
          d2 = d2.type.childContextTypes;
          null !== d2 && void 0 !== d2 && Gf();
          break;
        case 3:
          fh();
          H(N);
          H(M);
          uh();
          break;
        case 5:
          hh(d2);
          break;
        case 4:
          fh();
          break;
        case 13:
          H(P);
          break;
        case 19:
          H(P);
          break;
        case 10:
          rg(d2);
          break;
        case 23:
        case 24:
          Ki();
      }
      c = c.return;
    }
  U = a420;
  Y = Tg(a420.current, null);
  W$6 = qj = tj = b;
  V = 0;
  sj = null;
  uj = Hi = Dg = 0;
}
function Sj(a420, b) {
  do {
    var c = Y;
    try {
      qg();
      vh.current = Gh;
      if (yh) {
        for (var d2 = R$2.memoizedState; null !== d2; ) {
          var e2 = d2.queue;
          null !== e2 && (e2.pending = null);
          d2 = d2.next;
        }
        yh = false;
      }
      xh = 0;
      T = S = R$2 = null;
      zh = false;
      pj.current = null;
      if (null === c || null === c.return) {
        V = 1;
        sj = b;
        Y = null;
        break;
      }
      a: {
        var f2 = a420, g2 = c.return, h2 = c, k = b;
        b = W$6;
        h2.flags |= 2048;
        h2.firstEffect = h2.lastEffect = null;
        if (null !== k && "object" === typeof k && "function" === typeof k.then) {
          var l2 = k;
          if (0 === (h2.mode & 2)) {
            var n2 = h2.alternate;
            n2 ? (h2.updateQueue = n2.updateQueue, h2.memoizedState = n2.memoizedState, h2.lanes = n2.lanes) : (h2.updateQueue = null, h2.memoizedState = null);
          }
          var A2 = 0 !== (P.current & 1), p2 = g2;
          do {
            var C2;
            if (C2 = 13 === p2.tag) {
              var x2 = p2.memoizedState;
              if (null !== x2)
                C2 = null !== x2.dehydrated ? true : false;
              else {
                var w2 = p2.memoizedProps;
                C2 = void 0 === w2.fallback ? false : true !== w2.unstable_avoidThisFallback ? true : A2 ? false : true;
              }
            }
            if (C2) {
              var z2 = p2.updateQueue;
              if (null === z2) {
                var u2 = /* @__PURE__ */ new Set();
                u2.add(l2);
                p2.updateQueue = u2;
              } else
                z2.add(l2);
              if (0 === (p2.mode & 2)) {
                p2.flags |= 64;
                h2.flags |= 16384;
                h2.flags &= -2981;
                if (1 === h2.tag)
                  if (null === h2.alternate)
                    h2.tag = 17;
                  else {
                    var t2 = zg(-1, 1);
                    t2.tag = 2;
                    Ag(h2, t2);
                  }
                h2.lanes |= 1;
                break a;
              }
              k = void 0;
              h2 = b;
              var q2 = f2.pingCache;
              null === q2 ? (q2 = f2.pingCache = new Oi(), k = /* @__PURE__ */ new Set(), q2.set(l2, k)) : (k = q2.get(l2), void 0 === k && (k = /* @__PURE__ */ new Set(), q2.set(l2, k)));
              if (!k.has(h2)) {
                k.add(h2);
                var v2 = Yj.bind(null, f2, l2, h2);
                l2.then(v2, v2);
              }
              p2.flags |= 4096;
              p2.lanes = b;
              break a;
            }
            p2 = p2.return;
          } while (null !== p2);
          k = Error((Ra(h2.type) || "A React component") + " suspended while rendering, but no fallback UI was specified.\n\nAdd a <Suspense fallback=...> component higher in the tree to provide a loading indicator or placeholder to display.");
        }
        5 !== V && (V = 2);
        k = Mi(k, h2);
        p2 = g2;
        do {
          switch (p2.tag) {
            case 3:
              f2 = k;
              p2.flags |= 4096;
              b &= -b;
              p2.lanes |= b;
              var J2 = Pi(p2, f2, b);
              Bg(p2, J2);
              break a;
            case 1:
              f2 = k;
              var K2 = p2.type, Q2 = p2.stateNode;
              if (0 === (p2.flags & 64) && ("function" === typeof K2.getDerivedStateFromError || null !== Q2 && "function" === typeof Q2.componentDidCatch && (null === Ti || !Ti.has(Q2)))) {
                p2.flags |= 4096;
                b &= -b;
                p2.lanes |= b;
                var L2 = Si(p2, f2, b);
                Bg(p2, L2);
                break a;
              }
          }
          p2 = p2.return;
        } while (null !== p2);
      }
      Zj(c);
    } catch (va) {
      b = va;
      Y === c && null !== c && (Y = c = c.return);
      continue;
    }
    break;
  } while (1);
}
function Pj() {
  var a420 = oj.current;
  oj.current = Gh;
  return null === a420 ? Gh : a420;
}
function Tj(a420, b) {
  var c = X;
  X |= 16;
  var d2 = Pj();
  U === a420 && W$6 === b || Qj(a420, b);
  do
    try {
      ak();
      break;
    } catch (e2) {
      Sj(a420, e2);
    }
  while (1);
  qg();
  X = c;
  oj.current = d2;
  if (null !== Y)
    throw Error(y$1(261));
  U = null;
  W$6 = 0;
  return V;
}
function ak() {
  for (; null !== Y; )
    bk(Y);
}
function Rj() {
  for (; null !== Y && !Qf(); )
    bk(Y);
}
function bk(a420) {
  var b = ck(a420.alternate, a420, qj);
  a420.memoizedProps = a420.pendingProps;
  null === b ? Zj(a420) : Y = b;
  pj.current = null;
}
function Zj(a420) {
  var b = a420;
  do {
    var c = b.alternate;
    a420 = b.return;
    if (0 === (b.flags & 2048)) {
      c = Gi(c, b, qj);
      if (null !== c) {
        Y = c;
        return;
      }
      c = b;
      if (24 !== c.tag && 23 !== c.tag || null === c.memoizedState || 0 !== (qj & 1073741824) || 0 === (c.mode & 4)) {
        for (var d2 = 0, e2 = c.child; null !== e2; )
          d2 |= e2.lanes | e2.childLanes, e2 = e2.sibling;
        c.childLanes = d2;
      }
      null !== a420 && 0 === (a420.flags & 2048) && (null === a420.firstEffect && (a420.firstEffect = b.firstEffect), null !== b.lastEffect && (null !== a420.lastEffect && (a420.lastEffect.nextEffect = b.firstEffect), a420.lastEffect = b.lastEffect), 1 < b.flags && (null !== a420.lastEffect ? a420.lastEffect.nextEffect = b : a420.firstEffect = b, a420.lastEffect = b));
    } else {
      c = Li(b);
      if (null !== c) {
        c.flags &= 2047;
        Y = c;
        return;
      }
      null !== a420 && (a420.firstEffect = a420.lastEffect = null, a420.flags |= 2048);
    }
    b = b.sibling;
    if (null !== b) {
      Y = b;
      return;
    }
    Y = b = a420;
  } while (null !== b);
  0 === V && (V = 5);
}
function Uj(a420) {
  var b = eg();
  gg(99, dk.bind(null, a420, b));
  return null;
}
function dk(a420, b) {
  do
    Oj();
  while (null !== yj);
  if (0 !== (X & 48))
    throw Error(y$1(327));
  var c = a420.finishedWork;
  if (null === c)
    return null;
  a420.finishedWork = null;
  a420.finishedLanes = 0;
  if (c === a420.current)
    throw Error(y$1(177));
  a420.callbackNode = null;
  var d2 = c.lanes | c.childLanes, e2 = d2, f2 = a420.pendingLanes & ~e2;
  a420.pendingLanes = e2;
  a420.suspendedLanes = 0;
  a420.pingedLanes = 0;
  a420.expiredLanes &= e2;
  a420.mutableReadLanes &= e2;
  a420.entangledLanes &= e2;
  e2 = a420.entanglements;
  for (var g2 = a420.eventTimes, h2 = a420.expirationTimes; 0 < f2; ) {
    var k = 31 - Vc(f2), l2 = 1 << k;
    e2[k] = 0;
    g2[k] = -1;
    h2[k] = -1;
    f2 &= ~l2;
  }
  null !== Cj && 0 === (d2 & 24) && Cj.has(a420) && Cj.delete(a420);
  a420 === U && (Y = U = null, W$6 = 0);
  1 < c.flags ? null !== c.lastEffect ? (c.lastEffect.nextEffect = c, d2 = c.firstEffect) : d2 = c : d2 = c.firstEffect;
  if (null !== d2) {
    e2 = X;
    X |= 32;
    pj.current = null;
    kf = fd;
    g2 = Ne();
    if (Oe(g2)) {
      if ("selectionStart" in g2)
        h2 = { start: g2.selectionStart, end: g2.selectionEnd };
      else
        a:
          if (h2 = (h2 = g2.ownerDocument) && h2.defaultView || window, (l2 = h2.getSelection && h2.getSelection()) && 0 !== l2.rangeCount) {
            h2 = l2.anchorNode;
            f2 = l2.anchorOffset;
            k = l2.focusNode;
            l2 = l2.focusOffset;
            try {
              h2.nodeType, k.nodeType;
            } catch (va) {
              h2 = null;
              break a;
            }
            var n2 = 0, A2 = -1, p2 = -1, C2 = 0, x2 = 0, w2 = g2, z2 = null;
            b:
              for (; ; ) {
                for (var u2; ; ) {
                  w2 !== h2 || 0 !== f2 && 3 !== w2.nodeType || (A2 = n2 + f2);
                  w2 !== k || 0 !== l2 && 3 !== w2.nodeType || (p2 = n2 + l2);
                  3 === w2.nodeType && (n2 += w2.nodeValue.length);
                  if (null === (u2 = w2.firstChild))
                    break;
                  z2 = w2;
                  w2 = u2;
                }
                for (; ; ) {
                  if (w2 === g2)
                    break b;
                  z2 === h2 && ++C2 === f2 && (A2 = n2);
                  z2 === k && ++x2 === l2 && (p2 = n2);
                  if (null !== (u2 = w2.nextSibling))
                    break;
                  w2 = z2;
                  z2 = w2.parentNode;
                }
                w2 = u2;
              }
            h2 = -1 === A2 || -1 === p2 ? null : { start: A2, end: p2 };
          } else
            h2 = null;
      h2 = h2 || { start: 0, end: 0 };
    } else
      h2 = null;
    lf = { focusedElem: g2, selectionRange: h2 };
    fd = false;
    Ij = null;
    Jj = false;
    Z = d2;
    do
      try {
        ek();
      } catch (va) {
        if (null === Z)
          throw Error(y$1(330));
        Wi(Z, va);
        Z = Z.nextEffect;
      }
    while (null !== Z);
    Ij = null;
    Z = d2;
    do
      try {
        for (g2 = a420; null !== Z; ) {
          var t2 = Z.flags;
          t2 & 16 && pb(Z.stateNode, "");
          if (t2 & 128) {
            var q2 = Z.alternate;
            if (null !== q2) {
              var v2 = q2.ref;
              null !== v2 && ("function" === typeof v2 ? v2(null) : v2.current = null);
            }
          }
          switch (t2 & 1038) {
            case 2:
              fj(Z);
              Z.flags &= -3;
              break;
            case 6:
              fj(Z);
              Z.flags &= -3;
              ij(Z.alternate, Z);
              break;
            case 1024:
              Z.flags &= -1025;
              break;
            case 1028:
              Z.flags &= -1025;
              ij(Z.alternate, Z);
              break;
            case 4:
              ij(Z.alternate, Z);
              break;
            case 8:
              h2 = Z;
              cj(g2, h2);
              var J2 = h2.alternate;
              dj(h2);
              null !== J2 && dj(J2);
          }
          Z = Z.nextEffect;
        }
      } catch (va) {
        if (null === Z)
          throw Error(y$1(330));
        Wi(Z, va);
        Z = Z.nextEffect;
      }
    while (null !== Z);
    v2 = lf;
    q2 = Ne();
    t2 = v2.focusedElem;
    g2 = v2.selectionRange;
    if (q2 !== t2 && t2 && t2.ownerDocument && Me(t2.ownerDocument.documentElement, t2)) {
      null !== g2 && Oe(t2) && (q2 = g2.start, v2 = g2.end, void 0 === v2 && (v2 = q2), "selectionStart" in t2 ? (t2.selectionStart = q2, t2.selectionEnd = Math.min(v2, t2.value.length)) : (v2 = (q2 = t2.ownerDocument || document) && q2.defaultView || window, v2.getSelection && (v2 = v2.getSelection(), h2 = t2.textContent.length, J2 = Math.min(g2.start, h2), g2 = void 0 === g2.end ? J2 : Math.min(g2.end, h2), !v2.extend && J2 > g2 && (h2 = g2, g2 = J2, J2 = h2), h2 = Le(t2, J2), f2 = Le(t2, g2), h2 && f2 && (1 !== v2.rangeCount || v2.anchorNode !== h2.node || v2.anchorOffset !== h2.offset || v2.focusNode !== f2.node || v2.focusOffset !== f2.offset) && (q2 = q2.createRange(), q2.setStart(h2.node, h2.offset), v2.removeAllRanges(), J2 > g2 ? (v2.addRange(q2), v2.extend(f2.node, f2.offset)) : (q2.setEnd(f2.node, f2.offset), v2.addRange(q2))))));
      q2 = [];
      for (v2 = t2; v2 = v2.parentNode; )
        1 === v2.nodeType && q2.push({ element: v2, left: v2.scrollLeft, top: v2.scrollTop });
      "function" === typeof t2.focus && t2.focus();
      for (t2 = 0; t2 < q2.length; t2++)
        v2 = q2[t2], v2.element.scrollLeft = v2.left, v2.element.scrollTop = v2.top;
    }
    fd = !!kf;
    lf = kf = null;
    a420.current = c;
    Z = d2;
    do
      try {
        for (t2 = a420; null !== Z; ) {
          var K2 = Z.flags;
          K2 & 36 && Yi(t2, Z.alternate, Z);
          if (K2 & 128) {
            q2 = void 0;
            var Q2 = Z.ref;
            if (null !== Q2) {
              var L2 = Z.stateNode;
              switch (Z.tag) {
                case 5:
                  q2 = L2;
                  break;
                default:
                  q2 = L2;
              }
              "function" === typeof Q2 ? Q2(q2) : Q2.current = q2;
            }
          }
          Z = Z.nextEffect;
        }
      } catch (va) {
        if (null === Z)
          throw Error(y$1(330));
        Wi(Z, va);
        Z = Z.nextEffect;
      }
    while (null !== Z);
    Z = null;
    $f();
    X = e2;
  } else
    a420.current = c;
  if (xj)
    xj = false, yj = a420, zj = b;
  else
    for (Z = d2; null !== Z; )
      b = Z.nextEffect, Z.nextEffect = null, Z.flags & 8 && (K2 = Z, K2.sibling = null, K2.stateNode = null), Z = b;
  d2 = a420.pendingLanes;
  0 === d2 && (Ti = null);
  1 === d2 ? a420 === Ej ? Dj++ : (Dj = 0, Ej = a420) : Dj = 0;
  c = c.stateNode;
  if (Mf && "function" === typeof Mf.onCommitFiberRoot)
    try {
      Mf.onCommitFiberRoot(Lf, c, void 0, 64 === (c.current.flags & 64));
    } catch (va) {
    }
  Mj(a420, O());
  if (Qi)
    throw Qi = false, a420 = Ri, Ri = null, a420;
  if (0 !== (X & 8))
    return null;
  ig();
  return null;
}
function ek() {
  for (; null !== Z; ) {
    var a420 = Z.alternate;
    Jj || null === Ij || (0 !== (Z.flags & 8) ? dc(Z, Ij) && (Jj = true) : 13 === Z.tag && mj(a420, Z) && dc(Z, Ij) && (Jj = true));
    var b = Z.flags;
    0 !== (b & 256) && Xi(a420, Z);
    0 === (b & 512) || xj || (xj = true, hg(97, function() {
      Oj();
      return null;
    }));
    Z = Z.nextEffect;
  }
}
function Oj() {
  if (90 !== zj) {
    var a420 = 97 < zj ? 97 : zj;
    zj = 90;
    return gg(a420, fk);
  }
  return false;
}
function $i(a420, b) {
  Aj.push(b, a420);
  xj || (xj = true, hg(97, function() {
    Oj();
    return null;
  }));
}
function Zi(a420, b) {
  Bj.push(b, a420);
  xj || (xj = true, hg(97, function() {
    Oj();
    return null;
  }));
}
function fk() {
  if (null === yj)
    return false;
  var a420 = yj;
  yj = null;
  if (0 !== (X & 48))
    throw Error(y$1(331));
  var b = X;
  X |= 32;
  var c = Bj;
  Bj = [];
  for (var d2 = 0; d2 < c.length; d2 += 2) {
    var e2 = c[d2], f2 = c[d2 + 1], g2 = e2.destroy;
    e2.destroy = void 0;
    if ("function" === typeof g2)
      try {
        g2();
      } catch (k) {
        if (null === f2)
          throw Error(y$1(330));
        Wi(f2, k);
      }
  }
  c = Aj;
  Aj = [];
  for (d2 = 0; d2 < c.length; d2 += 2) {
    e2 = c[d2];
    f2 = c[d2 + 1];
    try {
      var h2 = e2.create;
      e2.destroy = h2();
    } catch (k) {
      if (null === f2)
        throw Error(y$1(330));
      Wi(f2, k);
    }
  }
  for (h2 = a420.current.firstEffect; null !== h2; )
    a420 = h2.nextEffect, h2.nextEffect = null, h2.flags & 8 && (h2.sibling = null, h2.stateNode = null), h2 = a420;
  X = b;
  ig();
  return true;
}
function gk(a420, b, c) {
  b = Mi(c, b);
  b = Pi(a420, b, 1);
  Ag(a420, b);
  b = Hg();
  a420 = Kj(a420, 1);
  null !== a420 && ($c(a420, 1, b), Mj(a420, b));
}
function Wi(a420, b) {
  if (3 === a420.tag)
    gk(a420, a420, b);
  else
    for (var c = a420.return; null !== c; ) {
      if (3 === c.tag) {
        gk(c, a420, b);
        break;
      } else if (1 === c.tag) {
        var d2 = c.stateNode;
        if ("function" === typeof c.type.getDerivedStateFromError || "function" === typeof d2.componentDidCatch && (null === Ti || !Ti.has(d2))) {
          a420 = Mi(b, a420);
          var e2 = Si(c, a420, 1);
          Ag(c, e2);
          e2 = Hg();
          c = Kj(c, 1);
          if (null !== c)
            $c(c, 1, e2), Mj(c, e2);
          else if ("function" === typeof d2.componentDidCatch && (null === Ti || !Ti.has(d2)))
            try {
              d2.componentDidCatch(b, a420);
            } catch (f2) {
            }
          break;
        }
      }
      c = c.return;
    }
}
function Yj(a420, b, c) {
  var d2 = a420.pingCache;
  null !== d2 && d2.delete(b);
  b = Hg();
  a420.pingedLanes |= a420.suspendedLanes & c;
  U === a420 && (W$6 & c) === c && (4 === V || 3 === V && (W$6 & 62914560) === W$6 && 500 > O() - jj ? Qj(a420, 0) : uj |= c);
  Mj(a420, b);
}
function lj(a420, b) {
  var c = a420.stateNode;
  null !== c && c.delete(b);
  b = 0;
  0 === b && (b = a420.mode, 0 === (b & 2) ? b = 1 : 0 === (b & 4) ? b = 99 === eg() ? 1 : 2 : (0 === Gj && (Gj = tj), b = Yc(62914560 & ~Gj), 0 === b && (b = 4194304)));
  c = Hg();
  a420 = Kj(a420, b);
  null !== a420 && ($c(a420, b, c), Mj(a420, c));
}
var ck;
ck = function(a420, b, c) {
  var d2 = b.lanes;
  if (null !== a420)
    if (a420.memoizedProps !== b.pendingProps || N.current)
      ug = true;
    else if (0 !== (c & d2))
      ug = 0 !== (a420.flags & 16384) ? true : false;
    else {
      ug = false;
      switch (b.tag) {
        case 3:
          ri(b);
          sh$1();
          break;
        case 5:
          gh(b);
          break;
        case 1:
          Ff(b.type) && Jf(b);
          break;
        case 4:
          eh(b, b.stateNode.containerInfo);
          break;
        case 10:
          d2 = b.memoizedProps.value;
          var e2 = b.type._context;
          I(mg, e2._currentValue);
          e2._currentValue = d2;
          break;
        case 13:
          if (null !== b.memoizedState) {
            if (0 !== (c & b.child.childLanes))
              return ti(a420, b, c);
            I(P, P.current & 1);
            b = hi(a420, b, c);
            return null !== b ? b.sibling : null;
          }
          I(P, P.current & 1);
          break;
        case 19:
          d2 = 0 !== (c & b.childLanes);
          if (0 !== (a420.flags & 64)) {
            if (d2)
              return Ai(a420, b, c);
            b.flags |= 64;
          }
          e2 = b.memoizedState;
          null !== e2 && (e2.rendering = null, e2.tail = null, e2.lastEffect = null);
          I(P, P.current);
          if (d2)
            break;
          else
            return null;
        case 23:
        case 24:
          return b.lanes = 0, mi(a420, b, c);
      }
      return hi(a420, b, c);
    }
  else
    ug = false;
  b.lanes = 0;
  switch (b.tag) {
    case 2:
      d2 = b.type;
      null !== a420 && (a420.alternate = null, b.alternate = null, b.flags |= 2);
      a420 = b.pendingProps;
      e2 = Ef(b, M.current);
      tg(b, c);
      e2 = Ch$1(null, b, d2, a420, e2, c);
      b.flags |= 1;
      if ("object" === typeof e2 && null !== e2 && "function" === typeof e2.render && void 0 === e2.$$typeof) {
        b.tag = 1;
        b.memoizedState = null;
        b.updateQueue = null;
        if (Ff(d2)) {
          var f2 = true;
          Jf(b);
        } else
          f2 = false;
        b.memoizedState = null !== e2.state && void 0 !== e2.state ? e2.state : null;
        xg(b);
        var g2 = d2.getDerivedStateFromProps;
        "function" === typeof g2 && Gg(b, d2, g2, a420);
        e2.updater = Kg;
        b.stateNode = e2;
        e2._reactInternals = b;
        Og(b, d2, a420, c);
        b = qi(null, b, d2, true, f2, c);
      } else
        b.tag = 0, fi(null, b, e2, c), b = b.child;
      return b;
    case 16:
      e2 = b.elementType;
      a: {
        null !== a420 && (a420.alternate = null, b.alternate = null, b.flags |= 2);
        a420 = b.pendingProps;
        f2 = e2._init;
        e2 = f2(e2._payload);
        b.type = e2;
        f2 = b.tag = hk(e2);
        a420 = lg(e2, a420);
        switch (f2) {
          case 0:
            b = li(null, b, e2, a420, c);
            break a;
          case 1:
            b = pi(null, b, e2, a420, c);
            break a;
          case 11:
            b = gi(null, b, e2, a420, c);
            break a;
          case 14:
            b = ii(null, b, e2, lg(e2.type, a420), d2, c);
            break a;
        }
        throw Error(y$1(306, e2, ""));
      }
      return b;
    case 0:
      return d2 = b.type, e2 = b.pendingProps, e2 = b.elementType === d2 ? e2 : lg(d2, e2), li(a420, b, d2, e2, c);
    case 1:
      return d2 = b.type, e2 = b.pendingProps, e2 = b.elementType === d2 ? e2 : lg(d2, e2), pi(a420, b, d2, e2, c);
    case 3:
      ri(b);
      d2 = b.updateQueue;
      if (null === a420 || null === d2)
        throw Error(y$1(282));
      d2 = b.pendingProps;
      e2 = b.memoizedState;
      e2 = null !== e2 ? e2.element : null;
      yg(a420, b);
      Cg(b, d2, null, c);
      d2 = b.memoizedState.element;
      if (d2 === e2)
        sh$1(), b = hi(a420, b, c);
      else {
        e2 = b.stateNode;
        if (f2 = e2.hydrate)
          kh = rf(b.stateNode.containerInfo.firstChild), jh = b, f2 = lh = true;
        if (f2) {
          a420 = e2.mutableSourceEagerHydrationData;
          if (null != a420)
            for (e2 = 0; e2 < a420.length; e2 += 2)
              f2 = a420[e2], f2._workInProgressVersionPrimary = a420[e2 + 1], th.push(f2);
          c = Zg(b, null, d2, c);
          for (b.child = c; c; )
            c.flags = c.flags & -3 | 1024, c = c.sibling;
        } else
          fi(a420, b, d2, c), sh$1();
        b = b.child;
      }
      return b;
    case 5:
      return gh(b), null === a420 && ph(b), d2 = b.type, e2 = b.pendingProps, f2 = null !== a420 ? a420.memoizedProps : null, g2 = e2.children, nf(d2, e2) ? g2 = null : null !== f2 && nf(d2, f2) && (b.flags |= 16), oi(a420, b), fi(a420, b, g2, c), b.child;
    case 6:
      return null === a420 && ph(b), null;
    case 13:
      return ti(a420, b, c);
    case 4:
      return eh(b, b.stateNode.containerInfo), d2 = b.pendingProps, null === a420 ? b.child = Yg(b, null, d2, c) : fi(a420, b, d2, c), b.child;
    case 11:
      return d2 = b.type, e2 = b.pendingProps, e2 = b.elementType === d2 ? e2 : lg(d2, e2), gi(a420, b, d2, e2, c);
    case 7:
      return fi(a420, b, b.pendingProps, c), b.child;
    case 8:
      return fi(
        a420,
        b,
        b.pendingProps.children,
        c
      ), b.child;
    case 12:
      return fi(a420, b, b.pendingProps.children, c), b.child;
    case 10:
      a: {
        d2 = b.type._context;
        e2 = b.pendingProps;
        g2 = b.memoizedProps;
        f2 = e2.value;
        var h2 = b.type._context;
        I(mg, h2._currentValue);
        h2._currentValue = f2;
        if (null !== g2)
          if (h2 = g2.value, f2 = He(h2, f2) ? 0 : ("function" === typeof d2._calculateChangedBits ? d2._calculateChangedBits(h2, f2) : 1073741823) | 0, 0 === f2) {
            if (g2.children === e2.children && !N.current) {
              b = hi(a420, b, c);
              break a;
            }
          } else
            for (h2 = b.child, null !== h2 && (h2.return = b); null !== h2; ) {
              var k = h2.dependencies;
              if (null !== k) {
                g2 = h2.child;
                for (var l2 = k.firstContext; null !== l2; ) {
                  if (l2.context === d2 && 0 !== (l2.observedBits & f2)) {
                    1 === h2.tag && (l2 = zg(-1, c & -c), l2.tag = 2, Ag(h2, l2));
                    h2.lanes |= c;
                    l2 = h2.alternate;
                    null !== l2 && (l2.lanes |= c);
                    sg(h2.return, c);
                    k.lanes |= c;
                    break;
                  }
                  l2 = l2.next;
                }
              } else
                g2 = 10 === h2.tag ? h2.type === b.type ? null : h2.child : h2.child;
              if (null !== g2)
                g2.return = h2;
              else
                for (g2 = h2; null !== g2; ) {
                  if (g2 === b) {
                    g2 = null;
                    break;
                  }
                  h2 = g2.sibling;
                  if (null !== h2) {
                    h2.return = g2.return;
                    g2 = h2;
                    break;
                  }
                  g2 = g2.return;
                }
              h2 = g2;
            }
        fi(a420, b, e2.children, c);
        b = b.child;
      }
      return b;
    case 9:
      return e2 = b.type, f2 = b.pendingProps, d2 = f2.children, tg(b, c), e2 = vg(
        e2,
        f2.unstable_observedBits
      ), d2 = d2(e2), b.flags |= 1, fi(a420, b, d2, c), b.child;
    case 14:
      return e2 = b.type, f2 = lg(e2, b.pendingProps), f2 = lg(e2.type, f2), ii(a420, b, e2, f2, d2, c);
    case 15:
      return ki(a420, b, b.type, b.pendingProps, d2, c);
    case 17:
      return d2 = b.type, e2 = b.pendingProps, e2 = b.elementType === d2 ? e2 : lg(d2, e2), null !== a420 && (a420.alternate = null, b.alternate = null, b.flags |= 2), b.tag = 1, Ff(d2) ? (a420 = true, Jf(b)) : a420 = false, tg(b, c), Mg(b, d2, e2), Og(b, d2, e2, c), qi(null, b, d2, true, a420, c);
    case 19:
      return Ai(a420, b, c);
    case 23:
      return mi(a420, b, c);
    case 24:
      return mi(a420, b, c);
  }
  throw Error(y$1(156, b.tag));
};
function ik(a420, b, c, d2) {
  this.tag = a420;
  this.key = c;
  this.sibling = this.child = this.return = this.stateNode = this.type = this.elementType = null;
  this.index = 0;
  this.ref = null;
  this.pendingProps = b;
  this.dependencies = this.memoizedState = this.updateQueue = this.memoizedProps = null;
  this.mode = d2;
  this.flags = 0;
  this.lastEffect = this.firstEffect = this.nextEffect = null;
  this.childLanes = this.lanes = 0;
  this.alternate = null;
}
function nh(a420, b, c, d2) {
  return new ik(a420, b, c, d2);
}
function ji(a420) {
  a420 = a420.prototype;
  return !(!a420 || !a420.isReactComponent);
}
function hk(a420) {
  if ("function" === typeof a420)
    return ji(a420) ? 1 : 0;
  if (void 0 !== a420 && null !== a420) {
    a420 = a420.$$typeof;
    if (a420 === Aa)
      return 11;
    if (a420 === Da)
      return 14;
  }
  return 2;
}
function Tg(a420, b) {
  var c = a420.alternate;
  null === c ? (c = nh(a420.tag, b, a420.key, a420.mode), c.elementType = a420.elementType, c.type = a420.type, c.stateNode = a420.stateNode, c.alternate = a420, a420.alternate = c) : (c.pendingProps = b, c.type = a420.type, c.flags = 0, c.nextEffect = null, c.firstEffect = null, c.lastEffect = null);
  c.childLanes = a420.childLanes;
  c.lanes = a420.lanes;
  c.child = a420.child;
  c.memoizedProps = a420.memoizedProps;
  c.memoizedState = a420.memoizedState;
  c.updateQueue = a420.updateQueue;
  b = a420.dependencies;
  c.dependencies = null === b ? null : { lanes: b.lanes, firstContext: b.firstContext };
  c.sibling = a420.sibling;
  c.index = a420.index;
  c.ref = a420.ref;
  return c;
}
function Vg(a420, b, c, d2, e2, f2) {
  var g2 = 2;
  d2 = a420;
  if ("function" === typeof a420)
    ji(a420) && (g2 = 1);
  else if ("string" === typeof a420)
    g2 = 5;
  else
    a:
      switch (a420) {
        case ua:
          return Xg(c.children, e2, f2, b);
        case Ha:
          g2 = 8;
          e2 |= 16;
          break;
        case wa:
          g2 = 8;
          e2 |= 1;
          break;
        case xa:
          return a420 = nh(12, c, b, e2 | 8), a420.elementType = xa, a420.type = xa, a420.lanes = f2, a420;
        case Ba:
          return a420 = nh(13, c, b, e2), a420.type = Ba, a420.elementType = Ba, a420.lanes = f2, a420;
        case Ca:
          return a420 = nh(19, c, b, e2), a420.elementType = Ca, a420.lanes = f2, a420;
        case Ia:
          return vi(c, e2, f2, b);
        case Ja:
          return a420 = nh(24, c, b, e2), a420.elementType = Ja, a420.lanes = f2, a420;
        default:
          if ("object" === typeof a420 && null !== a420)
            switch (a420.$$typeof) {
              case ya:
                g2 = 10;
                break a;
              case za:
                g2 = 9;
                break a;
              case Aa:
                g2 = 11;
                break a;
              case Da:
                g2 = 14;
                break a;
              case Ea:
                g2 = 16;
                d2 = null;
                break a;
              case Fa:
                g2 = 22;
                break a;
            }
          throw Error(y$1(130, null == a420 ? a420 : typeof a420, ""));
      }
  b = nh(g2, c, b, e2);
  b.elementType = a420;
  b.type = d2;
  b.lanes = f2;
  return b;
}
function Xg(a420, b, c, d2) {
  a420 = nh(7, a420, d2, b);
  a420.lanes = c;
  return a420;
}
function vi(a420, b, c, d2) {
  a420 = nh(23, a420, d2, b);
  a420.elementType = Ia;
  a420.lanes = c;
  return a420;
}
function Ug(a420, b, c) {
  a420 = nh(6, a420, null, b);
  a420.lanes = c;
  return a420;
}
function Wg(a420, b, c) {
  b = nh(4, null !== a420.children ? a420.children : [], a420.key, b);
  b.lanes = c;
  b.stateNode = { containerInfo: a420.containerInfo, pendingChildren: null, implementation: a420.implementation };
  return b;
}
function jk(a420, b, c) {
  this.tag = b;
  this.containerInfo = a420;
  this.finishedWork = this.pingCache = this.current = this.pendingChildren = null;
  this.timeoutHandle = -1;
  this.pendingContext = this.context = null;
  this.hydrate = c;
  this.callbackNode = null;
  this.callbackPriority = 0;
  this.eventTimes = Zc(0);
  this.expirationTimes = Zc(-1);
  this.entangledLanes = this.finishedLanes = this.mutableReadLanes = this.expiredLanes = this.pingedLanes = this.suspendedLanes = this.pendingLanes = 0;
  this.entanglements = Zc(0);
  this.mutableSourceEagerHydrationData = null;
}
function kk(a420, b, c) {
  var d2 = 3 < arguments.length && void 0 !== arguments[3] ? arguments[3] : null;
  return { $$typeof: ta, key: null == d2 ? null : "" + d2, children: a420, containerInfo: b, implementation: c };
}
function lk(a420, b, c, d2) {
  var e2 = b.current, f2 = Hg(), g2 = Ig(e2);
  a:
    if (c) {
      c = c._reactInternals;
      b: {
        if (Zb(c) !== c || 1 !== c.tag)
          throw Error(y$1(170));
        var h2 = c;
        do {
          switch (h2.tag) {
            case 3:
              h2 = h2.stateNode.context;
              break b;
            case 1:
              if (Ff(h2.type)) {
                h2 = h2.stateNode.__reactInternalMemoizedMergedChildContext;
                break b;
              }
          }
          h2 = h2.return;
        } while (null !== h2);
        throw Error(y$1(171));
      }
      if (1 === c.tag) {
        var k = c.type;
        if (Ff(k)) {
          c = If(c, k, h2);
          break a;
        }
      }
      c = h2;
    } else
      c = Cf;
  null === b.context ? b.context = c : b.pendingContext = c;
  b = zg(f2, g2);
  b.payload = { element: a420 };
  d2 = void 0 === d2 ? null : d2;
  null !== d2 && (b.callback = d2);
  Ag(e2, b);
  Jg(e2, g2, f2);
  return g2;
}
function mk(a420) {
  a420 = a420.current;
  if (!a420.child)
    return null;
  switch (a420.child.tag) {
    case 5:
      return a420.child.stateNode;
    default:
      return a420.child.stateNode;
  }
}
function nk(a420, b) {
  a420 = a420.memoizedState;
  if (null !== a420 && null !== a420.dehydrated) {
    var c = a420.retryLane;
    a420.retryLane = 0 !== c && c < b ? c : b;
  }
}
function ok$1(a420, b) {
  nk(a420, b);
  (a420 = a420.alternate) && nk(a420, b);
}
function pk() {
  return null;
}
function qk(a420, b, c) {
  var d2 = null != c && null != c.hydrationOptions && c.hydrationOptions.mutableSources || null;
  c = new jk(a420, b, null != c && true === c.hydrate);
  b = nh(3, null, null, 2 === b ? 7 : 1 === b ? 3 : 0);
  c.current = b;
  b.stateNode = c;
  xg(b);
  a420[ff] = c.current;
  cf(8 === a420.nodeType ? a420.parentNode : a420);
  if (d2)
    for (a420 = 0; a420 < d2.length; a420++) {
      b = d2[a420];
      var e2 = b._getVersion;
      e2 = e2(b._source);
      null == c.mutableSourceEagerHydrationData ? c.mutableSourceEagerHydrationData = [b, e2] : c.mutableSourceEagerHydrationData.push(b, e2);
    }
  this._internalRoot = c;
}
qk.prototype.render = function(a420) {
  lk(a420, this._internalRoot, null, null);
};
qk.prototype.unmount = function() {
  var a420 = this._internalRoot, b = a420.containerInfo;
  lk(null, a420, null, function() {
    b[ff] = null;
  });
};
function rk(a420) {
  return !(!a420 || 1 !== a420.nodeType && 9 !== a420.nodeType && 11 !== a420.nodeType && (8 !== a420.nodeType || " react-mount-point-unstable " !== a420.nodeValue));
}
function sk(a420, b) {
  b || (b = a420 ? 9 === a420.nodeType ? a420.documentElement : a420.firstChild : null, b = !(!b || 1 !== b.nodeType || !b.hasAttribute("data-reactroot")));
  if (!b)
    for (var c; c = a420.lastChild; )
      a420.removeChild(c);
  return new qk(a420, 0, b ? { hydrate: true } : void 0);
}
function tk(a420, b, c, d2, e2) {
  var f2 = c._reactRootContainer;
  if (f2) {
    var g2 = f2._internalRoot;
    if ("function" === typeof e2) {
      var h2 = e2;
      e2 = function() {
        var a421 = mk(g2);
        h2.call(a421);
      };
    }
    lk(b, g2, a420, e2);
  } else {
    f2 = c._reactRootContainer = sk(c, d2);
    g2 = f2._internalRoot;
    if ("function" === typeof e2) {
      var k = e2;
      e2 = function() {
        var a421 = mk(g2);
        k.call(a421);
      };
    }
    Xj(function() {
      lk(b, g2, a420, e2);
    });
  }
  return mk(g2);
}
ec$1 = function(a420) {
  if (13 === a420.tag) {
    var b = Hg();
    Jg(a420, 4, b);
    ok$1(a420, 4);
  }
};
fc = function(a420) {
  if (13 === a420.tag) {
    var b = Hg();
    Jg(a420, 67108864, b);
    ok$1(a420, 67108864);
  }
};
gc = function(a420) {
  if (13 === a420.tag) {
    var b = Hg(), c = Ig(a420);
    Jg(a420, c, b);
    ok$1(a420, c);
  }
};
hc = function(a420, b) {
  return b();
};
yb = function(a420, b, c) {
  switch (b) {
    case "input":
      ab(a420, c);
      b = c.name;
      if ("radio" === c.type && null != b) {
        for (c = a420; c.parentNode; )
          c = c.parentNode;
        c = c.querySelectorAll("input[name=" + JSON.stringify("" + b) + '][type="radio"]');
        for (b = 0; b < c.length; b++) {
          var d2 = c[b];
          if (d2 !== a420 && d2.form === a420.form) {
            var e2 = Db(d2);
            if (!e2)
              throw Error(y$1(90));
            Wa(d2);
            ab(d2, e2);
          }
        }
      }
      break;
    case "textarea":
      ib(a420, c);
      break;
    case "select":
      b = c.value, null != b && fb(a420, !!c.multiple, b, false);
  }
};
Gb = Wj;
Hb = function(a420, b, c, d2, e2) {
  var f2 = X;
  X |= 4;
  try {
    return gg(98, a420.bind(null, b, c, d2, e2));
  } finally {
    X = f2, 0 === X && (wj(), ig());
  }
};
Ib = function() {
  0 === (X & 49) && (Vj(), Oj());
};
Jb = function(a420, b) {
  var c = X;
  X |= 2;
  try {
    return a420(b);
  } finally {
    X = c, 0 === X && (wj(), ig());
  }
};
function uk(a420, b) {
  var c = 2 < arguments.length && void 0 !== arguments[2] ? arguments[2] : null;
  if (!rk(b))
    throw Error(y$1(200));
  return kk(a420, b, null, c);
}
var vk = { Events: [Cb, ue, Db, Eb, Fb, Oj, { current: false }] }, wk = { findFiberByHostInstance: wc, bundleType: 0, version: "17.0.2", rendererPackageName: "react-dom" };
var xk = { bundleType: wk.bundleType, version: wk.version, rendererPackageName: wk.rendererPackageName, rendererConfig: wk.rendererConfig, overrideHookState: null, overrideHookStateDeletePath: null, overrideHookStateRenamePath: null, overrideProps: null, overridePropsDeletePath: null, overridePropsRenamePath: null, setSuspenseHandler: null, scheduleUpdate: null, currentDispatcherRef: ra.ReactCurrentDispatcher, findHostInstanceByFiber: function(a420) {
  a420 = cc(a420);
  return null === a420 ? null : a420.stateNode;
}, findFiberByHostInstance: wk.findFiberByHostInstance || pk, findHostInstancesForRefresh: null, scheduleRefresh: null, scheduleRoot: null, setRefreshHandler: null, getCurrentFiber: null };
if ("undefined" !== typeof __REACT_DEVTOOLS_GLOBAL_HOOK__) {
  var yk = __REACT_DEVTOOLS_GLOBAL_HOOK__;
  if (!yk.isDisabled && yk.supportsFiber)
    try {
      Lf = yk.inject(xk), Mf = yk;
    } catch (a420) {
    }
}
reactDom_production_min.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED = vk;
reactDom_production_min.createPortal = uk;
reactDom_production_min.findDOMNode = function(a420) {
  if (null == a420)
    return null;
  if (1 === a420.nodeType)
    return a420;
  var b = a420._reactInternals;
  if (void 0 === b) {
    if ("function" === typeof a420.render)
      throw Error(y$1(188));
    throw Error(y$1(268, Object.keys(a420)));
  }
  a420 = cc(b);
  a420 = null === a420 ? null : a420.stateNode;
  return a420;
};
reactDom_production_min.flushSync = function(a420, b) {
  var c = X;
  if (0 !== (c & 48))
    return a420(b);
  X |= 1;
  try {
    if (a420)
      return gg(99, a420.bind(null, b));
  } finally {
    X = c, ig();
  }
};
reactDom_production_min.hydrate = function(a420, b, c) {
  if (!rk(b))
    throw Error(y$1(200));
  return tk(null, a420, b, true, c);
};
reactDom_production_min.render = function(a420, b, c) {
  if (!rk(b))
    throw Error(y$1(200));
  return tk(null, a420, b, false, c);
};
reactDom_production_min.unmountComponentAtNode = function(a420) {
  if (!rk(a420))
    throw Error(y$1(40));
  return a420._reactRootContainer ? (Xj(function() {
    tk(null, null, a420, false, function() {
      a420._reactRootContainer = null;
      a420[ff] = null;
    });
  }), true) : false;
};
reactDom_production_min.unstable_batchedUpdates = Wj;
reactDom_production_min.unstable_createPortal = function(a420, b) {
  return uk(a420, b, 2 < arguments.length && void 0 !== arguments[2] ? arguments[2] : null);
};
reactDom_production_min.unstable_renderSubtreeIntoContainer = function(a420, b, c, d2) {
  if (!rk(c))
    throw Error(y$1(200));
  if (null == a420 || void 0 === a420._reactInternals)
    throw Error(y$1(38));
  return tk(a420, b, c, false, d2);
};
reactDom_production_min.version = "17.0.2";
function checkDCE() {
  if (typeof __REACT_DEVTOOLS_GLOBAL_HOOK__ === "undefined" || typeof __REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE !== "function") {
    return;
  }
  try {
    __REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE(checkDCE);
  } catch (err) {
    console.error(err);
  }
}
{
  checkDCE();
  reactDom.exports = reactDom_production_min;
}
var reactDomExports = reactDom.exports;
const ReactDOM = /* @__PURE__ */ getDefaultExportFromCjs$3(reactDomExports);
var jsxRuntime = { exports: {} };
var reactJsxRuntime_production_min = {};
/** @license React v17.0.2
 * react-jsx-runtime.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */
var f$2 = reactExports, g$2 = 60103;
reactJsxRuntime_production_min.Fragment = 60107;
if ("function" === typeof Symbol && Symbol.for) {
  var h$1 = Symbol.for;
  g$2 = h$1("react.element");
  reactJsxRuntime_production_min.Fragment = h$1("react.fragment");
}
var m$2 = f$2.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED.ReactCurrentOwner, n$1 = Object.prototype.hasOwnProperty, p = { key: true, ref: true, __self: true, __source: true };
function q(c, a420, k) {
  var b, d2 = {}, e2 = null, l2 = null;
  void 0 !== k && (e2 = "" + k);
  void 0 !== a420.key && (e2 = "" + a420.key);
  void 0 !== a420.ref && (l2 = a420.ref);
  for (b in a420)
    n$1.call(a420, b) && !p.hasOwnProperty(b) && (d2[b] = a420[b]);
  if (c && c.defaultProps)
    for (b in a420 = c.defaultProps, a420)
      void 0 === d2[b] && (d2[b] = a420[b]);
  return { $$typeof: g$2, type: c, key: e2, ref: l2, props: d2, _owner: m$2.current };
}
reactJsxRuntime_production_min.jsx = q;
reactJsxRuntime_production_min.jsxs = q;
{
  jsxRuntime.exports = reactJsxRuntime_production_min;
}
var jsxRuntimeExports = jsxRuntime.exports;
const jsx = jsxRuntimeExports.jsx;
const jsxs = jsxRuntimeExports.jsxs;
const Fragment = jsxRuntimeExports.Fragment;
var Xn = Object.defineProperty;
var Qn = (a420, u2, c) => u2 in a420 ? Xn(a420, u2, { enumerable: true, configurable: true, writable: true, value: c }) : a420[u2] = c;
var qt = (a420, u2, c) => (Qn(a420, typeof u2 != "symbol" ? u2 + "" : u2, c), c);
let currentSubId = 0;
const subscribers = /* @__PURE__ */ new Map(), subscribersInternal = /* @__PURE__ */ new Map();
function createSubscribe(a420 = {}) {
  return function(u2) {
    if (typeof u2 != "function")
      return;
    const c = a420.internal ? subscribersInternal : subscribers, l2 = ++currentSubId;
    return c.set(l2, u2), () => {
      c.delete(l2);
    };
  };
}
function createOn(a420 = {}) {
  return function(u2, c) {
    return (a420.internal ? subscribeInternal : subscribe)((v2, p2) => {
      if (u2 === v2)
        return c(p2);
    });
  };
}
function createTrigger(a420 = {}) {
  const u2 = a420.internal ? subscribersInternal : subscribers;
  return async function(c, ...l2) {
    let v2 = { type: c, payload: l2[0] };
    const p2 = a420.internal ? "Internal" : "External";
    log$1.info(`${p2} Event:`, v2), await Promise.all(Array.from(u2.values()).map((_) => _(v2.type, v2.payload)));
  };
}
const trigger$1 = createTrigger(), subscribe = createSubscribe(), on = createOn(), triggerInternal$1 = createTrigger({ internal: true }), subscribeInternal = createSubscribe({ internal: true }), onInternal = createOn({ internal: true });
var commonjsGlobal$1 = typeof globalThis < "u" ? globalThis : typeof window < "u" ? window : typeof global < "u" ? global : typeof self < "u" ? self : {};
function getDefaultExportFromCjs$2(a420) {
  return a420 && a420.__esModule && Object.prototype.hasOwnProperty.call(a420, "default") ? a420.default : a420;
}
function getAugmentedNamespace(a420) {
  if (a420.__esModule)
    return a420;
  var u2 = a420.default;
  if (typeof u2 == "function") {
    var c = function l2() {
      return this instanceof l2 ? Reflect.construct(u2, arguments, this.constructor) : u2.apply(this, arguments);
    };
    c.prototype = u2.prototype;
  } else
    c = {};
  return Object.defineProperty(c, "__esModule", { value: true }), Object.keys(a420).forEach(function(l2) {
    var v2 = Object.getOwnPropertyDescriptor(a420, l2);
    Object.defineProperty(c, l2, v2.get ? v2 : { enumerable: true, get: function() {
      return a420[l2];
    } });
  }), c;
}
var loglevel$1 = { exports: {} };
(function(a420) {
  (function(u2, c) {
    a420.exports ? a420.exports = c() : u2.log = c();
  })(commonjsGlobal$1, function() {
    var u2 = function() {
    }, c = "undefined", l2 = typeof window !== c && typeof window.navigator !== c && /Trident\/|MSIE /.test(window.navigator.userAgent), v2 = ["trace", "debug", "info", "warn", "error"], p2 = {}, _ = null;
    function I2(ie2, Q2) {
      var ne2 = ie2[Q2];
      if (typeof ne2.bind == "function")
        return ne2.bind(ie2);
      try {
        return Function.prototype.bind.call(ne2, ie2);
      } catch {
        return function() {
          return Function.prototype.apply.apply(ne2, [ie2, arguments]);
        };
      }
    }
    function P2() {
      console.log && (console.log.apply ? console.log.apply(console, arguments) : Function.prototype.apply.apply(console.log, [console, arguments])), console.trace && console.trace();
    }
    function $(ie2) {
      return ie2 === "debug" && (ie2 = "log"), typeof console === c ? false : ie2 === "trace" && l2 ? P2 : console[ie2] !== void 0 ? I2(console, ie2) : console.log !== void 0 ? I2(console, "log") : u2;
    }
    function F2() {
      for (var ie2 = this.getLevel(), Q2 = 0; Q2 < v2.length; Q2++) {
        var ne2 = v2[Q2];
        this[ne2] = Q2 < ie2 ? u2 : this.methodFactory(ne2, ie2, this.name);
      }
      if (this.log = this.debug, typeof console === c && ie2 < this.levels.SILENT)
        return "No console available for logging";
    }
    function H2(ie2) {
      return function() {
        typeof console !== c && (F2.call(this), this[ie2].apply(this, arguments));
      };
    }
    function j(ie2, Q2, ne2) {
      return $(ie2) || H2.apply(this, arguments);
    }
    function ee2(ie2, Q2) {
      var ne2 = this, Z2, de2, pe2, le2 = "loglevel";
      typeof ie2 == "string" ? le2 += ":" + ie2 : typeof ie2 == "symbol" && (le2 = void 0);
      function be2(C2) {
        var b = (v2[C2] || "silent").toUpperCase();
        if (!(typeof window === c || !le2)) {
          try {
            window.localStorage[le2] = b;
            return;
          } catch {
          }
          try {
            window.document.cookie = encodeURIComponent(le2) + "=" + b + ";";
          } catch {
          }
        }
      }
      function ke2() {
        var C2;
        if (!(typeof window === c || !le2)) {
          try {
            C2 = window.localStorage[le2];
          } catch {
          }
          if (typeof C2 === c)
            try {
              var b = window.document.cookie, E2 = encodeURIComponent(le2), k = b.indexOf(E2 + "=");
              k !== -1 && (C2 = /^([^;]+)/.exec(b.slice(k + E2.length + 1))[1]);
            } catch {
            }
          return ne2.levels[C2] === void 0 && (C2 = void 0), C2;
        }
      }
      function Te2() {
        if (!(typeof window === c || !le2)) {
          try {
            window.localStorage.removeItem(le2);
          } catch {
          }
          try {
            window.document.cookie = encodeURIComponent(le2) + "=; expires=Thu, 01 Jan 1970 00:00:00 UTC";
          } catch {
          }
        }
      }
      function q2(C2) {
        var b = C2;
        if (typeof b == "string" && ne2.levels[b.toUpperCase()] !== void 0 && (b = ne2.levels[b.toUpperCase()]), typeof b == "number" && b >= 0 && b <= ne2.levels.SILENT)
          return b;
        throw new TypeError("log.setLevel() called with invalid level: " + C2);
      }
      ne2.name = ie2, ne2.levels = { TRACE: 0, DEBUG: 1, INFO: 2, WARN: 3, ERROR: 4, SILENT: 5 }, ne2.methodFactory = Q2 || j, ne2.getLevel = function() {
        return pe2 ?? de2 ?? Z2;
      }, ne2.setLevel = function(C2, b) {
        return pe2 = q2(C2), b !== false && be2(pe2), F2.call(ne2);
      }, ne2.setDefaultLevel = function(C2) {
        de2 = q2(C2), ke2() || ne2.setLevel(C2, false);
      }, ne2.resetLevel = function() {
        pe2 = null, Te2(), F2.call(ne2);
      }, ne2.enableAll = function(C2) {
        ne2.setLevel(ne2.levels.TRACE, C2);
      }, ne2.disableAll = function(C2) {
        ne2.setLevel(ne2.levels.SILENT, C2);
      }, ne2.rebuild = function() {
        if (_ !== ne2 && (Z2 = q2(_.getLevel())), F2.call(ne2), _ === ne2)
          for (var C2 in p2)
            p2[C2].rebuild();
      }, Z2 = q2(_ ? _.getLevel() : "WARN");
      var z2 = ke2();
      z2 != null && (pe2 = q2(z2)), F2.call(ne2);
    }
    _ = new ee2(), _.getLogger = function(Q2) {
      if (typeof Q2 != "symbol" && typeof Q2 != "string" || Q2 === "")
        throw new TypeError("You must supply a name when creating a logger.");
      var ne2 = p2[Q2];
      return ne2 || (ne2 = p2[Q2] = new ee2(Q2, _.methodFactory)), ne2;
    };
    var X2 = typeof window !== c ? window.log : void 0;
    return _.noConflict = function() {
      return typeof window !== c && window.log === _ && (window.log = X2), _;
    }, _.getLoggers = function() {
      return p2;
    }, _.default = _, _;
  });
})(loglevel$1);
var loglevelExports$1 = loglevel$1.exports;
const log$1 = /* @__PURE__ */ getDefaultExportFromCjs$2(loglevelExports$1), connectionId$1 = (Math.random() * 1e20).toString(36), version$6 = "3.0.4", CoreContext = {
  config: null,
  // TODO: Rename to client
  clients: null,
  Request: {},
  Command: {},
  on,
  subscribe,
  /** @private @internal */
  onInternal,
  /** @private @internal */
  subscribeInternal,
  /** @private @internal */
  trigger: trigger$1,
  /** @private @internal */
  triggerInternal: triggerInternal$1,
  /** @private @internal */
  state: {},
  compositor: {},
  connectionId: connectionId$1,
  version: version$6,
  /** @private @internal */
  rendererVersion: version$6,
  log: log$1,
  logLevel: null
}, setAppState = (a420) => {
  Object.keys(a420).forEach((u2) => {
    CoreContext.state[u2] = a420[u2];
  });
}, global$1 = globalThis || void 0 || self;
var freeGlobal = typeof global$1 == "object" && global$1 && global$1.Object === Object && global$1, freeSelf = typeof self == "object" && self && self.Object === Object && self, root = freeGlobal || freeSelf || Function("return this")(), Symbol$1 = root.Symbol, objectProto$m = Object.prototype, hasOwnProperty$g = objectProto$m.hasOwnProperty, nativeObjectToString$1 = objectProto$m.toString, symToStringTag$1 = Symbol$1 ? Symbol$1.toStringTag : void 0;
function getRawTag(a420) {
  var u2 = hasOwnProperty$g.call(a420, symToStringTag$1), c = a420[symToStringTag$1];
  try {
    a420[symToStringTag$1] = void 0;
    var l2 = true;
  } catch {
  }
  var v2 = nativeObjectToString$1.call(a420);
  return l2 && (u2 ? a420[symToStringTag$1] = c : delete a420[symToStringTag$1]), v2;
}
var objectProto$l = Object.prototype, nativeObjectToString = objectProto$l.toString;
function objectToString$7(a420) {
  return nativeObjectToString.call(a420);
}
var nullTag = "[object Null]", undefinedTag = "[object Undefined]", symToStringTag = Symbol$1 ? Symbol$1.toStringTag : void 0;
function baseGetTag(a420) {
  return a420 == null ? a420 === void 0 ? undefinedTag : nullTag : symToStringTag && symToStringTag in Object(a420) ? getRawTag(a420) : objectToString$7(a420);
}
function isObjectLike$7(a420) {
  return a420 != null && typeof a420 == "object";
}
var symbolTag$6 = "[object Symbol]";
function isSymbol$3(a420) {
  return typeof a420 == "symbol" || isObjectLike$7(a420) && baseGetTag(a420) == symbolTag$6;
}
function arrayMap$1(a420, u2) {
  for (var c = -1, l2 = a420 == null ? 0 : a420.length, v2 = Array(l2); ++c < l2; )
    v2[c] = u2(a420[c], c, a420);
  return v2;
}
var isArray$5 = Array.isArray, INFINITY$4 = 1 / 0, symbolProto$2 = Symbol$1 ? Symbol$1.prototype : void 0, symbolToString = symbolProto$2 ? symbolProto$2.toString : void 0;
function baseToString(a420) {
  if (typeof a420 == "string")
    return a420;
  if (isArray$5(a420))
    return arrayMap$1(a420, baseToString) + "";
  if (isSymbol$3(a420))
    return symbolToString ? symbolToString.call(a420) : "";
  var u2 = a420 + "";
  return u2 == "0" && 1 / a420 == -INFINITY$4 ? "-0" : u2;
}
var reWhitespace = /\s/;
function trimmedEndIndex(a420) {
  for (var u2 = a420.length; u2-- && reWhitespace.test(a420.charAt(u2)); )
    ;
  return u2;
}
var reTrimStart = /^\s+/;
function baseTrim(a420) {
  return a420 && a420.slice(0, trimmedEndIndex(a420) + 1).replace(reTrimStart, "");
}
function isObject$9(a420) {
  var u2 = typeof a420;
  return a420 != null && (u2 == "object" || u2 == "function");
}
var NAN$3 = NaN, reIsBadHex$3 = /^[-+]0x[0-9a-f]+$/i, reIsBinary$3 = /^0b[01]+$/i, reIsOctal$3 = /^0o[0-7]+$/i, freeParseInt$3 = parseInt;
function toNumber$3(a420) {
  if (typeof a420 == "number")
    return a420;
  if (isSymbol$3(a420))
    return NAN$3;
  if (isObject$9(a420)) {
    var u2 = typeof a420.valueOf == "function" ? a420.valueOf() : a420;
    a420 = isObject$9(u2) ? u2 + "" : u2;
  }
  if (typeof a420 != "string")
    return a420 === 0 ? a420 : +a420;
  a420 = baseTrim(a420);
  var c = reIsBinary$3.test(a420);
  return c || reIsOctal$3.test(a420) ? freeParseInt$3(a420.slice(2), c ? 2 : 8) : reIsBadHex$3.test(a420) ? NAN$3 : +a420;
}
function identity$1(a420) {
  return a420;
}
var asyncTag = "[object AsyncFunction]", funcTag$3 = "[object Function]", genTag$2 = "[object GeneratorFunction]", proxyTag = "[object Proxy]";
function isFunction$4(a420) {
  if (!isObject$9(a420))
    return false;
  var u2 = baseGetTag(a420);
  return u2 == funcTag$3 || u2 == genTag$2 || u2 == asyncTag || u2 == proxyTag;
}
var coreJsData = root["__core-js_shared__"], maskSrcKey = function() {
  var a420 = /[^.]+$/.exec(coreJsData && coreJsData.keys && coreJsData.keys.IE_PROTO || "");
  return a420 ? "Symbol(src)_1." + a420 : "";
}();
function isMasked(a420) {
  return !!maskSrcKey && maskSrcKey in a420;
}
var funcProto$3 = Function.prototype, funcToString$3 = funcProto$3.toString;
function toSource(a420) {
  if (a420 != null) {
    try {
      return funcToString$3.call(a420);
    } catch {
    }
    try {
      return a420 + "";
    } catch {
    }
  }
  return "";
}
var reRegExpChar = /[\\^$.*+?()[\]{}|]/g, reIsHostCtor = /^\[object .+?Constructor\]$/, funcProto$2 = Function.prototype, objectProto$k = Object.prototype, funcToString$2 = funcProto$2.toString, hasOwnProperty$f = objectProto$k.hasOwnProperty, reIsNative = RegExp("^" + funcToString$2.call(hasOwnProperty$f).replace(reRegExpChar, "\\$&").replace(/hasOwnProperty|(function).*?(?=\\\()| for .+?(?=\\\])/g, "$1.*?") + "$");
function baseIsNative(a420) {
  if (!isObject$9(a420) || isMasked(a420))
    return false;
  var u2 = isFunction$4(a420) ? reIsNative : reIsHostCtor;
  return u2.test(toSource(a420));
}
function getValue(a420, u2) {
  return a420 == null ? void 0 : a420[u2];
}
function getNative(a420, u2) {
  var c = getValue(a420, u2);
  return baseIsNative(c) ? c : void 0;
}
var WeakMap$2 = getNative(root, "WeakMap"), objectCreate$1 = Object.create, baseCreate = /* @__PURE__ */ function() {
  function a420() {
  }
  return function(u2) {
    if (!isObject$9(u2))
      return {};
    if (objectCreate$1)
      return objectCreate$1(u2);
    a420.prototype = u2;
    var c = new a420();
    return a420.prototype = void 0, c;
  };
}();
function apply(a420, u2, c) {
  switch (c.length) {
    case 0:
      return a420.call(u2);
    case 1:
      return a420.call(u2, c[0]);
    case 2:
      return a420.call(u2, c[0], c[1]);
    case 3:
      return a420.call(u2, c[0], c[1], c[2]);
  }
  return a420.apply(u2, c);
}
function copyArray(a420, u2) {
  var c = -1, l2 = a420.length;
  for (u2 || (u2 = Array(l2)); ++c < l2; )
    u2[c] = a420[c];
  return u2;
}
var HOT_COUNT = 800, HOT_SPAN = 16, nativeNow = Date.now;
function shortOut(a420) {
  var u2 = 0, c = 0;
  return function() {
    var l2 = nativeNow(), v2 = HOT_SPAN - (l2 - c);
    if (c = l2, v2 > 0) {
      if (++u2 >= HOT_COUNT)
        return arguments[0];
    } else
      u2 = 0;
    return a420.apply(void 0, arguments);
  };
}
function constant(a420) {
  return function() {
    return a420;
  };
}
var defineProperty$1 = function() {
  try {
    var a420 = getNative(Object, "defineProperty");
    return a420({}, "", {}), a420;
  } catch {
  }
}(), baseSetToString = defineProperty$1 ? function(a420, u2) {
  return defineProperty$1(a420, "toString", { configurable: true, enumerable: false, value: constant(u2), writable: true });
} : identity$1;
const baseSetToString$1 = baseSetToString;
var setToString = shortOut(baseSetToString$1);
function arrayEach(a420, u2) {
  for (var c = -1, l2 = a420 == null ? 0 : a420.length; ++c < l2 && u2(a420[c], c, a420) !== false; )
    ;
  return a420;
}
function baseFindIndex$1(a420, u2, c, l2) {
  for (var v2 = a420.length, p2 = c + (l2 ? 1 : -1); l2 ? p2-- : ++p2 < v2; )
    if (u2(a420[p2], p2, a420))
      return p2;
  return -1;
}
function baseIsNaN$1(a420) {
  return a420 !== a420;
}
function strictIndexOf(a420, u2, c) {
  for (var l2 = c - 1, v2 = a420.length; ++l2 < v2; )
    if (a420[l2] === u2)
      return l2;
  return -1;
}
function baseIndexOf$1(a420, u2, c) {
  return u2 === u2 ? strictIndexOf(a420, u2, c) : baseFindIndex$1(a420, baseIsNaN$1, c);
}
var MAX_SAFE_INTEGER$2 = 9007199254740991, reIsUint$1 = /^(?:0|[1-9]\d*)$/;
function isIndex$1(a420, u2) {
  var c = typeof a420;
  return u2 = u2 ?? MAX_SAFE_INTEGER$2, !!u2 && (c == "number" || c != "symbol" && reIsUint$1.test(a420)) && a420 > -1 && a420 % 1 == 0 && a420 < u2;
}
function baseAssignValue(a420, u2, c) {
  u2 == "__proto__" && defineProperty$1 ? defineProperty$1(a420, u2, { configurable: true, enumerable: true, value: c, writable: true }) : a420[u2] = c;
}
function eq(a420, u2) {
  return a420 === u2 || a420 !== a420 && u2 !== u2;
}
var objectProto$j = Object.prototype, hasOwnProperty$e = objectProto$j.hasOwnProperty;
function assignValue(a420, u2, c) {
  var l2 = a420[u2];
  (!(hasOwnProperty$e.call(a420, u2) && eq(l2, c)) || c === void 0 && !(u2 in a420)) && baseAssignValue(a420, u2, c);
}
function copyObject(a420, u2, c, l2) {
  var v2 = !c;
  c || (c = {});
  for (var p2 = -1, _ = u2.length; ++p2 < _; ) {
    var I2 = u2[p2], P2 = l2 ? l2(c[I2], a420[I2], I2, c, a420) : void 0;
    P2 === void 0 && (P2 = a420[I2]), v2 ? baseAssignValue(c, I2, P2) : assignValue(c, I2, P2);
  }
  return c;
}
var nativeMax$2 = Math.max;
function overRest(a420, u2, c) {
  return u2 = nativeMax$2(u2 === void 0 ? a420.length - 1 : u2, 0), function() {
    for (var l2 = arguments, v2 = -1, p2 = nativeMax$2(l2.length - u2, 0), _ = Array(p2); ++v2 < p2; )
      _[v2] = l2[u2 + v2];
    v2 = -1;
    for (var I2 = Array(u2 + 1); ++v2 < u2; )
      I2[v2] = l2[v2];
    return I2[u2] = c(_), apply(a420, this, I2);
  };
}
function baseRest(a420, u2) {
  return setToString(overRest(a420, u2, identity$1), a420 + "");
}
var MAX_SAFE_INTEGER$1 = 9007199254740991;
function isLength$1(a420) {
  return typeof a420 == "number" && a420 > -1 && a420 % 1 == 0 && a420 <= MAX_SAFE_INTEGER$1;
}
function isArrayLike$2(a420) {
  return a420 != null && isLength$1(a420.length) && !isFunction$4(a420);
}
function isIterateeCall(a420, u2, c) {
  if (!isObject$9(c))
    return false;
  var l2 = typeof u2;
  return (l2 == "number" ? isArrayLike$2(c) && isIndex$1(u2, c.length) : l2 == "string" && u2 in c) ? eq(c[u2], a420) : false;
}
var objectProto$i = Object.prototype;
function isPrototype$1(a420) {
  var u2 = a420 && a420.constructor, c = typeof u2 == "function" && u2.prototype || objectProto$i;
  return a420 === c;
}
function baseTimes$1(a420, u2) {
  for (var c = -1, l2 = Array(a420); ++c < a420; )
    l2[c] = u2(c);
  return l2;
}
var argsTag$4 = "[object Arguments]";
function baseIsArguments(a420) {
  return isObjectLike$7(a420) && baseGetTag(a420) == argsTag$4;
}
var objectProto$h = Object.prototype, hasOwnProperty$d = objectProto$h.hasOwnProperty, propertyIsEnumerable$2 = objectProto$h.propertyIsEnumerable, isArguments$2 = baseIsArguments(/* @__PURE__ */ function() {
  return arguments;
}()) ? baseIsArguments : function(a420) {
  return isObjectLike$7(a420) && hasOwnProperty$d.call(a420, "callee") && !propertyIsEnumerable$2.call(a420, "callee");
};
function stubFalse() {
  return false;
}
var freeExports$2 = typeof exports == "object" && exports && !exports.nodeType && exports, freeModule$2 = freeExports$2 && typeof module == "object" && module && !module.nodeType && module, moduleExports$2 = freeModule$2 && freeModule$2.exports === freeExports$2, Buffer$O = moduleExports$2 ? root.Buffer : void 0, nativeIsBuffer = Buffer$O ? Buffer$O.isBuffer : void 0, isBuffer$1 = nativeIsBuffer || stubFalse, argsTag$3 = "[object Arguments]", arrayTag$2 = "[object Array]", boolTag$4 = "[object Boolean]", dateTag$3 = "[object Date]", errorTag$2 = "[object Error]", funcTag$2 = "[object Function]", mapTag$5 = "[object Map]", numberTag$4 = "[object Number]", objectTag$5 = "[object Object]", regexpTag$3 = "[object RegExp]", setTag$5 = "[object Set]", stringTag$5 = "[object String]", weakMapTag$2 = "[object WeakMap]", arrayBufferTag$3 = "[object ArrayBuffer]", dataViewTag$4 = "[object DataView]", float32Tag$2 = "[object Float32Array]", float64Tag$2 = "[object Float64Array]", int8Tag$2 = "[object Int8Array]", int16Tag$2 = "[object Int16Array]", int32Tag$2 = "[object Int32Array]", uint8Tag$2 = "[object Uint8Array]", uint8ClampedTag$2 = "[object Uint8ClampedArray]", uint16Tag$2 = "[object Uint16Array]", uint32Tag$2 = "[object Uint32Array]", typedArrayTags = {};
typedArrayTags[float32Tag$2] = typedArrayTags[float64Tag$2] = typedArrayTags[int8Tag$2] = typedArrayTags[int16Tag$2] = typedArrayTags[int32Tag$2] = typedArrayTags[uint8Tag$2] = typedArrayTags[uint8ClampedTag$2] = typedArrayTags[uint16Tag$2] = typedArrayTags[uint32Tag$2] = true;
typedArrayTags[argsTag$3] = typedArrayTags[arrayTag$2] = typedArrayTags[arrayBufferTag$3] = typedArrayTags[boolTag$4] = typedArrayTags[dataViewTag$4] = typedArrayTags[dateTag$3] = typedArrayTags[errorTag$2] = typedArrayTags[funcTag$2] = typedArrayTags[mapTag$5] = typedArrayTags[numberTag$4] = typedArrayTags[objectTag$5] = typedArrayTags[regexpTag$3] = typedArrayTags[setTag$5] = typedArrayTags[stringTag$5] = typedArrayTags[weakMapTag$2] = false;
function baseIsTypedArray(a420) {
  return isObjectLike$7(a420) && isLength$1(a420.length) && !!typedArrayTags[baseGetTag(a420)];
}
function baseUnary(a420) {
  return function(u2) {
    return a420(u2);
  };
}
var freeExports$1 = typeof exports == "object" && exports && !exports.nodeType && exports, freeModule$1 = freeExports$1 && typeof module == "object" && module && !module.nodeType && module, moduleExports$1 = freeModule$1 && freeModule$1.exports === freeExports$1, freeProcess = moduleExports$1 && freeGlobal.process, nodeUtil = function() {
  try {
    var a420 = freeModule$1 && freeModule$1.require && freeModule$1.require("util").types;
    return a420 || freeProcess && freeProcess.binding && freeProcess.binding("util");
  } catch {
  }
}(), nodeIsTypedArray = nodeUtil && nodeUtil.isTypedArray, isTypedArray$1 = nodeIsTypedArray ? baseUnary(nodeIsTypedArray) : baseIsTypedArray, objectProto$g = Object.prototype, hasOwnProperty$c = objectProto$g.hasOwnProperty;
function arrayLikeKeys$1(a420, u2) {
  var c = isArray$5(a420), l2 = !c && isArguments$2(a420), v2 = !c && !l2 && isBuffer$1(a420), p2 = !c && !l2 && !v2 && isTypedArray$1(a420), _ = c || l2 || v2 || p2, I2 = _ ? baseTimes$1(a420.length, String) : [], P2 = I2.length;
  for (var $ in a420)
    (u2 || hasOwnProperty$c.call(a420, $)) && !(_ && // Safari 9 has enumerable `arguments.length` in strict mode.
    ($ == "length" || // Node.js 0.10 has enumerable non-index properties on buffers.
    v2 && ($ == "offset" || $ == "parent") || // PhantomJS 2 has enumerable non-index properties on typed arrays.
    p2 && ($ == "buffer" || $ == "byteLength" || $ == "byteOffset") || // Skip index properties.
    isIndex$1($, P2))) && I2.push($);
  return I2;
}
function overArg$2(a420, u2) {
  return function(c) {
    return a420(u2(c));
  };
}
var nativeKeys$1 = overArg$2(Object.keys, Object), objectProto$f = Object.prototype, hasOwnProperty$b = objectProto$f.hasOwnProperty;
function baseKeys$1(a420) {
  if (!isPrototype$1(a420))
    return nativeKeys$1(a420);
  var u2 = [];
  for (var c in Object(a420))
    hasOwnProperty$b.call(a420, c) && c != "constructor" && u2.push(c);
  return u2;
}
function keys$2(a420) {
  return isArrayLike$2(a420) ? arrayLikeKeys$1(a420) : baseKeys$1(a420);
}
function nativeKeysIn(a420) {
  var u2 = [];
  if (a420 != null)
    for (var c in Object(a420))
      u2.push(c);
  return u2;
}
var objectProto$e = Object.prototype, hasOwnProperty$a = objectProto$e.hasOwnProperty;
function baseKeysIn(a420) {
  if (!isObject$9(a420))
    return nativeKeysIn(a420);
  var u2 = isPrototype$1(a420), c = [];
  for (var l2 in a420)
    l2 == "constructor" && (u2 || !hasOwnProperty$a.call(a420, l2)) || c.push(l2);
  return c;
}
function keysIn(a420) {
  return isArrayLike$2(a420) ? arrayLikeKeys$1(a420, true) : baseKeysIn(a420);
}
var reIsDeepProp = /\.|\[(?:[^[\]]*|(["'])(?:(?!\1)[^\\]|\\.)*?\1)\]/, reIsPlainProp = /^\w*$/;
function isKey(a420, u2) {
  if (isArray$5(a420))
    return false;
  var c = typeof a420;
  return c == "number" || c == "symbol" || c == "boolean" || a420 == null || isSymbol$3(a420) ? true : reIsPlainProp.test(a420) || !reIsDeepProp.test(a420) || u2 != null && a420 in Object(u2);
}
var nativeCreate = getNative(Object, "create");
function hashClear() {
  this.__data__ = nativeCreate ? nativeCreate(null) : {}, this.size = 0;
}
function hashDelete(a420) {
  var u2 = this.has(a420) && delete this.__data__[a420];
  return this.size -= u2 ? 1 : 0, u2;
}
var HASH_UNDEFINED$2 = "__lodash_hash_undefined__", objectProto$d = Object.prototype, hasOwnProperty$9 = objectProto$d.hasOwnProperty;
function hashGet(a420) {
  var u2 = this.__data__;
  if (nativeCreate) {
    var c = u2[a420];
    return c === HASH_UNDEFINED$2 ? void 0 : c;
  }
  return hasOwnProperty$9.call(u2, a420) ? u2[a420] : void 0;
}
var objectProto$c = Object.prototype, hasOwnProperty$8 = objectProto$c.hasOwnProperty;
function hashHas(a420) {
  var u2 = this.__data__;
  return nativeCreate ? u2[a420] !== void 0 : hasOwnProperty$8.call(u2, a420);
}
var HASH_UNDEFINED$1 = "__lodash_hash_undefined__";
function hashSet(a420, u2) {
  var c = this.__data__;
  return this.size += this.has(a420) ? 0 : 1, c[a420] = nativeCreate && u2 === void 0 ? HASH_UNDEFINED$1 : u2, this;
}
function Hash$8(a420) {
  var u2 = -1, c = a420 == null ? 0 : a420.length;
  for (this.clear(); ++u2 < c; ) {
    var l2 = a420[u2];
    this.set(l2[0], l2[1]);
  }
}
Hash$8.prototype.clear = hashClear;
Hash$8.prototype.delete = hashDelete;
Hash$8.prototype.get = hashGet;
Hash$8.prototype.has = hashHas;
Hash$8.prototype.set = hashSet;
function listCacheClear() {
  this.__data__ = [], this.size = 0;
}
function assocIndexOf(a420, u2) {
  for (var c = a420.length; c--; )
    if (eq(a420[c][0], u2))
      return c;
  return -1;
}
var arrayProto$1 = Array.prototype, splice$1 = arrayProto$1.splice;
function listCacheDelete(a420) {
  var u2 = this.__data__, c = assocIndexOf(u2, a420);
  if (c < 0)
    return false;
  var l2 = u2.length - 1;
  return c == l2 ? u2.pop() : splice$1.call(u2, c, 1), --this.size, true;
}
function listCacheGet(a420) {
  var u2 = this.__data__, c = assocIndexOf(u2, a420);
  return c < 0 ? void 0 : u2[c][1];
}
function listCacheHas(a420) {
  return assocIndexOf(this.__data__, a420) > -1;
}
function listCacheSet(a420, u2) {
  var c = this.__data__, l2 = assocIndexOf(c, a420);
  return l2 < 0 ? (++this.size, c.push([a420, u2])) : c[l2][1] = u2, this;
}
function ListCache(a420) {
  var u2 = -1, c = a420 == null ? 0 : a420.length;
  for (this.clear(); ++u2 < c; ) {
    var l2 = a420[u2];
    this.set(l2[0], l2[1]);
  }
}
ListCache.prototype.clear = listCacheClear;
ListCache.prototype.delete = listCacheDelete;
ListCache.prototype.get = listCacheGet;
ListCache.prototype.has = listCacheHas;
ListCache.prototype.set = listCacheSet;
var Map$1 = getNative(root, "Map");
function mapCacheClear() {
  this.size = 0, this.__data__ = { hash: new Hash$8(), map: new (Map$1 || ListCache)(), string: new Hash$8() };
}
function isKeyable(a420) {
  var u2 = typeof a420;
  return u2 == "string" || u2 == "number" || u2 == "symbol" || u2 == "boolean" ? a420 !== "__proto__" : a420 === null;
}
function getMapData(a420, u2) {
  var c = a420.__data__;
  return isKeyable(u2) ? c[typeof u2 == "string" ? "string" : "hash"] : c.map;
}
function mapCacheDelete(a420) {
  var u2 = getMapData(this, a420).delete(a420);
  return this.size -= u2 ? 1 : 0, u2;
}
function mapCacheGet(a420) {
  return getMapData(this, a420).get(a420);
}
function mapCacheHas(a420) {
  return getMapData(this, a420).has(a420);
}
function mapCacheSet(a420, u2) {
  var c = getMapData(this, a420), l2 = c.size;
  return c.set(a420, u2), this.size += c.size == l2 ? 0 : 1, this;
}
function MapCache(a420) {
  var u2 = -1, c = a420 == null ? 0 : a420.length;
  for (this.clear(); ++u2 < c; ) {
    var l2 = a420[u2];
    this.set(l2[0], l2[1]);
  }
}
MapCache.prototype.clear = mapCacheClear;
MapCache.prototype.delete = mapCacheDelete;
MapCache.prototype.get = mapCacheGet;
MapCache.prototype.has = mapCacheHas;
MapCache.prototype.set = mapCacheSet;
var FUNC_ERROR_TEXT$2 = "Expected a function";
function memoize(a420, u2) {
  if (typeof a420 != "function" || u2 != null && typeof u2 != "function")
    throw new TypeError(FUNC_ERROR_TEXT$2);
  var c = function() {
    var l2 = arguments, v2 = u2 ? u2.apply(this, l2) : l2[0], p2 = c.cache;
    if (p2.has(v2))
      return p2.get(v2);
    var _ = a420.apply(this, l2);
    return c.cache = p2.set(v2, _) || p2, _;
  };
  return c.cache = new (memoize.Cache || MapCache)(), c;
}
memoize.Cache = MapCache;
var MAX_MEMOIZE_SIZE = 500;
function memoizeCapped(a420) {
  var u2 = memoize(a420, function(l2) {
    return c.size === MAX_MEMOIZE_SIZE && c.clear(), l2;
  }), c = u2.cache;
  return u2;
}
var rePropName$1 = /[^.[\]]+|\[(?:(-?\d+(?:\.\d+)?)|(["'])((?:(?!\2)[^\\]|\\.)*?)\2)\]|(?=(?:\.|\[\])(?:\.|\[\]|$))/g, reEscapeChar$1 = /\\(\\)?/g, stringToPath$1 = memoizeCapped(function(a420) {
  var u2 = [];
  return a420.charCodeAt(0) === 46 && u2.push(""), a420.replace(rePropName$1, function(c, l2, v2, p2) {
    u2.push(v2 ? p2.replace(reEscapeChar$1, "$1") : l2 || c);
  }), u2;
});
function toString$3(a420) {
  return a420 == null ? "" : baseToString(a420);
}
function castPath(a420, u2) {
  return isArray$5(a420) ? a420 : isKey(a420, u2) ? [a420] : stringToPath$1(toString$3(a420));
}
var INFINITY$3 = 1 / 0;
function toKey(a420) {
  if (typeof a420 == "string" || isSymbol$3(a420))
    return a420;
  var u2 = a420 + "";
  return u2 == "0" && 1 / a420 == -INFINITY$3 ? "-0" : u2;
}
function baseGet(a420, u2) {
  u2 = castPath(u2, a420);
  for (var c = 0, l2 = u2.length; a420 != null && c < l2; )
    a420 = a420[toKey(u2[c++])];
  return c && c == l2 ? a420 : void 0;
}
function get(a420, u2, c) {
  var l2 = a420 == null ? void 0 : baseGet(a420, u2);
  return l2 === void 0 ? c : l2;
}
function arrayPush(a420, u2) {
  for (var c = -1, l2 = u2.length, v2 = a420.length; ++c < l2; )
    a420[v2 + c] = u2[c];
  return a420;
}
var spreadableSymbol = Symbol$1 ? Symbol$1.isConcatSpreadable : void 0;
function isFlattenable(a420) {
  return isArray$5(a420) || isArguments$2(a420) || !!(spreadableSymbol && a420 && a420[spreadableSymbol]);
}
function baseFlatten(a420, u2, c, l2, v2) {
  var p2 = -1, _ = a420.length;
  for (c || (c = isFlattenable), v2 || (v2 = []); ++p2 < _; ) {
    var I2 = a420[p2];
    u2 > 0 && c(I2) ? u2 > 1 ? baseFlatten(I2, u2 - 1, c, l2, v2) : arrayPush(v2, I2) : l2 || (v2[v2.length] = I2);
  }
  return v2;
}
function flatten(a420) {
  var u2 = a420 == null ? 0 : a420.length;
  return u2 ? baseFlatten(a420, 1) : [];
}
function flatRest(a420) {
  return setToString(overRest(a420, void 0, flatten), a420 + "");
}
var getPrototype$1 = overArg$2(Object.getPrototypeOf, Object);
const getPrototype$2 = getPrototype$1;
var objectTag$4 = "[object Object]", funcProto$1 = Function.prototype, objectProto$b = Object.prototype, funcToString$1 = funcProto$1.toString, hasOwnProperty$7 = objectProto$b.hasOwnProperty, objectCtorString$1 = funcToString$1.call(Object);
function isPlainObject$3(a420) {
  if (!isObjectLike$7(a420) || baseGetTag(a420) != objectTag$4)
    return false;
  var u2 = getPrototype$2(a420);
  if (u2 === null)
    return true;
  var c = hasOwnProperty$7.call(u2, "constructor") && u2.constructor;
  return typeof c == "function" && c instanceof c && funcToString$1.call(c) == objectCtorString$1;
}
function baseSlice(a420, u2, c) {
  var l2 = -1, v2 = a420.length;
  u2 < 0 && (u2 = -u2 > v2 ? 0 : v2 + u2), c = c > v2 ? v2 : c, c < 0 && (c += v2), v2 = u2 > c ? 0 : c - u2 >>> 0, u2 >>>= 0;
  for (var p2 = Array(v2); ++l2 < v2; )
    p2[l2] = a420[l2 + u2];
  return p2;
}
function castSlice(a420, u2, c) {
  var l2 = a420.length;
  return c = c === void 0 ? l2 : c, !u2 && c >= l2 ? a420 : baseSlice(a420, u2, c);
}
var rsAstralRange$2 = "\\ud800-\\udfff", rsComboMarksRange$3 = "\\u0300-\\u036f", reComboHalfMarksRange$3 = "\\ufe20-\\ufe2f", rsComboSymbolsRange$3 = "\\u20d0-\\u20ff", rsComboRange$3 = rsComboMarksRange$3 + reComboHalfMarksRange$3 + rsComboSymbolsRange$3, rsVarRange$2 = "\\ufe0e\\ufe0f", rsZWJ$2 = "\\u200d", reHasUnicode = RegExp("[" + rsZWJ$2 + rsAstralRange$2 + rsComboRange$3 + rsVarRange$2 + "]");
function hasUnicode(a420) {
  return reHasUnicode.test(a420);
}
function asciiToArray(a420) {
  return a420.split("");
}
var rsAstralRange$1 = "\\ud800-\\udfff", rsComboMarksRange$2 = "\\u0300-\\u036f", reComboHalfMarksRange$2 = "\\ufe20-\\ufe2f", rsComboSymbolsRange$2 = "\\u20d0-\\u20ff", rsComboRange$2 = rsComboMarksRange$2 + reComboHalfMarksRange$2 + rsComboSymbolsRange$2, rsVarRange$1 = "\\ufe0e\\ufe0f", rsAstral = "[" + rsAstralRange$1 + "]", rsCombo$2 = "[" + rsComboRange$2 + "]", rsFitz$1 = "\\ud83c[\\udffb-\\udfff]", rsModifier$1 = "(?:" + rsCombo$2 + "|" + rsFitz$1 + ")", rsNonAstral$1 = "[^" + rsAstralRange$1 + "]", rsRegional$1 = "(?:\\ud83c[\\udde6-\\uddff]){2}", rsSurrPair$1 = "[\\ud800-\\udbff][\\udc00-\\udfff]", rsZWJ$1 = "\\u200d", reOptMod$1 = rsModifier$1 + "?", rsOptVar$1 = "[" + rsVarRange$1 + "]?", rsOptJoin$1 = "(?:" + rsZWJ$1 + "(?:" + [rsNonAstral$1, rsRegional$1, rsSurrPair$1].join("|") + ")" + rsOptVar$1 + reOptMod$1 + ")*", rsSeq$1 = rsOptVar$1 + reOptMod$1 + rsOptJoin$1, rsSymbol = "(?:" + [rsNonAstral$1 + rsCombo$2 + "?", rsCombo$2, rsRegional$1, rsSurrPair$1, rsAstral].join("|") + ")", reUnicode = RegExp(rsFitz$1 + "(?=" + rsFitz$1 + ")|" + rsSymbol + rsSeq$1, "g");
function unicodeToArray(a420) {
  return a420.match(reUnicode) || [];
}
function stringToArray(a420) {
  return hasUnicode(a420) ? unicodeToArray(a420) : asciiToArray(a420);
}
function createCaseFirst(a420) {
  return function(u2) {
    u2 = toString$3(u2);
    var c = hasUnicode(u2) ? stringToArray(u2) : void 0, l2 = c ? c[0] : u2.charAt(0), v2 = c ? castSlice(c, 1).join("") : u2.slice(1);
    return l2[a420]() + v2;
  };
}
var upperFirst = createCaseFirst("toUpperCase");
function capitalize(a420) {
  return upperFirst(toString$3(a420).toLowerCase());
}
function arrayReduce(a420, u2, c, l2) {
  var v2 = -1, p2 = a420 == null ? 0 : a420.length;
  for (l2 && p2 && (c = a420[++v2]); ++v2 < p2; )
    c = u2(c, a420[v2], v2, a420);
  return c;
}
function basePropertyOf(a420) {
  return function(u2) {
    return a420 == null ? void 0 : a420[u2];
  };
}
var deburredLetters = {
  // Latin-1 Supplement block.
  À: "A",
  Á: "A",
  Â: "A",
  Ã: "A",
  Ä: "A",
  Å: "A",
  à: "a",
  á: "a",
  â: "a",
  ã: "a",
  ä: "a",
  å: "a",
  Ç: "C",
  ç: "c",
  Ð: "D",
  ð: "d",
  È: "E",
  É: "E",
  Ê: "E",
  Ë: "E",
  è: "e",
  é: "e",
  ê: "e",
  ë: "e",
  Ì: "I",
  Í: "I",
  Î: "I",
  Ï: "I",
  ì: "i",
  í: "i",
  î: "i",
  ï: "i",
  Ñ: "N",
  ñ: "n",
  Ò: "O",
  Ó: "O",
  Ô: "O",
  Õ: "O",
  Ö: "O",
  Ø: "O",
  ò: "o",
  ó: "o",
  ô: "o",
  õ: "o",
  ö: "o",
  ø: "o",
  Ù: "U",
  Ú: "U",
  Û: "U",
  Ü: "U",
  ù: "u",
  ú: "u",
  û: "u",
  ü: "u",
  Ý: "Y",
  ý: "y",
  ÿ: "y",
  Æ: "Ae",
  æ: "ae",
  Þ: "Th",
  þ: "th",
  ß: "ss",
  // Latin Extended-A block.
  Ā: "A",
  Ă: "A",
  Ą: "A",
  ā: "a",
  ă: "a",
  ą: "a",
  Ć: "C",
  Ĉ: "C",
  Ċ: "C",
  Č: "C",
  ć: "c",
  ĉ: "c",
  ċ: "c",
  č: "c",
  Ď: "D",
  Đ: "D",
  ď: "d",
  đ: "d",
  Ē: "E",
  Ĕ: "E",
  Ė: "E",
  Ę: "E",
  Ě: "E",
  ē: "e",
  ĕ: "e",
  ė: "e",
  ę: "e",
  ě: "e",
  Ĝ: "G",
  Ğ: "G",
  Ġ: "G",
  Ģ: "G",
  ĝ: "g",
  ğ: "g",
  ġ: "g",
  ģ: "g",
  Ĥ: "H",
  Ħ: "H",
  ĥ: "h",
  ħ: "h",
  Ĩ: "I",
  Ī: "I",
  Ĭ: "I",
  Į: "I",
  İ: "I",
  ĩ: "i",
  ī: "i",
  ĭ: "i",
  į: "i",
  ı: "i",
  Ĵ: "J",
  ĵ: "j",
  Ķ: "K",
  ķ: "k",
  ĸ: "k",
  Ĺ: "L",
  Ļ: "L",
  Ľ: "L",
  Ŀ: "L",
  Ł: "L",
  ĺ: "l",
  ļ: "l",
  ľ: "l",
  ŀ: "l",
  ł: "l",
  Ń: "N",
  Ņ: "N",
  Ň: "N",
  Ŋ: "N",
  ń: "n",
  ņ: "n",
  ň: "n",
  ŋ: "n",
  Ō: "O",
  Ŏ: "O",
  Ő: "O",
  ō: "o",
  ŏ: "o",
  ő: "o",
  Ŕ: "R",
  Ŗ: "R",
  Ř: "R",
  ŕ: "r",
  ŗ: "r",
  ř: "r",
  Ś: "S",
  Ŝ: "S",
  Ş: "S",
  Š: "S",
  ś: "s",
  ŝ: "s",
  ş: "s",
  š: "s",
  Ţ: "T",
  Ť: "T",
  Ŧ: "T",
  ţ: "t",
  ť: "t",
  ŧ: "t",
  Ũ: "U",
  Ū: "U",
  Ŭ: "U",
  Ů: "U",
  Ű: "U",
  Ų: "U",
  ũ: "u",
  ū: "u",
  ŭ: "u",
  ů: "u",
  ű: "u",
  ų: "u",
  Ŵ: "W",
  ŵ: "w",
  Ŷ: "Y",
  ŷ: "y",
  Ÿ: "Y",
  Ź: "Z",
  Ż: "Z",
  Ž: "Z",
  ź: "z",
  ż: "z",
  ž: "z",
  Ĳ: "IJ",
  ĳ: "ij",
  Œ: "Oe",
  œ: "oe",
  ŉ: "'n",
  ſ: "s"
}, deburrLetter = basePropertyOf(deburredLetters);
const deburrLetter$1 = deburrLetter;
var reLatin = /[\xc0-\xd6\xd8-\xf6\xf8-\xff\u0100-\u017f]/g, rsComboMarksRange$1 = "\\u0300-\\u036f", reComboHalfMarksRange$1 = "\\ufe20-\\ufe2f", rsComboSymbolsRange$1 = "\\u20d0-\\u20ff", rsComboRange$1 = rsComboMarksRange$1 + reComboHalfMarksRange$1 + rsComboSymbolsRange$1, rsCombo$1 = "[" + rsComboRange$1 + "]", reComboMark = RegExp(rsCombo$1, "g");
function deburr(a420) {
  return a420 = toString$3(a420), a420 && a420.replace(reLatin, deburrLetter$1).replace(reComboMark, "");
}
var reAsciiWord = /[^\x00-\x2f\x3a-\x40\x5b-\x60\x7b-\x7f]+/g;
function asciiWords(a420) {
  return a420.match(reAsciiWord) || [];
}
var reHasUnicodeWord = /[a-z][A-Z]|[A-Z]{2}[a-z]|[0-9][a-zA-Z]|[a-zA-Z][0-9]|[^a-zA-Z0-9 ]/;
function hasUnicodeWord(a420) {
  return reHasUnicodeWord.test(a420);
}
var rsAstralRange = "\\ud800-\\udfff", rsComboMarksRange = "\\u0300-\\u036f", reComboHalfMarksRange = "\\ufe20-\\ufe2f", rsComboSymbolsRange = "\\u20d0-\\u20ff", rsComboRange = rsComboMarksRange + reComboHalfMarksRange + rsComboSymbolsRange, rsDingbatRange = "\\u2700-\\u27bf", rsLowerRange = "a-z\\xdf-\\xf6\\xf8-\\xff", rsMathOpRange = "\\xac\\xb1\\xd7\\xf7", rsNonCharRange = "\\x00-\\x2f\\x3a-\\x40\\x5b-\\x60\\x7b-\\xbf", rsPunctuationRange = "\\u2000-\\u206f", rsSpaceRange = " \\t\\x0b\\f\\xa0\\ufeff\\n\\r\\u2028\\u2029\\u1680\\u180e\\u2000\\u2001\\u2002\\u2003\\u2004\\u2005\\u2006\\u2007\\u2008\\u2009\\u200a\\u202f\\u205f\\u3000", rsUpperRange = "A-Z\\xc0-\\xd6\\xd8-\\xde", rsVarRange = "\\ufe0e\\ufe0f", rsBreakRange = rsMathOpRange + rsNonCharRange + rsPunctuationRange + rsSpaceRange, rsApos$1 = "['’]", rsBreak = "[" + rsBreakRange + "]", rsCombo = "[" + rsComboRange + "]", rsDigits = "\\d+", rsDingbat = "[" + rsDingbatRange + "]", rsLower = "[" + rsLowerRange + "]", rsMisc = "[^" + rsAstralRange + rsBreakRange + rsDigits + rsDingbatRange + rsLowerRange + rsUpperRange + "]", rsFitz = "\\ud83c[\\udffb-\\udfff]", rsModifier = "(?:" + rsCombo + "|" + rsFitz + ")", rsNonAstral = "[^" + rsAstralRange + "]", rsRegional = "(?:\\ud83c[\\udde6-\\uddff]){2}", rsSurrPair = "[\\ud800-\\udbff][\\udc00-\\udfff]", rsUpper = "[" + rsUpperRange + "]", rsZWJ = "\\u200d", rsMiscLower = "(?:" + rsLower + "|" + rsMisc + ")", rsMiscUpper = "(?:" + rsUpper + "|" + rsMisc + ")", rsOptContrLower = "(?:" + rsApos$1 + "(?:d|ll|m|re|s|t|ve))?", rsOptContrUpper = "(?:" + rsApos$1 + "(?:D|LL|M|RE|S|T|VE))?", reOptMod = rsModifier + "?", rsOptVar = "[" + rsVarRange + "]?", rsOptJoin = "(?:" + rsZWJ + "(?:" + [rsNonAstral, rsRegional, rsSurrPair].join("|") + ")" + rsOptVar + reOptMod + ")*", rsOrdLower = "\\d*(?:1st|2nd|3rd|(?![123])\\dth)(?=\\b|[A-Z_])", rsOrdUpper = "\\d*(?:1ST|2ND|3RD|(?![123])\\dTH)(?=\\b|[a-z_])", rsSeq = rsOptVar + reOptMod + rsOptJoin, rsEmoji = "(?:" + [rsDingbat, rsRegional, rsSurrPair].join("|") + ")" + rsSeq, reUnicodeWord = RegExp([rsUpper + "?" + rsLower + "+" + rsOptContrLower + "(?=" + [rsBreak, rsUpper, "$"].join("|") + ")", rsMiscUpper + "+" + rsOptContrUpper + "(?=" + [rsBreak, rsUpper + rsMiscLower, "$"].join("|") + ")", rsUpper + "?" + rsMiscLower + "+" + rsOptContrLower, rsUpper + "+" + rsOptContrUpper, rsOrdUpper, rsOrdLower, rsDigits, rsEmoji].join("|"), "g");
function unicodeWords(a420) {
  return a420.match(reUnicodeWord) || [];
}
function words(a420, u2, c) {
  return a420 = toString$3(a420), u2 = c ? void 0 : u2, u2 === void 0 ? hasUnicodeWord(a420) ? unicodeWords(a420) : asciiWords(a420) : a420.match(u2) || [];
}
var rsApos = "['’]", reApos = RegExp(rsApos, "g");
function createCompounder(a420) {
  return function(u2) {
    return arrayReduce(words(deburr(u2).replace(reApos, "")), a420, "");
  };
}
var camelCase$2 = createCompounder(function(a420, u2, c) {
  return u2 = u2.toLowerCase(), a420 + (c ? capitalize(u2) : u2);
});
const camelCase$3 = camelCase$2;
function stackClear() {
  this.__data__ = new ListCache(), this.size = 0;
}
function stackDelete(a420) {
  var u2 = this.__data__, c = u2.delete(a420);
  return this.size = u2.size, c;
}
function stackGet(a420) {
  return this.__data__.get(a420);
}
function stackHas(a420) {
  return this.__data__.has(a420);
}
var LARGE_ARRAY_SIZE = 200;
function stackSet(a420, u2) {
  var c = this.__data__;
  if (c instanceof ListCache) {
    var l2 = c.__data__;
    if (!Map$1 || l2.length < LARGE_ARRAY_SIZE - 1)
      return l2.push([a420, u2]), this.size = ++c.size, this;
    c = this.__data__ = new MapCache(l2);
  }
  return c.set(a420, u2), this.size = c.size, this;
}
function Stack(a420) {
  var u2 = this.__data__ = new ListCache(a420);
  this.size = u2.size;
}
Stack.prototype.clear = stackClear;
Stack.prototype.delete = stackDelete;
Stack.prototype.get = stackGet;
Stack.prototype.has = stackHas;
Stack.prototype.set = stackSet;
function baseAssign(a420, u2) {
  return a420 && copyObject(u2, keys$2(u2), a420);
}
function baseAssignIn(a420, u2) {
  return a420 && copyObject(u2, keysIn(u2), a420);
}
var freeExports = typeof exports == "object" && exports && !exports.nodeType && exports, freeModule = freeExports && typeof module == "object" && module && !module.nodeType && module, moduleExports = freeModule && freeModule.exports === freeExports, Buffer$N = moduleExports ? root.Buffer : void 0, allocUnsafe = Buffer$N ? Buffer$N.allocUnsafe : void 0;
function cloneBuffer(a420, u2) {
  if (u2)
    return a420.slice();
  var c = a420.length, l2 = allocUnsafe ? allocUnsafe(c) : new a420.constructor(c);
  return a420.copy(l2), l2;
}
function arrayFilter(a420, u2) {
  for (var c = -1, l2 = a420 == null ? 0 : a420.length, v2 = 0, p2 = []; ++c < l2; ) {
    var _ = a420[c];
    u2(_, c, a420) && (p2[v2++] = _);
  }
  return p2;
}
function stubArray() {
  return [];
}
var objectProto$a = Object.prototype, propertyIsEnumerable$1 = objectProto$a.propertyIsEnumerable, nativeGetSymbols$1 = Object.getOwnPropertySymbols, getSymbols = nativeGetSymbols$1 ? function(a420) {
  return a420 == null ? [] : (a420 = Object(a420), arrayFilter(nativeGetSymbols$1(a420), function(u2) {
    return propertyIsEnumerable$1.call(a420, u2);
  }));
} : stubArray;
function copySymbols(a420, u2) {
  return copyObject(a420, getSymbols(a420), u2);
}
var nativeGetSymbols = Object.getOwnPropertySymbols, getSymbolsIn = nativeGetSymbols ? function(a420) {
  for (var u2 = []; a420; )
    arrayPush(u2, getSymbols(a420)), a420 = getPrototype$2(a420);
  return u2;
} : stubArray;
function copySymbolsIn(a420, u2) {
  return copyObject(a420, getSymbolsIn(a420), u2);
}
function baseGetAllKeys(a420, u2, c) {
  var l2 = u2(a420);
  return isArray$5(a420) ? l2 : arrayPush(l2, c(a420));
}
function getAllKeys(a420) {
  return baseGetAllKeys(a420, keys$2, getSymbols);
}
function getAllKeysIn(a420) {
  return baseGetAllKeys(a420, keysIn, getSymbolsIn);
}
var DataView$1 = getNative(root, "DataView"), Promise$1 = getNative(root, "Promise"), Set$1 = getNative(root, "Set"), mapTag$4 = "[object Map]", objectTag$3 = "[object Object]", promiseTag = "[object Promise]", setTag$4 = "[object Set]", weakMapTag$1 = "[object WeakMap]", dataViewTag$3 = "[object DataView]", dataViewCtorString = toSource(DataView$1), mapCtorString = toSource(Map$1), promiseCtorString = toSource(Promise$1), setCtorString = toSource(Set$1), weakMapCtorString = toSource(WeakMap$2), getTag = baseGetTag;
(DataView$1 && getTag(new DataView$1(new ArrayBuffer(1))) != dataViewTag$3 || Map$1 && getTag(new Map$1()) != mapTag$4 || Promise$1 && getTag(Promise$1.resolve()) != promiseTag || Set$1 && getTag(new Set$1()) != setTag$4 || WeakMap$2 && getTag(new WeakMap$2()) != weakMapTag$1) && (getTag = function(a420) {
  var u2 = baseGetTag(a420), c = u2 == objectTag$3 ? a420.constructor : void 0, l2 = c ? toSource(c) : "";
  if (l2)
    switch (l2) {
      case dataViewCtorString:
        return dataViewTag$3;
      case mapCtorString:
        return mapTag$4;
      case promiseCtorString:
        return promiseTag;
      case setCtorString:
        return setTag$4;
      case weakMapCtorString:
        return weakMapTag$1;
    }
  return u2;
});
const getTag$1 = getTag;
var objectProto$9 = Object.prototype, hasOwnProperty$6 = objectProto$9.hasOwnProperty;
function initCloneArray(a420) {
  var u2 = a420.length, c = new a420.constructor(u2);
  return u2 && typeof a420[0] == "string" && hasOwnProperty$6.call(a420, "index") && (c.index = a420.index, c.input = a420.input), c;
}
var Uint8Array$1 = root.Uint8Array;
function cloneArrayBuffer(a420) {
  var u2 = new a420.constructor(a420.byteLength);
  return new Uint8Array$1(u2).set(new Uint8Array$1(a420)), u2;
}
function cloneDataView(a420, u2) {
  var c = u2 ? cloneArrayBuffer(a420.buffer) : a420.buffer;
  return new a420.constructor(c, a420.byteOffset, a420.byteLength);
}
var reFlags = /\w*$/;
function cloneRegExp(a420) {
  var u2 = new a420.constructor(a420.source, reFlags.exec(a420));
  return u2.lastIndex = a420.lastIndex, u2;
}
var symbolProto$1 = Symbol$1 ? Symbol$1.prototype : void 0, symbolValueOf$1 = symbolProto$1 ? symbolProto$1.valueOf : void 0;
function cloneSymbol(a420) {
  return symbolValueOf$1 ? Object(symbolValueOf$1.call(a420)) : {};
}
function cloneTypedArray(a420, u2) {
  var c = u2 ? cloneArrayBuffer(a420.buffer) : a420.buffer;
  return new a420.constructor(c, a420.byteOffset, a420.length);
}
var boolTag$3 = "[object Boolean]", dateTag$2 = "[object Date]", mapTag$3 = "[object Map]", numberTag$3 = "[object Number]", regexpTag$2 = "[object RegExp]", setTag$3 = "[object Set]", stringTag$4 = "[object String]", symbolTag$5 = "[object Symbol]", arrayBufferTag$2 = "[object ArrayBuffer]", dataViewTag$2 = "[object DataView]", float32Tag$1 = "[object Float32Array]", float64Tag$1 = "[object Float64Array]", int8Tag$1 = "[object Int8Array]", int16Tag$1 = "[object Int16Array]", int32Tag$1 = "[object Int32Array]", uint8Tag$1 = "[object Uint8Array]", uint8ClampedTag$1 = "[object Uint8ClampedArray]", uint16Tag$1 = "[object Uint16Array]", uint32Tag$1 = "[object Uint32Array]";
function initCloneByTag(a420, u2, c) {
  var l2 = a420.constructor;
  switch (u2) {
    case arrayBufferTag$2:
      return cloneArrayBuffer(a420);
    case boolTag$3:
    case dateTag$2:
      return new l2(+a420);
    case dataViewTag$2:
      return cloneDataView(a420, c);
    case float32Tag$1:
    case float64Tag$1:
    case int8Tag$1:
    case int16Tag$1:
    case int32Tag$1:
    case uint8Tag$1:
    case uint8ClampedTag$1:
    case uint16Tag$1:
    case uint32Tag$1:
      return cloneTypedArray(a420, c);
    case mapTag$3:
      return new l2();
    case numberTag$3:
    case stringTag$4:
      return new l2(a420);
    case regexpTag$2:
      return cloneRegExp(a420);
    case setTag$3:
      return new l2();
    case symbolTag$5:
      return cloneSymbol(a420);
  }
}
function initCloneObject(a420) {
  return typeof a420.constructor == "function" && !isPrototype$1(a420) ? baseCreate(getPrototype$2(a420)) : {};
}
var mapTag$2 = "[object Map]";
function baseIsMap(a420) {
  return isObjectLike$7(a420) && getTag$1(a420) == mapTag$2;
}
var nodeIsMap = nodeUtil && nodeUtil.isMap, isMap = nodeIsMap ? baseUnary(nodeIsMap) : baseIsMap, setTag$2 = "[object Set]";
function baseIsSet(a420) {
  return isObjectLike$7(a420) && getTag$1(a420) == setTag$2;
}
var nodeIsSet = nodeUtil && nodeUtil.isSet, isSet$5 = nodeIsSet ? baseUnary(nodeIsSet) : baseIsSet, CLONE_DEEP_FLAG$3 = 1, CLONE_FLAT_FLAG$1 = 2, CLONE_SYMBOLS_FLAG$2 = 4, argsTag$2 = "[object Arguments]", arrayTag$1 = "[object Array]", boolTag$2 = "[object Boolean]", dateTag$1 = "[object Date]", errorTag$1 = "[object Error]", funcTag$1 = "[object Function]", genTag$1 = "[object GeneratorFunction]", mapTag$1 = "[object Map]", numberTag$2 = "[object Number]", objectTag$2 = "[object Object]", regexpTag$1 = "[object RegExp]", setTag$1 = "[object Set]", stringTag$3 = "[object String]", symbolTag$4 = "[object Symbol]", weakMapTag = "[object WeakMap]", arrayBufferTag$1 = "[object ArrayBuffer]", dataViewTag$1 = "[object DataView]", float32Tag = "[object Float32Array]", float64Tag = "[object Float64Array]", int8Tag = "[object Int8Array]", int16Tag = "[object Int16Array]", int32Tag = "[object Int32Array]", uint8Tag = "[object Uint8Array]", uint8ClampedTag = "[object Uint8ClampedArray]", uint16Tag = "[object Uint16Array]", uint32Tag = "[object Uint32Array]", cloneableTags = {};
cloneableTags[argsTag$2] = cloneableTags[arrayTag$1] = cloneableTags[arrayBufferTag$1] = cloneableTags[dataViewTag$1] = cloneableTags[boolTag$2] = cloneableTags[dateTag$1] = cloneableTags[float32Tag] = cloneableTags[float64Tag] = cloneableTags[int8Tag] = cloneableTags[int16Tag] = cloneableTags[int32Tag] = cloneableTags[mapTag$1] = cloneableTags[numberTag$2] = cloneableTags[objectTag$2] = cloneableTags[regexpTag$1] = cloneableTags[setTag$1] = cloneableTags[stringTag$3] = cloneableTags[symbolTag$4] = cloneableTags[uint8Tag] = cloneableTags[uint8ClampedTag] = cloneableTags[uint16Tag] = cloneableTags[uint32Tag] = true;
cloneableTags[errorTag$1] = cloneableTags[funcTag$1] = cloneableTags[weakMapTag] = false;
function baseClone(a420, u2, c, l2, v2, p2) {
  var _, I2 = u2 & CLONE_DEEP_FLAG$3, P2 = u2 & CLONE_FLAT_FLAG$1, $ = u2 & CLONE_SYMBOLS_FLAG$2;
  if (c && (_ = v2 ? c(a420, l2, v2, p2) : c(a420)), _ !== void 0)
    return _;
  if (!isObject$9(a420))
    return a420;
  var F2 = isArray$5(a420);
  if (F2) {
    if (_ = initCloneArray(a420), !I2)
      return copyArray(a420, _);
  } else {
    var H2 = getTag$1(a420), j = H2 == funcTag$1 || H2 == genTag$1;
    if (isBuffer$1(a420))
      return cloneBuffer(a420, I2);
    if (H2 == objectTag$2 || H2 == argsTag$2 || j && !v2) {
      if (_ = P2 || j ? {} : initCloneObject(a420), !I2)
        return P2 ? copySymbolsIn(a420, baseAssignIn(_, a420)) : copySymbols(a420, baseAssign(_, a420));
    } else {
      if (!cloneableTags[H2])
        return v2 ? a420 : {};
      _ = initCloneByTag(a420, H2, I2);
    }
  }
  p2 || (p2 = new Stack());
  var ee2 = p2.get(a420);
  if (ee2)
    return ee2;
  p2.set(a420, _), isSet$5(a420) ? a420.forEach(function(Q2) {
    _.add(baseClone(Q2, u2, c, Q2, a420, p2));
  }) : isMap(a420) && a420.forEach(function(Q2, ne2) {
    _.set(ne2, baseClone(Q2, u2, c, ne2, a420, p2));
  });
  var X2 = $ ? P2 ? getAllKeysIn : getAllKeys : P2 ? keysIn : keys$2, ie2 = F2 ? void 0 : X2(a420);
  return arrayEach(ie2 || a420, function(Q2, ne2) {
    ie2 && (ne2 = Q2, Q2 = a420[ne2]), assignValue(_, ne2, baseClone(Q2, u2, c, ne2, a420, p2));
  }), _;
}
var CLONE_DEEP_FLAG$2 = 1, CLONE_SYMBOLS_FLAG$1 = 4;
function cloneDeep$1(a420) {
  return baseClone(a420, CLONE_DEEP_FLAG$2 | CLONE_SYMBOLS_FLAG$1);
}
var HASH_UNDEFINED = "__lodash_hash_undefined__";
function setCacheAdd(a420) {
  return this.__data__.set(a420, HASH_UNDEFINED), this;
}
function setCacheHas(a420) {
  return this.__data__.has(a420);
}
function SetCache(a420) {
  var u2 = -1, c = a420 == null ? 0 : a420.length;
  for (this.__data__ = new MapCache(); ++u2 < c; )
    this.add(a420[u2]);
}
SetCache.prototype.add = SetCache.prototype.push = setCacheAdd;
SetCache.prototype.has = setCacheHas;
function arraySome(a420, u2) {
  for (var c = -1, l2 = a420 == null ? 0 : a420.length; ++c < l2; )
    if (u2(a420[c], c, a420))
      return true;
  return false;
}
function cacheHas(a420, u2) {
  return a420.has(u2);
}
var COMPARE_PARTIAL_FLAG$5 = 1, COMPARE_UNORDERED_FLAG$3 = 2;
function equalArrays(a420, u2, c, l2, v2, p2) {
  var _ = c & COMPARE_PARTIAL_FLAG$5, I2 = a420.length, P2 = u2.length;
  if (I2 != P2 && !(_ && P2 > I2))
    return false;
  var $ = p2.get(a420), F2 = p2.get(u2);
  if ($ && F2)
    return $ == u2 && F2 == a420;
  var H2 = -1, j = true, ee2 = c & COMPARE_UNORDERED_FLAG$3 ? new SetCache() : void 0;
  for (p2.set(a420, u2), p2.set(u2, a420); ++H2 < I2; ) {
    var X2 = a420[H2], ie2 = u2[H2];
    if (l2)
      var Q2 = _ ? l2(ie2, X2, H2, u2, a420, p2) : l2(X2, ie2, H2, a420, u2, p2);
    if (Q2 !== void 0) {
      if (Q2)
        continue;
      j = false;
      break;
    }
    if (ee2) {
      if (!arraySome(u2, function(ne2, Z2) {
        if (!cacheHas(ee2, Z2) && (X2 === ne2 || v2(X2, ne2, c, l2, p2)))
          return ee2.push(Z2);
      })) {
        j = false;
        break;
      }
    } else if (!(X2 === ie2 || v2(X2, ie2, c, l2, p2))) {
      j = false;
      break;
    }
  }
  return p2.delete(a420), p2.delete(u2), j;
}
function mapToArray(a420) {
  var u2 = -1, c = Array(a420.size);
  return a420.forEach(function(l2, v2) {
    c[++u2] = [v2, l2];
  }), c;
}
function setToArray(a420) {
  var u2 = -1, c = Array(a420.size);
  return a420.forEach(function(l2) {
    c[++u2] = l2;
  }), c;
}
var COMPARE_PARTIAL_FLAG$4 = 1, COMPARE_UNORDERED_FLAG$2 = 2, boolTag$1 = "[object Boolean]", dateTag = "[object Date]", errorTag = "[object Error]", mapTag = "[object Map]", numberTag$1 = "[object Number]", regexpTag = "[object RegExp]", setTag = "[object Set]", stringTag$2 = "[object String]", symbolTag$3 = "[object Symbol]", arrayBufferTag = "[object ArrayBuffer]", dataViewTag = "[object DataView]", symbolProto = Symbol$1 ? Symbol$1.prototype : void 0, symbolValueOf = symbolProto ? symbolProto.valueOf : void 0;
function equalByTag(a420, u2, c, l2, v2, p2, _) {
  switch (c) {
    case dataViewTag:
      if (a420.byteLength != u2.byteLength || a420.byteOffset != u2.byteOffset)
        return false;
      a420 = a420.buffer, u2 = u2.buffer;
    case arrayBufferTag:
      return !(a420.byteLength != u2.byteLength || !p2(new Uint8Array$1(a420), new Uint8Array$1(u2)));
    case boolTag$1:
    case dateTag:
    case numberTag$1:
      return eq(+a420, +u2);
    case errorTag:
      return a420.name == u2.name && a420.message == u2.message;
    case regexpTag:
    case stringTag$2:
      return a420 == u2 + "";
    case mapTag:
      var I2 = mapToArray;
    case setTag:
      var P2 = l2 & COMPARE_PARTIAL_FLAG$4;
      if (I2 || (I2 = setToArray), a420.size != u2.size && !P2)
        return false;
      var $ = _.get(a420);
      if ($)
        return $ == u2;
      l2 |= COMPARE_UNORDERED_FLAG$2, _.set(a420, u2);
      var F2 = equalArrays(I2(a420), I2(u2), l2, v2, p2, _);
      return _.delete(a420), F2;
    case symbolTag$3:
      if (symbolValueOf)
        return symbolValueOf.call(a420) == symbolValueOf.call(u2);
  }
  return false;
}
var COMPARE_PARTIAL_FLAG$3 = 1, objectProto$8 = Object.prototype, hasOwnProperty$5 = objectProto$8.hasOwnProperty;
function equalObjects(a420, u2, c, l2, v2, p2) {
  var _ = c & COMPARE_PARTIAL_FLAG$3, I2 = getAllKeys(a420), P2 = I2.length, $ = getAllKeys(u2), F2 = $.length;
  if (P2 != F2 && !_)
    return false;
  for (var H2 = P2; H2--; ) {
    var j = I2[H2];
    if (!(_ ? j in u2 : hasOwnProperty$5.call(u2, j)))
      return false;
  }
  var ee2 = p2.get(a420), X2 = p2.get(u2);
  if (ee2 && X2)
    return ee2 == u2 && X2 == a420;
  var ie2 = true;
  p2.set(a420, u2), p2.set(u2, a420);
  for (var Q2 = _; ++H2 < P2; ) {
    j = I2[H2];
    var ne2 = a420[j], Z2 = u2[j];
    if (l2)
      var de2 = _ ? l2(Z2, ne2, j, u2, a420, p2) : l2(ne2, Z2, j, a420, u2, p2);
    if (!(de2 === void 0 ? ne2 === Z2 || v2(ne2, Z2, c, l2, p2) : de2)) {
      ie2 = false;
      break;
    }
    Q2 || (Q2 = j == "constructor");
  }
  if (ie2 && !Q2) {
    var pe2 = a420.constructor, le2 = u2.constructor;
    pe2 != le2 && "constructor" in a420 && "constructor" in u2 && !(typeof pe2 == "function" && pe2 instanceof pe2 && typeof le2 == "function" && le2 instanceof le2) && (ie2 = false);
  }
  return p2.delete(a420), p2.delete(u2), ie2;
}
var COMPARE_PARTIAL_FLAG$2 = 1, argsTag$1 = "[object Arguments]", arrayTag = "[object Array]", objectTag$1 = "[object Object]", objectProto$7 = Object.prototype, hasOwnProperty$4 = objectProto$7.hasOwnProperty;
function baseIsEqualDeep(a420, u2, c, l2, v2, p2) {
  var _ = isArray$5(a420), I2 = isArray$5(u2), P2 = _ ? arrayTag : getTag$1(a420), $ = I2 ? arrayTag : getTag$1(u2);
  P2 = P2 == argsTag$1 ? objectTag$1 : P2, $ = $ == argsTag$1 ? objectTag$1 : $;
  var F2 = P2 == objectTag$1, H2 = $ == objectTag$1, j = P2 == $;
  if (j && isBuffer$1(a420)) {
    if (!isBuffer$1(u2))
      return false;
    _ = true, F2 = false;
  }
  if (j && !F2)
    return p2 || (p2 = new Stack()), _ || isTypedArray$1(a420) ? equalArrays(a420, u2, c, l2, v2, p2) : equalByTag(a420, u2, P2, c, l2, v2, p2);
  if (!(c & COMPARE_PARTIAL_FLAG$2)) {
    var ee2 = F2 && hasOwnProperty$4.call(a420, "__wrapped__"), X2 = H2 && hasOwnProperty$4.call(u2, "__wrapped__");
    if (ee2 || X2) {
      var ie2 = ee2 ? a420.value() : a420, Q2 = X2 ? u2.value() : u2;
      return p2 || (p2 = new Stack()), v2(ie2, Q2, c, l2, p2);
    }
  }
  return j ? (p2 || (p2 = new Stack()), equalObjects(a420, u2, c, l2, v2, p2)) : false;
}
function baseIsEqual(a420, u2, c, l2, v2) {
  return a420 === u2 ? true : a420 == null || u2 == null || !isObjectLike$7(a420) && !isObjectLike$7(u2) ? a420 !== a420 && u2 !== u2 : baseIsEqualDeep(a420, u2, c, l2, baseIsEqual, v2);
}
var COMPARE_PARTIAL_FLAG$1 = 1, COMPARE_UNORDERED_FLAG$1 = 2;
function baseIsMatch(a420, u2, c, l2) {
  var v2 = c.length, p2 = v2, _ = !l2;
  if (a420 == null)
    return !p2;
  for (a420 = Object(a420); v2--; ) {
    var I2 = c[v2];
    if (_ && I2[2] ? I2[1] !== a420[I2[0]] : !(I2[0] in a420))
      return false;
  }
  for (; ++v2 < p2; ) {
    I2 = c[v2];
    var P2 = I2[0], $ = a420[P2], F2 = I2[1];
    if (_ && I2[2]) {
      if ($ === void 0 && !(P2 in a420))
        return false;
    } else {
      var H2 = new Stack();
      if (l2)
        var j = l2($, F2, P2, a420, u2, H2);
      if (!(j === void 0 ? baseIsEqual(F2, $, COMPARE_PARTIAL_FLAG$1 | COMPARE_UNORDERED_FLAG$1, l2, H2) : j))
        return false;
    }
  }
  return true;
}
function isStrictComparable(a420) {
  return a420 === a420 && !isObject$9(a420);
}
function getMatchData(a420) {
  for (var u2 = keys$2(a420), c = u2.length; c--; ) {
    var l2 = u2[c], v2 = a420[l2];
    u2[c] = [l2, v2, isStrictComparable(v2)];
  }
  return u2;
}
function matchesStrictComparable(a420, u2) {
  return function(c) {
    return c == null ? false : c[a420] === u2 && (u2 !== void 0 || a420 in Object(c));
  };
}
function baseMatches(a420) {
  var u2 = getMatchData(a420);
  return u2.length == 1 && u2[0][2] ? matchesStrictComparable(u2[0][0], u2[0][1]) : function(c) {
    return c === a420 || baseIsMatch(c, a420, u2);
  };
}
function baseHasIn(a420, u2) {
  return a420 != null && u2 in Object(a420);
}
function hasPath(a420, u2, c) {
  u2 = castPath(u2, a420);
  for (var l2 = -1, v2 = u2.length, p2 = false; ++l2 < v2; ) {
    var _ = toKey(u2[l2]);
    if (!(p2 = a420 != null && c(a420, _)))
      break;
    a420 = a420[_];
  }
  return p2 || ++l2 != v2 ? p2 : (v2 = a420 == null ? 0 : a420.length, !!v2 && isLength$1(v2) && isIndex$1(_, v2) && (isArray$5(a420) || isArguments$2(a420)));
}
function hasIn(a420, u2) {
  return a420 != null && hasPath(a420, u2, baseHasIn);
}
var COMPARE_PARTIAL_FLAG = 1, COMPARE_UNORDERED_FLAG = 2;
function baseMatchesProperty(a420, u2) {
  return isKey(a420) && isStrictComparable(u2) ? matchesStrictComparable(toKey(a420), u2) : function(c) {
    var l2 = get(c, a420);
    return l2 === void 0 && l2 === u2 ? hasIn(c, a420) : baseIsEqual(u2, l2, COMPARE_PARTIAL_FLAG | COMPARE_UNORDERED_FLAG);
  };
}
function baseProperty(a420) {
  return function(u2) {
    return u2 == null ? void 0 : u2[a420];
  };
}
function basePropertyDeep(a420) {
  return function(u2) {
    return baseGet(u2, a420);
  };
}
function property(a420) {
  return isKey(a420) ? baseProperty(toKey(a420)) : basePropertyDeep(a420);
}
function baseIteratee(a420) {
  return typeof a420 == "function" ? a420 : a420 == null ? identity$1 : typeof a420 == "object" ? isArray$5(a420) ? baseMatchesProperty(a420[0], a420[1]) : baseMatches(a420) : property(a420);
}
function createBaseFor(a420) {
  return function(u2, c, l2) {
    for (var v2 = -1, p2 = Object(u2), _ = l2(u2), I2 = _.length; I2--; ) {
      var P2 = _[a420 ? I2 : ++v2];
      if (c(p2[P2], P2, p2) === false)
        break;
    }
    return u2;
  };
}
var baseFor = createBaseFor();
const baseFor$1 = baseFor;
function baseForOwn(a420, u2) {
  return a420 && baseFor$1(a420, u2, keys$2);
}
function createBaseEach(a420, u2) {
  return function(c, l2) {
    if (c == null)
      return c;
    if (!isArrayLike$2(c))
      return a420(c, l2);
    for (var v2 = c.length, p2 = u2 ? v2 : -1, _ = Object(c); (u2 ? p2-- : ++p2 < v2) && l2(_[p2], p2, _) !== false; )
      ;
    return c;
  };
}
var baseEach = createBaseEach(baseForOwn), now = function() {
  return root.Date.now();
}, FUNC_ERROR_TEXT$1 = "Expected a function", nativeMax$1 = Math.max, nativeMin = Math.min;
function debounce$1(a420, u2, c) {
  var l2, v2, p2, _, I2, P2, $ = 0, F2 = false, H2 = false, j = true;
  if (typeof a420 != "function")
    throw new TypeError(FUNC_ERROR_TEXT$1);
  u2 = toNumber$3(u2) || 0, isObject$9(c) && (F2 = !!c.leading, H2 = "maxWait" in c, p2 = H2 ? nativeMax$1(toNumber$3(c.maxWait) || 0, u2) : p2, j = "trailing" in c ? !!c.trailing : j);
  function ee2(be2) {
    var ke2 = l2, Te2 = v2;
    return l2 = v2 = void 0, $ = be2, _ = a420.apply(Te2, ke2), _;
  }
  function X2(be2) {
    return $ = be2, I2 = setTimeout(ne2, u2), F2 ? ee2(be2) : _;
  }
  function ie2(be2) {
    var ke2 = be2 - P2, Te2 = be2 - $, q2 = u2 - ke2;
    return H2 ? nativeMin(q2, p2 - Te2) : q2;
  }
  function Q2(be2) {
    var ke2 = be2 - P2, Te2 = be2 - $;
    return P2 === void 0 || ke2 >= u2 || ke2 < 0 || H2 && Te2 >= p2;
  }
  function ne2() {
    var be2 = now();
    if (Q2(be2))
      return Z2(be2);
    I2 = setTimeout(ne2, ie2(be2));
  }
  function Z2(be2) {
    return I2 = void 0, j && l2 ? ee2(be2) : (l2 = v2 = void 0, _);
  }
  function de2() {
    I2 !== void 0 && clearTimeout(I2), $ = 0, l2 = P2 = v2 = I2 = void 0;
  }
  function pe2() {
    return I2 === void 0 ? _ : Z2(now());
  }
  function le2() {
    var be2 = now(), ke2 = Q2(be2);
    if (l2 = arguments, v2 = this, P2 = be2, ke2) {
      if (I2 === void 0)
        return X2(P2);
      if (H2)
        return clearTimeout(I2), I2 = setTimeout(ne2, u2), ee2(P2);
    }
    return I2 === void 0 && (I2 = setTimeout(ne2, u2)), _;
  }
  return le2.cancel = de2, le2.flush = pe2, le2;
}
function last$1(a420) {
  var u2 = a420 == null ? 0 : a420.length;
  return u2 ? a420[u2 - 1] : void 0;
}
function arrayEvery(a420, u2) {
  for (var c = -1, l2 = a420 == null ? 0 : a420.length; ++c < l2; )
    if (!u2(a420[c], c, a420))
      return false;
  return true;
}
function baseEvery(a420, u2) {
  var c = true;
  return baseEach(a420, function(l2, v2, p2) {
    return c = !!u2(l2, v2, p2), c;
  }), c;
}
function every$1(a420, u2, c) {
  var l2 = isArray$5(a420) ? arrayEvery : baseEvery;
  return c && isIterateeCall(a420, u2, c) && (u2 = void 0), l2(a420, baseIteratee(u2));
}
function baseMap(a420, u2) {
  var c = -1, l2 = isArrayLike$2(a420) ? Array(a420.length) : [];
  return baseEach(a420, function(v2, p2, _) {
    l2[++c] = u2(v2, p2, _);
  }), l2;
}
function parent(a420, u2) {
  return u2.length < 2 ? a420 : baseGet(a420, baseSlice(u2, 0, -1));
}
function isEqual(a420, u2) {
  return baseIsEqual(a420, u2);
}
function isMatch(a420, u2) {
  return a420 === u2 || baseIsMatch(a420, u2, getMatchData(u2));
}
var CLONE_DEEP_FLAG$1 = 1;
function iteratee(a420) {
  return baseIteratee(typeof a420 == "function" ? a420 : baseClone(a420, CLONE_DEEP_FLAG$1));
}
var kebabCase = createCompounder(function(a420, u2, c) {
  return a420 + (c ? "-" : "") + u2.toLowerCase();
});
const kebabCase$1 = kebabCase;
function baseUnset(a420, u2) {
  return u2 = castPath(u2, a420), a420 = parent(a420, u2), a420 == null || delete a420[toKey(last$1(u2))];
}
function customOmitClone(a420) {
  return isPlainObject$3(a420) ? void 0 : a420;
}
var CLONE_DEEP_FLAG = 1, CLONE_FLAT_FLAG = 2, CLONE_SYMBOLS_FLAG = 4, omit = flatRest(function(a420, u2) {
  var c = {};
  if (a420 == null)
    return c;
  var l2 = false;
  u2 = arrayMap$1(u2, function(p2) {
    return p2 = castPath(p2, a420), l2 || (l2 = p2.length > 1), p2;
  }), copyObject(a420, getAllKeysIn(a420), c), l2 && (c = baseClone(c, CLONE_DEEP_FLAG | CLONE_FLAT_FLAG | CLONE_SYMBOLS_FLAG, customOmitClone));
  for (var v2 = u2.length; v2--; )
    baseUnset(c, u2[v2]);
  return c;
});
function baseSet(a420, u2, c, l2) {
  if (!isObject$9(a420))
    return a420;
  u2 = castPath(u2, a420);
  for (var v2 = -1, p2 = u2.length, _ = p2 - 1, I2 = a420; I2 != null && ++v2 < p2; ) {
    var P2 = toKey(u2[v2]), $ = c;
    if (P2 === "__proto__" || P2 === "constructor" || P2 === "prototype")
      return a420;
    if (v2 != _) {
      var F2 = I2[P2];
      $ = l2 ? l2(F2, P2, I2) : void 0, $ === void 0 && ($ = isObject$9(F2) ? F2 : isIndex$1(u2[v2 + 1]) ? [] : {});
    }
    assignValue(I2, P2, $), I2 = I2[P2];
  }
  return a420;
}
function basePickBy(a420, u2, c) {
  for (var l2 = -1, v2 = u2.length, p2 = {}; ++l2 < v2; ) {
    var _ = u2[l2], I2 = baseGet(a420, _);
    c(I2, _) && baseSet(p2, castPath(_, a420), I2);
  }
  return p2;
}
function baseSortBy(a420, u2) {
  var c = a420.length;
  for (a420.sort(u2); c--; )
    a420[c] = a420[c].value;
  return a420;
}
function compareAscending(a420, u2) {
  if (a420 !== u2) {
    var c = a420 !== void 0, l2 = a420 === null, v2 = a420 === a420, p2 = isSymbol$3(a420), _ = u2 !== void 0, I2 = u2 === null, P2 = u2 === u2, $ = isSymbol$3(u2);
    if (!I2 && !$ && !p2 && a420 > u2 || p2 && _ && P2 && !I2 && !$ || l2 && _ && P2 || !c && P2 || !v2)
      return 1;
    if (!l2 && !p2 && !$ && a420 < u2 || $ && c && v2 && !l2 && !p2 || I2 && c && v2 || !_ && v2 || !P2)
      return -1;
  }
  return 0;
}
function compareMultiple(a420, u2, c) {
  for (var l2 = -1, v2 = a420.criteria, p2 = u2.criteria, _ = v2.length, I2 = c.length; ++l2 < _; ) {
    var P2 = compareAscending(v2[l2], p2[l2]);
    if (P2) {
      if (l2 >= I2)
        return P2;
      var $ = c[l2];
      return P2 * ($ == "desc" ? -1 : 1);
    }
  }
  return a420.index - u2.index;
}
function baseOrderBy(a420, u2, c) {
  u2.length ? u2 = arrayMap$1(u2, function(p2) {
    return isArray$5(p2) ? function(_) {
      return baseGet(_, p2.length === 1 ? p2[0] : p2);
    } : p2;
  }) : u2 = [identity$1];
  var l2 = -1;
  u2 = arrayMap$1(u2, baseUnary(baseIteratee));
  var v2 = baseMap(a420, function(p2, _, I2) {
    var P2 = arrayMap$1(u2, function($) {
      return $(p2);
    });
    return { criteria: P2, index: ++l2, value: p2 };
  });
  return baseSortBy(v2, function(p2, _) {
    return compareMultiple(p2, _, c);
  });
}
function basePick(a420, u2) {
  return basePickBy(a420, u2, function(c, l2) {
    return hasIn(a420, l2);
  });
}
var pick = flatRest(function(a420, u2) {
  return a420 == null ? {} : basePick(a420, u2);
});
const pick$1 = pick;
function baseIndexOfWith(a420, u2, c, l2) {
  for (var v2 = c - 1, p2 = a420.length; ++v2 < p2; )
    if (l2(a420[v2], u2))
      return v2;
  return -1;
}
var arrayProto = Array.prototype, splice = arrayProto.splice;
function basePullAll(a420, u2, c, l2) {
  var v2 = l2 ? baseIndexOfWith : baseIndexOf$1, p2 = -1, _ = u2.length, I2 = a420;
  for (a420 === u2 && (u2 = copyArray(u2)), c && (I2 = arrayMap$1(a420, baseUnary(c))); ++p2 < _; )
    for (var P2 = 0, $ = u2[p2], F2 = c ? c($) : $; (P2 = v2(I2, F2, P2, l2)) > -1; )
      I2 !== a420 && splice.call(I2, P2, 1), splice.call(a420, P2, 1);
  return a420;
}
function pullAll(a420, u2) {
  return a420 && a420.length && u2 && u2.length ? basePullAll(a420, u2) : a420;
}
var pull$1 = baseRest(pullAll), sortBy = baseRest(function(a420, u2) {
  if (a420 == null)
    return [];
  var c = u2.length;
  return c > 1 && isIterateeCall(a420, u2[0], u2[1]) ? u2 = [] : c > 2 && isIterateeCall(u2[0], u2[1], u2[2]) && (u2 = [u2[0]]), baseOrderBy(a420, baseFlatten(u2, 1), []);
});
const sortBy$1 = sortBy, convert = (
  // Note: overloads in JSDoc can’t yet use different `@template`s.
  /**
     * @type {(
     *   (<Condition extends string>(test: Condition) => (node: unknown, index?: number | null | undefined, parent?: Parent | null | undefined, context?: unknown) => node is Node & {type: Condition}) &
     *   (<Condition extends Props>(test: Condition) => (node: unknown, index?: number | null | undefined, parent?: Parent | null | undefined, context?: unknown) => node is Node & Condition) &
     *   (<Condition extends TestFunction>(test: Condition) => (node: unknown, index?: number | null | undefined, parent?: Parent | null | undefined, context?: unknown) => node is Node & Predicate<Condition, Node>) &
     *   ((test?: null | undefined) => (node?: unknown, index?: number | null | undefined, parent?: Parent | null | undefined, context?: unknown) => node is Node) &
     *   ((test?: Test) => Check)
     * )}
     */
  /**
  * @param {Test} [test]
  * @returns {Check}
  */
  function(a420) {
    if (a420 == null)
      return ok;
    if (typeof a420 == "function")
      return castFactory(a420);
    if (typeof a420 == "object")
      return Array.isArray(a420) ? anyFactory(a420) : propsFactory(a420);
    if (typeof a420 == "string")
      return typeFactory(a420);
    throw new Error("Expected function, string, or object as test");
  }
);
function anyFactory(a420) {
  const u2 = [];
  let c = -1;
  for (; ++c < a420.length; )
    u2[c] = convert(a420[c]);
  return castFactory(l2);
  function l2(...v2) {
    let p2 = -1;
    for (; ++p2 < u2.length; )
      if (u2[p2].apply(this, v2))
        return true;
    return false;
  }
}
function propsFactory(a420) {
  const u2 = (
    /** @type {Record<string, unknown>} */
    a420
  );
  return castFactory(c);
  function c(l2) {
    const v2 = (
      /** @type {Record<string, unknown>} */
      /** @type {unknown} */
      l2
    );
    let p2;
    for (p2 in a420)
      if (v2[p2] !== u2[p2])
        return false;
    return true;
  }
}
function typeFactory(a420) {
  return castFactory(u2);
  function u2(c) {
    return c && c.type === a420;
  }
}
function castFactory(a420) {
  return u2;
  function u2(c, l2, v2) {
    return !!(looksLikeANode(c) && a420.call(this, c, typeof l2 == "number" ? l2 : void 0, v2 || void 0));
  }
}
function ok() {
  return true;
}
function looksLikeANode(a420) {
  return a420 !== null && typeof a420 == "object" && "type" in a420;
}
const empty$3 = [], CONTINUE = true, EXIT = false, SKIP = "skip";
function visitParents(a420, u2, c, l2) {
  let v2;
  typeof u2 == "function" && typeof c != "function" ? (l2 = c, c = u2) : v2 = u2;
  const p2 = convert(v2), _ = l2 ? -1 : 1;
  I2(a420, void 0, [])();
  function I2(P2, $, F2) {
    const H2 = (
      /** @type {Record<string, unknown>} */
      P2 && typeof P2 == "object" ? P2 : {}
    );
    if (typeof H2.type == "string") {
      const ee2 = (
        // `hast`
        typeof H2.tagName == "string" ? H2.tagName : (
          // `xast`
          typeof H2.name == "string" ? H2.name : void 0
        )
      );
      Object.defineProperty(j, "name", { value: "node (" + (P2.type + (ee2 ? "<" + ee2 + ">" : "")) + ")" });
    }
    return j;
    function j() {
      let ee2 = empty$3, X2, ie2, Q2;
      if ((!u2 || p2(P2, $, F2[F2.length - 1] || void 0)) && (ee2 = toResult(c(P2, F2)), ee2[0] === EXIT))
        return ee2;
      if ("children" in P2 && P2.children) {
        const ne2 = (
          /** @type {UnistParent} */
          P2
        );
        if (ne2.children && ee2[0] !== SKIP)
          for (ie2 = (l2 ? ne2.children.length : -1) + _, Q2 = F2.concat(ne2); ie2 > -1 && ie2 < ne2.children.length; ) {
            const Z2 = ne2.children[ie2];
            if (X2 = I2(Z2, ie2, Q2)(), X2[0] === EXIT)
              return X2;
            ie2 = typeof X2[1] == "number" ? X2[1] : ie2 + _;
          }
      }
      return ee2;
    }
  }
}
function toResult(a420) {
  return Array.isArray(a420) ? a420 : typeof a420 == "number" ? [CONTINUE, a420] : a420 == null ? empty$3 : [a420];
}
function visit(a420, u2, c, l2) {
  let v2, p2, _;
  typeof u2 == "function" && typeof c != "function" ? (p2 = void 0, _ = u2, v2 = c) : (p2 = u2, _ = c, v2 = l2), visitParents(a420, p2, I2, v2);
  function I2(P2, $) {
    const F2 = $[$.length - 1], H2 = F2 ? F2.children.indexOf(P2) : void 0;
    return _(P2, H2, F2);
  }
}
var fastDeepEqual = function a(u2, c) {
  if (u2 === c)
    return true;
  if (u2 && c && typeof u2 == "object" && typeof c == "object") {
    if (u2.constructor !== c.constructor)
      return false;
    var l2, v2, p2;
    if (Array.isArray(u2)) {
      if (l2 = u2.length, l2 != c.length)
        return false;
      for (v2 = l2; v2-- !== 0; )
        if (!a(u2[v2], c[v2]))
          return false;
      return true;
    }
    if (u2.constructor === RegExp)
      return u2.source === c.source && u2.flags === c.flags;
    if (u2.valueOf !== Object.prototype.valueOf)
      return u2.valueOf() === c.valueOf();
    if (u2.toString !== Object.prototype.toString)
      return u2.toString() === c.toString();
    if (p2 = Object.keys(u2), l2 = p2.length, l2 !== Object.keys(c).length)
      return false;
    for (v2 = l2; v2-- !== 0; )
      if (!Object.prototype.hasOwnProperty.call(c, p2[v2]))
        return false;
    for (v2 = l2; v2-- !== 0; ) {
      var _ = p2[v2];
      if (!a(u2[_], c[_]))
        return false;
    }
    return true;
  }
  return u2 !== u2 && c !== c;
};
const deepEqual = /* @__PURE__ */ getDefaultExportFromCjs$2(fastDeepEqual), generateId = () => (Math.random() * 1e20).toString(36), insertAt$1 = (a420 = 0, u2, c, l2 = false) => [...c.slice(0, a420), ...[u2].flat(), ...c.slice(l2 ? a420 + 1 : a420)], replaceItem$1 = (a420, u2, c) => {
  a420 = typeof a420 == "function" ? a420 : (v2) => v2 === a420;
  const l2 = c.findIndex(a420);
  return l2 < 0 ? c : insertAt$1(l2, u2, c, true);
}, swapIndex = (a420, u2, c) => {
  if (!c[a420] || !c[u2])
    return c;
  c = [...c];
  const l2 = c[a420];
  return c[a420] = c[u2], c[u2] = l2, c;
}, swapItems = (a420, u2, c) => {
  const l2 = c.findIndex((p2) => p2 === a420), v2 = c.findIndex((p2) => p2 === u2);
  return l2 < 0 || v2 < 0 ? c : swapIndex(l2, v2, c);
}, toDataNode$1 = (a420) => a420 ? { id: a420.id, props: a420.props, childIds: (a420.children || []).map((u2) => u2.id) } : null, toSceneNode = (a420) => ({ id: a420.id, props: a420.props, children: [] }), toSceneTree = (a420, u2) => {
  const c = a420.find((v2) => v2.id === u2);
  if (!c)
    return null;
  const l2 = c.childIds;
  return { id: c.id, props: c.props, children: l2.map((v2) => toSceneTree(a420, v2)).filter(Boolean) };
}, forEachDown$1 = (a420, u2) => {
  u2(a420), (a420.children || []).forEach((l2) => forEachDown$1(l2, (v2, p2) => {
    u2(v2, p2 || a420);
  }));
}, mapDown = (a420, u2) => {
  const c = u2(a420);
  return { ...c, children: ((c == null ? void 0 : c.children) || (a420 == null ? void 0 : a420.children) || []).map((l2) => mapDown(l2, u2)) };
}, mapDownAsync = async (a420, u2) => {
  const c = (a420 == null ? void 0 : a420.children) ?? [];
  return { ...await u2(a420), children: await Promise.all(c.map((l2) => mapDownAsync(l2, u2))) };
}, getElementAttributes = (a420) => Object.values(a420.attributes).reduce((u2, c) => ({ ...u2, [c.name]: c.value }), {}), asArray = (a420) => isArray$5(a420) ? a420 : [a420], sizeToNum = (a420, u2) => typeof a420 == "number" ? a420 : typeof a420 == "string" ? a420.indexOf("%") > -1 ? parseFloat(a420) / 100 * u2 : parseFloat(a420) : 0, asSize = (a420) => typeof a420 == "number" ? a420 + "px" : typeof a420 == "string" ? a420.indexOf("%") > -1 ? parseFloat(a420) + "%" : a420 : "0px", asDuration = (a420) => typeof a420 == "string" ? a420 : typeof a420 == "number" ? a420 + "ms" : "0ms", find$2 = (a420, u2) => {
  if (!a420)
    throw new Error("requires a tree to search");
  if (!u2)
    throw new Error("requires a condition");
  const c = iteratee(u2);
  let l2;
  return visit(a420, function(v2) {
    if (c(v2))
      return l2 = v2, false;
  }), l2;
}, findAll = (a420, u2) => {
  if (!a420)
    throw new Error("requires a tree to search");
  if (!u2)
    throw new Error("requires a condition");
  const c = iteratee(u2);
  let l2 = [];
  return visit(a420, function(v2) {
    c(v2) && l2.push(v2);
  }), l2;
}, values$1 = (a420) => Array.from(a420.values()), Logic = /* @__PURE__ */ Object.freeze(/* @__PURE__ */ Object.defineProperty({ __proto__: null, asArray, asDuration, asSize, camelCase: camelCase$3, cloneDeep: cloneDeep$1, debounce: debounce$1, deepEqual, every: every$1, find: find$2, findAll, forEachDown: forEachDown$1, generateId, getElementAttributes, insertAt: insertAt$1, isArray: isArray$5, isEqual, kebabCase: kebabCase$1, mapDown, mapDownAsync, omit, pick: pick$1, pull: pull$1, replaceItem: replaceItem$1, sizeToNum, sortBy: sortBy$1, swapIndex, swapItems, toDataNode: toDataNode$1, toSceneNode, toSceneTree, values: values$1 }, Symbol.toStringTag, { value: "Module" }));
var lib$2 = {};
function e(a420) {
  this.message = a420;
}
e.prototype = new Error(), e.prototype.name = "InvalidCharacterError";
var r$2 = typeof window < "u" && window.atob && window.atob.bind(window) || function(a420) {
  var u2 = String(a420).replace(/=+$/, "");
  if (u2.length % 4 == 1)
    throw new e("'atob' failed: The string to be decoded is not correctly encoded.");
  for (var c, l2, v2 = 0, p2 = 0, _ = ""; l2 = u2.charAt(p2++); ~l2 && (c = v2 % 4 ? 64 * c + l2 : l2, v2++ % 4) ? _ += String.fromCharCode(255 & c >> (-2 * v2 & 6)) : 0)
    l2 = "ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/=".indexOf(l2);
  return _;
};
function t(a420) {
  var u2 = a420.replace(/-/g, "+").replace(/_/g, "/");
  switch (u2.length % 4) {
    case 0:
      break;
    case 2:
      u2 += "==";
      break;
    case 3:
      u2 += "=";
      break;
    default:
      throw "Illegal base64url string!";
  }
  try {
    return function(c) {
      return decodeURIComponent(r$2(c).replace(/(.)/g, function(l2, v2) {
        var p2 = v2.charCodeAt(0).toString(16).toUpperCase();
        return p2.length < 2 && (p2 = "0" + p2), "%" + p2;
      }));
    }(u2);
  } catch {
    return r$2(u2);
  }
}
function n(a420) {
  this.message = a420;
}
function o(a420, u2) {
  if (typeof a420 != "string")
    throw new n("Invalid token specified");
  var c = (u2 = u2 || {}).header === true ? 0 : 1;
  try {
    return JSON.parse(t(a420.split(".")[c]));
  } catch (l2) {
    throw new n("Invalid token specified: " + l2.message);
  }
}
n.prototype = new Error(), n.prototype.name = "InvalidTokenError";
const jwtDecode_esm = /* @__PURE__ */ Object.freeze(/* @__PURE__ */ Object.defineProperty({ __proto__: null, InvalidTokenError: n, default: o }, Symbol.toStringTag, { value: "Module" })), require$$0$3 = /* @__PURE__ */ getAugmentedNamespace(jwtDecode_esm);
var getRandomValues, rnds8 = new Uint8Array(16);
function rng() {
  if (!getRandomValues && (getRandomValues = typeof crypto < "u" && crypto.getRandomValues && crypto.getRandomValues.bind(crypto) || typeof msCrypto < "u" && typeof msCrypto.getRandomValues == "function" && msCrypto.getRandomValues.bind(msCrypto), !getRandomValues))
    throw new Error("crypto.getRandomValues() not supported. See https://github.com/uuidjs/uuid#getrandomvalues-not-supported");
  return getRandomValues(rnds8);
}
const REGEX = /^(?:[0-9a-f]{8}-[0-9a-f]{4}-[1-5][0-9a-f]{3}-[89ab][0-9a-f]{3}-[0-9a-f]{12}|00000000-0000-0000-0000-000000000000)$/i;
function validate$2(a420) {
  return typeof a420 == "string" && REGEX.test(a420);
}
var byteToHex = [];
for (var i$2 = 0; i$2 < 256; ++i$2)
  byteToHex.push((i$2 + 256).toString(16).substr(1));
function stringify(a420) {
  var u2 = arguments.length > 1 && arguments[1] !== void 0 ? arguments[1] : 0, c = (byteToHex[a420[u2 + 0]] + byteToHex[a420[u2 + 1]] + byteToHex[a420[u2 + 2]] + byteToHex[a420[u2 + 3]] + "-" + byteToHex[a420[u2 + 4]] + byteToHex[a420[u2 + 5]] + "-" + byteToHex[a420[u2 + 6]] + byteToHex[a420[u2 + 7]] + "-" + byteToHex[a420[u2 + 8]] + byteToHex[a420[u2 + 9]] + "-" + byteToHex[a420[u2 + 10]] + byteToHex[a420[u2 + 11]] + byteToHex[a420[u2 + 12]] + byteToHex[a420[u2 + 13]] + byteToHex[a420[u2 + 14]] + byteToHex[a420[u2 + 15]]).toLowerCase();
  if (!validate$2(c))
    throw TypeError("Stringified UUID is invalid");
  return c;
}
var _nodeId, _clockseq, _lastMSecs = 0, _lastNSecs = 0;
function v1(a420, u2, c) {
  var l2 = u2 && c || 0, v2 = u2 || new Array(16);
  a420 = a420 || {};
  var p2 = a420.node || _nodeId, _ = a420.clockseq !== void 0 ? a420.clockseq : _clockseq;
  if (p2 == null || _ == null) {
    var I2 = a420.random || (a420.rng || rng)();
    p2 == null && (p2 = _nodeId = [I2[0] | 1, I2[1], I2[2], I2[3], I2[4], I2[5]]), _ == null && (_ = _clockseq = (I2[6] << 8 | I2[7]) & 16383);
  }
  var P2 = a420.msecs !== void 0 ? a420.msecs : Date.now(), $ = a420.nsecs !== void 0 ? a420.nsecs : _lastNSecs + 1, F2 = P2 - _lastMSecs + ($ - _lastNSecs) / 1e4;
  if (F2 < 0 && a420.clockseq === void 0 && (_ = _ + 1 & 16383), (F2 < 0 || P2 > _lastMSecs) && a420.nsecs === void 0 && ($ = 0), $ >= 1e4)
    throw new Error("uuid.v1(): Can't create more than 10M uuids/sec");
  _lastMSecs = P2, _lastNSecs = $, _clockseq = _, P2 += 122192928e5;
  var H2 = ((P2 & 268435455) * 1e4 + $) % 4294967296;
  v2[l2++] = H2 >>> 24 & 255, v2[l2++] = H2 >>> 16 & 255, v2[l2++] = H2 >>> 8 & 255, v2[l2++] = H2 & 255;
  var j = P2 / 4294967296 * 1e4 & 268435455;
  v2[l2++] = j >>> 8 & 255, v2[l2++] = j & 255, v2[l2++] = j >>> 24 & 15 | 16, v2[l2++] = j >>> 16 & 255, v2[l2++] = _ >>> 8 | 128, v2[l2++] = _ & 255;
  for (var ee2 = 0; ee2 < 6; ++ee2)
    v2[l2 + ee2] = p2[ee2];
  return u2 || stringify(v2);
}
function parse$3(a420) {
  if (!validate$2(a420))
    throw TypeError("Invalid UUID");
  var u2, c = new Uint8Array(16);
  return c[0] = (u2 = parseInt(a420.slice(0, 8), 16)) >>> 24, c[1] = u2 >>> 16 & 255, c[2] = u2 >>> 8 & 255, c[3] = u2 & 255, c[4] = (u2 = parseInt(a420.slice(9, 13), 16)) >>> 8, c[5] = u2 & 255, c[6] = (u2 = parseInt(a420.slice(14, 18), 16)) >>> 8, c[7] = u2 & 255, c[8] = (u2 = parseInt(a420.slice(19, 23), 16)) >>> 8, c[9] = u2 & 255, c[10] = (u2 = parseInt(a420.slice(24, 36), 16)) / 1099511627776 & 255, c[11] = u2 / 4294967296 & 255, c[12] = u2 >>> 24 & 255, c[13] = u2 >>> 16 & 255, c[14] = u2 >>> 8 & 255, c[15] = u2 & 255, c;
}
function stringToBytes(a420) {
  a420 = unescape(encodeURIComponent(a420));
  for (var u2 = [], c = 0; c < a420.length; ++c)
    u2.push(a420.charCodeAt(c));
  return u2;
}
var DNS = "6ba7b810-9dad-11d1-80b4-00c04fd430c8", URL$1 = "6ba7b811-9dad-11d1-80b4-00c04fd430c8";
function v35(a420, u2, c) {
  function l2(v2, p2, _, I2) {
    if (typeof v2 == "string" && (v2 = stringToBytes(v2)), typeof p2 == "string" && (p2 = parse$3(p2)), p2.length !== 16)
      throw TypeError("Namespace must be array-like (16 iterable integer values, 0-255)");
    var P2 = new Uint8Array(16 + v2.length);
    if (P2.set(p2), P2.set(v2, p2.length), P2 = c(P2), P2[6] = P2[6] & 15 | u2, P2[8] = P2[8] & 63 | 128, _) {
      I2 = I2 || 0;
      for (var $ = 0; $ < 16; ++$)
        _[I2 + $] = P2[$];
      return _;
    }
    return stringify(P2);
  }
  try {
    l2.name = a420;
  } catch {
  }
  return l2.DNS = DNS, l2.URL = URL$1, l2;
}
function md5$3(a420) {
  if (typeof a420 == "string") {
    var u2 = unescape(encodeURIComponent(a420));
    a420 = new Uint8Array(u2.length);
    for (var c = 0; c < u2.length; ++c)
      a420[c] = u2.charCodeAt(c);
  }
  return md5ToHexEncodedArray(wordsToMd5(bytesToWords(a420), a420.length * 8));
}
function md5ToHexEncodedArray(a420) {
  for (var u2 = [], c = a420.length * 32, l2 = "0123456789abcdef", v2 = 0; v2 < c; v2 += 8) {
    var p2 = a420[v2 >> 5] >>> v2 % 32 & 255, _ = parseInt(l2.charAt(p2 >>> 4 & 15) + l2.charAt(p2 & 15), 16);
    u2.push(_);
  }
  return u2;
}
function getOutputLength(a420) {
  return (a420 + 64 >>> 9 << 4) + 14 + 1;
}
function wordsToMd5(a420, u2) {
  a420[u2 >> 5] |= 128 << u2 % 32, a420[getOutputLength(u2) - 1] = u2;
  for (var c = 1732584193, l2 = -271733879, v2 = -1732584194, p2 = 271733878, _ = 0; _ < a420.length; _ += 16) {
    var I2 = c, P2 = l2, $ = v2, F2 = p2;
    c = md5ff(c, l2, v2, p2, a420[_], 7, -680876936), p2 = md5ff(p2, c, l2, v2, a420[_ + 1], 12, -389564586), v2 = md5ff(v2, p2, c, l2, a420[_ + 2], 17, 606105819), l2 = md5ff(l2, v2, p2, c, a420[_ + 3], 22, -1044525330), c = md5ff(c, l2, v2, p2, a420[_ + 4], 7, -176418897), p2 = md5ff(p2, c, l2, v2, a420[_ + 5], 12, 1200080426), v2 = md5ff(v2, p2, c, l2, a420[_ + 6], 17, -1473231341), l2 = md5ff(l2, v2, p2, c, a420[_ + 7], 22, -45705983), c = md5ff(c, l2, v2, p2, a420[_ + 8], 7, 1770035416), p2 = md5ff(p2, c, l2, v2, a420[_ + 9], 12, -1958414417), v2 = md5ff(v2, p2, c, l2, a420[_ + 10], 17, -42063), l2 = md5ff(l2, v2, p2, c, a420[_ + 11], 22, -1990404162), c = md5ff(c, l2, v2, p2, a420[_ + 12], 7, 1804603682), p2 = md5ff(p2, c, l2, v2, a420[_ + 13], 12, -40341101), v2 = md5ff(v2, p2, c, l2, a420[_ + 14], 17, -1502002290), l2 = md5ff(l2, v2, p2, c, a420[_ + 15], 22, 1236535329), c = md5gg(c, l2, v2, p2, a420[_ + 1], 5, -165796510), p2 = md5gg(p2, c, l2, v2, a420[_ + 6], 9, -1069501632), v2 = md5gg(v2, p2, c, l2, a420[_ + 11], 14, 643717713), l2 = md5gg(l2, v2, p2, c, a420[_], 20, -373897302), c = md5gg(c, l2, v2, p2, a420[_ + 5], 5, -701558691), p2 = md5gg(p2, c, l2, v2, a420[_ + 10], 9, 38016083), v2 = md5gg(v2, p2, c, l2, a420[_ + 15], 14, -660478335), l2 = md5gg(l2, v2, p2, c, a420[_ + 4], 20, -405537848), c = md5gg(c, l2, v2, p2, a420[_ + 9], 5, 568446438), p2 = md5gg(p2, c, l2, v2, a420[_ + 14], 9, -1019803690), v2 = md5gg(v2, p2, c, l2, a420[_ + 3], 14, -187363961), l2 = md5gg(l2, v2, p2, c, a420[_ + 8], 20, 1163531501), c = md5gg(c, l2, v2, p2, a420[_ + 13], 5, -1444681467), p2 = md5gg(p2, c, l2, v2, a420[_ + 2], 9, -51403784), v2 = md5gg(v2, p2, c, l2, a420[_ + 7], 14, 1735328473), l2 = md5gg(l2, v2, p2, c, a420[_ + 12], 20, -1926607734), c = md5hh(c, l2, v2, p2, a420[_ + 5], 4, -378558), p2 = md5hh(p2, c, l2, v2, a420[_ + 8], 11, -2022574463), v2 = md5hh(v2, p2, c, l2, a420[_ + 11], 16, 1839030562), l2 = md5hh(l2, v2, p2, c, a420[_ + 14], 23, -35309556), c = md5hh(c, l2, v2, p2, a420[_ + 1], 4, -1530992060), p2 = md5hh(p2, c, l2, v2, a420[_ + 4], 11, 1272893353), v2 = md5hh(v2, p2, c, l2, a420[_ + 7], 16, -155497632), l2 = md5hh(l2, v2, p2, c, a420[_ + 10], 23, -1094730640), c = md5hh(c, l2, v2, p2, a420[_ + 13], 4, 681279174), p2 = md5hh(p2, c, l2, v2, a420[_], 11, -358537222), v2 = md5hh(v2, p2, c, l2, a420[_ + 3], 16, -722521979), l2 = md5hh(l2, v2, p2, c, a420[_ + 6], 23, 76029189), c = md5hh(c, l2, v2, p2, a420[_ + 9], 4, -640364487), p2 = md5hh(p2, c, l2, v2, a420[_ + 12], 11, -421815835), v2 = md5hh(v2, p2, c, l2, a420[_ + 15], 16, 530742520), l2 = md5hh(l2, v2, p2, c, a420[_ + 2], 23, -995338651), c = md5ii(c, l2, v2, p2, a420[_], 6, -198630844), p2 = md5ii(p2, c, l2, v2, a420[_ + 7], 10, 1126891415), v2 = md5ii(v2, p2, c, l2, a420[_ + 14], 15, -1416354905), l2 = md5ii(l2, v2, p2, c, a420[_ + 5], 21, -57434055), c = md5ii(c, l2, v2, p2, a420[_ + 12], 6, 1700485571), p2 = md5ii(p2, c, l2, v2, a420[_ + 3], 10, -1894986606), v2 = md5ii(v2, p2, c, l2, a420[_ + 10], 15, -1051523), l2 = md5ii(l2, v2, p2, c, a420[_ + 1], 21, -2054922799), c = md5ii(c, l2, v2, p2, a420[_ + 8], 6, 1873313359), p2 = md5ii(p2, c, l2, v2, a420[_ + 15], 10, -30611744), v2 = md5ii(v2, p2, c, l2, a420[_ + 6], 15, -1560198380), l2 = md5ii(l2, v2, p2, c, a420[_ + 13], 21, 1309151649), c = md5ii(c, l2, v2, p2, a420[_ + 4], 6, -145523070), p2 = md5ii(p2, c, l2, v2, a420[_ + 11], 10, -1120210379), v2 = md5ii(v2, p2, c, l2, a420[_ + 2], 15, 718787259), l2 = md5ii(l2, v2, p2, c, a420[_ + 9], 21, -343485551), c = safeAdd(c, I2), l2 = safeAdd(l2, P2), v2 = safeAdd(v2, $), p2 = safeAdd(p2, F2);
  }
  return [c, l2, v2, p2];
}
function bytesToWords(a420) {
  if (a420.length === 0)
    return [];
  for (var u2 = a420.length * 8, c = new Uint32Array(getOutputLength(u2)), l2 = 0; l2 < u2; l2 += 8)
    c[l2 >> 5] |= (a420[l2 / 8] & 255) << l2 % 32;
  return c;
}
function safeAdd(a420, u2) {
  var c = (a420 & 65535) + (u2 & 65535), l2 = (a420 >> 16) + (u2 >> 16) + (c >> 16);
  return l2 << 16 | c & 65535;
}
function bitRotateLeft(a420, u2) {
  return a420 << u2 | a420 >>> 32 - u2;
}
function md5cmn(a420, u2, c, l2, v2, p2) {
  return safeAdd(bitRotateLeft(safeAdd(safeAdd(u2, a420), safeAdd(l2, p2)), v2), c);
}
function md5ff(a420, u2, c, l2, v2, p2, _) {
  return md5cmn(u2 & c | ~u2 & l2, a420, u2, v2, p2, _);
}
function md5gg(a420, u2, c, l2, v2, p2, _) {
  return md5cmn(u2 & l2 | c & ~l2, a420, u2, v2, p2, _);
}
function md5hh(a420, u2, c, l2, v2, p2, _) {
  return md5cmn(u2 ^ c ^ l2, a420, u2, v2, p2, _);
}
function md5ii(a420, u2, c, l2, v2, p2, _) {
  return md5cmn(c ^ (u2 | ~l2), a420, u2, v2, p2, _);
}
var v3 = v35("v3", 48, md5$3);
const v3$1 = v3;
function v4(a420, u2, c) {
  a420 = a420 || {};
  var l2 = a420.random || (a420.rng || rng)();
  if (l2[6] = l2[6] & 15 | 64, l2[8] = l2[8] & 63 | 128, u2) {
    c = c || 0;
    for (var v2 = 0; v2 < 16; ++v2)
      u2[c + v2] = l2[v2];
    return u2;
  }
  return stringify(l2);
}
function f$1(a420, u2, c, l2) {
  switch (a420) {
    case 0:
      return u2 & c ^ ~u2 & l2;
    case 1:
      return u2 ^ c ^ l2;
    case 2:
      return u2 & c ^ u2 & l2 ^ c & l2;
    case 3:
      return u2 ^ c ^ l2;
  }
}
function ROTL(a420, u2) {
  return a420 << u2 | a420 >>> 32 - u2;
}
function sha1$1(a420) {
  var u2 = [1518500249, 1859775393, 2400959708, 3395469782], c = [1732584193, 4023233417, 2562383102, 271733878, 3285377520];
  if (typeof a420 == "string") {
    var l2 = unescape(encodeURIComponent(a420));
    a420 = [];
    for (var v2 = 0; v2 < l2.length; ++v2)
      a420.push(l2.charCodeAt(v2));
  } else
    Array.isArray(a420) || (a420 = Array.prototype.slice.call(a420));
  a420.push(128);
  for (var p2 = a420.length / 4 + 2, _ = Math.ceil(p2 / 16), I2 = new Array(_), P2 = 0; P2 < _; ++P2) {
    for (var $ = new Uint32Array(16), F2 = 0; F2 < 16; ++F2)
      $[F2] = a420[P2 * 64 + F2 * 4] << 24 | a420[P2 * 64 + F2 * 4 + 1] << 16 | a420[P2 * 64 + F2 * 4 + 2] << 8 | a420[P2 * 64 + F2 * 4 + 3];
    I2[P2] = $;
  }
  I2[_ - 1][14] = (a420.length - 1) * 8 / Math.pow(2, 32), I2[_ - 1][14] = Math.floor(I2[_ - 1][14]), I2[_ - 1][15] = (a420.length - 1) * 8 & 4294967295;
  for (var H2 = 0; H2 < _; ++H2) {
    for (var j = new Uint32Array(80), ee2 = 0; ee2 < 16; ++ee2)
      j[ee2] = I2[H2][ee2];
    for (var X2 = 16; X2 < 80; ++X2)
      j[X2] = ROTL(j[X2 - 3] ^ j[X2 - 8] ^ j[X2 - 14] ^ j[X2 - 16], 1);
    for (var ie2 = c[0], Q2 = c[1], ne2 = c[2], Z2 = c[3], de2 = c[4], pe2 = 0; pe2 < 80; ++pe2) {
      var le2 = Math.floor(pe2 / 20), be2 = ROTL(ie2, 5) + f$1(le2, Q2, ne2, Z2) + de2 + u2[le2] + j[pe2] >>> 0;
      de2 = Z2, Z2 = ne2, ne2 = ROTL(Q2, 30) >>> 0, Q2 = ie2, ie2 = be2;
    }
    c[0] = c[0] + ie2 >>> 0, c[1] = c[1] + Q2 >>> 0, c[2] = c[2] + ne2 >>> 0, c[3] = c[3] + Z2 >>> 0, c[4] = c[4] + de2 >>> 0;
  }
  return [c[0] >> 24 & 255, c[0] >> 16 & 255, c[0] >> 8 & 255, c[0] & 255, c[1] >> 24 & 255, c[1] >> 16 & 255, c[1] >> 8 & 255, c[1] & 255, c[2] >> 24 & 255, c[2] >> 16 & 255, c[2] >> 8 & 255, c[2] & 255, c[3] >> 24 & 255, c[3] >> 16 & 255, c[3] >> 8 & 255, c[3] & 255, c[4] >> 24 & 255, c[4] >> 16 & 255, c[4] >> 8 & 255, c[4] & 255];
}
var v5 = v35("v5", 80, sha1$1);
const v5$1 = v5, nil = "00000000-0000-0000-0000-000000000000";
function version$5(a420) {
  if (!validate$2(a420))
    throw TypeError("Invalid UUID");
  return parseInt(a420.substr(14, 1), 16);
}
const esmBrowser = /* @__PURE__ */ Object.freeze(/* @__PURE__ */ Object.defineProperty({ __proto__: null, NIL: nil, parse: parse$3, stringify, v1, v3: v3$1, v4, v5: v5$1, validate: validate$2, version: version$5 }, Symbol.toStringTag, { value: "Module" })), require$$1$4 = /* @__PURE__ */ getAugmentedNamespace(esmBrowser);
let EnhancedMap$1 = class extends Map {
  /**
  * If key has a mapping already returns the currently associated value. If
  * there is no mapping, calls the computer which must return a value V.
  * The value is then stored for given key and returned.
  * @param key Key
  * @param computer Computer which is called only if key has no mapping yet.
  * @return Existing value if the key already existed, or the newly computed value.
  */
  computeIfAbsent(u2, c) {
    if (this.has(u2))
      return this.get(u2);
    const l2 = c(u2);
    return this.set(u2, l2), l2;
  }
  /**
  * If the key exists already calls given computer, if the key does not exist
  * this method does nothing.
  *
  * The computer is called with current key and current value associated. The
  * computer can return a (new) value V or undefined. When undefined is returned
  * the key is removed from this map, when a V is returned the key is updated
  * with the new value V.
  * @param key Key
  * @param computer Computer which is called only if the key has a mapping already
  * @return Undefined if the key has no mapping, otherwise the value returned from computer
  */
  computeIfPresent(u2, c) {
    const l2 = this.get(u2);
    if (l2 === void 0)
      return;
    const v2 = c(u2, l2);
    return v2 !== void 0 ? this.set(u2, v2) : this.delete(u2), v2;
  }
  /**
  * Computes a value for given key, the computer can return a value V (in which case the map
  * will set the value for given key), if it returns undefined the mapping for key K will be
  * removed.
  * @param key Key to compute
  * @param computer Computer which is called, note that the currentValue argument contains the existing
  *                 value or is undefined when no mapping exists for the key.
  * @return The newly computed value
  */
  compute(u2, c) {
    const l2 = this.get(u2), v2 = c(u2, l2);
    return v2 ? this.set(u2, v2) : this.delete(u2), v2;
  }
};
var InternalLogLevel$1;
(function(a420) {
  a420[a420.Trace = 0] = "Trace", a420[a420.Debug = 1] = "Debug", a420[a420.Info = 2] = "Info", a420[a420.Warn = 3] = "Warn", a420[a420.Error = 4] = "Error";
})(InternalLogLevel$1 || (InternalLogLevel$1 = {}));
function getInternalLogger$1(a420) {
  return provider$1.getLogger(a420);
}
const INTERNAL_LOGGING_SETTINGS$1 = {
  /**
  * Changes the log level for the internal logging (for all new and existing loggers)
  * @param level New log level
  */
  setInternalLogLevel: (a420) => provider$1.changeLogLevel(a420),
  /**
  * Changes where messages are written to for all new and existing loggers),
  * by default they are written to the console.
  * @param fnOutput Function to write messages to
  */
  setOutput: (a420) => provider$1.changeOutput(a420),
  /**
  * Resets the log level and output back to defaults (level to error and writing to console)
  * for all new and existing loggers.
  */
  reset: () => provider$1.reset()
};
let InternalLoggerImpl$1 = class {
  constructor(u2, c, l2) {
    this._name = u2, this._level = c, this._fnOutput = l2;
  }
  trace(u2) {
    this.log(InternalLogLevel$1.Trace, u2);
  }
  debug(u2) {
    this.log(InternalLogLevel$1.Debug, u2);
  }
  error(u2, c) {
    this.log(InternalLogLevel$1.Error, u2, c);
  }
  info(u2) {
    this.log(InternalLogLevel$1.Info, u2);
  }
  warn(u2, c) {
    this.log(InternalLogLevel$1.Warn, u2, c);
  }
  setLevel(u2) {
    this._level = u2;
  }
  setOutput(u2) {
    this._fnOutput = u2;
  }
  log(u2, c, l2) {
    this._level > u2 || this._fnOutput(`${InternalLogLevel$1[this._level].toString()} <INTERNAL LOGGER> ${this._name} ${c()}${l2 ? `
` + l2.stack : ""}`);
  }
}, InternalProviderImpl$1 = class Kt {
  constructor() {
    this._loggers = new EnhancedMap$1(), this._logLevel = InternalLogLevel$1.Error, this._fnOutput = Kt.logConsole;
  }
  getLogger(u2) {
    return this._loggers.computeIfAbsent(u2, (c) => new InternalLoggerImpl$1(c, this._logLevel, this._fnOutput));
  }
  changeLogLevel(u2) {
    this._logLevel = u2, this._loggers.forEach((c) => c.setLevel(u2));
  }
  changeOutput(u2) {
    this._fnOutput = u2, this._loggers.forEach((c) => c.setOutput(this._fnOutput));
  }
  reset() {
    this.changeLogLevel(InternalLogLevel$1.Error), this._fnOutput = Kt.logConsole, this._loggers.forEach((u2) => u2.setOutput(this._fnOutput));
  }
  static logConsole(u2) {
    console && console.log && console.log(u2);
  }
};
const provider$1 = new InternalProviderImpl$1();
var InternalLogger$1 = /* @__PURE__ */ Object.freeze({ __proto__: null, get InternalLogLevel() {
  return InternalLogLevel$1;
}, getInternalLogger: getInternalLogger$1, INTERNAL_LOGGING_SETTINGS: INTERNAL_LOGGING_SETTINGS$1 }), LogLevel$2;
(function(a420) {
  a420[a420.Trace = 0] = "Trace", a420[a420.Debug = 1] = "Debug", a420[a420.Info = 2] = "Info", a420[a420.Warn = 3] = "Warn", a420[a420.Error = 4] = "Error", a420[a420.Fatal = 5] = "Fatal";
})(LogLevel$2 || (LogLevel$2 = {}));
(function(a420) {
  function u2(c) {
    switch (c.toLowerCase()) {
      case "trace":
        return a420.Trace;
      case "debug":
        return a420.Debug;
      case "info":
        return a420.Info;
      case "warn":
        return a420.Warn;
      case "error":
        return a420.Error;
      case "fatal":
        return a420.Fatal;
      default:
        return;
    }
  }
  a420.toLogLevel = u2;
})(LogLevel$2 || (LogLevel$2 = {}));
let CoreLoggerImpl$1 = class Jn {
  constructor(u2) {
    this._runtime = u2;
  }
  get id() {
    return this._runtime.id;
  }
  get logLevel() {
    return this._runtime.level;
  }
  get runtimeSettings() {
    return Object.assign({}, this._runtime);
  }
  set runtimeSettings(u2) {
    this._runtime = u2;
  }
  trace(u2, ...c) {
    this.logMessage(LogLevel$2.Trace, u2, c);
  }
  debug(u2, ...c) {
    this.logMessage(LogLevel$2.Debug, u2, c);
  }
  info(u2, ...c) {
    this.logMessage(LogLevel$2.Info, u2, c);
  }
  warn(u2, ...c) {
    this.logMessage(LogLevel$2.Warn, u2, c);
  }
  error(u2, ...c) {
    this.logMessage(LogLevel$2.Error, u2, c);
  }
  fatal(u2, ...c) {
    this.logMessage(LogLevel$2.Fatal, u2, c);
  }
  logMessage(u2, c, l2) {
    if (this._runtime.level > u2)
      return;
    const v2 = Date.now(), p2 = typeof c == "string" ? c : c(), _ = Jn.getErrorAndArgs(l2);
    switch (this._runtime.channel.type) {
      case "RawLogChannel":
        this._runtime.channel.write({ message: p2, exception: _.error, args: _.args, timeInMillis: v2, level: u2, logNames: this._runtime.name }, this._runtime.argumentFormatter);
        return;
      case "LogChannel":
        this._runtime.channel.write(this.createLogMessage(p2, u2, _, v2));
        break;
    }
  }
  formatArgValue(u2) {
    try {
      return this._runtime.argumentFormatter(u2);
    } catch {
      return `>>ARG CONVERT FAILED: '${u2 !== void 0 ? u2.toString() : "undefined"}'<<`;
    }
  }
  createLogMessage(u2, c, l2, v2) {
    let p2;
    const _ = l2.error, I2 = l2.args;
    _ && (p2 = `${_.name}: ${_.message}`, _.stack && (p2 += `@
${_.stack}`));
    const P2 = this._runtime.dateFormatter(v2);
    let $ = LogLevel$2[c].toUpperCase();
    $.length < 5 && ($ += " ");
    const F2 = typeof this._runtime.name == "string" ? this._runtime.name : this._runtime.name.join(", "), H2 = typeof I2 < "u" && I2.length > 0 ? " [" + I2.map((ee2) => this.formatArgValue(ee2)).join(", ") + "]" : "";
    return { message: P2 + " " + $ + " [" + F2 + "] " + u2 + H2, error: p2 };
  }
  static getErrorAndArgs(u2) {
    if (u2.length === 0)
      return {};
    let c, l2;
    const v2 = u2[0];
    if (v2 instanceof Error)
      return c = v2, l2 = u2.length > 1 ? u2.slice(1) : void 0, { error: c, args: l2 };
    if (typeof v2 == "function") {
      const p2 = v2();
      return p2 instanceof Error ? (c = p2, l2 = u2.length > 1 ? u2.slice(1) : void 0, { error: c, args: l2 }) : u2.length === 1 ? Array.isArray(p2) ? { args: p2.length > 0 ? p2 : void 0 } : { args: p2 } : Array.isArray(p2) ? { args: [...p2, ...u2.slice(1)] } : { args: [p2, ...u2.slice(1)] };
    }
    return { args: u2 };
  }
};
function padStart$1(a420, u2, c = " ") {
  return padInternal$1(a420, u2, "start", c);
}
function padEnd$1(a420, u2, c = " ") {
  return padInternal$1(a420, u2, "end", c);
}
function maxLengthStringValueInArray$1(a420) {
  return a420.map((u2) => u2.length).reduce((u2, c) => c > u2 ? c : u2, 0);
}
function padInternal$1(a420, u2, c, l2 = " ") {
  if (u2 <= a420.length)
    return a420;
  if (l2.length > 1)
    throw new Error(`Fill char must be one char exactly, it is: ${l2.length}`);
  const v2 = u2 - a420.length;
  let p2 = "";
  for (let _ = 0; _ < v2; _++)
    p2 += l2;
  return c === "start" ? p2 + a420 : a420 + p2;
}
function formatArgument$1(a420) {
  return a420 === void 0 ? "undefined" : JSON.stringify(a420);
}
function formatDate$1(a420) {
  const u2 = new Date(a420), c = u2.getFullYear(), l2 = padStart$1((u2.getMonth() + 1).toString(), 2, "0"), v2 = padStart$1(u2.getDate().toString(), 2, "0"), p2 = padStart$1(u2.getHours().toString(), 2, "0"), _ = padStart$1(u2.getMinutes().toString(), 2, "0"), I2 = padStart$1(u2.getSeconds().toString(), 2, "0"), P2 = padStart$1(u2.getMilliseconds().toString(), 2, "0");
  return `${c}-${l2}-${v2} ${p2}:${_}:${I2},${P2}`;
}
let ConsoleLogChannel$1 = class {
  constructor() {
    this.type = "LogChannel";
  }
  write(u2) {
    console && console.log && console.log(u2.message + (u2.error ? `
${u2.error}` : ""));
  }
};
var DefaultChannels$1;
(function(a420) {
  function u2() {
    return new ConsoleLogChannel$1();
  }
  a420.createConsoleChannel = u2;
})(DefaultChannels$1 || (DefaultChannels$1 = {}));
let LogProviderImpl$1 = class Wt {
  constructor(u2, c) {
    this._log = getInternalLogger$1("core.impl.LogProviderImpl"), this._name = u2, this._settings = c, this._loggers = new EnhancedMap$1(), this._idToKeyMap = new EnhancedMap$1(), this._globalRuntimeSettings = { level: c.level, channel: c.channel }, this._nextLoggerId = 1, this._log.trace(() => `Created LogProviderImpl with settings: ${JSON.stringify(this._settings)}`);
  }
  get runtimeSettings() {
    return Object.assign(Object.assign({}, this._settings), { level: this._globalRuntimeSettings.level, channel: this._globalRuntimeSettings.channel });
  }
  getLogger(u2) {
    return this.getOrCreateLogger(u2);
  }
  updateLoggerRuntime(u2, c) {
    this._log.debug(() => `Updating logger ${u2.id} runtime settings using: '${JSON.stringify(c)}'`);
    const l2 = this._idToKeyMap.get(u2.id);
    return l2 === void 0 ? (this._log.warn(() => `Cannot update logger with id: ${u2.id}, it was not found.`), false) : (this._loggers.computeIfPresent(l2, (v2, p2) => (p2.runtimeSettings = Wt.mergeRuntimeSettingsIntoLogRuntime(p2.runtimeSettings, c), p2)), true);
  }
  updateRuntimeSettings(u2) {
    this._log.debug(() => `Updating global runtime settings and updating existing loggers runtime settings using: '${JSON.stringify(u2)}'`), this._globalRuntimeSettings = {
      /* It's unclear, but not checking explicitly on undefined here makes the test fail, it makes no sense as level is a number | undefined essentially. */
      level: u2.level !== void 0 ? u2.level : this._globalRuntimeSettings.level,
      channel: u2.channel !== void 0 ? u2.channel : this._globalRuntimeSettings.channel
    }, this._loggers.forEach((c) => c.runtimeSettings = Wt.mergeRuntimeSettingsIntoLogRuntime(c.runtimeSettings, u2));
  }
  /**
  * Removes all state and loggers, it reverts back to as it was after initial construction.
  */
  clear() {
    this._loggers.clear(), this._idToKeyMap.clear(), this._globalRuntimeSettings = Object.assign({}, this._settings), this._nextLoggerId = 1;
  }
  getOrCreateLogger(u2) {
    const c = Wt.createKey(u2), l2 = this._loggers.computeIfAbsent(c, () => {
      const v2 = { level: this._globalRuntimeSettings.level, channel: this._globalRuntimeSettings.channel, id: this.nextLoggerId(), name: u2, argumentFormatter: this._settings.argumentFormatter, dateFormatter: this._settings.dateFormatter };
      return new CoreLoggerImpl$1(v2);
    });
    return this._idToKeyMap.computeIfAbsent(l2.id, () => c), l2;
  }
  nextLoggerId() {
    const u2 = this._name + "_" + this._nextLoggerId;
    return this._nextLoggerId++, u2;
  }
  static mergeRuntimeSettingsIntoLogRuntime(u2, c) {
    return Object.assign(Object.assign({}, u2), {
      /* It's unclear, but not checking explicitly on undefined here makes the test fail, it makes no sense as level is a number | undefined essentially. */
      level: c.level !== void 0 ? c.level : u2.level,
      channel: c.channel !== void 0 ? c.channel : u2.channel
    });
  }
  static createKey(u2) {
    return typeof u2 == "string" ? u2 : u2.join(",");
  }
};
function createLogProvider$1(a420, u2) {
  return new LogProviderImpl$1(a420, u2);
}
var index$4 = /* @__PURE__ */ Object.freeze({ __proto__: null, EnhancedMap: EnhancedMap$1, padStart: padStart$1, padEnd: padEnd$1, maxLengthStringValueInArray: maxLengthStringValueInArray$1 });
class ArrayLogChannel {
  constructor() {
    this._buffer = [], this.type = "LogChannel";
  }
  write(u2) {
    this._buffer.push(u2);
  }
  get logMessages() {
    return this._buffer;
  }
  get messages() {
    return this._buffer.map((u2) => u2.message);
  }
}
class ArrayRawLogChannel {
  constructor() {
    this._buffer = [], this.type = "RawLogChannel";
  }
  write(u2, c) {
    this._buffer.push(u2);
  }
  get messages() {
    return this._buffer.map((u2) => u2.message);
  }
  get errors() {
    return this._buffer.map((u2) => u2.exception);
  }
  get size() {
    return this._buffer.length;
  }
  get rawMessages() {
    return this._buffer;
  }
  clear() {
    this._buffer = [];
  }
}
class TestControlMessage {
  constructor() {
    this._messages = [], this.write = this.write.bind(this);
  }
  get messages() {
    return this._messages;
  }
  write(u2) {
    this._messages.push(u2);
  }
  clear() {
    this._messages = [];
  }
}
var TestClasses = /* @__PURE__ */ Object.freeze({ __proto__: null, ArrayLogChannel, ArrayRawLogChannel, TestControlMessage });
const typescriptLogging_esm = /* @__PURE__ */ Object.freeze(/* @__PURE__ */ Object.defineProperty({ __proto__: null, $internal: InternalLogger$1, $test: TestClasses, get DefaultChannels() {
  return DefaultChannels$1;
}, get LogLevel() {
  return LogLevel$2;
}, createLogProvider: createLogProvider$1, formatArgument: formatArgument$1, formatDate: formatDate$1, util: index$4 }, Symbol.toStringTag, { value: "Module" })), require$$2$2 = /* @__PURE__ */ getAugmentedNamespace(typescriptLogging_esm);
var layoutapi = {}, lib$1 = {}, lib = {}, Metadata = {};
Object.defineProperty(Metadata, "__esModule", { value: true });
Metadata.Metadata = void 0;
Metadata.Metadata = function(u2) {
  const c = /* @__PURE__ */ new Map(), l2 = { set(v2, p2) {
    if (v2 = normalizeKey(v2), Array.isArray(p2)) {
      if (p2.length === 0)
        c.delete(v2);
      else {
        for (const _ of p2)
          validate$1(v2, _);
        c.set(v2, v2.endsWith("-bin") ? p2 : [p2.join(", ")]);
      }
    } else
      validate$1(v2, p2), c.set(v2, [p2]);
    return l2;
  }, append(v2, p2) {
    v2 = normalizeKey(v2), validate$1(v2, p2);
    let _ = c.get(v2);
    return _ == null && (_ = [], c.set(v2, _)), _.push(p2), v2.endsWith("-bin") || c.set(v2, [_.join(", ")]), l2;
  }, delete(v2) {
    v2 = normalizeKey(v2), c.delete(v2);
  }, get(v2) {
    var p2;
    return v2 = normalizeKey(v2), (p2 = c.get(v2)) === null || p2 === void 0 ? void 0 : p2[0];
  }, getAll(v2) {
    var p2;
    return v2 = normalizeKey(v2), (p2 = c.get(v2)) !== null && p2 !== void 0 ? p2 : [];
  }, has(v2) {
    return v2 = normalizeKey(v2), c.has(v2);
  }, [Symbol.iterator]() {
    return c[Symbol.iterator]();
  } };
  if (u2 != null) {
    const v2 = isIterable$1(u2) ? u2 : Object.entries(u2);
    for (const [p2, _] of v2)
      l2.set(p2, _);
  }
  return l2;
};
function normalizeKey(a420) {
  return a420.toLowerCase();
}
function validate$1(a420, u2) {
  if (!/^[0-9a-z_.-]+$/.test(a420))
    throw new Error(`Metadata key '${a420}' contains illegal characters`);
  if (a420.endsWith("-bin")) {
    if (!(u2 instanceof Uint8Array))
      throw new Error(`Metadata key '${a420}' ends with '-bin', thus it must have binary value`);
  } else {
    if (typeof u2 != "string")
      throw new Error(`Metadata key '${a420}' doesn't end with '-bin', thus it must have string value`);
    if (!/^[ -~]*$/.test(u2))
      throw new Error(`Metadata value '${u2}' of key '${a420}' contains illegal characters`);
  }
}
function isIterable$1(a420) {
  return Symbol.iterator in a420;
}
var Status = {};
(function(a420) {
  Object.defineProperty(a420, "__esModule", { value: true }), a420.Status = void 0, function(u2) {
    u2[u2.OK = 0] = "OK", u2[u2.CANCELLED = 1] = "CANCELLED", u2[u2.UNKNOWN = 2] = "UNKNOWN", u2[u2.INVALID_ARGUMENT = 3] = "INVALID_ARGUMENT", u2[u2.DEADLINE_EXCEEDED = 4] = "DEADLINE_EXCEEDED", u2[u2.NOT_FOUND = 5] = "NOT_FOUND", u2[u2.ALREADY_EXISTS = 6] = "ALREADY_EXISTS", u2[u2.PERMISSION_DENIED = 7] = "PERMISSION_DENIED", u2[u2.RESOURCE_EXHAUSTED = 8] = "RESOURCE_EXHAUSTED", u2[u2.FAILED_PRECONDITION = 9] = "FAILED_PRECONDITION", u2[u2.ABORTED = 10] = "ABORTED", u2[u2.OUT_OF_RANGE = 11] = "OUT_OF_RANGE", u2[u2.UNIMPLEMENTED = 12] = "UNIMPLEMENTED", u2[u2.INTERNAL = 13] = "INTERNAL", u2[u2.UNAVAILABLE = 14] = "UNAVAILABLE", u2[u2.DATA_LOSS = 15] = "DATA_LOSS", u2[u2.UNAUTHENTICATED = 16] = "UNAUTHENTICATED";
  }(a420.Status || (a420.Status = {}));
})(Status);
var MethodDescriptor = {};
Object.defineProperty(MethodDescriptor, "__esModule", { value: true });
var CallOptions = {};
Object.defineProperty(CallOptions, "__esModule", { value: true });
var ClientMiddleware = {};
Object.defineProperty(ClientMiddleware, "__esModule", { value: true });
var composeClientMiddleware$1 = {};
Object.defineProperty(composeClientMiddleware$1, "__esModule", { value: true });
composeClientMiddleware$1.composeClientMiddleware = void 0;
function composeClientMiddleware(a420, u2) {
  return (c, l2) => u2({ ...c, next: (v2, p2) => a420({ ...c, request: v2 }, p2) }, l2);
}
composeClientMiddleware$1.composeClientMiddleware = composeClientMiddleware;
var ClientError$1 = {}, cjs = {}, helpers = {};
helpers.__esModule = void 0;
helpers.__esModule = true;
var objectSetPrototypeOfIsDefined = typeof Object.setPrototypeOf == "function", objectGetPrototypeOfIsDefined = typeof Object.getPrototypeOf == "function", objectDefinePropertyIsDefined = typeof Object.defineProperty == "function", objectCreateIsDefined = typeof Object.create == "function", objectHasOwnPropertyIsDefined = typeof Object.prototype.hasOwnProperty == "function", setPrototypeOf = function(u2, c) {
  objectSetPrototypeOfIsDefined ? Object.setPrototypeOf(u2, c) : u2.__proto__ = c;
};
helpers.setPrototypeOf = setPrototypeOf;
var getPrototypeOf$1 = function(u2) {
  return objectGetPrototypeOfIsDefined ? Object.getPrototypeOf(u2) : u2.__proto__ || u2.prototype;
};
helpers.getPrototypeOf = getPrototypeOf$1;
var ie8ObjectDefinePropertyBug = false, defineProperty = function a2(u2, c, l2) {
  if (objectDefinePropertyIsDefined && !ie8ObjectDefinePropertyBug)
    try {
      Object.defineProperty(u2, c, l2);
    } catch {
      ie8ObjectDefinePropertyBug = true, a2(u2, c, l2);
    }
  else
    u2[c] = l2.value;
};
helpers.defineProperty = defineProperty;
var hasOwnProperty$3 = function(u2, c) {
  return objectHasOwnPropertyIsDefined ? u2.hasOwnProperty(u2, c) : u2[c] === void 0;
};
helpers.hasOwnProperty = hasOwnProperty$3;
var objectCreate = function(u2, c) {
  if (objectCreateIsDefined)
    return Object.create(u2, c);
  var l2 = function() {
  };
  l2.prototype = u2;
  var v2 = new l2();
  if (typeof c > "u")
    return v2;
  if (typeof c == "null")
    throw new Error("PropertyDescriptors must not be null.");
  if (typeof c == "object")
    for (var p2 in c)
      hasOwnProperty$3(c, p2) && (v2[p2] = c[p2].value);
  return v2;
};
helpers.objectCreate = objectCreate;
(function(a420) {
  a420.__esModule = void 0, a420.__esModule = true;
  var u2 = helpers, c = u2.setPrototypeOf, l2 = u2.getPrototypeOf, v2 = u2.defineProperty, p2 = u2.objectCreate, _ = new Error().toString() === "[object Error]", I2 = "";
  function P2($) {
    var F2 = this.constructor, H2 = F2.name || function() {
      var Q2 = F2.toString().match(/^function\s*([^\s(]+)/);
      return Q2 === null ? I2 || "Error" : Q2[1];
    }(), j = H2 === "Error", ee2 = j ? I2 : H2, X2 = Error.apply(this, arguments);
    if (c(X2, l2(this)), !(X2 instanceof F2) || !(X2 instanceof P2)) {
      var X2 = this;
      Error.apply(this, arguments), v2(X2, "message", { configurable: true, enumerable: false, value: $, writable: true });
    }
    if (v2(X2, "name", { configurable: true, enumerable: false, value: ee2, writable: true }), Error.captureStackTrace && Error.captureStackTrace(X2, j ? P2 : F2), X2.stack === void 0) {
      var ie2 = new Error($);
      ie2.name = X2.name, X2.stack = ie2.stack;
    }
    return _ && v2(X2, "toString", { configurable: true, enumerable: false, value: function() {
      return (this.name || "Error") + (typeof this.message > "u" ? "" : ": " + this.message);
    }, writable: true }), X2;
  }
  I2 = P2.name || "ExtendableError", P2.prototype = p2(Error.prototype, { constructor: { value: Error, enumerable: false, writable: true, configurable: true } }), a420.ExtendableError = P2, a420.default = a420.ExtendableError;
})(cjs);
Object.defineProperty(ClientError$1, "__esModule", { value: true });
ClientError$1.ClientError = void 0;
const ts_error_1$1 = cjs, Status_1$1 = Status;
class ClientError extends ts_error_1$1.ExtendableError {
  constructor(u2, c, l2) {
    super(`${u2} ${Status_1$1.Status[c]}: ${l2}`), this.path = u2, this.code = c, this.details = l2, this.name = "ClientError", Object.defineProperty(this, "@@nice-grpc", { value: true }), Object.defineProperty(this, "@@nice-grpc:ClientError", { value: true });
  }
  static [Symbol.hasInstance](u2) {
    return this !== ClientError ? this.prototype.isPrototypeOf(u2) : typeof u2 == "object" && u2 !== null && (u2.constructor === ClientError || u2["@@nice-grpc:ClientError"] === true || u2.name === "ClientError" && u2["@@nice-grpc"] === true);
  }
}
ClientError$1.ClientError = ClientError;
var CallContext = {};
Object.defineProperty(CallContext, "__esModule", { value: true });
var ServerMiddleware = {};
Object.defineProperty(ServerMiddleware, "__esModule", { value: true });
var composeServerMiddleware$1 = {};
Object.defineProperty(composeServerMiddleware$1, "__esModule", { value: true });
composeServerMiddleware$1.composeServerMiddleware = void 0;
function composeServerMiddleware(a420, u2) {
  return (c, l2) => a420({ ...c, next: (v2, p2) => u2({ ...c, request: v2 }, p2) }, l2);
}
composeServerMiddleware$1.composeServerMiddleware = composeServerMiddleware;
var ServerError$1 = {};
Object.defineProperty(ServerError$1, "__esModule", { value: true });
ServerError$1.ServerError = void 0;
const ts_error_1 = cjs, Status_1 = Status;
class ServerError extends ts_error_1.ExtendableError {
  constructor(u2, c) {
    super(`${Status_1.Status[u2]}: ${c}`), this.code = u2, this.details = c, this.name = "ServerError", Object.defineProperty(this, "@@nice-grpc", { value: true }), Object.defineProperty(this, "@@nice-grpc:ServerError", { value: true });
  }
  static [Symbol.hasInstance](u2) {
    return this !== ServerError ? this.prototype.isPrototypeOf(u2) : typeof u2 == "object" && u2 !== null && (u2.constructor === ServerError || u2["@@nice-grpc:ServerError"] === true || u2.name === "ServerError" && u2["@@nice-grpc"] === true);
  }
}
ServerError$1.ServerError = ServerError;
(function(a420) {
  var u2 = commonjsGlobal$1 && commonjsGlobal$1.__createBinding || (Object.create ? function(l2, v2, p2, _) {
    _ === void 0 && (_ = p2);
    var I2 = Object.getOwnPropertyDescriptor(v2, p2);
    (!I2 || ("get" in I2 ? !v2.__esModule : I2.writable || I2.configurable)) && (I2 = { enumerable: true, get: function() {
      return v2[p2];
    } }), Object.defineProperty(l2, _, I2);
  } : function(l2, v2, p2, _) {
    _ === void 0 && (_ = p2), l2[_] = v2[p2];
  }), c = commonjsGlobal$1 && commonjsGlobal$1.__exportStar || function(l2, v2) {
    for (var p2 in l2)
      p2 !== "default" && !Object.prototype.hasOwnProperty.call(v2, p2) && u2(v2, l2, p2);
  };
  Object.defineProperty(a420, "__esModule", { value: true }), c(Metadata, a420), c(Status, a420), c(MethodDescriptor, a420), c(CallOptions, a420), c(ClientMiddleware, a420), c(composeClientMiddleware$1, a420), c(ClientError$1, a420), c(CallContext, a420), c(ServerMiddleware, a420), c(composeServerMiddleware$1, a420), c(ServerError$1, a420);
})(lib);
var serviceDefinitions = {}, grpcWeb = {};
Object.defineProperty(grpcWeb, "__esModule", { value: true });
grpcWeb.isGrpcWebServiceDefinition = grpcWeb.fromGrpcWebServiceDefinition = void 0;
function fromGrpcWebServiceDefinition(a420) {
  const u2 = {};
  for (const [c, l2] of Object.entries(a420)) {
    if (c === "serviceName")
      continue;
    const v2 = l2;
    u2[uncapitalize(c)] = { path: `/${a420.serviceName}/${c}`, requestStream: v2.requestStream, responseStream: v2.responseStream, requestDeserialize: v2.requestType.deserializeBinary, requestSerialize: (p2) => p2.serializeBinary(), responseDeserialize: v2.responseType.deserializeBinary, responseSerialize: (p2) => p2.serializeBinary(), options: {} };
  }
  return u2;
}
grpcWeb.fromGrpcWebServiceDefinition = fromGrpcWebServiceDefinition;
function isGrpcWebServiceDefinition(a420) {
  return "prototype" in a420;
}
grpcWeb.isGrpcWebServiceDefinition = isGrpcWebServiceDefinition;
function uncapitalize(a420) {
  return a420.length === 0 ? a420 : a420[0].toLowerCase() + a420.slice(1);
}
var tsProto = {};
Object.defineProperty(tsProto, "__esModule", { value: true });
tsProto.isTsProtoServiceDefinition = tsProto.fromTsProtoServiceDefinition = void 0;
function fromTsProtoServiceDefinition(a420) {
  const u2 = {};
  for (const [c, l2] of Object.entries(a420.methods)) {
    const v2 = l2.requestType.encode, p2 = l2.requestType.fromPartial, _ = l2.responseType.encode, I2 = l2.responseType.fromPartial;
    u2[c] = { path: `/${a420.fullName}/${l2.name}`, requestStream: l2.requestStream, responseStream: l2.responseStream, requestDeserialize: l2.requestType.decode, requestSerialize: p2 != null ? (P2) => v2(p2(P2)).finish() : (P2) => v2(P2).finish(), responseDeserialize: l2.responseType.decode, responseSerialize: I2 != null ? (P2) => _(I2(P2)).finish() : (P2) => _(P2).finish(), options: l2.options };
  }
  return u2;
}
tsProto.fromTsProtoServiceDefinition = fromTsProtoServiceDefinition;
function isTsProtoServiceDefinition(a420) {
  return "name" in a420 && "fullName" in a420 && "methods" in a420;
}
tsProto.isTsProtoServiceDefinition = isTsProtoServiceDefinition;
Object.defineProperty(serviceDefinitions, "__esModule", { value: true });
serviceDefinitions.toGrpcWebMethodDefinition = serviceDefinitions.normalizeServiceDefinition = void 0;
const grpc_web_1$5 = grpcWeb, ts_proto_1 = tsProto;
function normalizeServiceDefinition(a420) {
  return (0, grpc_web_1$5.isGrpcWebServiceDefinition)(a420) ? (0, grpc_web_1$5.fromGrpcWebServiceDefinition)(a420) : (0, ts_proto_1.isTsProtoServiceDefinition)(a420) ? (0, ts_proto_1.fromTsProtoServiceDefinition)(a420) : a420;
}
serviceDefinitions.normalizeServiceDefinition = normalizeServiceDefinition;
function toGrpcWebMethodDefinition(a420) {
  const [, u2, c] = a420.path.split("/");
  return { service: { serviceName: u2 }, methodName: c, requestStream: a420.requestStream, responseStream: a420.responseStream, requestType: class {
    constructor() {
      throw new Error("Unexpected instantiation");
    }
    static deserializeBinary(l2) {
      return a420.requestDeserialize(l2);
    }
  }, responseType: class {
    constructor() {
      throw new Error("Unexpected instantiation");
    }
    static deserializeBinary(l2) {
      return a420.responseDeserialize(l2);
    }
  } };
}
serviceDefinitions.toGrpcWebMethodDefinition = toGrpcWebMethodDefinition;
var channel = {};
Object.defineProperty(channel, "__esModule", { value: true });
channel.createChannel = void 0;
function createChannel(a420, u2) {
  return { address: a420, transport: u2 };
}
channel.createChannel = createChannel;
var ClientFactory = {}, createBidiStreamingMethod$1 = {}, grpcWebClient_umd = { exports: {} };
(function(a420, u2) {
  (function(c, l2) {
    a420.exports = l2();
  })(commonjsGlobal$1, function() {
    return c = { 418: function(v2, p2) {
      (function(_, I2) {
        for (var P2 in I2)
          _[P2] = I2[P2];
      })(p2, function(_) {
        var I2 = {};
        function P2($) {
          if (I2[$])
            return I2[$].exports;
          var F2 = I2[$] = { i: $, l: false, exports: {} };
          return _[$].call(F2.exports, F2, F2.exports, P2), F2.l = true, F2.exports;
        }
        return P2.m = _, P2.c = I2, P2.i = function($) {
          return $;
        }, P2.d = function($, F2, H2) {
          P2.o($, F2) || Object.defineProperty($, F2, { configurable: false, enumerable: true, get: H2 });
        }, P2.n = function($) {
          var F2 = $ && $.__esModule ? function() {
            return $.default;
          } : function() {
            return $;
          };
          return P2.d(F2, "a", F2), F2;
        }, P2.o = function($, F2) {
          return Object.prototype.hasOwnProperty.call($, F2);
        }, P2.p = "", P2(P2.s = 1);
      }([function(_, I2, P2) {
        Object.defineProperty(I2, "__esModule", { value: true });
        var $ = P2(3), F2 = function() {
          function H2(j, ee2) {
            j === void 0 && (j = {}), ee2 === void 0 && (ee2 = { splitValues: false });
            var X2, ie2 = this;
            this.headersMap = {}, j && (typeof Headers < "u" && j instanceof Headers ? $.getHeaderKeys(j).forEach(function(Q2) {
              $.getHeaderValues(j, Q2).forEach(function(ne2) {
                ee2.splitValues ? ie2.append(Q2, $.splitHeaderValue(ne2)) : ie2.append(Q2, ne2);
              });
            }) : typeof (X2 = j) == "object" && typeof X2.headersMap == "object" && typeof X2.forEach == "function" ? j.forEach(function(Q2, ne2) {
              ie2.append(Q2, ne2);
            }) : typeof Map < "u" && j instanceof Map ? j.forEach(function(Q2, ne2) {
              ie2.append(ne2, Q2);
            }) : typeof j == "string" ? this.appendFromString(j) : typeof j == "object" && Object.getOwnPropertyNames(j).forEach(function(Q2) {
              var ne2 = j[Q2];
              Array.isArray(ne2) ? ne2.forEach(function(Z2) {
                ie2.append(Q2, Z2);
              }) : ie2.append(Q2, ne2);
            }));
          }
          return H2.prototype.appendFromString = function(j) {
            for (var ee2 = j.split(`\r
`), X2 = 0; X2 < ee2.length; X2++) {
              var ie2 = ee2[X2], Q2 = ie2.indexOf(":");
              if (Q2 > 0) {
                var ne2 = ie2.substring(0, Q2).trim(), Z2 = ie2.substring(Q2 + 1).trim();
                this.append(ne2, Z2);
              }
            }
          }, H2.prototype.delete = function(j, ee2) {
            var X2 = $.normalizeName(j);
            if (ee2 === void 0)
              delete this.headersMap[X2];
            else {
              var ie2 = this.headersMap[X2];
              if (ie2) {
                var Q2 = ie2.indexOf(ee2);
                Q2 >= 0 && ie2.splice(Q2, 1), ie2.length === 0 && delete this.headersMap[X2];
              }
            }
          }, H2.prototype.append = function(j, ee2) {
            var X2 = this, ie2 = $.normalizeName(j);
            Array.isArray(this.headersMap[ie2]) || (this.headersMap[ie2] = []), Array.isArray(ee2) ? ee2.forEach(function(Q2) {
              X2.headersMap[ie2].push($.normalizeValue(Q2));
            }) : this.headersMap[ie2].push($.normalizeValue(ee2));
          }, H2.prototype.set = function(j, ee2) {
            var X2 = $.normalizeName(j);
            if (Array.isArray(ee2)) {
              var ie2 = [];
              ee2.forEach(function(Q2) {
                ie2.push($.normalizeValue(Q2));
              }), this.headersMap[X2] = ie2;
            } else
              this.headersMap[X2] = [$.normalizeValue(ee2)];
          }, H2.prototype.has = function(j, ee2) {
            var X2 = this.headersMap[$.normalizeName(j)];
            if (!Array.isArray(X2))
              return false;
            if (ee2 !== void 0) {
              var ie2 = $.normalizeValue(ee2);
              return X2.indexOf(ie2) >= 0;
            }
            return true;
          }, H2.prototype.get = function(j) {
            var ee2 = this.headersMap[$.normalizeName(j)];
            return ee2 !== void 0 ? ee2.concat() : [];
          }, H2.prototype.forEach = function(j) {
            var ee2 = this;
            Object.getOwnPropertyNames(this.headersMap).forEach(function(X2) {
              j(X2, ee2.headersMap[X2]);
            }, this);
          }, H2.prototype.toHeaders = function() {
            if (typeof Headers < "u") {
              var j = new Headers();
              return this.forEach(function(ee2, X2) {
                X2.forEach(function(ie2) {
                  j.append(ee2, ie2);
                });
              }), j;
            }
            throw new Error("Headers class is not defined");
          }, H2;
        }();
        I2.BrowserHeaders = F2;
      }, function(_, I2, P2) {
        Object.defineProperty(I2, "__esModule", { value: true });
        var $ = P2(0);
        I2.BrowserHeaders = $.BrowserHeaders;
      }, function(_, I2, P2) {
        Object.defineProperty(I2, "__esModule", { value: true }), I2.iterateHeaders = function($, F2) {
          for (var H2 = $[Symbol.iterator](), j = H2.next(); !j.done; )
            F2(j.value[0]), j = H2.next();
        }, I2.iterateHeadersKeys = function($, F2) {
          for (var H2 = $.keys(), j = H2.next(); !j.done; )
            F2(j.value), j = H2.next();
        };
      }, function(_, I2, P2) {
        Object.defineProperty(I2, "__esModule", { value: true });
        var $ = P2(2);
        I2.normalizeName = function(F2) {
          if (typeof F2 != "string" && (F2 = String(F2)), /[^a-z0-9\-#$%&'*+.\^_`|~]/i.test(F2))
            throw new TypeError("Invalid character in header field name");
          return F2.toLowerCase();
        }, I2.normalizeValue = function(F2) {
          return typeof F2 != "string" && (F2 = String(F2)), F2;
        }, I2.getHeaderValues = function(F2, H2) {
          var j = F2;
          if (j instanceof Headers && j.getAll)
            return j.getAll(H2);
          var ee2 = j.get(H2);
          return ee2 && typeof ee2 == "string" ? [ee2] : ee2;
        }, I2.getHeaderKeys = function(F2) {
          var H2 = F2, j = {}, ee2 = [];
          return H2.keys ? $.iterateHeadersKeys(H2, function(X2) {
            j[X2] || (j[X2] = true, ee2.push(X2));
          }) : H2.forEach ? H2.forEach(function(X2, ie2) {
            j[ie2] || (j[ie2] = true, ee2.push(ie2));
          }) : $.iterateHeaders(H2, function(X2) {
            var ie2 = X2[0];
            j[ie2] || (j[ie2] = true, ee2.push(ie2));
          }), ee2;
        }, I2.splitHeaderValue = function(F2) {
          var H2 = [];
          return F2.split(", ").forEach(function(j) {
            j.split(",").forEach(function(ee2) {
              H2.push(ee2);
            });
          }), H2;
        };
      }]));
    }, 617: function(v2, p2, _) {
      Object.defineProperty(p2, "__esModule", { value: true }), p2.ChunkParser = p2.ChunkType = p2.encodeASCII = p2.decodeASCII = void 0;
      var I2, P2 = _(65);
      function $(Q2) {
        return (ne2 = Q2) === 9 || ne2 === 10 || ne2 === 13 || Q2 >= 32 && Q2 <= 126;
        var ne2;
      }
      function F2(Q2) {
        for (var ne2 = 0; ne2 !== Q2.length; ++ne2)
          if (!$(Q2[ne2]))
            throw new Error("Metadata is not valid (printable) ASCII");
        return String.fromCharCode.apply(String, Array.prototype.slice.call(Q2));
      }
      function H2(Q2) {
        return (128 & Q2.getUint8(0)) == 128;
      }
      function j(Q2) {
        return Q2.getUint32(1, false);
      }
      function ee2(Q2, ne2, Z2) {
        return Q2.byteLength - ne2 >= Z2;
      }
      function X2(Q2, ne2, Z2) {
        if (Q2.slice)
          return Q2.slice(ne2, Z2);
        var de2 = Q2.length;
        Z2 !== void 0 && (de2 = Z2);
        for (var pe2 = new Uint8Array(de2 - ne2), le2 = 0, be2 = ne2; be2 < de2; be2++)
          pe2[le2++] = Q2[be2];
        return pe2;
      }
      p2.decodeASCII = F2, p2.encodeASCII = function(Q2) {
        for (var ne2 = new Uint8Array(Q2.length), Z2 = 0; Z2 !== Q2.length; ++Z2) {
          var de2 = Q2.charCodeAt(Z2);
          if (!$(de2))
            throw new Error("Metadata contains invalid ASCII");
          ne2[Z2] = de2;
        }
        return ne2;
      }, function(Q2) {
        Q2[Q2.MESSAGE = 1] = "MESSAGE", Q2[Q2.TRAILERS = 2] = "TRAILERS";
      }(I2 = p2.ChunkType || (p2.ChunkType = {}));
      var ie2 = function() {
        function Q2() {
          this.buffer = null, this.position = 0;
        }
        return Q2.prototype.parse = function(ne2, Z2) {
          if (ne2.length === 0 && Z2)
            return [];
          var de2, pe2 = [];
          if (this.buffer == null)
            this.buffer = ne2, this.position = 0;
          else if (this.position === this.buffer.byteLength)
            this.buffer = ne2, this.position = 0;
          else {
            var le2 = this.buffer.byteLength - this.position, be2 = new Uint8Array(le2 + ne2.byteLength), ke2 = X2(this.buffer, this.position);
            be2.set(ke2, 0);
            var Te2 = new Uint8Array(ne2);
            be2.set(Te2, le2), this.buffer = be2, this.position = 0;
          }
          for (; ; ) {
            if (!ee2(this.buffer, this.position, 5))
              return pe2;
            var q2 = X2(this.buffer, this.position, this.position + 5), z2 = new DataView(q2.buffer, q2.byteOffset, q2.byteLength), C2 = j(z2);
            if (!ee2(this.buffer, this.position, 5 + C2))
              return pe2;
            var b = X2(this.buffer, this.position + 5, this.position + 5 + C2);
            if (this.position += 5 + C2, H2(z2))
              return pe2.push({ chunkType: I2.TRAILERS, trailers: (de2 = b, new P2.Metadata(F2(de2))) }), pe2;
            pe2.push({ chunkType: I2.MESSAGE, data: b });
          }
        }, Q2;
      }();
      p2.ChunkParser = ie2;
    }, 8: function(v2, p2) {
      var _;
      Object.defineProperty(p2, "__esModule", { value: true }), p2.httpStatusToCode = p2.Code = void 0, function(I2) {
        I2[I2.OK = 0] = "OK", I2[I2.Canceled = 1] = "Canceled", I2[I2.Unknown = 2] = "Unknown", I2[I2.InvalidArgument = 3] = "InvalidArgument", I2[I2.DeadlineExceeded = 4] = "DeadlineExceeded", I2[I2.NotFound = 5] = "NotFound", I2[I2.AlreadyExists = 6] = "AlreadyExists", I2[I2.PermissionDenied = 7] = "PermissionDenied", I2[I2.ResourceExhausted = 8] = "ResourceExhausted", I2[I2.FailedPrecondition = 9] = "FailedPrecondition", I2[I2.Aborted = 10] = "Aborted", I2[I2.OutOfRange = 11] = "OutOfRange", I2[I2.Unimplemented = 12] = "Unimplemented", I2[I2.Internal = 13] = "Internal", I2[I2.Unavailable = 14] = "Unavailable", I2[I2.DataLoss = 15] = "DataLoss", I2[I2.Unauthenticated = 16] = "Unauthenticated";
      }(_ = p2.Code || (p2.Code = {})), p2.httpStatusToCode = function(I2) {
        switch (I2) {
          case 0:
            return _.Internal;
          case 200:
            return _.OK;
          case 400:
            return _.InvalidArgument;
          case 401:
            return _.Unauthenticated;
          case 403:
            return _.PermissionDenied;
          case 404:
            return _.NotFound;
          case 409:
            return _.Aborted;
          case 412:
            return _.FailedPrecondition;
          case 429:
            return _.ResourceExhausted;
          case 499:
            return _.Canceled;
          case 500:
            return _.Unknown;
          case 501:
            return _.Unimplemented;
          case 503:
            return _.Unavailable;
          case 504:
            return _.DeadlineExceeded;
          default:
            return _.Unknown;
        }
      };
    }, 934: function(v2, p2, _) {
      Object.defineProperty(p2, "__esModule", { value: true }), p2.client = void 0;
      var I2 = _(65), P2 = _(617), $ = _(8), F2 = _(346), H2 = _(57), j = _(882);
      p2.client = function(ie2, Q2) {
        return new ee2(ie2, Q2);
      };
      var ee2 = function() {
        function ie2(Q2, ne2) {
          this.started = false, this.sentFirstMessage = false, this.completed = false, this.closed = false, this.finishedSending = false, this.onHeadersCallbacks = [], this.onMessageCallbacks = [], this.onEndCallbacks = [], this.parser = new P2.ChunkParser(), this.methodDefinition = Q2, this.props = ne2, this.createTransport();
        }
        return ie2.prototype.createTransport = function() {
          var Q2 = this.props.host + "/" + this.methodDefinition.service.serviceName + "/" + this.methodDefinition.methodName, ne2 = { methodDefinition: this.methodDefinition, debug: this.props.debug || false, url: Q2, onHeaders: this.onTransportHeaders.bind(this), onChunk: this.onTransportChunk.bind(this), onEnd: this.onTransportEnd.bind(this) };
          this.props.transport ? this.transport = this.props.transport(ne2) : this.transport = H2.makeDefaultTransport(ne2);
        }, ie2.prototype.onTransportHeaders = function(Q2, ne2) {
          if (this.props.debug && F2.debug("onHeaders", Q2, ne2), this.closed)
            this.props.debug && F2.debug("grpc.onHeaders received after request was closed - ignoring");
          else if (ne2 !== 0) {
            this.responseHeaders = Q2, this.props.debug && F2.debug("onHeaders.responseHeaders", JSON.stringify(this.responseHeaders, null, 2));
            var Z2 = X2(Q2);
            this.props.debug && F2.debug("onHeaders.gRPCStatus", Z2);
            var de2 = Z2 && Z2 >= 0 ? Z2 : $.httpStatusToCode(ne2);
            this.props.debug && F2.debug("onHeaders.code", de2);
            var pe2 = Q2.get("grpc-message") || [];
            if (this.props.debug && F2.debug("onHeaders.gRPCMessage", pe2), this.rawOnHeaders(Q2), de2 !== $.Code.OK) {
              var le2 = this.decodeGRPCStatus(pe2[0]);
              this.rawOnError(de2, le2, Q2);
            }
          }
        }, ie2.prototype.onTransportChunk = function(Q2) {
          var ne2 = this;
          if (this.closed)
            this.props.debug && F2.debug("grpc.onChunk received after request was closed - ignoring");
          else {
            var Z2 = [];
            try {
              Z2 = this.parser.parse(Q2);
            } catch (de2) {
              return this.props.debug && F2.debug("onChunk.parsing error", de2, de2.message), void this.rawOnError($.Code.Internal, "parsing error: " + de2.message);
            }
            Z2.forEach(function(de2) {
              if (de2.chunkType === P2.ChunkType.MESSAGE) {
                var pe2 = ne2.methodDefinition.responseType.deserializeBinary(de2.data);
                ne2.rawOnMessage(pe2);
              } else
                de2.chunkType === P2.ChunkType.TRAILERS && (ne2.responseHeaders ? (ne2.responseTrailers = new I2.Metadata(de2.trailers), ne2.props.debug && F2.debug("onChunk.trailers", ne2.responseTrailers)) : (ne2.responseHeaders = new I2.Metadata(de2.trailers), ne2.rawOnHeaders(ne2.responseHeaders)));
            });
          }
        }, ie2.prototype.onTransportEnd = function() {
          if (this.props.debug && F2.debug("grpc.onEnd"), this.closed)
            this.props.debug && F2.debug("grpc.onEnd received after request was closed - ignoring");
          else if (this.responseTrailers !== void 0) {
            var Q2 = X2(this.responseTrailers);
            if (Q2 !== null) {
              var ne2 = this.responseTrailers.get("grpc-message"), Z2 = this.decodeGRPCStatus(ne2[0]);
              this.rawOnEnd(Q2, Z2, this.responseTrailers);
            } else
              this.rawOnError($.Code.Internal, "Response closed without grpc-status (Trailers provided)");
          } else {
            if (this.responseHeaders === void 0)
              return void this.rawOnError($.Code.Unknown, "Response closed without headers");
            var de2 = X2(this.responseHeaders), pe2 = this.responseHeaders.get("grpc-message");
            if (this.props.debug && F2.debug("grpc.headers only response ", de2, pe2), de2 === null)
              return void this.rawOnEnd($.Code.Unknown, "Response closed without grpc-status (Headers only)", this.responseHeaders);
            var le2 = this.decodeGRPCStatus(pe2[0]);
            this.rawOnEnd(de2, le2, this.responseHeaders);
          }
        }, ie2.prototype.decodeGRPCStatus = function(Q2) {
          if (!Q2)
            return "";
          try {
            return decodeURIComponent(Q2);
          } catch {
            return Q2;
          }
        }, ie2.prototype.rawOnEnd = function(Q2, ne2, Z2) {
          var de2 = this;
          this.props.debug && F2.debug("rawOnEnd", Q2, ne2, Z2), this.completed || (this.completed = true, this.onEndCallbacks.forEach(function(pe2) {
            if (!de2.closed)
              try {
                pe2(Q2, ne2, Z2);
              } catch (le2) {
                setTimeout(function() {
                  throw le2;
                }, 0);
              }
          }));
        }, ie2.prototype.rawOnHeaders = function(Q2) {
          this.props.debug && F2.debug("rawOnHeaders", Q2), this.completed || this.onHeadersCallbacks.forEach(function(ne2) {
            try {
              ne2(Q2);
            } catch (Z2) {
              setTimeout(function() {
                throw Z2;
              }, 0);
            }
          });
        }, ie2.prototype.rawOnError = function(Q2, ne2, Z2) {
          var de2 = this;
          Z2 === void 0 && (Z2 = new I2.Metadata()), this.props.debug && F2.debug("rawOnError", Q2, ne2), this.completed || (this.completed = true, this.onEndCallbacks.forEach(function(pe2) {
            if (!de2.closed)
              try {
                pe2(Q2, ne2, Z2);
              } catch (le2) {
                setTimeout(function() {
                  throw le2;
                }, 0);
              }
          }));
        }, ie2.prototype.rawOnMessage = function(Q2) {
          var ne2 = this;
          this.props.debug && F2.debug("rawOnMessage", Q2.toObject()), this.completed || this.closed || this.onMessageCallbacks.forEach(function(Z2) {
            if (!ne2.closed)
              try {
                Z2(Q2);
              } catch (de2) {
                setTimeout(function() {
                  throw de2;
                }, 0);
              }
          });
        }, ie2.prototype.onHeaders = function(Q2) {
          this.onHeadersCallbacks.push(Q2);
        }, ie2.prototype.onMessage = function(Q2) {
          this.onMessageCallbacks.push(Q2);
        }, ie2.prototype.onEnd = function(Q2) {
          this.onEndCallbacks.push(Q2);
        }, ie2.prototype.start = function(Q2) {
          if (this.started)
            throw new Error("Client already started - cannot .start()");
          this.started = true;
          var ne2 = new I2.Metadata(Q2 || {});
          ne2.set("content-type", "application/grpc-web+proto"), ne2.set("x-grpc-web", "1"), this.transport.start(ne2);
        }, ie2.prototype.send = function(Q2) {
          if (!this.started)
            throw new Error("Client not started - .start() must be called before .send()");
          if (this.closed)
            throw new Error("Client already closed - cannot .send()");
          if (this.finishedSending)
            throw new Error("Client already finished sending - cannot .send()");
          if (!this.methodDefinition.requestStream && this.sentFirstMessage)
            throw new Error("Message already sent for non-client-streaming method - cannot .send()");
          this.sentFirstMessage = true;
          var ne2 = j.frameRequest(Q2);
          this.transport.sendMessage(ne2);
        }, ie2.prototype.finishSend = function() {
          if (!this.started)
            throw new Error("Client not started - .finishSend() must be called before .close()");
          if (this.closed)
            throw new Error("Client already closed - cannot .send()");
          if (this.finishedSending)
            throw new Error("Client already finished sending - cannot .finishSend()");
          this.finishedSending = true, this.transport.finishSend();
        }, ie2.prototype.close = function() {
          if (!this.started)
            throw new Error("Client not started - .start() must be called before .close()");
          if (this.closed)
            throw new Error("Client already closed - cannot .close()");
          this.closed = true, this.props.debug && F2.debug("request.abort aborting request"), this.transport.cancel();
        }, ie2;
      }();
      function X2(ie2) {
        var Q2 = ie2.get("grpc-status") || [];
        if (Q2.length > 0)
          try {
            var ne2 = Q2[0];
            return parseInt(ne2, 10);
          } catch {
            return null;
          }
        return null;
      }
    }, 346: function(v2, p2) {
      Object.defineProperty(p2, "__esModule", { value: true }), p2.debug = void 0, p2.debug = function() {
        for (var _ = [], I2 = 0; I2 < arguments.length; I2++)
          _[I2] = arguments[I2];
        console.debug ? console.debug.apply(null, _) : console.log.apply(null, _);
      };
    }, 607: function(v2, p2, _) {
      Object.defineProperty(p2, "__esModule", { value: true }), p2.grpc = void 0;
      var I2, P2 = _(418), $ = _(57), F2 = _(229), H2 = _(540), j = _(210), ee2 = _(859), X2 = _(8), ie2 = _(938), Q2 = _(35), ne2 = _(934);
      (I2 = p2.grpc || (p2.grpc = {})).setDefaultTransport = $.setDefaultTransportFactory, I2.CrossBrowserHttpTransport = ee2.CrossBrowserHttpTransport, I2.FetchReadableStreamTransport = F2.FetchReadableStreamTransport, I2.XhrTransport = j.XhrTransport, I2.WebsocketTransport = H2.WebsocketTransport, I2.Code = X2.Code, I2.Metadata = P2.BrowserHeaders, I2.client = function(Z2, de2) {
        return ne2.client(Z2, de2);
      }, I2.invoke = ie2.invoke, I2.unary = Q2.unary;
    }, 938: function(v2, p2, _) {
      Object.defineProperty(p2, "__esModule", { value: true }), p2.invoke = void 0;
      var I2 = _(934);
      p2.invoke = function(P2, $) {
        if (P2.requestStream)
          throw new Error(".invoke cannot be used with client-streaming methods. Use .client instead.");
        var F2 = I2.client(P2, { host: $.host, transport: $.transport, debug: $.debug });
        return $.onHeaders && F2.onHeaders($.onHeaders), $.onMessage && F2.onMessage($.onMessage), $.onEnd && F2.onEnd($.onEnd), F2.start($.metadata), F2.send($.request), F2.finishSend(), { close: function() {
          F2.close();
        } };
      };
    }, 65: function(v2, p2, _) {
      Object.defineProperty(p2, "__esModule", { value: true }), p2.Metadata = void 0;
      var I2 = _(418);
      Object.defineProperty(p2, "Metadata", { enumerable: true, get: function() {
        return I2.BrowserHeaders;
      } });
    }, 57: function(v2, p2, _) {
      Object.defineProperty(p2, "__esModule", { value: true }), p2.makeDefaultTransport = p2.setDefaultTransportFactory = void 0;
      var I2 = _(859), P2 = function($) {
        return I2.CrossBrowserHttpTransport({ withCredentials: false })($);
      };
      p2.setDefaultTransportFactory = function($) {
        P2 = $;
      }, p2.makeDefaultTransport = function($) {
        return P2($);
      };
    }, 229: function(v2, p2, _) {
      var I2 = this && this.__assign || function() {
        return (I2 = Object.assign || function(H2) {
          for (var j, ee2 = 1, X2 = arguments.length; ee2 < X2; ee2++)
            for (var ie2 in j = arguments[ee2])
              Object.prototype.hasOwnProperty.call(j, ie2) && (H2[ie2] = j[ie2]);
          return H2;
        }).apply(this, arguments);
      };
      Object.defineProperty(p2, "__esModule", { value: true }), p2.detectFetchSupport = p2.FetchReadableStreamTransport = void 0;
      var P2 = _(65), $ = _(346);
      p2.FetchReadableStreamTransport = function(H2) {
        return function(j) {
          return function(ee2, X2) {
            return ee2.debug && $.debug("fetchRequest", ee2), new F2(ee2, X2);
          }(j, H2);
        };
      };
      var F2 = function() {
        function H2(j, ee2) {
          this.cancelled = false, this.controller = self.AbortController && new AbortController(), this.options = j, this.init = ee2;
        }
        return H2.prototype.pump = function(j, ee2) {
          var X2 = this;
          if (this.reader = j, this.cancelled)
            return this.options.debug && $.debug("Fetch.pump.cancel at first pump"), void this.reader.cancel().catch(function(ie2) {
              X2.options.debug && $.debug("Fetch.pump.reader.cancel exception", ie2);
            });
          this.reader.read().then(function(ie2) {
            if (ie2.done)
              return X2.options.onEnd(), ee2;
            X2.options.onChunk(ie2.value), X2.pump(X2.reader, ee2);
          }).catch(function(ie2) {
            X2.cancelled ? X2.options.debug && $.debug("Fetch.catch - request cancelled") : (X2.cancelled = true, X2.options.debug && $.debug("Fetch.catch", ie2.message), X2.options.onEnd(ie2));
          });
        }, H2.prototype.send = function(j) {
          var ee2 = this;
          fetch(this.options.url, I2(I2({}, this.init), { headers: this.metadata.toHeaders(), method: "POST", body: j, signal: this.controller && this.controller.signal })).then(function(X2) {
            if (ee2.options.debug && $.debug("Fetch.response", X2), ee2.options.onHeaders(new P2.Metadata(X2.headers), X2.status), !X2.body)
              return X2;
            ee2.pump(X2.body.getReader(), X2);
          }).catch(function(X2) {
            ee2.cancelled ? ee2.options.debug && $.debug("Fetch.catch - request cancelled") : (ee2.cancelled = true, ee2.options.debug && $.debug("Fetch.catch", X2.message), ee2.options.onEnd(X2));
          });
        }, H2.prototype.sendMessage = function(j) {
          this.send(j);
        }, H2.prototype.finishSend = function() {
        }, H2.prototype.start = function(j) {
          this.metadata = j;
        }, H2.prototype.cancel = function() {
          var j = this;
          this.cancelled ? this.options.debug && $.debug("Fetch.cancel already cancelled") : (this.cancelled = true, this.controller ? (this.options.debug && $.debug("Fetch.cancel.controller.abort"), this.controller.abort()) : this.options.debug && $.debug("Fetch.cancel.missing abort controller"), this.reader ? (this.options.debug && $.debug("Fetch.cancel.reader.cancel"), this.reader.cancel().catch(function(ee2) {
            j.options.debug && $.debug("Fetch.cancel.reader.cancel exception", ee2);
          })) : this.options.debug && $.debug("Fetch.cancel before reader"));
        }, H2;
      }();
      p2.detectFetchSupport = function() {
        return typeof Response < "u" && Response.prototype.hasOwnProperty("body") && typeof Headers == "function";
      };
    }, 859: function(v2, p2, _) {
      Object.defineProperty(p2, "__esModule", { value: true }), p2.CrossBrowserHttpTransport = void 0;
      var I2 = _(229), P2 = _(210);
      p2.CrossBrowserHttpTransport = function($) {
        if (I2.detectFetchSupport()) {
          var F2 = { credentials: $.withCredentials ? "include" : "same-origin" };
          return I2.FetchReadableStreamTransport(F2);
        }
        return P2.XhrTransport({ withCredentials: $.withCredentials });
      };
    }, 210: function(v2, p2, _) {
      var I2, P2 = this && this.__extends || (I2 = function(Q2, ne2) {
        return (I2 = Object.setPrototypeOf || { __proto__: [] } instanceof Array && function(Z2, de2) {
          Z2.__proto__ = de2;
        } || function(Z2, de2) {
          for (var pe2 in de2)
            Object.prototype.hasOwnProperty.call(de2, pe2) && (Z2[pe2] = de2[pe2]);
        })(Q2, ne2);
      }, function(Q2, ne2) {
        function Z2() {
          this.constructor = Q2;
        }
        I2(Q2, ne2), Q2.prototype = ne2 === null ? Object.create(ne2) : (Z2.prototype = ne2.prototype, new Z2());
      });
      Object.defineProperty(p2, "__esModule", { value: true }), p2.stringToArrayBuffer = p2.MozChunkedArrayBufferXHR = p2.XHR = p2.XhrTransport = void 0;
      var $ = _(65), F2 = _(346), H2 = _(849);
      p2.XhrTransport = function(Q2) {
        return function(ne2) {
          if (H2.detectMozXHRSupport())
            return new ee2(ne2, Q2);
          if (H2.detectXHROverrideMimeTypeSupport())
            return new j(ne2, Q2);
          throw new Error("This environment's XHR implementation cannot support binary transfer.");
        };
      };
      var j = function() {
        function Q2(ne2, Z2) {
          this.options = ne2, this.init = Z2;
        }
        return Q2.prototype.onProgressEvent = function() {
          this.options.debug && F2.debug("XHR.onProgressEvent.length: ", this.xhr.response.length);
          var ne2 = this.xhr.response.substr(this.index);
          this.index = this.xhr.response.length;
          var Z2 = ie2(ne2);
          this.options.onChunk(Z2);
        }, Q2.prototype.onLoadEvent = function() {
          this.options.debug && F2.debug("XHR.onLoadEvent"), this.options.onEnd();
        }, Q2.prototype.onStateChange = function() {
          this.options.debug && F2.debug("XHR.onStateChange", this.xhr.readyState), this.xhr.readyState === XMLHttpRequest.HEADERS_RECEIVED && this.options.onHeaders(new $.Metadata(this.xhr.getAllResponseHeaders()), this.xhr.status);
        }, Q2.prototype.sendMessage = function(ne2) {
          this.xhr.send(ne2);
        }, Q2.prototype.finishSend = function() {
        }, Q2.prototype.start = function(ne2) {
          var Z2 = this;
          this.metadata = ne2;
          var de2 = new XMLHttpRequest();
          this.xhr = de2, de2.open("POST", this.options.url), this.configureXhr(), this.metadata.forEach(function(pe2, le2) {
            de2.setRequestHeader(pe2, le2.join(", "));
          }), de2.withCredentials = !!this.init.withCredentials, de2.addEventListener("readystatechange", this.onStateChange.bind(this)), de2.addEventListener("progress", this.onProgressEvent.bind(this)), de2.addEventListener("loadend", this.onLoadEvent.bind(this)), de2.addEventListener("error", function(pe2) {
            Z2.options.debug && F2.debug("XHR.error", pe2), Z2.options.onEnd(pe2.error);
          });
        }, Q2.prototype.configureXhr = function() {
          this.xhr.responseType = "text", this.xhr.overrideMimeType("text/plain; charset=x-user-defined");
        }, Q2.prototype.cancel = function() {
          this.options.debug && F2.debug("XHR.abort"), this.xhr.abort();
        }, Q2;
      }();
      p2.XHR = j;
      var ee2 = function(Q2) {
        function ne2() {
          return Q2 !== null && Q2.apply(this, arguments) || this;
        }
        return P2(ne2, Q2), ne2.prototype.configureXhr = function() {
          this.options.debug && F2.debug("MozXHR.configureXhr: setting responseType to 'moz-chunked-arraybuffer'"), this.xhr.responseType = "moz-chunked-arraybuffer";
        }, ne2.prototype.onProgressEvent = function() {
          var Z2 = this.xhr.response;
          this.options.debug && F2.debug("MozXHR.onProgressEvent: ", new Uint8Array(Z2)), this.options.onChunk(new Uint8Array(Z2));
        }, ne2;
      }(j);
      function X2(Q2, ne2) {
        var Z2 = Q2.charCodeAt(ne2);
        if (Z2 >= 55296 && Z2 <= 56319) {
          var de2 = Q2.charCodeAt(ne2 + 1);
          de2 >= 56320 && de2 <= 57343 && (Z2 = 65536 + (Z2 - 55296 << 10) + (de2 - 56320));
        }
        return Z2;
      }
      function ie2(Q2) {
        for (var ne2 = new Uint8Array(Q2.length), Z2 = 0, de2 = 0; de2 < Q2.length; de2++) {
          var pe2 = String.prototype.codePointAt ? Q2.codePointAt(de2) : X2(Q2, de2);
          ne2[Z2++] = 255 & pe2;
        }
        return ne2;
      }
      p2.MozChunkedArrayBufferXHR = ee2, p2.stringToArrayBuffer = ie2;
    }, 849: function(v2, p2) {
      var _;
      function I2() {
        if (_ !== void 0)
          return _;
        if (XMLHttpRequest) {
          _ = new XMLHttpRequest();
          try {
            _.open("GET", "https://localhost");
          } catch {
          }
        }
        return _;
      }
      function P2($) {
        var F2 = I2();
        if (!F2)
          return false;
        try {
          return F2.responseType = $, F2.responseType === $;
        } catch {
        }
        return false;
      }
      Object.defineProperty(p2, "__esModule", { value: true }), p2.detectXHROverrideMimeTypeSupport = p2.detectMozXHRSupport = p2.xhrSupportsResponseType = void 0, p2.xhrSupportsResponseType = P2, p2.detectMozXHRSupport = function() {
        return typeof XMLHttpRequest < "u" && P2("moz-chunked-arraybuffer");
      }, p2.detectXHROverrideMimeTypeSupport = function() {
        return typeof XMLHttpRequest < "u" && XMLHttpRequest.prototype.hasOwnProperty("overrideMimeType");
      };
    }, 540: function(v2, p2, _) {
      Object.defineProperty(p2, "__esModule", { value: true }), p2.WebsocketTransport = void 0;
      var I2, P2 = _(346), $ = _(617);
      (function(H2) {
        H2[H2.FINISH_SEND = 1] = "FINISH_SEND";
      })(I2 || (I2 = {}));
      var F2 = new Uint8Array([1]);
      p2.WebsocketTransport = function() {
        return function(H2) {
          return function(j) {
            j.debug && P2.debug("websocketRequest", j);
            var ee2, X2 = function(ne2) {
              if (ne2.substr(0, 8) === "https://")
                return "wss://" + ne2.substr(8);
              if (ne2.substr(0, 7) === "http://")
                return "ws://" + ne2.substr(7);
              throw new Error("Websocket transport constructed with non-https:// or http:// host.");
            }(j.url), ie2 = [];
            function Q2(ne2) {
              if (ne2 === I2.FINISH_SEND)
                ee2.send(F2);
              else {
                var Z2 = ne2, de2 = new Int8Array(Z2.byteLength + 1);
                de2.set(new Uint8Array([0])), de2.set(Z2, 1), ee2.send(de2);
              }
            }
            return { sendMessage: function(ne2) {
              ee2 && ee2.readyState !== ee2.CONNECTING ? Q2(ne2) : ie2.push(ne2);
            }, finishSend: function() {
              ee2 && ee2.readyState !== ee2.CONNECTING ? Q2(I2.FINISH_SEND) : ie2.push(I2.FINISH_SEND);
            }, start: function(ne2) {
              (ee2 = new WebSocket(X2, ["grpc-websockets"])).binaryType = "arraybuffer", ee2.onopen = function() {
                var Z2;
                j.debug && P2.debug("websocketRequest.onopen"), ee2.send((Z2 = "", ne2.forEach(function(de2, pe2) {
                  Z2 += de2 + ": " + pe2.join(", ") + `\r
`;
                }), $.encodeASCII(Z2))), ie2.forEach(function(de2) {
                  Q2(de2);
                });
              }, ee2.onclose = function(Z2) {
                j.debug && P2.debug("websocketRequest.onclose", Z2), j.onEnd();
              }, ee2.onerror = function(Z2) {
                j.debug && P2.debug("websocketRequest.onerror", Z2);
              }, ee2.onmessage = function(Z2) {
                j.onChunk(new Uint8Array(Z2.data));
              };
            }, cancel: function() {
              j.debug && P2.debug("websocket.abort"), ee2.close();
            } };
          }(H2);
        };
      };
    }, 35: function(v2, p2, _) {
      Object.defineProperty(p2, "__esModule", { value: true }), p2.unary = void 0;
      var I2 = _(65), P2 = _(934);
      p2.unary = function($, F2) {
        if ($.responseStream)
          throw new Error(".unary cannot be used with server-streaming methods. Use .invoke or .client instead.");
        if ($.requestStream)
          throw new Error(".unary cannot be used with client-streaming methods. Use .client instead.");
        var H2 = null, j = null, ee2 = P2.client($, { host: F2.host, transport: F2.transport, debug: F2.debug });
        return ee2.onHeaders(function(X2) {
          H2 = X2;
        }), ee2.onMessage(function(X2) {
          j = X2;
        }), ee2.onEnd(function(X2, ie2, Q2) {
          F2.onEnd({ status: X2, statusMessage: ie2, headers: H2 || new I2.Metadata(), message: j, trailers: Q2 });
        }), ee2.start(F2.metadata), ee2.send(F2.request), ee2.finishSend(), { close: function() {
          ee2.close();
        } };
      };
    }, 882: function(v2, p2) {
      Object.defineProperty(p2, "__esModule", { value: true }), p2.frameRequest = void 0, p2.frameRequest = function(_) {
        var I2 = _.serializeBinary(), P2 = new ArrayBuffer(I2.byteLength + 5);
        return new DataView(P2, 1, 4).setUint32(0, I2.length, false), new Uint8Array(P2, 5).set(I2), new Uint8Array(P2);
      };
    } }, l2 = {}, function v2(p2) {
      if (l2[p2])
        return l2[p2].exports;
      var _ = l2[p2] = { exports: {} };
      return c[p2].call(_.exports, _, _.exports, v2), _.exports;
    }(607);
    var c, l2;
  });
})(grpcWebClient_umd);
var grpcWebClient_umdExports = grpcWebClient_umd.exports;
class AbortError extends Error {
  constructor() {
    super("The operation has been aborted"), this.message = "The operation has been aborted", this.name = "AbortError", typeof Error.captureStackTrace == "function" && Error.captureStackTrace(this, this.constructor);
  }
}
function isAbortError(a420) {
  return typeof a420 == "object" && a420 !== null && a420.name === "AbortError";
}
function throwIfAborted(a420) {
  if (a420.aborted)
    throw new AbortError();
}
function rethrowAbortError(a420) {
  if (isAbortError(a420))
    throw a420;
}
function catchAbortError(a420) {
  if (!isAbortError(a420))
    throw a420;
}
function execute(a420, u2) {
  return new Promise((c, l2) => {
    if (a420.aborted) {
      l2(new AbortError());
      return;
    }
    let v2, p2 = false;
    function _() {
      p2 || (p2 = true, v2 != null && v2());
    }
    const I2 = u2((P2) => {
      c(P2), _();
    }, (P2) => {
      l2(P2), _();
    });
    if (!p2) {
      const P2 = () => {
        const $ = I2();
        $ == null ? l2(new AbortError()) : $.then(() => {
          l2(new AbortError());
        }, (F2) => {
          l2(F2);
        }), _();
      };
      a420.addEventListener("abort", P2), v2 = () => {
        a420.removeEventListener("abort", P2);
      };
    }
  });
}
function abortable(a420, u2) {
  if (a420.aborted) {
    const c = () => {
    };
    u2.then(c, c);
  }
  return execute(a420, (c, l2) => (u2.then(c, l2), () => {
  }));
}
function delay$1(a420, u2) {
  return execute(a420, (c) => {
    const l2 = typeof u2 == "number" ? u2 : u2.getTime() - Date.now(), v2 = setTimeout(c, l2);
    return () => {
      clearTimeout(v2);
    };
  });
}
function forever(a420) {
  return execute(a420, () => () => {
  });
}
function waitForEvent(a420, u2, c, l2) {
  return execute(a420, (v2) => {
    let p2, _ = false;
    return p2 = listen(u2, c, (...P2) => {
      v2(P2.length > 1 ? P2 : P2[0]), _ = true, p2 != null && p2();
    }, l2), _ && p2(), () => {
      _ = true, p2 != null && p2();
    };
  });
}
function listen(a420, u2, c, l2) {
  if (isEventTarget(a420))
    return a420.addEventListener(u2, c, l2), () => a420.removeEventListener(u2, c, l2);
  if (isJQueryStyleEventEmitter(a420))
    return a420.on(u2, c), () => a420.off(u2, c);
  if (isNodeStyleEventEmitter(a420))
    return a420.addListener(u2, c), () => a420.removeListener(u2, c);
  throw new Error("Invalid event target");
}
function isNodeStyleEventEmitter(a420) {
  return isFunction$3(a420.addListener) && isFunction$3(a420.removeListener);
}
function isJQueryStyleEventEmitter(a420) {
  return isFunction$3(a420.on) && isFunction$3(a420.off);
}
function isEventTarget(a420) {
  return isFunction$3(a420.addEventListener) && isFunction$3(a420.removeEventListener);
}
const isFunction$3 = (a420) => typeof a420 == "function";
var browser$g = { exports: {} };
const _global = typeof self < "u" ? self : typeof window < "u" ? window : (
  /* otherwise */
  void 0
);
if (!_global)
  throw new Error("Unable to find global scope. Are you sure this is running in the browser?");
if (!_global.AbortController)
  throw new Error('Could not find "AbortController" in the global scope. You need to polyfill it first');
browser$g.exports = _global.AbortController;
browser$g.exports.default = _global.AbortController;
var browserExports$2 = browser$g.exports;
const AbortController$1 = /* @__PURE__ */ getDefaultExportFromCjs$2(browserExports$2);
function all(a420, u2) {
  return new Promise((c, l2) => {
    if (a420.aborted) {
      l2(new AbortError());
      return;
    }
    const v2 = new AbortController$1(), p2 = u2(v2.signal);
    if (p2.length === 0) {
      c([]);
      return;
    }
    const _ = () => {
      v2.abort();
    };
    a420.addEventListener("abort", _);
    let I2;
    const P2 = new Array(p2.length);
    let $ = 0;
    function F2() {
      $ += 1, $ === p2.length && (a420.removeEventListener("abort", _), I2 != null ? l2(I2.reason) : c(P2));
    }
    for (const [H2, j] of p2.entries())
      j.then((ee2) => {
        P2[H2] = ee2, F2();
      }, (ee2) => {
        v2.abort(), (I2 == null || !isAbortError(ee2) && isAbortError(I2.reason)) && (I2 = { reason: ee2 }), F2();
      });
  });
}
function race$2(a420, u2) {
  return new Promise((c, l2) => {
    if (a420.aborted) {
      l2(new AbortError());
      return;
    }
    const v2 = new AbortController$1(), p2 = u2(v2.signal), _ = () => {
      v2.abort();
    };
    a420.addEventListener("abort", _);
    let I2 = 0;
    function P2(F2) {
      v2.abort(), I2 += 1, I2 === p2.length && (a420.removeEventListener("abort", _), F2.status === "fulfilled" ? c(F2.value) : l2(F2.reason));
    }
    let $;
    for (const F2 of p2)
      F2.then((H2) => {
        $ == null && ($ = { status: "fulfilled", value: H2 }), P2($);
      }, (H2) => {
        ($ == null || !isAbortError(H2) && ($.status === "fulfilled" || isAbortError($.reason))) && ($ = { status: "rejected", reason: H2 }), P2($);
      });
  });
}
async function retry$1(a420, u2, c = {}) {
  const { baseMs: l2 = 1e3, maxDelayMs: v2 = 15e3, onError: p2, maxAttempts: _ = 1 / 0 } = c;
  let I2 = 0;
  const P2 = () => {
    I2 = -1;
  };
  for (; ; )
    try {
      return await u2(a420, I2, P2);
    } catch ($) {
      if (rethrowAbortError($), I2 >= _)
        throw $;
      let F2;
      if (I2 === -1)
        F2 = 0;
      else {
        const H2 = Math.min(v2, Math.pow(2, I2) * l2);
        F2 = Math.round(H2 * (1 + Math.random()) / 2);
      }
      p2 && p2($, I2, F2), F2 !== 0 && await delay$1(a420, F2), I2 += 1;
    }
}
function spawn(a420, u2) {
  if (a420.aborted)
    return Promise.reject(new AbortError());
  const c = [], l2 = new AbortController$1(), v2 = l2.signal, p2 = () => {
    l2.abort();
  };
  a420.addEventListener("abort", p2);
  const _ = () => {
    a420.removeEventListener("abort", p2);
  }, I2 = /* @__PURE__ */ new Set(), P2 = () => {
    for (const H2 of I2)
      H2.abort();
  };
  v2.addEventListener("abort", P2);
  const $ = () => {
    v2.removeEventListener("abort", P2);
  };
  let F2 = new Promise((H2, j) => {
    let ee2, X2;
    ie2((Q2) => u2(Q2, { defer(ne2) {
      c.push(ne2);
    }, fork: ie2 })).join().then((Q2) => {
      l2.abort(), ee2 = { value: Q2 };
    }, (Q2) => {
      l2.abort(), (!isAbortError(Q2) || X2 == null) && (X2 = { error: Q2 });
    });
    function ie2(Q2) {
      if (v2.aborted)
        return { abort() {
        }, async join() {
          throw new AbortError();
        } };
      const ne2 = new AbortController$1(), Z2 = ne2.signal, de2 = Q2(Z2), pe2 = { abort() {
        ne2.abort();
      }, join: () => de2 };
      return I2.add(pe2), de2.catch(catchAbortError).catch((le2) => {
        X2 = { error: le2 }, l2.abort();
      }).finally(() => {
        I2.delete(pe2), I2.size === 0 && (X2 != null ? j(X2.error) : H2(ee2.value));
      }), pe2;
    }
  });
  return F2 = F2.finally(() => {
    _(), $();
    let H2 = Promise.resolve();
    for (let j = c.length - 1; j >= 0; j--)
      H2 = H2.finally(c[j]);
    return H2;
  }), F2;
}
function run(a420) {
  const u2 = new AbortController$1(), c = a420(u2.signal).catch(catchAbortError);
  return () => (u2.abort(), c);
}
const es = /* @__PURE__ */ Object.freeze(/* @__PURE__ */ Object.defineProperty({ __proto__: null, AbortError, abortable, all, catchAbortError, delay: delay$1, execute, forever, isAbortError, race: race$2, rethrowAbortError, retry: retry$1, run, spawn, throwIfAborted, waitForEvent }, Symbol.toStringTag, { value: "Module" })), require$$1$3 = /* @__PURE__ */ getAugmentedNamespace(es);
var AsyncSink$1 = {};
Object.defineProperty(AsyncSink$1, "__esModule", { value: true });
AsyncSink$1.AsyncSink = void 0;
const ARRAY_VALUE = "value", ARRAY_ERROR = "error";
class AsyncSink {
  constructor() {
    this._ended = false, this._values = [], this._resolvers = [];
  }
  [Symbol.asyncIterator]() {
    return this;
  }
  write(u2) {
    this._push({ type: ARRAY_VALUE, value: u2 });
  }
  error(u2) {
    this._push({ type: ARRAY_ERROR, error: u2 });
  }
  _push(u2) {
    if (this._ended)
      throw new Error("AsyncSink already ended");
    if (this._resolvers.length > 0) {
      const { resolve: c, reject: l2 } = this._resolvers.shift();
      u2.type === ARRAY_ERROR ? l2(u2.error) : c({ done: false, value: u2.value });
    } else
      this._values.push(u2);
  }
  next() {
    if (this._values.length > 0) {
      const { type: u2, value: c, error: l2 } = this._values.shift();
      return u2 === ARRAY_ERROR ? Promise.reject(l2) : Promise.resolve({ done: false, value: c });
    }
    return this._ended ? Promise.resolve({ done: true }) : new Promise((u2, c) => {
      this._resolvers.push({ resolve: u2, reject: c });
    });
  }
  end() {
    for (; this._resolvers.length > 0; )
      this._resolvers.shift().resolve({ done: true });
    this._ended = true;
  }
}
AsyncSink$1.AsyncSink = AsyncSink;
var isAsyncIterable$1 = {};
Object.defineProperty(isAsyncIterable$1, "__esModule", { value: true });
isAsyncIterable$1.isAsyncIterable = void 0;
function isAsyncIterable(a420) {
  return a420 != null && Symbol.asyncIterator in a420;
}
isAsyncIterable$1.isAsyncIterable = isAsyncIterable;
var convertMetadata = {}, buffer$3 = {}, base64Js = {};
base64Js.byteLength = byteLength;
base64Js.toByteArray = toByteArray;
base64Js.fromByteArray = fromByteArray;
var lookup = [], revLookup = [], Arr = typeof Uint8Array < "u" ? Uint8Array : Array, code = "ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/";
for (var i$1 = 0, len = code.length; i$1 < len; ++i$1)
  lookup[i$1] = code[i$1], revLookup[code.charCodeAt(i$1)] = i$1;
revLookup[45] = 62;
revLookup[95] = 63;
function getLens(a420) {
  var u2 = a420.length;
  if (u2 % 4 > 0)
    throw new Error("Invalid string. Length must be a multiple of 4");
  var c = a420.indexOf("=");
  c === -1 && (c = u2);
  var l2 = c === u2 ? 0 : 4 - c % 4;
  return [c, l2];
}
function byteLength(a420) {
  var u2 = getLens(a420), c = u2[0], l2 = u2[1];
  return (c + l2) * 3 / 4 - l2;
}
function _byteLength(a420, u2, c) {
  return (u2 + c) * 3 / 4 - c;
}
function toByteArray(a420) {
  var u2, c = getLens(a420), l2 = c[0], v2 = c[1], p2 = new Arr(_byteLength(a420, l2, v2)), _ = 0, I2 = v2 > 0 ? l2 - 4 : l2, P2;
  for (P2 = 0; P2 < I2; P2 += 4)
    u2 = revLookup[a420.charCodeAt(P2)] << 18 | revLookup[a420.charCodeAt(P2 + 1)] << 12 | revLookup[a420.charCodeAt(P2 + 2)] << 6 | revLookup[a420.charCodeAt(P2 + 3)], p2[_++] = u2 >> 16 & 255, p2[_++] = u2 >> 8 & 255, p2[_++] = u2 & 255;
  return v2 === 2 && (u2 = revLookup[a420.charCodeAt(P2)] << 2 | revLookup[a420.charCodeAt(P2 + 1)] >> 4, p2[_++] = u2 & 255), v2 === 1 && (u2 = revLookup[a420.charCodeAt(P2)] << 10 | revLookup[a420.charCodeAt(P2 + 1)] << 4 | revLookup[a420.charCodeAt(P2 + 2)] >> 2, p2[_++] = u2 >> 8 & 255, p2[_++] = u2 & 255), p2;
}
function tripletToBase64(a420) {
  return lookup[a420 >> 18 & 63] + lookup[a420 >> 12 & 63] + lookup[a420 >> 6 & 63] + lookup[a420 & 63];
}
function encodeChunk(a420, u2, c) {
  for (var l2, v2 = [], p2 = u2; p2 < c; p2 += 3)
    l2 = (a420[p2] << 16 & 16711680) + (a420[p2 + 1] << 8 & 65280) + (a420[p2 + 2] & 255), v2.push(tripletToBase64(l2));
  return v2.join("");
}
function fromByteArray(a420) {
  for (var u2, c = a420.length, l2 = c % 3, v2 = [], p2 = 16383, _ = 0, I2 = c - l2; _ < I2; _ += p2)
    v2.push(encodeChunk(a420, _, _ + p2 > I2 ? I2 : _ + p2));
  return l2 === 1 ? (u2 = a420[c - 1], v2.push(lookup[u2 >> 2] + lookup[u2 << 4 & 63] + "==")) : l2 === 2 && (u2 = (a420[c - 2] << 8) + a420[c - 1], v2.push(lookup[u2 >> 10] + lookup[u2 >> 4 & 63] + lookup[u2 << 2 & 63] + "=")), v2.join("");
}
var ieee754 = {};
/*! ieee754. BSD-3-Clause License. Feross Aboukhadijeh <https://feross.org/opensource> */
ieee754.read = function(a420, u2, c, l2, v2) {
  var p2, _, I2 = v2 * 8 - l2 - 1, P2 = (1 << I2) - 1, $ = P2 >> 1, F2 = -7, H2 = c ? v2 - 1 : 0, j = c ? -1 : 1, ee2 = a420[u2 + H2];
  for (H2 += j, p2 = ee2 & (1 << -F2) - 1, ee2 >>= -F2, F2 += I2; F2 > 0; p2 = p2 * 256 + a420[u2 + H2], H2 += j, F2 -= 8)
    ;
  for (_ = p2 & (1 << -F2) - 1, p2 >>= -F2, F2 += l2; F2 > 0; _ = _ * 256 + a420[u2 + H2], H2 += j, F2 -= 8)
    ;
  if (p2 === 0)
    p2 = 1 - $;
  else {
    if (p2 === P2)
      return _ ? NaN : (ee2 ? -1 : 1) * (1 / 0);
    _ = _ + Math.pow(2, l2), p2 = p2 - $;
  }
  return (ee2 ? -1 : 1) * _ * Math.pow(2, p2 - l2);
};
ieee754.write = function(a420, u2, c, l2, v2, p2) {
  var _, I2, P2, $ = p2 * 8 - v2 - 1, F2 = (1 << $) - 1, H2 = F2 >> 1, j = v2 === 23 ? Math.pow(2, -24) - Math.pow(2, -77) : 0, ee2 = l2 ? 0 : p2 - 1, X2 = l2 ? 1 : -1, ie2 = u2 < 0 || u2 === 0 && 1 / u2 < 0 ? 1 : 0;
  for (u2 = Math.abs(u2), isNaN(u2) || u2 === 1 / 0 ? (I2 = isNaN(u2) ? 1 : 0, _ = F2) : (_ = Math.floor(Math.log(u2) / Math.LN2), u2 * (P2 = Math.pow(2, -_)) < 1 && (_--, P2 *= 2), _ + H2 >= 1 ? u2 += j / P2 : u2 += j * Math.pow(2, 1 - H2), u2 * P2 >= 2 && (_++, P2 /= 2), _ + H2 >= F2 ? (I2 = 0, _ = F2) : _ + H2 >= 1 ? (I2 = (u2 * P2 - 1) * Math.pow(2, v2), _ = _ + H2) : (I2 = u2 * Math.pow(2, H2 - 1) * Math.pow(2, v2), _ = 0)); v2 >= 8; a420[c + ee2] = I2 & 255, ee2 += X2, I2 /= 256, v2 -= 8)
    ;
  for (_ = _ << v2 | I2, $ += v2; $ > 0; a420[c + ee2] = _ & 255, ee2 += X2, _ /= 256, $ -= 8)
    ;
  a420[c + ee2 - X2] |= ie2 * 128;
};
/*!
* The buffer module from node.js, for the browser.
*
* @author   Feross Aboukhadijeh <https://feross.org>
* @license  MIT
*/
(function(a420) {
  const u2 = base64Js, c = ieee754, l2 = typeof Symbol == "function" && typeof Symbol.for == "function" ? Symbol.for("nodejs.util.inspect.custom") : null;
  a420.Buffer = F2, a420.SlowBuffer = le2, a420.INSPECT_MAX_BYTES = 50;
  const v2 = 2147483647;
  a420.kMaxLength = v2;
  const { Uint8Array: p2, ArrayBuffer: _, SharedArrayBuffer: I2 } = globalThis;
  F2.TYPED_ARRAY_SUPPORT = P2(), !F2.TYPED_ARRAY_SUPPORT && typeof console < "u" && typeof console.error == "function" && console.error("This browser lacks typed array (Uint8Array) support which is required by `buffer` v5.x. Use `buffer` v4.x if you require old browser support.");
  function P2() {
    try {
      const ue2 = new p2(1), ce2 = { foo: function() {
        return 42;
      } };
      return Object.setPrototypeOf(ce2, p2.prototype), Object.setPrototypeOf(ue2, ce2), ue2.foo() === 42;
    } catch {
      return false;
    }
  }
  Object.defineProperty(F2.prototype, "parent", { enumerable: true, get: function() {
    if (F2.isBuffer(this))
      return this.buffer;
  } }), Object.defineProperty(F2.prototype, "offset", { enumerable: true, get: function() {
    if (F2.isBuffer(this))
      return this.byteOffset;
  } });
  function $(ue2) {
    if (ue2 > v2)
      throw new RangeError('The value "' + ue2 + '" is invalid for option "size"');
    const ce2 = new p2(ue2);
    return Object.setPrototypeOf(ce2, F2.prototype), ce2;
  }
  function F2(ue2, ce2, ve2) {
    if (typeof ue2 == "number") {
      if (typeof ce2 == "string")
        throw new TypeError('The "string" argument must be of type string. Received type number');
      return X2(ue2);
    }
    return H2(ue2, ce2, ve2);
  }
  F2.poolSize = 8192;
  function H2(ue2, ce2, ve2) {
    if (typeof ue2 == "string")
      return ie2(ue2, ce2);
    if (_.isView(ue2))
      return ne2(ue2);
    if (ue2 == null)
      throw new TypeError("The first argument must be one of type string, Buffer, ArrayBuffer, Array, or Array-like Object. Received type " + typeof ue2);
    if (we2(ue2, _) || ue2 && we2(ue2.buffer, _) || typeof I2 < "u" && (we2(ue2, I2) || ue2 && we2(ue2.buffer, I2)))
      return Z2(ue2, ce2, ve2);
    if (typeof ue2 == "number")
      throw new TypeError('The "value" argument must not be of type number. Received type number');
    const Ce2 = ue2.valueOf && ue2.valueOf();
    if (Ce2 != null && Ce2 !== ue2)
      return F2.from(Ce2, ce2, ve2);
    const Be2 = de2(ue2);
    if (Be2)
      return Be2;
    if (typeof Symbol < "u" && Symbol.toPrimitive != null && typeof ue2[Symbol.toPrimitive] == "function")
      return F2.from(ue2[Symbol.toPrimitive]("string"), ce2, ve2);
    throw new TypeError("The first argument must be one of type string, Buffer, ArrayBuffer, Array, or Array-like Object. Received type " + typeof ue2);
  }
  F2.from = function(ue2, ce2, ve2) {
    return H2(ue2, ce2, ve2);
  }, Object.setPrototypeOf(F2.prototype, p2.prototype), Object.setPrototypeOf(F2, p2);
  function j(ue2) {
    if (typeof ue2 != "number")
      throw new TypeError('"size" argument must be of type number');
    if (ue2 < 0)
      throw new RangeError('The value "' + ue2 + '" is invalid for option "size"');
  }
  function ee2(ue2, ce2, ve2) {
    return j(ue2), ue2 <= 0 ? $(ue2) : ce2 !== void 0 ? typeof ve2 == "string" ? $(ue2).fill(ce2, ve2) : $(ue2).fill(ce2) : $(ue2);
  }
  F2.alloc = function(ue2, ce2, ve2) {
    return ee2(ue2, ce2, ve2);
  };
  function X2(ue2) {
    return j(ue2), $(ue2 < 0 ? 0 : pe2(ue2) | 0);
  }
  F2.allocUnsafe = function(ue2) {
    return X2(ue2);
  }, F2.allocUnsafeSlow = function(ue2) {
    return X2(ue2);
  };
  function ie2(ue2, ce2) {
    if ((typeof ce2 != "string" || ce2 === "") && (ce2 = "utf8"), !F2.isEncoding(ce2))
      throw new TypeError("Unknown encoding: " + ce2);
    const ve2 = be2(ue2, ce2) | 0;
    let Ce2 = $(ve2);
    const Be2 = Ce2.write(ue2, ce2);
    return Be2 !== ve2 && (Ce2 = Ce2.slice(0, Be2)), Ce2;
  }
  function Q2(ue2) {
    const ce2 = ue2.length < 0 ? 0 : pe2(ue2.length) | 0, ve2 = $(ce2);
    for (let Ce2 = 0; Ce2 < ce2; Ce2 += 1)
      ve2[Ce2] = ue2[Ce2] & 255;
    return ve2;
  }
  function ne2(ue2) {
    if (we2(ue2, p2)) {
      const ce2 = new p2(ue2);
      return Z2(ce2.buffer, ce2.byteOffset, ce2.byteLength);
    }
    return Q2(ue2);
  }
  function Z2(ue2, ce2, ve2) {
    if (ce2 < 0 || ue2.byteLength < ce2)
      throw new RangeError('"offset" is outside of buffer bounds');
    if (ue2.byteLength < ce2 + (ve2 || 0))
      throw new RangeError('"length" is outside of buffer bounds');
    let Ce2;
    return ce2 === void 0 && ve2 === void 0 ? Ce2 = new p2(ue2) : ve2 === void 0 ? Ce2 = new p2(ue2, ce2) : Ce2 = new p2(ue2, ce2, ve2), Object.setPrototypeOf(Ce2, F2.prototype), Ce2;
  }
  function de2(ue2) {
    if (F2.isBuffer(ue2)) {
      const ce2 = pe2(ue2.length) | 0, ve2 = $(ce2);
      return ve2.length === 0 || ue2.copy(ve2, 0, 0, ce2), ve2;
    }
    if (ue2.length !== void 0)
      return typeof ue2.length != "number" || We2(ue2.length) ? $(0) : Q2(ue2);
    if (ue2.type === "Buffer" && Array.isArray(ue2.data))
      return Q2(ue2.data);
  }
  function pe2(ue2) {
    if (ue2 >= v2)
      throw new RangeError("Attempt to allocate Buffer larger than maximum size: 0x" + v2.toString(16) + " bytes");
    return ue2 | 0;
  }
  function le2(ue2) {
    return +ue2 != ue2 && (ue2 = 0), F2.alloc(+ue2);
  }
  F2.isBuffer = function(ce2) {
    return ce2 != null && ce2._isBuffer === true && ce2 !== F2.prototype;
  }, F2.compare = function(ce2, ve2) {
    if (we2(ce2, p2) && (ce2 = F2.from(ce2, ce2.offset, ce2.byteLength)), we2(ve2, p2) && (ve2 = F2.from(ve2, ve2.offset, ve2.byteLength)), !F2.isBuffer(ce2) || !F2.isBuffer(ve2))
      throw new TypeError('The "buf1", "buf2" arguments must be one of type Buffer or Uint8Array');
    if (ce2 === ve2)
      return 0;
    let Ce2 = ce2.length, Be2 = ve2.length;
    for (let He2 = 0, Ve2 = Math.min(Ce2, Be2); He2 < Ve2; ++He2)
      if (ce2[He2] !== ve2[He2]) {
        Ce2 = ce2[He2], Be2 = ve2[He2];
        break;
      }
    return Ce2 < Be2 ? -1 : Be2 < Ce2 ? 1 : 0;
  }, F2.isEncoding = function(ce2) {
    switch (String(ce2).toLowerCase()) {
      case "hex":
      case "utf8":
      case "utf-8":
      case "ascii":
      case "latin1":
      case "binary":
      case "base64":
      case "ucs2":
      case "ucs-2":
      case "utf16le":
      case "utf-16le":
        return true;
      default:
        return false;
    }
  }, F2.concat = function(ce2, ve2) {
    if (!Array.isArray(ce2))
      throw new TypeError('"list" argument must be an Array of Buffers');
    if (ce2.length === 0)
      return F2.alloc(0);
    let Ce2;
    if (ve2 === void 0)
      for (ve2 = 0, Ce2 = 0; Ce2 < ce2.length; ++Ce2)
        ve2 += ce2[Ce2].length;
    const Be2 = F2.allocUnsafe(ve2);
    let He2 = 0;
    for (Ce2 = 0; Ce2 < ce2.length; ++Ce2) {
      let Ve2 = ce2[Ce2];
      if (we2(Ve2, p2))
        He2 + Ve2.length > Be2.length ? (F2.isBuffer(Ve2) || (Ve2 = F2.from(Ve2)), Ve2.copy(Be2, He2)) : p2.prototype.set.call(Be2, Ve2, He2);
      else if (F2.isBuffer(Ve2))
        Ve2.copy(Be2, He2);
      else
        throw new TypeError('"list" argument must be an Array of Buffers');
      He2 += Ve2.length;
    }
    return Be2;
  };
  function be2(ue2, ce2) {
    if (F2.isBuffer(ue2))
      return ue2.length;
    if (_.isView(ue2) || we2(ue2, _))
      return ue2.byteLength;
    if (typeof ue2 != "string")
      throw new TypeError('The "string" argument must be one of type string, Buffer, or ArrayBuffer. Received type ' + typeof ue2);
    const ve2 = ue2.length, Ce2 = arguments.length > 2 && arguments[2] === true;
    if (!Ce2 && ve2 === 0)
      return 0;
    let Be2 = false;
    for (; ; )
      switch (ce2) {
        case "ascii":
        case "latin1":
        case "binary":
          return ve2;
        case "utf8":
        case "utf-8":
          return yt(ue2).length;
        case "ucs2":
        case "ucs-2":
        case "utf16le":
        case "utf-16le":
          return ve2 * 2;
        case "hex":
          return ve2 >>> 1;
        case "base64":
          return V2(ue2).length;
        default:
          if (Be2)
            return Ce2 ? -1 : yt(ue2).length;
          ce2 = ("" + ce2).toLowerCase(), Be2 = true;
      }
  }
  F2.byteLength = be2;
  function ke2(ue2, ce2, ve2) {
    let Ce2 = false;
    if ((ce2 === void 0 || ce2 < 0) && (ce2 = 0), ce2 > this.length || ((ve2 === void 0 || ve2 > this.length) && (ve2 = this.length), ve2 <= 0) || (ve2 >>>= 0, ce2 >>>= 0, ve2 <= ce2))
      return "";
    for (ue2 || (ue2 = "utf8"); ; )
      switch (ue2) {
        case "hex":
          return te2(this, ce2, ve2);
        case "utf8":
        case "utf-8":
          return x2(this, ce2, ve2);
        case "ascii":
          return T2(this, ce2, ve2);
        case "latin1":
        case "binary":
          return D2(this, ce2, ve2);
        case "base64":
          return A2(this, ce2, ve2);
        case "ucs2":
        case "ucs-2":
        case "utf16le":
        case "utf-16le":
          return me2(this, ce2, ve2);
        default:
          if (Ce2)
            throw new TypeError("Unknown encoding: " + ue2);
          ue2 = (ue2 + "").toLowerCase(), Ce2 = true;
      }
  }
  F2.prototype._isBuffer = true;
  function Te2(ue2, ce2, ve2) {
    const Ce2 = ue2[ce2];
    ue2[ce2] = ue2[ve2], ue2[ve2] = Ce2;
  }
  F2.prototype.swap16 = function() {
    const ce2 = this.length;
    if (ce2 % 2 !== 0)
      throw new RangeError("Buffer size must be a multiple of 16-bits");
    for (let ve2 = 0; ve2 < ce2; ve2 += 2)
      Te2(this, ve2, ve2 + 1);
    return this;
  }, F2.prototype.swap32 = function() {
    const ce2 = this.length;
    if (ce2 % 4 !== 0)
      throw new RangeError("Buffer size must be a multiple of 32-bits");
    for (let ve2 = 0; ve2 < ce2; ve2 += 4)
      Te2(this, ve2, ve2 + 3), Te2(this, ve2 + 1, ve2 + 2);
    return this;
  }, F2.prototype.swap64 = function() {
    const ce2 = this.length;
    if (ce2 % 8 !== 0)
      throw new RangeError("Buffer size must be a multiple of 64-bits");
    for (let ve2 = 0; ve2 < ce2; ve2 += 8)
      Te2(this, ve2, ve2 + 7), Te2(this, ve2 + 1, ve2 + 6), Te2(this, ve2 + 2, ve2 + 5), Te2(this, ve2 + 3, ve2 + 4);
    return this;
  }, F2.prototype.toString = function() {
    const ce2 = this.length;
    return ce2 === 0 ? "" : arguments.length === 0 ? x2(this, 0, ce2) : ke2.apply(this, arguments);
  }, F2.prototype.toLocaleString = F2.prototype.toString, F2.prototype.equals = function(ce2) {
    if (!F2.isBuffer(ce2))
      throw new TypeError("Argument must be a Buffer");
    return this === ce2 ? true : F2.compare(this, ce2) === 0;
  }, F2.prototype.inspect = function() {
    let ce2 = "";
    const ve2 = a420.INSPECT_MAX_BYTES;
    return ce2 = this.toString("hex", 0, ve2).replace(/(.{2})/g, "$1 ").trim(), this.length > ve2 && (ce2 += " ... "), "<Buffer " + ce2 + ">";
  }, l2 && (F2.prototype[l2] = F2.prototype.inspect), F2.prototype.compare = function(ce2, ve2, Ce2, Be2, He2) {
    if (we2(ce2, p2) && (ce2 = F2.from(ce2, ce2.offset, ce2.byteLength)), !F2.isBuffer(ce2))
      throw new TypeError('The "target" argument must be one of type Buffer or Uint8Array. Received type ' + typeof ce2);
    if (ve2 === void 0 && (ve2 = 0), Ce2 === void 0 && (Ce2 = ce2 ? ce2.length : 0), Be2 === void 0 && (Be2 = 0), He2 === void 0 && (He2 = this.length), ve2 < 0 || Ce2 > ce2.length || Be2 < 0 || He2 > this.length)
      throw new RangeError("out of range index");
    if (Be2 >= He2 && ve2 >= Ce2)
      return 0;
    if (Be2 >= He2)
      return -1;
    if (ve2 >= Ce2)
      return 1;
    if (ve2 >>>= 0, Ce2 >>>= 0, Be2 >>>= 0, He2 >>>= 0, this === ce2)
      return 0;
    let Ve2 = He2 - Be2, Ze2 = Ce2 - ve2;
    const Ke2 = Math.min(Ve2, Ze2), U2 = this.slice(Be2, He2), se2 = ce2.slice(ve2, Ce2);
    for (let Se2 = 0; Se2 < Ke2; ++Se2)
      if (U2[Se2] !== se2[Se2]) {
        Ve2 = U2[Se2], Ze2 = se2[Se2];
        break;
      }
    return Ve2 < Ze2 ? -1 : Ze2 < Ve2 ? 1 : 0;
  };
  function q2(ue2, ce2, ve2, Ce2, Be2) {
    if (ue2.length === 0)
      return -1;
    if (typeof ve2 == "string" ? (Ce2 = ve2, ve2 = 0) : ve2 > 2147483647 ? ve2 = 2147483647 : ve2 < -2147483648 && (ve2 = -2147483648), ve2 = +ve2, We2(ve2) && (ve2 = Be2 ? 0 : ue2.length - 1), ve2 < 0 && (ve2 = ue2.length + ve2), ve2 >= ue2.length) {
      if (Be2)
        return -1;
      ve2 = ue2.length - 1;
    } else if (ve2 < 0)
      if (Be2)
        ve2 = 0;
      else
        return -1;
    if (typeof ce2 == "string" && (ce2 = F2.from(ce2, Ce2)), F2.isBuffer(ce2))
      return ce2.length === 0 ? -1 : z2(ue2, ce2, ve2, Ce2, Be2);
    if (typeof ce2 == "number")
      return ce2 = ce2 & 255, typeof p2.prototype.indexOf == "function" ? Be2 ? p2.prototype.indexOf.call(ue2, ce2, ve2) : p2.prototype.lastIndexOf.call(ue2, ce2, ve2) : z2(ue2, [ce2], ve2, Ce2, Be2);
    throw new TypeError("val must be string, number or Buffer");
  }
  function z2(ue2, ce2, ve2, Ce2, Be2) {
    let He2 = 1, Ve2 = ue2.length, Ze2 = ce2.length;
    if (Ce2 !== void 0 && (Ce2 = String(Ce2).toLowerCase(), Ce2 === "ucs2" || Ce2 === "ucs-2" || Ce2 === "utf16le" || Ce2 === "utf-16le")) {
      if (ue2.length < 2 || ce2.length < 2)
        return -1;
      He2 = 2, Ve2 /= 2, Ze2 /= 2, ve2 /= 2;
    }
    function Ke2(se2, Se2) {
      return He2 === 1 ? se2[Se2] : se2.readUInt16BE(Se2 * He2);
    }
    let U2;
    if (Be2) {
      let se2 = -1;
      for (U2 = ve2; U2 < Ve2; U2++)
        if (Ke2(ue2, U2) === Ke2(ce2, se2 === -1 ? 0 : U2 - se2)) {
          if (se2 === -1 && (se2 = U2), U2 - se2 + 1 === Ze2)
            return se2 * He2;
        } else
          se2 !== -1 && (U2 -= U2 - se2), se2 = -1;
    } else
      for (ve2 + Ze2 > Ve2 && (ve2 = Ve2 - Ze2), U2 = ve2; U2 >= 0; U2--) {
        let se2 = true;
        for (let Se2 = 0; Se2 < Ze2; Se2++)
          if (Ke2(ue2, U2 + Se2) !== Ke2(ce2, Se2)) {
            se2 = false;
            break;
          }
        if (se2)
          return U2;
      }
    return -1;
  }
  F2.prototype.includes = function(ce2, ve2, Ce2) {
    return this.indexOf(ce2, ve2, Ce2) !== -1;
  }, F2.prototype.indexOf = function(ce2, ve2, Ce2) {
    return q2(this, ce2, ve2, Ce2, true);
  }, F2.prototype.lastIndexOf = function(ce2, ve2, Ce2) {
    return q2(this, ce2, ve2, Ce2, false);
  };
  function C2(ue2, ce2, ve2, Ce2) {
    ve2 = Number(ve2) || 0;
    const Be2 = ue2.length - ve2;
    Ce2 ? (Ce2 = Number(Ce2), Ce2 > Be2 && (Ce2 = Be2)) : Ce2 = Be2;
    const He2 = ce2.length;
    Ce2 > He2 / 2 && (Ce2 = He2 / 2);
    let Ve2;
    for (Ve2 = 0; Ve2 < Ce2; ++Ve2) {
      const Ze2 = parseInt(ce2.substr(Ve2 * 2, 2), 16);
      if (We2(Ze2))
        return Ve2;
      ue2[ve2 + Ve2] = Ze2;
    }
    return Ve2;
  }
  function b(ue2, ce2, ve2, Ce2) {
    return ge2(yt(ce2, ue2.length - ve2), ue2, ve2, Ce2);
  }
  function E2(ue2, ce2, ve2, Ce2) {
    return ge2(Xe2(ce2), ue2, ve2, Ce2);
  }
  function k(ue2, ce2, ve2, Ce2) {
    return ge2(V2(ce2), ue2, ve2, Ce2);
  }
  function O2(ue2, ce2, ve2, Ce2) {
    return ge2(Ge2(ce2, ue2.length - ve2), ue2, ve2, Ce2);
  }
  F2.prototype.write = function(ce2, ve2, Ce2, Be2) {
    if (ve2 === void 0)
      Be2 = "utf8", Ce2 = this.length, ve2 = 0;
    else if (Ce2 === void 0 && typeof ve2 == "string")
      Be2 = ve2, Ce2 = this.length, ve2 = 0;
    else if (isFinite(ve2))
      ve2 = ve2 >>> 0, isFinite(Ce2) ? (Ce2 = Ce2 >>> 0, Be2 === void 0 && (Be2 = "utf8")) : (Be2 = Ce2, Ce2 = void 0);
    else
      throw new Error("Buffer.write(string, encoding, offset[, length]) is no longer supported");
    const He2 = this.length - ve2;
    if ((Ce2 === void 0 || Ce2 > He2) && (Ce2 = He2), ce2.length > 0 && (Ce2 < 0 || ve2 < 0) || ve2 > this.length)
      throw new RangeError("Attempt to write outside buffer bounds");
    Be2 || (Be2 = "utf8");
    let Ve2 = false;
    for (; ; )
      switch (Be2) {
        case "hex":
          return C2(this, ce2, ve2, Ce2);
        case "utf8":
        case "utf-8":
          return b(this, ce2, ve2, Ce2);
        case "ascii":
        case "latin1":
        case "binary":
          return E2(this, ce2, ve2, Ce2);
        case "base64":
          return k(this, ce2, ve2, Ce2);
        case "ucs2":
        case "ucs-2":
        case "utf16le":
        case "utf-16le":
          return O2(this, ce2, ve2, Ce2);
        default:
          if (Ve2)
            throw new TypeError("Unknown encoding: " + Be2);
          Be2 = ("" + Be2).toLowerCase(), Ve2 = true;
      }
  }, F2.prototype.toJSON = function() {
    return { type: "Buffer", data: Array.prototype.slice.call(this._arr || this, 0) };
  };
  function A2(ue2, ce2, ve2) {
    return ce2 === 0 && ve2 === ue2.length ? u2.fromByteArray(ue2) : u2.fromByteArray(ue2.slice(ce2, ve2));
  }
  function x2(ue2, ce2, ve2) {
    ve2 = Math.min(ue2.length, ve2);
    const Ce2 = [];
    let Be2 = ce2;
    for (; Be2 < ve2; ) {
      const He2 = ue2[Be2];
      let Ve2 = null, Ze2 = He2 > 239 ? 4 : He2 > 223 ? 3 : He2 > 191 ? 2 : 1;
      if (Be2 + Ze2 <= ve2) {
        let Ke2, U2, se2, Se2;
        switch (Ze2) {
          case 1:
            He2 < 128 && (Ve2 = He2);
            break;
          case 2:
            Ke2 = ue2[Be2 + 1], (Ke2 & 192) === 128 && (Se2 = (He2 & 31) << 6 | Ke2 & 63, Se2 > 127 && (Ve2 = Se2));
            break;
          case 3:
            Ke2 = ue2[Be2 + 1], U2 = ue2[Be2 + 2], (Ke2 & 192) === 128 && (U2 & 192) === 128 && (Se2 = (He2 & 15) << 12 | (Ke2 & 63) << 6 | U2 & 63, Se2 > 2047 && (Se2 < 55296 || Se2 > 57343) && (Ve2 = Se2));
            break;
          case 4:
            Ke2 = ue2[Be2 + 1], U2 = ue2[Be2 + 2], se2 = ue2[Be2 + 3], (Ke2 & 192) === 128 && (U2 & 192) === 128 && (se2 & 192) === 128 && (Se2 = (He2 & 15) << 18 | (Ke2 & 63) << 12 | (U2 & 63) << 6 | se2 & 63, Se2 > 65535 && Se2 < 1114112 && (Ve2 = Se2));
        }
      }
      Ve2 === null ? (Ve2 = 65533, Ze2 = 1) : Ve2 > 65535 && (Ve2 -= 65536, Ce2.push(Ve2 >>> 10 & 1023 | 55296), Ve2 = 56320 | Ve2 & 1023), Ce2.push(Ve2), Be2 += Ze2;
    }
    return B2(Ce2);
  }
  const Y2 = 4096;
  function B2(ue2) {
    const ce2 = ue2.length;
    if (ce2 <= Y2)
      return String.fromCharCode.apply(String, ue2);
    let ve2 = "", Ce2 = 0;
    for (; Ce2 < ce2; )
      ve2 += String.fromCharCode.apply(String, ue2.slice(Ce2, Ce2 += Y2));
    return ve2;
  }
  function T2(ue2, ce2, ve2) {
    let Ce2 = "";
    ve2 = Math.min(ue2.length, ve2);
    for (let Be2 = ce2; Be2 < ve2; ++Be2)
      Ce2 += String.fromCharCode(ue2[Be2] & 127);
    return Ce2;
  }
  function D2(ue2, ce2, ve2) {
    let Ce2 = "";
    ve2 = Math.min(ue2.length, ve2);
    for (let Be2 = ce2; Be2 < ve2; ++Be2)
      Ce2 += String.fromCharCode(ue2[Be2]);
    return Ce2;
  }
  function te2(ue2, ce2, ve2) {
    const Ce2 = ue2.length;
    (!ce2 || ce2 < 0) && (ce2 = 0), (!ve2 || ve2 < 0 || ve2 > Ce2) && (ve2 = Ce2);
    let Be2 = "";
    for (let He2 = ce2; He2 < ve2; ++He2)
      Be2 += Re2[ue2[He2]];
    return Be2;
  }
  function me2(ue2, ce2, ve2) {
    const Ce2 = ue2.slice(ce2, ve2);
    let Be2 = "";
    for (let He2 = 0; He2 < Ce2.length - 1; He2 += 2)
      Be2 += String.fromCharCode(Ce2[He2] + Ce2[He2 + 1] * 256);
    return Be2;
  }
  F2.prototype.slice = function(ce2, ve2) {
    const Ce2 = this.length;
    ce2 = ~~ce2, ve2 = ve2 === void 0 ? Ce2 : ~~ve2, ce2 < 0 ? (ce2 += Ce2, ce2 < 0 && (ce2 = 0)) : ce2 > Ce2 && (ce2 = Ce2), ve2 < 0 ? (ve2 += Ce2, ve2 < 0 && (ve2 = 0)) : ve2 > Ce2 && (ve2 = Ce2), ve2 < ce2 && (ve2 = ce2);
    const Be2 = this.subarray(ce2, ve2);
    return Object.setPrototypeOf(Be2, F2.prototype), Be2;
  };
  function Ie2(ue2, ce2, ve2) {
    if (ue2 % 1 !== 0 || ue2 < 0)
      throw new RangeError("offset is not uint");
    if (ue2 + ce2 > ve2)
      throw new RangeError("Trying to access beyond buffer length");
  }
  F2.prototype.readUintLE = F2.prototype.readUIntLE = function(ce2, ve2, Ce2) {
    ce2 = ce2 >>> 0, ve2 = ve2 >>> 0, Ce2 || Ie2(ce2, ve2, this.length);
    let Be2 = this[ce2], He2 = 1, Ve2 = 0;
    for (; ++Ve2 < ve2 && (He2 *= 256); )
      Be2 += this[ce2 + Ve2] * He2;
    return Be2;
  }, F2.prototype.readUintBE = F2.prototype.readUIntBE = function(ce2, ve2, Ce2) {
    ce2 = ce2 >>> 0, ve2 = ve2 >>> 0, Ce2 || Ie2(ce2, ve2, this.length);
    let Be2 = this[ce2 + --ve2], He2 = 1;
    for (; ve2 > 0 && (He2 *= 256); )
      Be2 += this[ce2 + --ve2] * He2;
    return Be2;
  }, F2.prototype.readUint8 = F2.prototype.readUInt8 = function(ce2, ve2) {
    return ce2 = ce2 >>> 0, ve2 || Ie2(ce2, 1, this.length), this[ce2];
  }, F2.prototype.readUint16LE = F2.prototype.readUInt16LE = function(ce2, ve2) {
    return ce2 = ce2 >>> 0, ve2 || Ie2(ce2, 2, this.length), this[ce2] | this[ce2 + 1] << 8;
  }, F2.prototype.readUint16BE = F2.prototype.readUInt16BE = function(ce2, ve2) {
    return ce2 = ce2 >>> 0, ve2 || Ie2(ce2, 2, this.length), this[ce2] << 8 | this[ce2 + 1];
  }, F2.prototype.readUint32LE = F2.prototype.readUInt32LE = function(ce2, ve2) {
    return ce2 = ce2 >>> 0, ve2 || Ie2(ce2, 4, this.length), (this[ce2] | this[ce2 + 1] << 8 | this[ce2 + 2] << 16) + this[ce2 + 3] * 16777216;
  }, F2.prototype.readUint32BE = F2.prototype.readUInt32BE = function(ce2, ve2) {
    return ce2 = ce2 >>> 0, ve2 || Ie2(ce2, 4, this.length), this[ce2] * 16777216 + (this[ce2 + 1] << 16 | this[ce2 + 2] << 8 | this[ce2 + 3]);
  }, F2.prototype.readBigUInt64LE = J2(function(ce2) {
    ce2 = ce2 >>> 0, Oe2(ce2, "offset");
    const ve2 = this[ce2], Ce2 = this[ce2 + 7];
    (ve2 === void 0 || Ce2 === void 0) && qe2(ce2, this.length - 8);
    const Be2 = ve2 + this[++ce2] * 2 ** 8 + this[++ce2] * 2 ** 16 + this[++ce2] * 2 ** 24, He2 = this[++ce2] + this[++ce2] * 2 ** 8 + this[++ce2] * 2 ** 16 + Ce2 * 2 ** 24;
    return BigInt(Be2) + (BigInt(He2) << BigInt(32));
  }), F2.prototype.readBigUInt64BE = J2(function(ce2) {
    ce2 = ce2 >>> 0, Oe2(ce2, "offset");
    const ve2 = this[ce2], Ce2 = this[ce2 + 7];
    (ve2 === void 0 || Ce2 === void 0) && qe2(ce2, this.length - 8);
    const Be2 = ve2 * 2 ** 24 + this[++ce2] * 2 ** 16 + this[++ce2] * 2 ** 8 + this[++ce2], He2 = this[++ce2] * 2 ** 24 + this[++ce2] * 2 ** 16 + this[++ce2] * 2 ** 8 + Ce2;
    return (BigInt(Be2) << BigInt(32)) + BigInt(He2);
  }), F2.prototype.readIntLE = function(ce2, ve2, Ce2) {
    ce2 = ce2 >>> 0, ve2 = ve2 >>> 0, Ce2 || Ie2(ce2, ve2, this.length);
    let Be2 = this[ce2], He2 = 1, Ve2 = 0;
    for (; ++Ve2 < ve2 && (He2 *= 256); )
      Be2 += this[ce2 + Ve2] * He2;
    return He2 *= 128, Be2 >= He2 && (Be2 -= Math.pow(2, 8 * ve2)), Be2;
  }, F2.prototype.readIntBE = function(ce2, ve2, Ce2) {
    ce2 = ce2 >>> 0, ve2 = ve2 >>> 0, Ce2 || Ie2(ce2, ve2, this.length);
    let Be2 = ve2, He2 = 1, Ve2 = this[ce2 + --Be2];
    for (; Be2 > 0 && (He2 *= 256); )
      Ve2 += this[ce2 + --Be2] * He2;
    return He2 *= 128, Ve2 >= He2 && (Ve2 -= Math.pow(2, 8 * ve2)), Ve2;
  }, F2.prototype.readInt8 = function(ce2, ve2) {
    return ce2 = ce2 >>> 0, ve2 || Ie2(ce2, 1, this.length), this[ce2] & 128 ? (255 - this[ce2] + 1) * -1 : this[ce2];
  }, F2.prototype.readInt16LE = function(ce2, ve2) {
    ce2 = ce2 >>> 0, ve2 || Ie2(ce2, 2, this.length);
    const Ce2 = this[ce2] | this[ce2 + 1] << 8;
    return Ce2 & 32768 ? Ce2 | 4294901760 : Ce2;
  }, F2.prototype.readInt16BE = function(ce2, ve2) {
    ce2 = ce2 >>> 0, ve2 || Ie2(ce2, 2, this.length);
    const Ce2 = this[ce2 + 1] | this[ce2] << 8;
    return Ce2 & 32768 ? Ce2 | 4294901760 : Ce2;
  }, F2.prototype.readInt32LE = function(ce2, ve2) {
    return ce2 = ce2 >>> 0, ve2 || Ie2(ce2, 4, this.length), this[ce2] | this[ce2 + 1] << 8 | this[ce2 + 2] << 16 | this[ce2 + 3] << 24;
  }, F2.prototype.readInt32BE = function(ce2, ve2) {
    return ce2 = ce2 >>> 0, ve2 || Ie2(ce2, 4, this.length), this[ce2] << 24 | this[ce2 + 1] << 16 | this[ce2 + 2] << 8 | this[ce2 + 3];
  }, F2.prototype.readBigInt64LE = J2(function(ce2) {
    ce2 = ce2 >>> 0, Oe2(ce2, "offset");
    const ve2 = this[ce2], Ce2 = this[ce2 + 7];
    (ve2 === void 0 || Ce2 === void 0) && qe2(ce2, this.length - 8);
    const Be2 = this[ce2 + 4] + this[ce2 + 5] * 2 ** 8 + this[ce2 + 6] * 2 ** 16 + (Ce2 << 24);
    return (BigInt(Be2) << BigInt(32)) + BigInt(ve2 + this[++ce2] * 2 ** 8 + this[++ce2] * 2 ** 16 + this[++ce2] * 2 ** 24);
  }), F2.prototype.readBigInt64BE = J2(function(ce2) {
    ce2 = ce2 >>> 0, Oe2(ce2, "offset");
    const ve2 = this[ce2], Ce2 = this[ce2 + 7];
    (ve2 === void 0 || Ce2 === void 0) && qe2(ce2, this.length - 8);
    const Be2 = (ve2 << 24) + // Overflow
    this[++ce2] * 2 ** 16 + this[++ce2] * 2 ** 8 + this[++ce2];
    return (BigInt(Be2) << BigInt(32)) + BigInt(this[++ce2] * 2 ** 24 + this[++ce2] * 2 ** 16 + this[++ce2] * 2 ** 8 + Ce2);
  }), F2.prototype.readFloatLE = function(ce2, ve2) {
    return ce2 = ce2 >>> 0, ve2 || Ie2(ce2, 4, this.length), c.read(this, ce2, true, 23, 4);
  }, F2.prototype.readFloatBE = function(ce2, ve2) {
    return ce2 = ce2 >>> 0, ve2 || Ie2(ce2, 4, this.length), c.read(this, ce2, false, 23, 4);
  }, F2.prototype.readDoubleLE = function(ce2, ve2) {
    return ce2 = ce2 >>> 0, ve2 || Ie2(ce2, 8, this.length), c.read(this, ce2, true, 52, 8);
  }, F2.prototype.readDoubleBE = function(ce2, ve2) {
    return ce2 = ce2 >>> 0, ve2 || Ie2(ce2, 8, this.length), c.read(this, ce2, false, 52, 8);
  };
  function $e2(ue2, ce2, ve2, Ce2, Be2, He2) {
    if (!F2.isBuffer(ue2))
      throw new TypeError('"buffer" argument must be a Buffer instance');
    if (ce2 > Be2 || ce2 < He2)
      throw new RangeError('"value" argument is out of bounds');
    if (ve2 + Ce2 > ue2.length)
      throw new RangeError("Index out of range");
  }
  F2.prototype.writeUintLE = F2.prototype.writeUIntLE = function(ce2, ve2, Ce2, Be2) {
    if (ce2 = +ce2, ve2 = ve2 >>> 0, Ce2 = Ce2 >>> 0, !Be2) {
      const Ze2 = Math.pow(2, 8 * Ce2) - 1;
      $e2(this, ce2, ve2, Ce2, Ze2, 0);
    }
    let He2 = 1, Ve2 = 0;
    for (this[ve2] = ce2 & 255; ++Ve2 < Ce2 && (He2 *= 256); )
      this[ve2 + Ve2] = ce2 / He2 & 255;
    return ve2 + Ce2;
  }, F2.prototype.writeUintBE = F2.prototype.writeUIntBE = function(ce2, ve2, Ce2, Be2) {
    if (ce2 = +ce2, ve2 = ve2 >>> 0, Ce2 = Ce2 >>> 0, !Be2) {
      const Ze2 = Math.pow(2, 8 * Ce2) - 1;
      $e2(this, ce2, ve2, Ce2, Ze2, 0);
    }
    let He2 = Ce2 - 1, Ve2 = 1;
    for (this[ve2 + He2] = ce2 & 255; --He2 >= 0 && (Ve2 *= 256); )
      this[ve2 + He2] = ce2 / Ve2 & 255;
    return ve2 + Ce2;
  }, F2.prototype.writeUint8 = F2.prototype.writeUInt8 = function(ce2, ve2, Ce2) {
    return ce2 = +ce2, ve2 = ve2 >>> 0, Ce2 || $e2(this, ce2, ve2, 1, 255, 0), this[ve2] = ce2 & 255, ve2 + 1;
  }, F2.prototype.writeUint16LE = F2.prototype.writeUInt16LE = function(ce2, ve2, Ce2) {
    return ce2 = +ce2, ve2 = ve2 >>> 0, Ce2 || $e2(this, ce2, ve2, 2, 65535, 0), this[ve2] = ce2 & 255, this[ve2 + 1] = ce2 >>> 8, ve2 + 2;
  }, F2.prototype.writeUint16BE = F2.prototype.writeUInt16BE = function(ce2, ve2, Ce2) {
    return ce2 = +ce2, ve2 = ve2 >>> 0, Ce2 || $e2(this, ce2, ve2, 2, 65535, 0), this[ve2] = ce2 >>> 8, this[ve2 + 1] = ce2 & 255, ve2 + 2;
  }, F2.prototype.writeUint32LE = F2.prototype.writeUInt32LE = function(ce2, ve2, Ce2) {
    return ce2 = +ce2, ve2 = ve2 >>> 0, Ce2 || $e2(this, ce2, ve2, 4, 4294967295, 0), this[ve2 + 3] = ce2 >>> 24, this[ve2 + 2] = ce2 >>> 16, this[ve2 + 1] = ce2 >>> 8, this[ve2] = ce2 & 255, ve2 + 4;
  }, F2.prototype.writeUint32BE = F2.prototype.writeUInt32BE = function(ce2, ve2, Ce2) {
    return ce2 = +ce2, ve2 = ve2 >>> 0, Ce2 || $e2(this, ce2, ve2, 4, 4294967295, 0), this[ve2] = ce2 >>> 24, this[ve2 + 1] = ce2 >>> 16, this[ve2 + 2] = ce2 >>> 8, this[ve2 + 3] = ce2 & 255, ve2 + 4;
  };
  function ye2(ue2, ce2, ve2, Ce2, Be2) {
    Ne2(ce2, Ce2, Be2, ue2, ve2, 7);
    let He2 = Number(ce2 & BigInt(4294967295));
    ue2[ve2++] = He2, He2 = He2 >> 8, ue2[ve2++] = He2, He2 = He2 >> 8, ue2[ve2++] = He2, He2 = He2 >> 8, ue2[ve2++] = He2;
    let Ve2 = Number(ce2 >> BigInt(32) & BigInt(4294967295));
    return ue2[ve2++] = Ve2, Ve2 = Ve2 >> 8, ue2[ve2++] = Ve2, Ve2 = Ve2 >> 8, ue2[ve2++] = Ve2, Ve2 = Ve2 >> 8, ue2[ve2++] = Ve2, ve2;
  }
  function he2(ue2, ce2, ve2, Ce2, Be2) {
    Ne2(ce2, Ce2, Be2, ue2, ve2, 7);
    let He2 = Number(ce2 & BigInt(4294967295));
    ue2[ve2 + 7] = He2, He2 = He2 >> 8, ue2[ve2 + 6] = He2, He2 = He2 >> 8, ue2[ve2 + 5] = He2, He2 = He2 >> 8, ue2[ve2 + 4] = He2;
    let Ve2 = Number(ce2 >> BigInt(32) & BigInt(4294967295));
    return ue2[ve2 + 3] = Ve2, Ve2 = Ve2 >> 8, ue2[ve2 + 2] = Ve2, Ve2 = Ve2 >> 8, ue2[ve2 + 1] = Ve2, Ve2 = Ve2 >> 8, ue2[ve2] = Ve2, ve2 + 8;
  }
  F2.prototype.writeBigUInt64LE = J2(function(ce2, ve2 = 0) {
    return ye2(this, ce2, ve2, BigInt(0), BigInt("0xffffffffffffffff"));
  }), F2.prototype.writeBigUInt64BE = J2(function(ce2, ve2 = 0) {
    return he2(this, ce2, ve2, BigInt(0), BigInt("0xffffffffffffffff"));
  }), F2.prototype.writeIntLE = function(ce2, ve2, Ce2, Be2) {
    if (ce2 = +ce2, ve2 = ve2 >>> 0, !Be2) {
      const Ke2 = Math.pow(2, 8 * Ce2 - 1);
      $e2(this, ce2, ve2, Ce2, Ke2 - 1, -Ke2);
    }
    let He2 = 0, Ve2 = 1, Ze2 = 0;
    for (this[ve2] = ce2 & 255; ++He2 < Ce2 && (Ve2 *= 256); )
      ce2 < 0 && Ze2 === 0 && this[ve2 + He2 - 1] !== 0 && (Ze2 = 1), this[ve2 + He2] = (ce2 / Ve2 >> 0) - Ze2 & 255;
    return ve2 + Ce2;
  }, F2.prototype.writeIntBE = function(ce2, ve2, Ce2, Be2) {
    if (ce2 = +ce2, ve2 = ve2 >>> 0, !Be2) {
      const Ke2 = Math.pow(2, 8 * Ce2 - 1);
      $e2(this, ce2, ve2, Ce2, Ke2 - 1, -Ke2);
    }
    let He2 = Ce2 - 1, Ve2 = 1, Ze2 = 0;
    for (this[ve2 + He2] = ce2 & 255; --He2 >= 0 && (Ve2 *= 256); )
      ce2 < 0 && Ze2 === 0 && this[ve2 + He2 + 1] !== 0 && (Ze2 = 1), this[ve2 + He2] = (ce2 / Ve2 >> 0) - Ze2 & 255;
    return ve2 + Ce2;
  }, F2.prototype.writeInt8 = function(ce2, ve2, Ce2) {
    return ce2 = +ce2, ve2 = ve2 >>> 0, Ce2 || $e2(this, ce2, ve2, 1, 127, -128), ce2 < 0 && (ce2 = 255 + ce2 + 1), this[ve2] = ce2 & 255, ve2 + 1;
  }, F2.prototype.writeInt16LE = function(ce2, ve2, Ce2) {
    return ce2 = +ce2, ve2 = ve2 >>> 0, Ce2 || $e2(this, ce2, ve2, 2, 32767, -32768), this[ve2] = ce2 & 255, this[ve2 + 1] = ce2 >>> 8, ve2 + 2;
  }, F2.prototype.writeInt16BE = function(ce2, ve2, Ce2) {
    return ce2 = +ce2, ve2 = ve2 >>> 0, Ce2 || $e2(this, ce2, ve2, 2, 32767, -32768), this[ve2] = ce2 >>> 8, this[ve2 + 1] = ce2 & 255, ve2 + 2;
  }, F2.prototype.writeInt32LE = function(ce2, ve2, Ce2) {
    return ce2 = +ce2, ve2 = ve2 >>> 0, Ce2 || $e2(this, ce2, ve2, 4, 2147483647, -2147483648), this[ve2] = ce2 & 255, this[ve2 + 1] = ce2 >>> 8, this[ve2 + 2] = ce2 >>> 16, this[ve2 + 3] = ce2 >>> 24, ve2 + 4;
  }, F2.prototype.writeInt32BE = function(ce2, ve2, Ce2) {
    return ce2 = +ce2, ve2 = ve2 >>> 0, Ce2 || $e2(this, ce2, ve2, 4, 2147483647, -2147483648), ce2 < 0 && (ce2 = 4294967295 + ce2 + 1), this[ve2] = ce2 >>> 24, this[ve2 + 1] = ce2 >>> 16, this[ve2 + 2] = ce2 >>> 8, this[ve2 + 3] = ce2 & 255, ve2 + 4;
  }, F2.prototype.writeBigInt64LE = J2(function(ce2, ve2 = 0) {
    return ye2(this, ce2, ve2, -BigInt("0x8000000000000000"), BigInt("0x7fffffffffffffff"));
  }), F2.prototype.writeBigInt64BE = J2(function(ce2, ve2 = 0) {
    return he2(this, ce2, ve2, -BigInt("0x8000000000000000"), BigInt("0x7fffffffffffffff"));
  });
  function Me2(ue2, ce2, ve2, Ce2, Be2, He2) {
    if (ve2 + Ce2 > ue2.length)
      throw new RangeError("Index out of range");
    if (ve2 < 0)
      throw new RangeError("Index out of range");
  }
  function Ae2(ue2, ce2, ve2, Ce2, Be2) {
    return ce2 = +ce2, ve2 = ve2 >>> 0, Be2 || Me2(ue2, ce2, ve2, 4), c.write(ue2, ce2, ve2, Ce2, 23, 4), ve2 + 4;
  }
  F2.prototype.writeFloatLE = function(ce2, ve2, Ce2) {
    return Ae2(this, ce2, ve2, true, Ce2);
  }, F2.prototype.writeFloatBE = function(ce2, ve2, Ce2) {
    return Ae2(this, ce2, ve2, false, Ce2);
  };
  function xe2(ue2, ce2, ve2, Ce2, Be2) {
    return ce2 = +ce2, ve2 = ve2 >>> 0, Be2 || Me2(ue2, ce2, ve2, 8), c.write(ue2, ce2, ve2, Ce2, 52, 8), ve2 + 8;
  }
  F2.prototype.writeDoubleLE = function(ce2, ve2, Ce2) {
    return xe2(this, ce2, ve2, true, Ce2);
  }, F2.prototype.writeDoubleBE = function(ce2, ve2, Ce2) {
    return xe2(this, ce2, ve2, false, Ce2);
  }, F2.prototype.copy = function(ce2, ve2, Ce2, Be2) {
    if (!F2.isBuffer(ce2))
      throw new TypeError("argument should be a Buffer");
    if (Ce2 || (Ce2 = 0), !Be2 && Be2 !== 0 && (Be2 = this.length), ve2 >= ce2.length && (ve2 = ce2.length), ve2 || (ve2 = 0), Be2 > 0 && Be2 < Ce2 && (Be2 = Ce2), Be2 === Ce2 || ce2.length === 0 || this.length === 0)
      return 0;
    if (ve2 < 0)
      throw new RangeError("targetStart out of bounds");
    if (Ce2 < 0 || Ce2 >= this.length)
      throw new RangeError("Index out of range");
    if (Be2 < 0)
      throw new RangeError("sourceEnd out of bounds");
    Be2 > this.length && (Be2 = this.length), ce2.length - ve2 < Be2 - Ce2 && (Be2 = ce2.length - ve2 + Ce2);
    const He2 = Be2 - Ce2;
    return this === ce2 && typeof p2.prototype.copyWithin == "function" ? this.copyWithin(ve2, Ce2, Be2) : p2.prototype.set.call(ce2, this.subarray(Ce2, Be2), ve2), He2;
  }, F2.prototype.fill = function(ce2, ve2, Ce2, Be2) {
    if (typeof ce2 == "string") {
      if (typeof ve2 == "string" ? (Be2 = ve2, ve2 = 0, Ce2 = this.length) : typeof Ce2 == "string" && (Be2 = Ce2, Ce2 = this.length), Be2 !== void 0 && typeof Be2 != "string")
        throw new TypeError("encoding must be a string");
      if (typeof Be2 == "string" && !F2.isEncoding(Be2))
        throw new TypeError("Unknown encoding: " + Be2);
      if (ce2.length === 1) {
        const Ve2 = ce2.charCodeAt(0);
        (Be2 === "utf8" && Ve2 < 128 || Be2 === "latin1") && (ce2 = Ve2);
      }
    } else
      typeof ce2 == "number" ? ce2 = ce2 & 255 : typeof ce2 == "boolean" && (ce2 = Number(ce2));
    if (ve2 < 0 || this.length < ve2 || this.length < Ce2)
      throw new RangeError("Out of range index");
    if (Ce2 <= ve2)
      return this;
    ve2 = ve2 >>> 0, Ce2 = Ce2 === void 0 ? this.length : Ce2 >>> 0, ce2 || (ce2 = 0);
    let He2;
    if (typeof ce2 == "number")
      for (He2 = ve2; He2 < Ce2; ++He2)
        this[He2] = ce2;
    else {
      const Ve2 = F2.isBuffer(ce2) ? ce2 : F2.from(ce2, Be2), Ze2 = Ve2.length;
      if (Ze2 === 0)
        throw new TypeError('The value "' + ce2 + '" is invalid for argument "value"');
      for (He2 = 0; He2 < Ce2 - ve2; ++He2)
        this[He2 + ve2] = Ve2[He2 % Ze2];
    }
    return this;
  };
  const ae2 = {};
  function N2(ue2, ce2, ve2) {
    ae2[ue2] = class extends ve2 {
      constructor() {
        super(), Object.defineProperty(this, "message", { value: ce2.apply(this, arguments), writable: true, configurable: true }), this.name = `${this.name} [${ue2}]`, this.stack, delete this.name;
      }
      get code() {
        return ue2;
      }
      set code(Be2) {
        Object.defineProperty(this, "code", { configurable: true, enumerable: true, value: Be2, writable: true });
      }
      toString() {
        return `${this.name} [${ue2}]: ${this.message}`;
      }
    };
  }
  N2("ERR_BUFFER_OUT_OF_BOUNDS", function(ue2) {
    return ue2 ? `${ue2} is outside of buffer bounds` : "Attempt to access memory outside buffer bounds";
  }, RangeError), N2("ERR_INVALID_ARG_TYPE", function(ue2, ce2) {
    return `The "${ue2}" argument must be of type number. Received type ${typeof ce2}`;
  }, TypeError), N2("ERR_OUT_OF_RANGE", function(ue2, ce2, ve2) {
    let Ce2 = `The value of "${ue2}" is out of range.`, Be2 = ve2;
    return Number.isInteger(ve2) && Math.abs(ve2) > 2 ** 32 ? Be2 = re2(String(ve2)) : typeof ve2 == "bigint" && (Be2 = String(ve2), (ve2 > BigInt(2) ** BigInt(32) || ve2 < -(BigInt(2) ** BigInt(32))) && (Be2 = re2(Be2)), Be2 += "n"), Ce2 += ` It must be ${ce2}. Received ${Be2}`, Ce2;
  }, RangeError);
  function re2(ue2) {
    let ce2 = "", ve2 = ue2.length;
    const Ce2 = ue2[0] === "-" ? 1 : 0;
    for (; ve2 >= Ce2 + 4; ve2 -= 3)
      ce2 = `_${ue2.slice(ve2 - 3, ve2)}${ce2}`;
    return `${ue2.slice(0, ve2)}${ce2}`;
  }
  function fe2(ue2, ce2, ve2) {
    Oe2(ce2, "offset"), (ue2[ce2] === void 0 || ue2[ce2 + ve2] === void 0) && qe2(ce2, ue2.length - (ve2 + 1));
  }
  function Ne2(ue2, ce2, ve2, Ce2, Be2, He2) {
    if (ue2 > ve2 || ue2 < ce2) {
      const Ve2 = typeof ce2 == "bigint" ? "n" : "";
      let Ze2;
      throw He2 > 3 ? ce2 === 0 || ce2 === BigInt(0) ? Ze2 = `>= 0${Ve2} and < 2${Ve2} ** ${(He2 + 1) * 8}${Ve2}` : Ze2 = `>= -(2${Ve2} ** ${(He2 + 1) * 8 - 1}${Ve2}) and < 2 ** ${(He2 + 1) * 8 - 1}${Ve2}` : Ze2 = `>= ${ce2}${Ve2} and <= ${ve2}${Ve2}`, new ae2.ERR_OUT_OF_RANGE("value", Ze2, ue2);
    }
    fe2(Ce2, Be2, He2);
  }
  function Oe2(ue2, ce2) {
    if (typeof ue2 != "number")
      throw new ae2.ERR_INVALID_ARG_TYPE(ce2, "number", ue2);
  }
  function qe2(ue2, ce2, ve2) {
    throw Math.floor(ue2) !== ue2 ? (Oe2(ue2, ve2), new ae2.ERR_OUT_OF_RANGE(ve2 || "offset", "an integer", ue2)) : ce2 < 0 ? new ae2.ERR_BUFFER_OUT_OF_BOUNDS() : new ae2.ERR_OUT_OF_RANGE(ve2 || "offset", `>= ${ve2 ? 1 : 0} and <= ${ce2}`, ue2);
  }
  const je2 = /[^+/0-9A-Za-z-_]/g;
  function Fe2(ue2) {
    if (ue2 = ue2.split("=")[0], ue2 = ue2.trim().replace(je2, ""), ue2.length < 2)
      return "";
    for (; ue2.length % 4 !== 0; )
      ue2 = ue2 + "=";
    return ue2;
  }
  function yt(ue2, ce2) {
    ce2 = ce2 || 1 / 0;
    let ve2;
    const Ce2 = ue2.length;
    let Be2 = null;
    const He2 = [];
    for (let Ve2 = 0; Ve2 < Ce2; ++Ve2) {
      if (ve2 = ue2.charCodeAt(Ve2), ve2 > 55295 && ve2 < 57344) {
        if (!Be2) {
          if (ve2 > 56319) {
            (ce2 -= 3) > -1 && He2.push(239, 191, 189);
            continue;
          } else if (Ve2 + 1 === Ce2) {
            (ce2 -= 3) > -1 && He2.push(239, 191, 189);
            continue;
          }
          Be2 = ve2;
          continue;
        }
        if (ve2 < 56320) {
          (ce2 -= 3) > -1 && He2.push(239, 191, 189), Be2 = ve2;
          continue;
        }
        ve2 = (Be2 - 55296 << 10 | ve2 - 56320) + 65536;
      } else
        Be2 && (ce2 -= 3) > -1 && He2.push(239, 191, 189);
      if (Be2 = null, ve2 < 128) {
        if ((ce2 -= 1) < 0)
          break;
        He2.push(ve2);
      } else if (ve2 < 2048) {
        if ((ce2 -= 2) < 0)
          break;
        He2.push(ve2 >> 6 | 192, ve2 & 63 | 128);
      } else if (ve2 < 65536) {
        if ((ce2 -= 3) < 0)
          break;
        He2.push(ve2 >> 12 | 224, ve2 >> 6 & 63 | 128, ve2 & 63 | 128);
      } else if (ve2 < 1114112) {
        if ((ce2 -= 4) < 0)
          break;
        He2.push(ve2 >> 18 | 240, ve2 >> 12 & 63 | 128, ve2 >> 6 & 63 | 128, ve2 & 63 | 128);
      } else
        throw new Error("Invalid code point");
    }
    return He2;
  }
  function Xe2(ue2) {
    const ce2 = [];
    for (let ve2 = 0; ve2 < ue2.length; ++ve2)
      ce2.push(ue2.charCodeAt(ve2) & 255);
    return ce2;
  }
  function Ge2(ue2, ce2) {
    let ve2, Ce2, Be2;
    const He2 = [];
    for (let Ve2 = 0; Ve2 < ue2.length && !((ce2 -= 2) < 0); ++Ve2)
      ve2 = ue2.charCodeAt(Ve2), Ce2 = ve2 >> 8, Be2 = ve2 % 256, He2.push(Be2), He2.push(Ce2);
    return He2;
  }
  function V2(ue2) {
    return u2.toByteArray(Fe2(ue2));
  }
  function ge2(ue2, ce2, ve2, Ce2) {
    let Be2;
    for (Be2 = 0; Be2 < Ce2 && !(Be2 + ve2 >= ce2.length || Be2 >= ue2.length); ++Be2)
      ce2[Be2 + ve2] = ue2[Be2];
    return Be2;
  }
  function we2(ue2, ce2) {
    return ue2 instanceof ce2 || ue2 != null && ue2.constructor != null && ue2.constructor.name != null && ue2.constructor.name === ce2.name;
  }
  function We2(ue2) {
    return ue2 !== ue2;
  }
  const Re2 = function() {
    const ue2 = "0123456789abcdef", ce2 = new Array(256);
    for (let ve2 = 0; ve2 < 16; ++ve2) {
      const Ce2 = ve2 * 16;
      for (let Be2 = 0; Be2 < 16; ++Be2)
        ce2[Ce2 + Be2] = ue2[ve2] + ue2[Be2];
    }
    return ce2;
  }();
  function J2(ue2) {
    return typeof BigInt > "u" ? _e : ue2;
  }
  function _e() {
    throw new Error("BigInt not supported");
  }
})(buffer$3);
const Buffer$M = buffer$3.Buffer, Blob$1 = buffer$3.Blob, BlobOptions = buffer$3.BlobOptions, Buffer$1$1 = buffer$3.Buffer, File = buffer$3.File, FileOptions = buffer$3.FileOptions, INSPECT_MAX_BYTES = buffer$3.INSPECT_MAX_BYTES, SlowBuffer$1 = buffer$3.SlowBuffer, TranscodeEncoding = buffer$3.TranscodeEncoding, atob$1 = buffer$3.atob, btoa$1 = buffer$3.btoa, constants$1 = buffer$3.constants, isAscii = buffer$3.isAscii, isUtf8 = buffer$3.isUtf8, kMaxLength = buffer$3.kMaxLength, kStringMaxLength = buffer$3.kStringMaxLength, resolveObjectURL = buffer$3.resolveObjectURL, transcode = buffer$3.transcode, dist$3 = /* @__PURE__ */ Object.freeze(/* @__PURE__ */ Object.defineProperty({ __proto__: null, Blob: Blob$1, BlobOptions, Buffer: Buffer$1$1, File, FileOptions, INSPECT_MAX_BYTES, SlowBuffer: SlowBuffer$1, TranscodeEncoding, atob: atob$1, btoa: btoa$1, constants: constants$1, default: Buffer$M, isAscii, isUtf8, kMaxLength, kStringMaxLength, resolveObjectURL, transcode }, Symbol.toStringTag, { value: "Module" }));
var base64$2 = { exports: {} };
(function(a420, u2) {
  (function(c, l2) {
    a420.exports = l2();
  })(typeof self < "u" ? self : typeof window < "u" ? window : commonjsGlobal$1, function() {
    var c = "3.7.2", l2 = c, v2 = typeof atob == "function", p2 = typeof btoa == "function", _ = typeof Buffer$M == "function", I2 = typeof TextDecoder == "function" ? new TextDecoder() : void 0, P2 = typeof TextEncoder == "function" ? new TextEncoder() : void 0, $ = "ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/=", F2 = Array.prototype.slice.call($), H2 = function(he2) {
      var Me2 = {};
      return he2.forEach(function(Ae2, xe2) {
        return Me2[Ae2] = xe2;
      }), Me2;
    }(F2), j = /^(?:[A-Za-z\d+\/]{4})*?(?:[A-Za-z\d+\/]{2}(?:==)?|[A-Za-z\d+\/]{3}=?)?$/, ee2 = String.fromCharCode.bind(String), X2 = typeof Uint8Array.from == "function" ? Uint8Array.from.bind(Uint8Array) : function(he2, Me2) {
      return Me2 === void 0 && (Me2 = function(Ae2) {
        return Ae2;
      }), new Uint8Array(Array.prototype.slice.call(he2, 0).map(Me2));
    }, ie2 = function(he2) {
      return he2.replace(/=/g, "").replace(/[+\/]/g, function(Me2) {
        return Me2 == "+" ? "-" : "_";
      });
    }, Q2 = function(he2) {
      return he2.replace(/[^A-Za-z0-9\+\/]/g, "");
    }, ne2 = function(he2) {
      for (var Me2, Ae2, xe2, ae2, N2 = "", re2 = he2.length % 3, fe2 = 0; fe2 < he2.length; ) {
        if ((Ae2 = he2.charCodeAt(fe2++)) > 255 || (xe2 = he2.charCodeAt(fe2++)) > 255 || (ae2 = he2.charCodeAt(fe2++)) > 255)
          throw new TypeError("invalid character found");
        Me2 = Ae2 << 16 | xe2 << 8 | ae2, N2 += F2[Me2 >> 18 & 63] + F2[Me2 >> 12 & 63] + F2[Me2 >> 6 & 63] + F2[Me2 & 63];
      }
      return re2 ? N2.slice(0, re2 - 3) + "===".substring(re2) : N2;
    }, Z2 = p2 ? function(he2) {
      return btoa(he2);
    } : _ ? function(he2) {
      return Buffer$M.from(he2, "binary").toString("base64");
    } : ne2, de2 = _ ? function(he2) {
      return Buffer$M.from(he2).toString("base64");
    } : function(he2) {
      for (var Me2 = 4096, Ae2 = [], xe2 = 0, ae2 = he2.length; xe2 < ae2; xe2 += Me2)
        Ae2.push(ee2.apply(null, he2.subarray(xe2, xe2 + Me2)));
      return Z2(Ae2.join(""));
    }, pe2 = function(he2, Me2) {
      return Me2 === void 0 && (Me2 = false), Me2 ? ie2(de2(he2)) : de2(he2);
    }, le2 = function(he2) {
      if (he2.length < 2) {
        var Me2 = he2.charCodeAt(0);
        return Me2 < 128 ? he2 : Me2 < 2048 ? ee2(192 | Me2 >>> 6) + ee2(128 | Me2 & 63) : ee2(224 | Me2 >>> 12 & 15) + ee2(128 | Me2 >>> 6 & 63) + ee2(128 | Me2 & 63);
      } else {
        var Me2 = 65536 + (he2.charCodeAt(0) - 55296) * 1024 + (he2.charCodeAt(1) - 56320);
        return ee2(240 | Me2 >>> 18 & 7) + ee2(128 | Me2 >>> 12 & 63) + ee2(128 | Me2 >>> 6 & 63) + ee2(128 | Me2 & 63);
      }
    }, be2 = /[\uD800-\uDBFF][\uDC00-\uDFFFF]|[^\x00-\x7F]/g, ke2 = function(he2) {
      return he2.replace(be2, le2);
    }, Te2 = _ ? function(he2) {
      return Buffer$M.from(he2, "utf8").toString("base64");
    } : P2 ? function(he2) {
      return de2(P2.encode(he2));
    } : function(he2) {
      return Z2(ke2(he2));
    }, q2 = function(he2, Me2) {
      return Me2 === void 0 && (Me2 = false), Me2 ? ie2(Te2(he2)) : Te2(he2);
    }, z2 = function(he2) {
      return q2(he2, true);
    }, C2 = /[\xC0-\xDF][\x80-\xBF]|[\xE0-\xEF][\x80-\xBF]{2}|[\xF0-\xF7][\x80-\xBF]{3}/g, b = function(he2) {
      switch (he2.length) {
        case 4:
          var Me2 = (7 & he2.charCodeAt(0)) << 18 | (63 & he2.charCodeAt(1)) << 12 | (63 & he2.charCodeAt(2)) << 6 | 63 & he2.charCodeAt(3), Ae2 = Me2 - 65536;
          return ee2((Ae2 >>> 10) + 55296) + ee2((Ae2 & 1023) + 56320);
        case 3:
          return ee2((15 & he2.charCodeAt(0)) << 12 | (63 & he2.charCodeAt(1)) << 6 | 63 & he2.charCodeAt(2));
        default:
          return ee2((31 & he2.charCodeAt(0)) << 6 | 63 & he2.charCodeAt(1));
      }
    }, E2 = function(he2) {
      return he2.replace(C2, b);
    }, k = function(he2) {
      if (he2 = he2.replace(/\s+/g, ""), !j.test(he2))
        throw new TypeError("malformed base64.");
      he2 += "==".slice(2 - (he2.length & 3));
      for (var Me2, Ae2 = "", xe2, ae2, N2 = 0; N2 < he2.length; )
        Me2 = H2[he2.charAt(N2++)] << 18 | H2[he2.charAt(N2++)] << 12 | (xe2 = H2[he2.charAt(N2++)]) << 6 | (ae2 = H2[he2.charAt(N2++)]), Ae2 += xe2 === 64 ? ee2(Me2 >> 16 & 255) : ae2 === 64 ? ee2(Me2 >> 16 & 255, Me2 >> 8 & 255) : ee2(Me2 >> 16 & 255, Me2 >> 8 & 255, Me2 & 255);
      return Ae2;
    }, O2 = v2 ? function(he2) {
      return atob(Q2(he2));
    } : _ ? function(he2) {
      return Buffer$M.from(he2, "base64").toString("binary");
    } : k, A2 = _ ? function(he2) {
      return X2(Buffer$M.from(he2, "base64"));
    } : function(he2) {
      return X2(O2(he2), function(Me2) {
        return Me2.charCodeAt(0);
      });
    }, x2 = function(he2) {
      return A2(B2(he2));
    }, Y2 = _ ? function(he2) {
      return Buffer$M.from(he2, "base64").toString("utf8");
    } : I2 ? function(he2) {
      return I2.decode(A2(he2));
    } : function(he2) {
      return E2(O2(he2));
    }, B2 = function(he2) {
      return Q2(he2.replace(/[-_]/g, function(Me2) {
        return Me2 == "-" ? "+" : "/";
      }));
    }, T2 = function(he2) {
      return Y2(B2(he2));
    }, D2 = function(he2) {
      if (typeof he2 != "string")
        return false;
      var Me2 = he2.replace(/\s+/g, "").replace(/={0,2}$/, "");
      return !/[^\s0-9a-zA-Z\+/]/.test(Me2) || !/[^\s0-9a-zA-Z\-_]/.test(Me2);
    }, te2 = function(he2) {
      return { value: he2, enumerable: false, writable: true, configurable: true };
    }, me2 = function() {
      var he2 = function(Me2, Ae2) {
        return Object.defineProperty(String.prototype, Me2, te2(Ae2));
      };
      he2("fromBase64", function() {
        return T2(this);
      }), he2("toBase64", function(Me2) {
        return q2(this, Me2);
      }), he2("toBase64URI", function() {
        return q2(this, true);
      }), he2("toBase64URL", function() {
        return q2(this, true);
      }), he2("toUint8Array", function() {
        return x2(this);
      });
    }, Ie2 = function() {
      var he2 = function(Me2, Ae2) {
        return Object.defineProperty(Uint8Array.prototype, Me2, te2(Ae2));
      };
      he2("toBase64", function(Me2) {
        return pe2(this, Me2);
      }), he2("toBase64URI", function() {
        return pe2(this, true);
      }), he2("toBase64URL", function() {
        return pe2(this, true);
      });
    }, $e2 = function() {
      me2(), Ie2();
    }, ye2 = { version: c, VERSION: l2, atob: O2, atobPolyfill: k, btoa: Z2, btoaPolyfill: ne2, fromBase64: T2, toBase64: q2, encode: q2, encodeURI: z2, encodeURL: z2, utob: ke2, btou: E2, decode: T2, isValid: D2, fromUint8Array: pe2, toUint8Array: x2, extendString: me2, extendUint8Array: Ie2, extendBuiltins: $e2 };
    return ye2.Base64 = {}, Object.keys(ye2).forEach(function(he2) {
      return ye2.Base64[he2] = ye2[he2];
    }), ye2;
  });
})(base64$2);
var base64Exports = base64$2.exports;
Object.defineProperty(convertMetadata, "__esModule", { value: true });
convertMetadata.convertMetadataFromGrpcWeb = convertMetadata.convertMetadataToGrpcWeb = void 0;
const grpc_web_1$4 = grpcWebClient_umdExports, nice_grpc_common_1$5 = lib, js_base64_1 = base64Exports;
function convertMetadataToGrpcWeb(a420) {
  const u2 = new grpc_web_1$4.grpc.Metadata();
  for (const [c, l2] of a420)
    for (const v2 of l2)
      u2.append(c, typeof v2 == "string" ? v2 : js_base64_1.Base64.fromUint8Array(v2));
  return u2;
}
convertMetadata.convertMetadataToGrpcWeb = convertMetadataToGrpcWeb;
function convertMetadataFromGrpcWeb(a420) {
  const u2 = (0, nice_grpc_common_1$5.Metadata)();
  for (const [c, l2] of Object.entries(a420.headersMap))
    u2.set(c, c.endsWith("-bin") ? l2.map((v2) => js_base64_1.Base64.toUint8Array(v2)) : l2);
  return u2;
}
convertMetadata.convertMetadataFromGrpcWeb = convertMetadataFromGrpcWeb;
var __importDefault$h = commonjsGlobal$1 && commonjsGlobal$1.__importDefault || function(a420) {
  return a420 && a420.__esModule ? a420 : { default: a420 };
};
Object.defineProperty(createBidiStreamingMethod$1, "__esModule", { value: true });
createBidiStreamingMethod$1.createBidiStreamingMethod = void 0;
const nice_grpc_common_1$4 = lib, grpc_web_1$3 = grpcWebClient_umdExports, abort_controller_x_1$4 = require$$1$3, node_abort_controller_1$3 = __importDefault$h(browserExports$2), AsyncSink_1$1 = AsyncSink$1, service_definitions_1$4 = serviceDefinitions, isAsyncIterable_1$3 = isAsyncIterable$1, convertMetadata_1$3 = convertMetadata;
function createBidiStreamingMethod(a420, u2, c, l2) {
  const v2 = (0, service_definitions_1$4.toGrpcWebMethodDefinition)(a420), p2 = { path: a420.path, requestStream: a420.requestStream, responseStream: a420.responseStream, options: a420.options };
  async function* _(P2, $) {
    if (!(0, isAsyncIterable_1$3.isAsyncIterable)(P2))
      throw new Error("A middleware passed invalid request to next(): expected a single message for bidirectional streaming method");
    const { metadata: F2 = (0, nice_grpc_common_1$4.Metadata)(), signal: H2 = new node_abort_controller_1$3.default().signal, onHeader: j, onTrailer: ee2 } = $, X2 = new node_abort_controller_1$3.default(), ie2 = new AsyncSink_1$1.AsyncSink(), Q2 = grpc_web_1$3.grpc.client(v2, { host: u2.address, transport: u2.transport });
    Q2.onHeaders((de2) => {
      j == null || j((0, convertMetadata_1$3.convertMetadataFromGrpcWeb)(de2));
    }), Q2.onMessage((de2) => {
      ie2.write(de2);
    }), Q2.onEnd((de2, pe2, le2) => {
      ee2 == null || ee2((0, convertMetadata_1$3.convertMetadataFromGrpcWeb)(le2)), de2 === grpc_web_1$3.grpc.Code.OK ? ie2.end() : ie2.error(new nice_grpc_common_1$4.ClientError(a420.path, +de2, pe2));
    }), Q2.start((0, convertMetadata_1$3.convertMetadataToGrpcWeb)(F2));
    let ne2;
    pipeRequest$1(X2.signal, P2, Q2, a420).then(() => {
      Q2.finishSend();
    }, (de2) => {
      (0, abort_controller_x_1$4.isAbortError)(de2) || (ne2 = de2, Q2.close(), ie2.end());
    });
    const Z2 = () => {
      ie2.error(new abort_controller_x_1$4.AbortError()), X2.abort(), Q2.close();
    };
    H2.addEventListener("abort", Z2);
    try {
      yield* ie2;
    } finally {
      if (X2.abort(), H2.removeEventListener("abort", Z2), (0, abort_controller_x_1$4.throwIfAborted)(H2), ne2)
        throw ne2;
    }
  }
  const I2 = c == null ? _ : (P2, $) => c({ method: p2, requestStream: true, request: P2, responseStream: true, next: _ }, $);
  return (P2, $) => {
    const H2 = I2(P2, { ...l2, ...$ })[Symbol.asyncIterator]();
    return { [Symbol.asyncIterator]() {
      return { async next() {
        const j = await H2.next();
        return j.done && j.value != null ? await H2.throw(new Error("A middleware returned a message, but expected to return void for bidirectional streaming method")) : j;
      }, return() {
        return H2.return();
      }, throw(j) {
        return H2.throw(j);
      } };
    } };
  };
}
createBidiStreamingMethod$1.createBidiStreamingMethod = createBidiStreamingMethod;
async function pipeRequest$1(a420, u2, c, l2) {
  for await (const v2 of u2)
    (0, abort_controller_x_1$4.throwIfAborted)(a420), c.send({ serializeBinary: () => l2.requestSerialize(v2) });
}
var createClientStreamingMethod$1 = {}, __importDefault$g = commonjsGlobal$1 && commonjsGlobal$1.__importDefault || function(a420) {
  return a420 && a420.__esModule ? a420 : { default: a420 };
};
Object.defineProperty(createClientStreamingMethod$1, "__esModule", { value: true });
createClientStreamingMethod$1.createClientStreamingMethod = void 0;
const nice_grpc_common_1$3 = lib, grpc_web_1$2 = grpcWebClient_umdExports, abort_controller_x_1$3 = require$$1$3, node_abort_controller_1$2 = __importDefault$g(browserExports$2), service_definitions_1$3 = serviceDefinitions, isAsyncIterable_1$2 = isAsyncIterable$1, convertMetadata_1$2 = convertMetadata;
function createClientStreamingMethod(a420, u2, c, l2) {
  const v2 = (0, service_definitions_1$3.toGrpcWebMethodDefinition)(a420), p2 = { path: a420.path, requestStream: a420.requestStream, responseStream: a420.responseStream, options: a420.options };
  async function* _(P2, $) {
    if (!(0, isAsyncIterable_1$2.isAsyncIterable)(P2))
      throw new Error("A middleware passed invalid request to next(): expected a single message for client streaming method");
    const { metadata: F2 = (0, nice_grpc_common_1$3.Metadata)(), signal: H2 = new node_abort_controller_1$2.default().signal, onHeader: j, onTrailer: ee2 } = $;
    return await (0, abort_controller_x_1$3.execute)(H2, (X2, ie2) => {
      const Q2 = new node_abort_controller_1$2.default();
      let ne2;
      const Z2 = grpc_web_1$2.grpc.client(v2, { host: u2.address, transport: u2.transport });
      return Z2.onHeaders((de2) => {
        j == null || j((0, convertMetadata_1$2.convertMetadataFromGrpcWeb)(de2));
      }), Z2.onMessage((de2) => {
        ne2 = de2;
      }), Z2.onEnd((de2, pe2, le2) => {
        ee2 == null || ee2((0, convertMetadata_1$2.convertMetadataFromGrpcWeb)(le2)), Q2.abort(), de2 === grpc_web_1$2.grpc.Code.OK ? X2(ne2) : ie2(new nice_grpc_common_1$3.ClientError(a420.path, +de2, pe2));
      }), Z2.start((0, convertMetadata_1$2.convertMetadataToGrpcWeb)(F2)), pipeRequest(Q2.signal, P2, Z2, a420).then(() => {
        Z2.finishSend();
      }, (de2) => {
        (0, abort_controller_x_1$3.isAbortError)(de2) || (ie2(de2), Z2.close());
      }), () => {
        Q2.abort(), Z2.close();
      };
    });
  }
  const I2 = c == null ? _ : (P2, $) => c({ method: p2, requestStream: true, request: P2, responseStream: false, next: _ }, $);
  return async (P2, $) => {
    const H2 = I2(P2, { ...l2, ...$ })[Symbol.asyncIterator]();
    let j = await H2.next();
    for (; ; ) {
      if (!j.done) {
        j = await H2.throw(new Error("A middleware yielded a message, but expected to only return a message for client streaming method"));
        continue;
      }
      if (j.value == null) {
        j = await H2.throw(new Error("A middleware returned void, but expected to return a message for client streaming method"));
        continue;
      }
      return j.value;
    }
  };
}
createClientStreamingMethod$1.createClientStreamingMethod = createClientStreamingMethod;
async function pipeRequest(a420, u2, c, l2) {
  for await (const v2 of u2)
    (0, abort_controller_x_1$3.throwIfAborted)(a420), c.send({ serializeBinary: () => l2.requestSerialize(v2) });
}
var createServerStreamingMethod$1 = {}, __importDefault$f = commonjsGlobal$1 && commonjsGlobal$1.__importDefault || function(a420) {
  return a420 && a420.__esModule ? a420 : { default: a420 };
};
Object.defineProperty(createServerStreamingMethod$1, "__esModule", { value: true });
createServerStreamingMethod$1.createServerStreamingMethod = void 0;
const grpc_web_1$1 = grpcWebClient_umdExports, abort_controller_x_1$2 = require$$1$3, AsyncSink_1 = AsyncSink$1, nice_grpc_common_1$2 = lib, node_abort_controller_1$1 = __importDefault$f(browserExports$2), service_definitions_1$2 = serviceDefinitions, convertMetadata_1$1 = convertMetadata, isAsyncIterable_1$1 = isAsyncIterable$1;
function createServerStreamingMethod(a420, u2, c, l2) {
  const v2 = (0, service_definitions_1$2.toGrpcWebMethodDefinition)(a420), p2 = { path: a420.path, requestStream: a420.requestStream, responseStream: a420.responseStream, options: a420.options };
  async function* _(P2, $) {
    if ((0, isAsyncIterable_1$1.isAsyncIterable)(P2))
      throw new Error("A middleware passed invalid request to next(): expected a single message for server streaming method");
    const { metadata: F2 = (0, nice_grpc_common_1$2.Metadata)(), signal: H2 = new node_abort_controller_1$1.default().signal, onHeader: j, onTrailer: ee2 } = $, X2 = new AsyncSink_1.AsyncSink(), ie2 = grpc_web_1$1.grpc.client(v2, { host: u2.address, transport: u2.transport });
    ie2.onHeaders((ne2) => {
      j == null || j((0, convertMetadata_1$1.convertMetadataFromGrpcWeb)(ne2));
    }), ie2.onMessage((ne2) => {
      X2.write(ne2);
    }), ie2.onEnd((ne2, Z2, de2) => {
      ee2 == null || ee2((0, convertMetadata_1$1.convertMetadataFromGrpcWeb)(de2)), ne2 === grpc_web_1$1.grpc.Code.OK ? X2.end() : X2.error(new nice_grpc_common_1$2.ClientError(a420.path, +ne2, Z2));
    }), ie2.start((0, convertMetadata_1$1.convertMetadataToGrpcWeb)(F2)), ie2.send({ serializeBinary: () => a420.requestSerialize(P2) }), ie2.finishSend();
    const Q2 = () => {
      X2.error(new abort_controller_x_1$2.AbortError()), ie2.close();
    };
    H2.addEventListener("abort", Q2);
    try {
      yield* X2;
    } finally {
      H2.removeEventListener("abort", Q2), (0, abort_controller_x_1$2.throwIfAborted)(H2);
    }
  }
  const I2 = c == null ? _ : (P2, $) => c({ method: p2, requestStream: false, request: P2, responseStream: true, next: _ }, $);
  return (P2, $) => {
    const H2 = I2(P2, { ...l2, ...$ })[Symbol.asyncIterator]();
    return { [Symbol.asyncIterator]() {
      return { async next() {
        const j = await H2.next();
        return j.done && j.value != null ? await H2.throw(new Error("A middleware returned a message, but expected to return void for server streaming method")) : j;
      }, return() {
        return H2.return();
      }, throw(j) {
        return H2.throw(j);
      } };
    } };
  };
}
createServerStreamingMethod$1.createServerStreamingMethod = createServerStreamingMethod;
var createUnaryMethod$1 = {}, __importDefault$e = commonjsGlobal$1 && commonjsGlobal$1.__importDefault || function(a420) {
  return a420 && a420.__esModule ? a420 : { default: a420 };
};
Object.defineProperty(createUnaryMethod$1, "__esModule", { value: true });
createUnaryMethod$1.createUnaryMethod = void 0;
const nice_grpc_common_1$1 = lib, grpc_web_1 = grpcWebClient_umdExports, abort_controller_x_1$1 = require$$1$3, node_abort_controller_1 = __importDefault$e(browserExports$2), service_definitions_1$1 = serviceDefinitions, isAsyncIterable_1 = isAsyncIterable$1, convertMetadata_1 = convertMetadata;
function createUnaryMethod(a420, u2, c, l2) {
  const v2 = (0, service_definitions_1$1.toGrpcWebMethodDefinition)(a420), p2 = { path: a420.path, requestStream: a420.requestStream, responseStream: a420.responseStream, options: a420.options };
  async function* _(P2, $) {
    if ((0, isAsyncIterable_1.isAsyncIterable)(P2))
      throw new Error("A middleware passed invalid request to next(): expected a single message for unary method");
    const { metadata: F2 = (0, nice_grpc_common_1$1.Metadata)(), signal: H2 = new node_abort_controller_1.default().signal, onHeader: j, onTrailer: ee2 } = $;
    return await (0, abort_controller_x_1$1.execute)(H2, (X2, ie2) => {
      let Q2;
      const ne2 = grpc_web_1.grpc.client(v2, { host: u2.address, transport: u2.transport });
      return ne2.onHeaders((Z2) => {
        j == null || j((0, convertMetadata_1.convertMetadataFromGrpcWeb)(Z2));
      }), ne2.onMessage((Z2) => {
        Q2 = Z2;
      }), ne2.onEnd((Z2, de2, pe2) => {
        ee2 == null || ee2((0, convertMetadata_1.convertMetadataFromGrpcWeb)(pe2)), Z2 === grpc_web_1.grpc.Code.OK ? X2(Q2) : ie2(new nice_grpc_common_1$1.ClientError(a420.path, +Z2, de2));
      }), ne2.start((0, convertMetadata_1.convertMetadataToGrpcWeb)(F2)), ne2.send({ serializeBinary: () => a420.requestSerialize(P2) }), ne2.finishSend(), () => {
        ne2.close();
      };
    });
  }
  const I2 = c == null ? _ : (P2, $) => c({ method: p2, requestStream: false, request: P2, responseStream: false, next: _ }, $);
  return async (P2, $) => {
    const H2 = I2(P2, { ...l2, ...$ })[Symbol.asyncIterator]();
    let j = await H2.next();
    for (; ; ) {
      if (!j.done) {
        j = await H2.throw(new Error("A middleware yielded a message, but expected to only return a message for unary method"));
        continue;
      }
      if (j.value == null) {
        j = await H2.throw(new Error("A middleware returned void, but expected to return a message for unary method"));
        continue;
      }
      return j.value;
    }
  };
}
createUnaryMethod$1.createUnaryMethod = createUnaryMethod;
Object.defineProperty(ClientFactory, "__esModule", { value: true });
ClientFactory.createClient = ClientFactory.createClientFactory = void 0;
const nice_grpc_common_1 = lib, service_definitions_1 = serviceDefinitions, createBidiStreamingMethod_1 = createBidiStreamingMethod$1, createClientStreamingMethod_1 = createClientStreamingMethod$1, createServerStreamingMethod_1 = createServerStreamingMethod$1, createUnaryMethod_1 = createUnaryMethod$1;
function createClientFactory() {
  return createClientFactoryWithMiddleware();
}
ClientFactory.createClientFactory = createClientFactory;
function createClient(a420, u2, c) {
  return createClientFactory().create(a420, u2, c);
}
ClientFactory.createClient = createClient;
function createClientFactoryWithMiddleware(a420) {
  return { use(u2) {
    return createClientFactoryWithMiddleware(a420 == null ? u2 : (0, nice_grpc_common_1.composeClientMiddleware)(a420, u2));
  }, create(u2, c, l2 = {}) {
    const v2 = {}, p2 = Object.entries((0, service_definitions_1.normalizeServiceDefinition)(u2));
    for (const [_, I2] of p2) {
      const P2 = { ...l2["*"], ...l2[_] };
      I2.requestStream ? I2.responseStream ? v2[_] = (0, createBidiStreamingMethod_1.createBidiStreamingMethod)(I2, c, a420, P2) : v2[_] = (0, createClientStreamingMethod_1.createClientStreamingMethod)(I2, c, a420, P2) : I2.responseStream ? v2[_] = (0, createServerStreamingMethod_1.createServerStreamingMethod)(I2, c, a420, P2) : v2[_] = (0, createUnaryMethod_1.createUnaryMethod)(I2, c, a420, P2);
    }
    return v2;
  } };
}
var Client = {};
Object.defineProperty(Client, "__esModule", { value: true });
(function(a420) {
  var u2 = commonjsGlobal$1 && commonjsGlobal$1.__createBinding || (Object.create ? function(v2, p2, _, I2) {
    I2 === void 0 && (I2 = _);
    var P2 = Object.getOwnPropertyDescriptor(p2, _);
    (!P2 || ("get" in P2 ? !p2.__esModule : P2.writable || P2.configurable)) && (P2 = { enumerable: true, get: function() {
      return p2[_];
    } }), Object.defineProperty(v2, I2, P2);
  } : function(v2, p2, _, I2) {
    I2 === void 0 && (I2 = _), v2[I2] = p2[_];
  }), c = commonjsGlobal$1 && commonjsGlobal$1.__exportStar || function(v2, p2) {
    for (var _ in v2)
      _ !== "default" && !Object.prototype.hasOwnProperty.call(p2, _) && u2(p2, v2, _);
  };
  Object.defineProperty(a420, "__esModule", { value: true }), a420.Status = a420.Metadata = a420.composeClientMiddleware = a420.ClientError = void 0;
  var l2 = lib;
  Object.defineProperty(a420, "ClientError", { enumerable: true, get: function() {
    return l2.ClientError;
  } }), Object.defineProperty(a420, "composeClientMiddleware", { enumerable: true, get: function() {
    return l2.composeClientMiddleware;
  } }), Object.defineProperty(a420, "Metadata", { enumerable: true, get: function() {
    return l2.Metadata;
  } }), Object.defineProperty(a420, "Status", { enumerable: true, get: function() {
    return l2.Status;
  } }), c(serviceDefinitions, a420), c(channel, a420), c(ClientFactory, a420), c(Client, a420);
})(lib$1);
var dist$2 = {}, api$4 = {}, umd = { exports: {} };
(function(a420, u2) {
  var c = function(l2) {
    Object.defineProperty(l2, "__esModule", { value: true }), l2.default = void 0;
    /**
    * @license
    * Copyright 2009 The Closure Library Authors
    * Copyright 2020 Daniel Wirtz / The long.js Authors.
    *
    * Licensed under the Apache License, Version 2.0 (the "License");
    * you may not use this file except in compliance with the License.
    * You may obtain a copy of the License at
    *
    *     http://www.apache.org/licenses/LICENSE-2.0
    *
    * Unless required by applicable law or agreed to in writing, software
    * distributed under the License is distributed on an "AS IS" BASIS,
    * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
    * See the License for the specific language governing permissions and
    * limitations under the License.
    *
    * SPDX-License-Identifier: Apache-2.0
    */
    var v2 = null;
    try {
      v2 = new WebAssembly.Instance(new WebAssembly.Module(new Uint8Array([0, 97, 115, 109, 1, 0, 0, 0, 1, 13, 2, 96, 0, 1, 127, 96, 4, 127, 127, 127, 127, 1, 127, 3, 7, 6, 0, 1, 1, 1, 1, 1, 6, 6, 1, 127, 1, 65, 0, 11, 7, 50, 6, 3, 109, 117, 108, 0, 1, 5, 100, 105, 118, 95, 115, 0, 2, 5, 100, 105, 118, 95, 117, 0, 3, 5, 114, 101, 109, 95, 115, 0, 4, 5, 114, 101, 109, 95, 117, 0, 5, 8, 103, 101, 116, 95, 104, 105, 103, 104, 0, 0, 10, 191, 1, 6, 4, 0, 35, 0, 11, 36, 1, 1, 126, 32, 0, 173, 32, 1, 173, 66, 32, 134, 132, 32, 2, 173, 32, 3, 173, 66, 32, 134, 132, 126, 34, 4, 66, 32, 135, 167, 36, 0, 32, 4, 167, 11, 36, 1, 1, 126, 32, 0, 173, 32, 1, 173, 66, 32, 134, 132, 32, 2, 173, 32, 3, 173, 66, 32, 134, 132, 127, 34, 4, 66, 32, 135, 167, 36, 0, 32, 4, 167, 11, 36, 1, 1, 126, 32, 0, 173, 32, 1, 173, 66, 32, 134, 132, 32, 2, 173, 32, 3, 173, 66, 32, 134, 132, 128, 34, 4, 66, 32, 135, 167, 36, 0, 32, 4, 167, 11, 36, 1, 1, 126, 32, 0, 173, 32, 1, 173, 66, 32, 134, 132, 32, 2, 173, 32, 3, 173, 66, 32, 134, 132, 129, 34, 4, 66, 32, 135, 167, 36, 0, 32, 4, 167, 11, 36, 1, 1, 126, 32, 0, 173, 32, 1, 173, 66, 32, 134, 132, 32, 2, 173, 32, 3, 173, 66, 32, 134, 132, 130, 34, 4, 66, 32, 135, 167, 36, 0, 32, 4, 167, 11])), {}).exports;
    } catch {
    }
    function p2(A2, x2, Y2) {
      this.low = A2 | 0, this.high = x2 | 0, this.unsigned = !!Y2;
    }
    p2.prototype.__isLong__, Object.defineProperty(p2.prototype, "__isLong__", { value: true });
    function _(A2) {
      return (A2 && A2.__isLong__) === true;
    }
    function I2(A2) {
      var x2 = Math.clz32(A2 & -A2);
      return A2 ? 31 - x2 : x2;
    }
    p2.isLong = _;
    var P2 = {}, $ = {};
    function F2(A2, x2) {
      var Y2, B2, T2;
      return x2 ? (A2 >>>= 0, (T2 = 0 <= A2 && A2 < 256) && (B2 = $[A2], B2) ? B2 : (Y2 = j(A2, 0, true), T2 && ($[A2] = Y2), Y2)) : (A2 |= 0, (T2 = -128 <= A2 && A2 < 128) && (B2 = P2[A2], B2) ? B2 : (Y2 = j(A2, A2 < 0 ? -1 : 0, false), T2 && (P2[A2] = Y2), Y2));
    }
    p2.fromInt = F2;
    function H2(A2, x2) {
      if (isNaN(A2))
        return x2 ? ke2 : be2;
      if (x2) {
        if (A2 < 0)
          return ke2;
        if (A2 >= de2)
          return b;
      } else {
        if (A2 <= -pe2)
          return E2;
        if (A2 + 1 >= pe2)
          return C2;
      }
      return A2 < 0 ? H2(-A2, x2).neg() : j(A2 % Z2 | 0, A2 / Z2 | 0, x2);
    }
    p2.fromNumber = H2;
    function j(A2, x2, Y2) {
      return new p2(A2, x2, Y2);
    }
    p2.fromBits = j;
    var ee2 = Math.pow;
    function X2(A2, x2, Y2) {
      if (A2.length === 0)
        throw Error("empty string");
      if (typeof x2 == "number" ? (Y2 = x2, x2 = false) : x2 = !!x2, A2 === "NaN" || A2 === "Infinity" || A2 === "+Infinity" || A2 === "-Infinity")
        return x2 ? ke2 : be2;
      if (Y2 = Y2 || 10, Y2 < 2 || 36 < Y2)
        throw RangeError("radix");
      var B2;
      if ((B2 = A2.indexOf("-")) > 0)
        throw Error("interior hyphen");
      if (B2 === 0)
        return X2(A2.substring(1), x2, Y2).neg();
      for (var T2 = H2(ee2(Y2, 8)), D2 = be2, te2 = 0; te2 < A2.length; te2 += 8) {
        var me2 = Math.min(8, A2.length - te2), Ie2 = parseInt(A2.substring(te2, te2 + me2), Y2);
        if (me2 < 8) {
          var $e2 = H2(ee2(Y2, me2));
          D2 = D2.mul($e2).add(H2(Ie2));
        } else
          D2 = D2.mul(T2), D2 = D2.add(H2(Ie2));
      }
      return D2.unsigned = x2, D2;
    }
    p2.fromString = X2;
    function ie2(A2, x2) {
      return typeof A2 == "number" ? H2(A2, x2) : typeof A2 == "string" ? X2(A2, x2) : j(A2.low, A2.high, typeof x2 == "boolean" ? x2 : A2.unsigned);
    }
    p2.fromValue = ie2;
    var Q2 = 65536, ne2 = 1 << 24, Z2 = Q2 * Q2, de2 = Z2 * Z2, pe2 = de2 / 2, le2 = F2(ne2), be2 = F2(0);
    p2.ZERO = be2;
    var ke2 = F2(0, true);
    p2.UZERO = ke2;
    var Te2 = F2(1);
    p2.ONE = Te2;
    var q2 = F2(1, true);
    p2.UONE = q2;
    var z2 = F2(-1);
    p2.NEG_ONE = z2;
    var C2 = j(-1, 2147483647, false);
    p2.MAX_VALUE = C2;
    var b = j(-1, -1, true);
    p2.MAX_UNSIGNED_VALUE = b;
    var E2 = j(0, -2147483648, false);
    p2.MIN_VALUE = E2;
    var k = p2.prototype;
    k.toInt = function() {
      return this.unsigned ? this.low >>> 0 : this.low;
    }, k.toNumber = function() {
      return this.unsigned ? (this.high >>> 0) * Z2 + (this.low >>> 0) : this.high * Z2 + (this.low >>> 0);
    }, k.toString = function(x2) {
      if (x2 = x2 || 10, x2 < 2 || 36 < x2)
        throw RangeError("radix");
      if (this.isZero())
        return "0";
      if (this.isNegative())
        if (this.eq(E2)) {
          var Y2 = H2(x2), B2 = this.div(Y2), T2 = B2.mul(Y2).sub(this);
          return B2.toString(x2) + T2.toInt().toString(x2);
        } else
          return "-" + this.neg().toString(x2);
      for (var D2 = H2(ee2(x2, 6), this.unsigned), te2 = this, me2 = ""; ; ) {
        var Ie2 = te2.div(D2), $e2 = te2.sub(Ie2.mul(D2)).toInt() >>> 0, ye2 = $e2.toString(x2);
        if (te2 = Ie2, te2.isZero())
          return ye2 + me2;
        for (; ye2.length < 6; )
          ye2 = "0" + ye2;
        me2 = "" + ye2 + me2;
      }
    }, k.getHighBits = function() {
      return this.high;
    }, k.getHighBitsUnsigned = function() {
      return this.high >>> 0;
    }, k.getLowBits = function() {
      return this.low;
    }, k.getLowBitsUnsigned = function() {
      return this.low >>> 0;
    }, k.getNumBitsAbs = function() {
      if (this.isNegative())
        return this.eq(E2) ? 64 : this.neg().getNumBitsAbs();
      for (var x2 = this.high != 0 ? this.high : this.low, Y2 = 31; Y2 > 0 && !(x2 & 1 << Y2); Y2--)
        ;
      return this.high != 0 ? Y2 + 33 : Y2 + 1;
    }, k.isZero = function() {
      return this.high === 0 && this.low === 0;
    }, k.eqz = k.isZero, k.isNegative = function() {
      return !this.unsigned && this.high < 0;
    }, k.isPositive = function() {
      return this.unsigned || this.high >= 0;
    }, k.isOdd = function() {
      return (this.low & 1) === 1;
    }, k.isEven = function() {
      return (this.low & 1) === 0;
    }, k.equals = function(x2) {
      return _(x2) || (x2 = ie2(x2)), this.unsigned !== x2.unsigned && this.high >>> 31 === 1 && x2.high >>> 31 === 1 ? false : this.high === x2.high && this.low === x2.low;
    }, k.eq = k.equals, k.notEquals = function(x2) {
      return !this.eq(
        /* validates */
        x2
      );
    }, k.neq = k.notEquals, k.ne = k.notEquals, k.lessThan = function(x2) {
      return this.comp(
        /* validates */
        x2
      ) < 0;
    }, k.lt = k.lessThan, k.lessThanOrEqual = function(x2) {
      return this.comp(
        /* validates */
        x2
      ) <= 0;
    }, k.lte = k.lessThanOrEqual, k.le = k.lessThanOrEqual, k.greaterThan = function(x2) {
      return this.comp(
        /* validates */
        x2
      ) > 0;
    }, k.gt = k.greaterThan, k.greaterThanOrEqual = function(x2) {
      return this.comp(
        /* validates */
        x2
      ) >= 0;
    }, k.gte = k.greaterThanOrEqual, k.ge = k.greaterThanOrEqual, k.compare = function(x2) {
      if (_(x2) || (x2 = ie2(x2)), this.eq(x2))
        return 0;
      var Y2 = this.isNegative(), B2 = x2.isNegative();
      return Y2 && !B2 ? -1 : !Y2 && B2 ? 1 : this.unsigned ? x2.high >>> 0 > this.high >>> 0 || x2.high === this.high && x2.low >>> 0 > this.low >>> 0 ? -1 : 1 : this.sub(x2).isNegative() ? -1 : 1;
    }, k.comp = k.compare, k.negate = function() {
      return !this.unsigned && this.eq(E2) ? E2 : this.not().add(Te2);
    }, k.neg = k.negate, k.add = function(x2) {
      _(x2) || (x2 = ie2(x2));
      var Y2 = this.high >>> 16, B2 = this.high & 65535, T2 = this.low >>> 16, D2 = this.low & 65535, te2 = x2.high >>> 16, me2 = x2.high & 65535, Ie2 = x2.low >>> 16, $e2 = x2.low & 65535, ye2 = 0, he2 = 0, Me2 = 0, Ae2 = 0;
      return Ae2 += D2 + $e2, Me2 += Ae2 >>> 16, Ae2 &= 65535, Me2 += T2 + Ie2, he2 += Me2 >>> 16, Me2 &= 65535, he2 += B2 + me2, ye2 += he2 >>> 16, he2 &= 65535, ye2 += Y2 + te2, ye2 &= 65535, j(Me2 << 16 | Ae2, ye2 << 16 | he2, this.unsigned);
    }, k.subtract = function(x2) {
      return _(x2) || (x2 = ie2(x2)), this.add(x2.neg());
    }, k.sub = k.subtract, k.multiply = function(x2) {
      if (this.isZero())
        return this;
      if (_(x2) || (x2 = ie2(x2)), v2) {
        var Y2 = v2.mul(this.low, this.high, x2.low, x2.high);
        return j(Y2, v2.get_high(), this.unsigned);
      }
      if (x2.isZero())
        return this.unsigned ? ke2 : be2;
      if (this.eq(E2))
        return x2.isOdd() ? E2 : be2;
      if (x2.eq(E2))
        return this.isOdd() ? E2 : be2;
      if (this.isNegative())
        return x2.isNegative() ? this.neg().mul(x2.neg()) : this.neg().mul(x2).neg();
      if (x2.isNegative())
        return this.mul(x2.neg()).neg();
      if (this.lt(le2) && x2.lt(le2))
        return H2(this.toNumber() * x2.toNumber(), this.unsigned);
      var B2 = this.high >>> 16, T2 = this.high & 65535, D2 = this.low >>> 16, te2 = this.low & 65535, me2 = x2.high >>> 16, Ie2 = x2.high & 65535, $e2 = x2.low >>> 16, ye2 = x2.low & 65535, he2 = 0, Me2 = 0, Ae2 = 0, xe2 = 0;
      return xe2 += te2 * ye2, Ae2 += xe2 >>> 16, xe2 &= 65535, Ae2 += D2 * ye2, Me2 += Ae2 >>> 16, Ae2 &= 65535, Ae2 += te2 * $e2, Me2 += Ae2 >>> 16, Ae2 &= 65535, Me2 += T2 * ye2, he2 += Me2 >>> 16, Me2 &= 65535, Me2 += D2 * $e2, he2 += Me2 >>> 16, Me2 &= 65535, Me2 += te2 * Ie2, he2 += Me2 >>> 16, Me2 &= 65535, he2 += B2 * ye2 + T2 * $e2 + D2 * Ie2 + te2 * me2, he2 &= 65535, j(Ae2 << 16 | xe2, he2 << 16 | Me2, this.unsigned);
    }, k.mul = k.multiply, k.divide = function(x2) {
      if (_(x2) || (x2 = ie2(x2)), x2.isZero())
        throw Error("division by zero");
      if (v2) {
        if (!this.unsigned && this.high === -2147483648 && x2.low === -1 && x2.high === -1)
          return this;
        var Y2 = (this.unsigned ? v2.div_u : v2.div_s)(this.low, this.high, x2.low, x2.high);
        return j(Y2, v2.get_high(), this.unsigned);
      }
      if (this.isZero())
        return this.unsigned ? ke2 : be2;
      var B2, T2, D2;
      if (this.unsigned) {
        if (x2.unsigned || (x2 = x2.toUnsigned()), x2.gt(this))
          return ke2;
        if (x2.gt(this.shru(1)))
          return q2;
        D2 = ke2;
      } else {
        if (this.eq(E2)) {
          if (x2.eq(Te2) || x2.eq(z2))
            return E2;
          if (x2.eq(E2))
            return Te2;
          var te2 = this.shr(1);
          return B2 = te2.div(x2).shl(1), B2.eq(be2) ? x2.isNegative() ? Te2 : z2 : (T2 = this.sub(x2.mul(B2)), D2 = B2.add(T2.div(x2)), D2);
        } else if (x2.eq(E2))
          return this.unsigned ? ke2 : be2;
        if (this.isNegative())
          return x2.isNegative() ? this.neg().div(x2.neg()) : this.neg().div(x2).neg();
        if (x2.isNegative())
          return this.div(x2.neg()).neg();
        D2 = be2;
      }
      for (T2 = this; T2.gte(x2); ) {
        B2 = Math.max(1, Math.floor(T2.toNumber() / x2.toNumber()));
        for (var me2 = Math.ceil(Math.log(B2) / Math.LN2), Ie2 = me2 <= 48 ? 1 : ee2(2, me2 - 48), $e2 = H2(B2), ye2 = $e2.mul(x2); ye2.isNegative() || ye2.gt(T2); )
          B2 -= Ie2, $e2 = H2(B2, this.unsigned), ye2 = $e2.mul(x2);
        $e2.isZero() && ($e2 = Te2), D2 = D2.add($e2), T2 = T2.sub(ye2);
      }
      return D2;
    }, k.div = k.divide, k.modulo = function(x2) {
      if (_(x2) || (x2 = ie2(x2)), v2) {
        var Y2 = (this.unsigned ? v2.rem_u : v2.rem_s)(this.low, this.high, x2.low, x2.high);
        return j(Y2, v2.get_high(), this.unsigned);
      }
      return this.sub(this.div(x2).mul(x2));
    }, k.mod = k.modulo, k.rem = k.modulo, k.not = function() {
      return j(~this.low, ~this.high, this.unsigned);
    }, k.countLeadingZeros = function() {
      return this.high ? Math.clz32(this.high) : Math.clz32(this.low) + 32;
    }, k.clz = k.countLeadingZeros, k.countTrailingZeros = function() {
      return this.low ? I2(this.low) : I2(this.high) + 32;
    }, k.ctz = k.countTrailingZeros, k.and = function(x2) {
      return _(x2) || (x2 = ie2(x2)), j(this.low & x2.low, this.high & x2.high, this.unsigned);
    }, k.or = function(x2) {
      return _(x2) || (x2 = ie2(x2)), j(this.low | x2.low, this.high | x2.high, this.unsigned);
    }, k.xor = function(x2) {
      return _(x2) || (x2 = ie2(x2)), j(this.low ^ x2.low, this.high ^ x2.high, this.unsigned);
    }, k.shiftLeft = function(x2) {
      return _(x2) && (x2 = x2.toInt()), (x2 &= 63) === 0 ? this : x2 < 32 ? j(this.low << x2, this.high << x2 | this.low >>> 32 - x2, this.unsigned) : j(0, this.low << x2 - 32, this.unsigned);
    }, k.shl = k.shiftLeft, k.shiftRight = function(x2) {
      return _(x2) && (x2 = x2.toInt()), (x2 &= 63) === 0 ? this : x2 < 32 ? j(this.low >>> x2 | this.high << 32 - x2, this.high >> x2, this.unsigned) : j(this.high >> x2 - 32, this.high >= 0 ? 0 : -1, this.unsigned);
    }, k.shr = k.shiftRight, k.shiftRightUnsigned = function(x2) {
      return _(x2) && (x2 = x2.toInt()), (x2 &= 63) === 0 ? this : x2 < 32 ? j(this.low >>> x2 | this.high << 32 - x2, this.high >>> x2, this.unsigned) : x2 === 32 ? j(this.high, 0, this.unsigned) : j(this.high >>> x2 - 32, 0, this.unsigned);
    }, k.shru = k.shiftRightUnsigned, k.shr_u = k.shiftRightUnsigned, k.rotateLeft = function(x2) {
      var Y2;
      return _(x2) && (x2 = x2.toInt()), (x2 &= 63) === 0 ? this : x2 === 32 ? j(this.high, this.low, this.unsigned) : x2 < 32 ? (Y2 = 32 - x2, j(this.low << x2 | this.high >>> Y2, this.high << x2 | this.low >>> Y2, this.unsigned)) : (x2 -= 32, Y2 = 32 - x2, j(this.high << x2 | this.low >>> Y2, this.low << x2 | this.high >>> Y2, this.unsigned));
    }, k.rotl = k.rotateLeft, k.rotateRight = function(x2) {
      var Y2;
      return _(x2) && (x2 = x2.toInt()), (x2 &= 63) === 0 ? this : x2 === 32 ? j(this.high, this.low, this.unsigned) : x2 < 32 ? (Y2 = 32 - x2, j(this.high << Y2 | this.low >>> x2, this.low << Y2 | this.high >>> x2, this.unsigned)) : (x2 -= 32, Y2 = 32 - x2, j(this.low << Y2 | this.high >>> x2, this.high << Y2 | this.low >>> x2, this.unsigned));
    }, k.rotr = k.rotateRight, k.toSigned = function() {
      return this.unsigned ? j(this.low, this.high, false) : this;
    }, k.toUnsigned = function() {
      return this.unsigned ? this : j(this.low, this.high, true);
    }, k.toBytes = function(x2) {
      return x2 ? this.toBytesLE() : this.toBytesBE();
    }, k.toBytesLE = function() {
      var x2 = this.high, Y2 = this.low;
      return [Y2 & 255, Y2 >>> 8 & 255, Y2 >>> 16 & 255, Y2 >>> 24, x2 & 255, x2 >>> 8 & 255, x2 >>> 16 & 255, x2 >>> 24];
    }, k.toBytesBE = function() {
      var x2 = this.high, Y2 = this.low;
      return [x2 >>> 24, x2 >>> 16 & 255, x2 >>> 8 & 255, x2 & 255, Y2 >>> 24, Y2 >>> 16 & 255, Y2 >>> 8 & 255, Y2 & 255];
    }, p2.fromBytes = function(x2, Y2, B2) {
      return B2 ? p2.fromBytesLE(x2, Y2) : p2.fromBytesBE(x2, Y2);
    }, p2.fromBytesLE = function(x2, Y2) {
      return new p2(x2[0] | x2[1] << 8 | x2[2] << 16 | x2[3] << 24, x2[4] | x2[5] << 8 | x2[6] << 16 | x2[7] << 24, Y2);
    }, p2.fromBytesBE = function(x2, Y2) {
      return new p2(x2[4] << 24 | x2[5] << 16 | x2[6] << 8 | x2[7], x2[0] << 24 | x2[1] << 16 | x2[2] << 8 | x2[3], Y2);
    };
    var O2 = p2;
    return l2.default = O2, "default" in l2 ? l2.default : l2;
  }({});
  a420.exports = c;
})(umd);
var umdExports = umd.exports, indexMinimal = {}, minimal$1 = {}, aspromise = asPromise;
function asPromise(a420, u2) {
  for (var c = new Array(arguments.length - 1), l2 = 0, v2 = 2, p2 = true; v2 < arguments.length; )
    c[l2++] = arguments[v2++];
  return new Promise(function(I2, P2) {
    c[l2] = function(F2) {
      if (p2)
        if (p2 = false, F2)
          P2(F2);
        else {
          for (var H2 = new Array(arguments.length - 1), j = 0; j < H2.length; )
            H2[j++] = arguments[j];
          I2.apply(null, H2);
        }
    };
    try {
      a420.apply(u2 || null, c);
    } catch ($) {
      p2 && (p2 = false, P2($));
    }
  });
}
var base64$1 = {};
(function(a420) {
  var u2 = a420;
  u2.length = function(I2) {
    var P2 = I2.length;
    if (!P2)
      return 0;
    for (var $ = 0; --P2 % 4 > 1 && I2.charAt(P2) === "="; )
      ++$;
    return Math.ceil(I2.length * 3) / 4 - $;
  };
  for (var c = new Array(64), l2 = new Array(123), v2 = 0; v2 < 64; )
    l2[c[v2] = v2 < 26 ? v2 + 65 : v2 < 52 ? v2 + 71 : v2 < 62 ? v2 - 4 : v2 - 59 | 43] = v2++;
  u2.encode = function(I2, P2, $) {
    for (var F2 = null, H2 = [], j = 0, ee2 = 0, X2; P2 < $; ) {
      var ie2 = I2[P2++];
      switch (ee2) {
        case 0:
          H2[j++] = c[ie2 >> 2], X2 = (ie2 & 3) << 4, ee2 = 1;
          break;
        case 1:
          H2[j++] = c[X2 | ie2 >> 4], X2 = (ie2 & 15) << 2, ee2 = 2;
          break;
        case 2:
          H2[j++] = c[X2 | ie2 >> 6], H2[j++] = c[ie2 & 63], ee2 = 0;
          break;
      }
      j > 8191 && ((F2 || (F2 = [])).push(String.fromCharCode.apply(String, H2)), j = 0);
    }
    return ee2 && (H2[j++] = c[X2], H2[j++] = 61, ee2 === 1 && (H2[j++] = 61)), F2 ? (j && F2.push(String.fromCharCode.apply(String, H2.slice(0, j))), F2.join("")) : String.fromCharCode.apply(String, H2.slice(0, j));
  };
  var p2 = "invalid encoding";
  u2.decode = function(I2, P2, $) {
    for (var F2 = $, H2 = 0, j, ee2 = 0; ee2 < I2.length; ) {
      var X2 = I2.charCodeAt(ee2++);
      if (X2 === 61 && H2 > 1)
        break;
      if ((X2 = l2[X2]) === void 0)
        throw Error(p2);
      switch (H2) {
        case 0:
          j = X2, H2 = 1;
          break;
        case 1:
          P2[$++] = j << 2 | (X2 & 48) >> 4, j = X2, H2 = 2;
          break;
        case 2:
          P2[$++] = (j & 15) << 4 | (X2 & 60) >> 2, j = X2, H2 = 3;
          break;
        case 3:
          P2[$++] = (j & 3) << 6 | X2, H2 = 0;
          break;
      }
    }
    if (H2 === 1)
      throw Error(p2);
    return $ - F2;
  }, u2.test = function(I2) {
    return /^(?:[A-Za-z0-9+/]{4})*(?:[A-Za-z0-9+/]{2}==|[A-Za-z0-9+/]{3}=)?$/.test(I2);
  };
})(base64$1);
var eventemitter = EventEmitter$2;
function EventEmitter$2() {
  this._listeners = {};
}
EventEmitter$2.prototype.on = function(u2, c, l2) {
  return (this._listeners[u2] || (this._listeners[u2] = [])).push({ fn: c, ctx: l2 || this }), this;
};
EventEmitter$2.prototype.off = function(u2, c) {
  if (u2 === void 0)
    this._listeners = {};
  else if (c === void 0)
    this._listeners[u2] = [];
  else
    for (var l2 = this._listeners[u2], v2 = 0; v2 < l2.length; )
      l2[v2].fn === c ? l2.splice(v2, 1) : ++v2;
  return this;
};
EventEmitter$2.prototype.emit = function(u2) {
  var c = this._listeners[u2];
  if (c) {
    for (var l2 = [], v2 = 1; v2 < arguments.length; )
      l2.push(arguments[v2++]);
    for (v2 = 0; v2 < c.length; )
      c[v2].fn.apply(c[v2++].ctx, l2);
  }
  return this;
};
var float = factory(factory);
function factory(a420) {
  return typeof Float32Array < "u" ? function() {
    var u2 = new Float32Array([-0]), c = new Uint8Array(u2.buffer), l2 = c[3] === 128;
    function v2(P2, $, F2) {
      u2[0] = P2, $[F2] = c[0], $[F2 + 1] = c[1], $[F2 + 2] = c[2], $[F2 + 3] = c[3];
    }
    function p2(P2, $, F2) {
      u2[0] = P2, $[F2] = c[3], $[F2 + 1] = c[2], $[F2 + 2] = c[1], $[F2 + 3] = c[0];
    }
    a420.writeFloatLE = l2 ? v2 : p2, a420.writeFloatBE = l2 ? p2 : v2;
    function _(P2, $) {
      return c[0] = P2[$], c[1] = P2[$ + 1], c[2] = P2[$ + 2], c[3] = P2[$ + 3], u2[0];
    }
    function I2(P2, $) {
      return c[3] = P2[$], c[2] = P2[$ + 1], c[1] = P2[$ + 2], c[0] = P2[$ + 3], u2[0];
    }
    a420.readFloatLE = l2 ? _ : I2, a420.readFloatBE = l2 ? I2 : _;
  }() : function() {
    function u2(l2, v2, p2, _) {
      var I2 = v2 < 0 ? 1 : 0;
      if (I2 && (v2 = -v2), v2 === 0)
        l2(1 / v2 > 0 ? (
          /* positive */
          0
        ) : (
          /* negative 0 */
          2147483648
        ), p2, _);
      else if (isNaN(v2))
        l2(2143289344, p2, _);
      else if (v2 > 34028234663852886e22)
        l2((I2 << 31 | 2139095040) >>> 0, p2, _);
      else if (v2 < 11754943508222875e-54)
        l2((I2 << 31 | Math.round(v2 / 1401298464324817e-60)) >>> 0, p2, _);
      else {
        var P2 = Math.floor(Math.log(v2) / Math.LN2), $ = Math.round(v2 * Math.pow(2, -P2) * 8388608) & 8388607;
        l2((I2 << 31 | P2 + 127 << 23 | $) >>> 0, p2, _);
      }
    }
    a420.writeFloatLE = u2.bind(null, writeUintLE), a420.writeFloatBE = u2.bind(null, writeUintBE);
    function c(l2, v2, p2) {
      var _ = l2(v2, p2), I2 = (_ >> 31) * 2 + 1, P2 = _ >>> 23 & 255, $ = _ & 8388607;
      return P2 === 255 ? $ ? NaN : I2 * (1 / 0) : P2 === 0 ? I2 * 1401298464324817e-60 * $ : I2 * Math.pow(2, P2 - 150) * ($ + 8388608);
    }
    a420.readFloatLE = c.bind(null, readUintLE), a420.readFloatBE = c.bind(null, readUintBE);
  }(), typeof Float64Array < "u" ? function() {
    var u2 = new Float64Array([-0]), c = new Uint8Array(u2.buffer), l2 = c[7] === 128;
    function v2(P2, $, F2) {
      u2[0] = P2, $[F2] = c[0], $[F2 + 1] = c[1], $[F2 + 2] = c[2], $[F2 + 3] = c[3], $[F2 + 4] = c[4], $[F2 + 5] = c[5], $[F2 + 6] = c[6], $[F2 + 7] = c[7];
    }
    function p2(P2, $, F2) {
      u2[0] = P2, $[F2] = c[7], $[F2 + 1] = c[6], $[F2 + 2] = c[5], $[F2 + 3] = c[4], $[F2 + 4] = c[3], $[F2 + 5] = c[2], $[F2 + 6] = c[1], $[F2 + 7] = c[0];
    }
    a420.writeDoubleLE = l2 ? v2 : p2, a420.writeDoubleBE = l2 ? p2 : v2;
    function _(P2, $) {
      return c[0] = P2[$], c[1] = P2[$ + 1], c[2] = P2[$ + 2], c[3] = P2[$ + 3], c[4] = P2[$ + 4], c[5] = P2[$ + 5], c[6] = P2[$ + 6], c[7] = P2[$ + 7], u2[0];
    }
    function I2(P2, $) {
      return c[7] = P2[$], c[6] = P2[$ + 1], c[5] = P2[$ + 2], c[4] = P2[$ + 3], c[3] = P2[$ + 4], c[2] = P2[$ + 5], c[1] = P2[$ + 6], c[0] = P2[$ + 7], u2[0];
    }
    a420.readDoubleLE = l2 ? _ : I2, a420.readDoubleBE = l2 ? I2 : _;
  }() : function() {
    function u2(l2, v2, p2, _, I2, P2) {
      var $ = _ < 0 ? 1 : 0;
      if ($ && (_ = -_), _ === 0)
        l2(0, I2, P2 + v2), l2(1 / _ > 0 ? (
          /* positive */
          0
        ) : (
          /* negative 0 */
          2147483648
        ), I2, P2 + p2);
      else if (isNaN(_))
        l2(0, I2, P2 + v2), l2(2146959360, I2, P2 + p2);
      else if (_ > 17976931348623157e292)
        l2(0, I2, P2 + v2), l2(($ << 31 | 2146435072) >>> 0, I2, P2 + p2);
      else {
        var F2;
        if (_ < 22250738585072014e-324)
          F2 = _ / 5e-324, l2(F2 >>> 0, I2, P2 + v2), l2(($ << 31 | F2 / 4294967296) >>> 0, I2, P2 + p2);
        else {
          var H2 = Math.floor(Math.log(_) / Math.LN2);
          H2 === 1024 && (H2 = 1023), F2 = _ * Math.pow(2, -H2), l2(F2 * 4503599627370496 >>> 0, I2, P2 + v2), l2(($ << 31 | H2 + 1023 << 20 | F2 * 1048576 & 1048575) >>> 0, I2, P2 + p2);
        }
      }
    }
    a420.writeDoubleLE = u2.bind(null, writeUintLE, 0, 4), a420.writeDoubleBE = u2.bind(null, writeUintBE, 4, 0);
    function c(l2, v2, p2, _, I2) {
      var P2 = l2(_, I2 + v2), $ = l2(_, I2 + p2), F2 = ($ >> 31) * 2 + 1, H2 = $ >>> 20 & 2047, j = 4294967296 * ($ & 1048575) + P2;
      return H2 === 2047 ? j ? NaN : F2 * (1 / 0) : H2 === 0 ? F2 * 5e-324 * j : F2 * Math.pow(2, H2 - 1075) * (j + 4503599627370496);
    }
    a420.readDoubleLE = c.bind(null, readUintLE, 0, 4), a420.readDoubleBE = c.bind(null, readUintBE, 4, 0);
  }(), a420;
}
function writeUintLE(a420, u2, c) {
  u2[c] = a420 & 255, u2[c + 1] = a420 >>> 8 & 255, u2[c + 2] = a420 >>> 16 & 255, u2[c + 3] = a420 >>> 24;
}
function writeUintBE(a420, u2, c) {
  u2[c] = a420 >>> 24, u2[c + 1] = a420 >>> 16 & 255, u2[c + 2] = a420 >>> 8 & 255, u2[c + 3] = a420 & 255;
}
function readUintLE(a420, u2) {
  return (a420[u2] | a420[u2 + 1] << 8 | a420[u2 + 2] << 16 | a420[u2 + 3] << 24) >>> 0;
}
function readUintBE(a420, u2) {
  return (a420[u2] << 24 | a420[u2 + 1] << 16 | a420[u2 + 2] << 8 | a420[u2 + 3]) >>> 0;
}
var inquire_1 = inquire;
function inquire(moduleName) {
  try {
    var mod = eval("quire".replace(/^/, "re"))(moduleName);
    if (mod && (mod.length || Object.keys(mod).length))
      return mod;
  } catch (a420) {
  }
  return null;
}
var utf8$2 = {};
(function(a420) {
  var u2 = a420;
  u2.length = function(l2) {
    for (var v2 = 0, p2 = 0, _ = 0; _ < l2.length; ++_)
      p2 = l2.charCodeAt(_), p2 < 128 ? v2 += 1 : p2 < 2048 ? v2 += 2 : (p2 & 64512) === 55296 && (l2.charCodeAt(_ + 1) & 64512) === 56320 ? (++_, v2 += 4) : v2 += 3;
    return v2;
  }, u2.read = function(l2, v2, p2) {
    var _ = p2 - v2;
    if (_ < 1)
      return "";
    for (var I2 = null, P2 = [], $ = 0, F2; v2 < p2; )
      F2 = l2[v2++], F2 < 128 ? P2[$++] = F2 : F2 > 191 && F2 < 224 ? P2[$++] = (F2 & 31) << 6 | l2[v2++] & 63 : F2 > 239 && F2 < 365 ? (F2 = ((F2 & 7) << 18 | (l2[v2++] & 63) << 12 | (l2[v2++] & 63) << 6 | l2[v2++] & 63) - 65536, P2[$++] = 55296 + (F2 >> 10), P2[$++] = 56320 + (F2 & 1023)) : P2[$++] = (F2 & 15) << 12 | (l2[v2++] & 63) << 6 | l2[v2++] & 63, $ > 8191 && ((I2 || (I2 = [])).push(String.fromCharCode.apply(String, P2)), $ = 0);
    return I2 ? ($ && I2.push(String.fromCharCode.apply(String, P2.slice(0, $))), I2.join("")) : String.fromCharCode.apply(String, P2.slice(0, $));
  }, u2.write = function(l2, v2, p2) {
    for (var _ = p2, I2, P2, $ = 0; $ < l2.length; ++$)
      I2 = l2.charCodeAt($), I2 < 128 ? v2[p2++] = I2 : I2 < 2048 ? (v2[p2++] = I2 >> 6 | 192, v2[p2++] = I2 & 63 | 128) : (I2 & 64512) === 55296 && ((P2 = l2.charCodeAt($ + 1)) & 64512) === 56320 ? (I2 = 65536 + ((I2 & 1023) << 10) + (P2 & 1023), ++$, v2[p2++] = I2 >> 18 | 240, v2[p2++] = I2 >> 12 & 63 | 128, v2[p2++] = I2 >> 6 & 63 | 128, v2[p2++] = I2 & 63 | 128) : (v2[p2++] = I2 >> 12 | 224, v2[p2++] = I2 >> 6 & 63 | 128, v2[p2++] = I2 & 63 | 128);
    return p2 - _;
  };
})(utf8$2);
var pool_1 = pool;
function pool(a420, u2, c) {
  var l2 = c || 8192, v2 = l2 >>> 1, p2 = null, _ = l2;
  return function(P2) {
    if (P2 < 1 || P2 > v2)
      return a420(P2);
    _ + P2 > l2 && (p2 = a420(l2), _ = 0);
    var $ = u2.call(p2, _, _ += P2);
    return _ & 7 && (_ = (_ | 7) + 1), $;
  };
}
var longbits, hasRequiredLongbits;
function requireLongbits() {
  if (hasRequiredLongbits)
    return longbits;
  hasRequiredLongbits = 1, longbits = u2;
  var a420 = requireMinimal();
  function u2(p2, _) {
    this.lo = p2 >>> 0, this.hi = _ >>> 0;
  }
  var c = u2.zero = new u2(0, 0);
  c.toNumber = function() {
    return 0;
  }, c.zzEncode = c.zzDecode = function() {
    return this;
  }, c.length = function() {
    return 1;
  };
  var l2 = u2.zeroHash = "\0\0\0\0\0\0\0\0";
  u2.fromNumber = function(_) {
    if (_ === 0)
      return c;
    var I2 = _ < 0;
    I2 && (_ = -_);
    var P2 = _ >>> 0, $ = (_ - P2) / 4294967296 >>> 0;
    return I2 && ($ = ~$ >>> 0, P2 = ~P2 >>> 0, ++P2 > 4294967295 && (P2 = 0, ++$ > 4294967295 && ($ = 0))), new u2(P2, $);
  }, u2.from = function(_) {
    if (typeof _ == "number")
      return u2.fromNumber(_);
    if (a420.isString(_))
      if (a420.Long)
        _ = a420.Long.fromString(_);
      else
        return u2.fromNumber(parseInt(_, 10));
    return _.low || _.high ? new u2(_.low >>> 0, _.high >>> 0) : c;
  }, u2.prototype.toNumber = function(_) {
    if (!_ && this.hi >>> 31) {
      var I2 = ~this.lo + 1 >>> 0, P2 = ~this.hi >>> 0;
      return I2 || (P2 = P2 + 1 >>> 0), -(I2 + P2 * 4294967296);
    }
    return this.lo + this.hi * 4294967296;
  }, u2.prototype.toLong = function(_) {
    return a420.Long ? new a420.Long(this.lo | 0, this.hi | 0, !!_) : { low: this.lo | 0, high: this.hi | 0, unsigned: !!_ };
  };
  var v2 = String.prototype.charCodeAt;
  return u2.fromHash = function(_) {
    return _ === l2 ? c : new u2((v2.call(_, 0) | v2.call(_, 1) << 8 | v2.call(_, 2) << 16 | v2.call(_, 3) << 24) >>> 0, (v2.call(_, 4) | v2.call(_, 5) << 8 | v2.call(_, 6) << 16 | v2.call(_, 7) << 24) >>> 0);
  }, u2.prototype.toHash = function() {
    return String.fromCharCode(this.lo & 255, this.lo >>> 8 & 255, this.lo >>> 16 & 255, this.lo >>> 24, this.hi & 255, this.hi >>> 8 & 255, this.hi >>> 16 & 255, this.hi >>> 24);
  }, u2.prototype.zzEncode = function() {
    var _ = this.hi >> 31;
    return this.hi = ((this.hi << 1 | this.lo >>> 31) ^ _) >>> 0, this.lo = (this.lo << 1 ^ _) >>> 0, this;
  }, u2.prototype.zzDecode = function() {
    var _ = -(this.lo & 1);
    return this.lo = ((this.lo >>> 1 | this.hi << 31) ^ _) >>> 0, this.hi = (this.hi >>> 1 ^ _) >>> 0, this;
  }, u2.prototype.length = function() {
    var _ = this.lo, I2 = (this.lo >>> 28 | this.hi << 4) >>> 0, P2 = this.hi >>> 24;
    return P2 === 0 ? I2 === 0 ? _ < 16384 ? _ < 128 ? 1 : 2 : _ < 2097152 ? 3 : 4 : I2 < 16384 ? I2 < 128 ? 5 : 6 : I2 < 2097152 ? 7 : 8 : P2 < 128 ? 9 : 10;
  }, longbits;
}
var hasRequiredMinimal;
function requireMinimal() {
  return hasRequiredMinimal || (hasRequiredMinimal = 1, function(a420) {
    var u2 = a420;
    u2.asPromise = aspromise, u2.base64 = base64$1, u2.EventEmitter = eventemitter, u2.float = float, u2.inquire = inquire_1, u2.utf8 = utf8$2, u2.pool = pool_1, u2.LongBits = requireLongbits(), u2.isNode = !!(typeof commonjsGlobal$1 < "u" && commonjsGlobal$1 && commonjsGlobal$1.process && commonjsGlobal$1.process.versions && commonjsGlobal$1.process.versions.node), u2.global = u2.isNode && commonjsGlobal$1 || typeof window < "u" && window || typeof self < "u" && self || commonjsGlobal$1, u2.emptyArray = Object.freeze ? Object.freeze([]) : (
      /* istanbul ignore next */
      []
    ), u2.emptyObject = Object.freeze ? Object.freeze({}) : (
      /* istanbul ignore next */
      {}
    ), u2.isInteger = Number.isInteger || /* istanbul ignore next */
    function(p2) {
      return typeof p2 == "number" && isFinite(p2) && Math.floor(p2) === p2;
    }, u2.isString = function(p2) {
      return typeof p2 == "string" || p2 instanceof String;
    }, u2.isObject = function(p2) {
      return p2 && typeof p2 == "object";
    }, u2.isset = /**
    * Checks if a property on a message is considered to be present.
    * @param {Object} obj Plain object or message instance
    * @param {string} prop Property name
    * @returns {boolean} `true` if considered to be present, otherwise `false`
    */
    u2.isSet = function(p2, _) {
      var I2 = p2[_];
      return I2 != null && p2.hasOwnProperty(_) ? typeof I2 != "object" || (Array.isArray(I2) ? I2.length : Object.keys(I2).length) > 0 : false;
    }, u2.Buffer = function() {
      try {
        var v2 = u2.inquire("buffer").Buffer;
        return v2.prototype.utf8Write ? v2 : (
          /* istanbul ignore next */
          null
        );
      } catch {
        return null;
      }
    }(), u2._Buffer_from = null, u2._Buffer_allocUnsafe = null, u2.newBuffer = function(p2) {
      return typeof p2 == "number" ? u2.Buffer ? u2._Buffer_allocUnsafe(p2) : new u2.Array(p2) : u2.Buffer ? u2._Buffer_from(p2) : typeof Uint8Array > "u" ? p2 : new Uint8Array(p2);
    }, u2.Array = typeof Uint8Array < "u" ? Uint8Array : Array, u2.Long = /* istanbul ignore next */
    u2.global.dcodeIO && /* istanbul ignore next */
    u2.global.dcodeIO.Long || /* istanbul ignore next */
    u2.global.Long || u2.inquire("long"), u2.key2Re = /^true|false|0|1$/, u2.key32Re = /^-?(?:0|[1-9][0-9]*)$/, u2.key64Re = /^(?:[\\x00-\\xff]{8}|-?(?:0|[1-9][0-9]*))$/, u2.longToHash = function(p2) {
      return p2 ? u2.LongBits.from(p2).toHash() : u2.LongBits.zeroHash;
    }, u2.longFromHash = function(p2, _) {
      var I2 = u2.LongBits.fromHash(p2);
      return u2.Long ? u2.Long.fromBits(I2.lo, I2.hi, _) : I2.toNumber(!!_);
    };
    function c(v2, p2, _) {
      for (var I2 = Object.keys(p2), P2 = 0; P2 < I2.length; ++P2)
        (v2[I2[P2]] === void 0 || !_) && (v2[I2[P2]] = p2[I2[P2]]);
      return v2;
    }
    u2.merge = c, u2.lcFirst = function(p2) {
      return p2.charAt(0).toLowerCase() + p2.substring(1);
    };
    function l2(v2) {
      function p2(_, I2) {
        if (!(this instanceof p2))
          return new p2(_, I2);
        Object.defineProperty(this, "message", { get: function() {
          return _;
        } }), Error.captureStackTrace ? Error.captureStackTrace(this, p2) : Object.defineProperty(this, "stack", { value: new Error().stack || "" }), I2 && c(this, I2);
      }
      return (p2.prototype = Object.create(Error.prototype)).constructor = p2, Object.defineProperty(p2.prototype, "name", { get: function() {
        return v2;
      } }), p2.prototype.toString = function() {
        return this.name + ": " + this.message;
      }, p2;
    }
    u2.newError = l2, u2.ProtocolError = l2("ProtocolError"), u2.oneOfGetter = function(p2) {
      for (var _ = {}, I2 = 0; I2 < p2.length; ++I2)
        _[p2[I2]] = 1;
      return function() {
        for (var P2 = Object.keys(this), $ = P2.length - 1; $ > -1; --$)
          if (_[P2[$]] === 1 && this[P2[$]] !== void 0 && this[P2[$]] !== null)
            return P2[$];
      };
    }, u2.oneOfSetter = function(p2) {
      return function(_) {
        for (var I2 = 0; I2 < p2.length; ++I2)
          p2[I2] !== _ && delete this[p2[I2]];
      };
    }, u2.toJSONOptions = { longs: String, enums: String, bytes: String, json: true }, u2._configure = function() {
      var v2 = u2.Buffer;
      if (!v2) {
        u2._Buffer_from = u2._Buffer_allocUnsafe = null;
        return;
      }
      u2._Buffer_from = v2.from !== Uint8Array.from && v2.from || /* istanbul ignore next */
      function(_, I2) {
        return new v2(_, I2);
      }, u2._Buffer_allocUnsafe = v2.allocUnsafe || /* istanbul ignore next */
      function(_) {
        return new v2(_);
      };
    };
  }(minimal$1)), minimal$1;
}
var writer$2 = Writer$1, util$9 = requireMinimal(), BufferWriter$1, LongBits$1 = util$9.LongBits, base64 = util$9.base64, utf8$1 = util$9.utf8;
function Op(a420, u2, c) {
  this.fn = a420, this.len = u2, this.next = void 0, this.val = c;
}
function noop$7() {
}
function State(a420) {
  this.head = a420.head, this.tail = a420.tail, this.len = a420.len, this.next = a420.states;
}
function Writer$1() {
  this.len = 0, this.head = new Op(noop$7, 0, 0), this.tail = this.head, this.states = null;
}
var create$3 = function a3() {
  return util$9.Buffer ? function() {
    return (Writer$1.create = function() {
      return new BufferWriter$1();
    })();
  } : function() {
    return new Writer$1();
  };
};
Writer$1.create = create$3();
Writer$1.alloc = function a4(u2) {
  return new util$9.Array(u2);
};
util$9.Array !== Array && (Writer$1.alloc = util$9.pool(Writer$1.alloc, util$9.Array.prototype.subarray));
Writer$1.prototype._push = function a5(u2, c, l2) {
  return this.tail = this.tail.next = new Op(u2, c, l2), this.len += c, this;
};
function writeByte(a420, u2, c) {
  u2[c] = a420 & 255;
}
function writeVarint32(a420, u2, c) {
  for (; a420 > 127; )
    u2[c++] = a420 & 127 | 128, a420 >>>= 7;
  u2[c] = a420;
}
function VarintOp(a420, u2) {
  this.len = a420, this.next = void 0, this.val = u2;
}
VarintOp.prototype = Object.create(Op.prototype);
VarintOp.prototype.fn = writeVarint32;
Writer$1.prototype.uint32 = function a6(u2) {
  return this.len += (this.tail = this.tail.next = new VarintOp((u2 = u2 >>> 0) < 128 ? 1 : u2 < 16384 ? 2 : u2 < 2097152 ? 3 : u2 < 268435456 ? 4 : 5, u2)).len, this;
};
Writer$1.prototype.int32 = function a7(u2) {
  return u2 < 0 ? this._push(writeVarint64, 10, LongBits$1.fromNumber(u2)) : this.uint32(u2);
};
Writer$1.prototype.sint32 = function a8(u2) {
  return this.uint32((u2 << 1 ^ u2 >> 31) >>> 0);
};
function writeVarint64(a420, u2, c) {
  for (; a420.hi; )
    u2[c++] = a420.lo & 127 | 128, a420.lo = (a420.lo >>> 7 | a420.hi << 25) >>> 0, a420.hi >>>= 7;
  for (; a420.lo > 127; )
    u2[c++] = a420.lo & 127 | 128, a420.lo = a420.lo >>> 7;
  u2[c++] = a420.lo;
}
Writer$1.prototype.uint64 = function a9(u2) {
  var c = LongBits$1.from(u2);
  return this._push(writeVarint64, c.length(), c);
};
Writer$1.prototype.int64 = Writer$1.prototype.uint64;
Writer$1.prototype.sint64 = function a10(u2) {
  var c = LongBits$1.from(u2).zzEncode();
  return this._push(writeVarint64, c.length(), c);
};
Writer$1.prototype.bool = function a11(u2) {
  return this._push(writeByte, 1, u2 ? 1 : 0);
};
function writeFixed32(a420, u2, c) {
  u2[c] = a420 & 255, u2[c + 1] = a420 >>> 8 & 255, u2[c + 2] = a420 >>> 16 & 255, u2[c + 3] = a420 >>> 24;
}
Writer$1.prototype.fixed32 = function a12(u2) {
  return this._push(writeFixed32, 4, u2 >>> 0);
};
Writer$1.prototype.sfixed32 = Writer$1.prototype.fixed32;
Writer$1.prototype.fixed64 = function a13(u2) {
  var c = LongBits$1.from(u2);
  return this._push(writeFixed32, 4, c.lo)._push(writeFixed32, 4, c.hi);
};
Writer$1.prototype.sfixed64 = Writer$1.prototype.fixed64;
Writer$1.prototype.float = function a14(u2) {
  return this._push(util$9.float.writeFloatLE, 4, u2);
};
Writer$1.prototype.double = function a15(u2) {
  return this._push(util$9.float.writeDoubleLE, 8, u2);
};
var writeBytes = util$9.Array.prototype.set ? function a16(u2, c, l2) {
  c.set(u2, l2);
} : function a17(u2, c, l2) {
  for (var v2 = 0; v2 < u2.length; ++v2)
    c[l2 + v2] = u2[v2];
};
Writer$1.prototype.bytes = function a18(u2) {
  var c = u2.length >>> 0;
  if (!c)
    return this._push(writeByte, 1, 0);
  if (util$9.isString(u2)) {
    var l2 = Writer$1.alloc(c = base64.length(u2));
    base64.decode(u2, l2, 0), u2 = l2;
  }
  return this.uint32(c)._push(writeBytes, c, u2);
};
Writer$1.prototype.string = function a19(u2) {
  var c = utf8$1.length(u2);
  return c ? this.uint32(c)._push(utf8$1.write, c, u2) : this._push(writeByte, 1, 0);
};
Writer$1.prototype.fork = function a20() {
  return this.states = new State(this), this.head = this.tail = new Op(noop$7, 0, 0), this.len = 0, this;
};
Writer$1.prototype.reset = function a21() {
  return this.states ? (this.head = this.states.head, this.tail = this.states.tail, this.len = this.states.len, this.states = this.states.next) : (this.head = this.tail = new Op(noop$7, 0, 0), this.len = 0), this;
};
Writer$1.prototype.ldelim = function a22() {
  var u2 = this.head, c = this.tail, l2 = this.len;
  return this.reset().uint32(l2), l2 && (this.tail.next = u2.next, this.tail = c, this.len += l2), this;
};
Writer$1.prototype.finish = function a23() {
  for (var u2 = this.head.next, c = this.constructor.alloc(this.len), l2 = 0; u2; )
    u2.fn(u2.val, c, l2), l2 += u2.len, u2 = u2.next;
  return c;
};
Writer$1._configure = function(a420) {
  BufferWriter$1 = a420, Writer$1.create = create$3(), BufferWriter$1._configure();
};
var writer_buffer = BufferWriter, Writer = writer$2;
(BufferWriter.prototype = Object.create(Writer.prototype)).constructor = BufferWriter;
var util$8 = requireMinimal();
function BufferWriter() {
  Writer.call(this);
}
BufferWriter._configure = function() {
  BufferWriter.alloc = util$8._Buffer_allocUnsafe, BufferWriter.writeBytesBuffer = util$8.Buffer && util$8.Buffer.prototype instanceof Uint8Array && util$8.Buffer.prototype.set.name === "set" ? function(u2, c, l2) {
    c.set(u2, l2);
  } : function(u2, c, l2) {
    if (u2.copy)
      u2.copy(c, l2, 0, u2.length);
    else
      for (var v2 = 0; v2 < u2.length; )
        c[l2++] = u2[v2++];
  };
};
BufferWriter.prototype.bytes = function a24(u2) {
  util$8.isString(u2) && (u2 = util$8._Buffer_from(u2, "base64"));
  var c = u2.length >>> 0;
  return this.uint32(c), c && this._push(BufferWriter.writeBytesBuffer, c, u2), this;
};
function writeStringBuffer(a420, u2, c) {
  a420.length < 40 ? util$8.utf8.write(a420, u2, c) : u2.utf8Write ? u2.utf8Write(a420, c) : u2.write(a420, c);
}
BufferWriter.prototype.string = function a25(u2) {
  var c = util$8.Buffer.byteLength(u2);
  return this.uint32(c), c && this._push(writeStringBuffer, c, u2), this;
};
BufferWriter._configure();
var reader = Reader$1, util$7 = requireMinimal(), BufferReader$1, LongBits = util$7.LongBits, utf8 = util$7.utf8;
function indexOutOfRange(a420, u2) {
  return RangeError("index out of range: " + a420.pos + " + " + (u2 || 1) + " > " + a420.len);
}
function Reader$1(a420) {
  this.buf = a420, this.pos = 0, this.len = a420.length;
}
var create_array = typeof Uint8Array < "u" ? function a26(u2) {
  if (u2 instanceof Uint8Array || Array.isArray(u2))
    return new Reader$1(u2);
  throw Error("illegal buffer");
} : function a27(u2) {
  if (Array.isArray(u2))
    return new Reader$1(u2);
  throw Error("illegal buffer");
}, create$2 = function a28() {
  return util$7.Buffer ? function(c) {
    return (Reader$1.create = function(v2) {
      return util$7.Buffer.isBuffer(v2) ? new BufferReader$1(v2) : create_array(v2);
    })(c);
  } : create_array;
};
Reader$1.create = create$2();
Reader$1.prototype._slice = util$7.Array.prototype.subarray || /* istanbul ignore next */
util$7.Array.prototype.slice;
Reader$1.prototype.uint32 = /* @__PURE__ */ function a29() {
  var u2 = 4294967295;
  return function() {
    if (u2 = (this.buf[this.pos] & 127) >>> 0, this.buf[this.pos++] < 128 || (u2 = (u2 | (this.buf[this.pos] & 127) << 7) >>> 0, this.buf[this.pos++] < 128) || (u2 = (u2 | (this.buf[this.pos] & 127) << 14) >>> 0, this.buf[this.pos++] < 128) || (u2 = (u2 | (this.buf[this.pos] & 127) << 21) >>> 0, this.buf[this.pos++] < 128) || (u2 = (u2 | (this.buf[this.pos] & 15) << 28) >>> 0, this.buf[this.pos++] < 128))
      return u2;
    if ((this.pos += 5) > this.len)
      throw this.pos = this.len, indexOutOfRange(this, 10);
    return u2;
  };
}();
Reader$1.prototype.int32 = function a30() {
  return this.uint32() | 0;
};
Reader$1.prototype.sint32 = function a31() {
  var u2 = this.uint32();
  return u2 >>> 1 ^ -(u2 & 1) | 0;
};
function readLongVarint() {
  var a420 = new LongBits(0, 0), u2 = 0;
  if (this.len - this.pos > 4) {
    for (; u2 < 4; ++u2)
      if (a420.lo = (a420.lo | (this.buf[this.pos] & 127) << u2 * 7) >>> 0, this.buf[this.pos++] < 128)
        return a420;
    if (a420.lo = (a420.lo | (this.buf[this.pos] & 127) << 28) >>> 0, a420.hi = (a420.hi | (this.buf[this.pos] & 127) >> 4) >>> 0, this.buf[this.pos++] < 128)
      return a420;
    u2 = 0;
  } else {
    for (; u2 < 3; ++u2) {
      if (this.pos >= this.len)
        throw indexOutOfRange(this);
      if (a420.lo = (a420.lo | (this.buf[this.pos] & 127) << u2 * 7) >>> 0, this.buf[this.pos++] < 128)
        return a420;
    }
    return a420.lo = (a420.lo | (this.buf[this.pos++] & 127) << u2 * 7) >>> 0, a420;
  }
  if (this.len - this.pos > 4) {
    for (; u2 < 5; ++u2)
      if (a420.hi = (a420.hi | (this.buf[this.pos] & 127) << u2 * 7 + 3) >>> 0, this.buf[this.pos++] < 128)
        return a420;
  } else
    for (; u2 < 5; ++u2) {
      if (this.pos >= this.len)
        throw indexOutOfRange(this);
      if (a420.hi = (a420.hi | (this.buf[this.pos] & 127) << u2 * 7 + 3) >>> 0, this.buf[this.pos++] < 128)
        return a420;
    }
  throw Error("invalid varint encoding");
}
Reader$1.prototype.bool = function a32() {
  return this.uint32() !== 0;
};
function readFixed32_end(a420, u2) {
  return (a420[u2 - 4] | a420[u2 - 3] << 8 | a420[u2 - 2] << 16 | a420[u2 - 1] << 24) >>> 0;
}
Reader$1.prototype.fixed32 = function a33() {
  if (this.pos + 4 > this.len)
    throw indexOutOfRange(this, 4);
  return readFixed32_end(this.buf, this.pos += 4);
};
Reader$1.prototype.sfixed32 = function a34() {
  if (this.pos + 4 > this.len)
    throw indexOutOfRange(this, 4);
  return readFixed32_end(this.buf, this.pos += 4) | 0;
};
function readFixed64() {
  if (this.pos + 8 > this.len)
    throw indexOutOfRange(this, 8);
  return new LongBits(readFixed32_end(this.buf, this.pos += 4), readFixed32_end(this.buf, this.pos += 4));
}
Reader$1.prototype.float = function a35() {
  if (this.pos + 4 > this.len)
    throw indexOutOfRange(this, 4);
  var u2 = util$7.float.readFloatLE(this.buf, this.pos);
  return this.pos += 4, u2;
};
Reader$1.prototype.double = function a36() {
  if (this.pos + 8 > this.len)
    throw indexOutOfRange(this, 4);
  var u2 = util$7.float.readDoubleLE(this.buf, this.pos);
  return this.pos += 8, u2;
};
Reader$1.prototype.bytes = function a37() {
  var u2 = this.uint32(), c = this.pos, l2 = this.pos + u2;
  if (l2 > this.len)
    throw indexOutOfRange(this, u2);
  return this.pos += u2, Array.isArray(this.buf) ? this.buf.slice(c, l2) : c === l2 ? new this.buf.constructor(0) : this._slice.call(this.buf, c, l2);
};
Reader$1.prototype.string = function a38() {
  var u2 = this.bytes();
  return utf8.read(u2, 0, u2.length);
};
Reader$1.prototype.skip = function a39(u2) {
  if (typeof u2 == "number") {
    if (this.pos + u2 > this.len)
      throw indexOutOfRange(this, u2);
    this.pos += u2;
  } else
    do
      if (this.pos >= this.len)
        throw indexOutOfRange(this);
    while (this.buf[this.pos++] & 128);
  return this;
};
Reader$1.prototype.skipType = function(a420) {
  switch (a420) {
    case 0:
      this.skip();
      break;
    case 1:
      this.skip(8);
      break;
    case 2:
      this.skip(this.uint32());
      break;
    case 3:
      for (; (a420 = this.uint32() & 7) !== 4; )
        this.skipType(a420);
      break;
    case 5:
      this.skip(4);
      break;
    default:
      throw Error("invalid wire type " + a420 + " at offset " + this.pos);
  }
  return this;
};
Reader$1._configure = function(a420) {
  BufferReader$1 = a420, Reader$1.create = create$2(), BufferReader$1._configure();
  var u2 = util$7.Long ? "toLong" : (
    /* istanbul ignore next */
    "toNumber"
  );
  util$7.merge(Reader$1.prototype, { int64: function() {
    return readLongVarint.call(this)[u2](false);
  }, uint64: function() {
    return readLongVarint.call(this)[u2](true);
  }, sint64: function() {
    return readLongVarint.call(this).zzDecode()[u2](false);
  }, fixed64: function() {
    return readFixed64.call(this)[u2](true);
  }, sfixed64: function() {
    return readFixed64.call(this)[u2](false);
  } });
};
var reader_buffer = BufferReader, Reader = reader;
(BufferReader.prototype = Object.create(Reader.prototype)).constructor = BufferReader;
var util$6 = requireMinimal();
function BufferReader(a420) {
  Reader.call(this, a420);
}
BufferReader._configure = function() {
  util$6.Buffer && (BufferReader.prototype._slice = util$6.Buffer.prototype.slice);
};
BufferReader.prototype.string = function a40() {
  var u2 = this.uint32();
  return this.buf.utf8Slice ? this.buf.utf8Slice(this.pos, this.pos = Math.min(this.pos + u2, this.len)) : this.buf.toString("utf-8", this.pos, this.pos = Math.min(this.pos + u2, this.len));
};
BufferReader._configure();
var rpc = {}, service = Service, util$5 = requireMinimal();
(Service.prototype = Object.create(util$5.EventEmitter.prototype)).constructor = Service;
function Service(a420, u2, c) {
  if (typeof a420 != "function")
    throw TypeError("rpcImpl must be a function");
  util$5.EventEmitter.call(this), this.rpcImpl = a420, this.requestDelimited = !!u2, this.responseDelimited = !!c;
}
Service.prototype.rpcCall = function a41(u2, c, l2, v2, p2) {
  if (!v2)
    throw TypeError("request must be specified");
  var _ = this;
  if (!p2)
    return util$5.asPromise(a41, _, u2, c, l2, v2);
  if (!_.rpcImpl) {
    setTimeout(function() {
      p2(Error("already ended"));
    }, 0);
    return;
  }
  try {
    return _.rpcImpl(u2, c[_.requestDelimited ? "encodeDelimited" : "encode"](v2).finish(), function(P2, $) {
      if (P2)
        return _.emit("error", P2, u2), p2(P2);
      if ($ === null) {
        _.end(
          /* endedByRPC */
          true
        );
        return;
      }
      if (!($ instanceof l2))
        try {
          $ = l2[_.responseDelimited ? "decodeDelimited" : "decode"]($);
        } catch (F2) {
          return _.emit("error", F2, u2), p2(F2);
        }
      return _.emit("data", $, u2), p2(null, $);
    });
  } catch (I2) {
    _.emit("error", I2, u2), setTimeout(function() {
      p2(I2);
    }, 0);
    return;
  }
};
Service.prototype.end = function a42(u2) {
  return this.rpcImpl && (u2 || this.rpcImpl(null, null, null), this.rpcImpl = null, this.emit("end").off()), this;
};
(function(a420) {
  var u2 = a420;
  u2.Service = service;
})(rpc);
var roots = {};
(function(a420) {
  var u2 = a420;
  u2.build = "minimal", u2.Writer = writer$2, u2.BufferWriter = writer_buffer, u2.Reader = reader, u2.BufferReader = reader_buffer, u2.util = requireMinimal(), u2.rpc = rpc, u2.roots = roots, u2.configure = c;
  function c() {
    u2.util._configure(), u2.Writer._configure(u2.BufferWriter), u2.Reader._configure(u2.BufferReader);
  }
  c();
})(indexMinimal);
var minimal = indexMinimal, struct$2 = {};
(function(a420) {
  var u2 = commonjsGlobal$1 && commonjsGlobal$1.__createBinding || (Object.create ? function(Z2, de2, pe2, le2) {
    le2 === void 0 && (le2 = pe2), Object.defineProperty(Z2, le2, { enumerable: true, get: function() {
      return de2[pe2];
    } });
  } : function(Z2, de2, pe2, le2) {
    le2 === void 0 && (le2 = pe2), Z2[le2] = de2[pe2];
  }), c = commonjsGlobal$1 && commonjsGlobal$1.__setModuleDefault || (Object.create ? function(Z2, de2) {
    Object.defineProperty(Z2, "default", { enumerable: true, value: de2 });
  } : function(Z2, de2) {
    Z2.default = de2;
  }), l2 = commonjsGlobal$1 && commonjsGlobal$1.__importStar || function(Z2) {
    if (Z2 && Z2.__esModule)
      return Z2;
    var de2 = {};
    if (Z2 != null)
      for (var pe2 in Z2)
        pe2 !== "default" && Object.hasOwnProperty.call(Z2, pe2) && u2(de2, Z2, pe2);
    return c(de2, Z2), de2;
  }, v2 = commonjsGlobal$1 && commonjsGlobal$1.__importDefault || function(Z2) {
    return Z2 && Z2.__esModule ? Z2 : { default: Z2 };
  };
  Object.defineProperty(a420, "__esModule", { value: true }), a420.ListValue = a420.Value = a420.Struct_FieldsEntry = a420.Struct = a420.nullValueToNumber = a420.nullValueToJSON = a420.nullValueFromJSON = a420.NullValue = a420.protobufPackage = void 0;
  const p2 = v2(umdExports), _ = l2(minimal);
  a420.protobufPackage = "google.protobuf";
  var I2;
  (function(Z2) {
    Z2.NULL_VALUE = "NULL_VALUE";
  })(I2 = a420.NullValue || (a420.NullValue = {}));
  function P2(Z2) {
    switch (Z2) {
      case 0:
      case "NULL_VALUE":
        return I2.NULL_VALUE;
      default:
        throw new ie2.Error("Unrecognized enum value " + Z2 + " for enum NullValue");
    }
  }
  a420.nullValueFromJSON = P2;
  function $(Z2) {
    switch (Z2) {
      case I2.NULL_VALUE:
        return "NULL_VALUE";
      default:
        return "UNKNOWN";
    }
  }
  a420.nullValueToJSON = $;
  function F2(Z2) {
    switch (Z2) {
      case I2.NULL_VALUE:
        return 0;
      default:
        return 0;
    }
  }
  a420.nullValueToNumber = F2;
  function H2() {
    return { fields: {} };
  }
  a420.Struct = { encode(Z2, de2 = _.Writer.create()) {
    return Object.entries(Z2.fields).forEach(([pe2, le2]) => {
      le2 !== void 0 && a420.Struct_FieldsEntry.encode({ key: pe2, value: le2 }, de2.uint32(10).fork()).ldelim();
    }), de2;
  }, decode(Z2, de2) {
    const pe2 = Z2 instanceof _.Reader ? Z2 : new _.Reader(Z2);
    let le2 = de2 === void 0 ? pe2.len : pe2.pos + de2;
    const be2 = H2();
    for (; pe2.pos < le2; ) {
      const ke2 = pe2.uint32();
      switch (ke2 >>> 3) {
        case 1:
          const Te2 = a420.Struct_FieldsEntry.decode(pe2, pe2.uint32());
          Te2.value !== void 0 && (be2.fields[Te2.key] = Te2.value);
          break;
        default:
          pe2.skipType(ke2 & 7);
          break;
      }
    }
    return be2;
  }, fromJSON(Z2) {
    return { fields: Q2(Z2.fields) ? Object.entries(Z2.fields).reduce((de2, [pe2, le2]) => (de2[pe2] = le2, de2), {}) : {} };
  }, toJSON(Z2) {
    const de2 = {};
    return de2.fields = {}, Z2.fields && Object.entries(Z2.fields).forEach(([pe2, le2]) => {
      de2.fields[pe2] = le2;
    }), de2;
  }, fromPartial(Z2) {
    var de2;
    const pe2 = H2();
    return pe2.fields = Object.entries((de2 = Z2.fields) !== null && de2 !== void 0 ? de2 : {}).reduce((le2, [be2, ke2]) => (ke2 !== void 0 && (le2[be2] = ke2), le2), {}), pe2;
  }, wrap(Z2) {
    const de2 = H2();
    return Z2 !== void 0 && Object.keys(Z2).forEach((pe2) => {
      de2.fields[pe2] = Z2[pe2];
    }), de2;
  }, unwrap(Z2) {
    const de2 = {};
    return Object.keys(Z2.fields).forEach((pe2) => {
      de2[pe2] = Z2.fields[pe2];
    }), de2;
  } };
  function j() {
    return { key: "", value: void 0 };
  }
  a420.Struct_FieldsEntry = { encode(Z2, de2 = _.Writer.create()) {
    return Z2.key !== "" && de2.uint32(10).string(Z2.key), Z2.value !== void 0 && a420.Value.encode(a420.Value.wrap(Z2.value), de2.uint32(18).fork()).ldelim(), de2;
  }, decode(Z2, de2) {
    const pe2 = Z2 instanceof _.Reader ? Z2 : new _.Reader(Z2);
    let le2 = de2 === void 0 ? pe2.len : pe2.pos + de2;
    const be2 = j();
    for (; pe2.pos < le2; ) {
      const ke2 = pe2.uint32();
      switch (ke2 >>> 3) {
        case 1:
          be2.key = pe2.string();
          break;
        case 2:
          be2.value = a420.Value.unwrap(a420.Value.decode(pe2, pe2.uint32()));
          break;
        default:
          pe2.skipType(ke2 & 7);
          break;
      }
    }
    return be2;
  }, fromJSON(Z2) {
    return { key: ne2(Z2.key) ? String(Z2.key) : "", value: ne2(Z2 == null ? void 0 : Z2.value) ? Z2.value : void 0 };
  }, toJSON(Z2) {
    const de2 = {};
    return Z2.key !== void 0 && (de2.key = Z2.key), Z2.value !== void 0 && (de2.value = Z2.value), de2;
  }, fromPartial(Z2) {
    var de2, pe2;
    const le2 = j();
    return le2.key = (de2 = Z2.key) !== null && de2 !== void 0 ? de2 : "", le2.value = (pe2 = Z2.value) !== null && pe2 !== void 0 ? pe2 : void 0, le2;
  } };
  function ee2() {
    return { nullValue: void 0, numberValue: void 0, stringValue: void 0, boolValue: void 0, structValue: void 0, listValue: void 0 };
  }
  a420.Value = { encode(Z2, de2 = _.Writer.create()) {
    return Z2.nullValue !== void 0 && de2.uint32(8).int32(F2(Z2.nullValue)), Z2.numberValue !== void 0 && de2.uint32(17).double(Z2.numberValue), Z2.stringValue !== void 0 && de2.uint32(26).string(Z2.stringValue), Z2.boolValue !== void 0 && de2.uint32(32).bool(Z2.boolValue), Z2.structValue !== void 0 && a420.Struct.encode(a420.Struct.wrap(Z2.structValue), de2.uint32(42).fork()).ldelim(), Z2.listValue !== void 0 && a420.ListValue.encode(a420.ListValue.wrap(Z2.listValue), de2.uint32(50).fork()).ldelim(), de2;
  }, decode(Z2, de2) {
    const pe2 = Z2 instanceof _.Reader ? Z2 : new _.Reader(Z2);
    let le2 = de2 === void 0 ? pe2.len : pe2.pos + de2;
    const be2 = ee2();
    for (; pe2.pos < le2; ) {
      const ke2 = pe2.uint32();
      switch (ke2 >>> 3) {
        case 1:
          be2.nullValue = P2(pe2.int32());
          break;
        case 2:
          be2.numberValue = pe2.double();
          break;
        case 3:
          be2.stringValue = pe2.string();
          break;
        case 4:
          be2.boolValue = pe2.bool();
          break;
        case 5:
          be2.structValue = a420.Struct.unwrap(a420.Struct.decode(pe2, pe2.uint32()));
          break;
        case 6:
          be2.listValue = a420.ListValue.unwrap(a420.ListValue.decode(pe2, pe2.uint32()));
          break;
        default:
          pe2.skipType(ke2 & 7);
          break;
      }
    }
    return be2;
  }, fromJSON(Z2) {
    return { nullValue: ne2(Z2.nullValue) ? P2(Z2.nullValue) : void 0, numberValue: ne2(Z2.numberValue) ? Number(Z2.numberValue) : void 0, stringValue: ne2(Z2.stringValue) ? String(Z2.stringValue) : void 0, boolValue: ne2(Z2.boolValue) ? !!Z2.boolValue : void 0, structValue: Q2(Z2.structValue) ? Z2.structValue : void 0, listValue: Array.isArray(Z2.listValue) ? [...Z2.listValue] : void 0 };
  }, toJSON(Z2) {
    const de2 = {};
    return Z2.nullValue !== void 0 && (de2.nullValue = Z2.nullValue !== void 0 ? $(Z2.nullValue) : void 0), Z2.numberValue !== void 0 && (de2.numberValue = Z2.numberValue), Z2.stringValue !== void 0 && (de2.stringValue = Z2.stringValue), Z2.boolValue !== void 0 && (de2.boolValue = Z2.boolValue), Z2.structValue !== void 0 && (de2.structValue = Z2.structValue), Z2.listValue !== void 0 && (de2.listValue = Z2.listValue), de2;
  }, fromPartial(Z2) {
    var de2, pe2, le2, be2, ke2, Te2;
    const q2 = ee2();
    return q2.nullValue = (de2 = Z2.nullValue) !== null && de2 !== void 0 ? de2 : void 0, q2.numberValue = (pe2 = Z2.numberValue) !== null && pe2 !== void 0 ? pe2 : void 0, q2.stringValue = (le2 = Z2.stringValue) !== null && le2 !== void 0 ? le2 : void 0, q2.boolValue = (be2 = Z2.boolValue) !== null && be2 !== void 0 ? be2 : void 0, q2.structValue = (ke2 = Z2.structValue) !== null && ke2 !== void 0 ? ke2 : void 0, q2.listValue = (Te2 = Z2.listValue) !== null && Te2 !== void 0 ? Te2 : void 0, q2;
  }, wrap(Z2) {
    const de2 = ee2();
    if (Z2 === null)
      de2.nullValue = I2.NULL_VALUE;
    else if (typeof Z2 == "boolean")
      de2.boolValue = Z2;
    else if (typeof Z2 == "number")
      de2.numberValue = Z2;
    else if (typeof Z2 == "string")
      de2.stringValue = Z2;
    else if (Array.isArray(Z2))
      de2.listValue = Z2;
    else if (typeof Z2 == "object")
      de2.structValue = Z2;
    else if (typeof Z2 < "u")
      throw new Error("Unsupported any value type: " + typeof Z2);
    return de2;
  }, unwrap(Z2) {
    if ((Z2 == null ? void 0 : Z2.stringValue) !== void 0)
      return Z2.stringValue;
    if ((Z2 == null ? void 0 : Z2.numberValue) !== void 0)
      return Z2.numberValue;
    if ((Z2 == null ? void 0 : Z2.boolValue) !== void 0)
      return Z2.boolValue;
    if ((Z2 == null ? void 0 : Z2.structValue) !== void 0)
      return Z2.structValue;
    if ((Z2 == null ? void 0 : Z2.listValue) !== void 0)
      return Z2.listValue;
    if ((Z2 == null ? void 0 : Z2.nullValue) !== void 0)
      return null;
  } };
  function X2() {
    return { values: [] };
  }
  a420.ListValue = { encode(Z2, de2 = _.Writer.create()) {
    for (const pe2 of Z2.values)
      a420.Value.encode(a420.Value.wrap(pe2), de2.uint32(10).fork()).ldelim();
    return de2;
  }, decode(Z2, de2) {
    const pe2 = Z2 instanceof _.Reader ? Z2 : new _.Reader(Z2);
    let le2 = de2 === void 0 ? pe2.len : pe2.pos + de2;
    const be2 = X2();
    for (; pe2.pos < le2; ) {
      const ke2 = pe2.uint32();
      switch (ke2 >>> 3) {
        case 1:
          be2.values.push(a420.Value.unwrap(a420.Value.decode(pe2, pe2.uint32())));
          break;
        default:
          pe2.skipType(ke2 & 7);
          break;
      }
    }
    return be2;
  }, fromJSON(Z2) {
    return { values: Array.isArray(Z2 == null ? void 0 : Z2.values) ? [...Z2.values] : [] };
  }, toJSON(Z2) {
    const de2 = {};
    return Z2.values ? de2.values = Z2.values.map((pe2) => pe2) : de2.values = [], de2;
  }, fromPartial(Z2) {
    var de2;
    const pe2 = X2();
    return pe2.values = ((de2 = Z2.values) === null || de2 === void 0 ? void 0 : de2.map((le2) => le2)) || [], pe2;
  }, wrap(Z2) {
    const de2 = X2();
    return de2.values = Z2 ?? [], de2;
  }, unwrap(Z2) {
    return Z2.values;
  } };
  var ie2 = (() => {
    if (typeof ie2 < "u")
      return ie2;
    if (typeof self < "u")
      return self;
    if (typeof window < "u")
      return window;
    if (typeof commonjsGlobal$1 < "u")
      return commonjsGlobal$1;
    throw "Unable to locate global object";
  })();
  _.util.Long !== p2.default && (_.util.Long = p2.default, _.configure());
  function Q2(Z2) {
    return typeof Z2 == "object" && Z2 !== null;
  }
  function ne2(Z2) {
    return Z2 != null;
  }
})(struct$2);
(function(a420) {
  var u2 = commonjsGlobal$1 && commonjsGlobal$1.__createBinding || (Object.create ? function(U2, se2, Se2, Ue2) {
    Ue2 === void 0 && (Ue2 = Se2), Object.defineProperty(U2, Ue2, { enumerable: true, get: function() {
      return se2[Se2];
    } });
  } : function(U2, se2, Se2, Ue2) {
    Ue2 === void 0 && (Ue2 = Se2), U2[Ue2] = se2[Se2];
  }), c = commonjsGlobal$1 && commonjsGlobal$1.__setModuleDefault || (Object.create ? function(U2, se2) {
    Object.defineProperty(U2, "default", { enumerable: true, value: se2 });
  } : function(U2, se2) {
    U2.default = se2;
  }), l2 = commonjsGlobal$1 && commonjsGlobal$1.__importStar || function(U2) {
    if (U2 && U2.__esModule)
      return U2;
    var se2 = {};
    if (U2 != null)
      for (var Se2 in U2)
        Se2 !== "default" && Object.hasOwnProperty.call(U2, Se2) && u2(se2, U2, Se2);
    return c(se2, U2), se2;
  }, v2 = commonjsGlobal$1 && commonjsGlobal$1.__importDefault || function(U2) {
    return U2 && U2.__esModule ? U2 : { default: U2 };
  };
  Object.defineProperty(a420, "__esModule", { value: true }), a420.LayoutServiceDefinition = a420.LayoutServiceClientImpl = a420.LayerServiceDefinition = a420.LayerServiceClientImpl = a420.Event = a420.LayerEvent = a420.LayoutEvent = a420.BatchLayerRequest_BatchItem = a420.BatchLayerRequest = a420.BatchDeleteLayerRequest = a420.DeleteLayerPayload = a420.UpdateLayerRequest = a420.GetLayerRequest = a420.CreateLayerRequest = a420.ListLayersResponse = a420.ListLayersRequest = a420.PartialLayerWithID = a420.PartialLayer = a420.LayerAnimation = a420.DeleteLayoutResponse = a420.DeleteLayoutRequest = a420.DeleteLayoutPayload = a420.UpdateLayoutRequest = a420.GetLayoutRequest = a420.CreateLayoutRequest = a420.ListLayoutsResponse = a420.ListLayoutsRequest = a420.PartialLayout = a420.BatchLayerResponse_BatchLayerItem = a420.BatchLayerResponse = a420.DeleteLayerResponse = a420.DeleteLayerRequest = a420.Layer = a420.Layout = a420.Transition_TransitionStinger = a420.Transition_TransitionStingerCut = a420.Transition_TransitionSwipe = a420.Transition_TransitionCrossfade = a420.Transition_TransitionFadeToColor = a420.Transition_TransitionCut = a420.Transition_TransitionMediaType = a420.Transition = a420.transition_TransitionSwipeTypeToNumber = a420.transition_TransitionSwipeTypeToJSON = a420.transition_TransitionSwipeTypeFromJSON = a420.Transition_TransitionSwipeType = a420.transition_TransitionDirectionToNumber = a420.transition_TransitionDirectionToJSON = a420.transition_TransitionDirectionFromJSON = a420.Transition_TransitionDirection = a420.eventTypeToNumber = a420.eventTypeToJSON = a420.eventTypeFromJSON = a420.EventType = a420.eventSubTypeToNumber = a420.eventSubTypeToJSON = a420.eventSubTypeFromJSON = a420.EventSubType = a420.requestAnimationModeToNumber = a420.requestAnimationModeToJSON = a420.requestAnimationModeFromJSON = a420.RequestAnimationMode = a420.layoutTypeToNumber = a420.layoutTypeToJSON = a420.layoutTypeFromJSON = a420.LayoutType = a420.protobufPackage = void 0;
  const p2 = v2(umdExports), _ = l2(minimal), I2 = struct$2;
  a420.protobufPackage = "apis.layout.v2";
  var P2;
  (function(U2) {
    U2.LAYOUT_TYPE_UNSPECIFIED = "LAYOUT_TYPE_UNSPECIFIED", U2.LAYOUT_TYPE_SCENELESS = "LAYOUT_TYPE_SCENELESS", U2.LAYOUT_TYPE_SCENE = "LAYOUT_TYPE_SCENE";
  })(P2 = a420.LayoutType || (a420.LayoutType = {}));
  function $(U2) {
    switch (U2) {
      case 0:
      case "LAYOUT_TYPE_UNSPECIFIED":
        return P2.LAYOUT_TYPE_UNSPECIFIED;
      case 1:
      case "LAYOUT_TYPE_SCENELESS":
        return P2.LAYOUT_TYPE_SCENELESS;
      case 2:
      case "LAYOUT_TYPE_SCENE":
        return P2.LAYOUT_TYPE_SCENE;
      default:
        throw new Ve2.Error("Unrecognized enum value " + U2 + " for enum LayoutType");
    }
  }
  a420.layoutTypeFromJSON = $;
  function F2(U2) {
    switch (U2) {
      case P2.LAYOUT_TYPE_UNSPECIFIED:
        return "LAYOUT_TYPE_UNSPECIFIED";
      case P2.LAYOUT_TYPE_SCENELESS:
        return "LAYOUT_TYPE_SCENELESS";
      case P2.LAYOUT_TYPE_SCENE:
        return "LAYOUT_TYPE_SCENE";
      default:
        return "UNKNOWN";
    }
  }
  a420.layoutTypeToJSON = F2;
  function H2(U2) {
    switch (U2) {
      case P2.LAYOUT_TYPE_UNSPECIFIED:
        return 0;
      case P2.LAYOUT_TYPE_SCENELESS:
        return 1;
      case P2.LAYOUT_TYPE_SCENE:
        return 2;
      default:
        return 0;
    }
  }
  a420.layoutTypeToNumber = H2;
  var j;
  (function(U2) {
    U2.REQUEST_ANIMATION_MODE_UNSPECIFIED = "REQUEST_ANIMATION_MODE_UNSPECIFIED", U2.REQUEST_ANIMATION_MODE_PARALLEL = "REQUEST_ANIMATION_MODE_PARALLEL", U2.REQUEST_ANIMATION_MODE_SERIES = "REQUEST_ANIMATION_MODE_SERIES";
  })(j = a420.RequestAnimationMode || (a420.RequestAnimationMode = {}));
  function ee2(U2) {
    switch (U2) {
      case 0:
      case "REQUEST_ANIMATION_MODE_UNSPECIFIED":
        return j.REQUEST_ANIMATION_MODE_UNSPECIFIED;
      case 1:
      case "REQUEST_ANIMATION_MODE_PARALLEL":
        return j.REQUEST_ANIMATION_MODE_PARALLEL;
      case 2:
      case "REQUEST_ANIMATION_MODE_SERIES":
        return j.REQUEST_ANIMATION_MODE_SERIES;
      default:
        throw new Ve2.Error("Unrecognized enum value " + U2 + " for enum RequestAnimationMode");
    }
  }
  a420.requestAnimationModeFromJSON = ee2;
  function X2(U2) {
    switch (U2) {
      case j.REQUEST_ANIMATION_MODE_UNSPECIFIED:
        return "REQUEST_ANIMATION_MODE_UNSPECIFIED";
      case j.REQUEST_ANIMATION_MODE_PARALLEL:
        return "REQUEST_ANIMATION_MODE_PARALLEL";
      case j.REQUEST_ANIMATION_MODE_SERIES:
        return "REQUEST_ANIMATION_MODE_SERIES";
      default:
        return "UNKNOWN";
    }
  }
  a420.requestAnimationModeToJSON = X2;
  function ie2(U2) {
    switch (U2) {
      case j.REQUEST_ANIMATION_MODE_UNSPECIFIED:
        return 0;
      case j.REQUEST_ANIMATION_MODE_PARALLEL:
        return 1;
      case j.REQUEST_ANIMATION_MODE_SERIES:
        return 2;
      default:
        return 0;
    }
  }
  a420.requestAnimationModeToNumber = ie2;
  var Q2;
  (function(U2) {
    U2.EVENT_SUB_TYPE_UNSPECIFIED = "EVENT_SUB_TYPE_UNSPECIFIED", U2.EVENT_SUB_TYPE_CREATE = "EVENT_SUB_TYPE_CREATE", U2.EVENT_SUB_TYPE_UPDATE = "EVENT_SUB_TYPE_UPDATE", U2.EVENT_SUB_TYPE_DELETE = "EVENT_SUB_TYPE_DELETE", U2.EVENT_SUB_TYPE_BATCH = "EVENT_SUB_TYPE_BATCH";
  })(Q2 = a420.EventSubType || (a420.EventSubType = {}));
  function ne2(U2) {
    switch (U2) {
      case 0:
      case "EVENT_SUB_TYPE_UNSPECIFIED":
        return Q2.EVENT_SUB_TYPE_UNSPECIFIED;
      case 1:
      case "EVENT_SUB_TYPE_CREATE":
        return Q2.EVENT_SUB_TYPE_CREATE;
      case 2:
      case "EVENT_SUB_TYPE_UPDATE":
        return Q2.EVENT_SUB_TYPE_UPDATE;
      case 3:
      case "EVENT_SUB_TYPE_DELETE":
        return Q2.EVENT_SUB_TYPE_DELETE;
      case 4:
      case "EVENT_SUB_TYPE_BATCH":
        return Q2.EVENT_SUB_TYPE_BATCH;
      default:
        throw new Ve2.Error("Unrecognized enum value " + U2 + " for enum EventSubType");
    }
  }
  a420.eventSubTypeFromJSON = ne2;
  function Z2(U2) {
    switch (U2) {
      case Q2.EVENT_SUB_TYPE_UNSPECIFIED:
        return "EVENT_SUB_TYPE_UNSPECIFIED";
      case Q2.EVENT_SUB_TYPE_CREATE:
        return "EVENT_SUB_TYPE_CREATE";
      case Q2.EVENT_SUB_TYPE_UPDATE:
        return "EVENT_SUB_TYPE_UPDATE";
      case Q2.EVENT_SUB_TYPE_DELETE:
        return "EVENT_SUB_TYPE_DELETE";
      case Q2.EVENT_SUB_TYPE_BATCH:
        return "EVENT_SUB_TYPE_BATCH";
      default:
        return "UNKNOWN";
    }
  }
  a420.eventSubTypeToJSON = Z2;
  function de2(U2) {
    switch (U2) {
      case Q2.EVENT_SUB_TYPE_UNSPECIFIED:
        return 0;
      case Q2.EVENT_SUB_TYPE_CREATE:
        return 1;
      case Q2.EVENT_SUB_TYPE_UPDATE:
        return 2;
      case Q2.EVENT_SUB_TYPE_DELETE:
        return 3;
      case Q2.EVENT_SUB_TYPE_BATCH:
        return 4;
      default:
        return 0;
    }
  }
  a420.eventSubTypeToNumber = de2;
  var pe2;
  (function(U2) {
    U2.EVENT_TYPE_UNSPECIFIED = "EVENT_TYPE_UNSPECIFIED", U2.EVENT_TYPE_LAYOUT = "EVENT_TYPE_LAYOUT", U2.EVENT_TYPE_LAYER = "EVENT_TYPE_LAYER";
  })(pe2 = a420.EventType || (a420.EventType = {}));
  function le2(U2) {
    switch (U2) {
      case 0:
      case "EVENT_TYPE_UNSPECIFIED":
        return pe2.EVENT_TYPE_UNSPECIFIED;
      case 1:
      case "EVENT_TYPE_LAYOUT":
        return pe2.EVENT_TYPE_LAYOUT;
      case 2:
      case "EVENT_TYPE_LAYER":
        return pe2.EVENT_TYPE_LAYER;
      default:
        throw new Ve2.Error("Unrecognized enum value " + U2 + " for enum EventType");
    }
  }
  a420.eventTypeFromJSON = le2;
  function be2(U2) {
    switch (U2) {
      case pe2.EVENT_TYPE_UNSPECIFIED:
        return "EVENT_TYPE_UNSPECIFIED";
      case pe2.EVENT_TYPE_LAYOUT:
        return "EVENT_TYPE_LAYOUT";
      case pe2.EVENT_TYPE_LAYER:
        return "EVENT_TYPE_LAYER";
      default:
        return "UNKNOWN";
    }
  }
  a420.eventTypeToJSON = be2;
  function ke2(U2) {
    switch (U2) {
      case pe2.EVENT_TYPE_UNSPECIFIED:
        return 0;
      case pe2.EVENT_TYPE_LAYOUT:
        return 1;
      case pe2.EVENT_TYPE_LAYER:
        return 2;
      default:
        return 0;
    }
  }
  a420.eventTypeToNumber = ke2;
  var Te2;
  (function(U2) {
    U2.TRANSITION_DIRECTION_UNSPECIFIED = "TRANSITION_DIRECTION_UNSPECIFIED", U2.TRANSITION_DIRECTION_LEFT = "TRANSITION_DIRECTION_LEFT", U2.TRANSITION_DIRECTION_RIGHT = "TRANSITION_DIRECTION_RIGHT", U2.TRANSITION_DIRECTION_UP = "TRANSITION_DIRECTION_UP", U2.TRANSITION_DIRECTION_DOWN = "TRANSITION_DIRECTION_DOWN";
  })(Te2 = a420.Transition_TransitionDirection || (a420.Transition_TransitionDirection = {}));
  function q2(U2) {
    switch (U2) {
      case 0:
      case "TRANSITION_DIRECTION_UNSPECIFIED":
        return Te2.TRANSITION_DIRECTION_UNSPECIFIED;
      case 1:
      case "TRANSITION_DIRECTION_LEFT":
        return Te2.TRANSITION_DIRECTION_LEFT;
      case 2:
      case "TRANSITION_DIRECTION_RIGHT":
        return Te2.TRANSITION_DIRECTION_RIGHT;
      case 3:
      case "TRANSITION_DIRECTION_UP":
        return Te2.TRANSITION_DIRECTION_UP;
      case 4:
      case "TRANSITION_DIRECTION_DOWN":
        return Te2.TRANSITION_DIRECTION_DOWN;
      default:
        throw new Ve2.Error("Unrecognized enum value " + U2 + " for enum Transition_TransitionDirection");
    }
  }
  a420.transition_TransitionDirectionFromJSON = q2;
  function z2(U2) {
    switch (U2) {
      case Te2.TRANSITION_DIRECTION_UNSPECIFIED:
        return "TRANSITION_DIRECTION_UNSPECIFIED";
      case Te2.TRANSITION_DIRECTION_LEFT:
        return "TRANSITION_DIRECTION_LEFT";
      case Te2.TRANSITION_DIRECTION_RIGHT:
        return "TRANSITION_DIRECTION_RIGHT";
      case Te2.TRANSITION_DIRECTION_UP:
        return "TRANSITION_DIRECTION_UP";
      case Te2.TRANSITION_DIRECTION_DOWN:
        return "TRANSITION_DIRECTION_DOWN";
      default:
        return "UNKNOWN";
    }
  }
  a420.transition_TransitionDirectionToJSON = z2;
  function C2(U2) {
    switch (U2) {
      case Te2.TRANSITION_DIRECTION_UNSPECIFIED:
        return 0;
      case Te2.TRANSITION_DIRECTION_LEFT:
        return 1;
      case Te2.TRANSITION_DIRECTION_RIGHT:
        return 2;
      case Te2.TRANSITION_DIRECTION_UP:
        return 3;
      case Te2.TRANSITION_DIRECTION_DOWN:
        return 4;
      default:
        return 0;
    }
  }
  a420.transition_TransitionDirectionToNumber = C2;
  var b;
  (function(U2) {
    U2.TRANSITION_SWIPE_TYPE_UNSPECIFIED = "TRANSITION_SWIPE_TYPE_UNSPECIFIED", U2.TRANSITION_SWIPE_TYPE_COMBINED = "TRANSITION_SWIPE_TYPE_COMBINED", U2.TRANSITION_SWIPE_TYPE_SOURCE = "TRANSITION_SWIPE_TYPE_SOURCE", U2.TRANSITION_SWIPE_TYPE_DESTINATION = "TRANSITION_SWIPE_TYPE_DESTINATION";
  })(b = a420.Transition_TransitionSwipeType || (a420.Transition_TransitionSwipeType = {}));
  function E2(U2) {
    switch (U2) {
      case 0:
      case "TRANSITION_SWIPE_TYPE_UNSPECIFIED":
        return b.TRANSITION_SWIPE_TYPE_UNSPECIFIED;
      case 1:
      case "TRANSITION_SWIPE_TYPE_COMBINED":
        return b.TRANSITION_SWIPE_TYPE_COMBINED;
      case 2:
      case "TRANSITION_SWIPE_TYPE_SOURCE":
        return b.TRANSITION_SWIPE_TYPE_SOURCE;
      case 3:
      case "TRANSITION_SWIPE_TYPE_DESTINATION":
        return b.TRANSITION_SWIPE_TYPE_DESTINATION;
      default:
        throw new Ve2.Error("Unrecognized enum value " + U2 + " for enum Transition_TransitionSwipeType");
    }
  }
  a420.transition_TransitionSwipeTypeFromJSON = E2;
  function k(U2) {
    switch (U2) {
      case b.TRANSITION_SWIPE_TYPE_UNSPECIFIED:
        return "TRANSITION_SWIPE_TYPE_UNSPECIFIED";
      case b.TRANSITION_SWIPE_TYPE_COMBINED:
        return "TRANSITION_SWIPE_TYPE_COMBINED";
      case b.TRANSITION_SWIPE_TYPE_SOURCE:
        return "TRANSITION_SWIPE_TYPE_SOURCE";
      case b.TRANSITION_SWIPE_TYPE_DESTINATION:
        return "TRANSITION_SWIPE_TYPE_DESTINATION";
      default:
        return "UNKNOWN";
    }
  }
  a420.transition_TransitionSwipeTypeToJSON = k;
  function O2(U2) {
    switch (U2) {
      case b.TRANSITION_SWIPE_TYPE_UNSPECIFIED:
        return 0;
      case b.TRANSITION_SWIPE_TYPE_COMBINED:
        return 1;
      case b.TRANSITION_SWIPE_TYPE_SOURCE:
        return 2;
      case b.TRANSITION_SWIPE_TYPE_DESTINATION:
        return 3;
      default:
        return 0;
    }
  }
  a420.transition_TransitionSwipeTypeToNumber = O2;
  function A2() {
    return { fromLayoutIds: [], cut: void 0, crossfade: void 0, fadeToColor: void 0, swipe: void 0, stinger: void 0 };
  }
  a420.Transition = { encode(U2, se2 = _.Writer.create()) {
    for (const Se2 of U2.fromLayoutIds)
      se2.uint32(10).string(Se2);
    return U2.cut !== void 0 && a420.Transition_TransitionCut.encode(U2.cut, se2.uint32(82).fork()).ldelim(), U2.crossfade !== void 0 && a420.Transition_TransitionCrossfade.encode(U2.crossfade, se2.uint32(90).fork()).ldelim(), U2.fadeToColor !== void 0 && a420.Transition_TransitionFadeToColor.encode(U2.fadeToColor, se2.uint32(98).fork()).ldelim(), U2.swipe !== void 0 && a420.Transition_TransitionSwipe.encode(U2.swipe, se2.uint32(106).fork()).ldelim(), U2.stinger !== void 0 && a420.Transition_TransitionStinger.encode(U2.stinger, se2.uint32(114).fork()).ldelim(), se2;
  }, decode(U2, se2) {
    const Se2 = U2 instanceof _.Reader ? U2 : new _.Reader(U2);
    let Ue2 = se2 === void 0 ? Se2.len : Se2.pos + se2;
    const De2 = A2();
    for (; Se2.pos < Ue2; ) {
      const Ye2 = Se2.uint32();
      switch (Ye2 >>> 3) {
        case 1:
          De2.fromLayoutIds.push(Se2.string());
          break;
        case 10:
          De2.cut = a420.Transition_TransitionCut.decode(Se2, Se2.uint32());
          break;
        case 11:
          De2.crossfade = a420.Transition_TransitionCrossfade.decode(Se2, Se2.uint32());
          break;
        case 12:
          De2.fadeToColor = a420.Transition_TransitionFadeToColor.decode(Se2, Se2.uint32());
          break;
        case 13:
          De2.swipe = a420.Transition_TransitionSwipe.decode(Se2, Se2.uint32());
          break;
        case 14:
          De2.stinger = a420.Transition_TransitionStinger.decode(Se2, Se2.uint32());
          break;
        default:
          Se2.skipType(Ye2 & 7);
          break;
      }
    }
    return De2;
  }, fromJSON(U2) {
    return { fromLayoutIds: Array.isArray(U2 == null ? void 0 : U2.fromLayoutIds) ? U2.fromLayoutIds.map((se2) => String(se2)) : [], cut: Ke2(U2.cut) ? a420.Transition_TransitionCut.fromJSON(U2.cut) : void 0, crossfade: Ke2(U2.crossfade) ? a420.Transition_TransitionCrossfade.fromJSON(U2.crossfade) : void 0, fadeToColor: Ke2(U2.fadeToColor) ? a420.Transition_TransitionFadeToColor.fromJSON(U2.fadeToColor) : void 0, swipe: Ke2(U2.swipe) ? a420.Transition_TransitionSwipe.fromJSON(U2.swipe) : void 0, stinger: Ke2(U2.stinger) ? a420.Transition_TransitionStinger.fromJSON(U2.stinger) : void 0 };
  }, toJSON(U2) {
    const se2 = {};
    return U2.fromLayoutIds ? se2.fromLayoutIds = U2.fromLayoutIds.map((Se2) => Se2) : se2.fromLayoutIds = [], U2.cut !== void 0 && (se2.cut = U2.cut ? a420.Transition_TransitionCut.toJSON(U2.cut) : void 0), U2.crossfade !== void 0 && (se2.crossfade = U2.crossfade ? a420.Transition_TransitionCrossfade.toJSON(U2.crossfade) : void 0), U2.fadeToColor !== void 0 && (se2.fadeToColor = U2.fadeToColor ? a420.Transition_TransitionFadeToColor.toJSON(U2.fadeToColor) : void 0), U2.swipe !== void 0 && (se2.swipe = U2.swipe ? a420.Transition_TransitionSwipe.toJSON(U2.swipe) : void 0), U2.stinger !== void 0 && (se2.stinger = U2.stinger ? a420.Transition_TransitionStinger.toJSON(U2.stinger) : void 0), se2;
  }, fromPartial(U2) {
    var se2;
    const Se2 = A2();
    return Se2.fromLayoutIds = ((se2 = U2.fromLayoutIds) === null || se2 === void 0 ? void 0 : se2.map((Ue2) => Ue2)) || [], Se2.cut = U2.cut !== void 0 && U2.cut !== null ? a420.Transition_TransitionCut.fromPartial(U2.cut) : void 0, Se2.crossfade = U2.crossfade !== void 0 && U2.crossfade !== null ? a420.Transition_TransitionCrossfade.fromPartial(U2.crossfade) : void 0, Se2.fadeToColor = U2.fadeToColor !== void 0 && U2.fadeToColor !== null ? a420.Transition_TransitionFadeToColor.fromPartial(U2.fadeToColor) : void 0, Se2.swipe = U2.swipe !== void 0 && U2.swipe !== null ? a420.Transition_TransitionSwipe.fromPartial(U2.swipe) : void 0, Se2.stinger = U2.stinger !== void 0 && U2.stinger !== null ? a420.Transition_TransitionStinger.fromPartial(U2.stinger) : void 0, Se2;
  } };
  function x2() {
    return { url: "", volume: 0 };
  }
  a420.Transition_TransitionMediaType = { encode(U2, se2 = _.Writer.create()) {
    return U2.url !== "" && se2.uint32(10).string(U2.url), U2.volume !== 0 && se2.uint32(17).double(U2.volume), se2;
  }, decode(U2, se2) {
    const Se2 = U2 instanceof _.Reader ? U2 : new _.Reader(U2);
    let Ue2 = se2 === void 0 ? Se2.len : Se2.pos + se2;
    const De2 = x2();
    for (; Se2.pos < Ue2; ) {
      const Ye2 = Se2.uint32();
      switch (Ye2 >>> 3) {
        case 1:
          De2.url = Se2.string();
          break;
        case 2:
          De2.volume = Se2.double();
          break;
        default:
          Se2.skipType(Ye2 & 7);
          break;
      }
    }
    return De2;
  }, fromJSON(U2) {
    return { url: Ke2(U2.url) ? String(U2.url) : "", volume: Ke2(U2.volume) ? Number(U2.volume) : 0 };
  }, toJSON(U2) {
    const se2 = {};
    return U2.url !== void 0 && (se2.url = U2.url), U2.volume !== void 0 && (se2.volume = U2.volume), se2;
  }, fromPartial(U2) {
    var se2, Se2;
    const Ue2 = x2();
    return Ue2.url = (se2 = U2.url) !== null && se2 !== void 0 ? se2 : "", Ue2.volume = (Se2 = U2.volume) !== null && Se2 !== void 0 ? Se2 : 0, Ue2;
  } };
  function Y2() {
    return {};
  }
  a420.Transition_TransitionCut = { encode(U2, se2 = _.Writer.create()) {
    return se2;
  }, decode(U2, se2) {
    const Se2 = U2 instanceof _.Reader ? U2 : new _.Reader(U2);
    let Ue2 = se2 === void 0 ? Se2.len : Se2.pos + se2;
    const De2 = Y2();
    for (; Se2.pos < Ue2; ) {
      const Ye2 = Se2.uint32();
      switch (Ye2 >>> 3) {
        default:
          Se2.skipType(Ye2 & 7);
          break;
      }
    }
    return De2;
  }, fromJSON(U2) {
    return {};
  }, toJSON(U2) {
    return {};
  }, fromPartial(U2) {
    return Y2();
  } };
  function B2() {
    return { durationMs: 0, backgroundColor: "" };
  }
  a420.Transition_TransitionFadeToColor = { encode(U2, se2 = _.Writer.create()) {
    return U2.durationMs !== 0 && se2.uint32(8).int32(U2.durationMs), U2.backgroundColor !== "" && se2.uint32(18).string(U2.backgroundColor), se2;
  }, decode(U2, se2) {
    const Se2 = U2 instanceof _.Reader ? U2 : new _.Reader(U2);
    let Ue2 = se2 === void 0 ? Se2.len : Se2.pos + se2;
    const De2 = B2();
    for (; Se2.pos < Ue2; ) {
      const Ye2 = Se2.uint32();
      switch (Ye2 >>> 3) {
        case 1:
          De2.durationMs = Se2.int32();
          break;
        case 2:
          De2.backgroundColor = Se2.string();
          break;
        default:
          Se2.skipType(Ye2 & 7);
          break;
      }
    }
    return De2;
  }, fromJSON(U2) {
    return { durationMs: Ke2(U2.durationMs) ? Number(U2.durationMs) : 0, backgroundColor: Ke2(U2.backgroundColor) ? String(U2.backgroundColor) : "" };
  }, toJSON(U2) {
    const se2 = {};
    return U2.durationMs !== void 0 && (se2.durationMs = Math.round(U2.durationMs)), U2.backgroundColor !== void 0 && (se2.backgroundColor = U2.backgroundColor), se2;
  }, fromPartial(U2) {
    var se2, Se2;
    const Ue2 = B2();
    return Ue2.durationMs = (se2 = U2.durationMs) !== null && se2 !== void 0 ? se2 : 0, Ue2.backgroundColor = (Se2 = U2.backgroundColor) !== null && Se2 !== void 0 ? Se2 : "", Ue2;
  } };
  function T2() {
    return { durationMs: 0 };
  }
  a420.Transition_TransitionCrossfade = { encode(U2, se2 = _.Writer.create()) {
    return U2.durationMs !== 0 && se2.uint32(8).int32(U2.durationMs), se2;
  }, decode(U2, se2) {
    const Se2 = U2 instanceof _.Reader ? U2 : new _.Reader(U2);
    let Ue2 = se2 === void 0 ? Se2.len : Se2.pos + se2;
    const De2 = T2();
    for (; Se2.pos < Ue2; ) {
      const Ye2 = Se2.uint32();
      switch (Ye2 >>> 3) {
        case 1:
          De2.durationMs = Se2.int32();
          break;
        default:
          Se2.skipType(Ye2 & 7);
          break;
      }
    }
    return De2;
  }, fromJSON(U2) {
    return { durationMs: Ke2(U2.durationMs) ? Number(U2.durationMs) : 0 };
  }, toJSON(U2) {
    const se2 = {};
    return U2.durationMs !== void 0 && (se2.durationMs = Math.round(U2.durationMs)), se2;
  }, fromPartial(U2) {
    var se2;
    const Se2 = T2();
    return Se2.durationMs = (se2 = U2.durationMs) !== null && se2 !== void 0 ? se2 : 0, Se2;
  } };
  function D2() {
    return { durationMs: 0, direction: Te2.TRANSITION_DIRECTION_UNSPECIFIED, combinedAnimation: b.TRANSITION_SWIPE_TYPE_UNSPECIFIED };
  }
  a420.Transition_TransitionSwipe = { encode(U2, se2 = _.Writer.create()) {
    return U2.durationMs !== 0 && se2.uint32(8).int32(U2.durationMs), U2.direction !== Te2.TRANSITION_DIRECTION_UNSPECIFIED && se2.uint32(16).int32(C2(U2.direction)), U2.combinedAnimation !== b.TRANSITION_SWIPE_TYPE_UNSPECIFIED && se2.uint32(24).int32(O2(U2.combinedAnimation)), se2;
  }, decode(U2, se2) {
    const Se2 = U2 instanceof _.Reader ? U2 : new _.Reader(U2);
    let Ue2 = se2 === void 0 ? Se2.len : Se2.pos + se2;
    const De2 = D2();
    for (; Se2.pos < Ue2; ) {
      const Ye2 = Se2.uint32();
      switch (Ye2 >>> 3) {
        case 1:
          De2.durationMs = Se2.int32();
          break;
        case 2:
          De2.direction = q2(Se2.int32());
          break;
        case 3:
          De2.combinedAnimation = E2(Se2.int32());
          break;
        default:
          Se2.skipType(Ye2 & 7);
          break;
      }
    }
    return De2;
  }, fromJSON(U2) {
    return { durationMs: Ke2(U2.durationMs) ? Number(U2.durationMs) : 0, direction: Ke2(U2.direction) ? q2(U2.direction) : Te2.TRANSITION_DIRECTION_UNSPECIFIED, combinedAnimation: Ke2(U2.combinedAnimation) ? E2(U2.combinedAnimation) : b.TRANSITION_SWIPE_TYPE_UNSPECIFIED };
  }, toJSON(U2) {
    const se2 = {};
    return U2.durationMs !== void 0 && (se2.durationMs = Math.round(U2.durationMs)), U2.direction !== void 0 && (se2.direction = z2(U2.direction)), U2.combinedAnimation !== void 0 && (se2.combinedAnimation = k(U2.combinedAnimation)), se2;
  }, fromPartial(U2) {
    var se2, Se2, Ue2;
    const De2 = D2();
    return De2.durationMs = (se2 = U2.durationMs) !== null && se2 !== void 0 ? se2 : 0, De2.direction = (Se2 = U2.direction) !== null && Se2 !== void 0 ? Se2 : Te2.TRANSITION_DIRECTION_UNSPECIFIED, De2.combinedAnimation = (Ue2 = U2.combinedAnimation) !== null && Ue2 !== void 0 ? Ue2 : b.TRANSITION_SWIPE_TYPE_UNSPECIFIED, De2;
  } };
  function te2() {
    return { cutPointMs: 0, media: void 0 };
  }
  a420.Transition_TransitionStingerCut = { encode(U2, se2 = _.Writer.create()) {
    return U2.cutPointMs !== 0 && se2.uint32(8).int32(U2.cutPointMs), U2.media !== void 0 && a420.Transition_TransitionMediaType.encode(U2.media, se2.uint32(18).fork()).ldelim(), se2;
  }, decode(U2, se2) {
    const Se2 = U2 instanceof _.Reader ? U2 : new _.Reader(U2);
    let Ue2 = se2 === void 0 ? Se2.len : Se2.pos + se2;
    const De2 = te2();
    for (; Se2.pos < Ue2; ) {
      const Ye2 = Se2.uint32();
      switch (Ye2 >>> 3) {
        case 1:
          De2.cutPointMs = Se2.int32();
          break;
        case 2:
          De2.media = a420.Transition_TransitionMediaType.decode(Se2, Se2.uint32());
          break;
        default:
          Se2.skipType(Ye2 & 7);
          break;
      }
    }
    return De2;
  }, fromJSON(U2) {
    return { cutPointMs: Ke2(U2.cutPointMs) ? Number(U2.cutPointMs) : 0, media: Ke2(U2.media) ? a420.Transition_TransitionMediaType.fromJSON(U2.media) : void 0 };
  }, toJSON(U2) {
    const se2 = {};
    return U2.cutPointMs !== void 0 && (se2.cutPointMs = Math.round(U2.cutPointMs)), U2.media !== void 0 && (se2.media = U2.media ? a420.Transition_TransitionMediaType.toJSON(U2.media) : void 0), se2;
  }, fromPartial(U2) {
    var se2;
    const Se2 = te2();
    return Se2.cutPointMs = (se2 = U2.cutPointMs) !== null && se2 !== void 0 ? se2 : 0, Se2.media = U2.media !== void 0 && U2.media !== null ? a420.Transition_TransitionMediaType.fromPartial(U2.media) : void 0, Se2;
  } };
  function me2() {
    return { cut: void 0 };
  }
  a420.Transition_TransitionStinger = { encode(U2, se2 = _.Writer.create()) {
    return U2.cut !== void 0 && a420.Transition_TransitionStingerCut.encode(U2.cut, se2.uint32(10).fork()).ldelim(), se2;
  }, decode(U2, se2) {
    const Se2 = U2 instanceof _.Reader ? U2 : new _.Reader(U2);
    let Ue2 = se2 === void 0 ? Se2.len : Se2.pos + se2;
    const De2 = me2();
    for (; Se2.pos < Ue2; ) {
      const Ye2 = Se2.uint32();
      switch (Ye2 >>> 3) {
        case 1:
          De2.cut = a420.Transition_TransitionStingerCut.decode(Se2, Se2.uint32());
          break;
        default:
          Se2.skipType(Ye2 & 7);
          break;
      }
    }
    return De2;
  }, fromJSON(U2) {
    return { cut: Ke2(U2.cut) ? a420.Transition_TransitionStingerCut.fromJSON(U2.cut) : void 0 };
  }, toJSON(U2) {
    const se2 = {};
    return U2.cut !== void 0 && (se2.cut = U2.cut ? a420.Transition_TransitionStingerCut.toJSON(U2.cut) : void 0), se2;
  }, fromPartial(U2) {
    const se2 = me2();
    return se2.cut = U2.cut !== void 0 && U2.cut !== null ? a420.Transition_TransitionStingerCut.fromPartial(U2.cut) : void 0, se2;
  } };
  function Ie2() {
    return { id: "", width: 0, height: 0, metadata: void 0, projectId: void 0, collectionId: void 0, type: void 0, transitions: [], requestMetadata: void 0 };
  }
  a420.Layout = { encode(U2, se2 = _.Writer.create()) {
    U2.id !== "" && se2.uint32(10).string(U2.id), U2.width !== 0 && se2.uint32(16).int32(U2.width), U2.height !== 0 && se2.uint32(24).int32(U2.height), U2.metadata !== void 0 && I2.Value.encode(I2.Value.wrap(U2.metadata), se2.uint32(50).fork()).ldelim(), U2.projectId !== void 0 && se2.uint32(58).string(U2.projectId), U2.collectionId !== void 0 && se2.uint32(66).string(U2.collectionId), U2.type !== void 0 && se2.uint32(72).int32(H2(U2.type));
    for (const Se2 of U2.transitions)
      a420.Transition.encode(Se2, se2.uint32(82).fork()).ldelim();
    return U2.requestMetadata !== void 0 && I2.Value.encode(I2.Value.wrap(U2.requestMetadata), se2.uint32(810).fork()).ldelim(), se2;
  }, decode(U2, se2) {
    const Se2 = U2 instanceof _.Reader ? U2 : new _.Reader(U2);
    let Ue2 = se2 === void 0 ? Se2.len : Se2.pos + se2;
    const De2 = Ie2();
    for (; Se2.pos < Ue2; ) {
      const Ye2 = Se2.uint32();
      switch (Ye2 >>> 3) {
        case 1:
          De2.id = Se2.string();
          break;
        case 2:
          De2.width = Se2.int32();
          break;
        case 3:
          De2.height = Se2.int32();
          break;
        case 6:
          De2.metadata = I2.Value.unwrap(I2.Value.decode(Se2, Se2.uint32()));
          break;
        case 7:
          De2.projectId = Se2.string();
          break;
        case 8:
          De2.collectionId = Se2.string();
          break;
        case 9:
          De2.type = $(Se2.int32());
          break;
        case 10:
          De2.transitions.push(a420.Transition.decode(Se2, Se2.uint32()));
          break;
        case 101:
          De2.requestMetadata = I2.Value.unwrap(I2.Value.decode(Se2, Se2.uint32()));
          break;
        default:
          Se2.skipType(Ye2 & 7);
          break;
      }
    }
    return De2;
  }, fromJSON(U2) {
    return { id: Ke2(U2.id) ? String(U2.id) : "", width: Ke2(U2.width) ? Number(U2.width) : 0, height: Ke2(U2.height) ? Number(U2.height) : 0, metadata: Ke2(U2 == null ? void 0 : U2.metadata) ? U2.metadata : void 0, projectId: Ke2(U2.projectId) ? String(U2.projectId) : void 0, collectionId: Ke2(U2.collectionId) ? String(U2.collectionId) : void 0, type: Ke2(U2.type) ? $(U2.type) : void 0, transitions: Array.isArray(U2 == null ? void 0 : U2.transitions) ? U2.transitions.map((se2) => a420.Transition.fromJSON(se2)) : [], requestMetadata: Ke2(U2 == null ? void 0 : U2.requestMetadata) ? U2.requestMetadata : void 0 };
  }, toJSON(U2) {
    const se2 = {};
    return U2.id !== void 0 && (se2.id = U2.id), U2.width !== void 0 && (se2.width = Math.round(U2.width)), U2.height !== void 0 && (se2.height = Math.round(U2.height)), U2.metadata !== void 0 && (se2.metadata = U2.metadata), U2.projectId !== void 0 && (se2.projectId = U2.projectId), U2.collectionId !== void 0 && (se2.collectionId = U2.collectionId), U2.type !== void 0 && (se2.type = U2.type !== void 0 ? F2(U2.type) : void 0), U2.transitions ? se2.transitions = U2.transitions.map((Se2) => Se2 ? a420.Transition.toJSON(Se2) : void 0) : se2.transitions = [], U2.requestMetadata !== void 0 && (se2.requestMetadata = U2.requestMetadata), se2;
  }, fromPartial(U2) {
    var se2, Se2, Ue2, De2, Ye2, Qe2, st, St, tt;
    const it = Ie2();
    return it.id = (se2 = U2.id) !== null && se2 !== void 0 ? se2 : "", it.width = (Se2 = U2.width) !== null && Se2 !== void 0 ? Se2 : 0, it.height = (Ue2 = U2.height) !== null && Ue2 !== void 0 ? Ue2 : 0, it.metadata = (De2 = U2.metadata) !== null && De2 !== void 0 ? De2 : void 0, it.projectId = (Ye2 = U2.projectId) !== null && Ye2 !== void 0 ? Ye2 : void 0, it.collectionId = (Qe2 = U2.collectionId) !== null && Qe2 !== void 0 ? Qe2 : void 0, it.type = (st = U2.type) !== null && st !== void 0 ? st : void 0, it.transitions = ((St = U2.transitions) === null || St === void 0 ? void 0 : St.map((Tt) => a420.Transition.fromPartial(Tt))) || [], it.requestMetadata = (tt = U2.requestMetadata) !== null && tt !== void 0 ? tt : void 0, it;
  } };
  function $e2() {
    return { type: "", data: void 0, x: void 0, y: void 0, width: void 0, height: void 0, rotation: 0, opacity: 0, scale: 0, hidden: false, children: void 0, metadata: void 0, id: "", layoutId: "", requestMetadata: void 0, requestAnimation: [] };
  }
  a420.Layer = { encode(U2, se2 = _.Writer.create()) {
    U2.type !== "" && se2.uint32(10).string(U2.type), U2.data !== void 0 && I2.Struct.encode(I2.Struct.wrap(U2.data), se2.uint32(18).fork()).ldelim(), U2.x !== void 0 && I2.Value.encode(I2.Value.wrap(U2.x), se2.uint32(26).fork()).ldelim(), U2.y !== void 0 && I2.Value.encode(I2.Value.wrap(U2.y), se2.uint32(34).fork()).ldelim(), U2.width !== void 0 && I2.Value.encode(I2.Value.wrap(U2.width), se2.uint32(42).fork()).ldelim(), U2.height !== void 0 && I2.Value.encode(I2.Value.wrap(U2.height), se2.uint32(50).fork()).ldelim(), U2.rotation !== 0 && se2.uint32(57).double(U2.rotation), U2.opacity !== 0 && se2.uint32(65).double(U2.opacity), U2.scale !== 0 && se2.uint32(73).double(U2.scale), U2.hidden === true && se2.uint32(80).bool(U2.hidden), U2.children !== void 0 && I2.ListValue.encode(I2.ListValue.wrap(U2.children), se2.uint32(98).fork()).ldelim(), U2.metadata !== void 0 && I2.Value.encode(I2.Value.wrap(U2.metadata), se2.uint32(114).fork()).ldelim(), U2.id !== "" && se2.uint32(802).string(U2.id), U2.layoutId !== "" && se2.uint32(818).string(U2.layoutId), U2.requestMetadata !== void 0 && I2.Value.encode(I2.Value.wrap(U2.requestMetadata), se2.uint32(810).fork()).ldelim();
    for (const Se2 of U2.requestAnimation)
      a420.LayerAnimation.encode(Se2, se2.uint32(826).fork()).ldelim();
    return se2;
  }, decode(U2, se2) {
    const Se2 = U2 instanceof _.Reader ? U2 : new _.Reader(U2);
    let Ue2 = se2 === void 0 ? Se2.len : Se2.pos + se2;
    const De2 = $e2();
    for (; Se2.pos < Ue2; ) {
      const Ye2 = Se2.uint32();
      switch (Ye2 >>> 3) {
        case 1:
          De2.type = Se2.string();
          break;
        case 2:
          De2.data = I2.Struct.unwrap(I2.Struct.decode(Se2, Se2.uint32()));
          break;
        case 3:
          De2.x = I2.Value.unwrap(I2.Value.decode(Se2, Se2.uint32()));
          break;
        case 4:
          De2.y = I2.Value.unwrap(I2.Value.decode(Se2, Se2.uint32()));
          break;
        case 5:
          De2.width = I2.Value.unwrap(I2.Value.decode(Se2, Se2.uint32()));
          break;
        case 6:
          De2.height = I2.Value.unwrap(I2.Value.decode(Se2, Se2.uint32()));
          break;
        case 7:
          De2.rotation = Se2.double();
          break;
        case 8:
          De2.opacity = Se2.double();
          break;
        case 9:
          De2.scale = Se2.double();
          break;
        case 10:
          De2.hidden = Se2.bool();
          break;
        case 12:
          De2.children = I2.ListValue.unwrap(I2.ListValue.decode(Se2, Se2.uint32()));
          break;
        case 14:
          De2.metadata = I2.Value.unwrap(I2.Value.decode(Se2, Se2.uint32()));
          break;
        case 100:
          De2.id = Se2.string();
          break;
        case 102:
          De2.layoutId = Se2.string();
          break;
        case 101:
          De2.requestMetadata = I2.Value.unwrap(I2.Value.decode(Se2, Se2.uint32()));
          break;
        case 103:
          De2.requestAnimation.push(a420.LayerAnimation.decode(Se2, Se2.uint32()));
          break;
        default:
          Se2.skipType(Ye2 & 7);
          break;
      }
    }
    return De2;
  }, fromJSON(U2) {
    return { type: Ke2(U2.type) ? String(U2.type) : "", data: Ze2(U2.data) ? U2.data : void 0, x: Ke2(U2 == null ? void 0 : U2.x) ? U2.x : void 0, y: Ke2(U2 == null ? void 0 : U2.y) ? U2.y : void 0, width: Ke2(U2 == null ? void 0 : U2.width) ? U2.width : void 0, height: Ke2(U2 == null ? void 0 : U2.height) ? U2.height : void 0, rotation: Ke2(U2.rotation) ? Number(U2.rotation) : 0, opacity: Ke2(U2.opacity) ? Number(U2.opacity) : 0, scale: Ke2(U2.scale) ? Number(U2.scale) : 0, hidden: Ke2(U2.hidden) ? !!U2.hidden : false, children: Array.isArray(U2.children) ? [...U2.children] : void 0, metadata: Ke2(U2 == null ? void 0 : U2.metadata) ? U2.metadata : void 0, id: Ke2(U2.id) ? String(U2.id) : "", layoutId: Ke2(U2.layoutId) ? String(U2.layoutId) : "", requestMetadata: Ke2(U2 == null ? void 0 : U2.requestMetadata) ? U2.requestMetadata : void 0, requestAnimation: Array.isArray(U2 == null ? void 0 : U2.requestAnimation) ? U2.requestAnimation.map((se2) => a420.LayerAnimation.fromJSON(se2)) : [] };
  }, toJSON(U2) {
    const se2 = {};
    return U2.type !== void 0 && (se2.type = U2.type), U2.data !== void 0 && (se2.data = U2.data), U2.x !== void 0 && (se2.x = U2.x), U2.y !== void 0 && (se2.y = U2.y), U2.width !== void 0 && (se2.width = U2.width), U2.height !== void 0 && (se2.height = U2.height), U2.rotation !== void 0 && (se2.rotation = U2.rotation), U2.opacity !== void 0 && (se2.opacity = U2.opacity), U2.scale !== void 0 && (se2.scale = U2.scale), U2.hidden !== void 0 && (se2.hidden = U2.hidden), U2.children !== void 0 && (se2.children = U2.children), U2.metadata !== void 0 && (se2.metadata = U2.metadata), U2.id !== void 0 && (se2.id = U2.id), U2.layoutId !== void 0 && (se2.layoutId = U2.layoutId), U2.requestMetadata !== void 0 && (se2.requestMetadata = U2.requestMetadata), U2.requestAnimation ? se2.requestAnimation = U2.requestAnimation.map((Se2) => Se2 ? a420.LayerAnimation.toJSON(Se2) : void 0) : se2.requestAnimation = [], se2;
  }, fromPartial(U2) {
    var se2, Se2, Ue2, De2, Ye2, Qe2, st, St, tt, it, Tt, rt, dt, wt, nt, at;
    const gt = $e2();
    return gt.type = (se2 = U2.type) !== null && se2 !== void 0 ? se2 : "", gt.data = (Se2 = U2.data) !== null && Se2 !== void 0 ? Se2 : void 0, gt.x = (Ue2 = U2.x) !== null && Ue2 !== void 0 ? Ue2 : void 0, gt.y = (De2 = U2.y) !== null && De2 !== void 0 ? De2 : void 0, gt.width = (Ye2 = U2.width) !== null && Ye2 !== void 0 ? Ye2 : void 0, gt.height = (Qe2 = U2.height) !== null && Qe2 !== void 0 ? Qe2 : void 0, gt.rotation = (st = U2.rotation) !== null && st !== void 0 ? st : 0, gt.opacity = (St = U2.opacity) !== null && St !== void 0 ? St : 0, gt.scale = (tt = U2.scale) !== null && tt !== void 0 ? tt : 0, gt.hidden = (it = U2.hidden) !== null && it !== void 0 ? it : false, gt.children = (Tt = U2.children) !== null && Tt !== void 0 ? Tt : void 0, gt.metadata = (rt = U2.metadata) !== null && rt !== void 0 ? rt : void 0, gt.id = (dt = U2.id) !== null && dt !== void 0 ? dt : "", gt.layoutId = (wt = U2.layoutId) !== null && wt !== void 0 ? wt : "", gt.requestMetadata = (nt = U2.requestMetadata) !== null && nt !== void 0 ? nt : void 0, gt.requestAnimation = ((at = U2.requestAnimation) === null || at === void 0 ? void 0 : at.map((ot) => a420.LayerAnimation.fromPartial(ot))) || [], gt;
  } };
  function ye2() {
    return { layoutId: "", layerId: "", payload: void 0 };
  }
  a420.DeleteLayerRequest = { encode(U2, se2 = _.Writer.create()) {
    return U2.layoutId !== "" && se2.uint32(10).string(U2.layoutId), U2.layerId !== "" && se2.uint32(18).string(U2.layerId), U2.payload !== void 0 && a420.DeleteLayerPayload.encode(U2.payload, se2.uint32(26).fork()).ldelim(), se2;
  }, decode(U2, se2) {
    const Se2 = U2 instanceof _.Reader ? U2 : new _.Reader(U2);
    let Ue2 = se2 === void 0 ? Se2.len : Se2.pos + se2;
    const De2 = ye2();
    for (; Se2.pos < Ue2; ) {
      const Ye2 = Se2.uint32();
      switch (Ye2 >>> 3) {
        case 1:
          De2.layoutId = Se2.string();
          break;
        case 2:
          De2.layerId = Se2.string();
          break;
        case 3:
          De2.payload = a420.DeleteLayerPayload.decode(Se2, Se2.uint32());
          break;
        default:
          Se2.skipType(Ye2 & 7);
          break;
      }
    }
    return De2;
  }, fromJSON(U2) {
    return { layoutId: Ke2(U2.layoutId) ? String(U2.layoutId) : "", layerId: Ke2(U2.layerId) ? String(U2.layerId) : "", payload: Ke2(U2.payload) ? a420.DeleteLayerPayload.fromJSON(U2.payload) : void 0 };
  }, toJSON(U2) {
    const se2 = {};
    return U2.layoutId !== void 0 && (se2.layoutId = U2.layoutId), U2.layerId !== void 0 && (se2.layerId = U2.layerId), U2.payload !== void 0 && (se2.payload = U2.payload ? a420.DeleteLayerPayload.toJSON(U2.payload) : void 0), se2;
  }, fromPartial(U2) {
    var se2, Se2;
    const Ue2 = ye2();
    return Ue2.layoutId = (se2 = U2.layoutId) !== null && se2 !== void 0 ? se2 : "", Ue2.layerId = (Se2 = U2.layerId) !== null && Se2 !== void 0 ? Se2 : "", Ue2.payload = U2.payload !== void 0 && U2.payload !== null ? a420.DeleteLayerPayload.fromPartial(U2.payload) : void 0, Ue2;
  } };
  function he2() {
    return { id: "", layoutId: "", requestMetadata: void 0 };
  }
  a420.DeleteLayerResponse = { encode(U2, se2 = _.Writer.create()) {
    return U2.id !== "" && se2.uint32(10).string(U2.id), U2.layoutId !== "" && se2.uint32(18).string(U2.layoutId), U2.requestMetadata !== void 0 && I2.Value.encode(I2.Value.wrap(U2.requestMetadata), se2.uint32(802).fork()).ldelim(), se2;
  }, decode(U2, se2) {
    const Se2 = U2 instanceof _.Reader ? U2 : new _.Reader(U2);
    let Ue2 = se2 === void 0 ? Se2.len : Se2.pos + se2;
    const De2 = he2();
    for (; Se2.pos < Ue2; ) {
      const Ye2 = Se2.uint32();
      switch (Ye2 >>> 3) {
        case 1:
          De2.id = Se2.string();
          break;
        case 2:
          De2.layoutId = Se2.string();
          break;
        case 100:
          De2.requestMetadata = I2.Value.unwrap(I2.Value.decode(Se2, Se2.uint32()));
          break;
        default:
          Se2.skipType(Ye2 & 7);
          break;
      }
    }
    return De2;
  }, fromJSON(U2) {
    return { id: Ke2(U2.id) ? String(U2.id) : "", layoutId: Ke2(U2.layoutId) ? String(U2.layoutId) : "", requestMetadata: Ke2(U2 == null ? void 0 : U2.requestMetadata) ? U2.requestMetadata : void 0 };
  }, toJSON(U2) {
    const se2 = {};
    return U2.id !== void 0 && (se2.id = U2.id), U2.layoutId !== void 0 && (se2.layoutId = U2.layoutId), U2.requestMetadata !== void 0 && (se2.requestMetadata = U2.requestMetadata), se2;
  }, fromPartial(U2) {
    var se2, Se2, Ue2;
    const De2 = he2();
    return De2.id = (se2 = U2.id) !== null && se2 !== void 0 ? se2 : "", De2.layoutId = (Se2 = U2.layoutId) !== null && Se2 !== void 0 ? Se2 : "", De2.requestMetadata = (Ue2 = U2.requestMetadata) !== null && Ue2 !== void 0 ? Ue2 : void 0, De2;
  } };
  function Me2() {
    return { layers: [], layoutId: "", requestMetadata: void 0, requestAnimationMode: j.REQUEST_ANIMATION_MODE_UNSPECIFIED };
  }
  a420.BatchLayerResponse = { encode(U2, se2 = _.Writer.create()) {
    for (const Se2 of U2.layers)
      a420.BatchLayerResponse_BatchLayerItem.encode(Se2, se2.uint32(18).fork()).ldelim();
    return U2.layoutId !== "" && se2.uint32(26).string(U2.layoutId), U2.requestMetadata !== void 0 && I2.Value.encode(I2.Value.wrap(U2.requestMetadata), se2.uint32(802).fork()).ldelim(), U2.requestAnimationMode !== j.REQUEST_ANIMATION_MODE_UNSPECIFIED && se2.uint32(808).int32(ie2(U2.requestAnimationMode)), se2;
  }, decode(U2, se2) {
    const Se2 = U2 instanceof _.Reader ? U2 : new _.Reader(U2);
    let Ue2 = se2 === void 0 ? Se2.len : Se2.pos + se2;
    const De2 = Me2();
    for (; Se2.pos < Ue2; ) {
      const Ye2 = Se2.uint32();
      switch (Ye2 >>> 3) {
        case 2:
          De2.layers.push(a420.BatchLayerResponse_BatchLayerItem.decode(Se2, Se2.uint32()));
          break;
        case 3:
          De2.layoutId = Se2.string();
          break;
        case 100:
          De2.requestMetadata = I2.Value.unwrap(I2.Value.decode(Se2, Se2.uint32()));
          break;
        case 101:
          De2.requestAnimationMode = ee2(Se2.int32());
          break;
        default:
          Se2.skipType(Ye2 & 7);
          break;
      }
    }
    return De2;
  }, fromJSON(U2) {
    return { layers: Array.isArray(U2 == null ? void 0 : U2.layers) ? U2.layers.map((se2) => a420.BatchLayerResponse_BatchLayerItem.fromJSON(se2)) : [], layoutId: Ke2(U2.layoutId) ? String(U2.layoutId) : "", requestMetadata: Ke2(U2 == null ? void 0 : U2.requestMetadata) ? U2.requestMetadata : void 0, requestAnimationMode: Ke2(U2.requestAnimationMode) ? ee2(U2.requestAnimationMode) : j.REQUEST_ANIMATION_MODE_UNSPECIFIED };
  }, toJSON(U2) {
    const se2 = {};
    return U2.layers ? se2.layers = U2.layers.map((Se2) => Se2 ? a420.BatchLayerResponse_BatchLayerItem.toJSON(Se2) : void 0) : se2.layers = [], U2.layoutId !== void 0 && (se2.layoutId = U2.layoutId), U2.requestMetadata !== void 0 && (se2.requestMetadata = U2.requestMetadata), U2.requestAnimationMode !== void 0 && (se2.requestAnimationMode = X2(U2.requestAnimationMode)), se2;
  }, fromPartial(U2) {
    var se2, Se2, Ue2, De2;
    const Ye2 = Me2();
    return Ye2.layers = ((se2 = U2.layers) === null || se2 === void 0 ? void 0 : se2.map((Qe2) => a420.BatchLayerResponse_BatchLayerItem.fromPartial(Qe2))) || [], Ye2.layoutId = (Se2 = U2.layoutId) !== null && Se2 !== void 0 ? Se2 : "", Ye2.requestMetadata = (Ue2 = U2.requestMetadata) !== null && Ue2 !== void 0 ? Ue2 : void 0, Ye2.requestAnimationMode = (De2 = U2.requestAnimationMode) !== null && De2 !== void 0 ? De2 : j.REQUEST_ANIMATION_MODE_UNSPECIFIED, Ye2;
  } };
  function Ae2() {
    return { create: void 0, update: void 0, delete: void 0 };
  }
  a420.BatchLayerResponse_BatchLayerItem = { encode(U2, se2 = _.Writer.create()) {
    return U2.create !== void 0 && a420.Layer.encode(U2.create, se2.uint32(10).fork()).ldelim(), U2.update !== void 0 && a420.Layer.encode(U2.update, se2.uint32(18).fork()).ldelim(), U2.delete !== void 0 && a420.DeleteLayerResponse.encode(U2.delete, se2.uint32(26).fork()).ldelim(), se2;
  }, decode(U2, se2) {
    const Se2 = U2 instanceof _.Reader ? U2 : new _.Reader(U2);
    let Ue2 = se2 === void 0 ? Se2.len : Se2.pos + se2;
    const De2 = Ae2();
    for (; Se2.pos < Ue2; ) {
      const Ye2 = Se2.uint32();
      switch (Ye2 >>> 3) {
        case 1:
          De2.create = a420.Layer.decode(Se2, Se2.uint32());
          break;
        case 2:
          De2.update = a420.Layer.decode(Se2, Se2.uint32());
          break;
        case 3:
          De2.delete = a420.DeleteLayerResponse.decode(Se2, Se2.uint32());
          break;
        default:
          Se2.skipType(Ye2 & 7);
          break;
      }
    }
    return De2;
  }, fromJSON(U2) {
    return { create: Ke2(U2.create) ? a420.Layer.fromJSON(U2.create) : void 0, update: Ke2(U2.update) ? a420.Layer.fromJSON(U2.update) : void 0, delete: Ke2(U2.delete) ? a420.DeleteLayerResponse.fromJSON(U2.delete) : void 0 };
  }, toJSON(U2) {
    const se2 = {};
    return U2.create !== void 0 && (se2.create = U2.create ? a420.Layer.toJSON(U2.create) : void 0), U2.update !== void 0 && (se2.update = U2.update ? a420.Layer.toJSON(U2.update) : void 0), U2.delete !== void 0 && (se2.delete = U2.delete ? a420.DeleteLayerResponse.toJSON(U2.delete) : void 0), se2;
  }, fromPartial(U2) {
    const se2 = Ae2();
    return se2.create = U2.create !== void 0 && U2.create !== null ? a420.Layer.fromPartial(U2.create) : void 0, se2.update = U2.update !== void 0 && U2.update !== null ? a420.Layer.fromPartial(U2.update) : void 0, se2.delete = U2.delete !== void 0 && U2.delete !== null ? a420.DeleteLayerResponse.fromPartial(U2.delete) : void 0, se2;
  } };
  function xe2() {
    return { width: void 0, height: void 0, metadata: void 0, projectId: void 0, collectionId: void 0, type: void 0, transitions: [], requestMetadata: void 0 };
  }
  a420.PartialLayout = { encode(U2, se2 = _.Writer.create()) {
    U2.width !== void 0 && se2.uint32(16).int32(U2.width), U2.height !== void 0 && se2.uint32(24).int32(U2.height), U2.metadata !== void 0 && I2.Value.encode(I2.Value.wrap(U2.metadata), se2.uint32(50).fork()).ldelim(), U2.projectId !== void 0 && se2.uint32(58).string(U2.projectId), U2.collectionId !== void 0 && se2.uint32(66).string(U2.collectionId), U2.type !== void 0 && se2.uint32(72).int32(H2(U2.type));
    for (const Se2 of U2.transitions)
      a420.Transition.encode(Se2, se2.uint32(82).fork()).ldelim();
    return U2.requestMetadata !== void 0 && I2.Value.encode(I2.Value.wrap(U2.requestMetadata), se2.uint32(810).fork()).ldelim(), se2;
  }, decode(U2, se2) {
    const Se2 = U2 instanceof _.Reader ? U2 : new _.Reader(U2);
    let Ue2 = se2 === void 0 ? Se2.len : Se2.pos + se2;
    const De2 = xe2();
    for (; Se2.pos < Ue2; ) {
      const Ye2 = Se2.uint32();
      switch (Ye2 >>> 3) {
        case 2:
          De2.width = Se2.int32();
          break;
        case 3:
          De2.height = Se2.int32();
          break;
        case 6:
          De2.metadata = I2.Value.unwrap(I2.Value.decode(Se2, Se2.uint32()));
          break;
        case 7:
          De2.projectId = Se2.string();
          break;
        case 8:
          De2.collectionId = Se2.string();
          break;
        case 9:
          De2.type = $(Se2.int32());
          break;
        case 10:
          De2.transitions.push(a420.Transition.decode(Se2, Se2.uint32()));
          break;
        case 101:
          De2.requestMetadata = I2.Value.unwrap(I2.Value.decode(Se2, Se2.uint32()));
          break;
        default:
          Se2.skipType(Ye2 & 7);
          break;
      }
    }
    return De2;
  }, fromJSON(U2) {
    return { width: Ke2(U2.width) ? Number(U2.width) : void 0, height: Ke2(U2.height) ? Number(U2.height) : void 0, metadata: Ke2(U2 == null ? void 0 : U2.metadata) ? U2.metadata : void 0, projectId: Ke2(U2.projectId) ? String(U2.projectId) : void 0, collectionId: Ke2(U2.collectionId) ? String(U2.collectionId) : void 0, type: Ke2(U2.type) ? $(U2.type) : void 0, transitions: Array.isArray(U2 == null ? void 0 : U2.transitions) ? U2.transitions.map((se2) => a420.Transition.fromJSON(se2)) : [], requestMetadata: Ke2(U2 == null ? void 0 : U2.requestMetadata) ? U2.requestMetadata : void 0 };
  }, toJSON(U2) {
    const se2 = {};
    return U2.width !== void 0 && (se2.width = Math.round(U2.width)), U2.height !== void 0 && (se2.height = Math.round(U2.height)), U2.metadata !== void 0 && (se2.metadata = U2.metadata), U2.projectId !== void 0 && (se2.projectId = U2.projectId), U2.collectionId !== void 0 && (se2.collectionId = U2.collectionId), U2.type !== void 0 && (se2.type = U2.type !== void 0 ? F2(U2.type) : void 0), U2.transitions ? se2.transitions = U2.transitions.map((Se2) => Se2 ? a420.Transition.toJSON(Se2) : void 0) : se2.transitions = [], U2.requestMetadata !== void 0 && (se2.requestMetadata = U2.requestMetadata), se2;
  }, fromPartial(U2) {
    var se2, Se2, Ue2, De2, Ye2, Qe2, st, St;
    const tt = xe2();
    return tt.width = (se2 = U2.width) !== null && se2 !== void 0 ? se2 : void 0, tt.height = (Se2 = U2.height) !== null && Se2 !== void 0 ? Se2 : void 0, tt.metadata = (Ue2 = U2.metadata) !== null && Ue2 !== void 0 ? Ue2 : void 0, tt.projectId = (De2 = U2.projectId) !== null && De2 !== void 0 ? De2 : void 0, tt.collectionId = (Ye2 = U2.collectionId) !== null && Ye2 !== void 0 ? Ye2 : void 0, tt.type = (Qe2 = U2.type) !== null && Qe2 !== void 0 ? Qe2 : void 0, tt.transitions = ((st = U2.transitions) === null || st === void 0 ? void 0 : st.map((it) => a420.Transition.fromPartial(it))) || [], tt.requestMetadata = (St = U2.requestMetadata) !== null && St !== void 0 ? St : void 0, tt;
  } };
  function ae2() {
    return { projectId: void 0, collectionId: void 0, type: void 0 };
  }
  a420.ListLayoutsRequest = { encode(U2, se2 = _.Writer.create()) {
    return U2.projectId !== void 0 && se2.uint32(10).string(U2.projectId), U2.collectionId !== void 0 && se2.uint32(18).string(U2.collectionId), U2.type !== void 0 && se2.uint32(24).int32(H2(U2.type)), se2;
  }, decode(U2, se2) {
    const Se2 = U2 instanceof _.Reader ? U2 : new _.Reader(U2);
    let Ue2 = se2 === void 0 ? Se2.len : Se2.pos + se2;
    const De2 = ae2();
    for (; Se2.pos < Ue2; ) {
      const Ye2 = Se2.uint32();
      switch (Ye2 >>> 3) {
        case 1:
          De2.projectId = Se2.string();
          break;
        case 2:
          De2.collectionId = Se2.string();
          break;
        case 3:
          De2.type = $(Se2.int32());
          break;
        default:
          Se2.skipType(Ye2 & 7);
          break;
      }
    }
    return De2;
  }, fromJSON(U2) {
    return { projectId: Ke2(U2.projectId) ? String(U2.projectId) : void 0, collectionId: Ke2(U2.collectionId) ? String(U2.collectionId) : void 0, type: Ke2(U2.type) ? $(U2.type) : void 0 };
  }, toJSON(U2) {
    const se2 = {};
    return U2.projectId !== void 0 && (se2.projectId = U2.projectId), U2.collectionId !== void 0 && (se2.collectionId = U2.collectionId), U2.type !== void 0 && (se2.type = U2.type !== void 0 ? F2(U2.type) : void 0), se2;
  }, fromPartial(U2) {
    var se2, Se2, Ue2;
    const De2 = ae2();
    return De2.projectId = (se2 = U2.projectId) !== null && se2 !== void 0 ? se2 : void 0, De2.collectionId = (Se2 = U2.collectionId) !== null && Se2 !== void 0 ? Se2 : void 0, De2.type = (Ue2 = U2.type) !== null && Ue2 !== void 0 ? Ue2 : void 0, De2;
  } };
  function N2() {
    return { layouts: [] };
  }
  a420.ListLayoutsResponse = { encode(U2, se2 = _.Writer.create()) {
    for (const Se2 of U2.layouts)
      a420.Layout.encode(Se2, se2.uint32(10).fork()).ldelim();
    return se2;
  }, decode(U2, se2) {
    const Se2 = U2 instanceof _.Reader ? U2 : new _.Reader(U2);
    let Ue2 = se2 === void 0 ? Se2.len : Se2.pos + se2;
    const De2 = N2();
    for (; Se2.pos < Ue2; ) {
      const Ye2 = Se2.uint32();
      switch (Ye2 >>> 3) {
        case 1:
          De2.layouts.push(a420.Layout.decode(Se2, Se2.uint32()));
          break;
        default:
          Se2.skipType(Ye2 & 7);
          break;
      }
    }
    return De2;
  }, fromJSON(U2) {
    return { layouts: Array.isArray(U2 == null ? void 0 : U2.layouts) ? U2.layouts.map((se2) => a420.Layout.fromJSON(se2)) : [] };
  }, toJSON(U2) {
    const se2 = {};
    return U2.layouts ? se2.layouts = U2.layouts.map((Se2) => Se2 ? a420.Layout.toJSON(Se2) : void 0) : se2.layouts = [], se2;
  }, fromPartial(U2) {
    var se2;
    const Se2 = N2();
    return Se2.layouts = ((se2 = U2.layouts) === null || se2 === void 0 ? void 0 : se2.map((Ue2) => a420.Layout.fromPartial(Ue2))) || [], Se2;
  } };
  function re2() {
    return { layout: void 0 };
  }
  a420.CreateLayoutRequest = { encode(U2, se2 = _.Writer.create()) {
    return U2.layout !== void 0 && a420.PartialLayout.encode(U2.layout, se2.uint32(18).fork()).ldelim(), se2;
  }, decode(U2, se2) {
    const Se2 = U2 instanceof _.Reader ? U2 : new _.Reader(U2);
    let Ue2 = se2 === void 0 ? Se2.len : Se2.pos + se2;
    const De2 = re2();
    for (; Se2.pos < Ue2; ) {
      const Ye2 = Se2.uint32();
      switch (Ye2 >>> 3) {
        case 2:
          De2.layout = a420.PartialLayout.decode(Se2, Se2.uint32());
          break;
        default:
          Se2.skipType(Ye2 & 7);
          break;
      }
    }
    return De2;
  }, fromJSON(U2) {
    return { layout: Ke2(U2.layout) ? a420.PartialLayout.fromJSON(U2.layout) : void 0 };
  }, toJSON(U2) {
    const se2 = {};
    return U2.layout !== void 0 && (se2.layout = U2.layout ? a420.PartialLayout.toJSON(U2.layout) : void 0), se2;
  }, fromPartial(U2) {
    const se2 = re2();
    return se2.layout = U2.layout !== void 0 && U2.layout !== null ? a420.PartialLayout.fromPartial(U2.layout) : void 0, se2;
  } };
  function fe2() {
    return { layoutId: "" };
  }
  a420.GetLayoutRequest = { encode(U2, se2 = _.Writer.create()) {
    return U2.layoutId !== "" && se2.uint32(10).string(U2.layoutId), se2;
  }, decode(U2, se2) {
    const Se2 = U2 instanceof _.Reader ? U2 : new _.Reader(U2);
    let Ue2 = se2 === void 0 ? Se2.len : Se2.pos + se2;
    const De2 = fe2();
    for (; Se2.pos < Ue2; ) {
      const Ye2 = Se2.uint32();
      switch (Ye2 >>> 3) {
        case 1:
          De2.layoutId = Se2.string();
          break;
        default:
          Se2.skipType(Ye2 & 7);
          break;
      }
    }
    return De2;
  }, fromJSON(U2) {
    return { layoutId: Ke2(U2.layoutId) ? String(U2.layoutId) : "" };
  }, toJSON(U2) {
    const se2 = {};
    return U2.layoutId !== void 0 && (se2.layoutId = U2.layoutId), se2;
  }, fromPartial(U2) {
    var se2;
    const Se2 = fe2();
    return Se2.layoutId = (se2 = U2.layoutId) !== null && se2 !== void 0 ? se2 : "", Se2;
  } };
  function Ne2() {
    return { layoutId: "", layout: void 0 };
  }
  a420.UpdateLayoutRequest = { encode(U2, se2 = _.Writer.create()) {
    return U2.layoutId !== "" && se2.uint32(10).string(U2.layoutId), U2.layout !== void 0 && a420.PartialLayout.encode(U2.layout, se2.uint32(26).fork()).ldelim(), se2;
  }, decode(U2, se2) {
    const Se2 = U2 instanceof _.Reader ? U2 : new _.Reader(U2);
    let Ue2 = se2 === void 0 ? Se2.len : Se2.pos + se2;
    const De2 = Ne2();
    for (; Se2.pos < Ue2; ) {
      const Ye2 = Se2.uint32();
      switch (Ye2 >>> 3) {
        case 1:
          De2.layoutId = Se2.string();
          break;
        case 3:
          De2.layout = a420.PartialLayout.decode(Se2, Se2.uint32());
          break;
        default:
          Se2.skipType(Ye2 & 7);
          break;
      }
    }
    return De2;
  }, fromJSON(U2) {
    return { layoutId: Ke2(U2.layoutId) ? String(U2.layoutId) : "", layout: Ke2(U2.layout) ? a420.PartialLayout.fromJSON(U2.layout) : void 0 };
  }, toJSON(U2) {
    const se2 = {};
    return U2.layoutId !== void 0 && (se2.layoutId = U2.layoutId), U2.layout !== void 0 && (se2.layout = U2.layout ? a420.PartialLayout.toJSON(U2.layout) : void 0), se2;
  }, fromPartial(U2) {
    var se2;
    const Se2 = Ne2();
    return Se2.layoutId = (se2 = U2.layoutId) !== null && se2 !== void 0 ? se2 : "", Se2.layout = U2.layout !== void 0 && U2.layout !== null ? a420.PartialLayout.fromPartial(U2.layout) : void 0, Se2;
  } };
  function Oe2() {
    return { requestMetadata: void 0 };
  }
  a420.DeleteLayoutPayload = { encode(U2, se2 = _.Writer.create()) {
    return U2.requestMetadata !== void 0 && I2.Value.encode(I2.Value.wrap(U2.requestMetadata), se2.uint32(802).fork()).ldelim(), se2;
  }, decode(U2, se2) {
    const Se2 = U2 instanceof _.Reader ? U2 : new _.Reader(U2);
    let Ue2 = se2 === void 0 ? Se2.len : Se2.pos + se2;
    const De2 = Oe2();
    for (; Se2.pos < Ue2; ) {
      const Ye2 = Se2.uint32();
      switch (Ye2 >>> 3) {
        case 100:
          De2.requestMetadata = I2.Value.unwrap(I2.Value.decode(Se2, Se2.uint32()));
          break;
        default:
          Se2.skipType(Ye2 & 7);
          break;
      }
    }
    return De2;
  }, fromJSON(U2) {
    return { requestMetadata: Ke2(U2 == null ? void 0 : U2.requestMetadata) ? U2.requestMetadata : void 0 };
  }, toJSON(U2) {
    const se2 = {};
    return U2.requestMetadata !== void 0 && (se2.requestMetadata = U2.requestMetadata), se2;
  }, fromPartial(U2) {
    var se2;
    const Se2 = Oe2();
    return Se2.requestMetadata = (se2 = U2.requestMetadata) !== null && se2 !== void 0 ? se2 : void 0, Se2;
  } };
  function qe2() {
    return { layoutId: "", payload: void 0 };
  }
  a420.DeleteLayoutRequest = { encode(U2, se2 = _.Writer.create()) {
    return U2.layoutId !== "" && se2.uint32(10).string(U2.layoutId), U2.payload !== void 0 && a420.DeleteLayoutPayload.encode(U2.payload, se2.uint32(18).fork()).ldelim(), se2;
  }, decode(U2, se2) {
    const Se2 = U2 instanceof _.Reader ? U2 : new _.Reader(U2);
    let Ue2 = se2 === void 0 ? Se2.len : Se2.pos + se2;
    const De2 = qe2();
    for (; Se2.pos < Ue2; ) {
      const Ye2 = Se2.uint32();
      switch (Ye2 >>> 3) {
        case 1:
          De2.layoutId = Se2.string();
          break;
        case 2:
          De2.payload = a420.DeleteLayoutPayload.decode(Se2, Se2.uint32());
          break;
        default:
          Se2.skipType(Ye2 & 7);
          break;
      }
    }
    return De2;
  }, fromJSON(U2) {
    return { layoutId: Ke2(U2.layoutId) ? String(U2.layoutId) : "", payload: Ke2(U2.payload) ? a420.DeleteLayoutPayload.fromJSON(U2.payload) : void 0 };
  }, toJSON(U2) {
    const se2 = {};
    return U2.layoutId !== void 0 && (se2.layoutId = U2.layoutId), U2.payload !== void 0 && (se2.payload = U2.payload ? a420.DeleteLayoutPayload.toJSON(U2.payload) : void 0), se2;
  }, fromPartial(U2) {
    var se2;
    const Se2 = qe2();
    return Se2.layoutId = (se2 = U2.layoutId) !== null && se2 !== void 0 ? se2 : "", Se2.payload = U2.payload !== void 0 && U2.payload !== null ? a420.DeleteLayoutPayload.fromPartial(U2.payload) : void 0, Se2;
  } };
  function je2() {
    return { id: "", requestMetadata: void 0 };
  }
  a420.DeleteLayoutResponse = { encode(U2, se2 = _.Writer.create()) {
    return U2.id !== "" && se2.uint32(18).string(U2.id), U2.requestMetadata !== void 0 && I2.Value.encode(I2.Value.wrap(U2.requestMetadata), se2.uint32(802).fork()).ldelim(), se2;
  }, decode(U2, se2) {
    const Se2 = U2 instanceof _.Reader ? U2 : new _.Reader(U2);
    let Ue2 = se2 === void 0 ? Se2.len : Se2.pos + se2;
    const De2 = je2();
    for (; Se2.pos < Ue2; ) {
      const Ye2 = Se2.uint32();
      switch (Ye2 >>> 3) {
        case 2:
          De2.id = Se2.string();
          break;
        case 100:
          De2.requestMetadata = I2.Value.unwrap(I2.Value.decode(Se2, Se2.uint32()));
          break;
        default:
          Se2.skipType(Ye2 & 7);
          break;
      }
    }
    return De2;
  }, fromJSON(U2) {
    return { id: Ke2(U2.id) ? String(U2.id) : "", requestMetadata: Ke2(U2 == null ? void 0 : U2.requestMetadata) ? U2.requestMetadata : void 0 };
  }, toJSON(U2) {
    const se2 = {};
    return U2.id !== void 0 && (se2.id = U2.id), U2.requestMetadata !== void 0 && (se2.requestMetadata = U2.requestMetadata), se2;
  }, fromPartial(U2) {
    var se2, Se2;
    const Ue2 = je2();
    return Ue2.id = (se2 = U2.id) !== null && se2 !== void 0 ? se2 : "", Ue2.requestMetadata = (Se2 = U2.requestMetadata) !== null && Se2 !== void 0 ? Se2 : void 0, Ue2;
  } };
  function Fe2() {
    return { properties: [], durationMs: 0, delayMs: void 0, easingMode: void 0 };
  }
  a420.LayerAnimation = { encode(U2, se2 = _.Writer.create()) {
    for (const Se2 of U2.properties)
      se2.uint32(10).string(Se2);
    return U2.durationMs !== 0 && se2.uint32(16).int32(U2.durationMs), U2.delayMs !== void 0 && se2.uint32(32).int32(U2.delayMs), U2.easingMode !== void 0 && se2.uint32(42).string(U2.easingMode), se2;
  }, decode(U2, se2) {
    const Se2 = U2 instanceof _.Reader ? U2 : new _.Reader(U2);
    let Ue2 = se2 === void 0 ? Se2.len : Se2.pos + se2;
    const De2 = Fe2();
    for (; Se2.pos < Ue2; ) {
      const Ye2 = Se2.uint32();
      switch (Ye2 >>> 3) {
        case 1:
          De2.properties.push(Se2.string());
          break;
        case 2:
          De2.durationMs = Se2.int32();
          break;
        case 4:
          De2.delayMs = Se2.int32();
          break;
        case 5:
          De2.easingMode = Se2.string();
          break;
        default:
          Se2.skipType(Ye2 & 7);
          break;
      }
    }
    return De2;
  }, fromJSON(U2) {
    return { properties: Array.isArray(U2 == null ? void 0 : U2.properties) ? U2.properties.map((se2) => String(se2)) : [], durationMs: Ke2(U2.durationMs) ? Number(U2.durationMs) : 0, delayMs: Ke2(U2.delayMs) ? Number(U2.delayMs) : void 0, easingMode: Ke2(U2.easingMode) ? String(U2.easingMode) : void 0 };
  }, toJSON(U2) {
    const se2 = {};
    return U2.properties ? se2.properties = U2.properties.map((Se2) => Se2) : se2.properties = [], U2.durationMs !== void 0 && (se2.durationMs = Math.round(U2.durationMs)), U2.delayMs !== void 0 && (se2.delayMs = Math.round(U2.delayMs)), U2.easingMode !== void 0 && (se2.easingMode = U2.easingMode), se2;
  }, fromPartial(U2) {
    var se2, Se2, Ue2, De2;
    const Ye2 = Fe2();
    return Ye2.properties = ((se2 = U2.properties) === null || se2 === void 0 ? void 0 : se2.map((Qe2) => Qe2)) || [], Ye2.durationMs = (Se2 = U2.durationMs) !== null && Se2 !== void 0 ? Se2 : 0, Ye2.delayMs = (Ue2 = U2.delayMs) !== null && Ue2 !== void 0 ? Ue2 : void 0, Ye2.easingMode = (De2 = U2.easingMode) !== null && De2 !== void 0 ? De2 : void 0, Ye2;
  } };
  function yt() {
    return { type: void 0, data: void 0, x: void 0, y: void 0, width: void 0, height: void 0, rotation: void 0, opacity: void 0, scale: void 0, hidden: void 0, children: void 0, parentId: void 0, metadata: void 0, requestMetadata: void 0, requestAnimation: [] };
  }
  a420.PartialLayer = { encode(U2, se2 = _.Writer.create()) {
    U2.type !== void 0 && se2.uint32(10).string(U2.type), U2.data !== void 0 && I2.Struct.encode(I2.Struct.wrap(U2.data), se2.uint32(18).fork()).ldelim(), U2.x !== void 0 && I2.Value.encode(I2.Value.wrap(U2.x), se2.uint32(26).fork()).ldelim(), U2.y !== void 0 && I2.Value.encode(I2.Value.wrap(U2.y), se2.uint32(34).fork()).ldelim(), U2.width !== void 0 && I2.Value.encode(I2.Value.wrap(U2.width), se2.uint32(42).fork()).ldelim(), U2.height !== void 0 && I2.Value.encode(I2.Value.wrap(U2.height), se2.uint32(50).fork()).ldelim(), U2.rotation !== void 0 && se2.uint32(57).double(U2.rotation), U2.opacity !== void 0 && se2.uint32(65).double(U2.opacity), U2.scale !== void 0 && se2.uint32(73).double(U2.scale), U2.hidden !== void 0 && se2.uint32(80).bool(U2.hidden), U2.children !== void 0 && I2.ListValue.encode(I2.ListValue.wrap(U2.children), se2.uint32(98).fork()).ldelim(), U2.parentId !== void 0 && se2.uint32(106).string(U2.parentId), U2.metadata !== void 0 && I2.Value.encode(I2.Value.wrap(U2.metadata), se2.uint32(114).fork()).ldelim(), U2.requestMetadata !== void 0 && I2.Value.encode(I2.Value.wrap(U2.requestMetadata), se2.uint32(802).fork()).ldelim();
    for (const Se2 of U2.requestAnimation)
      a420.LayerAnimation.encode(Se2, se2.uint32(826).fork()).ldelim();
    return se2;
  }, decode(U2, se2) {
    const Se2 = U2 instanceof _.Reader ? U2 : new _.Reader(U2);
    let Ue2 = se2 === void 0 ? Se2.len : Se2.pos + se2;
    const De2 = yt();
    for (; Se2.pos < Ue2; ) {
      const Ye2 = Se2.uint32();
      switch (Ye2 >>> 3) {
        case 1:
          De2.type = Se2.string();
          break;
        case 2:
          De2.data = I2.Struct.unwrap(I2.Struct.decode(Se2, Se2.uint32()));
          break;
        case 3:
          De2.x = I2.Value.unwrap(I2.Value.decode(Se2, Se2.uint32()));
          break;
        case 4:
          De2.y = I2.Value.unwrap(I2.Value.decode(Se2, Se2.uint32()));
          break;
        case 5:
          De2.width = I2.Value.unwrap(I2.Value.decode(Se2, Se2.uint32()));
          break;
        case 6:
          De2.height = I2.Value.unwrap(I2.Value.decode(Se2, Se2.uint32()));
          break;
        case 7:
          De2.rotation = Se2.double();
          break;
        case 8:
          De2.opacity = Se2.double();
          break;
        case 9:
          De2.scale = Se2.double();
          break;
        case 10:
          De2.hidden = Se2.bool();
          break;
        case 12:
          De2.children = I2.ListValue.unwrap(I2.ListValue.decode(Se2, Se2.uint32()));
          break;
        case 13:
          De2.parentId = Se2.string();
          break;
        case 14:
          De2.metadata = I2.Value.unwrap(I2.Value.decode(Se2, Se2.uint32()));
          break;
        case 100:
          De2.requestMetadata = I2.Value.unwrap(I2.Value.decode(Se2, Se2.uint32()));
          break;
        case 103:
          De2.requestAnimation.push(a420.LayerAnimation.decode(Se2, Se2.uint32()));
          break;
        default:
          Se2.skipType(Ye2 & 7);
          break;
      }
    }
    return De2;
  }, fromJSON(U2) {
    return { type: Ke2(U2.type) ? String(U2.type) : void 0, data: Ze2(U2.data) ? U2.data : void 0, x: Ke2(U2 == null ? void 0 : U2.x) ? U2.x : void 0, y: Ke2(U2 == null ? void 0 : U2.y) ? U2.y : void 0, width: Ke2(U2 == null ? void 0 : U2.width) ? U2.width : void 0, height: Ke2(U2 == null ? void 0 : U2.height) ? U2.height : void 0, rotation: Ke2(U2.rotation) ? Number(U2.rotation) : void 0, opacity: Ke2(U2.opacity) ? Number(U2.opacity) : void 0, scale: Ke2(U2.scale) ? Number(U2.scale) : void 0, hidden: Ke2(U2.hidden) ? !!U2.hidden : void 0, children: Array.isArray(U2.children) ? [...U2.children] : void 0, parentId: Ke2(U2.parentId) ? String(U2.parentId) : void 0, metadata: Ke2(U2 == null ? void 0 : U2.metadata) ? U2.metadata : void 0, requestMetadata: Ke2(U2 == null ? void 0 : U2.requestMetadata) ? U2.requestMetadata : void 0, requestAnimation: Array.isArray(U2 == null ? void 0 : U2.requestAnimation) ? U2.requestAnimation.map((se2) => a420.LayerAnimation.fromJSON(se2)) : [] };
  }, toJSON(U2) {
    const se2 = {};
    return U2.type !== void 0 && (se2.type = U2.type), U2.data !== void 0 && (se2.data = U2.data), U2.x !== void 0 && (se2.x = U2.x), U2.y !== void 0 && (se2.y = U2.y), U2.width !== void 0 && (se2.width = U2.width), U2.height !== void 0 && (se2.height = U2.height), U2.rotation !== void 0 && (se2.rotation = U2.rotation), U2.opacity !== void 0 && (se2.opacity = U2.opacity), U2.scale !== void 0 && (se2.scale = U2.scale), U2.hidden !== void 0 && (se2.hidden = U2.hidden), U2.children !== void 0 && (se2.children = U2.children), U2.parentId !== void 0 && (se2.parentId = U2.parentId), U2.metadata !== void 0 && (se2.metadata = U2.metadata), U2.requestMetadata !== void 0 && (se2.requestMetadata = U2.requestMetadata), U2.requestAnimation ? se2.requestAnimation = U2.requestAnimation.map((Se2) => Se2 ? a420.LayerAnimation.toJSON(Se2) : void 0) : se2.requestAnimation = [], se2;
  }, fromPartial(U2) {
    var se2, Se2, Ue2, De2, Ye2, Qe2, st, St, tt, it, Tt, rt, dt, wt, nt;
    const at = yt();
    return at.type = (se2 = U2.type) !== null && se2 !== void 0 ? se2 : void 0, at.data = (Se2 = U2.data) !== null && Se2 !== void 0 ? Se2 : void 0, at.x = (Ue2 = U2.x) !== null && Ue2 !== void 0 ? Ue2 : void 0, at.y = (De2 = U2.y) !== null && De2 !== void 0 ? De2 : void 0, at.width = (Ye2 = U2.width) !== null && Ye2 !== void 0 ? Ye2 : void 0, at.height = (Qe2 = U2.height) !== null && Qe2 !== void 0 ? Qe2 : void 0, at.rotation = (st = U2.rotation) !== null && st !== void 0 ? st : void 0, at.opacity = (St = U2.opacity) !== null && St !== void 0 ? St : void 0, at.scale = (tt = U2.scale) !== null && tt !== void 0 ? tt : void 0, at.hidden = (it = U2.hidden) !== null && it !== void 0 ? it : void 0, at.children = (Tt = U2.children) !== null && Tt !== void 0 ? Tt : void 0, at.parentId = (rt = U2.parentId) !== null && rt !== void 0 ? rt : void 0, at.metadata = (dt = U2.metadata) !== null && dt !== void 0 ? dt : void 0, at.requestMetadata = (wt = U2.requestMetadata) !== null && wt !== void 0 ? wt : void 0, at.requestAnimation = ((nt = U2.requestAnimation) === null || nt === void 0 ? void 0 : nt.map((gt) => a420.LayerAnimation.fromPartial(gt))) || [], at;
  } };
  function Xe2() {
    return { id: "", type: void 0, data: void 0, x: void 0, y: void 0, width: void 0, height: void 0, rotation: void 0, opacity: void 0, scale: void 0, hidden: void 0, children: void 0, parentId: void 0, metadata: void 0, requestMetadata: void 0, requestAnimation: [] };
  }
  a420.PartialLayerWithID = { encode(U2, se2 = _.Writer.create()) {
    U2.id !== "" && se2.uint32(8002).string(U2.id), U2.type !== void 0 && se2.uint32(10).string(U2.type), U2.data !== void 0 && I2.Struct.encode(I2.Struct.wrap(U2.data), se2.uint32(18).fork()).ldelim(), U2.x !== void 0 && I2.Value.encode(I2.Value.wrap(U2.x), se2.uint32(26).fork()).ldelim(), U2.y !== void 0 && I2.Value.encode(I2.Value.wrap(U2.y), se2.uint32(34).fork()).ldelim(), U2.width !== void 0 && I2.Value.encode(I2.Value.wrap(U2.width), se2.uint32(42).fork()).ldelim(), U2.height !== void 0 && I2.Value.encode(I2.Value.wrap(U2.height), se2.uint32(50).fork()).ldelim(), U2.rotation !== void 0 && se2.uint32(57).double(U2.rotation), U2.opacity !== void 0 && se2.uint32(65).double(U2.opacity), U2.scale !== void 0 && se2.uint32(73).double(U2.scale), U2.hidden !== void 0 && se2.uint32(80).bool(U2.hidden), U2.children !== void 0 && I2.ListValue.encode(I2.ListValue.wrap(U2.children), se2.uint32(98).fork()).ldelim(), U2.parentId !== void 0 && se2.uint32(106).string(U2.parentId), U2.metadata !== void 0 && I2.Value.encode(I2.Value.wrap(U2.metadata), se2.uint32(114).fork()).ldelim(), U2.requestMetadata !== void 0 && I2.Value.encode(I2.Value.wrap(U2.requestMetadata), se2.uint32(802).fork()).ldelim();
    for (const Se2 of U2.requestAnimation)
      a420.LayerAnimation.encode(Se2, se2.uint32(826).fork()).ldelim();
    return se2;
  }, decode(U2, se2) {
    const Se2 = U2 instanceof _.Reader ? U2 : new _.Reader(U2);
    let Ue2 = se2 === void 0 ? Se2.len : Se2.pos + se2;
    const De2 = Xe2();
    for (; Se2.pos < Ue2; ) {
      const Ye2 = Se2.uint32();
      switch (Ye2 >>> 3) {
        case 1e3:
          De2.id = Se2.string();
          break;
        case 1:
          De2.type = Se2.string();
          break;
        case 2:
          De2.data = I2.Struct.unwrap(I2.Struct.decode(Se2, Se2.uint32()));
          break;
        case 3:
          De2.x = I2.Value.unwrap(I2.Value.decode(Se2, Se2.uint32()));
          break;
        case 4:
          De2.y = I2.Value.unwrap(I2.Value.decode(Se2, Se2.uint32()));
          break;
        case 5:
          De2.width = I2.Value.unwrap(I2.Value.decode(Se2, Se2.uint32()));
          break;
        case 6:
          De2.height = I2.Value.unwrap(I2.Value.decode(Se2, Se2.uint32()));
          break;
        case 7:
          De2.rotation = Se2.double();
          break;
        case 8:
          De2.opacity = Se2.double();
          break;
        case 9:
          De2.scale = Se2.double();
          break;
        case 10:
          De2.hidden = Se2.bool();
          break;
        case 12:
          De2.children = I2.ListValue.unwrap(I2.ListValue.decode(Se2, Se2.uint32()));
          break;
        case 13:
          De2.parentId = Se2.string();
          break;
        case 14:
          De2.metadata = I2.Value.unwrap(I2.Value.decode(Se2, Se2.uint32()));
          break;
        case 100:
          De2.requestMetadata = I2.Value.unwrap(I2.Value.decode(Se2, Se2.uint32()));
          break;
        case 103:
          De2.requestAnimation.push(a420.LayerAnimation.decode(Se2, Se2.uint32()));
          break;
        default:
          Se2.skipType(Ye2 & 7);
          break;
      }
    }
    return De2;
  }, fromJSON(U2) {
    return { id: Ke2(U2.id) ? String(U2.id) : "", type: Ke2(U2.type) ? String(U2.type) : void 0, data: Ze2(U2.data) ? U2.data : void 0, x: Ke2(U2 == null ? void 0 : U2.x) ? U2.x : void 0, y: Ke2(U2 == null ? void 0 : U2.y) ? U2.y : void 0, width: Ke2(U2 == null ? void 0 : U2.width) ? U2.width : void 0, height: Ke2(U2 == null ? void 0 : U2.height) ? U2.height : void 0, rotation: Ke2(U2.rotation) ? Number(U2.rotation) : void 0, opacity: Ke2(U2.opacity) ? Number(U2.opacity) : void 0, scale: Ke2(U2.scale) ? Number(U2.scale) : void 0, hidden: Ke2(U2.hidden) ? !!U2.hidden : void 0, children: Array.isArray(U2.children) ? [...U2.children] : void 0, parentId: Ke2(U2.parentId) ? String(U2.parentId) : void 0, metadata: Ke2(U2 == null ? void 0 : U2.metadata) ? U2.metadata : void 0, requestMetadata: Ke2(U2 == null ? void 0 : U2.requestMetadata) ? U2.requestMetadata : void 0, requestAnimation: Array.isArray(U2 == null ? void 0 : U2.requestAnimation) ? U2.requestAnimation.map((se2) => a420.LayerAnimation.fromJSON(se2)) : [] };
  }, toJSON(U2) {
    const se2 = {};
    return U2.id !== void 0 && (se2.id = U2.id), U2.type !== void 0 && (se2.type = U2.type), U2.data !== void 0 && (se2.data = U2.data), U2.x !== void 0 && (se2.x = U2.x), U2.y !== void 0 && (se2.y = U2.y), U2.width !== void 0 && (se2.width = U2.width), U2.height !== void 0 && (se2.height = U2.height), U2.rotation !== void 0 && (se2.rotation = U2.rotation), U2.opacity !== void 0 && (se2.opacity = U2.opacity), U2.scale !== void 0 && (se2.scale = U2.scale), U2.hidden !== void 0 && (se2.hidden = U2.hidden), U2.children !== void 0 && (se2.children = U2.children), U2.parentId !== void 0 && (se2.parentId = U2.parentId), U2.metadata !== void 0 && (se2.metadata = U2.metadata), U2.requestMetadata !== void 0 && (se2.requestMetadata = U2.requestMetadata), U2.requestAnimation ? se2.requestAnimation = U2.requestAnimation.map((Se2) => Se2 ? a420.LayerAnimation.toJSON(Se2) : void 0) : se2.requestAnimation = [], se2;
  }, fromPartial(U2) {
    var se2, Se2, Ue2, De2, Ye2, Qe2, st, St, tt, it, Tt, rt, dt, wt, nt, at;
    const gt = Xe2();
    return gt.id = (se2 = U2.id) !== null && se2 !== void 0 ? se2 : "", gt.type = (Se2 = U2.type) !== null && Se2 !== void 0 ? Se2 : void 0, gt.data = (Ue2 = U2.data) !== null && Ue2 !== void 0 ? Ue2 : void 0, gt.x = (De2 = U2.x) !== null && De2 !== void 0 ? De2 : void 0, gt.y = (Ye2 = U2.y) !== null && Ye2 !== void 0 ? Ye2 : void 0, gt.width = (Qe2 = U2.width) !== null && Qe2 !== void 0 ? Qe2 : void 0, gt.height = (st = U2.height) !== null && st !== void 0 ? st : void 0, gt.rotation = (St = U2.rotation) !== null && St !== void 0 ? St : void 0, gt.opacity = (tt = U2.opacity) !== null && tt !== void 0 ? tt : void 0, gt.scale = (it = U2.scale) !== null && it !== void 0 ? it : void 0, gt.hidden = (Tt = U2.hidden) !== null && Tt !== void 0 ? Tt : void 0, gt.children = (rt = U2.children) !== null && rt !== void 0 ? rt : void 0, gt.parentId = (dt = U2.parentId) !== null && dt !== void 0 ? dt : void 0, gt.metadata = (wt = U2.metadata) !== null && wt !== void 0 ? wt : void 0, gt.requestMetadata = (nt = U2.requestMetadata) !== null && nt !== void 0 ? nt : void 0, gt.requestAnimation = ((at = U2.requestAnimation) === null || at === void 0 ? void 0 : at.map((ot) => a420.LayerAnimation.fromPartial(ot))) || [], gt;
  } };
  function Ge2() {
    return { layoutId: "" };
  }
  a420.ListLayersRequest = { encode(U2, se2 = _.Writer.create()) {
    return U2.layoutId !== "" && se2.uint32(10).string(U2.layoutId), se2;
  }, decode(U2, se2) {
    const Se2 = U2 instanceof _.Reader ? U2 : new _.Reader(U2);
    let Ue2 = se2 === void 0 ? Se2.len : Se2.pos + se2;
    const De2 = Ge2();
    for (; Se2.pos < Ue2; ) {
      const Ye2 = Se2.uint32();
      switch (Ye2 >>> 3) {
        case 1:
          De2.layoutId = Se2.string();
          break;
        default:
          Se2.skipType(Ye2 & 7);
          break;
      }
    }
    return De2;
  }, fromJSON(U2) {
    return { layoutId: Ke2(U2.layoutId) ? String(U2.layoutId) : "" };
  }, toJSON(U2) {
    const se2 = {};
    return U2.layoutId !== void 0 && (se2.layoutId = U2.layoutId), se2;
  }, fromPartial(U2) {
    var se2;
    const Se2 = Ge2();
    return Se2.layoutId = (se2 = U2.layoutId) !== null && se2 !== void 0 ? se2 : "", Se2;
  } };
  function V2() {
    return { layers: [] };
  }
  a420.ListLayersResponse = { encode(U2, se2 = _.Writer.create()) {
    for (const Se2 of U2.layers)
      a420.Layer.encode(Se2, se2.uint32(10).fork()).ldelim();
    return se2;
  }, decode(U2, se2) {
    const Se2 = U2 instanceof _.Reader ? U2 : new _.Reader(U2);
    let Ue2 = se2 === void 0 ? Se2.len : Se2.pos + se2;
    const De2 = V2();
    for (; Se2.pos < Ue2; ) {
      const Ye2 = Se2.uint32();
      switch (Ye2 >>> 3) {
        case 1:
          De2.layers.push(a420.Layer.decode(Se2, Se2.uint32()));
          break;
        default:
          Se2.skipType(Ye2 & 7);
          break;
      }
    }
    return De2;
  }, fromJSON(U2) {
    return { layers: Array.isArray(U2 == null ? void 0 : U2.layers) ? U2.layers.map((se2) => a420.Layer.fromJSON(se2)) : [] };
  }, toJSON(U2) {
    const se2 = {};
    return U2.layers ? se2.layers = U2.layers.map((Se2) => Se2 ? a420.Layer.toJSON(Se2) : void 0) : se2.layers = [], se2;
  }, fromPartial(U2) {
    var se2;
    const Se2 = V2();
    return Se2.layers = ((se2 = U2.layers) === null || se2 === void 0 ? void 0 : se2.map((Ue2) => a420.Layer.fromPartial(Ue2))) || [], Se2;
  } };
  function ge2() {
    return { layoutId: "", layer: void 0 };
  }
  a420.CreateLayerRequest = { encode(U2, se2 = _.Writer.create()) {
    return U2.layoutId !== "" && se2.uint32(10).string(U2.layoutId), U2.layer !== void 0 && a420.PartialLayer.encode(U2.layer, se2.uint32(18).fork()).ldelim(), se2;
  }, decode(U2, se2) {
    const Se2 = U2 instanceof _.Reader ? U2 : new _.Reader(U2);
    let Ue2 = se2 === void 0 ? Se2.len : Se2.pos + se2;
    const De2 = ge2();
    for (; Se2.pos < Ue2; ) {
      const Ye2 = Se2.uint32();
      switch (Ye2 >>> 3) {
        case 1:
          De2.layoutId = Se2.string();
          break;
        case 2:
          De2.layer = a420.PartialLayer.decode(Se2, Se2.uint32());
          break;
        default:
          Se2.skipType(Ye2 & 7);
          break;
      }
    }
    return De2;
  }, fromJSON(U2) {
    return { layoutId: Ke2(U2.layoutId) ? String(U2.layoutId) : "", layer: Ke2(U2.layer) ? a420.PartialLayer.fromJSON(U2.layer) : void 0 };
  }, toJSON(U2) {
    const se2 = {};
    return U2.layoutId !== void 0 && (se2.layoutId = U2.layoutId), U2.layer !== void 0 && (se2.layer = U2.layer ? a420.PartialLayer.toJSON(U2.layer) : void 0), se2;
  }, fromPartial(U2) {
    var se2;
    const Se2 = ge2();
    return Se2.layoutId = (se2 = U2.layoutId) !== null && se2 !== void 0 ? se2 : "", Se2.layer = U2.layer !== void 0 && U2.layer !== null ? a420.PartialLayer.fromPartial(U2.layer) : void 0, Se2;
  } };
  function we2() {
    return { layoutId: "", layerId: "" };
  }
  a420.GetLayerRequest = { encode(U2, se2 = _.Writer.create()) {
    return U2.layoutId !== "" && se2.uint32(10).string(U2.layoutId), U2.layerId !== "" && se2.uint32(18).string(U2.layerId), se2;
  }, decode(U2, se2) {
    const Se2 = U2 instanceof _.Reader ? U2 : new _.Reader(U2);
    let Ue2 = se2 === void 0 ? Se2.len : Se2.pos + se2;
    const De2 = we2();
    for (; Se2.pos < Ue2; ) {
      const Ye2 = Se2.uint32();
      switch (Ye2 >>> 3) {
        case 1:
          De2.layoutId = Se2.string();
          break;
        case 2:
          De2.layerId = Se2.string();
          break;
        default:
          Se2.skipType(Ye2 & 7);
          break;
      }
    }
    return De2;
  }, fromJSON(U2) {
    return { layoutId: Ke2(U2.layoutId) ? String(U2.layoutId) : "", layerId: Ke2(U2.layerId) ? String(U2.layerId) : "" };
  }, toJSON(U2) {
    const se2 = {};
    return U2.layoutId !== void 0 && (se2.layoutId = U2.layoutId), U2.layerId !== void 0 && (se2.layerId = U2.layerId), se2;
  }, fromPartial(U2) {
    var se2, Se2;
    const Ue2 = we2();
    return Ue2.layoutId = (se2 = U2.layoutId) !== null && se2 !== void 0 ? se2 : "", Ue2.layerId = (Se2 = U2.layerId) !== null && Se2 !== void 0 ? Se2 : "", Ue2;
  } };
  function We2() {
    return { layoutId: "", layerId: "", layer: void 0 };
  }
  a420.UpdateLayerRequest = { encode(U2, se2 = _.Writer.create()) {
    return U2.layoutId !== "" && se2.uint32(10).string(U2.layoutId), U2.layerId !== "" && se2.uint32(18).string(U2.layerId), U2.layer !== void 0 && a420.PartialLayer.encode(U2.layer, se2.uint32(26).fork()).ldelim(), se2;
  }, decode(U2, se2) {
    const Se2 = U2 instanceof _.Reader ? U2 : new _.Reader(U2);
    let Ue2 = se2 === void 0 ? Se2.len : Se2.pos + se2;
    const De2 = We2();
    for (; Se2.pos < Ue2; ) {
      const Ye2 = Se2.uint32();
      switch (Ye2 >>> 3) {
        case 1:
          De2.layoutId = Se2.string();
          break;
        case 2:
          De2.layerId = Se2.string();
          break;
        case 3:
          De2.layer = a420.PartialLayer.decode(Se2, Se2.uint32());
          break;
        default:
          Se2.skipType(Ye2 & 7);
          break;
      }
    }
    return De2;
  }, fromJSON(U2) {
    return { layoutId: Ke2(U2.layoutId) ? String(U2.layoutId) : "", layerId: Ke2(U2.layerId) ? String(U2.layerId) : "", layer: Ke2(U2.layer) ? a420.PartialLayer.fromJSON(U2.layer) : void 0 };
  }, toJSON(U2) {
    const se2 = {};
    return U2.layoutId !== void 0 && (se2.layoutId = U2.layoutId), U2.layerId !== void 0 && (se2.layerId = U2.layerId), U2.layer !== void 0 && (se2.layer = U2.layer ? a420.PartialLayer.toJSON(U2.layer) : void 0), se2;
  }, fromPartial(U2) {
    var se2, Se2;
    const Ue2 = We2();
    return Ue2.layoutId = (se2 = U2.layoutId) !== null && se2 !== void 0 ? se2 : "", Ue2.layerId = (Se2 = U2.layerId) !== null && Se2 !== void 0 ? Se2 : "", Ue2.layer = U2.layer !== void 0 && U2.layer !== null ? a420.PartialLayer.fromPartial(U2.layer) : void 0, Ue2;
  } };
  function Re2() {
    return { requestMetadata: void 0 };
  }
  a420.DeleteLayerPayload = { encode(U2, se2 = _.Writer.create()) {
    return U2.requestMetadata !== void 0 && I2.Value.encode(I2.Value.wrap(U2.requestMetadata), se2.uint32(802).fork()).ldelim(), se2;
  }, decode(U2, se2) {
    const Se2 = U2 instanceof _.Reader ? U2 : new _.Reader(U2);
    let Ue2 = se2 === void 0 ? Se2.len : Se2.pos + se2;
    const De2 = Re2();
    for (; Se2.pos < Ue2; ) {
      const Ye2 = Se2.uint32();
      switch (Ye2 >>> 3) {
        case 100:
          De2.requestMetadata = I2.Value.unwrap(I2.Value.decode(Se2, Se2.uint32()));
          break;
        default:
          Se2.skipType(Ye2 & 7);
          break;
      }
    }
    return De2;
  }, fromJSON(U2) {
    return { requestMetadata: Ke2(U2 == null ? void 0 : U2.requestMetadata) ? U2.requestMetadata : void 0 };
  }, toJSON(U2) {
    const se2 = {};
    return U2.requestMetadata !== void 0 && (se2.requestMetadata = U2.requestMetadata), se2;
  }, fromPartial(U2) {
    var se2;
    const Se2 = Re2();
    return Se2.requestMetadata = (se2 = U2.requestMetadata) !== null && se2 !== void 0 ? se2 : void 0, Se2;
  } };
  function J2() {
    return { id: "", requestMetadata: void 0 };
  }
  a420.BatchDeleteLayerRequest = { encode(U2, se2 = _.Writer.create()) {
    return U2.id !== "" && se2.uint32(10).string(U2.id), U2.requestMetadata !== void 0 && I2.Value.encode(I2.Value.wrap(U2.requestMetadata), se2.uint32(802).fork()).ldelim(), se2;
  }, decode(U2, se2) {
    const Se2 = U2 instanceof _.Reader ? U2 : new _.Reader(U2);
    let Ue2 = se2 === void 0 ? Se2.len : Se2.pos + se2;
    const De2 = J2();
    for (; Se2.pos < Ue2; ) {
      const Ye2 = Se2.uint32();
      switch (Ye2 >>> 3) {
        case 1:
          De2.id = Se2.string();
          break;
        case 100:
          De2.requestMetadata = I2.Value.unwrap(I2.Value.decode(Se2, Se2.uint32()));
          break;
        default:
          Se2.skipType(Ye2 & 7);
          break;
      }
    }
    return De2;
  }, fromJSON(U2) {
    return { id: Ke2(U2.id) ? String(U2.id) : "", requestMetadata: Ke2(U2 == null ? void 0 : U2.requestMetadata) ? U2.requestMetadata : void 0 };
  }, toJSON(U2) {
    const se2 = {};
    return U2.id !== void 0 && (se2.id = U2.id), U2.requestMetadata !== void 0 && (se2.requestMetadata = U2.requestMetadata), se2;
  }, fromPartial(U2) {
    var se2, Se2;
    const Ue2 = J2();
    return Ue2.id = (se2 = U2.id) !== null && se2 !== void 0 ? se2 : "", Ue2.requestMetadata = (Se2 = U2.requestMetadata) !== null && Se2 !== void 0 ? Se2 : void 0, Ue2;
  } };
  function _e() {
    return { layoutId: "", layers: [], requestMetadata: void 0, requestAnimationMode: void 0 };
  }
  a420.BatchLayerRequest = { encode(U2, se2 = _.Writer.create()) {
    U2.layoutId !== "" && se2.uint32(10).string(U2.layoutId);
    for (const Se2 of U2.layers)
      a420.BatchLayerRequest_BatchItem.encode(Se2, se2.uint32(18).fork()).ldelim();
    return U2.requestMetadata !== void 0 && I2.Value.encode(I2.Value.wrap(U2.requestMetadata), se2.uint32(802).fork()).ldelim(), U2.requestAnimationMode !== void 0 && se2.uint32(808).int32(ie2(U2.requestAnimationMode)), se2;
  }, decode(U2, se2) {
    const Se2 = U2 instanceof _.Reader ? U2 : new _.Reader(U2);
    let Ue2 = se2 === void 0 ? Se2.len : Se2.pos + se2;
    const De2 = _e();
    for (; Se2.pos < Ue2; ) {
      const Ye2 = Se2.uint32();
      switch (Ye2 >>> 3) {
        case 1:
          De2.layoutId = Se2.string();
          break;
        case 2:
          De2.layers.push(a420.BatchLayerRequest_BatchItem.decode(Se2, Se2.uint32()));
          break;
        case 100:
          De2.requestMetadata = I2.Value.unwrap(I2.Value.decode(Se2, Se2.uint32()));
          break;
        case 101:
          De2.requestAnimationMode = ee2(Se2.int32());
          break;
        default:
          Se2.skipType(Ye2 & 7);
          break;
      }
    }
    return De2;
  }, fromJSON(U2) {
    return { layoutId: Ke2(U2.layoutId) ? String(U2.layoutId) : "", layers: Array.isArray(U2 == null ? void 0 : U2.layers) ? U2.layers.map((se2) => a420.BatchLayerRequest_BatchItem.fromJSON(se2)) : [], requestMetadata: Ke2(U2 == null ? void 0 : U2.requestMetadata) ? U2.requestMetadata : void 0, requestAnimationMode: Ke2(U2.requestAnimationMode) ? ee2(U2.requestAnimationMode) : void 0 };
  }, toJSON(U2) {
    const se2 = {};
    return U2.layoutId !== void 0 && (se2.layoutId = U2.layoutId), U2.layers ? se2.layers = U2.layers.map((Se2) => Se2 ? a420.BatchLayerRequest_BatchItem.toJSON(Se2) : void 0) : se2.layers = [], U2.requestMetadata !== void 0 && (se2.requestMetadata = U2.requestMetadata), U2.requestAnimationMode !== void 0 && (se2.requestAnimationMode = U2.requestAnimationMode !== void 0 ? X2(U2.requestAnimationMode) : void 0), se2;
  }, fromPartial(U2) {
    var se2, Se2, Ue2, De2;
    const Ye2 = _e();
    return Ye2.layoutId = (se2 = U2.layoutId) !== null && se2 !== void 0 ? se2 : "", Ye2.layers = ((Se2 = U2.layers) === null || Se2 === void 0 ? void 0 : Se2.map((Qe2) => a420.BatchLayerRequest_BatchItem.fromPartial(Qe2))) || [], Ye2.requestMetadata = (Ue2 = U2.requestMetadata) !== null && Ue2 !== void 0 ? Ue2 : void 0, Ye2.requestAnimationMode = (De2 = U2.requestAnimationMode) !== null && De2 !== void 0 ? De2 : void 0, Ye2;
  } };
  function ue2() {
    return { create: void 0, update: void 0, delete: void 0 };
  }
  a420.BatchLayerRequest_BatchItem = { encode(U2, se2 = _.Writer.create()) {
    return U2.create !== void 0 && a420.PartialLayer.encode(U2.create, se2.uint32(10).fork()).ldelim(), U2.update !== void 0 && a420.PartialLayerWithID.encode(U2.update, se2.uint32(18).fork()).ldelim(), U2.delete !== void 0 && a420.BatchDeleteLayerRequest.encode(U2.delete, se2.uint32(26).fork()).ldelim(), se2;
  }, decode(U2, se2) {
    const Se2 = U2 instanceof _.Reader ? U2 : new _.Reader(U2);
    let Ue2 = se2 === void 0 ? Se2.len : Se2.pos + se2;
    const De2 = ue2();
    for (; Se2.pos < Ue2; ) {
      const Ye2 = Se2.uint32();
      switch (Ye2 >>> 3) {
        case 1:
          De2.create = a420.PartialLayer.decode(Se2, Se2.uint32());
          break;
        case 2:
          De2.update = a420.PartialLayerWithID.decode(Se2, Se2.uint32());
          break;
        case 3:
          De2.delete = a420.BatchDeleteLayerRequest.decode(Se2, Se2.uint32());
          break;
        default:
          Se2.skipType(Ye2 & 7);
          break;
      }
    }
    return De2;
  }, fromJSON(U2) {
    return { create: Ke2(U2.create) ? a420.PartialLayer.fromJSON(U2.create) : void 0, update: Ke2(U2.update) ? a420.PartialLayerWithID.fromJSON(U2.update) : void 0, delete: Ke2(U2.delete) ? a420.BatchDeleteLayerRequest.fromJSON(U2.delete) : void 0 };
  }, toJSON(U2) {
    const se2 = {};
    return U2.create !== void 0 && (se2.create = U2.create ? a420.PartialLayer.toJSON(U2.create) : void 0), U2.update !== void 0 && (se2.update = U2.update ? a420.PartialLayerWithID.toJSON(U2.update) : void 0), U2.delete !== void 0 && (se2.delete = U2.delete ? a420.BatchDeleteLayerRequest.toJSON(U2.delete) : void 0), se2;
  }, fromPartial(U2) {
    const se2 = ue2();
    return se2.create = U2.create !== void 0 && U2.create !== null ? a420.PartialLayer.fromPartial(U2.create) : void 0, se2.update = U2.update !== void 0 && U2.update !== null ? a420.PartialLayerWithID.fromPartial(U2.update) : void 0, se2.delete = U2.delete !== void 0 && U2.delete !== null ? a420.BatchDeleteLayerRequest.fromPartial(U2.delete) : void 0, se2;
  } };
  function ce2() {
    return { create: void 0, update: void 0, delete: void 0 };
  }
  a420.LayoutEvent = { encode(U2, se2 = _.Writer.create()) {
    return U2.create !== void 0 && a420.Layout.encode(U2.create, se2.uint32(10).fork()).ldelim(), U2.update !== void 0 && a420.Layout.encode(U2.update, se2.uint32(18).fork()).ldelim(), U2.delete !== void 0 && a420.DeleteLayoutResponse.encode(U2.delete, se2.uint32(26).fork()).ldelim(), se2;
  }, decode(U2, se2) {
    const Se2 = U2 instanceof _.Reader ? U2 : new _.Reader(U2);
    let Ue2 = se2 === void 0 ? Se2.len : Se2.pos + se2;
    const De2 = ce2();
    for (; Se2.pos < Ue2; ) {
      const Ye2 = Se2.uint32();
      switch (Ye2 >>> 3) {
        case 1:
          De2.create = a420.Layout.decode(Se2, Se2.uint32());
          break;
        case 2:
          De2.update = a420.Layout.decode(Se2, Se2.uint32());
          break;
        case 3:
          De2.delete = a420.DeleteLayoutResponse.decode(Se2, Se2.uint32());
          break;
        default:
          Se2.skipType(Ye2 & 7);
          break;
      }
    }
    return De2;
  }, fromJSON(U2) {
    return { create: Ke2(U2.create) ? a420.Layout.fromJSON(U2.create) : void 0, update: Ke2(U2.update) ? a420.Layout.fromJSON(U2.update) : void 0, delete: Ke2(U2.delete) ? a420.DeleteLayoutResponse.fromJSON(U2.delete) : void 0 };
  }, toJSON(U2) {
    const se2 = {};
    return U2.create !== void 0 && (se2.create = U2.create ? a420.Layout.toJSON(U2.create) : void 0), U2.update !== void 0 && (se2.update = U2.update ? a420.Layout.toJSON(U2.update) : void 0), U2.delete !== void 0 && (se2.delete = U2.delete ? a420.DeleteLayoutResponse.toJSON(U2.delete) : void 0), se2;
  }, fromPartial(U2) {
    const se2 = ce2();
    return se2.create = U2.create !== void 0 && U2.create !== null ? a420.Layout.fromPartial(U2.create) : void 0, se2.update = U2.update !== void 0 && U2.update !== null ? a420.Layout.fromPartial(U2.update) : void 0, se2.delete = U2.delete !== void 0 && U2.delete !== null ? a420.DeleteLayoutResponse.fromPartial(U2.delete) : void 0, se2;
  } };
  function ve2() {
    return { create: void 0, update: void 0, delete: void 0, batch: void 0 };
  }
  a420.LayerEvent = { encode(U2, se2 = _.Writer.create()) {
    return U2.create !== void 0 && a420.Layer.encode(U2.create, se2.uint32(10).fork()).ldelim(), U2.update !== void 0 && a420.Layer.encode(U2.update, se2.uint32(18).fork()).ldelim(), U2.delete !== void 0 && a420.DeleteLayerResponse.encode(U2.delete, se2.uint32(26).fork()).ldelim(), U2.batch !== void 0 && a420.BatchLayerResponse.encode(U2.batch, se2.uint32(34).fork()).ldelim(), se2;
  }, decode(U2, se2) {
    const Se2 = U2 instanceof _.Reader ? U2 : new _.Reader(U2);
    let Ue2 = se2 === void 0 ? Se2.len : Se2.pos + se2;
    const De2 = ve2();
    for (; Se2.pos < Ue2; ) {
      const Ye2 = Se2.uint32();
      switch (Ye2 >>> 3) {
        case 1:
          De2.create = a420.Layer.decode(Se2, Se2.uint32());
          break;
        case 2:
          De2.update = a420.Layer.decode(Se2, Se2.uint32());
          break;
        case 3:
          De2.delete = a420.DeleteLayerResponse.decode(Se2, Se2.uint32());
          break;
        case 4:
          De2.batch = a420.BatchLayerResponse.decode(Se2, Se2.uint32());
          break;
        default:
          Se2.skipType(Ye2 & 7);
          break;
      }
    }
    return De2;
  }, fromJSON(U2) {
    return { create: Ke2(U2.create) ? a420.Layer.fromJSON(U2.create) : void 0, update: Ke2(U2.update) ? a420.Layer.fromJSON(U2.update) : void 0, delete: Ke2(U2.delete) ? a420.DeleteLayerResponse.fromJSON(U2.delete) : void 0, batch: Ke2(U2.batch) ? a420.BatchLayerResponse.fromJSON(U2.batch) : void 0 };
  }, toJSON(U2) {
    const se2 = {};
    return U2.create !== void 0 && (se2.create = U2.create ? a420.Layer.toJSON(U2.create) : void 0), U2.update !== void 0 && (se2.update = U2.update ? a420.Layer.toJSON(U2.update) : void 0), U2.delete !== void 0 && (se2.delete = U2.delete ? a420.DeleteLayerResponse.toJSON(U2.delete) : void 0), U2.batch !== void 0 && (se2.batch = U2.batch ? a420.BatchLayerResponse.toJSON(U2.batch) : void 0), se2;
  }, fromPartial(U2) {
    const se2 = ve2();
    return se2.create = U2.create !== void 0 && U2.create !== null ? a420.Layer.fromPartial(U2.create) : void 0, se2.update = U2.update !== void 0 && U2.update !== null ? a420.Layer.fromPartial(U2.update) : void 0, se2.delete = U2.delete !== void 0 && U2.delete !== null ? a420.DeleteLayerResponse.fromPartial(U2.delete) : void 0, se2.batch = U2.batch !== void 0 && U2.batch !== null ? a420.BatchLayerResponse.fromPartial(U2.batch) : void 0, se2;
  } };
  function Ce2() {
    return { layout: void 0, layer: void 0 };
  }
  a420.Event = { encode(U2, se2 = _.Writer.create()) {
    return U2.layout !== void 0 && a420.LayoutEvent.encode(U2.layout, se2.uint32(10).fork()).ldelim(), U2.layer !== void 0 && a420.LayerEvent.encode(U2.layer, se2.uint32(18).fork()).ldelim(), se2;
  }, decode(U2, se2) {
    const Se2 = U2 instanceof _.Reader ? U2 : new _.Reader(U2);
    let Ue2 = se2 === void 0 ? Se2.len : Se2.pos + se2;
    const De2 = Ce2();
    for (; Se2.pos < Ue2; ) {
      const Ye2 = Se2.uint32();
      switch (Ye2 >>> 3) {
        case 1:
          De2.layout = a420.LayoutEvent.decode(Se2, Se2.uint32());
          break;
        case 2:
          De2.layer = a420.LayerEvent.decode(Se2, Se2.uint32());
          break;
        default:
          Se2.skipType(Ye2 & 7);
          break;
      }
    }
    return De2;
  }, fromJSON(U2) {
    return { layout: Ke2(U2.layout) ? a420.LayoutEvent.fromJSON(U2.layout) : void 0, layer: Ke2(U2.layer) ? a420.LayerEvent.fromJSON(U2.layer) : void 0 };
  }, toJSON(U2) {
    const se2 = {};
    return U2.layout !== void 0 && (se2.layout = U2.layout ? a420.LayoutEvent.toJSON(U2.layout) : void 0), U2.layer !== void 0 && (se2.layer = U2.layer ? a420.LayerEvent.toJSON(U2.layer) : void 0), se2;
  }, fromPartial(U2) {
    const se2 = Ce2();
    return se2.layout = U2.layout !== void 0 && U2.layout !== null ? a420.LayoutEvent.fromPartial(U2.layout) : void 0, se2.layer = U2.layer !== void 0 && U2.layer !== null ? a420.LayerEvent.fromPartial(U2.layer) : void 0, se2;
  } };
  class Be2 {
    constructor(se2) {
      this.rpc = se2, this.ListLayers = this.ListLayers.bind(this), this.CreateLayer = this.CreateLayer.bind(this), this.GetLayer = this.GetLayer.bind(this), this.UpdateLayer = this.UpdateLayer.bind(this), this.DeleteLayer = this.DeleteLayer.bind(this), this.Batch = this.Batch.bind(this);
    }
    ListLayers(se2) {
      const Se2 = a420.ListLayersRequest.encode(se2).finish();
      return this.rpc.request("apis.layout.v2.LayerService", "ListLayers", Se2).then((De2) => a420.ListLayersResponse.decode(new _.Reader(De2)));
    }
    CreateLayer(se2) {
      const Se2 = a420.CreateLayerRequest.encode(se2).finish();
      return this.rpc.request("apis.layout.v2.LayerService", "CreateLayer", Se2).then((De2) => a420.Layer.decode(new _.Reader(De2)));
    }
    GetLayer(se2) {
      const Se2 = a420.GetLayerRequest.encode(se2).finish();
      return this.rpc.request("apis.layout.v2.LayerService", "GetLayer", Se2).then((De2) => a420.Layer.decode(new _.Reader(De2)));
    }
    UpdateLayer(se2) {
      const Se2 = a420.UpdateLayerRequest.encode(se2).finish();
      return this.rpc.request("apis.layout.v2.LayerService", "UpdateLayer", Se2).then((De2) => a420.Layer.decode(new _.Reader(De2)));
    }
    DeleteLayer(se2) {
      const Se2 = a420.DeleteLayerRequest.encode(se2).finish();
      return this.rpc.request("apis.layout.v2.LayerService", "DeleteLayer", Se2).then((De2) => a420.DeleteLayerResponse.decode(new _.Reader(De2)));
    }
    Batch(se2) {
      const Se2 = a420.BatchLayerRequest.encode(se2).finish();
      return this.rpc.request("apis.layout.v2.LayerService", "Batch", Se2).then((De2) => a420.BatchLayerResponse.decode(new _.Reader(De2)));
    }
  }
  a420.LayerServiceClientImpl = Be2, a420.LayerServiceDefinition = { name: "LayerService", fullName: "apis.layout.v2.LayerService", methods: {
    /** List all layers */
    listLayers: { name: "ListLayers", requestType: a420.ListLayersRequest, requestStream: false, responseType: a420.ListLayersResponse, responseStream: false, options: {} },
    /**
    * Create a layer
    * buf:lint:ignore RPC_RESPONSE_STANDARD_NAME
    * buf:lint:ignore RPC_REQUEST_RESPONSE_UNIQUE
    */
    createLayer: { name: "CreateLayer", requestType: a420.CreateLayerRequest, requestStream: false, responseType: a420.Layer, responseStream: false, options: {} },
    /**
    * Get a single layer
    * buf:lint:ignore RPC_RESPONSE_STANDARD_NAME
    * buf:lint:ignore RPC_REQUEST_RESPONSE_UNIQUE
    */
    getLayer: { name: "GetLayer", requestType: a420.GetLayerRequest, requestStream: false, responseType: a420.Layer, responseStream: false, options: {} },
    /**
    * Update a layer
    * buf:lint:ignore RPC_RESPONSE_STANDARD_NAME
    * buf:lint:ignore RPC_REQUEST_RESPONSE_UNIQUE
    */
    updateLayer: { name: "UpdateLayer", requestType: a420.UpdateLayerRequest, requestStream: false, responseType: a420.Layer, responseStream: false, options: {} },
    /** Delete a layer */
    deleteLayer: { name: "DeleteLayer", requestType: a420.DeleteLayerRequest, requestStream: false, responseType: a420.DeleteLayerResponse, responseStream: false, options: {} },
    /**
    * Batch update
    * buf:lint:ignore RPC_REQUEST_STANDARD_NAME
    * buf:lint:ignore RPC_RESPONSE_STANDARD_NAME
    */
    batch: { name: "Batch", requestType: a420.BatchLayerRequest, requestStream: false, responseType: a420.BatchLayerResponse, responseStream: false, options: {} }
  } };
  class He2 {
    constructor(se2) {
      this.rpc = se2, this.ListLayouts = this.ListLayouts.bind(this), this.CreateLayout = this.CreateLayout.bind(this), this.GetLayout = this.GetLayout.bind(this), this.UpdateLayout = this.UpdateLayout.bind(this), this.DeleteLayout = this.DeleteLayout.bind(this);
    }
    ListLayouts(se2) {
      const Se2 = a420.ListLayoutsRequest.encode(se2).finish();
      return this.rpc.request("apis.layout.v2.LayoutService", "ListLayouts", Se2).then((De2) => a420.ListLayoutsResponse.decode(new _.Reader(De2)));
    }
    CreateLayout(se2) {
      const Se2 = a420.CreateLayoutRequest.encode(se2).finish();
      return this.rpc.request("apis.layout.v2.LayoutService", "CreateLayout", Se2).then((De2) => a420.Layout.decode(new _.Reader(De2)));
    }
    GetLayout(se2) {
      const Se2 = a420.GetLayoutRequest.encode(se2).finish();
      return this.rpc.request("apis.layout.v2.LayoutService", "GetLayout", Se2).then((De2) => a420.Layout.decode(new _.Reader(De2)));
    }
    UpdateLayout(se2) {
      const Se2 = a420.UpdateLayoutRequest.encode(se2).finish();
      return this.rpc.request("apis.layout.v2.LayoutService", "UpdateLayout", Se2).then((De2) => a420.Layout.decode(new _.Reader(De2)));
    }
    DeleteLayout(se2) {
      const Se2 = a420.DeleteLayoutRequest.encode(se2).finish();
      return this.rpc.request("apis.layout.v2.LayoutService", "DeleteLayout", Se2).then((De2) => a420.DeleteLayoutResponse.decode(new _.Reader(De2)));
    }
  }
  a420.LayoutServiceClientImpl = He2, a420.LayoutServiceDefinition = { name: "LayoutService", fullName: "apis.layout.v2.LayoutService", methods: {
    /** Get all layouts owned by the user. */
    listLayouts: { name: "ListLayouts", requestType: a420.ListLayoutsRequest, requestStream: false, responseType: a420.ListLayoutsResponse, responseStream: false, options: {} },
    /**
    * Create a new layout
    * buf:lint:ignore RPC_RESPONSE_STANDARD_NAME
    * buf:lint:ignore RPC_REQUEST_RESPONSE_UNIQUE
    */
    createLayout: { name: "CreateLayout", requestType: a420.CreateLayoutRequest, requestStream: false, responseType: a420.Layout, responseStream: false, options: {} },
    /**
    * Get a layout
    * buf:lint:ignore RPC_RESPONSE_STANDARD_NAME
    * buf:lint:ignore RPC_REQUEST_RESPONSE_UNIQUE
    */
    getLayout: { name: "GetLayout", requestType: a420.GetLayoutRequest, requestStream: false, responseType: a420.Layout, responseStream: false, options: {} },
    /**
    * Update a layout
    * buf:lint:ignore RPC_RESPONSE_STANDARD_NAME
    * buf:lint:ignore RPC_REQUEST_RESPONSE_UNIQUE
    */
    updateLayout: { name: "UpdateLayout", requestType: a420.UpdateLayoutRequest, requestStream: false, responseType: a420.Layout, responseStream: false, options: {} },
    /** Delete a layout */
    deleteLayout: { name: "DeleteLayout", requestType: a420.DeleteLayoutRequest, requestStream: false, responseType: a420.DeleteLayoutResponse, responseStream: false, options: {} }
  } };
  var Ve2 = (() => {
    if (typeof Ve2 < "u")
      return Ve2;
    if (typeof self < "u")
      return self;
    if (typeof window < "u")
      return window;
    if (typeof commonjsGlobal$1 < "u")
      return commonjsGlobal$1;
    throw "Unable to locate global object";
  })();
  _.util.Long !== p2.default && (_.util.Long = p2.default, _.configure());
  function Ze2(U2) {
    return typeof U2 == "object" && U2 !== null;
  }
  function Ke2(U2) {
    return U2 != null;
  }
})(api$4);
(function(a420) {
  var u2 = commonjsGlobal$1 && commonjsGlobal$1.__createBinding || (Object.create ? function(v2, p2, _, I2) {
    I2 === void 0 && (I2 = _), Object.defineProperty(v2, I2, { enumerable: true, get: function() {
      return p2[_];
    } });
  } : function(v2, p2, _, I2) {
    I2 === void 0 && (I2 = _), v2[I2] = p2[_];
  }), c = commonjsGlobal$1 && commonjsGlobal$1.__exportStar || function(v2, p2) {
    for (var _ in v2)
      _ !== "default" && !p2.hasOwnProperty(_) && u2(p2, v2, _);
  };
  Object.defineProperty(a420, "__esModule", { value: true }), a420.layoutApiEventMap = void 0;
  const l2 = api$4;
  c(api$4, a420), a420.layoutApiEventMap = { [l2.EventType.EVENT_TYPE_LAYOUT]: "layout", [l2.EventType.EVENT_TYPE_LAYER]: "layer", [l2.EventType.EVENT_TYPE_UNSPECIFIED]: "unspecified" };
})(dist$2);
var api$3 = {}, browser$f = false;
const __viteBrowserExternal = {}, __viteBrowserExternal$1 = /* @__PURE__ */ Object.freeze(/* @__PURE__ */ Object.defineProperty({ __proto__: null, default: __viteBrowserExternal }, Symbol.toStringTag, { value: "Module" })), require$$3 = /* @__PURE__ */ getAugmentedNamespace(__viteBrowserExternal$1);
var logger = {};
class EnhancedMap extends Map {
  /**
  * If key has a mapping already returns the currently associated value. If
  * there is no mapping, calls the computer which must return a value V.
  * The value is then stored for given key and returned.
  * @param key Key
  * @param computer Computer which is called only if key has no mapping yet.
  * @return Existing value if the key already existed, or the newly computed value.
  */
  computeIfAbsent(u2, c) {
    if (this.has(u2))
      return this.get(u2);
    const l2 = c(u2);
    return this.set(u2, l2), l2;
  }
  /**
  * If the key exists already calls given computer, if the key does not exist
  * this method does nothing.
  *
  * The computer is called with current key and current value associated. The
  * computer can return a (new) value V or undefined. When undefined is returned
  * the key is removed from this map, when a V is returned the key is updated
  * with the new value V.
  * @param key Key
  * @param computer Computer which is called only if the key has a mapping already
  * @return Undefined if the key has no mapping, otherwise the value returned from computer
  */
  computeIfPresent(u2, c) {
    const l2 = this.get(u2);
    if (l2 === void 0)
      return;
    const v2 = c(u2, l2);
    return v2 !== void 0 ? this.set(u2, v2) : this.delete(u2), v2;
  }
  /**
  * Computes a value for given key, the computer can return a value V (in which case the map
  * will set the value for given key), if it returns undefined the mapping for key K will be
  * removed.
  * @param key Key to compute
  * @param computer Computer which is called, note that the currentValue argument contains the existing
  *                 value or is undefined when no mapping exists for the key.
  * @return The newly computed value
  */
  compute(u2, c) {
    const l2 = this.get(u2), v2 = c(u2, l2);
    return v2 ? this.set(u2, v2) : this.delete(u2), v2;
  }
}
var InternalLogLevel;
(function(a420) {
  a420[a420.Trace = 0] = "Trace", a420[a420.Debug = 1] = "Debug", a420[a420.Info = 2] = "Info", a420[a420.Warn = 3] = "Warn", a420[a420.Error = 4] = "Error";
})(InternalLogLevel || (InternalLogLevel = {}));
function getInternalLogger(a420) {
  return provider.getLogger(a420);
}
const INTERNAL_LOGGING_SETTINGS = {
  /**
  * Changes the log level for the internal logging (for all new and existing loggers)
  * @param level New log level
  */
  setInternalLogLevel: (a420) => provider.changeLogLevel(a420),
  /**
  * Changes where messages are written to for all new and existing loggers),
  * by default they are written to the console.
  * @param fnOutput Function to write messages to
  */
  setOutput: (a420) => provider.changeOutput(a420),
  /**
  * Resets the log level and output back to defaults (level to error and writing to console)
  * for all new and existing loggers.
  */
  reset: () => provider.reset()
};
class InternalLoggerImpl {
  constructor(u2, c, l2) {
    this._name = u2, this._level = c, this._fnOutput = l2;
  }
  trace(u2) {
    this.log(InternalLogLevel.Trace, u2);
  }
  debug(u2) {
    this.log(InternalLogLevel.Debug, u2);
  }
  error(u2, c) {
    this.log(InternalLogLevel.Error, u2, c);
  }
  info(u2) {
    this.log(InternalLogLevel.Info, u2);
  }
  warn(u2, c) {
    this.log(InternalLogLevel.Warn, u2, c);
  }
  setLevel(u2) {
    this._level = u2;
  }
  setOutput(u2) {
    this._fnOutput = u2;
  }
  log(u2, c, l2) {
    this._level > u2 || this._fnOutput(`${InternalLogLevel[this._level].toString()} <INTERNAL LOGGER> ${this._name} ${c()}${l2 ? `
` + l2.stack : ""}`);
  }
}
class InternalProviderImpl {
  constructor() {
    this._loggers = new EnhancedMap(), this._logLevel = InternalLogLevel.Error, this._fnOutput = InternalProviderImpl.logConsole;
  }
  getLogger(u2) {
    return this._loggers.computeIfAbsent(u2, (c) => new InternalLoggerImpl(c, this._logLevel, this._fnOutput));
  }
  changeLogLevel(u2) {
    this._logLevel = u2, this._loggers.forEach((c) => c.setLevel(u2));
  }
  changeOutput(u2) {
    this._fnOutput = u2, this._loggers.forEach((c) => c.setOutput(this._fnOutput));
  }
  reset() {
    this.changeLogLevel(InternalLogLevel.Error), this._fnOutput = InternalProviderImpl.logConsole, this._loggers.forEach((u2) => u2.setOutput(this._fnOutput));
  }
  static logConsole(u2) {
    console && console.log && console.log(u2);
  }
}
const provider = new InternalProviderImpl();
var InternalLogger = /* @__PURE__ */ Object.freeze({ __proto__: null, get InternalLogLevel() {
  return InternalLogLevel;
}, getInternalLogger, INTERNAL_LOGGING_SETTINGS }), LogLevel$1;
(function(a420) {
  a420[a420.Trace = 0] = "Trace", a420[a420.Debug = 1] = "Debug", a420[a420.Info = 2] = "Info", a420[a420.Warn = 3] = "Warn", a420[a420.Error = 4] = "Error", a420[a420.Fatal = 5] = "Fatal";
})(LogLevel$1 || (LogLevel$1 = {}));
(function(a420) {
  function u2(c) {
    switch (c.toLowerCase()) {
      case "trace":
        return a420.Trace;
      case "debug":
        return a420.Debug;
      case "info":
        return a420.Info;
      case "warn":
        return a420.Warn;
      case "error":
        return a420.Error;
      case "fatal":
        return a420.Fatal;
      default:
        return;
    }
  }
  a420.toLogLevel = u2;
})(LogLevel$1 || (LogLevel$1 = {}));
class CoreLoggerImpl {
  constructor(u2) {
    this._runtime = u2;
  }
  get id() {
    return this._runtime.id;
  }
  get logLevel() {
    return this._runtime.level;
  }
  get runtimeSettings() {
    return Object.assign({}, this._runtime);
  }
  set runtimeSettings(u2) {
    this._runtime = u2;
  }
  trace(u2, ...c) {
    this.logMessage(LogLevel$1.Trace, u2, c);
  }
  debug(u2, ...c) {
    this.logMessage(LogLevel$1.Debug, u2, c);
  }
  info(u2, ...c) {
    this.logMessage(LogLevel$1.Info, u2, c);
  }
  warn(u2, ...c) {
    this.logMessage(LogLevel$1.Warn, u2, c);
  }
  error(u2, ...c) {
    this.logMessage(LogLevel$1.Error, u2, c);
  }
  fatal(u2, ...c) {
    this.logMessage(LogLevel$1.Fatal, u2, c);
  }
  logMessage(u2, c, l2) {
    if (this._runtime.level > u2)
      return;
    const v2 = Date.now(), p2 = typeof c == "string" ? c : c(), _ = CoreLoggerImpl.getErrorAndArgs(l2);
    switch (this._runtime.channel.type) {
      case "RawLogChannel":
        this._runtime.channel.write({ message: p2, exception: _.error, args: _.args, timeInMillis: v2, level: u2, logNames: this._runtime.name }, this._runtime.argumentFormatter);
        return;
      case "LogChannel":
        this._runtime.channel.write(this.createLogMessage(p2, u2, _, v2));
        break;
    }
  }
  formatArgValue(u2) {
    try {
      return this._runtime.argumentFormatter(u2);
    } catch {
      return `>>ARG CONVERT FAILED: '${u2 !== void 0 ? u2.toString() : "undefined"}'<<`;
    }
  }
  createLogMessage(u2, c, l2, v2) {
    let p2;
    const _ = l2.error, I2 = l2.args;
    _ && (p2 = `${_.name}: ${_.message}`, _.stack && (p2 += `@
${_.stack}`));
    const P2 = this._runtime.dateFormatter(v2);
    let $ = LogLevel$1[c].toUpperCase();
    $.length < 5 && ($ += " ");
    const F2 = typeof this._runtime.name == "string" ? this._runtime.name : this._runtime.name.join(", "), H2 = typeof I2 < "u" && I2.length > 0 ? " [" + I2.map((ee2) => this.formatArgValue(ee2)).join(", ") + "]" : "";
    return { message: P2 + " " + $ + " [" + F2 + "] " + u2 + H2, error: p2 };
  }
  static getErrorAndArgs(u2) {
    if (u2.length === 0)
      return {};
    let c, l2;
    const v2 = u2[0];
    if (v2 instanceof Error)
      return c = v2, l2 = u2.length > 1 ? u2.slice(1) : void 0, { error: c, args: l2 };
    if (typeof v2 == "function") {
      const p2 = v2();
      return p2 instanceof Error ? (c = p2, l2 = u2.length > 1 ? u2.slice(1) : void 0, { error: c, args: l2 }) : u2.length === 1 ? Array.isArray(p2) ? { args: p2.length > 0 ? p2 : void 0 } : { args: p2 } : Array.isArray(p2) ? { args: [...p2, ...u2.slice(1)] } : { args: [p2, ...u2.slice(1)] };
    }
    return { args: u2 };
  }
}
function padStart(a420, u2, c = " ") {
  return padInternal(a420, u2, "start", c);
}
function padEnd(a420, u2, c = " ") {
  return padInternal(a420, u2, "end", c);
}
function maxLengthStringValueInArray(a420) {
  return a420.map((u2) => u2.length).reduce((u2, c) => c > u2 ? c : u2, 0);
}
function padInternal(a420, u2, c, l2 = " ") {
  if (u2 <= a420.length)
    return a420;
  if (l2.length > 1)
    throw new Error(`Fill char must be one char exactly, it is: ${l2.length}`);
  const v2 = u2 - a420.length;
  let p2 = "";
  for (let _ = 0; _ < v2; _++)
    p2 += l2;
  return c === "start" ? p2 + a420 : a420 + p2;
}
function formatArgument(a420) {
  return a420 === void 0 ? "undefined" : JSON.stringify(a420);
}
function formatDate(a420) {
  const u2 = new Date(a420), c = u2.getFullYear(), l2 = padStart((u2.getMonth() + 1).toString(), 2, "0"), v2 = padStart(u2.getDate().toString(), 2, "0"), p2 = padStart(u2.getHours().toString(), 2, "0"), _ = padStart(u2.getMinutes().toString(), 2, "0"), I2 = padStart(u2.getSeconds().toString(), 2, "0"), P2 = padStart(u2.getMilliseconds().toString(), 2, "0");
  return `${c}-${l2}-${v2} ${p2}:${_}:${I2},${P2}`;
}
class ConsoleLogChannel {
  constructor() {
    this.type = "LogChannel";
  }
  write(u2) {
    console && console.log && console.log(u2.message + (u2.error ? `
${u2.error}` : ""));
  }
}
var DefaultChannels;
(function(a420) {
  function u2() {
    return new ConsoleLogChannel();
  }
  a420.createConsoleChannel = u2;
})(DefaultChannels || (DefaultChannels = {}));
class LogProviderImpl {
  constructor(u2, c) {
    this._log = getInternalLogger("core.impl.LogProviderImpl"), this._name = u2, this._settings = c, this._loggers = new EnhancedMap(), this._idToKeyMap = new EnhancedMap(), this._globalRuntimeSettings = { level: c.level, channel: c.channel }, this._nextLoggerId = 1, this._log.trace(() => `Created LogProviderImpl with settings: ${JSON.stringify(this._settings)}`);
  }
  get runtimeSettings() {
    return Object.assign(Object.assign({}, this._settings), { level: this._globalRuntimeSettings.level, channel: this._globalRuntimeSettings.channel });
  }
  getLogger(u2) {
    return this.getOrCreateLogger(u2);
  }
  updateLoggerRuntime(u2, c) {
    this._log.debug(() => `Updating logger ${u2.id} runtime settings using: '${JSON.stringify(c)}'`);
    const l2 = this._idToKeyMap.get(u2.id);
    return l2 === void 0 ? (this._log.warn(() => `Cannot update logger with id: ${u2.id}, it was not found.`), false) : (this._loggers.computeIfPresent(l2, (v2, p2) => (p2.runtimeSettings = LogProviderImpl.mergeRuntimeSettingsIntoLogRuntime(p2.runtimeSettings, c), p2)), true);
  }
  updateRuntimeSettings(u2) {
    this._log.debug(() => `Updating global runtime settings and updating existing loggers runtime settings using: '${JSON.stringify(u2)}'`), this._globalRuntimeSettings = {
      /* It's unclear, but not checking explicitly on undefined here makes the test fail, it makes no sense as level is a number | undefined essentially. */
      level: u2.level !== void 0 ? u2.level : this._globalRuntimeSettings.level,
      channel: u2.channel !== void 0 ? u2.channel : this._globalRuntimeSettings.channel
    }, this._loggers.forEach((c) => c.runtimeSettings = LogProviderImpl.mergeRuntimeSettingsIntoLogRuntime(c.runtimeSettings, u2));
  }
  /**
  * Removes all state and loggers, it reverts back to as it was after initial construction.
  */
  clear() {
    this._loggers.clear(), this._idToKeyMap.clear(), this._globalRuntimeSettings = Object.assign({}, this._settings), this._nextLoggerId = 1;
  }
  getOrCreateLogger(u2) {
    const c = LogProviderImpl.createKey(u2), l2 = this._loggers.computeIfAbsent(c, () => {
      const v2 = { level: this._globalRuntimeSettings.level, channel: this._globalRuntimeSettings.channel, id: this.nextLoggerId(), name: u2, argumentFormatter: this._settings.argumentFormatter, dateFormatter: this._settings.dateFormatter };
      return new CoreLoggerImpl(v2);
    });
    return this._idToKeyMap.computeIfAbsent(l2.id, () => c), l2;
  }
  nextLoggerId() {
    const u2 = this._name + "_" + this._nextLoggerId;
    return this._nextLoggerId++, u2;
  }
  static mergeRuntimeSettingsIntoLogRuntime(u2, c) {
    return Object.assign(Object.assign({}, u2), {
      /* It's unclear, but not checking explicitly on undefined here makes the test fail, it makes no sense as level is a number | undefined essentially. */
      level: c.level !== void 0 ? c.level : u2.level,
      channel: c.channel !== void 0 ? c.channel : u2.channel
    });
  }
  static createKey(u2) {
    return typeof u2 == "string" ? u2 : u2.join(",");
  }
}
function createLogProvider(a420, u2) {
  return new LogProviderImpl(a420, u2);
}
var index$3 = /* @__PURE__ */ Object.freeze({ __proto__: null, EnhancedMap, padStart, padEnd, maxLengthStringValueInArray });
class CategoryImpl {
  constructor(u2, c, l2, v2) {
    this._children = [], this._logger = u2, this._name = c, this._parent = l2, this._fnGetOrCreateChildCategory = v2;
  }
  get name() {
    return this._name;
  }
  get parent() {
    return this._parent;
  }
  get path() {
    const u2 = [];
    let c = this;
    for (; c !== void 0; )
      u2.push(c.name), c = c.parent;
    return u2.reverse();
  }
  get children() {
    return [...this._children];
  }
  addChild(u2) {
    if (u2.parent !== this)
      throw new Error(`Cannot add child '${u2.name}', expected parent '${this._name} but got ${u2.parent ? u2.parent.name : "undefined"}'`);
    this._children.push(u2);
  }
  getChildCategory(u2) {
    const c = this._children.find((l2) => l2.name === u2);
    return c !== void 0 ? c : this._fnGetOrCreateChildCategory(u2, this);
  }
  get id() {
    return this._logger.id;
  }
  get logLevel() {
    return this._logger.logLevel;
  }
  get runtimeSettings() {
    return this._logger.runtimeSettings;
  }
  get logger() {
    return this._logger;
  }
  trace(u2, ...c) {
    this._logger.trace(u2, ...c);
  }
  debug(u2, ...c) {
    this._logger.debug(u2, ...c);
  }
  info(u2, ...c) {
    this._logger.info(u2, ...c);
  }
  warn(u2, ...c) {
    this._logger.warn(u2, ...c);
  }
  error(u2, ...c) {
    this._logger.error(u2, ...c);
  }
  fatal(u2, ...c) {
    this._logger.fatal(u2, ...c);
  }
}
const CATEGORY_PATH_SEPARATOR = "#";
class CategoryProviderImpl {
  constructor(u2, c) {
    this._name = u2, this._initialConfig = c, this._categoryStorage = new CategoryStorage(u2, c);
  }
  get name() {
    return this._name;
  }
  get config() {
    return this._initialConfig;
  }
  get runtimeConfig() {
    return this._categoryStorage.getCurrentRuntimeConfig();
  }
  getCategory(u2, c) {
    return this._categoryStorage.getOrCreateCategory(u2, c);
  }
  updateRuntimeSettingsCategory(u2, c) {
    this._categoryStorage.updateRuntimeSettingsCategory(u2, c);
  }
  updateRuntimeSettings(u2) {
    this._categoryStorage.updateRuntimeSettings(u2);
  }
  /** Returns all currently registered categories */
  getRegisteredCategories() {
    return this._categoryStorage.getRegisteredCategories();
  }
  /** Get a category by path, note that paths must be separated by #, e.g. root#child1#child1_1 */
  getCategoryByPath(u2) {
    return this._categoryStorage.getCategoryByPath(u2);
  }
}
class CategoryStorage {
  constructor(u2, c) {
    this._categoriesById = /* @__PURE__ */ new Map(), this._categoriesByPath = /* @__PURE__ */ new Map(), this._categoryProviderName = u2, this._allowSameCategoryName = c.allowSameCategoryName, this._logProvider = createLogProvider(u2, Object.assign({}, c)), this.getOrCreateCategory = this.getOrCreateCategory.bind(this);
  }
  getOrCreateCategory(u2, c) {
    if (u2.indexOf(CATEGORY_PATH_SEPARATOR) !== -1)
      throw new Error(`Cannot create category '${u2}', name cannot contain a '${CATEGORY_PATH_SEPARATOR}'.`);
    const l2 = c !== void 0 ? this.getParentCategory(c) : void 0;
    return l2 === void 0 ? this.getOrCreateRootCategory(u2) : this.getOrCreateChildCategory(u2, l2);
  }
  updateRuntimeSettingsCategory(u2, c) {
    if (!u2.id.startsWith(this._categoryProviderName))
      throw new Error(`Category '${u2.name}' with LogId '${u2.id}' is from a different CategoryProvider, cannot mix categories between providers.`);
    const l2 = this._categoriesById.get(u2.id);
    l2 !== void 0 && (this._logProvider.updateLoggerRuntime(l2.logger, { level: c.level }), !(c.disableRecursion !== void 0 && c.disableRecursion) && l2.children.forEach((v2) => this.updateRuntimeSettingsCategory(v2, c)));
  }
  updateRuntimeSettings(u2) {
    this._logProvider.updateRuntimeSettings(u2);
  }
  getCurrentRuntimeConfig() {
    return Object.assign(Object.assign({}, this._logProvider.runtimeSettings), { allowSameCategoryName: this._allowSameCategoryName });
  }
  /** Returns all currently registered categories */
  getRegisteredCategories() {
    return [...this._categoriesById.values()];
  }
  /** Get a category by path, note that paths must be separated by #, e.g. root#child1#child1_1 */
  getCategoryByPath(u2) {
    return this._categoriesByPath.get(u2);
  }
  getParentCategory(u2) {
    let c;
    if (CategoryStorage.isLogId(u2)) {
      if (c = this._categoriesById.get(u2), c === void 0)
        throw new Error(`Parent category was not found by LogId '${u2}'. Are you sure you passed in the correct argument?`);
    } else if (c = this._categoriesById.get(u2.id), c === void 0)
      throw new Error(`Parent category '${u2.name}' was not found by it's LogId '${u2.id}'. Are you sure you passed in the correct parent category?`);
    return c;
  }
  getOrCreateRootCategory(u2) {
    const c = this._categoriesByPath.get(u2);
    if (c) {
      if (!this._allowSameCategoryName)
        throw new Error(`Category '${u2} already exists, config flag allowSameCategoryName=false - therefore matching version 1 behavior (hence this Error)`);
      return c;
    }
    const l2 = this._logProvider.getLogger(u2), v2 = new CategoryImpl(l2, u2, void 0, this.getOrCreateCategory);
    return this._categoriesById.set(v2.id, v2), this._categoriesByPath.set(u2, v2), v2;
  }
  getOrCreateChildCategory(u2, c) {
    if (!c.id.startsWith(this._categoryProviderName))
      throw new Error(`Parent category '${c.name}' with LogId '${c.id}' is from a different CategoryProvider, cannot mix categories between providers.`);
    const l2 = [...c.path, u2].join(CATEGORY_PATH_SEPARATOR), v2 = this._categoriesByPath.get(l2);
    if (v2) {
      if (!this._allowSameCategoryName)
        throw new Error(`Child category '${u2} already exists for parent category ${c.name}, config flag allowSameCategoryName=false - therefore matching version 1 behavior (hence this Error)`);
      return v2;
    }
    const p2 = this._logProvider.getLogger(l2);
    this._logProvider.updateLoggerRuntime(p2, { level: c.logger.runtimeSettings.level, channel: c.logger.runtimeSettings.channel });
    const _ = new CategoryImpl(p2, u2, c, this.getOrCreateCategory);
    return this._categoriesById.set(_.id, _), this._categoriesByPath.set(_.path.join(CATEGORY_PATH_SEPARATOR), _), c.addChild(_), _;
  }
  static isLogId(u2) {
    return typeof u2 == "string";
  }
}
class CategoryControlProviderImpl {
  constructor(u2, c) {
    this._provider = u2, this._messageChannel = c, this._originalLogLevels = CategoryControlProviderImpl.loadCurrentGroupLogLevels(u2);
  }
  get name() {
    return this._provider.name;
  }
  /**
  * Shows current settings.
  */
  showSettings() {
    let u2 = `Available categories (CategoryProvider '${this._provider.name}'):
`;
    const c = this.createCategoryInfoHierarchy(), l2 = c.size.toString().length, v2 = index$3.maxLengthStringValueInArray([...c.values()].map((_) => _.category.name + " ".repeat(_.depth))), p2 = [...c.values()].map((_, I2) => CategoryControlProviderImpl.createSettingLineCategory(_, I2, l2, v2));
    u2 += p2.join(`
`) + (p2.length > 0 ? `
` : ""), this._messageChannel(u2);
  }
  help() {
    const u2 = `You can use the following commands (CategoryProvider ${this._provider.name}):
  showSettings()
    Shows the current configuration settings.
  update(level: CategoryControlProviderLogLevel, categoryId?: number | string, noRecurse?: boolean)
    Change the log level for a category (by default recursively).
      @param level      The log level to set - must be one of 'trace', 'debug', 'info', 'warn', 'error' or 'fatal'
      @param categoryId The category id or path of a category (e.g. root#child1) to update. Use showSettings() for id and/or name.
                        When omitted, it applies the level to all categories recursively.
  reset()
    Resets the log levels of the config groups back to when this control provider was created.
  save()
    Saves the current log levels for all categories of this provider. Use restore() to load last saved state.
  restore()
    Restore stored saved state, if any. Log levels will be set according to the saved state.
  help()
    Shows this help.
`;
    this._messageChannel(u2);
  }
  reset() {
    const u2 = new Map(this._provider.getRegisteredCategories().map((c) => [c.id, c]));
    this._originalLogLevels.forEach((c, l2) => {
      const v2 = u2.get(l2);
      v2 !== void 0 && this._provider.updateRuntimeSettingsCategory(v2, { level: c, disableRecursion: true }), u2.delete(l2);
    }), u2.forEach((c) => {
      c.parent !== void 0 && this._provider.updateRuntimeSettingsCategory(c, { level: c.parent.logLevel, disableRecursion: true });
    }), this._originalLogLevels = CategoryControlProviderImpl.loadCurrentGroupLogLevels(this._provider), this._messageChannel("Successfully reset log levels back to original state (from when this CategoryControlProvider was created).");
  }
  save() {
    if (!localStorage) {
      this._messageChannel("Cannot save state, localStorage is not available.");
      return;
    }
    const u2 = this._provider.getRegisteredCategories().filter((l2) => l2.parent === void 0).map((l2) => CategoryControlProviderImpl.createCategorySaveData(l2)), c = { name: this._provider.name, rootCategories: u2 };
    localStorage.setItem(this.createKey(), JSON.stringify(c)), this._messageChannel(`Successfully saved state for CategoryControlProvider '${this._provider.name}'.`);
  }
  restore(u2) {
    const c = u2 !== void 0 ? u2 : true;
    if (!localStorage) {
      c && this._messageChannel(`Will not attempt to restore state for CategoryControlProvider '${this._provider.name}', localStorage is not available.`);
      return;
    }
    const l2 = this.createKey(), v2 = localStorage.getItem(l2);
    if (v2 === null) {
      c && this._messageChannel(`Cannot restore state for CategoryControlProvider '${this._provider.name}', no data available.`);
      return;
    }
    try {
      const p2 = JSON.parse(v2);
      if (this._provider.name !== p2.name) {
        c && this._messageChannel(`Cannot restore state for CategoryControlProvider '${this._provider.name}', data is not for provider - found name '${p2.name}'.`);
        return;
      }
      this.restoreBySaveData(p2, c), this._messageChannel(`Successfully restored state for CategoryControlProvider '${this._provider.name}'`), this._originalLogLevels = CategoryControlProviderImpl.loadCurrentGroupLogLevels(this._provider);
    } catch {
      localStorage.removeItem(l2), this._messageChannel(`Cannot restore state for CategoryControlProvider '${this._provider.name}', data is not valid. Invalid data removed from localStorage.`);
    }
  }
  update(u2, c, l2) {
    typeof c > "u" ? this.updateAll(u2) : typeof c == "number" ? this.updateByIndex(u2, c, l2 !== void 0 ? l2 : false) : this.updateByPath(u2, c, l2 !== void 0 ? l2 : false);
  }
  updateAll(u2) {
    const c = LogLevel$1.toLogLevel(u2);
    this._provider.getRegisteredCategories().filter((l2) => l2.parent === void 0).forEach((l2) => this._provider.updateRuntimeSettingsCategory(l2, { level: c })), this._messageChannel(`Updated all categories to use log level '${u2.toLowerCase()}'`);
  }
  updateByPath(u2, c, l2) {
    const v2 = this._provider.getCategoryByPath(c);
    if (v2 === void 0) {
      this._messageChannel(`Failed to find a provider by path '${c}', please make sure to separate the parts by a ${CATEGORY_PATH_SEPARATOR}.`);
      return;
    }
    this._provider.updateRuntimeSettingsCategory(v2, { level: LogLevel$1.toLogLevel(u2), disableRecursion: l2 }), this._messageChannel(`Successfully updated category '${v2.name}' with path '${c}' to log level '${u2.toLowerCase()}'${l2 ? "" : " and recursively applied to children (if any)"}.`);
  }
  updateByIndex(u2, c, l2) {
    if (c < 0) {
      this._messageChannel(`Cannot update category by index '${c}', it is negative.`);
      return;
    }
    const v2 = this.createCategoryInfoHierarchy();
    if (c >= v2.size) {
      this._messageChannel(`Cannot update category by index '${c}', it is outside of the range of available categories, use showSettings() to see the indices.`);
      return;
    }
    const p2 = [...v2.values()][c].category;
    this._provider.updateRuntimeSettingsCategory(p2, { level: LogLevel$1.toLogLevel(u2), disableRecursion: l2 }), this._messageChannel(`Successfully updated category '${p2.name}' by index '${c}' to log level '${u2.toLowerCase()}'${l2 ? "" : " and recursively applied to children (if any)"}.`);
  }
  restoreBySaveData(u2, c) {
    const l2 = (v2, p2) => {
      const _ = p2.length > 0 ? p2 + CATEGORY_PATH_SEPARATOR + v2.name : v2.name, I2 = this._provider.getCategoryByPath(_);
      if (I2 !== void 0) {
        const P2 = LogLevel$1.toLogLevel(v2.level);
        P2 !== void 0 ? this._provider.updateRuntimeSettingsCategory(I2, { level: P2, disableRecursion: true }) : c && this._messageChannel(`CategoryControlProvider '${this._provider.name}' - cannot restore log level for category path '${_}', log level is invalid.`);
        for (const $ of v2.children)
          l2($, _);
      } else
        c && this._messageChannel(`CategoryControlProvider '${this._provider.name}' - failed to find a Category by path '${_}', will not restore category (and children)`);
    };
    for (const v2 of u2.rootCategories)
      l2(v2, "");
  }
  createKey() {
    return `CategoryProvider-${this._provider.name}`;
  }
  createCategoryInfoHierarchy() {
    const u2 = /* @__PURE__ */ new Map();
    return this._provider.getRegisteredCategories().filter((l2) => l2.parent === void 0).forEach((l2) => CategoryControlProviderImpl.addCategoryInfoHierarchy(l2, 0, u2)), u2;
  }
  static createCategorySaveData(u2) {
    return { name: u2.name, level: LogLevel$1[u2.logLevel], children: u2.children.map((c) => this.createCategorySaveData(c)) };
  }
  static loadCurrentGroupLogLevels(u2) {
    return new Map(u2.getRegisteredCategories().map((c) => [c.id, c.logLevel]));
  }
  static createSettingLineCategory(u2, c, l2, v2) {
    const _ = " ".repeat(u2.depth) + u2.category.name;
    return `  [${index$3.padStart(c.toString(), l2)}, ${index$3.padEnd(_, v2)} (level=${index$3.padEnd(u2.logLevel, 5)})]`;
  }
  static addCategoryInfoHierarchy(u2, c, l2) {
    l2.set(u2.id, { category: u2, logLevel: LogLevel$1[u2.logLevel], depth: c }), u2.children.forEach((v2) => this.addCategoryInfoHierarchy(v2, c + 1, l2));
  }
}
function categoryConfigDebug(a420) {
  return `CategoryConfig=level: ${LogLevel$1[a420.level].toString()}, allowSameCategoryName=${a420.allowSameCategoryName}`;
}
class CategoryProviderService {
  constructor() {
    this._log = InternalLogger.getInternalLogger("category.impl.CategoryProviderService"), this._providers = new index$3.EnhancedMap();
  }
  createLogProvider(u2, c) {
    const l2 = this._providers.compute(u2, (v2, p2) => {
      if (p2)
        throw new Error(`CategoryProvider with name '${u2}' already exists, cannot create another.`);
      const _ = mergeWithDefaults(c);
      return this._log.debug(() => `Creating new CategoryProvider with name '${u2}', using config settings '${categoryConfigDebug(_)}'.`), new CategoryProviderImpl(u2, _);
    });
    if (l2)
      return l2;
    throw new Error("No CategoryProvider? This is a bug.");
  }
  getCategoryControl(u2) {
    const c = u2 || ((l2) => {
      if (console && console.log)
        console.log(l2);
      else
        throw new Error("Cannot use console (it is not present), please specify a custom function to write to.");
    });
    return { help: () => c(CategoryProviderService.help()), showSettings: () => c(this.showSettings()), getProvider: (l2) => this.getCategoryControlProviderByIdOrName(l2, c) };
  }
  clear() {
    this._providers.clear();
  }
  /* Functions for CategoryControl follow */
  showSettings() {
    let u2 = `Available CategoryProviders:
`;
    const c = this._providers.size.toString().length, l2 = index$3.maxLengthStringValueInArray([...this._providers.keys()]), v2 = [...this._providers.entries()].map((p2, _) => {
      const I2 = p2[0];
      return `  [${index$3.padStart(_.toString(), c)}, ${index$3.padEnd(I2, l2)}]`;
    });
    return u2 += v2.join(`
`) + (v2.length > 0 ? `
` : ""), u2;
  }
  getCategoryControlProviderByIdOrName(u2, c) {
    if (typeof u2 == "string") {
      const v2 = this._providers.get(u2);
      if (v2 === void 0)
        throw new Error(`Provider with name '${u2}' does not exist.`);
      return new CategoryControlProviderImpl(v2, c);
    }
    const l2 = [...this._providers.values()];
    if (u2 < 0 || u2 >= l2.length)
      throw new Error(`Provider with index '${u2}' does not exist (outside of range).`);
    return new CategoryControlProviderImpl(l2[u2], c);
  }
  static help() {
    return `You can use the following commands:
  showSettings()
    Shows the current configuration settings.
  getProvider: (id: number | string): CategoryControlProvider
    Get access to a CategoryControlProvider to change log levels.
      @param id The id (use showSettings to see) or name of the provider
  help()
    Shows this help.
`;
  }
}
const CATEGORY_PROVIDER_SERVICE = new CategoryProviderService(), CATEGORY_LOG_CONTROL = (a420) => CATEGORY_PROVIDER_SERVICE.getCategoryControl(a420);
function mergeWithDefaults(a420) {
  const u2 = { channel: DefaultChannels.createConsoleChannel(), allowSameCategoryName: true, level: LogLevel$1.Error, dateFormatter: formatDate, argumentFormatter: formatArgument };
  return a420 ? { channel: a420.channel ? a420.channel : u2.channel, allowSameCategoryName: a420.allowSameCategoryName !== void 0 ? a420.allowSameCategoryName : u2.allowSameCategoryName, level: a420.level ? a420.level : u2.level, dateFormatter: a420.dateFormatter ? a420.dateFormatter : u2.dateFormatter, argumentFormatter: a420.argumentFormatter ? a420.argumentFormatter : u2.argumentFormatter } : u2;
}
var CategoryProvider;
(function(a420) {
  function u2(l2, v2) {
    return CATEGORY_PROVIDER_SERVICE.createLogProvider(l2, v2);
  }
  a420.createProvider = u2;
  function c() {
    CATEGORY_PROVIDER_SERVICE.clear();
  }
  a420.clear = c;
})(CategoryProvider || (CategoryProvider = {}));
const typescriptLoggingCategory_esm = /* @__PURE__ */ Object.freeze(/* @__PURE__ */ Object.defineProperty({ __proto__: null, CATEGORY_LOG_CONTROL, get CategoryProvider() {
  return CategoryProvider;
} }, Symbol.toStringTag, { value: "Module" })), require$$1$2 = /* @__PURE__ */ getAugmentedNamespace(typescriptLoggingCategory_esm);
Object.defineProperty(logger, "__esModule", { value: true });
logger.logger = void 0;
const typescript_logging_1 = require$$2$2, typescript_logging_category_style_1 = require$$1$2;
logger.logger = typescript_logging_category_style_1.CategoryProvider.createProvider("ApiStream", { allowSameCategoryName: true, level: typescript_logging_1.LogLevel.Warn });
var version$4 = "1.0.25", __createBinding$3 = commonjsGlobal$1 && commonjsGlobal$1.__createBinding || (Object.create ? function(a420, u2, c, l2) {
  l2 === void 0 && (l2 = c);
  var v2 = Object.getOwnPropertyDescriptor(u2, c);
  (!v2 || ("get" in v2 ? !u2.__esModule : v2.writable || v2.configurable)) && (v2 = { enumerable: true, get: function() {
    return u2[c];
  } }), Object.defineProperty(a420, l2, v2);
} : function(a420, u2, c, l2) {
  l2 === void 0 && (l2 = c), a420[l2] = u2[c];
}), __setModuleDefault$3 = commonjsGlobal$1 && commonjsGlobal$1.__setModuleDefault || (Object.create ? function(a420, u2) {
  Object.defineProperty(a420, "default", { enumerable: true, value: u2 });
} : function(a420, u2) {
  a420.default = u2;
}), __importStar$3 = commonjsGlobal$1 && commonjsGlobal$1.__importStar || function(a420) {
  if (a420 && a420.__esModule)
    return a420;
  var u2 = {};
  if (a420 != null)
    for (var c in a420)
      c !== "default" && Object.prototype.hasOwnProperty.call(a420, c) && __createBinding$3(u2, a420, c);
  return __setModuleDefault$3(u2, a420), u2;
}, __importDefault$d = commonjsGlobal$1 && commonjsGlobal$1.__importDefault || function(a420) {
  return a420 && a420.__esModule ? a420 : { default: a420 };
};
Object.defineProperty(api$3, "__esModule", { value: true });
api$3.ApiClient = void 0;
const NiceGrpc$1 = __importStar$3(lib$1), abort_controller_x_1 = require$$1$3, detect_node_1 = __importDefault$d(browser$f), NodeTransport = __importStar$3(require$$3), logger_1 = logger, clientVersion$1 = version$4;
class ApiClient {
  constructor(u2, c, l2, v2, p2, _) {
    this.sessionId = u2, this.sdkVersion = l2, this.version = clientVersion$1, this.apiLogCallback = p2, this.eventLogCallback = _, this.log = logger_1.logger.getCategory(v2), this.channel = NiceGrpc$1.createChannel(c, detect_node_1.default ? NodeTransport.NodeHttpTransport() : void 0), this.clientFactory = NiceGrpc$1.createClientFactory().use(this.logMiddleware.bind(this));
  }
  async *logMiddleware(u2, c) {
    const { path: l2 } = u2.method;
    try {
      const v2 = yield* u2.next(u2.request, c);
      if (this.log.debug(`-> ${l2}: ok`), this.log.trace(`${JSON.stringify(u2.request)} -> ${l2}: ${JSON.stringify(v2)}`), this.apiLogCallback) {
        let p2 = l2.split("/"), _ = p2[1].split("."), I2 = _[_.length - 1], P2 = _[_.length - 2], $ = _[_.length - 3], F2 = p2[2];
        this.apiLogCallback($, I2, F2, u2.request, v2);
      }
      return v2;
    } catch (v2) {
      throw this.log.trace(`${JSON.stringify(u2.request)} -> ${l2}`), v2 instanceof NiceGrpc$1.ClientError ? this.log.warn(`-> ${l2}: error: ${NiceGrpc$1.Status[v2.code]}: ${v2.details}`) : (0, abort_controller_x_1.isAbortError)(v2) ? this.log.warn(`-> ${l2}: cancel`) : this.log.warn(`-> ${l2}: error: ${v2 == null ? void 0 : v2.stack}`), v2;
    }
  }
  setAccessToken(u2) {
    (this.accessToken == null || this.accessToken != u2) && (this.log.debug("access token refreshed"), this.accessToken = u2, this.setup());
  }
  makeGrpcMetadata() {
    let u2 = NiceGrpc$1.Metadata({ Authorization: `Bearer ${this.accessToken}`, Version: this.version, SessionId: this.sessionId });
    return this.sdkVersion != null && u2.set("SdkVersion", this.sdkVersion), u2;
  }
  setup() {
    let u2 = { metadata: this.makeGrpcMetadata() };
    this._setup(u2);
  }
  _setup(u2) {
  }
}
api$3.ApiClient = ApiClient;
var decorator = {};
Object.defineProperty(decorator, "__esModule", { value: true });
decorator.RequiresSdkAuthentication = void 0;
function RequiresSdkAuthentication() {
  return function(a420, u2) {
    const c = Symbol(u2);
    Object.defineProperty(a420, u2, { get: function() {
      if (!this[c])
        throw new Error("Please authenticate ApiStream by calling apiStream.load( accessToken )");
      return this[c];
    }, set: function(l2) {
      this[c] = l2;
    } });
  };
}
decorator.RequiresSdkAuthentication = RequiresSdkAuthentication;
var __createBinding$2 = commonjsGlobal$1 && commonjsGlobal$1.__createBinding || (Object.create ? function(a420, u2, c, l2) {
  l2 === void 0 && (l2 = c);
  var v2 = Object.getOwnPropertyDescriptor(u2, c);
  (!v2 || ("get" in v2 ? !u2.__esModule : v2.writable || v2.configurable)) && (v2 = { enumerable: true, get: function() {
    return u2[c];
  } }), Object.defineProperty(a420, l2, v2);
} : function(a420, u2, c, l2) {
  l2 === void 0 && (l2 = c), a420[l2] = u2[c];
}), __setModuleDefault$2 = commonjsGlobal$1 && commonjsGlobal$1.__setModuleDefault || (Object.create ? function(a420, u2) {
  Object.defineProperty(a420, "default", { enumerable: true, value: u2 });
} : function(a420, u2) {
  a420.default = u2;
}), __decorate = commonjsGlobal$1 && commonjsGlobal$1.__decorate || function(a420, u2, c, l2) {
  var v2 = arguments.length, p2 = v2 < 3 ? u2 : l2 === null ? l2 = Object.getOwnPropertyDescriptor(u2, c) : l2, _;
  if (typeof Reflect == "object" && typeof Reflect.decorate == "function")
    p2 = Reflect.decorate(a420, u2, c, l2);
  else
    for (var I2 = a420.length - 1; I2 >= 0; I2--)
      (_ = a420[I2]) && (p2 = (v2 < 3 ? _(p2) : v2 > 3 ? _(u2, c, p2) : _(u2, c)) || p2);
  return v2 > 3 && p2 && Object.defineProperty(u2, c, p2), p2;
}, __importStar$2 = commonjsGlobal$1 && commonjsGlobal$1.__importStar || function(a420) {
  if (a420 && a420.__esModule)
    return a420;
  var u2 = {};
  if (a420 != null)
    for (var c in a420)
      c !== "default" && Object.prototype.hasOwnProperty.call(a420, c) && __createBinding$2(u2, a420, c);
  return __setModuleDefault$2(u2, a420), u2;
}, __metadata = commonjsGlobal$1 && commonjsGlobal$1.__metadata || function(a420, u2) {
  if (typeof Reflect == "object" && typeof Reflect.metadata == "function")
    return Reflect.metadata(a420, u2);
};
Object.defineProperty(layoutapi, "__esModule", { value: true });
layoutapi.LayoutApi = void 0;
__importStar$2(lib$1);
const LayoutApiModel = __importStar$2(dist$2), api_1$1 = api$3, decorator_1 = decorator, LOG_CATEGORY$1 = "LayoutApi";
class LayoutApi extends api_1$1.ApiClient {
  constructor(u2, c, l2, v2, p2) {
    super(u2, l2, v2, LOG_CATEGORY$1, p2), this.handlers = {}, this.eventApi = c, this.eventApi.on("event", { name: `${LayoutApi.LAYOUTAPI_EVENT_PREFIX}:*`, ignoreSessionEvents: true }, (_) => {
      var I2;
      const [, P2] = _.name.split(`${LayoutApi.LAYOUTAPI_EVENT_PREFIX}:`), [$, F2] = P2.split(":"), H2 = _.payload;
      for (const j of (I2 = this.handlers[$]) !== null && I2 !== void 0 ? I2 : [])
        j(Object.values(H2).find((ee2) => !!ee2), F2);
    });
  }
  _setup(u2) {
    this.layer = this.clientFactory.create(LayoutApiModel.LayerServiceDefinition, this.channel, { "*": u2 }), this.layout = this.clientFactory.create(LayoutApiModel.LayoutServiceDefinition, this.channel, { "*": u2 });
  }
  /**
  * Subscribe to all events for a given layout.
  *
  * @param layoutId - the id of the layout to which you want to subscribe to layout events
  */
  async subscribeToLayout(u2) {
    await Promise.all([this.eventApi.subscribe(`${LayoutApi.LAYOUTAPI_EVENT_PREFIX}:${LayoutApiModel.EventType.EVENT_TYPE_LAYER}:*`, { target: { layoutId: u2 } }), this.eventApi.subscribe(`${LayoutApi.LAYOUTAPI_EVENT_PREFIX}:${LayoutApiModel.EventType.EVENT_TYPE_LAYOUT}:*`, { target: { layoutId: u2 } })]);
  }
  /**
  * Unsubscribe from all events for a given layout.
  *
  * @param layoutId - the id of the layout to which you want to unsubscribe to layout events
  */
  async unsubscribeFromLayout(u2) {
    await Promise.all([this.eventApi.unsubscribe(`${LayoutApi.LAYOUTAPI_EVENT_PREFIX}:${LayoutApiModel.EventType.EVENT_TYPE_LAYER}:*`, { target: { layoutId: u2 } }), this.eventApi.unsubscribe(`${LayoutApi.LAYOUTAPI_EVENT_PREFIX}:${LayoutApiModel.EventType.EVENT_TYPE_LAYOUT}:*`, { target: { layoutId: u2 } })]);
  }
  /**
  * Subscribe to all events for layouts in a project.
  *
  * @param collectionId - the id of the collection the layouts are in.
  * @param projectId - the id of the project the layouts are in.
  */
  async subscribeToLayoutsInProject(u2, c) {
    await Promise.all([this.eventApi.subscribe(`${LayoutApi.LAYOUTAPI_EVENT_PREFIX}:${LayoutApiModel.EventType.EVENT_TYPE_LAYER}:*`, { target: { collectionId: u2, projectId: c } }), this.eventApi.subscribe(`${LayoutApi.LAYOUTAPI_EVENT_PREFIX}:${LayoutApiModel.EventType.EVENT_TYPE_LAYOUT}:*`, { target: { collectionId: u2, projectId: c } })]);
  }
  /**
  * Unsubscribe from all events for layouts in a project.
  *
  * @param collectionId - the id of the collection the layouts are in.
  * @param projectId - the id of the project the layouts are in.
  */
  async unsubscribeFromLayoutsInProject(u2, c) {
    await Promise.all([this.eventApi.unsubscribe(`${LayoutApi.LAYOUTAPI_EVENT_PREFIX}:${LayoutApiModel.EventType.EVENT_TYPE_LAYER}:*`, { target: { collectionId: u2, projectId: c } }), this.eventApi.unsubscribe(`${LayoutApi.LAYOUTAPI_EVENT_PREFIX}:${LayoutApiModel.EventType.EVENT_TYPE_LAYOUT}:*`, { target: { collectionId: u2, projectId: c } })]);
  }
  /**
  * Register an event handler
  *
  * @param type Type of event
  * @param handler
  */
  on(u2, c) {
    var l2;
    this.handlers[u2] = (l2 = this.handlers[u2]) !== null && l2 !== void 0 ? l2 : [], this.handlers[u2].push(c);
  }
  /**
  * Unregister an event handler
  *
  * @param type Type of event
  * @param handler
  */
  off(u2, c) {
    this.handlers[u2] = this.handlers[u2].filter((l2) => l2 !== c);
  }
}
LayoutApi.LAYOUTAPI_EVENT_PREFIX = "apistream:layout";
__decorate([(0, decorator_1.RequiresSdkAuthentication)(), __metadata("design:type", Object)], LayoutApi.prototype, "layout", void 0);
__decorate([(0, decorator_1.RequiresSdkAuthentication)(), __metadata("design:type", Object)], LayoutApi.prototype, "layer", void 0);
layoutapi.LayoutApi = LayoutApi;
var liveapi = {}, api$2 = {}, httpbody = {}, any = {}, __importDefault$c = commonjsGlobal$1 && commonjsGlobal$1.__importDefault || function(a420) {
  return a420 && a420.__esModule ? a420 : { default: a420 };
};
Object.defineProperty(any, "__esModule", { value: true });
any.Any = any.protobufPackage = void 0;
const minimal_1$5 = __importDefault$c(minimal);
any.protobufPackage = "google.protobuf";
function createBaseAny() {
  return { typeUrl: "", value: new Uint8Array() };
}
any.Any = { encode(a420, u2 = minimal_1$5.default.Writer.create()) {
  return a420.typeUrl !== "" && u2.uint32(10).string(a420.typeUrl), a420.value.length !== 0 && u2.uint32(18).bytes(a420.value), u2;
}, decode(a420, u2) {
  const c = a420 instanceof minimal_1$5.default.Reader ? a420 : new minimal_1$5.default.Reader(a420);
  let l2 = u2 === void 0 ? c.len : c.pos + u2;
  const v2 = createBaseAny();
  for (; c.pos < l2; ) {
    const p2 = c.uint32();
    switch (p2 >>> 3) {
      case 1:
        v2.typeUrl = c.string();
        break;
      case 2:
        v2.value = c.bytes();
        break;
      default:
        c.skipType(p2 & 7);
        break;
    }
  }
  return v2;
}, fromJSON(a420) {
  return { typeUrl: isSet$4(a420.typeUrl) ? String(a420.typeUrl) : "", value: isSet$4(a420.value) ? bytesFromBase64$1(a420.value) : new Uint8Array() };
}, toJSON(a420) {
  const u2 = {};
  return a420.typeUrl !== void 0 && (u2.typeUrl = a420.typeUrl), a420.value !== void 0 && (u2.value = base64FromBytes$1(a420.value !== void 0 ? a420.value : new Uint8Array())), u2;
}, fromPartial(a420) {
  var u2, c;
  const l2 = createBaseAny();
  return l2.typeUrl = (u2 = a420.typeUrl) !== null && u2 !== void 0 ? u2 : "", l2.value = (c = a420.value) !== null && c !== void 0 ? c : new Uint8Array(), l2;
} };
var globalThis$5 = (() => {
  if (typeof globalThis$5 < "u")
    return globalThis$5;
  if (typeof self < "u")
    return self;
  if (typeof window < "u")
    return window;
  if (typeof commonjsGlobal$1 < "u")
    return commonjsGlobal$1;
  throw "Unable to locate global object";
})();
function bytesFromBase64$1(a420) {
  if (globalThis$5.Buffer)
    return Uint8Array.from(globalThis$5.Buffer.from(a420, "base64"));
  {
    const u2 = globalThis$5.atob(a420), c = new Uint8Array(u2.length);
    for (let l2 = 0; l2 < u2.length; ++l2)
      c[l2] = u2.charCodeAt(l2);
    return c;
  }
}
function base64FromBytes$1(a420) {
  if (globalThis$5.Buffer)
    return globalThis$5.Buffer.from(a420).toString("base64");
  {
    const u2 = [];
    return a420.forEach((c) => {
      u2.push(String.fromCharCode(c));
    }), globalThis$5.btoa(u2.join(""));
  }
}
function isSet$4(a420) {
  return a420 != null;
}
var __importDefault$b = commonjsGlobal$1 && commonjsGlobal$1.__importDefault || function(a420) {
  return a420 && a420.__esModule ? a420 : { default: a420 };
};
Object.defineProperty(httpbody, "__esModule", { value: true });
httpbody.HttpBody = httpbody.protobufPackage = void 0;
const minimal_1$4 = __importDefault$b(minimal), any_1 = any;
httpbody.protobufPackage = "google.api";
function createBaseHttpBody() {
  return { contentType: "", data: new Uint8Array(), extensions: [] };
}
httpbody.HttpBody = { encode(a420, u2 = minimal_1$4.default.Writer.create()) {
  a420.contentType !== "" && u2.uint32(10).string(a420.contentType), a420.data.length !== 0 && u2.uint32(18).bytes(a420.data);
  for (const c of a420.extensions)
    any_1.Any.encode(c, u2.uint32(26).fork()).ldelim();
  return u2;
}, decode(a420, u2) {
  const c = a420 instanceof minimal_1$4.default.Reader ? a420 : new minimal_1$4.default.Reader(a420);
  let l2 = u2 === void 0 ? c.len : c.pos + u2;
  const v2 = createBaseHttpBody();
  for (; c.pos < l2; ) {
    const p2 = c.uint32();
    switch (p2 >>> 3) {
      case 1:
        v2.contentType = c.string();
        break;
      case 2:
        v2.data = c.bytes();
        break;
      case 3:
        v2.extensions.push(any_1.Any.decode(c, c.uint32()));
        break;
      default:
        c.skipType(p2 & 7);
        break;
    }
  }
  return v2;
}, fromJSON(a420) {
  return { contentType: isSet$3(a420.contentType) ? String(a420.contentType) : "", data: isSet$3(a420.data) ? bytesFromBase64(a420.data) : new Uint8Array(), extensions: Array.isArray(a420 == null ? void 0 : a420.extensions) ? a420.extensions.map((u2) => any_1.Any.fromJSON(u2)) : [] };
}, toJSON(a420) {
  const u2 = {};
  return a420.contentType !== void 0 && (u2.contentType = a420.contentType), a420.data !== void 0 && (u2.data = base64FromBytes(a420.data !== void 0 ? a420.data : new Uint8Array())), a420.extensions ? u2.extensions = a420.extensions.map((c) => c ? any_1.Any.toJSON(c) : void 0) : u2.extensions = [], u2;
}, fromPartial(a420) {
  var u2, c, l2;
  const v2 = createBaseHttpBody();
  return v2.contentType = (u2 = a420.contentType) !== null && u2 !== void 0 ? u2 : "", v2.data = (c = a420.data) !== null && c !== void 0 ? c : new Uint8Array(), v2.extensions = ((l2 = a420.extensions) === null || l2 === void 0 ? void 0 : l2.map((p2) => any_1.Any.fromPartial(p2))) || [], v2;
} };
var globalThis$4 = (() => {
  if (typeof globalThis$4 < "u")
    return globalThis$4;
  if (typeof self < "u")
    return self;
  if (typeof window < "u")
    return window;
  if (typeof commonjsGlobal$1 < "u")
    return commonjsGlobal$1;
  throw "Unable to locate global object";
})();
function bytesFromBase64(a420) {
  if (globalThis$4.Buffer)
    return Uint8Array.from(globalThis$4.Buffer.from(a420, "base64"));
  {
    const u2 = globalThis$4.atob(a420), c = new Uint8Array(u2.length);
    for (let l2 = 0; l2 < u2.length; ++l2)
      c[l2] = u2.charCodeAt(l2);
    return c;
  }
}
function base64FromBytes(a420) {
  if (globalThis$4.Buffer)
    return globalThis$4.Buffer.from(a420).toString("base64");
  {
    const u2 = [];
    return a420.forEach((c) => {
      u2.push(String.fromCharCode(c));
    }), globalThis$4.btoa(u2.join(""));
  }
}
function isSet$3(a420) {
  return a420 != null;
}
var field_mask = {}, __importDefault$a = commonjsGlobal$1 && commonjsGlobal$1.__importDefault || function(a420) {
  return a420 && a420.__esModule ? a420 : { default: a420 };
};
Object.defineProperty(field_mask, "__esModule", { value: true });
field_mask.FieldMask = field_mask.protobufPackage = void 0;
const minimal_1$3 = __importDefault$a(minimal);
field_mask.protobufPackage = "google.protobuf";
function createBaseFieldMask() {
  return { paths: [] };
}
field_mask.FieldMask = { encode(a420, u2 = minimal_1$3.default.Writer.create()) {
  for (const c of a420.paths)
    u2.uint32(10).string(c);
  return u2;
}, decode(a420, u2) {
  const c = a420 instanceof minimal_1$3.default.Reader ? a420 : new minimal_1$3.default.Reader(a420);
  let l2 = u2 === void 0 ? c.len : c.pos + u2;
  const v2 = createBaseFieldMask();
  for (; c.pos < l2; ) {
    const p2 = c.uint32();
    switch (p2 >>> 3) {
      case 1:
        v2.paths.push(c.string());
        break;
      default:
        c.skipType(p2 & 7);
        break;
    }
  }
  return v2;
}, fromJSON(a420) {
  return { paths: typeof a420 == "string" ? a420.split(",").filter(Boolean) : Array.isArray(a420 == null ? void 0 : a420.paths) ? a420.paths.map(String) : [] };
}, toJSON(a420) {
  return a420.paths.join(",");
}, fromPartial(a420) {
  var u2;
  const c = createBaseFieldMask();
  return c.paths = ((u2 = a420.paths) === null || u2 === void 0 ? void 0 : u2.map((l2) => l2)) || [], c;
}, wrap(a420) {
  const u2 = createBaseFieldMask();
  return u2.paths = a420, u2;
}, unwrap(a420) {
  return a420.paths;
} };
var struct$1 = {};
(function(a420) {
  var u2 = commonjsGlobal$1 && commonjsGlobal$1.__importDefault || function(X2) {
    return X2 && X2.__esModule ? X2 : { default: X2 };
  };
  Object.defineProperty(a420, "__esModule", { value: true }), a420.ListValue = a420.Value = a420.Struct_FieldsEntry = a420.Struct = a420.nullValueToNumber = a420.nullValueToJSON = a420.nullValueFromJSON = a420.NullValue = a420.protobufPackage = void 0;
  const c = u2(minimal);
  a420.protobufPackage = "google.protobuf";
  var l2;
  (function(X2) {
    X2.NULL_VALUE = "NULL_VALUE";
  })(l2 = a420.NullValue || (a420.NullValue = {}));
  function v2(X2) {
    switch (X2) {
      case 0:
      case "NULL_VALUE":
        return l2.NULL_VALUE;
      default:
        throw new H2.Error("Unrecognized enum value " + X2 + " for enum NullValue");
    }
  }
  a420.nullValueFromJSON = v2;
  function p2(X2) {
    switch (X2) {
      case l2.NULL_VALUE:
        return "NULL_VALUE";
      default:
        throw new H2.Error("Unrecognized enum value " + X2 + " for enum NullValue");
    }
  }
  a420.nullValueToJSON = p2;
  function _(X2) {
    switch (X2) {
      case l2.NULL_VALUE:
        return 0;
      default:
        throw new H2.Error("Unrecognized enum value " + X2 + " for enum NullValue");
    }
  }
  a420.nullValueToNumber = _;
  function I2() {
    return { fields: {} };
  }
  a420.Struct = { encode(X2, ie2 = c.default.Writer.create()) {
    return Object.entries(X2.fields).forEach(([Q2, ne2]) => {
      ne2 !== void 0 && a420.Struct_FieldsEntry.encode({ key: Q2, value: ne2 }, ie2.uint32(10).fork()).ldelim();
    }), ie2;
  }, decode(X2, ie2) {
    const Q2 = X2 instanceof c.default.Reader ? X2 : new c.default.Reader(X2);
    let ne2 = ie2 === void 0 ? Q2.len : Q2.pos + ie2;
    const Z2 = I2();
    for (; Q2.pos < ne2; ) {
      const de2 = Q2.uint32();
      switch (de2 >>> 3) {
        case 1:
          const pe2 = a420.Struct_FieldsEntry.decode(Q2, Q2.uint32());
          pe2.value !== void 0 && (Z2.fields[pe2.key] = pe2.value);
          break;
        default:
          Q2.skipType(de2 & 7);
          break;
      }
    }
    return Z2;
  }, fromJSON(X2) {
    return { fields: j(X2.fields) ? Object.entries(X2.fields).reduce((ie2, [Q2, ne2]) => (ie2[Q2] = ne2, ie2), {}) : {} };
  }, toJSON(X2) {
    const ie2 = {};
    return ie2.fields = {}, X2.fields && Object.entries(X2.fields).forEach(([Q2, ne2]) => {
      ie2.fields[Q2] = ne2;
    }), ie2;
  }, fromPartial(X2) {
    var ie2;
    const Q2 = I2();
    return Q2.fields = Object.entries((ie2 = X2.fields) !== null && ie2 !== void 0 ? ie2 : {}).reduce((ne2, [Z2, de2]) => (de2 !== void 0 && (ne2[Z2] = de2), ne2), {}), Q2;
  }, wrap(X2) {
    const ie2 = I2();
    return X2 !== void 0 && Object.keys(X2).forEach((Q2) => {
      ie2.fields[Q2] = X2[Q2];
    }), ie2;
  }, unwrap(X2) {
    const ie2 = {};
    return Object.keys(X2.fields).forEach((Q2) => {
      ie2[Q2] = X2.fields[Q2];
    }), ie2;
  } };
  function P2() {
    return { key: "", value: void 0 };
  }
  a420.Struct_FieldsEntry = { encode(X2, ie2 = c.default.Writer.create()) {
    return X2.key !== "" && ie2.uint32(10).string(X2.key), X2.value !== void 0 && a420.Value.encode(a420.Value.wrap(X2.value), ie2.uint32(18).fork()).ldelim(), ie2;
  }, decode(X2, ie2) {
    const Q2 = X2 instanceof c.default.Reader ? X2 : new c.default.Reader(X2);
    let ne2 = ie2 === void 0 ? Q2.len : Q2.pos + ie2;
    const Z2 = P2();
    for (; Q2.pos < ne2; ) {
      const de2 = Q2.uint32();
      switch (de2 >>> 3) {
        case 1:
          Z2.key = Q2.string();
          break;
        case 2:
          Z2.value = a420.Value.unwrap(a420.Value.decode(Q2, Q2.uint32()));
          break;
        default:
          Q2.skipType(de2 & 7);
          break;
      }
    }
    return Z2;
  }, fromJSON(X2) {
    return { key: ee2(X2.key) ? String(X2.key) : "", value: ee2(X2 == null ? void 0 : X2.value) ? X2.value : void 0 };
  }, toJSON(X2) {
    const ie2 = {};
    return X2.key !== void 0 && (ie2.key = X2.key), X2.value !== void 0 && (ie2.value = X2.value), ie2;
  }, fromPartial(X2) {
    var ie2, Q2;
    const ne2 = P2();
    return ne2.key = (ie2 = X2.key) !== null && ie2 !== void 0 ? ie2 : "", ne2.value = (Q2 = X2.value) !== null && Q2 !== void 0 ? Q2 : void 0, ne2;
  } };
  function $() {
    return { nullValue: void 0, numberValue: void 0, stringValue: void 0, boolValue: void 0, structValue: void 0, listValue: void 0 };
  }
  a420.Value = { encode(X2, ie2 = c.default.Writer.create()) {
    return X2.nullValue !== void 0 && ie2.uint32(8).int32(_(X2.nullValue)), X2.numberValue !== void 0 && ie2.uint32(17).double(X2.numberValue), X2.stringValue !== void 0 && ie2.uint32(26).string(X2.stringValue), X2.boolValue !== void 0 && ie2.uint32(32).bool(X2.boolValue), X2.structValue !== void 0 && a420.Struct.encode(a420.Struct.wrap(X2.structValue), ie2.uint32(42).fork()).ldelim(), X2.listValue !== void 0 && a420.ListValue.encode(a420.ListValue.wrap(X2.listValue), ie2.uint32(50).fork()).ldelim(), ie2;
  }, decode(X2, ie2) {
    const Q2 = X2 instanceof c.default.Reader ? X2 : new c.default.Reader(X2);
    let ne2 = ie2 === void 0 ? Q2.len : Q2.pos + ie2;
    const Z2 = $();
    for (; Q2.pos < ne2; ) {
      const de2 = Q2.uint32();
      switch (de2 >>> 3) {
        case 1:
          Z2.nullValue = v2(Q2.int32());
          break;
        case 2:
          Z2.numberValue = Q2.double();
          break;
        case 3:
          Z2.stringValue = Q2.string();
          break;
        case 4:
          Z2.boolValue = Q2.bool();
          break;
        case 5:
          Z2.structValue = a420.Struct.unwrap(a420.Struct.decode(Q2, Q2.uint32()));
          break;
        case 6:
          Z2.listValue = a420.ListValue.unwrap(a420.ListValue.decode(Q2, Q2.uint32()));
          break;
        default:
          Q2.skipType(de2 & 7);
          break;
      }
    }
    return Z2;
  }, fromJSON(X2) {
    return { nullValue: ee2(X2.nullValue) ? v2(X2.nullValue) : void 0, numberValue: ee2(X2.numberValue) ? Number(X2.numberValue) : void 0, stringValue: ee2(X2.stringValue) ? String(X2.stringValue) : void 0, boolValue: ee2(X2.boolValue) ? !!X2.boolValue : void 0, structValue: j(X2.structValue) ? X2.structValue : void 0, listValue: Array.isArray(X2.listValue) ? [...X2.listValue] : void 0 };
  }, toJSON(X2) {
    const ie2 = {};
    return X2.nullValue !== void 0 && (ie2.nullValue = X2.nullValue !== void 0 ? p2(X2.nullValue) : void 0), X2.numberValue !== void 0 && (ie2.numberValue = X2.numberValue), X2.stringValue !== void 0 && (ie2.stringValue = X2.stringValue), X2.boolValue !== void 0 && (ie2.boolValue = X2.boolValue), X2.structValue !== void 0 && (ie2.structValue = X2.structValue), X2.listValue !== void 0 && (ie2.listValue = X2.listValue), ie2;
  }, fromPartial(X2) {
    var ie2, Q2, ne2, Z2, de2, pe2;
    const le2 = $();
    return le2.nullValue = (ie2 = X2.nullValue) !== null && ie2 !== void 0 ? ie2 : void 0, le2.numberValue = (Q2 = X2.numberValue) !== null && Q2 !== void 0 ? Q2 : void 0, le2.stringValue = (ne2 = X2.stringValue) !== null && ne2 !== void 0 ? ne2 : void 0, le2.boolValue = (Z2 = X2.boolValue) !== null && Z2 !== void 0 ? Z2 : void 0, le2.structValue = (de2 = X2.structValue) !== null && de2 !== void 0 ? de2 : void 0, le2.listValue = (pe2 = X2.listValue) !== null && pe2 !== void 0 ? pe2 : void 0, le2;
  }, wrap(X2) {
    const ie2 = $();
    if (X2 === null)
      ie2.nullValue = l2.NULL_VALUE;
    else if (typeof X2 == "boolean")
      ie2.boolValue = X2;
    else if (typeof X2 == "number")
      ie2.numberValue = X2;
    else if (typeof X2 == "string")
      ie2.stringValue = X2;
    else if (Array.isArray(X2))
      ie2.listValue = X2;
    else if (typeof X2 == "object")
      ie2.structValue = X2;
    else if (typeof X2 < "u")
      throw new Error("Unsupported any value type: " + typeof X2);
    return ie2;
  }, unwrap(X2) {
    if ((X2 == null ? void 0 : X2.stringValue) !== void 0)
      return X2.stringValue;
    if ((X2 == null ? void 0 : X2.numberValue) !== void 0)
      return X2.numberValue;
    if ((X2 == null ? void 0 : X2.boolValue) !== void 0)
      return X2.boolValue;
    if ((X2 == null ? void 0 : X2.structValue) !== void 0)
      return X2.structValue;
    if ((X2 == null ? void 0 : X2.listValue) !== void 0)
      return X2.listValue;
    if ((X2 == null ? void 0 : X2.nullValue) !== void 0)
      return null;
  } };
  function F2() {
    return { values: [] };
  }
  a420.ListValue = { encode(X2, ie2 = c.default.Writer.create()) {
    for (const Q2 of X2.values)
      a420.Value.encode(a420.Value.wrap(Q2), ie2.uint32(10).fork()).ldelim();
    return ie2;
  }, decode(X2, ie2) {
    const Q2 = X2 instanceof c.default.Reader ? X2 : new c.default.Reader(X2);
    let ne2 = ie2 === void 0 ? Q2.len : Q2.pos + ie2;
    const Z2 = F2();
    for (; Q2.pos < ne2; ) {
      const de2 = Q2.uint32();
      switch (de2 >>> 3) {
        case 1:
          Z2.values.push(a420.Value.unwrap(a420.Value.decode(Q2, Q2.uint32())));
          break;
        default:
          Q2.skipType(de2 & 7);
          break;
      }
    }
    return Z2;
  }, fromJSON(X2) {
    return { values: Array.isArray(X2 == null ? void 0 : X2.values) ? [...X2.values] : [] };
  }, toJSON(X2) {
    const ie2 = {};
    return X2.values ? ie2.values = X2.values.map((Q2) => Q2) : ie2.values = [], ie2;
  }, fromPartial(X2) {
    var ie2;
    const Q2 = F2();
    return Q2.values = ((ie2 = X2.values) === null || ie2 === void 0 ? void 0 : ie2.map((ne2) => ne2)) || [], Q2;
  }, wrap(X2) {
    const ie2 = F2();
    return ie2.values = X2 ?? [], ie2;
  }, unwrap(X2) {
    return X2.values;
  } };
  var H2 = (() => {
    if (typeof H2 < "u")
      return H2;
    if (typeof self < "u")
      return self;
    if (typeof window < "u")
      return window;
    if (typeof commonjsGlobal$1 < "u")
      return commonjsGlobal$1;
    throw "Unable to locate global object";
  })();
  function j(X2) {
    return typeof X2 == "object" && X2 !== null;
  }
  function ee2(X2) {
    return X2 != null;
  }
})(struct$1);
var timestamp$2 = {}, __importDefault$9 = commonjsGlobal$1 && commonjsGlobal$1.__importDefault || function(a420) {
  return a420 && a420.__esModule ? a420 : { default: a420 };
};
Object.defineProperty(timestamp$2, "__esModule", { value: true });
timestamp$2.Timestamp = timestamp$2.protobufPackage = void 0;
const long_1$2 = __importDefault$9(umdExports), minimal_1$2 = __importDefault$9(minimal);
timestamp$2.protobufPackage = "google.protobuf";
function createBaseTimestamp$1() {
  return { seconds: 0, nanos: 0 };
}
timestamp$2.Timestamp = { encode(a420, u2 = minimal_1$2.default.Writer.create()) {
  return a420.seconds !== 0 && u2.uint32(8).int64(a420.seconds), a420.nanos !== 0 && u2.uint32(16).int32(a420.nanos), u2;
}, decode(a420, u2) {
  const c = a420 instanceof minimal_1$2.default.Reader ? a420 : new minimal_1$2.default.Reader(a420);
  let l2 = u2 === void 0 ? c.len : c.pos + u2;
  const v2 = createBaseTimestamp$1();
  for (; c.pos < l2; ) {
    const p2 = c.uint32();
    switch (p2 >>> 3) {
      case 1:
        v2.seconds = longToNumber$2(c.int64());
        break;
      case 2:
        v2.nanos = c.int32();
        break;
      default:
        c.skipType(p2 & 7);
        break;
    }
  }
  return v2;
}, fromJSON(a420) {
  return { seconds: isSet$2(a420.seconds) ? Number(a420.seconds) : 0, nanos: isSet$2(a420.nanos) ? Number(a420.nanos) : 0 };
}, toJSON(a420) {
  const u2 = {};
  return a420.seconds !== void 0 && (u2.seconds = Math.round(a420.seconds)), a420.nanos !== void 0 && (u2.nanos = Math.round(a420.nanos)), u2;
}, fromPartial(a420) {
  var u2, c;
  const l2 = createBaseTimestamp$1();
  return l2.seconds = (u2 = a420.seconds) !== null && u2 !== void 0 ? u2 : 0, l2.nanos = (c = a420.nanos) !== null && c !== void 0 ? c : 0, l2;
} };
var globalThis$3 = (() => {
  if (typeof globalThis$3 < "u")
    return globalThis$3;
  if (typeof self < "u")
    return self;
  if (typeof window < "u")
    return window;
  if (typeof commonjsGlobal$1 < "u")
    return commonjsGlobal$1;
  throw "Unable to locate global object";
})();
function longToNumber$2(a420) {
  if (a420.gt(Number.MAX_SAFE_INTEGER))
    throw new globalThis$3.Error("Value is larger than Number.MAX_SAFE_INTEGER");
  return a420.toNumber();
}
minimal_1$2.default.util.Long !== long_1$2.default && (minimal_1$2.default.util.Long = long_1$2.default, minimal_1$2.default.configure());
function isSet$2(a420) {
  return a420 != null;
}
(function(a420) {
  var u2 = commonjsGlobal$1 && commonjsGlobal$1.__importDefault || function(S2) {
    return S2 && S2.__esModule ? S2 : { default: S2 };
  };
  Object.defineProperty(a420, "__esModule", { value: true }), a420.Role = a420.regionToNumber = a420.regionToJSON = a420.regionFromJSON = a420.Region = a420.sourceTriggerActionToNumber = a420.sourceTriggerActionToJSON = a420.sourceTriggerActionFromJSON = a420.SourceTriggerAction = a420.s3ACLToNumber = a420.s3ACLToJSON = a420.s3ACLFromJSON = a420.S3ACL = a420.projectBroadcastPhaseToNumber = a420.projectBroadcastPhaseToJSON = a420.projectBroadcastPhaseFromJSON = a420.ProjectBroadcastPhase = a420.videoCodecRateControlModeToNumber = a420.videoCodecRateControlModeToJSON = a420.videoCodecRateControlModeFromJSON = a420.VideoCodecRateControlMode = a420.audioCodecToNumber = a420.audioCodecToJSON = a420.audioCodecFromJSON = a420.AudioCodec = a420.videoCodecProfileToNumber = a420.videoCodecProfileToJSON = a420.videoCodecProfileFromJSON = a420.VideoCodecProfile = a420.videoCodecToNumber = a420.videoCodecToJSON = a420.videoCodecFromJSON = a420.VideoCodec = a420.renderingQualityToNumber = a420.renderingQualityToJSON = a420.renderingQualityFromJSON = a420.RenderingQuality = a420.audioChannelLayoutToNumber = a420.audioChannelLayoutToJSON = a420.audioChannelLayoutFromJSON = a420.AudioChannelLayout = a420.videoColorSpaceToNumber = a420.videoColorSpaceToJSON = a420.videoColorSpaceFromJSON = a420.VideoColorSpace = a420.imageFormatToNumber = a420.imageFormatToJSON = a420.imageFormatFromJSON = a420.ImageFormat = a420.protobufPackage = void 0, a420.ExternalComposition = a420.SceneComposition = a420.StudioSdkComposition = a420.PreviewAddress = a420.PreviewWebRtcAddress = a420.PreviewHlsPullAddress = a420.ProjectTrigger = a420.WebRtcTrigger = a420.SourceTrigger = a420.DestinationAddress = a420.S3StorageAddress = a420.ObjectStoragePackaging = a420.HlsPackaging = a420.HlsLifecycle = a420.HlsLifecycleVod = a420.HlsLifecycleLive = a420.DestinationAgoraPushAddress = a420.DestinationSrtPushAddress = a420.DestinationRtmpPushAddress = a420.SourceAddress = a420.SrtPullAddress = a420.RtmpPullAddress = a420.SrtPushAddress = a420.SourceRtmpPushAddress = a420.Encoding = a420.AudioEncoding = a420.VideoEncoding = a420.VideoCodecRateControl = a420.Rendering = a420.AudioRendering = a420.VideoRendering = a420.eventTypeToNumber = a420.eventTypeToJSON = a420.eventTypeFromJSON = a420.EventType = a420.eventSubTypeToNumber = a420.eventSubTypeToJSON = a420.eventSubTypeFromJSON = a420.EventSubType = a420.connectStateToNumber = a420.connectStateToJSON = a420.connectStateFromJSON = a420.ConnectState = a420.projectBroadcastErrorToNumber = a420.projectBroadcastErrorToJSON = a420.projectBroadcastErrorFromJSON = a420.ProjectBroadcastError = a420.roleToNumber = a420.roleToJSON = a420.roleFromJSON = void 0, a420.CreateSourceResponse = a420.CreateSourceRequest = a420.UpdateDestinationResponse = a420.UpdateDestinationRequest = a420.DeleteDestinationResponse = a420.DeleteDestinationRequest = a420.GetDestinationResponse = a420.GetDestinationRequest = a420.CreateDestinationResponse = a420.CreateDestinationRequest = a420.StopProjectWebRtcResponse = a420.StopProjectWebRtcRequest = a420.StartProjectWebRtcResponse = a420.StartProjectWebRtcRequest = a420.GetProjectBroadcastStatusResponse = a420.GetProjectBroadcastStatusRequest = a420.GetProjectBroadcastSnapshotResponse = a420.GetProjectBroadcastSnapshotRequest = a420.GetProjectResponse = a420.GetProjectRequest = a420.StopProjectBroadcastResponse = a420.StopProjectBroadcastRequest = a420.StartProjectBroadcastResponse = a420.StartProjectBroadcastRequest = a420.DeleteProjectResponse = a420.DeleteProjectRequest = a420.UpdateProjectResponse = a420.UpdateProjectRequest = a420.CreateProjectResponse = a420.CreateProjectRequest = a420.GetCollectionsResponse = a420.GetCollectionsRequest = a420.DeleteCollectionResponse = a420.DeleteCollectionRequest = a420.UpdateCollectionResponse = a420.UpdateCollectionRequest = a420.GetCollectionResponse = a420.GetCollectionRequest = a420.CreateCollectionResponse = a420.CreateCollectionRequest = a420.Collection = a420.Project = a420.Destination = a420.Source = a420.ProjectBroadcastStatus = a420.LatLong = a420.WebRtcAccess = a420.WebRtc = a420.HostedWebRtc = a420.Composition = void 0, a420.SourceAddEvent = a420.SourceUpdateEvent = a420.SourceDeleteEvent = a420.SourceCreateEvent = a420.CollectionUpdateEvent = a420.CollectionDeleteEvent = a420.CollectionCreateEvent = a420.ProjectBroadcastStateEvent = a420.ProjectUpdateEvent = a420.ProjectDeleteEvent = a420.ProjectCreateEvent = a420.DestinationStateEvent = a420.DestinationUpdateEvent = a420.DestinationDeleteEvent = a420.DestinationCreateEvent = a420.GetTestTokenResponse = a420.GetTestTokenRequest = a420.GetJsonWebKeySetResponse = a420.GetJsonWebKeySetRequest = a420.JsonWebKey = a420.GuestCodeRedirectResponse = a420.GuestCodeRedirectRequest = a420.GuestCode = a420.RefreshAccessTokenResponse = a420.RefreshAccessTokenRequest = a420.CreateWebRtcAccessTokenResponse = a420.CreateWebRtcAccessTokenRequest = a420.CreateGuestAccessTokenResponse = a420.CreateGuestAccessTokenRequest = a420.GuestAccessToken = a420.GuestAccessTokenExchange = a420.GuestAccessTokenDirect = a420.CreateAccessTokenResponse = a420.CreateAccessTokenRequest = a420.GetSourcePlaylistResponse = a420.GetSourcePlaylistRequest = a420.RemoveSourceFromProjectResponse = a420.RemoveSourceFromProjectRequest = a420.UpdateSourceResponse = a420.UpdateSourceRequest = a420.GetSourcesResponse = a420.GetSourcesRequest = a420.GetSourceResponse = a420.GetSourceRequest = a420.UpdateSourceInProjectResponse = a420.UpdateSourceInProjectRequest = a420.AddSourceToProjectResponse = a420.AddSourceToProjectRequest = a420.DeleteSourceResponse = a420.DeleteSourceRequest = void 0, a420.PublicAuthenticationServiceDefinition = a420.PublicAuthenticationServiceClientImpl = a420.AuthenticationServiceDefinition = a420.AuthenticationServiceClientImpl = a420.BackendAuthenticationServiceDefinition = a420.BackendAuthenticationServiceClientImpl = a420.SourceServiceDefinition = a420.SourceServiceClientImpl = a420.DestinationServiceDefinition = a420.DestinationServiceClientImpl = a420.ProjectServiceDefinition = a420.ProjectServiceClientImpl = a420.CollectionServiceDefinition = a420.CollectionServiceClientImpl = a420.LiveEvent = a420.SourceEvent = a420.ProjectEvent = a420.DestinationEvent = a420.CollectionEvent = a420.SourceStateEvent = a420.SourceRemoveEvent = void 0;
  const c = u2(minimal), l2 = httpbody, v2 = field_mask, p2 = struct$1, _ = timestamp$2;
  a420.protobufPackage = "live.v21";
  var I2;
  (function(S2) {
    S2.IMAGE_FORMAT_UNSPECIFIED = "IMAGE_FORMAT_UNSPECIFIED", S2.IMAGE_FORMAT_JPEG = "IMAGE_FORMAT_JPEG";
  })(I2 = a420.ImageFormat || (a420.ImageFormat = {}));
  function P2(S2) {
    switch (S2) {
      case 0:
      case "IMAGE_FORMAT_UNSPECIFIED":
        return I2.IMAGE_FORMAT_UNSPECIFIED;
      case 1:
      case "IMAGE_FORMAT_JPEG":
        return I2.IMAGE_FORMAT_JPEG;
      default:
        throw new It.Error("Unrecognized enum value " + S2 + " for enum ImageFormat");
    }
  }
  a420.imageFormatFromJSON = P2;
  function $(S2) {
    switch (S2) {
      case I2.IMAGE_FORMAT_UNSPECIFIED:
        return "IMAGE_FORMAT_UNSPECIFIED";
      case I2.IMAGE_FORMAT_JPEG:
        return "IMAGE_FORMAT_JPEG";
      default:
        throw new It.Error("Unrecognized enum value " + S2 + " for enum ImageFormat");
    }
  }
  a420.imageFormatToJSON = $;
  function F2(S2) {
    switch (S2) {
      case I2.IMAGE_FORMAT_UNSPECIFIED:
        return 0;
      case I2.IMAGE_FORMAT_JPEG:
        return 1;
      default:
        throw new It.Error("Unrecognized enum value " + S2 + " for enum ImageFormat");
    }
  }
  a420.imageFormatToNumber = F2;
  var H2;
  (function(S2) {
    S2.VIDEO_COLOR_SPACE_UNSPECIFIED = "VIDEO_COLOR_SPACE_UNSPECIFIED", S2.VIDEO_COLOR_SPACE_YUV420 = "VIDEO_COLOR_SPACE_YUV420";
  })(H2 = a420.VideoColorSpace || (a420.VideoColorSpace = {}));
  function j(S2) {
    switch (S2) {
      case 0:
      case "VIDEO_COLOR_SPACE_UNSPECIFIED":
        return H2.VIDEO_COLOR_SPACE_UNSPECIFIED;
      case 1:
      case "VIDEO_COLOR_SPACE_YUV420":
        return H2.VIDEO_COLOR_SPACE_YUV420;
      default:
        throw new It.Error("Unrecognized enum value " + S2 + " for enum VideoColorSpace");
    }
  }
  a420.videoColorSpaceFromJSON = j;
  function ee2(S2) {
    switch (S2) {
      case H2.VIDEO_COLOR_SPACE_UNSPECIFIED:
        return "VIDEO_COLOR_SPACE_UNSPECIFIED";
      case H2.VIDEO_COLOR_SPACE_YUV420:
        return "VIDEO_COLOR_SPACE_YUV420";
      default:
        throw new It.Error("Unrecognized enum value " + S2 + " for enum VideoColorSpace");
    }
  }
  a420.videoColorSpaceToJSON = ee2;
  function X2(S2) {
    switch (S2) {
      case H2.VIDEO_COLOR_SPACE_UNSPECIFIED:
        return 0;
      case H2.VIDEO_COLOR_SPACE_YUV420:
        return 1;
      default:
        throw new It.Error("Unrecognized enum value " + S2 + " for enum VideoColorSpace");
    }
  }
  a420.videoColorSpaceToNumber = X2;
  var ie2;
  (function(S2) {
    S2.AUDIO_CHANNEL_LAYOUT_UNSPECIFIED = "AUDIO_CHANNEL_LAYOUT_UNSPECIFIED", S2.AUDIO_CHANNEL_LAYOUT_STEREO = "AUDIO_CHANNEL_LAYOUT_STEREO";
  })(ie2 = a420.AudioChannelLayout || (a420.AudioChannelLayout = {}));
  function Q2(S2) {
    switch (S2) {
      case 0:
      case "AUDIO_CHANNEL_LAYOUT_UNSPECIFIED":
        return ie2.AUDIO_CHANNEL_LAYOUT_UNSPECIFIED;
      case 1:
      case "AUDIO_CHANNEL_LAYOUT_STEREO":
        return ie2.AUDIO_CHANNEL_LAYOUT_STEREO;
      default:
        throw new It.Error("Unrecognized enum value " + S2 + " for enum AudioChannelLayout");
    }
  }
  a420.audioChannelLayoutFromJSON = Q2;
  function ne2(S2) {
    switch (S2) {
      case ie2.AUDIO_CHANNEL_LAYOUT_UNSPECIFIED:
        return "AUDIO_CHANNEL_LAYOUT_UNSPECIFIED";
      case ie2.AUDIO_CHANNEL_LAYOUT_STEREO:
        return "AUDIO_CHANNEL_LAYOUT_STEREO";
      default:
        throw new It.Error("Unrecognized enum value " + S2 + " for enum AudioChannelLayout");
    }
  }
  a420.audioChannelLayoutToJSON = ne2;
  function Z2(S2) {
    switch (S2) {
      case ie2.AUDIO_CHANNEL_LAYOUT_UNSPECIFIED:
        return 0;
      case ie2.AUDIO_CHANNEL_LAYOUT_STEREO:
        return 1;
      default:
        throw new It.Error("Unrecognized enum value " + S2 + " for enum AudioChannelLayout");
    }
  }
  a420.audioChannelLayoutToNumber = Z2;
  var de2;
  (function(S2) {
    S2.RENDERING_QUALITY_UNSPECIFIED = "RENDERING_QUALITY_UNSPECIFIED", S2.RENDERING_QUALITY_STANDARD = "RENDERING_QUALITY_STANDARD", S2.RENDERING_QUALITY_HIGH = "RENDERING_QUALITY_HIGH";
  })(de2 = a420.RenderingQuality || (a420.RenderingQuality = {}));
  function pe2(S2) {
    switch (S2) {
      case 0:
      case "RENDERING_QUALITY_UNSPECIFIED":
        return de2.RENDERING_QUALITY_UNSPECIFIED;
      case 1:
      case "RENDERING_QUALITY_STANDARD":
        return de2.RENDERING_QUALITY_STANDARD;
      case 2:
      case "RENDERING_QUALITY_HIGH":
        return de2.RENDERING_QUALITY_HIGH;
      default:
        throw new It.Error("Unrecognized enum value " + S2 + " for enum RenderingQuality");
    }
  }
  a420.renderingQualityFromJSON = pe2;
  function le2(S2) {
    switch (S2) {
      case de2.RENDERING_QUALITY_UNSPECIFIED:
        return "RENDERING_QUALITY_UNSPECIFIED";
      case de2.RENDERING_QUALITY_STANDARD:
        return "RENDERING_QUALITY_STANDARD";
      case de2.RENDERING_QUALITY_HIGH:
        return "RENDERING_QUALITY_HIGH";
      default:
        throw new It.Error("Unrecognized enum value " + S2 + " for enum RenderingQuality");
    }
  }
  a420.renderingQualityToJSON = le2;
  function be2(S2) {
    switch (S2) {
      case de2.RENDERING_QUALITY_UNSPECIFIED:
        return 0;
      case de2.RENDERING_QUALITY_STANDARD:
        return 1;
      case de2.RENDERING_QUALITY_HIGH:
        return 2;
      default:
        throw new It.Error("Unrecognized enum value " + S2 + " for enum RenderingQuality");
    }
  }
  a420.renderingQualityToNumber = be2;
  var ke2;
  (function(S2) {
    S2.VIDEO_CODEC_UNSPECIFIED = "VIDEO_CODEC_UNSPECIFIED", S2.VIDEO_CODEC_H264 = "VIDEO_CODEC_H264";
  })(ke2 = a420.VideoCodec || (a420.VideoCodec = {}));
  function Te2(S2) {
    switch (S2) {
      case 0:
      case "VIDEO_CODEC_UNSPECIFIED":
        return ke2.VIDEO_CODEC_UNSPECIFIED;
      case 1:
      case "VIDEO_CODEC_H264":
        return ke2.VIDEO_CODEC_H264;
      default:
        throw new It.Error("Unrecognized enum value " + S2 + " for enum VideoCodec");
    }
  }
  a420.videoCodecFromJSON = Te2;
  function q2(S2) {
    switch (S2) {
      case ke2.VIDEO_CODEC_UNSPECIFIED:
        return "VIDEO_CODEC_UNSPECIFIED";
      case ke2.VIDEO_CODEC_H264:
        return "VIDEO_CODEC_H264";
      default:
        throw new It.Error("Unrecognized enum value " + S2 + " for enum VideoCodec");
    }
  }
  a420.videoCodecToJSON = q2;
  function z2(S2) {
    switch (S2) {
      case ke2.VIDEO_CODEC_UNSPECIFIED:
        return 0;
      case ke2.VIDEO_CODEC_H264:
        return 1;
      default:
        throw new It.Error("Unrecognized enum value " + S2 + " for enum VideoCodec");
    }
  }
  a420.videoCodecToNumber = z2;
  var C2;
  (function(S2) {
    S2.VIDEO_CODEC_PROFILE_UNSPECIFIED = "VIDEO_CODEC_PROFILE_UNSPECIFIED", S2.VIDEO_CODEC_PROFILE_BASELINE = "VIDEO_CODEC_PROFILE_BASELINE", S2.VIDEO_CODEC_PROFILE_MAIN = "VIDEO_CODEC_PROFILE_MAIN", S2.VIDEO_CODEC_PROFILE_HIGH = "VIDEO_CODEC_PROFILE_HIGH";
  })(C2 = a420.VideoCodecProfile || (a420.VideoCodecProfile = {}));
  function b(S2) {
    switch (S2) {
      case 0:
      case "VIDEO_CODEC_PROFILE_UNSPECIFIED":
        return C2.VIDEO_CODEC_PROFILE_UNSPECIFIED;
      case 2:
      case "VIDEO_CODEC_PROFILE_BASELINE":
        return C2.VIDEO_CODEC_PROFILE_BASELINE;
      case 3:
      case "VIDEO_CODEC_PROFILE_MAIN":
        return C2.VIDEO_CODEC_PROFILE_MAIN;
      case 4:
      case "VIDEO_CODEC_PROFILE_HIGH":
        return C2.VIDEO_CODEC_PROFILE_HIGH;
      default:
        throw new It.Error("Unrecognized enum value " + S2 + " for enum VideoCodecProfile");
    }
  }
  a420.videoCodecProfileFromJSON = b;
  function E2(S2) {
    switch (S2) {
      case C2.VIDEO_CODEC_PROFILE_UNSPECIFIED:
        return "VIDEO_CODEC_PROFILE_UNSPECIFIED";
      case C2.VIDEO_CODEC_PROFILE_BASELINE:
        return "VIDEO_CODEC_PROFILE_BASELINE";
      case C2.VIDEO_CODEC_PROFILE_MAIN:
        return "VIDEO_CODEC_PROFILE_MAIN";
      case C2.VIDEO_CODEC_PROFILE_HIGH:
        return "VIDEO_CODEC_PROFILE_HIGH";
      default:
        throw new It.Error("Unrecognized enum value " + S2 + " for enum VideoCodecProfile");
    }
  }
  a420.videoCodecProfileToJSON = E2;
  function k(S2) {
    switch (S2) {
      case C2.VIDEO_CODEC_PROFILE_UNSPECIFIED:
        return 0;
      case C2.VIDEO_CODEC_PROFILE_BASELINE:
        return 2;
      case C2.VIDEO_CODEC_PROFILE_MAIN:
        return 3;
      case C2.VIDEO_CODEC_PROFILE_HIGH:
        return 4;
      default:
        throw new It.Error("Unrecognized enum value " + S2 + " for enum VideoCodecProfile");
    }
  }
  a420.videoCodecProfileToNumber = k;
  var O2;
  (function(S2) {
    S2.AUDIO_CODEC_UNSPECIFIED = "AUDIO_CODEC_UNSPECIFIED", S2.AUDIO_CODEC_AAC = "AUDIO_CODEC_AAC";
  })(O2 = a420.AudioCodec || (a420.AudioCodec = {}));
  function A2(S2) {
    switch (S2) {
      case 0:
      case "AUDIO_CODEC_UNSPECIFIED":
        return O2.AUDIO_CODEC_UNSPECIFIED;
      case 1:
      case "AUDIO_CODEC_AAC":
        return O2.AUDIO_CODEC_AAC;
      default:
        throw new It.Error("Unrecognized enum value " + S2 + " for enum AudioCodec");
    }
  }
  a420.audioCodecFromJSON = A2;
  function x2(S2) {
    switch (S2) {
      case O2.AUDIO_CODEC_UNSPECIFIED:
        return "AUDIO_CODEC_UNSPECIFIED";
      case O2.AUDIO_CODEC_AAC:
        return "AUDIO_CODEC_AAC";
      default:
        throw new It.Error("Unrecognized enum value " + S2 + " for enum AudioCodec");
    }
  }
  a420.audioCodecToJSON = x2;
  function Y2(S2) {
    switch (S2) {
      case O2.AUDIO_CODEC_UNSPECIFIED:
        return 0;
      case O2.AUDIO_CODEC_AAC:
        return 1;
      default:
        throw new It.Error("Unrecognized enum value " + S2 + " for enum AudioCodec");
    }
  }
  a420.audioCodecToNumber = Y2;
  var B2;
  (function(S2) {
    S2.VIDEO_CODEC_RATE_CONTROL_MODE_UNSPECIFIED = "VIDEO_CODEC_RATE_CONTROL_MODE_UNSPECIFIED", S2.VIDEO_CODEC_RATE_CONTROL_MODE_CBR = "VIDEO_CODEC_RATE_CONTROL_MODE_CBR";
  })(B2 = a420.VideoCodecRateControlMode || (a420.VideoCodecRateControlMode = {}));
  function T2(S2) {
    switch (S2) {
      case 0:
      case "VIDEO_CODEC_RATE_CONTROL_MODE_UNSPECIFIED":
        return B2.VIDEO_CODEC_RATE_CONTROL_MODE_UNSPECIFIED;
      case 1:
      case "VIDEO_CODEC_RATE_CONTROL_MODE_CBR":
        return B2.VIDEO_CODEC_RATE_CONTROL_MODE_CBR;
      default:
        throw new It.Error("Unrecognized enum value " + S2 + " for enum VideoCodecRateControlMode");
    }
  }
  a420.videoCodecRateControlModeFromJSON = T2;
  function D2(S2) {
    switch (S2) {
      case B2.VIDEO_CODEC_RATE_CONTROL_MODE_UNSPECIFIED:
        return "VIDEO_CODEC_RATE_CONTROL_MODE_UNSPECIFIED";
      case B2.VIDEO_CODEC_RATE_CONTROL_MODE_CBR:
        return "VIDEO_CODEC_RATE_CONTROL_MODE_CBR";
      default:
        throw new It.Error("Unrecognized enum value " + S2 + " for enum VideoCodecRateControlMode");
    }
  }
  a420.videoCodecRateControlModeToJSON = D2;
  function te2(S2) {
    switch (S2) {
      case B2.VIDEO_CODEC_RATE_CONTROL_MODE_UNSPECIFIED:
        return 0;
      case B2.VIDEO_CODEC_RATE_CONTROL_MODE_CBR:
        return 1;
      default:
        throw new It.Error("Unrecognized enum value " + S2 + " for enum VideoCodecRateControlMode");
    }
  }
  a420.videoCodecRateControlModeToNumber = te2;
  var me2;
  (function(S2) {
    S2.PROJECT_BROADCAST_PHASE_UNSPECIFIED = "PROJECT_BROADCAST_PHASE_UNSPECIFIED", S2.PROJECT_BROADCAST_PHASE_NOT_RUNNING = "PROJECT_BROADCAST_PHASE_NOT_RUNNING", S2.PROJECT_BROADCAST_PHASE_WAITING = "PROJECT_BROADCAST_PHASE_WAITING", S2.PROJECT_BROADCAST_PHASE_STARTING = "PROJECT_BROADCAST_PHASE_STARTING", S2.PROJECT_BROADCAST_PHASE_RUNNING = "PROJECT_BROADCAST_PHASE_RUNNING", S2.PROJECT_BROADCAST_PHASE_STOPPING = "PROJECT_BROADCAST_PHASE_STOPPING", S2.PROJECT_BROADCAST_PHASE_STOPPED = "PROJECT_BROADCAST_PHASE_STOPPED", S2.PROJECT_BROADCAST_PHASE_ARCHIVED = "PROJECT_BROADCAST_PHASE_ARCHIVED";
  })(me2 = a420.ProjectBroadcastPhase || (a420.ProjectBroadcastPhase = {}));
  function Ie2(S2) {
    switch (S2) {
      case 0:
      case "PROJECT_BROADCAST_PHASE_UNSPECIFIED":
        return me2.PROJECT_BROADCAST_PHASE_UNSPECIFIED;
      case 1:
      case "PROJECT_BROADCAST_PHASE_NOT_RUNNING":
        return me2.PROJECT_BROADCAST_PHASE_NOT_RUNNING;
      case 2:
      case "PROJECT_BROADCAST_PHASE_WAITING":
        return me2.PROJECT_BROADCAST_PHASE_WAITING;
      case 3:
      case "PROJECT_BROADCAST_PHASE_STARTING":
        return me2.PROJECT_BROADCAST_PHASE_STARTING;
      case 4:
      case "PROJECT_BROADCAST_PHASE_RUNNING":
        return me2.PROJECT_BROADCAST_PHASE_RUNNING;
      case 5:
      case "PROJECT_BROADCAST_PHASE_STOPPING":
        return me2.PROJECT_BROADCAST_PHASE_STOPPING;
      case 6:
      case "PROJECT_BROADCAST_PHASE_STOPPED":
        return me2.PROJECT_BROADCAST_PHASE_STOPPED;
      case 7:
      case "PROJECT_BROADCAST_PHASE_ARCHIVED":
        return me2.PROJECT_BROADCAST_PHASE_ARCHIVED;
      default:
        throw new It.Error("Unrecognized enum value " + S2 + " for enum ProjectBroadcastPhase");
    }
  }
  a420.projectBroadcastPhaseFromJSON = Ie2;
  function $e2(S2) {
    switch (S2) {
      case me2.PROJECT_BROADCAST_PHASE_UNSPECIFIED:
        return "PROJECT_BROADCAST_PHASE_UNSPECIFIED";
      case me2.PROJECT_BROADCAST_PHASE_NOT_RUNNING:
        return "PROJECT_BROADCAST_PHASE_NOT_RUNNING";
      case me2.PROJECT_BROADCAST_PHASE_WAITING:
        return "PROJECT_BROADCAST_PHASE_WAITING";
      case me2.PROJECT_BROADCAST_PHASE_STARTING:
        return "PROJECT_BROADCAST_PHASE_STARTING";
      case me2.PROJECT_BROADCAST_PHASE_RUNNING:
        return "PROJECT_BROADCAST_PHASE_RUNNING";
      case me2.PROJECT_BROADCAST_PHASE_STOPPING:
        return "PROJECT_BROADCAST_PHASE_STOPPING";
      case me2.PROJECT_BROADCAST_PHASE_STOPPED:
        return "PROJECT_BROADCAST_PHASE_STOPPED";
      case me2.PROJECT_BROADCAST_PHASE_ARCHIVED:
        return "PROJECT_BROADCAST_PHASE_ARCHIVED";
      default:
        throw new It.Error("Unrecognized enum value " + S2 + " for enum ProjectBroadcastPhase");
    }
  }
  a420.projectBroadcastPhaseToJSON = $e2;
  function ye2(S2) {
    switch (S2) {
      case me2.PROJECT_BROADCAST_PHASE_UNSPECIFIED:
        return 0;
      case me2.PROJECT_BROADCAST_PHASE_NOT_RUNNING:
        return 1;
      case me2.PROJECT_BROADCAST_PHASE_WAITING:
        return 2;
      case me2.PROJECT_BROADCAST_PHASE_STARTING:
        return 3;
      case me2.PROJECT_BROADCAST_PHASE_RUNNING:
        return 4;
      case me2.PROJECT_BROADCAST_PHASE_STOPPING:
        return 5;
      case me2.PROJECT_BROADCAST_PHASE_STOPPED:
        return 6;
      case me2.PROJECT_BROADCAST_PHASE_ARCHIVED:
        return 7;
      default:
        throw new It.Error("Unrecognized enum value " + S2 + " for enum ProjectBroadcastPhase");
    }
  }
  a420.projectBroadcastPhaseToNumber = ye2;
  var he2;
  (function(S2) {
    S2.S3ACL_UNSPECIFIED = "S3ACL_UNSPECIFIED", S2.S3ACL_PRIVATE = "S3ACL_PRIVATE", S2.S3ACL_PUBLIC_READ = "S3ACL_PUBLIC_READ", S2.S3ACL_PUBLIC_READ_WRITE = "S3ACL_PUBLIC_READ_WRITE", S2.S3ACL_AUTHENTICATED_READ = "S3ACL_AUTHENTICATED_READ", S2.S3ACL_BUCKET_OWNER_READ = "S3ACL_BUCKET_OWNER_READ", S2.S3ACL_BUCKET_OWNER_FULL_CONTROL = "S3ACL_BUCKET_OWNER_FULL_CONTROL";
  })(he2 = a420.S3ACL || (a420.S3ACL = {}));
  function Me2(S2) {
    switch (S2) {
      case 0:
      case "S3ACL_UNSPECIFIED":
        return he2.S3ACL_UNSPECIFIED;
      case 1:
      case "S3ACL_PRIVATE":
        return he2.S3ACL_PRIVATE;
      case 2:
      case "S3ACL_PUBLIC_READ":
        return he2.S3ACL_PUBLIC_READ;
      case 3:
      case "S3ACL_PUBLIC_READ_WRITE":
        return he2.S3ACL_PUBLIC_READ_WRITE;
      case 4:
      case "S3ACL_AUTHENTICATED_READ":
        return he2.S3ACL_AUTHENTICATED_READ;
      case 5:
      case "S3ACL_BUCKET_OWNER_READ":
        return he2.S3ACL_BUCKET_OWNER_READ;
      case 6:
      case "S3ACL_BUCKET_OWNER_FULL_CONTROL":
        return he2.S3ACL_BUCKET_OWNER_FULL_CONTROL;
      default:
        throw new It.Error("Unrecognized enum value " + S2 + " for enum S3ACL");
    }
  }
  a420.s3ACLFromJSON = Me2;
  function Ae2(S2) {
    switch (S2) {
      case he2.S3ACL_UNSPECIFIED:
        return "S3ACL_UNSPECIFIED";
      case he2.S3ACL_PRIVATE:
        return "S3ACL_PRIVATE";
      case he2.S3ACL_PUBLIC_READ:
        return "S3ACL_PUBLIC_READ";
      case he2.S3ACL_PUBLIC_READ_WRITE:
        return "S3ACL_PUBLIC_READ_WRITE";
      case he2.S3ACL_AUTHENTICATED_READ:
        return "S3ACL_AUTHENTICATED_READ";
      case he2.S3ACL_BUCKET_OWNER_READ:
        return "S3ACL_BUCKET_OWNER_READ";
      case he2.S3ACL_BUCKET_OWNER_FULL_CONTROL:
        return "S3ACL_BUCKET_OWNER_FULL_CONTROL";
      default:
        throw new It.Error("Unrecognized enum value " + S2 + " for enum S3ACL");
    }
  }
  a420.s3ACLToJSON = Ae2;
  function xe2(S2) {
    switch (S2) {
      case he2.S3ACL_UNSPECIFIED:
        return 0;
      case he2.S3ACL_PRIVATE:
        return 1;
      case he2.S3ACL_PUBLIC_READ:
        return 2;
      case he2.S3ACL_PUBLIC_READ_WRITE:
        return 3;
      case he2.S3ACL_AUTHENTICATED_READ:
        return 4;
      case he2.S3ACL_BUCKET_OWNER_READ:
        return 5;
      case he2.S3ACL_BUCKET_OWNER_FULL_CONTROL:
        return 6;
      default:
        throw new It.Error("Unrecognized enum value " + S2 + " for enum S3ACL");
    }
  }
  a420.s3ACLToNumber = xe2;
  var ae2;
  (function(S2) {
    S2.SOURCE_TRIGGER_ACTION_UNSPECIFIED = "SOURCE_TRIGGER_ACTION_UNSPECIFIED", S2.SOURCE_TRIGGER_ACTION_IGNORE = "SOURCE_TRIGGER_ACTION_IGNORE", S2.SOURCE_TRIGGER_ACTION_OR = "SOURCE_TRIGGER_ACTION_OR";
  })(ae2 = a420.SourceTriggerAction || (a420.SourceTriggerAction = {}));
  function N2(S2) {
    switch (S2) {
      case 0:
      case "SOURCE_TRIGGER_ACTION_UNSPECIFIED":
        return ae2.SOURCE_TRIGGER_ACTION_UNSPECIFIED;
      case 1:
      case "SOURCE_TRIGGER_ACTION_IGNORE":
        return ae2.SOURCE_TRIGGER_ACTION_IGNORE;
      case 3:
      case "SOURCE_TRIGGER_ACTION_OR":
        return ae2.SOURCE_TRIGGER_ACTION_OR;
      default:
        throw new It.Error("Unrecognized enum value " + S2 + " for enum SourceTriggerAction");
    }
  }
  a420.sourceTriggerActionFromJSON = N2;
  function re2(S2) {
    switch (S2) {
      case ae2.SOURCE_TRIGGER_ACTION_UNSPECIFIED:
        return "SOURCE_TRIGGER_ACTION_UNSPECIFIED";
      case ae2.SOURCE_TRIGGER_ACTION_IGNORE:
        return "SOURCE_TRIGGER_ACTION_IGNORE";
      case ae2.SOURCE_TRIGGER_ACTION_OR:
        return "SOURCE_TRIGGER_ACTION_OR";
      default:
        throw new It.Error("Unrecognized enum value " + S2 + " for enum SourceTriggerAction");
    }
  }
  a420.sourceTriggerActionToJSON = re2;
  function fe2(S2) {
    switch (S2) {
      case ae2.SOURCE_TRIGGER_ACTION_UNSPECIFIED:
        return 0;
      case ae2.SOURCE_TRIGGER_ACTION_IGNORE:
        return 1;
      case ae2.SOURCE_TRIGGER_ACTION_OR:
        return 3;
      default:
        throw new It.Error("Unrecognized enum value " + S2 + " for enum SourceTriggerAction");
    }
  }
  a420.sourceTriggerActionToNumber = fe2;
  var Ne2;
  (function(S2) {
    S2.REGION_UNSPECIFIED = "REGION_UNSPECIFIED", S2.REGION_US_EAST_1 = "REGION_US_EAST_1", S2.REGION_US_EAST_2 = "REGION_US_EAST_2", S2.REGION_US_WEST_1 = "REGION_US_WEST_1", S2.REGION_US_WEST_2 = "REGION_US_WEST_2", S2.REGION_US_CENTRAL_1 = "REGION_US_CENTRAL_1", S2.REGION_AP_SOUTHEAST_1 = "REGION_AP_SOUTHEAST_1", S2.REGION_AP_SOUTHEAST_2 = "REGION_AP_SOUTHEAST_2", S2.REGION_AP_SOUTH_1 = "REGION_AP_SOUTH_1", S2.REGION_CA_EAST_1 = "REGION_CA_EAST_1", S2.REGION_EU_CENTRAL_1 = "REGION_EU_CENTRAL_1", S2.REGION_EU_WEST_1 = "REGION_EU_WEST_1";
  })(Ne2 = a420.Region || (a420.Region = {}));
  function Oe2(S2) {
    switch (S2) {
      case 0:
      case "REGION_UNSPECIFIED":
        return Ne2.REGION_UNSPECIFIED;
      case 1:
      case "REGION_US_EAST_1":
        return Ne2.REGION_US_EAST_1;
      case 2:
      case "REGION_US_EAST_2":
        return Ne2.REGION_US_EAST_2;
      case 3:
      case "REGION_US_WEST_1":
        return Ne2.REGION_US_WEST_1;
      case 4:
      case "REGION_US_WEST_2":
        return Ne2.REGION_US_WEST_2;
      case 5:
      case "REGION_US_CENTRAL_1":
        return Ne2.REGION_US_CENTRAL_1;
      case 10:
      case "REGION_AP_SOUTHEAST_1":
        return Ne2.REGION_AP_SOUTHEAST_1;
      case 11:
      case "REGION_AP_SOUTHEAST_2":
        return Ne2.REGION_AP_SOUTHEAST_2;
      case 15:
      case "REGION_AP_SOUTH_1":
        return Ne2.REGION_AP_SOUTH_1;
      case 20:
      case "REGION_CA_EAST_1":
        return Ne2.REGION_CA_EAST_1;
      case 30:
      case "REGION_EU_CENTRAL_1":
        return Ne2.REGION_EU_CENTRAL_1;
      case 31:
      case "REGION_EU_WEST_1":
        return Ne2.REGION_EU_WEST_1;
      default:
        throw new It.Error("Unrecognized enum value " + S2 + " for enum Region");
    }
  }
  a420.regionFromJSON = Oe2;
  function qe2(S2) {
    switch (S2) {
      case Ne2.REGION_UNSPECIFIED:
        return "REGION_UNSPECIFIED";
      case Ne2.REGION_US_EAST_1:
        return "REGION_US_EAST_1";
      case Ne2.REGION_US_EAST_2:
        return "REGION_US_EAST_2";
      case Ne2.REGION_US_WEST_1:
        return "REGION_US_WEST_1";
      case Ne2.REGION_US_WEST_2:
        return "REGION_US_WEST_2";
      case Ne2.REGION_US_CENTRAL_1:
        return "REGION_US_CENTRAL_1";
      case Ne2.REGION_AP_SOUTHEAST_1:
        return "REGION_AP_SOUTHEAST_1";
      case Ne2.REGION_AP_SOUTHEAST_2:
        return "REGION_AP_SOUTHEAST_2";
      case Ne2.REGION_AP_SOUTH_1:
        return "REGION_AP_SOUTH_1";
      case Ne2.REGION_CA_EAST_1:
        return "REGION_CA_EAST_1";
      case Ne2.REGION_EU_CENTRAL_1:
        return "REGION_EU_CENTRAL_1";
      case Ne2.REGION_EU_WEST_1:
        return "REGION_EU_WEST_1";
      default:
        throw new It.Error("Unrecognized enum value " + S2 + " for enum Region");
    }
  }
  a420.regionToJSON = qe2;
  function je2(S2) {
    switch (S2) {
      case Ne2.REGION_UNSPECIFIED:
        return 0;
      case Ne2.REGION_US_EAST_1:
        return 1;
      case Ne2.REGION_US_EAST_2:
        return 2;
      case Ne2.REGION_US_WEST_1:
        return 3;
      case Ne2.REGION_US_WEST_2:
        return 4;
      case Ne2.REGION_US_CENTRAL_1:
        return 5;
      case Ne2.REGION_AP_SOUTHEAST_1:
        return 10;
      case Ne2.REGION_AP_SOUTHEAST_2:
        return 11;
      case Ne2.REGION_AP_SOUTH_1:
        return 15;
      case Ne2.REGION_CA_EAST_1:
        return 20;
      case Ne2.REGION_EU_CENTRAL_1:
        return 30;
      case Ne2.REGION_EU_WEST_1:
        return 31;
      default:
        throw new It.Error("Unrecognized enum value " + S2 + " for enum Region");
    }
  }
  a420.regionToNumber = je2;
  var Fe2;
  (function(S2) {
    S2.ROLE_UNSPECIFIED = "ROLE_UNSPECIFIED", S2.ROLE_HOST = "ROLE_HOST", S2.ROLE_COHOST = "ROLE_COHOST", S2.ROLE_CONTRIBUTOR = "ROLE_CONTRIBUTOR", S2.ROLE_GUEST = "ROLE_GUEST", S2.ROLE_VIEWER = "ROLE_VIEWER", S2.ROLE_RENDERER = "ROLE_RENDERER", S2.ROLE_PLATFORM = "ROLE_PLATFORM", S2.ROLE_IMPERSONATE = "ROLE_IMPERSONATE";
  })(Fe2 = a420.Role || (a420.Role = {}));
  function yt(S2) {
    switch (S2) {
      case 0:
      case "ROLE_UNSPECIFIED":
        return Fe2.ROLE_UNSPECIFIED;
      case 1:
      case "ROLE_HOST":
        return Fe2.ROLE_HOST;
      case 2:
      case "ROLE_COHOST":
        return Fe2.ROLE_COHOST;
      case 3:
      case "ROLE_CONTRIBUTOR":
        return Fe2.ROLE_CONTRIBUTOR;
      case 4:
      case "ROLE_GUEST":
        return Fe2.ROLE_GUEST;
      case 5:
      case "ROLE_VIEWER":
        return Fe2.ROLE_VIEWER;
      case 6:
      case "ROLE_RENDERER":
        return Fe2.ROLE_RENDERER;
      case 7:
      case "ROLE_PLATFORM":
        return Fe2.ROLE_PLATFORM;
      case 8:
      case "ROLE_IMPERSONATE":
        return Fe2.ROLE_IMPERSONATE;
      default:
        throw new It.Error("Unrecognized enum value " + S2 + " for enum Role");
    }
  }
  a420.roleFromJSON = yt;
  function Xe2(S2) {
    switch (S2) {
      case Fe2.ROLE_UNSPECIFIED:
        return "ROLE_UNSPECIFIED";
      case Fe2.ROLE_HOST:
        return "ROLE_HOST";
      case Fe2.ROLE_COHOST:
        return "ROLE_COHOST";
      case Fe2.ROLE_CONTRIBUTOR:
        return "ROLE_CONTRIBUTOR";
      case Fe2.ROLE_GUEST:
        return "ROLE_GUEST";
      case Fe2.ROLE_VIEWER:
        return "ROLE_VIEWER";
      case Fe2.ROLE_RENDERER:
        return "ROLE_RENDERER";
      case Fe2.ROLE_PLATFORM:
        return "ROLE_PLATFORM";
      case Fe2.ROLE_IMPERSONATE:
        return "ROLE_IMPERSONATE";
      default:
        throw new It.Error("Unrecognized enum value " + S2 + " for enum Role");
    }
  }
  a420.roleToJSON = Xe2;
  function Ge2(S2) {
    switch (S2) {
      case Fe2.ROLE_UNSPECIFIED:
        return 0;
      case Fe2.ROLE_HOST:
        return 1;
      case Fe2.ROLE_COHOST:
        return 2;
      case Fe2.ROLE_CONTRIBUTOR:
        return 3;
      case Fe2.ROLE_GUEST:
        return 4;
      case Fe2.ROLE_VIEWER:
        return 5;
      case Fe2.ROLE_RENDERER:
        return 6;
      case Fe2.ROLE_PLATFORM:
        return 7;
      case Fe2.ROLE_IMPERSONATE:
        return 8;
      default:
        throw new It.Error("Unrecognized enum value " + S2 + " for enum Role");
    }
  }
  a420.roleToNumber = Ge2;
  var V2;
  (function(S2) {
    S2.PROJECT_BROADCAST_ERROR_UNSPECIFIED = "PROJECT_BROADCAST_ERROR_UNSPECIFIED", S2.PROJECT_BROADCAST_ERROR_INTERNAL = "PROJECT_BROADCAST_ERROR_INTERNAL", S2.PROJECT_BROADCAST_ERROR_DURATION_EXCEEDED = "PROJECT_BROADCAST_ERROR_DURATION_EXCEEDED";
  })(V2 = a420.ProjectBroadcastError || (a420.ProjectBroadcastError = {}));
  function ge2(S2) {
    switch (S2) {
      case 0:
      case "PROJECT_BROADCAST_ERROR_UNSPECIFIED":
        return V2.PROJECT_BROADCAST_ERROR_UNSPECIFIED;
      case 1:
      case "PROJECT_BROADCAST_ERROR_INTERNAL":
        return V2.PROJECT_BROADCAST_ERROR_INTERNAL;
      case 2:
      case "PROJECT_BROADCAST_ERROR_DURATION_EXCEEDED":
        return V2.PROJECT_BROADCAST_ERROR_DURATION_EXCEEDED;
      default:
        throw new It.Error("Unrecognized enum value " + S2 + " for enum ProjectBroadcastError");
    }
  }
  a420.projectBroadcastErrorFromJSON = ge2;
  function we2(S2) {
    switch (S2) {
      case V2.PROJECT_BROADCAST_ERROR_UNSPECIFIED:
        return "PROJECT_BROADCAST_ERROR_UNSPECIFIED";
      case V2.PROJECT_BROADCAST_ERROR_INTERNAL:
        return "PROJECT_BROADCAST_ERROR_INTERNAL";
      case V2.PROJECT_BROADCAST_ERROR_DURATION_EXCEEDED:
        return "PROJECT_BROADCAST_ERROR_DURATION_EXCEEDED";
      default:
        throw new It.Error("Unrecognized enum value " + S2 + " for enum ProjectBroadcastError");
    }
  }
  a420.projectBroadcastErrorToJSON = we2;
  function We2(S2) {
    switch (S2) {
      case V2.PROJECT_BROADCAST_ERROR_UNSPECIFIED:
        return 0;
      case V2.PROJECT_BROADCAST_ERROR_INTERNAL:
        return 1;
      case V2.PROJECT_BROADCAST_ERROR_DURATION_EXCEEDED:
        return 2;
      default:
        throw new It.Error("Unrecognized enum value " + S2 + " for enum ProjectBroadcastError");
    }
  }
  a420.projectBroadcastErrorToNumber = We2;
  var Re2;
  (function(S2) {
    S2.CONNECT_STATE_UNSPECIFIED = "CONNECT_STATE_UNSPECIFIED", S2.CONNECT_STATE_CONNECTED = "CONNECT_STATE_CONNECTED", S2.CONNECT_STATE_DISCONNECTED = "CONNECT_STATE_DISCONNECTED";
  })(Re2 = a420.ConnectState || (a420.ConnectState = {}));
  function J2(S2) {
    switch (S2) {
      case 0:
      case "CONNECT_STATE_UNSPECIFIED":
        return Re2.CONNECT_STATE_UNSPECIFIED;
      case 1:
      case "CONNECT_STATE_CONNECTED":
        return Re2.CONNECT_STATE_CONNECTED;
      case 2:
      case "CONNECT_STATE_DISCONNECTED":
        return Re2.CONNECT_STATE_DISCONNECTED;
      default:
        throw new It.Error("Unrecognized enum value " + S2 + " for enum ConnectState");
    }
  }
  a420.connectStateFromJSON = J2;
  function _e(S2) {
    switch (S2) {
      case Re2.CONNECT_STATE_UNSPECIFIED:
        return "CONNECT_STATE_UNSPECIFIED";
      case Re2.CONNECT_STATE_CONNECTED:
        return "CONNECT_STATE_CONNECTED";
      case Re2.CONNECT_STATE_DISCONNECTED:
        return "CONNECT_STATE_DISCONNECTED";
      default:
        throw new It.Error("Unrecognized enum value " + S2 + " for enum ConnectState");
    }
  }
  a420.connectStateToJSON = _e;
  function ue2(S2) {
    switch (S2) {
      case Re2.CONNECT_STATE_UNSPECIFIED:
        return 0;
      case Re2.CONNECT_STATE_CONNECTED:
        return 1;
      case Re2.CONNECT_STATE_DISCONNECTED:
        return 2;
      default:
        throw new It.Error("Unrecognized enum value " + S2 + " for enum ConnectState");
    }
  }
  a420.connectStateToNumber = ue2;
  var ce2;
  (function(S2) {
    S2.EVENT_SUB_TYPE_UNSPECIFIED = "EVENT_SUB_TYPE_UNSPECIFIED", S2.EVENT_SUB_TYPE_CREATE = "EVENT_SUB_TYPE_CREATE", S2.EVENT_SUB_TYPE_UPDATE = "EVENT_SUB_TYPE_UPDATE", S2.EVENT_SUB_TYPE_DELETE = "EVENT_SUB_TYPE_DELETE", S2.EVENT_SUB_TYPE_ADD = "EVENT_SUB_TYPE_ADD", S2.EVENT_SUB_TYPE_REMOVE = "EVENT_SUB_TYPE_REMOVE", S2.EVENT_SUB_TYPE_STATE = "EVENT_SUB_TYPE_STATE";
  })(ce2 = a420.EventSubType || (a420.EventSubType = {}));
  function ve2(S2) {
    switch (S2) {
      case 0:
      case "EVENT_SUB_TYPE_UNSPECIFIED":
        return ce2.EVENT_SUB_TYPE_UNSPECIFIED;
      case 1:
      case "EVENT_SUB_TYPE_CREATE":
        return ce2.EVENT_SUB_TYPE_CREATE;
      case 2:
      case "EVENT_SUB_TYPE_UPDATE":
        return ce2.EVENT_SUB_TYPE_UPDATE;
      case 3:
      case "EVENT_SUB_TYPE_DELETE":
        return ce2.EVENT_SUB_TYPE_DELETE;
      case 4:
      case "EVENT_SUB_TYPE_ADD":
        return ce2.EVENT_SUB_TYPE_ADD;
      case 5:
      case "EVENT_SUB_TYPE_REMOVE":
        return ce2.EVENT_SUB_TYPE_REMOVE;
      case 6:
      case "EVENT_SUB_TYPE_STATE":
        return ce2.EVENT_SUB_TYPE_STATE;
      default:
        throw new It.Error("Unrecognized enum value " + S2 + " for enum EventSubType");
    }
  }
  a420.eventSubTypeFromJSON = ve2;
  function Ce2(S2) {
    switch (S2) {
      case ce2.EVENT_SUB_TYPE_UNSPECIFIED:
        return "EVENT_SUB_TYPE_UNSPECIFIED";
      case ce2.EVENT_SUB_TYPE_CREATE:
        return "EVENT_SUB_TYPE_CREATE";
      case ce2.EVENT_SUB_TYPE_UPDATE:
        return "EVENT_SUB_TYPE_UPDATE";
      case ce2.EVENT_SUB_TYPE_DELETE:
        return "EVENT_SUB_TYPE_DELETE";
      case ce2.EVENT_SUB_TYPE_ADD:
        return "EVENT_SUB_TYPE_ADD";
      case ce2.EVENT_SUB_TYPE_REMOVE:
        return "EVENT_SUB_TYPE_REMOVE";
      case ce2.EVENT_SUB_TYPE_STATE:
        return "EVENT_SUB_TYPE_STATE";
      default:
        throw new It.Error("Unrecognized enum value " + S2 + " for enum EventSubType");
    }
  }
  a420.eventSubTypeToJSON = Ce2;
  function Be2(S2) {
    switch (S2) {
      case ce2.EVENT_SUB_TYPE_UNSPECIFIED:
        return 0;
      case ce2.EVENT_SUB_TYPE_CREATE:
        return 1;
      case ce2.EVENT_SUB_TYPE_UPDATE:
        return 2;
      case ce2.EVENT_SUB_TYPE_DELETE:
        return 3;
      case ce2.EVENT_SUB_TYPE_ADD:
        return 4;
      case ce2.EVENT_SUB_TYPE_REMOVE:
        return 5;
      case ce2.EVENT_SUB_TYPE_STATE:
        return 6;
      default:
        throw new It.Error("Unrecognized enum value " + S2 + " for enum EventSubType");
    }
  }
  a420.eventSubTypeToNumber = Be2;
  var He2;
  (function(S2) {
    S2.EVENT_TYPE_UNSPECIFIED = "EVENT_TYPE_UNSPECIFIED", S2.EVENT_TYPE_COLLECTION = "EVENT_TYPE_COLLECTION", S2.EVENT_TYPE_PROJECT = "EVENT_TYPE_PROJECT", S2.EVENT_TYPE_SOURCE = "EVENT_TYPE_SOURCE", S2.EVENT_TYPE_DESTINATION = "EVENT_TYPE_DESTINATION";
  })(He2 = a420.EventType || (a420.EventType = {}));
  function Ve2(S2) {
    switch (S2) {
      case 0:
      case "EVENT_TYPE_UNSPECIFIED":
        return He2.EVENT_TYPE_UNSPECIFIED;
      case 1:
      case "EVENT_TYPE_COLLECTION":
        return He2.EVENT_TYPE_COLLECTION;
      case 2:
      case "EVENT_TYPE_PROJECT":
        return He2.EVENT_TYPE_PROJECT;
      case 4:
      case "EVENT_TYPE_SOURCE":
        return He2.EVENT_TYPE_SOURCE;
      case 5:
      case "EVENT_TYPE_DESTINATION":
        return He2.EVENT_TYPE_DESTINATION;
      default:
        throw new It.Error("Unrecognized enum value " + S2 + " for enum EventType");
    }
  }
  a420.eventTypeFromJSON = Ve2;
  function Ze2(S2) {
    switch (S2) {
      case He2.EVENT_TYPE_UNSPECIFIED:
        return "EVENT_TYPE_UNSPECIFIED";
      case He2.EVENT_TYPE_COLLECTION:
        return "EVENT_TYPE_COLLECTION";
      case He2.EVENT_TYPE_PROJECT:
        return "EVENT_TYPE_PROJECT";
      case He2.EVENT_TYPE_SOURCE:
        return "EVENT_TYPE_SOURCE";
      case He2.EVENT_TYPE_DESTINATION:
        return "EVENT_TYPE_DESTINATION";
      default:
        throw new It.Error("Unrecognized enum value " + S2 + " for enum EventType");
    }
  }
  a420.eventTypeToJSON = Ze2;
  function Ke2(S2) {
    switch (S2) {
      case He2.EVENT_TYPE_UNSPECIFIED:
        return 0;
      case He2.EVENT_TYPE_COLLECTION:
        return 1;
      case He2.EVENT_TYPE_PROJECT:
        return 2;
      case He2.EVENT_TYPE_SOURCE:
        return 4;
      case He2.EVENT_TYPE_DESTINATION:
        return 5;
      default:
        throw new It.Error("Unrecognized enum value " + S2 + " for enum EventType");
    }
  }
  a420.eventTypeToNumber = Ke2;
  function U2() {
    return { height: void 0, width: void 0, framerate: void 0, colorSpace: void 0 };
  }
  a420.VideoRendering = { encode(S2, M2 = c.default.Writer.create()) {
    return S2.height !== void 0 && M2.uint32(8).uint32(S2.height), S2.width !== void 0 && M2.uint32(16).uint32(S2.width), S2.framerate !== void 0 && M2.uint32(29).float(S2.framerate), S2.colorSpace !== void 0 && M2.uint32(32).int32(X2(S2.colorSpace)), M2;
  }, decode(S2, M2) {
    const L2 = S2 instanceof c.default.Reader ? S2 : new c.default.Reader(S2);
    let Ee2 = M2 === void 0 ? L2.len : L2.pos + M2;
    const oe2 = U2();
    for (; L2.pos < Ee2; ) {
      const Pe2 = L2.uint32();
      switch (Pe2 >>> 3) {
        case 1:
          oe2.height = L2.uint32();
          break;
        case 2:
          oe2.width = L2.uint32();
          break;
        case 3:
          oe2.framerate = L2.float();
          break;
        case 4:
          oe2.colorSpace = j(L2.int32());
          break;
        default:
          L2.skipType(Pe2 & 7);
          break;
      }
    }
    return oe2;
  }, fromJSON(S2) {
    return { height: Le2(S2.height) ? Number(S2.height) : void 0, width: Le2(S2.width) ? Number(S2.width) : void 0, framerate: Le2(S2.framerate) ? Number(S2.framerate) : void 0, colorSpace: Le2(S2.colorSpace) ? j(S2.colorSpace) : void 0 };
  }, toJSON(S2) {
    const M2 = {};
    return S2.height !== void 0 && (M2.height = Math.round(S2.height)), S2.width !== void 0 && (M2.width = Math.round(S2.width)), S2.framerate !== void 0 && (M2.framerate = S2.framerate), S2.colorSpace !== void 0 && (M2.colorSpace = S2.colorSpace !== void 0 ? ee2(S2.colorSpace) : void 0), M2;
  }, fromPartial(S2) {
    var M2, L2, Ee2, oe2;
    const Pe2 = U2();
    return Pe2.height = (M2 = S2.height) !== null && M2 !== void 0 ? M2 : void 0, Pe2.width = (L2 = S2.width) !== null && L2 !== void 0 ? L2 : void 0, Pe2.framerate = (Ee2 = S2.framerate) !== null && Ee2 !== void 0 ? Ee2 : void 0, Pe2.colorSpace = (oe2 = S2.colorSpace) !== null && oe2 !== void 0 ? oe2 : void 0, Pe2;
  } };
  function se2() {
    return { channelLayout: void 0 };
  }
  a420.AudioRendering = { encode(S2, M2 = c.default.Writer.create()) {
    return S2.channelLayout !== void 0 && M2.uint32(8).int32(Z2(S2.channelLayout)), M2;
  }, decode(S2, M2) {
    const L2 = S2 instanceof c.default.Reader ? S2 : new c.default.Reader(S2);
    let Ee2 = M2 === void 0 ? L2.len : L2.pos + M2;
    const oe2 = se2();
    for (; L2.pos < Ee2; ) {
      const Pe2 = L2.uint32();
      switch (Pe2 >>> 3) {
        case 1:
          oe2.channelLayout = Q2(L2.int32());
          break;
        default:
          L2.skipType(Pe2 & 7);
          break;
      }
    }
    return oe2;
  }, fromJSON(S2) {
    return { channelLayout: Le2(S2.channelLayout) ? Q2(S2.channelLayout) : void 0 };
  }, toJSON(S2) {
    const M2 = {};
    return S2.channelLayout !== void 0 && (M2.channelLayout = S2.channelLayout !== void 0 ? ne2(S2.channelLayout) : void 0), M2;
  }, fromPartial(S2) {
    var M2;
    const L2 = se2();
    return L2.channelLayout = (M2 = S2.channelLayout) !== null && M2 !== void 0 ? M2 : void 0, L2;
  } };
  function Se2() {
    return { video: void 0, audio: void 0, quality: void 0, targetLatency: void 0, complexity: void 0 };
  }
  a420.Rendering = { encode(S2, M2 = c.default.Writer.create()) {
    return S2.video !== void 0 && a420.VideoRendering.encode(S2.video, M2.uint32(10).fork()).ldelim(), S2.audio !== void 0 && a420.AudioRendering.encode(S2.audio, M2.uint32(18).fork()).ldelim(), S2.quality !== void 0 && M2.uint32(24).int32(be2(S2.quality)), S2.targetLatency !== void 0 && M2.uint32(32).uint32(S2.targetLatency), S2.complexity !== void 0 && M2.uint32(40).int32(S2.complexity), M2;
  }, decode(S2, M2) {
    const L2 = S2 instanceof c.default.Reader ? S2 : new c.default.Reader(S2);
    let Ee2 = M2 === void 0 ? L2.len : L2.pos + M2;
    const oe2 = Se2();
    for (; L2.pos < Ee2; ) {
      const Pe2 = L2.uint32();
      switch (Pe2 >>> 3) {
        case 1:
          oe2.video = a420.VideoRendering.decode(L2, L2.uint32());
          break;
        case 2:
          oe2.audio = a420.AudioRendering.decode(L2, L2.uint32());
          break;
        case 3:
          oe2.quality = pe2(L2.int32());
          break;
        case 4:
          oe2.targetLatency = L2.uint32();
          break;
        case 5:
          oe2.complexity = L2.int32();
          break;
        default:
          L2.skipType(Pe2 & 7);
          break;
      }
    }
    return oe2;
  }, fromJSON(S2) {
    return { video: Le2(S2.video) ? a420.VideoRendering.fromJSON(S2.video) : void 0, audio: Le2(S2.audio) ? a420.AudioRendering.fromJSON(S2.audio) : void 0, quality: Le2(S2.quality) ? pe2(S2.quality) : void 0, targetLatency: Le2(S2.targetLatency) ? Number(S2.targetLatency) : void 0, complexity: Le2(S2.complexity) ? Number(S2.complexity) : void 0 };
  }, toJSON(S2) {
    const M2 = {};
    return S2.video !== void 0 && (M2.video = S2.video ? a420.VideoRendering.toJSON(S2.video) : void 0), S2.audio !== void 0 && (M2.audio = S2.audio ? a420.AudioRendering.toJSON(S2.audio) : void 0), S2.quality !== void 0 && (M2.quality = S2.quality !== void 0 ? le2(S2.quality) : void 0), S2.targetLatency !== void 0 && (M2.targetLatency = Math.round(S2.targetLatency)), S2.complexity !== void 0 && (M2.complexity = Math.round(S2.complexity)), M2;
  }, fromPartial(S2) {
    var M2, L2, Ee2;
    const oe2 = Se2();
    return oe2.video = S2.video !== void 0 && S2.video !== null ? a420.VideoRendering.fromPartial(S2.video) : void 0, oe2.audio = S2.audio !== void 0 && S2.audio !== null ? a420.AudioRendering.fromPartial(S2.audio) : void 0, oe2.quality = (M2 = S2.quality) !== null && M2 !== void 0 ? M2 : void 0, oe2.targetLatency = (L2 = S2.targetLatency) !== null && L2 !== void 0 ? L2 : void 0, oe2.complexity = (Ee2 = S2.complexity) !== null && Ee2 !== void 0 ? Ee2 : void 0, oe2;
  } };
  function Ue2() {
    return { mode: void 0, targetBitrate: void 0, maxKeyFrameInterval: void 0 };
  }
  a420.VideoCodecRateControl = { encode(S2, M2 = c.default.Writer.create()) {
    return S2.mode !== void 0 && M2.uint32(8).int32(te2(S2.mode)), S2.targetBitrate !== void 0 && M2.uint32(16).uint32(S2.targetBitrate), S2.maxKeyFrameInterval !== void 0 && M2.uint32(24).uint32(S2.maxKeyFrameInterval), M2;
  }, decode(S2, M2) {
    const L2 = S2 instanceof c.default.Reader ? S2 : new c.default.Reader(S2);
    let Ee2 = M2 === void 0 ? L2.len : L2.pos + M2;
    const oe2 = Ue2();
    for (; L2.pos < Ee2; ) {
      const Pe2 = L2.uint32();
      switch (Pe2 >>> 3) {
        case 1:
          oe2.mode = T2(L2.int32());
          break;
        case 2:
          oe2.targetBitrate = L2.uint32();
          break;
        case 3:
          oe2.maxKeyFrameInterval = L2.uint32();
          break;
        default:
          L2.skipType(Pe2 & 7);
          break;
      }
    }
    return oe2;
  }, fromJSON(S2) {
    return { mode: Le2(S2.mode) ? T2(S2.mode) : void 0, targetBitrate: Le2(S2.targetBitrate) ? Number(S2.targetBitrate) : void 0, maxKeyFrameInterval: Le2(S2.maxKeyFrameInterval) ? Number(S2.maxKeyFrameInterval) : void 0 };
  }, toJSON(S2) {
    const M2 = {};
    return S2.mode !== void 0 && (M2.mode = S2.mode !== void 0 ? D2(S2.mode) : void 0), S2.targetBitrate !== void 0 && (M2.targetBitrate = Math.round(S2.targetBitrate)), S2.maxKeyFrameInterval !== void 0 && (M2.maxKeyFrameInterval = Math.round(S2.maxKeyFrameInterval)), M2;
  }, fromPartial(S2) {
    var M2, L2, Ee2;
    const oe2 = Ue2();
    return oe2.mode = (M2 = S2.mode) !== null && M2 !== void 0 ? M2 : void 0, oe2.targetBitrate = (L2 = S2.targetBitrate) !== null && L2 !== void 0 ? L2 : void 0, oe2.maxKeyFrameInterval = (Ee2 = S2.maxKeyFrameInterval) !== null && Ee2 !== void 0 ? Ee2 : void 0, oe2;
  } };
  function De2() {
    return { codec: void 0, rateControl: void 0, profile: void 0 };
  }
  a420.VideoEncoding = { encode(S2, M2 = c.default.Writer.create()) {
    return S2.codec !== void 0 && M2.uint32(8).int32(z2(S2.codec)), S2.rateControl !== void 0 && a420.VideoCodecRateControl.encode(S2.rateControl, M2.uint32(18).fork()).ldelim(), S2.profile !== void 0 && M2.uint32(32).int32(k(S2.profile)), M2;
  }, decode(S2, M2) {
    const L2 = S2 instanceof c.default.Reader ? S2 : new c.default.Reader(S2);
    let Ee2 = M2 === void 0 ? L2.len : L2.pos + M2;
    const oe2 = De2();
    for (; L2.pos < Ee2; ) {
      const Pe2 = L2.uint32();
      switch (Pe2 >>> 3) {
        case 1:
          oe2.codec = Te2(L2.int32());
          break;
        case 2:
          oe2.rateControl = a420.VideoCodecRateControl.decode(L2, L2.uint32());
          break;
        case 4:
          oe2.profile = b(L2.int32());
          break;
        default:
          L2.skipType(Pe2 & 7);
          break;
      }
    }
    return oe2;
  }, fromJSON(S2) {
    return { codec: Le2(S2.codec) ? Te2(S2.codec) : void 0, rateControl: Le2(S2.rateControl) ? a420.VideoCodecRateControl.fromJSON(S2.rateControl) : void 0, profile: Le2(S2.profile) ? b(S2.profile) : void 0 };
  }, toJSON(S2) {
    const M2 = {};
    return S2.codec !== void 0 && (M2.codec = S2.codec !== void 0 ? q2(S2.codec) : void 0), S2.rateControl !== void 0 && (M2.rateControl = S2.rateControl ? a420.VideoCodecRateControl.toJSON(S2.rateControl) : void 0), S2.profile !== void 0 && (M2.profile = S2.profile !== void 0 ? E2(S2.profile) : void 0), M2;
  }, fromPartial(S2) {
    var M2, L2;
    const Ee2 = De2();
    return Ee2.codec = (M2 = S2.codec) !== null && M2 !== void 0 ? M2 : void 0, Ee2.rateControl = S2.rateControl !== void 0 && S2.rateControl !== null ? a420.VideoCodecRateControl.fromPartial(S2.rateControl) : void 0, Ee2.profile = (L2 = S2.profile) !== null && L2 !== void 0 ? L2 : void 0, Ee2;
  } };
  function Ye2() {
    return { codec: void 0 };
  }
  a420.AudioEncoding = { encode(S2, M2 = c.default.Writer.create()) {
    return S2.codec !== void 0 && M2.uint32(8).int32(Y2(S2.codec)), M2;
  }, decode(S2, M2) {
    const L2 = S2 instanceof c.default.Reader ? S2 : new c.default.Reader(S2);
    let Ee2 = M2 === void 0 ? L2.len : L2.pos + M2;
    const oe2 = Ye2();
    for (; L2.pos < Ee2; ) {
      const Pe2 = L2.uint32();
      switch (Pe2 >>> 3) {
        case 1:
          oe2.codec = A2(L2.int32());
          break;
        default:
          L2.skipType(Pe2 & 7);
          break;
      }
    }
    return oe2;
  }, fromJSON(S2) {
    return { codec: Le2(S2.codec) ? A2(S2.codec) : void 0 };
  }, toJSON(S2) {
    const M2 = {};
    return S2.codec !== void 0 && (M2.codec = S2.codec !== void 0 ? x2(S2.codec) : void 0), M2;
  }, fromPartial(S2) {
    var M2;
    const L2 = Ye2();
    return L2.codec = (M2 = S2.codec) !== null && M2 !== void 0 ? M2 : void 0, L2;
  } };
  function Qe2() {
    return { video: void 0, audio: void 0 };
  }
  a420.Encoding = { encode(S2, M2 = c.default.Writer.create()) {
    return S2.video !== void 0 && a420.VideoEncoding.encode(S2.video, M2.uint32(10).fork()).ldelim(), S2.audio !== void 0 && a420.AudioEncoding.encode(S2.audio, M2.uint32(18).fork()).ldelim(), M2;
  }, decode(S2, M2) {
    const L2 = S2 instanceof c.default.Reader ? S2 : new c.default.Reader(S2);
    let Ee2 = M2 === void 0 ? L2.len : L2.pos + M2;
    const oe2 = Qe2();
    for (; L2.pos < Ee2; ) {
      const Pe2 = L2.uint32();
      switch (Pe2 >>> 3) {
        case 1:
          oe2.video = a420.VideoEncoding.decode(L2, L2.uint32());
          break;
        case 2:
          oe2.audio = a420.AudioEncoding.decode(L2, L2.uint32());
          break;
        default:
          L2.skipType(Pe2 & 7);
          break;
      }
    }
    return oe2;
  }, fromJSON(S2) {
    return { video: Le2(S2.video) ? a420.VideoEncoding.fromJSON(S2.video) : void 0, audio: Le2(S2.audio) ? a420.AudioEncoding.fromJSON(S2.audio) : void 0 };
  }, toJSON(S2) {
    const M2 = {};
    return S2.video !== void 0 && (M2.video = S2.video ? a420.VideoEncoding.toJSON(S2.video) : void 0), S2.audio !== void 0 && (M2.audio = S2.audio ? a420.AudioEncoding.toJSON(S2.audio) : void 0), M2;
  }, fromPartial(S2) {
    const M2 = Qe2();
    return M2.video = S2.video !== void 0 && S2.video !== null ? a420.VideoEncoding.fromPartial(S2.video) : void 0, M2.audio = S2.audio !== void 0 && S2.audio !== null ? a420.AudioEncoding.fromPartial(S2.audio) : void 0, M2;
  } };
  function st() {
    return { enabled: void 0, key: void 0, url: void 0, baseUrl: void 0, previewUrl: void 0, ingestId: void 0, secure: void 0, ingestType: void 0 };
  }
  a420.SourceRtmpPushAddress = { encode(S2, M2 = c.default.Writer.create()) {
    return S2.enabled !== void 0 && M2.uint32(8).bool(S2.enabled), S2.key !== void 0 && M2.uint32(18).string(S2.key), S2.url !== void 0 && M2.uint32(26).string(S2.url), S2.baseUrl !== void 0 && M2.uint32(34).string(S2.baseUrl), S2.previewUrl !== void 0 && M2.uint32(42).string(S2.previewUrl), S2.ingestId !== void 0 && M2.uint32(50).string(S2.ingestId), S2.secure !== void 0 && M2.uint32(56).bool(S2.secure), S2.ingestType !== void 0 && M2.uint32(66).string(S2.ingestType), M2;
  }, decode(S2, M2) {
    const L2 = S2 instanceof c.default.Reader ? S2 : new c.default.Reader(S2);
    let Ee2 = M2 === void 0 ? L2.len : L2.pos + M2;
    const oe2 = st();
    for (; L2.pos < Ee2; ) {
      const Pe2 = L2.uint32();
      switch (Pe2 >>> 3) {
        case 1:
          oe2.enabled = L2.bool();
          break;
        case 2:
          oe2.key = L2.string();
          break;
        case 3:
          oe2.url = L2.string();
          break;
        case 4:
          oe2.baseUrl = L2.string();
          break;
        case 5:
          oe2.previewUrl = L2.string();
          break;
        case 6:
          oe2.ingestId = L2.string();
          break;
        case 7:
          oe2.secure = L2.bool();
          break;
        case 8:
          oe2.ingestType = L2.string();
          break;
        default:
          L2.skipType(Pe2 & 7);
          break;
      }
    }
    return oe2;
  }, fromJSON(S2) {
    return { enabled: Le2(S2.enabled) ? !!S2.enabled : void 0, key: Le2(S2.key) ? String(S2.key) : void 0, url: Le2(S2.url) ? String(S2.url) : void 0, baseUrl: Le2(S2.baseUrl) ? String(S2.baseUrl) : void 0, previewUrl: Le2(S2.previewUrl) ? String(S2.previewUrl) : void 0, ingestId: Le2(S2.ingestId) ? String(S2.ingestId) : void 0, secure: Le2(S2.secure) ? !!S2.secure : void 0, ingestType: Le2(S2.ingestType) ? String(S2.ingestType) : void 0 };
  }, toJSON(S2) {
    const M2 = {};
    return S2.enabled !== void 0 && (M2.enabled = S2.enabled), S2.key !== void 0 && (M2.key = S2.key), S2.url !== void 0 && (M2.url = S2.url), S2.baseUrl !== void 0 && (M2.baseUrl = S2.baseUrl), S2.previewUrl !== void 0 && (M2.previewUrl = S2.previewUrl), S2.ingestId !== void 0 && (M2.ingestId = S2.ingestId), S2.secure !== void 0 && (M2.secure = S2.secure), S2.ingestType !== void 0 && (M2.ingestType = S2.ingestType), M2;
  }, fromPartial(S2) {
    var M2, L2, Ee2, oe2, Pe2, bt, At, Dt;
    const Lt = st();
    return Lt.enabled = (M2 = S2.enabled) !== null && M2 !== void 0 ? M2 : void 0, Lt.key = (L2 = S2.key) !== null && L2 !== void 0 ? L2 : void 0, Lt.url = (Ee2 = S2.url) !== null && Ee2 !== void 0 ? Ee2 : void 0, Lt.baseUrl = (oe2 = S2.baseUrl) !== null && oe2 !== void 0 ? oe2 : void 0, Lt.previewUrl = (Pe2 = S2.previewUrl) !== null && Pe2 !== void 0 ? Pe2 : void 0, Lt.ingestId = (bt = S2.ingestId) !== null && bt !== void 0 ? bt : void 0, Lt.secure = (At = S2.secure) !== null && At !== void 0 ? At : void 0, Lt.ingestType = (Dt = S2.ingestType) !== null && Dt !== void 0 ? Dt : void 0, Lt;
  } };
  function St() {
    return { enabled: void 0, streamId: void 0, url: void 0, baseUrl: void 0, previewUrl: void 0, ingestId: void 0, ingestType: void 0 };
  }
  a420.SrtPushAddress = { encode(S2, M2 = c.default.Writer.create()) {
    return S2.enabled !== void 0 && M2.uint32(8).bool(S2.enabled), S2.streamId !== void 0 && M2.uint32(18).string(S2.streamId), S2.url !== void 0 && M2.uint32(26).string(S2.url), S2.baseUrl !== void 0 && M2.uint32(34).string(S2.baseUrl), S2.previewUrl !== void 0 && M2.uint32(42).string(S2.previewUrl), S2.ingestId !== void 0 && M2.uint32(50).string(S2.ingestId), S2.ingestType !== void 0 && M2.uint32(58).string(S2.ingestType), M2;
  }, decode(S2, M2) {
    const L2 = S2 instanceof c.default.Reader ? S2 : new c.default.Reader(S2);
    let Ee2 = M2 === void 0 ? L2.len : L2.pos + M2;
    const oe2 = St();
    for (; L2.pos < Ee2; ) {
      const Pe2 = L2.uint32();
      switch (Pe2 >>> 3) {
        case 1:
          oe2.enabled = L2.bool();
          break;
        case 2:
          oe2.streamId = L2.string();
          break;
        case 3:
          oe2.url = L2.string();
          break;
        case 4:
          oe2.baseUrl = L2.string();
          break;
        case 5:
          oe2.previewUrl = L2.string();
          break;
        case 6:
          oe2.ingestId = L2.string();
          break;
        case 7:
          oe2.ingestType = L2.string();
          break;
        default:
          L2.skipType(Pe2 & 7);
          break;
      }
    }
    return oe2;
  }, fromJSON(S2) {
    return { enabled: Le2(S2.enabled) ? !!S2.enabled : void 0, streamId: Le2(S2.streamId) ? String(S2.streamId) : void 0, url: Le2(S2.url) ? String(S2.url) : void 0, baseUrl: Le2(S2.baseUrl) ? String(S2.baseUrl) : void 0, previewUrl: Le2(S2.previewUrl) ? String(S2.previewUrl) : void 0, ingestId: Le2(S2.ingestId) ? String(S2.ingestId) : void 0, ingestType: Le2(S2.ingestType) ? String(S2.ingestType) : void 0 };
  }, toJSON(S2) {
    const M2 = {};
    return S2.enabled !== void 0 && (M2.enabled = S2.enabled), S2.streamId !== void 0 && (M2.streamId = S2.streamId), S2.url !== void 0 && (M2.url = S2.url), S2.baseUrl !== void 0 && (M2.baseUrl = S2.baseUrl), S2.previewUrl !== void 0 && (M2.previewUrl = S2.previewUrl), S2.ingestId !== void 0 && (M2.ingestId = S2.ingestId), S2.ingestType !== void 0 && (M2.ingestType = S2.ingestType), M2;
  }, fromPartial(S2) {
    var M2, L2, Ee2, oe2, Pe2, bt, At;
    const Dt = St();
    return Dt.enabled = (M2 = S2.enabled) !== null && M2 !== void 0 ? M2 : void 0, Dt.streamId = (L2 = S2.streamId) !== null && L2 !== void 0 ? L2 : void 0, Dt.url = (Ee2 = S2.url) !== null && Ee2 !== void 0 ? Ee2 : void 0, Dt.baseUrl = (oe2 = S2.baseUrl) !== null && oe2 !== void 0 ? oe2 : void 0, Dt.previewUrl = (Pe2 = S2.previewUrl) !== null && Pe2 !== void 0 ? Pe2 : void 0, Dt.ingestId = (bt = S2.ingestId) !== null && bt !== void 0 ? bt : void 0, Dt.ingestType = (At = S2.ingestType) !== null && At !== void 0 ? At : void 0, Dt;
  } };
  function tt() {
    return { url: "" };
  }
  a420.RtmpPullAddress = { encode(S2, M2 = c.default.Writer.create()) {
    return S2.url !== "" && M2.uint32(10).string(S2.url), M2;
  }, decode(S2, M2) {
    const L2 = S2 instanceof c.default.Reader ? S2 : new c.default.Reader(S2);
    let Ee2 = M2 === void 0 ? L2.len : L2.pos + M2;
    const oe2 = tt();
    for (; L2.pos < Ee2; ) {
      const Pe2 = L2.uint32();
      switch (Pe2 >>> 3) {
        case 1:
          oe2.url = L2.string();
          break;
        default:
          L2.skipType(Pe2 & 7);
          break;
      }
    }
    return oe2;
  }, fromJSON(S2) {
    return { url: Le2(S2.url) ? String(S2.url) : "" };
  }, toJSON(S2) {
    const M2 = {};
    return S2.url !== void 0 && (M2.url = S2.url), M2;
  }, fromPartial(S2) {
    var M2;
    const L2 = tt();
    return L2.url = (M2 = S2.url) !== null && M2 !== void 0 ? M2 : "", L2;
  } };
  function it() {
    return { url: "" };
  }
  a420.SrtPullAddress = { encode(S2, M2 = c.default.Writer.create()) {
    return S2.url !== "" && M2.uint32(10).string(S2.url), M2;
  }, decode(S2, M2) {
    const L2 = S2 instanceof c.default.Reader ? S2 : new c.default.Reader(S2);
    let Ee2 = M2 === void 0 ? L2.len : L2.pos + M2;
    const oe2 = it();
    for (; L2.pos < Ee2; ) {
      const Pe2 = L2.uint32();
      switch (Pe2 >>> 3) {
        case 1:
          oe2.url = L2.string();
          break;
        default:
          L2.skipType(Pe2 & 7);
          break;
      }
    }
    return oe2;
  }, fromJSON(S2) {
    return { url: Le2(S2.url) ? String(S2.url) : "" };
  }, toJSON(S2) {
    const M2 = {};
    return S2.url !== void 0 && (M2.url = S2.url), M2;
  }, fromPartial(S2) {
    var M2;
    const L2 = it();
    return L2.url = (M2 = S2.url) !== null && M2 !== void 0 ? M2 : "", L2;
  } };
  function Tt() {
    return { rtmpPush: void 0, srtPush: void 0, rtmpPull: void 0, srtPull: void 0 };
  }
  a420.SourceAddress = { encode(S2, M2 = c.default.Writer.create()) {
    return S2.rtmpPush !== void 0 && a420.SourceRtmpPushAddress.encode(S2.rtmpPush, M2.uint32(10).fork()).ldelim(), S2.srtPush !== void 0 && a420.SrtPushAddress.encode(S2.srtPush, M2.uint32(18).fork()).ldelim(), S2.rtmpPull !== void 0 && a420.RtmpPullAddress.encode(S2.rtmpPull, M2.uint32(26).fork()).ldelim(), S2.srtPull !== void 0 && a420.SrtPullAddress.encode(S2.srtPull, M2.uint32(34).fork()).ldelim(), M2;
  }, decode(S2, M2) {
    const L2 = S2 instanceof c.default.Reader ? S2 : new c.default.Reader(S2);
    let Ee2 = M2 === void 0 ? L2.len : L2.pos + M2;
    const oe2 = Tt();
    for (; L2.pos < Ee2; ) {
      const Pe2 = L2.uint32();
      switch (Pe2 >>> 3) {
        case 1:
          oe2.rtmpPush = a420.SourceRtmpPushAddress.decode(L2, L2.uint32());
          break;
        case 2:
          oe2.srtPush = a420.SrtPushAddress.decode(L2, L2.uint32());
          break;
        case 3:
          oe2.rtmpPull = a420.RtmpPullAddress.decode(L2, L2.uint32());
          break;
        case 4:
          oe2.srtPull = a420.SrtPullAddress.decode(L2, L2.uint32());
          break;
        default:
          L2.skipType(Pe2 & 7);
          break;
      }
    }
    return oe2;
  }, fromJSON(S2) {
    return { rtmpPush: Le2(S2.rtmpPush) ? a420.SourceRtmpPushAddress.fromJSON(S2.rtmpPush) : void 0, srtPush: Le2(S2.srtPush) ? a420.SrtPushAddress.fromJSON(S2.srtPush) : void 0, rtmpPull: Le2(S2.rtmpPull) ? a420.RtmpPullAddress.fromJSON(S2.rtmpPull) : void 0, srtPull: Le2(S2.srtPull) ? a420.SrtPullAddress.fromJSON(S2.srtPull) : void 0 };
  }, toJSON(S2) {
    const M2 = {};
    return S2.rtmpPush !== void 0 && (M2.rtmpPush = S2.rtmpPush ? a420.SourceRtmpPushAddress.toJSON(S2.rtmpPush) : void 0), S2.srtPush !== void 0 && (M2.srtPush = S2.srtPush ? a420.SrtPushAddress.toJSON(S2.srtPush) : void 0), S2.rtmpPull !== void 0 && (M2.rtmpPull = S2.rtmpPull ? a420.RtmpPullAddress.toJSON(S2.rtmpPull) : void 0), S2.srtPull !== void 0 && (M2.srtPull = S2.srtPull ? a420.SrtPullAddress.toJSON(S2.srtPull) : void 0), M2;
  }, fromPartial(S2) {
    const M2 = Tt();
    return M2.rtmpPush = S2.rtmpPush !== void 0 && S2.rtmpPush !== null ? a420.SourceRtmpPushAddress.fromPartial(S2.rtmpPush) : void 0, M2.srtPush = S2.srtPush !== void 0 && S2.srtPush !== null ? a420.SrtPushAddress.fromPartial(S2.srtPush) : void 0, M2.rtmpPull = S2.rtmpPull !== void 0 && S2.rtmpPull !== null ? a420.RtmpPullAddress.fromPartial(S2.rtmpPull) : void 0, M2.srtPull = S2.srtPull !== void 0 && S2.srtPull !== null ? a420.SrtPullAddress.fromPartial(S2.srtPull) : void 0, M2;
  } };
  function rt() {
    return { key: void 0, url: "" };
  }
  a420.DestinationRtmpPushAddress = { encode(S2, M2 = c.default.Writer.create()) {
    return S2.key !== void 0 && M2.uint32(10).string(S2.key), S2.url !== "" && M2.uint32(18).string(S2.url), M2;
  }, decode(S2, M2) {
    const L2 = S2 instanceof c.default.Reader ? S2 : new c.default.Reader(S2);
    let Ee2 = M2 === void 0 ? L2.len : L2.pos + M2;
    const oe2 = rt();
    for (; L2.pos < Ee2; ) {
      const Pe2 = L2.uint32();
      switch (Pe2 >>> 3) {
        case 1:
          oe2.key = L2.string();
          break;
        case 2:
          oe2.url = L2.string();
          break;
        default:
          L2.skipType(Pe2 & 7);
          break;
      }
    }
    return oe2;
  }, fromJSON(S2) {
    return { key: Le2(S2.key) ? String(S2.key) : void 0, url: Le2(S2.url) ? String(S2.url) : "" };
  }, toJSON(S2) {
    const M2 = {};
    return S2.key !== void 0 && (M2.key = S2.key), S2.url !== void 0 && (M2.url = S2.url), M2;
  }, fromPartial(S2) {
    var M2, L2;
    const Ee2 = rt();
    return Ee2.key = (M2 = S2.key) !== null && M2 !== void 0 ? M2 : void 0, Ee2.url = (L2 = S2.url) !== null && L2 !== void 0 ? L2 : "", Ee2;
  } };
  function dt() {
    return { url: "" };
  }
  a420.DestinationSrtPushAddress = { encode(S2, M2 = c.default.Writer.create()) {
    return S2.url !== "" && M2.uint32(18).string(S2.url), M2;
  }, decode(S2, M2) {
    const L2 = S2 instanceof c.default.Reader ? S2 : new c.default.Reader(S2);
    let Ee2 = M2 === void 0 ? L2.len : L2.pos + M2;
    const oe2 = dt();
    for (; L2.pos < Ee2; ) {
      const Pe2 = L2.uint32();
      switch (Pe2 >>> 3) {
        case 2:
          oe2.url = L2.string();
          break;
        default:
          L2.skipType(Pe2 & 7);
          break;
      }
    }
    return oe2;
  }, fromJSON(S2) {
    return { url: Le2(S2.url) ? String(S2.url) : "" };
  }, toJSON(S2) {
    const M2 = {};
    return S2.url !== void 0 && (M2.url = S2.url), M2;
  }, fromPartial(S2) {
    var M2;
    const L2 = dt();
    return L2.url = (M2 = S2.url) !== null && M2 !== void 0 ? M2 : "", L2;
  } };
  function wt() {
    return { appId: "", channelId: "", userId: "" };
  }
  a420.DestinationAgoraPushAddress = { encode(S2, M2 = c.default.Writer.create()) {
    return S2.appId !== "" && M2.uint32(10).string(S2.appId), S2.channelId !== "" && M2.uint32(18).string(S2.channelId), S2.userId !== "" && M2.uint32(26).string(S2.userId), M2;
  }, decode(S2, M2) {
    const L2 = S2 instanceof c.default.Reader ? S2 : new c.default.Reader(S2);
    let Ee2 = M2 === void 0 ? L2.len : L2.pos + M2;
    const oe2 = wt();
    for (; L2.pos < Ee2; ) {
      const Pe2 = L2.uint32();
      switch (Pe2 >>> 3) {
        case 1:
          oe2.appId = L2.string();
          break;
        case 2:
          oe2.channelId = L2.string();
          break;
        case 3:
          oe2.userId = L2.string();
          break;
        default:
          L2.skipType(Pe2 & 7);
          break;
      }
    }
    return oe2;
  }, fromJSON(S2) {
    return { appId: Le2(S2.appId) ? String(S2.appId) : "", channelId: Le2(S2.channelId) ? String(S2.channelId) : "", userId: Le2(S2.userId) ? String(S2.userId) : "" };
  }, toJSON(S2) {
    const M2 = {};
    return S2.appId !== void 0 && (M2.appId = S2.appId), S2.channelId !== void 0 && (M2.channelId = S2.channelId), S2.userId !== void 0 && (M2.userId = S2.userId), M2;
  }, fromPartial(S2) {
    var M2, L2, Ee2;
    const oe2 = wt();
    return oe2.appId = (M2 = S2.appId) !== null && M2 !== void 0 ? M2 : "", oe2.channelId = (L2 = S2.channelId) !== null && L2 !== void 0 ? L2 : "", oe2.userId = (Ee2 = S2.userId) !== null && Ee2 !== void 0 ? Ee2 : "", oe2;
  } };
  function nt() {
    return { playlistCount: void 0, fileCount: void 0 };
  }
  a420.HlsLifecycleLive = { encode(S2, M2 = c.default.Writer.create()) {
    return S2.playlistCount !== void 0 && M2.uint32(8).int32(S2.playlistCount), S2.fileCount !== void 0 && M2.uint32(16).int32(S2.fileCount), M2;
  }, decode(S2, M2) {
    const L2 = S2 instanceof c.default.Reader ? S2 : new c.default.Reader(S2);
    let Ee2 = M2 === void 0 ? L2.len : L2.pos + M2;
    const oe2 = nt();
    for (; L2.pos < Ee2; ) {
      const Pe2 = L2.uint32();
      switch (Pe2 >>> 3) {
        case 1:
          oe2.playlistCount = L2.int32();
          break;
        case 2:
          oe2.fileCount = L2.int32();
          break;
        default:
          L2.skipType(Pe2 & 7);
          break;
      }
    }
    return oe2;
  }, fromJSON(S2) {
    return { playlistCount: Le2(S2.playlistCount) ? Number(S2.playlistCount) : void 0, fileCount: Le2(S2.fileCount) ? Number(S2.fileCount) : void 0 };
  }, toJSON(S2) {
    const M2 = {};
    return S2.playlistCount !== void 0 && (M2.playlistCount = Math.round(S2.playlistCount)), S2.fileCount !== void 0 && (M2.fileCount = Math.round(S2.fileCount)), M2;
  }, fromPartial(S2) {
    var M2, L2;
    const Ee2 = nt();
    return Ee2.playlistCount = (M2 = S2.playlistCount) !== null && M2 !== void 0 ? M2 : void 0, Ee2.fileCount = (L2 = S2.fileCount) !== null && L2 !== void 0 ? L2 : void 0, Ee2;
  } };
  function at() {
    return { maxDuration: void 0 };
  }
  a420.HlsLifecycleVod = { encode(S2, M2 = c.default.Writer.create()) {
    return S2.maxDuration !== void 0 && M2.uint32(8).int32(S2.maxDuration), M2;
  }, decode(S2, M2) {
    const L2 = S2 instanceof c.default.Reader ? S2 : new c.default.Reader(S2);
    let Ee2 = M2 === void 0 ? L2.len : L2.pos + M2;
    const oe2 = at();
    for (; L2.pos < Ee2; ) {
      const Pe2 = L2.uint32();
      switch (Pe2 >>> 3) {
        case 1:
          oe2.maxDuration = L2.int32();
          break;
        default:
          L2.skipType(Pe2 & 7);
          break;
      }
    }
    return oe2;
  }, fromJSON(S2) {
    return { maxDuration: Le2(S2.maxDuration) ? Number(S2.maxDuration) : void 0 };
  }, toJSON(S2) {
    const M2 = {};
    return S2.maxDuration !== void 0 && (M2.maxDuration = Math.round(S2.maxDuration)), M2;
  }, fromPartial(S2) {
    var M2;
    const L2 = at();
    return L2.maxDuration = (M2 = S2.maxDuration) !== null && M2 !== void 0 ? M2 : void 0, L2;
  } };
  function gt() {
    return { vod: void 0, live: void 0 };
  }
  a420.HlsLifecycle = { encode(S2, M2 = c.default.Writer.create()) {
    return S2.vod !== void 0 && a420.HlsLifecycleVod.encode(S2.vod, M2.uint32(10).fork()).ldelim(), S2.live !== void 0 && a420.HlsLifecycleLive.encode(S2.live, M2.uint32(18).fork()).ldelim(), M2;
  }, decode(S2, M2) {
    const L2 = S2 instanceof c.default.Reader ? S2 : new c.default.Reader(S2);
    let Ee2 = M2 === void 0 ? L2.len : L2.pos + M2;
    const oe2 = gt();
    for (; L2.pos < Ee2; ) {
      const Pe2 = L2.uint32();
      switch (Pe2 >>> 3) {
        case 1:
          oe2.vod = a420.HlsLifecycleVod.decode(L2, L2.uint32());
          break;
        case 2:
          oe2.live = a420.HlsLifecycleLive.decode(L2, L2.uint32());
          break;
        default:
          L2.skipType(Pe2 & 7);
          break;
      }
    }
    return oe2;
  }, fromJSON(S2) {
    return { vod: Le2(S2.vod) ? a420.HlsLifecycleVod.fromJSON(S2.vod) : void 0, live: Le2(S2.live) ? a420.HlsLifecycleLive.fromJSON(S2.live) : void 0 };
  }, toJSON(S2) {
    const M2 = {};
    return S2.vod !== void 0 && (M2.vod = S2.vod ? a420.HlsLifecycleVod.toJSON(S2.vod) : void 0), S2.live !== void 0 && (M2.live = S2.live ? a420.HlsLifecycleLive.toJSON(S2.live) : void 0), M2;
  }, fromPartial(S2) {
    const M2 = gt();
    return M2.vod = S2.vod !== void 0 && S2.vod !== null ? a420.HlsLifecycleVod.fromPartial(S2.vod) : void 0, M2.live = S2.live !== void 0 && S2.live !== null ? a420.HlsLifecycleLive.fromPartial(S2.live) : void 0, M2;
  } };
  function ot() {
    return { lifecycle: void 0, segmentDuration: void 0 };
  }
  a420.HlsPackaging = { encode(S2, M2 = c.default.Writer.create()) {
    return S2.lifecycle !== void 0 && a420.HlsLifecycle.encode(S2.lifecycle, M2.uint32(10).fork()).ldelim(), S2.segmentDuration !== void 0 && M2.uint32(16).int32(S2.segmentDuration), M2;
  }, decode(S2, M2) {
    const L2 = S2 instanceof c.default.Reader ? S2 : new c.default.Reader(S2);
    let Ee2 = M2 === void 0 ? L2.len : L2.pos + M2;
    const oe2 = ot();
    for (; L2.pos < Ee2; ) {
      const Pe2 = L2.uint32();
      switch (Pe2 >>> 3) {
        case 1:
          oe2.lifecycle = a420.HlsLifecycle.decode(L2, L2.uint32());
          break;
        case 2:
          oe2.segmentDuration = L2.int32();
          break;
        default:
          L2.skipType(Pe2 & 7);
          break;
      }
    }
    return oe2;
  }, fromJSON(S2) {
    return { lifecycle: Le2(S2.lifecycle) ? a420.HlsLifecycle.fromJSON(S2.lifecycle) : void 0, segmentDuration: Le2(S2.segmentDuration) ? Number(S2.segmentDuration) : void 0 };
  }, toJSON(S2) {
    const M2 = {};
    return S2.lifecycle !== void 0 && (M2.lifecycle = S2.lifecycle ? a420.HlsLifecycle.toJSON(S2.lifecycle) : void 0), S2.segmentDuration !== void 0 && (M2.segmentDuration = Math.round(S2.segmentDuration)), M2;
  }, fromPartial(S2) {
    var M2;
    const L2 = ot();
    return L2.lifecycle = S2.lifecycle !== void 0 && S2.lifecycle !== null ? a420.HlsLifecycle.fromPartial(S2.lifecycle) : void 0, L2.segmentDuration = (M2 = S2.segmentDuration) !== null && M2 !== void 0 ? M2 : void 0, L2;
  } };
  function ct() {
    return { hls: void 0 };
  }
  a420.ObjectStoragePackaging = { encode(S2, M2 = c.default.Writer.create()) {
    return S2.hls !== void 0 && a420.HlsPackaging.encode(S2.hls, M2.uint32(10).fork()).ldelim(), M2;
  }, decode(S2, M2) {
    const L2 = S2 instanceof c.default.Reader ? S2 : new c.default.Reader(S2);
    let Ee2 = M2 === void 0 ? L2.len : L2.pos + M2;
    const oe2 = ct();
    for (; L2.pos < Ee2; ) {
      const Pe2 = L2.uint32();
      switch (Pe2 >>> 3) {
        case 1:
          oe2.hls = a420.HlsPackaging.decode(L2, L2.uint32());
          break;
        default:
          L2.skipType(Pe2 & 7);
          break;
      }
    }
    return oe2;
  }, fromJSON(S2) {
    return { hls: Le2(S2.hls) ? a420.HlsPackaging.fromJSON(S2.hls) : void 0 };
  }, toJSON(S2) {
    const M2 = {};
    return S2.hls !== void 0 && (M2.hls = S2.hls ? a420.HlsPackaging.toJSON(S2.hls) : void 0), M2;
  }, fromPartial(S2) {
    const M2 = ct();
    return M2.hls = S2.hls !== void 0 && S2.hls !== null ? a420.HlsPackaging.fromPartial(S2.hls) : void 0, M2;
  } };
  function Ct() {
    return { region: "", bucket: "", prefix: void 0, accessKey: "", secretKey: "", token: void 0, tokenDuration: void 0, acl: void 0, endpoint: void 0, packaging: void 0 };
  }
  a420.S3StorageAddress = { encode(S2, M2 = c.default.Writer.create()) {
    return S2.region !== "" && M2.uint32(10).string(S2.region), S2.bucket !== "" && M2.uint32(18).string(S2.bucket), S2.prefix !== void 0 && M2.uint32(26).string(S2.prefix), S2.accessKey !== "" && M2.uint32(34).string(S2.accessKey), S2.secretKey !== "" && M2.uint32(42).string(S2.secretKey), S2.token !== void 0 && M2.uint32(50).string(S2.token), S2.tokenDuration !== void 0 && M2.uint32(56).int32(S2.tokenDuration), S2.acl !== void 0 && M2.uint32(64).int32(xe2(S2.acl)), S2.endpoint !== void 0 && M2.uint32(74).string(S2.endpoint), S2.packaging !== void 0 && a420.ObjectStoragePackaging.encode(S2.packaging, M2.uint32(82).fork()).ldelim(), M2;
  }, decode(S2, M2) {
    const L2 = S2 instanceof c.default.Reader ? S2 : new c.default.Reader(S2);
    let Ee2 = M2 === void 0 ? L2.len : L2.pos + M2;
    const oe2 = Ct();
    for (; L2.pos < Ee2; ) {
      const Pe2 = L2.uint32();
      switch (Pe2 >>> 3) {
        case 1:
          oe2.region = L2.string();
          break;
        case 2:
          oe2.bucket = L2.string();
          break;
        case 3:
          oe2.prefix = L2.string();
          break;
        case 4:
          oe2.accessKey = L2.string();
          break;
        case 5:
          oe2.secretKey = L2.string();
          break;
        case 6:
          oe2.token = L2.string();
          break;
        case 7:
          oe2.tokenDuration = L2.int32();
          break;
        case 8:
          oe2.acl = Me2(L2.int32());
          break;
        case 9:
          oe2.endpoint = L2.string();
          break;
        case 10:
          oe2.packaging = a420.ObjectStoragePackaging.decode(L2, L2.uint32());
          break;
        default:
          L2.skipType(Pe2 & 7);
          break;
      }
    }
    return oe2;
  }, fromJSON(S2) {
    return { region: Le2(S2.region) ? String(S2.region) : "", bucket: Le2(S2.bucket) ? String(S2.bucket) : "", prefix: Le2(S2.prefix) ? String(S2.prefix) : void 0, accessKey: Le2(S2.accessKey) ? String(S2.accessKey) : "", secretKey: Le2(S2.secretKey) ? String(S2.secretKey) : "", token: Le2(S2.token) ? String(S2.token) : void 0, tokenDuration: Le2(S2.tokenDuration) ? Number(S2.tokenDuration) : void 0, acl: Le2(S2.acl) ? Me2(S2.acl) : void 0, endpoint: Le2(S2.endpoint) ? String(S2.endpoint) : void 0, packaging: Le2(S2.packaging) ? a420.ObjectStoragePackaging.fromJSON(S2.packaging) : void 0 };
  }, toJSON(S2) {
    const M2 = {};
    return S2.region !== void 0 && (M2.region = S2.region), S2.bucket !== void 0 && (M2.bucket = S2.bucket), S2.prefix !== void 0 && (M2.prefix = S2.prefix), S2.accessKey !== void 0 && (M2.accessKey = S2.accessKey), S2.secretKey !== void 0 && (M2.secretKey = S2.secretKey), S2.token !== void 0 && (M2.token = S2.token), S2.tokenDuration !== void 0 && (M2.tokenDuration = Math.round(S2.tokenDuration)), S2.acl !== void 0 && (M2.acl = S2.acl !== void 0 ? Ae2(S2.acl) : void 0), S2.endpoint !== void 0 && (M2.endpoint = S2.endpoint), S2.packaging !== void 0 && (M2.packaging = S2.packaging ? a420.ObjectStoragePackaging.toJSON(S2.packaging) : void 0), M2;
  }, fromPartial(S2) {
    var M2, L2, Ee2, oe2, Pe2, bt, At, Dt, Lt;
    const Ft = Ct();
    return Ft.region = (M2 = S2.region) !== null && M2 !== void 0 ? M2 : "", Ft.bucket = (L2 = S2.bucket) !== null && L2 !== void 0 ? L2 : "", Ft.prefix = (Ee2 = S2.prefix) !== null && Ee2 !== void 0 ? Ee2 : void 0, Ft.accessKey = (oe2 = S2.accessKey) !== null && oe2 !== void 0 ? oe2 : "", Ft.secretKey = (Pe2 = S2.secretKey) !== null && Pe2 !== void 0 ? Pe2 : "", Ft.token = (bt = S2.token) !== null && bt !== void 0 ? bt : void 0, Ft.tokenDuration = (At = S2.tokenDuration) !== null && At !== void 0 ? At : void 0, Ft.acl = (Dt = S2.acl) !== null && Dt !== void 0 ? Dt : void 0, Ft.endpoint = (Lt = S2.endpoint) !== null && Lt !== void 0 ? Lt : void 0, Ft.packaging = S2.packaging !== void 0 && S2.packaging !== null ? a420.ObjectStoragePackaging.fromPartial(S2.packaging) : void 0, Ft;
  } };
  function ut() {
    return { rtmpPush: void 0, agora: void 0, s3Storage: void 0, srtPush: void 0 };
  }
  a420.DestinationAddress = { encode(S2, M2 = c.default.Writer.create()) {
    return S2.rtmpPush !== void 0 && a420.DestinationRtmpPushAddress.encode(S2.rtmpPush, M2.uint32(10).fork()).ldelim(), S2.agora !== void 0 && a420.DestinationAgoraPushAddress.encode(S2.agora, M2.uint32(18).fork()).ldelim(), S2.s3Storage !== void 0 && a420.S3StorageAddress.encode(S2.s3Storage, M2.uint32(26).fork()).ldelim(), S2.srtPush !== void 0 && a420.DestinationSrtPushAddress.encode(S2.srtPush, M2.uint32(34).fork()).ldelim(), M2;
  }, decode(S2, M2) {
    const L2 = S2 instanceof c.default.Reader ? S2 : new c.default.Reader(S2);
    let Ee2 = M2 === void 0 ? L2.len : L2.pos + M2;
    const oe2 = ut();
    for (; L2.pos < Ee2; ) {
      const Pe2 = L2.uint32();
      switch (Pe2 >>> 3) {
        case 1:
          oe2.rtmpPush = a420.DestinationRtmpPushAddress.decode(L2, L2.uint32());
          break;
        case 2:
          oe2.agora = a420.DestinationAgoraPushAddress.decode(L2, L2.uint32());
          break;
        case 3:
          oe2.s3Storage = a420.S3StorageAddress.decode(L2, L2.uint32());
          break;
        case 4:
          oe2.srtPush = a420.DestinationSrtPushAddress.decode(L2, L2.uint32());
          break;
        default:
          L2.skipType(Pe2 & 7);
          break;
      }
    }
    return oe2;
  }, fromJSON(S2) {
    return { rtmpPush: Le2(S2.rtmpPush) ? a420.DestinationRtmpPushAddress.fromJSON(S2.rtmpPush) : void 0, agora: Le2(S2.agora) ? a420.DestinationAgoraPushAddress.fromJSON(S2.agora) : void 0, s3Storage: Le2(S2.s3Storage) ? a420.S3StorageAddress.fromJSON(S2.s3Storage) : void 0, srtPush: Le2(S2.srtPush) ? a420.DestinationSrtPushAddress.fromJSON(S2.srtPush) : void 0 };
  }, toJSON(S2) {
    const M2 = {};
    return S2.rtmpPush !== void 0 && (M2.rtmpPush = S2.rtmpPush ? a420.DestinationRtmpPushAddress.toJSON(S2.rtmpPush) : void 0), S2.agora !== void 0 && (M2.agora = S2.agora ? a420.DestinationAgoraPushAddress.toJSON(S2.agora) : void 0), S2.s3Storage !== void 0 && (M2.s3Storage = S2.s3Storage ? a420.S3StorageAddress.toJSON(S2.s3Storage) : void 0), S2.srtPush !== void 0 && (M2.srtPush = S2.srtPush ? a420.DestinationSrtPushAddress.toJSON(S2.srtPush) : void 0), M2;
  }, fromPartial(S2) {
    const M2 = ut();
    return M2.rtmpPush = S2.rtmpPush !== void 0 && S2.rtmpPush !== null ? a420.DestinationRtmpPushAddress.fromPartial(S2.rtmpPush) : void 0, M2.agora = S2.agora !== void 0 && S2.agora !== null ? a420.DestinationAgoraPushAddress.fromPartial(S2.agora) : void 0, M2.s3Storage = S2.s3Storage !== void 0 && S2.s3Storage !== null ? a420.S3StorageAddress.fromPartial(S2.s3Storage) : void 0, M2.srtPush = S2.srtPush !== void 0 && S2.srtPush !== null ? a420.DestinationSrtPushAddress.fromPartial(S2.srtPush) : void 0, M2;
  } };
  function lt() {
    return { sourceId: "", start: void 0, stop: void 0 };
  }
  a420.SourceTrigger = { encode(S2, M2 = c.default.Writer.create()) {
    return S2.sourceId !== "" && M2.uint32(10).string(S2.sourceId), S2.start !== void 0 && M2.uint32(16).int32(fe2(S2.start)), S2.stop !== void 0 && M2.uint32(24).int32(fe2(S2.stop)), M2;
  }, decode(S2, M2) {
    const L2 = S2 instanceof c.default.Reader ? S2 : new c.default.Reader(S2);
    let Ee2 = M2 === void 0 ? L2.len : L2.pos + M2;
    const oe2 = lt();
    for (; L2.pos < Ee2; ) {
      const Pe2 = L2.uint32();
      switch (Pe2 >>> 3) {
        case 1:
          oe2.sourceId = L2.string();
          break;
        case 2:
          oe2.start = N2(L2.int32());
          break;
        case 3:
          oe2.stop = N2(L2.int32());
          break;
        default:
          L2.skipType(Pe2 & 7);
          break;
      }
    }
    return oe2;
  }, fromJSON(S2) {
    return { sourceId: Le2(S2.sourceId) ? String(S2.sourceId) : "", start: Le2(S2.start) ? N2(S2.start) : void 0, stop: Le2(S2.stop) ? N2(S2.stop) : void 0 };
  }, toJSON(S2) {
    const M2 = {};
    return S2.sourceId !== void 0 && (M2.sourceId = S2.sourceId), S2.start !== void 0 && (M2.start = S2.start !== void 0 ? re2(S2.start) : void 0), S2.stop !== void 0 && (M2.stop = S2.stop !== void 0 ? re2(S2.stop) : void 0), M2;
  }, fromPartial(S2) {
    var M2, L2, Ee2;
    const oe2 = lt();
    return oe2.sourceId = (M2 = S2.sourceId) !== null && M2 !== void 0 ? M2 : "", oe2.start = (L2 = S2.start) !== null && L2 !== void 0 ? L2 : void 0, oe2.stop = (Ee2 = S2.stop) !== null && Ee2 !== void 0 ? Ee2 : void 0, oe2;
  } };
  function kt() {
    return { stop: void 0 };
  }
  a420.WebRtcTrigger = { encode(S2, M2 = c.default.Writer.create()) {
    return S2.stop !== void 0 && M2.uint32(24).int32(fe2(S2.stop)), M2;
  }, decode(S2, M2) {
    const L2 = S2 instanceof c.default.Reader ? S2 : new c.default.Reader(S2);
    let Ee2 = M2 === void 0 ? L2.len : L2.pos + M2;
    const oe2 = kt();
    for (; L2.pos < Ee2; ) {
      const Pe2 = L2.uint32();
      switch (Pe2 >>> 3) {
        case 3:
          oe2.stop = N2(L2.int32());
          break;
        default:
          L2.skipType(Pe2 & 7);
          break;
      }
    }
    return oe2;
  }, fromJSON(S2) {
    return { stop: Le2(S2.stop) ? N2(S2.stop) : void 0 };
  }, toJSON(S2) {
    const M2 = {};
    return S2.stop !== void 0 && (M2.stop = S2.stop !== void 0 ? re2(S2.stop) : void 0), M2;
  }, fromPartial(S2) {
    var M2;
    const L2 = kt();
    return L2.stop = (M2 = S2.stop) !== null && M2 !== void 0 ? M2 : void 0, L2;
  } };
  function Rt() {
    return { source: void 0 };
  }
  a420.ProjectTrigger = { encode(S2, M2 = c.default.Writer.create()) {
    return S2.source !== void 0 && a420.SourceTrigger.encode(S2.source, M2.uint32(10).fork()).ldelim(), M2;
  }, decode(S2, M2) {
    const L2 = S2 instanceof c.default.Reader ? S2 : new c.default.Reader(S2);
    let Ee2 = M2 === void 0 ? L2.len : L2.pos + M2;
    const oe2 = Rt();
    for (; L2.pos < Ee2; ) {
      const Pe2 = L2.uint32();
      switch (Pe2 >>> 3) {
        case 1:
          oe2.source = a420.SourceTrigger.decode(L2, L2.uint32());
          break;
        default:
          L2.skipType(Pe2 & 7);
          break;
      }
    }
    return oe2;
  }, fromJSON(S2) {
    return { source: Le2(S2.source) ? a420.SourceTrigger.fromJSON(S2.source) : void 0 };
  }, toJSON(S2) {
    const M2 = {};
    return S2.source !== void 0 && (M2.source = S2.source ? a420.SourceTrigger.toJSON(S2.source) : void 0), M2;
  }, fromPartial(S2) {
    const M2 = Rt();
    return M2.source = S2.source !== void 0 && S2.source !== null ? a420.SourceTrigger.fromPartial(S2.source) : void 0, M2;
  } };
  function Je2() {
    return { enabled: void 0, url: void 0 };
  }
  a420.PreviewHlsPullAddress = { encode(S2, M2 = c.default.Writer.create()) {
    return S2.enabled !== void 0 && M2.uint32(8).bool(S2.enabled), S2.url !== void 0 && M2.uint32(18).string(S2.url), M2;
  }, decode(S2, M2) {
    const L2 = S2 instanceof c.default.Reader ? S2 : new c.default.Reader(S2);
    let Ee2 = M2 === void 0 ? L2.len : L2.pos + M2;
    const oe2 = Je2();
    for (; L2.pos < Ee2; ) {
      const Pe2 = L2.uint32();
      switch (Pe2 >>> 3) {
        case 1:
          oe2.enabled = L2.bool();
          break;
        case 2:
          oe2.url = L2.string();
          break;
        default:
          L2.skipType(Pe2 & 7);
          break;
      }
    }
    return oe2;
  }, fromJSON(S2) {
    return { enabled: Le2(S2.enabled) ? !!S2.enabled : void 0, url: Le2(S2.url) ? String(S2.url) : void 0 };
  }, toJSON(S2) {
    const M2 = {};
    return S2.enabled !== void 0 && (M2.enabled = S2.enabled), S2.url !== void 0 && (M2.url = S2.url), M2;
  }, fromPartial(S2) {
    var M2, L2;
    const Ee2 = Je2();
    return Ee2.enabled = (M2 = S2.enabled) !== null && M2 !== void 0 ? M2 : void 0, Ee2.url = (L2 = S2.url) !== null && L2 !== void 0 ? L2 : void 0, Ee2;
  } };
  function ze2() {
    return { enabled: void 0, displayName: void 0, participantId: void 0 };
  }
  a420.PreviewWebRtcAddress = { encode(S2, M2 = c.default.Writer.create()) {
    return S2.enabled !== void 0 && M2.uint32(8).bool(S2.enabled), S2.displayName !== void 0 && M2.uint32(18).string(S2.displayName), S2.participantId !== void 0 && M2.uint32(26).string(S2.participantId), M2;
  }, decode(S2, M2) {
    const L2 = S2 instanceof c.default.Reader ? S2 : new c.default.Reader(S2);
    let Ee2 = M2 === void 0 ? L2.len : L2.pos + M2;
    const oe2 = ze2();
    for (; L2.pos < Ee2; ) {
      const Pe2 = L2.uint32();
      switch (Pe2 >>> 3) {
        case 1:
          oe2.enabled = L2.bool();
          break;
        case 2:
          oe2.displayName = L2.string();
          break;
        case 3:
          oe2.participantId = L2.string();
          break;
        default:
          L2.skipType(Pe2 & 7);
          break;
      }
    }
    return oe2;
  }, fromJSON(S2) {
    return { enabled: Le2(S2.enabled) ? !!S2.enabled : void 0, displayName: Le2(S2.displayName) ? String(S2.displayName) : void 0, participantId: Le2(S2.participantId) ? String(S2.participantId) : void 0 };
  }, toJSON(S2) {
    const M2 = {};
    return S2.enabled !== void 0 && (M2.enabled = S2.enabled), S2.displayName !== void 0 && (M2.displayName = S2.displayName), S2.participantId !== void 0 && (M2.participantId = S2.participantId), M2;
  }, fromPartial(S2) {
    var M2, L2, Ee2;
    const oe2 = ze2();
    return oe2.enabled = (M2 = S2.enabled) !== null && M2 !== void 0 ? M2 : void 0, oe2.displayName = (L2 = S2.displayName) !== null && L2 !== void 0 ? L2 : void 0, oe2.participantId = (Ee2 = S2.participantId) !== null && Ee2 !== void 0 ? Ee2 : void 0, oe2;
  } };
  function et() {
    return { webrtc: void 0 };
  }
  a420.PreviewAddress = { encode(S2, M2 = c.default.Writer.create()) {
    return S2.webrtc !== void 0 && a420.PreviewWebRtcAddress.encode(S2.webrtc, M2.uint32(18).fork()).ldelim(), M2;
  }, decode(S2, M2) {
    const L2 = S2 instanceof c.default.Reader ? S2 : new c.default.Reader(S2);
    let Ee2 = M2 === void 0 ? L2.len : L2.pos + M2;
    const oe2 = et();
    for (; L2.pos < Ee2; ) {
      const Pe2 = L2.uint32();
      switch (Pe2 >>> 3) {
        case 2:
          oe2.webrtc = a420.PreviewWebRtcAddress.decode(L2, L2.uint32());
          break;
        default:
          L2.skipType(Pe2 & 7);
          break;
      }
    }
    return oe2;
  }, fromJSON(S2) {
    return { webrtc: Le2(S2.webrtc) ? a420.PreviewWebRtcAddress.fromJSON(S2.webrtc) : void 0 };
  }, toJSON(S2) {
    const M2 = {};
    return S2.webrtc !== void 0 && (M2.webrtc = S2.webrtc ? a420.PreviewWebRtcAddress.toJSON(S2.webrtc) : void 0), M2;
  }, fromPartial(S2) {
    const M2 = et();
    return M2.webrtc = S2.webrtc !== void 0 && S2.webrtc !== null ? a420.PreviewWebRtcAddress.fromPartial(S2.webrtc) : void 0, M2;
  } };
  function pt() {
    return { rendererUrl: void 0, version: void 0 };
  }
  a420.StudioSdkComposition = { encode(S2, M2 = c.default.Writer.create()) {
    return S2.rendererUrl !== void 0 && M2.uint32(10).string(S2.rendererUrl), S2.version !== void 0 && M2.uint32(18).string(S2.version), M2;
  }, decode(S2, M2) {
    const L2 = S2 instanceof c.default.Reader ? S2 : new c.default.Reader(S2);
    let Ee2 = M2 === void 0 ? L2.len : L2.pos + M2;
    const oe2 = pt();
    for (; L2.pos < Ee2; ) {
      const Pe2 = L2.uint32();
      switch (Pe2 >>> 3) {
        case 1:
          oe2.rendererUrl = L2.string();
          break;
        case 2:
          oe2.version = L2.string();
          break;
        default:
          L2.skipType(Pe2 & 7);
          break;
      }
    }
    return oe2;
  }, fromJSON(S2) {
    return { rendererUrl: Le2(S2.rendererUrl) ? String(S2.rendererUrl) : void 0, version: Le2(S2.version) ? String(S2.version) : void 0 };
  }, toJSON(S2) {
    const M2 = {};
    return S2.rendererUrl !== void 0 && (M2.rendererUrl = S2.rendererUrl), S2.version !== void 0 && (M2.version = S2.version), M2;
  }, fromPartial(S2) {
    var M2, L2;
    const Ee2 = pt();
    return Ee2.rendererUrl = (M2 = S2.rendererUrl) !== null && M2 !== void 0 ? M2 : void 0, Ee2.version = (L2 = S2.version) !== null && L2 !== void 0 ? L2 : void 0, Ee2;
  } };
  function mt() {
    return { rendererUrl: void 0, selectedLayoutId: void 0, debug: void 0 };
  }
  a420.SceneComposition = { encode(S2, M2 = c.default.Writer.create()) {
    return S2.rendererUrl !== void 0 && M2.uint32(10).string(S2.rendererUrl), S2.selectedLayoutId !== void 0 && M2.uint32(18).string(S2.selectedLayoutId), S2.debug !== void 0 && M2.uint32(24).bool(S2.debug), M2;
  }, decode(S2, M2) {
    const L2 = S2 instanceof c.default.Reader ? S2 : new c.default.Reader(S2);
    let Ee2 = M2 === void 0 ? L2.len : L2.pos + M2;
    const oe2 = mt();
    for (; L2.pos < Ee2; ) {
      const Pe2 = L2.uint32();
      switch (Pe2 >>> 3) {
        case 1:
          oe2.rendererUrl = L2.string();
          break;
        case 2:
          oe2.selectedLayoutId = L2.string();
          break;
        case 3:
          oe2.debug = L2.bool();
          break;
        default:
          L2.skipType(Pe2 & 7);
          break;
      }
    }
    return oe2;
  }, fromJSON(S2) {
    return { rendererUrl: Le2(S2.rendererUrl) ? String(S2.rendererUrl) : void 0, selectedLayoutId: Le2(S2.selectedLayoutId) ? String(S2.selectedLayoutId) : void 0, debug: Le2(S2.debug) ? !!S2.debug : void 0 };
  }, toJSON(S2) {
    const M2 = {};
    return S2.rendererUrl !== void 0 && (M2.rendererUrl = S2.rendererUrl), S2.selectedLayoutId !== void 0 && (M2.selectedLayoutId = S2.selectedLayoutId), S2.debug !== void 0 && (M2.debug = S2.debug), M2;
  }, fromPartial(S2) {
    var M2, L2, Ee2;
    const oe2 = mt();
    return oe2.rendererUrl = (M2 = S2.rendererUrl) !== null && M2 !== void 0 ? M2 : void 0, oe2.selectedLayoutId = (L2 = S2.selectedLayoutId) !== null && L2 !== void 0 ? L2 : void 0, oe2.debug = (Ee2 = S2.debug) !== null && Ee2 !== void 0 ? Ee2 : void 0, oe2;
  } };
  function vt() {
    return { url: "" };
  }
  a420.ExternalComposition = { encode(S2, M2 = c.default.Writer.create()) {
    return S2.url !== "" && M2.uint32(10).string(S2.url), M2;
  }, decode(S2, M2) {
    const L2 = S2 instanceof c.default.Reader ? S2 : new c.default.Reader(S2);
    let Ee2 = M2 === void 0 ? L2.len : L2.pos + M2;
    const oe2 = vt();
    for (; L2.pos < Ee2; ) {
      const Pe2 = L2.uint32();
      switch (Pe2 >>> 3) {
        case 1:
          oe2.url = L2.string();
          break;
        default:
          L2.skipType(Pe2 & 7);
          break;
      }
    }
    return oe2;
  }, fromJSON(S2) {
    return { url: Le2(S2.url) ? String(S2.url) : "" };
  }, toJSON(S2) {
    const M2 = {};
    return S2.url !== void 0 && (M2.url = S2.url), M2;
  }, fromPartial(S2) {
    var M2;
    const L2 = vt();
    return L2.url = (M2 = S2.url) !== null && M2 !== void 0 ? M2 : "", L2;
  } };
  function ht() {
    return { external: void 0, studioSdk: void 0, scene: void 0 };
  }
  a420.Composition = { encode(S2, M2 = c.default.Writer.create()) {
    return S2.external !== void 0 && a420.ExternalComposition.encode(S2.external, M2.uint32(10).fork()).ldelim(), S2.studioSdk !== void 0 && a420.StudioSdkComposition.encode(S2.studioSdk, M2.uint32(18).fork()).ldelim(), S2.scene !== void 0 && a420.SceneComposition.encode(S2.scene, M2.uint32(34).fork()).ldelim(), M2;
  }, decode(S2, M2) {
    const L2 = S2 instanceof c.default.Reader ? S2 : new c.default.Reader(S2);
    let Ee2 = M2 === void 0 ? L2.len : L2.pos + M2;
    const oe2 = ht();
    for (; L2.pos < Ee2; ) {
      const Pe2 = L2.uint32();
      switch (Pe2 >>> 3) {
        case 1:
          oe2.external = a420.ExternalComposition.decode(L2, L2.uint32());
          break;
        case 2:
          oe2.studioSdk = a420.StudioSdkComposition.decode(L2, L2.uint32());
          break;
        case 4:
          oe2.scene = a420.SceneComposition.decode(L2, L2.uint32());
          break;
        default:
          L2.skipType(Pe2 & 7);
          break;
      }
    }
    return oe2;
  }, fromJSON(S2) {
    return { external: Le2(S2.external) ? a420.ExternalComposition.fromJSON(S2.external) : void 0, studioSdk: Le2(S2.studioSdk) ? a420.StudioSdkComposition.fromJSON(S2.studioSdk) : void 0, scene: Le2(S2.scene) ? a420.SceneComposition.fromJSON(S2.scene) : void 0 };
  }, toJSON(S2) {
    const M2 = {};
    return S2.external !== void 0 && (M2.external = S2.external ? a420.ExternalComposition.toJSON(S2.external) : void 0), S2.studioSdk !== void 0 && (M2.studioSdk = S2.studioSdk ? a420.StudioSdkComposition.toJSON(S2.studioSdk) : void 0), S2.scene !== void 0 && (M2.scene = S2.scene ? a420.SceneComposition.toJSON(S2.scene) : void 0), M2;
  }, fromPartial(S2) {
    const M2 = ht();
    return M2.external = S2.external !== void 0 && S2.external !== null ? a420.ExternalComposition.fromPartial(S2.external) : void 0, M2.studioSdk = S2.studioSdk !== void 0 && S2.studioSdk !== null ? a420.StudioSdkComposition.fromPartial(S2.studioSdk) : void 0, M2.scene = S2.scene !== void 0 && S2.scene !== null ? a420.SceneComposition.fromPartial(S2.scene) : void 0, M2;
  } };
  function _t() {
    return { enabled: void 0 };
  }
  a420.HostedWebRtc = { encode(S2, M2 = c.default.Writer.create()) {
    return S2.enabled !== void 0 && M2.uint32(8).bool(S2.enabled), M2;
  }, decode(S2, M2) {
    const L2 = S2 instanceof c.default.Reader ? S2 : new c.default.Reader(S2);
    let Ee2 = M2 === void 0 ? L2.len : L2.pos + M2;
    const oe2 = _t();
    for (; L2.pos < Ee2; ) {
      const Pe2 = L2.uint32();
      switch (Pe2 >>> 3) {
        case 1:
          oe2.enabled = L2.bool();
          break;
        default:
          L2.skipType(Pe2 & 7);
          break;
      }
    }
    return oe2;
  }, fromJSON(S2) {
    return { enabled: Le2(S2.enabled) ? !!S2.enabled : void 0 };
  }, toJSON(S2) {
    const M2 = {};
    return S2.enabled !== void 0 && (M2.enabled = S2.enabled), M2;
  }, fromPartial(S2) {
    var M2;
    const L2 = _t();
    return L2.enabled = (M2 = S2.enabled) !== null && M2 !== void 0 ? M2 : void 0, L2;
  } };
  function Et() {
    return { hosted: void 0 };
  }
  a420.WebRtc = { encode(S2, M2 = c.default.Writer.create()) {
    return S2.hosted !== void 0 && a420.HostedWebRtc.encode(S2.hosted, M2.uint32(10).fork()).ldelim(), M2;
  }, decode(S2, M2) {
    const L2 = S2 instanceof c.default.Reader ? S2 : new c.default.Reader(S2);
    let Ee2 = M2 === void 0 ? L2.len : L2.pos + M2;
    const oe2 = Et();
    for (; L2.pos < Ee2; ) {
      const Pe2 = L2.uint32();
      switch (Pe2 >>> 3) {
        case 1:
          oe2.hosted = a420.HostedWebRtc.decode(L2, L2.uint32());
          break;
        default:
          L2.skipType(Pe2 & 7);
          break;
      }
    }
    return oe2;
  }, fromJSON(S2) {
    return { hosted: Le2(S2.hosted) ? a420.HostedWebRtc.fromJSON(S2.hosted) : void 0 };
  }, toJSON(S2) {
    const M2 = {};
    return S2.hosted !== void 0 && (M2.hosted = S2.hosted ? a420.HostedWebRtc.toJSON(S2.hosted) : void 0), M2;
  }, fromPartial(S2) {
    const M2 = Et();
    return M2.hosted = S2.hosted !== void 0 && S2.hosted !== null ? a420.HostedWebRtc.fromPartial(S2.hosted) : void 0, M2;
  } };
  function Pt() {
    return { accessToken: "", participantId: void 0 };
  }
  a420.WebRtcAccess = { encode(S2, M2 = c.default.Writer.create()) {
    return S2.accessToken !== "" && M2.uint32(10).string(S2.accessToken), S2.participantId !== void 0 && M2.uint32(26).string(S2.participantId), M2;
  }, decode(S2, M2) {
    const L2 = S2 instanceof c.default.Reader ? S2 : new c.default.Reader(S2);
    let Ee2 = M2 === void 0 ? L2.len : L2.pos + M2;
    const oe2 = Pt();
    for (; L2.pos < Ee2; ) {
      const Pe2 = L2.uint32();
      switch (Pe2 >>> 3) {
        case 1:
          oe2.accessToken = L2.string();
          break;
        case 3:
          oe2.participantId = L2.string();
          break;
        default:
          L2.skipType(Pe2 & 7);
          break;
      }
    }
    return oe2;
  }, fromJSON(S2) {
    return { accessToken: Le2(S2.accessToken) ? String(S2.accessToken) : "", participantId: Le2(S2.participantId) ? String(S2.participantId) : void 0 };
  }, toJSON(S2) {
    const M2 = {};
    return S2.accessToken !== void 0 && (M2.accessToken = S2.accessToken), S2.participantId !== void 0 && (M2.participantId = S2.participantId), M2;
  }, fromPartial(S2) {
    var M2, L2;
    const Ee2 = Pt();
    return Ee2.accessToken = (M2 = S2.accessToken) !== null && M2 !== void 0 ? M2 : "", Ee2.participantId = (L2 = S2.participantId) !== null && L2 !== void 0 ? L2 : void 0, Ee2;
  } };
  function Nt() {
    return { latitude: 0, longitude: 0 };
  }
  a420.LatLong = { encode(S2, M2 = c.default.Writer.create()) {
    return S2.latitude !== 0 && M2.uint32(9).double(S2.latitude), S2.longitude !== 0 && M2.uint32(17).double(S2.longitude), M2;
  }, decode(S2, M2) {
    const L2 = S2 instanceof c.default.Reader ? S2 : new c.default.Reader(S2);
    let Ee2 = M2 === void 0 ? L2.len : L2.pos + M2;
    const oe2 = Nt();
    for (; L2.pos < Ee2; ) {
      const Pe2 = L2.uint32();
      switch (Pe2 >>> 3) {
        case 1:
          oe2.latitude = L2.double();
          break;
        case 2:
          oe2.longitude = L2.double();
          break;
        default:
          L2.skipType(Pe2 & 7);
          break;
      }
    }
    return oe2;
  }, fromJSON(S2) {
    return { latitude: Le2(S2.latitude) ? Number(S2.latitude) : 0, longitude: Le2(S2.longitude) ? Number(S2.longitude) : 0 };
  }, toJSON(S2) {
    const M2 = {};
    return S2.latitude !== void 0 && (M2.latitude = S2.latitude), S2.longitude !== void 0 && (M2.longitude = S2.longitude), M2;
  }, fromPartial(S2) {
    var M2, L2;
    const Ee2 = Nt();
    return Ee2.latitude = (M2 = S2.latitude) !== null && M2 !== void 0 ? M2 : 0, Ee2.longitude = (L2 = S2.longitude) !== null && L2 !== void 0 ? L2 : 0, Ee2;
  } };
  function Mt() {
    return { collectionId: "", projectId: "", broadcastId: void 0, duration: void 0, start: void 0, stop: void 0, phase: me2.PROJECT_BROADCAST_PHASE_UNSPECIFIED, region: void 0, datacenter: void 0 };
  }
  a420.ProjectBroadcastStatus = { encode(S2, M2 = c.default.Writer.create()) {
    return S2.collectionId !== "" && M2.uint32(10).string(S2.collectionId), S2.projectId !== "" && M2.uint32(18).string(S2.projectId), S2.broadcastId !== void 0 && M2.uint32(26).string(S2.broadcastId), S2.duration !== void 0 && M2.uint32(32).uint32(S2.duration), S2.start !== void 0 && _.Timestamp.encode(Ht(S2.start), M2.uint32(42).fork()).ldelim(), S2.stop !== void 0 && _.Timestamp.encode(Ht(S2.stop), M2.uint32(50).fork()).ldelim(), S2.phase !== me2.PROJECT_BROADCAST_PHASE_UNSPECIFIED && M2.uint32(56).int32(ye2(S2.phase)), S2.region !== void 0 && M2.uint32(64).int32(je2(S2.region)), S2.datacenter !== void 0 && M2.uint32(74).string(S2.datacenter), M2;
  }, decode(S2, M2) {
    const L2 = S2 instanceof c.default.Reader ? S2 : new c.default.Reader(S2);
    let Ee2 = M2 === void 0 ? L2.len : L2.pos + M2;
    const oe2 = Mt();
    for (; L2.pos < Ee2; ) {
      const Pe2 = L2.uint32();
      switch (Pe2 >>> 3) {
        case 1:
          oe2.collectionId = L2.string();
          break;
        case 2:
          oe2.projectId = L2.string();
          break;
        case 3:
          oe2.broadcastId = L2.string();
          break;
        case 4:
          oe2.duration = L2.uint32();
          break;
        case 5:
          oe2.start = zt(_.Timestamp.decode(L2, L2.uint32()));
          break;
        case 6:
          oe2.stop = zt(_.Timestamp.decode(L2, L2.uint32()));
          break;
        case 7:
          oe2.phase = Ie2(L2.int32());
          break;
        case 8:
          oe2.region = Oe2(L2.int32());
          break;
        case 9:
          oe2.datacenter = L2.string();
          break;
        default:
          L2.skipType(Pe2 & 7);
          break;
      }
    }
    return oe2;
  }, fromJSON(S2) {
    return { collectionId: Le2(S2.collectionId) ? String(S2.collectionId) : "", projectId: Le2(S2.projectId) ? String(S2.projectId) : "", broadcastId: Le2(S2.broadcastId) ? String(S2.broadcastId) : void 0, duration: Le2(S2.duration) ? Number(S2.duration) : void 0, start: Le2(S2.start) ? String(S2.start) : void 0, stop: Le2(S2.stop) ? String(S2.stop) : void 0, phase: Le2(S2.phase) ? Ie2(S2.phase) : me2.PROJECT_BROADCAST_PHASE_UNSPECIFIED, region: Le2(S2.region) ? Oe2(S2.region) : void 0, datacenter: Le2(S2.datacenter) ? String(S2.datacenter) : void 0 };
  }, toJSON(S2) {
    const M2 = {};
    return S2.collectionId !== void 0 && (M2.collectionId = S2.collectionId), S2.projectId !== void 0 && (M2.projectId = S2.projectId), S2.broadcastId !== void 0 && (M2.broadcastId = S2.broadcastId), S2.duration !== void 0 && (M2.duration = Math.round(S2.duration)), S2.start !== void 0 && (M2.start = S2.start), S2.stop !== void 0 && (M2.stop = S2.stop), S2.phase !== void 0 && (M2.phase = $e2(S2.phase)), S2.region !== void 0 && (M2.region = S2.region !== void 0 ? qe2(S2.region) : void 0), S2.datacenter !== void 0 && (M2.datacenter = S2.datacenter), M2;
  }, fromPartial(S2) {
    var M2, L2, Ee2, oe2, Pe2, bt, At, Dt, Lt;
    const Ft = Mt();
    return Ft.collectionId = (M2 = S2.collectionId) !== null && M2 !== void 0 ? M2 : "", Ft.projectId = (L2 = S2.projectId) !== null && L2 !== void 0 ? L2 : "", Ft.broadcastId = (Ee2 = S2.broadcastId) !== null && Ee2 !== void 0 ? Ee2 : void 0, Ft.duration = (oe2 = S2.duration) !== null && oe2 !== void 0 ? oe2 : void 0, Ft.start = (Pe2 = S2.start) !== null && Pe2 !== void 0 ? Pe2 : void 0, Ft.stop = (bt = S2.stop) !== null && bt !== void 0 ? bt : void 0, Ft.phase = (At = S2.phase) !== null && At !== void 0 ? At : me2.PROJECT_BROADCAST_PHASE_UNSPECIFIED, Ft.region = (Dt = S2.region) !== null && Dt !== void 0 ? Dt : void 0, Ft.datacenter = (Lt = S2.datacenter) !== null && Lt !== void 0 ? Lt : void 0, Ft;
  } };
  function Ot() {
    return { collectionId: "", sourceId: "", metadata: void 0, preview: void 0, address: void 0 };
  }
  a420.Source = { encode(S2, M2 = c.default.Writer.create()) {
    return S2.collectionId !== "" && M2.uint32(10).string(S2.collectionId), S2.sourceId !== "" && M2.uint32(18).string(S2.sourceId), S2.metadata !== void 0 && p2.Value.encode(p2.Value.wrap(S2.metadata), M2.uint32(26).fork()).ldelim(), S2.preview !== void 0 && a420.PreviewAddress.encode(S2.preview, M2.uint32(34).fork()).ldelim(), S2.address !== void 0 && a420.SourceAddress.encode(S2.address, M2.uint32(50).fork()).ldelim(), M2;
  }, decode(S2, M2) {
    const L2 = S2 instanceof c.default.Reader ? S2 : new c.default.Reader(S2);
    let Ee2 = M2 === void 0 ? L2.len : L2.pos + M2;
    const oe2 = Ot();
    for (; L2.pos < Ee2; ) {
      const Pe2 = L2.uint32();
      switch (Pe2 >>> 3) {
        case 1:
          oe2.collectionId = L2.string();
          break;
        case 2:
          oe2.sourceId = L2.string();
          break;
        case 3:
          oe2.metadata = p2.Value.unwrap(p2.Value.decode(L2, L2.uint32()));
          break;
        case 4:
          oe2.preview = a420.PreviewAddress.decode(L2, L2.uint32());
          break;
        case 6:
          oe2.address = a420.SourceAddress.decode(L2, L2.uint32());
          break;
        default:
          L2.skipType(Pe2 & 7);
          break;
      }
    }
    return oe2;
  }, fromJSON(S2) {
    return { collectionId: Le2(S2.collectionId) ? String(S2.collectionId) : "", sourceId: Le2(S2.sourceId) ? String(S2.sourceId) : "", metadata: Le2(S2 == null ? void 0 : S2.metadata) ? S2.metadata : void 0, preview: Le2(S2.preview) ? a420.PreviewAddress.fromJSON(S2.preview) : void 0, address: Le2(S2.address) ? a420.SourceAddress.fromJSON(S2.address) : void 0 };
  }, toJSON(S2) {
    const M2 = {};
    return S2.collectionId !== void 0 && (M2.collectionId = S2.collectionId), S2.sourceId !== void 0 && (M2.sourceId = S2.sourceId), S2.metadata !== void 0 && (M2.metadata = S2.metadata), S2.preview !== void 0 && (M2.preview = S2.preview ? a420.PreviewAddress.toJSON(S2.preview) : void 0), S2.address !== void 0 && (M2.address = S2.address ? a420.SourceAddress.toJSON(S2.address) : void 0), M2;
  }, fromPartial(S2) {
    var M2, L2, Ee2;
    const oe2 = Ot();
    return oe2.collectionId = (M2 = S2.collectionId) !== null && M2 !== void 0 ? M2 : "", oe2.sourceId = (L2 = S2.sourceId) !== null && L2 !== void 0 ? L2 : "", oe2.metadata = (Ee2 = S2.metadata) !== null && Ee2 !== void 0 ? Ee2 : void 0, oe2.preview = S2.preview !== void 0 && S2.preview !== null ? a420.PreviewAddress.fromPartial(S2.preview) : void 0, oe2.address = S2.address !== void 0 && S2.address !== null ? a420.SourceAddress.fromPartial(S2.address) : void 0, oe2;
  } };
  function $t() {
    return { collectionId: "", projectId: "", destinationId: "", metadata: void 0, enabled: void 0, address: void 0, timeout: void 0 };
  }
  a420.Destination = { encode(S2, M2 = c.default.Writer.create()) {
    return S2.collectionId !== "" && M2.uint32(10).string(S2.collectionId), S2.projectId !== "" && M2.uint32(18).string(S2.projectId), S2.destinationId !== "" && M2.uint32(26).string(S2.destinationId), S2.metadata !== void 0 && p2.Value.encode(p2.Value.wrap(S2.metadata), M2.uint32(34).fork()).ldelim(), S2.enabled !== void 0 && M2.uint32(40).bool(S2.enabled), S2.address !== void 0 && a420.DestinationAddress.encode(S2.address, M2.uint32(50).fork()).ldelim(), S2.timeout !== void 0 && M2.uint32(56).uint32(S2.timeout), M2;
  }, decode(S2, M2) {
    const L2 = S2 instanceof c.default.Reader ? S2 : new c.default.Reader(S2);
    let Ee2 = M2 === void 0 ? L2.len : L2.pos + M2;
    const oe2 = $t();
    for (; L2.pos < Ee2; ) {
      const Pe2 = L2.uint32();
      switch (Pe2 >>> 3) {
        case 1:
          oe2.collectionId = L2.string();
          break;
        case 2:
          oe2.projectId = L2.string();
          break;
        case 3:
          oe2.destinationId = L2.string();
          break;
        case 4:
          oe2.metadata = p2.Value.unwrap(p2.Value.decode(L2, L2.uint32()));
          break;
        case 5:
          oe2.enabled = L2.bool();
          break;
        case 6:
          oe2.address = a420.DestinationAddress.decode(L2, L2.uint32());
          break;
        case 7:
          oe2.timeout = L2.uint32();
          break;
        default:
          L2.skipType(Pe2 & 7);
          break;
      }
    }
    return oe2;
  }, fromJSON(S2) {
    return { collectionId: Le2(S2.collectionId) ? String(S2.collectionId) : "", projectId: Le2(S2.projectId) ? String(S2.projectId) : "", destinationId: Le2(S2.destinationId) ? String(S2.destinationId) : "", metadata: Le2(S2 == null ? void 0 : S2.metadata) ? S2.metadata : void 0, enabled: Le2(S2.enabled) ? !!S2.enabled : void 0, address: Le2(S2.address) ? a420.DestinationAddress.fromJSON(S2.address) : void 0, timeout: Le2(S2.timeout) ? Number(S2.timeout) : void 0 };
  }, toJSON(S2) {
    const M2 = {};
    return S2.collectionId !== void 0 && (M2.collectionId = S2.collectionId), S2.projectId !== void 0 && (M2.projectId = S2.projectId), S2.destinationId !== void 0 && (M2.destinationId = S2.destinationId), S2.metadata !== void 0 && (M2.metadata = S2.metadata), S2.enabled !== void 0 && (M2.enabled = S2.enabled), S2.address !== void 0 && (M2.address = S2.address ? a420.DestinationAddress.toJSON(S2.address) : void 0), S2.timeout !== void 0 && (M2.timeout = Math.round(S2.timeout)), M2;
  }, fromPartial(S2) {
    var M2, L2, Ee2, oe2, Pe2, bt;
    const At = $t();
    return At.collectionId = (M2 = S2.collectionId) !== null && M2 !== void 0 ? M2 : "", At.projectId = (L2 = S2.projectId) !== null && L2 !== void 0 ? L2 : "", At.destinationId = (Ee2 = S2.destinationId) !== null && Ee2 !== void 0 ? Ee2 : "", At.metadata = (oe2 = S2.metadata) !== null && oe2 !== void 0 ? oe2 : void 0, At.enabled = (Pe2 = S2.enabled) !== null && Pe2 !== void 0 ? Pe2 : void 0, At.address = S2.address !== void 0 && S2.address !== null ? a420.DestinationAddress.fromPartial(S2.address) : void 0, At.timeout = (bt = S2.timeout) !== null && bt !== void 0 ? bt : void 0, At;
  } };
  function Bt() {
    return { collectionId: "", projectId: "", metadata: void 0, rendering: void 0, encoding: void 0, sources: [], destinations: [], composition: void 0, maxDuration: void 0, webrtc: void 0, triggers: [], location: void 0, guestCodes: [] };
  }
  a420.Project = { encode(S2, M2 = c.default.Writer.create()) {
    S2.collectionId !== "" && M2.uint32(10).string(S2.collectionId), S2.projectId !== "" && M2.uint32(18).string(S2.projectId), S2.metadata !== void 0 && p2.Value.encode(p2.Value.wrap(S2.metadata), M2.uint32(26).fork()).ldelim(), S2.rendering !== void 0 && a420.Rendering.encode(S2.rendering, M2.uint32(34).fork()).ldelim(), S2.encoding !== void 0 && a420.Encoding.encode(S2.encoding, M2.uint32(42).fork()).ldelim();
    for (const L2 of S2.sources)
      a420.Source.encode(L2, M2.uint32(50).fork()).ldelim();
    for (const L2 of S2.destinations)
      a420.Destination.encode(L2, M2.uint32(58).fork()).ldelim();
    S2.composition !== void 0 && a420.Composition.encode(S2.composition, M2.uint32(66).fork()).ldelim(), S2.maxDuration !== void 0 && M2.uint32(72).uint32(S2.maxDuration), S2.webrtc !== void 0 && a420.WebRtc.encode(S2.webrtc, M2.uint32(82).fork()).ldelim();
    for (const L2 of S2.triggers)
      a420.ProjectTrigger.encode(L2, M2.uint32(90).fork()).ldelim();
    S2.location !== void 0 && a420.LatLong.encode(S2.location, M2.uint32(98).fork()).ldelim();
    for (const L2 of S2.guestCodes)
      a420.GuestCode.encode(L2, M2.uint32(106).fork()).ldelim();
    return M2;
  }, decode(S2, M2) {
    const L2 = S2 instanceof c.default.Reader ? S2 : new c.default.Reader(S2);
    let Ee2 = M2 === void 0 ? L2.len : L2.pos + M2;
    const oe2 = Bt();
    for (; L2.pos < Ee2; ) {
      const Pe2 = L2.uint32();
      switch (Pe2 >>> 3) {
        case 1:
          oe2.collectionId = L2.string();
          break;
        case 2:
          oe2.projectId = L2.string();
          break;
        case 3:
          oe2.metadata = p2.Value.unwrap(p2.Value.decode(L2, L2.uint32()));
          break;
        case 4:
          oe2.rendering = a420.Rendering.decode(L2, L2.uint32());
          break;
        case 5:
          oe2.encoding = a420.Encoding.decode(L2, L2.uint32());
          break;
        case 6:
          oe2.sources.push(a420.Source.decode(L2, L2.uint32()));
          break;
        case 7:
          oe2.destinations.push(a420.Destination.decode(L2, L2.uint32()));
          break;
        case 8:
          oe2.composition = a420.Composition.decode(L2, L2.uint32());
          break;
        case 9:
          oe2.maxDuration = L2.uint32();
          break;
        case 10:
          oe2.webrtc = a420.WebRtc.decode(L2, L2.uint32());
          break;
        case 11:
          oe2.triggers.push(a420.ProjectTrigger.decode(L2, L2.uint32()));
          break;
        case 12:
          oe2.location = a420.LatLong.decode(L2, L2.uint32());
          break;
        case 13:
          oe2.guestCodes.push(a420.GuestCode.decode(L2, L2.uint32()));
          break;
        default:
          L2.skipType(Pe2 & 7);
          break;
      }
    }
    return oe2;
  }, fromJSON(S2) {
    return { collectionId: Le2(S2.collectionId) ? String(S2.collectionId) : "", projectId: Le2(S2.projectId) ? String(S2.projectId) : "", metadata: Le2(S2 == null ? void 0 : S2.metadata) ? S2.metadata : void 0, rendering: Le2(S2.rendering) ? a420.Rendering.fromJSON(S2.rendering) : void 0, encoding: Le2(S2.encoding) ? a420.Encoding.fromJSON(S2.encoding) : void 0, sources: Array.isArray(S2 == null ? void 0 : S2.sources) ? S2.sources.map((M2) => a420.Source.fromJSON(M2)) : [], destinations: Array.isArray(S2 == null ? void 0 : S2.destinations) ? S2.destinations.map((M2) => a420.Destination.fromJSON(M2)) : [], composition: Le2(S2.composition) ? a420.Composition.fromJSON(S2.composition) : void 0, maxDuration: Le2(S2.maxDuration) ? Number(S2.maxDuration) : void 0, webrtc: Le2(S2.webrtc) ? a420.WebRtc.fromJSON(S2.webrtc) : void 0, triggers: Array.isArray(S2 == null ? void 0 : S2.triggers) ? S2.triggers.map((M2) => a420.ProjectTrigger.fromJSON(M2)) : [], location: Le2(S2.location) ? a420.LatLong.fromJSON(S2.location) : void 0, guestCodes: Array.isArray(S2 == null ? void 0 : S2.guestCodes) ? S2.guestCodes.map((M2) => a420.GuestCode.fromJSON(M2)) : [] };
  }, toJSON(S2) {
    const M2 = {};
    return S2.collectionId !== void 0 && (M2.collectionId = S2.collectionId), S2.projectId !== void 0 && (M2.projectId = S2.projectId), S2.metadata !== void 0 && (M2.metadata = S2.metadata), S2.rendering !== void 0 && (M2.rendering = S2.rendering ? a420.Rendering.toJSON(S2.rendering) : void 0), S2.encoding !== void 0 && (M2.encoding = S2.encoding ? a420.Encoding.toJSON(S2.encoding) : void 0), S2.sources ? M2.sources = S2.sources.map((L2) => L2 ? a420.Source.toJSON(L2) : void 0) : M2.sources = [], S2.destinations ? M2.destinations = S2.destinations.map((L2) => L2 ? a420.Destination.toJSON(L2) : void 0) : M2.destinations = [], S2.composition !== void 0 && (M2.composition = S2.composition ? a420.Composition.toJSON(S2.composition) : void 0), S2.maxDuration !== void 0 && (M2.maxDuration = Math.round(S2.maxDuration)), S2.webrtc !== void 0 && (M2.webrtc = S2.webrtc ? a420.WebRtc.toJSON(S2.webrtc) : void 0), S2.triggers ? M2.triggers = S2.triggers.map((L2) => L2 ? a420.ProjectTrigger.toJSON(L2) : void 0) : M2.triggers = [], S2.location !== void 0 && (M2.location = S2.location ? a420.LatLong.toJSON(S2.location) : void 0), S2.guestCodes ? M2.guestCodes = S2.guestCodes.map((L2) => L2 ? a420.GuestCode.toJSON(L2) : void 0) : M2.guestCodes = [], M2;
  }, fromPartial(S2) {
    var M2, L2, Ee2, oe2, Pe2, bt, At, Dt;
    const Lt = Bt();
    return Lt.collectionId = (M2 = S2.collectionId) !== null && M2 !== void 0 ? M2 : "", Lt.projectId = (L2 = S2.projectId) !== null && L2 !== void 0 ? L2 : "", Lt.metadata = (Ee2 = S2.metadata) !== null && Ee2 !== void 0 ? Ee2 : void 0, Lt.rendering = S2.rendering !== void 0 && S2.rendering !== null ? a420.Rendering.fromPartial(S2.rendering) : void 0, Lt.encoding = S2.encoding !== void 0 && S2.encoding !== null ? a420.Encoding.fromPartial(S2.encoding) : void 0, Lt.sources = ((oe2 = S2.sources) === null || oe2 === void 0 ? void 0 : oe2.map((Ft) => a420.Source.fromPartial(Ft))) || [], Lt.destinations = ((Pe2 = S2.destinations) === null || Pe2 === void 0 ? void 0 : Pe2.map((Ft) => a420.Destination.fromPartial(Ft))) || [], Lt.composition = S2.composition !== void 0 && S2.composition !== null ? a420.Composition.fromPartial(S2.composition) : void 0, Lt.maxDuration = (bt = S2.maxDuration) !== null && bt !== void 0 ? bt : void 0, Lt.webrtc = S2.webrtc !== void 0 && S2.webrtc !== null ? a420.WebRtc.fromPartial(S2.webrtc) : void 0, Lt.triggers = ((At = S2.triggers) === null || At === void 0 ? void 0 : At.map((Ft) => a420.ProjectTrigger.fromPartial(Ft))) || [], Lt.location = S2.location !== void 0 && S2.location !== null ? a420.LatLong.fromPartial(S2.location) : void 0, Lt.guestCodes = ((Dt = S2.guestCodes) === null || Dt === void 0 ? void 0 : Dt.map((Ft) => a420.GuestCode.fromPartial(Ft))) || [], Lt;
  } };
  function xt() {
    return { collectionId: "", metadata: void 0, projects: [], sources: [] };
  }
  a420.Collection = { encode(S2, M2 = c.default.Writer.create()) {
    S2.collectionId !== "" && M2.uint32(10).string(S2.collectionId), S2.metadata !== void 0 && p2.Value.encode(p2.Value.wrap(S2.metadata), M2.uint32(18).fork()).ldelim();
    for (const L2 of S2.projects)
      a420.Project.encode(L2, M2.uint32(26).fork()).ldelim();
    for (const L2 of S2.sources)
      a420.Source.encode(L2, M2.uint32(34).fork()).ldelim();
    return M2;
  }, decode(S2, M2) {
    const L2 = S2 instanceof c.default.Reader ? S2 : new c.default.Reader(S2);
    let Ee2 = M2 === void 0 ? L2.len : L2.pos + M2;
    const oe2 = xt();
    for (; L2.pos < Ee2; ) {
      const Pe2 = L2.uint32();
      switch (Pe2 >>> 3) {
        case 1:
          oe2.collectionId = L2.string();
          break;
        case 2:
          oe2.metadata = p2.Value.unwrap(p2.Value.decode(L2, L2.uint32()));
          break;
        case 3:
          oe2.projects.push(a420.Project.decode(L2, L2.uint32()));
          break;
        case 4:
          oe2.sources.push(a420.Source.decode(L2, L2.uint32()));
          break;
        default:
          L2.skipType(Pe2 & 7);
          break;
      }
    }
    return oe2;
  }, fromJSON(S2) {
    return { collectionId: Le2(S2.collectionId) ? String(S2.collectionId) : "", metadata: Le2(S2 == null ? void 0 : S2.metadata) ? S2.metadata : void 0, projects: Array.isArray(S2 == null ? void 0 : S2.projects) ? S2.projects.map((M2) => a420.Project.fromJSON(M2)) : [], sources: Array.isArray(S2 == null ? void 0 : S2.sources) ? S2.sources.map((M2) => a420.Source.fromJSON(M2)) : [] };
  }, toJSON(S2) {
    const M2 = {};
    return S2.collectionId !== void 0 && (M2.collectionId = S2.collectionId), S2.metadata !== void 0 && (M2.metadata = S2.metadata), S2.projects ? M2.projects = S2.projects.map((L2) => L2 ? a420.Project.toJSON(L2) : void 0) : M2.projects = [], S2.sources ? M2.sources = S2.sources.map((L2) => L2 ? a420.Source.toJSON(L2) : void 0) : M2.sources = [], M2;
  }, fromPartial(S2) {
    var M2, L2, Ee2, oe2;
    const Pe2 = xt();
    return Pe2.collectionId = (M2 = S2.collectionId) !== null && M2 !== void 0 ? M2 : "", Pe2.metadata = (L2 = S2.metadata) !== null && L2 !== void 0 ? L2 : void 0, Pe2.projects = ((Ee2 = S2.projects) === null || Ee2 === void 0 ? void 0 : Ee2.map((bt) => a420.Project.fromPartial(bt))) || [], Pe2.sources = ((oe2 = S2.sources) === null || oe2 === void 0 ? void 0 : oe2.map((bt) => a420.Source.fromPartial(bt))) || [], Pe2;
  } };
  function Ut() {
    return { metadata: void 0 };
  }
  a420.CreateCollectionRequest = { encode(S2, M2 = c.default.Writer.create()) {
    return S2.metadata !== void 0 && p2.Value.encode(p2.Value.wrap(S2.metadata), M2.uint32(10).fork()).ldelim(), M2;
  }, decode(S2, M2) {
    const L2 = S2 instanceof c.default.Reader ? S2 : new c.default.Reader(S2);
    let Ee2 = M2 === void 0 ? L2.len : L2.pos + M2;
    const oe2 = Ut();
    for (; L2.pos < Ee2; ) {
      const Pe2 = L2.uint32();
      switch (Pe2 >>> 3) {
        case 1:
          oe2.metadata = p2.Value.unwrap(p2.Value.decode(L2, L2.uint32()));
          break;
        default:
          L2.skipType(Pe2 & 7);
          break;
      }
    }
    return oe2;
  }, fromJSON(S2) {
    return { metadata: Le2(S2 == null ? void 0 : S2.metadata) ? S2.metadata : void 0 };
  }, toJSON(S2) {
    const M2 = {};
    return S2.metadata !== void 0 && (M2.metadata = S2.metadata), M2;
  }, fromPartial(S2) {
    var M2;
    const L2 = Ut();
    return L2.metadata = (M2 = S2.metadata) !== null && M2 !== void 0 ? M2 : void 0, L2;
  } };
  function Jt() {
    return { collection: void 0 };
  }
  a420.CreateCollectionResponse = { encode(S2, M2 = c.default.Writer.create()) {
    return S2.collection !== void 0 && a420.Collection.encode(S2.collection, M2.uint32(10).fork()).ldelim(), M2;
  }, decode(S2, M2) {
    const L2 = S2 instanceof c.default.Reader ? S2 : new c.default.Reader(S2);
    let Ee2 = M2 === void 0 ? L2.len : L2.pos + M2;
    const oe2 = Jt();
    for (; L2.pos < Ee2; ) {
      const Pe2 = L2.uint32();
      switch (Pe2 >>> 3) {
        case 1:
          oe2.collection = a420.Collection.decode(L2, L2.uint32());
          break;
        default:
          L2.skipType(Pe2 & 7);
          break;
      }
    }
    return oe2;
  }, fromJSON(S2) {
    return { collection: Le2(S2.collection) ? a420.Collection.fromJSON(S2.collection) : void 0 };
  }, toJSON(S2) {
    const M2 = {};
    return S2.collection !== void 0 && (M2.collection = S2.collection ? a420.Collection.toJSON(S2.collection) : void 0), M2;
  }, fromPartial(S2) {
    const M2 = Jt();
    return M2.collection = S2.collection !== void 0 && S2.collection !== null ? a420.Collection.fromPartial(S2.collection) : void 0, M2;
  } };
  function Vt() {
    return { collectionId: "", populateProjects: void 0, populateSources: void 0 };
  }
  a420.GetCollectionRequest = { encode(S2, M2 = c.default.Writer.create()) {
    return S2.collectionId !== "" && M2.uint32(10).string(S2.collectionId), S2.populateProjects !== void 0 && M2.uint32(16).bool(S2.populateProjects), S2.populateSources !== void 0 && M2.uint32(24).bool(S2.populateSources), M2;
  }, decode(S2, M2) {
    const L2 = S2 instanceof c.default.Reader ? S2 : new c.default.Reader(S2);
    let Ee2 = M2 === void 0 ? L2.len : L2.pos + M2;
    const oe2 = Vt();
    for (; L2.pos < Ee2; ) {
      const Pe2 = L2.uint32();
      switch (Pe2 >>> 3) {
        case 1:
          oe2.collectionId = L2.string();
          break;
        case 2:
          oe2.populateProjects = L2.bool();
          break;
        case 3:
          oe2.populateSources = L2.bool();
          break;
        default:
          L2.skipType(Pe2 & 7);
          break;
      }
    }
    return oe2;
  }, fromJSON(S2) {
    return { collectionId: Le2(S2.collectionId) ? String(S2.collectionId) : "", populateProjects: Le2(S2.populateProjects) ? !!S2.populateProjects : void 0, populateSources: Le2(S2.populateSources) ? !!S2.populateSources : void 0 };
  }, toJSON(S2) {
    const M2 = {};
    return S2.collectionId !== void 0 && (M2.collectionId = S2.collectionId), S2.populateProjects !== void 0 && (M2.populateProjects = S2.populateProjects), S2.populateSources !== void 0 && (M2.populateSources = S2.populateSources), M2;
  }, fromPartial(S2) {
    var M2, L2, Ee2;
    const oe2 = Vt();
    return oe2.collectionId = (M2 = S2.collectionId) !== null && M2 !== void 0 ? M2 : "", oe2.populateProjects = (L2 = S2.populateProjects) !== null && L2 !== void 0 ? L2 : void 0, oe2.populateSources = (Ee2 = S2.populateSources) !== null && Ee2 !== void 0 ? Ee2 : void 0, oe2;
  } };
  function Yt() {
    return { collection: void 0 };
  }
  a420.GetCollectionResponse = { encode(S2, M2 = c.default.Writer.create()) {
    return S2.collection !== void 0 && a420.Collection.encode(S2.collection, M2.uint32(10).fork()).ldelim(), M2;
  }, decode(S2, M2) {
    const L2 = S2 instanceof c.default.Reader ? S2 : new c.default.Reader(S2);
    let Ee2 = M2 === void 0 ? L2.len : L2.pos + M2;
    const oe2 = Yt();
    for (; L2.pos < Ee2; ) {
      const Pe2 = L2.uint32();
      switch (Pe2 >>> 3) {
        case 1:
          oe2.collection = a420.Collection.decode(L2, L2.uint32());
          break;
        default:
          L2.skipType(Pe2 & 7);
          break;
      }
    }
    return oe2;
  }, fromJSON(S2) {
    return { collection: Le2(S2.collection) ? a420.Collection.fromJSON(S2.collection) : void 0 };
  }, toJSON(S2) {
    const M2 = {};
    return S2.collection !== void 0 && (M2.collection = S2.collection ? a420.Collection.toJSON(S2.collection) : void 0), M2;
  }, fromPartial(S2) {
    const M2 = Yt();
    return M2.collection = S2.collection !== void 0 && S2.collection !== null ? a420.Collection.fromPartial(S2.collection) : void 0, M2;
  } };
  function jt() {
    return { collectionId: "", updateMask: void 0, metadata: void 0 };
  }
  a420.UpdateCollectionRequest = { encode(S2, M2 = c.default.Writer.create()) {
    return S2.collectionId !== "" && M2.uint32(10).string(S2.collectionId), S2.updateMask !== void 0 && v2.FieldMask.encode(v2.FieldMask.wrap(S2.updateMask), M2.uint32(18).fork()).ldelim(), S2.metadata !== void 0 && p2.Value.encode(p2.Value.wrap(S2.metadata), M2.uint32(26).fork()).ldelim(), M2;
  }, decode(S2, M2) {
    const L2 = S2 instanceof c.default.Reader ? S2 : new c.default.Reader(S2);
    let Ee2 = M2 === void 0 ? L2.len : L2.pos + M2;
    const oe2 = jt();
    for (; L2.pos < Ee2; ) {
      const Pe2 = L2.uint32();
      switch (Pe2 >>> 3) {
        case 1:
          oe2.collectionId = L2.string();
          break;
        case 2:
          oe2.updateMask = v2.FieldMask.unwrap(v2.FieldMask.decode(L2, L2.uint32()));
          break;
        case 3:
          oe2.metadata = p2.Value.unwrap(p2.Value.decode(L2, L2.uint32()));
          break;
        default:
          L2.skipType(Pe2 & 7);
          break;
      }
    }
    return oe2;
  }, fromJSON(S2) {
    return { collectionId: Le2(S2.collectionId) ? String(S2.collectionId) : "", updateMask: Le2(S2.updateMask) ? v2.FieldMask.unwrap(v2.FieldMask.fromJSON(S2.updateMask)) : void 0, metadata: Le2(S2 == null ? void 0 : S2.metadata) ? S2.metadata : void 0 };
  }, toJSON(S2) {
    const M2 = {};
    return S2.collectionId !== void 0 && (M2.collectionId = S2.collectionId), S2.updateMask !== void 0 && (M2.updateMask = v2.FieldMask.toJSON(v2.FieldMask.wrap(S2.updateMask))), S2.metadata !== void 0 && (M2.metadata = S2.metadata), M2;
  }, fromPartial(S2) {
    var M2, L2, Ee2;
    const oe2 = jt();
    return oe2.collectionId = (M2 = S2.collectionId) !== null && M2 !== void 0 ? M2 : "", oe2.updateMask = (L2 = S2.updateMask) !== null && L2 !== void 0 ? L2 : void 0, oe2.metadata = (Ee2 = S2.metadata) !== null && Ee2 !== void 0 ? Ee2 : void 0, oe2;
  } };
  function Zt() {
    return { collection: void 0 };
  }
  a420.UpdateCollectionResponse = { encode(S2, M2 = c.default.Writer.create()) {
    return S2.collection !== void 0 && a420.Collection.encode(S2.collection, M2.uint32(10).fork()).ldelim(), M2;
  }, decode(S2, M2) {
    const L2 = S2 instanceof c.default.Reader ? S2 : new c.default.Reader(S2);
    let Ee2 = M2 === void 0 ? L2.len : L2.pos + M2;
    const oe2 = Zt();
    for (; L2.pos < Ee2; ) {
      const Pe2 = L2.uint32();
      switch (Pe2 >>> 3) {
        case 1:
          oe2.collection = a420.Collection.decode(L2, L2.uint32());
          break;
        default:
          L2.skipType(Pe2 & 7);
          break;
      }
    }
    return oe2;
  }, fromJSON(S2) {
    return { collection: Le2(S2.collection) ? a420.Collection.fromJSON(S2.collection) : void 0 };
  }, toJSON(S2) {
    const M2 = {};
    return S2.collection !== void 0 && (M2.collection = S2.collection ? a420.Collection.toJSON(S2.collection) : void 0), M2;
  }, fromPartial(S2) {
    const M2 = Zt();
    return M2.collection = S2.collection !== void 0 && S2.collection !== null ? a420.Collection.fromPartial(S2.collection) : void 0, M2;
  } };
  function Xt() {
    return { collectionId: "", force: void 0 };
  }
  a420.DeleteCollectionRequest = { encode(S2, M2 = c.default.Writer.create()) {
    return S2.collectionId !== "" && M2.uint32(10).string(S2.collectionId), S2.force !== void 0 && M2.uint32(16).bool(S2.force), M2;
  }, decode(S2, M2) {
    const L2 = S2 instanceof c.default.Reader ? S2 : new c.default.Reader(S2);
    let Ee2 = M2 === void 0 ? L2.len : L2.pos + M2;
    const oe2 = Xt();
    for (; L2.pos < Ee2; ) {
      const Pe2 = L2.uint32();
      switch (Pe2 >>> 3) {
        case 1:
          oe2.collectionId = L2.string();
          break;
        case 2:
          oe2.force = L2.bool();
          break;
        default:
          L2.skipType(Pe2 & 7);
          break;
      }
    }
    return oe2;
  }, fromJSON(S2) {
    return { collectionId: Le2(S2.collectionId) ? String(S2.collectionId) : "", force: Le2(S2.force) ? !!S2.force : void 0 };
  }, toJSON(S2) {
    const M2 = {};
    return S2.collectionId !== void 0 && (M2.collectionId = S2.collectionId), S2.force !== void 0 && (M2.force = S2.force), M2;
  }, fromPartial(S2) {
    var M2, L2;
    const Ee2 = Xt();
    return Ee2.collectionId = (M2 = S2.collectionId) !== null && M2 !== void 0 ? M2 : "", Ee2.force = (L2 = S2.force) !== null && L2 !== void 0 ? L2 : void 0, Ee2;
  } };
  function Qt() {
    return { sourcesDeleted: 0, projectsDeleted: 0, projectIdsStopped: [] };
  }
  a420.DeleteCollectionResponse = { encode(S2, M2 = c.default.Writer.create()) {
    S2.sourcesDeleted !== 0 && M2.uint32(8).uint32(S2.sourcesDeleted), S2.projectsDeleted !== 0 && M2.uint32(16).uint32(S2.projectsDeleted);
    for (const L2 of S2.projectIdsStopped)
      M2.uint32(26).string(L2);
    return M2;
  }, decode(S2, M2) {
    const L2 = S2 instanceof c.default.Reader ? S2 : new c.default.Reader(S2);
    let Ee2 = M2 === void 0 ? L2.len : L2.pos + M2;
    const oe2 = Qt();
    for (; L2.pos < Ee2; ) {
      const Pe2 = L2.uint32();
      switch (Pe2 >>> 3) {
        case 1:
          oe2.sourcesDeleted = L2.uint32();
          break;
        case 2:
          oe2.projectsDeleted = L2.uint32();
          break;
        case 3:
          oe2.projectIdsStopped.push(L2.string());
          break;
        default:
          L2.skipType(Pe2 & 7);
          break;
      }
    }
    return oe2;
  }, fromJSON(S2) {
    return { sourcesDeleted: Le2(S2.sourcesDeleted) ? Number(S2.sourcesDeleted) : 0, projectsDeleted: Le2(S2.projectsDeleted) ? Number(S2.projectsDeleted) : 0, projectIdsStopped: Array.isArray(S2 == null ? void 0 : S2.projectIdsStopped) ? S2.projectIdsStopped.map((M2) => String(M2)) : [] };
  }, toJSON(S2) {
    const M2 = {};
    return S2.sourcesDeleted !== void 0 && (M2.sourcesDeleted = Math.round(S2.sourcesDeleted)), S2.projectsDeleted !== void 0 && (M2.projectsDeleted = Math.round(S2.projectsDeleted)), S2.projectIdsStopped ? M2.projectIdsStopped = S2.projectIdsStopped.map((L2) => L2) : M2.projectIdsStopped = [], M2;
  }, fromPartial(S2) {
    var M2, L2, Ee2;
    const oe2 = Qt();
    return oe2.sourcesDeleted = (M2 = S2.sourcesDeleted) !== null && M2 !== void 0 ? M2 : 0, oe2.projectsDeleted = (L2 = S2.projectsDeleted) !== null && L2 !== void 0 ? L2 : 0, oe2.projectIdsStopped = ((Ee2 = S2.projectIdsStopped) === null || Ee2 === void 0 ? void 0 : Ee2.map((Pe2) => Pe2)) || [], oe2;
  } };
  function er() {
    return {};
  }
  a420.GetCollectionsRequest = { encode(S2, M2 = c.default.Writer.create()) {
    return M2;
  }, decode(S2, M2) {
    const L2 = S2 instanceof c.default.Reader ? S2 : new c.default.Reader(S2);
    let Ee2 = M2 === void 0 ? L2.len : L2.pos + M2;
    const oe2 = er();
    for (; L2.pos < Ee2; ) {
      const Pe2 = L2.uint32();
      switch (Pe2 >>> 3) {
        default:
          L2.skipType(Pe2 & 7);
          break;
      }
    }
    return oe2;
  }, fromJSON(S2) {
    return {};
  }, toJSON(S2) {
    return {};
  }, fromPartial(S2) {
    return er();
  } };
  function tr() {
    return { collections: [] };
  }
  a420.GetCollectionsResponse = { encode(S2, M2 = c.default.Writer.create()) {
    for (const L2 of S2.collections)
      a420.Collection.encode(L2, M2.uint32(10).fork()).ldelim();
    return M2;
  }, decode(S2, M2) {
    const L2 = S2 instanceof c.default.Reader ? S2 : new c.default.Reader(S2);
    let Ee2 = M2 === void 0 ? L2.len : L2.pos + M2;
    const oe2 = tr();
    for (; L2.pos < Ee2; ) {
      const Pe2 = L2.uint32();
      switch (Pe2 >>> 3) {
        case 1:
          oe2.collections.push(a420.Collection.decode(L2, L2.uint32()));
          break;
        default:
          L2.skipType(Pe2 & 7);
          break;
      }
    }
    return oe2;
  }, fromJSON(S2) {
    return { collections: Array.isArray(S2 == null ? void 0 : S2.collections) ? S2.collections.map((M2) => a420.Collection.fromJSON(M2)) : [] };
  }, toJSON(S2) {
    const M2 = {};
    return S2.collections ? M2.collections = S2.collections.map((L2) => L2 ? a420.Collection.toJSON(L2) : void 0) : M2.collections = [], M2;
  }, fromPartial(S2) {
    var M2;
    const L2 = tr();
    return L2.collections = ((M2 = S2.collections) === null || M2 === void 0 ? void 0 : M2.map((Ee2) => a420.Collection.fromPartial(Ee2))) || [], L2;
  } };
  function rr() {
    return { collectionId: "", metadata: void 0, rendering: void 0, encoding: void 0, composition: void 0, maxDuration: void 0, webrtc: void 0, location: void 0 };
  }
  a420.CreateProjectRequest = { encode(S2, M2 = c.default.Writer.create()) {
    return S2.collectionId !== "" && M2.uint32(10).string(S2.collectionId), S2.metadata !== void 0 && p2.Value.encode(p2.Value.wrap(S2.metadata), M2.uint32(18).fork()).ldelim(), S2.rendering !== void 0 && a420.Rendering.encode(S2.rendering, M2.uint32(26).fork()).ldelim(), S2.encoding !== void 0 && a420.Encoding.encode(S2.encoding, M2.uint32(34).fork()).ldelim(), S2.composition !== void 0 && a420.Composition.encode(S2.composition, M2.uint32(42).fork()).ldelim(), S2.maxDuration !== void 0 && M2.uint32(48).uint32(S2.maxDuration), S2.webrtc !== void 0 && a420.WebRtc.encode(S2.webrtc, M2.uint32(58).fork()).ldelim(), S2.location !== void 0 && a420.LatLong.encode(S2.location, M2.uint32(74).fork()).ldelim(), M2;
  }, decode(S2, M2) {
    const L2 = S2 instanceof c.default.Reader ? S2 : new c.default.Reader(S2);
    let Ee2 = M2 === void 0 ? L2.len : L2.pos + M2;
    const oe2 = rr();
    for (; L2.pos < Ee2; ) {
      const Pe2 = L2.uint32();
      switch (Pe2 >>> 3) {
        case 1:
          oe2.collectionId = L2.string();
          break;
        case 2:
          oe2.metadata = p2.Value.unwrap(p2.Value.decode(L2, L2.uint32()));
          break;
        case 3:
          oe2.rendering = a420.Rendering.decode(L2, L2.uint32());
          break;
        case 4:
          oe2.encoding = a420.Encoding.decode(L2, L2.uint32());
          break;
        case 5:
          oe2.composition = a420.Composition.decode(L2, L2.uint32());
          break;
        case 6:
          oe2.maxDuration = L2.uint32();
          break;
        case 7:
          oe2.webrtc = a420.WebRtc.decode(L2, L2.uint32());
          break;
        case 9:
          oe2.location = a420.LatLong.decode(L2, L2.uint32());
          break;
        default:
          L2.skipType(Pe2 & 7);
          break;
      }
    }
    return oe2;
  }, fromJSON(S2) {
    return { collectionId: Le2(S2.collectionId) ? String(S2.collectionId) : "", metadata: Le2(S2 == null ? void 0 : S2.metadata) ? S2.metadata : void 0, rendering: Le2(S2.rendering) ? a420.Rendering.fromJSON(S2.rendering) : void 0, encoding: Le2(S2.encoding) ? a420.Encoding.fromJSON(S2.encoding) : void 0, composition: Le2(S2.composition) ? a420.Composition.fromJSON(S2.composition) : void 0, maxDuration: Le2(S2.maxDuration) ? Number(S2.maxDuration) : void 0, webrtc: Le2(S2.webrtc) ? a420.WebRtc.fromJSON(S2.webrtc) : void 0, location: Le2(S2.location) ? a420.LatLong.fromJSON(S2.location) : void 0 };
  }, toJSON(S2) {
    const M2 = {};
    return S2.collectionId !== void 0 && (M2.collectionId = S2.collectionId), S2.metadata !== void 0 && (M2.metadata = S2.metadata), S2.rendering !== void 0 && (M2.rendering = S2.rendering ? a420.Rendering.toJSON(S2.rendering) : void 0), S2.encoding !== void 0 && (M2.encoding = S2.encoding ? a420.Encoding.toJSON(S2.encoding) : void 0), S2.composition !== void 0 && (M2.composition = S2.composition ? a420.Composition.toJSON(S2.composition) : void 0), S2.maxDuration !== void 0 && (M2.maxDuration = Math.round(S2.maxDuration)), S2.webrtc !== void 0 && (M2.webrtc = S2.webrtc ? a420.WebRtc.toJSON(S2.webrtc) : void 0), S2.location !== void 0 && (M2.location = S2.location ? a420.LatLong.toJSON(S2.location) : void 0), M2;
  }, fromPartial(S2) {
    var M2, L2, Ee2;
    const oe2 = rr();
    return oe2.collectionId = (M2 = S2.collectionId) !== null && M2 !== void 0 ? M2 : "", oe2.metadata = (L2 = S2.metadata) !== null && L2 !== void 0 ? L2 : void 0, oe2.rendering = S2.rendering !== void 0 && S2.rendering !== null ? a420.Rendering.fromPartial(S2.rendering) : void 0, oe2.encoding = S2.encoding !== void 0 && S2.encoding !== null ? a420.Encoding.fromPartial(S2.encoding) : void 0, oe2.composition = S2.composition !== void 0 && S2.composition !== null ? a420.Composition.fromPartial(S2.composition) : void 0, oe2.maxDuration = (Ee2 = S2.maxDuration) !== null && Ee2 !== void 0 ? Ee2 : void 0, oe2.webrtc = S2.webrtc !== void 0 && S2.webrtc !== null ? a420.WebRtc.fromPartial(S2.webrtc) : void 0, oe2.location = S2.location !== void 0 && S2.location !== null ? a420.LatLong.fromPartial(S2.location) : void 0, oe2;
  } };
  function nr() {
    return { project: void 0 };
  }
  a420.CreateProjectResponse = { encode(S2, M2 = c.default.Writer.create()) {
    return S2.project !== void 0 && a420.Project.encode(S2.project, M2.uint32(10).fork()).ldelim(), M2;
  }, decode(S2, M2) {
    const L2 = S2 instanceof c.default.Reader ? S2 : new c.default.Reader(S2);
    let Ee2 = M2 === void 0 ? L2.len : L2.pos + M2;
    const oe2 = nr();
    for (; L2.pos < Ee2; ) {
      const Pe2 = L2.uint32();
      switch (Pe2 >>> 3) {
        case 1:
          oe2.project = a420.Project.decode(L2, L2.uint32());
          break;
        default:
          L2.skipType(Pe2 & 7);
          break;
      }
    }
    return oe2;
  }, fromJSON(S2) {
    return { project: Le2(S2.project) ? a420.Project.fromJSON(S2.project) : void 0 };
  }, toJSON(S2) {
    const M2 = {};
    return S2.project !== void 0 && (M2.project = S2.project ? a420.Project.toJSON(S2.project) : void 0), M2;
  }, fromPartial(S2) {
    const M2 = nr();
    return M2.project = S2.project !== void 0 && S2.project !== null ? a420.Project.fromPartial(S2.project) : void 0, M2;
  } };
  function ir() {
    return { collectionId: "", projectId: "", updateMask: void 0, metadata: void 0, rendering: void 0, encoding: void 0, composition: void 0, maxDuration: void 0, webrtc: void 0, location: void 0 };
  }
  a420.UpdateProjectRequest = { encode(S2, M2 = c.default.Writer.create()) {
    return S2.collectionId !== "" && M2.uint32(10).string(S2.collectionId), S2.projectId !== "" && M2.uint32(18).string(S2.projectId), S2.updateMask !== void 0 && v2.FieldMask.encode(v2.FieldMask.wrap(S2.updateMask), M2.uint32(26).fork()).ldelim(), S2.metadata !== void 0 && p2.Value.encode(p2.Value.wrap(S2.metadata), M2.uint32(34).fork()).ldelim(), S2.rendering !== void 0 && a420.Rendering.encode(S2.rendering, M2.uint32(42).fork()).ldelim(), S2.encoding !== void 0 && a420.Encoding.encode(S2.encoding, M2.uint32(50).fork()).ldelim(), S2.composition !== void 0 && a420.Composition.encode(S2.composition, M2.uint32(58).fork()).ldelim(), S2.maxDuration !== void 0 && M2.uint32(64).uint32(S2.maxDuration), S2.webrtc !== void 0 && a420.WebRtc.encode(S2.webrtc, M2.uint32(74).fork()).ldelim(), S2.location !== void 0 && a420.LatLong.encode(S2.location, M2.uint32(82).fork()).ldelim(), M2;
  }, decode(S2, M2) {
    const L2 = S2 instanceof c.default.Reader ? S2 : new c.default.Reader(S2);
    let Ee2 = M2 === void 0 ? L2.len : L2.pos + M2;
    const oe2 = ir();
    for (; L2.pos < Ee2; ) {
      const Pe2 = L2.uint32();
      switch (Pe2 >>> 3) {
        case 1:
          oe2.collectionId = L2.string();
          break;
        case 2:
          oe2.projectId = L2.string();
          break;
        case 3:
          oe2.updateMask = v2.FieldMask.unwrap(v2.FieldMask.decode(L2, L2.uint32()));
          break;
        case 4:
          oe2.metadata = p2.Value.unwrap(p2.Value.decode(L2, L2.uint32()));
          break;
        case 5:
          oe2.rendering = a420.Rendering.decode(L2, L2.uint32());
          break;
        case 6:
          oe2.encoding = a420.Encoding.decode(L2, L2.uint32());
          break;
        case 7:
          oe2.composition = a420.Composition.decode(L2, L2.uint32());
          break;
        case 8:
          oe2.maxDuration = L2.uint32();
          break;
        case 9:
          oe2.webrtc = a420.WebRtc.decode(L2, L2.uint32());
          break;
        case 10:
          oe2.location = a420.LatLong.decode(L2, L2.uint32());
          break;
        default:
          L2.skipType(Pe2 & 7);
          break;
      }
    }
    return oe2;
  }, fromJSON(S2) {
    return { collectionId: Le2(S2.collectionId) ? String(S2.collectionId) : "", projectId: Le2(S2.projectId) ? String(S2.projectId) : "", updateMask: Le2(S2.updateMask) ? v2.FieldMask.unwrap(v2.FieldMask.fromJSON(S2.updateMask)) : void 0, metadata: Le2(S2 == null ? void 0 : S2.metadata) ? S2.metadata : void 0, rendering: Le2(S2.rendering) ? a420.Rendering.fromJSON(S2.rendering) : void 0, encoding: Le2(S2.encoding) ? a420.Encoding.fromJSON(S2.encoding) : void 0, composition: Le2(S2.composition) ? a420.Composition.fromJSON(S2.composition) : void 0, maxDuration: Le2(S2.maxDuration) ? Number(S2.maxDuration) : void 0, webrtc: Le2(S2.webrtc) ? a420.WebRtc.fromJSON(S2.webrtc) : void 0, location: Le2(S2.location) ? a420.LatLong.fromJSON(S2.location) : void 0 };
  }, toJSON(S2) {
    const M2 = {};
    return S2.collectionId !== void 0 && (M2.collectionId = S2.collectionId), S2.projectId !== void 0 && (M2.projectId = S2.projectId), S2.updateMask !== void 0 && (M2.updateMask = v2.FieldMask.toJSON(v2.FieldMask.wrap(S2.updateMask))), S2.metadata !== void 0 && (M2.metadata = S2.metadata), S2.rendering !== void 0 && (M2.rendering = S2.rendering ? a420.Rendering.toJSON(S2.rendering) : void 0), S2.encoding !== void 0 && (M2.encoding = S2.encoding ? a420.Encoding.toJSON(S2.encoding) : void 0), S2.composition !== void 0 && (M2.composition = S2.composition ? a420.Composition.toJSON(S2.composition) : void 0), S2.maxDuration !== void 0 && (M2.maxDuration = Math.round(S2.maxDuration)), S2.webrtc !== void 0 && (M2.webrtc = S2.webrtc ? a420.WebRtc.toJSON(S2.webrtc) : void 0), S2.location !== void 0 && (M2.location = S2.location ? a420.LatLong.toJSON(S2.location) : void 0), M2;
  }, fromPartial(S2) {
    var M2, L2, Ee2, oe2, Pe2;
    const bt = ir();
    return bt.collectionId = (M2 = S2.collectionId) !== null && M2 !== void 0 ? M2 : "", bt.projectId = (L2 = S2.projectId) !== null && L2 !== void 0 ? L2 : "", bt.updateMask = (Ee2 = S2.updateMask) !== null && Ee2 !== void 0 ? Ee2 : void 0, bt.metadata = (oe2 = S2.metadata) !== null && oe2 !== void 0 ? oe2 : void 0, bt.rendering = S2.rendering !== void 0 && S2.rendering !== null ? a420.Rendering.fromPartial(S2.rendering) : void 0, bt.encoding = S2.encoding !== void 0 && S2.encoding !== null ? a420.Encoding.fromPartial(S2.encoding) : void 0, bt.composition = S2.composition !== void 0 && S2.composition !== null ? a420.Composition.fromPartial(S2.composition) : void 0, bt.maxDuration = (Pe2 = S2.maxDuration) !== null && Pe2 !== void 0 ? Pe2 : void 0, bt.webrtc = S2.webrtc !== void 0 && S2.webrtc !== null ? a420.WebRtc.fromPartial(S2.webrtc) : void 0, bt.location = S2.location !== void 0 && S2.location !== null ? a420.LatLong.fromPartial(S2.location) : void 0, bt;
  } };
  function ar() {
    return { project: void 0, broadcastUpdated: false };
  }
  a420.UpdateProjectResponse = { encode(S2, M2 = c.default.Writer.create()) {
    return S2.project !== void 0 && a420.Project.encode(S2.project, M2.uint32(10).fork()).ldelim(), S2.broadcastUpdated === true && M2.uint32(16).bool(S2.broadcastUpdated), M2;
  }, decode(S2, M2) {
    const L2 = S2 instanceof c.default.Reader ? S2 : new c.default.Reader(S2);
    let Ee2 = M2 === void 0 ? L2.len : L2.pos + M2;
    const oe2 = ar();
    for (; L2.pos < Ee2; ) {
      const Pe2 = L2.uint32();
      switch (Pe2 >>> 3) {
        case 1:
          oe2.project = a420.Project.decode(L2, L2.uint32());
          break;
        case 2:
          oe2.broadcastUpdated = L2.bool();
          break;
        default:
          L2.skipType(Pe2 & 7);
          break;
      }
    }
    return oe2;
  }, fromJSON(S2) {
    return { project: Le2(S2.project) ? a420.Project.fromJSON(S2.project) : void 0, broadcastUpdated: Le2(S2.broadcastUpdated) ? !!S2.broadcastUpdated : false };
  }, toJSON(S2) {
    const M2 = {};
    return S2.project !== void 0 && (M2.project = S2.project ? a420.Project.toJSON(S2.project) : void 0), S2.broadcastUpdated !== void 0 && (M2.broadcastUpdated = S2.broadcastUpdated), M2;
  }, fromPartial(S2) {
    var M2;
    const L2 = ar();
    return L2.project = S2.project !== void 0 && S2.project !== null ? a420.Project.fromPartial(S2.project) : void 0, L2.broadcastUpdated = (M2 = S2.broadcastUpdated) !== null && M2 !== void 0 ? M2 : false, L2;
  } };
  function or() {
    return { collectionId: "", projectId: "", force: void 0 };
  }
  a420.DeleteProjectRequest = { encode(S2, M2 = c.default.Writer.create()) {
    return S2.collectionId !== "" && M2.uint32(10).string(S2.collectionId), S2.projectId !== "" && M2.uint32(18).string(S2.projectId), S2.force !== void 0 && M2.uint32(24).bool(S2.force), M2;
  }, decode(S2, M2) {
    const L2 = S2 instanceof c.default.Reader ? S2 : new c.default.Reader(S2);
    let Ee2 = M2 === void 0 ? L2.len : L2.pos + M2;
    const oe2 = or();
    for (; L2.pos < Ee2; ) {
      const Pe2 = L2.uint32();
      switch (Pe2 >>> 3) {
        case 1:
          oe2.collectionId = L2.string();
          break;
        case 2:
          oe2.projectId = L2.string();
          break;
        case 3:
          oe2.force = L2.bool();
          break;
        default:
          L2.skipType(Pe2 & 7);
          break;
      }
    }
    return oe2;
  }, fromJSON(S2) {
    return { collectionId: Le2(S2.collectionId) ? String(S2.collectionId) : "", projectId: Le2(S2.projectId) ? String(S2.projectId) : "", force: Le2(S2.force) ? !!S2.force : void 0 };
  }, toJSON(S2) {
    const M2 = {};
    return S2.collectionId !== void 0 && (M2.collectionId = S2.collectionId), S2.projectId !== void 0 && (M2.projectId = S2.projectId), S2.force !== void 0 && (M2.force = S2.force), M2;
  }, fromPartial(S2) {
    var M2, L2, Ee2;
    const oe2 = or();
    return oe2.collectionId = (M2 = S2.collectionId) !== null && M2 !== void 0 ? M2 : "", oe2.projectId = (L2 = S2.projectId) !== null && L2 !== void 0 ? L2 : "", oe2.force = (Ee2 = S2.force) !== null && Ee2 !== void 0 ? Ee2 : void 0, oe2;
  } };
  function ur() {
    return { broadcastStopped: false, layoutsDeleted: 0 };
  }
  a420.DeleteProjectResponse = { encode(S2, M2 = c.default.Writer.create()) {
    return S2.broadcastStopped === true && M2.uint32(8).bool(S2.broadcastStopped), S2.layoutsDeleted !== 0 && M2.uint32(16).uint32(S2.layoutsDeleted), M2;
  }, decode(S2, M2) {
    const L2 = S2 instanceof c.default.Reader ? S2 : new c.default.Reader(S2);
    let Ee2 = M2 === void 0 ? L2.len : L2.pos + M2;
    const oe2 = ur();
    for (; L2.pos < Ee2; ) {
      const Pe2 = L2.uint32();
      switch (Pe2 >>> 3) {
        case 1:
          oe2.broadcastStopped = L2.bool();
          break;
        case 2:
          oe2.layoutsDeleted = L2.uint32();
          break;
        default:
          L2.skipType(Pe2 & 7);
          break;
      }
    }
    return oe2;
  }, fromJSON(S2) {
    return { broadcastStopped: Le2(S2.broadcastStopped) ? !!S2.broadcastStopped : false, layoutsDeleted: Le2(S2.layoutsDeleted) ? Number(S2.layoutsDeleted) : 0 };
  }, toJSON(S2) {
    const M2 = {};
    return S2.broadcastStopped !== void 0 && (M2.broadcastStopped = S2.broadcastStopped), S2.layoutsDeleted !== void 0 && (M2.layoutsDeleted = Math.round(S2.layoutsDeleted)), M2;
  }, fromPartial(S2) {
    var M2, L2;
    const Ee2 = ur();
    return Ee2.broadcastStopped = (M2 = S2.broadcastStopped) !== null && M2 !== void 0 ? M2 : false, Ee2.layoutsDeleted = (L2 = S2.layoutsDeleted) !== null && L2 !== void 0 ? L2 : 0, Ee2;
  } };
  function dr() {
    return { collectionId: "", projectId: "", webrtcStart: void 0 };
  }
  a420.StartProjectBroadcastRequest = { encode(S2, M2 = c.default.Writer.create()) {
    return S2.collectionId !== "" && M2.uint32(10).string(S2.collectionId), S2.projectId !== "" && M2.uint32(18).string(S2.projectId), S2.webrtcStart !== void 0 && M2.uint32(24).bool(S2.webrtcStart), M2;
  }, decode(S2, M2) {
    const L2 = S2 instanceof c.default.Reader ? S2 : new c.default.Reader(S2);
    let Ee2 = M2 === void 0 ? L2.len : L2.pos + M2;
    const oe2 = dr();
    for (; L2.pos < Ee2; ) {
      const Pe2 = L2.uint32();
      switch (Pe2 >>> 3) {
        case 1:
          oe2.collectionId = L2.string();
          break;
        case 2:
          oe2.projectId = L2.string();
          break;
        case 3:
          oe2.webrtcStart = L2.bool();
          break;
        default:
          L2.skipType(Pe2 & 7);
          break;
      }
    }
    return oe2;
  }, fromJSON(S2) {
    return { collectionId: Le2(S2.collectionId) ? String(S2.collectionId) : "", projectId: Le2(S2.projectId) ? String(S2.projectId) : "", webrtcStart: Le2(S2.webrtcStart) ? !!S2.webrtcStart : void 0 };
  }, toJSON(S2) {
    const M2 = {};
    return S2.collectionId !== void 0 && (M2.collectionId = S2.collectionId), S2.projectId !== void 0 && (M2.projectId = S2.projectId), S2.webrtcStart !== void 0 && (M2.webrtcStart = S2.webrtcStart), M2;
  }, fromPartial(S2) {
    var M2, L2, Ee2;
    const oe2 = dr();
    return oe2.collectionId = (M2 = S2.collectionId) !== null && M2 !== void 0 ? M2 : "", oe2.projectId = (L2 = S2.projectId) !== null && L2 !== void 0 ? L2 : "", oe2.webrtcStart = (Ee2 = S2.webrtcStart) !== null && Ee2 !== void 0 ? Ee2 : void 0, oe2;
  } };
  function cr() {
    return { broadcastId: "" };
  }
  a420.StartProjectBroadcastResponse = { encode(S2, M2 = c.default.Writer.create()) {
    return S2.broadcastId !== "" && M2.uint32(10).string(S2.broadcastId), M2;
  }, decode(S2, M2) {
    const L2 = S2 instanceof c.default.Reader ? S2 : new c.default.Reader(S2);
    let Ee2 = M2 === void 0 ? L2.len : L2.pos + M2;
    const oe2 = cr();
    for (; L2.pos < Ee2; ) {
      const Pe2 = L2.uint32();
      switch (Pe2 >>> 3) {
        case 1:
          oe2.broadcastId = L2.string();
          break;
        default:
          L2.skipType(Pe2 & 7);
          break;
      }
    }
    return oe2;
  }, fromJSON(S2) {
    return { broadcastId: Le2(S2.broadcastId) ? String(S2.broadcastId) : "" };
  }, toJSON(S2) {
    const M2 = {};
    return S2.broadcastId !== void 0 && (M2.broadcastId = S2.broadcastId), M2;
  }, fromPartial(S2) {
    var M2;
    const L2 = cr();
    return L2.broadcastId = (M2 = S2.broadcastId) !== null && M2 !== void 0 ? M2 : "", L2;
  } };
  function lr() {
    return { collectionId: "", projectId: "", webrtcStop: void 0 };
  }
  a420.StopProjectBroadcastRequest = { encode(S2, M2 = c.default.Writer.create()) {
    return S2.collectionId !== "" && M2.uint32(10).string(S2.collectionId), S2.projectId !== "" && M2.uint32(18).string(S2.projectId), S2.webrtcStop !== void 0 && M2.uint32(24).bool(S2.webrtcStop), M2;
  }, decode(S2, M2) {
    const L2 = S2 instanceof c.default.Reader ? S2 : new c.default.Reader(S2);
    let Ee2 = M2 === void 0 ? L2.len : L2.pos + M2;
    const oe2 = lr();
    for (; L2.pos < Ee2; ) {
      const Pe2 = L2.uint32();
      switch (Pe2 >>> 3) {
        case 1:
          oe2.collectionId = L2.string();
          break;
        case 2:
          oe2.projectId = L2.string();
          break;
        case 3:
          oe2.webrtcStop = L2.bool();
          break;
        default:
          L2.skipType(Pe2 & 7);
          break;
      }
    }
    return oe2;
  }, fromJSON(S2) {
    return { collectionId: Le2(S2.collectionId) ? String(S2.collectionId) : "", projectId: Le2(S2.projectId) ? String(S2.projectId) : "", webrtcStop: Le2(S2.webrtcStop) ? !!S2.webrtcStop : void 0 };
  }, toJSON(S2) {
    const M2 = {};
    return S2.collectionId !== void 0 && (M2.collectionId = S2.collectionId), S2.projectId !== void 0 && (M2.projectId = S2.projectId), S2.webrtcStop !== void 0 && (M2.webrtcStop = S2.webrtcStop), M2;
  }, fromPartial(S2) {
    var M2, L2, Ee2;
    const oe2 = lr();
    return oe2.collectionId = (M2 = S2.collectionId) !== null && M2 !== void 0 ? M2 : "", oe2.projectId = (L2 = S2.projectId) !== null && L2 !== void 0 ? L2 : "", oe2.webrtcStop = (Ee2 = S2.webrtcStop) !== null && Ee2 !== void 0 ? Ee2 : void 0, oe2;
  } };
  function fr() {
    return {};
  }
  a420.StopProjectBroadcastResponse = { encode(S2, M2 = c.default.Writer.create()) {
    return M2;
  }, decode(S2, M2) {
    const L2 = S2 instanceof c.default.Reader ? S2 : new c.default.Reader(S2);
    let Ee2 = M2 === void 0 ? L2.len : L2.pos + M2;
    const oe2 = fr();
    for (; L2.pos < Ee2; ) {
      const Pe2 = L2.uint32();
      switch (Pe2 >>> 3) {
        default:
          L2.skipType(Pe2 & 7);
          break;
      }
    }
    return oe2;
  }, fromJSON(S2) {
    return {};
  }, toJSON(S2) {
    return {};
  }, fromPartial(S2) {
    return fr();
  } };
  function pr() {
    return { collectionId: "", projectId: "", status: void 0 };
  }
  a420.GetProjectRequest = { encode(S2, M2 = c.default.Writer.create()) {
    return S2.collectionId !== "" && M2.uint32(10).string(S2.collectionId), S2.projectId !== "" && M2.uint32(18).string(S2.projectId), S2.status !== void 0 && M2.uint32(24).bool(S2.status), M2;
  }, decode(S2, M2) {
    const L2 = S2 instanceof c.default.Reader ? S2 : new c.default.Reader(S2);
    let Ee2 = M2 === void 0 ? L2.len : L2.pos + M2;
    const oe2 = pr();
    for (; L2.pos < Ee2; ) {
      const Pe2 = L2.uint32();
      switch (Pe2 >>> 3) {
        case 1:
          oe2.collectionId = L2.string();
          break;
        case 2:
          oe2.projectId = L2.string();
          break;
        case 3:
          oe2.status = L2.bool();
          break;
        default:
          L2.skipType(Pe2 & 7);
          break;
      }
    }
    return oe2;
  }, fromJSON(S2) {
    return { collectionId: Le2(S2.collectionId) ? String(S2.collectionId) : "", projectId: Le2(S2.projectId) ? String(S2.projectId) : "", status: Le2(S2.status) ? !!S2.status : void 0 };
  }, toJSON(S2) {
    const M2 = {};
    return S2.collectionId !== void 0 && (M2.collectionId = S2.collectionId), S2.projectId !== void 0 && (M2.projectId = S2.projectId), S2.status !== void 0 && (M2.status = S2.status), M2;
  }, fromPartial(S2) {
    var M2, L2, Ee2;
    const oe2 = pr();
    return oe2.collectionId = (M2 = S2.collectionId) !== null && M2 !== void 0 ? M2 : "", oe2.projectId = (L2 = S2.projectId) !== null && L2 !== void 0 ? L2 : "", oe2.status = (Ee2 = S2.status) !== null && Ee2 !== void 0 ? Ee2 : void 0, oe2;
  } };
  function vr() {
    return { project: void 0, status: void 0 };
  }
  a420.GetProjectResponse = { encode(S2, M2 = c.default.Writer.create()) {
    return S2.project !== void 0 && a420.Project.encode(S2.project, M2.uint32(10).fork()).ldelim(), S2.status !== void 0 && a420.ProjectBroadcastStatus.encode(S2.status, M2.uint32(18).fork()).ldelim(), M2;
  }, decode(S2, M2) {
    const L2 = S2 instanceof c.default.Reader ? S2 : new c.default.Reader(S2);
    let Ee2 = M2 === void 0 ? L2.len : L2.pos + M2;
    const oe2 = vr();
    for (; L2.pos < Ee2; ) {
      const Pe2 = L2.uint32();
      switch (Pe2 >>> 3) {
        case 1:
          oe2.project = a420.Project.decode(L2, L2.uint32());
          break;
        case 2:
          oe2.status = a420.ProjectBroadcastStatus.decode(L2, L2.uint32());
          break;
        default:
          L2.skipType(Pe2 & 7);
          break;
      }
    }
    return oe2;
  }, fromJSON(S2) {
    return { project: Le2(S2.project) ? a420.Project.fromJSON(S2.project) : void 0, status: Le2(S2.status) ? a420.ProjectBroadcastStatus.fromJSON(S2.status) : void 0 };
  }, toJSON(S2) {
    const M2 = {};
    return S2.project !== void 0 && (M2.project = S2.project ? a420.Project.toJSON(S2.project) : void 0), S2.status !== void 0 && (M2.status = S2.status ? a420.ProjectBroadcastStatus.toJSON(S2.status) : void 0), M2;
  }, fromPartial(S2) {
    const M2 = vr();
    return M2.project = S2.project !== void 0 && S2.project !== null ? a420.Project.fromPartial(S2.project) : void 0, M2.status = S2.status !== void 0 && S2.status !== null ? a420.ProjectBroadcastStatus.fromPartial(S2.status) : void 0, M2;
  } };
  function yr() {
    return { collectionId: "", projectId: "", format: void 0 };
  }
  a420.GetProjectBroadcastSnapshotRequest = { encode(S2, M2 = c.default.Writer.create()) {
    return S2.collectionId !== "" && M2.uint32(10).string(S2.collectionId), S2.projectId !== "" && M2.uint32(18).string(S2.projectId), S2.format !== void 0 && M2.uint32(24).int32(F2(S2.format)), M2;
  }, decode(S2, M2) {
    const L2 = S2 instanceof c.default.Reader ? S2 : new c.default.Reader(S2);
    let Ee2 = M2 === void 0 ? L2.len : L2.pos + M2;
    const oe2 = yr();
    for (; L2.pos < Ee2; ) {
      const Pe2 = L2.uint32();
      switch (Pe2 >>> 3) {
        case 1:
          oe2.collectionId = L2.string();
          break;
        case 2:
          oe2.projectId = L2.string();
          break;
        case 3:
          oe2.format = P2(L2.int32());
          break;
        default:
          L2.skipType(Pe2 & 7);
          break;
      }
    }
    return oe2;
  }, fromJSON(S2) {
    return { collectionId: Le2(S2.collectionId) ? String(S2.collectionId) : "", projectId: Le2(S2.projectId) ? String(S2.projectId) : "", format: Le2(S2.format) ? P2(S2.format) : void 0 };
  }, toJSON(S2) {
    const M2 = {};
    return S2.collectionId !== void 0 && (M2.collectionId = S2.collectionId), S2.projectId !== void 0 && (M2.projectId = S2.projectId), S2.format !== void 0 && (M2.format = S2.format !== void 0 ? $(S2.format) : void 0), M2;
  }, fromPartial(S2) {
    var M2, L2, Ee2;
    const oe2 = yr();
    return oe2.collectionId = (M2 = S2.collectionId) !== null && M2 !== void 0 ? M2 : "", oe2.projectId = (L2 = S2.projectId) !== null && L2 !== void 0 ? L2 : "", oe2.format = (Ee2 = S2.format) !== null && Ee2 !== void 0 ? Ee2 : void 0, oe2;
  } };
  function gr() {
    return { format: I2.IMAGE_FORMAT_UNSPECIFIED, image: new Uint8Array() };
  }
  a420.GetProjectBroadcastSnapshotResponse = { encode(S2, M2 = c.default.Writer.create()) {
    return S2.format !== I2.IMAGE_FORMAT_UNSPECIFIED && M2.uint32(8).int32(F2(S2.format)), S2.image.length !== 0 && M2.uint32(18).bytes(S2.image), M2;
  }, decode(S2, M2) {
    const L2 = S2 instanceof c.default.Reader ? S2 : new c.default.Reader(S2);
    let Ee2 = M2 === void 0 ? L2.len : L2.pos + M2;
    const oe2 = gr();
    for (; L2.pos < Ee2; ) {
      const Pe2 = L2.uint32();
      switch (Pe2 >>> 3) {
        case 1:
          oe2.format = P2(L2.int32());
          break;
        case 2:
          oe2.image = L2.bytes();
          break;
        default:
          L2.skipType(Pe2 & 7);
          break;
      }
    }
    return oe2;
  }, fromJSON(S2) {
    return { format: Le2(S2.format) ? P2(S2.format) : I2.IMAGE_FORMAT_UNSPECIFIED, image: Le2(S2.image) ? jn(S2.image) : new Uint8Array() };
  }, toJSON(S2) {
    const M2 = {};
    return S2.format !== void 0 && (M2.format = $(S2.format)), S2.image !== void 0 && (M2.image = Zn(S2.image !== void 0 ? S2.image : new Uint8Array())), M2;
  }, fromPartial(S2) {
    var M2, L2;
    const Ee2 = gr();
    return Ee2.format = (M2 = S2.format) !== null && M2 !== void 0 ? M2 : I2.IMAGE_FORMAT_UNSPECIFIED, Ee2.image = (L2 = S2.image) !== null && L2 !== void 0 ? L2 : new Uint8Array(), Ee2;
  } };
  function br() {
    return { collectionId: "", projectId: "" };
  }
  a420.GetProjectBroadcastStatusRequest = { encode(S2, M2 = c.default.Writer.create()) {
    return S2.collectionId !== "" && M2.uint32(10).string(S2.collectionId), S2.projectId !== "" && M2.uint32(18).string(S2.projectId), M2;
  }, decode(S2, M2) {
    const L2 = S2 instanceof c.default.Reader ? S2 : new c.default.Reader(S2);
    let Ee2 = M2 === void 0 ? L2.len : L2.pos + M2;
    const oe2 = br();
    for (; L2.pos < Ee2; ) {
      const Pe2 = L2.uint32();
      switch (Pe2 >>> 3) {
        case 1:
          oe2.collectionId = L2.string();
          break;
        case 2:
          oe2.projectId = L2.string();
          break;
        default:
          L2.skipType(Pe2 & 7);
          break;
      }
    }
    return oe2;
  }, fromJSON(S2) {
    return { collectionId: Le2(S2.collectionId) ? String(S2.collectionId) : "", projectId: Le2(S2.projectId) ? String(S2.projectId) : "" };
  }, toJSON(S2) {
    const M2 = {};
    return S2.collectionId !== void 0 && (M2.collectionId = S2.collectionId), S2.projectId !== void 0 && (M2.projectId = S2.projectId), M2;
  }, fromPartial(S2) {
    var M2, L2;
    const Ee2 = br();
    return Ee2.collectionId = (M2 = S2.collectionId) !== null && M2 !== void 0 ? M2 : "", Ee2.projectId = (L2 = S2.projectId) !== null && L2 !== void 0 ? L2 : "", Ee2;
  } };
  function Sr() {
    return { status: void 0 };
  }
  a420.GetProjectBroadcastStatusResponse = { encode(S2, M2 = c.default.Writer.create()) {
    return S2.status !== void 0 && a420.ProjectBroadcastStatus.encode(S2.status, M2.uint32(10).fork()).ldelim(), M2;
  }, decode(S2, M2) {
    const L2 = S2 instanceof c.default.Reader ? S2 : new c.default.Reader(S2);
    let Ee2 = M2 === void 0 ? L2.len : L2.pos + M2;
    const oe2 = Sr();
    for (; L2.pos < Ee2; ) {
      const Pe2 = L2.uint32();
      switch (Pe2 >>> 3) {
        case 1:
          oe2.status = a420.ProjectBroadcastStatus.decode(L2, L2.uint32());
          break;
        default:
          L2.skipType(Pe2 & 7);
          break;
      }
    }
    return oe2;
  }, fromJSON(S2) {
    return { status: Le2(S2.status) ? a420.ProjectBroadcastStatus.fromJSON(S2.status) : void 0 };
  }, toJSON(S2) {
    const M2 = {};
    return S2.status !== void 0 && (M2.status = S2.status ? a420.ProjectBroadcastStatus.toJSON(S2.status) : void 0), M2;
  }, fromPartial(S2) {
    const M2 = Sr();
    return M2.status = S2.status !== void 0 && S2.status !== null ? a420.ProjectBroadcastStatus.fromPartial(S2.status) : void 0, M2;
  } };
  function _r() {
    return { collectionId: "", projectId: "" };
  }
  a420.StartProjectWebRtcRequest = { encode(S2, M2 = c.default.Writer.create()) {
    return S2.collectionId !== "" && M2.uint32(10).string(S2.collectionId), S2.projectId !== "" && M2.uint32(18).string(S2.projectId), M2;
  }, decode(S2, M2) {
    const L2 = S2 instanceof c.default.Reader ? S2 : new c.default.Reader(S2);
    let Ee2 = M2 === void 0 ? L2.len : L2.pos + M2;
    const oe2 = _r();
    for (; L2.pos < Ee2; ) {
      const Pe2 = L2.uint32();
      switch (Pe2 >>> 3) {
        case 1:
          oe2.collectionId = L2.string();
          break;
        case 2:
          oe2.projectId = L2.string();
          break;
        default:
          L2.skipType(Pe2 & 7);
          break;
      }
    }
    return oe2;
  }, fromJSON(S2) {
    return { collectionId: Le2(S2.collectionId) ? String(S2.collectionId) : "", projectId: Le2(S2.projectId) ? String(S2.projectId) : "" };
  }, toJSON(S2) {
    const M2 = {};
    return S2.collectionId !== void 0 && (M2.collectionId = S2.collectionId), S2.projectId !== void 0 && (M2.projectId = S2.projectId), M2;
  }, fromPartial(S2) {
    var M2, L2;
    const Ee2 = _r();
    return Ee2.collectionId = (M2 = S2.collectionId) !== null && M2 !== void 0 ? M2 : "", Ee2.projectId = (L2 = S2.projectId) !== null && L2 !== void 0 ? L2 : "", Ee2;
  } };
  function Er() {
    return {};
  }
  a420.StartProjectWebRtcResponse = { encode(S2, M2 = c.default.Writer.create()) {
    return M2;
  }, decode(S2, M2) {
    const L2 = S2 instanceof c.default.Reader ? S2 : new c.default.Reader(S2);
    let Ee2 = M2 === void 0 ? L2.len : L2.pos + M2;
    const oe2 = Er();
    for (; L2.pos < Ee2; ) {
      const Pe2 = L2.uint32();
      switch (Pe2 >>> 3) {
        default:
          L2.skipType(Pe2 & 7);
          break;
      }
    }
    return oe2;
  }, fromJSON(S2) {
    return {};
  }, toJSON(S2) {
    return {};
  }, fromPartial(S2) {
    return Er();
  } };
  function wr() {
    return { collectionId: "", projectId: "" };
  }
  a420.StopProjectWebRtcRequest = { encode(S2, M2 = c.default.Writer.create()) {
    return S2.collectionId !== "" && M2.uint32(10).string(S2.collectionId), S2.projectId !== "" && M2.uint32(18).string(S2.projectId), M2;
  }, decode(S2, M2) {
    const L2 = S2 instanceof c.default.Reader ? S2 : new c.default.Reader(S2);
    let Ee2 = M2 === void 0 ? L2.len : L2.pos + M2;
    const oe2 = wr();
    for (; L2.pos < Ee2; ) {
      const Pe2 = L2.uint32();
      switch (Pe2 >>> 3) {
        case 1:
          oe2.collectionId = L2.string();
          break;
        case 2:
          oe2.projectId = L2.string();
          break;
        default:
          L2.skipType(Pe2 & 7);
          break;
      }
    }
    return oe2;
  }, fromJSON(S2) {
    return { collectionId: Le2(S2.collectionId) ? String(S2.collectionId) : "", projectId: Le2(S2.projectId) ? String(S2.projectId) : "" };
  }, toJSON(S2) {
    const M2 = {};
    return S2.collectionId !== void 0 && (M2.collectionId = S2.collectionId), S2.projectId !== void 0 && (M2.projectId = S2.projectId), M2;
  }, fromPartial(S2) {
    var M2, L2;
    const Ee2 = wr();
    return Ee2.collectionId = (M2 = S2.collectionId) !== null && M2 !== void 0 ? M2 : "", Ee2.projectId = (L2 = S2.projectId) !== null && L2 !== void 0 ? L2 : "", Ee2;
  } };
  function Tr() {
    return {};
  }
  a420.StopProjectWebRtcResponse = { encode(S2, M2 = c.default.Writer.create()) {
    return M2;
  }, decode(S2, M2) {
    const L2 = S2 instanceof c.default.Reader ? S2 : new c.default.Reader(S2);
    let Ee2 = M2 === void 0 ? L2.len : L2.pos + M2;
    const oe2 = Tr();
    for (; L2.pos < Ee2; ) {
      const Pe2 = L2.uint32();
      switch (Pe2 >>> 3) {
        default:
          L2.skipType(Pe2 & 7);
          break;
      }
    }
    return oe2;
  }, fromJSON(S2) {
    return {};
  }, toJSON(S2) {
    return {};
  }, fromPartial(S2) {
    return Tr();
  } };
  function Ir() {
    return { collectionId: "", projectId: "", metadata: void 0, address: void 0, enabled: void 0, timeout: void 0 };
  }
  a420.CreateDestinationRequest = { encode(S2, M2 = c.default.Writer.create()) {
    return S2.collectionId !== "" && M2.uint32(10).string(S2.collectionId), S2.projectId !== "" && M2.uint32(18).string(S2.projectId), S2.metadata !== void 0 && p2.Value.encode(p2.Value.wrap(S2.metadata), M2.uint32(26).fork()).ldelim(), S2.address !== void 0 && a420.DestinationAddress.encode(S2.address, M2.uint32(42).fork()).ldelim(), S2.enabled !== void 0 && M2.uint32(48).bool(S2.enabled), S2.timeout !== void 0 && M2.uint32(56).uint32(S2.timeout), M2;
  }, decode(S2, M2) {
    const L2 = S2 instanceof c.default.Reader ? S2 : new c.default.Reader(S2);
    let Ee2 = M2 === void 0 ? L2.len : L2.pos + M2;
    const oe2 = Ir();
    for (; L2.pos < Ee2; ) {
      const Pe2 = L2.uint32();
      switch (Pe2 >>> 3) {
        case 1:
          oe2.collectionId = L2.string();
          break;
        case 2:
          oe2.projectId = L2.string();
          break;
        case 3:
          oe2.metadata = p2.Value.unwrap(p2.Value.decode(L2, L2.uint32()));
          break;
        case 5:
          oe2.address = a420.DestinationAddress.decode(L2, L2.uint32());
          break;
        case 6:
          oe2.enabled = L2.bool();
          break;
        case 7:
          oe2.timeout = L2.uint32();
          break;
        default:
          L2.skipType(Pe2 & 7);
          break;
      }
    }
    return oe2;
  }, fromJSON(S2) {
    return { collectionId: Le2(S2.collectionId) ? String(S2.collectionId) : "", projectId: Le2(S2.projectId) ? String(S2.projectId) : "", metadata: Le2(S2 == null ? void 0 : S2.metadata) ? S2.metadata : void 0, address: Le2(S2.address) ? a420.DestinationAddress.fromJSON(S2.address) : void 0, enabled: Le2(S2.enabled) ? !!S2.enabled : void 0, timeout: Le2(S2.timeout) ? Number(S2.timeout) : void 0 };
  }, toJSON(S2) {
    const M2 = {};
    return S2.collectionId !== void 0 && (M2.collectionId = S2.collectionId), S2.projectId !== void 0 && (M2.projectId = S2.projectId), S2.metadata !== void 0 && (M2.metadata = S2.metadata), S2.address !== void 0 && (M2.address = S2.address ? a420.DestinationAddress.toJSON(S2.address) : void 0), S2.enabled !== void 0 && (M2.enabled = S2.enabled), S2.timeout !== void 0 && (M2.timeout = Math.round(S2.timeout)), M2;
  }, fromPartial(S2) {
    var M2, L2, Ee2, oe2, Pe2;
    const bt = Ir();
    return bt.collectionId = (M2 = S2.collectionId) !== null && M2 !== void 0 ? M2 : "", bt.projectId = (L2 = S2.projectId) !== null && L2 !== void 0 ? L2 : "", bt.metadata = (Ee2 = S2.metadata) !== null && Ee2 !== void 0 ? Ee2 : void 0, bt.address = S2.address !== void 0 && S2.address !== null ? a420.DestinationAddress.fromPartial(S2.address) : void 0, bt.enabled = (oe2 = S2.enabled) !== null && oe2 !== void 0 ? oe2 : void 0, bt.timeout = (Pe2 = S2.timeout) !== null && Pe2 !== void 0 ? Pe2 : void 0, bt;
  } };
  function kr() {
    return { destination: void 0 };
  }
  a420.CreateDestinationResponse = { encode(S2, M2 = c.default.Writer.create()) {
    return S2.destination !== void 0 && a420.Destination.encode(S2.destination, M2.uint32(10).fork()).ldelim(), M2;
  }, decode(S2, M2) {
    const L2 = S2 instanceof c.default.Reader ? S2 : new c.default.Reader(S2);
    let Ee2 = M2 === void 0 ? L2.len : L2.pos + M2;
    const oe2 = kr();
    for (; L2.pos < Ee2; ) {
      const Pe2 = L2.uint32();
      switch (Pe2 >>> 3) {
        case 1:
          oe2.destination = a420.Destination.decode(L2, L2.uint32());
          break;
        default:
          L2.skipType(Pe2 & 7);
          break;
      }
    }
    return oe2;
  }, fromJSON(S2) {
    return { destination: Le2(S2.destination) ? a420.Destination.fromJSON(S2.destination) : void 0 };
  }, toJSON(S2) {
    const M2 = {};
    return S2.destination !== void 0 && (M2.destination = S2.destination ? a420.Destination.toJSON(S2.destination) : void 0), M2;
  }, fromPartial(S2) {
    const M2 = kr();
    return M2.destination = S2.destination !== void 0 && S2.destination !== null ? a420.Destination.fromPartial(S2.destination) : void 0, M2;
  } };
  function Rr() {
    return { collectionId: "", projectId: "", destinationId: "" };
  }
  a420.GetDestinationRequest = { encode(S2, M2 = c.default.Writer.create()) {
    return S2.collectionId !== "" && M2.uint32(10).string(S2.collectionId), S2.projectId !== "" && M2.uint32(18).string(S2.projectId), S2.destinationId !== "" && M2.uint32(26).string(S2.destinationId), M2;
  }, decode(S2, M2) {
    const L2 = S2 instanceof c.default.Reader ? S2 : new c.default.Reader(S2);
    let Ee2 = M2 === void 0 ? L2.len : L2.pos + M2;
    const oe2 = Rr();
    for (; L2.pos < Ee2; ) {
      const Pe2 = L2.uint32();
      switch (Pe2 >>> 3) {
        case 1:
          oe2.collectionId = L2.string();
          break;
        case 2:
          oe2.projectId = L2.string();
          break;
        case 3:
          oe2.destinationId = L2.string();
          break;
        default:
          L2.skipType(Pe2 & 7);
          break;
      }
    }
    return oe2;
  }, fromJSON(S2) {
    return { collectionId: Le2(S2.collectionId) ? String(S2.collectionId) : "", projectId: Le2(S2.projectId) ? String(S2.projectId) : "", destinationId: Le2(S2.destinationId) ? String(S2.destinationId) : "" };
  }, toJSON(S2) {
    const M2 = {};
    return S2.collectionId !== void 0 && (M2.collectionId = S2.collectionId), S2.projectId !== void 0 && (M2.projectId = S2.projectId), S2.destinationId !== void 0 && (M2.destinationId = S2.destinationId), M2;
  }, fromPartial(S2) {
    var M2, L2, Ee2;
    const oe2 = Rr();
    return oe2.collectionId = (M2 = S2.collectionId) !== null && M2 !== void 0 ? M2 : "", oe2.projectId = (L2 = S2.projectId) !== null && L2 !== void 0 ? L2 : "", oe2.destinationId = (Ee2 = S2.destinationId) !== null && Ee2 !== void 0 ? Ee2 : "", oe2;
  } };
  function Cr() {
    return { destination: void 0 };
  }
  a420.GetDestinationResponse = { encode(S2, M2 = c.default.Writer.create()) {
    return S2.destination !== void 0 && a420.Destination.encode(S2.destination, M2.uint32(10).fork()).ldelim(), M2;
  }, decode(S2, M2) {
    const L2 = S2 instanceof c.default.Reader ? S2 : new c.default.Reader(S2);
    let Ee2 = M2 === void 0 ? L2.len : L2.pos + M2;
    const oe2 = Cr();
    for (; L2.pos < Ee2; ) {
      const Pe2 = L2.uint32();
      switch (Pe2 >>> 3) {
        case 1:
          oe2.destination = a420.Destination.decode(L2, L2.uint32());
          break;
        default:
          L2.skipType(Pe2 & 7);
          break;
      }
    }
    return oe2;
  }, fromJSON(S2) {
    return { destination: Le2(S2.destination) ? a420.Destination.fromJSON(S2.destination) : void 0 };
  }, toJSON(S2) {
    const M2 = {};
    return S2.destination !== void 0 && (M2.destination = S2.destination ? a420.Destination.toJSON(S2.destination) : void 0), M2;
  }, fromPartial(S2) {
    const M2 = Cr();
    return M2.destination = S2.destination !== void 0 && S2.destination !== null ? a420.Destination.fromPartial(S2.destination) : void 0, M2;
  } };
  function Pr() {
    return { collectionId: "", projectId: "", destinationId: "", force: void 0 };
  }
  a420.DeleteDestinationRequest = { encode(S2, M2 = c.default.Writer.create()) {
    return S2.collectionId !== "" && M2.uint32(10).string(S2.collectionId), S2.projectId !== "" && M2.uint32(18).string(S2.projectId), S2.destinationId !== "" && M2.uint32(26).string(S2.destinationId), S2.force !== void 0 && M2.uint32(32).bool(S2.force), M2;
  }, decode(S2, M2) {
    const L2 = S2 instanceof c.default.Reader ? S2 : new c.default.Reader(S2);
    let Ee2 = M2 === void 0 ? L2.len : L2.pos + M2;
    const oe2 = Pr();
    for (; L2.pos < Ee2; ) {
      const Pe2 = L2.uint32();
      switch (Pe2 >>> 3) {
        case 1:
          oe2.collectionId = L2.string();
          break;
        case 2:
          oe2.projectId = L2.string();
          break;
        case 3:
          oe2.destinationId = L2.string();
          break;
        case 4:
          oe2.force = L2.bool();
          break;
        default:
          L2.skipType(Pe2 & 7);
          break;
      }
    }
    return oe2;
  }, fromJSON(S2) {
    return { collectionId: Le2(S2.collectionId) ? String(S2.collectionId) : "", projectId: Le2(S2.projectId) ? String(S2.projectId) : "", destinationId: Le2(S2.destinationId) ? String(S2.destinationId) : "", force: Le2(S2.force) ? !!S2.force : void 0 };
  }, toJSON(S2) {
    const M2 = {};
    return S2.collectionId !== void 0 && (M2.collectionId = S2.collectionId), S2.projectId !== void 0 && (M2.projectId = S2.projectId), S2.destinationId !== void 0 && (M2.destinationId = S2.destinationId), S2.force !== void 0 && (M2.force = S2.force), M2;
  }, fromPartial(S2) {
    var M2, L2, Ee2, oe2;
    const Pe2 = Pr();
    return Pe2.collectionId = (M2 = S2.collectionId) !== null && M2 !== void 0 ? M2 : "", Pe2.projectId = (L2 = S2.projectId) !== null && L2 !== void 0 ? L2 : "", Pe2.destinationId = (Ee2 = S2.destinationId) !== null && Ee2 !== void 0 ? Ee2 : "", Pe2.force = (oe2 = S2.force) !== null && oe2 !== void 0 ? oe2 : void 0, Pe2;
  } };
  function Or() {
    return { broadcastUpdated: false };
  }
  a420.DeleteDestinationResponse = { encode(S2, M2 = c.default.Writer.create()) {
    return S2.broadcastUpdated === true && M2.uint32(8).bool(S2.broadcastUpdated), M2;
  }, decode(S2, M2) {
    const L2 = S2 instanceof c.default.Reader ? S2 : new c.default.Reader(S2);
    let Ee2 = M2 === void 0 ? L2.len : L2.pos + M2;
    const oe2 = Or();
    for (; L2.pos < Ee2; ) {
      const Pe2 = L2.uint32();
      switch (Pe2 >>> 3) {
        case 1:
          oe2.broadcastUpdated = L2.bool();
          break;
        default:
          L2.skipType(Pe2 & 7);
          break;
      }
    }
    return oe2;
  }, fromJSON(S2) {
    return { broadcastUpdated: Le2(S2.broadcastUpdated) ? !!S2.broadcastUpdated : false };
  }, toJSON(S2) {
    const M2 = {};
    return S2.broadcastUpdated !== void 0 && (M2.broadcastUpdated = S2.broadcastUpdated), M2;
  }, fromPartial(S2) {
    var M2;
    const L2 = Or();
    return L2.broadcastUpdated = (M2 = S2.broadcastUpdated) !== null && M2 !== void 0 ? M2 : false, L2;
  } };
  function Mr() {
    return { collectionId: "", projectId: "", destinationId: "", updateMask: void 0, metadata: void 0, address: void 0, enabled: void 0, timeout: void 0 };
  }
  a420.UpdateDestinationRequest = { encode(S2, M2 = c.default.Writer.create()) {
    return S2.collectionId !== "" && M2.uint32(10).string(S2.collectionId), S2.projectId !== "" && M2.uint32(18).string(S2.projectId), S2.destinationId !== "" && M2.uint32(26).string(S2.destinationId), S2.updateMask !== void 0 && v2.FieldMask.encode(v2.FieldMask.wrap(S2.updateMask), M2.uint32(34).fork()).ldelim(), S2.metadata !== void 0 && p2.Value.encode(p2.Value.wrap(S2.metadata), M2.uint32(42).fork()).ldelim(), S2.address !== void 0 && a420.DestinationAddress.encode(S2.address, M2.uint32(50).fork()).ldelim(), S2.enabled !== void 0 && M2.uint32(56).bool(S2.enabled), S2.timeout !== void 0 && M2.uint32(64).uint32(S2.timeout), M2;
  }, decode(S2, M2) {
    const L2 = S2 instanceof c.default.Reader ? S2 : new c.default.Reader(S2);
    let Ee2 = M2 === void 0 ? L2.len : L2.pos + M2;
    const oe2 = Mr();
    for (; L2.pos < Ee2; ) {
      const Pe2 = L2.uint32();
      switch (Pe2 >>> 3) {
        case 1:
          oe2.collectionId = L2.string();
          break;
        case 2:
          oe2.projectId = L2.string();
          break;
        case 3:
          oe2.destinationId = L2.string();
          break;
        case 4:
          oe2.updateMask = v2.FieldMask.unwrap(v2.FieldMask.decode(L2, L2.uint32()));
          break;
        case 5:
          oe2.metadata = p2.Value.unwrap(p2.Value.decode(L2, L2.uint32()));
          break;
        case 6:
          oe2.address = a420.DestinationAddress.decode(L2, L2.uint32());
          break;
        case 7:
          oe2.enabled = L2.bool();
          break;
        case 8:
          oe2.timeout = L2.uint32();
          break;
        default:
          L2.skipType(Pe2 & 7);
          break;
      }
    }
    return oe2;
  }, fromJSON(S2) {
    return { collectionId: Le2(S2.collectionId) ? String(S2.collectionId) : "", projectId: Le2(S2.projectId) ? String(S2.projectId) : "", destinationId: Le2(S2.destinationId) ? String(S2.destinationId) : "", updateMask: Le2(S2.updateMask) ? v2.FieldMask.unwrap(v2.FieldMask.fromJSON(S2.updateMask)) : void 0, metadata: Le2(S2 == null ? void 0 : S2.metadata) ? S2.metadata : void 0, address: Le2(S2.address) ? a420.DestinationAddress.fromJSON(S2.address) : void 0, enabled: Le2(S2.enabled) ? !!S2.enabled : void 0, timeout: Le2(S2.timeout) ? Number(S2.timeout) : void 0 };
  }, toJSON(S2) {
    const M2 = {};
    return S2.collectionId !== void 0 && (M2.collectionId = S2.collectionId), S2.projectId !== void 0 && (M2.projectId = S2.projectId), S2.destinationId !== void 0 && (M2.destinationId = S2.destinationId), S2.updateMask !== void 0 && (M2.updateMask = v2.FieldMask.toJSON(v2.FieldMask.wrap(S2.updateMask))), S2.metadata !== void 0 && (M2.metadata = S2.metadata), S2.address !== void 0 && (M2.address = S2.address ? a420.DestinationAddress.toJSON(S2.address) : void 0), S2.enabled !== void 0 && (M2.enabled = S2.enabled), S2.timeout !== void 0 && (M2.timeout = Math.round(S2.timeout)), M2;
  }, fromPartial(S2) {
    var M2, L2, Ee2, oe2, Pe2, bt, At;
    const Dt = Mr();
    return Dt.collectionId = (M2 = S2.collectionId) !== null && M2 !== void 0 ? M2 : "", Dt.projectId = (L2 = S2.projectId) !== null && L2 !== void 0 ? L2 : "", Dt.destinationId = (Ee2 = S2.destinationId) !== null && Ee2 !== void 0 ? Ee2 : "", Dt.updateMask = (oe2 = S2.updateMask) !== null && oe2 !== void 0 ? oe2 : void 0, Dt.metadata = (Pe2 = S2.metadata) !== null && Pe2 !== void 0 ? Pe2 : void 0, Dt.address = S2.address !== void 0 && S2.address !== null ? a420.DestinationAddress.fromPartial(S2.address) : void 0, Dt.enabled = (bt = S2.enabled) !== null && bt !== void 0 ? bt : void 0, Dt.timeout = (At = S2.timeout) !== null && At !== void 0 ? At : void 0, Dt;
  } };
  function Nr() {
    return { destination: void 0, broadcastUpdated: false };
  }
  a420.UpdateDestinationResponse = { encode(S2, M2 = c.default.Writer.create()) {
    return S2.destination !== void 0 && a420.Destination.encode(S2.destination, M2.uint32(10).fork()).ldelim(), S2.broadcastUpdated === true && M2.uint32(16).bool(S2.broadcastUpdated), M2;
  }, decode(S2, M2) {
    const L2 = S2 instanceof c.default.Reader ? S2 : new c.default.Reader(S2);
    let Ee2 = M2 === void 0 ? L2.len : L2.pos + M2;
    const oe2 = Nr();
    for (; L2.pos < Ee2; ) {
      const Pe2 = L2.uint32();
      switch (Pe2 >>> 3) {
        case 1:
          oe2.destination = a420.Destination.decode(L2, L2.uint32());
          break;
        case 2:
          oe2.broadcastUpdated = L2.bool();
          break;
        default:
          L2.skipType(Pe2 & 7);
          break;
      }
    }
    return oe2;
  }, fromJSON(S2) {
    return { destination: Le2(S2.destination) ? a420.Destination.fromJSON(S2.destination) : void 0, broadcastUpdated: Le2(S2.broadcastUpdated) ? !!S2.broadcastUpdated : false };
  }, toJSON(S2) {
    const M2 = {};
    return S2.destination !== void 0 && (M2.destination = S2.destination ? a420.Destination.toJSON(S2.destination) : void 0), S2.broadcastUpdated !== void 0 && (M2.broadcastUpdated = S2.broadcastUpdated), M2;
  }, fromPartial(S2) {
    var M2;
    const L2 = Nr();
    return L2.destination = S2.destination !== void 0 && S2.destination !== null ? a420.Destination.fromPartial(S2.destination) : void 0, L2.broadcastUpdated = (M2 = S2.broadcastUpdated) !== null && M2 !== void 0 ? M2 : false, L2;
  } };
  function Ar() {
    return { collectionId: "", metadata: void 0, address: void 0, preview: void 0 };
  }
  a420.CreateSourceRequest = { encode(S2, M2 = c.default.Writer.create()) {
    return S2.collectionId !== "" && M2.uint32(10).string(S2.collectionId), S2.metadata !== void 0 && p2.Value.encode(p2.Value.wrap(S2.metadata), M2.uint32(18).fork()).ldelim(), S2.address !== void 0 && a420.SourceAddress.encode(S2.address, M2.uint32(26).fork()).ldelim(), S2.preview !== void 0 && a420.PreviewAddress.encode(S2.preview, M2.uint32(34).fork()).ldelim(), M2;
  }, decode(S2, M2) {
    const L2 = S2 instanceof c.default.Reader ? S2 : new c.default.Reader(S2);
    let Ee2 = M2 === void 0 ? L2.len : L2.pos + M2;
    const oe2 = Ar();
    for (; L2.pos < Ee2; ) {
      const Pe2 = L2.uint32();
      switch (Pe2 >>> 3) {
        case 1:
          oe2.collectionId = L2.string();
          break;
        case 2:
          oe2.metadata = p2.Value.unwrap(p2.Value.decode(L2, L2.uint32()));
          break;
        case 3:
          oe2.address = a420.SourceAddress.decode(L2, L2.uint32());
          break;
        case 4:
          oe2.preview = a420.PreviewAddress.decode(L2, L2.uint32());
          break;
        default:
          L2.skipType(Pe2 & 7);
          break;
      }
    }
    return oe2;
  }, fromJSON(S2) {
    return { collectionId: Le2(S2.collectionId) ? String(S2.collectionId) : "", metadata: Le2(S2 == null ? void 0 : S2.metadata) ? S2.metadata : void 0, address: Le2(S2.address) ? a420.SourceAddress.fromJSON(S2.address) : void 0, preview: Le2(S2.preview) ? a420.PreviewAddress.fromJSON(S2.preview) : void 0 };
  }, toJSON(S2) {
    const M2 = {};
    return S2.collectionId !== void 0 && (M2.collectionId = S2.collectionId), S2.metadata !== void 0 && (M2.metadata = S2.metadata), S2.address !== void 0 && (M2.address = S2.address ? a420.SourceAddress.toJSON(S2.address) : void 0), S2.preview !== void 0 && (M2.preview = S2.preview ? a420.PreviewAddress.toJSON(S2.preview) : void 0), M2;
  }, fromPartial(S2) {
    var M2, L2;
    const Ee2 = Ar();
    return Ee2.collectionId = (M2 = S2.collectionId) !== null && M2 !== void 0 ? M2 : "", Ee2.metadata = (L2 = S2.metadata) !== null && L2 !== void 0 ? L2 : void 0, Ee2.address = S2.address !== void 0 && S2.address !== null ? a420.SourceAddress.fromPartial(S2.address) : void 0, Ee2.preview = S2.preview !== void 0 && S2.preview !== null ? a420.PreviewAddress.fromPartial(S2.preview) : void 0, Ee2;
  } };
  function $r() {
    return { source: void 0 };
  }
  a420.CreateSourceResponse = { encode(S2, M2 = c.default.Writer.create()) {
    return S2.source !== void 0 && a420.Source.encode(S2.source, M2.uint32(10).fork()).ldelim(), M2;
  }, decode(S2, M2) {
    const L2 = S2 instanceof c.default.Reader ? S2 : new c.default.Reader(S2);
    let Ee2 = M2 === void 0 ? L2.len : L2.pos + M2;
    const oe2 = $r();
    for (; L2.pos < Ee2; ) {
      const Pe2 = L2.uint32();
      switch (Pe2 >>> 3) {
        case 1:
          oe2.source = a420.Source.decode(L2, L2.uint32());
          break;
        default:
          L2.skipType(Pe2 & 7);
          break;
      }
    }
    return oe2;
  }, fromJSON(S2) {
    return { source: Le2(S2.source) ? a420.Source.fromJSON(S2.source) : void 0 };
  }, toJSON(S2) {
    const M2 = {};
    return S2.source !== void 0 && (M2.source = S2.source ? a420.Source.toJSON(S2.source) : void 0), M2;
  }, fromPartial(S2) {
    const M2 = $r();
    return M2.source = S2.source !== void 0 && S2.source !== null ? a420.Source.fromPartial(S2.source) : void 0, M2;
  } };
  function Dr() {
    return { collectionId: "", sourceId: "", force: void 0 };
  }
  a420.DeleteSourceRequest = { encode(S2, M2 = c.default.Writer.create()) {
    return S2.collectionId !== "" && M2.uint32(10).string(S2.collectionId), S2.sourceId !== "" && M2.uint32(18).string(S2.sourceId), S2.force !== void 0 && M2.uint32(24).bool(S2.force), M2;
  }, decode(S2, M2) {
    const L2 = S2 instanceof c.default.Reader ? S2 : new c.default.Reader(S2);
    let Ee2 = M2 === void 0 ? L2.len : L2.pos + M2;
    const oe2 = Dr();
    for (; L2.pos < Ee2; ) {
      const Pe2 = L2.uint32();
      switch (Pe2 >>> 3) {
        case 1:
          oe2.collectionId = L2.string();
          break;
        case 2:
          oe2.sourceId = L2.string();
          break;
        case 3:
          oe2.force = L2.bool();
          break;
        default:
          L2.skipType(Pe2 & 7);
          break;
      }
    }
    return oe2;
  }, fromJSON(S2) {
    return { collectionId: Le2(S2.collectionId) ? String(S2.collectionId) : "", sourceId: Le2(S2.sourceId) ? String(S2.sourceId) : "", force: Le2(S2.force) ? !!S2.force : void 0 };
  }, toJSON(S2) {
    const M2 = {};
    return S2.collectionId !== void 0 && (M2.collectionId = S2.collectionId), S2.sourceId !== void 0 && (M2.sourceId = S2.sourceId), S2.force !== void 0 && (M2.force = S2.force), M2;
  }, fromPartial(S2) {
    var M2, L2, Ee2;
    const oe2 = Dr();
    return oe2.collectionId = (M2 = S2.collectionId) !== null && M2 !== void 0 ? M2 : "", oe2.sourceId = (L2 = S2.sourceId) !== null && L2 !== void 0 ? L2 : "", oe2.force = (Ee2 = S2.force) !== null && Ee2 !== void 0 ? Ee2 : void 0, oe2;
  } };
  function Lr() {
    return { projectIdsUpdated: [] };
  }
  a420.DeleteSourceResponse = { encode(S2, M2 = c.default.Writer.create()) {
    for (const L2 of S2.projectIdsUpdated)
      M2.uint32(26).string(L2);
    return M2;
  }, decode(S2, M2) {
    const L2 = S2 instanceof c.default.Reader ? S2 : new c.default.Reader(S2);
    let Ee2 = M2 === void 0 ? L2.len : L2.pos + M2;
    const oe2 = Lr();
    for (; L2.pos < Ee2; ) {
      const Pe2 = L2.uint32();
      switch (Pe2 >>> 3) {
        case 3:
          oe2.projectIdsUpdated.push(L2.string());
          break;
        default:
          L2.skipType(Pe2 & 7);
          break;
      }
    }
    return oe2;
  }, fromJSON(S2) {
    return { projectIdsUpdated: Array.isArray(S2 == null ? void 0 : S2.projectIdsUpdated) ? S2.projectIdsUpdated.map((M2) => String(M2)) : [] };
  }, toJSON(S2) {
    const M2 = {};
    return S2.projectIdsUpdated ? M2.projectIdsUpdated = S2.projectIdsUpdated.map((L2) => L2) : M2.projectIdsUpdated = [], M2;
  }, fromPartial(S2) {
    var M2;
    const L2 = Lr();
    return L2.projectIdsUpdated = ((M2 = S2.projectIdsUpdated) === null || M2 === void 0 ? void 0 : M2.map((Ee2) => Ee2)) || [], L2;
  } };
  function Br() {
    return { collectionId: "", projectId: "", sourceId: "", trigger: void 0 };
  }
  a420.AddSourceToProjectRequest = { encode(S2, M2 = c.default.Writer.create()) {
    return S2.collectionId !== "" && M2.uint32(10).string(S2.collectionId), S2.projectId !== "" && M2.uint32(18).string(S2.projectId), S2.sourceId !== "" && M2.uint32(26).string(S2.sourceId), S2.trigger !== void 0 && a420.SourceTrigger.encode(S2.trigger, M2.uint32(34).fork()).ldelim(), M2;
  }, decode(S2, M2) {
    const L2 = S2 instanceof c.default.Reader ? S2 : new c.default.Reader(S2);
    let Ee2 = M2 === void 0 ? L2.len : L2.pos + M2;
    const oe2 = Br();
    for (; L2.pos < Ee2; ) {
      const Pe2 = L2.uint32();
      switch (Pe2 >>> 3) {
        case 1:
          oe2.collectionId = L2.string();
          break;
        case 2:
          oe2.projectId = L2.string();
          break;
        case 3:
          oe2.sourceId = L2.string();
          break;
        case 4:
          oe2.trigger = a420.SourceTrigger.decode(L2, L2.uint32());
          break;
        default:
          L2.skipType(Pe2 & 7);
          break;
      }
    }
    return oe2;
  }, fromJSON(S2) {
    return { collectionId: Le2(S2.collectionId) ? String(S2.collectionId) : "", projectId: Le2(S2.projectId) ? String(S2.projectId) : "", sourceId: Le2(S2.sourceId) ? String(S2.sourceId) : "", trigger: Le2(S2.trigger) ? a420.SourceTrigger.fromJSON(S2.trigger) : void 0 };
  }, toJSON(S2) {
    const M2 = {};
    return S2.collectionId !== void 0 && (M2.collectionId = S2.collectionId), S2.projectId !== void 0 && (M2.projectId = S2.projectId), S2.sourceId !== void 0 && (M2.sourceId = S2.sourceId), S2.trigger !== void 0 && (M2.trigger = S2.trigger ? a420.SourceTrigger.toJSON(S2.trigger) : void 0), M2;
  }, fromPartial(S2) {
    var M2, L2, Ee2;
    const oe2 = Br();
    return oe2.collectionId = (M2 = S2.collectionId) !== null && M2 !== void 0 ? M2 : "", oe2.projectId = (L2 = S2.projectId) !== null && L2 !== void 0 ? L2 : "", oe2.sourceId = (Ee2 = S2.sourceId) !== null && Ee2 !== void 0 ? Ee2 : "", oe2.trigger = S2.trigger !== void 0 && S2.trigger !== null ? a420.SourceTrigger.fromPartial(S2.trigger) : void 0, oe2;
  } };
  function xr() {
    return { project: void 0, broadcastUpdated: false };
  }
  a420.AddSourceToProjectResponse = { encode(S2, M2 = c.default.Writer.create()) {
    return S2.project !== void 0 && a420.Project.encode(S2.project, M2.uint32(10).fork()).ldelim(), S2.broadcastUpdated === true && M2.uint32(16).bool(S2.broadcastUpdated), M2;
  }, decode(S2, M2) {
    const L2 = S2 instanceof c.default.Reader ? S2 : new c.default.Reader(S2);
    let Ee2 = M2 === void 0 ? L2.len : L2.pos + M2;
    const oe2 = xr();
    for (; L2.pos < Ee2; ) {
      const Pe2 = L2.uint32();
      switch (Pe2 >>> 3) {
        case 1:
          oe2.project = a420.Project.decode(L2, L2.uint32());
          break;
        case 2:
          oe2.broadcastUpdated = L2.bool();
          break;
        default:
          L2.skipType(Pe2 & 7);
          break;
      }
    }
    return oe2;
  }, fromJSON(S2) {
    return { project: Le2(S2.project) ? a420.Project.fromJSON(S2.project) : void 0, broadcastUpdated: Le2(S2.broadcastUpdated) ? !!S2.broadcastUpdated : false };
  }, toJSON(S2) {
    const M2 = {};
    return S2.project !== void 0 && (M2.project = S2.project ? a420.Project.toJSON(S2.project) : void 0), S2.broadcastUpdated !== void 0 && (M2.broadcastUpdated = S2.broadcastUpdated), M2;
  }, fromPartial(S2) {
    var M2;
    const L2 = xr();
    return L2.project = S2.project !== void 0 && S2.project !== null ? a420.Project.fromPartial(S2.project) : void 0, L2.broadcastUpdated = (M2 = S2.broadcastUpdated) !== null && M2 !== void 0 ? M2 : false, L2;
  } };
  function Ur() {
    return { collectionId: "", projectId: "", sourceId: "", updateMask: void 0, trigger: void 0 };
  }
  a420.UpdateSourceInProjectRequest = { encode(S2, M2 = c.default.Writer.create()) {
    return S2.collectionId !== "" && M2.uint32(10).string(S2.collectionId), S2.projectId !== "" && M2.uint32(18).string(S2.projectId), S2.sourceId !== "" && M2.uint32(26).string(S2.sourceId), S2.updateMask !== void 0 && v2.FieldMask.encode(v2.FieldMask.wrap(S2.updateMask), M2.uint32(34).fork()).ldelim(), S2.trigger !== void 0 && a420.SourceTrigger.encode(S2.trigger, M2.uint32(42).fork()).ldelim(), M2;
  }, decode(S2, M2) {
    const L2 = S2 instanceof c.default.Reader ? S2 : new c.default.Reader(S2);
    let Ee2 = M2 === void 0 ? L2.len : L2.pos + M2;
    const oe2 = Ur();
    for (; L2.pos < Ee2; ) {
      const Pe2 = L2.uint32();
      switch (Pe2 >>> 3) {
        case 1:
          oe2.collectionId = L2.string();
          break;
        case 2:
          oe2.projectId = L2.string();
          break;
        case 3:
          oe2.sourceId = L2.string();
          break;
        case 4:
          oe2.updateMask = v2.FieldMask.unwrap(v2.FieldMask.decode(L2, L2.uint32()));
          break;
        case 5:
          oe2.trigger = a420.SourceTrigger.decode(L2, L2.uint32());
          break;
        default:
          L2.skipType(Pe2 & 7);
          break;
      }
    }
    return oe2;
  }, fromJSON(S2) {
    return { collectionId: Le2(S2.collectionId) ? String(S2.collectionId) : "", projectId: Le2(S2.projectId) ? String(S2.projectId) : "", sourceId: Le2(S2.sourceId) ? String(S2.sourceId) : "", updateMask: Le2(S2.updateMask) ? v2.FieldMask.unwrap(v2.FieldMask.fromJSON(S2.updateMask)) : void 0, trigger: Le2(S2.trigger) ? a420.SourceTrigger.fromJSON(S2.trigger) : void 0 };
  }, toJSON(S2) {
    const M2 = {};
    return S2.collectionId !== void 0 && (M2.collectionId = S2.collectionId), S2.projectId !== void 0 && (M2.projectId = S2.projectId), S2.sourceId !== void 0 && (M2.sourceId = S2.sourceId), S2.updateMask !== void 0 && (M2.updateMask = v2.FieldMask.toJSON(v2.FieldMask.wrap(S2.updateMask))), S2.trigger !== void 0 && (M2.trigger = S2.trigger ? a420.SourceTrigger.toJSON(S2.trigger) : void 0), M2;
  }, fromPartial(S2) {
    var M2, L2, Ee2, oe2;
    const Pe2 = Ur();
    return Pe2.collectionId = (M2 = S2.collectionId) !== null && M2 !== void 0 ? M2 : "", Pe2.projectId = (L2 = S2.projectId) !== null && L2 !== void 0 ? L2 : "", Pe2.sourceId = (Ee2 = S2.sourceId) !== null && Ee2 !== void 0 ? Ee2 : "", Pe2.updateMask = (oe2 = S2.updateMask) !== null && oe2 !== void 0 ? oe2 : void 0, Pe2.trigger = S2.trigger !== void 0 && S2.trigger !== null ? a420.SourceTrigger.fromPartial(S2.trigger) : void 0, Pe2;
  } };
  function Fr() {
    return { project: void 0 };
  }
  a420.UpdateSourceInProjectResponse = { encode(S2, M2 = c.default.Writer.create()) {
    return S2.project !== void 0 && a420.Project.encode(S2.project, M2.uint32(10).fork()).ldelim(), M2;
  }, decode(S2, M2) {
    const L2 = S2 instanceof c.default.Reader ? S2 : new c.default.Reader(S2);
    let Ee2 = M2 === void 0 ? L2.len : L2.pos + M2;
    const oe2 = Fr();
    for (; L2.pos < Ee2; ) {
      const Pe2 = L2.uint32();
      switch (Pe2 >>> 3) {
        case 1:
          oe2.project = a420.Project.decode(L2, L2.uint32());
          break;
        default:
          L2.skipType(Pe2 & 7);
          break;
      }
    }
    return oe2;
  }, fromJSON(S2) {
    return { project: Le2(S2.project) ? a420.Project.fromJSON(S2.project) : void 0 };
  }, toJSON(S2) {
    const M2 = {};
    return S2.project !== void 0 && (M2.project = S2.project ? a420.Project.toJSON(S2.project) : void 0), M2;
  }, fromPartial(S2) {
    const M2 = Fr();
    return M2.project = S2.project !== void 0 && S2.project !== null ? a420.Project.fromPartial(S2.project) : void 0, M2;
  } };
  function qr() {
    return { collectionId: "", sourceId: "" };
  }
  a420.GetSourceRequest = { encode(S2, M2 = c.default.Writer.create()) {
    return S2.collectionId !== "" && M2.uint32(10).string(S2.collectionId), S2.sourceId !== "" && M2.uint32(26).string(S2.sourceId), M2;
  }, decode(S2, M2) {
    const L2 = S2 instanceof c.default.Reader ? S2 : new c.default.Reader(S2);
    let Ee2 = M2 === void 0 ? L2.len : L2.pos + M2;
    const oe2 = qr();
    for (; L2.pos < Ee2; ) {
      const Pe2 = L2.uint32();
      switch (Pe2 >>> 3) {
        case 1:
          oe2.collectionId = L2.string();
          break;
        case 3:
          oe2.sourceId = L2.string();
          break;
        default:
          L2.skipType(Pe2 & 7);
          break;
      }
    }
    return oe2;
  }, fromJSON(S2) {
    return { collectionId: Le2(S2.collectionId) ? String(S2.collectionId) : "", sourceId: Le2(S2.sourceId) ? String(S2.sourceId) : "" };
  }, toJSON(S2) {
    const M2 = {};
    return S2.collectionId !== void 0 && (M2.collectionId = S2.collectionId), S2.sourceId !== void 0 && (M2.sourceId = S2.sourceId), M2;
  }, fromPartial(S2) {
    var M2, L2;
    const Ee2 = qr();
    return Ee2.collectionId = (M2 = S2.collectionId) !== null && M2 !== void 0 ? M2 : "", Ee2.sourceId = (L2 = S2.sourceId) !== null && L2 !== void 0 ? L2 : "", Ee2;
  } };
  function Jr() {
    return { source: void 0 };
  }
  a420.GetSourceResponse = { encode(S2, M2 = c.default.Writer.create()) {
    return S2.source !== void 0 && a420.Source.encode(S2.source, M2.uint32(10).fork()).ldelim(), M2;
  }, decode(S2, M2) {
    const L2 = S2 instanceof c.default.Reader ? S2 : new c.default.Reader(S2);
    let Ee2 = M2 === void 0 ? L2.len : L2.pos + M2;
    const oe2 = Jr();
    for (; L2.pos < Ee2; ) {
      const Pe2 = L2.uint32();
      switch (Pe2 >>> 3) {
        case 1:
          oe2.source = a420.Source.decode(L2, L2.uint32());
          break;
        default:
          L2.skipType(Pe2 & 7);
          break;
      }
    }
    return oe2;
  }, fromJSON(S2) {
    return { source: Le2(S2.source) ? a420.Source.fromJSON(S2.source) : void 0 };
  }, toJSON(S2) {
    const M2 = {};
    return S2.source !== void 0 && (M2.source = S2.source ? a420.Source.toJSON(S2.source) : void 0), M2;
  }, fromPartial(S2) {
    const M2 = Jr();
    return M2.source = S2.source !== void 0 && S2.source !== null ? a420.Source.fromPartial(S2.source) : void 0, M2;
  } };
  function Vr() {
    return { collectionId: "" };
  }
  a420.GetSourcesRequest = { encode(S2, M2 = c.default.Writer.create()) {
    return S2.collectionId !== "" && M2.uint32(10).string(S2.collectionId), M2;
  }, decode(S2, M2) {
    const L2 = S2 instanceof c.default.Reader ? S2 : new c.default.Reader(S2);
    let Ee2 = M2 === void 0 ? L2.len : L2.pos + M2;
    const oe2 = Vr();
    for (; L2.pos < Ee2; ) {
      const Pe2 = L2.uint32();
      switch (Pe2 >>> 3) {
        case 1:
          oe2.collectionId = L2.string();
          break;
        default:
          L2.skipType(Pe2 & 7);
          break;
      }
    }
    return oe2;
  }, fromJSON(S2) {
    return { collectionId: Le2(S2.collectionId) ? String(S2.collectionId) : "" };
  }, toJSON(S2) {
    const M2 = {};
    return S2.collectionId !== void 0 && (M2.collectionId = S2.collectionId), M2;
  }, fromPartial(S2) {
    var M2;
    const L2 = Vr();
    return L2.collectionId = (M2 = S2.collectionId) !== null && M2 !== void 0 ? M2 : "", L2;
  } };
  function Gr() {
    return { sources: [] };
  }
  a420.GetSourcesResponse = { encode(S2, M2 = c.default.Writer.create()) {
    for (const L2 of S2.sources)
      a420.Source.encode(L2, M2.uint32(10).fork()).ldelim();
    return M2;
  }, decode(S2, M2) {
    const L2 = S2 instanceof c.default.Reader ? S2 : new c.default.Reader(S2);
    let Ee2 = M2 === void 0 ? L2.len : L2.pos + M2;
    const oe2 = Gr();
    for (; L2.pos < Ee2; ) {
      const Pe2 = L2.uint32();
      switch (Pe2 >>> 3) {
        case 1:
          oe2.sources.push(a420.Source.decode(L2, L2.uint32()));
          break;
        default:
          L2.skipType(Pe2 & 7);
          break;
      }
    }
    return oe2;
  }, fromJSON(S2) {
    return { sources: Array.isArray(S2 == null ? void 0 : S2.sources) ? S2.sources.map((M2) => a420.Source.fromJSON(M2)) : [] };
  }, toJSON(S2) {
    const M2 = {};
    return S2.sources ? M2.sources = S2.sources.map((L2) => L2 ? a420.Source.toJSON(L2) : void 0) : M2.sources = [], M2;
  }, fromPartial(S2) {
    var M2;
    const L2 = Gr();
    return L2.sources = ((M2 = S2.sources) === null || M2 === void 0 ? void 0 : M2.map((Ee2) => a420.Source.fromPartial(Ee2))) || [], L2;
  } };
  function Wr() {
    return { collectionId: "", sourceId: "", updateMask: void 0, metadata: void 0, address: void 0, preview: void 0 };
  }
  a420.UpdateSourceRequest = { encode(S2, M2 = c.default.Writer.create()) {
    return S2.collectionId !== "" && M2.uint32(10).string(S2.collectionId), S2.sourceId !== "" && M2.uint32(26).string(S2.sourceId), S2.updateMask !== void 0 && v2.FieldMask.encode(v2.FieldMask.wrap(S2.updateMask), M2.uint32(34).fork()).ldelim(), S2.metadata !== void 0 && p2.Value.encode(p2.Value.wrap(S2.metadata), M2.uint32(42).fork()).ldelim(), S2.address !== void 0 && a420.SourceAddress.encode(S2.address, M2.uint32(50).fork()).ldelim(), S2.preview !== void 0 && a420.PreviewAddress.encode(S2.preview, M2.uint32(58).fork()).ldelim(), M2;
  }, decode(S2, M2) {
    const L2 = S2 instanceof c.default.Reader ? S2 : new c.default.Reader(S2);
    let Ee2 = M2 === void 0 ? L2.len : L2.pos + M2;
    const oe2 = Wr();
    for (; L2.pos < Ee2; ) {
      const Pe2 = L2.uint32();
      switch (Pe2 >>> 3) {
        case 1:
          oe2.collectionId = L2.string();
          break;
        case 3:
          oe2.sourceId = L2.string();
          break;
        case 4:
          oe2.updateMask = v2.FieldMask.unwrap(v2.FieldMask.decode(L2, L2.uint32()));
          break;
        case 5:
          oe2.metadata = p2.Value.unwrap(p2.Value.decode(L2, L2.uint32()));
          break;
        case 6:
          oe2.address = a420.SourceAddress.decode(L2, L2.uint32());
          break;
        case 7:
          oe2.preview = a420.PreviewAddress.decode(L2, L2.uint32());
          break;
        default:
          L2.skipType(Pe2 & 7);
          break;
      }
    }
    return oe2;
  }, fromJSON(S2) {
    return { collectionId: Le2(S2.collectionId) ? String(S2.collectionId) : "", sourceId: Le2(S2.sourceId) ? String(S2.sourceId) : "", updateMask: Le2(S2.updateMask) ? v2.FieldMask.unwrap(v2.FieldMask.fromJSON(S2.updateMask)) : void 0, metadata: Le2(S2 == null ? void 0 : S2.metadata) ? S2.metadata : void 0, address: Le2(S2.address) ? a420.SourceAddress.fromJSON(S2.address) : void 0, preview: Le2(S2.preview) ? a420.PreviewAddress.fromJSON(S2.preview) : void 0 };
  }, toJSON(S2) {
    const M2 = {};
    return S2.collectionId !== void 0 && (M2.collectionId = S2.collectionId), S2.sourceId !== void 0 && (M2.sourceId = S2.sourceId), S2.updateMask !== void 0 && (M2.updateMask = v2.FieldMask.toJSON(v2.FieldMask.wrap(S2.updateMask))), S2.metadata !== void 0 && (M2.metadata = S2.metadata), S2.address !== void 0 && (M2.address = S2.address ? a420.SourceAddress.toJSON(S2.address) : void 0), S2.preview !== void 0 && (M2.preview = S2.preview ? a420.PreviewAddress.toJSON(S2.preview) : void 0), M2;
  }, fromPartial(S2) {
    var M2, L2, Ee2, oe2;
    const Pe2 = Wr();
    return Pe2.collectionId = (M2 = S2.collectionId) !== null && M2 !== void 0 ? M2 : "", Pe2.sourceId = (L2 = S2.sourceId) !== null && L2 !== void 0 ? L2 : "", Pe2.updateMask = (Ee2 = S2.updateMask) !== null && Ee2 !== void 0 ? Ee2 : void 0, Pe2.metadata = (oe2 = S2.metadata) !== null && oe2 !== void 0 ? oe2 : void 0, Pe2.address = S2.address !== void 0 && S2.address !== null ? a420.SourceAddress.fromPartial(S2.address) : void 0, Pe2.preview = S2.preview !== void 0 && S2.preview !== null ? a420.PreviewAddress.fromPartial(S2.preview) : void 0, Pe2;
  } };
  function Hr() {
    return { source: void 0, broadcastUpdated: false };
  }
  a420.UpdateSourceResponse = { encode(S2, M2 = c.default.Writer.create()) {
    return S2.source !== void 0 && a420.Source.encode(S2.source, M2.uint32(10).fork()).ldelim(), S2.broadcastUpdated === true && M2.uint32(16).bool(S2.broadcastUpdated), M2;
  }, decode(S2, M2) {
    const L2 = S2 instanceof c.default.Reader ? S2 : new c.default.Reader(S2);
    let Ee2 = M2 === void 0 ? L2.len : L2.pos + M2;
    const oe2 = Hr();
    for (; L2.pos < Ee2; ) {
      const Pe2 = L2.uint32();
      switch (Pe2 >>> 3) {
        case 1:
          oe2.source = a420.Source.decode(L2, L2.uint32());
          break;
        case 2:
          oe2.broadcastUpdated = L2.bool();
          break;
        default:
          L2.skipType(Pe2 & 7);
          break;
      }
    }
    return oe2;
  }, fromJSON(S2) {
    return { source: Le2(S2.source) ? a420.Source.fromJSON(S2.source) : void 0, broadcastUpdated: Le2(S2.broadcastUpdated) ? !!S2.broadcastUpdated : false };
  }, toJSON(S2) {
    const M2 = {};
    return S2.source !== void 0 && (M2.source = S2.source ? a420.Source.toJSON(S2.source) : void 0), S2.broadcastUpdated !== void 0 && (M2.broadcastUpdated = S2.broadcastUpdated), M2;
  }, fromPartial(S2) {
    var M2;
    const L2 = Hr();
    return L2.source = S2.source !== void 0 && S2.source !== null ? a420.Source.fromPartial(S2.source) : void 0, L2.broadcastUpdated = (M2 = S2.broadcastUpdated) !== null && M2 !== void 0 ? M2 : false, L2;
  } };
  function Kr() {
    return { collectionId: "", projectId: "", sourceId: "", force: void 0 };
  }
  a420.RemoveSourceFromProjectRequest = { encode(S2, M2 = c.default.Writer.create()) {
    return S2.collectionId !== "" && M2.uint32(10).string(S2.collectionId), S2.projectId !== "" && M2.uint32(18).string(S2.projectId), S2.sourceId !== "" && M2.uint32(26).string(S2.sourceId), S2.force !== void 0 && M2.uint32(32).bool(S2.force), M2;
  }, decode(S2, M2) {
    const L2 = S2 instanceof c.default.Reader ? S2 : new c.default.Reader(S2);
    let Ee2 = M2 === void 0 ? L2.len : L2.pos + M2;
    const oe2 = Kr();
    for (; L2.pos < Ee2; ) {
      const Pe2 = L2.uint32();
      switch (Pe2 >>> 3) {
        case 1:
          oe2.collectionId = L2.string();
          break;
        case 2:
          oe2.projectId = L2.string();
          break;
        case 3:
          oe2.sourceId = L2.string();
          break;
        case 4:
          oe2.force = L2.bool();
          break;
        default:
          L2.skipType(Pe2 & 7);
          break;
      }
    }
    return oe2;
  }, fromJSON(S2) {
    return { collectionId: Le2(S2.collectionId) ? String(S2.collectionId) : "", projectId: Le2(S2.projectId) ? String(S2.projectId) : "", sourceId: Le2(S2.sourceId) ? String(S2.sourceId) : "", force: Le2(S2.force) ? !!S2.force : void 0 };
  }, toJSON(S2) {
    const M2 = {};
    return S2.collectionId !== void 0 && (M2.collectionId = S2.collectionId), S2.projectId !== void 0 && (M2.projectId = S2.projectId), S2.sourceId !== void 0 && (M2.sourceId = S2.sourceId), S2.force !== void 0 && (M2.force = S2.force), M2;
  }, fromPartial(S2) {
    var M2, L2, Ee2, oe2;
    const Pe2 = Kr();
    return Pe2.collectionId = (M2 = S2.collectionId) !== null && M2 !== void 0 ? M2 : "", Pe2.projectId = (L2 = S2.projectId) !== null && L2 !== void 0 ? L2 : "", Pe2.sourceId = (Ee2 = S2.sourceId) !== null && Ee2 !== void 0 ? Ee2 : "", Pe2.force = (oe2 = S2.force) !== null && oe2 !== void 0 ? oe2 : void 0, Pe2;
  } };
  function Yr() {
    return { project: void 0, broadcastUpdated: false };
  }
  a420.RemoveSourceFromProjectResponse = { encode(S2, M2 = c.default.Writer.create()) {
    return S2.project !== void 0 && a420.Project.encode(S2.project, M2.uint32(10).fork()).ldelim(), S2.broadcastUpdated === true && M2.uint32(16).bool(S2.broadcastUpdated), M2;
  }, decode(S2, M2) {
    const L2 = S2 instanceof c.default.Reader ? S2 : new c.default.Reader(S2);
    let Ee2 = M2 === void 0 ? L2.len : L2.pos + M2;
    const oe2 = Yr();
    for (; L2.pos < Ee2; ) {
      const Pe2 = L2.uint32();
      switch (Pe2 >>> 3) {
        case 1:
          oe2.project = a420.Project.decode(L2, L2.uint32());
          break;
        case 2:
          oe2.broadcastUpdated = L2.bool();
          break;
        default:
          L2.skipType(Pe2 & 7);
          break;
      }
    }
    return oe2;
  }, fromJSON(S2) {
    return { project: Le2(S2.project) ? a420.Project.fromJSON(S2.project) : void 0, broadcastUpdated: Le2(S2.broadcastUpdated) ? !!S2.broadcastUpdated : false };
  }, toJSON(S2) {
    const M2 = {};
    return S2.project !== void 0 && (M2.project = S2.project ? a420.Project.toJSON(S2.project) : void 0), S2.broadcastUpdated !== void 0 && (M2.broadcastUpdated = S2.broadcastUpdated), M2;
  }, fromPartial(S2) {
    var M2;
    const L2 = Yr();
    return L2.project = S2.project !== void 0 && S2.project !== null ? a420.Project.fromPartial(S2.project) : void 0, L2.broadcastUpdated = (M2 = S2.broadcastUpdated) !== null && M2 !== void 0 ? M2 : false, L2;
  } };
  function jr() {
    return { collectionId: "", sourceId: "", accessToken: void 0 };
  }
  a420.GetSourcePlaylistRequest = { encode(S2, M2 = c.default.Writer.create()) {
    return S2.collectionId !== "" && M2.uint32(10).string(S2.collectionId), S2.sourceId !== "" && M2.uint32(26).string(S2.sourceId), S2.accessToken !== void 0 && M2.uint32(34).string(S2.accessToken), M2;
  }, decode(S2, M2) {
    const L2 = S2 instanceof c.default.Reader ? S2 : new c.default.Reader(S2);
    let Ee2 = M2 === void 0 ? L2.len : L2.pos + M2;
    const oe2 = jr();
    for (; L2.pos < Ee2; ) {
      const Pe2 = L2.uint32();
      switch (Pe2 >>> 3) {
        case 1:
          oe2.collectionId = L2.string();
          break;
        case 3:
          oe2.sourceId = L2.string();
          break;
        case 4:
          oe2.accessToken = L2.string();
          break;
        default:
          L2.skipType(Pe2 & 7);
          break;
      }
    }
    return oe2;
  }, fromJSON(S2) {
    return { collectionId: Le2(S2.collectionId) ? String(S2.collectionId) : "", sourceId: Le2(S2.sourceId) ? String(S2.sourceId) : "", accessToken: Le2(S2.accessToken) ? String(S2.accessToken) : void 0 };
  }, toJSON(S2) {
    const M2 = {};
    return S2.collectionId !== void 0 && (M2.collectionId = S2.collectionId), S2.sourceId !== void 0 && (M2.sourceId = S2.sourceId), S2.accessToken !== void 0 && (M2.accessToken = S2.accessToken), M2;
  }, fromPartial(S2) {
    var M2, L2, Ee2;
    const oe2 = jr();
    return oe2.collectionId = (M2 = S2.collectionId) !== null && M2 !== void 0 ? M2 : "", oe2.sourceId = (L2 = S2.sourceId) !== null && L2 !== void 0 ? L2 : "", oe2.accessToken = (Ee2 = S2.accessToken) !== null && Ee2 !== void 0 ? Ee2 : void 0, oe2;
  } };
  function Zr() {
    return { manifest: "" };
  }
  a420.GetSourcePlaylistResponse = { encode(S2, M2 = c.default.Writer.create()) {
    return S2.manifest !== "" && M2.uint32(10).string(S2.manifest), M2;
  }, decode(S2, M2) {
    const L2 = S2 instanceof c.default.Reader ? S2 : new c.default.Reader(S2);
    let Ee2 = M2 === void 0 ? L2.len : L2.pos + M2;
    const oe2 = Zr();
    for (; L2.pos < Ee2; ) {
      const Pe2 = L2.uint32();
      switch (Pe2 >>> 3) {
        case 1:
          oe2.manifest = L2.string();
          break;
        default:
          L2.skipType(Pe2 & 7);
          break;
      }
    }
    return oe2;
  }, fromJSON(S2) {
    return { manifest: Le2(S2.manifest) ? String(S2.manifest) : "" };
  }, toJSON(S2) {
    const M2 = {};
    return S2.manifest !== void 0 && (M2.manifest = S2.manifest), M2;
  }, fromPartial(S2) {
    var M2;
    const L2 = Zr();
    return L2.manifest = (M2 = S2.manifest) !== null && M2 !== void 0 ? M2 : "", L2;
  } };
  function Xr() {
    return { serviceUserId: "", displayName: void 0, role: void 0, maxDuration: void 0 };
  }
  a420.CreateAccessTokenRequest = { encode(S2, M2 = c.default.Writer.create()) {
    return S2.serviceUserId !== "" && M2.uint32(10).string(S2.serviceUserId), S2.displayName !== void 0 && M2.uint32(34).string(S2.displayName), S2.role !== void 0 && M2.uint32(16).int32(Ge2(S2.role)), S2.maxDuration !== void 0 && M2.uint32(24).uint32(S2.maxDuration), M2;
  }, decode(S2, M2) {
    const L2 = S2 instanceof c.default.Reader ? S2 : new c.default.Reader(S2);
    let Ee2 = M2 === void 0 ? L2.len : L2.pos + M2;
    const oe2 = Xr();
    for (; L2.pos < Ee2; ) {
      const Pe2 = L2.uint32();
      switch (Pe2 >>> 3) {
        case 1:
          oe2.serviceUserId = L2.string();
          break;
        case 4:
          oe2.displayName = L2.string();
          break;
        case 2:
          oe2.role = yt(L2.int32());
          break;
        case 3:
          oe2.maxDuration = L2.uint32();
          break;
        default:
          L2.skipType(Pe2 & 7);
          break;
      }
    }
    return oe2;
  }, fromJSON(S2) {
    return { serviceUserId: Le2(S2.serviceUserId) ? String(S2.serviceUserId) : "", displayName: Le2(S2.displayName) ? String(S2.displayName) : void 0, role: Le2(S2.role) ? yt(S2.role) : void 0, maxDuration: Le2(S2.maxDuration) ? Number(S2.maxDuration) : void 0 };
  }, toJSON(S2) {
    const M2 = {};
    return S2.serviceUserId !== void 0 && (M2.serviceUserId = S2.serviceUserId), S2.displayName !== void 0 && (M2.displayName = S2.displayName), S2.role !== void 0 && (M2.role = S2.role !== void 0 ? Xe2(S2.role) : void 0), S2.maxDuration !== void 0 && (M2.maxDuration = Math.round(S2.maxDuration)), M2;
  }, fromPartial(S2) {
    var M2, L2, Ee2, oe2;
    const Pe2 = Xr();
    return Pe2.serviceUserId = (M2 = S2.serviceUserId) !== null && M2 !== void 0 ? M2 : "", Pe2.displayName = (L2 = S2.displayName) !== null && L2 !== void 0 ? L2 : void 0, Pe2.role = (Ee2 = S2.role) !== null && Ee2 !== void 0 ? Ee2 : void 0, Pe2.maxDuration = (oe2 = S2.maxDuration) !== null && oe2 !== void 0 ? oe2 : void 0, Pe2;
  } };
  function Qr() {
    return { accessToken: "" };
  }
  a420.CreateAccessTokenResponse = { encode(S2, M2 = c.default.Writer.create()) {
    return S2.accessToken !== "" && M2.uint32(10).string(S2.accessToken), M2;
  }, decode(S2, M2) {
    const L2 = S2 instanceof c.default.Reader ? S2 : new c.default.Reader(S2);
    let Ee2 = M2 === void 0 ? L2.len : L2.pos + M2;
    const oe2 = Qr();
    for (; L2.pos < Ee2; ) {
      const Pe2 = L2.uint32();
      switch (Pe2 >>> 3) {
        case 1:
          oe2.accessToken = L2.string();
          break;
        default:
          L2.skipType(Pe2 & 7);
          break;
      }
    }
    return oe2;
  }, fromJSON(S2) {
    return { accessToken: Le2(S2.accessToken) ? String(S2.accessToken) : "" };
  }, toJSON(S2) {
    const M2 = {};
    return S2.accessToken !== void 0 && (M2.accessToken = S2.accessToken), M2;
  }, fromPartial(S2) {
    var M2;
    const L2 = Qr();
    return L2.accessToken = (M2 = S2.accessToken) !== null && M2 !== void 0 ? M2 : "", L2;
  } };
  function en() {
    return { displayName: "", serviceUserId: void 0 };
  }
  a420.GuestAccessTokenDirect = { encode(S2, M2 = c.default.Writer.create()) {
    return S2.displayName !== "" && M2.uint32(10).string(S2.displayName), S2.serviceUserId !== void 0 && M2.uint32(18).string(S2.serviceUserId), M2;
  }, decode(S2, M2) {
    const L2 = S2 instanceof c.default.Reader ? S2 : new c.default.Reader(S2);
    let Ee2 = M2 === void 0 ? L2.len : L2.pos + M2;
    const oe2 = en();
    for (; L2.pos < Ee2; ) {
      const Pe2 = L2.uint32();
      switch (Pe2 >>> 3) {
        case 1:
          oe2.displayName = L2.string();
          break;
        case 2:
          oe2.serviceUserId = L2.string();
          break;
        default:
          L2.skipType(Pe2 & 7);
          break;
      }
    }
    return oe2;
  }, fromJSON(S2) {
    return { displayName: Le2(S2.displayName) ? String(S2.displayName) : "", serviceUserId: Le2(S2.serviceUserId) ? String(S2.serviceUserId) : void 0 };
  }, toJSON(S2) {
    const M2 = {};
    return S2.displayName !== void 0 && (M2.displayName = S2.displayName), S2.serviceUserId !== void 0 && (M2.serviceUserId = S2.serviceUserId), M2;
  }, fromPartial(S2) {
    var M2, L2;
    const Ee2 = en();
    return Ee2.displayName = (M2 = S2.displayName) !== null && M2 !== void 0 ? M2 : "", Ee2.serviceUserId = (L2 = S2.serviceUserId) !== null && L2 !== void 0 ? L2 : void 0, Ee2;
  } };
  function tn() {
    return { maxDuration: void 0 };
  }
  a420.GuestAccessTokenExchange = { encode(S2, M2 = c.default.Writer.create()) {
    return S2.maxDuration !== void 0 && M2.uint32(8).uint32(S2.maxDuration), M2;
  }, decode(S2, M2) {
    const L2 = S2 instanceof c.default.Reader ? S2 : new c.default.Reader(S2);
    let Ee2 = M2 === void 0 ? L2.len : L2.pos + M2;
    const oe2 = tn();
    for (; L2.pos < Ee2; ) {
      const Pe2 = L2.uint32();
      switch (Pe2 >>> 3) {
        case 1:
          oe2.maxDuration = L2.uint32();
          break;
        default:
          L2.skipType(Pe2 & 7);
          break;
      }
    }
    return oe2;
  }, fromJSON(S2) {
    return { maxDuration: Le2(S2.maxDuration) ? Number(S2.maxDuration) : void 0 };
  }, toJSON(S2) {
    const M2 = {};
    return S2.maxDuration !== void 0 && (M2.maxDuration = Math.round(S2.maxDuration)), M2;
  }, fromPartial(S2) {
    var M2;
    const L2 = tn();
    return L2.maxDuration = (M2 = S2.maxDuration) !== null && M2 !== void 0 ? M2 : void 0, L2;
  } };
  function rn() {
    return { direct: void 0, exchange: void 0 };
  }
  a420.GuestAccessToken = { encode(S2, M2 = c.default.Writer.create()) {
    return S2.direct !== void 0 && a420.GuestAccessTokenDirect.encode(S2.direct, M2.uint32(10).fork()).ldelim(), S2.exchange !== void 0 && a420.GuestAccessTokenExchange.encode(S2.exchange, M2.uint32(18).fork()).ldelim(), M2;
  }, decode(S2, M2) {
    const L2 = S2 instanceof c.default.Reader ? S2 : new c.default.Reader(S2);
    let Ee2 = M2 === void 0 ? L2.len : L2.pos + M2;
    const oe2 = rn();
    for (; L2.pos < Ee2; ) {
      const Pe2 = L2.uint32();
      switch (Pe2 >>> 3) {
        case 1:
          oe2.direct = a420.GuestAccessTokenDirect.decode(L2, L2.uint32());
          break;
        case 2:
          oe2.exchange = a420.GuestAccessTokenExchange.decode(L2, L2.uint32());
          break;
        default:
          L2.skipType(Pe2 & 7);
          break;
      }
    }
    return oe2;
  }, fromJSON(S2) {
    return { direct: Le2(S2.direct) ? a420.GuestAccessTokenDirect.fromJSON(S2.direct) : void 0, exchange: Le2(S2.exchange) ? a420.GuestAccessTokenExchange.fromJSON(S2.exchange) : void 0 };
  }, toJSON(S2) {
    const M2 = {};
    return S2.direct !== void 0 && (M2.direct = S2.direct ? a420.GuestAccessTokenDirect.toJSON(S2.direct) : void 0), S2.exchange !== void 0 && (M2.exchange = S2.exchange ? a420.GuestAccessTokenExchange.toJSON(S2.exchange) : void 0), M2;
  }, fromPartial(S2) {
    const M2 = rn();
    return M2.direct = S2.direct !== void 0 && S2.direct !== null ? a420.GuestAccessTokenDirect.fromPartial(S2.direct) : void 0, M2.exchange = S2.exchange !== void 0 && S2.exchange !== null ? a420.GuestAccessTokenExchange.fromPartial(S2.exchange) : void 0, M2;
  } };
  function nn() {
    return { collectionId: "", projectId: "", maxDuration: void 0, role: Fe2.ROLE_UNSPECIFIED, token: void 0, url: void 0 };
  }
  a420.CreateGuestAccessTokenRequest = { encode(S2, M2 = c.default.Writer.create()) {
    return S2.collectionId !== "" && M2.uint32(10).string(S2.collectionId), S2.projectId !== "" && M2.uint32(18).string(S2.projectId), S2.maxDuration !== void 0 && M2.uint32(24).uint32(S2.maxDuration), S2.role !== Fe2.ROLE_UNSPECIFIED && M2.uint32(32).int32(Ge2(S2.role)), S2.token !== void 0 && a420.GuestAccessToken.encode(S2.token, M2.uint32(42).fork()).ldelim(), S2.url !== void 0 && M2.uint32(50).string(S2.url), M2;
  }, decode(S2, M2) {
    const L2 = S2 instanceof c.default.Reader ? S2 : new c.default.Reader(S2);
    let Ee2 = M2 === void 0 ? L2.len : L2.pos + M2;
    const oe2 = nn();
    for (; L2.pos < Ee2; ) {
      const Pe2 = L2.uint32();
      switch (Pe2 >>> 3) {
        case 1:
          oe2.collectionId = L2.string();
          break;
        case 2:
          oe2.projectId = L2.string();
          break;
        case 3:
          oe2.maxDuration = L2.uint32();
          break;
        case 4:
          oe2.role = yt(L2.int32());
          break;
        case 5:
          oe2.token = a420.GuestAccessToken.decode(L2, L2.uint32());
          break;
        case 6:
          oe2.url = L2.string();
          break;
        default:
          L2.skipType(Pe2 & 7);
          break;
      }
    }
    return oe2;
  }, fromJSON(S2) {
    return { collectionId: Le2(S2.collectionId) ? String(S2.collectionId) : "", projectId: Le2(S2.projectId) ? String(S2.projectId) : "", maxDuration: Le2(S2.maxDuration) ? Number(S2.maxDuration) : void 0, role: Le2(S2.role) ? yt(S2.role) : Fe2.ROLE_UNSPECIFIED, token: Le2(S2.token) ? a420.GuestAccessToken.fromJSON(S2.token) : void 0, url: Le2(S2.url) ? String(S2.url) : void 0 };
  }, toJSON(S2) {
    const M2 = {};
    return S2.collectionId !== void 0 && (M2.collectionId = S2.collectionId), S2.projectId !== void 0 && (M2.projectId = S2.projectId), S2.maxDuration !== void 0 && (M2.maxDuration = Math.round(S2.maxDuration)), S2.role !== void 0 && (M2.role = Xe2(S2.role)), S2.token !== void 0 && (M2.token = S2.token ? a420.GuestAccessToken.toJSON(S2.token) : void 0), S2.url !== void 0 && (M2.url = S2.url), M2;
  }, fromPartial(S2) {
    var M2, L2, Ee2, oe2, Pe2;
    const bt = nn();
    return bt.collectionId = (M2 = S2.collectionId) !== null && M2 !== void 0 ? M2 : "", bt.projectId = (L2 = S2.projectId) !== null && L2 !== void 0 ? L2 : "", bt.maxDuration = (Ee2 = S2.maxDuration) !== null && Ee2 !== void 0 ? Ee2 : void 0, bt.role = (oe2 = S2.role) !== null && oe2 !== void 0 ? oe2 : Fe2.ROLE_UNSPECIFIED, bt.token = S2.token !== void 0 && S2.token !== null ? a420.GuestAccessToken.fromPartial(S2.token) : void 0, bt.url = (Pe2 = S2.url) !== null && Pe2 !== void 0 ? Pe2 : void 0, bt;
  } };
  function an() {
    return { accessToken: "", url: void 0 };
  }
  a420.CreateGuestAccessTokenResponse = { encode(S2, M2 = c.default.Writer.create()) {
    return S2.accessToken !== "" && M2.uint32(10).string(S2.accessToken), S2.url !== void 0 && M2.uint32(18).string(S2.url), M2;
  }, decode(S2, M2) {
    const L2 = S2 instanceof c.default.Reader ? S2 : new c.default.Reader(S2);
    let Ee2 = M2 === void 0 ? L2.len : L2.pos + M2;
    const oe2 = an();
    for (; L2.pos < Ee2; ) {
      const Pe2 = L2.uint32();
      switch (Pe2 >>> 3) {
        case 1:
          oe2.accessToken = L2.string();
          break;
        case 2:
          oe2.url = L2.string();
          break;
        default:
          L2.skipType(Pe2 & 7);
          break;
      }
    }
    return oe2;
  }, fromJSON(S2) {
    return { accessToken: Le2(S2.accessToken) ? String(S2.accessToken) : "", url: Le2(S2.url) ? String(S2.url) : void 0 };
  }, toJSON(S2) {
    const M2 = {};
    return S2.accessToken !== void 0 && (M2.accessToken = S2.accessToken), S2.url !== void 0 && (M2.url = S2.url), M2;
  }, fromPartial(S2) {
    var M2, L2;
    const Ee2 = an();
    return Ee2.accessToken = (M2 = S2.accessToken) !== null && M2 !== void 0 ? M2 : "", Ee2.url = (L2 = S2.url) !== null && L2 !== void 0 ? L2 : void 0, Ee2;
  } };
  function sn() {
    return { collectionId: "", projectId: "", displayName: "" };
  }
  a420.CreateWebRtcAccessTokenRequest = { encode(S2, M2 = c.default.Writer.create()) {
    return S2.collectionId !== "" && M2.uint32(10).string(S2.collectionId), S2.projectId !== "" && M2.uint32(18).string(S2.projectId), S2.displayName !== "" && M2.uint32(26).string(S2.displayName), M2;
  }, decode(S2, M2) {
    const L2 = S2 instanceof c.default.Reader ? S2 : new c.default.Reader(S2);
    let Ee2 = M2 === void 0 ? L2.len : L2.pos + M2;
    const oe2 = sn();
    for (; L2.pos < Ee2; ) {
      const Pe2 = L2.uint32();
      switch (Pe2 >>> 3) {
        case 1:
          oe2.collectionId = L2.string();
          break;
        case 2:
          oe2.projectId = L2.string();
          break;
        case 3:
          oe2.displayName = L2.string();
          break;
        default:
          L2.skipType(Pe2 & 7);
          break;
      }
    }
    return oe2;
  }, fromJSON(S2) {
    return { collectionId: Le2(S2.collectionId) ? String(S2.collectionId) : "", projectId: Le2(S2.projectId) ? String(S2.projectId) : "", displayName: Le2(S2.displayName) ? String(S2.displayName) : "" };
  }, toJSON(S2) {
    const M2 = {};
    return S2.collectionId !== void 0 && (M2.collectionId = S2.collectionId), S2.projectId !== void 0 && (M2.projectId = S2.projectId), S2.displayName !== void 0 && (M2.displayName = S2.displayName), M2;
  }, fromPartial(S2) {
    var M2, L2, Ee2;
    const oe2 = sn();
    return oe2.collectionId = (M2 = S2.collectionId) !== null && M2 !== void 0 ? M2 : "", oe2.projectId = (L2 = S2.projectId) !== null && L2 !== void 0 ? L2 : "", oe2.displayName = (Ee2 = S2.displayName) !== null && Ee2 !== void 0 ? Ee2 : "", oe2;
  } };
  function un() {
    return { webrtcAccess: void 0 };
  }
  a420.CreateWebRtcAccessTokenResponse = { encode(S2, M2 = c.default.Writer.create()) {
    return S2.webrtcAccess !== void 0 && a420.WebRtcAccess.encode(S2.webrtcAccess, M2.uint32(18).fork()).ldelim(), M2;
  }, decode(S2, M2) {
    const L2 = S2 instanceof c.default.Reader ? S2 : new c.default.Reader(S2);
    let Ee2 = M2 === void 0 ? L2.len : L2.pos + M2;
    const oe2 = un();
    for (; L2.pos < Ee2; ) {
      const Pe2 = L2.uint32();
      switch (Pe2 >>> 3) {
        case 2:
          oe2.webrtcAccess = a420.WebRtcAccess.decode(L2, L2.uint32());
          break;
        default:
          L2.skipType(Pe2 & 7);
          break;
      }
    }
    return oe2;
  }, fromJSON(S2) {
    return { webrtcAccess: Le2(S2.webrtcAccess) ? a420.WebRtcAccess.fromJSON(S2.webrtcAccess) : void 0 };
  }, toJSON(S2) {
    const M2 = {};
    return S2.webrtcAccess !== void 0 && (M2.webrtcAccess = S2.webrtcAccess ? a420.WebRtcAccess.toJSON(S2.webrtcAccess) : void 0), M2;
  }, fromPartial(S2) {
    const M2 = un();
    return M2.webrtcAccess = S2.webrtcAccess !== void 0 && S2.webrtcAccess !== null ? a420.WebRtcAccess.fromPartial(S2.webrtcAccess) : void 0, M2;
  } };
  function dn() {
    return {};
  }
  a420.RefreshAccessTokenRequest = { encode(S2, M2 = c.default.Writer.create()) {
    return M2;
  }, decode(S2, M2) {
    const L2 = S2 instanceof c.default.Reader ? S2 : new c.default.Reader(S2);
    let Ee2 = M2 === void 0 ? L2.len : L2.pos + M2;
    const oe2 = dn();
    for (; L2.pos < Ee2; ) {
      const Pe2 = L2.uint32();
      switch (Pe2 >>> 3) {
        default:
          L2.skipType(Pe2 & 7);
          break;
      }
    }
    return oe2;
  }, fromJSON(S2) {
    return {};
  }, toJSON(S2) {
    return {};
  }, fromPartial(S2) {
    return dn();
  } };
  function cn() {
    return {};
  }
  a420.RefreshAccessTokenResponse = { encode(S2, M2 = c.default.Writer.create()) {
    return M2;
  }, decode(S2, M2) {
    const L2 = S2 instanceof c.default.Reader ? S2 : new c.default.Reader(S2);
    let Ee2 = M2 === void 0 ? L2.len : L2.pos + M2;
    const oe2 = cn();
    for (; L2.pos < Ee2; ) {
      const Pe2 = L2.uint32();
      switch (Pe2 >>> 3) {
        default:
          L2.skipType(Pe2 & 7);
          break;
      }
    }
    return oe2;
  }, fromJSON(S2) {
    return {};
  }, toJSON(S2) {
    return {};
  }, fromPartial(S2) {
    return cn();
  } };
  function ln() {
    return { collectionId: "", projectId: "", code: "", url: "", autoDelete: void 0 };
  }
  a420.GuestCode = { encode(S2, M2 = c.default.Writer.create()) {
    return S2.collectionId !== "" && M2.uint32(10).string(S2.collectionId), S2.projectId !== "" && M2.uint32(18).string(S2.projectId), S2.code !== "" && M2.uint32(26).string(S2.code), S2.url !== "" && M2.uint32(34).string(S2.url), S2.autoDelete !== void 0 && _.Timestamp.encode(Ht(S2.autoDelete), M2.uint32(42).fork()).ldelim(), M2;
  }, decode(S2, M2) {
    const L2 = S2 instanceof c.default.Reader ? S2 : new c.default.Reader(S2);
    let Ee2 = M2 === void 0 ? L2.len : L2.pos + M2;
    const oe2 = ln();
    for (; L2.pos < Ee2; ) {
      const Pe2 = L2.uint32();
      switch (Pe2 >>> 3) {
        case 1:
          oe2.collectionId = L2.string();
          break;
        case 2:
          oe2.projectId = L2.string();
          break;
        case 3:
          oe2.code = L2.string();
          break;
        case 4:
          oe2.url = L2.string();
          break;
        case 5:
          oe2.autoDelete = zt(_.Timestamp.decode(L2, L2.uint32()));
          break;
        default:
          L2.skipType(Pe2 & 7);
          break;
      }
    }
    return oe2;
  }, fromJSON(S2) {
    return { collectionId: Le2(S2.collectionId) ? String(S2.collectionId) : "", projectId: Le2(S2.projectId) ? String(S2.projectId) : "", code: Le2(S2.code) ? String(S2.code) : "", url: Le2(S2.url) ? String(S2.url) : "", autoDelete: Le2(S2.autoDelete) ? String(S2.autoDelete) : void 0 };
  }, toJSON(S2) {
    const M2 = {};
    return S2.collectionId !== void 0 && (M2.collectionId = S2.collectionId), S2.projectId !== void 0 && (M2.projectId = S2.projectId), S2.code !== void 0 && (M2.code = S2.code), S2.url !== void 0 && (M2.url = S2.url), S2.autoDelete !== void 0 && (M2.autoDelete = S2.autoDelete), M2;
  }, fromPartial(S2) {
    var M2, L2, Ee2, oe2, Pe2;
    const bt = ln();
    return bt.collectionId = (M2 = S2.collectionId) !== null && M2 !== void 0 ? M2 : "", bt.projectId = (L2 = S2.projectId) !== null && L2 !== void 0 ? L2 : "", bt.code = (Ee2 = S2.code) !== null && Ee2 !== void 0 ? Ee2 : "", bt.url = (oe2 = S2.url) !== null && oe2 !== void 0 ? oe2 : "", bt.autoDelete = (Pe2 = S2.autoDelete) !== null && Pe2 !== void 0 ? Pe2 : void 0, bt;
  } };
  function fn() {
    return { serviceId: "", code: "" };
  }
  a420.GuestCodeRedirectRequest = { encode(S2, M2 = c.default.Writer.create()) {
    return S2.serviceId !== "" && M2.uint32(10).string(S2.serviceId), S2.code !== "" && M2.uint32(18).string(S2.code), M2;
  }, decode(S2, M2) {
    const L2 = S2 instanceof c.default.Reader ? S2 : new c.default.Reader(S2);
    let Ee2 = M2 === void 0 ? L2.len : L2.pos + M2;
    const oe2 = fn();
    for (; L2.pos < Ee2; ) {
      const Pe2 = L2.uint32();
      switch (Pe2 >>> 3) {
        case 1:
          oe2.serviceId = L2.string();
          break;
        case 2:
          oe2.code = L2.string();
          break;
        default:
          L2.skipType(Pe2 & 7);
          break;
      }
    }
    return oe2;
  }, fromJSON(S2) {
    return { serviceId: Le2(S2.serviceId) ? String(S2.serviceId) : "", code: Le2(S2.code) ? String(S2.code) : "" };
  }, toJSON(S2) {
    const M2 = {};
    return S2.serviceId !== void 0 && (M2.serviceId = S2.serviceId), S2.code !== void 0 && (M2.code = S2.code), M2;
  }, fromPartial(S2) {
    var M2, L2;
    const Ee2 = fn();
    return Ee2.serviceId = (M2 = S2.serviceId) !== null && M2 !== void 0 ? M2 : "", Ee2.code = (L2 = S2.code) !== null && L2 !== void 0 ? L2 : "", Ee2;
  } };
  function hn() {
    return {};
  }
  a420.GuestCodeRedirectResponse = { encode(S2, M2 = c.default.Writer.create()) {
    return M2;
  }, decode(S2, M2) {
    const L2 = S2 instanceof c.default.Reader ? S2 : new c.default.Reader(S2);
    let Ee2 = M2 === void 0 ? L2.len : L2.pos + M2;
    const oe2 = hn();
    for (; L2.pos < Ee2; ) {
      const Pe2 = L2.uint32();
      switch (Pe2 >>> 3) {
        default:
          L2.skipType(Pe2 & 7);
          break;
      }
    }
    return oe2;
  }, fromJSON(S2) {
    return {};
  }, toJSON(S2) {
    return {};
  }, fromPartial(S2) {
    return hn();
  } };
  function pn() {
    return { alg: "", kty: "", use: "", kid: "", e: "", n: "" };
  }
  a420.JsonWebKey = { encode(S2, M2 = c.default.Writer.create()) {
    return S2.alg !== "" && M2.uint32(10).string(S2.alg), S2.kty !== "" && M2.uint32(18).string(S2.kty), S2.use !== "" && M2.uint32(26).string(S2.use), S2.kid !== "" && M2.uint32(34).string(S2.kid), S2.e !== "" && M2.uint32(42).string(S2.e), S2.n !== "" && M2.uint32(50).string(S2.n), M2;
  }, decode(S2, M2) {
    const L2 = S2 instanceof c.default.Reader ? S2 : new c.default.Reader(S2);
    let Ee2 = M2 === void 0 ? L2.len : L2.pos + M2;
    const oe2 = pn();
    for (; L2.pos < Ee2; ) {
      const Pe2 = L2.uint32();
      switch (Pe2 >>> 3) {
        case 1:
          oe2.alg = L2.string();
          break;
        case 2:
          oe2.kty = L2.string();
          break;
        case 3:
          oe2.use = L2.string();
          break;
        case 4:
          oe2.kid = L2.string();
          break;
        case 5:
          oe2.e = L2.string();
          break;
        case 6:
          oe2.n = L2.string();
          break;
        default:
          L2.skipType(Pe2 & 7);
          break;
      }
    }
    return oe2;
  }, fromJSON(S2) {
    return { alg: Le2(S2.alg) ? String(S2.alg) : "", kty: Le2(S2.kty) ? String(S2.kty) : "", use: Le2(S2.use) ? String(S2.use) : "", kid: Le2(S2.kid) ? String(S2.kid) : "", e: Le2(S2.e) ? String(S2.e) : "", n: Le2(S2.n) ? String(S2.n) : "" };
  }, toJSON(S2) {
    const M2 = {};
    return S2.alg !== void 0 && (M2.alg = S2.alg), S2.kty !== void 0 && (M2.kty = S2.kty), S2.use !== void 0 && (M2.use = S2.use), S2.kid !== void 0 && (M2.kid = S2.kid), S2.e !== void 0 && (M2.e = S2.e), S2.n !== void 0 && (M2.n = S2.n), M2;
  }, fromPartial(S2) {
    var M2, L2, Ee2, oe2, Pe2, bt;
    const At = pn();
    return At.alg = (M2 = S2.alg) !== null && M2 !== void 0 ? M2 : "", At.kty = (L2 = S2.kty) !== null && L2 !== void 0 ? L2 : "", At.use = (Ee2 = S2.use) !== null && Ee2 !== void 0 ? Ee2 : "", At.kid = (oe2 = S2.kid) !== null && oe2 !== void 0 ? oe2 : "", At.e = (Pe2 = S2.e) !== null && Pe2 !== void 0 ? Pe2 : "", At.n = (bt = S2.n) !== null && bt !== void 0 ? bt : "", At;
  } };
  function mn() {
    return {};
  }
  a420.GetJsonWebKeySetRequest = { encode(S2, M2 = c.default.Writer.create()) {
    return M2;
  }, decode(S2, M2) {
    const L2 = S2 instanceof c.default.Reader ? S2 : new c.default.Reader(S2);
    let Ee2 = M2 === void 0 ? L2.len : L2.pos + M2;
    const oe2 = mn();
    for (; L2.pos < Ee2; ) {
      const Pe2 = L2.uint32();
      switch (Pe2 >>> 3) {
        default:
          L2.skipType(Pe2 & 7);
          break;
      }
    }
    return oe2;
  }, fromJSON(S2) {
    return {};
  }, toJSON(S2) {
    return {};
  }, fromPartial(S2) {
    return mn();
  } };
  function vn() {
    return { keys: [] };
  }
  a420.GetJsonWebKeySetResponse = { encode(S2, M2 = c.default.Writer.create()) {
    for (const L2 of S2.keys)
      a420.JsonWebKey.encode(L2, M2.uint32(10).fork()).ldelim();
    return M2;
  }, decode(S2, M2) {
    const L2 = S2 instanceof c.default.Reader ? S2 : new c.default.Reader(S2);
    let Ee2 = M2 === void 0 ? L2.len : L2.pos + M2;
    const oe2 = vn();
    for (; L2.pos < Ee2; ) {
      const Pe2 = L2.uint32();
      switch (Pe2 >>> 3) {
        case 1:
          oe2.keys.push(a420.JsonWebKey.decode(L2, L2.uint32()));
          break;
        default:
          L2.skipType(Pe2 & 7);
          break;
      }
    }
    return oe2;
  }, fromJSON(S2) {
    return { keys: Array.isArray(S2 == null ? void 0 : S2.keys) ? S2.keys.map((M2) => a420.JsonWebKey.fromJSON(M2)) : [] };
  }, toJSON(S2) {
    const M2 = {};
    return S2.keys ? M2.keys = S2.keys.map((L2) => L2 ? a420.JsonWebKey.toJSON(L2) : void 0) : M2.keys = [], M2;
  }, fromPartial(S2) {
    var M2;
    const L2 = vn();
    return L2.keys = ((M2 = S2.keys) === null || M2 === void 0 ? void 0 : M2.map((Ee2) => a420.JsonWebKey.fromPartial(Ee2))) || [], L2;
  } };
  function yn() {
    return {};
  }
  a420.GetTestTokenRequest = { encode(S2, M2 = c.default.Writer.create()) {
    return M2;
  }, decode(S2, M2) {
    const L2 = S2 instanceof c.default.Reader ? S2 : new c.default.Reader(S2);
    let Ee2 = M2 === void 0 ? L2.len : L2.pos + M2;
    const oe2 = yn();
    for (; L2.pos < Ee2; ) {
      const Pe2 = L2.uint32();
      switch (Pe2 >>> 3) {
        default:
          L2.skipType(Pe2 & 7);
          break;
      }
    }
    return oe2;
  }, fromJSON(S2) {
    return {};
  }, toJSON(S2) {
    return {};
  }, fromPartial(S2) {
    return yn();
  } };
  function gn() {
    return { accessToken: "" };
  }
  a420.GetTestTokenResponse = { encode(S2, M2 = c.default.Writer.create()) {
    return S2.accessToken !== "" && M2.uint32(10).string(S2.accessToken), M2;
  }, decode(S2, M2) {
    const L2 = S2 instanceof c.default.Reader ? S2 : new c.default.Reader(S2);
    let Ee2 = M2 === void 0 ? L2.len : L2.pos + M2;
    const oe2 = gn();
    for (; L2.pos < Ee2; ) {
      const Pe2 = L2.uint32();
      switch (Pe2 >>> 3) {
        case 1:
          oe2.accessToken = L2.string();
          break;
        default:
          L2.skipType(Pe2 & 7);
          break;
      }
    }
    return oe2;
  }, fromJSON(S2) {
    return { accessToken: Le2(S2.accessToken) ? String(S2.accessToken) : "" };
  }, toJSON(S2) {
    const M2 = {};
    return S2.accessToken !== void 0 && (M2.accessToken = S2.accessToken), M2;
  }, fromPartial(S2) {
    var M2;
    const L2 = gn();
    return L2.accessToken = (M2 = S2.accessToken) !== null && M2 !== void 0 ? M2 : "", L2;
  } };
  function Sn() {
    return { collectionId: "", projectId: "", destinationId: "", destination: void 0 };
  }
  a420.DestinationCreateEvent = { encode(S2, M2 = c.default.Writer.create()) {
    return S2.collectionId !== "" && M2.uint32(10).string(S2.collectionId), S2.projectId !== "" && M2.uint32(18).string(S2.projectId), S2.destinationId !== "" && M2.uint32(26).string(S2.destinationId), S2.destination !== void 0 && a420.Destination.encode(S2.destination, M2.uint32(34).fork()).ldelim(), M2;
  }, decode(S2, M2) {
    const L2 = S2 instanceof c.default.Reader ? S2 : new c.default.Reader(S2);
    let Ee2 = M2 === void 0 ? L2.len : L2.pos + M2;
    const oe2 = Sn();
    for (; L2.pos < Ee2; ) {
      const Pe2 = L2.uint32();
      switch (Pe2 >>> 3) {
        case 1:
          oe2.collectionId = L2.string();
          break;
        case 2:
          oe2.projectId = L2.string();
          break;
        case 3:
          oe2.destinationId = L2.string();
          break;
        case 4:
          oe2.destination = a420.Destination.decode(L2, L2.uint32());
          break;
        default:
          L2.skipType(Pe2 & 7);
          break;
      }
    }
    return oe2;
  }, fromJSON(S2) {
    return { collectionId: Le2(S2.collectionId) ? String(S2.collectionId) : "", projectId: Le2(S2.projectId) ? String(S2.projectId) : "", destinationId: Le2(S2.destinationId) ? String(S2.destinationId) : "", destination: Le2(S2.destination) ? a420.Destination.fromJSON(S2.destination) : void 0 };
  }, toJSON(S2) {
    const M2 = {};
    return S2.collectionId !== void 0 && (M2.collectionId = S2.collectionId), S2.projectId !== void 0 && (M2.projectId = S2.projectId), S2.destinationId !== void 0 && (M2.destinationId = S2.destinationId), S2.destination !== void 0 && (M2.destination = S2.destination ? a420.Destination.toJSON(S2.destination) : void 0), M2;
  }, fromPartial(S2) {
    var M2, L2, Ee2;
    const oe2 = Sn();
    return oe2.collectionId = (M2 = S2.collectionId) !== null && M2 !== void 0 ? M2 : "", oe2.projectId = (L2 = S2.projectId) !== null && L2 !== void 0 ? L2 : "", oe2.destinationId = (Ee2 = S2.destinationId) !== null && Ee2 !== void 0 ? Ee2 : "", oe2.destination = S2.destination !== void 0 && S2.destination !== null ? a420.Destination.fromPartial(S2.destination) : void 0, oe2;
  } };
  function _n() {
    return { collectionId: "", projectId: "", destinationId: "" };
  }
  a420.DestinationDeleteEvent = { encode(S2, M2 = c.default.Writer.create()) {
    return S2.collectionId !== "" && M2.uint32(10).string(S2.collectionId), S2.projectId !== "" && M2.uint32(18).string(S2.projectId), S2.destinationId !== "" && M2.uint32(26).string(S2.destinationId), M2;
  }, decode(S2, M2) {
    const L2 = S2 instanceof c.default.Reader ? S2 : new c.default.Reader(S2);
    let Ee2 = M2 === void 0 ? L2.len : L2.pos + M2;
    const oe2 = _n();
    for (; L2.pos < Ee2; ) {
      const Pe2 = L2.uint32();
      switch (Pe2 >>> 3) {
        case 1:
          oe2.collectionId = L2.string();
          break;
        case 2:
          oe2.projectId = L2.string();
          break;
        case 3:
          oe2.destinationId = L2.string();
          break;
        default:
          L2.skipType(Pe2 & 7);
          break;
      }
    }
    return oe2;
  }, fromJSON(S2) {
    return { collectionId: Le2(S2.collectionId) ? String(S2.collectionId) : "", projectId: Le2(S2.projectId) ? String(S2.projectId) : "", destinationId: Le2(S2.destinationId) ? String(S2.destinationId) : "" };
  }, toJSON(S2) {
    const M2 = {};
    return S2.collectionId !== void 0 && (M2.collectionId = S2.collectionId), S2.projectId !== void 0 && (M2.projectId = S2.projectId), S2.destinationId !== void 0 && (M2.destinationId = S2.destinationId), M2;
  }, fromPartial(S2) {
    var M2, L2, Ee2;
    const oe2 = _n();
    return oe2.collectionId = (M2 = S2.collectionId) !== null && M2 !== void 0 ? M2 : "", oe2.projectId = (L2 = S2.projectId) !== null && L2 !== void 0 ? L2 : "", oe2.destinationId = (Ee2 = S2.destinationId) !== null && Ee2 !== void 0 ? Ee2 : "", oe2;
  } };
  function En() {
    return { collectionId: "", projectId: "", destinationId: "", updateMask: [], destination: void 0 };
  }
  a420.DestinationUpdateEvent = { encode(S2, M2 = c.default.Writer.create()) {
    S2.collectionId !== "" && M2.uint32(10).string(S2.collectionId), S2.projectId !== "" && M2.uint32(18).string(S2.projectId), S2.destinationId !== "" && M2.uint32(26).string(S2.destinationId);
    for (const L2 of S2.updateMask)
      M2.uint32(34).string(L2);
    return S2.destination !== void 0 && a420.Destination.encode(S2.destination, M2.uint32(42).fork()).ldelim(), M2;
  }, decode(S2, M2) {
    const L2 = S2 instanceof c.default.Reader ? S2 : new c.default.Reader(S2);
    let Ee2 = M2 === void 0 ? L2.len : L2.pos + M2;
    const oe2 = En();
    for (; L2.pos < Ee2; ) {
      const Pe2 = L2.uint32();
      switch (Pe2 >>> 3) {
        case 1:
          oe2.collectionId = L2.string();
          break;
        case 2:
          oe2.projectId = L2.string();
          break;
        case 3:
          oe2.destinationId = L2.string();
          break;
        case 4:
          oe2.updateMask.push(L2.string());
          break;
        case 5:
          oe2.destination = a420.Destination.decode(L2, L2.uint32());
          break;
        default:
          L2.skipType(Pe2 & 7);
          break;
      }
    }
    return oe2;
  }, fromJSON(S2) {
    return { collectionId: Le2(S2.collectionId) ? String(S2.collectionId) : "", projectId: Le2(S2.projectId) ? String(S2.projectId) : "", destinationId: Le2(S2.destinationId) ? String(S2.destinationId) : "", updateMask: Array.isArray(S2 == null ? void 0 : S2.updateMask) ? S2.updateMask.map((M2) => String(M2)) : [], destination: Le2(S2.destination) ? a420.Destination.fromJSON(S2.destination) : void 0 };
  }, toJSON(S2) {
    const M2 = {};
    return S2.collectionId !== void 0 && (M2.collectionId = S2.collectionId), S2.projectId !== void 0 && (M2.projectId = S2.projectId), S2.destinationId !== void 0 && (M2.destinationId = S2.destinationId), S2.updateMask ? M2.updateMask = S2.updateMask.map((L2) => L2) : M2.updateMask = [], S2.destination !== void 0 && (M2.destination = S2.destination ? a420.Destination.toJSON(S2.destination) : void 0), M2;
  }, fromPartial(S2) {
    var M2, L2, Ee2, oe2;
    const Pe2 = En();
    return Pe2.collectionId = (M2 = S2.collectionId) !== null && M2 !== void 0 ? M2 : "", Pe2.projectId = (L2 = S2.projectId) !== null && L2 !== void 0 ? L2 : "", Pe2.destinationId = (Ee2 = S2.destinationId) !== null && Ee2 !== void 0 ? Ee2 : "", Pe2.updateMask = ((oe2 = S2.updateMask) === null || oe2 === void 0 ? void 0 : oe2.map((bt) => bt)) || [], Pe2.destination = S2.destination !== void 0 && S2.destination !== null ? a420.Destination.fromPartial(S2.destination) : void 0, Pe2;
  } };
  function wn() {
    return { collectionId: "", projectId: "", destinationId: "", connect: void 0 };
  }
  a420.DestinationStateEvent = { encode(S2, M2 = c.default.Writer.create()) {
    return S2.collectionId !== "" && M2.uint32(10).string(S2.collectionId), S2.projectId !== "" && M2.uint32(18).string(S2.projectId), S2.destinationId !== "" && M2.uint32(26).string(S2.destinationId), S2.connect !== void 0 && M2.uint32(32).int32(ue2(S2.connect)), M2;
  }, decode(S2, M2) {
    const L2 = S2 instanceof c.default.Reader ? S2 : new c.default.Reader(S2);
    let Ee2 = M2 === void 0 ? L2.len : L2.pos + M2;
    const oe2 = wn();
    for (; L2.pos < Ee2; ) {
      const Pe2 = L2.uint32();
      switch (Pe2 >>> 3) {
        case 1:
          oe2.collectionId = L2.string();
          break;
        case 2:
          oe2.projectId = L2.string();
          break;
        case 3:
          oe2.destinationId = L2.string();
          break;
        case 4:
          oe2.connect = J2(L2.int32());
          break;
        default:
          L2.skipType(Pe2 & 7);
          break;
      }
    }
    return oe2;
  }, fromJSON(S2) {
    return { collectionId: Le2(S2.collectionId) ? String(S2.collectionId) : "", projectId: Le2(S2.projectId) ? String(S2.projectId) : "", destinationId: Le2(S2.destinationId) ? String(S2.destinationId) : "", connect: Le2(S2.connect) ? J2(S2.connect) : void 0 };
  }, toJSON(S2) {
    const M2 = {};
    return S2.collectionId !== void 0 && (M2.collectionId = S2.collectionId), S2.projectId !== void 0 && (M2.projectId = S2.projectId), S2.destinationId !== void 0 && (M2.destinationId = S2.destinationId), S2.connect !== void 0 && (M2.connect = S2.connect !== void 0 ? _e(S2.connect) : void 0), M2;
  }, fromPartial(S2) {
    var M2, L2, Ee2, oe2;
    const Pe2 = wn();
    return Pe2.collectionId = (M2 = S2.collectionId) !== null && M2 !== void 0 ? M2 : "", Pe2.projectId = (L2 = S2.projectId) !== null && L2 !== void 0 ? L2 : "", Pe2.destinationId = (Ee2 = S2.destinationId) !== null && Ee2 !== void 0 ? Ee2 : "", Pe2.connect = (oe2 = S2.connect) !== null && oe2 !== void 0 ? oe2 : void 0, Pe2;
  } };
  function Tn() {
    return { collectionId: "", projectId: "", project: void 0 };
  }
  a420.ProjectCreateEvent = { encode(S2, M2 = c.default.Writer.create()) {
    return S2.collectionId !== "" && M2.uint32(10).string(S2.collectionId), S2.projectId !== "" && M2.uint32(18).string(S2.projectId), S2.project !== void 0 && a420.Project.encode(S2.project, M2.uint32(26).fork()).ldelim(), M2;
  }, decode(S2, M2) {
    const L2 = S2 instanceof c.default.Reader ? S2 : new c.default.Reader(S2);
    let Ee2 = M2 === void 0 ? L2.len : L2.pos + M2;
    const oe2 = Tn();
    for (; L2.pos < Ee2; ) {
      const Pe2 = L2.uint32();
      switch (Pe2 >>> 3) {
        case 1:
          oe2.collectionId = L2.string();
          break;
        case 2:
          oe2.projectId = L2.string();
          break;
        case 3:
          oe2.project = a420.Project.decode(L2, L2.uint32());
          break;
        default:
          L2.skipType(Pe2 & 7);
          break;
      }
    }
    return oe2;
  }, fromJSON(S2) {
    return { collectionId: Le2(S2.collectionId) ? String(S2.collectionId) : "", projectId: Le2(S2.projectId) ? String(S2.projectId) : "", project: Le2(S2.project) ? a420.Project.fromJSON(S2.project) : void 0 };
  }, toJSON(S2) {
    const M2 = {};
    return S2.collectionId !== void 0 && (M2.collectionId = S2.collectionId), S2.projectId !== void 0 && (M2.projectId = S2.projectId), S2.project !== void 0 && (M2.project = S2.project ? a420.Project.toJSON(S2.project) : void 0), M2;
  }, fromPartial(S2) {
    var M2, L2;
    const Ee2 = Tn();
    return Ee2.collectionId = (M2 = S2.collectionId) !== null && M2 !== void 0 ? M2 : "", Ee2.projectId = (L2 = S2.projectId) !== null && L2 !== void 0 ? L2 : "", Ee2.project = S2.project !== void 0 && S2.project !== null ? a420.Project.fromPartial(S2.project) : void 0, Ee2;
  } };
  function In() {
    return { collectionId: "", projectId: "" };
  }
  a420.ProjectDeleteEvent = { encode(S2, M2 = c.default.Writer.create()) {
    return S2.collectionId !== "" && M2.uint32(10).string(S2.collectionId), S2.projectId !== "" && M2.uint32(18).string(S2.projectId), M2;
  }, decode(S2, M2) {
    const L2 = S2 instanceof c.default.Reader ? S2 : new c.default.Reader(S2);
    let Ee2 = M2 === void 0 ? L2.len : L2.pos + M2;
    const oe2 = In();
    for (; L2.pos < Ee2; ) {
      const Pe2 = L2.uint32();
      switch (Pe2 >>> 3) {
        case 1:
          oe2.collectionId = L2.string();
          break;
        case 2:
          oe2.projectId = L2.string();
          break;
        default:
          L2.skipType(Pe2 & 7);
          break;
      }
    }
    return oe2;
  }, fromJSON(S2) {
    return { collectionId: Le2(S2.collectionId) ? String(S2.collectionId) : "", projectId: Le2(S2.projectId) ? String(S2.projectId) : "" };
  }, toJSON(S2) {
    const M2 = {};
    return S2.collectionId !== void 0 && (M2.collectionId = S2.collectionId), S2.projectId !== void 0 && (M2.projectId = S2.projectId), M2;
  }, fromPartial(S2) {
    var M2, L2;
    const Ee2 = In();
    return Ee2.collectionId = (M2 = S2.collectionId) !== null && M2 !== void 0 ? M2 : "", Ee2.projectId = (L2 = S2.projectId) !== null && L2 !== void 0 ? L2 : "", Ee2;
  } };
  function kn() {
    return { collectionId: "", projectId: "", updateMask: [], project: void 0 };
  }
  a420.ProjectUpdateEvent = { encode(S2, M2 = c.default.Writer.create()) {
    S2.collectionId !== "" && M2.uint32(10).string(S2.collectionId), S2.projectId !== "" && M2.uint32(18).string(S2.projectId);
    for (const L2 of S2.updateMask)
      M2.uint32(26).string(L2);
    return S2.project !== void 0 && a420.Project.encode(S2.project, M2.uint32(34).fork()).ldelim(), M2;
  }, decode(S2, M2) {
    const L2 = S2 instanceof c.default.Reader ? S2 : new c.default.Reader(S2);
    let Ee2 = M2 === void 0 ? L2.len : L2.pos + M2;
    const oe2 = kn();
    for (; L2.pos < Ee2; ) {
      const Pe2 = L2.uint32();
      switch (Pe2 >>> 3) {
        case 1:
          oe2.collectionId = L2.string();
          break;
        case 2:
          oe2.projectId = L2.string();
          break;
        case 3:
          oe2.updateMask.push(L2.string());
          break;
        case 4:
          oe2.project = a420.Project.decode(L2, L2.uint32());
          break;
        default:
          L2.skipType(Pe2 & 7);
          break;
      }
    }
    return oe2;
  }, fromJSON(S2) {
    return { collectionId: Le2(S2.collectionId) ? String(S2.collectionId) : "", projectId: Le2(S2.projectId) ? String(S2.projectId) : "", updateMask: Array.isArray(S2 == null ? void 0 : S2.updateMask) ? S2.updateMask.map((M2) => String(M2)) : [], project: Le2(S2.project) ? a420.Project.fromJSON(S2.project) : void 0 };
  }, toJSON(S2) {
    const M2 = {};
    return S2.collectionId !== void 0 && (M2.collectionId = S2.collectionId), S2.projectId !== void 0 && (M2.projectId = S2.projectId), S2.updateMask ? M2.updateMask = S2.updateMask.map((L2) => L2) : M2.updateMask = [], S2.project !== void 0 && (M2.project = S2.project ? a420.Project.toJSON(S2.project) : void 0), M2;
  }, fromPartial(S2) {
    var M2, L2, Ee2;
    const oe2 = kn();
    return oe2.collectionId = (M2 = S2.collectionId) !== null && M2 !== void 0 ? M2 : "", oe2.projectId = (L2 = S2.projectId) !== null && L2 !== void 0 ? L2 : "", oe2.updateMask = ((Ee2 = S2.updateMask) === null || Ee2 === void 0 ? void 0 : Ee2.map((Pe2) => Pe2)) || [], oe2.project = S2.project !== void 0 && S2.project !== null ? a420.Project.fromPartial(S2.project) : void 0, oe2;
  } };
  function Rn() {
    return { collectionId: "", projectId: "", broadcastId: "", phase: void 0, error: void 0 };
  }
  a420.ProjectBroadcastStateEvent = { encode(S2, M2 = c.default.Writer.create()) {
    return S2.collectionId !== "" && M2.uint32(10).string(S2.collectionId), S2.projectId !== "" && M2.uint32(18).string(S2.projectId), S2.broadcastId !== "" && M2.uint32(26).string(S2.broadcastId), S2.phase !== void 0 && M2.uint32(32).int32(ye2(S2.phase)), S2.error !== void 0 && M2.uint32(40).int32(We2(S2.error)), M2;
  }, decode(S2, M2) {
    const L2 = S2 instanceof c.default.Reader ? S2 : new c.default.Reader(S2);
    let Ee2 = M2 === void 0 ? L2.len : L2.pos + M2;
    const oe2 = Rn();
    for (; L2.pos < Ee2; ) {
      const Pe2 = L2.uint32();
      switch (Pe2 >>> 3) {
        case 1:
          oe2.collectionId = L2.string();
          break;
        case 2:
          oe2.projectId = L2.string();
          break;
        case 3:
          oe2.broadcastId = L2.string();
          break;
        case 4:
          oe2.phase = Ie2(L2.int32());
          break;
        case 5:
          oe2.error = ge2(L2.int32());
          break;
        default:
          L2.skipType(Pe2 & 7);
          break;
      }
    }
    return oe2;
  }, fromJSON(S2) {
    return { collectionId: Le2(S2.collectionId) ? String(S2.collectionId) : "", projectId: Le2(S2.projectId) ? String(S2.projectId) : "", broadcastId: Le2(S2.broadcastId) ? String(S2.broadcastId) : "", phase: Le2(S2.phase) ? Ie2(S2.phase) : void 0, error: Le2(S2.error) ? ge2(S2.error) : void 0 };
  }, toJSON(S2) {
    const M2 = {};
    return S2.collectionId !== void 0 && (M2.collectionId = S2.collectionId), S2.projectId !== void 0 && (M2.projectId = S2.projectId), S2.broadcastId !== void 0 && (M2.broadcastId = S2.broadcastId), S2.phase !== void 0 && (M2.phase = S2.phase !== void 0 ? $e2(S2.phase) : void 0), S2.error !== void 0 && (M2.error = S2.error !== void 0 ? we2(S2.error) : void 0), M2;
  }, fromPartial(S2) {
    var M2, L2, Ee2, oe2, Pe2;
    const bt = Rn();
    return bt.collectionId = (M2 = S2.collectionId) !== null && M2 !== void 0 ? M2 : "", bt.projectId = (L2 = S2.projectId) !== null && L2 !== void 0 ? L2 : "", bt.broadcastId = (Ee2 = S2.broadcastId) !== null && Ee2 !== void 0 ? Ee2 : "", bt.phase = (oe2 = S2.phase) !== null && oe2 !== void 0 ? oe2 : void 0, bt.error = (Pe2 = S2.error) !== null && Pe2 !== void 0 ? Pe2 : void 0, bt;
  } };
  function Cn() {
    return { collectionId: "", collection: void 0 };
  }
  a420.CollectionCreateEvent = { encode(S2, M2 = c.default.Writer.create()) {
    return S2.collectionId !== "" && M2.uint32(10).string(S2.collectionId), S2.collection !== void 0 && a420.Collection.encode(S2.collection, M2.uint32(18).fork()).ldelim(), M2;
  }, decode(S2, M2) {
    const L2 = S2 instanceof c.default.Reader ? S2 : new c.default.Reader(S2);
    let Ee2 = M2 === void 0 ? L2.len : L2.pos + M2;
    const oe2 = Cn();
    for (; L2.pos < Ee2; ) {
      const Pe2 = L2.uint32();
      switch (Pe2 >>> 3) {
        case 1:
          oe2.collectionId = L2.string();
          break;
        case 2:
          oe2.collection = a420.Collection.decode(L2, L2.uint32());
          break;
        default:
          L2.skipType(Pe2 & 7);
          break;
      }
    }
    return oe2;
  }, fromJSON(S2) {
    return { collectionId: Le2(S2.collectionId) ? String(S2.collectionId) : "", collection: Le2(S2.collection) ? a420.Collection.fromJSON(S2.collection) : void 0 };
  }, toJSON(S2) {
    const M2 = {};
    return S2.collectionId !== void 0 && (M2.collectionId = S2.collectionId), S2.collection !== void 0 && (M2.collection = S2.collection ? a420.Collection.toJSON(S2.collection) : void 0), M2;
  }, fromPartial(S2) {
    var M2;
    const L2 = Cn();
    return L2.collectionId = (M2 = S2.collectionId) !== null && M2 !== void 0 ? M2 : "", L2.collection = S2.collection !== void 0 && S2.collection !== null ? a420.Collection.fromPartial(S2.collection) : void 0, L2;
  } };
  function Pn() {
    return { collectionId: "" };
  }
  a420.CollectionDeleteEvent = { encode(S2, M2 = c.default.Writer.create()) {
    return S2.collectionId !== "" && M2.uint32(10).string(S2.collectionId), M2;
  }, decode(S2, M2) {
    const L2 = S2 instanceof c.default.Reader ? S2 : new c.default.Reader(S2);
    let Ee2 = M2 === void 0 ? L2.len : L2.pos + M2;
    const oe2 = Pn();
    for (; L2.pos < Ee2; ) {
      const Pe2 = L2.uint32();
      switch (Pe2 >>> 3) {
        case 1:
          oe2.collectionId = L2.string();
          break;
        default:
          L2.skipType(Pe2 & 7);
          break;
      }
    }
    return oe2;
  }, fromJSON(S2) {
    return { collectionId: Le2(S2.collectionId) ? String(S2.collectionId) : "" };
  }, toJSON(S2) {
    const M2 = {};
    return S2.collectionId !== void 0 && (M2.collectionId = S2.collectionId), M2;
  }, fromPartial(S2) {
    var M2;
    const L2 = Pn();
    return L2.collectionId = (M2 = S2.collectionId) !== null && M2 !== void 0 ? M2 : "", L2;
  } };
  function On() {
    return { collectionId: "", updateMask: [], collection: void 0 };
  }
  a420.CollectionUpdateEvent = { encode(S2, M2 = c.default.Writer.create()) {
    S2.collectionId !== "" && M2.uint32(10).string(S2.collectionId);
    for (const L2 of S2.updateMask)
      M2.uint32(18).string(L2);
    return S2.collection !== void 0 && a420.Collection.encode(S2.collection, M2.uint32(26).fork()).ldelim(), M2;
  }, decode(S2, M2) {
    const L2 = S2 instanceof c.default.Reader ? S2 : new c.default.Reader(S2);
    let Ee2 = M2 === void 0 ? L2.len : L2.pos + M2;
    const oe2 = On();
    for (; L2.pos < Ee2; ) {
      const Pe2 = L2.uint32();
      switch (Pe2 >>> 3) {
        case 1:
          oe2.collectionId = L2.string();
          break;
        case 2:
          oe2.updateMask.push(L2.string());
          break;
        case 3:
          oe2.collection = a420.Collection.decode(L2, L2.uint32());
          break;
        default:
          L2.skipType(Pe2 & 7);
          break;
      }
    }
    return oe2;
  }, fromJSON(S2) {
    return { collectionId: Le2(S2.collectionId) ? String(S2.collectionId) : "", updateMask: Array.isArray(S2 == null ? void 0 : S2.updateMask) ? S2.updateMask.map((M2) => String(M2)) : [], collection: Le2(S2.collection) ? a420.Collection.fromJSON(S2.collection) : void 0 };
  }, toJSON(S2) {
    const M2 = {};
    return S2.collectionId !== void 0 && (M2.collectionId = S2.collectionId), S2.updateMask ? M2.updateMask = S2.updateMask.map((L2) => L2) : M2.updateMask = [], S2.collection !== void 0 && (M2.collection = S2.collection ? a420.Collection.toJSON(S2.collection) : void 0), M2;
  }, fromPartial(S2) {
    var M2, L2;
    const Ee2 = On();
    return Ee2.collectionId = (M2 = S2.collectionId) !== null && M2 !== void 0 ? M2 : "", Ee2.updateMask = ((L2 = S2.updateMask) === null || L2 === void 0 ? void 0 : L2.map((oe2) => oe2)) || [], Ee2.collection = S2.collection !== void 0 && S2.collection !== null ? a420.Collection.fromPartial(S2.collection) : void 0, Ee2;
  } };
  function Mn() {
    return { collectionId: "", sourceId: "", source: void 0 };
  }
  a420.SourceCreateEvent = { encode(S2, M2 = c.default.Writer.create()) {
    return S2.collectionId !== "" && M2.uint32(10).string(S2.collectionId), S2.sourceId !== "" && M2.uint32(18).string(S2.sourceId), S2.source !== void 0 && a420.Source.encode(S2.source, M2.uint32(26).fork()).ldelim(), M2;
  }, decode(S2, M2) {
    const L2 = S2 instanceof c.default.Reader ? S2 : new c.default.Reader(S2);
    let Ee2 = M2 === void 0 ? L2.len : L2.pos + M2;
    const oe2 = Mn();
    for (; L2.pos < Ee2; ) {
      const Pe2 = L2.uint32();
      switch (Pe2 >>> 3) {
        case 1:
          oe2.collectionId = L2.string();
          break;
        case 2:
          oe2.sourceId = L2.string();
          break;
        case 3:
          oe2.source = a420.Source.decode(L2, L2.uint32());
          break;
        default:
          L2.skipType(Pe2 & 7);
          break;
      }
    }
    return oe2;
  }, fromJSON(S2) {
    return { collectionId: Le2(S2.collectionId) ? String(S2.collectionId) : "", sourceId: Le2(S2.sourceId) ? String(S2.sourceId) : "", source: Le2(S2.source) ? a420.Source.fromJSON(S2.source) : void 0 };
  }, toJSON(S2) {
    const M2 = {};
    return S2.collectionId !== void 0 && (M2.collectionId = S2.collectionId), S2.sourceId !== void 0 && (M2.sourceId = S2.sourceId), S2.source !== void 0 && (M2.source = S2.source ? a420.Source.toJSON(S2.source) : void 0), M2;
  }, fromPartial(S2) {
    var M2, L2;
    const Ee2 = Mn();
    return Ee2.collectionId = (M2 = S2.collectionId) !== null && M2 !== void 0 ? M2 : "", Ee2.sourceId = (L2 = S2.sourceId) !== null && L2 !== void 0 ? L2 : "", Ee2.source = S2.source !== void 0 && S2.source !== null ? a420.Source.fromPartial(S2.source) : void 0, Ee2;
  } };
  function Nn() {
    return { collectionId: "", sourceId: "" };
  }
  a420.SourceDeleteEvent = { encode(S2, M2 = c.default.Writer.create()) {
    return S2.collectionId !== "" && M2.uint32(10).string(S2.collectionId), S2.sourceId !== "" && M2.uint32(18).string(S2.sourceId), M2;
  }, decode(S2, M2) {
    const L2 = S2 instanceof c.default.Reader ? S2 : new c.default.Reader(S2);
    let Ee2 = M2 === void 0 ? L2.len : L2.pos + M2;
    const oe2 = Nn();
    for (; L2.pos < Ee2; ) {
      const Pe2 = L2.uint32();
      switch (Pe2 >>> 3) {
        case 1:
          oe2.collectionId = L2.string();
          break;
        case 2:
          oe2.sourceId = L2.string();
          break;
        default:
          L2.skipType(Pe2 & 7);
          break;
      }
    }
    return oe2;
  }, fromJSON(S2) {
    return { collectionId: Le2(S2.collectionId) ? String(S2.collectionId) : "", sourceId: Le2(S2.sourceId) ? String(S2.sourceId) : "" };
  }, toJSON(S2) {
    const M2 = {};
    return S2.collectionId !== void 0 && (M2.collectionId = S2.collectionId), S2.sourceId !== void 0 && (M2.sourceId = S2.sourceId), M2;
  }, fromPartial(S2) {
    var M2, L2;
    const Ee2 = Nn();
    return Ee2.collectionId = (M2 = S2.collectionId) !== null && M2 !== void 0 ? M2 : "", Ee2.sourceId = (L2 = S2.sourceId) !== null && L2 !== void 0 ? L2 : "", Ee2;
  } };
  function An() {
    return { collectionId: "", sourceId: "", updateMask: [], source: void 0 };
  }
  a420.SourceUpdateEvent = { encode(S2, M2 = c.default.Writer.create()) {
    S2.collectionId !== "" && M2.uint32(10).string(S2.collectionId), S2.sourceId !== "" && M2.uint32(18).string(S2.sourceId);
    for (const L2 of S2.updateMask)
      M2.uint32(26).string(L2);
    return S2.source !== void 0 && a420.Source.encode(S2.source, M2.uint32(34).fork()).ldelim(), M2;
  }, decode(S2, M2) {
    const L2 = S2 instanceof c.default.Reader ? S2 : new c.default.Reader(S2);
    let Ee2 = M2 === void 0 ? L2.len : L2.pos + M2;
    const oe2 = An();
    for (; L2.pos < Ee2; ) {
      const Pe2 = L2.uint32();
      switch (Pe2 >>> 3) {
        case 1:
          oe2.collectionId = L2.string();
          break;
        case 2:
          oe2.sourceId = L2.string();
          break;
        case 3:
          oe2.updateMask.push(L2.string());
          break;
        case 4:
          oe2.source = a420.Source.decode(L2, L2.uint32());
          break;
        default:
          L2.skipType(Pe2 & 7);
          break;
      }
    }
    return oe2;
  }, fromJSON(S2) {
    return { collectionId: Le2(S2.collectionId) ? String(S2.collectionId) : "", sourceId: Le2(S2.sourceId) ? String(S2.sourceId) : "", updateMask: Array.isArray(S2 == null ? void 0 : S2.updateMask) ? S2.updateMask.map((M2) => String(M2)) : [], source: Le2(S2.source) ? a420.Source.fromJSON(S2.source) : void 0 };
  }, toJSON(S2) {
    const M2 = {};
    return S2.collectionId !== void 0 && (M2.collectionId = S2.collectionId), S2.sourceId !== void 0 && (M2.sourceId = S2.sourceId), S2.updateMask ? M2.updateMask = S2.updateMask.map((L2) => L2) : M2.updateMask = [], S2.source !== void 0 && (M2.source = S2.source ? a420.Source.toJSON(S2.source) : void 0), M2;
  }, fromPartial(S2) {
    var M2, L2, Ee2;
    const oe2 = An();
    return oe2.collectionId = (M2 = S2.collectionId) !== null && M2 !== void 0 ? M2 : "", oe2.sourceId = (L2 = S2.sourceId) !== null && L2 !== void 0 ? L2 : "", oe2.updateMask = ((Ee2 = S2.updateMask) === null || Ee2 === void 0 ? void 0 : Ee2.map((Pe2) => Pe2)) || [], oe2.source = S2.source !== void 0 && S2.source !== null ? a420.Source.fromPartial(S2.source) : void 0, oe2;
  } };
  function $n() {
    return { collectionId: "", sourceId: "", projectId: "", source: void 0 };
  }
  a420.SourceAddEvent = { encode(S2, M2 = c.default.Writer.create()) {
    return S2.collectionId !== "" && M2.uint32(10).string(S2.collectionId), S2.sourceId !== "" && M2.uint32(18).string(S2.sourceId), S2.projectId !== "" && M2.uint32(26).string(S2.projectId), S2.source !== void 0 && a420.Source.encode(S2.source, M2.uint32(34).fork()).ldelim(), M2;
  }, decode(S2, M2) {
    const L2 = S2 instanceof c.default.Reader ? S2 : new c.default.Reader(S2);
    let Ee2 = M2 === void 0 ? L2.len : L2.pos + M2;
    const oe2 = $n();
    for (; L2.pos < Ee2; ) {
      const Pe2 = L2.uint32();
      switch (Pe2 >>> 3) {
        case 1:
          oe2.collectionId = L2.string();
          break;
        case 2:
          oe2.sourceId = L2.string();
          break;
        case 3:
          oe2.projectId = L2.string();
          break;
        case 4:
          oe2.source = a420.Source.decode(L2, L2.uint32());
          break;
        default:
          L2.skipType(Pe2 & 7);
          break;
      }
    }
    return oe2;
  }, fromJSON(S2) {
    return { collectionId: Le2(S2.collectionId) ? String(S2.collectionId) : "", sourceId: Le2(S2.sourceId) ? String(S2.sourceId) : "", projectId: Le2(S2.projectId) ? String(S2.projectId) : "", source: Le2(S2.source) ? a420.Source.fromJSON(S2.source) : void 0 };
  }, toJSON(S2) {
    const M2 = {};
    return S2.collectionId !== void 0 && (M2.collectionId = S2.collectionId), S2.sourceId !== void 0 && (M2.sourceId = S2.sourceId), S2.projectId !== void 0 && (M2.projectId = S2.projectId), S2.source !== void 0 && (M2.source = S2.source ? a420.Source.toJSON(S2.source) : void 0), M2;
  }, fromPartial(S2) {
    var M2, L2, Ee2;
    const oe2 = $n();
    return oe2.collectionId = (M2 = S2.collectionId) !== null && M2 !== void 0 ? M2 : "", oe2.sourceId = (L2 = S2.sourceId) !== null && L2 !== void 0 ? L2 : "", oe2.projectId = (Ee2 = S2.projectId) !== null && Ee2 !== void 0 ? Ee2 : "", oe2.source = S2.source !== void 0 && S2.source !== null ? a420.Source.fromPartial(S2.source) : void 0, oe2;
  } };
  function Dn() {
    return { collectionId: "", sourceId: "", projectId: "" };
  }
  a420.SourceRemoveEvent = { encode(S2, M2 = c.default.Writer.create()) {
    return S2.collectionId !== "" && M2.uint32(10).string(S2.collectionId), S2.sourceId !== "" && M2.uint32(18).string(S2.sourceId), S2.projectId !== "" && M2.uint32(26).string(S2.projectId), M2;
  }, decode(S2, M2) {
    const L2 = S2 instanceof c.default.Reader ? S2 : new c.default.Reader(S2);
    let Ee2 = M2 === void 0 ? L2.len : L2.pos + M2;
    const oe2 = Dn();
    for (; L2.pos < Ee2; ) {
      const Pe2 = L2.uint32();
      switch (Pe2 >>> 3) {
        case 1:
          oe2.collectionId = L2.string();
          break;
        case 2:
          oe2.sourceId = L2.string();
          break;
        case 3:
          oe2.projectId = L2.string();
          break;
        default:
          L2.skipType(Pe2 & 7);
          break;
      }
    }
    return oe2;
  }, fromJSON(S2) {
    return { collectionId: Le2(S2.collectionId) ? String(S2.collectionId) : "", sourceId: Le2(S2.sourceId) ? String(S2.sourceId) : "", projectId: Le2(S2.projectId) ? String(S2.projectId) : "" };
  }, toJSON(S2) {
    const M2 = {};
    return S2.collectionId !== void 0 && (M2.collectionId = S2.collectionId), S2.sourceId !== void 0 && (M2.sourceId = S2.sourceId), S2.projectId !== void 0 && (M2.projectId = S2.projectId), M2;
  }, fromPartial(S2) {
    var M2, L2, Ee2;
    const oe2 = Dn();
    return oe2.collectionId = (M2 = S2.collectionId) !== null && M2 !== void 0 ? M2 : "", oe2.sourceId = (L2 = S2.sourceId) !== null && L2 !== void 0 ? L2 : "", oe2.projectId = (Ee2 = S2.projectId) !== null && Ee2 !== void 0 ? Ee2 : "", oe2;
  } };
  function Ln() {
    return { collectionId: "", projectId: "", sourceId: "", connect: void 0 };
  }
  a420.SourceStateEvent = { encode(S2, M2 = c.default.Writer.create()) {
    return S2.collectionId !== "" && M2.uint32(10).string(S2.collectionId), S2.projectId !== "" && M2.uint32(18).string(S2.projectId), S2.sourceId !== "" && M2.uint32(26).string(S2.sourceId), S2.connect !== void 0 && M2.uint32(32).int32(ue2(S2.connect)), M2;
  }, decode(S2, M2) {
    const L2 = S2 instanceof c.default.Reader ? S2 : new c.default.Reader(S2);
    let Ee2 = M2 === void 0 ? L2.len : L2.pos + M2;
    const oe2 = Ln();
    for (; L2.pos < Ee2; ) {
      const Pe2 = L2.uint32();
      switch (Pe2 >>> 3) {
        case 1:
          oe2.collectionId = L2.string();
          break;
        case 2:
          oe2.projectId = L2.string();
          break;
        case 3:
          oe2.sourceId = L2.string();
          break;
        case 4:
          oe2.connect = J2(L2.int32());
          break;
        default:
          L2.skipType(Pe2 & 7);
          break;
      }
    }
    return oe2;
  }, fromJSON(S2) {
    return { collectionId: Le2(S2.collectionId) ? String(S2.collectionId) : "", projectId: Le2(S2.projectId) ? String(S2.projectId) : "", sourceId: Le2(S2.sourceId) ? String(S2.sourceId) : "", connect: Le2(S2.connect) ? J2(S2.connect) : void 0 };
  }, toJSON(S2) {
    const M2 = {};
    return S2.collectionId !== void 0 && (M2.collectionId = S2.collectionId), S2.projectId !== void 0 && (M2.projectId = S2.projectId), S2.sourceId !== void 0 && (M2.sourceId = S2.sourceId), S2.connect !== void 0 && (M2.connect = S2.connect !== void 0 ? _e(S2.connect) : void 0), M2;
  }, fromPartial(S2) {
    var M2, L2, Ee2, oe2;
    const Pe2 = Ln();
    return Pe2.collectionId = (M2 = S2.collectionId) !== null && M2 !== void 0 ? M2 : "", Pe2.projectId = (L2 = S2.projectId) !== null && L2 !== void 0 ? L2 : "", Pe2.sourceId = (Ee2 = S2.sourceId) !== null && Ee2 !== void 0 ? Ee2 : "", Pe2.connect = (oe2 = S2.connect) !== null && oe2 !== void 0 ? oe2 : void 0, Pe2;
  } };
  function Bn() {
    return { create: void 0, update: void 0, delete: void 0 };
  }
  a420.CollectionEvent = { encode(S2, M2 = c.default.Writer.create()) {
    return S2.create !== void 0 && a420.CollectionCreateEvent.encode(S2.create, M2.uint32(10).fork()).ldelim(), S2.update !== void 0 && a420.CollectionUpdateEvent.encode(S2.update, M2.uint32(18).fork()).ldelim(), S2.delete !== void 0 && a420.CollectionDeleteEvent.encode(S2.delete, M2.uint32(26).fork()).ldelim(), M2;
  }, decode(S2, M2) {
    const L2 = S2 instanceof c.default.Reader ? S2 : new c.default.Reader(S2);
    let Ee2 = M2 === void 0 ? L2.len : L2.pos + M2;
    const oe2 = Bn();
    for (; L2.pos < Ee2; ) {
      const Pe2 = L2.uint32();
      switch (Pe2 >>> 3) {
        case 1:
          oe2.create = a420.CollectionCreateEvent.decode(L2, L2.uint32());
          break;
        case 2:
          oe2.update = a420.CollectionUpdateEvent.decode(L2, L2.uint32());
          break;
        case 3:
          oe2.delete = a420.CollectionDeleteEvent.decode(L2, L2.uint32());
          break;
        default:
          L2.skipType(Pe2 & 7);
          break;
      }
    }
    return oe2;
  }, fromJSON(S2) {
    return { create: Le2(S2.create) ? a420.CollectionCreateEvent.fromJSON(S2.create) : void 0, update: Le2(S2.update) ? a420.CollectionUpdateEvent.fromJSON(S2.update) : void 0, delete: Le2(S2.delete) ? a420.CollectionDeleteEvent.fromJSON(S2.delete) : void 0 };
  }, toJSON(S2) {
    const M2 = {};
    return S2.create !== void 0 && (M2.create = S2.create ? a420.CollectionCreateEvent.toJSON(S2.create) : void 0), S2.update !== void 0 && (M2.update = S2.update ? a420.CollectionUpdateEvent.toJSON(S2.update) : void 0), S2.delete !== void 0 && (M2.delete = S2.delete ? a420.CollectionDeleteEvent.toJSON(S2.delete) : void 0), M2;
  }, fromPartial(S2) {
    const M2 = Bn();
    return M2.create = S2.create !== void 0 && S2.create !== null ? a420.CollectionCreateEvent.fromPartial(S2.create) : void 0, M2.update = S2.update !== void 0 && S2.update !== null ? a420.CollectionUpdateEvent.fromPartial(S2.update) : void 0, M2.delete = S2.delete !== void 0 && S2.delete !== null ? a420.CollectionDeleteEvent.fromPartial(S2.delete) : void 0, M2;
  } };
  function xn() {
    return { create: void 0, update: void 0, delete: void 0, state: void 0 };
  }
  a420.DestinationEvent = { encode(S2, M2 = c.default.Writer.create()) {
    return S2.create !== void 0 && a420.DestinationCreateEvent.encode(S2.create, M2.uint32(10).fork()).ldelim(), S2.update !== void 0 && a420.DestinationUpdateEvent.encode(S2.update, M2.uint32(18).fork()).ldelim(), S2.delete !== void 0 && a420.DestinationDeleteEvent.encode(S2.delete, M2.uint32(26).fork()).ldelim(), S2.state !== void 0 && a420.DestinationStateEvent.encode(S2.state, M2.uint32(34).fork()).ldelim(), M2;
  }, decode(S2, M2) {
    const L2 = S2 instanceof c.default.Reader ? S2 : new c.default.Reader(S2);
    let Ee2 = M2 === void 0 ? L2.len : L2.pos + M2;
    const oe2 = xn();
    for (; L2.pos < Ee2; ) {
      const Pe2 = L2.uint32();
      switch (Pe2 >>> 3) {
        case 1:
          oe2.create = a420.DestinationCreateEvent.decode(L2, L2.uint32());
          break;
        case 2:
          oe2.update = a420.DestinationUpdateEvent.decode(L2, L2.uint32());
          break;
        case 3:
          oe2.delete = a420.DestinationDeleteEvent.decode(L2, L2.uint32());
          break;
        case 4:
          oe2.state = a420.DestinationStateEvent.decode(L2, L2.uint32());
          break;
        default:
          L2.skipType(Pe2 & 7);
          break;
      }
    }
    return oe2;
  }, fromJSON(S2) {
    return { create: Le2(S2.create) ? a420.DestinationCreateEvent.fromJSON(S2.create) : void 0, update: Le2(S2.update) ? a420.DestinationUpdateEvent.fromJSON(S2.update) : void 0, delete: Le2(S2.delete) ? a420.DestinationDeleteEvent.fromJSON(S2.delete) : void 0, state: Le2(S2.state) ? a420.DestinationStateEvent.fromJSON(S2.state) : void 0 };
  }, toJSON(S2) {
    const M2 = {};
    return S2.create !== void 0 && (M2.create = S2.create ? a420.DestinationCreateEvent.toJSON(S2.create) : void 0), S2.update !== void 0 && (M2.update = S2.update ? a420.DestinationUpdateEvent.toJSON(S2.update) : void 0), S2.delete !== void 0 && (M2.delete = S2.delete ? a420.DestinationDeleteEvent.toJSON(S2.delete) : void 0), S2.state !== void 0 && (M2.state = S2.state ? a420.DestinationStateEvent.toJSON(S2.state) : void 0), M2;
  }, fromPartial(S2) {
    const M2 = xn();
    return M2.create = S2.create !== void 0 && S2.create !== null ? a420.DestinationCreateEvent.fromPartial(S2.create) : void 0, M2.update = S2.update !== void 0 && S2.update !== null ? a420.DestinationUpdateEvent.fromPartial(S2.update) : void 0, M2.delete = S2.delete !== void 0 && S2.delete !== null ? a420.DestinationDeleteEvent.fromPartial(S2.delete) : void 0, M2.state = S2.state !== void 0 && S2.state !== null ? a420.DestinationStateEvent.fromPartial(S2.state) : void 0, M2;
  } };
  function Un() {
    return { create: void 0, update: void 0, delete: void 0, state: void 0 };
  }
  a420.ProjectEvent = { encode(S2, M2 = c.default.Writer.create()) {
    return S2.create !== void 0 && a420.ProjectCreateEvent.encode(S2.create, M2.uint32(10).fork()).ldelim(), S2.update !== void 0 && a420.ProjectUpdateEvent.encode(S2.update, M2.uint32(18).fork()).ldelim(), S2.delete !== void 0 && a420.ProjectDeleteEvent.encode(S2.delete, M2.uint32(26).fork()).ldelim(), S2.state !== void 0 && a420.ProjectBroadcastStateEvent.encode(S2.state, M2.uint32(34).fork()).ldelim(), M2;
  }, decode(S2, M2) {
    const L2 = S2 instanceof c.default.Reader ? S2 : new c.default.Reader(S2);
    let Ee2 = M2 === void 0 ? L2.len : L2.pos + M2;
    const oe2 = Un();
    for (; L2.pos < Ee2; ) {
      const Pe2 = L2.uint32();
      switch (Pe2 >>> 3) {
        case 1:
          oe2.create = a420.ProjectCreateEvent.decode(L2, L2.uint32());
          break;
        case 2:
          oe2.update = a420.ProjectUpdateEvent.decode(L2, L2.uint32());
          break;
        case 3:
          oe2.delete = a420.ProjectDeleteEvent.decode(L2, L2.uint32());
          break;
        case 4:
          oe2.state = a420.ProjectBroadcastStateEvent.decode(L2, L2.uint32());
          break;
        default:
          L2.skipType(Pe2 & 7);
          break;
      }
    }
    return oe2;
  }, fromJSON(S2) {
    return { create: Le2(S2.create) ? a420.ProjectCreateEvent.fromJSON(S2.create) : void 0, update: Le2(S2.update) ? a420.ProjectUpdateEvent.fromJSON(S2.update) : void 0, delete: Le2(S2.delete) ? a420.ProjectDeleteEvent.fromJSON(S2.delete) : void 0, state: Le2(S2.state) ? a420.ProjectBroadcastStateEvent.fromJSON(S2.state) : void 0 };
  }, toJSON(S2) {
    const M2 = {};
    return S2.create !== void 0 && (M2.create = S2.create ? a420.ProjectCreateEvent.toJSON(S2.create) : void 0), S2.update !== void 0 && (M2.update = S2.update ? a420.ProjectUpdateEvent.toJSON(S2.update) : void 0), S2.delete !== void 0 && (M2.delete = S2.delete ? a420.ProjectDeleteEvent.toJSON(S2.delete) : void 0), S2.state !== void 0 && (M2.state = S2.state ? a420.ProjectBroadcastStateEvent.toJSON(S2.state) : void 0), M2;
  }, fromPartial(S2) {
    const M2 = Un();
    return M2.create = S2.create !== void 0 && S2.create !== null ? a420.ProjectCreateEvent.fromPartial(S2.create) : void 0, M2.update = S2.update !== void 0 && S2.update !== null ? a420.ProjectUpdateEvent.fromPartial(S2.update) : void 0, M2.delete = S2.delete !== void 0 && S2.delete !== null ? a420.ProjectDeleteEvent.fromPartial(S2.delete) : void 0, M2.state = S2.state !== void 0 && S2.state !== null ? a420.ProjectBroadcastStateEvent.fromPartial(S2.state) : void 0, M2;
  } };
  function Fn() {
    return { create: void 0, update: void 0, delete: void 0, add: void 0, remove: void 0, state: void 0 };
  }
  a420.SourceEvent = { encode(S2, M2 = c.default.Writer.create()) {
    return S2.create !== void 0 && a420.SourceCreateEvent.encode(S2.create, M2.uint32(10).fork()).ldelim(), S2.update !== void 0 && a420.SourceUpdateEvent.encode(S2.update, M2.uint32(18).fork()).ldelim(), S2.delete !== void 0 && a420.SourceDeleteEvent.encode(S2.delete, M2.uint32(26).fork()).ldelim(), S2.add !== void 0 && a420.SourceAddEvent.encode(S2.add, M2.uint32(34).fork()).ldelim(), S2.remove !== void 0 && a420.SourceRemoveEvent.encode(S2.remove, M2.uint32(42).fork()).ldelim(), S2.state !== void 0 && a420.SourceStateEvent.encode(S2.state, M2.uint32(50).fork()).ldelim(), M2;
  }, decode(S2, M2) {
    const L2 = S2 instanceof c.default.Reader ? S2 : new c.default.Reader(S2);
    let Ee2 = M2 === void 0 ? L2.len : L2.pos + M2;
    const oe2 = Fn();
    for (; L2.pos < Ee2; ) {
      const Pe2 = L2.uint32();
      switch (Pe2 >>> 3) {
        case 1:
          oe2.create = a420.SourceCreateEvent.decode(L2, L2.uint32());
          break;
        case 2:
          oe2.update = a420.SourceUpdateEvent.decode(L2, L2.uint32());
          break;
        case 3:
          oe2.delete = a420.SourceDeleteEvent.decode(L2, L2.uint32());
          break;
        case 4:
          oe2.add = a420.SourceAddEvent.decode(L2, L2.uint32());
          break;
        case 5:
          oe2.remove = a420.SourceRemoveEvent.decode(L2, L2.uint32());
          break;
        case 6:
          oe2.state = a420.SourceStateEvent.decode(L2, L2.uint32());
          break;
        default:
          L2.skipType(Pe2 & 7);
          break;
      }
    }
    return oe2;
  }, fromJSON(S2) {
    return { create: Le2(S2.create) ? a420.SourceCreateEvent.fromJSON(S2.create) : void 0, update: Le2(S2.update) ? a420.SourceUpdateEvent.fromJSON(S2.update) : void 0, delete: Le2(S2.delete) ? a420.SourceDeleteEvent.fromJSON(S2.delete) : void 0, add: Le2(S2.add) ? a420.SourceAddEvent.fromJSON(S2.add) : void 0, remove: Le2(S2.remove) ? a420.SourceRemoveEvent.fromJSON(S2.remove) : void 0, state: Le2(S2.state) ? a420.SourceStateEvent.fromJSON(S2.state) : void 0 };
  }, toJSON(S2) {
    const M2 = {};
    return S2.create !== void 0 && (M2.create = S2.create ? a420.SourceCreateEvent.toJSON(S2.create) : void 0), S2.update !== void 0 && (M2.update = S2.update ? a420.SourceUpdateEvent.toJSON(S2.update) : void 0), S2.delete !== void 0 && (M2.delete = S2.delete ? a420.SourceDeleteEvent.toJSON(S2.delete) : void 0), S2.add !== void 0 && (M2.add = S2.add ? a420.SourceAddEvent.toJSON(S2.add) : void 0), S2.remove !== void 0 && (M2.remove = S2.remove ? a420.SourceRemoveEvent.toJSON(S2.remove) : void 0), S2.state !== void 0 && (M2.state = S2.state ? a420.SourceStateEvent.toJSON(S2.state) : void 0), M2;
  }, fromPartial(S2) {
    const M2 = Fn();
    return M2.create = S2.create !== void 0 && S2.create !== null ? a420.SourceCreateEvent.fromPartial(S2.create) : void 0, M2.update = S2.update !== void 0 && S2.update !== null ? a420.SourceUpdateEvent.fromPartial(S2.update) : void 0, M2.delete = S2.delete !== void 0 && S2.delete !== null ? a420.SourceDeleteEvent.fromPartial(S2.delete) : void 0, M2.add = S2.add !== void 0 && S2.add !== null ? a420.SourceAddEvent.fromPartial(S2.add) : void 0, M2.remove = S2.remove !== void 0 && S2.remove !== null ? a420.SourceRemoveEvent.fromPartial(S2.remove) : void 0, M2.state = S2.state !== void 0 && S2.state !== null ? a420.SourceStateEvent.fromPartial(S2.state) : void 0, M2;
  } };
  function qn() {
    return { collection: void 0, destination: void 0, project: void 0, source: void 0, unspecified: void 0 };
  }
  a420.LiveEvent = { encode(S2, M2 = c.default.Writer.create()) {
    return S2.collection !== void 0 && a420.CollectionEvent.encode(S2.collection, M2.uint32(10).fork()).ldelim(), S2.destination !== void 0 && a420.DestinationEvent.encode(S2.destination, M2.uint32(18).fork()).ldelim(), S2.project !== void 0 && a420.ProjectEvent.encode(S2.project, M2.uint32(26).fork()).ldelim(), S2.source !== void 0 && a420.SourceEvent.encode(S2.source, M2.uint32(34).fork()).ldelim(), S2.unspecified !== void 0 && M2.uint32(40).int32((0, p2.nullValueToNumber)(S2.unspecified)), M2;
  }, decode(S2, M2) {
    const L2 = S2 instanceof c.default.Reader ? S2 : new c.default.Reader(S2);
    let Ee2 = M2 === void 0 ? L2.len : L2.pos + M2;
    const oe2 = qn();
    for (; L2.pos < Ee2; ) {
      const Pe2 = L2.uint32();
      switch (Pe2 >>> 3) {
        case 1:
          oe2.collection = a420.CollectionEvent.decode(L2, L2.uint32());
          break;
        case 2:
          oe2.destination = a420.DestinationEvent.decode(L2, L2.uint32());
          break;
        case 3:
          oe2.project = a420.ProjectEvent.decode(L2, L2.uint32());
          break;
        case 4:
          oe2.source = a420.SourceEvent.decode(L2, L2.uint32());
          break;
        case 5:
          oe2.unspecified = (0, p2.nullValueFromJSON)(L2.int32());
          break;
        default:
          L2.skipType(Pe2 & 7);
          break;
      }
    }
    return oe2;
  }, fromJSON(S2) {
    return { collection: Le2(S2.collection) ? a420.CollectionEvent.fromJSON(S2.collection) : void 0, destination: Le2(S2.destination) ? a420.DestinationEvent.fromJSON(S2.destination) : void 0, project: Le2(S2.project) ? a420.ProjectEvent.fromJSON(S2.project) : void 0, source: Le2(S2.source) ? a420.SourceEvent.fromJSON(S2.source) : void 0, unspecified: Le2(S2.unspecified) ? (0, p2.nullValueFromJSON)(S2.unspecified) : void 0 };
  }, toJSON(S2) {
    const M2 = {};
    return S2.collection !== void 0 && (M2.collection = S2.collection ? a420.CollectionEvent.toJSON(S2.collection) : void 0), S2.destination !== void 0 && (M2.destination = S2.destination ? a420.DestinationEvent.toJSON(S2.destination) : void 0), S2.project !== void 0 && (M2.project = S2.project ? a420.ProjectEvent.toJSON(S2.project) : void 0), S2.source !== void 0 && (M2.source = S2.source ? a420.SourceEvent.toJSON(S2.source) : void 0), S2.unspecified !== void 0 && (M2.unspecified = S2.unspecified !== void 0 ? (0, p2.nullValueToJSON)(S2.unspecified) : void 0), M2;
  }, fromPartial(S2) {
    var M2;
    const L2 = qn();
    return L2.collection = S2.collection !== void 0 && S2.collection !== null ? a420.CollectionEvent.fromPartial(S2.collection) : void 0, L2.destination = S2.destination !== void 0 && S2.destination !== null ? a420.DestinationEvent.fromPartial(S2.destination) : void 0, L2.project = S2.project !== void 0 && S2.project !== null ? a420.ProjectEvent.fromPartial(S2.project) : void 0, L2.source = S2.source !== void 0 && S2.source !== null ? a420.SourceEvent.fromPartial(S2.source) : void 0, L2.unspecified = (M2 = S2.unspecified) !== null && M2 !== void 0 ? M2 : void 0, L2;
  } };
  class Vn {
    constructor(M2, L2) {
      this.service = (L2 == null ? void 0 : L2.service) || "live.v21.CollectionService", this.rpc = M2, this.CreateCollection = this.CreateCollection.bind(this), this.GetCollection = this.GetCollection.bind(this), this.GetCollections = this.GetCollections.bind(this), this.UpdateCollection = this.UpdateCollection.bind(this), this.DeleteCollection = this.DeleteCollection.bind(this);
    }
    CreateCollection(M2) {
      const L2 = a420.CreateCollectionRequest.encode(M2).finish();
      return this.rpc.request(this.service, "CreateCollection", L2).then((oe2) => a420.CreateCollectionResponse.decode(new c.default.Reader(oe2)));
    }
    GetCollection(M2) {
      const L2 = a420.GetCollectionRequest.encode(M2).finish();
      return this.rpc.request(this.service, "GetCollection", L2).then((oe2) => a420.GetCollectionResponse.decode(new c.default.Reader(oe2)));
    }
    GetCollections(M2) {
      const L2 = a420.GetCollectionsRequest.encode(M2).finish();
      return this.rpc.request(this.service, "GetCollections", L2).then((oe2) => a420.GetCollectionsResponse.decode(new c.default.Reader(oe2)));
    }
    UpdateCollection(M2) {
      const L2 = a420.UpdateCollectionRequest.encode(M2).finish();
      return this.rpc.request(this.service, "UpdateCollection", L2).then((oe2) => a420.UpdateCollectionResponse.decode(new c.default.Reader(oe2)));
    }
    DeleteCollection(M2) {
      const L2 = a420.DeleteCollectionRequest.encode(M2).finish();
      return this.rpc.request(this.service, "DeleteCollection", L2).then((oe2) => a420.DeleteCollectionResponse.decode(new c.default.Reader(oe2)));
    }
  }
  a420.CollectionServiceClientImpl = Vn, a420.CollectionServiceDefinition = { name: "CollectionService", fullName: "live.v21.CollectionService", methods: {
    /**
    * Create Collection
    *
    * Create a new collection of related projects and collection live sources
    */
    createCollection: { name: "CreateCollection", requestType: a420.CreateCollectionRequest, requestStream: false, responseType: a420.CreateCollectionResponse, responseStream: false, options: {} },
    /**
    * Get Collection
    *
    * Get an existing collection of related projects and collection live
    * sources
    */
    getCollection: { name: "GetCollection", requestType: a420.GetCollectionRequest, requestStream: false, responseType: a420.GetCollectionResponse, responseStream: false, options: {} },
    /**
    * Get Collections
    *
    * Get all collections owned by the user
    */
    getCollections: { name: "GetCollections", requestType: a420.GetCollectionsRequest, requestStream: false, responseType: a420.GetCollectionsResponse, responseStream: false, options: {} },
    /**
    * Update Collection
    *
    * Update select collection document data
    */
    updateCollection: { name: "UpdateCollection", requestType: a420.UpdateCollectionRequest, requestStream: false, responseType: a420.UpdateCollectionResponse, responseStream: false, options: {} },
    /**
    * Delete Collection
    *
    * Delete a collection of related projects and collection live sources
    */
    deleteCollection: { name: "DeleteCollection", requestType: a420.DeleteCollectionRequest, requestStream: false, responseType: a420.DeleteCollectionResponse, responseStream: false, options: {} }
  } };
  class Gn {
    constructor(M2, L2) {
      this.service = (L2 == null ? void 0 : L2.service) || "live.v21.ProjectService", this.rpc = M2, this.CreateProject = this.CreateProject.bind(this), this.GetProject = this.GetProject.bind(this), this.DeleteProject = this.DeleteProject.bind(this), this.UpdateProject = this.UpdateProject.bind(this), this.StartProjectBroadcast = this.StartProjectBroadcast.bind(this), this.StopProjectBroadcast = this.StopProjectBroadcast.bind(this), this.StartProjectWebRtc = this.StartProjectWebRtc.bind(this), this.StopProjectWebRtc = this.StopProjectWebRtc.bind(this), this.GetProjectBroadcastSnapshot = this.GetProjectBroadcastSnapshot.bind(this), this.GetProjectBroadcastStatus = this.GetProjectBroadcastStatus.bind(this);
    }
    CreateProject(M2) {
      const L2 = a420.CreateProjectRequest.encode(M2).finish();
      return this.rpc.request(this.service, "CreateProject", L2).then((oe2) => a420.CreateProjectResponse.decode(new c.default.Reader(oe2)));
    }
    GetProject(M2) {
      const L2 = a420.GetProjectRequest.encode(M2).finish();
      return this.rpc.request(this.service, "GetProject", L2).then((oe2) => a420.GetProjectResponse.decode(new c.default.Reader(oe2)));
    }
    DeleteProject(M2) {
      const L2 = a420.DeleteProjectRequest.encode(M2).finish();
      return this.rpc.request(this.service, "DeleteProject", L2).then((oe2) => a420.DeleteProjectResponse.decode(new c.default.Reader(oe2)));
    }
    UpdateProject(M2) {
      const L2 = a420.UpdateProjectRequest.encode(M2).finish();
      return this.rpc.request(this.service, "UpdateProject", L2).then((oe2) => a420.UpdateProjectResponse.decode(new c.default.Reader(oe2)));
    }
    StartProjectBroadcast(M2) {
      const L2 = a420.StartProjectBroadcastRequest.encode(M2).finish();
      return this.rpc.request(this.service, "StartProjectBroadcast", L2).then((oe2) => a420.StartProjectBroadcastResponse.decode(new c.default.Reader(oe2)));
    }
    StopProjectBroadcast(M2) {
      const L2 = a420.StopProjectBroadcastRequest.encode(M2).finish();
      return this.rpc.request(this.service, "StopProjectBroadcast", L2).then((oe2) => a420.StopProjectBroadcastResponse.decode(new c.default.Reader(oe2)));
    }
    StartProjectWebRtc(M2) {
      const L2 = a420.StartProjectWebRtcRequest.encode(M2).finish();
      return this.rpc.request(this.service, "StartProjectWebRtc", L2).then((oe2) => a420.StartProjectWebRtcResponse.decode(new c.default.Reader(oe2)));
    }
    StopProjectWebRtc(M2) {
      const L2 = a420.StopProjectWebRtcRequest.encode(M2).finish();
      return this.rpc.request(this.service, "StopProjectWebRtc", L2).then((oe2) => a420.StopProjectWebRtcResponse.decode(new c.default.Reader(oe2)));
    }
    GetProjectBroadcastSnapshot(M2) {
      const L2 = a420.GetProjectBroadcastSnapshotRequest.encode(M2).finish();
      return this.rpc.request(this.service, "GetProjectBroadcastSnapshot", L2).then((oe2) => a420.GetProjectBroadcastSnapshotResponse.decode(new c.default.Reader(oe2)));
    }
    GetProjectBroadcastStatus(M2) {
      const L2 = a420.GetProjectBroadcastStatusRequest.encode(M2).finish();
      return this.rpc.request(this.service, "GetProjectBroadcastStatus", L2).then((oe2) => a420.GetProjectBroadcastStatusResponse.decode(new c.default.Reader(oe2)));
    }
  }
  a420.ProjectServiceClientImpl = Gn, a420.ProjectServiceDefinition = { name: "ProjectService", fullName: "live.v21.ProjectService", methods: {
    /**
    * Create Project
    *
    * Create a new project
    */
    createProject: { name: "CreateProject", requestType: a420.CreateProjectRequest, requestStream: false, responseType: a420.CreateProjectResponse, responseStream: false, options: {} },
    /**
    * Get Project
    *
    * Get an existing project
    */
    getProject: { name: "GetProject", requestType: a420.GetProjectRequest, requestStream: false, responseType: a420.GetProjectResponse, responseStream: false, options: {} },
    /**
    * Delete Project
    *
    * Delete a project
    */
    deleteProject: { name: "DeleteProject", requestType: a420.DeleteProjectRequest, requestStream: false, responseType: a420.DeleteProjectResponse, responseStream: false, options: {} },
    /**
    * Update Project
    *
    * Updates a project
    */
    updateProject: { name: "UpdateProject", requestType: a420.UpdateProjectRequest, requestStream: false, responseType: a420.UpdateProjectResponse, responseStream: false, options: {} },
    /**
    * Start Broadcast
    *
    * Start broadcasting a project
    */
    startProjectBroadcast: { name: "StartProjectBroadcast", requestType: a420.StartProjectBroadcastRequest, requestStream: false, responseType: a420.StartProjectBroadcastResponse, responseStream: false, options: {} },
    /**
    * Stop Broadcast
    *
    * Stop broadcasting a project
    */
    stopProjectBroadcast: { name: "StopProjectBroadcast", requestType: a420.StopProjectBroadcastRequest, requestStream: false, responseType: a420.StopProjectBroadcastResponse, responseStream: false, options: {} },
    /**
    * Start WebRTC
    *
    * Start WebRTC services
    */
    startProjectWebRtc: { name: "StartProjectWebRtc", requestType: a420.StartProjectWebRtcRequest, requestStream: false, responseType: a420.StartProjectWebRtcResponse, responseStream: false, options: {} },
    /**
    * Stop WebRTC
    *
    * Stop WebRTC services
    */
    stopProjectWebRtc: { name: "StopProjectWebRtc", requestType: a420.StopProjectWebRtcRequest, requestStream: false, responseType: a420.StopProjectWebRtcResponse, responseStream: false, options: {} },
    /**
    * Get Snapshot
    *
    * Get a snapshot of the current output frame of the broadcast
    */
    getProjectBroadcastSnapshot: { name: "GetProjectBroadcastSnapshot", requestType: a420.GetProjectBroadcastSnapshotRequest, requestStream: false, responseType: a420.GetProjectBroadcastSnapshotResponse, responseStream: false, options: {} },
    /**
    * Get Broadcast Status
    *
    * Get the broadcast status of the project
    */
    getProjectBroadcastStatus: { name: "GetProjectBroadcastStatus", requestType: a420.GetProjectBroadcastStatusRequest, requestStream: false, responseType: a420.GetProjectBroadcastStatusResponse, responseStream: false, options: {} }
  } };
  class Wn {
    constructor(M2, L2) {
      this.service = (L2 == null ? void 0 : L2.service) || "live.v21.DestinationService", this.rpc = M2, this.CreateDestination = this.CreateDestination.bind(this), this.GetDestination = this.GetDestination.bind(this), this.UpdateDestination = this.UpdateDestination.bind(this), this.DeleteDestination = this.DeleteDestination.bind(this);
    }
    CreateDestination(M2) {
      const L2 = a420.CreateDestinationRequest.encode(M2).finish();
      return this.rpc.request(this.service, "CreateDestination", L2).then((oe2) => a420.CreateDestinationResponse.decode(new c.default.Reader(oe2)));
    }
    GetDestination(M2) {
      const L2 = a420.GetDestinationRequest.encode(M2).finish();
      return this.rpc.request(this.service, "GetDestination", L2).then((oe2) => a420.GetDestinationResponse.decode(new c.default.Reader(oe2)));
    }
    UpdateDestination(M2) {
      const L2 = a420.UpdateDestinationRequest.encode(M2).finish();
      return this.rpc.request(this.service, "UpdateDestination", L2).then((oe2) => a420.UpdateDestinationResponse.decode(new c.default.Reader(oe2)));
    }
    DeleteDestination(M2) {
      const L2 = a420.DeleteDestinationRequest.encode(M2).finish();
      return this.rpc.request(this.service, "DeleteDestination", L2).then((oe2) => a420.DeleteDestinationResponse.decode(new c.default.Reader(oe2)));
    }
  }
  a420.DestinationServiceClientImpl = Wn, a420.DestinationServiceDefinition = { name: "DestinationService", fullName: "live.v21.DestinationService", methods: {
    /**
    * Create Destination
    *
    * Create a new Destination
    */
    createDestination: { name: "CreateDestination", requestType: a420.CreateDestinationRequest, requestStream: false, responseType: a420.CreateDestinationResponse, responseStream: false, options: {} },
    /**
    * Get Destination
    *
    * Get an existing Destination.
    */
    getDestination: { name: "GetDestination", requestType: a420.GetDestinationRequest, requestStream: false, responseType: a420.GetDestinationResponse, responseStream: false, options: {} },
    /**
    * Update Destination
    *
    * Update a destination
    */
    updateDestination: { name: "UpdateDestination", requestType: a420.UpdateDestinationRequest, requestStream: false, responseType: a420.UpdateDestinationResponse, responseStream: false, options: {} },
    /**
    * Delete Destination
    *
    * Delete a destination
    */
    deleteDestination: { name: "DeleteDestination", requestType: a420.DeleteDestinationRequest, requestStream: false, responseType: a420.DeleteDestinationResponse, responseStream: false, options: {} }
  } };
  class Hn {
    constructor(M2, L2) {
      this.service = (L2 == null ? void 0 : L2.service) || "live.v21.SourceService", this.rpc = M2, this.CreateSource = this.CreateSource.bind(this), this.DeleteSource = this.DeleteSource.bind(this), this.UpdateSource = this.UpdateSource.bind(this), this.UpdateSourceInProject = this.UpdateSourceInProject.bind(this), this.GetSource = this.GetSource.bind(this), this.GetSources = this.GetSources.bind(this), this.AddSourceToProject = this.AddSourceToProject.bind(this), this.RemoveSourceFromProject = this.RemoveSourceFromProject.bind(this), this.GetSourcePlaylist = this.GetSourcePlaylist.bind(this);
    }
    CreateSource(M2) {
      const L2 = a420.CreateSourceRequest.encode(M2).finish();
      return this.rpc.request(this.service, "CreateSource", L2).then((oe2) => a420.CreateSourceResponse.decode(new c.default.Reader(oe2)));
    }
    DeleteSource(M2) {
      const L2 = a420.DeleteSourceRequest.encode(M2).finish();
      return this.rpc.request(this.service, "DeleteSource", L2).then((oe2) => a420.DeleteSourceResponse.decode(new c.default.Reader(oe2)));
    }
    UpdateSource(M2) {
      const L2 = a420.UpdateSourceRequest.encode(M2).finish();
      return this.rpc.request(this.service, "UpdateSource", L2).then((oe2) => a420.UpdateSourceResponse.decode(new c.default.Reader(oe2)));
    }
    UpdateSourceInProject(M2) {
      const L2 = a420.UpdateSourceInProjectRequest.encode(M2).finish();
      return this.rpc.request(this.service, "UpdateSourceInProject", L2).then((oe2) => a420.UpdateSourceInProjectResponse.decode(new c.default.Reader(oe2)));
    }
    GetSource(M2) {
      const L2 = a420.GetSourceRequest.encode(M2).finish();
      return this.rpc.request(this.service, "GetSource", L2).then((oe2) => a420.GetSourceResponse.decode(new c.default.Reader(oe2)));
    }
    GetSources(M2) {
      const L2 = a420.GetSourcesRequest.encode(M2).finish();
      return this.rpc.request(this.service, "GetSources", L2).then((oe2) => a420.GetSourcesResponse.decode(new c.default.Reader(oe2)));
    }
    AddSourceToProject(M2) {
      const L2 = a420.AddSourceToProjectRequest.encode(M2).finish();
      return this.rpc.request(this.service, "AddSourceToProject", L2).then((oe2) => a420.AddSourceToProjectResponse.decode(new c.default.Reader(oe2)));
    }
    RemoveSourceFromProject(M2) {
      const L2 = a420.RemoveSourceFromProjectRequest.encode(M2).finish();
      return this.rpc.request(this.service, "RemoveSourceFromProject", L2).then((oe2) => a420.RemoveSourceFromProjectResponse.decode(new c.default.Reader(oe2)));
    }
    GetSourcePlaylist(M2) {
      const L2 = a420.GetSourcePlaylistRequest.encode(M2).finish();
      return this.rpc.request(this.service, "GetSourcePlaylist", L2).then((oe2) => l2.HttpBody.decode(new c.default.Reader(oe2)));
    }
  }
  a420.SourceServiceClientImpl = Hn, a420.SourceServiceDefinition = { name: "SourceService", fullName: "live.v21.SourceService", methods: {
    /**
    * Create Collection Live Source
    *
    * Create a new live source in a collection
    * ### Permissions
    * * scope: `SCOPE_VAPI_CREATE`
    */
    createSource: { name: "CreateSource", requestType: a420.CreateSourceRequest, requestStream: false, responseType: a420.CreateSourceResponse, responseStream: false, options: {} },
    /**
    * Delete Live Source
    *
    * Deletes a live source from a collection
    */
    deleteSource: { name: "DeleteSource", requestType: a420.DeleteSourceRequest, requestStream: false, responseType: a420.DeleteSourceResponse, responseStream: false, options: {} },
    /**
    * Update Source
    *
    * Update attributes of the Source.
    */
    updateSource: { name: "UpdateSource", requestType: a420.UpdateSourceRequest, requestStream: false, responseType: a420.UpdateSourceResponse, responseStream: false, options: {} },
    /**
    * Update Source
    *
    * Update attributes of the Source.
    */
    updateSourceInProject: { name: "UpdateSourceInProject", requestType: a420.UpdateSourceInProjectRequest, requestStream: false, responseType: a420.UpdateSourceInProjectResponse, responseStream: false, options: {} },
    /**
    * Get Source
    *
    * Get an existing source in a project
    */
    getSource: { name: "GetSource", requestType: a420.GetSourceRequest, requestStream: false, responseType: a420.GetSourceResponse, responseStream: false, options: {} },
    /**
    * Get Source
    *
    * Get existing sources in a collection
    */
    getSources: { name: "GetSources", requestType: a420.GetSourcesRequest, requestStream: false, responseType: a420.GetSourcesResponse, responseStream: false, options: {} },
    /**
    * Add Source to Project
    *
    * Add a source to a project
    */
    addSourceToProject: { name: "AddSourceToProject", requestType: a420.AddSourceToProjectRequest, requestStream: false, responseType: a420.AddSourceToProjectResponse, responseStream: false, options: {} },
    /**
    * Delete Source From Project
    *
    * Removes a source from a project.
    */
    removeSourceFromProject: { name: "RemoveSourceFromProject", requestType: a420.RemoveSourceFromProjectRequest, requestStream: false, responseType: a420.RemoveSourceFromProjectResponse, responseStream: false, options: {} },
    /**
    * Get the HLS playlist for a source.
    * buf:lint:ignore RPC_RESPONSE_STANDARD_NAME
    */
    getSourcePlaylist: { name: "GetSourcePlaylist", requestType: a420.GetSourcePlaylistRequest, requestStream: false, responseType: l2.HttpBody, responseStream: false, options: {} }
  } };
  class zn {
    constructor(M2, L2) {
      this.service = (L2 == null ? void 0 : L2.service) || "live.v21.BackendAuthenticationService", this.rpc = M2, this.CreateAccessToken = this.CreateAccessToken.bind(this);
    }
    CreateAccessToken(M2) {
      const L2 = a420.CreateAccessTokenRequest.encode(M2).finish();
      return this.rpc.request(this.service, "CreateAccessToken", L2).then((oe2) => a420.CreateAccessTokenResponse.decode(new c.default.Reader(oe2)));
    }
  }
  a420.BackendAuthenticationServiceClientImpl = zn, a420.BackendAuthenticationServiceDefinition = { name: "BackendAuthenticationService", fullName: "live.v21.BackendAuthenticationService", methods: {
    /**
    * Create Access Token
    *
    * Create an access token for a session host
    */
    createAccessToken: { name: "CreateAccessToken", requestType: a420.CreateAccessTokenRequest, requestStream: false, responseType: a420.CreateAccessTokenResponse, responseStream: false, options: {} }
  } };
  class Kn {
    constructor(M2, L2) {
      this.service = (L2 == null ? void 0 : L2.service) || "live.v21.AuthenticationService", this.rpc = M2, this.CreateGuestAccessToken = this.CreateGuestAccessToken.bind(this), this.RefreshAccessToken = this.RefreshAccessToken.bind(this), this.CreateWebRtcAccessToken = this.CreateWebRtcAccessToken.bind(this);
    }
    CreateGuestAccessToken(M2) {
      const L2 = a420.CreateGuestAccessTokenRequest.encode(M2).finish();
      return this.rpc.request(this.service, "CreateGuestAccessToken", L2).then((oe2) => a420.CreateGuestAccessTokenResponse.decode(new c.default.Reader(oe2)));
    }
    RefreshAccessToken(M2) {
      const L2 = a420.RefreshAccessTokenRequest.encode(M2).finish();
      return this.rpc.request(this.service, "RefreshAccessToken", L2).then((oe2) => a420.RefreshAccessTokenResponse.decode(new c.default.Reader(oe2)));
    }
    CreateWebRtcAccessToken(M2) {
      const L2 = a420.CreateWebRtcAccessTokenRequest.encode(M2).finish();
      return this.rpc.request(this.service, "CreateWebRtcAccessToken", L2).then((oe2) => a420.CreateWebRtcAccessTokenResponse.decode(new c.default.Reader(oe2)));
    }
  }
  a420.AuthenticationServiceClientImpl = Kn, a420.AuthenticationServiceDefinition = { name: "AuthenticationService", fullName: "live.v21.AuthenticationService", methods: {
    /**
    * Create Guest Access Token
    *
    * Create an access token for a guest
    */
    createGuestAccessToken: { name: "CreateGuestAccessToken", requestType: a420.CreateGuestAccessTokenRequest, requestStream: false, responseType: a420.CreateGuestAccessTokenResponse, responseStream: false, options: {} },
    /**
    * Refresh Access Token
    *
    * Forcibly refresh an access token prior to expiration
    */
    refreshAccessToken: { name: "RefreshAccessToken", requestType: a420.RefreshAccessTokenRequest, requestStream: false, responseType: a420.RefreshAccessTokenResponse, responseStream: false, options: {} },
    /**
    * Create WebRTC Access Token
    *
    * Create a WebRTC Access Token
    */
    createWebRtcAccessToken: { name: "CreateWebRtcAccessToken", requestType: a420.CreateWebRtcAccessTokenRequest, requestStream: false, responseType: a420.CreateWebRtcAccessTokenResponse, responseStream: false, options: {} }
  } };
  class Yn {
    constructor(M2, L2) {
      this.service = (L2 == null ? void 0 : L2.service) || "live.v21.PublicAuthenticationService", this.rpc = M2, this.GetJsonWebKeySet = this.GetJsonWebKeySet.bind(this), this.GuestCodeRedirect = this.GuestCodeRedirect.bind(this);
    }
    GetJsonWebKeySet(M2) {
      const L2 = a420.GetJsonWebKeySetRequest.encode(M2).finish();
      return this.rpc.request(this.service, "GetJsonWebKeySet", L2).then((oe2) => a420.GetJsonWebKeySetResponse.decode(new c.default.Reader(oe2)));
    }
    GuestCodeRedirect(M2) {
      const L2 = a420.GuestCodeRedirectRequest.encode(M2).finish();
      return this.rpc.request(this.service, "GuestCodeRedirect", L2).then((oe2) => a420.GuestCodeRedirectResponse.decode(new c.default.Reader(oe2)));
    }
  }
  a420.PublicAuthenticationServiceClientImpl = Yn, a420.PublicAuthenticationServiceDefinition = { name: "PublicAuthenticationService", fullName: "live.v21.PublicAuthenticationService", methods: {
    /**
    * Get Public Keys
    *
    * Get public keys used to sign access tokens
    */
    getJsonWebKeySet: { name: "GetJsonWebKeySet", requestType: a420.GetJsonWebKeySetRequest, requestStream: false, responseType: a420.GetJsonWebKeySetResponse, responseStream: false, options: {} },
    /**
    * Exchange Guest Access Token
    *
    * Exchange a guest access token with updated user identifiers
    */
    guestCodeRedirect: { name: "GuestCodeRedirect", requestType: a420.GuestCodeRedirectRequest, requestStream: false, responseType: a420.GuestCodeRedirectResponse, responseStream: false, options: {} }
  } };
  var It = (() => {
    if (typeof It < "u")
      return It;
    if (typeof self < "u")
      return self;
    if (typeof window < "u")
      return window;
    if (typeof commonjsGlobal$1 < "u")
      return commonjsGlobal$1;
    throw "Unable to locate global object";
  })();
  function jn(S2) {
    if (It.Buffer)
      return Uint8Array.from(It.Buffer.from(S2, "base64"));
    {
      const M2 = It.atob(S2), L2 = new Uint8Array(M2.length);
      for (let Ee2 = 0; Ee2 < M2.length; ++Ee2)
        L2[Ee2] = M2.charCodeAt(Ee2);
      return L2;
    }
  }
  function Zn(S2) {
    if (It.Buffer)
      return It.Buffer.from(S2).toString("base64");
    {
      const M2 = [];
      return S2.forEach((L2) => {
        M2.push(String.fromCharCode(L2));
      }), It.btoa(M2.join(""));
    }
  }
  function Ht(S2) {
    const M2 = new Date(S2), L2 = M2.getTime() / 1e3, Ee2 = M2.getTime() % 1e3 * 1e6;
    return { seconds: L2, nanos: Ee2 };
  }
  function zt(S2) {
    let M2 = S2.seconds * 1e3;
    return M2 += S2.nanos / 1e6, new Date(M2).toISOString();
  }
  function Le2(S2) {
    return S2 != null;
  }
})(api$2);
(function(a420) {
  var u2 = commonjsGlobal$1 && commonjsGlobal$1.__createBinding || (Object.create ? function(j, ee2, X2, ie2) {
    ie2 === void 0 && (ie2 = X2);
    var Q2 = Object.getOwnPropertyDescriptor(ee2, X2);
    (!Q2 || ("get" in Q2 ? !ee2.__esModule : Q2.writable || Q2.configurable)) && (Q2 = { enumerable: true, get: function() {
      return ee2[X2];
    } }), Object.defineProperty(j, ie2, Q2);
  } : function(j, ee2, X2, ie2) {
    ie2 === void 0 && (ie2 = X2), j[ie2] = ee2[X2];
  }), c = commonjsGlobal$1 && commonjsGlobal$1.__setModuleDefault || (Object.create ? function(j, ee2) {
    Object.defineProperty(j, "default", { enumerable: true, value: ee2 });
  } : function(j, ee2) {
    j.default = ee2;
  }), l2 = commonjsGlobal$1 && commonjsGlobal$1.__decorate || function(j, ee2, X2, ie2) {
    var Q2 = arguments.length, ne2 = Q2 < 3 ? ee2 : ie2 === null ? ie2 = Object.getOwnPropertyDescriptor(ee2, X2) : ie2, Z2;
    if (typeof Reflect == "object" && typeof Reflect.decorate == "function")
      ne2 = Reflect.decorate(j, ee2, X2, ie2);
    else
      for (var de2 = j.length - 1; de2 >= 0; de2--)
        (Z2 = j[de2]) && (ne2 = (Q2 < 3 ? Z2(ne2) : Q2 > 3 ? Z2(ee2, X2, ne2) : Z2(ee2, X2)) || ne2);
    return Q2 > 3 && ne2 && Object.defineProperty(ee2, X2, ne2), ne2;
  }, v2 = commonjsGlobal$1 && commonjsGlobal$1.__importStar || function(j) {
    if (j && j.__esModule)
      return j;
    var ee2 = {};
    if (j != null)
      for (var X2 in j)
        X2 !== "default" && Object.prototype.hasOwnProperty.call(j, X2) && u2(ee2, j, X2);
    return c(ee2, j), ee2;
  }, p2 = commonjsGlobal$1 && commonjsGlobal$1.__metadata || function(j, ee2) {
    if (typeof Reflect == "object" && typeof Reflect.metadata == "function")
      return Reflect.metadata(j, ee2);
  };
  Object.defineProperty(a420, "__esModule", { value: true }), a420.LiveApi = void 0;
  const _ = v2(lib$1), I2 = api$3, P2 = v2(api$2), $ = decorator, F2 = "LiveApi";
  class H2 extends I2.ApiClient {
    constructor(ee2, X2, ie2, Q2, ne2, Z2, de2) {
      super(ee2, ie2, Z2, F2, de2), this.handlers = {}, this.eventApi = X2, this.accessTokenRefreshCallback = Q2, this.publicAuthentication = this.clientFactory.create(P2.PublicAuthenticationServiceDefinition, this.channel), ne2 != null && (this.backendAuthentication = this.clientFactory.create(P2.BackendAuthenticationServiceDefinition, this.channel, { "*": { metadata: _.Metadata({ "X-Api-Key": ne2 }) } })), this.eventApi.on("event", { name: `${H2.LIVEAPI_EVENT_PREFIX}:*`, ignoreSessionEvents: true, allowedSessionEvents: [`${H2.LIVEAPI_EVENT_PREFIX}:EVENT_TYPE_PROJECT:EVENT_SUB_TYPE_STATE`] }, this.eventCallback.bind(this));
    }
    /**
    * Register an event handler
    *
    * @param type Type of event
    * @param handler
    */
    on(ee2, X2) {
      var ie2;
      this.handlers[ee2] = (ie2 = this.handlers[ee2]) !== null && ie2 !== void 0 ? ie2 : [], this.handlers[ee2].push(X2);
    }
    /**
    * Unregister an event handler
    *
    * @param type Type of event
    * @param handler
    */
    off(ee2, X2) {
      this.handlers[ee2] = this.handlers[ee2].filter((ie2) => ie2 !== X2);
    }
    emitToHandlers(ee2, X2, ie2) {
      var Q2;
      for (const ne2 of (Q2 = this.handlers[ee2]) !== null && Q2 !== void 0 ? Q2 : [])
        ne2(Object.values(ie2).find((Z2) => !!Z2), X2);
    }
    async subscribeToCollection(ee2) {
      await this.eventApi.subscribe(`${H2.LIVEAPI_EVENT_PREFIX}:*`, { target: { collectionId: ee2 } });
    }
    async unsubscribeFromCollection(ee2) {
      await this.eventApi.unsubscribe(`${H2.LIVEAPI_EVENT_PREFIX}:*`, { target: { collectionId: ee2 } });
    }
    async subscribeToProject(ee2, X2) {
      await this.eventApi.subscribe(`${H2.LIVEAPI_EVENT_PREFIX}:*`, { target: { collectionId: ee2, projectId: X2 } });
    }
    async unsubscribeFromProject(ee2, X2) {
      await this.eventApi.unsubscribe(`${H2.LIVEAPI_EVENT_PREFIX}:*`, { target: { collectionId: ee2, projectId: X2 } });
    }
    eventCallback(ee2) {
      let ie2 = ee2.name.split(`${H2.LIVEAPI_EVENT_PREFIX}:`)[1].split(":"), Q2 = P2.eventTypeFromJSON(ie2[0]), ne2 = P2.eventSubTypeFromJSON(ie2[1]);
      this.log.info("processing event: " + Q2 + "/" + ne2), H2.liveApiEventMap[Q2] && this.emitToHandlers(Q2, ne2, ee2.payload);
    }
    _setup(ee2) {
      let X2 = this;
      ee2.onHeader = function(ie2) {
        let Q2 = ie2.get("Authorization");
        if (Q2 != null) {
          const ne2 = Q2.split(" ");
          if (ne2.length == 2 && ne2[0] == "Bearer") {
            let Z2 = ne2[1];
            X2.log.info("received refresh token"), X2.accessTokenRefreshCallback(Z2);
          }
        }
      }, this.collection = this.clientFactory.create(P2.CollectionServiceDefinition, this.channel, { "*": ee2 }), this.project = this.clientFactory.create(P2.ProjectServiceDefinition, this.channel, { "*": ee2 }), this.source = this.clientFactory.create(P2.SourceServiceDefinition, this.channel, { "*": ee2 }), this.destination = this.clientFactory.create(P2.DestinationServiceDefinition, this.channel, { "*": ee2 }), this.authentication = this.clientFactory.create(P2.AuthenticationServiceDefinition, this.channel, { "*": ee2 });
    }
  }
  H2.LIVEAPI_EVENT_PREFIX = "apistream:live", l2([(0, $.RequiresSdkAuthentication)(), p2("design:type", Object)], H2.prototype, "collection", void 0), l2([(0, $.RequiresSdkAuthentication)(), p2("design:type", Object)], H2.prototype, "project", void 0), l2([(0, $.RequiresSdkAuthentication)(), p2("design:type", Object)], H2.prototype, "source", void 0), l2([(0, $.RequiresSdkAuthentication)(), p2("design:type", Object)], H2.prototype, "destination", void 0), l2([(0, $.RequiresSdkAuthentication)(), p2("design:type", Object)], H2.prototype, "authentication", void 0), a420.LiveApi = H2, function(j) {
    j.liveApiEventMap = { [P2.EventType.EVENT_TYPE_COLLECTION]: "collection", [P2.EventType.EVENT_TYPE_PROJECT]: "project", [P2.EventType.EVENT_TYPE_SOURCE]: "source", [P2.EventType.EVENT_TYPE_DESTINATION]: "destination", [P2.EventType.EVENT_TYPE_UNSPECIFIED]: "unspecified" };
  }(H2 = a420.LiveApi || (a420.LiveApi = {}));
})(liveapi);
var eventapi = {}, dist$1 = {}, api$1 = {};
/*! *****************************************************************************
Copyright (c) Microsoft Corporation.

Permission to use, copy, modify, and/or distribute this software for any
purpose with or without fee is hereby granted.

THE SOFTWARE IS PROVIDED "AS IS" AND THE AUTHOR DISCLAIMS ALL WARRANTIES WITH
REGARD TO THIS SOFTWARE INCLUDING ALL IMPLIED WARRANTIES OF MERCHANTABILITY
AND FITNESS. IN NO EVENT SHALL THE AUTHOR BE LIABLE FOR ANY SPECIAL, DIRECT,
INDIRECT, OR CONSEQUENTIAL DAMAGES OR ANY DAMAGES WHATSOEVER RESULTING FROM
LOSS OF USE, DATA OR PROFITS, WHETHER IN AN ACTION OF CONTRACT, NEGLIGENCE OR
OTHER TORTIOUS ACTION, ARISING OUT OF OR IN CONNECTION WITH THE USE OR
PERFORMANCE OF THIS SOFTWARE.
***************************************************************************** */
var extendStatics = function(a420, u2) {
  return extendStatics = Object.setPrototypeOf || { __proto__: [] } instanceof Array && function(c, l2) {
    c.__proto__ = l2;
  } || function(c, l2) {
    for (var v2 in l2)
      l2.hasOwnProperty(v2) && (c[v2] = l2[v2]);
  }, extendStatics(a420, u2);
};
function __extends(a420, u2) {
  extendStatics(a420, u2);
  function c() {
    this.constructor = a420;
  }
  a420.prototype = u2 === null ? Object.create(u2) : (c.prototype = u2.prototype, new c());
}
function isFunction$2(a420) {
  return typeof a420 == "function";
}
var _enable_super_gross_mode_that_will_cause_bad_things = false, config$3 = { Promise: void 0, set useDeprecatedSynchronousErrorHandling(a420) {
  if (a420) {
    var u2 = /* @__PURE__ */ new Error();
    "" + u2.stack;
  }
  _enable_super_gross_mode_that_will_cause_bad_things = a420;
}, get useDeprecatedSynchronousErrorHandling() {
  return _enable_super_gross_mode_that_will_cause_bad_things;
} };
function hostReportError(a420) {
  setTimeout(function() {
    throw a420;
  }, 0);
}
var empty$2 = { closed: true, next: function(a420) {
}, error: function(a420) {
  if (config$3.useDeprecatedSynchronousErrorHandling)
    throw a420;
  hostReportError(a420);
}, complete: function() {
} }, isArray$4 = /* @__PURE__ */ function() {
  return Array.isArray || function(a420) {
    return a420 && typeof a420.length == "number";
  };
}();
function isObject$8(a420) {
  return a420 !== null && typeof a420 == "object";
}
var UnsubscriptionErrorImpl = /* @__PURE__ */ function() {
  function a420(u2) {
    return Error.call(this), this.message = u2 ? u2.length + ` errors occurred during unsubscription:
` + u2.map(function(c, l2) {
      return l2 + 1 + ") " + c.toString();
    }).join(`
  `) : "", this.name = "UnsubscriptionError", this.errors = u2, this;
  }
  return a420.prototype = /* @__PURE__ */ Object.create(Error.prototype), a420;
}(), UnsubscriptionError = UnsubscriptionErrorImpl, Subscription = /* @__PURE__ */ function() {
  function a420(u2) {
    this.closed = false, this._parentOrParents = null, this._subscriptions = null, u2 && (this._ctorUnsubscribe = true, this._unsubscribe = u2);
  }
  return a420.prototype.unsubscribe = function() {
    var u2;
    if (!this.closed) {
      var c = this, l2 = c._parentOrParents, v2 = c._ctorUnsubscribe, p2 = c._unsubscribe, _ = c._subscriptions;
      if (this.closed = true, this._parentOrParents = null, this._subscriptions = null, l2 instanceof a420)
        l2.remove(this);
      else if (l2 !== null)
        for (var I2 = 0; I2 < l2.length; ++I2) {
          var P2 = l2[I2];
          P2.remove(this);
        }
      if (isFunction$2(p2)) {
        v2 && (this._unsubscribe = void 0);
        try {
          p2.call(this);
        } catch (H2) {
          u2 = H2 instanceof UnsubscriptionError ? flattenUnsubscriptionErrors(H2.errors) : [H2];
        }
      }
      if (isArray$4(_))
        for (var I2 = -1, $ = _.length; ++I2 < $; ) {
          var F2 = _[I2];
          if (isObject$8(F2))
            try {
              F2.unsubscribe();
            } catch (j) {
              u2 = u2 || [], j instanceof UnsubscriptionError ? u2 = u2.concat(flattenUnsubscriptionErrors(j.errors)) : u2.push(j);
            }
        }
      if (u2)
        throw new UnsubscriptionError(u2);
    }
  }, a420.prototype.add = function(u2) {
    var c = u2;
    if (!u2)
      return a420.EMPTY;
    switch (typeof u2) {
      case "function":
        c = new a420(u2);
      case "object":
        if (c === this || c.closed || typeof c.unsubscribe != "function")
          return c;
        if (this.closed)
          return c.unsubscribe(), c;
        if (!(c instanceof a420)) {
          var l2 = c;
          c = new a420(), c._subscriptions = [l2];
        }
        break;
      default:
        throw new Error("unrecognized teardown " + u2 + " added to Subscription.");
    }
    var v2 = c._parentOrParents;
    if (v2 === null)
      c._parentOrParents = this;
    else if (v2 instanceof a420) {
      if (v2 === this)
        return c;
      c._parentOrParents = [v2, this];
    } else if (v2.indexOf(this) === -1)
      v2.push(this);
    else
      return c;
    var p2 = this._subscriptions;
    return p2 === null ? this._subscriptions = [c] : p2.push(c), c;
  }, a420.prototype.remove = function(u2) {
    var c = this._subscriptions;
    if (c) {
      var l2 = c.indexOf(u2);
      l2 !== -1 && c.splice(l2, 1);
    }
  }, a420.EMPTY = function(u2) {
    return u2.closed = true, u2;
  }(new a420()), a420;
}();
function flattenUnsubscriptionErrors(a420) {
  return a420.reduce(function(u2, c) {
    return u2.concat(c instanceof UnsubscriptionError ? c.errors : c);
  }, []);
}
var rxSubscriber = /* @__PURE__ */ function() {
  return typeof Symbol == "function" ? /* @__PURE__ */ Symbol("rxSubscriber") : "@@rxSubscriber_" + /* @__PURE__ */ Math.random();
}(), Subscriber = /* @__PURE__ */ function(a420) {
  __extends(u2, a420);
  function u2(c, l2, v2) {
    var p2 = a420.call(this) || this;
    switch (p2.syncErrorValue = null, p2.syncErrorThrown = false, p2.syncErrorThrowable = false, p2.isStopped = false, arguments.length) {
      case 0:
        p2.destination = empty$2;
        break;
      case 1:
        if (!c) {
          p2.destination = empty$2;
          break;
        }
        if (typeof c == "object") {
          c instanceof u2 ? (p2.syncErrorThrowable = c.syncErrorThrowable, p2.destination = c, c.add(p2)) : (p2.syncErrorThrowable = true, p2.destination = new SafeSubscriber(p2, c));
          break;
        }
      default:
        p2.syncErrorThrowable = true, p2.destination = new SafeSubscriber(p2, c, l2, v2);
        break;
    }
    return p2;
  }
  return u2.prototype[rxSubscriber] = function() {
    return this;
  }, u2.create = function(c, l2, v2) {
    var p2 = new u2(c, l2, v2);
    return p2.syncErrorThrowable = false, p2;
  }, u2.prototype.next = function(c) {
    this.isStopped || this._next(c);
  }, u2.prototype.error = function(c) {
    this.isStopped || (this.isStopped = true, this._error(c));
  }, u2.prototype.complete = function() {
    this.isStopped || (this.isStopped = true, this._complete());
  }, u2.prototype.unsubscribe = function() {
    this.closed || (this.isStopped = true, a420.prototype.unsubscribe.call(this));
  }, u2.prototype._next = function(c) {
    this.destination.next(c);
  }, u2.prototype._error = function(c) {
    this.destination.error(c), this.unsubscribe();
  }, u2.prototype._complete = function() {
    this.destination.complete(), this.unsubscribe();
  }, u2.prototype._unsubscribeAndRecycle = function() {
    var c = this._parentOrParents;
    return this._parentOrParents = null, this.unsubscribe(), this.closed = false, this.isStopped = false, this._parentOrParents = c, this;
  }, u2;
}(Subscription), SafeSubscriber = /* @__PURE__ */ function(a420) {
  __extends(u2, a420);
  function u2(c, l2, v2, p2) {
    var _ = a420.call(this) || this;
    _._parentSubscriber = c;
    var I2, P2 = _;
    return isFunction$2(l2) ? I2 = l2 : l2 && (I2 = l2.next, v2 = l2.error, p2 = l2.complete, l2 !== empty$2 && (P2 = Object.create(l2), isFunction$2(P2.unsubscribe) && _.add(P2.unsubscribe.bind(P2)), P2.unsubscribe = _.unsubscribe.bind(_))), _._context = P2, _._next = I2, _._error = v2, _._complete = p2, _;
  }
  return u2.prototype.next = function(c) {
    if (!this.isStopped && this._next) {
      var l2 = this._parentSubscriber;
      !config$3.useDeprecatedSynchronousErrorHandling || !l2.syncErrorThrowable ? this.__tryOrUnsub(this._next, c) : this.__tryOrSetError(l2, this._next, c) && this.unsubscribe();
    }
  }, u2.prototype.error = function(c) {
    if (!this.isStopped) {
      var l2 = this._parentSubscriber, v2 = config$3.useDeprecatedSynchronousErrorHandling;
      if (this._error)
        !v2 || !l2.syncErrorThrowable ? (this.__tryOrUnsub(this._error, c), this.unsubscribe()) : (this.__tryOrSetError(l2, this._error, c), this.unsubscribe());
      else if (l2.syncErrorThrowable)
        v2 ? (l2.syncErrorValue = c, l2.syncErrorThrown = true) : hostReportError(c), this.unsubscribe();
      else {
        if (this.unsubscribe(), v2)
          throw c;
        hostReportError(c);
      }
    }
  }, u2.prototype.complete = function() {
    var c = this;
    if (!this.isStopped) {
      var l2 = this._parentSubscriber;
      if (this._complete) {
        var v2 = function() {
          return c._complete.call(c._context);
        };
        !config$3.useDeprecatedSynchronousErrorHandling || !l2.syncErrorThrowable ? (this.__tryOrUnsub(v2), this.unsubscribe()) : (this.__tryOrSetError(l2, v2), this.unsubscribe());
      } else
        this.unsubscribe();
    }
  }, u2.prototype.__tryOrUnsub = function(c, l2) {
    try {
      c.call(this._context, l2);
    } catch (v2) {
      if (this.unsubscribe(), config$3.useDeprecatedSynchronousErrorHandling)
        throw v2;
      hostReportError(v2);
    }
  }, u2.prototype.__tryOrSetError = function(c, l2, v2) {
    if (!config$3.useDeprecatedSynchronousErrorHandling)
      throw new Error("bad call");
    try {
      l2.call(this._context, v2);
    } catch (p2) {
      return config$3.useDeprecatedSynchronousErrorHandling ? (c.syncErrorValue = p2, c.syncErrorThrown = true, true) : (hostReportError(p2), true);
    }
    return false;
  }, u2.prototype._unsubscribe = function() {
    var c = this._parentSubscriber;
    this._context = null, this._parentSubscriber = null, c.unsubscribe();
  }, u2;
}(Subscriber);
function canReportError(a420) {
  for (; a420; ) {
    var u2 = a420, c = u2.closed, l2 = u2.destination, v2 = u2.isStopped;
    if (c || v2)
      return false;
    l2 && l2 instanceof Subscriber ? a420 = l2 : a420 = null;
  }
  return true;
}
function toSubscriber(a420, u2, c) {
  if (a420) {
    if (a420 instanceof Subscriber)
      return a420;
    if (a420[rxSubscriber])
      return a420[rxSubscriber]();
  }
  return !a420 && !u2 && !c ? new Subscriber(empty$2) : new Subscriber(a420, u2, c);
}
var observable = /* @__PURE__ */ function() {
  return typeof Symbol == "function" && Symbol.observable || "@@observable";
}();
function identity(a420) {
  return a420;
}
function pipe$2() {
  for (var a420 = [], u2 = 0; u2 < arguments.length; u2++)
    a420[u2] = arguments[u2];
  return pipeFromArray(a420);
}
function pipeFromArray(a420) {
  return a420.length === 0 ? identity : a420.length === 1 ? a420[0] : function(c) {
    return a420.reduce(function(l2, v2) {
      return v2(l2);
    }, c);
  };
}
var Observable = /* @__PURE__ */ function() {
  function a420(u2) {
    this._isScalar = false, u2 && (this._subscribe = u2);
  }
  return a420.prototype.lift = function(u2) {
    var c = new a420();
    return c.source = this, c.operator = u2, c;
  }, a420.prototype.subscribe = function(u2, c, l2) {
    var v2 = this.operator, p2 = toSubscriber(u2, c, l2);
    if (v2 ? p2.add(v2.call(p2, this.source)) : p2.add(this.source || config$3.useDeprecatedSynchronousErrorHandling && !p2.syncErrorThrowable ? this._subscribe(p2) : this._trySubscribe(p2)), config$3.useDeprecatedSynchronousErrorHandling && p2.syncErrorThrowable && (p2.syncErrorThrowable = false, p2.syncErrorThrown))
      throw p2.syncErrorValue;
    return p2;
  }, a420.prototype._trySubscribe = function(u2) {
    try {
      return this._subscribe(u2);
    } catch (c) {
      config$3.useDeprecatedSynchronousErrorHandling && (u2.syncErrorThrown = true, u2.syncErrorValue = c), canReportError(u2) ? u2.error(c) : console.warn(c);
    }
  }, a420.prototype.forEach = function(u2, c) {
    var l2 = this;
    return c = getPromiseCtor(c), new c(function(v2, p2) {
      var _;
      _ = l2.subscribe(function(I2) {
        try {
          u2(I2);
        } catch (P2) {
          p2(P2), _ && _.unsubscribe();
        }
      }, p2, v2);
    });
  }, a420.prototype._subscribe = function(u2) {
    var c = this.source;
    return c && c.subscribe(u2);
  }, a420.prototype[observable] = function() {
    return this;
  }, a420.prototype.pipe = function() {
    for (var u2 = [], c = 0; c < arguments.length; c++)
      u2[c] = arguments[c];
    return u2.length === 0 ? this : pipeFromArray(u2)(this);
  }, a420.prototype.toPromise = function(u2) {
    var c = this;
    return u2 = getPromiseCtor(u2), new u2(function(l2, v2) {
      var p2;
      c.subscribe(function(_) {
        return p2 = _;
      }, function(_) {
        return v2(_);
      }, function() {
        return l2(p2);
      });
    });
  }, a420.create = function(u2) {
    return new a420(u2);
  }, a420;
}();
function getPromiseCtor(a420) {
  if (a420 || (a420 = Promise), !a420)
    throw new Error("no Promise impl found");
  return a420;
}
var subscribeToArray = function(a420) {
  return function(u2) {
    for (var c = 0, l2 = a420.length; c < l2 && !u2.closed; c++)
      u2.next(a420[c]);
    u2.complete();
  };
}, subscribeToPromise = function(a420) {
  return function(u2) {
    return a420.then(function(c) {
      u2.closed || (u2.next(c), u2.complete());
    }, function(c) {
      return u2.error(c);
    }).then(null, hostReportError), u2;
  };
};
function getSymbolIterator() {
  return typeof Symbol != "function" || !Symbol.iterator ? "@@iterator" : Symbol.iterator;
}
var iterator = /* @__PURE__ */ getSymbolIterator(), subscribeToIterable = function(a420) {
  return function(u2) {
    var c = a420[iterator]();
    do {
      var l2 = void 0;
      try {
        l2 = c.next();
      } catch (v2) {
        return u2.error(v2), u2;
      }
      if (l2.done) {
        u2.complete();
        break;
      }
      if (u2.next(l2.value), u2.closed)
        break;
    } while (true);
    return typeof c.return == "function" && u2.add(function() {
      c.return && c.return();
    }), u2;
  };
}, subscribeToObservable = function(a420) {
  return function(u2) {
    var c = a420[observable]();
    if (typeof c.subscribe != "function")
      throw new TypeError("Provided object does not correctly implement Symbol.observable");
    return c.subscribe(u2);
  };
}, isArrayLike$1 = function(a420) {
  return a420 && typeof a420.length == "number" && typeof a420 != "function";
};
function isPromise(a420) {
  return !!a420 && typeof a420.subscribe != "function" && typeof a420.then == "function";
}
var subscribeTo = function(a420) {
  if (a420 && typeof a420[observable] == "function")
    return subscribeToObservable(a420);
  if (isArrayLike$1(a420))
    return subscribeToArray(a420);
  if (isPromise(a420))
    return subscribeToPromise(a420);
  if (a420 && typeof a420[iterator] == "function")
    return subscribeToIterable(a420);
  var u2 = isObject$8(a420) ? "an invalid object" : "'" + a420 + "'", c = "You provided " + u2 + " where a stream was expected. You can provide an Observable, Promise, Array, or Iterable.";
  throw new TypeError(c);
}, SimpleInnerSubscriber = /* @__PURE__ */ function(a420) {
  __extends(u2, a420);
  function u2(c) {
    var l2 = a420.call(this) || this;
    return l2.parent = c, l2;
  }
  return u2.prototype._next = function(c) {
    this.parent.notifyNext(c);
  }, u2.prototype._error = function(c) {
    this.parent.notifyError(c), this.unsubscribe();
  }, u2.prototype._complete = function() {
    this.parent.notifyComplete(), this.unsubscribe();
  }, u2;
}(Subscriber), SimpleOuterSubscriber = /* @__PURE__ */ function(a420) {
  __extends(u2, a420);
  function u2() {
    return a420 !== null && a420.apply(this, arguments) || this;
  }
  return u2.prototype.notifyNext = function(c) {
    this.destination.next(c);
  }, u2.prototype.notifyError = function(c) {
    this.destination.error(c);
  }, u2.prototype.notifyComplete = function() {
    this.destination.complete();
  }, u2;
}(Subscriber);
function innerSubscribe(a420, u2) {
  if (!u2.closed) {
    if (a420 instanceof Observable)
      return a420.subscribe(u2);
    var c;
    try {
      c = subscribeTo(a420)(u2);
    } catch (l2) {
      u2.error(l2);
    }
    return c;
  }
}
function audit(a420) {
  return function(c) {
    return c.lift(new AuditOperator(a420));
  };
}
var AuditOperator = /* @__PURE__ */ function() {
  function a420(u2) {
    this.durationSelector = u2;
  }
  return a420.prototype.call = function(u2, c) {
    return c.subscribe(new AuditSubscriber(u2, this.durationSelector));
  }, a420;
}(), AuditSubscriber = /* @__PURE__ */ function(a420) {
  __extends(u2, a420);
  function u2(c, l2) {
    var v2 = a420.call(this, c) || this;
    return v2.durationSelector = l2, v2.hasValue = false, v2;
  }
  return u2.prototype._next = function(c) {
    if (this.value = c, this.hasValue = true, !this.throttled) {
      var l2 = void 0;
      try {
        var v2 = this.durationSelector;
        l2 = v2(c);
      } catch (_) {
        return this.destination.error(_);
      }
      var p2 = innerSubscribe(l2, new SimpleInnerSubscriber(this));
      !p2 || p2.closed ? this.clearThrottle() : this.add(this.throttled = p2);
    }
  }, u2.prototype.clearThrottle = function() {
    var c = this, l2 = c.value, v2 = c.hasValue, p2 = c.throttled;
    p2 && (this.remove(p2), this.throttled = void 0, p2.unsubscribe()), v2 && (this.value = void 0, this.hasValue = false, this.destination.next(l2));
  }, u2.prototype.notifyNext = function() {
    this.clearThrottle();
  }, u2.prototype.notifyComplete = function() {
    this.clearThrottle();
  }, u2;
}(SimpleOuterSubscriber), Action = /* @__PURE__ */ function(a420) {
  __extends(u2, a420);
  function u2(c, l2) {
    return a420.call(this) || this;
  }
  return u2.prototype.schedule = function(c, l2) {
    return this;
  }, u2;
}(Subscription), AsyncAction = /* @__PURE__ */ function(a420) {
  __extends(u2, a420);
  function u2(c, l2) {
    var v2 = a420.call(this, c, l2) || this;
    return v2.scheduler = c, v2.work = l2, v2.pending = false, v2;
  }
  return u2.prototype.schedule = function(c, l2) {
    if (l2 === void 0 && (l2 = 0), this.closed)
      return this;
    this.state = c;
    var v2 = this.id, p2 = this.scheduler;
    return v2 != null && (this.id = this.recycleAsyncId(p2, v2, l2)), this.pending = true, this.delay = l2, this.id = this.id || this.requestAsyncId(p2, this.id, l2), this;
  }, u2.prototype.requestAsyncId = function(c, l2, v2) {
    return v2 === void 0 && (v2 = 0), setInterval(c.flush.bind(c, this), v2);
  }, u2.prototype.recycleAsyncId = function(c, l2, v2) {
    if (v2 === void 0 && (v2 = 0), v2 !== null && this.delay === v2 && this.pending === false)
      return l2;
    clearInterval(l2);
  }, u2.prototype.execute = function(c, l2) {
    if (this.closed)
      return new Error("executing a cancelled action");
    this.pending = false;
    var v2 = this._execute(c, l2);
    if (v2)
      return v2;
    this.pending === false && this.id != null && (this.id = this.recycleAsyncId(this.scheduler, this.id, null));
  }, u2.prototype._execute = function(c, l2) {
    var v2 = false, p2 = void 0;
    try {
      this.work(c);
    } catch (_) {
      v2 = true, p2 = !!_ && _ || new Error(_);
    }
    if (v2)
      return this.unsubscribe(), p2;
  }, u2.prototype._unsubscribe = function() {
    var c = this.id, l2 = this.scheduler, v2 = l2.actions, p2 = v2.indexOf(this);
    this.work = null, this.state = null, this.pending = false, this.scheduler = null, p2 !== -1 && v2.splice(p2, 1), c != null && (this.id = this.recycleAsyncId(l2, c, null)), this.delay = null;
  }, u2;
}(Action), Scheduler = /* @__PURE__ */ function() {
  function a420(u2, c) {
    c === void 0 && (c = a420.now), this.SchedulerAction = u2, this.now = c;
  }
  return a420.prototype.schedule = function(u2, c, l2) {
    return c === void 0 && (c = 0), new this.SchedulerAction(this, u2).schedule(l2, c);
  }, a420.now = function() {
    return Date.now();
  }, a420;
}(), AsyncScheduler = /* @__PURE__ */ function(a420) {
  __extends(u2, a420);
  function u2(c, l2) {
    l2 === void 0 && (l2 = Scheduler.now);
    var v2 = a420.call(this, c, function() {
      return u2.delegate && u2.delegate !== v2 ? u2.delegate.now() : l2();
    }) || this;
    return v2.actions = [], v2.active = false, v2.scheduled = void 0, v2;
  }
  return u2.prototype.schedule = function(c, l2, v2) {
    return l2 === void 0 && (l2 = 0), u2.delegate && u2.delegate !== this ? u2.delegate.schedule(c, l2, v2) : a420.prototype.schedule.call(this, c, l2, v2);
  }, u2.prototype.flush = function(c) {
    var l2 = this.actions;
    if (this.active) {
      l2.push(c);
      return;
    }
    var v2;
    this.active = true;
    do
      if (v2 = c.execute(c.state, c.delay))
        break;
    while (c = l2.shift());
    if (this.active = false, v2) {
      for (; c = l2.shift(); )
        c.unsubscribe();
      throw v2;
    }
  }, u2;
}(Scheduler), asyncScheduler = /* @__PURE__ */ new AsyncScheduler(AsyncAction), async$1 = asyncScheduler;
function isNumeric(a420) {
  return !isArray$4(a420) && a420 - parseFloat(a420) + 1 >= 0;
}
function isScheduler(a420) {
  return a420 && typeof a420.schedule == "function";
}
function timer(a420, u2, c) {
  a420 === void 0 && (a420 = 0);
  var l2 = -1;
  return isNumeric(u2) ? l2 = Number(u2) < 1 && 1 || Number(u2) : isScheduler(u2) && (c = u2), isScheduler(c) || (c = async$1), new Observable(function(v2) {
    var p2 = isNumeric(a420) ? a420 : +a420 - c.now();
    return c.schedule(dispatch$1, p2, { index: 0, period: l2, subscriber: v2 });
  });
}
function dispatch$1(a420) {
  var u2 = a420.index, c = a420.period, l2 = a420.subscriber;
  if (l2.next(u2), !l2.closed) {
    if (c === -1)
      return l2.complete();
    a420.index = u2 + 1, this.schedule(a420, c);
  }
}
function auditTime(a420, u2) {
  return u2 === void 0 && (u2 = async$1), audit(function() {
    return timer(a420, u2);
  });
}
function buffer$2(a420) {
  return function(c) {
    return c.lift(new BufferOperator(a420));
  };
}
var BufferOperator = /* @__PURE__ */ function() {
  function a420(u2) {
    this.closingNotifier = u2;
  }
  return a420.prototype.call = function(u2, c) {
    return c.subscribe(new BufferSubscriber(u2, this.closingNotifier));
  }, a420;
}(), BufferSubscriber = /* @__PURE__ */ function(a420) {
  __extends(u2, a420);
  function u2(c, l2) {
    var v2 = a420.call(this, c) || this;
    return v2.buffer = [], v2.add(innerSubscribe(l2, new SimpleInnerSubscriber(v2))), v2;
  }
  return u2.prototype._next = function(c) {
    this.buffer.push(c);
  }, u2.prototype.notifyNext = function() {
    var c = this.buffer;
    this.buffer = [], this.destination.next(c);
  }, u2;
}(SimpleOuterSubscriber);
function bufferCount(a420, u2) {
  return u2 === void 0 && (u2 = null), function(l2) {
    return l2.lift(new BufferCountOperator(a420, u2));
  };
}
var BufferCountOperator = /* @__PURE__ */ function() {
  function a420(u2, c) {
    this.bufferSize = u2, this.startBufferEvery = c, !c || u2 === c ? this.subscriberClass = BufferCountSubscriber : this.subscriberClass = BufferSkipCountSubscriber;
  }
  return a420.prototype.call = function(u2, c) {
    return c.subscribe(new this.subscriberClass(u2, this.bufferSize, this.startBufferEvery));
  }, a420;
}(), BufferCountSubscriber = /* @__PURE__ */ function(a420) {
  __extends(u2, a420);
  function u2(c, l2) {
    var v2 = a420.call(this, c) || this;
    return v2.bufferSize = l2, v2.buffer = [], v2;
  }
  return u2.prototype._next = function(c) {
    var l2 = this.buffer;
    l2.push(c), l2.length == this.bufferSize && (this.destination.next(l2), this.buffer = []);
  }, u2.prototype._complete = function() {
    var c = this.buffer;
    c.length > 0 && this.destination.next(c), a420.prototype._complete.call(this);
  }, u2;
}(Subscriber), BufferSkipCountSubscriber = /* @__PURE__ */ function(a420) {
  __extends(u2, a420);
  function u2(c, l2, v2) {
    var p2 = a420.call(this, c) || this;
    return p2.bufferSize = l2, p2.startBufferEvery = v2, p2.buffers = [], p2.count = 0, p2;
  }
  return u2.prototype._next = function(c) {
    var l2 = this, v2 = l2.bufferSize, p2 = l2.startBufferEvery, _ = l2.buffers, I2 = l2.count;
    this.count++, I2 % p2 === 0 && _.push([]);
    for (var P2 = _.length; P2--; ) {
      var $ = _[P2];
      $.push(c), $.length === v2 && (_.splice(P2, 1), this.destination.next($));
    }
  }, u2.prototype._complete = function() {
    for (var c = this, l2 = c.buffers, v2 = c.destination; l2.length > 0; ) {
      var p2 = l2.shift();
      p2.length > 0 && v2.next(p2);
    }
    a420.prototype._complete.call(this);
  }, u2;
}(Subscriber);
function bufferTime(a420) {
  var u2 = arguments.length, c = async$1;
  isScheduler(arguments[arguments.length - 1]) && (c = arguments[arguments.length - 1], u2--);
  var l2 = null;
  u2 >= 2 && (l2 = arguments[1]);
  var v2 = Number.POSITIVE_INFINITY;
  return u2 >= 3 && (v2 = arguments[2]), function(_) {
    return _.lift(new BufferTimeOperator(a420, l2, v2, c));
  };
}
var BufferTimeOperator = /* @__PURE__ */ function() {
  function a420(u2, c, l2, v2) {
    this.bufferTimeSpan = u2, this.bufferCreationInterval = c, this.maxBufferSize = l2, this.scheduler = v2;
  }
  return a420.prototype.call = function(u2, c) {
    return c.subscribe(new BufferTimeSubscriber(u2, this.bufferTimeSpan, this.bufferCreationInterval, this.maxBufferSize, this.scheduler));
  }, a420;
}(), Context = /* @__PURE__ */ function() {
  function a420() {
    this.buffer = [];
  }
  return a420;
}(), BufferTimeSubscriber = /* @__PURE__ */ function(a420) {
  __extends(u2, a420);
  function u2(c, l2, v2, p2, _) {
    var I2 = a420.call(this, c) || this;
    I2.bufferTimeSpan = l2, I2.bufferCreationInterval = v2, I2.maxBufferSize = p2, I2.scheduler = _, I2.contexts = [];
    var P2 = I2.openContext();
    if (I2.timespanOnly = v2 == null || v2 < 0, I2.timespanOnly) {
      var $ = { subscriber: I2, context: P2, bufferTimeSpan: l2 };
      I2.add(P2.closeAction = _.schedule(dispatchBufferTimeSpanOnly, l2, $));
    } else {
      var F2 = { subscriber: I2, context: P2 }, H2 = { bufferTimeSpan: l2, bufferCreationInterval: v2, subscriber: I2, scheduler: _ };
      I2.add(P2.closeAction = _.schedule(dispatchBufferClose, l2, F2)), I2.add(_.schedule(dispatchBufferCreation, v2, H2));
    }
    return I2;
  }
  return u2.prototype._next = function(c) {
    for (var l2 = this.contexts, v2 = l2.length, p2, _ = 0; _ < v2; _++) {
      var I2 = l2[_], P2 = I2.buffer;
      P2.push(c), P2.length == this.maxBufferSize && (p2 = I2);
    }
    p2 && this.onBufferFull(p2);
  }, u2.prototype._error = function(c) {
    this.contexts.length = 0, a420.prototype._error.call(this, c);
  }, u2.prototype._complete = function() {
    for (var c = this, l2 = c.contexts, v2 = c.destination; l2.length > 0; ) {
      var p2 = l2.shift();
      v2.next(p2.buffer);
    }
    a420.prototype._complete.call(this);
  }, u2.prototype._unsubscribe = function() {
    this.contexts = null;
  }, u2.prototype.onBufferFull = function(c) {
    this.closeContext(c);
    var l2 = c.closeAction;
    if (l2.unsubscribe(), this.remove(l2), !this.closed && this.timespanOnly) {
      c = this.openContext();
      var v2 = this.bufferTimeSpan, p2 = { subscriber: this, context: c, bufferTimeSpan: v2 };
      this.add(c.closeAction = this.scheduler.schedule(dispatchBufferTimeSpanOnly, v2, p2));
    }
  }, u2.prototype.openContext = function() {
    var c = new Context();
    return this.contexts.push(c), c;
  }, u2.prototype.closeContext = function(c) {
    this.destination.next(c.buffer);
    var l2 = this.contexts, v2 = l2 ? l2.indexOf(c) : -1;
    v2 >= 0 && l2.splice(l2.indexOf(c), 1);
  }, u2;
}(Subscriber);
function dispatchBufferTimeSpanOnly(a420) {
  var u2 = a420.subscriber, c = a420.context;
  c && u2.closeContext(c), u2.closed || (a420.context = u2.openContext(), a420.context.closeAction = this.schedule(a420, a420.bufferTimeSpan));
}
function dispatchBufferCreation(a420) {
  var u2 = a420.bufferCreationInterval, c = a420.bufferTimeSpan, l2 = a420.subscriber, v2 = a420.scheduler, p2 = l2.openContext(), _ = this;
  l2.closed || (l2.add(p2.closeAction = v2.schedule(dispatchBufferClose, c, { subscriber: l2, context: p2 })), _.schedule(a420, u2));
}
function dispatchBufferClose(a420) {
  var u2 = a420.subscriber, c = a420.context;
  u2.closeContext(c);
}
var InnerSubscriber = /* @__PURE__ */ function(a420) {
  __extends(u2, a420);
  function u2(c, l2, v2) {
    var p2 = a420.call(this) || this;
    return p2.parent = c, p2.outerValue = l2, p2.outerIndex = v2, p2.index = 0, p2;
  }
  return u2.prototype._next = function(c) {
    this.parent.notifyNext(this.outerValue, c, this.outerIndex, this.index++, this);
  }, u2.prototype._error = function(c) {
    this.parent.notifyError(c, this), this.unsubscribe();
  }, u2.prototype._complete = function() {
    this.parent.notifyComplete(this), this.unsubscribe();
  }, u2;
}(Subscriber);
function subscribeToResult(a420, u2, c, l2, v2) {
  if (v2 === void 0 && (v2 = new InnerSubscriber(a420, c, l2)), !v2.closed)
    return u2 instanceof Observable ? u2.subscribe(v2) : subscribeTo(u2)(v2);
}
var OuterSubscriber = /* @__PURE__ */ function(a420) {
  __extends(u2, a420);
  function u2() {
    return a420 !== null && a420.apply(this, arguments) || this;
  }
  return u2.prototype.notifyNext = function(c, l2, v2, p2, _) {
    this.destination.next(l2);
  }, u2.prototype.notifyError = function(c, l2) {
    this.destination.error(c);
  }, u2.prototype.notifyComplete = function(c) {
    this.destination.complete();
  }, u2;
}(Subscriber);
function bufferToggle(a420, u2) {
  return function(l2) {
    return l2.lift(new BufferToggleOperator(a420, u2));
  };
}
var BufferToggleOperator = /* @__PURE__ */ function() {
  function a420(u2, c) {
    this.openings = u2, this.closingSelector = c;
  }
  return a420.prototype.call = function(u2, c) {
    return c.subscribe(new BufferToggleSubscriber(u2, this.openings, this.closingSelector));
  }, a420;
}(), BufferToggleSubscriber = /* @__PURE__ */ function(a420) {
  __extends(u2, a420);
  function u2(c, l2, v2) {
    var p2 = a420.call(this, c) || this;
    return p2.closingSelector = v2, p2.contexts = [], p2.add(subscribeToResult(p2, l2)), p2;
  }
  return u2.prototype._next = function(c) {
    for (var l2 = this.contexts, v2 = l2.length, p2 = 0; p2 < v2; p2++)
      l2[p2].buffer.push(c);
  }, u2.prototype._error = function(c) {
    for (var l2 = this.contexts; l2.length > 0; ) {
      var v2 = l2.shift();
      v2.subscription.unsubscribe(), v2.buffer = null, v2.subscription = null;
    }
    this.contexts = null, a420.prototype._error.call(this, c);
  }, u2.prototype._complete = function() {
    for (var c = this.contexts; c.length > 0; ) {
      var l2 = c.shift();
      this.destination.next(l2.buffer), l2.subscription.unsubscribe(), l2.buffer = null, l2.subscription = null;
    }
    this.contexts = null, a420.prototype._complete.call(this);
  }, u2.prototype.notifyNext = function(c, l2) {
    c ? this.closeBuffer(c) : this.openBuffer(l2);
  }, u2.prototype.notifyComplete = function(c) {
    this.closeBuffer(c.context);
  }, u2.prototype.openBuffer = function(c) {
    try {
      var l2 = this.closingSelector, v2 = l2.call(this, c);
      v2 && this.trySubscribe(v2);
    } catch (p2) {
      this._error(p2);
    }
  }, u2.prototype.closeBuffer = function(c) {
    var l2 = this.contexts;
    if (l2 && c) {
      var v2 = c.buffer, p2 = c.subscription;
      this.destination.next(v2), l2.splice(l2.indexOf(c), 1), this.remove(p2), p2.unsubscribe();
    }
  }, u2.prototype.trySubscribe = function(c) {
    var l2 = this.contexts, v2 = [], p2 = new Subscription(), _ = { buffer: v2, subscription: p2 };
    l2.push(_);
    var I2 = subscribeToResult(this, c, _);
    !I2 || I2.closed ? this.closeBuffer(_) : (I2.context = _, this.add(I2), p2.add(I2));
  }, u2;
}(OuterSubscriber);
function bufferWhen(a420) {
  return function(u2) {
    return u2.lift(new BufferWhenOperator(a420));
  };
}
var BufferWhenOperator = /* @__PURE__ */ function() {
  function a420(u2) {
    this.closingSelector = u2;
  }
  return a420.prototype.call = function(u2, c) {
    return c.subscribe(new BufferWhenSubscriber(u2, this.closingSelector));
  }, a420;
}(), BufferWhenSubscriber = /* @__PURE__ */ function(a420) {
  __extends(u2, a420);
  function u2(c, l2) {
    var v2 = a420.call(this, c) || this;
    return v2.closingSelector = l2, v2.subscribing = false, v2.openBuffer(), v2;
  }
  return u2.prototype._next = function(c) {
    this.buffer.push(c);
  }, u2.prototype._complete = function() {
    var c = this.buffer;
    c && this.destination.next(c), a420.prototype._complete.call(this);
  }, u2.prototype._unsubscribe = function() {
    this.buffer = void 0, this.subscribing = false;
  }, u2.prototype.notifyNext = function() {
    this.openBuffer();
  }, u2.prototype.notifyComplete = function() {
    this.subscribing ? this.complete() : this.openBuffer();
  }, u2.prototype.openBuffer = function() {
    var c = this.closingSubscription;
    c && (this.remove(c), c.unsubscribe());
    var l2 = this.buffer;
    this.buffer && this.destination.next(l2), this.buffer = [];
    var v2;
    try {
      var p2 = this.closingSelector;
      v2 = p2();
    } catch (_) {
      return this.error(_);
    }
    c = new Subscription(), this.closingSubscription = c, this.add(c), this.subscribing = true, c.add(innerSubscribe(v2, new SimpleInnerSubscriber(this))), this.subscribing = false;
  }, u2;
}(SimpleOuterSubscriber);
function catchError(a420) {
  return function(c) {
    var l2 = new CatchOperator(a420), v2 = c.lift(l2);
    return l2.caught = v2;
  };
}
var CatchOperator = /* @__PURE__ */ function() {
  function a420(u2) {
    this.selector = u2;
  }
  return a420.prototype.call = function(u2, c) {
    return c.subscribe(new CatchSubscriber(u2, this.selector, this.caught));
  }, a420;
}(), CatchSubscriber = /* @__PURE__ */ function(a420) {
  __extends(u2, a420);
  function u2(c, l2, v2) {
    var p2 = a420.call(this, c) || this;
    return p2.selector = l2, p2.caught = v2, p2;
  }
  return u2.prototype.error = function(c) {
    if (!this.isStopped) {
      var l2 = void 0;
      try {
        l2 = this.selector(c, this.caught);
      } catch (_) {
        a420.prototype.error.call(this, _);
        return;
      }
      this._unsubscribeAndRecycle();
      var v2 = new SimpleInnerSubscriber(this);
      this.add(v2);
      var p2 = innerSubscribe(l2, v2);
      p2 !== v2 && this.add(p2);
    }
  }, u2;
}(SimpleOuterSubscriber);
function scheduleArray(a420, u2) {
  return new Observable(function(c) {
    var l2 = new Subscription(), v2 = 0;
    return l2.add(u2.schedule(function() {
      if (v2 === a420.length) {
        c.complete();
        return;
      }
      c.next(a420[v2++]), c.closed || l2.add(this.schedule());
    })), l2;
  });
}
function fromArray$1(a420, u2) {
  return u2 ? scheduleArray(a420, u2) : new Observable(subscribeToArray(a420));
}
var NONE = {}, CombineLatestOperator = /* @__PURE__ */ function() {
  function a420(u2) {
    this.resultSelector = u2;
  }
  return a420.prototype.call = function(u2, c) {
    return c.subscribe(new CombineLatestSubscriber(u2, this.resultSelector));
  }, a420;
}(), CombineLatestSubscriber = /* @__PURE__ */ function(a420) {
  __extends(u2, a420);
  function u2(c, l2) {
    var v2 = a420.call(this, c) || this;
    return v2.resultSelector = l2, v2.active = 0, v2.values = [], v2.observables = [], v2;
  }
  return u2.prototype._next = function(c) {
    this.values.push(NONE), this.observables.push(c);
  }, u2.prototype._complete = function() {
    var c = this.observables, l2 = c.length;
    if (l2 === 0)
      this.destination.complete();
    else {
      this.active = l2, this.toRespond = l2;
      for (var v2 = 0; v2 < l2; v2++) {
        var p2 = c[v2];
        this.add(subscribeToResult(this, p2, void 0, v2));
      }
    }
  }, u2.prototype.notifyComplete = function(c) {
    (this.active -= 1) === 0 && this.destination.complete();
  }, u2.prototype.notifyNext = function(c, l2, v2) {
    var p2 = this.values, _ = p2[v2], I2 = this.toRespond ? _ === NONE ? --this.toRespond : this.toRespond : 0;
    p2[v2] = l2, I2 === 0 && (this.resultSelector ? this._tryResultSelector(p2) : this.destination.next(p2.slice()));
  }, u2.prototype._tryResultSelector = function(c) {
    var l2;
    try {
      l2 = this.resultSelector.apply(this, c);
    } catch (v2) {
      this.destination.error(v2);
      return;
    }
    this.destination.next(l2);
  }, u2;
}(OuterSubscriber);
function combineAll(a420) {
  return function(u2) {
    return u2.lift(new CombineLatestOperator(a420));
  };
}
function scheduleObservable(a420, u2) {
  return new Observable(function(c) {
    var l2 = new Subscription();
    return l2.add(u2.schedule(function() {
      var v2 = a420[observable]();
      l2.add(v2.subscribe({ next: function(p2) {
        l2.add(u2.schedule(function() {
          return c.next(p2);
        }));
      }, error: function(p2) {
        l2.add(u2.schedule(function() {
          return c.error(p2);
        }));
      }, complete: function() {
        l2.add(u2.schedule(function() {
          return c.complete();
        }));
      } }));
    })), l2;
  });
}
function schedulePromise(a420, u2) {
  return new Observable(function(c) {
    var l2 = new Subscription();
    return l2.add(u2.schedule(function() {
      return a420.then(function(v2) {
        l2.add(u2.schedule(function() {
          c.next(v2), l2.add(u2.schedule(function() {
            return c.complete();
          }));
        }));
      }, function(v2) {
        l2.add(u2.schedule(function() {
          return c.error(v2);
        }));
      });
    })), l2;
  });
}
function scheduleIterable(a420, u2) {
  if (!a420)
    throw new Error("Iterable cannot be null");
  return new Observable(function(c) {
    var l2 = new Subscription(), v2;
    return l2.add(function() {
      v2 && typeof v2.return == "function" && v2.return();
    }), l2.add(u2.schedule(function() {
      v2 = a420[iterator](), l2.add(u2.schedule(function() {
        if (!c.closed) {
          var p2, _;
          try {
            var I2 = v2.next();
            p2 = I2.value, _ = I2.done;
          } catch (P2) {
            c.error(P2);
            return;
          }
          _ ? c.complete() : (c.next(p2), this.schedule());
        }
      }));
    })), l2;
  });
}
function isInteropObservable(a420) {
  return a420 && typeof a420[observable] == "function";
}
function isIterable(a420) {
  return a420 && typeof a420[iterator] == "function";
}
function scheduled(a420, u2) {
  if (a420 != null) {
    if (isInteropObservable(a420))
      return scheduleObservable(a420, u2);
    if (isPromise(a420))
      return schedulePromise(a420, u2);
    if (isArrayLike$1(a420))
      return scheduleArray(a420, u2);
    if (isIterable(a420) || typeof a420 == "string")
      return scheduleIterable(a420, u2);
  }
  throw new TypeError((a420 !== null && typeof a420 || a420) + " is not observable");
}
function from(a420, u2) {
  return u2 ? scheduled(a420, u2) : a420 instanceof Observable ? a420 : new Observable(subscribeTo(a420));
}
function combineLatest() {
  for (var a420 = [], u2 = 0; u2 < arguments.length; u2++)
    a420[u2] = arguments[u2];
  var c = null;
  return typeof a420[a420.length - 1] == "function" && (c = a420.pop()), a420.length === 1 && isArray$4(a420[0]) && (a420 = a420[0].slice()), function(l2) {
    return l2.lift.call(from([l2].concat(a420)), new CombineLatestOperator(c));
  };
}
function of$1() {
  for (var a420 = [], u2 = 0; u2 < arguments.length; u2++)
    a420[u2] = arguments[u2];
  var c = a420[a420.length - 1];
  return isScheduler(c) ? (a420.pop(), scheduleArray(a420, c)) : fromArray$1(a420);
}
function map(a420, u2) {
  return function(l2) {
    if (typeof a420 != "function")
      throw new TypeError("argument is not a function. Are you looking for `mapTo()`?");
    return l2.lift(new MapOperator(a420, u2));
  };
}
var MapOperator = /* @__PURE__ */ function() {
  function a420(u2, c) {
    this.project = u2, this.thisArg = c;
  }
  return a420.prototype.call = function(u2, c) {
    return c.subscribe(new MapSubscriber(u2, this.project, this.thisArg));
  }, a420;
}(), MapSubscriber = /* @__PURE__ */ function(a420) {
  __extends(u2, a420);
  function u2(c, l2, v2) {
    var p2 = a420.call(this, c) || this;
    return p2.project = l2, p2.count = 0, p2.thisArg = v2 || p2, p2;
  }
  return u2.prototype._next = function(c) {
    var l2;
    try {
      l2 = this.project.call(this.thisArg, c, this.count++);
    } catch (v2) {
      this.destination.error(v2);
      return;
    }
    this.destination.next(l2);
  }, u2;
}(Subscriber);
function mergeMap(a420, u2, c) {
  return c === void 0 && (c = Number.POSITIVE_INFINITY), typeof u2 == "function" ? function(l2) {
    return l2.pipe(mergeMap(function(v2, p2) {
      return from(a420(v2, p2)).pipe(map(function(_, I2) {
        return u2(v2, _, p2, I2);
      }));
    }, c));
  } : (typeof u2 == "number" && (c = u2), function(l2) {
    return l2.lift(new MergeMapOperator(a420, c));
  });
}
var MergeMapOperator = /* @__PURE__ */ function() {
  function a420(u2, c) {
    c === void 0 && (c = Number.POSITIVE_INFINITY), this.project = u2, this.concurrent = c;
  }
  return a420.prototype.call = function(u2, c) {
    return c.subscribe(new MergeMapSubscriber(u2, this.project, this.concurrent));
  }, a420;
}(), MergeMapSubscriber = /* @__PURE__ */ function(a420) {
  __extends(u2, a420);
  function u2(c, l2, v2) {
    v2 === void 0 && (v2 = Number.POSITIVE_INFINITY);
    var p2 = a420.call(this, c) || this;
    return p2.project = l2, p2.concurrent = v2, p2.hasCompleted = false, p2.buffer = [], p2.active = 0, p2.index = 0, p2;
  }
  return u2.prototype._next = function(c) {
    this.active < this.concurrent ? this._tryNext(c) : this.buffer.push(c);
  }, u2.prototype._tryNext = function(c) {
    var l2, v2 = this.index++;
    try {
      l2 = this.project(c, v2);
    } catch (p2) {
      this.destination.error(p2);
      return;
    }
    this.active++, this._innerSub(l2);
  }, u2.prototype._innerSub = function(c) {
    var l2 = new SimpleInnerSubscriber(this), v2 = this.destination;
    v2.add(l2);
    var p2 = innerSubscribe(c, l2);
    p2 !== l2 && v2.add(p2);
  }, u2.prototype._complete = function() {
    this.hasCompleted = true, this.active === 0 && this.buffer.length === 0 && this.destination.complete(), this.unsubscribe();
  }, u2.prototype.notifyNext = function(c) {
    this.destination.next(c);
  }, u2.prototype.notifyComplete = function() {
    var c = this.buffer;
    this.active--, c.length > 0 ? this._next(c.shift()) : this.active === 0 && this.hasCompleted && this.destination.complete();
  }, u2;
}(SimpleOuterSubscriber), flatMap = mergeMap;
function mergeAll(a420) {
  return a420 === void 0 && (a420 = Number.POSITIVE_INFINITY), mergeMap(identity, a420);
}
function concatAll() {
  return mergeAll(1);
}
function concat$1() {
  for (var a420 = [], u2 = 0; u2 < arguments.length; u2++)
    a420[u2] = arguments[u2];
  return concatAll()(of$1.apply(void 0, a420));
}
function concat() {
  for (var a420 = [], u2 = 0; u2 < arguments.length; u2++)
    a420[u2] = arguments[u2];
  return function(c) {
    return c.lift.call(concat$1.apply(void 0, [c].concat(a420)));
  };
}
function concatMap(a420, u2) {
  return mergeMap(a420, u2, 1);
}
function concatMapTo(a420, u2) {
  return concatMap(function() {
    return a420;
  }, u2);
}
function count(a420) {
  return function(u2) {
    return u2.lift(new CountOperator(a420, u2));
  };
}
var CountOperator = /* @__PURE__ */ function() {
  function a420(u2, c) {
    this.predicate = u2, this.source = c;
  }
  return a420.prototype.call = function(u2, c) {
    return c.subscribe(new CountSubscriber(u2, this.predicate, this.source));
  }, a420;
}(), CountSubscriber = /* @__PURE__ */ function(a420) {
  __extends(u2, a420);
  function u2(c, l2, v2) {
    var p2 = a420.call(this, c) || this;
    return p2.predicate = l2, p2.source = v2, p2.count = 0, p2.index = 0, p2;
  }
  return u2.prototype._next = function(c) {
    this.predicate ? this._tryPredicate(c) : this.count++;
  }, u2.prototype._tryPredicate = function(c) {
    var l2;
    try {
      l2 = this.predicate(c, this.index++, this.source);
    } catch (v2) {
      this.destination.error(v2);
      return;
    }
    l2 && this.count++;
  }, u2.prototype._complete = function() {
    this.destination.next(this.count), this.destination.complete();
  }, u2;
}(Subscriber);
function debounce(a420) {
  return function(u2) {
    return u2.lift(new DebounceOperator(a420));
  };
}
var DebounceOperator = /* @__PURE__ */ function() {
  function a420(u2) {
    this.durationSelector = u2;
  }
  return a420.prototype.call = function(u2, c) {
    return c.subscribe(new DebounceSubscriber(u2, this.durationSelector));
  }, a420;
}(), DebounceSubscriber = /* @__PURE__ */ function(a420) {
  __extends(u2, a420);
  function u2(c, l2) {
    var v2 = a420.call(this, c) || this;
    return v2.durationSelector = l2, v2.hasValue = false, v2;
  }
  return u2.prototype._next = function(c) {
    try {
      var l2 = this.durationSelector.call(this, c);
      l2 && this._tryNext(c, l2);
    } catch (v2) {
      this.destination.error(v2);
    }
  }, u2.prototype._complete = function() {
    this.emitValue(), this.destination.complete();
  }, u2.prototype._tryNext = function(c, l2) {
    var v2 = this.durationSubscription;
    this.value = c, this.hasValue = true, v2 && (v2.unsubscribe(), this.remove(v2)), v2 = innerSubscribe(l2, new SimpleInnerSubscriber(this)), v2 && !v2.closed && this.add(this.durationSubscription = v2);
  }, u2.prototype.notifyNext = function() {
    this.emitValue();
  }, u2.prototype.notifyComplete = function() {
    this.emitValue();
  }, u2.prototype.emitValue = function() {
    if (this.hasValue) {
      var c = this.value, l2 = this.durationSubscription;
      l2 && (this.durationSubscription = void 0, l2.unsubscribe(), this.remove(l2)), this.value = void 0, this.hasValue = false, a420.prototype._next.call(this, c);
    }
  }, u2;
}(SimpleOuterSubscriber);
function debounceTime(a420, u2) {
  return u2 === void 0 && (u2 = async$1), function(c) {
    return c.lift(new DebounceTimeOperator(a420, u2));
  };
}
var DebounceTimeOperator = /* @__PURE__ */ function() {
  function a420(u2, c) {
    this.dueTime = u2, this.scheduler = c;
  }
  return a420.prototype.call = function(u2, c) {
    return c.subscribe(new DebounceTimeSubscriber(u2, this.dueTime, this.scheduler));
  }, a420;
}(), DebounceTimeSubscriber = /* @__PURE__ */ function(a420) {
  __extends(u2, a420);
  function u2(c, l2, v2) {
    var p2 = a420.call(this, c) || this;
    return p2.dueTime = l2, p2.scheduler = v2, p2.debouncedSubscription = null, p2.lastValue = null, p2.hasValue = false, p2;
  }
  return u2.prototype._next = function(c) {
    this.clearDebounce(), this.lastValue = c, this.hasValue = true, this.add(this.debouncedSubscription = this.scheduler.schedule(dispatchNext$1, this.dueTime, this));
  }, u2.prototype._complete = function() {
    this.debouncedNext(), this.destination.complete();
  }, u2.prototype.debouncedNext = function() {
    if (this.clearDebounce(), this.hasValue) {
      var c = this.lastValue;
      this.lastValue = null, this.hasValue = false, this.destination.next(c);
    }
  }, u2.prototype.clearDebounce = function() {
    var c = this.debouncedSubscription;
    c !== null && (this.remove(c), c.unsubscribe(), this.debouncedSubscription = null);
  }, u2;
}(Subscriber);
function dispatchNext$1(a420) {
  a420.debouncedNext();
}
function defaultIfEmpty(a420) {
  return a420 === void 0 && (a420 = null), function(u2) {
    return u2.lift(new DefaultIfEmptyOperator(a420));
  };
}
var DefaultIfEmptyOperator = /* @__PURE__ */ function() {
  function a420(u2) {
    this.defaultValue = u2;
  }
  return a420.prototype.call = function(u2, c) {
    return c.subscribe(new DefaultIfEmptySubscriber(u2, this.defaultValue));
  }, a420;
}(), DefaultIfEmptySubscriber = /* @__PURE__ */ function(a420) {
  __extends(u2, a420);
  function u2(c, l2) {
    var v2 = a420.call(this, c) || this;
    return v2.defaultValue = l2, v2.isEmpty = true, v2;
  }
  return u2.prototype._next = function(c) {
    this.isEmpty = false, this.destination.next(c);
  }, u2.prototype._complete = function() {
    this.isEmpty && this.destination.next(this.defaultValue), this.destination.complete();
  }, u2;
}(Subscriber);
function isDate$1(a420) {
  return a420 instanceof Date && !isNaN(+a420);
}
var EMPTY = /* @__PURE__ */ new Observable(function(a420) {
  return a420.complete();
});
function empty$1(a420) {
  return a420 ? emptyScheduled(a420) : EMPTY;
}
function emptyScheduled(a420) {
  return new Observable(function(u2) {
    return a420.schedule(function() {
      return u2.complete();
    });
  });
}
function throwError(a420, u2) {
  return u2 ? new Observable(function(c) {
    return u2.schedule(dispatch, 0, { error: a420, subscriber: c });
  }) : new Observable(function(c) {
    return c.error(a420);
  });
}
function dispatch(a420) {
  var u2 = a420.error, c = a420.subscriber;
  c.error(u2);
}
var Notification = /* @__PURE__ */ function() {
  function a420(u2, c, l2) {
    this.kind = u2, this.value = c, this.error = l2, this.hasValue = u2 === "N";
  }
  return a420.prototype.observe = function(u2) {
    switch (this.kind) {
      case "N":
        return u2.next && u2.next(this.value);
      case "E":
        return u2.error && u2.error(this.error);
      case "C":
        return u2.complete && u2.complete();
    }
  }, a420.prototype.do = function(u2, c, l2) {
    var v2 = this.kind;
    switch (v2) {
      case "N":
        return u2 && u2(this.value);
      case "E":
        return c && c(this.error);
      case "C":
        return l2 && l2();
    }
  }, a420.prototype.accept = function(u2, c, l2) {
    return u2 && typeof u2.next == "function" ? this.observe(u2) : this.do(u2, c, l2);
  }, a420.prototype.toObservable = function() {
    var u2 = this.kind;
    switch (u2) {
      case "N":
        return of$1(this.value);
      case "E":
        return throwError(this.error);
      case "C":
        return empty$1();
    }
    throw new Error("unexpected notification kind value");
  }, a420.createNext = function(u2) {
    return typeof u2 < "u" ? new a420("N", u2) : a420.undefinedValueNotification;
  }, a420.createError = function(u2) {
    return new a420("E", void 0, u2);
  }, a420.createComplete = function() {
    return a420.completeNotification;
  }, a420.completeNotification = new a420("C"), a420.undefinedValueNotification = new a420("N", void 0), a420;
}();
function delay(a420, u2) {
  u2 === void 0 && (u2 = async$1);
  var c = isDate$1(a420), l2 = c ? +a420 - u2.now() : Math.abs(a420);
  return function(v2) {
    return v2.lift(new DelayOperator(l2, u2));
  };
}
var DelayOperator = /* @__PURE__ */ function() {
  function a420(u2, c) {
    this.delay = u2, this.scheduler = c;
  }
  return a420.prototype.call = function(u2, c) {
    return c.subscribe(new DelaySubscriber(u2, this.delay, this.scheduler));
  }, a420;
}(), DelaySubscriber = /* @__PURE__ */ function(a420) {
  __extends(u2, a420);
  function u2(c, l2, v2) {
    var p2 = a420.call(this, c) || this;
    return p2.delay = l2, p2.scheduler = v2, p2.queue = [], p2.active = false, p2.errored = false, p2;
  }
  return u2.dispatch = function(c) {
    for (var l2 = c.source, v2 = l2.queue, p2 = c.scheduler, _ = c.destination; v2.length > 0 && v2[0].time - p2.now() <= 0; )
      v2.shift().notification.observe(_);
    if (v2.length > 0) {
      var I2 = Math.max(0, v2[0].time - p2.now());
      this.schedule(c, I2);
    } else
      this.unsubscribe(), l2.active = false;
  }, u2.prototype._schedule = function(c) {
    this.active = true;
    var l2 = this.destination;
    l2.add(c.schedule(u2.dispatch, this.delay, { source: this, destination: this.destination, scheduler: c }));
  }, u2.prototype.scheduleNotification = function(c) {
    if (this.errored !== true) {
      var l2 = this.scheduler, v2 = new DelayMessage(l2.now() + this.delay, c);
      this.queue.push(v2), this.active === false && this._schedule(l2);
    }
  }, u2.prototype._next = function(c) {
    this.scheduleNotification(Notification.createNext(c));
  }, u2.prototype._error = function(c) {
    this.errored = true, this.queue = [], this.destination.error(c), this.unsubscribe();
  }, u2.prototype._complete = function() {
    this.scheduleNotification(Notification.createComplete()), this.unsubscribe();
  }, u2;
}(Subscriber), DelayMessage = /* @__PURE__ */ function() {
  function a420(u2, c) {
    this.time = u2, this.notification = c;
  }
  return a420;
}();
function delayWhen(a420, u2) {
  return u2 ? function(c) {
    return new SubscriptionDelayObservable(c, u2).lift(new DelayWhenOperator(a420));
  } : function(c) {
    return c.lift(new DelayWhenOperator(a420));
  };
}
var DelayWhenOperator = /* @__PURE__ */ function() {
  function a420(u2) {
    this.delayDurationSelector = u2;
  }
  return a420.prototype.call = function(u2, c) {
    return c.subscribe(new DelayWhenSubscriber(u2, this.delayDurationSelector));
  }, a420;
}(), DelayWhenSubscriber = /* @__PURE__ */ function(a420) {
  __extends(u2, a420);
  function u2(c, l2) {
    var v2 = a420.call(this, c) || this;
    return v2.delayDurationSelector = l2, v2.completed = false, v2.delayNotifierSubscriptions = [], v2.index = 0, v2;
  }
  return u2.prototype.notifyNext = function(c, l2, v2, p2, _) {
    this.destination.next(c), this.removeSubscription(_), this.tryComplete();
  }, u2.prototype.notifyError = function(c, l2) {
    this._error(c);
  }, u2.prototype.notifyComplete = function(c) {
    var l2 = this.removeSubscription(c);
    l2 && this.destination.next(l2), this.tryComplete();
  }, u2.prototype._next = function(c) {
    var l2 = this.index++;
    try {
      var v2 = this.delayDurationSelector(c, l2);
      v2 && this.tryDelay(v2, c);
    } catch (p2) {
      this.destination.error(p2);
    }
  }, u2.prototype._complete = function() {
    this.completed = true, this.tryComplete(), this.unsubscribe();
  }, u2.prototype.removeSubscription = function(c) {
    c.unsubscribe();
    var l2 = this.delayNotifierSubscriptions.indexOf(c);
    return l2 !== -1 && this.delayNotifierSubscriptions.splice(l2, 1), c.outerValue;
  }, u2.prototype.tryDelay = function(c, l2) {
    var v2 = subscribeToResult(this, c, l2);
    if (v2 && !v2.closed) {
      var p2 = this.destination;
      p2.add(v2), this.delayNotifierSubscriptions.push(v2);
    }
  }, u2.prototype.tryComplete = function() {
    this.completed && this.delayNotifierSubscriptions.length === 0 && this.destination.complete();
  }, u2;
}(OuterSubscriber), SubscriptionDelayObservable = /* @__PURE__ */ function(a420) {
  __extends(u2, a420);
  function u2(c, l2) {
    var v2 = a420.call(this) || this;
    return v2.source = c, v2.subscriptionDelay = l2, v2;
  }
  return u2.prototype._subscribe = function(c) {
    this.subscriptionDelay.subscribe(new SubscriptionDelaySubscriber(c, this.source));
  }, u2;
}(Observable), SubscriptionDelaySubscriber = /* @__PURE__ */ function(a420) {
  __extends(u2, a420);
  function u2(c, l2) {
    var v2 = a420.call(this) || this;
    return v2.parent = c, v2.source = l2, v2.sourceSubscribed = false, v2;
  }
  return u2.prototype._next = function(c) {
    this.subscribeToSource();
  }, u2.prototype._error = function(c) {
    this.unsubscribe(), this.parent.error(c);
  }, u2.prototype._complete = function() {
    this.unsubscribe(), this.subscribeToSource();
  }, u2.prototype.subscribeToSource = function() {
    this.sourceSubscribed || (this.sourceSubscribed = true, this.unsubscribe(), this.source.subscribe(this.parent));
  }, u2;
}(Subscriber);
function dematerialize() {
  return function(u2) {
    return u2.lift(new DeMaterializeOperator());
  };
}
var DeMaterializeOperator = /* @__PURE__ */ function() {
  function a420() {
  }
  return a420.prototype.call = function(u2, c) {
    return c.subscribe(new DeMaterializeSubscriber(u2));
  }, a420;
}(), DeMaterializeSubscriber = /* @__PURE__ */ function(a420) {
  __extends(u2, a420);
  function u2(c) {
    return a420.call(this, c) || this;
  }
  return u2.prototype._next = function(c) {
    c.observe(this.destination);
  }, u2;
}(Subscriber);
function distinct(a420, u2) {
  return function(c) {
    return c.lift(new DistinctOperator(a420, u2));
  };
}
var DistinctOperator = /* @__PURE__ */ function() {
  function a420(u2, c) {
    this.keySelector = u2, this.flushes = c;
  }
  return a420.prototype.call = function(u2, c) {
    return c.subscribe(new DistinctSubscriber(u2, this.keySelector, this.flushes));
  }, a420;
}(), DistinctSubscriber = /* @__PURE__ */ function(a420) {
  __extends(u2, a420);
  function u2(c, l2, v2) {
    var p2 = a420.call(this, c) || this;
    return p2.keySelector = l2, p2.values = /* @__PURE__ */ new Set(), v2 && p2.add(innerSubscribe(v2, new SimpleInnerSubscriber(p2))), p2;
  }
  return u2.prototype.notifyNext = function() {
    this.values.clear();
  }, u2.prototype.notifyError = function(c) {
    this._error(c);
  }, u2.prototype._next = function(c) {
    this.keySelector ? this._useKeySelector(c) : this._finalizeNext(c, c);
  }, u2.prototype._useKeySelector = function(c) {
    var l2, v2 = this.destination;
    try {
      l2 = this.keySelector(c);
    } catch (p2) {
      v2.error(p2);
      return;
    }
    this._finalizeNext(l2, c);
  }, u2.prototype._finalizeNext = function(c, l2) {
    var v2 = this.values;
    v2.has(c) || (v2.add(c), this.destination.next(l2));
  }, u2;
}(SimpleOuterSubscriber);
function distinctUntilChanged(a420, u2) {
  return function(c) {
    return c.lift(new DistinctUntilChangedOperator(a420, u2));
  };
}
var DistinctUntilChangedOperator = /* @__PURE__ */ function() {
  function a420(u2, c) {
    this.compare = u2, this.keySelector = c;
  }
  return a420.prototype.call = function(u2, c) {
    return c.subscribe(new DistinctUntilChangedSubscriber(u2, this.compare, this.keySelector));
  }, a420;
}(), DistinctUntilChangedSubscriber = /* @__PURE__ */ function(a420) {
  __extends(u2, a420);
  function u2(c, l2, v2) {
    var p2 = a420.call(this, c) || this;
    return p2.keySelector = v2, p2.hasKey = false, typeof l2 == "function" && (p2.compare = l2), p2;
  }
  return u2.prototype.compare = function(c, l2) {
    return c === l2;
  }, u2.prototype._next = function(c) {
    var l2;
    try {
      var v2 = this.keySelector;
      l2 = v2 ? v2(c) : c;
    } catch (I2) {
      return this.destination.error(I2);
    }
    var p2 = false;
    if (this.hasKey)
      try {
        var _ = this.compare;
        p2 = _(this.key, l2);
      } catch (I2) {
        return this.destination.error(I2);
      }
    else
      this.hasKey = true;
    p2 || (this.key = l2, this.destination.next(c));
  }, u2;
}(Subscriber);
function distinctUntilKeyChanged(a420, u2) {
  return distinctUntilChanged(function(c, l2) {
    return u2 ? u2(c[a420], l2[a420]) : c[a420] === l2[a420];
  });
}
var ArgumentOutOfRangeErrorImpl = /* @__PURE__ */ function() {
  function a420() {
    return Error.call(this), this.message = "argument out of range", this.name = "ArgumentOutOfRangeError", this;
  }
  return a420.prototype = /* @__PURE__ */ Object.create(Error.prototype), a420;
}(), ArgumentOutOfRangeError = ArgumentOutOfRangeErrorImpl;
function filter(a420, u2) {
  return function(l2) {
    return l2.lift(new FilterOperator(a420, u2));
  };
}
var FilterOperator = /* @__PURE__ */ function() {
  function a420(u2, c) {
    this.predicate = u2, this.thisArg = c;
  }
  return a420.prototype.call = function(u2, c) {
    return c.subscribe(new FilterSubscriber(u2, this.predicate, this.thisArg));
  }, a420;
}(), FilterSubscriber = /* @__PURE__ */ function(a420) {
  __extends(u2, a420);
  function u2(c, l2, v2) {
    var p2 = a420.call(this, c) || this;
    return p2.predicate = l2, p2.thisArg = v2, p2.count = 0, p2;
  }
  return u2.prototype._next = function(c) {
    var l2;
    try {
      l2 = this.predicate.call(this.thisArg, c, this.count++);
    } catch (v2) {
      this.destination.error(v2);
      return;
    }
    l2 && this.destination.next(c);
  }, u2;
}(Subscriber), EmptyErrorImpl = /* @__PURE__ */ function() {
  function a420() {
    return Error.call(this), this.message = "no elements in sequence", this.name = "EmptyError", this;
  }
  return a420.prototype = /* @__PURE__ */ Object.create(Error.prototype), a420;
}(), EmptyError = EmptyErrorImpl;
function throwIfEmpty(a420) {
  return a420 === void 0 && (a420 = defaultErrorFactory), function(u2) {
    return u2.lift(new ThrowIfEmptyOperator(a420));
  };
}
var ThrowIfEmptyOperator = /* @__PURE__ */ function() {
  function a420(u2) {
    this.errorFactory = u2;
  }
  return a420.prototype.call = function(u2, c) {
    return c.subscribe(new ThrowIfEmptySubscriber(u2, this.errorFactory));
  }, a420;
}(), ThrowIfEmptySubscriber = /* @__PURE__ */ function(a420) {
  __extends(u2, a420);
  function u2(c, l2) {
    var v2 = a420.call(this, c) || this;
    return v2.errorFactory = l2, v2.hasValue = false, v2;
  }
  return u2.prototype._next = function(c) {
    this.hasValue = true, this.destination.next(c);
  }, u2.prototype._complete = function() {
    if (this.hasValue)
      return this.destination.complete();
    var c = void 0;
    try {
      c = this.errorFactory();
    } catch (l2) {
      c = l2;
    }
    this.destination.error(c);
  }, u2;
}(Subscriber);
function defaultErrorFactory() {
  return new EmptyError();
}
function take(a420) {
  return function(u2) {
    return a420 === 0 ? empty$1() : u2.lift(new TakeOperator(a420));
  };
}
var TakeOperator = /* @__PURE__ */ function() {
  function a420(u2) {
    if (this.total = u2, this.total < 0)
      throw new ArgumentOutOfRangeError();
  }
  return a420.prototype.call = function(u2, c) {
    return c.subscribe(new TakeSubscriber(u2, this.total));
  }, a420;
}(), TakeSubscriber = /* @__PURE__ */ function(a420) {
  __extends(u2, a420);
  function u2(c, l2) {
    var v2 = a420.call(this, c) || this;
    return v2.total = l2, v2.count = 0, v2;
  }
  return u2.prototype._next = function(c) {
    var l2 = this.total, v2 = ++this.count;
    v2 <= l2 && (this.destination.next(c), v2 === l2 && (this.destination.complete(), this.unsubscribe()));
  }, u2;
}(Subscriber);
function elementAt(a420, u2) {
  if (a420 < 0)
    throw new ArgumentOutOfRangeError();
  var c = arguments.length >= 2;
  return function(l2) {
    return l2.pipe(filter(function(v2, p2) {
      return p2 === a420;
    }), take(1), c ? defaultIfEmpty(u2) : throwIfEmpty(function() {
      return new ArgumentOutOfRangeError();
    }));
  };
}
function endWith() {
  for (var a420 = [], u2 = 0; u2 < arguments.length; u2++)
    a420[u2] = arguments[u2];
  return function(c) {
    return concat$1(c, of$1.apply(void 0, a420));
  };
}
function every(a420, u2) {
  return function(c) {
    return c.lift(new EveryOperator(a420, u2, c));
  };
}
var EveryOperator = /* @__PURE__ */ function() {
  function a420(u2, c, l2) {
    this.predicate = u2, this.thisArg = c, this.source = l2;
  }
  return a420.prototype.call = function(u2, c) {
    return c.subscribe(new EverySubscriber(u2, this.predicate, this.thisArg, this.source));
  }, a420;
}(), EverySubscriber = /* @__PURE__ */ function(a420) {
  __extends(u2, a420);
  function u2(c, l2, v2, p2) {
    var _ = a420.call(this, c) || this;
    return _.predicate = l2, _.thisArg = v2, _.source = p2, _.index = 0, _.thisArg = v2 || _, _;
  }
  return u2.prototype.notifyComplete = function(c) {
    this.destination.next(c), this.destination.complete();
  }, u2.prototype._next = function(c) {
    var l2 = false;
    try {
      l2 = this.predicate.call(this.thisArg, c, this.index++, this.source);
    } catch (v2) {
      this.destination.error(v2);
      return;
    }
    l2 || this.notifyComplete(false);
  }, u2.prototype._complete = function() {
    this.notifyComplete(true);
  }, u2;
}(Subscriber);
function exhaust() {
  return function(a420) {
    return a420.lift(new SwitchFirstOperator());
  };
}
var SwitchFirstOperator = /* @__PURE__ */ function() {
  function a420() {
  }
  return a420.prototype.call = function(u2, c) {
    return c.subscribe(new SwitchFirstSubscriber(u2));
  }, a420;
}(), SwitchFirstSubscriber = /* @__PURE__ */ function(a420) {
  __extends(u2, a420);
  function u2(c) {
    var l2 = a420.call(this, c) || this;
    return l2.hasCompleted = false, l2.hasSubscription = false, l2;
  }
  return u2.prototype._next = function(c) {
    this.hasSubscription || (this.hasSubscription = true, this.add(innerSubscribe(c, new SimpleInnerSubscriber(this))));
  }, u2.prototype._complete = function() {
    this.hasCompleted = true, this.hasSubscription || this.destination.complete();
  }, u2.prototype.notifyComplete = function() {
    this.hasSubscription = false, this.hasCompleted && this.destination.complete();
  }, u2;
}(SimpleOuterSubscriber);
function exhaustMap(a420, u2) {
  return u2 ? function(c) {
    return c.pipe(exhaustMap(function(l2, v2) {
      return from(a420(l2, v2)).pipe(map(function(p2, _) {
        return u2(l2, p2, v2, _);
      }));
    }));
  } : function(c) {
    return c.lift(new ExhaustMapOperator(a420));
  };
}
var ExhaustMapOperator = /* @__PURE__ */ function() {
  function a420(u2) {
    this.project = u2;
  }
  return a420.prototype.call = function(u2, c) {
    return c.subscribe(new ExhaustMapSubscriber(u2, this.project));
  }, a420;
}(), ExhaustMapSubscriber = /* @__PURE__ */ function(a420) {
  __extends(u2, a420);
  function u2(c, l2) {
    var v2 = a420.call(this, c) || this;
    return v2.project = l2, v2.hasSubscription = false, v2.hasCompleted = false, v2.index = 0, v2;
  }
  return u2.prototype._next = function(c) {
    this.hasSubscription || this.tryNext(c);
  }, u2.prototype.tryNext = function(c) {
    var l2, v2 = this.index++;
    try {
      l2 = this.project(c, v2);
    } catch (p2) {
      this.destination.error(p2);
      return;
    }
    this.hasSubscription = true, this._innerSub(l2);
  }, u2.prototype._innerSub = function(c) {
    var l2 = new SimpleInnerSubscriber(this), v2 = this.destination;
    v2.add(l2);
    var p2 = innerSubscribe(c, l2);
    p2 !== l2 && v2.add(p2);
  }, u2.prototype._complete = function() {
    this.hasCompleted = true, this.hasSubscription || this.destination.complete(), this.unsubscribe();
  }, u2.prototype.notifyNext = function(c) {
    this.destination.next(c);
  }, u2.prototype.notifyError = function(c) {
    this.destination.error(c);
  }, u2.prototype.notifyComplete = function() {
    this.hasSubscription = false, this.hasCompleted && this.destination.complete();
  }, u2;
}(SimpleOuterSubscriber);
function expand(a420, u2, c) {
  return u2 === void 0 && (u2 = Number.POSITIVE_INFINITY), u2 = (u2 || 0) < 1 ? Number.POSITIVE_INFINITY : u2, function(l2) {
    return l2.lift(new ExpandOperator(a420, u2, c));
  };
}
var ExpandOperator = /* @__PURE__ */ function() {
  function a420(u2, c, l2) {
    this.project = u2, this.concurrent = c, this.scheduler = l2;
  }
  return a420.prototype.call = function(u2, c) {
    return c.subscribe(new ExpandSubscriber(u2, this.project, this.concurrent, this.scheduler));
  }, a420;
}(), ExpandSubscriber = /* @__PURE__ */ function(a420) {
  __extends(u2, a420);
  function u2(c, l2, v2, p2) {
    var _ = a420.call(this, c) || this;
    return _.project = l2, _.concurrent = v2, _.scheduler = p2, _.index = 0, _.active = 0, _.hasCompleted = false, v2 < Number.POSITIVE_INFINITY && (_.buffer = []), _;
  }
  return u2.dispatch = function(c) {
    var l2 = c.subscriber, v2 = c.result, p2 = c.value, _ = c.index;
    l2.subscribeToProjection(v2, p2, _);
  }, u2.prototype._next = function(c) {
    var l2 = this.destination;
    if (l2.closed) {
      this._complete();
      return;
    }
    var v2 = this.index++;
    if (this.active < this.concurrent) {
      l2.next(c);
      try {
        var p2 = this.project, _ = p2(c, v2);
        if (!this.scheduler)
          this.subscribeToProjection(_, c, v2);
        else {
          var I2 = { subscriber: this, result: _, value: c, index: v2 }, P2 = this.destination;
          P2.add(this.scheduler.schedule(u2.dispatch, 0, I2));
        }
      } catch ($) {
        l2.error($);
      }
    } else
      this.buffer.push(c);
  }, u2.prototype.subscribeToProjection = function(c, l2, v2) {
    this.active++;
    var p2 = this.destination;
    p2.add(innerSubscribe(c, new SimpleInnerSubscriber(this)));
  }, u2.prototype._complete = function() {
    this.hasCompleted = true, this.hasCompleted && this.active === 0 && this.destination.complete(), this.unsubscribe();
  }, u2.prototype.notifyNext = function(c) {
    this._next(c);
  }, u2.prototype.notifyComplete = function() {
    var c = this.buffer;
    this.active--, c && c.length > 0 && this._next(c.shift()), this.hasCompleted && this.active === 0 && this.destination.complete();
  }, u2;
}(SimpleOuterSubscriber);
function finalize(a420) {
  return function(u2) {
    return u2.lift(new FinallyOperator(a420));
  };
}
var FinallyOperator = /* @__PURE__ */ function() {
  function a420(u2) {
    this.callback = u2;
  }
  return a420.prototype.call = function(u2, c) {
    return c.subscribe(new FinallySubscriber(u2, this.callback));
  }, a420;
}(), FinallySubscriber = /* @__PURE__ */ function(a420) {
  __extends(u2, a420);
  function u2(c, l2) {
    var v2 = a420.call(this, c) || this;
    return v2.add(new Subscription(l2)), v2;
  }
  return u2;
}(Subscriber);
function find$1(a420, u2) {
  if (typeof a420 != "function")
    throw new TypeError("predicate is not a function");
  return function(c) {
    return c.lift(new FindValueOperator(a420, c, false, u2));
  };
}
var FindValueOperator = /* @__PURE__ */ function() {
  function a420(u2, c, l2, v2) {
    this.predicate = u2, this.source = c, this.yieldIndex = l2, this.thisArg = v2;
  }
  return a420.prototype.call = function(u2, c) {
    return c.subscribe(new FindValueSubscriber(u2, this.predicate, this.source, this.yieldIndex, this.thisArg));
  }, a420;
}(), FindValueSubscriber = /* @__PURE__ */ function(a420) {
  __extends(u2, a420);
  function u2(c, l2, v2, p2, _) {
    var I2 = a420.call(this, c) || this;
    return I2.predicate = l2, I2.source = v2, I2.yieldIndex = p2, I2.thisArg = _, I2.index = 0, I2;
  }
  return u2.prototype.notifyComplete = function(c) {
    var l2 = this.destination;
    l2.next(c), l2.complete(), this.unsubscribe();
  }, u2.prototype._next = function(c) {
    var l2 = this, v2 = l2.predicate, p2 = l2.thisArg, _ = this.index++;
    try {
      var I2 = v2.call(p2 || this, c, _, this.source);
      I2 && this.notifyComplete(this.yieldIndex ? _ : c);
    } catch (P2) {
      this.destination.error(P2);
    }
  }, u2.prototype._complete = function() {
    this.notifyComplete(this.yieldIndex ? -1 : void 0);
  }, u2;
}(Subscriber);
function findIndex(a420, u2) {
  return function(c) {
    return c.lift(new FindValueOperator(a420, c, true, u2));
  };
}
function first(a420, u2) {
  var c = arguments.length >= 2;
  return function(l2) {
    return l2.pipe(a420 ? filter(function(v2, p2) {
      return a420(v2, p2, l2);
    }) : identity, take(1), c ? defaultIfEmpty(u2) : throwIfEmpty(function() {
      return new EmptyError();
    }));
  };
}
var ObjectUnsubscribedErrorImpl = /* @__PURE__ */ function() {
  function a420() {
    return Error.call(this), this.message = "object unsubscribed", this.name = "ObjectUnsubscribedError", this;
  }
  return a420.prototype = /* @__PURE__ */ Object.create(Error.prototype), a420;
}(), ObjectUnsubscribedError = ObjectUnsubscribedErrorImpl, SubjectSubscription = /* @__PURE__ */ function(a420) {
  __extends(u2, a420);
  function u2(c, l2) {
    var v2 = a420.call(this) || this;
    return v2.subject = c, v2.subscriber = l2, v2.closed = false, v2;
  }
  return u2.prototype.unsubscribe = function() {
    if (!this.closed) {
      this.closed = true;
      var c = this.subject, l2 = c.observers;
      if (this.subject = null, !(!l2 || l2.length === 0 || c.isStopped || c.closed)) {
        var v2 = l2.indexOf(this.subscriber);
        v2 !== -1 && l2.splice(v2, 1);
      }
    }
  }, u2;
}(Subscription), SubjectSubscriber = /* @__PURE__ */ function(a420) {
  __extends(u2, a420);
  function u2(c) {
    var l2 = a420.call(this, c) || this;
    return l2.destination = c, l2;
  }
  return u2;
}(Subscriber), Subject = /* @__PURE__ */ function(a420) {
  __extends(u2, a420);
  function u2() {
    var c = a420.call(this) || this;
    return c.observers = [], c.closed = false, c.isStopped = false, c.hasError = false, c.thrownError = null, c;
  }
  return u2.prototype[rxSubscriber] = function() {
    return new SubjectSubscriber(this);
  }, u2.prototype.lift = function(c) {
    var l2 = new AnonymousSubject(this, this);
    return l2.operator = c, l2;
  }, u2.prototype.next = function(c) {
    if (this.closed)
      throw new ObjectUnsubscribedError();
    if (!this.isStopped)
      for (var l2 = this.observers, v2 = l2.length, p2 = l2.slice(), _ = 0; _ < v2; _++)
        p2[_].next(c);
  }, u2.prototype.error = function(c) {
    if (this.closed)
      throw new ObjectUnsubscribedError();
    this.hasError = true, this.thrownError = c, this.isStopped = true;
    for (var l2 = this.observers, v2 = l2.length, p2 = l2.slice(), _ = 0; _ < v2; _++)
      p2[_].error(c);
    this.observers.length = 0;
  }, u2.prototype.complete = function() {
    if (this.closed)
      throw new ObjectUnsubscribedError();
    this.isStopped = true;
    for (var c = this.observers, l2 = c.length, v2 = c.slice(), p2 = 0; p2 < l2; p2++)
      v2[p2].complete();
    this.observers.length = 0;
  }, u2.prototype.unsubscribe = function() {
    this.isStopped = true, this.closed = true, this.observers = null;
  }, u2.prototype._trySubscribe = function(c) {
    if (this.closed)
      throw new ObjectUnsubscribedError();
    return a420.prototype._trySubscribe.call(this, c);
  }, u2.prototype._subscribe = function(c) {
    if (this.closed)
      throw new ObjectUnsubscribedError();
    return this.hasError ? (c.error(this.thrownError), Subscription.EMPTY) : this.isStopped ? (c.complete(), Subscription.EMPTY) : (this.observers.push(c), new SubjectSubscription(this, c));
  }, u2.prototype.asObservable = function() {
    var c = new Observable();
    return c.source = this, c;
  }, u2.create = function(c, l2) {
    return new AnonymousSubject(c, l2);
  }, u2;
}(Observable), AnonymousSubject = /* @__PURE__ */ function(a420) {
  __extends(u2, a420);
  function u2(c, l2) {
    var v2 = a420.call(this) || this;
    return v2.destination = c, v2.source = l2, v2;
  }
  return u2.prototype.next = function(c) {
    var l2 = this.destination;
    l2 && l2.next && l2.next(c);
  }, u2.prototype.error = function(c) {
    var l2 = this.destination;
    l2 && l2.error && this.destination.error(c);
  }, u2.prototype.complete = function() {
    var c = this.destination;
    c && c.complete && this.destination.complete();
  }, u2.prototype._subscribe = function(c) {
    var l2 = this.source;
    return l2 ? this.source.subscribe(c) : Subscription.EMPTY;
  }, u2;
}(Subject);
function groupBy(a420, u2, c, l2) {
  return function(v2) {
    return v2.lift(new GroupByOperator(a420, u2, c, l2));
  };
}
var GroupByOperator = /* @__PURE__ */ function() {
  function a420(u2, c, l2, v2) {
    this.keySelector = u2, this.elementSelector = c, this.durationSelector = l2, this.subjectSelector = v2;
  }
  return a420.prototype.call = function(u2, c) {
    return c.subscribe(new GroupBySubscriber(u2, this.keySelector, this.elementSelector, this.durationSelector, this.subjectSelector));
  }, a420;
}(), GroupBySubscriber = /* @__PURE__ */ function(a420) {
  __extends(u2, a420);
  function u2(c, l2, v2, p2, _) {
    var I2 = a420.call(this, c) || this;
    return I2.keySelector = l2, I2.elementSelector = v2, I2.durationSelector = p2, I2.subjectSelector = _, I2.groups = null, I2.attemptedToUnsubscribe = false, I2.count = 0, I2;
  }
  return u2.prototype._next = function(c) {
    var l2;
    try {
      l2 = this.keySelector(c);
    } catch (v2) {
      this.error(v2);
      return;
    }
    this._group(c, l2);
  }, u2.prototype._group = function(c, l2) {
    var v2 = this.groups;
    v2 || (v2 = this.groups = /* @__PURE__ */ new Map());
    var p2 = v2.get(l2), _;
    if (this.elementSelector)
      try {
        _ = this.elementSelector(c);
      } catch ($) {
        this.error($);
      }
    else
      _ = c;
    if (!p2) {
      p2 = this.subjectSelector ? this.subjectSelector() : new Subject(), v2.set(l2, p2);
      var I2 = new GroupedObservable(l2, p2, this);
      if (this.destination.next(I2), this.durationSelector) {
        var P2 = void 0;
        try {
          P2 = this.durationSelector(new GroupedObservable(l2, p2));
        } catch ($) {
          this.error($);
          return;
        }
        this.add(P2.subscribe(new GroupDurationSubscriber(l2, p2, this)));
      }
    }
    p2.closed || p2.next(_);
  }, u2.prototype._error = function(c) {
    var l2 = this.groups;
    l2 && (l2.forEach(function(v2, p2) {
      v2.error(c);
    }), l2.clear()), this.destination.error(c);
  }, u2.prototype._complete = function() {
    var c = this.groups;
    c && (c.forEach(function(l2, v2) {
      l2.complete();
    }), c.clear()), this.destination.complete();
  }, u2.prototype.removeGroup = function(c) {
    this.groups.delete(c);
  }, u2.prototype.unsubscribe = function() {
    this.closed || (this.attemptedToUnsubscribe = true, this.count === 0 && a420.prototype.unsubscribe.call(this));
  }, u2;
}(Subscriber), GroupDurationSubscriber = /* @__PURE__ */ function(a420) {
  __extends(u2, a420);
  function u2(c, l2, v2) {
    var p2 = a420.call(this, l2) || this;
    return p2.key = c, p2.group = l2, p2.parent = v2, p2;
  }
  return u2.prototype._next = function(c) {
    this.complete();
  }, u2.prototype._unsubscribe = function() {
    var c = this, l2 = c.parent, v2 = c.key;
    this.key = this.parent = null, l2 && l2.removeGroup(v2);
  }, u2;
}(Subscriber), GroupedObservable = /* @__PURE__ */ function(a420) {
  __extends(u2, a420);
  function u2(c, l2, v2) {
    var p2 = a420.call(this) || this;
    return p2.key = c, p2.groupSubject = l2, p2.refCountSubscription = v2, p2;
  }
  return u2.prototype._subscribe = function(c) {
    var l2 = new Subscription(), v2 = this, p2 = v2.refCountSubscription, _ = v2.groupSubject;
    return p2 && !p2.closed && l2.add(new InnerRefCountSubscription(p2)), l2.add(_.subscribe(c)), l2;
  }, u2;
}(Observable), InnerRefCountSubscription = /* @__PURE__ */ function(a420) {
  __extends(u2, a420);
  function u2(c) {
    var l2 = a420.call(this) || this;
    return l2.parent = c, c.count++, l2;
  }
  return u2.prototype.unsubscribe = function() {
    var c = this.parent;
    !c.closed && !this.closed && (a420.prototype.unsubscribe.call(this), c.count -= 1, c.count === 0 && c.attemptedToUnsubscribe && c.unsubscribe());
  }, u2;
}(Subscription);
function ignoreElements() {
  return function(u2) {
    return u2.lift(new IgnoreElementsOperator());
  };
}
var IgnoreElementsOperator = /* @__PURE__ */ function() {
  function a420() {
  }
  return a420.prototype.call = function(u2, c) {
    return c.subscribe(new IgnoreElementsSubscriber(u2));
  }, a420;
}(), IgnoreElementsSubscriber = /* @__PURE__ */ function(a420) {
  __extends(u2, a420);
  function u2() {
    return a420 !== null && a420.apply(this, arguments) || this;
  }
  return u2.prototype._next = function(c) {
  }, u2;
}(Subscriber);
function isEmpty() {
  return function(a420) {
    return a420.lift(new IsEmptyOperator());
  };
}
var IsEmptyOperator = /* @__PURE__ */ function() {
  function a420() {
  }
  return a420.prototype.call = function(u2, c) {
    return c.subscribe(new IsEmptySubscriber(u2));
  }, a420;
}(), IsEmptySubscriber = /* @__PURE__ */ function(a420) {
  __extends(u2, a420);
  function u2(c) {
    return a420.call(this, c) || this;
  }
  return u2.prototype.notifyComplete = function(c) {
    var l2 = this.destination;
    l2.next(c), l2.complete();
  }, u2.prototype._next = function(c) {
    this.notifyComplete(false);
  }, u2.prototype._complete = function() {
    this.notifyComplete(true);
  }, u2;
}(Subscriber);
function takeLast(a420) {
  return function(c) {
    return a420 === 0 ? empty$1() : c.lift(new TakeLastOperator(a420));
  };
}
var TakeLastOperator = /* @__PURE__ */ function() {
  function a420(u2) {
    if (this.total = u2, this.total < 0)
      throw new ArgumentOutOfRangeError();
  }
  return a420.prototype.call = function(u2, c) {
    return c.subscribe(new TakeLastSubscriber(u2, this.total));
  }, a420;
}(), TakeLastSubscriber = /* @__PURE__ */ function(a420) {
  __extends(u2, a420);
  function u2(c, l2) {
    var v2 = a420.call(this, c) || this;
    return v2.total = l2, v2.ring = new Array(), v2.count = 0, v2;
  }
  return u2.prototype._next = function(c) {
    var l2 = this.ring, v2 = this.total, p2 = this.count++;
    if (l2.length < v2)
      l2.push(c);
    else {
      var _ = p2 % v2;
      l2[_] = c;
    }
  }, u2.prototype._complete = function() {
    var c = this.destination, l2 = this.count;
    if (l2 > 0)
      for (var v2 = this.count >= this.total ? this.total : this.count, p2 = this.ring, _ = 0; _ < v2; _++) {
        var I2 = l2++ % v2;
        c.next(p2[I2]);
      }
    c.complete();
  }, u2;
}(Subscriber);
function last(a420, u2) {
  var c = arguments.length >= 2;
  return function(l2) {
    return l2.pipe(a420 ? filter(function(v2, p2) {
      return a420(v2, p2, l2);
    }) : identity, takeLast(1), c ? defaultIfEmpty(u2) : throwIfEmpty(function() {
      return new EmptyError();
    }));
  };
}
function mapTo(a420) {
  return function(u2) {
    return u2.lift(new MapToOperator(a420));
  };
}
var MapToOperator = /* @__PURE__ */ function() {
  function a420(u2) {
    this.value = u2;
  }
  return a420.prototype.call = function(u2, c) {
    return c.subscribe(new MapToSubscriber(u2, this.value));
  }, a420;
}(), MapToSubscriber = /* @__PURE__ */ function(a420) {
  __extends(u2, a420);
  function u2(c, l2) {
    var v2 = a420.call(this, c) || this;
    return v2.value = l2, v2;
  }
  return u2.prototype._next = function(c) {
    this.destination.next(this.value);
  }, u2;
}(Subscriber);
function materialize() {
  return function(u2) {
    return u2.lift(new MaterializeOperator());
  };
}
var MaterializeOperator = /* @__PURE__ */ function() {
  function a420() {
  }
  return a420.prototype.call = function(u2, c) {
    return c.subscribe(new MaterializeSubscriber(u2));
  }, a420;
}(), MaterializeSubscriber = /* @__PURE__ */ function(a420) {
  __extends(u2, a420);
  function u2(c) {
    return a420.call(this, c) || this;
  }
  return u2.prototype._next = function(c) {
    this.destination.next(Notification.createNext(c));
  }, u2.prototype._error = function(c) {
    var l2 = this.destination;
    l2.next(Notification.createError(c)), l2.complete();
  }, u2.prototype._complete = function() {
    var c = this.destination;
    c.next(Notification.createComplete()), c.complete();
  }, u2;
}(Subscriber);
function scan(a420, u2) {
  var c = false;
  return arguments.length >= 2 && (c = true), function(v2) {
    return v2.lift(new ScanOperator(a420, u2, c));
  };
}
var ScanOperator = /* @__PURE__ */ function() {
  function a420(u2, c, l2) {
    l2 === void 0 && (l2 = false), this.accumulator = u2, this.seed = c, this.hasSeed = l2;
  }
  return a420.prototype.call = function(u2, c) {
    return c.subscribe(new ScanSubscriber(u2, this.accumulator, this.seed, this.hasSeed));
  }, a420;
}(), ScanSubscriber = /* @__PURE__ */ function(a420) {
  __extends(u2, a420);
  function u2(c, l2, v2, p2) {
    var _ = a420.call(this, c) || this;
    return _.accumulator = l2, _._seed = v2, _.hasSeed = p2, _.index = 0, _;
  }
  return Object.defineProperty(u2.prototype, "seed", { get: function() {
    return this._seed;
  }, set: function(c) {
    this.hasSeed = true, this._seed = c;
  }, enumerable: true, configurable: true }), u2.prototype._next = function(c) {
    if (!this.hasSeed)
      this.seed = c, this.destination.next(c);
    else
      return this._tryNext(c);
  }, u2.prototype._tryNext = function(c) {
    var l2 = this.index++, v2;
    try {
      v2 = this.accumulator(this.seed, c, l2);
    } catch (p2) {
      this.destination.error(p2);
    }
    this.seed = v2, this.destination.next(v2);
  }, u2;
}(Subscriber);
function reduce(a420, u2) {
  return arguments.length >= 2 ? function(l2) {
    return pipe$2(scan(a420, u2), takeLast(1), defaultIfEmpty(u2))(l2);
  } : function(l2) {
    return pipe$2(scan(function(v2, p2, _) {
      return a420(v2, p2, _ + 1);
    }), takeLast(1))(l2);
  };
}
function max$1(a420) {
  var u2 = typeof a420 == "function" ? function(c, l2) {
    return a420(c, l2) > 0 ? c : l2;
  } : function(c, l2) {
    return c > l2 ? c : l2;
  };
  return reduce(u2);
}
function merge$2() {
  for (var a420 = [], u2 = 0; u2 < arguments.length; u2++)
    a420[u2] = arguments[u2];
  var c = Number.POSITIVE_INFINITY, l2 = null, v2 = a420[a420.length - 1];
  return isScheduler(v2) ? (l2 = a420.pop(), a420.length > 1 && typeof a420[a420.length - 1] == "number" && (c = a420.pop())) : typeof v2 == "number" && (c = a420.pop()), l2 === null && a420.length === 1 && a420[0] instanceof Observable ? a420[0] : mergeAll(c)(fromArray$1(a420, l2));
}
function merge$1() {
  for (var a420 = [], u2 = 0; u2 < arguments.length; u2++)
    a420[u2] = arguments[u2];
  return function(c) {
    return c.lift.call(merge$2.apply(void 0, [c].concat(a420)));
  };
}
function mergeMapTo(a420, u2, c) {
  return c === void 0 && (c = Number.POSITIVE_INFINITY), typeof u2 == "function" ? mergeMap(function() {
    return a420;
  }, u2, c) : (typeof u2 == "number" && (c = u2), mergeMap(function() {
    return a420;
  }, c));
}
function mergeScan(a420, u2, c) {
  return c === void 0 && (c = Number.POSITIVE_INFINITY), function(l2) {
    return l2.lift(new MergeScanOperator(a420, u2, c));
  };
}
var MergeScanOperator = /* @__PURE__ */ function() {
  function a420(u2, c, l2) {
    this.accumulator = u2, this.seed = c, this.concurrent = l2;
  }
  return a420.prototype.call = function(u2, c) {
    return c.subscribe(new MergeScanSubscriber(u2, this.accumulator, this.seed, this.concurrent));
  }, a420;
}(), MergeScanSubscriber = /* @__PURE__ */ function(a420) {
  __extends(u2, a420);
  function u2(c, l2, v2, p2) {
    var _ = a420.call(this, c) || this;
    return _.accumulator = l2, _.acc = v2, _.concurrent = p2, _.hasValue = false, _.hasCompleted = false, _.buffer = [], _.active = 0, _.index = 0, _;
  }
  return u2.prototype._next = function(c) {
    if (this.active < this.concurrent) {
      var l2 = this.index++, v2 = this.destination, p2 = void 0;
      try {
        var _ = this.accumulator;
        p2 = _(this.acc, c, l2);
      } catch (I2) {
        return v2.error(I2);
      }
      this.active++, this._innerSub(p2);
    } else
      this.buffer.push(c);
  }, u2.prototype._innerSub = function(c) {
    var l2 = new SimpleInnerSubscriber(this), v2 = this.destination;
    v2.add(l2);
    var p2 = innerSubscribe(c, l2);
    p2 !== l2 && v2.add(p2);
  }, u2.prototype._complete = function() {
    this.hasCompleted = true, this.active === 0 && this.buffer.length === 0 && (this.hasValue === false && this.destination.next(this.acc), this.destination.complete()), this.unsubscribe();
  }, u2.prototype.notifyNext = function(c) {
    var l2 = this.destination;
    this.acc = c, this.hasValue = true, l2.next(c);
  }, u2.prototype.notifyComplete = function() {
    var c = this.buffer;
    this.active--, c.length > 0 ? this._next(c.shift()) : this.active === 0 && this.hasCompleted && (this.hasValue === false && this.destination.next(this.acc), this.destination.complete());
  }, u2;
}(SimpleOuterSubscriber);
function min(a420) {
  var u2 = typeof a420 == "function" ? function(c, l2) {
    return a420(c, l2) < 0 ? c : l2;
  } : function(c, l2) {
    return c < l2 ? c : l2;
  };
  return reduce(u2);
}
function refCount() {
  return function(u2) {
    return u2.lift(new RefCountOperator(u2));
  };
}
var RefCountOperator = /* @__PURE__ */ function() {
  function a420(u2) {
    this.connectable = u2;
  }
  return a420.prototype.call = function(u2, c) {
    var l2 = this.connectable;
    l2._refCount++;
    var v2 = new RefCountSubscriber(u2, l2), p2 = c.subscribe(v2);
    return v2.closed || (v2.connection = l2.connect()), p2;
  }, a420;
}(), RefCountSubscriber = /* @__PURE__ */ function(a420) {
  __extends(u2, a420);
  function u2(c, l2) {
    var v2 = a420.call(this, c) || this;
    return v2.connectable = l2, v2;
  }
  return u2.prototype._unsubscribe = function() {
    var c = this.connectable;
    if (!c) {
      this.connection = null;
      return;
    }
    this.connectable = null;
    var l2 = c._refCount;
    if (l2 <= 0) {
      this.connection = null;
      return;
    }
    if (c._refCount = l2 - 1, l2 > 1) {
      this.connection = null;
      return;
    }
    var v2 = this.connection, p2 = c._connection;
    this.connection = null, p2 && (!v2 || p2 === v2) && p2.unsubscribe();
  }, u2;
}(Subscriber), ConnectableObservable = /* @__PURE__ */ function(a420) {
  __extends(u2, a420);
  function u2(c, l2) {
    var v2 = a420.call(this) || this;
    return v2.source = c, v2.subjectFactory = l2, v2._refCount = 0, v2._isComplete = false, v2;
  }
  return u2.prototype._subscribe = function(c) {
    return this.getSubject().subscribe(c);
  }, u2.prototype.getSubject = function() {
    var c = this._subject;
    return (!c || c.isStopped) && (this._subject = this.subjectFactory()), this._subject;
  }, u2.prototype.connect = function() {
    var c = this._connection;
    return c || (this._isComplete = false, c = this._connection = new Subscription(), c.add(this.source.subscribe(new ConnectableSubscriber(this.getSubject(), this))), c.closed && (this._connection = null, c = Subscription.EMPTY)), c;
  }, u2.prototype.refCount = function() {
    return refCount()(this);
  }, u2;
}(Observable), connectableObservableDescriptor = /* @__PURE__ */ function() {
  var a420 = ConnectableObservable.prototype;
  return { operator: { value: null }, _refCount: { value: 0, writable: true }, _subject: { value: null, writable: true }, _connection: { value: null, writable: true }, _subscribe: { value: a420._subscribe }, _isComplete: { value: a420._isComplete, writable: true }, getSubject: { value: a420.getSubject }, connect: { value: a420.connect }, refCount: { value: a420.refCount } };
}(), ConnectableSubscriber = /* @__PURE__ */ function(a420) {
  __extends(u2, a420);
  function u2(c, l2) {
    var v2 = a420.call(this, c) || this;
    return v2.connectable = l2, v2;
  }
  return u2.prototype._error = function(c) {
    this._unsubscribe(), a420.prototype._error.call(this, c);
  }, u2.prototype._complete = function() {
    this.connectable._isComplete = true, this._unsubscribe(), a420.prototype._complete.call(this);
  }, u2.prototype._unsubscribe = function() {
    var c = this.connectable;
    if (c) {
      this.connectable = null;
      var l2 = c._connection;
      c._refCount = 0, c._subject = null, c._connection = null, l2 && l2.unsubscribe();
    }
  }, u2;
}(SubjectSubscriber);
function multicast(a420, u2) {
  return function(l2) {
    var v2;
    if (typeof a420 == "function" ? v2 = a420 : v2 = function() {
      return a420;
    }, typeof u2 == "function")
      return l2.lift(new MulticastOperator(v2, u2));
    var p2 = Object.create(l2, connectableObservableDescriptor);
    return p2.source = l2, p2.subjectFactory = v2, p2;
  };
}
var MulticastOperator = /* @__PURE__ */ function() {
  function a420(u2, c) {
    this.subjectFactory = u2, this.selector = c;
  }
  return a420.prototype.call = function(u2, c) {
    var l2 = this.selector, v2 = this.subjectFactory(), p2 = l2(v2).subscribe(u2);
    return p2.add(c.subscribe(v2)), p2;
  }, a420;
}();
function observeOn(a420, u2) {
  return u2 === void 0 && (u2 = 0), function(l2) {
    return l2.lift(new ObserveOnOperator(a420, u2));
  };
}
var ObserveOnOperator = /* @__PURE__ */ function() {
  function a420(u2, c) {
    c === void 0 && (c = 0), this.scheduler = u2, this.delay = c;
  }
  return a420.prototype.call = function(u2, c) {
    return c.subscribe(new ObserveOnSubscriber(u2, this.scheduler, this.delay));
  }, a420;
}(), ObserveOnSubscriber = /* @__PURE__ */ function(a420) {
  __extends(u2, a420);
  function u2(c, l2, v2) {
    v2 === void 0 && (v2 = 0);
    var p2 = a420.call(this, c) || this;
    return p2.scheduler = l2, p2.delay = v2, p2;
  }
  return u2.dispatch = function(c) {
    var l2 = c.notification, v2 = c.destination;
    l2.observe(v2), this.unsubscribe();
  }, u2.prototype.scheduleMessage = function(c) {
    var l2 = this.destination;
    l2.add(this.scheduler.schedule(u2.dispatch, this.delay, new ObserveOnMessage(c, this.destination)));
  }, u2.prototype._next = function(c) {
    this.scheduleMessage(Notification.createNext(c));
  }, u2.prototype._error = function(c) {
    this.scheduleMessage(Notification.createError(c)), this.unsubscribe();
  }, u2.prototype._complete = function() {
    this.scheduleMessage(Notification.createComplete()), this.unsubscribe();
  }, u2;
}(Subscriber), ObserveOnMessage = /* @__PURE__ */ function() {
  function a420(u2, c) {
    this.notification = u2, this.destination = c;
  }
  return a420;
}();
function onErrorResumeNext() {
  for (var a420 = [], u2 = 0; u2 < arguments.length; u2++)
    a420[u2] = arguments[u2];
  return a420.length === 1 && isArray$4(a420[0]) && (a420 = a420[0]), function(c) {
    return c.lift(new OnErrorResumeNextOperator(a420));
  };
}
var OnErrorResumeNextOperator = /* @__PURE__ */ function() {
  function a420(u2) {
    this.nextSources = u2;
  }
  return a420.prototype.call = function(u2, c) {
    return c.subscribe(new OnErrorResumeNextSubscriber(u2, this.nextSources));
  }, a420;
}(), OnErrorResumeNextSubscriber = /* @__PURE__ */ function(a420) {
  __extends(u2, a420);
  function u2(c, l2) {
    var v2 = a420.call(this, c) || this;
    return v2.destination = c, v2.nextSources = l2, v2;
  }
  return u2.prototype.notifyError = function() {
    this.subscribeToNextSource();
  }, u2.prototype.notifyComplete = function() {
    this.subscribeToNextSource();
  }, u2.prototype._error = function(c) {
    this.subscribeToNextSource(), this.unsubscribe();
  }, u2.prototype._complete = function() {
    this.subscribeToNextSource(), this.unsubscribe();
  }, u2.prototype.subscribeToNextSource = function() {
    var c = this.nextSources.shift();
    if (c) {
      var l2 = new SimpleInnerSubscriber(this), v2 = this.destination;
      v2.add(l2);
      var p2 = innerSubscribe(c, l2);
      p2 !== l2 && v2.add(p2);
    } else
      this.destination.complete();
  }, u2;
}(SimpleOuterSubscriber);
function pairwise() {
  return function(a420) {
    return a420.lift(new PairwiseOperator());
  };
}
var PairwiseOperator = /* @__PURE__ */ function() {
  function a420() {
  }
  return a420.prototype.call = function(u2, c) {
    return c.subscribe(new PairwiseSubscriber(u2));
  }, a420;
}(), PairwiseSubscriber = /* @__PURE__ */ function(a420) {
  __extends(u2, a420);
  function u2(c) {
    var l2 = a420.call(this, c) || this;
    return l2.hasPrev = false, l2;
  }
  return u2.prototype._next = function(c) {
    var l2;
    this.hasPrev ? l2 = [this.prev, c] : this.hasPrev = true, this.prev = c, l2 && this.destination.next(l2);
  }, u2;
}(Subscriber);
function not(a420, u2) {
  function c() {
    return !c.pred.apply(c.thisArg, arguments);
  }
  return c.pred = a420, c.thisArg = u2, c;
}
function partition(a420, u2) {
  return function(c) {
    return [filter(a420, u2)(c), filter(not(a420, u2))(c)];
  };
}
function pluck() {
  for (var a420 = [], u2 = 0; u2 < arguments.length; u2++)
    a420[u2] = arguments[u2];
  var c = a420.length;
  if (c === 0)
    throw new Error("list of properties cannot be empty.");
  return function(l2) {
    return map(plucker(a420, c))(l2);
  };
}
function plucker(a420, u2) {
  var c = function(l2) {
    for (var v2 = l2, p2 = 0; p2 < u2; p2++) {
      var _ = v2 != null ? v2[a420[p2]] : void 0;
      if (_ !== void 0)
        v2 = _;
      else
        return;
    }
    return v2;
  };
  return c;
}
function publish(a420) {
  return a420 ? multicast(function() {
    return new Subject();
  }, a420) : multicast(new Subject());
}
var BehaviorSubject = /* @__PURE__ */ function(a420) {
  __extends(u2, a420);
  function u2(c) {
    var l2 = a420.call(this) || this;
    return l2._value = c, l2;
  }
  return Object.defineProperty(u2.prototype, "value", { get: function() {
    return this.getValue();
  }, enumerable: true, configurable: true }), u2.prototype._subscribe = function(c) {
    var l2 = a420.prototype._subscribe.call(this, c);
    return l2 && !l2.closed && c.next(this._value), l2;
  }, u2.prototype.getValue = function() {
    if (this.hasError)
      throw this.thrownError;
    if (this.closed)
      throw new ObjectUnsubscribedError();
    return this._value;
  }, u2.prototype.next = function(c) {
    a420.prototype.next.call(this, this._value = c);
  }, u2;
}(Subject);
function publishBehavior(a420) {
  return function(u2) {
    return multicast(new BehaviorSubject(a420))(u2);
  };
}
var AsyncSubject = /* @__PURE__ */ function(a420) {
  __extends(u2, a420);
  function u2() {
    var c = a420 !== null && a420.apply(this, arguments) || this;
    return c.value = null, c.hasNext = false, c.hasCompleted = false, c;
  }
  return u2.prototype._subscribe = function(c) {
    return this.hasError ? (c.error(this.thrownError), Subscription.EMPTY) : this.hasCompleted && this.hasNext ? (c.next(this.value), c.complete(), Subscription.EMPTY) : a420.prototype._subscribe.call(this, c);
  }, u2.prototype.next = function(c) {
    this.hasCompleted || (this.value = c, this.hasNext = true);
  }, u2.prototype.error = function(c) {
    this.hasCompleted || a420.prototype.error.call(this, c);
  }, u2.prototype.complete = function() {
    this.hasCompleted = true, this.hasNext && a420.prototype.next.call(this, this.value), a420.prototype.complete.call(this);
  }, u2;
}(Subject);
function publishLast() {
  return function(a420) {
    return multicast(new AsyncSubject())(a420);
  };
}
var QueueAction = /* @__PURE__ */ function(a420) {
  __extends(u2, a420);
  function u2(c, l2) {
    var v2 = a420.call(this, c, l2) || this;
    return v2.scheduler = c, v2.work = l2, v2;
  }
  return u2.prototype.schedule = function(c, l2) {
    return l2 === void 0 && (l2 = 0), l2 > 0 ? a420.prototype.schedule.call(this, c, l2) : (this.delay = l2, this.state = c, this.scheduler.flush(this), this);
  }, u2.prototype.execute = function(c, l2) {
    return l2 > 0 || this.closed ? a420.prototype.execute.call(this, c, l2) : this._execute(c, l2);
  }, u2.prototype.requestAsyncId = function(c, l2, v2) {
    return v2 === void 0 && (v2 = 0), v2 !== null && v2 > 0 || v2 === null && this.delay > 0 ? a420.prototype.requestAsyncId.call(this, c, l2, v2) : c.flush(this);
  }, u2;
}(AsyncAction), QueueScheduler = /* @__PURE__ */ function(a420) {
  __extends(u2, a420);
  function u2() {
    return a420 !== null && a420.apply(this, arguments) || this;
  }
  return u2;
}(AsyncScheduler), queueScheduler = /* @__PURE__ */ new QueueScheduler(QueueAction), queue$1 = queueScheduler, ReplaySubject = /* @__PURE__ */ function(a420) {
  __extends(u2, a420);
  function u2(c, l2, v2) {
    c === void 0 && (c = Number.POSITIVE_INFINITY), l2 === void 0 && (l2 = Number.POSITIVE_INFINITY);
    var p2 = a420.call(this) || this;
    return p2.scheduler = v2, p2._events = [], p2._infiniteTimeWindow = false, p2._bufferSize = c < 1 ? 1 : c, p2._windowTime = l2 < 1 ? 1 : l2, l2 === Number.POSITIVE_INFINITY ? (p2._infiniteTimeWindow = true, p2.next = p2.nextInfiniteTimeWindow) : p2.next = p2.nextTimeWindow, p2;
  }
  return u2.prototype.nextInfiniteTimeWindow = function(c) {
    if (!this.isStopped) {
      var l2 = this._events;
      l2.push(c), l2.length > this._bufferSize && l2.shift();
    }
    a420.prototype.next.call(this, c);
  }, u2.prototype.nextTimeWindow = function(c) {
    this.isStopped || (this._events.push(new ReplayEvent(this._getNow(), c)), this._trimBufferThenGetEvents()), a420.prototype.next.call(this, c);
  }, u2.prototype._subscribe = function(c) {
    var l2 = this._infiniteTimeWindow, v2 = l2 ? this._events : this._trimBufferThenGetEvents(), p2 = this.scheduler, _ = v2.length, I2;
    if (this.closed)
      throw new ObjectUnsubscribedError();
    if (this.isStopped || this.hasError ? I2 = Subscription.EMPTY : (this.observers.push(c), I2 = new SubjectSubscription(this, c)), p2 && c.add(c = new ObserveOnSubscriber(c, p2)), l2)
      for (var P2 = 0; P2 < _ && !c.closed; P2++)
        c.next(v2[P2]);
    else
      for (var P2 = 0; P2 < _ && !c.closed; P2++)
        c.next(v2[P2].value);
    return this.hasError ? c.error(this.thrownError) : this.isStopped && c.complete(), I2;
  }, u2.prototype._getNow = function() {
    return (this.scheduler || queue$1).now();
  }, u2.prototype._trimBufferThenGetEvents = function() {
    for (var c = this._getNow(), l2 = this._bufferSize, v2 = this._windowTime, p2 = this._events, _ = p2.length, I2 = 0; I2 < _ && !(c - p2[I2].time < v2); )
      I2++;
    return _ > l2 && (I2 = Math.max(I2, _ - l2)), I2 > 0 && p2.splice(0, I2), p2;
  }, u2;
}(Subject), ReplayEvent = /* @__PURE__ */ function() {
  function a420(u2, c) {
    this.time = u2, this.value = c;
  }
  return a420;
}();
function publishReplay(a420, u2, c, l2) {
  c && typeof c != "function" && (l2 = c);
  var v2 = typeof c == "function" ? c : void 0, p2 = new ReplaySubject(a420, u2, l2);
  return function(_) {
    return multicast(function() {
      return p2;
    }, v2)(_);
  };
}
function race$1() {
  for (var a420 = [], u2 = 0; u2 < arguments.length; u2++)
    a420[u2] = arguments[u2];
  if (a420.length === 1)
    if (isArray$4(a420[0]))
      a420 = a420[0];
    else
      return a420[0];
  return fromArray$1(a420, void 0).lift(new RaceOperator());
}
var RaceOperator = /* @__PURE__ */ function() {
  function a420() {
  }
  return a420.prototype.call = function(u2, c) {
    return c.subscribe(new RaceSubscriber(u2));
  }, a420;
}(), RaceSubscriber = /* @__PURE__ */ function(a420) {
  __extends(u2, a420);
  function u2(c) {
    var l2 = a420.call(this, c) || this;
    return l2.hasFirst = false, l2.observables = [], l2.subscriptions = [], l2;
  }
  return u2.prototype._next = function(c) {
    this.observables.push(c);
  }, u2.prototype._complete = function() {
    var c = this.observables, l2 = c.length;
    if (l2 === 0)
      this.destination.complete();
    else {
      for (var v2 = 0; v2 < l2 && !this.hasFirst; v2++) {
        var p2 = c[v2], _ = subscribeToResult(this, p2, void 0, v2);
        this.subscriptions && this.subscriptions.push(_), this.add(_);
      }
      this.observables = null;
    }
  }, u2.prototype.notifyNext = function(c, l2, v2) {
    if (!this.hasFirst) {
      this.hasFirst = true;
      for (var p2 = 0; p2 < this.subscriptions.length; p2++)
        if (p2 !== v2) {
          var _ = this.subscriptions[p2];
          _.unsubscribe(), this.remove(_);
        }
      this.subscriptions = null;
    }
    this.destination.next(l2);
  }, u2;
}(OuterSubscriber);
function race() {
  for (var a420 = [], u2 = 0; u2 < arguments.length; u2++)
    a420[u2] = arguments[u2];
  return function(l2) {
    return a420.length === 1 && isArray$4(a420[0]) && (a420 = a420[0]), l2.lift.call(race$1.apply(void 0, [l2].concat(a420)));
  };
}
function repeat(a420) {
  return a420 === void 0 && (a420 = -1), function(u2) {
    return a420 === 0 ? empty$1() : a420 < 0 ? u2.lift(new RepeatOperator(-1, u2)) : u2.lift(new RepeatOperator(a420 - 1, u2));
  };
}
var RepeatOperator = /* @__PURE__ */ function() {
  function a420(u2, c) {
    this.count = u2, this.source = c;
  }
  return a420.prototype.call = function(u2, c) {
    return c.subscribe(new RepeatSubscriber(u2, this.count, this.source));
  }, a420;
}(), RepeatSubscriber = /* @__PURE__ */ function(a420) {
  __extends(u2, a420);
  function u2(c, l2, v2) {
    var p2 = a420.call(this, c) || this;
    return p2.count = l2, p2.source = v2, p2;
  }
  return u2.prototype.complete = function() {
    if (!this.isStopped) {
      var c = this, l2 = c.source, v2 = c.count;
      if (v2 === 0)
        return a420.prototype.complete.call(this);
      v2 > -1 && (this.count = v2 - 1), l2.subscribe(this._unsubscribeAndRecycle());
    }
  }, u2;
}(Subscriber);
function repeatWhen(a420) {
  return function(u2) {
    return u2.lift(new RepeatWhenOperator(a420));
  };
}
var RepeatWhenOperator = /* @__PURE__ */ function() {
  function a420(u2) {
    this.notifier = u2;
  }
  return a420.prototype.call = function(u2, c) {
    return c.subscribe(new RepeatWhenSubscriber(u2, this.notifier, c));
  }, a420;
}(), RepeatWhenSubscriber = /* @__PURE__ */ function(a420) {
  __extends(u2, a420);
  function u2(c, l2, v2) {
    var p2 = a420.call(this, c) || this;
    return p2.notifier = l2, p2.source = v2, p2.sourceIsBeingSubscribedTo = true, p2;
  }
  return u2.prototype.notifyNext = function() {
    this.sourceIsBeingSubscribedTo = true, this.source.subscribe(this);
  }, u2.prototype.notifyComplete = function() {
    if (this.sourceIsBeingSubscribedTo === false)
      return a420.prototype.complete.call(this);
  }, u2.prototype.complete = function() {
    if (this.sourceIsBeingSubscribedTo = false, !this.isStopped) {
      if (this.retries || this.subscribeToRetries(), !this.retriesSubscription || this.retriesSubscription.closed)
        return a420.prototype.complete.call(this);
      this._unsubscribeAndRecycle(), this.notifications.next(void 0);
    }
  }, u2.prototype._unsubscribe = function() {
    var c = this, l2 = c.notifications, v2 = c.retriesSubscription;
    l2 && (l2.unsubscribe(), this.notifications = void 0), v2 && (v2.unsubscribe(), this.retriesSubscription = void 0), this.retries = void 0;
  }, u2.prototype._unsubscribeAndRecycle = function() {
    var c = this._unsubscribe;
    return this._unsubscribe = null, a420.prototype._unsubscribeAndRecycle.call(this), this._unsubscribe = c, this;
  }, u2.prototype.subscribeToRetries = function() {
    this.notifications = new Subject();
    var c;
    try {
      var l2 = this.notifier;
      c = l2(this.notifications);
    } catch {
      return a420.prototype.complete.call(this);
    }
    this.retries = c, this.retriesSubscription = innerSubscribe(c, new SimpleInnerSubscriber(this));
  }, u2;
}(SimpleOuterSubscriber);
function retry(a420) {
  return a420 === void 0 && (a420 = -1), function(u2) {
    return u2.lift(new RetryOperator(a420, u2));
  };
}
var RetryOperator = /* @__PURE__ */ function() {
  function a420(u2, c) {
    this.count = u2, this.source = c;
  }
  return a420.prototype.call = function(u2, c) {
    return c.subscribe(new RetrySubscriber(u2, this.count, this.source));
  }, a420;
}(), RetrySubscriber = /* @__PURE__ */ function(a420) {
  __extends(u2, a420);
  function u2(c, l2, v2) {
    var p2 = a420.call(this, c) || this;
    return p2.count = l2, p2.source = v2, p2;
  }
  return u2.prototype.error = function(c) {
    if (!this.isStopped) {
      var l2 = this, v2 = l2.source, p2 = l2.count;
      if (p2 === 0)
        return a420.prototype.error.call(this, c);
      p2 > -1 && (this.count = p2 - 1), v2.subscribe(this._unsubscribeAndRecycle());
    }
  }, u2;
}(Subscriber);
function retryWhen(a420) {
  return function(u2) {
    return u2.lift(new RetryWhenOperator(a420, u2));
  };
}
var RetryWhenOperator = /* @__PURE__ */ function() {
  function a420(u2, c) {
    this.notifier = u2, this.source = c;
  }
  return a420.prototype.call = function(u2, c) {
    return c.subscribe(new RetryWhenSubscriber(u2, this.notifier, this.source));
  }, a420;
}(), RetryWhenSubscriber = /* @__PURE__ */ function(a420) {
  __extends(u2, a420);
  function u2(c, l2, v2) {
    var p2 = a420.call(this, c) || this;
    return p2.notifier = l2, p2.source = v2, p2;
  }
  return u2.prototype.error = function(c) {
    if (!this.isStopped) {
      var l2 = this.errors, v2 = this.retries, p2 = this.retriesSubscription;
      if (v2)
        this.errors = void 0, this.retriesSubscription = void 0;
      else {
        l2 = new Subject();
        try {
          var _ = this.notifier;
          v2 = _(l2);
        } catch (I2) {
          return a420.prototype.error.call(this, I2);
        }
        p2 = innerSubscribe(v2, new SimpleInnerSubscriber(this));
      }
      this._unsubscribeAndRecycle(), this.errors = l2, this.retries = v2, this.retriesSubscription = p2, l2.next(c);
    }
  }, u2.prototype._unsubscribe = function() {
    var c = this, l2 = c.errors, v2 = c.retriesSubscription;
    l2 && (l2.unsubscribe(), this.errors = void 0), v2 && (v2.unsubscribe(), this.retriesSubscription = void 0), this.retries = void 0;
  }, u2.prototype.notifyNext = function() {
    var c = this._unsubscribe;
    this._unsubscribe = null, this._unsubscribeAndRecycle(), this._unsubscribe = c, this.source.subscribe(this);
  }, u2;
}(SimpleOuterSubscriber);
function sample(a420) {
  return function(u2) {
    return u2.lift(new SampleOperator(a420));
  };
}
var SampleOperator = /* @__PURE__ */ function() {
  function a420(u2) {
    this.notifier = u2;
  }
  return a420.prototype.call = function(u2, c) {
    var l2 = new SampleSubscriber(u2), v2 = c.subscribe(l2);
    return v2.add(innerSubscribe(this.notifier, new SimpleInnerSubscriber(l2))), v2;
  }, a420;
}(), SampleSubscriber = /* @__PURE__ */ function(a420) {
  __extends(u2, a420);
  function u2() {
    var c = a420 !== null && a420.apply(this, arguments) || this;
    return c.hasValue = false, c;
  }
  return u2.prototype._next = function(c) {
    this.value = c, this.hasValue = true;
  }, u2.prototype.notifyNext = function() {
    this.emitValue();
  }, u2.prototype.notifyComplete = function() {
    this.emitValue();
  }, u2.prototype.emitValue = function() {
    this.hasValue && (this.hasValue = false, this.destination.next(this.value));
  }, u2;
}(SimpleOuterSubscriber);
function sampleTime(a420, u2) {
  return u2 === void 0 && (u2 = async$1), function(c) {
    return c.lift(new SampleTimeOperator(a420, u2));
  };
}
var SampleTimeOperator = /* @__PURE__ */ function() {
  function a420(u2, c) {
    this.period = u2, this.scheduler = c;
  }
  return a420.prototype.call = function(u2, c) {
    return c.subscribe(new SampleTimeSubscriber(u2, this.period, this.scheduler));
  }, a420;
}(), SampleTimeSubscriber = /* @__PURE__ */ function(a420) {
  __extends(u2, a420);
  function u2(c, l2, v2) {
    var p2 = a420.call(this, c) || this;
    return p2.period = l2, p2.scheduler = v2, p2.hasValue = false, p2.add(v2.schedule(dispatchNotification, l2, { subscriber: p2, period: l2 })), p2;
  }
  return u2.prototype._next = function(c) {
    this.lastValue = c, this.hasValue = true;
  }, u2.prototype.notifyNext = function() {
    this.hasValue && (this.hasValue = false, this.destination.next(this.lastValue));
  }, u2;
}(Subscriber);
function dispatchNotification(a420) {
  var u2 = a420.subscriber, c = a420.period;
  u2.notifyNext(), this.schedule(a420, c);
}
function sequenceEqual(a420, u2) {
  return function(c) {
    return c.lift(new SequenceEqualOperator(a420, u2));
  };
}
var SequenceEqualOperator = /* @__PURE__ */ function() {
  function a420(u2, c) {
    this.compareTo = u2, this.comparator = c;
  }
  return a420.prototype.call = function(u2, c) {
    return c.subscribe(new SequenceEqualSubscriber(u2, this.compareTo, this.comparator));
  }, a420;
}(), SequenceEqualSubscriber = /* @__PURE__ */ function(a420) {
  __extends(u2, a420);
  function u2(c, l2, v2) {
    var p2 = a420.call(this, c) || this;
    return p2.compareTo = l2, p2.comparator = v2, p2._a = [], p2._b = [], p2._oneComplete = false, p2.destination.add(l2.subscribe(new SequenceEqualCompareToSubscriber(c, p2))), p2;
  }
  return u2.prototype._next = function(c) {
    this._oneComplete && this._b.length === 0 ? this.emit(false) : (this._a.push(c), this.checkValues());
  }, u2.prototype._complete = function() {
    this._oneComplete ? this.emit(this._a.length === 0 && this._b.length === 0) : this._oneComplete = true, this.unsubscribe();
  }, u2.prototype.checkValues = function() {
    for (var c = this, l2 = c._a, v2 = c._b, p2 = c.comparator; l2.length > 0 && v2.length > 0; ) {
      var _ = l2.shift(), I2 = v2.shift(), P2 = false;
      try {
        P2 = p2 ? p2(_, I2) : _ === I2;
      } catch ($) {
        this.destination.error($);
      }
      P2 || this.emit(false);
    }
  }, u2.prototype.emit = function(c) {
    var l2 = this.destination;
    l2.next(c), l2.complete();
  }, u2.prototype.nextB = function(c) {
    this._oneComplete && this._a.length === 0 ? this.emit(false) : (this._b.push(c), this.checkValues());
  }, u2.prototype.completeB = function() {
    this._oneComplete ? this.emit(this._a.length === 0 && this._b.length === 0) : this._oneComplete = true;
  }, u2;
}(Subscriber), SequenceEqualCompareToSubscriber = /* @__PURE__ */ function(a420) {
  __extends(u2, a420);
  function u2(c, l2) {
    var v2 = a420.call(this, c) || this;
    return v2.parent = l2, v2;
  }
  return u2.prototype._next = function(c) {
    this.parent.nextB(c);
  }, u2.prototype._error = function(c) {
    this.parent.error(c), this.unsubscribe();
  }, u2.prototype._complete = function() {
    this.parent.completeB(), this.unsubscribe();
  }, u2;
}(Subscriber);
function shareSubjectFactory() {
  return new Subject();
}
function share() {
  return function(a420) {
    return refCount()(multicast(shareSubjectFactory)(a420));
  };
}
function shareReplay(a420, u2, c) {
  var l2;
  return a420 && typeof a420 == "object" ? l2 = a420 : l2 = { bufferSize: a420, windowTime: u2, refCount: false, scheduler: c }, function(v2) {
    return v2.lift(shareReplayOperator(l2));
  };
}
function shareReplayOperator(a420) {
  var u2 = a420.bufferSize, c = u2 === void 0 ? Number.POSITIVE_INFINITY : u2, l2 = a420.windowTime, v2 = l2 === void 0 ? Number.POSITIVE_INFINITY : l2, p2 = a420.refCount, _ = a420.scheduler, I2, P2 = 0, $, F2 = false, H2 = false;
  return function(ee2) {
    P2++;
    var X2;
    !I2 || F2 ? (F2 = false, I2 = new ReplaySubject(c, v2, _), X2 = I2.subscribe(this), $ = ee2.subscribe({ next: function(ie2) {
      I2.next(ie2);
    }, error: function(ie2) {
      F2 = true, I2.error(ie2);
    }, complete: function() {
      H2 = true, $ = void 0, I2.complete();
    } }), H2 && ($ = void 0)) : X2 = I2.subscribe(this), this.add(function() {
      P2--, X2.unsubscribe(), X2 = void 0, $ && !H2 && p2 && P2 === 0 && ($.unsubscribe(), $ = void 0, I2 = void 0);
    });
  };
}
function single(a420) {
  return function(u2) {
    return u2.lift(new SingleOperator(a420, u2));
  };
}
var SingleOperator = /* @__PURE__ */ function() {
  function a420(u2, c) {
    this.predicate = u2, this.source = c;
  }
  return a420.prototype.call = function(u2, c) {
    return c.subscribe(new SingleSubscriber(u2, this.predicate, this.source));
  }, a420;
}(), SingleSubscriber = /* @__PURE__ */ function(a420) {
  __extends(u2, a420);
  function u2(c, l2, v2) {
    var p2 = a420.call(this, c) || this;
    return p2.predicate = l2, p2.source = v2, p2.seenValue = false, p2.index = 0, p2;
  }
  return u2.prototype.applySingleValue = function(c) {
    this.seenValue ? this.destination.error("Sequence contains more than one element") : (this.seenValue = true, this.singleValue = c);
  }, u2.prototype._next = function(c) {
    var l2 = this.index++;
    this.predicate ? this.tryNext(c, l2) : this.applySingleValue(c);
  }, u2.prototype.tryNext = function(c, l2) {
    try {
      this.predicate(c, l2, this.source) && this.applySingleValue(c);
    } catch (v2) {
      this.destination.error(v2);
    }
  }, u2.prototype._complete = function() {
    var c = this.destination;
    this.index > 0 ? (c.next(this.seenValue ? this.singleValue : void 0), c.complete()) : c.error(new EmptyError());
  }, u2;
}(Subscriber);
function skip(a420) {
  return function(u2) {
    return u2.lift(new SkipOperator(a420));
  };
}
var SkipOperator = /* @__PURE__ */ function() {
  function a420(u2) {
    this.total = u2;
  }
  return a420.prototype.call = function(u2, c) {
    return c.subscribe(new SkipSubscriber(u2, this.total));
  }, a420;
}(), SkipSubscriber = /* @__PURE__ */ function(a420) {
  __extends(u2, a420);
  function u2(c, l2) {
    var v2 = a420.call(this, c) || this;
    return v2.total = l2, v2.count = 0, v2;
  }
  return u2.prototype._next = function(c) {
    ++this.count > this.total && this.destination.next(c);
  }, u2;
}(Subscriber);
function skipLast(a420) {
  return function(u2) {
    return u2.lift(new SkipLastOperator(a420));
  };
}
var SkipLastOperator = /* @__PURE__ */ function() {
  function a420(u2) {
    if (this._skipCount = u2, this._skipCount < 0)
      throw new ArgumentOutOfRangeError();
  }
  return a420.prototype.call = function(u2, c) {
    return this._skipCount === 0 ? c.subscribe(new Subscriber(u2)) : c.subscribe(new SkipLastSubscriber(u2, this._skipCount));
  }, a420;
}(), SkipLastSubscriber = /* @__PURE__ */ function(a420) {
  __extends(u2, a420);
  function u2(c, l2) {
    var v2 = a420.call(this, c) || this;
    return v2._skipCount = l2, v2._count = 0, v2._ring = new Array(l2), v2;
  }
  return u2.prototype._next = function(c) {
    var l2 = this._skipCount, v2 = this._count++;
    if (v2 < l2)
      this._ring[v2] = c;
    else {
      var p2 = v2 % l2, _ = this._ring, I2 = _[p2];
      _[p2] = c, this.destination.next(I2);
    }
  }, u2;
}(Subscriber);
function skipUntil(a420) {
  return function(u2) {
    return u2.lift(new SkipUntilOperator(a420));
  };
}
var SkipUntilOperator = /* @__PURE__ */ function() {
  function a420(u2) {
    this.notifier = u2;
  }
  return a420.prototype.call = function(u2, c) {
    return c.subscribe(new SkipUntilSubscriber(u2, this.notifier));
  }, a420;
}(), SkipUntilSubscriber = /* @__PURE__ */ function(a420) {
  __extends(u2, a420);
  function u2(c, l2) {
    var v2 = a420.call(this, c) || this;
    v2.hasValue = false;
    var p2 = new SimpleInnerSubscriber(v2);
    v2.add(p2), v2.innerSubscription = p2;
    var _ = innerSubscribe(l2, p2);
    return _ !== p2 && (v2.add(_), v2.innerSubscription = _), v2;
  }
  return u2.prototype._next = function(c) {
    this.hasValue && a420.prototype._next.call(this, c);
  }, u2.prototype.notifyNext = function() {
    this.hasValue = true, this.innerSubscription && this.innerSubscription.unsubscribe();
  }, u2.prototype.notifyComplete = function() {
  }, u2;
}(SimpleOuterSubscriber);
function skipWhile(a420) {
  return function(u2) {
    return u2.lift(new SkipWhileOperator(a420));
  };
}
var SkipWhileOperator = /* @__PURE__ */ function() {
  function a420(u2) {
    this.predicate = u2;
  }
  return a420.prototype.call = function(u2, c) {
    return c.subscribe(new SkipWhileSubscriber(u2, this.predicate));
  }, a420;
}(), SkipWhileSubscriber = /* @__PURE__ */ function(a420) {
  __extends(u2, a420);
  function u2(c, l2) {
    var v2 = a420.call(this, c) || this;
    return v2.predicate = l2, v2.skipping = true, v2.index = 0, v2;
  }
  return u2.prototype._next = function(c) {
    var l2 = this.destination;
    this.skipping && this.tryCallPredicate(c), this.skipping || l2.next(c);
  }, u2.prototype.tryCallPredicate = function(c) {
    try {
      var l2 = this.predicate(c, this.index++);
      this.skipping = !!l2;
    } catch (v2) {
      this.destination.error(v2);
    }
  }, u2;
}(Subscriber);
function startWith() {
  for (var a420 = [], u2 = 0; u2 < arguments.length; u2++)
    a420[u2] = arguments[u2];
  var c = a420[a420.length - 1];
  return isScheduler(c) ? (a420.pop(), function(l2) {
    return concat$1(a420, l2, c);
  }) : function(l2) {
    return concat$1(a420, l2);
  };
}
var nextHandle = 1, RESOLVED = /* @__PURE__ */ function() {
  return /* @__PURE__ */ Promise.resolve();
}(), activeHandles = {};
function findAndClearHandle(a420) {
  return a420 in activeHandles ? (delete activeHandles[a420], true) : false;
}
var Immediate = { setImmediate: function(a420) {
  var u2 = nextHandle++;
  return activeHandles[u2] = true, RESOLVED.then(function() {
    return findAndClearHandle(u2) && a420();
  }), u2;
}, clearImmediate: function(a420) {
  findAndClearHandle(a420);
} }, AsapAction = /* @__PURE__ */ function(a420) {
  __extends(u2, a420);
  function u2(c, l2) {
    var v2 = a420.call(this, c, l2) || this;
    return v2.scheduler = c, v2.work = l2, v2;
  }
  return u2.prototype.requestAsyncId = function(c, l2, v2) {
    return v2 === void 0 && (v2 = 0), v2 !== null && v2 > 0 ? a420.prototype.requestAsyncId.call(this, c, l2, v2) : (c.actions.push(this), c.scheduled || (c.scheduled = Immediate.setImmediate(c.flush.bind(c, null))));
  }, u2.prototype.recycleAsyncId = function(c, l2, v2) {
    if (v2 === void 0 && (v2 = 0), v2 !== null && v2 > 0 || v2 === null && this.delay > 0)
      return a420.prototype.recycleAsyncId.call(this, c, l2, v2);
    c.actions.length === 0 && (Immediate.clearImmediate(l2), c.scheduled = void 0);
  }, u2;
}(AsyncAction), AsapScheduler = /* @__PURE__ */ function(a420) {
  __extends(u2, a420);
  function u2() {
    return a420 !== null && a420.apply(this, arguments) || this;
  }
  return u2.prototype.flush = function(c) {
    this.active = true, this.scheduled = void 0;
    var l2 = this.actions, v2, p2 = -1, _ = l2.length;
    c = c || l2.shift();
    do
      if (v2 = c.execute(c.state, c.delay))
        break;
    while (++p2 < _ && (c = l2.shift()));
    if (this.active = false, v2) {
      for (; ++p2 < _ && (c = l2.shift()); )
        c.unsubscribe();
      throw v2;
    }
  }, u2;
}(AsyncScheduler), asapScheduler = /* @__PURE__ */ new AsapScheduler(AsapAction), asap = asapScheduler, SubscribeOnObservable = /* @__PURE__ */ function(a420) {
  __extends(u2, a420);
  function u2(c, l2, v2) {
    l2 === void 0 && (l2 = 0), v2 === void 0 && (v2 = asap);
    var p2 = a420.call(this) || this;
    return p2.source = c, p2.delayTime = l2, p2.scheduler = v2, (!isNumeric(l2) || l2 < 0) && (p2.delayTime = 0), (!v2 || typeof v2.schedule != "function") && (p2.scheduler = asap), p2;
  }
  return u2.create = function(c, l2, v2) {
    return l2 === void 0 && (l2 = 0), v2 === void 0 && (v2 = asap), new u2(c, l2, v2);
  }, u2.dispatch = function(c) {
    var l2 = c.source, v2 = c.subscriber;
    return this.add(l2.subscribe(v2));
  }, u2.prototype._subscribe = function(c) {
    var l2 = this.delayTime, v2 = this.source, p2 = this.scheduler;
    return p2.schedule(u2.dispatch, l2, { source: v2, subscriber: c });
  }, u2;
}(Observable);
function subscribeOn(a420, u2) {
  return u2 === void 0 && (u2 = 0), function(l2) {
    return l2.lift(new SubscribeOnOperator(a420, u2));
  };
}
var SubscribeOnOperator = /* @__PURE__ */ function() {
  function a420(u2, c) {
    this.scheduler = u2, this.delay = c;
  }
  return a420.prototype.call = function(u2, c) {
    return new SubscribeOnObservable(c, this.delay, this.scheduler).subscribe(u2);
  }, a420;
}();
function switchMap(a420, u2) {
  return typeof u2 == "function" ? function(c) {
    return c.pipe(switchMap(function(l2, v2) {
      return from(a420(l2, v2)).pipe(map(function(p2, _) {
        return u2(l2, p2, v2, _);
      }));
    }));
  } : function(c) {
    return c.lift(new SwitchMapOperator(a420));
  };
}
var SwitchMapOperator = /* @__PURE__ */ function() {
  function a420(u2) {
    this.project = u2;
  }
  return a420.prototype.call = function(u2, c) {
    return c.subscribe(new SwitchMapSubscriber(u2, this.project));
  }, a420;
}(), SwitchMapSubscriber = /* @__PURE__ */ function(a420) {
  __extends(u2, a420);
  function u2(c, l2) {
    var v2 = a420.call(this, c) || this;
    return v2.project = l2, v2.index = 0, v2;
  }
  return u2.prototype._next = function(c) {
    var l2, v2 = this.index++;
    try {
      l2 = this.project(c, v2);
    } catch (p2) {
      this.destination.error(p2);
      return;
    }
    this._innerSub(l2);
  }, u2.prototype._innerSub = function(c) {
    var l2 = this.innerSubscription;
    l2 && l2.unsubscribe();
    var v2 = new SimpleInnerSubscriber(this), p2 = this.destination;
    p2.add(v2), this.innerSubscription = innerSubscribe(c, v2), this.innerSubscription !== v2 && p2.add(this.innerSubscription);
  }, u2.prototype._complete = function() {
    var c = this.innerSubscription;
    (!c || c.closed) && a420.prototype._complete.call(this), this.unsubscribe();
  }, u2.prototype._unsubscribe = function() {
    this.innerSubscription = void 0;
  }, u2.prototype.notifyComplete = function() {
    this.innerSubscription = void 0, this.isStopped && a420.prototype._complete.call(this);
  }, u2.prototype.notifyNext = function(c) {
    this.destination.next(c);
  }, u2;
}(SimpleOuterSubscriber);
function switchAll() {
  return switchMap(identity);
}
function switchMapTo(a420, u2) {
  return u2 ? switchMap(function() {
    return a420;
  }, u2) : switchMap(function() {
    return a420;
  });
}
function takeUntil(a420) {
  return function(u2) {
    return u2.lift(new TakeUntilOperator(a420));
  };
}
var TakeUntilOperator = /* @__PURE__ */ function() {
  function a420(u2) {
    this.notifier = u2;
  }
  return a420.prototype.call = function(u2, c) {
    var l2 = new TakeUntilSubscriber(u2), v2 = innerSubscribe(this.notifier, new SimpleInnerSubscriber(l2));
    return v2 && !l2.seenValue ? (l2.add(v2), c.subscribe(l2)) : l2;
  }, a420;
}(), TakeUntilSubscriber = /* @__PURE__ */ function(a420) {
  __extends(u2, a420);
  function u2(c) {
    var l2 = a420.call(this, c) || this;
    return l2.seenValue = false, l2;
  }
  return u2.prototype.notifyNext = function() {
    this.seenValue = true, this.complete();
  }, u2.prototype.notifyComplete = function() {
  }, u2;
}(SimpleOuterSubscriber);
function takeWhile(a420, u2) {
  return u2 === void 0 && (u2 = false), function(c) {
    return c.lift(new TakeWhileOperator(a420, u2));
  };
}
var TakeWhileOperator = /* @__PURE__ */ function() {
  function a420(u2, c) {
    this.predicate = u2, this.inclusive = c;
  }
  return a420.prototype.call = function(u2, c) {
    return c.subscribe(new TakeWhileSubscriber(u2, this.predicate, this.inclusive));
  }, a420;
}(), TakeWhileSubscriber = /* @__PURE__ */ function(a420) {
  __extends(u2, a420);
  function u2(c, l2, v2) {
    var p2 = a420.call(this, c) || this;
    return p2.predicate = l2, p2.inclusive = v2, p2.index = 0, p2;
  }
  return u2.prototype._next = function(c) {
    var l2 = this.destination, v2;
    try {
      v2 = this.predicate(c, this.index++);
    } catch (p2) {
      l2.error(p2);
      return;
    }
    this.nextOrComplete(c, v2);
  }, u2.prototype.nextOrComplete = function(c, l2) {
    var v2 = this.destination;
    l2 ? v2.next(c) : (this.inclusive && v2.next(c), v2.complete());
  }, u2;
}(Subscriber);
function noop$6() {
}
function tap(a420, u2, c) {
  return function(v2) {
    return v2.lift(new DoOperator(a420, u2, c));
  };
}
var DoOperator = /* @__PURE__ */ function() {
  function a420(u2, c, l2) {
    this.nextOrObserver = u2, this.error = c, this.complete = l2;
  }
  return a420.prototype.call = function(u2, c) {
    return c.subscribe(new TapSubscriber(u2, this.nextOrObserver, this.error, this.complete));
  }, a420;
}(), TapSubscriber = /* @__PURE__ */ function(a420) {
  __extends(u2, a420);
  function u2(c, l2, v2, p2) {
    var _ = a420.call(this, c) || this;
    return _._tapNext = noop$6, _._tapError = noop$6, _._tapComplete = noop$6, _._tapError = v2 || noop$6, _._tapComplete = p2 || noop$6, isFunction$2(l2) ? (_._context = _, _._tapNext = l2) : l2 && (_._context = l2, _._tapNext = l2.next || noop$6, _._tapError = l2.error || noop$6, _._tapComplete = l2.complete || noop$6), _;
  }
  return u2.prototype._next = function(c) {
    try {
      this._tapNext.call(this._context, c);
    } catch (l2) {
      this.destination.error(l2);
      return;
    }
    this.destination.next(c);
  }, u2.prototype._error = function(c) {
    try {
      this._tapError.call(this._context, c);
    } catch (l2) {
      this.destination.error(l2);
      return;
    }
    this.destination.error(c);
  }, u2.prototype._complete = function() {
    try {
      this._tapComplete.call(this._context);
    } catch (c) {
      this.destination.error(c);
      return;
    }
    return this.destination.complete();
  }, u2;
}(Subscriber), defaultThrottleConfig = { leading: true, trailing: false };
function throttle(a420, u2) {
  return u2 === void 0 && (u2 = defaultThrottleConfig), function(c) {
    return c.lift(new ThrottleOperator(a420, !!u2.leading, !!u2.trailing));
  };
}
var ThrottleOperator = /* @__PURE__ */ function() {
  function a420(u2, c, l2) {
    this.durationSelector = u2, this.leading = c, this.trailing = l2;
  }
  return a420.prototype.call = function(u2, c) {
    return c.subscribe(new ThrottleSubscriber(u2, this.durationSelector, this.leading, this.trailing));
  }, a420;
}(), ThrottleSubscriber = /* @__PURE__ */ function(a420) {
  __extends(u2, a420);
  function u2(c, l2, v2, p2) {
    var _ = a420.call(this, c) || this;
    return _.destination = c, _.durationSelector = l2, _._leading = v2, _._trailing = p2, _._hasValue = false, _;
  }
  return u2.prototype._next = function(c) {
    this._hasValue = true, this._sendValue = c, this._throttled || (this._leading ? this.send() : this.throttle(c));
  }, u2.prototype.send = function() {
    var c = this, l2 = c._hasValue, v2 = c._sendValue;
    l2 && (this.destination.next(v2), this.throttle(v2)), this._hasValue = false, this._sendValue = void 0;
  }, u2.prototype.throttle = function(c) {
    var l2 = this.tryDurationSelector(c);
    l2 && this.add(this._throttled = innerSubscribe(l2, new SimpleInnerSubscriber(this)));
  }, u2.prototype.tryDurationSelector = function(c) {
    try {
      return this.durationSelector(c);
    } catch (l2) {
      return this.destination.error(l2), null;
    }
  }, u2.prototype.throttlingDone = function() {
    var c = this, l2 = c._throttled, v2 = c._trailing;
    l2 && l2.unsubscribe(), this._throttled = void 0, v2 && this.send();
  }, u2.prototype.notifyNext = function() {
    this.throttlingDone();
  }, u2.prototype.notifyComplete = function() {
    this.throttlingDone();
  }, u2;
}(SimpleOuterSubscriber);
function throttleTime(a420, u2, c) {
  return u2 === void 0 && (u2 = async$1), c === void 0 && (c = defaultThrottleConfig), function(l2) {
    return l2.lift(new ThrottleTimeOperator(a420, u2, c.leading, c.trailing));
  };
}
var ThrottleTimeOperator = /* @__PURE__ */ function() {
  function a420(u2, c, l2, v2) {
    this.duration = u2, this.scheduler = c, this.leading = l2, this.trailing = v2;
  }
  return a420.prototype.call = function(u2, c) {
    return c.subscribe(new ThrottleTimeSubscriber(u2, this.duration, this.scheduler, this.leading, this.trailing));
  }, a420;
}(), ThrottleTimeSubscriber = /* @__PURE__ */ function(a420) {
  __extends(u2, a420);
  function u2(c, l2, v2, p2, _) {
    var I2 = a420.call(this, c) || this;
    return I2.duration = l2, I2.scheduler = v2, I2.leading = p2, I2.trailing = _, I2._hasTrailingValue = false, I2._trailingValue = null, I2;
  }
  return u2.prototype._next = function(c) {
    this.throttled ? this.trailing && (this._trailingValue = c, this._hasTrailingValue = true) : (this.add(this.throttled = this.scheduler.schedule(dispatchNext, this.duration, { subscriber: this })), this.leading ? this.destination.next(c) : this.trailing && (this._trailingValue = c, this._hasTrailingValue = true));
  }, u2.prototype._complete = function() {
    this._hasTrailingValue ? (this.destination.next(this._trailingValue), this.destination.complete()) : this.destination.complete();
  }, u2.prototype.clearThrottle = function() {
    var c = this.throttled;
    c && (this.trailing && this._hasTrailingValue && (this.destination.next(this._trailingValue), this._trailingValue = null, this._hasTrailingValue = false), c.unsubscribe(), this.remove(c), this.throttled = null);
  }, u2;
}(Subscriber);
function dispatchNext(a420) {
  var u2 = a420.subscriber;
  u2.clearThrottle();
}
function defer(a420) {
  return new Observable(function(u2) {
    var c;
    try {
      c = a420();
    } catch (v2) {
      u2.error(v2);
      return;
    }
    var l2 = c ? from(c) : empty$1();
    return l2.subscribe(u2);
  });
}
function timeInterval(a420) {
  return a420 === void 0 && (a420 = async$1), function(u2) {
    return defer(function() {
      return u2.pipe(scan(function(c, l2) {
        var v2 = c.current;
        return { value: l2, current: a420.now(), last: v2 };
      }, { current: a420.now(), value: void 0, last: void 0 }), map(function(c) {
        var l2 = c.current, v2 = c.last, p2 = c.value;
        return new TimeInterval(p2, l2 - v2);
      }));
    });
  };
}
var TimeInterval = /* @__PURE__ */ function() {
  function a420(u2, c) {
    this.value = u2, this.interval = c;
  }
  return a420;
}(), TimeoutErrorImpl = /* @__PURE__ */ function() {
  function a420() {
    return Error.call(this), this.message = "Timeout has occurred", this.name = "TimeoutError", this;
  }
  return a420.prototype = /* @__PURE__ */ Object.create(Error.prototype), a420;
}(), TimeoutError = TimeoutErrorImpl;
function timeoutWith(a420, u2, c) {
  return c === void 0 && (c = async$1), function(l2) {
    var v2 = isDate$1(a420), p2 = v2 ? +a420 - c.now() : Math.abs(a420);
    return l2.lift(new TimeoutWithOperator(p2, v2, u2, c));
  };
}
var TimeoutWithOperator = /* @__PURE__ */ function() {
  function a420(u2, c, l2, v2) {
    this.waitFor = u2, this.absoluteTimeout = c, this.withObservable = l2, this.scheduler = v2;
  }
  return a420.prototype.call = function(u2, c) {
    return c.subscribe(new TimeoutWithSubscriber(u2, this.absoluteTimeout, this.waitFor, this.withObservable, this.scheduler));
  }, a420;
}(), TimeoutWithSubscriber = /* @__PURE__ */ function(a420) {
  __extends(u2, a420);
  function u2(c, l2, v2, p2, _) {
    var I2 = a420.call(this, c) || this;
    return I2.absoluteTimeout = l2, I2.waitFor = v2, I2.withObservable = p2, I2.scheduler = _, I2.scheduleTimeout(), I2;
  }
  return u2.dispatchTimeout = function(c) {
    var l2 = c.withObservable;
    c._unsubscribeAndRecycle(), c.add(innerSubscribe(l2, new SimpleInnerSubscriber(c)));
  }, u2.prototype.scheduleTimeout = function() {
    var c = this.action;
    c ? this.action = c.schedule(this, this.waitFor) : this.add(this.action = this.scheduler.schedule(u2.dispatchTimeout, this.waitFor, this));
  }, u2.prototype._next = function(c) {
    this.absoluteTimeout || this.scheduleTimeout(), a420.prototype._next.call(this, c);
  }, u2.prototype._unsubscribe = function() {
    this.action = void 0, this.scheduler = null, this.withObservable = null;
  }, u2;
}(SimpleOuterSubscriber);
function timeout(a420, u2) {
  return u2 === void 0 && (u2 = async$1), timeoutWith(a420, throwError(new TimeoutError()), u2);
}
function timestamp$1(a420) {
  return a420 === void 0 && (a420 = async$1), map(function(u2) {
    return new Timestamp$1(u2, a420.now());
  });
}
var Timestamp$1 = /* @__PURE__ */ function() {
  function a420(u2, c) {
    this.value = u2, this.timestamp = c;
  }
  return a420;
}();
function toArrayReducer(a420, u2, c) {
  return c === 0 ? [u2] : (a420.push(u2), a420);
}
function toArray$2() {
  return reduce(toArrayReducer, []);
}
function window$1(a420) {
  return function(c) {
    return c.lift(new WindowOperator$1(a420));
  };
}
var WindowOperator$1 = /* @__PURE__ */ function() {
  function a420(u2) {
    this.windowBoundaries = u2;
  }
  return a420.prototype.call = function(u2, c) {
    var l2 = new WindowSubscriber$1(u2), v2 = c.subscribe(l2);
    return v2.closed || l2.add(innerSubscribe(this.windowBoundaries, new SimpleInnerSubscriber(l2))), v2;
  }, a420;
}(), WindowSubscriber$1 = /* @__PURE__ */ function(a420) {
  __extends(u2, a420);
  function u2(c) {
    var l2 = a420.call(this, c) || this;
    return l2.window = new Subject(), c.next(l2.window), l2;
  }
  return u2.prototype.notifyNext = function() {
    this.openWindow();
  }, u2.prototype.notifyError = function(c) {
    this._error(c);
  }, u2.prototype.notifyComplete = function() {
    this._complete();
  }, u2.prototype._next = function(c) {
    this.window.next(c);
  }, u2.prototype._error = function(c) {
    this.window.error(c), this.destination.error(c);
  }, u2.prototype._complete = function() {
    this.window.complete(), this.destination.complete();
  }, u2.prototype._unsubscribe = function() {
    this.window = null;
  }, u2.prototype.openWindow = function() {
    var c = this.window;
    c && c.complete();
    var l2 = this.destination, v2 = this.window = new Subject();
    l2.next(v2);
  }, u2;
}(SimpleOuterSubscriber);
function windowCount(a420, u2) {
  return u2 === void 0 && (u2 = 0), function(l2) {
    return l2.lift(new WindowCountOperator(a420, u2));
  };
}
var WindowCountOperator = /* @__PURE__ */ function() {
  function a420(u2, c) {
    this.windowSize = u2, this.startWindowEvery = c;
  }
  return a420.prototype.call = function(u2, c) {
    return c.subscribe(new WindowCountSubscriber(u2, this.windowSize, this.startWindowEvery));
  }, a420;
}(), WindowCountSubscriber = /* @__PURE__ */ function(a420) {
  __extends(u2, a420);
  function u2(c, l2, v2) {
    var p2 = a420.call(this, c) || this;
    return p2.destination = c, p2.windowSize = l2, p2.startWindowEvery = v2, p2.windows = [new Subject()], p2.count = 0, c.next(p2.windows[0]), p2;
  }
  return u2.prototype._next = function(c) {
    for (var l2 = this.startWindowEvery > 0 ? this.startWindowEvery : this.windowSize, v2 = this.destination, p2 = this.windowSize, _ = this.windows, I2 = _.length, P2 = 0; P2 < I2 && !this.closed; P2++)
      _[P2].next(c);
    var $ = this.count - p2 + 1;
    if ($ >= 0 && $ % l2 === 0 && !this.closed && _.shift().complete(), ++this.count % l2 === 0 && !this.closed) {
      var F2 = new Subject();
      _.push(F2), v2.next(F2);
    }
  }, u2.prototype._error = function(c) {
    var l2 = this.windows;
    if (l2)
      for (; l2.length > 0 && !this.closed; )
        l2.shift().error(c);
    this.destination.error(c);
  }, u2.prototype._complete = function() {
    var c = this.windows;
    if (c)
      for (; c.length > 0 && !this.closed; )
        c.shift().complete();
    this.destination.complete();
  }, u2.prototype._unsubscribe = function() {
    this.count = 0, this.windows = null;
  }, u2;
}(Subscriber);
function windowTime(a420) {
  var u2 = async$1, c = null, l2 = Number.POSITIVE_INFINITY;
  return isScheduler(arguments[3]) && (u2 = arguments[3]), isScheduler(arguments[2]) ? u2 = arguments[2] : isNumeric(arguments[2]) && (l2 = Number(arguments[2])), isScheduler(arguments[1]) ? u2 = arguments[1] : isNumeric(arguments[1]) && (c = Number(arguments[1])), function(p2) {
    return p2.lift(new WindowTimeOperator(a420, c, l2, u2));
  };
}
var WindowTimeOperator = /* @__PURE__ */ function() {
  function a420(u2, c, l2, v2) {
    this.windowTimeSpan = u2, this.windowCreationInterval = c, this.maxWindowSize = l2, this.scheduler = v2;
  }
  return a420.prototype.call = function(u2, c) {
    return c.subscribe(new WindowTimeSubscriber(u2, this.windowTimeSpan, this.windowCreationInterval, this.maxWindowSize, this.scheduler));
  }, a420;
}(), CountedSubject = /* @__PURE__ */ function(a420) {
  __extends(u2, a420);
  function u2() {
    var c = a420 !== null && a420.apply(this, arguments) || this;
    return c._numberOfNextedValues = 0, c;
  }
  return u2.prototype.next = function(c) {
    this._numberOfNextedValues++, a420.prototype.next.call(this, c);
  }, Object.defineProperty(u2.prototype, "numberOfNextedValues", { get: function() {
    return this._numberOfNextedValues;
  }, enumerable: true, configurable: true }), u2;
}(Subject), WindowTimeSubscriber = /* @__PURE__ */ function(a420) {
  __extends(u2, a420);
  function u2(c, l2, v2, p2, _) {
    var I2 = a420.call(this, c) || this;
    I2.destination = c, I2.windowTimeSpan = l2, I2.windowCreationInterval = v2, I2.maxWindowSize = p2, I2.scheduler = _, I2.windows = [];
    var P2 = I2.openWindow();
    if (v2 !== null && v2 >= 0) {
      var $ = { subscriber: I2, window: P2, context: null }, F2 = { windowTimeSpan: l2, windowCreationInterval: v2, subscriber: I2, scheduler: _ };
      I2.add(_.schedule(dispatchWindowClose, l2, $)), I2.add(_.schedule(dispatchWindowCreation, v2, F2));
    } else {
      var H2 = { subscriber: I2, window: P2, windowTimeSpan: l2 };
      I2.add(_.schedule(dispatchWindowTimeSpanOnly, l2, H2));
    }
    return I2;
  }
  return u2.prototype._next = function(c) {
    for (var l2 = this.windows, v2 = l2.length, p2 = 0; p2 < v2; p2++) {
      var _ = l2[p2];
      _.closed || (_.next(c), _.numberOfNextedValues >= this.maxWindowSize && this.closeWindow(_));
    }
  }, u2.prototype._error = function(c) {
    for (var l2 = this.windows; l2.length > 0; )
      l2.shift().error(c);
    this.destination.error(c);
  }, u2.prototype._complete = function() {
    for (var c = this.windows; c.length > 0; ) {
      var l2 = c.shift();
      l2.closed || l2.complete();
    }
    this.destination.complete();
  }, u2.prototype.openWindow = function() {
    var c = new CountedSubject();
    this.windows.push(c);
    var l2 = this.destination;
    return l2.next(c), c;
  }, u2.prototype.closeWindow = function(c) {
    c.complete();
    var l2 = this.windows;
    l2.splice(l2.indexOf(c), 1);
  }, u2;
}(Subscriber);
function dispatchWindowTimeSpanOnly(a420) {
  var u2 = a420.subscriber, c = a420.windowTimeSpan, l2 = a420.window;
  l2 && u2.closeWindow(l2), a420.window = u2.openWindow(), this.schedule(a420, c);
}
function dispatchWindowCreation(a420) {
  var u2 = a420.windowTimeSpan, c = a420.subscriber, l2 = a420.scheduler, v2 = a420.windowCreationInterval, p2 = c.openWindow(), _ = this, I2 = { action: _, subscription: null }, P2 = { subscriber: c, window: p2, context: I2 };
  I2.subscription = l2.schedule(dispatchWindowClose, u2, P2), _.add(I2.subscription), _.schedule(a420, v2);
}
function dispatchWindowClose(a420) {
  var u2 = a420.subscriber, c = a420.window, l2 = a420.context;
  l2 && l2.action && l2.subscription && l2.action.remove(l2.subscription), u2.closeWindow(c);
}
function windowToggle(a420, u2) {
  return function(c) {
    return c.lift(new WindowToggleOperator(a420, u2));
  };
}
var WindowToggleOperator = /* @__PURE__ */ function() {
  function a420(u2, c) {
    this.openings = u2, this.closingSelector = c;
  }
  return a420.prototype.call = function(u2, c) {
    return c.subscribe(new WindowToggleSubscriber(u2, this.openings, this.closingSelector));
  }, a420;
}(), WindowToggleSubscriber = /* @__PURE__ */ function(a420) {
  __extends(u2, a420);
  function u2(c, l2, v2) {
    var p2 = a420.call(this, c) || this;
    return p2.openings = l2, p2.closingSelector = v2, p2.contexts = [], p2.add(p2.openSubscription = subscribeToResult(p2, l2, l2)), p2;
  }
  return u2.prototype._next = function(c) {
    var l2 = this.contexts;
    if (l2)
      for (var v2 = l2.length, p2 = 0; p2 < v2; p2++)
        l2[p2].window.next(c);
  }, u2.prototype._error = function(c) {
    var l2 = this.contexts;
    if (this.contexts = null, l2)
      for (var v2 = l2.length, p2 = -1; ++p2 < v2; ) {
        var _ = l2[p2];
        _.window.error(c), _.subscription.unsubscribe();
      }
    a420.prototype._error.call(this, c);
  }, u2.prototype._complete = function() {
    var c = this.contexts;
    if (this.contexts = null, c)
      for (var l2 = c.length, v2 = -1; ++v2 < l2; ) {
        var p2 = c[v2];
        p2.window.complete(), p2.subscription.unsubscribe();
      }
    a420.prototype._complete.call(this);
  }, u2.prototype._unsubscribe = function() {
    var c = this.contexts;
    if (this.contexts = null, c)
      for (var l2 = c.length, v2 = -1; ++v2 < l2; ) {
        var p2 = c[v2];
        p2.window.unsubscribe(), p2.subscription.unsubscribe();
      }
  }, u2.prototype.notifyNext = function(c, l2, v2, p2, _) {
    if (c === this.openings) {
      var I2 = void 0;
      try {
        var P2 = this.closingSelector;
        I2 = P2(l2);
      } catch (ee2) {
        return this.error(ee2);
      }
      var $ = new Subject(), F2 = new Subscription(), H2 = { window: $, subscription: F2 };
      this.contexts.push(H2);
      var j = subscribeToResult(this, I2, H2);
      j.closed ? this.closeWindow(this.contexts.length - 1) : (j.context = H2, F2.add(j)), this.destination.next($);
    } else
      this.closeWindow(this.contexts.indexOf(c));
  }, u2.prototype.notifyError = function(c) {
    this.error(c);
  }, u2.prototype.notifyComplete = function(c) {
    c !== this.openSubscription && this.closeWindow(this.contexts.indexOf(c.context));
  }, u2.prototype.closeWindow = function(c) {
    if (c !== -1) {
      var l2 = this.contexts, v2 = l2[c], p2 = v2.window, _ = v2.subscription;
      l2.splice(c, 1), p2.complete(), _.unsubscribe();
    }
  }, u2;
}(OuterSubscriber);
function windowWhen(a420) {
  return function(c) {
    return c.lift(new WindowOperator(a420));
  };
}
var WindowOperator = /* @__PURE__ */ function() {
  function a420(u2) {
    this.closingSelector = u2;
  }
  return a420.prototype.call = function(u2, c) {
    return c.subscribe(new WindowSubscriber(u2, this.closingSelector));
  }, a420;
}(), WindowSubscriber = /* @__PURE__ */ function(a420) {
  __extends(u2, a420);
  function u2(c, l2) {
    var v2 = a420.call(this, c) || this;
    return v2.destination = c, v2.closingSelector = l2, v2.openWindow(), v2;
  }
  return u2.prototype.notifyNext = function(c, l2, v2, p2, _) {
    this.openWindow(_);
  }, u2.prototype.notifyError = function(c) {
    this._error(c);
  }, u2.prototype.notifyComplete = function(c) {
    this.openWindow(c);
  }, u2.prototype._next = function(c) {
    this.window.next(c);
  }, u2.prototype._error = function(c) {
    this.window.error(c), this.destination.error(c), this.unsubscribeClosingNotification();
  }, u2.prototype._complete = function() {
    this.window.complete(), this.destination.complete(), this.unsubscribeClosingNotification();
  }, u2.prototype.unsubscribeClosingNotification = function() {
    this.closingNotification && this.closingNotification.unsubscribe();
  }, u2.prototype.openWindow = function(c) {
    c === void 0 && (c = null), c && (this.remove(c), c.unsubscribe());
    var l2 = this.window;
    l2 && l2.complete();
    var v2 = this.window = new Subject();
    this.destination.next(v2);
    var p2;
    try {
      var _ = this.closingSelector;
      p2 = _();
    } catch (I2) {
      this.destination.error(I2), this.window.error(I2);
      return;
    }
    this.add(this.closingNotification = subscribeToResult(this, p2));
  }, u2;
}(OuterSubscriber);
function withLatestFrom() {
  for (var a420 = [], u2 = 0; u2 < arguments.length; u2++)
    a420[u2] = arguments[u2];
  return function(c) {
    var l2;
    typeof a420[a420.length - 1] == "function" && (l2 = a420.pop());
    var v2 = a420;
    return c.lift(new WithLatestFromOperator(v2, l2));
  };
}
var WithLatestFromOperator = /* @__PURE__ */ function() {
  function a420(u2, c) {
    this.observables = u2, this.project = c;
  }
  return a420.prototype.call = function(u2, c) {
    return c.subscribe(new WithLatestFromSubscriber(u2, this.observables, this.project));
  }, a420;
}(), WithLatestFromSubscriber = /* @__PURE__ */ function(a420) {
  __extends(u2, a420);
  function u2(c, l2, v2) {
    var p2 = a420.call(this, c) || this;
    p2.observables = l2, p2.project = v2, p2.toRespond = [];
    var _ = l2.length;
    p2.values = new Array(_);
    for (var I2 = 0; I2 < _; I2++)
      p2.toRespond.push(I2);
    for (var I2 = 0; I2 < _; I2++) {
      var P2 = l2[I2];
      p2.add(subscribeToResult(p2, P2, void 0, I2));
    }
    return p2;
  }
  return u2.prototype.notifyNext = function(c, l2, v2) {
    this.values[v2] = l2;
    var p2 = this.toRespond;
    if (p2.length > 0) {
      var _ = p2.indexOf(v2);
      _ !== -1 && p2.splice(_, 1);
    }
  }, u2.prototype.notifyComplete = function() {
  }, u2.prototype._next = function(c) {
    if (this.toRespond.length === 0) {
      var l2 = [c].concat(this.values);
      this.project ? this._tryProject(l2) : this.destination.next(l2);
    }
  }, u2.prototype._tryProject = function(c) {
    var l2;
    try {
      l2 = this.project.apply(this, c);
    } catch (v2) {
      this.destination.error(v2);
      return;
    }
    this.destination.next(l2);
  }, u2;
}(OuterSubscriber);
function zip$1() {
  for (var a420 = [], u2 = 0; u2 < arguments.length; u2++)
    a420[u2] = arguments[u2];
  var c = a420[a420.length - 1];
  return typeof c == "function" && a420.pop(), fromArray$1(a420, void 0).lift(new ZipOperator(c));
}
var ZipOperator = /* @__PURE__ */ function() {
  function a420(u2) {
    this.resultSelector = u2;
  }
  return a420.prototype.call = function(u2, c) {
    return c.subscribe(new ZipSubscriber(u2, this.resultSelector));
  }, a420;
}(), ZipSubscriber = /* @__PURE__ */ function(a420) {
  __extends(u2, a420);
  function u2(c, l2, v2) {
    var p2 = a420.call(this, c) || this;
    return p2.resultSelector = l2, p2.iterators = [], p2.active = 0, p2.resultSelector = typeof l2 == "function" ? l2 : void 0, p2;
  }
  return u2.prototype._next = function(c) {
    var l2 = this.iterators;
    isArray$4(c) ? l2.push(new StaticArrayIterator(c)) : typeof c[iterator] == "function" ? l2.push(new StaticIterator(c[iterator]())) : l2.push(new ZipBufferIterator(this.destination, this, c));
  }, u2.prototype._complete = function() {
    var c = this.iterators, l2 = c.length;
    if (this.unsubscribe(), l2 === 0) {
      this.destination.complete();
      return;
    }
    this.active = l2;
    for (var v2 = 0; v2 < l2; v2++) {
      var p2 = c[v2];
      if (p2.stillUnsubscribed) {
        var _ = this.destination;
        _.add(p2.subscribe());
      } else
        this.active--;
    }
  }, u2.prototype.notifyInactive = function() {
    this.active--, this.active === 0 && this.destination.complete();
  }, u2.prototype.checkIterators = function() {
    for (var c = this.iterators, l2 = c.length, v2 = this.destination, p2 = 0; p2 < l2; p2++) {
      var _ = c[p2];
      if (typeof _.hasValue == "function" && !_.hasValue())
        return;
    }
    for (var I2 = false, P2 = [], p2 = 0; p2 < l2; p2++) {
      var _ = c[p2], $ = _.next();
      if (_.hasCompleted() && (I2 = true), $.done) {
        v2.complete();
        return;
      }
      P2.push($.value);
    }
    this.resultSelector ? this._tryresultSelector(P2) : v2.next(P2), I2 && v2.complete();
  }, u2.prototype._tryresultSelector = function(c) {
    var l2;
    try {
      l2 = this.resultSelector.apply(this, c);
    } catch (v2) {
      this.destination.error(v2);
      return;
    }
    this.destination.next(l2);
  }, u2;
}(Subscriber), StaticIterator = /* @__PURE__ */ function() {
  function a420(u2) {
    this.iterator = u2, this.nextResult = u2.next();
  }
  return a420.prototype.hasValue = function() {
    return true;
  }, a420.prototype.next = function() {
    var u2 = this.nextResult;
    return this.nextResult = this.iterator.next(), u2;
  }, a420.prototype.hasCompleted = function() {
    var u2 = this.nextResult;
    return !!(u2 && u2.done);
  }, a420;
}(), StaticArrayIterator = /* @__PURE__ */ function() {
  function a420(u2) {
    this.array = u2, this.index = 0, this.length = 0, this.length = u2.length;
  }
  return a420.prototype[iterator] = function() {
    return this;
  }, a420.prototype.next = function(u2) {
    var c = this.index++, l2 = this.array;
    return c < this.length ? { value: l2[c], done: false } : { value: null, done: true };
  }, a420.prototype.hasValue = function() {
    return this.array.length > this.index;
  }, a420.prototype.hasCompleted = function() {
    return this.array.length === this.index;
  }, a420;
}(), ZipBufferIterator = /* @__PURE__ */ function(a420) {
  __extends(u2, a420);
  function u2(c, l2, v2) {
    var p2 = a420.call(this, c) || this;
    return p2.parent = l2, p2.observable = v2, p2.stillUnsubscribed = true, p2.buffer = [], p2.isComplete = false, p2;
  }
  return u2.prototype[iterator] = function() {
    return this;
  }, u2.prototype.next = function() {
    var c = this.buffer;
    return c.length === 0 && this.isComplete ? { value: null, done: true } : { value: c.shift(), done: false };
  }, u2.prototype.hasValue = function() {
    return this.buffer.length > 0;
  }, u2.prototype.hasCompleted = function() {
    return this.buffer.length === 0 && this.isComplete;
  }, u2.prototype.notifyComplete = function() {
    this.buffer.length > 0 ? (this.isComplete = true, this.parent.notifyInactive()) : this.destination.complete();
  }, u2.prototype.notifyNext = function(c) {
    this.buffer.push(c), this.parent.checkIterators();
  }, u2.prototype.subscribe = function() {
    return innerSubscribe(this.observable, new SimpleInnerSubscriber(this));
  }, u2;
}(SimpleOuterSubscriber);
function zip() {
  for (var a420 = [], u2 = 0; u2 < arguments.length; u2++)
    a420[u2] = arguments[u2];
  return function(l2) {
    return l2.lift.call(zip$1.apply(void 0, [l2].concat(a420)));
  };
}
function zipAll(a420) {
  return function(u2) {
    return u2.lift(new ZipOperator(a420));
  };
}
const operators = /* @__PURE__ */ Object.freeze(/* @__PURE__ */ Object.defineProperty({ __proto__: null, audit, auditTime, buffer: buffer$2, bufferCount, bufferTime, bufferToggle, bufferWhen, catchError, combineAll, combineLatest, concat, concatAll, concatMap, concatMapTo, count, debounce, debounceTime, defaultIfEmpty, delay, delayWhen, dematerialize, distinct, distinctUntilChanged, distinctUntilKeyChanged, elementAt, endWith, every, exhaust, exhaustMap, expand, filter, finalize, find: find$1, findIndex, first, flatMap, groupBy, ignoreElements, isEmpty, last, map, mapTo, materialize, max: max$1, merge: merge$1, mergeAll, mergeMap, mergeMapTo, mergeScan, min, multicast, observeOn, onErrorResumeNext, pairwise, partition, pluck, publish, publishBehavior, publishLast, publishReplay, race, reduce, refCount, repeat, repeatWhen, retry, retryWhen, sample, sampleTime, scan, sequenceEqual, share, shareReplay, single, skip, skipLast, skipUntil, skipWhile, startWith, subscribeOn, switchAll, switchMap, switchMapTo, take, takeLast, takeUntil, takeWhile, tap, throttle, throttleTime, throwIfEmpty, timeInterval, timeout, timeoutWith, timestamp: timestamp$1, toArray: toArray$2, window: window$1, windowCount, windowTime, windowToggle, windowWhen, withLatestFrom, zip, zipAll }, Symbol.toStringTag, { value: "Module" })), require$$2$1 = /* @__PURE__ */ getAugmentedNamespace(operators);
var struct = {};
(function(a420) {
  var u2 = commonjsGlobal$1 && commonjsGlobal$1.__createBinding || (Object.create ? function(Z2, de2, pe2, le2) {
    le2 === void 0 && (le2 = pe2), Object.defineProperty(Z2, le2, { enumerable: true, get: function() {
      return de2[pe2];
    } });
  } : function(Z2, de2, pe2, le2) {
    le2 === void 0 && (le2 = pe2), Z2[le2] = de2[pe2];
  }), c = commonjsGlobal$1 && commonjsGlobal$1.__setModuleDefault || (Object.create ? function(Z2, de2) {
    Object.defineProperty(Z2, "default", { enumerable: true, value: de2 });
  } : function(Z2, de2) {
    Z2.default = de2;
  }), l2 = commonjsGlobal$1 && commonjsGlobal$1.__importStar || function(Z2) {
    if (Z2 && Z2.__esModule)
      return Z2;
    var de2 = {};
    if (Z2 != null)
      for (var pe2 in Z2)
        pe2 !== "default" && Object.hasOwnProperty.call(Z2, pe2) && u2(de2, Z2, pe2);
    return c(de2, Z2), de2;
  }, v2 = commonjsGlobal$1 && commonjsGlobal$1.__importDefault || function(Z2) {
    return Z2 && Z2.__esModule ? Z2 : { default: Z2 };
  };
  Object.defineProperty(a420, "__esModule", { value: true }), a420.ListValue = a420.Value = a420.Struct_FieldsEntry = a420.Struct = a420.nullValueToNumber = a420.nullValueToJSON = a420.nullValueFromJSON = a420.NullValue = a420.protobufPackage = void 0;
  const p2 = v2(umdExports), _ = l2(minimal);
  a420.protobufPackage = "google.protobuf";
  var I2;
  (function(Z2) {
    Z2.NULL_VALUE = "NULL_VALUE";
  })(I2 = a420.NullValue || (a420.NullValue = {}));
  function P2(Z2) {
    switch (Z2) {
      case 0:
      case "NULL_VALUE":
        return I2.NULL_VALUE;
      default:
        throw new ie2.Error("Unrecognized enum value " + Z2 + " for enum NullValue");
    }
  }
  a420.nullValueFromJSON = P2;
  function $(Z2) {
    switch (Z2) {
      case I2.NULL_VALUE:
        return "NULL_VALUE";
      default:
        return "UNKNOWN";
    }
  }
  a420.nullValueToJSON = $;
  function F2(Z2) {
    switch (Z2) {
      case I2.NULL_VALUE:
        return 0;
      default:
        return 0;
    }
  }
  a420.nullValueToNumber = F2;
  function H2() {
    return { fields: {} };
  }
  a420.Struct = { encode(Z2, de2 = _.Writer.create()) {
    return Object.entries(Z2.fields).forEach(([pe2, le2]) => {
      le2 !== void 0 && a420.Struct_FieldsEntry.encode({ key: pe2, value: le2 }, de2.uint32(10).fork()).ldelim();
    }), de2;
  }, decode(Z2, de2) {
    const pe2 = Z2 instanceof _.Reader ? Z2 : new _.Reader(Z2);
    let le2 = de2 === void 0 ? pe2.len : pe2.pos + de2;
    const be2 = H2();
    for (; pe2.pos < le2; ) {
      const ke2 = pe2.uint32();
      switch (ke2 >>> 3) {
        case 1:
          const Te2 = a420.Struct_FieldsEntry.decode(pe2, pe2.uint32());
          Te2.value !== void 0 && (be2.fields[Te2.key] = Te2.value);
          break;
        default:
          pe2.skipType(ke2 & 7);
          break;
      }
    }
    return be2;
  }, fromJSON(Z2) {
    return { fields: Q2(Z2.fields) ? Object.entries(Z2.fields).reduce((de2, [pe2, le2]) => (de2[pe2] = le2, de2), {}) : {} };
  }, toJSON(Z2) {
    const de2 = {};
    return de2.fields = {}, Z2.fields && Object.entries(Z2.fields).forEach(([pe2, le2]) => {
      de2.fields[pe2] = le2;
    }), de2;
  }, fromPartial(Z2) {
    var de2;
    const pe2 = H2();
    return pe2.fields = Object.entries((de2 = Z2.fields) !== null && de2 !== void 0 ? de2 : {}).reduce((le2, [be2, ke2]) => (ke2 !== void 0 && (le2[be2] = ke2), le2), {}), pe2;
  }, wrap(Z2) {
    const de2 = H2();
    return Z2 !== void 0 && Object.keys(Z2).forEach((pe2) => {
      de2.fields[pe2] = Z2[pe2];
    }), de2;
  }, unwrap(Z2) {
    const de2 = {};
    return Object.keys(Z2.fields).forEach((pe2) => {
      de2[pe2] = Z2.fields[pe2];
    }), de2;
  } };
  function j() {
    return { key: "", value: void 0 };
  }
  a420.Struct_FieldsEntry = { encode(Z2, de2 = _.Writer.create()) {
    return Z2.key !== "" && de2.uint32(10).string(Z2.key), Z2.value !== void 0 && a420.Value.encode(a420.Value.wrap(Z2.value), de2.uint32(18).fork()).ldelim(), de2;
  }, decode(Z2, de2) {
    const pe2 = Z2 instanceof _.Reader ? Z2 : new _.Reader(Z2);
    let le2 = de2 === void 0 ? pe2.len : pe2.pos + de2;
    const be2 = j();
    for (; pe2.pos < le2; ) {
      const ke2 = pe2.uint32();
      switch (ke2 >>> 3) {
        case 1:
          be2.key = pe2.string();
          break;
        case 2:
          be2.value = a420.Value.unwrap(a420.Value.decode(pe2, pe2.uint32()));
          break;
        default:
          pe2.skipType(ke2 & 7);
          break;
      }
    }
    return be2;
  }, fromJSON(Z2) {
    return { key: ne2(Z2.key) ? String(Z2.key) : "", value: ne2(Z2 == null ? void 0 : Z2.value) ? Z2.value : void 0 };
  }, toJSON(Z2) {
    const de2 = {};
    return Z2.key !== void 0 && (de2.key = Z2.key), Z2.value !== void 0 && (de2.value = Z2.value), de2;
  }, fromPartial(Z2) {
    var de2, pe2;
    const le2 = j();
    return le2.key = (de2 = Z2.key) !== null && de2 !== void 0 ? de2 : "", le2.value = (pe2 = Z2.value) !== null && pe2 !== void 0 ? pe2 : void 0, le2;
  } };
  function ee2() {
    return { nullValue: void 0, numberValue: void 0, stringValue: void 0, boolValue: void 0, structValue: void 0, listValue: void 0 };
  }
  a420.Value = { encode(Z2, de2 = _.Writer.create()) {
    return Z2.nullValue !== void 0 && de2.uint32(8).int32(F2(Z2.nullValue)), Z2.numberValue !== void 0 && de2.uint32(17).double(Z2.numberValue), Z2.stringValue !== void 0 && de2.uint32(26).string(Z2.stringValue), Z2.boolValue !== void 0 && de2.uint32(32).bool(Z2.boolValue), Z2.structValue !== void 0 && a420.Struct.encode(a420.Struct.wrap(Z2.structValue), de2.uint32(42).fork()).ldelim(), Z2.listValue !== void 0 && a420.ListValue.encode(a420.ListValue.wrap(Z2.listValue), de2.uint32(50).fork()).ldelim(), de2;
  }, decode(Z2, de2) {
    const pe2 = Z2 instanceof _.Reader ? Z2 : new _.Reader(Z2);
    let le2 = de2 === void 0 ? pe2.len : pe2.pos + de2;
    const be2 = ee2();
    for (; pe2.pos < le2; ) {
      const ke2 = pe2.uint32();
      switch (ke2 >>> 3) {
        case 1:
          be2.nullValue = P2(pe2.int32());
          break;
        case 2:
          be2.numberValue = pe2.double();
          break;
        case 3:
          be2.stringValue = pe2.string();
          break;
        case 4:
          be2.boolValue = pe2.bool();
          break;
        case 5:
          be2.structValue = a420.Struct.unwrap(a420.Struct.decode(pe2, pe2.uint32()));
          break;
        case 6:
          be2.listValue = a420.ListValue.unwrap(a420.ListValue.decode(pe2, pe2.uint32()));
          break;
        default:
          pe2.skipType(ke2 & 7);
          break;
      }
    }
    return be2;
  }, fromJSON(Z2) {
    return { nullValue: ne2(Z2.nullValue) ? P2(Z2.nullValue) : void 0, numberValue: ne2(Z2.numberValue) ? Number(Z2.numberValue) : void 0, stringValue: ne2(Z2.stringValue) ? String(Z2.stringValue) : void 0, boolValue: ne2(Z2.boolValue) ? !!Z2.boolValue : void 0, structValue: Q2(Z2.structValue) ? Z2.structValue : void 0, listValue: Array.isArray(Z2.listValue) ? [...Z2.listValue] : void 0 };
  }, toJSON(Z2) {
    const de2 = {};
    return Z2.nullValue !== void 0 && (de2.nullValue = Z2.nullValue !== void 0 ? $(Z2.nullValue) : void 0), Z2.numberValue !== void 0 && (de2.numberValue = Z2.numberValue), Z2.stringValue !== void 0 && (de2.stringValue = Z2.stringValue), Z2.boolValue !== void 0 && (de2.boolValue = Z2.boolValue), Z2.structValue !== void 0 && (de2.structValue = Z2.structValue), Z2.listValue !== void 0 && (de2.listValue = Z2.listValue), de2;
  }, fromPartial(Z2) {
    var de2, pe2, le2, be2, ke2, Te2;
    const q2 = ee2();
    return q2.nullValue = (de2 = Z2.nullValue) !== null && de2 !== void 0 ? de2 : void 0, q2.numberValue = (pe2 = Z2.numberValue) !== null && pe2 !== void 0 ? pe2 : void 0, q2.stringValue = (le2 = Z2.stringValue) !== null && le2 !== void 0 ? le2 : void 0, q2.boolValue = (be2 = Z2.boolValue) !== null && be2 !== void 0 ? be2 : void 0, q2.structValue = (ke2 = Z2.structValue) !== null && ke2 !== void 0 ? ke2 : void 0, q2.listValue = (Te2 = Z2.listValue) !== null && Te2 !== void 0 ? Te2 : void 0, q2;
  }, wrap(Z2) {
    const de2 = ee2();
    if (Z2 === null)
      de2.nullValue = I2.NULL_VALUE;
    else if (typeof Z2 == "boolean")
      de2.boolValue = Z2;
    else if (typeof Z2 == "number")
      de2.numberValue = Z2;
    else if (typeof Z2 == "string")
      de2.stringValue = Z2;
    else if (Array.isArray(Z2))
      de2.listValue = Z2;
    else if (typeof Z2 == "object")
      de2.structValue = Z2;
    else if (typeof Z2 < "u")
      throw new Error("Unsupported any value type: " + typeof Z2);
    return de2;
  }, unwrap(Z2) {
    if ((Z2 == null ? void 0 : Z2.stringValue) !== void 0)
      return Z2.stringValue;
    if ((Z2 == null ? void 0 : Z2.numberValue) !== void 0)
      return Z2.numberValue;
    if ((Z2 == null ? void 0 : Z2.boolValue) !== void 0)
      return Z2.boolValue;
    if ((Z2 == null ? void 0 : Z2.structValue) !== void 0)
      return Z2.structValue;
    if ((Z2 == null ? void 0 : Z2.listValue) !== void 0)
      return Z2.listValue;
    if ((Z2 == null ? void 0 : Z2.nullValue) !== void 0)
      return null;
  } };
  function X2() {
    return { values: [] };
  }
  a420.ListValue = { encode(Z2, de2 = _.Writer.create()) {
    for (const pe2 of Z2.values)
      a420.Value.encode(a420.Value.wrap(pe2), de2.uint32(10).fork()).ldelim();
    return de2;
  }, decode(Z2, de2) {
    const pe2 = Z2 instanceof _.Reader ? Z2 : new _.Reader(Z2);
    let le2 = de2 === void 0 ? pe2.len : pe2.pos + de2;
    const be2 = X2();
    for (; pe2.pos < le2; ) {
      const ke2 = pe2.uint32();
      switch (ke2 >>> 3) {
        case 1:
          be2.values.push(a420.Value.unwrap(a420.Value.decode(pe2, pe2.uint32())));
          break;
        default:
          pe2.skipType(ke2 & 7);
          break;
      }
    }
    return be2;
  }, fromJSON(Z2) {
    return { values: Array.isArray(Z2 == null ? void 0 : Z2.values) ? [...Z2.values] : [] };
  }, toJSON(Z2) {
    const de2 = {};
    return Z2.values ? de2.values = Z2.values.map((pe2) => pe2) : de2.values = [], de2;
  }, fromPartial(Z2) {
    var de2;
    const pe2 = X2();
    return pe2.values = ((de2 = Z2.values) === null || de2 === void 0 ? void 0 : de2.map((le2) => le2)) || [], pe2;
  }, wrap(Z2) {
    const de2 = X2();
    return de2.values = Z2 ?? [], de2;
  }, unwrap(Z2) {
    return Z2.values;
  } };
  var ie2 = (() => {
    if (typeof ie2 < "u")
      return ie2;
    if (typeof self < "u")
      return self;
    if (typeof window < "u")
      return window;
    if (typeof commonjsGlobal$1 < "u")
      return commonjsGlobal$1;
    throw "Unable to locate global object";
  })();
  _.util.Long !== p2.default && (_.util.Long = p2.default, _.configure());
  function Q2(Z2) {
    return typeof Z2 == "object" && Z2 !== null;
  }
  function ne2(Z2) {
    return Z2 != null;
  }
})(struct);
(function(a420) {
  var u2 = commonjsGlobal$1 && commonjsGlobal$1.__createBinding || (Object.create ? function(q2, z2, C2, b) {
    b === void 0 && (b = C2), Object.defineProperty(q2, b, { enumerable: true, get: function() {
      return z2[C2];
    } });
  } : function(q2, z2, C2, b) {
    b === void 0 && (b = C2), q2[b] = z2[C2];
  }), c = commonjsGlobal$1 && commonjsGlobal$1.__setModuleDefault || (Object.create ? function(q2, z2) {
    Object.defineProperty(q2, "default", { enumerable: true, value: z2 });
  } : function(q2, z2) {
    q2.default = z2;
  }), l2 = commonjsGlobal$1 && commonjsGlobal$1.__importStar || function(q2) {
    if (q2 && q2.__esModule)
      return q2;
    var z2 = {};
    if (q2 != null)
      for (var C2 in q2)
        C2 !== "default" && Object.hasOwnProperty.call(q2, C2) && u2(z2, q2, C2);
    return c(z2, q2), z2;
  }, v2 = commonjsGlobal$1 && commonjsGlobal$1.__importDefault || function(q2) {
    return q2 && q2.__esModule ? q2 : { default: q2 };
  };
  Object.defineProperty(a420, "__esModule", { value: true }), a420.EventServiceDefinition = a420.EventServiceClientImpl = a420.EventsStreamResponse = a420.EventsStreamRequest = a420.EventsStreamReconnectRequest = a420.EventsStreamError = a420.SubscribePayload = a420.PublishEventResponse = a420.PublishEventRequest = a420.EventTarget = a420.eventsStreamMessageTypeToNumber = a420.eventsStreamMessageTypeToJSON = a420.eventsStreamMessageTypeFromJSON = a420.EventsStreamMessageType = a420.protobufPackage = void 0;
  const p2 = v2(umdExports), _ = l2(minimal), I2 = require$$2$1, P2 = struct;
  a420.protobufPackage = "apis.event.v2";
  var $;
  (function(q2) {
    q2.EVENTS_STREAM_MESSAGE_TYPE_UNSPECIFIED = "EVENTS_STREAM_MESSAGE_TYPE_UNSPECIFIED", q2.EVENTS_STREAM_MESSAGE_TYPE_PING = "EVENTS_STREAM_MESSAGE_TYPE_PING", q2.EVENTS_STREAM_MESSAGE_TYPE_ERROR = "EVENTS_STREAM_MESSAGE_TYPE_ERROR", q2.EVENTS_STREAM_MESSAGE_TYPE_SUBSCRIBED = "EVENTS_STREAM_MESSAGE_TYPE_SUBSCRIBED", q2.EVENTS_STREAM_MESSAGE_TYPE_UNSUBSCRIBED = "EVENTS_STREAM_MESSAGE_TYPE_UNSUBSCRIBED", q2.EVENTS_STREAM_MESSAGE_TYPE_PUBLISHED = "EVENTS_STREAM_MESSAGE_TYPE_PUBLISHED";
  })($ = a420.EventsStreamMessageType || (a420.EventsStreamMessageType = {}));
  function F2(q2) {
    switch (q2) {
      case 0:
      case "EVENTS_STREAM_MESSAGE_TYPE_UNSPECIFIED":
        return $.EVENTS_STREAM_MESSAGE_TYPE_UNSPECIFIED;
      case 1:
      case "EVENTS_STREAM_MESSAGE_TYPE_PING":
        return $.EVENTS_STREAM_MESSAGE_TYPE_PING;
      case 2:
      case "EVENTS_STREAM_MESSAGE_TYPE_ERROR":
        return $.EVENTS_STREAM_MESSAGE_TYPE_ERROR;
      case 3:
      case "EVENTS_STREAM_MESSAGE_TYPE_SUBSCRIBED":
        return $.EVENTS_STREAM_MESSAGE_TYPE_SUBSCRIBED;
      case 4:
      case "EVENTS_STREAM_MESSAGE_TYPE_UNSUBSCRIBED":
        return $.EVENTS_STREAM_MESSAGE_TYPE_UNSUBSCRIBED;
      case 5:
      case "EVENTS_STREAM_MESSAGE_TYPE_PUBLISHED":
        return $.EVENTS_STREAM_MESSAGE_TYPE_PUBLISHED;
      default:
        throw new be2.Error("Unrecognized enum value " + q2 + " for enum EventsStreamMessageType");
    }
  }
  a420.eventsStreamMessageTypeFromJSON = F2;
  function H2(q2) {
    switch (q2) {
      case $.EVENTS_STREAM_MESSAGE_TYPE_UNSPECIFIED:
        return "EVENTS_STREAM_MESSAGE_TYPE_UNSPECIFIED";
      case $.EVENTS_STREAM_MESSAGE_TYPE_PING:
        return "EVENTS_STREAM_MESSAGE_TYPE_PING";
      case $.EVENTS_STREAM_MESSAGE_TYPE_ERROR:
        return "EVENTS_STREAM_MESSAGE_TYPE_ERROR";
      case $.EVENTS_STREAM_MESSAGE_TYPE_SUBSCRIBED:
        return "EVENTS_STREAM_MESSAGE_TYPE_SUBSCRIBED";
      case $.EVENTS_STREAM_MESSAGE_TYPE_UNSUBSCRIBED:
        return "EVENTS_STREAM_MESSAGE_TYPE_UNSUBSCRIBED";
      case $.EVENTS_STREAM_MESSAGE_TYPE_PUBLISHED:
        return "EVENTS_STREAM_MESSAGE_TYPE_PUBLISHED";
      default:
        return "UNKNOWN";
    }
  }
  a420.eventsStreamMessageTypeToJSON = H2;
  function j(q2) {
    switch (q2) {
      case $.EVENTS_STREAM_MESSAGE_TYPE_UNSPECIFIED:
        return 0;
      case $.EVENTS_STREAM_MESSAGE_TYPE_PING:
        return 1;
      case $.EVENTS_STREAM_MESSAGE_TYPE_ERROR:
        return 2;
      case $.EVENTS_STREAM_MESSAGE_TYPE_SUBSCRIBED:
        return 3;
      case $.EVENTS_STREAM_MESSAGE_TYPE_UNSUBSCRIBED:
        return 4;
      case $.EVENTS_STREAM_MESSAGE_TYPE_PUBLISHED:
        return 5;
      default:
        return 0;
    }
  }
  a420.eventsStreamMessageTypeToNumber = j;
  function ee2() {
    return { collectionId: void 0, projectId: void 0, layoutId: void 0 };
  }
  a420.EventTarget = { encode(q2, z2 = _.Writer.create()) {
    return q2.collectionId !== void 0 && z2.uint32(42).string(q2.collectionId), q2.projectId !== void 0 && z2.uint32(34).string(q2.projectId), q2.layoutId !== void 0 && z2.uint32(10).string(q2.layoutId), z2;
  }, decode(q2, z2) {
    const C2 = q2 instanceof _.Reader ? q2 : new _.Reader(q2);
    let b = z2 === void 0 ? C2.len : C2.pos + z2;
    const E2 = ee2();
    for (; C2.pos < b; ) {
      const k = C2.uint32();
      switch (k >>> 3) {
        case 5:
          E2.collectionId = C2.string();
          break;
        case 4:
          E2.projectId = C2.string();
          break;
        case 1:
          E2.layoutId = C2.string();
          break;
        default:
          C2.skipType(k & 7);
          break;
      }
    }
    return E2;
  }, fromJSON(q2) {
    return { collectionId: Te2(q2.collectionId) ? String(q2.collectionId) : void 0, projectId: Te2(q2.projectId) ? String(q2.projectId) : void 0, layoutId: Te2(q2.layoutId) ? String(q2.layoutId) : void 0 };
  }, toJSON(q2) {
    const z2 = {};
    return q2.collectionId !== void 0 && (z2.collectionId = q2.collectionId), q2.projectId !== void 0 && (z2.projectId = q2.projectId), q2.layoutId !== void 0 && (z2.layoutId = q2.layoutId), z2;
  }, fromPartial(q2) {
    var z2, C2, b;
    const E2 = ee2();
    return E2.collectionId = (z2 = q2.collectionId) !== null && z2 !== void 0 ? z2 : void 0, E2.projectId = (C2 = q2.projectId) !== null && C2 !== void 0 ? C2 : void 0, E2.layoutId = (b = q2.layoutId) !== null && b !== void 0 ? b : void 0, E2;
  } };
  function X2() {
    return { name: "", payload: void 0, requestMetadata: void 0, target: void 0 };
  }
  a420.PublishEventRequest = { encode(q2, z2 = _.Writer.create()) {
    return q2.name !== "" && z2.uint32(10).string(q2.name), q2.payload !== void 0 && P2.Struct.encode(P2.Struct.wrap(q2.payload), z2.uint32(18).fork()).ldelim(), q2.requestMetadata !== void 0 && P2.Value.encode(P2.Value.wrap(q2.requestMetadata), z2.uint32(34).fork()).ldelim(), q2.target !== void 0 && a420.EventTarget.encode(q2.target, z2.uint32(26).fork()).ldelim(), z2;
  }, decode(q2, z2) {
    const C2 = q2 instanceof _.Reader ? q2 : new _.Reader(q2);
    let b = z2 === void 0 ? C2.len : C2.pos + z2;
    const E2 = X2();
    for (; C2.pos < b; ) {
      const k = C2.uint32();
      switch (k >>> 3) {
        case 1:
          E2.name = C2.string();
          break;
        case 2:
          E2.payload = P2.Struct.unwrap(P2.Struct.decode(C2, C2.uint32()));
          break;
        case 4:
          E2.requestMetadata = P2.Value.unwrap(P2.Value.decode(C2, C2.uint32()));
          break;
        case 3:
          E2.target = a420.EventTarget.decode(C2, C2.uint32());
          break;
        default:
          C2.skipType(k & 7);
          break;
      }
    }
    return E2;
  }, fromJSON(q2) {
    return { name: Te2(q2.name) ? String(q2.name) : "", payload: ke2(q2.payload) ? q2.payload : void 0, requestMetadata: Te2(q2 == null ? void 0 : q2.requestMetadata) ? q2.requestMetadata : void 0, target: Te2(q2.target) ? a420.EventTarget.fromJSON(q2.target) : void 0 };
  }, toJSON(q2) {
    const z2 = {};
    return q2.name !== void 0 && (z2.name = q2.name), q2.payload !== void 0 && (z2.payload = q2.payload), q2.requestMetadata !== void 0 && (z2.requestMetadata = q2.requestMetadata), q2.target !== void 0 && (z2.target = q2.target ? a420.EventTarget.toJSON(q2.target) : void 0), z2;
  }, fromPartial(q2) {
    var z2, C2, b;
    const E2 = X2();
    return E2.name = (z2 = q2.name) !== null && z2 !== void 0 ? z2 : "", E2.payload = (C2 = q2.payload) !== null && C2 !== void 0 ? C2 : void 0, E2.requestMetadata = (b = q2.requestMetadata) !== null && b !== void 0 ? b : void 0, E2.target = q2.target !== void 0 && q2.target !== null ? a420.EventTarget.fromPartial(q2.target) : void 0, E2;
  } };
  function ie2() {
    return { name: "", payload: void 0, target: void 0, requestMetadata: void 0, id: "" };
  }
  a420.PublishEventResponse = { encode(q2, z2 = _.Writer.create()) {
    return q2.name !== "" && z2.uint32(10).string(q2.name), q2.payload !== void 0 && P2.Struct.encode(P2.Struct.wrap(q2.payload), z2.uint32(18).fork()).ldelim(), q2.target !== void 0 && a420.EventTarget.encode(q2.target, z2.uint32(26).fork()).ldelim(), q2.requestMetadata !== void 0 && P2.Value.encode(P2.Value.wrap(q2.requestMetadata), z2.uint32(34).fork()).ldelim(), q2.id !== "" && z2.uint32(42).string(q2.id), z2;
  }, decode(q2, z2) {
    const C2 = q2 instanceof _.Reader ? q2 : new _.Reader(q2);
    let b = z2 === void 0 ? C2.len : C2.pos + z2;
    const E2 = ie2();
    for (; C2.pos < b; ) {
      const k = C2.uint32();
      switch (k >>> 3) {
        case 1:
          E2.name = C2.string();
          break;
        case 2:
          E2.payload = P2.Struct.unwrap(P2.Struct.decode(C2, C2.uint32()));
          break;
        case 3:
          E2.target = a420.EventTarget.decode(C2, C2.uint32());
          break;
        case 4:
          E2.requestMetadata = P2.Value.unwrap(P2.Value.decode(C2, C2.uint32()));
          break;
        case 5:
          E2.id = C2.string();
          break;
        default:
          C2.skipType(k & 7);
          break;
      }
    }
    return E2;
  }, fromJSON(q2) {
    return { name: Te2(q2.name) ? String(q2.name) : "", payload: ke2(q2.payload) ? q2.payload : void 0, target: Te2(q2.target) ? a420.EventTarget.fromJSON(q2.target) : void 0, requestMetadata: Te2(q2 == null ? void 0 : q2.requestMetadata) ? q2.requestMetadata : void 0, id: Te2(q2.id) ? String(q2.id) : "" };
  }, toJSON(q2) {
    const z2 = {};
    return q2.name !== void 0 && (z2.name = q2.name), q2.payload !== void 0 && (z2.payload = q2.payload), q2.target !== void 0 && (z2.target = q2.target ? a420.EventTarget.toJSON(q2.target) : void 0), q2.requestMetadata !== void 0 && (z2.requestMetadata = q2.requestMetadata), q2.id !== void 0 && (z2.id = q2.id), z2;
  }, fromPartial(q2) {
    var z2, C2, b, E2;
    const k = ie2();
    return k.name = (z2 = q2.name) !== null && z2 !== void 0 ? z2 : "", k.payload = (C2 = q2.payload) !== null && C2 !== void 0 ? C2 : void 0, k.target = q2.target !== void 0 && q2.target !== null ? a420.EventTarget.fromPartial(q2.target) : void 0, k.requestMetadata = (b = q2.requestMetadata) !== null && b !== void 0 ? b : void 0, k.id = (E2 = q2.id) !== null && E2 !== void 0 ? E2 : "", k;
  } };
  function Q2() {
    return { name: "", target: void 0 };
  }
  a420.SubscribePayload = { encode(q2, z2 = _.Writer.create()) {
    return q2.name !== "" && z2.uint32(10).string(q2.name), q2.target !== void 0 && a420.EventTarget.encode(q2.target, z2.uint32(18).fork()).ldelim(), z2;
  }, decode(q2, z2) {
    const C2 = q2 instanceof _.Reader ? q2 : new _.Reader(q2);
    let b = z2 === void 0 ? C2.len : C2.pos + z2;
    const E2 = Q2();
    for (; C2.pos < b; ) {
      const k = C2.uint32();
      switch (k >>> 3) {
        case 1:
          E2.name = C2.string();
          break;
        case 2:
          E2.target = a420.EventTarget.decode(C2, C2.uint32());
          break;
        default:
          C2.skipType(k & 7);
          break;
      }
    }
    return E2;
  }, fromJSON(q2) {
    return { name: Te2(q2.name) ? String(q2.name) : "", target: Te2(q2.target) ? a420.EventTarget.fromJSON(q2.target) : void 0 };
  }, toJSON(q2) {
    const z2 = {};
    return q2.name !== void 0 && (z2.name = q2.name), q2.target !== void 0 && (z2.target = q2.target ? a420.EventTarget.toJSON(q2.target) : void 0), z2;
  }, fromPartial(q2) {
    var z2;
    const C2 = Q2();
    return C2.name = (z2 = q2.name) !== null && z2 !== void 0 ? z2 : "", C2.target = q2.target !== void 0 && q2.target !== null ? a420.EventTarget.fromPartial(q2.target) : void 0, C2;
  } };
  function ne2() {
    return { code: 0, message: "" };
  }
  a420.EventsStreamError = { encode(q2, z2 = _.Writer.create()) {
    return q2.code !== 0 && z2.uint32(8).int32(q2.code), q2.message !== "" && z2.uint32(18).string(q2.message), z2;
  }, decode(q2, z2) {
    const C2 = q2 instanceof _.Reader ? q2 : new _.Reader(q2);
    let b = z2 === void 0 ? C2.len : C2.pos + z2;
    const E2 = ne2();
    for (; C2.pos < b; ) {
      const k = C2.uint32();
      switch (k >>> 3) {
        case 1:
          E2.code = C2.int32();
          break;
        case 2:
          E2.message = C2.string();
          break;
        default:
          C2.skipType(k & 7);
          break;
      }
    }
    return E2;
  }, fromJSON(q2) {
    return { code: Te2(q2.code) ? Number(q2.code) : 0, message: Te2(q2.message) ? String(q2.message) : "" };
  }, toJSON(q2) {
    const z2 = {};
    return q2.code !== void 0 && (z2.code = Math.round(q2.code)), q2.message !== void 0 && (z2.message = q2.message), z2;
  }, fromPartial(q2) {
    var z2, C2;
    const b = ne2();
    return b.code = (z2 = q2.code) !== null && z2 !== void 0 ? z2 : 0, b.message = (C2 = q2.message) !== null && C2 !== void 0 ? C2 : "", b;
  } };
  function Z2() {
    return { reauthenticate: false, beforeTimestamp: "" };
  }
  a420.EventsStreamReconnectRequest = { encode(q2, z2 = _.Writer.create()) {
    return q2.reauthenticate === true && z2.uint32(8).bool(q2.reauthenticate), q2.beforeTimestamp !== "" && z2.uint32(18).string(q2.beforeTimestamp), z2;
  }, decode(q2, z2) {
    const C2 = q2 instanceof _.Reader ? q2 : new _.Reader(q2);
    let b = z2 === void 0 ? C2.len : C2.pos + z2;
    const E2 = Z2();
    for (; C2.pos < b; ) {
      const k = C2.uint32();
      switch (k >>> 3) {
        case 1:
          E2.reauthenticate = C2.bool();
          break;
        case 2:
          E2.beforeTimestamp = C2.string();
          break;
        default:
          C2.skipType(k & 7);
          break;
      }
    }
    return E2;
  }, fromJSON(q2) {
    return { reauthenticate: Te2(q2.reauthenticate) ? !!q2.reauthenticate : false, beforeTimestamp: Te2(q2.beforeTimestamp) ? String(q2.beforeTimestamp) : "" };
  }, toJSON(q2) {
    const z2 = {};
    return q2.reauthenticate !== void 0 && (z2.reauthenticate = q2.reauthenticate), q2.beforeTimestamp !== void 0 && (z2.beforeTimestamp = q2.beforeTimestamp), z2;
  }, fromPartial(q2) {
    var z2, C2;
    const b = Z2();
    return b.reauthenticate = (z2 = q2.reauthenticate) !== null && z2 !== void 0 ? z2 : false, b.beforeTimestamp = (C2 = q2.beforeTimestamp) !== null && C2 !== void 0 ? C2 : "", b;
  } };
  function de2() {
    return { correlationId: void 0, subscribe: void 0, unsubscribe: void 0, publish: void 0, ping: void 0 };
  }
  a420.EventsStreamRequest = { encode(q2, z2 = _.Writer.create()) {
    return q2.correlationId !== void 0 && z2.uint32(10).string(q2.correlationId), q2.subscribe !== void 0 && a420.SubscribePayload.encode(q2.subscribe, z2.uint32(802).fork()).ldelim(), q2.unsubscribe !== void 0 && a420.SubscribePayload.encode(q2.unsubscribe, z2.uint32(810).fork()).ldelim(), q2.publish !== void 0 && a420.PublishEventRequest.encode(q2.publish, z2.uint32(818).fork()).ldelim(), q2.ping !== void 0 && z2.uint32(826).string(q2.ping), z2;
  }, decode(q2, z2) {
    const C2 = q2 instanceof _.Reader ? q2 : new _.Reader(q2);
    let b = z2 === void 0 ? C2.len : C2.pos + z2;
    const E2 = de2();
    for (; C2.pos < b; ) {
      const k = C2.uint32();
      switch (k >>> 3) {
        case 1:
          E2.correlationId = C2.string();
          break;
        case 100:
          E2.subscribe = a420.SubscribePayload.decode(C2, C2.uint32());
          break;
        case 101:
          E2.unsubscribe = a420.SubscribePayload.decode(C2, C2.uint32());
          break;
        case 102:
          E2.publish = a420.PublishEventRequest.decode(C2, C2.uint32());
          break;
        case 103:
          E2.ping = C2.string();
          break;
        default:
          C2.skipType(k & 7);
          break;
      }
    }
    return E2;
  }, fromJSON(q2) {
    return { correlationId: Te2(q2.correlationId) ? String(q2.correlationId) : void 0, subscribe: Te2(q2.subscribe) ? a420.SubscribePayload.fromJSON(q2.subscribe) : void 0, unsubscribe: Te2(q2.unsubscribe) ? a420.SubscribePayload.fromJSON(q2.unsubscribe) : void 0, publish: Te2(q2.publish) ? a420.PublishEventRequest.fromJSON(q2.publish) : void 0, ping: Te2(q2.ping) ? String(q2.ping) : void 0 };
  }, toJSON(q2) {
    const z2 = {};
    return q2.correlationId !== void 0 && (z2.correlationId = q2.correlationId), q2.subscribe !== void 0 && (z2.subscribe = q2.subscribe ? a420.SubscribePayload.toJSON(q2.subscribe) : void 0), q2.unsubscribe !== void 0 && (z2.unsubscribe = q2.unsubscribe ? a420.SubscribePayload.toJSON(q2.unsubscribe) : void 0), q2.publish !== void 0 && (z2.publish = q2.publish ? a420.PublishEventRequest.toJSON(q2.publish) : void 0), q2.ping !== void 0 && (z2.ping = q2.ping), z2;
  }, fromPartial(q2) {
    var z2, C2;
    const b = de2();
    return b.correlationId = (z2 = q2.correlationId) !== null && z2 !== void 0 ? z2 : void 0, b.subscribe = q2.subscribe !== void 0 && q2.subscribe !== null ? a420.SubscribePayload.fromPartial(q2.subscribe) : void 0, b.unsubscribe = q2.unsubscribe !== void 0 && q2.unsubscribe !== null ? a420.SubscribePayload.fromPartial(q2.unsubscribe) : void 0, b.publish = q2.publish !== void 0 && q2.publish !== null ? a420.PublishEventRequest.fromPartial(q2.publish) : void 0, b.ping = (C2 = q2.ping) !== null && C2 !== void 0 ? C2 : void 0, b;
  } };
  function pe2() {
    return { correlationId: void 0, sessionId: void 0, event: void 0, pong: void 0, error: void 0, subscribed: void 0, unsubscribed: void 0, published: void 0, reconnectBefore: void 0 };
  }
  a420.EventsStreamResponse = { encode(q2, z2 = _.Writer.create()) {
    return q2.correlationId !== void 0 && z2.uint32(18).string(q2.correlationId), q2.sessionId !== void 0 && z2.uint32(26).string(q2.sessionId), q2.event !== void 0 && a420.PublishEventResponse.encode(q2.event, z2.uint32(802).fork()).ldelim(), q2.pong !== void 0 && z2.uint32(1602).string(q2.pong), q2.error !== void 0 && a420.EventsStreamError.encode(q2.error, z2.uint32(1610).fork()).ldelim(), q2.subscribed !== void 0 && a420.SubscribePayload.encode(q2.subscribed, z2.uint32(1618).fork()).ldelim(), q2.unsubscribed !== void 0 && a420.SubscribePayload.encode(q2.unsubscribed, z2.uint32(1626).fork()).ldelim(), q2.published !== void 0 && a420.PublishEventResponse.encode(q2.published, z2.uint32(1634).fork()).ldelim(), q2.reconnectBefore !== void 0 && a420.EventsStreamReconnectRequest.encode(q2.reconnectBefore, z2.uint32(1642).fork()).ldelim(), z2;
  }, decode(q2, z2) {
    const C2 = q2 instanceof _.Reader ? q2 : new _.Reader(q2);
    let b = z2 === void 0 ? C2.len : C2.pos + z2;
    const E2 = pe2();
    for (; C2.pos < b; ) {
      const k = C2.uint32();
      switch (k >>> 3) {
        case 2:
          E2.correlationId = C2.string();
          break;
        case 3:
          E2.sessionId = C2.string();
          break;
        case 100:
          E2.event = a420.PublishEventResponse.decode(C2, C2.uint32());
          break;
        case 200:
          E2.pong = C2.string();
          break;
        case 201:
          E2.error = a420.EventsStreamError.decode(C2, C2.uint32());
          break;
        case 202:
          E2.subscribed = a420.SubscribePayload.decode(C2, C2.uint32());
          break;
        case 203:
          E2.unsubscribed = a420.SubscribePayload.decode(C2, C2.uint32());
          break;
        case 204:
          E2.published = a420.PublishEventResponse.decode(C2, C2.uint32());
          break;
        case 205:
          E2.reconnectBefore = a420.EventsStreamReconnectRequest.decode(C2, C2.uint32());
          break;
        default:
          C2.skipType(k & 7);
          break;
      }
    }
    return E2;
  }, fromJSON(q2) {
    return { correlationId: Te2(q2.correlationId) ? String(q2.correlationId) : void 0, sessionId: Te2(q2.sessionId) ? String(q2.sessionId) : void 0, event: Te2(q2.event) ? a420.PublishEventResponse.fromJSON(q2.event) : void 0, pong: Te2(q2.pong) ? String(q2.pong) : void 0, error: Te2(q2.error) ? a420.EventsStreamError.fromJSON(q2.error) : void 0, subscribed: Te2(q2.subscribed) ? a420.SubscribePayload.fromJSON(q2.subscribed) : void 0, unsubscribed: Te2(q2.unsubscribed) ? a420.SubscribePayload.fromJSON(q2.unsubscribed) : void 0, published: Te2(q2.published) ? a420.PublishEventResponse.fromJSON(q2.published) : void 0, reconnectBefore: Te2(q2.reconnectBefore) ? a420.EventsStreamReconnectRequest.fromJSON(q2.reconnectBefore) : void 0 };
  }, toJSON(q2) {
    const z2 = {};
    return q2.correlationId !== void 0 && (z2.correlationId = q2.correlationId), q2.sessionId !== void 0 && (z2.sessionId = q2.sessionId), q2.event !== void 0 && (z2.event = q2.event ? a420.PublishEventResponse.toJSON(q2.event) : void 0), q2.pong !== void 0 && (z2.pong = q2.pong), q2.error !== void 0 && (z2.error = q2.error ? a420.EventsStreamError.toJSON(q2.error) : void 0), q2.subscribed !== void 0 && (z2.subscribed = q2.subscribed ? a420.SubscribePayload.toJSON(q2.subscribed) : void 0), q2.unsubscribed !== void 0 && (z2.unsubscribed = q2.unsubscribed ? a420.SubscribePayload.toJSON(q2.unsubscribed) : void 0), q2.published !== void 0 && (z2.published = q2.published ? a420.PublishEventResponse.toJSON(q2.published) : void 0), q2.reconnectBefore !== void 0 && (z2.reconnectBefore = q2.reconnectBefore ? a420.EventsStreamReconnectRequest.toJSON(q2.reconnectBefore) : void 0), z2;
  }, fromPartial(q2) {
    var z2, C2, b;
    const E2 = pe2();
    return E2.correlationId = (z2 = q2.correlationId) !== null && z2 !== void 0 ? z2 : void 0, E2.sessionId = (C2 = q2.sessionId) !== null && C2 !== void 0 ? C2 : void 0, E2.event = q2.event !== void 0 && q2.event !== null ? a420.PublishEventResponse.fromPartial(q2.event) : void 0, E2.pong = (b = q2.pong) !== null && b !== void 0 ? b : void 0, E2.error = q2.error !== void 0 && q2.error !== null ? a420.EventsStreamError.fromPartial(q2.error) : void 0, E2.subscribed = q2.subscribed !== void 0 && q2.subscribed !== null ? a420.SubscribePayload.fromPartial(q2.subscribed) : void 0, E2.unsubscribed = q2.unsubscribed !== void 0 && q2.unsubscribed !== null ? a420.SubscribePayload.fromPartial(q2.unsubscribed) : void 0, E2.published = q2.published !== void 0 && q2.published !== null ? a420.PublishEventResponse.fromPartial(q2.published) : void 0, E2.reconnectBefore = q2.reconnectBefore !== void 0 && q2.reconnectBefore !== null ? a420.EventsStreamReconnectRequest.fromPartial(q2.reconnectBefore) : void 0, E2;
  } };
  class le2 {
    constructor(z2) {
      this.rpc = z2, this.Stream = this.Stream.bind(this), this.Publish = this.Publish.bind(this);
    }
    Stream(z2) {
      const C2 = z2.pipe(I2.map((E2) => a420.EventsStreamRequest.encode(E2).finish()));
      return this.rpc.bidirectionalStreamingRequest("apis.event.v2.EventService", "Stream", C2).pipe(I2.map((E2) => a420.EventsStreamResponse.decode(new _.Reader(E2))));
    }
    Publish(z2) {
      const C2 = a420.PublishEventRequest.encode(z2).finish();
      return this.rpc.request("apis.event.v2.EventService", "Publish", C2).then((E2) => a420.PublishEventResponse.decode(new _.Reader(E2)));
    }
  }
  a420.EventServiceClientImpl = le2, a420.EventServiceDefinition = { name: "EventService", fullName: "apis.event.v2.EventService", methods: {
    /**
    * Stream Events
    * buf:lint:ignore RPC_REQUEST_STANDARD_NAME
    * buf:lint:ignore RPC_RESPONSE_STANDARD_NAME
    */
    stream: { name: "Stream", requestType: a420.EventsStreamRequest, requestStream: true, responseType: a420.EventsStreamResponse, responseStream: true, options: {} },
    /**
    * Publish Event
    * buf:lint:ignore RPC_REQUEST_STANDARD_NAME
    * buf:lint:ignore RPC_RESPONSE_STANDARD_NAME
    */
    publish: { name: "Publish", requestType: a420.PublishEventRequest, requestStream: false, responseType: a420.PublishEventResponse, responseStream: false, options: {} }
  } };
  var be2 = (() => {
    if (typeof be2 < "u")
      return be2;
    if (typeof self < "u")
      return self;
    if (typeof window < "u")
      return window;
    if (typeof commonjsGlobal$1 < "u")
      return commonjsGlobal$1;
    throw "Unable to locate global object";
  })();
  _.util.Long !== p2.default && (_.util.Long = p2.default, _.configure());
  function ke2(q2) {
    return typeof q2 == "object" && q2 !== null;
  }
  function Te2(q2) {
    return q2 != null;
  }
})(api$1);
(function(a420) {
  var u2 = commonjsGlobal$1 && commonjsGlobal$1.__createBinding || (Object.create ? function(l2, v2, p2, _) {
    _ === void 0 && (_ = p2), Object.defineProperty(l2, _, { enumerable: true, get: function() {
      return v2[p2];
    } });
  } : function(l2, v2, p2, _) {
    _ === void 0 && (_ = p2), l2[_] = v2[p2];
  }), c = commonjsGlobal$1 && commonjsGlobal$1.__exportStar || function(l2, v2) {
    for (var p2 in l2)
      p2 !== "default" && !v2.hasOwnProperty(p2) && u2(v2, l2, p2);
  };
  Object.defineProperty(a420, "__esModule", { value: true }), a420.eventsApiSupportedEvents = a420.eventsApiEventRpcCalls = void 0, c(api$1, a420), a420.eventsApiEventRpcCalls = { ping: "pong", publish: "published", subscribe: "subscribed", unsubscribe: "unsubscribed" }, a420.eventsApiSupportedEvents = [...Object.values(a420.eventsApiEventRpcCalls), "error", "event", "reconnectBefore"];
})(dist$1);
var ws = null;
typeof WebSocket < "u" ? ws = WebSocket : typeof MozWebSocket < "u" ? ws = MozWebSocket : typeof commonjsGlobal$1 < "u" ? ws = commonjsGlobal$1.WebSocket || commonjsGlobal$1.MozWebSocket : typeof window < "u" ? ws = window.WebSocket || window.MozWebSocket : typeof self < "u" && (ws = self.WebSocket || self.MozWebSocket);
var browser$e = ws, matcher = { exports: {} }, escapeStringRegexp$1 = (a420) => {
  if (typeof a420 != "string")
    throw new TypeError("Expected a string");
  return a420.replace(/[|\\{}()[\]^$+*?.]/g, "\\$&").replace(/-/g, "\\x2d");
};
const escapeStringRegexp = escapeStringRegexp$1, regexpCache = /* @__PURE__ */ new Map();
function sanitizeArray(a420, u2) {
  if (!Array.isArray(a420))
    switch (typeof a420) {
      case "string":
        a420 = [a420];
        break;
      case "undefined":
        a420 = [];
        break;
      default:
        throw new TypeError(`Expected '${u2}' to be a string or an array, but got a type of '${typeof a420}'`);
    }
  return a420.filter((c) => {
    if (typeof c != "string") {
      if (typeof c > "u")
        return false;
      throw new TypeError(`Expected '${u2}' to be an array of strings, but found a type of '${typeof c}' in the array`);
    }
    return true;
  });
}
function makeRegexp(a420, u2) {
  u2 = { caseSensitive: false, ...u2 };
  const c = a420 + JSON.stringify(u2);
  if (regexpCache.has(c))
    return regexpCache.get(c);
  const l2 = a420[0] === "!";
  l2 && (a420 = a420.slice(1)), a420 = escapeStringRegexp(a420).replace(/\\\*/g, "[\\s\\S]*");
  const v2 = new RegExp(`^${a420}$`, u2.caseSensitive ? "" : "i");
  return v2.negated = l2, regexpCache.set(c, v2), v2;
}
matcher.exports = (a420, u2, c) => {
  if (a420 = sanitizeArray(a420, "inputs"), u2 = sanitizeArray(u2, "patterns"), u2.length === 0)
    return [];
  const l2 = u2[0][0] === "!";
  u2 = u2.map((p2) => makeRegexp(p2, c));
  const v2 = [];
  for (const p2 of a420) {
    let _ = l2;
    for (const I2 of u2)
      I2.test(p2) && (_ = !I2.negated);
    _ && v2.push(p2);
  }
  return v2;
};
matcher.exports.isMatch = (a420, u2, c) => (a420 = sanitizeArray(a420, "inputs"), u2 = sanitizeArray(u2, "patterns"), u2.length === 0 ? false : a420.some((l2) => u2.every((v2) => {
  const p2 = makeRegexp(v2, c), _ = p2.test(l2);
  return p2.negated ? !_ : _;
})));
var matcherExports = matcher.exports, __createBinding$1 = commonjsGlobal$1 && commonjsGlobal$1.__createBinding || (Object.create ? function(a420, u2, c, l2) {
  l2 === void 0 && (l2 = c);
  var v2 = Object.getOwnPropertyDescriptor(u2, c);
  (!v2 || ("get" in v2 ? !u2.__esModule : v2.writable || v2.configurable)) && (v2 = { enumerable: true, get: function() {
    return u2[c];
  } }), Object.defineProperty(a420, l2, v2);
} : function(a420, u2, c, l2) {
  l2 === void 0 && (l2 = c), a420[l2] = u2[c];
}), __setModuleDefault$1 = commonjsGlobal$1 && commonjsGlobal$1.__setModuleDefault || (Object.create ? function(a420, u2) {
  Object.defineProperty(a420, "default", { enumerable: true, value: u2 });
} : function(a420, u2) {
  a420.default = u2;
}), __importStar$1 = commonjsGlobal$1 && commonjsGlobal$1.__importStar || function(a420) {
  if (a420 && a420.__esModule)
    return a420;
  var u2 = {};
  if (a420 != null)
    for (var c in a420)
      c !== "default" && Object.prototype.hasOwnProperty.call(a420, c) && __createBinding$1(u2, a420, c);
  return __setModuleDefault$1(u2, a420), u2;
}, __importDefault$8 = commonjsGlobal$1 && commonjsGlobal$1.__importDefault || function(a420) {
  return a420 && a420.__esModule ? a420 : { default: a420 };
};
Object.defineProperty(eventapi, "__esModule", { value: true });
eventapi.EventApi = void 0;
const EventApiModel = __importStar$1(dist$1), isomorphic_ws_1 = __importDefault$8(browser$e), uuid_1 = require$$1$4, NiceGrpc = __importStar$1(lib$1), matcher_1 = matcherExports, api_1 = api$3, clientVersion = version$4, WS_PING_INTERVAL = 2e4, WS_PING_TIMEOUT = 1e4, WS_RECONNECT_DELAY = 2e3, WS_MAX_BADAUTH_ATTEMPTS = 3, LOG_CATEGORY = "EventApi";
class EventApi extends api_1.ApiClient {
  constructor(u2, c, l2, v2, p2, _) {
    super(u2, c, v2, LOG_CATEGORY, p2, _), this.websocketServer = l2, this.subscriptions = /* @__PURE__ */ new Set(), this.eventHandlers = {}, this.calls = {}, this.messageQueue = [], this.websocketReady = false, this.reconnectionAttempts = 0, this.badAuthentication = false, this.eventsClient = null;
  }
  /**
  * Publish a custom event
  *
  * note: if this session has an established stream, all custom
  * events will use that transport.
  *
  * @param request
  * @returns
  */
  publish(...u2) {
    return this.websocketReady ? this.call("publish", u2[0]) : this.eventsClient.publish(...u2);
  }
  /**
  * Open the connection
  */
  connect() {
    if (!this.ws) {
      this.cleanup();
      const u2 = this.accessToken, c = [`version=${clientVersion}`, `sessionid=${this.sessionId}`];
      this.sdkVersion && c.push(`sdkversion=${this.sdkVersion}`), this.ws = new isomorphic_ws_1.default(`${this.websocketServer}/stream?${c.join("&")}`, ["Bearer", this.accessToken]);
      let l2;
      this.ws.addEventListener("message", (v2) => {
        const p2 = JSON.parse(v2.data.toString()), _ = p2.result;
        if (p2.error && (l2 = p2.error, this.handleEvent("error", { error: { code: p2.code, message: p2.message } }), ["You do not have permission to this resource", "You do not have permission to this resource"].includes(p2.message) && (this.badAuthentication = true)), !_)
          return;
        _.reconnectBefore && _.reconnectBefore.reauthenticate && this.accessToken === u2 && (this.badAuthentication = true);
        const I2 = EventApiModel.eventsApiSupportedEvents.find((P2) => !!_[P2]);
        I2 && this.handleEvent(I2, _);
      }), this.ws.addEventListener("open", () => {
        this.log.info("websocket connected"), this.call("ping", "hello", { timeout: WS_PING_TIMEOUT, skipQueue: true }).then(() => {
          this.ready();
        }).catch((v2) => {
          !l2 && v2.message !== "Stream connection closed" && this.disconnect("hello timeout");
        });
      }), this.ws.addEventListener("close", (v2) => {
        var p2;
        l2 ? this.reconnect(`${(p2 = l2 == null ? void 0 : l2.message) !== null && p2 !== void 0 ? p2 : "unknown"}`) : this.reconnect(`closed - ${v2.reason || v2.code}`);
      }), this.ws.addEventListener("error", (v2) => {
        l2 = v2;
      });
    }
  }
  /**
  * Subscribe to an event
  *
  * note: if a connection does not exist, one will be established.
  *
  * @param type
  * @param payload
  */
  async subscribe(u2, c = {}) {
    return this.call("subscribe", { name: u2, ...c }).then(() => {
      this.subscriptions.add(JSON.stringify({ name: u2, ...c }));
    });
  }
  /**
  * Unsubscribe from an event
  * @param type
  * @param payload
  */
  async unsubscribe(u2, c = {}) {
    this.subscriptions.delete(JSON.stringify({ name: u2, payload: c })), await this.call("unsubscribe", { name: u2, ...c });
  }
  on(u2, c, l2) {
    const v2 = l2 || c, p2 = { ignoreSessionEvents: false, allowedSessionEvents: [], ...l2 ? c : {} };
    this.eventHandlers[u2] || (this.eventHandlers[u2] = []), this.eventHandlers[u2].push({ ...p2, handler: v2 });
  }
  off(u2, c, l2) {
    var v2;
    const p2 = l2 || c, _ = { ignoreSessionEvents: false, allowedSessionEvents: [], ...l2 ? c : {} };
    this.eventHandlers[u2] = ((v2 = this.eventHandlers[u2]) !== null && v2 !== void 0 ? v2 : []).filter((I2) => !(I2.ignoreSessionEvents === _.ignoreSessionEvents && I2.allowedSessionEvents === _.allowedSessionEvents && I2.handler === p2 && I2.name === _.name));
  }
  /**
  * Disconnect the websocket connection
  */
  disconnect(u2) {
    this.log.warn(`disconnected from events reason=${u2}`), Object.values(this.calls).forEach((c) => {
      clearTimeout(c.timeout), c.reject(new Error("Stream connection closed"));
    }), this.calls = {}, this.cleanup();
  }
  _setup(u2) {
    this.eventsClient = this.clientFactory.create(EventApiModel.EventServiceDefinition, this.channel, { "*": u2 }), this.badAuthentication && (this.badAuthentication = false, this.reconnectionAttempts = 0, this.reconnect("updated token"));
  }
  /**
  * Called when the websocket is ready.
  */
  ready() {
    this.reconnectionAttempts = 0, this.badAuthentication = false, this.websocketReady = true, this.handleEvent("connected", { connected: void 0 });
    for (const u2 of this.subscriptions.values())
      this.send({ subscribe: JSON.parse(u2), correlationId: (0, uuid_1.v4)() });
    for (const u2 of this.messageQueue)
      this.send(u2);
    this.messageQueue = [], this.pingLoop = setInterval(() => {
      this.ping();
    }, WS_PING_INTERVAL);
  }
  ping() {
    this.call("ping", `${+/* @__PURE__ */ new Date()}`, { timeout: WS_PING_TIMEOUT }).catch(() => {
      this.reconnect("connection stalled");
    });
  }
  /**
  * Reconnect event stream
  *
  * @param reason Rec
  */
  reconnect(u2) {
    this.disconnect(u2), this.reconnectTimeout = setTimeout(() => {
      if (this.reconnectionAttempts++, this.badAuthentication && this.reconnectionAttempts >= WS_MAX_BADAUTH_ATTEMPTS) {
        this.log.warn("Maximum number of reconnection attempts reached with bad authentication, please re-authenticate the SDK");
        return;
      }
      this.connect();
    }, WS_RECONNECT_DELAY);
  }
  /**
  * Send a raw message to the websocket.
  *
  * @param data
  */
  send(u2) {
    this.ws && this.ws.readyState === this.ws.OPEN ? this.ws.send(JSON.stringify(u2)) : this.log.warn("Message sent to a disconnected stream");
  }
  /**
  * Process a stream event
  *
  * @param name the name of the event
  * @param payload the full event stream payload
  *
  * @returns void
  */
  handleEvent(u2, c) {
    var l2;
    if (this.calls[c.correlationId]) {
      const v2 = EventApiModel.eventsApiEventRpcCalls[this.calls[c.correlationId].method] === u2, p2 = !!c.error;
      if (v2 || p2) {
        this.resolveCall(u2, c);
        return;
      }
    }
    for (const v2 of (l2 = this.eventHandlers[u2]) !== null && l2 !== void 0 ? l2 : []) {
      if (u2 === "event" && c.event) {
        if (c.sessionId === this.sessionId && v2.ignoreSessionEvents && !v2.allowedSessionEvents.includes(c.event.name)) {
          this.log.trace("ignoring user event from self: " + c.event.name + ", payload.sessionId=" + c.sessionId + ", this.sessionId");
          continue;
        }
        if (v2.name && !(0, matcher_1.isMatch)(c.event.name, v2.name))
          continue;
        if (this.eventLogCallback) {
          let p2, _ = c.event.name, I2;
          if (c.event.name.startsWith(EventApi.APISTREAM_EVENT_PREFIX)) {
            let P2 = c.event.name.split(":");
            P2.length == 4 && (p2 = P2[1], _ = P2[2], I2 = P2[3]), this.eventLogCallback(p2, _, I2, c);
          }
        }
      } else if (c.sessionId === this.sessionId && v2.ignoreSessionEvents) {
        this.log.trace("ignoring event from self: " + c.event.name + ", payload.sessionId=" + c.sessionId + ", this.sessionId");
        continue;
      }
      this.log.trace("processing event: payload.sessionId=" + c.sessionId + ", this.sessionId"), v2.handler(c ? c[u2] : void 0, { isFromCurrentSession: c.sessionId === this.sessionId });
    }
  }
  /**
  * Make an RPC call
  *
  * Initiates an async request via the stream. A correlationId is generated and used to track
  * responses and errors. A handler is registered
  *
  * @param method request method to call
  * @param payload payload to send
  * @param opts timeout
  * @returns
  */
  async call(u2, c, l2 = { timeout: 2e4, skipQueue: false }) {
    this.ws || this.connect();
    const v2 = (0, uuid_1.v4)();
    return new Promise((p2, _) => {
      const I2 = setTimeout(() => {
        delete this.calls[v2], _(new Error("Request timed out"));
      }, l2.timeout);
      this.calls[v2] = { resolve: p2, reject: _, timeout: I2, method: u2 }, this.websocketReady || l2.skipQueue ? this.send({ [u2]: c, correlationId: v2 }) : this.messageQueue.push({ [u2]: c, correlationId: v2 });
    });
  }
  /**
  * Handler for `.call()`
  *
  * Handle response events for a socket call.
  *
  * @param name name of responding event
  * @param payload payload of the event
  * @returns void
  */
  resolveCall(u2, c) {
    const l2 = this.calls[c.correlationId];
    if (l2) {
      if (clearTimeout(l2.timeout), delete this.calls[c.correlationId], u2 === "error" && c.error) {
        l2.reject(new NiceGrpc.ClientError("error", c.error.code, c.error.message));
        return;
      }
      l2.resolve(c[u2]);
    }
  }
  /**
  * Cleanup connection
  *
  * This cleans up the local state for a given websocket connection.
  */
  cleanup() {
    clearTimeout(this.pingLoop), clearTimeout(this.reconnectTimeout), this.websocketReady = false, this.ws && (this.ws.onclose = function() {
    }, this.ws.close(), this.ws = null);
  }
}
eventapi.EventApi = EventApi;
EventApi.APISTREAM_EVENT_PREFIX = "apistream";
var livekit = {}, __importDefault$7 = commonjsGlobal$1 && commonjsGlobal$1.__importDefault || function(a420) {
  return a420 && a420.__esModule ? a420 : { default: a420 };
};
Object.defineProperty(livekit, "__esModule", { value: true });
livekit.LiveKitUtils = void 0;
const jwt_decode_1 = __importDefault$7(require$$0$3);
class LiveKitUtils {
  static decodeJwt(u2) {
    return (0, jwt_decode_1.default)(u2, { header: false });
  }
  static isRoomAdmin(u2) {
    return LiveKitUtils.decodeJwt(u2).video.roomAdmin;
  }
  static getRoomName(u2) {
    return LiveKitUtils.decodeJwt(u2).video.room;
  }
}
livekit.LiveKitUtils = LiveKitUtils;
(function(a420) {
  var u2 = commonjsGlobal$1 && commonjsGlobal$1.__createBinding || (Object.create ? function(Te2, q2, z2, C2) {
    C2 === void 0 && (C2 = z2);
    var b = Object.getOwnPropertyDescriptor(q2, z2);
    (!b || ("get" in b ? !q2.__esModule : b.writable || b.configurable)) && (b = { enumerable: true, get: function() {
      return q2[z2];
    } }), Object.defineProperty(Te2, C2, b);
  } : function(Te2, q2, z2, C2) {
    C2 === void 0 && (C2 = z2), Te2[C2] = q2[z2];
  }), c = commonjsGlobal$1 && commonjsGlobal$1.__setModuleDefault || (Object.create ? function(Te2, q2) {
    Object.defineProperty(Te2, "default", { enumerable: true, value: q2 });
  } : function(Te2, q2) {
    Te2.default = q2;
  }), l2 = commonjsGlobal$1 && commonjsGlobal$1.__importStar || function(Te2) {
    if (Te2 && Te2.__esModule)
      return Te2;
    var q2 = {};
    if (Te2 != null)
      for (var z2 in Te2)
        z2 !== "default" && Object.prototype.hasOwnProperty.call(Te2, z2) && u2(q2, Te2, z2);
    return c(q2, Te2), q2;
  }, v2 = commonjsGlobal$1 && commonjsGlobal$1.__importDefault || function(Te2) {
    return Te2 && Te2.__esModule ? Te2 : { default: Te2 };
  };
  Object.defineProperty(a420, "__esModule", { value: true }), a420.ApiStream = a420.LiveKitUtils = a420.EventApiModel = a420.LayoutApiModel = a420.LiveApiModel = void 0;
  const p2 = v2(require$$0$3), _ = require$$1$4, I2 = require$$2$2, P2 = layoutapi, $ = liveapi, F2 = eventapi, H2 = l2(api$2);
  a420.LiveApiModel = H2;
  const j = l2(dist$2);
  a420.LayoutApiModel = j;
  const ee2 = l2(dist$1);
  a420.EventApiModel = ee2;
  const X2 = livekit;
  Object.defineProperty(a420, "LiveKitUtils", { enumerable: true, get: function() {
    return X2.LiveKitUtils;
  } });
  const ie2 = logger, Q2 = version$4, ne2 = { dev: "http://127.0.0.1:8081", stage: "https://live.silly.horse/grpcweb/live/v2", prod: "https://live.api.stream/grpcweb/live/v2" }, Z2 = { dev: "https://live.silly.horse/grpcweb/layout/v2", stage: "https://live.silly.horse/grpcweb/layout/v2", prod: "https://live.api.stream/grpcweb/layout/v2" }, de2 = { dev: "wss://live.silly.horse/event/v2", stage: "wss://live.silly.horse/event/v2", prod: "wss://live.api.stream/event/v2" }, pe2 = { dev: "https://live.silly.horse/grpcweb/event/v2", stage: "https://live.silly.horse/grpcweb/event/v2", prod: "https://live.api.stream/grpcweb/event/v2" }, le2 = { dev: "wss://live.silly.horse/webrtc/v2", stage: "wss://live.silly.horse/webrtc/v2", prod: "wss://live.api.stream/webrtc/v2" }, be2 = { dev: "https://live.silly.horse/webrtc/v2", stage: "https://live.silly.horse/webrtc/v2", prod: "https://live.api.stream/webrtc/v2" };
  class ke2 {
    /**
    * Create an ApiStream API Client
    */
    constructor(q2 = {}) {
      var z2;
      const C2 = { env: "prod", logLevel: "Warn", ...q2 };
      this.env = C2.env;
      let b = (0, _.v4)();
      C2.sessionId != null && (b = C2.sessionId), this.log = ie2.logger.getCategory("ApiStream"), this.setLogLevel(C2.env == "dev" ? "Trace" : C2.logLevel);
      const E2 = (z2 = C2.overrideEndpoints) !== null && z2 !== void 0 ? z2 : {};
      E2.liveApiServer == null && (E2.liveApiServer = ne2[this.env]), E2.layoutApiServer == null && (E2.layoutApiServer = Z2[this.env]), E2.eventApiServer == null && (E2.eventApiServer = pe2[this.env]), E2.eventApiWebSocketServer == null && (E2.eventApiWebSocketServer = de2[this.env]), this.eventApi = new F2.EventApi(b, E2.eventApiServer, E2.eventApiWebSocketServer, C2.sdkVersion, C2.apiLogCallback, C2.eventLogCallback), this.layoutApi = new P2.LayoutApi(b, this.eventApi, E2.layoutApiServer, C2.sdkVersion, C2.apiLogCallback), this.liveApi = new $.LiveApi(b, this.eventApi, E2.liveApiServer, this.setAccessToken.bind(this), C2.apiKey, C2.sdkVersion, C2.apiLogCallback), this.eventApi.on("reconnectBefore", (k) => {
        k.reauthenticate && this.liveApi.authentication.refreshAccessToken({}).catch(() => {
        });
      }), this.log.info("api.stream: sessionid=" + b + ", version=" + Q2 + ", sdkVersion=" + C2.sdkVersion);
    }
    /**
    * Returns the live api client
    *
    * @returns the live api client
    */
    LiveApi() {
      return this.liveApi;
    }
    /**
    * Returns the layout api client
    *
    * @returns the layout api client
    */
    LayoutApi() {
      return this.layoutApi;
    }
    /**
    * Returns the layout api client
    *
    * @returns the layout api client
    */
    EventApi() {
      return this.eventApi;
    }
    setLogLevel(q2) {
      try {
        let z2 = I2.LogLevel.toLogLevel(q2);
        ie2.logger.updateRuntimeSettings({ level: z2 });
      } catch {
        this.log.warn(`unknown logging level ${q2}`);
      }
    }
    setAccessToken(q2) {
      this.decodedAccessToken = ke2.decodeAccessToken(q2), this.log.debug("setting accessToken", q2, this.decodedAccessToken), this.layoutApi.setAccessToken(q2), this.liveApi.setAccessToken(q2), this.eventApi.setAccessToken(q2);
    }
    getAccessToken() {
      return this.decodedAccessToken;
    }
    /**
    * Are we running as a guest role?
    *
    * @returns {(ApiStream.GuestProject | null)} return the active project if running as a guest role
    */
    getGuestProject() {
      return this.decodedAccessToken.guestControl;
    }
    /**
    * Initialize the api library and check if we are running inside of the rendering engine
    * @async
    * @param {string} accessToken - a valid ApiStream access token
    * @returns {(ApiStream.GuestProject | null)} if we are operating inside of the rendering engine, this is the active project
    */
    async load(q2) {
      if (q2 == null && typeof window < "u") {
        let z2 = this.parseQuery();
        z2.get(ke2.ACCESS_TOKEN_QUERY_PARAM) != null && (q2 = z2.get(ke2.ACCESS_TOKEN_QUERY_PARAM));
      }
      return q2 != null && (this.setAccessToken(q2), this.decodedAccessToken.guestControl != null) ? (this.log.info("loading guest token and exchanging"), await this.LiveApi().authentication.refreshAccessToken({}), this.log.info("auto-loading project = " + JSON.stringify(this.decodedAccessToken.guestControl)), this.decodedAccessToken.guestControl) : null;
    }
    /**
    * get the signaling address of the appropriate livekit webrtc server
    *
    * @param {boolean} admin - if true, return the admin (vs. client) address
    * @returns {string} the address of the appropriate livekit webrtc server
    */
    getLiveKitServer(q2 = false) {
      return q2 ? be2[this.env] : le2[this.env];
    }
    parseQuery() {
      let q2 = window.location.search, z2 = /* @__PURE__ */ new Map(), C2 = (q2[0] === "?" ? q2.substr(1) : q2).split("&");
      for (let b = 0; b < C2.length; b++) {
        let E2 = C2[b].split("=");
        E2.length == 2 && (z2.set(decodeURIComponent(E2[0]), decodeURIComponent(E2[1] || "")), this.log.debug(`found query param: ${decodeURIComponent(E2[0])}=${decodeURIComponent(E2[1] || "")}`));
      }
      return z2;
    }
    static decodeAccessToken(q2) {
      let z2 = (0, p2.default)(q2, { header: false }), C2 = { serviceUserId: z2.user.serviceUserId, userId: z2.user.userId, displayName: z2.user.displayName, trial: z2.user.trial, demo: z2.user.demo };
      return z2.guestControl != null && (C2.guestControl = { collectionId: z2.guestControl.collectionId, projectId: z2.guestControl.projectId, role: H2.roleFromJSON(z2.guestControl.role) }), C2;
    }
  }
  a420.ApiStream = ke2, ke2.ACCESS_TOKEN_QUERY_PARAM = "at";
})(lib$2);
var dist = {};
function getDefaultExportFromCjs$1(a420) {
  return a420 && a420.__esModule && Object.prototype.hasOwnProperty.call(a420, "default") ? a420.default : a420;
}
var browser$d = { exports: {} }, process = browser$d.exports = {}, cachedSetTimeout, cachedClearTimeout;
function defaultSetTimout() {
  throw new Error("setTimeout has not been defined");
}
function defaultClearTimeout() {
  throw new Error("clearTimeout has not been defined");
}
(function() {
  try {
    typeof setTimeout == "function" ? cachedSetTimeout = setTimeout : cachedSetTimeout = defaultSetTimout;
  } catch {
    cachedSetTimeout = defaultSetTimout;
  }
  try {
    typeof clearTimeout == "function" ? cachedClearTimeout = clearTimeout : cachedClearTimeout = defaultClearTimeout;
  } catch {
    cachedClearTimeout = defaultClearTimeout;
  }
})();
function runTimeout(a420) {
  if (cachedSetTimeout === setTimeout)
    return setTimeout(a420, 0);
  if ((cachedSetTimeout === defaultSetTimout || !cachedSetTimeout) && setTimeout)
    return cachedSetTimeout = setTimeout, setTimeout(a420, 0);
  try {
    return cachedSetTimeout(a420, 0);
  } catch {
    try {
      return cachedSetTimeout.call(null, a420, 0);
    } catch {
      return cachedSetTimeout.call(this, a420, 0);
    }
  }
}
function runClearTimeout(a420) {
  if (cachedClearTimeout === clearTimeout)
    return clearTimeout(a420);
  if ((cachedClearTimeout === defaultClearTimeout || !cachedClearTimeout) && clearTimeout)
    return cachedClearTimeout = clearTimeout, clearTimeout(a420);
  try {
    return cachedClearTimeout(a420);
  } catch {
    try {
      return cachedClearTimeout.call(null, a420);
    } catch {
      return cachedClearTimeout.call(this, a420);
    }
  }
}
var queue = [], draining = false, currentQueue, queueIndex = -1;
function cleanUpNextTick() {
  !draining || !currentQueue || (draining = false, currentQueue.length ? queue = currentQueue.concat(queue) : queueIndex = -1, queue.length && drainQueue());
}
function drainQueue() {
  if (!draining) {
    var a420 = runTimeout(cleanUpNextTick);
    draining = true;
    for (var u2 = queue.length; u2; ) {
      for (currentQueue = queue, queue = []; ++queueIndex < u2; )
        currentQueue && currentQueue[queueIndex].run();
      queueIndex = -1, u2 = queue.length;
    }
    currentQueue = null, draining = false, runClearTimeout(a420);
  }
}
process.nextTick = function(a420) {
  var u2 = new Array(arguments.length - 1);
  if (arguments.length > 1)
    for (var c = 1; c < arguments.length; c++)
      u2[c - 1] = arguments[c];
  queue.push(new Item(a420, u2)), queue.length === 1 && !draining && runTimeout(drainQueue);
};
function Item(a420, u2) {
  this.fun = a420, this.array = u2;
}
Item.prototype.run = function() {
  this.fun.apply(null, this.array);
};
process.title = "browser";
process.browser = true;
process.env = {};
process.argv = [];
process.version = "";
process.versions = {};
function noop$5() {
}
process.on = noop$5;
process.addListener = noop$5;
process.once = noop$5;
process.off = noop$5;
process.removeListener = noop$5;
process.removeAllListeners = noop$5;
process.emit = noop$5;
process.prependListener = noop$5;
process.prependOnceListener = noop$5;
process.listeners = function(a420) {
  return [];
};
process.binding = function(a420) {
  throw new Error("process.binding is not supported");
};
process.cwd = function() {
  return "/";
};
process.chdir = function(a420) {
  throw new Error("process.chdir is not supported");
};
process.umask = function() {
  return 0;
};
var browserExports$1 = browser$d.exports;
const process$1 = /* @__PURE__ */ getDefaultExportFromCjs$1(browserExports$1);
var AccessToken$1 = {}, jws$3 = {}, safeBuffer$4 = { exports: {} };
const require$$0$2 = /* @__PURE__ */ getAugmentedNamespace(dist$3);
(function(a420, u2) {
  var c = require$$0$2, l2 = c.Buffer;
  function v2(_, I2) {
    for (var P2 in _)
      I2[P2] = _[P2];
  }
  l2.from && l2.alloc && l2.allocUnsafe && l2.allocUnsafeSlow ? a420.exports = c : (v2(c, u2), u2.Buffer = p2);
  function p2(_, I2, P2) {
    return l2(_, I2, P2);
  }
  v2(l2, p2), p2.from = function(_, I2, P2) {
    if (typeof _ == "number")
      throw new TypeError("Argument must not be a number");
    return l2(_, I2, P2);
  }, p2.alloc = function(_, I2, P2) {
    if (typeof _ != "number")
      throw new TypeError("Argument must be a number");
    var $ = l2(_);
    return I2 !== void 0 ? typeof P2 == "string" ? $.fill(I2, P2) : $.fill(I2) : $.fill(0), $;
  }, p2.allocUnsafe = function(_) {
    if (typeof _ != "number")
      throw new TypeError("Argument must be a number");
    return l2(_);
  }, p2.allocUnsafeSlow = function(_) {
    if (typeof _ != "number")
      throw new TypeError("Argument must be a number");
    return c.SlowBuffer(_);
  };
})(safeBuffer$4, safeBuffer$4.exports);
var safeBufferExports$3 = safeBuffer$4.exports, events$1 = { exports: {} }, R$1 = typeof Reflect == "object" ? Reflect : null, ReflectApply$1 = R$1 && typeof R$1.apply == "function" ? R$1.apply : function a43(u2, c, l2) {
  return Function.prototype.apply.call(u2, c, l2);
}, ReflectOwnKeys$1;
R$1 && typeof R$1.ownKeys == "function" ? ReflectOwnKeys$1 = R$1.ownKeys : Object.getOwnPropertySymbols ? ReflectOwnKeys$1 = function(u2) {
  return Object.getOwnPropertyNames(u2).concat(Object.getOwnPropertySymbols(u2));
} : ReflectOwnKeys$1 = function(u2) {
  return Object.getOwnPropertyNames(u2);
};
function ProcessEmitWarning$1(a420) {
  console && console.warn && console.warn(a420);
}
var NumberIsNaN$1 = Number.isNaN || function a44(u2) {
  return u2 !== u2;
};
function EventEmitter$1() {
  EventEmitter$1.init.call(this);
}
events$1.exports = EventEmitter$1;
events$1.exports.once = once$7;
EventEmitter$1.EventEmitter = EventEmitter$1;
EventEmitter$1.prototype._events = void 0;
EventEmitter$1.prototype._eventsCount = 0;
EventEmitter$1.prototype._maxListeners = void 0;
var defaultMaxListeners$1 = 10;
function checkListener$1(a420) {
  if (typeof a420 != "function")
    throw new TypeError('The "listener" argument must be of type Function. Received type ' + typeof a420);
}
Object.defineProperty(EventEmitter$1, "defaultMaxListeners", { enumerable: true, get: function() {
  return defaultMaxListeners$1;
}, set: function(a420) {
  if (typeof a420 != "number" || a420 < 0 || NumberIsNaN$1(a420))
    throw new RangeError('The value of "defaultMaxListeners" is out of range. It must be a non-negative number. Received ' + a420 + ".");
  defaultMaxListeners$1 = a420;
} });
EventEmitter$1.init = function() {
  (this._events === void 0 || this._events === Object.getPrototypeOf(this)._events) && (this._events = /* @__PURE__ */ Object.create(null), this._eventsCount = 0), this._maxListeners = this._maxListeners || void 0;
};
EventEmitter$1.prototype.setMaxListeners = function a45(u2) {
  if (typeof u2 != "number" || u2 < 0 || NumberIsNaN$1(u2))
    throw new RangeError('The value of "n" is out of range. It must be a non-negative number. Received ' + u2 + ".");
  return this._maxListeners = u2, this;
};
function _getMaxListeners$1(a420) {
  return a420._maxListeners === void 0 ? EventEmitter$1.defaultMaxListeners : a420._maxListeners;
}
EventEmitter$1.prototype.getMaxListeners = function a46() {
  return _getMaxListeners$1(this);
};
EventEmitter$1.prototype.emit = function a47(u2) {
  for (var c = [], l2 = 1; l2 < arguments.length; l2++)
    c.push(arguments[l2]);
  var v2 = u2 === "error", p2 = this._events;
  if (p2 !== void 0)
    v2 = v2 && p2.error === void 0;
  else if (!v2)
    return false;
  if (v2) {
    var _;
    if (c.length > 0 && (_ = c[0]), _ instanceof Error)
      throw _;
    var I2 = new Error("Unhandled error." + (_ ? " (" + _.message + ")" : ""));
    throw I2.context = _, I2;
  }
  var P2 = p2[u2];
  if (P2 === void 0)
    return false;
  if (typeof P2 == "function")
    ReflectApply$1(P2, this, c);
  else
    for (var $ = P2.length, F2 = arrayClone$1(P2, $), l2 = 0; l2 < $; ++l2)
      ReflectApply$1(F2[l2], this, c);
  return true;
};
function _addListener$1(a420, u2, c, l2) {
  var v2, p2, _;
  if (checkListener$1(c), p2 = a420._events, p2 === void 0 ? (p2 = a420._events = /* @__PURE__ */ Object.create(null), a420._eventsCount = 0) : (p2.newListener !== void 0 && (a420.emit("newListener", u2, c.listener ? c.listener : c), p2 = a420._events), _ = p2[u2]), _ === void 0)
    _ = p2[u2] = c, ++a420._eventsCount;
  else if (typeof _ == "function" ? _ = p2[u2] = l2 ? [c, _] : [_, c] : l2 ? _.unshift(c) : _.push(c), v2 = _getMaxListeners$1(a420), v2 > 0 && _.length > v2 && !_.warned) {
    _.warned = true;
    var I2 = new Error("Possible EventEmitter memory leak detected. " + _.length + " " + String(u2) + " listeners added. Use emitter.setMaxListeners() to increase limit");
    I2.name = "MaxListenersExceededWarning", I2.emitter = a420, I2.type = u2, I2.count = _.length, ProcessEmitWarning$1(I2);
  }
  return a420;
}
EventEmitter$1.prototype.addListener = function a48(u2, c) {
  return _addListener$1(this, u2, c, false);
};
EventEmitter$1.prototype.on = EventEmitter$1.prototype.addListener;
EventEmitter$1.prototype.prependListener = function a49(u2, c) {
  return _addListener$1(this, u2, c, true);
};
function onceWrapper$1() {
  if (!this.fired)
    return this.target.removeListener(this.type, this.wrapFn), this.fired = true, arguments.length === 0 ? this.listener.call(this.target) : this.listener.apply(this.target, arguments);
}
function _onceWrap$1(a420, u2, c) {
  var l2 = { fired: false, wrapFn: void 0, target: a420, type: u2, listener: c }, v2 = onceWrapper$1.bind(l2);
  return v2.listener = c, l2.wrapFn = v2, v2;
}
EventEmitter$1.prototype.once = function a50(u2, c) {
  return checkListener$1(c), this.on(u2, _onceWrap$1(this, u2, c)), this;
};
EventEmitter$1.prototype.prependOnceListener = function a51(u2, c) {
  return checkListener$1(c), this.prependListener(u2, _onceWrap$1(this, u2, c)), this;
};
EventEmitter$1.prototype.removeListener = function a52(u2, c) {
  var l2, v2, p2, _, I2;
  if (checkListener$1(c), v2 = this._events, v2 === void 0)
    return this;
  if (l2 = v2[u2], l2 === void 0)
    return this;
  if (l2 === c || l2.listener === c)
    --this._eventsCount === 0 ? this._events = /* @__PURE__ */ Object.create(null) : (delete v2[u2], v2.removeListener && this.emit("removeListener", u2, l2.listener || c));
  else if (typeof l2 != "function") {
    for (p2 = -1, _ = l2.length - 1; _ >= 0; _--)
      if (l2[_] === c || l2[_].listener === c) {
        I2 = l2[_].listener, p2 = _;
        break;
      }
    if (p2 < 0)
      return this;
    p2 === 0 ? l2.shift() : spliceOne$1(l2, p2), l2.length === 1 && (v2[u2] = l2[0]), v2.removeListener !== void 0 && this.emit("removeListener", u2, I2 || c);
  }
  return this;
};
EventEmitter$1.prototype.off = EventEmitter$1.prototype.removeListener;
EventEmitter$1.prototype.removeAllListeners = function a53(u2) {
  var c, l2, v2;
  if (l2 = this._events, l2 === void 0)
    return this;
  if (l2.removeListener === void 0)
    return arguments.length === 0 ? (this._events = /* @__PURE__ */ Object.create(null), this._eventsCount = 0) : l2[u2] !== void 0 && (--this._eventsCount === 0 ? this._events = /* @__PURE__ */ Object.create(null) : delete l2[u2]), this;
  if (arguments.length === 0) {
    var p2 = Object.keys(l2), _;
    for (v2 = 0; v2 < p2.length; ++v2)
      _ = p2[v2], _ !== "removeListener" && this.removeAllListeners(_);
    return this.removeAllListeners("removeListener"), this._events = /* @__PURE__ */ Object.create(null), this._eventsCount = 0, this;
  }
  if (c = l2[u2], typeof c == "function")
    this.removeListener(u2, c);
  else if (c !== void 0)
    for (v2 = c.length - 1; v2 >= 0; v2--)
      this.removeListener(u2, c[v2]);
  return this;
};
function _listeners$1(a420, u2, c) {
  var l2 = a420._events;
  if (l2 === void 0)
    return [];
  var v2 = l2[u2];
  return v2 === void 0 ? [] : typeof v2 == "function" ? c ? [v2.listener || v2] : [v2] : c ? unwrapListeners$1(v2) : arrayClone$1(v2, v2.length);
}
EventEmitter$1.prototype.listeners = function a54(u2) {
  return _listeners$1(this, u2, true);
};
EventEmitter$1.prototype.rawListeners = function a55(u2) {
  return _listeners$1(this, u2, false);
};
EventEmitter$1.listenerCount = function(a420, u2) {
  return typeof a420.listenerCount == "function" ? a420.listenerCount(u2) : listenerCount$1.call(a420, u2);
};
EventEmitter$1.prototype.listenerCount = listenerCount$1;
function listenerCount$1(a420) {
  var u2 = this._events;
  if (u2 !== void 0) {
    var c = u2[a420];
    if (typeof c == "function")
      return 1;
    if (c !== void 0)
      return c.length;
  }
  return 0;
}
EventEmitter$1.prototype.eventNames = function a56() {
  return this._eventsCount > 0 ? ReflectOwnKeys$1(this._events) : [];
};
function arrayClone$1(a420, u2) {
  for (var c = new Array(u2), l2 = 0; l2 < u2; ++l2)
    c[l2] = a420[l2];
  return c;
}
function spliceOne$1(a420, u2) {
  for (; u2 + 1 < a420.length; u2++)
    a420[u2] = a420[u2 + 1];
  a420.pop();
}
function unwrapListeners$1(a420) {
  for (var u2 = new Array(a420.length), c = 0; c < u2.length; ++c)
    u2[c] = a420[c].listener || a420[c];
  return u2;
}
function once$7(a420, u2) {
  return new Promise(function(c, l2) {
    function v2(_) {
      a420.removeListener(u2, p2), l2(_);
    }
    function p2() {
      typeof a420.removeListener == "function" && a420.removeListener("error", v2), c([].slice.call(arguments));
    }
    eventTargetAgnosticAddListener$1(a420, u2, p2, { once: true }), u2 !== "error" && addErrorHandlerIfEventEmitter$1(a420, v2, { once: true });
  });
}
function addErrorHandlerIfEventEmitter$1(a420, u2, c) {
  typeof a420.on == "function" && eventTargetAgnosticAddListener$1(a420, "error", u2, c);
}
function eventTargetAgnosticAddListener$1(a420, u2, c, l2) {
  if (typeof a420.on == "function")
    l2.once ? a420.once(u2, c) : a420.on(u2, c);
  else if (typeof a420.addEventListener == "function")
    a420.addEventListener(u2, function v2(p2) {
      l2.once && a420.removeEventListener(u2, v2), c(p2);
    });
  else
    throw new TypeError('The "emitter" argument must be of type EventEmitter. Received type ' + typeof a420);
}
var eventsExports$1 = events$1.exports, inherits_browser = { exports: {} };
typeof Object.create == "function" ? inherits_browser.exports = function(u2, c) {
  c && (u2.super_ = c, u2.prototype = Object.create(c.prototype, { constructor: { value: u2, enumerable: false, writable: true, configurable: true } }));
} : inherits_browser.exports = function(u2, c) {
  if (c) {
    u2.super_ = c;
    var l2 = function() {
    };
    l2.prototype = c.prototype, u2.prototype = new l2(), u2.prototype.constructor = u2;
  }
};
var inherits_browserExports = inherits_browser.exports, streamBrowser$2, hasRequiredStreamBrowser;
function requireStreamBrowser() {
  return hasRequiredStreamBrowser || (hasRequiredStreamBrowser = 1, streamBrowser$2 = eventsExports$1.EventEmitter), streamBrowser$2;
}
var util$4 = {}, types$2 = {}, shams$1 = function a57() {
  if (typeof Symbol != "function" || typeof Object.getOwnPropertySymbols != "function")
    return false;
  if (typeof Symbol.iterator == "symbol")
    return true;
  var u2 = {}, c = Symbol("test"), l2 = Object(c);
  if (typeof c == "string" || Object.prototype.toString.call(c) !== "[object Symbol]" || Object.prototype.toString.call(l2) !== "[object Symbol]")
    return false;
  var v2 = 42;
  u2[c] = v2;
  for (c in u2)
    return false;
  if (typeof Object.keys == "function" && Object.keys(u2).length !== 0 || typeof Object.getOwnPropertyNames == "function" && Object.getOwnPropertyNames(u2).length !== 0)
    return false;
  var p2 = Object.getOwnPropertySymbols(u2);
  if (p2.length !== 1 || p2[0] !== c || !Object.prototype.propertyIsEnumerable.call(u2, c))
    return false;
  if (typeof Object.getOwnPropertyDescriptor == "function") {
    var _ = Object.getOwnPropertyDescriptor(u2, c);
    if (_.value !== v2 || _.enumerable !== true)
      return false;
  }
  return true;
}, hasSymbols$2 = shams$1, shams = function a58() {
  return hasSymbols$2() && !!Symbol.toStringTag;
}, esErrors = Error, _eval = EvalError, range = RangeError, ref$1 = ReferenceError, syntax = SyntaxError, type = TypeError, uri = URIError, origSymbol = typeof Symbol < "u" && Symbol, hasSymbolSham = shams$1, hasSymbols$1 = function a59() {
  return typeof origSymbol != "function" || typeof Symbol != "function" || typeof origSymbol("foo") != "symbol" || typeof Symbol("bar") != "symbol" ? false : hasSymbolSham();
}, test = { foo: {} }, $Object = Object, hasProto$1 = function a60() {
  return { __proto__: test }.foo === test.foo && !({ __proto__: null } instanceof $Object);
}, ERROR_MESSAGE = "Function.prototype.bind called on incompatible ", toStr$3 = Object.prototype.toString, max = Math.max, funcType = "[object Function]", concatty = function a61(u2, c) {
  for (var l2 = [], v2 = 0; v2 < u2.length; v2 += 1)
    l2[v2] = u2[v2];
  for (var p2 = 0; p2 < c.length; p2 += 1)
    l2[p2 + u2.length] = c[p2];
  return l2;
}, slicy = function a62(u2, c) {
  for (var l2 = [], v2 = c || 0, p2 = 0; v2 < u2.length; v2 += 1, p2 += 1)
    l2[p2] = u2[v2];
  return l2;
}, joiny = function(a420, u2) {
  for (var c = "", l2 = 0; l2 < a420.length; l2 += 1)
    c += a420[l2], l2 + 1 < a420.length && (c += u2);
  return c;
}, implementation$1 = function a63(u2) {
  var c = this;
  if (typeof c != "function" || toStr$3.apply(c) !== funcType)
    throw new TypeError(ERROR_MESSAGE + c);
  for (var l2 = slicy(arguments, 1), v2, p2 = function() {
    if (this instanceof v2) {
      var F2 = c.apply(this, concatty(l2, arguments));
      return Object(F2) === F2 ? F2 : this;
    }
    return c.apply(u2, concatty(l2, arguments));
  }, _ = max(0, c.length - l2.length), I2 = [], P2 = 0; P2 < _; P2++)
    I2[P2] = "$" + P2;
  if (v2 = Function("binder", "return function (" + joiny(I2, ",") + "){ return binder.apply(this,arguments); }")(p2), c.prototype) {
    var $ = function() {
    };
    $.prototype = c.prototype, v2.prototype = new $(), $.prototype = null;
  }
  return v2;
}, implementation = implementation$1, functionBind = Function.prototype.bind || implementation, call$2 = Function.prototype.call, $hasOwn = Object.prototype.hasOwnProperty, bind$4 = functionBind, hasown = bind$4.call(call$2, $hasOwn), undefined$1, $Error = esErrors, $EvalError = _eval, $RangeError = range, $ReferenceError = ref$1, $SyntaxError$1 = syntax, $TypeError$2 = type, $URIError = uri, $Function = Function, getEvalledConstructor = function(a420) {
  try {
    return $Function('"use strict"; return (' + a420 + ").constructor;")();
  } catch {
  }
}, $gOPD$1 = Object.getOwnPropertyDescriptor;
if ($gOPD$1)
  try {
    $gOPD$1({}, "");
  } catch {
    $gOPD$1 = null;
  }
var throwTypeError = function() {
  throw new $TypeError$2();
}, ThrowTypeError = $gOPD$1 ? function() {
  try {
    return arguments.callee, throwTypeError;
  } catch {
    try {
      return $gOPD$1(arguments, "callee").get;
    } catch {
      return throwTypeError;
    }
  }
}() : throwTypeError, hasSymbols = hasSymbols$1(), hasProto = hasProto$1(), getProto$1 = Object.getPrototypeOf || (hasProto ? function(a420) {
  return a420.__proto__;
} : null), needsEval = {}, TypedArray = typeof Uint8Array > "u" || !getProto$1 ? undefined$1 : getProto$1(Uint8Array), INTRINSICS = {
  __proto__: null,
  "%AggregateError%": typeof AggregateError > "u" ? undefined$1 : AggregateError,
  "%Array%": Array,
  "%ArrayBuffer%": typeof ArrayBuffer > "u" ? undefined$1 : ArrayBuffer,
  "%ArrayIteratorPrototype%": hasSymbols && getProto$1 ? getProto$1([][Symbol.iterator]()) : undefined$1,
  "%AsyncFromSyncIteratorPrototype%": undefined$1,
  "%AsyncFunction%": needsEval,
  "%AsyncGenerator%": needsEval,
  "%AsyncGeneratorFunction%": needsEval,
  "%AsyncIteratorPrototype%": needsEval,
  "%Atomics%": typeof Atomics > "u" ? undefined$1 : Atomics,
  "%BigInt%": typeof BigInt > "u" ? undefined$1 : BigInt,
  "%BigInt64Array%": typeof BigInt64Array > "u" ? undefined$1 : BigInt64Array,
  "%BigUint64Array%": typeof BigUint64Array > "u" ? undefined$1 : BigUint64Array,
  "%Boolean%": Boolean,
  "%DataView%": typeof DataView > "u" ? undefined$1 : DataView,
  "%Date%": Date,
  "%decodeURI%": decodeURI,
  "%decodeURIComponent%": decodeURIComponent,
  "%encodeURI%": encodeURI,
  "%encodeURIComponent%": encodeURIComponent,
  "%Error%": $Error,
  "%eval%": eval,
  // eslint-disable-line no-eval
  "%EvalError%": $EvalError,
  "%Float32Array%": typeof Float32Array > "u" ? undefined$1 : Float32Array,
  "%Float64Array%": typeof Float64Array > "u" ? undefined$1 : Float64Array,
  "%FinalizationRegistry%": typeof FinalizationRegistry > "u" ? undefined$1 : FinalizationRegistry,
  "%Function%": $Function,
  "%GeneratorFunction%": needsEval,
  "%Int8Array%": typeof Int8Array > "u" ? undefined$1 : Int8Array,
  "%Int16Array%": typeof Int16Array > "u" ? undefined$1 : Int16Array,
  "%Int32Array%": typeof Int32Array > "u" ? undefined$1 : Int32Array,
  "%isFinite%": isFinite,
  "%isNaN%": isNaN,
  "%IteratorPrototype%": hasSymbols && getProto$1 ? getProto$1(getProto$1([][Symbol.iterator]())) : undefined$1,
  "%JSON%": typeof JSON == "object" ? JSON : undefined$1,
  "%Map%": typeof Map > "u" ? undefined$1 : Map,
  "%MapIteratorPrototype%": typeof Map > "u" || !hasSymbols || !getProto$1 ? undefined$1 : getProto$1((/* @__PURE__ */ new Map())[Symbol.iterator]()),
  "%Math%": Math,
  "%Number%": Number,
  "%Object%": Object,
  "%parseFloat%": parseFloat,
  "%parseInt%": parseInt,
  "%Promise%": typeof Promise > "u" ? undefined$1 : Promise,
  "%Proxy%": typeof Proxy > "u" ? undefined$1 : Proxy,
  "%RangeError%": $RangeError,
  "%ReferenceError%": $ReferenceError,
  "%Reflect%": typeof Reflect > "u" ? undefined$1 : Reflect,
  "%RegExp%": RegExp,
  "%Set%": typeof Set > "u" ? undefined$1 : Set,
  "%SetIteratorPrototype%": typeof Set > "u" || !hasSymbols || !getProto$1 ? undefined$1 : getProto$1((/* @__PURE__ */ new Set())[Symbol.iterator]()),
  "%SharedArrayBuffer%": typeof SharedArrayBuffer > "u" ? undefined$1 : SharedArrayBuffer,
  "%String%": String,
  "%StringIteratorPrototype%": hasSymbols && getProto$1 ? getProto$1(""[Symbol.iterator]()) : undefined$1,
  "%Symbol%": hasSymbols ? Symbol : undefined$1,
  "%SyntaxError%": $SyntaxError$1,
  "%ThrowTypeError%": ThrowTypeError,
  "%TypedArray%": TypedArray,
  "%TypeError%": $TypeError$2,
  "%Uint8Array%": typeof Uint8Array > "u" ? undefined$1 : Uint8Array,
  "%Uint8ClampedArray%": typeof Uint8ClampedArray > "u" ? undefined$1 : Uint8ClampedArray,
  "%Uint16Array%": typeof Uint16Array > "u" ? undefined$1 : Uint16Array,
  "%Uint32Array%": typeof Uint32Array > "u" ? undefined$1 : Uint32Array,
  "%URIError%": $URIError,
  "%WeakMap%": typeof WeakMap > "u" ? undefined$1 : WeakMap,
  "%WeakRef%": typeof WeakRef > "u" ? undefined$1 : WeakRef,
  "%WeakSet%": typeof WeakSet > "u" ? undefined$1 : WeakSet
};
if (getProto$1)
  try {
    null.error;
  } catch (a420) {
    var errorProto = getProto$1(getProto$1(a420));
    INTRINSICS["%Error.prototype%"] = errorProto;
  }
var doEval = function a64(u2) {
  var c;
  if (u2 === "%AsyncFunction%")
    c = getEvalledConstructor("async function () {}");
  else if (u2 === "%GeneratorFunction%")
    c = getEvalledConstructor("function* () {}");
  else if (u2 === "%AsyncGeneratorFunction%")
    c = getEvalledConstructor("async function* () {}");
  else if (u2 === "%AsyncGenerator%") {
    var l2 = a64("%AsyncGeneratorFunction%");
    l2 && (c = l2.prototype);
  } else if (u2 === "%AsyncIteratorPrototype%") {
    var v2 = a64("%AsyncGenerator%");
    v2 && getProto$1 && (c = getProto$1(v2.prototype));
  }
  return INTRINSICS[u2] = c, c;
}, LEGACY_ALIASES = { __proto__: null, "%ArrayBufferPrototype%": ["ArrayBuffer", "prototype"], "%ArrayPrototype%": ["Array", "prototype"], "%ArrayProto_entries%": ["Array", "prototype", "entries"], "%ArrayProto_forEach%": ["Array", "prototype", "forEach"], "%ArrayProto_keys%": ["Array", "prototype", "keys"], "%ArrayProto_values%": ["Array", "prototype", "values"], "%AsyncFunctionPrototype%": ["AsyncFunction", "prototype"], "%AsyncGenerator%": ["AsyncGeneratorFunction", "prototype"], "%AsyncGeneratorPrototype%": ["AsyncGeneratorFunction", "prototype", "prototype"], "%BooleanPrototype%": ["Boolean", "prototype"], "%DataViewPrototype%": ["DataView", "prototype"], "%DatePrototype%": ["Date", "prototype"], "%ErrorPrototype%": ["Error", "prototype"], "%EvalErrorPrototype%": ["EvalError", "prototype"], "%Float32ArrayPrototype%": ["Float32Array", "prototype"], "%Float64ArrayPrototype%": ["Float64Array", "prototype"], "%FunctionPrototype%": ["Function", "prototype"], "%Generator%": ["GeneratorFunction", "prototype"], "%GeneratorPrototype%": ["GeneratorFunction", "prototype", "prototype"], "%Int8ArrayPrototype%": ["Int8Array", "prototype"], "%Int16ArrayPrototype%": ["Int16Array", "prototype"], "%Int32ArrayPrototype%": ["Int32Array", "prototype"], "%JSONParse%": ["JSON", "parse"], "%JSONStringify%": ["JSON", "stringify"], "%MapPrototype%": ["Map", "prototype"], "%NumberPrototype%": ["Number", "prototype"], "%ObjectPrototype%": ["Object", "prototype"], "%ObjProto_toString%": ["Object", "prototype", "toString"], "%ObjProto_valueOf%": ["Object", "prototype", "valueOf"], "%PromisePrototype%": ["Promise", "prototype"], "%PromiseProto_then%": ["Promise", "prototype", "then"], "%Promise_all%": ["Promise", "all"], "%Promise_reject%": ["Promise", "reject"], "%Promise_resolve%": ["Promise", "resolve"], "%RangeErrorPrototype%": ["RangeError", "prototype"], "%ReferenceErrorPrototype%": ["ReferenceError", "prototype"], "%RegExpPrototype%": ["RegExp", "prototype"], "%SetPrototype%": ["Set", "prototype"], "%SharedArrayBufferPrototype%": ["SharedArrayBuffer", "prototype"], "%StringPrototype%": ["String", "prototype"], "%SymbolPrototype%": ["Symbol", "prototype"], "%SyntaxErrorPrototype%": ["SyntaxError", "prototype"], "%TypedArrayPrototype%": ["TypedArray", "prototype"], "%TypeErrorPrototype%": ["TypeError", "prototype"], "%Uint8ArrayPrototype%": ["Uint8Array", "prototype"], "%Uint8ClampedArrayPrototype%": ["Uint8ClampedArray", "prototype"], "%Uint16ArrayPrototype%": ["Uint16Array", "prototype"], "%Uint32ArrayPrototype%": ["Uint32Array", "prototype"], "%URIErrorPrototype%": ["URIError", "prototype"], "%WeakMapPrototype%": ["WeakMap", "prototype"], "%WeakSetPrototype%": ["WeakSet", "prototype"] }, bind$3 = functionBind, hasOwn = hasown, $concat = bind$3.call(Function.call, Array.prototype.concat), $spliceApply = bind$3.call(Function.apply, Array.prototype.splice), $replace = bind$3.call(Function.call, String.prototype.replace), $strSlice = bind$3.call(Function.call, String.prototype.slice), $exec = bind$3.call(Function.call, RegExp.prototype.exec), rePropName = /[^%.[\]]+|\[(?:(-?\d+(?:\.\d+)?)|(["'])((?:(?!\2)[^\\]|\\.)*?)\2)\]|(?=(?:\.|\[\])(?:\.|\[\]|%$))/g, reEscapeChar = /\\(\\)?/g, stringToPath = function a65(u2) {
  var c = $strSlice(u2, 0, 1), l2 = $strSlice(u2, -1);
  if (c === "%" && l2 !== "%")
    throw new $SyntaxError$1("invalid intrinsic syntax, expected closing `%`");
  if (l2 === "%" && c !== "%")
    throw new $SyntaxError$1("invalid intrinsic syntax, expected opening `%`");
  var v2 = [];
  return $replace(u2, rePropName, function(p2, _, I2, P2) {
    v2[v2.length] = I2 ? $replace(P2, reEscapeChar, "$1") : _ || p2;
  }), v2;
}, getBaseIntrinsic = function a66(u2, c) {
  var l2 = u2, v2;
  if (hasOwn(LEGACY_ALIASES, l2) && (v2 = LEGACY_ALIASES[l2], l2 = "%" + v2[0] + "%"), hasOwn(INTRINSICS, l2)) {
    var p2 = INTRINSICS[l2];
    if (p2 === needsEval && (p2 = doEval(l2)), typeof p2 > "u" && !c)
      throw new $TypeError$2("intrinsic " + u2 + " exists, but is not available. Please file an issue!");
    return { alias: v2, name: l2, value: p2 };
  }
  throw new $SyntaxError$1("intrinsic " + u2 + " does not exist!");
}, getIntrinsic = function a67(u2, c) {
  if (typeof u2 != "string" || u2.length === 0)
    throw new $TypeError$2("intrinsic name must be a non-empty string");
  if (arguments.length > 1 && typeof c != "boolean")
    throw new $TypeError$2('"allowMissing" argument must be a boolean');
  if ($exec(/^%?[^%]*%?$/, u2) === null)
    throw new $SyntaxError$1("`%` may not be present anywhere but at the beginning and end of the intrinsic name");
  var l2 = stringToPath(u2), v2 = l2.length > 0 ? l2[0] : "", p2 = getBaseIntrinsic("%" + v2 + "%", c), _ = p2.name, I2 = p2.value, P2 = false, $ = p2.alias;
  $ && (v2 = $[0], $spliceApply(l2, $concat([0, 1], $)));
  for (var F2 = 1, H2 = true; F2 < l2.length; F2 += 1) {
    var j = l2[F2], ee2 = $strSlice(j, 0, 1), X2 = $strSlice(j, -1);
    if ((ee2 === '"' || ee2 === "'" || ee2 === "`" || X2 === '"' || X2 === "'" || X2 === "`") && ee2 !== X2)
      throw new $SyntaxError$1("property names with quotes must have matching quotes");
    if ((j === "constructor" || !H2) && (P2 = true), v2 += "." + j, _ = "%" + v2 + "%", hasOwn(INTRINSICS, _))
      I2 = INTRINSICS[_];
    else if (I2 != null) {
      if (!(j in I2)) {
        if (!c)
          throw new $TypeError$2("base intrinsic for " + u2 + " exists, but the property is not available.");
        return;
      }
      if ($gOPD$1 && F2 + 1 >= l2.length) {
        var ie2 = $gOPD$1(I2, j);
        H2 = !!ie2, H2 && "get" in ie2 && !("originalValue" in ie2.get) ? I2 = ie2.get : I2 = I2[j];
      } else
        H2 = hasOwn(I2, j), I2 = I2[j];
      H2 && !P2 && (INTRINSICS[_] = I2);
    }
  }
  return I2;
}, callBind$2 = { exports: {} }, esDefineProperty, hasRequiredEsDefineProperty;
function requireEsDefineProperty() {
  if (hasRequiredEsDefineProperty)
    return esDefineProperty;
  hasRequiredEsDefineProperty = 1;
  var a420 = getIntrinsic, u2 = a420("%Object.defineProperty%", true) || false;
  if (u2)
    try {
      u2({}, "a", { value: 1 });
    } catch {
      u2 = false;
    }
  return esDefineProperty = u2, esDefineProperty;
}
var GetIntrinsic$2 = getIntrinsic, $gOPD = GetIntrinsic$2("%Object.getOwnPropertyDescriptor%", true);
if ($gOPD)
  try {
    $gOPD([], "length");
  } catch {
    $gOPD = null;
  }
var gopd$1 = $gOPD, $defineProperty$1 = requireEsDefineProperty(), $SyntaxError = syntax, $TypeError$1 = type, gopd = gopd$1, defineDataProperty = function a68(u2, c, l2) {
  if (!u2 || typeof u2 != "object" && typeof u2 != "function")
    throw new $TypeError$1("`obj` must be an object or a function`");
  if (typeof c != "string" && typeof c != "symbol")
    throw new $TypeError$1("`property` must be a string or a symbol`");
  if (arguments.length > 3 && typeof arguments[3] != "boolean" && arguments[3] !== null)
    throw new $TypeError$1("`nonEnumerable`, if provided, must be a boolean or null");
  if (arguments.length > 4 && typeof arguments[4] != "boolean" && arguments[4] !== null)
    throw new $TypeError$1("`nonWritable`, if provided, must be a boolean or null");
  if (arguments.length > 5 && typeof arguments[5] != "boolean" && arguments[5] !== null)
    throw new $TypeError$1("`nonConfigurable`, if provided, must be a boolean or null");
  if (arguments.length > 6 && typeof arguments[6] != "boolean")
    throw new $TypeError$1("`loose`, if provided, must be a boolean");
  var v2 = arguments.length > 3 ? arguments[3] : null, p2 = arguments.length > 4 ? arguments[4] : null, _ = arguments.length > 5 ? arguments[5] : null, I2 = arguments.length > 6 ? arguments[6] : false, P2 = !!gopd && gopd(u2, c);
  if ($defineProperty$1)
    $defineProperty$1(u2, c, { configurable: _ === null && P2 ? P2.configurable : !_, enumerable: v2 === null && P2 ? P2.enumerable : !v2, value: l2, writable: p2 === null && P2 ? P2.writable : !p2 });
  else if (I2 || !v2 && !p2 && !_)
    u2[c] = l2;
  else
    throw new $SyntaxError("This environment does not support defining a property as non-configurable, non-writable, or non-enumerable.");
}, $defineProperty = requireEsDefineProperty(), hasPropertyDescriptors = function a69() {
  return !!$defineProperty;
};
hasPropertyDescriptors.hasArrayLengthDefineBug = function a70() {
  if (!$defineProperty)
    return null;
  try {
    return $defineProperty([], "length", { value: 1 }).length !== 1;
  } catch {
    return true;
  }
};
var hasPropertyDescriptors_1 = hasPropertyDescriptors, GetIntrinsic$1 = getIntrinsic, define = defineDataProperty, hasDescriptors = hasPropertyDescriptors_1(), gOPD$1 = gopd$1, $TypeError = type, $floor = GetIntrinsic$1("%Math.floor%"), setFunctionLength = function a71(u2, c) {
  if (typeof u2 != "function")
    throw new $TypeError("`fn` is not a function");
  if (typeof c != "number" || c < 0 || c > 4294967295 || $floor(c) !== c)
    throw new $TypeError("`length` must be a positive 32-bit integer");
  var l2 = arguments.length > 2 && !!arguments[2], v2 = true, p2 = true;
  if ("length" in u2 && gOPD$1) {
    var _ = gOPD$1(u2, "length");
    _ && !_.configurable && (v2 = false), _ && !_.writable && (p2 = false);
  }
  return (v2 || p2 || !l2) && (hasDescriptors ? define(
    /** @type {Parameters<define>[0]} */
    u2,
    "length",
    c,
    true,
    true
  ) : define(
    /** @type {Parameters<define>[0]} */
    u2,
    "length",
    c
  )), u2;
};
(function(a420) {
  var u2 = functionBind, c = getIntrinsic, l2 = setFunctionLength, v2 = type, p2 = c("%Function.prototype.apply%"), _ = c("%Function.prototype.call%"), I2 = c("%Reflect.apply%", true) || u2.call(_, p2), P2 = requireEsDefineProperty(), $ = c("%Math.max%");
  a420.exports = function(j) {
    if (typeof j != "function")
      throw new v2("a function is required");
    var ee2 = I2(u2, _, arguments);
    return l2(ee2, 1 + $(0, j.length - (arguments.length - 1)), true);
  };
  var F2 = function() {
    return I2(u2, p2, arguments);
  };
  P2 ? P2(a420.exports, "apply", { value: F2 }) : a420.exports.apply = F2;
})(callBind$2);
var callBindExports = callBind$2.exports, GetIntrinsic = getIntrinsic, callBind$1 = callBindExports, $indexOf$1 = callBind$1(GetIntrinsic("String.prototype.indexOf")), callBound$2 = function a72(u2, c) {
  var l2 = GetIntrinsic(u2, !!c);
  return typeof l2 == "function" && $indexOf$1(u2, ".prototype.") > -1 ? callBind$1(l2) : l2;
}, hasToStringTag$3 = shams(), callBound$1 = callBound$2, $toString$1 = callBound$1("Object.prototype.toString"), isStandardArguments = function a73(u2) {
  return hasToStringTag$3 && u2 && typeof u2 == "object" && Symbol.toStringTag in u2 ? false : $toString$1(u2) === "[object Arguments]";
}, isLegacyArguments = function a74(u2) {
  return isStandardArguments(u2) ? true : u2 !== null && typeof u2 == "object" && typeof u2.length == "number" && u2.length >= 0 && $toString$1(u2) !== "[object Array]" && $toString$1(u2.callee) === "[object Function]";
}, supportsStandardArguments = function() {
  return isStandardArguments(arguments);
}();
isStandardArguments.isLegacyArguments = isLegacyArguments;
var isArguments$1 = supportsStandardArguments ? isStandardArguments : isLegacyArguments, toStr$2 = Object.prototype.toString, fnToStr$1 = Function.prototype.toString, isFnRegex = /^\s*(?:function)?\*/, hasToStringTag$2 = shams(), getProto = Object.getPrototypeOf, getGeneratorFunc = function() {
  if (!hasToStringTag$2)
    return false;
  try {
    return Function("return function*() {}")();
  } catch {
  }
}, GeneratorFunction, isGeneratorFunction = function a75(u2) {
  if (typeof u2 != "function")
    return false;
  if (isFnRegex.test(fnToStr$1.call(u2)))
    return true;
  if (!hasToStringTag$2) {
    var c = toStr$2.call(u2);
    return c === "[object GeneratorFunction]";
  }
  if (!getProto)
    return false;
  if (typeof GeneratorFunction > "u") {
    var l2 = getGeneratorFunc();
    GeneratorFunction = l2 ? getProto(l2) : false;
  }
  return getProto(u2) === GeneratorFunction;
}, fnToStr = Function.prototype.toString, reflectApply = typeof Reflect == "object" && Reflect !== null && Reflect.apply, badArrayLike, isCallableMarker;
if (typeof reflectApply == "function" && typeof Object.defineProperty == "function")
  try {
    badArrayLike = Object.defineProperty({}, "length", { get: function() {
      throw isCallableMarker;
    } }), isCallableMarker = {}, reflectApply(function() {
      throw 42;
    }, null, badArrayLike);
  } catch (a420) {
    a420 !== isCallableMarker && (reflectApply = null);
  }
else
  reflectApply = null;
var constructorRegex = /^\s*class\b/, isES6ClassFn = function a76(u2) {
  try {
    var c = fnToStr.call(u2);
    return constructorRegex.test(c);
  } catch {
    return false;
  }
}, tryFunctionObject = function a77(u2) {
  try {
    return isES6ClassFn(u2) ? false : (fnToStr.call(u2), true);
  } catch {
    return false;
  }
}, toStr$1 = Object.prototype.toString, fnClass = "[object Function]", genClass = "[object GeneratorFunction]", hasToStringTag$1 = typeof Symbol == "function" && !!Symbol.toStringTag, documentDotAll = typeof document == "object" && typeof document.all > "u" && document.all !== void 0 ? document.all : {}, isCallable$1 = reflectApply ? function a78(u2) {
  if (u2 === documentDotAll)
    return true;
  if (!u2 || typeof u2 != "function" && typeof u2 != "object")
    return false;
  if (typeof u2 == "function" && !u2.prototype)
    return true;
  try {
    reflectApply(u2, null, badArrayLike);
  } catch (c) {
    if (c !== isCallableMarker)
      return false;
  }
  return !isES6ClassFn(u2);
} : function a79(u2) {
  if (u2 === documentDotAll)
    return true;
  if (!u2 || typeof u2 != "function" && typeof u2 != "object")
    return false;
  if (typeof u2 == "function" && !u2.prototype)
    return true;
  if (hasToStringTag$1)
    return tryFunctionObject(u2);
  if (isES6ClassFn(u2))
    return false;
  var c = toStr$1.call(u2);
  return c === fnClass || c === genClass;
}, isCallable = isCallable$1, toStr = Object.prototype.toString, hasOwnProperty$2 = Object.prototype.hasOwnProperty, forEachArray = function a80(u2, c, l2) {
  for (var v2 = 0, p2 = u2.length; v2 < p2; v2++)
    hasOwnProperty$2.call(u2, v2) && (l2 == null ? c(u2[v2], v2, u2) : c.call(l2, u2[v2], v2, u2));
}, forEachString = function a81(u2, c, l2) {
  for (var v2 = 0, p2 = u2.length; v2 < p2; v2++)
    l2 == null ? c(u2.charAt(v2), v2, u2) : c.call(l2, u2.charAt(v2), v2, u2);
}, forEachObject = function a82(u2, c, l2) {
  for (var v2 in u2)
    hasOwnProperty$2.call(u2, v2) && (l2 == null ? c(u2[v2], v2, u2) : c.call(l2, u2[v2], v2, u2));
}, forEach$2 = function a83(u2, c, l2) {
  if (!isCallable(c))
    throw new TypeError("iterator must be a function");
  var v2;
  arguments.length >= 3 && (v2 = l2), toStr.call(u2) === "[object Array]" ? forEachArray(u2, c, v2) : typeof u2 == "string" ? forEachString(u2, c, v2) : forEachObject(u2, c, v2);
}, forEach_1 = forEach$2, possibleNames = ["BigInt64Array", "BigUint64Array", "Float32Array", "Float64Array", "Int16Array", "Int32Array", "Int8Array", "Uint16Array", "Uint32Array", "Uint8Array", "Uint8ClampedArray"], g$1 = typeof globalThis > "u" ? commonjsGlobal$1 : globalThis, availableTypedArrays$1 = function a84() {
  for (var u2 = [], c = 0; c < possibleNames.length; c++)
    typeof g$1[possibleNames[c]] == "function" && (u2[u2.length] = possibleNames[c]);
  return u2;
}, forEach$1 = forEach_1, availableTypedArrays = availableTypedArrays$1, callBind = callBindExports, callBound = callBound$2, gOPD = gopd$1, $toString = callBound("Object.prototype.toString"), hasToStringTag = shams(), g = typeof globalThis > "u" ? commonjsGlobal$1 : globalThis, typedArrays = availableTypedArrays(), $slice = callBound("String.prototype.slice"), getPrototypeOf = Object.getPrototypeOf, $indexOf = callBound("Array.prototype.indexOf", true) || /** @type {(array: readonly unknown[], value: unknown) => keyof array} */
function a85(u2, c) {
  for (var l2 = 0; l2 < u2.length; l2 += 1)
    if (u2[l2] === c)
      return l2;
  return -1;
}, cache$2 = { __proto__: null };
hasToStringTag && gOPD && getPrototypeOf ? forEach$1(typedArrays, function(a420) {
  var u2 = new g[a420]();
  if (Symbol.toStringTag in u2) {
    var c = getPrototypeOf(u2), l2 = gOPD(c, Symbol.toStringTag);
    if (!l2) {
      var v2 = getPrototypeOf(c);
      l2 = gOPD(v2, Symbol.toStringTag);
    }
    cache$2["$" + a420] = callBind(l2.get);
  }
}) : forEach$1(typedArrays, function(a420) {
  var u2 = new g[a420](), c = u2.slice || u2.set;
  c && (cache$2["$" + a420] = callBind(c));
});
var tryTypedArrays = function a86(u2) {
  var c = false;
  return forEach$1(
    // eslint-disable-next-line no-extra-parens
    /** @type {Record<`\$${TypedArrayName}`, typeof cache>} */
    /** @type {any} */
    cache$2,
    /** @type {(getter: typeof cache, name: `\$${TypedArrayName}`) => void} */
    function(l2, v2) {
      if (!c)
        try {
          "$" + l2(u2) === v2 && (c = $slice(v2, 1));
        } catch {
        }
    }
  ), c;
}, trySlices = function a87(u2) {
  var c = false;
  return forEach$1(
    // eslint-disable-next-line no-extra-parens
    /** @type {any} */
    cache$2,
    /** @type {(getter: typeof cache, name: `\$${TypedArrayName}`) => void} */
    function(l2, v2) {
      if (!c)
        try {
          l2(u2), c = $slice(v2, 1);
        } catch {
        }
    }
  ), c;
}, whichTypedArray$1 = function a88(u2) {
  if (!u2 || typeof u2 != "object")
    return false;
  if (!hasToStringTag) {
    var c = $slice($toString(u2), 8, -1);
    return $indexOf(typedArrays, c) > -1 ? c : c !== "Object" ? false : trySlices(u2);
  }
  return gOPD ? tryTypedArrays(u2) : null;
}, whichTypedArray = whichTypedArray$1, isTypedArray = function a89(u2) {
  return !!whichTypedArray(u2);
};
(function(a420) {
  var u2 = isArguments$1, c = isGeneratorFunction, l2 = whichTypedArray$1, v2 = isTypedArray;
  function p2(Fe2) {
    return Fe2.call.bind(Fe2);
  }
  var _ = typeof BigInt < "u", I2 = typeof Symbol < "u", P2 = p2(Object.prototype.toString), $ = p2(Number.prototype.valueOf), F2 = p2(String.prototype.valueOf), H2 = p2(Boolean.prototype.valueOf);
  if (_)
    var j = p2(BigInt.prototype.valueOf);
  if (I2)
    var ee2 = p2(Symbol.prototype.valueOf);
  function X2(Fe2, yt) {
    if (typeof Fe2 != "object")
      return false;
    try {
      return yt(Fe2), true;
    } catch {
      return false;
    }
  }
  a420.isArgumentsObject = u2, a420.isGeneratorFunction = c, a420.isTypedArray = v2;
  function ie2(Fe2) {
    return typeof Promise < "u" && Fe2 instanceof Promise || Fe2 !== null && typeof Fe2 == "object" && typeof Fe2.then == "function" && typeof Fe2.catch == "function";
  }
  a420.isPromise = ie2;
  function Q2(Fe2) {
    return typeof ArrayBuffer < "u" && ArrayBuffer.isView ? ArrayBuffer.isView(Fe2) : v2(Fe2) || me2(Fe2);
  }
  a420.isArrayBufferView = Q2;
  function ne2(Fe2) {
    return l2(Fe2) === "Uint8Array";
  }
  a420.isUint8Array = ne2;
  function Z2(Fe2) {
    return l2(Fe2) === "Uint8ClampedArray";
  }
  a420.isUint8ClampedArray = Z2;
  function de2(Fe2) {
    return l2(Fe2) === "Uint16Array";
  }
  a420.isUint16Array = de2;
  function pe2(Fe2) {
    return l2(Fe2) === "Uint32Array";
  }
  a420.isUint32Array = pe2;
  function le2(Fe2) {
    return l2(Fe2) === "Int8Array";
  }
  a420.isInt8Array = le2;
  function be2(Fe2) {
    return l2(Fe2) === "Int16Array";
  }
  a420.isInt16Array = be2;
  function ke2(Fe2) {
    return l2(Fe2) === "Int32Array";
  }
  a420.isInt32Array = ke2;
  function Te2(Fe2) {
    return l2(Fe2) === "Float32Array";
  }
  a420.isFloat32Array = Te2;
  function q2(Fe2) {
    return l2(Fe2) === "Float64Array";
  }
  a420.isFloat64Array = q2;
  function z2(Fe2) {
    return l2(Fe2) === "BigInt64Array";
  }
  a420.isBigInt64Array = z2;
  function C2(Fe2) {
    return l2(Fe2) === "BigUint64Array";
  }
  a420.isBigUint64Array = C2;
  function b(Fe2) {
    return P2(Fe2) === "[object Map]";
  }
  b.working = typeof Map < "u" && b(/* @__PURE__ */ new Map());
  function E2(Fe2) {
    return typeof Map > "u" ? false : b.working ? b(Fe2) : Fe2 instanceof Map;
  }
  a420.isMap = E2;
  function k(Fe2) {
    return P2(Fe2) === "[object Set]";
  }
  k.working = typeof Set < "u" && k(/* @__PURE__ */ new Set());
  function O2(Fe2) {
    return typeof Set > "u" ? false : k.working ? k(Fe2) : Fe2 instanceof Set;
  }
  a420.isSet = O2;
  function A2(Fe2) {
    return P2(Fe2) === "[object WeakMap]";
  }
  A2.working = typeof WeakMap < "u" && A2(/* @__PURE__ */ new WeakMap());
  function x2(Fe2) {
    return typeof WeakMap > "u" ? false : A2.working ? A2(Fe2) : Fe2 instanceof WeakMap;
  }
  a420.isWeakMap = x2;
  function Y2(Fe2) {
    return P2(Fe2) === "[object WeakSet]";
  }
  Y2.working = typeof WeakSet < "u" && Y2(/* @__PURE__ */ new WeakSet());
  function B2(Fe2) {
    return Y2(Fe2);
  }
  a420.isWeakSet = B2;
  function T2(Fe2) {
    return P2(Fe2) === "[object ArrayBuffer]";
  }
  T2.working = typeof ArrayBuffer < "u" && T2(new ArrayBuffer());
  function D2(Fe2) {
    return typeof ArrayBuffer > "u" ? false : T2.working ? T2(Fe2) : Fe2 instanceof ArrayBuffer;
  }
  a420.isArrayBuffer = D2;
  function te2(Fe2) {
    return P2(Fe2) === "[object DataView]";
  }
  te2.working = typeof ArrayBuffer < "u" && typeof DataView < "u" && te2(new DataView(new ArrayBuffer(1), 0, 1));
  function me2(Fe2) {
    return typeof DataView > "u" ? false : te2.working ? te2(Fe2) : Fe2 instanceof DataView;
  }
  a420.isDataView = me2;
  var Ie2 = typeof SharedArrayBuffer < "u" ? SharedArrayBuffer : void 0;
  function $e2(Fe2) {
    return P2(Fe2) === "[object SharedArrayBuffer]";
  }
  function ye2(Fe2) {
    return typeof Ie2 > "u" ? false : (typeof $e2.working > "u" && ($e2.working = $e2(new Ie2())), $e2.working ? $e2(Fe2) : Fe2 instanceof Ie2);
  }
  a420.isSharedArrayBuffer = ye2;
  function he2(Fe2) {
    return P2(Fe2) === "[object AsyncFunction]";
  }
  a420.isAsyncFunction = he2;
  function Me2(Fe2) {
    return P2(Fe2) === "[object Map Iterator]";
  }
  a420.isMapIterator = Me2;
  function Ae2(Fe2) {
    return P2(Fe2) === "[object Set Iterator]";
  }
  a420.isSetIterator = Ae2;
  function xe2(Fe2) {
    return P2(Fe2) === "[object Generator]";
  }
  a420.isGeneratorObject = xe2;
  function ae2(Fe2) {
    return P2(Fe2) === "[object WebAssembly.Module]";
  }
  a420.isWebAssemblyCompiledModule = ae2;
  function N2(Fe2) {
    return X2(Fe2, $);
  }
  a420.isNumberObject = N2;
  function re2(Fe2) {
    return X2(Fe2, F2);
  }
  a420.isStringObject = re2;
  function fe2(Fe2) {
    return X2(Fe2, H2);
  }
  a420.isBooleanObject = fe2;
  function Ne2(Fe2) {
    return _ && X2(Fe2, j);
  }
  a420.isBigIntObject = Ne2;
  function Oe2(Fe2) {
    return I2 && X2(Fe2, ee2);
  }
  a420.isSymbolObject = Oe2;
  function qe2(Fe2) {
    return N2(Fe2) || re2(Fe2) || fe2(Fe2) || Ne2(Fe2) || Oe2(Fe2);
  }
  a420.isBoxedPrimitive = qe2;
  function je2(Fe2) {
    return typeof Uint8Array < "u" && (D2(Fe2) || ye2(Fe2));
  }
  a420.isAnyArrayBuffer = je2, ["isProxy", "isExternal", "isModuleNamespaceObject"].forEach(function(Fe2) {
    Object.defineProperty(a420, Fe2, { enumerable: false, value: function() {
      throw new Error(Fe2 + " is not supported in userland");
    } });
  });
})(types$2);
var isBufferBrowser = function a90(u2) {
  return u2 && typeof u2 == "object" && typeof u2.copy == "function" && typeof u2.fill == "function" && typeof u2.readUInt8 == "function";
};
(function(a420) {
  var u2 = Object.getOwnPropertyDescriptors || function(me2) {
    for (var Ie2 = Object.keys(me2), $e2 = {}, ye2 = 0; ye2 < Ie2.length; ye2++)
      $e2[Ie2[ye2]] = Object.getOwnPropertyDescriptor(me2, Ie2[ye2]);
    return $e2;
  }, c = /%[sdj%]/g;
  a420.format = function(te2) {
    if (!le2(te2)) {
      for (var me2 = [], Ie2 = 0; Ie2 < arguments.length; Ie2++)
        me2.push(_(arguments[Ie2]));
      return me2.join(" ");
    }
    for (var Ie2 = 1, $e2 = arguments, ye2 = $e2.length, he2 = String(te2).replace(c, function(Ae2) {
      if (Ae2 === "%%")
        return "%";
      if (Ie2 >= ye2)
        return Ae2;
      switch (Ae2) {
        case "%s":
          return String($e2[Ie2++]);
        case "%d":
          return Number($e2[Ie2++]);
        case "%j":
          try {
            return JSON.stringify($e2[Ie2++]);
          } catch {
            return "[Circular]";
          }
        default:
          return Ae2;
      }
    }), Me2 = $e2[Ie2]; Ie2 < ye2; Me2 = $e2[++Ie2])
      Z2(Me2) || !q2(Me2) ? he2 += " " + Me2 : he2 += " " + _(Me2);
    return he2;
  }, a420.deprecate = function(te2, me2) {
    if (typeof process$1 < "u" && process$1.noDeprecation === true)
      return te2;
    if (typeof process$1 > "u")
      return function() {
        return a420.deprecate(te2, me2).apply(this, arguments);
      };
    var Ie2 = false;
    function $e2() {
      if (!Ie2) {
        if (process$1.throwDeprecation)
          throw new Error(me2);
        process$1.traceDeprecation ? console.trace(me2) : console.error(me2), Ie2 = true;
      }
      return te2.apply(this, arguments);
    }
    return $e2;
  };
  var l2 = {}, v2 = /^$/;
  if (process$1.env.NODE_DEBUG) {
    var p2 = process$1.env.NODE_DEBUG;
    p2 = p2.replace(/[|\\{}()[\]^$+?.]/g, "\\$&").replace(/\*/g, ".*").replace(/,/g, "$|^").toUpperCase(), v2 = new RegExp("^" + p2 + "$", "i");
  }
  a420.debuglog = function(te2) {
    if (te2 = te2.toUpperCase(), !l2[te2])
      if (v2.test(te2)) {
        var me2 = process$1.pid;
        l2[te2] = function() {
          var Ie2 = a420.format.apply(a420, arguments);
          console.error("%s %d: %s", te2, me2, Ie2);
        };
      } else
        l2[te2] = function() {
        };
    return l2[te2];
  };
  function _(te2, me2) {
    var Ie2 = { seen: [], stylize: P2 };
    return arguments.length >= 3 && (Ie2.depth = arguments[2]), arguments.length >= 4 && (Ie2.colors = arguments[3]), ne2(me2) ? Ie2.showHidden = me2 : me2 && a420._extend(Ie2, me2), ke2(Ie2.showHidden) && (Ie2.showHidden = false), ke2(Ie2.depth) && (Ie2.depth = 2), ke2(Ie2.colors) && (Ie2.colors = false), ke2(Ie2.customInspect) && (Ie2.customInspect = true), Ie2.colors && (Ie2.stylize = I2), F2(Ie2, te2, Ie2.depth);
  }
  a420.inspect = _, _.colors = { bold: [1, 22], italic: [3, 23], underline: [4, 24], inverse: [7, 27], white: [37, 39], grey: [90, 39], black: [30, 39], blue: [34, 39], cyan: [36, 39], green: [32, 39], magenta: [35, 39], red: [31, 39], yellow: [33, 39] }, _.styles = {
    special: "cyan",
    number: "yellow",
    boolean: "yellow",
    undefined: "grey",
    null: "bold",
    string: "green",
    date: "magenta",
    // "name": intentionally not styling
    regexp: "red"
  };
  function I2(te2, me2) {
    var Ie2 = _.styles[me2];
    return Ie2 ? "\x1B[" + _.colors[Ie2][0] + "m" + te2 + "\x1B[" + _.colors[Ie2][1] + "m" : te2;
  }
  function P2(te2, me2) {
    return te2;
  }
  function $(te2) {
    var me2 = {};
    return te2.forEach(function(Ie2, $e2) {
      me2[Ie2] = true;
    }), me2;
  }
  function F2(te2, me2, Ie2) {
    if (te2.customInspect && me2 && b(me2.inspect) && // Filter out the util module, it's inspect function is special
    me2.inspect !== a420.inspect && // Also filter out any prototype objects using the circular check.
    !(me2.constructor && me2.constructor.prototype === me2)) {
      var $e2 = me2.inspect(Ie2, te2);
      return le2($e2) || ($e2 = F2(te2, $e2, Ie2)), $e2;
    }
    var ye2 = H2(te2, me2);
    if (ye2)
      return ye2;
    var he2 = Object.keys(me2), Me2 = $(he2);
    if (te2.showHidden && (he2 = Object.getOwnPropertyNames(me2)), C2(me2) && (he2.indexOf("message") >= 0 || he2.indexOf("description") >= 0))
      return j(me2);
    if (he2.length === 0) {
      if (b(me2)) {
        var Ae2 = me2.name ? ": " + me2.name : "";
        return te2.stylize("[Function" + Ae2 + "]", "special");
      }
      if (Te2(me2))
        return te2.stylize(RegExp.prototype.toString.call(me2), "regexp");
      if (z2(me2))
        return te2.stylize(Date.prototype.toString.call(me2), "date");
      if (C2(me2))
        return j(me2);
    }
    var xe2 = "", ae2 = false, N2 = ["{", "}"];
    if (Q2(me2) && (ae2 = true, N2 = ["[", "]"]), b(me2)) {
      var re2 = me2.name ? ": " + me2.name : "";
      xe2 = " [Function" + re2 + "]";
    }
    if (Te2(me2) && (xe2 = " " + RegExp.prototype.toString.call(me2)), z2(me2) && (xe2 = " " + Date.prototype.toUTCString.call(me2)), C2(me2) && (xe2 = " " + j(me2)), he2.length === 0 && (!ae2 || me2.length == 0))
      return N2[0] + xe2 + N2[1];
    if (Ie2 < 0)
      return Te2(me2) ? te2.stylize(RegExp.prototype.toString.call(me2), "regexp") : te2.stylize("[Object]", "special");
    te2.seen.push(me2);
    var fe2;
    return ae2 ? fe2 = ee2(te2, me2, Ie2, Me2, he2) : fe2 = he2.map(function(Ne2) {
      return X2(te2, me2, Ie2, Me2, Ne2, ae2);
    }), te2.seen.pop(), ie2(fe2, xe2, N2);
  }
  function H2(te2, me2) {
    if (ke2(me2))
      return te2.stylize("undefined", "undefined");
    if (le2(me2)) {
      var Ie2 = "'" + JSON.stringify(me2).replace(/^"|"$/g, "").replace(/'/g, "\\'").replace(/\\"/g, '"') + "'";
      return te2.stylize(Ie2, "string");
    }
    if (pe2(me2))
      return te2.stylize("" + me2, "number");
    if (ne2(me2))
      return te2.stylize("" + me2, "boolean");
    if (Z2(me2))
      return te2.stylize("null", "null");
  }
  function j(te2) {
    return "[" + Error.prototype.toString.call(te2) + "]";
  }
  function ee2(te2, me2, Ie2, $e2, ye2) {
    for (var he2 = [], Me2 = 0, Ae2 = me2.length; Me2 < Ae2; ++Me2)
      Y2(me2, String(Me2)) ? he2.push(X2(te2, me2, Ie2, $e2, String(Me2), true)) : he2.push("");
    return ye2.forEach(function(xe2) {
      xe2.match(/^\d+$/) || he2.push(X2(te2, me2, Ie2, $e2, xe2, true));
    }), he2;
  }
  function X2(te2, me2, Ie2, $e2, ye2, he2) {
    var Me2, Ae2, xe2;
    if (xe2 = Object.getOwnPropertyDescriptor(me2, ye2) || { value: me2[ye2] }, xe2.get ? xe2.set ? Ae2 = te2.stylize("[Getter/Setter]", "special") : Ae2 = te2.stylize("[Getter]", "special") : xe2.set && (Ae2 = te2.stylize("[Setter]", "special")), Y2($e2, ye2) || (Me2 = "[" + ye2 + "]"), Ae2 || (te2.seen.indexOf(xe2.value) < 0 ? (Z2(Ie2) ? Ae2 = F2(te2, xe2.value, null) : Ae2 = F2(te2, xe2.value, Ie2 - 1), Ae2.indexOf(`
`) > -1 && (he2 ? Ae2 = Ae2.split(`
`).map(function(ae2) {
      return "  " + ae2;
    }).join(`
`).slice(2) : Ae2 = `
` + Ae2.split(`
`).map(function(ae2) {
      return "   " + ae2;
    }).join(`
`))) : Ae2 = te2.stylize("[Circular]", "special")), ke2(Me2)) {
      if (he2 && ye2.match(/^\d+$/))
        return Ae2;
      Me2 = JSON.stringify("" + ye2), Me2.match(/^"([a-zA-Z_][a-zA-Z_0-9]*)"$/) ? (Me2 = Me2.slice(1, -1), Me2 = te2.stylize(Me2, "name")) : (Me2 = Me2.replace(/'/g, "\\'").replace(/\\"/g, '"').replace(/(^"|"$)/g, "'"), Me2 = te2.stylize(Me2, "string"));
    }
    return Me2 + ": " + Ae2;
  }
  function ie2(te2, me2, Ie2) {
    var $e2 = te2.reduce(function(ye2, he2) {
      return he2.indexOf(`
`) >= 0, ye2 + he2.replace(/\u001b\[\d\d?m/g, "").length + 1;
    }, 0);
    return $e2 > 60 ? Ie2[0] + (me2 === "" ? "" : me2 + `
 `) + " " + te2.join(`,
  `) + " " + Ie2[1] : Ie2[0] + me2 + " " + te2.join(", ") + " " + Ie2[1];
  }
  a420.types = types$2;
  function Q2(te2) {
    return Array.isArray(te2);
  }
  a420.isArray = Q2;
  function ne2(te2) {
    return typeof te2 == "boolean";
  }
  a420.isBoolean = ne2;
  function Z2(te2) {
    return te2 === null;
  }
  a420.isNull = Z2;
  function de2(te2) {
    return te2 == null;
  }
  a420.isNullOrUndefined = de2;
  function pe2(te2) {
    return typeof te2 == "number";
  }
  a420.isNumber = pe2;
  function le2(te2) {
    return typeof te2 == "string";
  }
  a420.isString = le2;
  function be2(te2) {
    return typeof te2 == "symbol";
  }
  a420.isSymbol = be2;
  function ke2(te2) {
    return te2 === void 0;
  }
  a420.isUndefined = ke2;
  function Te2(te2) {
    return q2(te2) && k(te2) === "[object RegExp]";
  }
  a420.isRegExp = Te2, a420.types.isRegExp = Te2;
  function q2(te2) {
    return typeof te2 == "object" && te2 !== null;
  }
  a420.isObject = q2;
  function z2(te2) {
    return q2(te2) && k(te2) === "[object Date]";
  }
  a420.isDate = z2, a420.types.isDate = z2;
  function C2(te2) {
    return q2(te2) && (k(te2) === "[object Error]" || te2 instanceof Error);
  }
  a420.isError = C2, a420.types.isNativeError = C2;
  function b(te2) {
    return typeof te2 == "function";
  }
  a420.isFunction = b;
  function E2(te2) {
    return te2 === null || typeof te2 == "boolean" || typeof te2 == "number" || typeof te2 == "string" || typeof te2 == "symbol" || // ES6 symbol
    typeof te2 > "u";
  }
  a420.isPrimitive = E2, a420.isBuffer = isBufferBrowser;
  function k(te2) {
    return Object.prototype.toString.call(te2);
  }
  function O2(te2) {
    return te2 < 10 ? "0" + te2.toString(10) : te2.toString(10);
  }
  var A2 = ["Jan", "Feb", "Mar", "Apr", "May", "Jun", "Jul", "Aug", "Sep", "Oct", "Nov", "Dec"];
  function x2() {
    var te2 = /* @__PURE__ */ new Date(), me2 = [O2(te2.getHours()), O2(te2.getMinutes()), O2(te2.getSeconds())].join(":");
    return [te2.getDate(), A2[te2.getMonth()], me2].join(" ");
  }
  a420.log = function() {
    console.log("%s - %s", x2(), a420.format.apply(a420, arguments));
  }, a420.inherits = inherits_browserExports, a420._extend = function(te2, me2) {
    if (!me2 || !q2(me2))
      return te2;
    for (var Ie2 = Object.keys(me2), $e2 = Ie2.length; $e2--; )
      te2[Ie2[$e2]] = me2[Ie2[$e2]];
    return te2;
  };
  function Y2(te2, me2) {
    return Object.prototype.hasOwnProperty.call(te2, me2);
  }
  var B2 = typeof Symbol < "u" ? Symbol("util.promisify.custom") : void 0;
  a420.promisify = function(me2) {
    if (typeof me2 != "function")
      throw new TypeError('The "original" argument must be of type Function');
    if (B2 && me2[B2]) {
      var Ie2 = me2[B2];
      if (typeof Ie2 != "function")
        throw new TypeError('The "util.promisify.custom" argument must be of type Function');
      return Object.defineProperty(Ie2, B2, { value: Ie2, enumerable: false, writable: false, configurable: true }), Ie2;
    }
    function Ie2() {
      for (var $e2, ye2, he2 = new Promise(function(xe2, ae2) {
        $e2 = xe2, ye2 = ae2;
      }), Me2 = [], Ae2 = 0; Ae2 < arguments.length; Ae2++)
        Me2.push(arguments[Ae2]);
      Me2.push(function(xe2, ae2) {
        xe2 ? ye2(xe2) : $e2(ae2);
      });
      try {
        me2.apply(this, Me2);
      } catch (xe2) {
        ye2(xe2);
      }
      return he2;
    }
    return Object.setPrototypeOf(Ie2, Object.getPrototypeOf(me2)), B2 && Object.defineProperty(Ie2, B2, { value: Ie2, enumerable: false, writable: false, configurable: true }), Object.defineProperties(Ie2, u2(me2));
  }, a420.promisify.custom = B2;
  function T2(te2, me2) {
    if (!te2) {
      var Ie2 = new Error("Promise was rejected with a falsy value");
      Ie2.reason = te2, te2 = Ie2;
    }
    return me2(te2);
  }
  function D2(te2) {
    if (typeof te2 != "function")
      throw new TypeError('The "original" argument must be of type Function');
    function me2() {
      for (var Ie2 = [], $e2 = 0; $e2 < arguments.length; $e2++)
        Ie2.push(arguments[$e2]);
      var ye2 = Ie2.pop();
      if (typeof ye2 != "function")
        throw new TypeError("The last argument must be of type Function");
      var he2 = this, Me2 = function() {
        return ye2.apply(he2, arguments);
      };
      te2.apply(this, Ie2).then(function(Ae2) {
        process$1.nextTick(Me2.bind(null, null, Ae2));
      }, function(Ae2) {
        process$1.nextTick(T2.bind(null, Ae2, Me2));
      });
    }
    return Object.setPrototypeOf(me2, Object.getPrototypeOf(te2)), Object.defineProperties(me2, u2(te2)), me2;
  }
  a420.callbackify = D2;
})(util$4);
var buffer_list$2, hasRequiredBuffer_list$2;
function requireBuffer_list$2() {
  if (hasRequiredBuffer_list$2)
    return buffer_list$2;
  hasRequiredBuffer_list$2 = 1;
  function a420(X2, ie2) {
    var Q2 = Object.keys(X2);
    if (Object.getOwnPropertySymbols) {
      var ne2 = Object.getOwnPropertySymbols(X2);
      ie2 && (ne2 = ne2.filter(function(Z2) {
        return Object.getOwnPropertyDescriptor(X2, Z2).enumerable;
      })), Q2.push.apply(Q2, ne2);
    }
    return Q2;
  }
  function u2(X2) {
    for (var ie2 = 1; ie2 < arguments.length; ie2++) {
      var Q2 = arguments[ie2] != null ? arguments[ie2] : {};
      ie2 % 2 ? a420(Object(Q2), true).forEach(function(ne2) {
        c(X2, ne2, Q2[ne2]);
      }) : Object.getOwnPropertyDescriptors ? Object.defineProperties(X2, Object.getOwnPropertyDescriptors(Q2)) : a420(Object(Q2)).forEach(function(ne2) {
        Object.defineProperty(X2, ne2, Object.getOwnPropertyDescriptor(Q2, ne2));
      });
    }
    return X2;
  }
  function c(X2, ie2, Q2) {
    return ie2 = _(ie2), ie2 in X2 ? Object.defineProperty(X2, ie2, { value: Q2, enumerable: true, configurable: true, writable: true }) : X2[ie2] = Q2, X2;
  }
  function l2(X2, ie2) {
    if (!(X2 instanceof ie2))
      throw new TypeError("Cannot call a class as a function");
  }
  function v2(X2, ie2) {
    for (var Q2 = 0; Q2 < ie2.length; Q2++) {
      var ne2 = ie2[Q2];
      ne2.enumerable = ne2.enumerable || false, ne2.configurable = true, "value" in ne2 && (ne2.writable = true), Object.defineProperty(X2, _(ne2.key), ne2);
    }
  }
  function p2(X2, ie2, Q2) {
    return ie2 && v2(X2.prototype, ie2), Q2 && v2(X2, Q2), Object.defineProperty(X2, "prototype", { writable: false }), X2;
  }
  function _(X2) {
    var ie2 = I2(X2, "string");
    return typeof ie2 == "symbol" ? ie2 : String(ie2);
  }
  function I2(X2, ie2) {
    if (typeof X2 != "object" || X2 === null)
      return X2;
    var Q2 = X2[Symbol.toPrimitive];
    if (Q2 !== void 0) {
      var ne2 = Q2.call(X2, ie2 || "default");
      if (typeof ne2 != "object")
        return ne2;
      throw new TypeError("@@toPrimitive must return a primitive value.");
    }
    return (ie2 === "string" ? String : Number)(X2);
  }
  var P2 = require$$0$2, $ = P2.Buffer, F2 = util$4, H2 = F2.inspect, j = H2 && H2.custom || "inspect";
  function ee2(X2, ie2, Q2) {
    $.prototype.copy.call(X2, ie2, Q2);
  }
  return buffer_list$2 = /* @__PURE__ */ function() {
    function X2() {
      l2(this, X2), this.head = null, this.tail = null, this.length = 0;
    }
    return p2(X2, [{ key: "push", value: function(Q2) {
      var ne2 = { data: Q2, next: null };
      this.length > 0 ? this.tail.next = ne2 : this.head = ne2, this.tail = ne2, ++this.length;
    } }, { key: "unshift", value: function(Q2) {
      var ne2 = { data: Q2, next: this.head };
      this.length === 0 && (this.tail = ne2), this.head = ne2, ++this.length;
    } }, { key: "shift", value: function() {
      if (this.length !== 0) {
        var Q2 = this.head.data;
        return this.length === 1 ? this.head = this.tail = null : this.head = this.head.next, --this.length, Q2;
      }
    } }, { key: "clear", value: function() {
      this.head = this.tail = null, this.length = 0;
    } }, { key: "join", value: function(Q2) {
      if (this.length === 0)
        return "";
      for (var ne2 = this.head, Z2 = "" + ne2.data; ne2 = ne2.next; )
        Z2 += Q2 + ne2.data;
      return Z2;
    } }, {
      key: "concat",
      value: function(Q2) {
        if (this.length === 0)
          return $.alloc(0);
        for (var ne2 = $.allocUnsafe(Q2 >>> 0), Z2 = this.head, de2 = 0; Z2; )
          ee2(Z2.data, ne2, de2), de2 += Z2.data.length, Z2 = Z2.next;
        return ne2;
      }
      // Consumes a specified amount of bytes or characters from the buffered data.
    }, { key: "consume", value: function(Q2, ne2) {
      var Z2;
      return Q2 < this.head.data.length ? (Z2 = this.head.data.slice(0, Q2), this.head.data = this.head.data.slice(Q2)) : Q2 === this.head.data.length ? Z2 = this.shift() : Z2 = ne2 ? this._getString(Q2) : this._getBuffer(Q2), Z2;
    } }, {
      key: "first",
      value: function() {
        return this.head.data;
      }
      // Consumes a specified amount of characters from the buffered data.
    }, {
      key: "_getString",
      value: function(Q2) {
        var ne2 = this.head, Z2 = 1, de2 = ne2.data;
        for (Q2 -= de2.length; ne2 = ne2.next; ) {
          var pe2 = ne2.data, le2 = Q2 > pe2.length ? pe2.length : Q2;
          if (le2 === pe2.length ? de2 += pe2 : de2 += pe2.slice(0, Q2), Q2 -= le2, Q2 === 0) {
            le2 === pe2.length ? (++Z2, ne2.next ? this.head = ne2.next : this.head = this.tail = null) : (this.head = ne2, ne2.data = pe2.slice(le2));
            break;
          }
          ++Z2;
        }
        return this.length -= Z2, de2;
      }
      // Consumes a specified amount of bytes from the buffered data.
    }, {
      key: "_getBuffer",
      value: function(Q2) {
        var ne2 = $.allocUnsafe(Q2), Z2 = this.head, de2 = 1;
        for (Z2.data.copy(ne2), Q2 -= Z2.data.length; Z2 = Z2.next; ) {
          var pe2 = Z2.data, le2 = Q2 > pe2.length ? pe2.length : Q2;
          if (pe2.copy(ne2, ne2.length - Q2, 0, le2), Q2 -= le2, Q2 === 0) {
            le2 === pe2.length ? (++de2, Z2.next ? this.head = Z2.next : this.head = this.tail = null) : (this.head = Z2, Z2.data = pe2.slice(le2));
            break;
          }
          ++de2;
        }
        return this.length -= de2, ne2;
      }
      // Make sure the linked list only shows the minimal necessary information.
    }, { key: j, value: function(Q2, ne2) {
      return H2(this, u2(u2({}, ne2), {}, {
        // Only inspect one level.
        depth: 0,
        // It should not recurse.
        customInspect: false
      }));
    } }]), X2;
  }(), buffer_list$2;
}
var destroy_1$2, hasRequiredDestroy;
function requireDestroy() {
  if (hasRequiredDestroy)
    return destroy_1$2;
  hasRequiredDestroy = 1;
  function a420(_, I2) {
    var P2 = this, $ = this._readableState && this._readableState.destroyed, F2 = this._writableState && this._writableState.destroyed;
    return $ || F2 ? (I2 ? I2(_) : _ && (this._writableState ? this._writableState.errorEmitted || (this._writableState.errorEmitted = true, process$1.nextTick(v2, this, _)) : process$1.nextTick(v2, this, _)), this) : (this._readableState && (this._readableState.destroyed = true), this._writableState && (this._writableState.destroyed = true), this._destroy(_ || null, function(H2) {
      !I2 && H2 ? P2._writableState ? P2._writableState.errorEmitted ? process$1.nextTick(c, P2) : (P2._writableState.errorEmitted = true, process$1.nextTick(u2, P2, H2)) : process$1.nextTick(u2, P2, H2) : I2 ? (process$1.nextTick(c, P2), I2(H2)) : process$1.nextTick(c, P2);
    }), this);
  }
  function u2(_, I2) {
    v2(_, I2), c(_);
  }
  function c(_) {
    _._writableState && !_._writableState.emitClose || _._readableState && !_._readableState.emitClose || _.emit("close");
  }
  function l2() {
    this._readableState && (this._readableState.destroyed = false, this._readableState.reading = false, this._readableState.ended = false, this._readableState.endEmitted = false), this._writableState && (this._writableState.destroyed = false, this._writableState.ended = false, this._writableState.ending = false, this._writableState.finalCalled = false, this._writableState.prefinished = false, this._writableState.finished = false, this._writableState.errorEmitted = false);
  }
  function v2(_, I2) {
    _.emit("error", I2);
  }
  function p2(_, I2) {
    var P2 = _._readableState, $ = _._writableState;
    P2 && P2.autoDestroy || $ && $.autoDestroy ? _.destroy(I2) : _.emit("error", I2);
  }
  return destroy_1$2 = { destroy: a420, undestroy: l2, errorOrDestroy: p2 }, destroy_1$2;
}
var errorsBrowser$2 = {}, hasRequiredErrorsBrowser;
function requireErrorsBrowser() {
  if (hasRequiredErrorsBrowser)
    return errorsBrowser$2;
  hasRequiredErrorsBrowser = 1;
  function a420(I2, P2) {
    I2.prototype = Object.create(P2.prototype), I2.prototype.constructor = I2, I2.__proto__ = P2;
  }
  var u2 = {};
  function c(I2, P2, $) {
    $ || ($ = Error);
    function F2(j, ee2, X2) {
      return typeof P2 == "string" ? P2 : P2(j, ee2, X2);
    }
    var H2 = /* @__PURE__ */ function(j) {
      a420(ee2, j);
      function ee2(X2, ie2, Q2) {
        return j.call(this, F2(X2, ie2, Q2)) || this;
      }
      return ee2;
    }($);
    H2.prototype.name = $.name, H2.prototype.code = I2, u2[I2] = H2;
  }
  function l2(I2, P2) {
    if (Array.isArray(I2)) {
      var $ = I2.length;
      return I2 = I2.map(function(F2) {
        return String(F2);
      }), $ > 2 ? "one of ".concat(P2, " ").concat(I2.slice(0, $ - 1).join(", "), ", or ") + I2[$ - 1] : $ === 2 ? "one of ".concat(P2, " ").concat(I2[0], " or ").concat(I2[1]) : "of ".concat(P2, " ").concat(I2[0]);
    } else
      return "of ".concat(P2, " ").concat(String(I2));
  }
  function v2(I2, P2, $) {
    return I2.substr(!$ || $ < 0 ? 0 : +$, P2.length) === P2;
  }
  function p2(I2, P2, $) {
    return ($ === void 0 || $ > I2.length) && ($ = I2.length), I2.substring($ - P2.length, $) === P2;
  }
  function _(I2, P2, $) {
    return typeof $ != "number" && ($ = 0), $ + P2.length > I2.length ? false : I2.indexOf(P2, $) !== -1;
  }
  return c("ERR_INVALID_OPT_VALUE", function(I2, P2) {
    return 'The value "' + P2 + '" is invalid for option "' + I2 + '"';
  }, TypeError), c("ERR_INVALID_ARG_TYPE", function(I2, P2, $) {
    var F2;
    typeof P2 == "string" && v2(P2, "not ") ? (F2 = "must not be", P2 = P2.replace(/^not /, "")) : F2 = "must be";
    var H2;
    if (p2(I2, " argument"))
      H2 = "The ".concat(I2, " ").concat(F2, " ").concat(l2(P2, "type"));
    else {
      var j = _(I2, ".") ? "property" : "argument";
      H2 = 'The "'.concat(I2, '" ').concat(j, " ").concat(F2, " ").concat(l2(P2, "type"));
    }
    return H2 += ". Received type ".concat(typeof $), H2;
  }, TypeError), c("ERR_STREAM_PUSH_AFTER_EOF", "stream.push() after EOF"), c("ERR_METHOD_NOT_IMPLEMENTED", function(I2) {
    return "The " + I2 + " method is not implemented";
  }), c("ERR_STREAM_PREMATURE_CLOSE", "Premature close"), c("ERR_STREAM_DESTROYED", function(I2) {
    return "Cannot call " + I2 + " after a stream was destroyed";
  }), c("ERR_MULTIPLE_CALLBACK", "Callback called multiple times"), c("ERR_STREAM_CANNOT_PIPE", "Cannot pipe, not readable"), c("ERR_STREAM_WRITE_AFTER_END", "write after end"), c("ERR_STREAM_NULL_VALUES", "May not write null values to stream", TypeError), c("ERR_UNKNOWN_ENCODING", function(I2) {
    return "Unknown encoding: " + I2;
  }, TypeError), c("ERR_STREAM_UNSHIFT_AFTER_END_EVENT", "stream.unshift() after end event"), errorsBrowser$2.codes = u2, errorsBrowser$2;
}
var state$5, hasRequiredState;
function requireState() {
  if (hasRequiredState)
    return state$5;
  hasRequiredState = 1;
  var a420 = requireErrorsBrowser().codes.ERR_INVALID_OPT_VALUE;
  function u2(l2, v2, p2) {
    return l2.highWaterMark != null ? l2.highWaterMark : v2 ? l2[p2] : null;
  }
  function c(l2, v2, p2, _) {
    var I2 = u2(v2, _, p2);
    if (I2 != null) {
      if (!(isFinite(I2) && Math.floor(I2) === I2) || I2 < 0) {
        var P2 = _ ? p2 : "highWaterMark";
        throw new a420(P2, I2);
      }
      return Math.floor(I2);
    }
    return l2.objectMode ? 16 : 16 * 1024;
  }
  return state$5 = { getHighWaterMark: c }, state$5;
}
var browser$c = deprecate;
function deprecate(a420, u2) {
  if (config$2("noDeprecation"))
    return a420;
  var c = false;
  function l2() {
    if (!c) {
      if (config$2("throwDeprecation"))
        throw new Error(u2);
      config$2("traceDeprecation") ? console.trace(u2) : console.warn(u2), c = true;
    }
    return a420.apply(this, arguments);
  }
  return l2;
}
function config$2(a420) {
  try {
    if (!commonjsGlobal$1.localStorage)
      return false;
  } catch {
    return false;
  }
  var u2 = commonjsGlobal$1.localStorage[a420];
  return u2 == null ? false : String(u2).toLowerCase() === "true";
}
var _stream_writable$2, hasRequired_stream_writable$2;
function require_stream_writable$2() {
  if (hasRequired_stream_writable$2)
    return _stream_writable$2;
  hasRequired_stream_writable$2 = 1, _stream_writable$2 = Te2;
  function a420(ye2) {
    var he2 = this;
    this.next = null, this.entry = null, this.finish = function() {
      $e2(he2, ye2);
    };
  }
  var u2;
  Te2.WritableState = be2;
  var c = { deprecate: browser$c }, l2 = requireStreamBrowser(), v2 = require$$0$2.Buffer, p2 = (typeof commonjsGlobal$1 < "u" ? commonjsGlobal$1 : typeof window < "u" ? window : typeof self < "u" ? self : {}).Uint8Array || function() {
  };
  function _(ye2) {
    return v2.from(ye2);
  }
  function I2(ye2) {
    return v2.isBuffer(ye2) || ye2 instanceof p2;
  }
  var P2 = requireDestroy(), $ = requireState(), F2 = $.getHighWaterMark, H2 = requireErrorsBrowser().codes, j = H2.ERR_INVALID_ARG_TYPE, ee2 = H2.ERR_METHOD_NOT_IMPLEMENTED, X2 = H2.ERR_MULTIPLE_CALLBACK, ie2 = H2.ERR_STREAM_CANNOT_PIPE, Q2 = H2.ERR_STREAM_DESTROYED, ne2 = H2.ERR_STREAM_NULL_VALUES, Z2 = H2.ERR_STREAM_WRITE_AFTER_END, de2 = H2.ERR_UNKNOWN_ENCODING, pe2 = P2.errorOrDestroy;
  inherits_browserExports(Te2, l2);
  function le2() {
  }
  function be2(ye2, he2, Me2) {
    u2 = u2 || require_stream_duplex$2(), ye2 = ye2 || {}, typeof Me2 != "boolean" && (Me2 = he2 instanceof u2), this.objectMode = !!ye2.objectMode, Me2 && (this.objectMode = this.objectMode || !!ye2.writableObjectMode), this.highWaterMark = F2(this, ye2, "writableHighWaterMark", Me2), this.finalCalled = false, this.needDrain = false, this.ending = false, this.ended = false, this.finished = false, this.destroyed = false;
    var Ae2 = ye2.decodeStrings === false;
    this.decodeStrings = !Ae2, this.defaultEncoding = ye2.defaultEncoding || "utf8", this.length = 0, this.writing = false, this.corked = 0, this.sync = true, this.bufferProcessing = false, this.onwrite = function(xe2) {
      A2(he2, xe2);
    }, this.writecb = null, this.writelen = 0, this.bufferedRequest = null, this.lastBufferedRequest = null, this.pendingcb = 0, this.prefinished = false, this.errorEmitted = false, this.emitClose = ye2.emitClose !== false, this.autoDestroy = !!ye2.autoDestroy, this.bufferedRequestCount = 0, this.corkedRequestsFree = new a420(this);
  }
  be2.prototype.getBuffer = function() {
    for (var he2 = this.bufferedRequest, Me2 = []; he2; )
      Me2.push(he2), he2 = he2.next;
    return Me2;
  }, function() {
    try {
      Object.defineProperty(be2.prototype, "buffer", { get: c.deprecate(function() {
        return this.getBuffer();
      }, "_writableState.buffer is deprecated. Use _writableState.getBuffer instead.", "DEP0003") });
    } catch {
    }
  }();
  var ke2;
  typeof Symbol == "function" && Symbol.hasInstance && typeof Function.prototype[Symbol.hasInstance] == "function" ? (ke2 = Function.prototype[Symbol.hasInstance], Object.defineProperty(Te2, Symbol.hasInstance, { value: function(he2) {
    return ke2.call(this, he2) ? true : this !== Te2 ? false : he2 && he2._writableState instanceof be2;
  } })) : ke2 = function(he2) {
    return he2 instanceof this;
  };
  function Te2(ye2) {
    u2 = u2 || require_stream_duplex$2();
    var he2 = this instanceof u2;
    if (!he2 && !ke2.call(Te2, this))
      return new Te2(ye2);
    this._writableState = new be2(ye2, this, he2), this.writable = true, ye2 && (typeof ye2.write == "function" && (this._write = ye2.write), typeof ye2.writev == "function" && (this._writev = ye2.writev), typeof ye2.destroy == "function" && (this._destroy = ye2.destroy), typeof ye2.final == "function" && (this._final = ye2.final)), l2.call(this);
  }
  Te2.prototype.pipe = function() {
    pe2(this, new ie2());
  };
  function q2(ye2, he2) {
    var Me2 = new Z2();
    pe2(ye2, Me2), process$1.nextTick(he2, Me2);
  }
  function z2(ye2, he2, Me2, Ae2) {
    var xe2;
    return Me2 === null ? xe2 = new ne2() : typeof Me2 != "string" && !he2.objectMode && (xe2 = new j("chunk", ["string", "Buffer"], Me2)), xe2 ? (pe2(ye2, xe2), process$1.nextTick(Ae2, xe2), false) : true;
  }
  Te2.prototype.write = function(ye2, he2, Me2) {
    var Ae2 = this._writableState, xe2 = false, ae2 = !Ae2.objectMode && I2(ye2);
    return ae2 && !v2.isBuffer(ye2) && (ye2 = _(ye2)), typeof he2 == "function" && (Me2 = he2, he2 = null), ae2 ? he2 = "buffer" : he2 || (he2 = Ae2.defaultEncoding), typeof Me2 != "function" && (Me2 = le2), Ae2.ending ? q2(this, Me2) : (ae2 || z2(this, Ae2, ye2, Me2)) && (Ae2.pendingcb++, xe2 = b(this, Ae2, ae2, ye2, he2, Me2)), xe2;
  }, Te2.prototype.cork = function() {
    this._writableState.corked++;
  }, Te2.prototype.uncork = function() {
    var ye2 = this._writableState;
    ye2.corked && (ye2.corked--, !ye2.writing && !ye2.corked && !ye2.bufferProcessing && ye2.bufferedRequest && B2(this, ye2));
  }, Te2.prototype.setDefaultEncoding = function(he2) {
    if (typeof he2 == "string" && (he2 = he2.toLowerCase()), !(["hex", "utf8", "utf-8", "ascii", "binary", "base64", "ucs2", "ucs-2", "utf16le", "utf-16le", "raw"].indexOf((he2 + "").toLowerCase()) > -1))
      throw new de2(he2);
    return this._writableState.defaultEncoding = he2, this;
  }, Object.defineProperty(Te2.prototype, "writableBuffer", {
    // making it explicit this property is not enumerable
    // because otherwise some prototype manipulation in
    // userland will fail
    enumerable: false,
    get: function() {
      return this._writableState && this._writableState.getBuffer();
    }
  });
  function C2(ye2, he2, Me2) {
    return !ye2.objectMode && ye2.decodeStrings !== false && typeof he2 == "string" && (he2 = v2.from(he2, Me2)), he2;
  }
  Object.defineProperty(Te2.prototype, "writableHighWaterMark", {
    // making it explicit this property is not enumerable
    // because otherwise some prototype manipulation in
    // userland will fail
    enumerable: false,
    get: function() {
      return this._writableState.highWaterMark;
    }
  });
  function b(ye2, he2, Me2, Ae2, xe2, ae2) {
    if (!Me2) {
      var N2 = C2(he2, Ae2, xe2);
      Ae2 !== N2 && (Me2 = true, xe2 = "buffer", Ae2 = N2);
    }
    var re2 = he2.objectMode ? 1 : Ae2.length;
    he2.length += re2;
    var fe2 = he2.length < he2.highWaterMark;
    if (fe2 || (he2.needDrain = true), he2.writing || he2.corked) {
      var Ne2 = he2.lastBufferedRequest;
      he2.lastBufferedRequest = { chunk: Ae2, encoding: xe2, isBuf: Me2, callback: ae2, next: null }, Ne2 ? Ne2.next = he2.lastBufferedRequest : he2.bufferedRequest = he2.lastBufferedRequest, he2.bufferedRequestCount += 1;
    } else
      E2(ye2, he2, false, re2, Ae2, xe2, ae2);
    return fe2;
  }
  function E2(ye2, he2, Me2, Ae2, xe2, ae2, N2) {
    he2.writelen = Ae2, he2.writecb = N2, he2.writing = true, he2.sync = true, he2.destroyed ? he2.onwrite(new Q2("write")) : Me2 ? ye2._writev(xe2, he2.onwrite) : ye2._write(xe2, ae2, he2.onwrite), he2.sync = false;
  }
  function k(ye2, he2, Me2, Ae2, xe2) {
    --he2.pendingcb, Me2 ? (process$1.nextTick(xe2, Ae2), process$1.nextTick(me2, ye2, he2), ye2._writableState.errorEmitted = true, pe2(ye2, Ae2)) : (xe2(Ae2), ye2._writableState.errorEmitted = true, pe2(ye2, Ae2), me2(ye2, he2));
  }
  function O2(ye2) {
    ye2.writing = false, ye2.writecb = null, ye2.length -= ye2.writelen, ye2.writelen = 0;
  }
  function A2(ye2, he2) {
    var Me2 = ye2._writableState, Ae2 = Me2.sync, xe2 = Me2.writecb;
    if (typeof xe2 != "function")
      throw new X2();
    if (O2(Me2), he2)
      k(ye2, Me2, Ae2, he2, xe2);
    else {
      var ae2 = T2(Me2) || ye2.destroyed;
      !ae2 && !Me2.corked && !Me2.bufferProcessing && Me2.bufferedRequest && B2(ye2, Me2), Ae2 ? process$1.nextTick(x2, ye2, Me2, ae2, xe2) : x2(ye2, Me2, ae2, xe2);
    }
  }
  function x2(ye2, he2, Me2, Ae2) {
    Me2 || Y2(ye2, he2), he2.pendingcb--, Ae2(), me2(ye2, he2);
  }
  function Y2(ye2, he2) {
    he2.length === 0 && he2.needDrain && (he2.needDrain = false, ye2.emit("drain"));
  }
  function B2(ye2, he2) {
    he2.bufferProcessing = true;
    var Me2 = he2.bufferedRequest;
    if (ye2._writev && Me2 && Me2.next) {
      var Ae2 = he2.bufferedRequestCount, xe2 = new Array(Ae2), ae2 = he2.corkedRequestsFree;
      ae2.entry = Me2;
      for (var N2 = 0, re2 = true; Me2; )
        xe2[N2] = Me2, Me2.isBuf || (re2 = false), Me2 = Me2.next, N2 += 1;
      xe2.allBuffers = re2, E2(ye2, he2, true, he2.length, xe2, "", ae2.finish), he2.pendingcb++, he2.lastBufferedRequest = null, ae2.next ? (he2.corkedRequestsFree = ae2.next, ae2.next = null) : he2.corkedRequestsFree = new a420(he2), he2.bufferedRequestCount = 0;
    } else {
      for (; Me2; ) {
        var fe2 = Me2.chunk, Ne2 = Me2.encoding, Oe2 = Me2.callback, qe2 = he2.objectMode ? 1 : fe2.length;
        if (E2(ye2, he2, false, qe2, fe2, Ne2, Oe2), Me2 = Me2.next, he2.bufferedRequestCount--, he2.writing)
          break;
      }
      Me2 === null && (he2.lastBufferedRequest = null);
    }
    he2.bufferedRequest = Me2, he2.bufferProcessing = false;
  }
  Te2.prototype._write = function(ye2, he2, Me2) {
    Me2(new ee2("_write()"));
  }, Te2.prototype._writev = null, Te2.prototype.end = function(ye2, he2, Me2) {
    var Ae2 = this._writableState;
    return typeof ye2 == "function" ? (Me2 = ye2, ye2 = null, he2 = null) : typeof he2 == "function" && (Me2 = he2, he2 = null), ye2 != null && this.write(ye2, he2), Ae2.corked && (Ae2.corked = 1, this.uncork()), Ae2.ending || Ie2(this, Ae2, Me2), this;
  }, Object.defineProperty(Te2.prototype, "writableLength", {
    // making it explicit this property is not enumerable
    // because otherwise some prototype manipulation in
    // userland will fail
    enumerable: false,
    get: function() {
      return this._writableState.length;
    }
  });
  function T2(ye2) {
    return ye2.ending && ye2.length === 0 && ye2.bufferedRequest === null && !ye2.finished && !ye2.writing;
  }
  function D2(ye2, he2) {
    ye2._final(function(Me2) {
      he2.pendingcb--, Me2 && pe2(ye2, Me2), he2.prefinished = true, ye2.emit("prefinish"), me2(ye2, he2);
    });
  }
  function te2(ye2, he2) {
    !he2.prefinished && !he2.finalCalled && (typeof ye2._final == "function" && !he2.destroyed ? (he2.pendingcb++, he2.finalCalled = true, process$1.nextTick(D2, ye2, he2)) : (he2.prefinished = true, ye2.emit("prefinish")));
  }
  function me2(ye2, he2) {
    var Me2 = T2(he2);
    if (Me2 && (te2(ye2, he2), he2.pendingcb === 0 && (he2.finished = true, ye2.emit("finish"), he2.autoDestroy))) {
      var Ae2 = ye2._readableState;
      (!Ae2 || Ae2.autoDestroy && Ae2.endEmitted) && ye2.destroy();
    }
    return Me2;
  }
  function Ie2(ye2, he2, Me2) {
    he2.ending = true, me2(ye2, he2), Me2 && (he2.finished ? process$1.nextTick(Me2) : ye2.once("finish", Me2)), he2.ended = true, ye2.writable = false;
  }
  function $e2(ye2, he2, Me2) {
    var Ae2 = ye2.entry;
    for (ye2.entry = null; Ae2; ) {
      var xe2 = Ae2.callback;
      he2.pendingcb--, xe2(Me2), Ae2 = Ae2.next;
    }
    he2.corkedRequestsFree.next = ye2;
  }
  return Object.defineProperty(Te2.prototype, "destroyed", {
    // making it explicit this property is not enumerable
    // because otherwise some prototype manipulation in
    // userland will fail
    enumerable: false,
    get: function() {
      return this._writableState === void 0 ? false : this._writableState.destroyed;
    },
    set: function(he2) {
      this._writableState && (this._writableState.destroyed = he2);
    }
  }), Te2.prototype.destroy = P2.destroy, Te2.prototype._undestroy = P2.undestroy, Te2.prototype._destroy = function(ye2, he2) {
    he2(ye2);
  }, _stream_writable$2;
}
var _stream_duplex$2, hasRequired_stream_duplex$2;
function require_stream_duplex$2() {
  if (hasRequired_stream_duplex$2)
    return _stream_duplex$2;
  hasRequired_stream_duplex$2 = 1;
  var a420 = Object.keys || function($) {
    var F2 = [];
    for (var H2 in $)
      F2.push(H2);
    return F2;
  };
  _stream_duplex$2 = _;
  var u2 = require_stream_readable$2(), c = require_stream_writable$2();
  inherits_browserExports(_, u2);
  for (var l2 = a420(c.prototype), v2 = 0; v2 < l2.length; v2++) {
    var p2 = l2[v2];
    _.prototype[p2] || (_.prototype[p2] = c.prototype[p2]);
  }
  function _($) {
    if (!(this instanceof _))
      return new _($);
    u2.call(this, $), c.call(this, $), this.allowHalfOpen = true, $ && ($.readable === false && (this.readable = false), $.writable === false && (this.writable = false), $.allowHalfOpen === false && (this.allowHalfOpen = false, this.once("end", I2)));
  }
  Object.defineProperty(_.prototype, "writableHighWaterMark", {
    // making it explicit this property is not enumerable
    // because otherwise some prototype manipulation in
    // userland will fail
    enumerable: false,
    get: function() {
      return this._writableState.highWaterMark;
    }
  }), Object.defineProperty(_.prototype, "writableBuffer", {
    // making it explicit this property is not enumerable
    // because otherwise some prototype manipulation in
    // userland will fail
    enumerable: false,
    get: function() {
      return this._writableState && this._writableState.getBuffer();
    }
  }), Object.defineProperty(_.prototype, "writableLength", {
    // making it explicit this property is not enumerable
    // because otherwise some prototype manipulation in
    // userland will fail
    enumerable: false,
    get: function() {
      return this._writableState.length;
    }
  });
  function I2() {
    this._writableState.ended || process$1.nextTick(P2, this);
  }
  function P2($) {
    $.end();
  }
  return Object.defineProperty(_.prototype, "destroyed", {
    // making it explicit this property is not enumerable
    // because otherwise some prototype manipulation in
    // userland will fail
    enumerable: false,
    get: function() {
      return this._readableState === void 0 || this._writableState === void 0 ? false : this._readableState.destroyed && this._writableState.destroyed;
    },
    set: function(F2) {
      this._readableState === void 0 || this._writableState === void 0 || (this._readableState.destroyed = F2, this._writableState.destroyed = F2);
    }
  }), _stream_duplex$2;
}
var string_decoder = {}, safeBuffer$3 = { exports: {} };
/*! safe-buffer. MIT License. Feross Aboukhadijeh <https://feross.org/opensource> */
(function(a420, u2) {
  var c = require$$0$2, l2 = c.Buffer;
  function v2(_, I2) {
    for (var P2 in _)
      I2[P2] = _[P2];
  }
  l2.from && l2.alloc && l2.allocUnsafe && l2.allocUnsafeSlow ? a420.exports = c : (v2(c, u2), u2.Buffer = p2);
  function p2(_, I2, P2) {
    return l2(_, I2, P2);
  }
  p2.prototype = Object.create(l2.prototype), v2(l2, p2), p2.from = function(_, I2, P2) {
    if (typeof _ == "number")
      throw new TypeError("Argument must not be a number");
    return l2(_, I2, P2);
  }, p2.alloc = function(_, I2, P2) {
    if (typeof _ != "number")
      throw new TypeError("Argument must be a number");
    var $ = l2(_);
    return I2 !== void 0 ? typeof P2 == "string" ? $.fill(I2, P2) : $.fill(I2) : $.fill(0), $;
  }, p2.allocUnsafe = function(_) {
    if (typeof _ != "number")
      throw new TypeError("Argument must be a number");
    return l2(_);
  }, p2.allocUnsafeSlow = function(_) {
    if (typeof _ != "number")
      throw new TypeError("Argument must be a number");
    return c.SlowBuffer(_);
  };
})(safeBuffer$3, safeBuffer$3.exports);
var safeBufferExports$2 = safeBuffer$3.exports, Buffer$L = safeBufferExports$2.Buffer, isEncoding = Buffer$L.isEncoding || function(a420) {
  switch (a420 = "" + a420, a420 && a420.toLowerCase()) {
    case "hex":
    case "utf8":
    case "utf-8":
    case "ascii":
    case "binary":
    case "base64":
    case "ucs2":
    case "ucs-2":
    case "utf16le":
    case "utf-16le":
    case "raw":
      return true;
    default:
      return false;
  }
};
function _normalizeEncoding(a420) {
  if (!a420)
    return "utf8";
  for (var u2; ; )
    switch (a420) {
      case "utf8":
      case "utf-8":
        return "utf8";
      case "ucs2":
      case "ucs-2":
      case "utf16le":
      case "utf-16le":
        return "utf16le";
      case "latin1":
      case "binary":
        return "latin1";
      case "base64":
      case "ascii":
      case "hex":
        return a420;
      default:
        if (u2)
          return;
        a420 = ("" + a420).toLowerCase(), u2 = true;
    }
}
function normalizeEncoding(a420) {
  var u2 = _normalizeEncoding(a420);
  if (typeof u2 != "string" && (Buffer$L.isEncoding === isEncoding || !isEncoding(a420)))
    throw new Error("Unknown encoding: " + a420);
  return u2 || a420;
}
string_decoder.StringDecoder = StringDecoder$1;
function StringDecoder$1(a420) {
  this.encoding = normalizeEncoding(a420);
  var u2;
  switch (this.encoding) {
    case "utf16le":
      this.text = utf16Text, this.end = utf16End, u2 = 4;
      break;
    case "utf8":
      this.fillLast = utf8FillLast, u2 = 4;
      break;
    case "base64":
      this.text = base64Text, this.end = base64End, u2 = 3;
      break;
    default:
      this.write = simpleWrite, this.end = simpleEnd;
      return;
  }
  this.lastNeed = 0, this.lastTotal = 0, this.lastChar = Buffer$L.allocUnsafe(u2);
}
StringDecoder$1.prototype.write = function(a420) {
  if (a420.length === 0)
    return "";
  var u2, c;
  if (this.lastNeed) {
    if (u2 = this.fillLast(a420), u2 === void 0)
      return "";
    c = this.lastNeed, this.lastNeed = 0;
  } else
    c = 0;
  return c < a420.length ? u2 ? u2 + this.text(a420, c) : this.text(a420, c) : u2 || "";
};
StringDecoder$1.prototype.end = utf8End;
StringDecoder$1.prototype.text = utf8Text;
StringDecoder$1.prototype.fillLast = function(a420) {
  if (this.lastNeed <= a420.length)
    return a420.copy(this.lastChar, this.lastTotal - this.lastNeed, 0, this.lastNeed), this.lastChar.toString(this.encoding, 0, this.lastTotal);
  a420.copy(this.lastChar, this.lastTotal - this.lastNeed, 0, a420.length), this.lastNeed -= a420.length;
};
function utf8CheckByte(a420) {
  return a420 <= 127 ? 0 : a420 >> 5 === 6 ? 2 : a420 >> 4 === 14 ? 3 : a420 >> 3 === 30 ? 4 : a420 >> 6 === 2 ? -1 : -2;
}
function utf8CheckIncomplete(a420, u2, c) {
  var l2 = u2.length - 1;
  if (l2 < c)
    return 0;
  var v2 = utf8CheckByte(u2[l2]);
  return v2 >= 0 ? (v2 > 0 && (a420.lastNeed = v2 - 1), v2) : --l2 < c || v2 === -2 ? 0 : (v2 = utf8CheckByte(u2[l2]), v2 >= 0 ? (v2 > 0 && (a420.lastNeed = v2 - 2), v2) : --l2 < c || v2 === -2 ? 0 : (v2 = utf8CheckByte(u2[l2]), v2 >= 0 ? (v2 > 0 && (v2 === 2 ? v2 = 0 : a420.lastNeed = v2 - 3), v2) : 0));
}
function utf8CheckExtraBytes(a420, u2, c) {
  if ((u2[0] & 192) !== 128)
    return a420.lastNeed = 0, "�";
  if (a420.lastNeed > 1 && u2.length > 1) {
    if ((u2[1] & 192) !== 128)
      return a420.lastNeed = 1, "�";
    if (a420.lastNeed > 2 && u2.length > 2 && (u2[2] & 192) !== 128)
      return a420.lastNeed = 2, "�";
  }
}
function utf8FillLast(a420) {
  var u2 = this.lastTotal - this.lastNeed, c = utf8CheckExtraBytes(this, a420);
  if (c !== void 0)
    return c;
  if (this.lastNeed <= a420.length)
    return a420.copy(this.lastChar, u2, 0, this.lastNeed), this.lastChar.toString(this.encoding, 0, this.lastTotal);
  a420.copy(this.lastChar, u2, 0, a420.length), this.lastNeed -= a420.length;
}
function utf8Text(a420, u2) {
  var c = utf8CheckIncomplete(this, a420, u2);
  if (!this.lastNeed)
    return a420.toString("utf8", u2);
  this.lastTotal = c;
  var l2 = a420.length - (c - this.lastNeed);
  return a420.copy(this.lastChar, 0, l2), a420.toString("utf8", u2, l2);
}
function utf8End(a420) {
  var u2 = a420 && a420.length ? this.write(a420) : "";
  return this.lastNeed ? u2 + "�" : u2;
}
function utf16Text(a420, u2) {
  if ((a420.length - u2) % 2 === 0) {
    var c = a420.toString("utf16le", u2);
    if (c) {
      var l2 = c.charCodeAt(c.length - 1);
      if (l2 >= 55296 && l2 <= 56319)
        return this.lastNeed = 2, this.lastTotal = 4, this.lastChar[0] = a420[a420.length - 2], this.lastChar[1] = a420[a420.length - 1], c.slice(0, -1);
    }
    return c;
  }
  return this.lastNeed = 1, this.lastTotal = 2, this.lastChar[0] = a420[a420.length - 1], a420.toString("utf16le", u2, a420.length - 1);
}
function utf16End(a420) {
  var u2 = a420 && a420.length ? this.write(a420) : "";
  if (this.lastNeed) {
    var c = this.lastTotal - this.lastNeed;
    return u2 + this.lastChar.toString("utf16le", 0, c);
  }
  return u2;
}
function base64Text(a420, u2) {
  var c = (a420.length - u2) % 3;
  return c === 0 ? a420.toString("base64", u2) : (this.lastNeed = 3 - c, this.lastTotal = 3, c === 1 ? this.lastChar[0] = a420[a420.length - 1] : (this.lastChar[0] = a420[a420.length - 2], this.lastChar[1] = a420[a420.length - 1]), a420.toString("base64", u2, a420.length - c));
}
function base64End(a420) {
  var u2 = a420 && a420.length ? this.write(a420) : "";
  return this.lastNeed ? u2 + this.lastChar.toString("base64", 0, 3 - this.lastNeed) : u2;
}
function simpleWrite(a420) {
  return a420.toString(this.encoding);
}
function simpleEnd(a420) {
  return a420 && a420.length ? this.write(a420) : "";
}
var endOfStream$2, hasRequiredEndOfStream;
function requireEndOfStream() {
  if (hasRequiredEndOfStream)
    return endOfStream$2;
  hasRequiredEndOfStream = 1;
  var a420 = requireErrorsBrowser().codes.ERR_STREAM_PREMATURE_CLOSE;
  function u2(p2) {
    var _ = false;
    return function() {
      if (!_) {
        _ = true;
        for (var I2 = arguments.length, P2 = new Array(I2), $ = 0; $ < I2; $++)
          P2[$] = arguments[$];
        p2.apply(this, P2);
      }
    };
  }
  function c() {
  }
  function l2(p2) {
    return p2.setHeader && typeof p2.abort == "function";
  }
  function v2(p2, _, I2) {
    if (typeof _ == "function")
      return v2(p2, null, _);
    _ || (_ = {}), I2 = u2(I2 || c);
    var P2 = _.readable || _.readable !== false && p2.readable, $ = _.writable || _.writable !== false && p2.writable, F2 = function() {
      p2.writable || j();
    }, H2 = p2._writableState && p2._writableState.finished, j = function() {
      $ = false, H2 = true, P2 || I2.call(p2);
    }, ee2 = p2._readableState && p2._readableState.endEmitted, X2 = function() {
      P2 = false, ee2 = true, $ || I2.call(p2);
    }, ie2 = function(de2) {
      I2.call(p2, de2);
    }, Q2 = function() {
      var de2;
      if (P2 && !ee2)
        return (!p2._readableState || !p2._readableState.ended) && (de2 = new a420()), I2.call(p2, de2);
      if ($ && !H2)
        return (!p2._writableState || !p2._writableState.ended) && (de2 = new a420()), I2.call(p2, de2);
    }, ne2 = function() {
      p2.req.on("finish", j);
    };
    return l2(p2) ? (p2.on("complete", j), p2.on("abort", Q2), p2.req ? ne2() : p2.on("request", ne2)) : $ && !p2._writableState && (p2.on("end", F2), p2.on("close", F2)), p2.on("end", X2), p2.on("finish", j), _.error !== false && p2.on("error", ie2), p2.on("close", Q2), function() {
      p2.removeListener("complete", j), p2.removeListener("abort", Q2), p2.removeListener("request", ne2), p2.req && p2.req.removeListener("finish", j), p2.removeListener("end", F2), p2.removeListener("close", F2), p2.removeListener("finish", j), p2.removeListener("end", X2), p2.removeListener("error", ie2), p2.removeListener("close", Q2);
    };
  }
  return endOfStream$2 = v2, endOfStream$2;
}
var async_iterator$2, hasRequiredAsync_iterator$2;
function requireAsync_iterator$2() {
  if (hasRequiredAsync_iterator$2)
    return async_iterator$2;
  hasRequiredAsync_iterator$2 = 1;
  var a420;
  function u2(de2, pe2, le2) {
    return pe2 = c(pe2), pe2 in de2 ? Object.defineProperty(de2, pe2, { value: le2, enumerable: true, configurable: true, writable: true }) : de2[pe2] = le2, de2;
  }
  function c(de2) {
    var pe2 = l2(de2, "string");
    return typeof pe2 == "symbol" ? pe2 : String(pe2);
  }
  function l2(de2, pe2) {
    if (typeof de2 != "object" || de2 === null)
      return de2;
    var le2 = de2[Symbol.toPrimitive];
    if (le2 !== void 0) {
      var be2 = le2.call(de2, pe2 || "default");
      if (typeof be2 != "object")
        return be2;
      throw new TypeError("@@toPrimitive must return a primitive value.");
    }
    return (pe2 === "string" ? String : Number)(de2);
  }
  var v2 = requireEndOfStream(), p2 = Symbol("lastResolve"), _ = Symbol("lastReject"), I2 = Symbol("error"), P2 = Symbol("ended"), $ = Symbol("lastPromise"), F2 = Symbol("handlePromise"), H2 = Symbol("stream");
  function j(de2, pe2) {
    return { value: de2, done: pe2 };
  }
  function ee2(de2) {
    var pe2 = de2[p2];
    if (pe2 !== null) {
      var le2 = de2[H2].read();
      le2 !== null && (de2[$] = null, de2[p2] = null, de2[_] = null, pe2(j(le2, false)));
    }
  }
  function X2(de2) {
    process$1.nextTick(ee2, de2);
  }
  function ie2(de2, pe2) {
    return function(le2, be2) {
      de2.then(function() {
        if (pe2[P2]) {
          le2(j(void 0, true));
          return;
        }
        pe2[F2](le2, be2);
      }, be2);
    };
  }
  var Q2 = Object.getPrototypeOf(function() {
  }), ne2 = Object.setPrototypeOf((a420 = { get stream() {
    return this[H2];
  }, next: function() {
    var pe2 = this, le2 = this[I2];
    if (le2 !== null)
      return Promise.reject(le2);
    if (this[P2])
      return Promise.resolve(j(void 0, true));
    if (this[H2].destroyed)
      return new Promise(function(q2, z2) {
        process$1.nextTick(function() {
          pe2[I2] ? z2(pe2[I2]) : q2(j(void 0, true));
        });
      });
    var be2 = this[$], ke2;
    if (be2)
      ke2 = new Promise(ie2(be2, this));
    else {
      var Te2 = this[H2].read();
      if (Te2 !== null)
        return Promise.resolve(j(Te2, false));
      ke2 = new Promise(this[F2]);
    }
    return this[$] = ke2, ke2;
  } }, u2(a420, Symbol.asyncIterator, function() {
    return this;
  }), u2(a420, "return", function() {
    var pe2 = this;
    return new Promise(function(le2, be2) {
      pe2[H2].destroy(null, function(ke2) {
        if (ke2) {
          be2(ke2);
          return;
        }
        le2(j(void 0, true));
      });
    });
  }), a420), Q2), Z2 = function(pe2) {
    var le2, be2 = Object.create(ne2, (le2 = {}, u2(le2, H2, { value: pe2, writable: true }), u2(le2, p2, { value: null, writable: true }), u2(le2, _, { value: null, writable: true }), u2(le2, I2, { value: null, writable: true }), u2(le2, P2, { value: pe2._readableState.endEmitted, writable: true }), u2(le2, F2, { value: function(Te2, q2) {
      var z2 = be2[H2].read();
      z2 ? (be2[$] = null, be2[p2] = null, be2[_] = null, Te2(j(z2, false))) : (be2[p2] = Te2, be2[_] = q2);
    }, writable: true }), le2));
    return be2[$] = null, v2(pe2, function(ke2) {
      if (ke2 && ke2.code !== "ERR_STREAM_PREMATURE_CLOSE") {
        var Te2 = be2[_];
        Te2 !== null && (be2[$] = null, be2[p2] = null, be2[_] = null, Te2(ke2)), be2[I2] = ke2;
        return;
      }
      var q2 = be2[p2];
      q2 !== null && (be2[$] = null, be2[p2] = null, be2[_] = null, q2(j(void 0, true))), be2[P2] = true;
    }), pe2.on("readable", X2.bind(null, be2)), be2;
  };
  return async_iterator$2 = Z2, async_iterator$2;
}
var fromBrowser$2, hasRequiredFromBrowser$2;
function requireFromBrowser$2() {
  return hasRequiredFromBrowser$2 || (hasRequiredFromBrowser$2 = 1, fromBrowser$2 = function() {
    throw new Error("Readable.from is not available in the browser");
  }), fromBrowser$2;
}
var _stream_readable$2, hasRequired_stream_readable$2;
function require_stream_readable$2() {
  if (hasRequired_stream_readable$2)
    return _stream_readable$2;
  hasRequired_stream_readable$2 = 1, _stream_readable$2 = q2;
  var a420;
  q2.ReadableState = Te2, eventsExports$1.EventEmitter;
  var u2 = function(N2, re2) {
    return N2.listeners(re2).length;
  }, c = requireStreamBrowser(), l2 = require$$0$2.Buffer, v2 = (typeof commonjsGlobal$1 < "u" ? commonjsGlobal$1 : typeof window < "u" ? window : typeof self < "u" ? self : {}).Uint8Array || function() {
  };
  function p2(ae2) {
    return l2.from(ae2);
  }
  function _(ae2) {
    return l2.isBuffer(ae2) || ae2 instanceof v2;
  }
  var I2 = util$4, P2;
  I2 && I2.debuglog ? P2 = I2.debuglog("stream") : P2 = function() {
  };
  var $ = requireBuffer_list$2(), F2 = requireDestroy(), H2 = requireState(), j = H2.getHighWaterMark, ee2 = requireErrorsBrowser().codes, X2 = ee2.ERR_INVALID_ARG_TYPE, ie2 = ee2.ERR_STREAM_PUSH_AFTER_EOF, Q2 = ee2.ERR_METHOD_NOT_IMPLEMENTED, ne2 = ee2.ERR_STREAM_UNSHIFT_AFTER_END_EVENT, Z2, de2, pe2;
  inherits_browserExports(q2, c);
  var le2 = F2.errorOrDestroy, be2 = ["error", "close", "destroy", "pause", "resume"];
  function ke2(ae2, N2, re2) {
    if (typeof ae2.prependListener == "function")
      return ae2.prependListener(N2, re2);
    !ae2._events || !ae2._events[N2] ? ae2.on(N2, re2) : Array.isArray(ae2._events[N2]) ? ae2._events[N2].unshift(re2) : ae2._events[N2] = [re2, ae2._events[N2]];
  }
  function Te2(ae2, N2, re2) {
    a420 = a420 || require_stream_duplex$2(), ae2 = ae2 || {}, typeof re2 != "boolean" && (re2 = N2 instanceof a420), this.objectMode = !!ae2.objectMode, re2 && (this.objectMode = this.objectMode || !!ae2.readableObjectMode), this.highWaterMark = j(this, ae2, "readableHighWaterMark", re2), this.buffer = new $(), this.length = 0, this.pipes = null, this.pipesCount = 0, this.flowing = null, this.ended = false, this.endEmitted = false, this.reading = false, this.sync = true, this.needReadable = false, this.emittedReadable = false, this.readableListening = false, this.resumeScheduled = false, this.paused = true, this.emitClose = ae2.emitClose !== false, this.autoDestroy = !!ae2.autoDestroy, this.destroyed = false, this.defaultEncoding = ae2.defaultEncoding || "utf8", this.awaitDrain = 0, this.readingMore = false, this.decoder = null, this.encoding = null, ae2.encoding && (Z2 || (Z2 = string_decoder.StringDecoder), this.decoder = new Z2(ae2.encoding), this.encoding = ae2.encoding);
  }
  function q2(ae2) {
    if (a420 = a420 || require_stream_duplex$2(), !(this instanceof q2))
      return new q2(ae2);
    var N2 = this instanceof a420;
    this._readableState = new Te2(ae2, this, N2), this.readable = true, ae2 && (typeof ae2.read == "function" && (this._read = ae2.read), typeof ae2.destroy == "function" && (this._destroy = ae2.destroy)), c.call(this);
  }
  Object.defineProperty(q2.prototype, "destroyed", {
    // making it explicit this property is not enumerable
    // because otherwise some prototype manipulation in
    // userland will fail
    enumerable: false,
    get: function() {
      return this._readableState === void 0 ? false : this._readableState.destroyed;
    },
    set: function(N2) {
      this._readableState && (this._readableState.destroyed = N2);
    }
  }), q2.prototype.destroy = F2.destroy, q2.prototype._undestroy = F2.undestroy, q2.prototype._destroy = function(ae2, N2) {
    N2(ae2);
  }, q2.prototype.push = function(ae2, N2) {
    var re2 = this._readableState, fe2;
    return re2.objectMode ? fe2 = true : typeof ae2 == "string" && (N2 = N2 || re2.defaultEncoding, N2 !== re2.encoding && (ae2 = l2.from(ae2, N2), N2 = ""), fe2 = true), z2(this, ae2, N2, false, fe2);
  }, q2.prototype.unshift = function(ae2) {
    return z2(this, ae2, null, true, false);
  };
  function z2(ae2, N2, re2, fe2, Ne2) {
    P2("readableAddChunk", N2);
    var Oe2 = ae2._readableState;
    if (N2 === null)
      Oe2.reading = false, A2(ae2, Oe2);
    else {
      var qe2;
      if (Ne2 || (qe2 = b(Oe2, N2)), qe2)
        le2(ae2, qe2);
      else if (Oe2.objectMode || N2 && N2.length > 0) {
        if (typeof N2 != "string" && !Oe2.objectMode && Object.getPrototypeOf(N2) !== l2.prototype && (N2 = p2(N2)), fe2)
          Oe2.endEmitted ? le2(ae2, new ne2()) : C2(ae2, Oe2, N2, true);
        else if (Oe2.ended)
          le2(ae2, new ie2());
        else {
          if (Oe2.destroyed)
            return false;
          Oe2.reading = false, Oe2.decoder && !re2 ? (N2 = Oe2.decoder.write(N2), Oe2.objectMode || N2.length !== 0 ? C2(ae2, Oe2, N2, false) : B2(ae2, Oe2)) : C2(ae2, Oe2, N2, false);
        }
      } else
        fe2 || (Oe2.reading = false, B2(ae2, Oe2));
    }
    return !Oe2.ended && (Oe2.length < Oe2.highWaterMark || Oe2.length === 0);
  }
  function C2(ae2, N2, re2, fe2) {
    N2.flowing && N2.length === 0 && !N2.sync ? (N2.awaitDrain = 0, ae2.emit("data", re2)) : (N2.length += N2.objectMode ? 1 : re2.length, fe2 ? N2.buffer.unshift(re2) : N2.buffer.push(re2), N2.needReadable && x2(ae2)), B2(ae2, N2);
  }
  function b(ae2, N2) {
    var re2;
    return !_(N2) && typeof N2 != "string" && N2 !== void 0 && !ae2.objectMode && (re2 = new X2("chunk", ["string", "Buffer", "Uint8Array"], N2)), re2;
  }
  q2.prototype.isPaused = function() {
    return this._readableState.flowing === false;
  }, q2.prototype.setEncoding = function(ae2) {
    Z2 || (Z2 = string_decoder.StringDecoder);
    var N2 = new Z2(ae2);
    this._readableState.decoder = N2, this._readableState.encoding = this._readableState.decoder.encoding;
    for (var re2 = this._readableState.buffer.head, fe2 = ""; re2 !== null; )
      fe2 += N2.write(re2.data), re2 = re2.next;
    return this._readableState.buffer.clear(), fe2 !== "" && this._readableState.buffer.push(fe2), this._readableState.length = fe2.length, this;
  };
  var E2 = 1073741824;
  function k(ae2) {
    return ae2 >= E2 ? ae2 = E2 : (ae2--, ae2 |= ae2 >>> 1, ae2 |= ae2 >>> 2, ae2 |= ae2 >>> 4, ae2 |= ae2 >>> 8, ae2 |= ae2 >>> 16, ae2++), ae2;
  }
  function O2(ae2, N2) {
    return ae2 <= 0 || N2.length === 0 && N2.ended ? 0 : N2.objectMode ? 1 : ae2 !== ae2 ? N2.flowing && N2.length ? N2.buffer.head.data.length : N2.length : (ae2 > N2.highWaterMark && (N2.highWaterMark = k(ae2)), ae2 <= N2.length ? ae2 : N2.ended ? N2.length : (N2.needReadable = true, 0));
  }
  q2.prototype.read = function(ae2) {
    P2("read", ae2), ae2 = parseInt(ae2, 10);
    var N2 = this._readableState, re2 = ae2;
    if (ae2 !== 0 && (N2.emittedReadable = false), ae2 === 0 && N2.needReadable && ((N2.highWaterMark !== 0 ? N2.length >= N2.highWaterMark : N2.length > 0) || N2.ended))
      return P2("read: emitReadable", N2.length, N2.ended), N2.length === 0 && N2.ended ? Me2(this) : x2(this), null;
    if (ae2 = O2(ae2, N2), ae2 === 0 && N2.ended)
      return N2.length === 0 && Me2(this), null;
    var fe2 = N2.needReadable;
    P2("need readable", fe2), (N2.length === 0 || N2.length - ae2 < N2.highWaterMark) && (fe2 = true, P2("length less than watermark", fe2)), N2.ended || N2.reading ? (fe2 = false, P2("reading or ended", fe2)) : fe2 && (P2("do read"), N2.reading = true, N2.sync = true, N2.length === 0 && (N2.needReadable = true), this._read(N2.highWaterMark), N2.sync = false, N2.reading || (ae2 = O2(re2, N2)));
    var Ne2;
    return ae2 > 0 ? Ne2 = he2(ae2, N2) : Ne2 = null, Ne2 === null ? (N2.needReadable = N2.length <= N2.highWaterMark, ae2 = 0) : (N2.length -= ae2, N2.awaitDrain = 0), N2.length === 0 && (N2.ended || (N2.needReadable = true), re2 !== ae2 && N2.ended && Me2(this)), Ne2 !== null && this.emit("data", Ne2), Ne2;
  };
  function A2(ae2, N2) {
    if (P2("onEofChunk"), !N2.ended) {
      if (N2.decoder) {
        var re2 = N2.decoder.end();
        re2 && re2.length && (N2.buffer.push(re2), N2.length += N2.objectMode ? 1 : re2.length);
      }
      N2.ended = true, N2.sync ? x2(ae2) : (N2.needReadable = false, N2.emittedReadable || (N2.emittedReadable = true, Y2(ae2)));
    }
  }
  function x2(ae2) {
    var N2 = ae2._readableState;
    P2("emitReadable", N2.needReadable, N2.emittedReadable), N2.needReadable = false, N2.emittedReadable || (P2("emitReadable", N2.flowing), N2.emittedReadable = true, process$1.nextTick(Y2, ae2));
  }
  function Y2(ae2) {
    var N2 = ae2._readableState;
    P2("emitReadable_", N2.destroyed, N2.length, N2.ended), !N2.destroyed && (N2.length || N2.ended) && (ae2.emit("readable"), N2.emittedReadable = false), N2.needReadable = !N2.flowing && !N2.ended && N2.length <= N2.highWaterMark, ye2(ae2);
  }
  function B2(ae2, N2) {
    N2.readingMore || (N2.readingMore = true, process$1.nextTick(T2, ae2, N2));
  }
  function T2(ae2, N2) {
    for (; !N2.reading && !N2.ended && (N2.length < N2.highWaterMark || N2.flowing && N2.length === 0); ) {
      var re2 = N2.length;
      if (P2("maybeReadMore read 0"), ae2.read(0), re2 === N2.length)
        break;
    }
    N2.readingMore = false;
  }
  q2.prototype._read = function(ae2) {
    le2(this, new Q2("_read()"));
  }, q2.prototype.pipe = function(ae2, N2) {
    var re2 = this, fe2 = this._readableState;
    switch (fe2.pipesCount) {
      case 0:
        fe2.pipes = ae2;
        break;
      case 1:
        fe2.pipes = [fe2.pipes, ae2];
        break;
      default:
        fe2.pipes.push(ae2);
        break;
    }
    fe2.pipesCount += 1, P2("pipe count=%d opts=%j", fe2.pipesCount, N2);
    var Ne2 = (!N2 || N2.end !== false) && ae2 !== process$1.stdout && ae2 !== process$1.stderr, Oe2 = Ne2 ? je2 : We2;
    fe2.endEmitted ? process$1.nextTick(Oe2) : re2.once("end", Oe2), ae2.on("unpipe", qe2);
    function qe2(Re2, J2) {
      P2("onunpipe"), Re2 === re2 && J2 && J2.hasUnpiped === false && (J2.hasUnpiped = true, Xe2());
    }
    function je2() {
      P2("onend"), ae2.end();
    }
    var Fe2 = D2(re2);
    ae2.on("drain", Fe2);
    var yt = false;
    function Xe2() {
      P2("cleanup"), ae2.removeListener("close", ge2), ae2.removeListener("finish", we2), ae2.removeListener("drain", Fe2), ae2.removeListener("error", V2), ae2.removeListener("unpipe", qe2), re2.removeListener("end", je2), re2.removeListener("end", We2), re2.removeListener("data", Ge2), yt = true, fe2.awaitDrain && (!ae2._writableState || ae2._writableState.needDrain) && Fe2();
    }
    re2.on("data", Ge2);
    function Ge2(Re2) {
      P2("ondata");
      var J2 = ae2.write(Re2);
      P2("dest.write", J2), J2 === false && ((fe2.pipesCount === 1 && fe2.pipes === ae2 || fe2.pipesCount > 1 && xe2(fe2.pipes, ae2) !== -1) && !yt && (P2("false write response, pause", fe2.awaitDrain), fe2.awaitDrain++), re2.pause());
    }
    function V2(Re2) {
      P2("onerror", Re2), We2(), ae2.removeListener("error", V2), u2(ae2, "error") === 0 && le2(ae2, Re2);
    }
    ke2(ae2, "error", V2);
    function ge2() {
      ae2.removeListener("finish", we2), We2();
    }
    ae2.once("close", ge2);
    function we2() {
      P2("onfinish"), ae2.removeListener("close", ge2), We2();
    }
    ae2.once("finish", we2);
    function We2() {
      P2("unpipe"), re2.unpipe(ae2);
    }
    return ae2.emit("pipe", re2), fe2.flowing || (P2("pipe resume"), re2.resume()), ae2;
  };
  function D2(ae2) {
    return function() {
      var re2 = ae2._readableState;
      P2("pipeOnDrain", re2.awaitDrain), re2.awaitDrain && re2.awaitDrain--, re2.awaitDrain === 0 && u2(ae2, "data") && (re2.flowing = true, ye2(ae2));
    };
  }
  q2.prototype.unpipe = function(ae2) {
    var N2 = this._readableState, re2 = { hasUnpiped: false };
    if (N2.pipesCount === 0)
      return this;
    if (N2.pipesCount === 1)
      return ae2 && ae2 !== N2.pipes ? this : (ae2 || (ae2 = N2.pipes), N2.pipes = null, N2.pipesCount = 0, N2.flowing = false, ae2 && ae2.emit("unpipe", this, re2), this);
    if (!ae2) {
      var fe2 = N2.pipes, Ne2 = N2.pipesCount;
      N2.pipes = null, N2.pipesCount = 0, N2.flowing = false;
      for (var Oe2 = 0; Oe2 < Ne2; Oe2++)
        fe2[Oe2].emit("unpipe", this, { hasUnpiped: false });
      return this;
    }
    var qe2 = xe2(N2.pipes, ae2);
    return qe2 === -1 ? this : (N2.pipes.splice(qe2, 1), N2.pipesCount -= 1, N2.pipesCount === 1 && (N2.pipes = N2.pipes[0]), ae2.emit("unpipe", this, re2), this);
  }, q2.prototype.on = function(ae2, N2) {
    var re2 = c.prototype.on.call(this, ae2, N2), fe2 = this._readableState;
    return ae2 === "data" ? (fe2.readableListening = this.listenerCount("readable") > 0, fe2.flowing !== false && this.resume()) : ae2 === "readable" && !fe2.endEmitted && !fe2.readableListening && (fe2.readableListening = fe2.needReadable = true, fe2.flowing = false, fe2.emittedReadable = false, P2("on readable", fe2.length, fe2.reading), fe2.length ? x2(this) : fe2.reading || process$1.nextTick(me2, this)), re2;
  }, q2.prototype.addListener = q2.prototype.on, q2.prototype.removeListener = function(ae2, N2) {
    var re2 = c.prototype.removeListener.call(this, ae2, N2);
    return ae2 === "readable" && process$1.nextTick(te2, this), re2;
  }, q2.prototype.removeAllListeners = function(ae2) {
    var N2 = c.prototype.removeAllListeners.apply(this, arguments);
    return (ae2 === "readable" || ae2 === void 0) && process$1.nextTick(te2, this), N2;
  };
  function te2(ae2) {
    var N2 = ae2._readableState;
    N2.readableListening = ae2.listenerCount("readable") > 0, N2.resumeScheduled && !N2.paused ? N2.flowing = true : ae2.listenerCount("data") > 0 && ae2.resume();
  }
  function me2(ae2) {
    P2("readable nexttick read 0"), ae2.read(0);
  }
  q2.prototype.resume = function() {
    var ae2 = this._readableState;
    return ae2.flowing || (P2("resume"), ae2.flowing = !ae2.readableListening, Ie2(this, ae2)), ae2.paused = false, this;
  };
  function Ie2(ae2, N2) {
    N2.resumeScheduled || (N2.resumeScheduled = true, process$1.nextTick($e2, ae2, N2));
  }
  function $e2(ae2, N2) {
    P2("resume", N2.reading), N2.reading || ae2.read(0), N2.resumeScheduled = false, ae2.emit("resume"), ye2(ae2), N2.flowing && !N2.reading && ae2.read(0);
  }
  q2.prototype.pause = function() {
    return P2("call pause flowing=%j", this._readableState.flowing), this._readableState.flowing !== false && (P2("pause"), this._readableState.flowing = false, this.emit("pause")), this._readableState.paused = true, this;
  };
  function ye2(ae2) {
    var N2 = ae2._readableState;
    for (P2("flow", N2.flowing); N2.flowing && ae2.read() !== null; )
      ;
  }
  q2.prototype.wrap = function(ae2) {
    var N2 = this, re2 = this._readableState, fe2 = false;
    ae2.on("end", function() {
      if (P2("wrapped end"), re2.decoder && !re2.ended) {
        var qe2 = re2.decoder.end();
        qe2 && qe2.length && N2.push(qe2);
      }
      N2.push(null);
    }), ae2.on("data", function(qe2) {
      if (P2("wrapped data"), re2.decoder && (qe2 = re2.decoder.write(qe2)), !(re2.objectMode && qe2 == null) && !(!re2.objectMode && (!qe2 || !qe2.length))) {
        var je2 = N2.push(qe2);
        je2 || (fe2 = true, ae2.pause());
      }
    });
    for (var Ne2 in ae2)
      this[Ne2] === void 0 && typeof ae2[Ne2] == "function" && (this[Ne2] = /* @__PURE__ */ function(je2) {
        return function() {
          return ae2[je2].apply(ae2, arguments);
        };
      }(Ne2));
    for (var Oe2 = 0; Oe2 < be2.length; Oe2++)
      ae2.on(be2[Oe2], this.emit.bind(this, be2[Oe2]));
    return this._read = function(qe2) {
      P2("wrapped _read", qe2), fe2 && (fe2 = false, ae2.resume());
    }, this;
  }, typeof Symbol == "function" && (q2.prototype[Symbol.asyncIterator] = function() {
    return de2 === void 0 && (de2 = requireAsync_iterator$2()), de2(this);
  }), Object.defineProperty(q2.prototype, "readableHighWaterMark", {
    // making it explicit this property is not enumerable
    // because otherwise some prototype manipulation in
    // userland will fail
    enumerable: false,
    get: function() {
      return this._readableState.highWaterMark;
    }
  }), Object.defineProperty(q2.prototype, "readableBuffer", {
    // making it explicit this property is not enumerable
    // because otherwise some prototype manipulation in
    // userland will fail
    enumerable: false,
    get: function() {
      return this._readableState && this._readableState.buffer;
    }
  }), Object.defineProperty(q2.prototype, "readableFlowing", {
    // making it explicit this property is not enumerable
    // because otherwise some prototype manipulation in
    // userland will fail
    enumerable: false,
    get: function() {
      return this._readableState.flowing;
    },
    set: function(N2) {
      this._readableState && (this._readableState.flowing = N2);
    }
  }), q2._fromList = he2, Object.defineProperty(q2.prototype, "readableLength", {
    // making it explicit this property is not enumerable
    // because otherwise some prototype manipulation in
    // userland will fail
    enumerable: false,
    get: function() {
      return this._readableState.length;
    }
  });
  function he2(ae2, N2) {
    if (N2.length === 0)
      return null;
    var re2;
    return N2.objectMode ? re2 = N2.buffer.shift() : !ae2 || ae2 >= N2.length ? (N2.decoder ? re2 = N2.buffer.join("") : N2.buffer.length === 1 ? re2 = N2.buffer.first() : re2 = N2.buffer.concat(N2.length), N2.buffer.clear()) : re2 = N2.buffer.consume(ae2, N2.decoder), re2;
  }
  function Me2(ae2) {
    var N2 = ae2._readableState;
    P2("endReadable", N2.endEmitted), N2.endEmitted || (N2.ended = true, process$1.nextTick(Ae2, N2, ae2));
  }
  function Ae2(ae2, N2) {
    if (P2("endReadableNT", ae2.endEmitted, ae2.length), !ae2.endEmitted && ae2.length === 0 && (ae2.endEmitted = true, N2.readable = false, N2.emit("end"), ae2.autoDestroy)) {
      var re2 = N2._writableState;
      (!re2 || re2.autoDestroy && re2.finished) && N2.destroy();
    }
  }
  typeof Symbol == "function" && (q2.from = function(ae2, N2) {
    return pe2 === void 0 && (pe2 = requireFromBrowser$2()), pe2(q2, ae2, N2);
  });
  function xe2(ae2, N2) {
    for (var re2 = 0, fe2 = ae2.length; re2 < fe2; re2++)
      if (ae2[re2] === N2)
        return re2;
    return -1;
  }
  return _stream_readable$2;
}
var _stream_transform$2, hasRequired_stream_transform;
function require_stream_transform() {
  if (hasRequired_stream_transform)
    return _stream_transform$2;
  hasRequired_stream_transform = 1, _stream_transform$2 = I2;
  var a420 = requireErrorsBrowser().codes, u2 = a420.ERR_METHOD_NOT_IMPLEMENTED, c = a420.ERR_MULTIPLE_CALLBACK, l2 = a420.ERR_TRANSFORM_ALREADY_TRANSFORMING, v2 = a420.ERR_TRANSFORM_WITH_LENGTH_0, p2 = require_stream_duplex$2();
  inherits_browserExports(I2, p2);
  function _(F2, H2) {
    var j = this._transformState;
    j.transforming = false;
    var ee2 = j.writecb;
    if (ee2 === null)
      return this.emit("error", new c());
    j.writechunk = null, j.writecb = null, H2 != null && this.push(H2), ee2(F2);
    var X2 = this._readableState;
    X2.reading = false, (X2.needReadable || X2.length < X2.highWaterMark) && this._read(X2.highWaterMark);
  }
  function I2(F2) {
    if (!(this instanceof I2))
      return new I2(F2);
    p2.call(this, F2), this._transformState = { afterTransform: _.bind(this), needTransform: false, transforming: false, writecb: null, writechunk: null, writeencoding: null }, this._readableState.needReadable = true, this._readableState.sync = false, F2 && (typeof F2.transform == "function" && (this._transform = F2.transform), typeof F2.flush == "function" && (this._flush = F2.flush)), this.on("prefinish", P2);
  }
  function P2() {
    var F2 = this;
    typeof this._flush == "function" && !this._readableState.destroyed ? this._flush(function(H2, j) {
      $(F2, H2, j);
    }) : $(this, null, null);
  }
  I2.prototype.push = function(F2, H2) {
    return this._transformState.needTransform = false, p2.prototype.push.call(this, F2, H2);
  }, I2.prototype._transform = function(F2, H2, j) {
    j(new u2("_transform()"));
  }, I2.prototype._write = function(F2, H2, j) {
    var ee2 = this._transformState;
    if (ee2.writecb = j, ee2.writechunk = F2, ee2.writeencoding = H2, !ee2.transforming) {
      var X2 = this._readableState;
      (ee2.needTransform || X2.needReadable || X2.length < X2.highWaterMark) && this._read(X2.highWaterMark);
    }
  }, I2.prototype._read = function(F2) {
    var H2 = this._transformState;
    H2.writechunk !== null && !H2.transforming ? (H2.transforming = true, this._transform(H2.writechunk, H2.writeencoding, H2.afterTransform)) : H2.needTransform = true;
  }, I2.prototype._destroy = function(F2, H2) {
    p2.prototype._destroy.call(this, F2, function(j) {
      H2(j);
    });
  };
  function $(F2, H2, j) {
    if (H2)
      return F2.emit("error", H2);
    if (j != null && F2.push(j), F2._writableState.length)
      throw new v2();
    if (F2._transformState.transforming)
      throw new l2();
    return F2.push(null);
  }
  return _stream_transform$2;
}
var _stream_passthrough$2, hasRequired_stream_passthrough;
function require_stream_passthrough() {
  if (hasRequired_stream_passthrough)
    return _stream_passthrough$2;
  hasRequired_stream_passthrough = 1, _stream_passthrough$2 = u2;
  var a420 = require_stream_transform();
  inherits_browserExports(u2, a420);
  function u2(c) {
    if (!(this instanceof u2))
      return new u2(c);
    a420.call(this, c);
  }
  return u2.prototype._transform = function(c, l2, v2) {
    v2(null, c);
  }, _stream_passthrough$2;
}
var pipeline_1$2, hasRequiredPipeline;
function requirePipeline() {
  if (hasRequiredPipeline)
    return pipeline_1$2;
  hasRequiredPipeline = 1;
  var a420;
  function u2(j) {
    var ee2 = false;
    return function() {
      ee2 || (ee2 = true, j.apply(void 0, arguments));
    };
  }
  var c = requireErrorsBrowser().codes, l2 = c.ERR_MISSING_ARGS, v2 = c.ERR_STREAM_DESTROYED;
  function p2(j) {
    if (j)
      throw j;
  }
  function _(j) {
    return j.setHeader && typeof j.abort == "function";
  }
  function I2(j, ee2, X2, ie2) {
    ie2 = u2(ie2);
    var Q2 = false;
    j.on("close", function() {
      Q2 = true;
    }), a420 === void 0 && (a420 = requireEndOfStream()), a420(j, { readable: ee2, writable: X2 }, function(Z2) {
      if (Z2)
        return ie2(Z2);
      Q2 = true, ie2();
    });
    var ne2 = false;
    return function(Z2) {
      if (!Q2 && !ne2) {
        if (ne2 = true, _(j))
          return j.abort();
        if (typeof j.destroy == "function")
          return j.destroy();
        ie2(Z2 || new v2("pipe"));
      }
    };
  }
  function P2(j) {
    j();
  }
  function $(j, ee2) {
    return j.pipe(ee2);
  }
  function F2(j) {
    return !j.length || typeof j[j.length - 1] != "function" ? p2 : j.pop();
  }
  function H2() {
    for (var j = arguments.length, ee2 = new Array(j), X2 = 0; X2 < j; X2++)
      ee2[X2] = arguments[X2];
    var ie2 = F2(ee2);
    if (Array.isArray(ee2[0]) && (ee2 = ee2[0]), ee2.length < 2)
      throw new l2("streams");
    var Q2, ne2 = ee2.map(function(Z2, de2) {
      var pe2 = de2 < ee2.length - 1, le2 = de2 > 0;
      return I2(Z2, pe2, le2, function(be2) {
        Q2 || (Q2 = be2), be2 && ne2.forEach(P2), !pe2 && (ne2.forEach(P2), ie2(Q2));
      });
    });
    return ee2.reduce($);
  }
  return pipeline_1$2 = H2, pipeline_1$2;
}
var streamBrowserify = Stream$3, EE = eventsExports$1.EventEmitter, inherits$v = inherits_browserExports;
inherits$v(Stream$3, EE);
Stream$3.Readable = require_stream_readable$2();
Stream$3.Writable = require_stream_writable$2();
Stream$3.Duplex = require_stream_duplex$2();
Stream$3.Transform = require_stream_transform();
Stream$3.PassThrough = require_stream_passthrough();
Stream$3.finished = requireEndOfStream();
Stream$3.pipeline = requirePipeline();
Stream$3.Stream = Stream$3;
function Stream$3() {
  EE.call(this);
}
Stream$3.prototype.pipe = function(a420, u2) {
  var c = this;
  function l2(F2) {
    a420.writable && a420.write(F2) === false && c.pause && c.pause();
  }
  c.on("data", l2);
  function v2() {
    c.readable && c.resume && c.resume();
  }
  a420.on("drain", v2), !a420._isStdio && (!u2 || u2.end !== false) && (c.on("end", _), c.on("close", I2));
  var p2 = false;
  function _() {
    p2 || (p2 = true, a420.end());
  }
  function I2() {
    p2 || (p2 = true, typeof a420.destroy == "function" && a420.destroy());
  }
  function P2(F2) {
    if ($(), EE.listenerCount(this, "error") === 0)
      throw F2;
  }
  c.on("error", P2), a420.on("error", P2);
  function $() {
    c.removeListener("data", l2), a420.removeListener("drain", v2), c.removeListener("end", _), c.removeListener("close", I2), c.removeListener("error", P2), a420.removeListener("error", P2), c.removeListener("end", $), c.removeListener("close", $), a420.removeListener("close", $);
  }
  return c.on("end", $), c.on("close", $), a420.on("close", $), a420.emit("pipe", c), a420;
};
var Buffer$K = safeBufferExports$3.Buffer, Stream$2 = streamBrowserify, util$3 = util$4;
function DataStream$2(a420) {
  if (this.buffer = null, this.writable = true, this.readable = true, !a420)
    return this.buffer = Buffer$K.alloc(0), this;
  if (typeof a420.pipe == "function")
    return this.buffer = Buffer$K.alloc(0), a420.pipe(this), this;
  if (a420.length || typeof a420 == "object")
    return this.buffer = a420, this.writable = false, process$1.nextTick((function() {
      this.emit("end", a420), this.readable = false, this.emit("close");
    }).bind(this)), this;
  throw new TypeError("Unexpected data type (" + typeof a420 + ")");
}
util$3.inherits(DataStream$2, Stream$2);
DataStream$2.prototype.write = function a91(u2) {
  this.buffer = Buffer$K.concat([this.buffer, Buffer$K.from(u2)]), this.emit("data", u2);
};
DataStream$2.prototype.end = function a92(u2) {
  u2 && this.write(u2), this.emit("end", u2), this.emit("close"), this.writable = false, this.readable = false;
};
var dataStream = DataStream$2, Buffer$J = require$$0$2.Buffer, SlowBuffer = require$$0$2.SlowBuffer, bufferEqualConstantTime = bufferEq;
function bufferEq(a420, u2) {
  if (!Buffer$J.isBuffer(a420) || !Buffer$J.isBuffer(u2) || a420.length !== u2.length)
    return false;
  for (var c = 0, l2 = 0; l2 < a420.length; l2++)
    c |= a420[l2] ^ u2[l2];
  return c === 0;
}
bufferEq.install = function() {
  Buffer$J.prototype.equal = SlowBuffer.prototype.equal = function(u2) {
    return bufferEq(this, u2);
  };
};
var origBufEqual = Buffer$J.prototype.equal, origSlowBufEqual = SlowBuffer.prototype.equal;
bufferEq.restore = function() {
  Buffer$J.prototype.equal = origBufEqual, SlowBuffer.prototype.equal = origSlowBufEqual;
};
var cryptoBrowserify = {}, browser$b = { exports: {} }, MAX_BYTES = 65536, MAX_UINT32 = 4294967295;
function oldBrowser$1() {
  throw new Error(`Secure random number generation is not supported by this browser.
Use Chrome, Firefox or Internet Explorer 11`);
}
var Buffer$I = safeBufferExports$3.Buffer, crypto$3 = commonjsGlobal$1.crypto || commonjsGlobal$1.msCrypto;
crypto$3 && crypto$3.getRandomValues ? browser$b.exports = randomBytes$2 : browser$b.exports = oldBrowser$1;
function randomBytes$2(a420, u2) {
  if (a420 > MAX_UINT32)
    throw new RangeError("requested too many random bytes");
  var c = Buffer$I.allocUnsafe(a420);
  if (a420 > 0)
    if (a420 > MAX_BYTES)
      for (var l2 = 0; l2 < a420; l2 += MAX_BYTES)
        crypto$3.getRandomValues(c.slice(l2, l2 + MAX_BYTES));
    else
      crypto$3.getRandomValues(c);
  return typeof u2 == "function" ? process$1.nextTick(function() {
    u2(null, c);
  }) : c;
}
var browserExports = browser$b.exports, safeBuffer$2 = { exports: {} };
/*! safe-buffer. MIT License. Feross Aboukhadijeh <https://feross.org/opensource> */
(function(a420, u2) {
  var c = require$$0$2, l2 = c.Buffer;
  function v2(_, I2) {
    for (var P2 in _)
      I2[P2] = _[P2];
  }
  l2.from && l2.alloc && l2.allocUnsafe && l2.allocUnsafeSlow ? a420.exports = c : (v2(c, u2), u2.Buffer = p2);
  function p2(_, I2, P2) {
    return l2(_, I2, P2);
  }
  p2.prototype = Object.create(l2.prototype), v2(l2, p2), p2.from = function(_, I2, P2) {
    if (typeof _ == "number")
      throw new TypeError("Argument must not be a number");
    return l2(_, I2, P2);
  }, p2.alloc = function(_, I2, P2) {
    if (typeof _ != "number")
      throw new TypeError("Argument must be a number");
    var $ = l2(_);
    return I2 !== void 0 ? typeof P2 == "string" ? $.fill(I2, P2) : $.fill(I2) : $.fill(0), $;
  }, p2.allocUnsafe = function(_) {
    if (typeof _ != "number")
      throw new TypeError("Argument must be a number");
    return l2(_);
  }, p2.allocUnsafeSlow = function(_) {
    if (typeof _ != "number")
      throw new TypeError("Argument must be a number");
    return c.SlowBuffer(_);
  };
})(safeBuffer$2, safeBuffer$2.exports);
var safeBufferExports$1 = safeBuffer$2.exports, readableBrowser$1 = { exports: {} }, streamBrowser$1 = eventsExports$1.EventEmitter, buffer_list$1, hasRequiredBuffer_list$1;
function requireBuffer_list$1() {
  if (hasRequiredBuffer_list$1)
    return buffer_list$1;
  hasRequiredBuffer_list$1 = 1;
  function a420(X2, ie2) {
    var Q2 = Object.keys(X2);
    if (Object.getOwnPropertySymbols) {
      var ne2 = Object.getOwnPropertySymbols(X2);
      ie2 && (ne2 = ne2.filter(function(Z2) {
        return Object.getOwnPropertyDescriptor(X2, Z2).enumerable;
      })), Q2.push.apply(Q2, ne2);
    }
    return Q2;
  }
  function u2(X2) {
    for (var ie2 = 1; ie2 < arguments.length; ie2++) {
      var Q2 = arguments[ie2] != null ? arguments[ie2] : {};
      ie2 % 2 ? a420(Object(Q2), true).forEach(function(ne2) {
        c(X2, ne2, Q2[ne2]);
      }) : Object.getOwnPropertyDescriptors ? Object.defineProperties(X2, Object.getOwnPropertyDescriptors(Q2)) : a420(Object(Q2)).forEach(function(ne2) {
        Object.defineProperty(X2, ne2, Object.getOwnPropertyDescriptor(Q2, ne2));
      });
    }
    return X2;
  }
  function c(X2, ie2, Q2) {
    return ie2 = _(ie2), ie2 in X2 ? Object.defineProperty(X2, ie2, { value: Q2, enumerable: true, configurable: true, writable: true }) : X2[ie2] = Q2, X2;
  }
  function l2(X2, ie2) {
    if (!(X2 instanceof ie2))
      throw new TypeError("Cannot call a class as a function");
  }
  function v2(X2, ie2) {
    for (var Q2 = 0; Q2 < ie2.length; Q2++) {
      var ne2 = ie2[Q2];
      ne2.enumerable = ne2.enumerable || false, ne2.configurable = true, "value" in ne2 && (ne2.writable = true), Object.defineProperty(X2, _(ne2.key), ne2);
    }
  }
  function p2(X2, ie2, Q2) {
    return ie2 && v2(X2.prototype, ie2), Q2 && v2(X2, Q2), Object.defineProperty(X2, "prototype", { writable: false }), X2;
  }
  function _(X2) {
    var ie2 = I2(X2, "string");
    return typeof ie2 == "symbol" ? ie2 : String(ie2);
  }
  function I2(X2, ie2) {
    if (typeof X2 != "object" || X2 === null)
      return X2;
    var Q2 = X2[Symbol.toPrimitive];
    if (Q2 !== void 0) {
      var ne2 = Q2.call(X2, ie2 || "default");
      if (typeof ne2 != "object")
        return ne2;
      throw new TypeError("@@toPrimitive must return a primitive value.");
    }
    return (ie2 === "string" ? String : Number)(X2);
  }
  var P2 = require$$0$2, $ = P2.Buffer, F2 = util$4, H2 = F2.inspect, j = H2 && H2.custom || "inspect";
  function ee2(X2, ie2, Q2) {
    $.prototype.copy.call(X2, ie2, Q2);
  }
  return buffer_list$1 = /* @__PURE__ */ function() {
    function X2() {
      l2(this, X2), this.head = null, this.tail = null, this.length = 0;
    }
    return p2(X2, [{ key: "push", value: function(Q2) {
      var ne2 = { data: Q2, next: null };
      this.length > 0 ? this.tail.next = ne2 : this.head = ne2, this.tail = ne2, ++this.length;
    } }, { key: "unshift", value: function(Q2) {
      var ne2 = { data: Q2, next: this.head };
      this.length === 0 && (this.tail = ne2), this.head = ne2, ++this.length;
    } }, { key: "shift", value: function() {
      if (this.length !== 0) {
        var Q2 = this.head.data;
        return this.length === 1 ? this.head = this.tail = null : this.head = this.head.next, --this.length, Q2;
      }
    } }, { key: "clear", value: function() {
      this.head = this.tail = null, this.length = 0;
    } }, { key: "join", value: function(Q2) {
      if (this.length === 0)
        return "";
      for (var ne2 = this.head, Z2 = "" + ne2.data; ne2 = ne2.next; )
        Z2 += Q2 + ne2.data;
      return Z2;
    } }, {
      key: "concat",
      value: function(Q2) {
        if (this.length === 0)
          return $.alloc(0);
        for (var ne2 = $.allocUnsafe(Q2 >>> 0), Z2 = this.head, de2 = 0; Z2; )
          ee2(Z2.data, ne2, de2), de2 += Z2.data.length, Z2 = Z2.next;
        return ne2;
      }
      // Consumes a specified amount of bytes or characters from the buffered data.
    }, { key: "consume", value: function(Q2, ne2) {
      var Z2;
      return Q2 < this.head.data.length ? (Z2 = this.head.data.slice(0, Q2), this.head.data = this.head.data.slice(Q2)) : Q2 === this.head.data.length ? Z2 = this.shift() : Z2 = ne2 ? this._getString(Q2) : this._getBuffer(Q2), Z2;
    } }, {
      key: "first",
      value: function() {
        return this.head.data;
      }
      // Consumes a specified amount of characters from the buffered data.
    }, {
      key: "_getString",
      value: function(Q2) {
        var ne2 = this.head, Z2 = 1, de2 = ne2.data;
        for (Q2 -= de2.length; ne2 = ne2.next; ) {
          var pe2 = ne2.data, le2 = Q2 > pe2.length ? pe2.length : Q2;
          if (le2 === pe2.length ? de2 += pe2 : de2 += pe2.slice(0, Q2), Q2 -= le2, Q2 === 0) {
            le2 === pe2.length ? (++Z2, ne2.next ? this.head = ne2.next : this.head = this.tail = null) : (this.head = ne2, ne2.data = pe2.slice(le2));
            break;
          }
          ++Z2;
        }
        return this.length -= Z2, de2;
      }
      // Consumes a specified amount of bytes from the buffered data.
    }, {
      key: "_getBuffer",
      value: function(Q2) {
        var ne2 = $.allocUnsafe(Q2), Z2 = this.head, de2 = 1;
        for (Z2.data.copy(ne2), Q2 -= Z2.data.length; Z2 = Z2.next; ) {
          var pe2 = Z2.data, le2 = Q2 > pe2.length ? pe2.length : Q2;
          if (pe2.copy(ne2, ne2.length - Q2, 0, le2), Q2 -= le2, Q2 === 0) {
            le2 === pe2.length ? (++de2, Z2.next ? this.head = Z2.next : this.head = this.tail = null) : (this.head = Z2, Z2.data = pe2.slice(le2));
            break;
          }
          ++de2;
        }
        return this.length -= de2, ne2;
      }
      // Make sure the linked list only shows the minimal necessary information.
    }, { key: j, value: function(Q2, ne2) {
      return H2(this, u2(u2({}, ne2), {}, {
        // Only inspect one level.
        depth: 0,
        // It should not recurse.
        customInspect: false
      }));
    } }]), X2;
  }(), buffer_list$1;
}
function destroy$1(a420, u2) {
  var c = this, l2 = this._readableState && this._readableState.destroyed, v2 = this._writableState && this._writableState.destroyed;
  return l2 || v2 ? (u2 ? u2(a420) : a420 && (this._writableState ? this._writableState.errorEmitted || (this._writableState.errorEmitted = true, process$1.nextTick(emitErrorNT$1, this, a420)) : process$1.nextTick(emitErrorNT$1, this, a420)), this) : (this._readableState && (this._readableState.destroyed = true), this._writableState && (this._writableState.destroyed = true), this._destroy(a420 || null, function(p2) {
    !u2 && p2 ? c._writableState ? c._writableState.errorEmitted ? process$1.nextTick(emitCloseNT$1, c) : (c._writableState.errorEmitted = true, process$1.nextTick(emitErrorAndCloseNT$1, c, p2)) : process$1.nextTick(emitErrorAndCloseNT$1, c, p2) : u2 ? (process$1.nextTick(emitCloseNT$1, c), u2(p2)) : process$1.nextTick(emitCloseNT$1, c);
  }), this);
}
function emitErrorAndCloseNT$1(a420, u2) {
  emitErrorNT$1(a420, u2), emitCloseNT$1(a420);
}
function emitCloseNT$1(a420) {
  a420._writableState && !a420._writableState.emitClose || a420._readableState && !a420._readableState.emitClose || a420.emit("close");
}
function undestroy$1() {
  this._readableState && (this._readableState.destroyed = false, this._readableState.reading = false, this._readableState.ended = false, this._readableState.endEmitted = false), this._writableState && (this._writableState.destroyed = false, this._writableState.ended = false, this._writableState.ending = false, this._writableState.finalCalled = false, this._writableState.prefinished = false, this._writableState.finished = false, this._writableState.errorEmitted = false);
}
function emitErrorNT$1(a420, u2) {
  a420.emit("error", u2);
}
function errorOrDestroy$1(a420, u2) {
  var c = a420._readableState, l2 = a420._writableState;
  c && c.autoDestroy || l2 && l2.autoDestroy ? a420.destroy(u2) : a420.emit("error", u2);
}
var destroy_1$1 = { destroy: destroy$1, undestroy: undestroy$1, errorOrDestroy: errorOrDestroy$1 }, errorsBrowser$1 = {};
function _inheritsLoose$2(a420, u2) {
  a420.prototype = Object.create(u2.prototype), a420.prototype.constructor = a420, a420.__proto__ = u2;
}
var codes$1 = {};
function createErrorType$1(a420, u2, c) {
  c || (c = Error);
  function l2(p2, _, I2) {
    return typeof u2 == "string" ? u2 : u2(p2, _, I2);
  }
  var v2 = /* @__PURE__ */ function(p2) {
    _inheritsLoose$2(_, p2);
    function _(I2, P2, $) {
      return p2.call(this, l2(I2, P2, $)) || this;
    }
    return _;
  }(c);
  v2.prototype.name = c.name, v2.prototype.code = a420, codes$1[a420] = v2;
}
function oneOf$1(a420, u2) {
  if (Array.isArray(a420)) {
    var c = a420.length;
    return a420 = a420.map(function(l2) {
      return String(l2);
    }), c > 2 ? "one of ".concat(u2, " ").concat(a420.slice(0, c - 1).join(", "), ", or ") + a420[c - 1] : c === 2 ? "one of ".concat(u2, " ").concat(a420[0], " or ").concat(a420[1]) : "of ".concat(u2, " ").concat(a420[0]);
  } else
    return "of ".concat(u2, " ").concat(String(a420));
}
function startsWith$1(a420, u2, c) {
  return a420.substr(!c || c < 0 ? 0 : +c, u2.length) === u2;
}
function endsWith$1(a420, u2, c) {
  return (c === void 0 || c > a420.length) && (c = a420.length), a420.substring(c - u2.length, c) === u2;
}
function includes$3(a420, u2, c) {
  return typeof c != "number" && (c = 0), c + u2.length > a420.length ? false : a420.indexOf(u2, c) !== -1;
}
createErrorType$1("ERR_INVALID_OPT_VALUE", function(a420, u2) {
  return 'The value "' + u2 + '" is invalid for option "' + a420 + '"';
}, TypeError);
createErrorType$1("ERR_INVALID_ARG_TYPE", function(a420, u2, c) {
  var l2;
  typeof u2 == "string" && startsWith$1(u2, "not ") ? (l2 = "must not be", u2 = u2.replace(/^not /, "")) : l2 = "must be";
  var v2;
  if (endsWith$1(a420, " argument"))
    v2 = "The ".concat(a420, " ").concat(l2, " ").concat(oneOf$1(u2, "type"));
  else {
    var p2 = includes$3(a420, ".") ? "property" : "argument";
    v2 = 'The "'.concat(a420, '" ').concat(p2, " ").concat(l2, " ").concat(oneOf$1(u2, "type"));
  }
  return v2 += ". Received type ".concat(typeof c), v2;
}, TypeError);
createErrorType$1("ERR_STREAM_PUSH_AFTER_EOF", "stream.push() after EOF");
createErrorType$1("ERR_METHOD_NOT_IMPLEMENTED", function(a420) {
  return "The " + a420 + " method is not implemented";
});
createErrorType$1("ERR_STREAM_PREMATURE_CLOSE", "Premature close");
createErrorType$1("ERR_STREAM_DESTROYED", function(a420) {
  return "Cannot call " + a420 + " after a stream was destroyed";
});
createErrorType$1("ERR_MULTIPLE_CALLBACK", "Callback called multiple times");
createErrorType$1("ERR_STREAM_CANNOT_PIPE", "Cannot pipe, not readable");
createErrorType$1("ERR_STREAM_WRITE_AFTER_END", "write after end");
createErrorType$1("ERR_STREAM_NULL_VALUES", "May not write null values to stream", TypeError);
createErrorType$1("ERR_UNKNOWN_ENCODING", function(a420) {
  return "Unknown encoding: " + a420;
}, TypeError);
createErrorType$1("ERR_STREAM_UNSHIFT_AFTER_END_EVENT", "stream.unshift() after end event");
errorsBrowser$1.codes = codes$1;
var ERR_INVALID_OPT_VALUE$1 = errorsBrowser$1.codes.ERR_INVALID_OPT_VALUE;
function highWaterMarkFrom$1(a420, u2, c) {
  return a420.highWaterMark != null ? a420.highWaterMark : u2 ? a420[c] : null;
}
function getHighWaterMark$1(a420, u2, c, l2) {
  var v2 = highWaterMarkFrom$1(u2, l2, c);
  if (v2 != null) {
    if (!(isFinite(v2) && Math.floor(v2) === v2) || v2 < 0) {
      var p2 = l2 ? c : "highWaterMark";
      throw new ERR_INVALID_OPT_VALUE$1(p2, v2);
    }
    return Math.floor(v2);
  }
  return a420.objectMode ? 16 : 16 * 1024;
}
var state$4 = { getHighWaterMark: getHighWaterMark$1 }, _stream_writable$1, hasRequired_stream_writable$1;
function require_stream_writable$1() {
  if (hasRequired_stream_writable$1)
    return _stream_writable$1;
  hasRequired_stream_writable$1 = 1, _stream_writable$1 = Te2;
  function a420(ye2) {
    var he2 = this;
    this.next = null, this.entry = null, this.finish = function() {
      $e2(he2, ye2);
    };
  }
  var u2;
  Te2.WritableState = be2;
  var c = { deprecate: browser$c }, l2 = streamBrowser$1, v2 = require$$0$2.Buffer, p2 = (typeof commonjsGlobal$1 < "u" ? commonjsGlobal$1 : typeof window < "u" ? window : typeof self < "u" ? self : {}).Uint8Array || function() {
  };
  function _(ye2) {
    return v2.from(ye2);
  }
  function I2(ye2) {
    return v2.isBuffer(ye2) || ye2 instanceof p2;
  }
  var P2 = destroy_1$1, $ = state$4, F2 = $.getHighWaterMark, H2 = errorsBrowser$1.codes, j = H2.ERR_INVALID_ARG_TYPE, ee2 = H2.ERR_METHOD_NOT_IMPLEMENTED, X2 = H2.ERR_MULTIPLE_CALLBACK, ie2 = H2.ERR_STREAM_CANNOT_PIPE, Q2 = H2.ERR_STREAM_DESTROYED, ne2 = H2.ERR_STREAM_NULL_VALUES, Z2 = H2.ERR_STREAM_WRITE_AFTER_END, de2 = H2.ERR_UNKNOWN_ENCODING, pe2 = P2.errorOrDestroy;
  inherits_browserExports(Te2, l2);
  function le2() {
  }
  function be2(ye2, he2, Me2) {
    u2 = u2 || require_stream_duplex$1(), ye2 = ye2 || {}, typeof Me2 != "boolean" && (Me2 = he2 instanceof u2), this.objectMode = !!ye2.objectMode, Me2 && (this.objectMode = this.objectMode || !!ye2.writableObjectMode), this.highWaterMark = F2(this, ye2, "writableHighWaterMark", Me2), this.finalCalled = false, this.needDrain = false, this.ending = false, this.ended = false, this.finished = false, this.destroyed = false;
    var Ae2 = ye2.decodeStrings === false;
    this.decodeStrings = !Ae2, this.defaultEncoding = ye2.defaultEncoding || "utf8", this.length = 0, this.writing = false, this.corked = 0, this.sync = true, this.bufferProcessing = false, this.onwrite = function(xe2) {
      A2(he2, xe2);
    }, this.writecb = null, this.writelen = 0, this.bufferedRequest = null, this.lastBufferedRequest = null, this.pendingcb = 0, this.prefinished = false, this.errorEmitted = false, this.emitClose = ye2.emitClose !== false, this.autoDestroy = !!ye2.autoDestroy, this.bufferedRequestCount = 0, this.corkedRequestsFree = new a420(this);
  }
  be2.prototype.getBuffer = function() {
    for (var he2 = this.bufferedRequest, Me2 = []; he2; )
      Me2.push(he2), he2 = he2.next;
    return Me2;
  }, function() {
    try {
      Object.defineProperty(be2.prototype, "buffer", { get: c.deprecate(function() {
        return this.getBuffer();
      }, "_writableState.buffer is deprecated. Use _writableState.getBuffer instead.", "DEP0003") });
    } catch {
    }
  }();
  var ke2;
  typeof Symbol == "function" && Symbol.hasInstance && typeof Function.prototype[Symbol.hasInstance] == "function" ? (ke2 = Function.prototype[Symbol.hasInstance], Object.defineProperty(Te2, Symbol.hasInstance, { value: function(he2) {
    return ke2.call(this, he2) ? true : this !== Te2 ? false : he2 && he2._writableState instanceof be2;
  } })) : ke2 = function(he2) {
    return he2 instanceof this;
  };
  function Te2(ye2) {
    u2 = u2 || require_stream_duplex$1();
    var he2 = this instanceof u2;
    if (!he2 && !ke2.call(Te2, this))
      return new Te2(ye2);
    this._writableState = new be2(ye2, this, he2), this.writable = true, ye2 && (typeof ye2.write == "function" && (this._write = ye2.write), typeof ye2.writev == "function" && (this._writev = ye2.writev), typeof ye2.destroy == "function" && (this._destroy = ye2.destroy), typeof ye2.final == "function" && (this._final = ye2.final)), l2.call(this);
  }
  Te2.prototype.pipe = function() {
    pe2(this, new ie2());
  };
  function q2(ye2, he2) {
    var Me2 = new Z2();
    pe2(ye2, Me2), process$1.nextTick(he2, Me2);
  }
  function z2(ye2, he2, Me2, Ae2) {
    var xe2;
    return Me2 === null ? xe2 = new ne2() : typeof Me2 != "string" && !he2.objectMode && (xe2 = new j("chunk", ["string", "Buffer"], Me2)), xe2 ? (pe2(ye2, xe2), process$1.nextTick(Ae2, xe2), false) : true;
  }
  Te2.prototype.write = function(ye2, he2, Me2) {
    var Ae2 = this._writableState, xe2 = false, ae2 = !Ae2.objectMode && I2(ye2);
    return ae2 && !v2.isBuffer(ye2) && (ye2 = _(ye2)), typeof he2 == "function" && (Me2 = he2, he2 = null), ae2 ? he2 = "buffer" : he2 || (he2 = Ae2.defaultEncoding), typeof Me2 != "function" && (Me2 = le2), Ae2.ending ? q2(this, Me2) : (ae2 || z2(this, Ae2, ye2, Me2)) && (Ae2.pendingcb++, xe2 = b(this, Ae2, ae2, ye2, he2, Me2)), xe2;
  }, Te2.prototype.cork = function() {
    this._writableState.corked++;
  }, Te2.prototype.uncork = function() {
    var ye2 = this._writableState;
    ye2.corked && (ye2.corked--, !ye2.writing && !ye2.corked && !ye2.bufferProcessing && ye2.bufferedRequest && B2(this, ye2));
  }, Te2.prototype.setDefaultEncoding = function(he2) {
    if (typeof he2 == "string" && (he2 = he2.toLowerCase()), !(["hex", "utf8", "utf-8", "ascii", "binary", "base64", "ucs2", "ucs-2", "utf16le", "utf-16le", "raw"].indexOf((he2 + "").toLowerCase()) > -1))
      throw new de2(he2);
    return this._writableState.defaultEncoding = he2, this;
  }, Object.defineProperty(Te2.prototype, "writableBuffer", {
    // making it explicit this property is not enumerable
    // because otherwise some prototype manipulation in
    // userland will fail
    enumerable: false,
    get: function() {
      return this._writableState && this._writableState.getBuffer();
    }
  });
  function C2(ye2, he2, Me2) {
    return !ye2.objectMode && ye2.decodeStrings !== false && typeof he2 == "string" && (he2 = v2.from(he2, Me2)), he2;
  }
  Object.defineProperty(Te2.prototype, "writableHighWaterMark", {
    // making it explicit this property is not enumerable
    // because otherwise some prototype manipulation in
    // userland will fail
    enumerable: false,
    get: function() {
      return this._writableState.highWaterMark;
    }
  });
  function b(ye2, he2, Me2, Ae2, xe2, ae2) {
    if (!Me2) {
      var N2 = C2(he2, Ae2, xe2);
      Ae2 !== N2 && (Me2 = true, xe2 = "buffer", Ae2 = N2);
    }
    var re2 = he2.objectMode ? 1 : Ae2.length;
    he2.length += re2;
    var fe2 = he2.length < he2.highWaterMark;
    if (fe2 || (he2.needDrain = true), he2.writing || he2.corked) {
      var Ne2 = he2.lastBufferedRequest;
      he2.lastBufferedRequest = { chunk: Ae2, encoding: xe2, isBuf: Me2, callback: ae2, next: null }, Ne2 ? Ne2.next = he2.lastBufferedRequest : he2.bufferedRequest = he2.lastBufferedRequest, he2.bufferedRequestCount += 1;
    } else
      E2(ye2, he2, false, re2, Ae2, xe2, ae2);
    return fe2;
  }
  function E2(ye2, he2, Me2, Ae2, xe2, ae2, N2) {
    he2.writelen = Ae2, he2.writecb = N2, he2.writing = true, he2.sync = true, he2.destroyed ? he2.onwrite(new Q2("write")) : Me2 ? ye2._writev(xe2, he2.onwrite) : ye2._write(xe2, ae2, he2.onwrite), he2.sync = false;
  }
  function k(ye2, he2, Me2, Ae2, xe2) {
    --he2.pendingcb, Me2 ? (process$1.nextTick(xe2, Ae2), process$1.nextTick(me2, ye2, he2), ye2._writableState.errorEmitted = true, pe2(ye2, Ae2)) : (xe2(Ae2), ye2._writableState.errorEmitted = true, pe2(ye2, Ae2), me2(ye2, he2));
  }
  function O2(ye2) {
    ye2.writing = false, ye2.writecb = null, ye2.length -= ye2.writelen, ye2.writelen = 0;
  }
  function A2(ye2, he2) {
    var Me2 = ye2._writableState, Ae2 = Me2.sync, xe2 = Me2.writecb;
    if (typeof xe2 != "function")
      throw new X2();
    if (O2(Me2), he2)
      k(ye2, Me2, Ae2, he2, xe2);
    else {
      var ae2 = T2(Me2) || ye2.destroyed;
      !ae2 && !Me2.corked && !Me2.bufferProcessing && Me2.bufferedRequest && B2(ye2, Me2), Ae2 ? process$1.nextTick(x2, ye2, Me2, ae2, xe2) : x2(ye2, Me2, ae2, xe2);
    }
  }
  function x2(ye2, he2, Me2, Ae2) {
    Me2 || Y2(ye2, he2), he2.pendingcb--, Ae2(), me2(ye2, he2);
  }
  function Y2(ye2, he2) {
    he2.length === 0 && he2.needDrain && (he2.needDrain = false, ye2.emit("drain"));
  }
  function B2(ye2, he2) {
    he2.bufferProcessing = true;
    var Me2 = he2.bufferedRequest;
    if (ye2._writev && Me2 && Me2.next) {
      var Ae2 = he2.bufferedRequestCount, xe2 = new Array(Ae2), ae2 = he2.corkedRequestsFree;
      ae2.entry = Me2;
      for (var N2 = 0, re2 = true; Me2; )
        xe2[N2] = Me2, Me2.isBuf || (re2 = false), Me2 = Me2.next, N2 += 1;
      xe2.allBuffers = re2, E2(ye2, he2, true, he2.length, xe2, "", ae2.finish), he2.pendingcb++, he2.lastBufferedRequest = null, ae2.next ? (he2.corkedRequestsFree = ae2.next, ae2.next = null) : he2.corkedRequestsFree = new a420(he2), he2.bufferedRequestCount = 0;
    } else {
      for (; Me2; ) {
        var fe2 = Me2.chunk, Ne2 = Me2.encoding, Oe2 = Me2.callback, qe2 = he2.objectMode ? 1 : fe2.length;
        if (E2(ye2, he2, false, qe2, fe2, Ne2, Oe2), Me2 = Me2.next, he2.bufferedRequestCount--, he2.writing)
          break;
      }
      Me2 === null && (he2.lastBufferedRequest = null);
    }
    he2.bufferedRequest = Me2, he2.bufferProcessing = false;
  }
  Te2.prototype._write = function(ye2, he2, Me2) {
    Me2(new ee2("_write()"));
  }, Te2.prototype._writev = null, Te2.prototype.end = function(ye2, he2, Me2) {
    var Ae2 = this._writableState;
    return typeof ye2 == "function" ? (Me2 = ye2, ye2 = null, he2 = null) : typeof he2 == "function" && (Me2 = he2, he2 = null), ye2 != null && this.write(ye2, he2), Ae2.corked && (Ae2.corked = 1, this.uncork()), Ae2.ending || Ie2(this, Ae2, Me2), this;
  }, Object.defineProperty(Te2.prototype, "writableLength", {
    // making it explicit this property is not enumerable
    // because otherwise some prototype manipulation in
    // userland will fail
    enumerable: false,
    get: function() {
      return this._writableState.length;
    }
  });
  function T2(ye2) {
    return ye2.ending && ye2.length === 0 && ye2.bufferedRequest === null && !ye2.finished && !ye2.writing;
  }
  function D2(ye2, he2) {
    ye2._final(function(Me2) {
      he2.pendingcb--, Me2 && pe2(ye2, Me2), he2.prefinished = true, ye2.emit("prefinish"), me2(ye2, he2);
    });
  }
  function te2(ye2, he2) {
    !he2.prefinished && !he2.finalCalled && (typeof ye2._final == "function" && !he2.destroyed ? (he2.pendingcb++, he2.finalCalled = true, process$1.nextTick(D2, ye2, he2)) : (he2.prefinished = true, ye2.emit("prefinish")));
  }
  function me2(ye2, he2) {
    var Me2 = T2(he2);
    if (Me2 && (te2(ye2, he2), he2.pendingcb === 0 && (he2.finished = true, ye2.emit("finish"), he2.autoDestroy))) {
      var Ae2 = ye2._readableState;
      (!Ae2 || Ae2.autoDestroy && Ae2.endEmitted) && ye2.destroy();
    }
    return Me2;
  }
  function Ie2(ye2, he2, Me2) {
    he2.ending = true, me2(ye2, he2), Me2 && (he2.finished ? process$1.nextTick(Me2) : ye2.once("finish", Me2)), he2.ended = true, ye2.writable = false;
  }
  function $e2(ye2, he2, Me2) {
    var Ae2 = ye2.entry;
    for (ye2.entry = null; Ae2; ) {
      var xe2 = Ae2.callback;
      he2.pendingcb--, xe2(Me2), Ae2 = Ae2.next;
    }
    he2.corkedRequestsFree.next = ye2;
  }
  return Object.defineProperty(Te2.prototype, "destroyed", {
    // making it explicit this property is not enumerable
    // because otherwise some prototype manipulation in
    // userland will fail
    enumerable: false,
    get: function() {
      return this._writableState === void 0 ? false : this._writableState.destroyed;
    },
    set: function(he2) {
      this._writableState && (this._writableState.destroyed = he2);
    }
  }), Te2.prototype.destroy = P2.destroy, Te2.prototype._undestroy = P2.undestroy, Te2.prototype._destroy = function(ye2, he2) {
    he2(ye2);
  }, _stream_writable$1;
}
var _stream_duplex$1, hasRequired_stream_duplex$1;
function require_stream_duplex$1() {
  if (hasRequired_stream_duplex$1)
    return _stream_duplex$1;
  hasRequired_stream_duplex$1 = 1;
  var a420 = Object.keys || function($) {
    var F2 = [];
    for (var H2 in $)
      F2.push(H2);
    return F2;
  };
  _stream_duplex$1 = _;
  var u2 = require_stream_readable$1(), c = require_stream_writable$1();
  inherits_browserExports(_, u2);
  for (var l2 = a420(c.prototype), v2 = 0; v2 < l2.length; v2++) {
    var p2 = l2[v2];
    _.prototype[p2] || (_.prototype[p2] = c.prototype[p2]);
  }
  function _($) {
    if (!(this instanceof _))
      return new _($);
    u2.call(this, $), c.call(this, $), this.allowHalfOpen = true, $ && ($.readable === false && (this.readable = false), $.writable === false && (this.writable = false), $.allowHalfOpen === false && (this.allowHalfOpen = false, this.once("end", I2)));
  }
  Object.defineProperty(_.prototype, "writableHighWaterMark", {
    // making it explicit this property is not enumerable
    // because otherwise some prototype manipulation in
    // userland will fail
    enumerable: false,
    get: function() {
      return this._writableState.highWaterMark;
    }
  }), Object.defineProperty(_.prototype, "writableBuffer", {
    // making it explicit this property is not enumerable
    // because otherwise some prototype manipulation in
    // userland will fail
    enumerable: false,
    get: function() {
      return this._writableState && this._writableState.getBuffer();
    }
  }), Object.defineProperty(_.prototype, "writableLength", {
    // making it explicit this property is not enumerable
    // because otherwise some prototype manipulation in
    // userland will fail
    enumerable: false,
    get: function() {
      return this._writableState.length;
    }
  });
  function I2() {
    this._writableState.ended || process$1.nextTick(P2, this);
  }
  function P2($) {
    $.end();
  }
  return Object.defineProperty(_.prototype, "destroyed", {
    // making it explicit this property is not enumerable
    // because otherwise some prototype manipulation in
    // userland will fail
    enumerable: false,
    get: function() {
      return this._readableState === void 0 || this._writableState === void 0 ? false : this._readableState.destroyed && this._writableState.destroyed;
    },
    set: function(F2) {
      this._readableState === void 0 || this._writableState === void 0 || (this._readableState.destroyed = F2, this._writableState.destroyed = F2);
    }
  }), _stream_duplex$1;
}
var ERR_STREAM_PREMATURE_CLOSE$1 = errorsBrowser$1.codes.ERR_STREAM_PREMATURE_CLOSE;
function once$6(a420) {
  var u2 = false;
  return function() {
    if (!u2) {
      u2 = true;
      for (var c = arguments.length, l2 = new Array(c), v2 = 0; v2 < c; v2++)
        l2[v2] = arguments[v2];
      a420.apply(this, l2);
    }
  };
}
function noop$4() {
}
function isRequest$3(a420) {
  return a420.setHeader && typeof a420.abort == "function";
}
function eos$3(a420, u2, c) {
  if (typeof u2 == "function")
    return eos$3(a420, null, u2);
  u2 || (u2 = {}), c = once$6(c || noop$4);
  var l2 = u2.readable || u2.readable !== false && a420.readable, v2 = u2.writable || u2.writable !== false && a420.writable, p2 = function() {
    a420.writable || I2();
  }, _ = a420._writableState && a420._writableState.finished, I2 = function() {
    v2 = false, _ = true, l2 || c.call(a420);
  }, P2 = a420._readableState && a420._readableState.endEmitted, $ = function() {
    l2 = false, P2 = true, v2 || c.call(a420);
  }, F2 = function(X2) {
    c.call(a420, X2);
  }, H2 = function() {
    var X2;
    if (l2 && !P2)
      return (!a420._readableState || !a420._readableState.ended) && (X2 = new ERR_STREAM_PREMATURE_CLOSE$1()), c.call(a420, X2);
    if (v2 && !_)
      return (!a420._writableState || !a420._writableState.ended) && (X2 = new ERR_STREAM_PREMATURE_CLOSE$1()), c.call(a420, X2);
  }, j = function() {
    a420.req.on("finish", I2);
  };
  return isRequest$3(a420) ? (a420.on("complete", I2), a420.on("abort", H2), a420.req ? j() : a420.on("request", j)) : v2 && !a420._writableState && (a420.on("end", p2), a420.on("close", p2)), a420.on("end", $), a420.on("finish", I2), u2.error !== false && a420.on("error", F2), a420.on("close", H2), function() {
    a420.removeListener("complete", I2), a420.removeListener("abort", H2), a420.removeListener("request", j), a420.req && a420.req.removeListener("finish", I2), a420.removeListener("end", p2), a420.removeListener("close", p2), a420.removeListener("finish", I2), a420.removeListener("end", $), a420.removeListener("error", F2), a420.removeListener("close", H2);
  };
}
var endOfStream$1 = eos$3, async_iterator$1, hasRequiredAsync_iterator$1;
function requireAsync_iterator$1() {
  if (hasRequiredAsync_iterator$1)
    return async_iterator$1;
  hasRequiredAsync_iterator$1 = 1;
  var a420;
  function u2(de2, pe2, le2) {
    return pe2 = c(pe2), pe2 in de2 ? Object.defineProperty(de2, pe2, { value: le2, enumerable: true, configurable: true, writable: true }) : de2[pe2] = le2, de2;
  }
  function c(de2) {
    var pe2 = l2(de2, "string");
    return typeof pe2 == "symbol" ? pe2 : String(pe2);
  }
  function l2(de2, pe2) {
    if (typeof de2 != "object" || de2 === null)
      return de2;
    var le2 = de2[Symbol.toPrimitive];
    if (le2 !== void 0) {
      var be2 = le2.call(de2, pe2 || "default");
      if (typeof be2 != "object")
        return be2;
      throw new TypeError("@@toPrimitive must return a primitive value.");
    }
    return (pe2 === "string" ? String : Number)(de2);
  }
  var v2 = endOfStream$1, p2 = Symbol("lastResolve"), _ = Symbol("lastReject"), I2 = Symbol("error"), P2 = Symbol("ended"), $ = Symbol("lastPromise"), F2 = Symbol("handlePromise"), H2 = Symbol("stream");
  function j(de2, pe2) {
    return { value: de2, done: pe2 };
  }
  function ee2(de2) {
    var pe2 = de2[p2];
    if (pe2 !== null) {
      var le2 = de2[H2].read();
      le2 !== null && (de2[$] = null, de2[p2] = null, de2[_] = null, pe2(j(le2, false)));
    }
  }
  function X2(de2) {
    process$1.nextTick(ee2, de2);
  }
  function ie2(de2, pe2) {
    return function(le2, be2) {
      de2.then(function() {
        if (pe2[P2]) {
          le2(j(void 0, true));
          return;
        }
        pe2[F2](le2, be2);
      }, be2);
    };
  }
  var Q2 = Object.getPrototypeOf(function() {
  }), ne2 = Object.setPrototypeOf((a420 = { get stream() {
    return this[H2];
  }, next: function() {
    var pe2 = this, le2 = this[I2];
    if (le2 !== null)
      return Promise.reject(le2);
    if (this[P2])
      return Promise.resolve(j(void 0, true));
    if (this[H2].destroyed)
      return new Promise(function(q2, z2) {
        process$1.nextTick(function() {
          pe2[I2] ? z2(pe2[I2]) : q2(j(void 0, true));
        });
      });
    var be2 = this[$], ke2;
    if (be2)
      ke2 = new Promise(ie2(be2, this));
    else {
      var Te2 = this[H2].read();
      if (Te2 !== null)
        return Promise.resolve(j(Te2, false));
      ke2 = new Promise(this[F2]);
    }
    return this[$] = ke2, ke2;
  } }, u2(a420, Symbol.asyncIterator, function() {
    return this;
  }), u2(a420, "return", function() {
    var pe2 = this;
    return new Promise(function(le2, be2) {
      pe2[H2].destroy(null, function(ke2) {
        if (ke2) {
          be2(ke2);
          return;
        }
        le2(j(void 0, true));
      });
    });
  }), a420), Q2), Z2 = function(pe2) {
    var le2, be2 = Object.create(ne2, (le2 = {}, u2(le2, H2, { value: pe2, writable: true }), u2(le2, p2, { value: null, writable: true }), u2(le2, _, { value: null, writable: true }), u2(le2, I2, { value: null, writable: true }), u2(le2, P2, { value: pe2._readableState.endEmitted, writable: true }), u2(le2, F2, { value: function(Te2, q2) {
      var z2 = be2[H2].read();
      z2 ? (be2[$] = null, be2[p2] = null, be2[_] = null, Te2(j(z2, false))) : (be2[p2] = Te2, be2[_] = q2);
    }, writable: true }), le2));
    return be2[$] = null, v2(pe2, function(ke2) {
      if (ke2 && ke2.code !== "ERR_STREAM_PREMATURE_CLOSE") {
        var Te2 = be2[_];
        Te2 !== null && (be2[$] = null, be2[p2] = null, be2[_] = null, Te2(ke2)), be2[I2] = ke2;
        return;
      }
      var q2 = be2[p2];
      q2 !== null && (be2[$] = null, be2[p2] = null, be2[_] = null, q2(j(void 0, true))), be2[P2] = true;
    }), pe2.on("readable", X2.bind(null, be2)), be2;
  };
  return async_iterator$1 = Z2, async_iterator$1;
}
var fromBrowser$1, hasRequiredFromBrowser$1;
function requireFromBrowser$1() {
  return hasRequiredFromBrowser$1 || (hasRequiredFromBrowser$1 = 1, fromBrowser$1 = function() {
    throw new Error("Readable.from is not available in the browser");
  }), fromBrowser$1;
}
var _stream_readable$1, hasRequired_stream_readable$1;
function require_stream_readable$1() {
  if (hasRequired_stream_readable$1)
    return _stream_readable$1;
  hasRequired_stream_readable$1 = 1, _stream_readable$1 = q2;
  var a420;
  q2.ReadableState = Te2, eventsExports$1.EventEmitter;
  var u2 = function(N2, re2) {
    return N2.listeners(re2).length;
  }, c = streamBrowser$1, l2 = require$$0$2.Buffer, v2 = (typeof commonjsGlobal$1 < "u" ? commonjsGlobal$1 : typeof window < "u" ? window : typeof self < "u" ? self : {}).Uint8Array || function() {
  };
  function p2(ae2) {
    return l2.from(ae2);
  }
  function _(ae2) {
    return l2.isBuffer(ae2) || ae2 instanceof v2;
  }
  var I2 = util$4, P2;
  I2 && I2.debuglog ? P2 = I2.debuglog("stream") : P2 = function() {
  };
  var $ = requireBuffer_list$1(), F2 = destroy_1$1, H2 = state$4, j = H2.getHighWaterMark, ee2 = errorsBrowser$1.codes, X2 = ee2.ERR_INVALID_ARG_TYPE, ie2 = ee2.ERR_STREAM_PUSH_AFTER_EOF, Q2 = ee2.ERR_METHOD_NOT_IMPLEMENTED, ne2 = ee2.ERR_STREAM_UNSHIFT_AFTER_END_EVENT, Z2, de2, pe2;
  inherits_browserExports(q2, c);
  var le2 = F2.errorOrDestroy, be2 = ["error", "close", "destroy", "pause", "resume"];
  function ke2(ae2, N2, re2) {
    if (typeof ae2.prependListener == "function")
      return ae2.prependListener(N2, re2);
    !ae2._events || !ae2._events[N2] ? ae2.on(N2, re2) : Array.isArray(ae2._events[N2]) ? ae2._events[N2].unshift(re2) : ae2._events[N2] = [re2, ae2._events[N2]];
  }
  function Te2(ae2, N2, re2) {
    a420 = a420 || require_stream_duplex$1(), ae2 = ae2 || {}, typeof re2 != "boolean" && (re2 = N2 instanceof a420), this.objectMode = !!ae2.objectMode, re2 && (this.objectMode = this.objectMode || !!ae2.readableObjectMode), this.highWaterMark = j(this, ae2, "readableHighWaterMark", re2), this.buffer = new $(), this.length = 0, this.pipes = null, this.pipesCount = 0, this.flowing = null, this.ended = false, this.endEmitted = false, this.reading = false, this.sync = true, this.needReadable = false, this.emittedReadable = false, this.readableListening = false, this.resumeScheduled = false, this.paused = true, this.emitClose = ae2.emitClose !== false, this.autoDestroy = !!ae2.autoDestroy, this.destroyed = false, this.defaultEncoding = ae2.defaultEncoding || "utf8", this.awaitDrain = 0, this.readingMore = false, this.decoder = null, this.encoding = null, ae2.encoding && (Z2 || (Z2 = string_decoder.StringDecoder), this.decoder = new Z2(ae2.encoding), this.encoding = ae2.encoding);
  }
  function q2(ae2) {
    if (a420 = a420 || require_stream_duplex$1(), !(this instanceof q2))
      return new q2(ae2);
    var N2 = this instanceof a420;
    this._readableState = new Te2(ae2, this, N2), this.readable = true, ae2 && (typeof ae2.read == "function" && (this._read = ae2.read), typeof ae2.destroy == "function" && (this._destroy = ae2.destroy)), c.call(this);
  }
  Object.defineProperty(q2.prototype, "destroyed", {
    // making it explicit this property is not enumerable
    // because otherwise some prototype manipulation in
    // userland will fail
    enumerable: false,
    get: function() {
      return this._readableState === void 0 ? false : this._readableState.destroyed;
    },
    set: function(N2) {
      this._readableState && (this._readableState.destroyed = N2);
    }
  }), q2.prototype.destroy = F2.destroy, q2.prototype._undestroy = F2.undestroy, q2.prototype._destroy = function(ae2, N2) {
    N2(ae2);
  }, q2.prototype.push = function(ae2, N2) {
    var re2 = this._readableState, fe2;
    return re2.objectMode ? fe2 = true : typeof ae2 == "string" && (N2 = N2 || re2.defaultEncoding, N2 !== re2.encoding && (ae2 = l2.from(ae2, N2), N2 = ""), fe2 = true), z2(this, ae2, N2, false, fe2);
  }, q2.prototype.unshift = function(ae2) {
    return z2(this, ae2, null, true, false);
  };
  function z2(ae2, N2, re2, fe2, Ne2) {
    P2("readableAddChunk", N2);
    var Oe2 = ae2._readableState;
    if (N2 === null)
      Oe2.reading = false, A2(ae2, Oe2);
    else {
      var qe2;
      if (Ne2 || (qe2 = b(Oe2, N2)), qe2)
        le2(ae2, qe2);
      else if (Oe2.objectMode || N2 && N2.length > 0) {
        if (typeof N2 != "string" && !Oe2.objectMode && Object.getPrototypeOf(N2) !== l2.prototype && (N2 = p2(N2)), fe2)
          Oe2.endEmitted ? le2(ae2, new ne2()) : C2(ae2, Oe2, N2, true);
        else if (Oe2.ended)
          le2(ae2, new ie2());
        else {
          if (Oe2.destroyed)
            return false;
          Oe2.reading = false, Oe2.decoder && !re2 ? (N2 = Oe2.decoder.write(N2), Oe2.objectMode || N2.length !== 0 ? C2(ae2, Oe2, N2, false) : B2(ae2, Oe2)) : C2(ae2, Oe2, N2, false);
        }
      } else
        fe2 || (Oe2.reading = false, B2(ae2, Oe2));
    }
    return !Oe2.ended && (Oe2.length < Oe2.highWaterMark || Oe2.length === 0);
  }
  function C2(ae2, N2, re2, fe2) {
    N2.flowing && N2.length === 0 && !N2.sync ? (N2.awaitDrain = 0, ae2.emit("data", re2)) : (N2.length += N2.objectMode ? 1 : re2.length, fe2 ? N2.buffer.unshift(re2) : N2.buffer.push(re2), N2.needReadable && x2(ae2)), B2(ae2, N2);
  }
  function b(ae2, N2) {
    var re2;
    return !_(N2) && typeof N2 != "string" && N2 !== void 0 && !ae2.objectMode && (re2 = new X2("chunk", ["string", "Buffer", "Uint8Array"], N2)), re2;
  }
  q2.prototype.isPaused = function() {
    return this._readableState.flowing === false;
  }, q2.prototype.setEncoding = function(ae2) {
    Z2 || (Z2 = string_decoder.StringDecoder);
    var N2 = new Z2(ae2);
    this._readableState.decoder = N2, this._readableState.encoding = this._readableState.decoder.encoding;
    for (var re2 = this._readableState.buffer.head, fe2 = ""; re2 !== null; )
      fe2 += N2.write(re2.data), re2 = re2.next;
    return this._readableState.buffer.clear(), fe2 !== "" && this._readableState.buffer.push(fe2), this._readableState.length = fe2.length, this;
  };
  var E2 = 1073741824;
  function k(ae2) {
    return ae2 >= E2 ? ae2 = E2 : (ae2--, ae2 |= ae2 >>> 1, ae2 |= ae2 >>> 2, ae2 |= ae2 >>> 4, ae2 |= ae2 >>> 8, ae2 |= ae2 >>> 16, ae2++), ae2;
  }
  function O2(ae2, N2) {
    return ae2 <= 0 || N2.length === 0 && N2.ended ? 0 : N2.objectMode ? 1 : ae2 !== ae2 ? N2.flowing && N2.length ? N2.buffer.head.data.length : N2.length : (ae2 > N2.highWaterMark && (N2.highWaterMark = k(ae2)), ae2 <= N2.length ? ae2 : N2.ended ? N2.length : (N2.needReadable = true, 0));
  }
  q2.prototype.read = function(ae2) {
    P2("read", ae2), ae2 = parseInt(ae2, 10);
    var N2 = this._readableState, re2 = ae2;
    if (ae2 !== 0 && (N2.emittedReadable = false), ae2 === 0 && N2.needReadable && ((N2.highWaterMark !== 0 ? N2.length >= N2.highWaterMark : N2.length > 0) || N2.ended))
      return P2("read: emitReadable", N2.length, N2.ended), N2.length === 0 && N2.ended ? Me2(this) : x2(this), null;
    if (ae2 = O2(ae2, N2), ae2 === 0 && N2.ended)
      return N2.length === 0 && Me2(this), null;
    var fe2 = N2.needReadable;
    P2("need readable", fe2), (N2.length === 0 || N2.length - ae2 < N2.highWaterMark) && (fe2 = true, P2("length less than watermark", fe2)), N2.ended || N2.reading ? (fe2 = false, P2("reading or ended", fe2)) : fe2 && (P2("do read"), N2.reading = true, N2.sync = true, N2.length === 0 && (N2.needReadable = true), this._read(N2.highWaterMark), N2.sync = false, N2.reading || (ae2 = O2(re2, N2)));
    var Ne2;
    return ae2 > 0 ? Ne2 = he2(ae2, N2) : Ne2 = null, Ne2 === null ? (N2.needReadable = N2.length <= N2.highWaterMark, ae2 = 0) : (N2.length -= ae2, N2.awaitDrain = 0), N2.length === 0 && (N2.ended || (N2.needReadable = true), re2 !== ae2 && N2.ended && Me2(this)), Ne2 !== null && this.emit("data", Ne2), Ne2;
  };
  function A2(ae2, N2) {
    if (P2("onEofChunk"), !N2.ended) {
      if (N2.decoder) {
        var re2 = N2.decoder.end();
        re2 && re2.length && (N2.buffer.push(re2), N2.length += N2.objectMode ? 1 : re2.length);
      }
      N2.ended = true, N2.sync ? x2(ae2) : (N2.needReadable = false, N2.emittedReadable || (N2.emittedReadable = true, Y2(ae2)));
    }
  }
  function x2(ae2) {
    var N2 = ae2._readableState;
    P2("emitReadable", N2.needReadable, N2.emittedReadable), N2.needReadable = false, N2.emittedReadable || (P2("emitReadable", N2.flowing), N2.emittedReadable = true, process$1.nextTick(Y2, ae2));
  }
  function Y2(ae2) {
    var N2 = ae2._readableState;
    P2("emitReadable_", N2.destroyed, N2.length, N2.ended), !N2.destroyed && (N2.length || N2.ended) && (ae2.emit("readable"), N2.emittedReadable = false), N2.needReadable = !N2.flowing && !N2.ended && N2.length <= N2.highWaterMark, ye2(ae2);
  }
  function B2(ae2, N2) {
    N2.readingMore || (N2.readingMore = true, process$1.nextTick(T2, ae2, N2));
  }
  function T2(ae2, N2) {
    for (; !N2.reading && !N2.ended && (N2.length < N2.highWaterMark || N2.flowing && N2.length === 0); ) {
      var re2 = N2.length;
      if (P2("maybeReadMore read 0"), ae2.read(0), re2 === N2.length)
        break;
    }
    N2.readingMore = false;
  }
  q2.prototype._read = function(ae2) {
    le2(this, new Q2("_read()"));
  }, q2.prototype.pipe = function(ae2, N2) {
    var re2 = this, fe2 = this._readableState;
    switch (fe2.pipesCount) {
      case 0:
        fe2.pipes = ae2;
        break;
      case 1:
        fe2.pipes = [fe2.pipes, ae2];
        break;
      default:
        fe2.pipes.push(ae2);
        break;
    }
    fe2.pipesCount += 1, P2("pipe count=%d opts=%j", fe2.pipesCount, N2);
    var Ne2 = (!N2 || N2.end !== false) && ae2 !== process$1.stdout && ae2 !== process$1.stderr, Oe2 = Ne2 ? je2 : We2;
    fe2.endEmitted ? process$1.nextTick(Oe2) : re2.once("end", Oe2), ae2.on("unpipe", qe2);
    function qe2(Re2, J2) {
      P2("onunpipe"), Re2 === re2 && J2 && J2.hasUnpiped === false && (J2.hasUnpiped = true, Xe2());
    }
    function je2() {
      P2("onend"), ae2.end();
    }
    var Fe2 = D2(re2);
    ae2.on("drain", Fe2);
    var yt = false;
    function Xe2() {
      P2("cleanup"), ae2.removeListener("close", ge2), ae2.removeListener("finish", we2), ae2.removeListener("drain", Fe2), ae2.removeListener("error", V2), ae2.removeListener("unpipe", qe2), re2.removeListener("end", je2), re2.removeListener("end", We2), re2.removeListener("data", Ge2), yt = true, fe2.awaitDrain && (!ae2._writableState || ae2._writableState.needDrain) && Fe2();
    }
    re2.on("data", Ge2);
    function Ge2(Re2) {
      P2("ondata");
      var J2 = ae2.write(Re2);
      P2("dest.write", J2), J2 === false && ((fe2.pipesCount === 1 && fe2.pipes === ae2 || fe2.pipesCount > 1 && xe2(fe2.pipes, ae2) !== -1) && !yt && (P2("false write response, pause", fe2.awaitDrain), fe2.awaitDrain++), re2.pause());
    }
    function V2(Re2) {
      P2("onerror", Re2), We2(), ae2.removeListener("error", V2), u2(ae2, "error") === 0 && le2(ae2, Re2);
    }
    ke2(ae2, "error", V2);
    function ge2() {
      ae2.removeListener("finish", we2), We2();
    }
    ae2.once("close", ge2);
    function we2() {
      P2("onfinish"), ae2.removeListener("close", ge2), We2();
    }
    ae2.once("finish", we2);
    function We2() {
      P2("unpipe"), re2.unpipe(ae2);
    }
    return ae2.emit("pipe", re2), fe2.flowing || (P2("pipe resume"), re2.resume()), ae2;
  };
  function D2(ae2) {
    return function() {
      var re2 = ae2._readableState;
      P2("pipeOnDrain", re2.awaitDrain), re2.awaitDrain && re2.awaitDrain--, re2.awaitDrain === 0 && u2(ae2, "data") && (re2.flowing = true, ye2(ae2));
    };
  }
  q2.prototype.unpipe = function(ae2) {
    var N2 = this._readableState, re2 = { hasUnpiped: false };
    if (N2.pipesCount === 0)
      return this;
    if (N2.pipesCount === 1)
      return ae2 && ae2 !== N2.pipes ? this : (ae2 || (ae2 = N2.pipes), N2.pipes = null, N2.pipesCount = 0, N2.flowing = false, ae2 && ae2.emit("unpipe", this, re2), this);
    if (!ae2) {
      var fe2 = N2.pipes, Ne2 = N2.pipesCount;
      N2.pipes = null, N2.pipesCount = 0, N2.flowing = false;
      for (var Oe2 = 0; Oe2 < Ne2; Oe2++)
        fe2[Oe2].emit("unpipe", this, { hasUnpiped: false });
      return this;
    }
    var qe2 = xe2(N2.pipes, ae2);
    return qe2 === -1 ? this : (N2.pipes.splice(qe2, 1), N2.pipesCount -= 1, N2.pipesCount === 1 && (N2.pipes = N2.pipes[0]), ae2.emit("unpipe", this, re2), this);
  }, q2.prototype.on = function(ae2, N2) {
    var re2 = c.prototype.on.call(this, ae2, N2), fe2 = this._readableState;
    return ae2 === "data" ? (fe2.readableListening = this.listenerCount("readable") > 0, fe2.flowing !== false && this.resume()) : ae2 === "readable" && !fe2.endEmitted && !fe2.readableListening && (fe2.readableListening = fe2.needReadable = true, fe2.flowing = false, fe2.emittedReadable = false, P2("on readable", fe2.length, fe2.reading), fe2.length ? x2(this) : fe2.reading || process$1.nextTick(me2, this)), re2;
  }, q2.prototype.addListener = q2.prototype.on, q2.prototype.removeListener = function(ae2, N2) {
    var re2 = c.prototype.removeListener.call(this, ae2, N2);
    return ae2 === "readable" && process$1.nextTick(te2, this), re2;
  }, q2.prototype.removeAllListeners = function(ae2) {
    var N2 = c.prototype.removeAllListeners.apply(this, arguments);
    return (ae2 === "readable" || ae2 === void 0) && process$1.nextTick(te2, this), N2;
  };
  function te2(ae2) {
    var N2 = ae2._readableState;
    N2.readableListening = ae2.listenerCount("readable") > 0, N2.resumeScheduled && !N2.paused ? N2.flowing = true : ae2.listenerCount("data") > 0 && ae2.resume();
  }
  function me2(ae2) {
    P2("readable nexttick read 0"), ae2.read(0);
  }
  q2.prototype.resume = function() {
    var ae2 = this._readableState;
    return ae2.flowing || (P2("resume"), ae2.flowing = !ae2.readableListening, Ie2(this, ae2)), ae2.paused = false, this;
  };
  function Ie2(ae2, N2) {
    N2.resumeScheduled || (N2.resumeScheduled = true, process$1.nextTick($e2, ae2, N2));
  }
  function $e2(ae2, N2) {
    P2("resume", N2.reading), N2.reading || ae2.read(0), N2.resumeScheduled = false, ae2.emit("resume"), ye2(ae2), N2.flowing && !N2.reading && ae2.read(0);
  }
  q2.prototype.pause = function() {
    return P2("call pause flowing=%j", this._readableState.flowing), this._readableState.flowing !== false && (P2("pause"), this._readableState.flowing = false, this.emit("pause")), this._readableState.paused = true, this;
  };
  function ye2(ae2) {
    var N2 = ae2._readableState;
    for (P2("flow", N2.flowing); N2.flowing && ae2.read() !== null; )
      ;
  }
  q2.prototype.wrap = function(ae2) {
    var N2 = this, re2 = this._readableState, fe2 = false;
    ae2.on("end", function() {
      if (P2("wrapped end"), re2.decoder && !re2.ended) {
        var qe2 = re2.decoder.end();
        qe2 && qe2.length && N2.push(qe2);
      }
      N2.push(null);
    }), ae2.on("data", function(qe2) {
      if (P2("wrapped data"), re2.decoder && (qe2 = re2.decoder.write(qe2)), !(re2.objectMode && qe2 == null) && !(!re2.objectMode && (!qe2 || !qe2.length))) {
        var je2 = N2.push(qe2);
        je2 || (fe2 = true, ae2.pause());
      }
    });
    for (var Ne2 in ae2)
      this[Ne2] === void 0 && typeof ae2[Ne2] == "function" && (this[Ne2] = /* @__PURE__ */ function(je2) {
        return function() {
          return ae2[je2].apply(ae2, arguments);
        };
      }(Ne2));
    for (var Oe2 = 0; Oe2 < be2.length; Oe2++)
      ae2.on(be2[Oe2], this.emit.bind(this, be2[Oe2]));
    return this._read = function(qe2) {
      P2("wrapped _read", qe2), fe2 && (fe2 = false, ae2.resume());
    }, this;
  }, typeof Symbol == "function" && (q2.prototype[Symbol.asyncIterator] = function() {
    return de2 === void 0 && (de2 = requireAsync_iterator$1()), de2(this);
  }), Object.defineProperty(q2.prototype, "readableHighWaterMark", {
    // making it explicit this property is not enumerable
    // because otherwise some prototype manipulation in
    // userland will fail
    enumerable: false,
    get: function() {
      return this._readableState.highWaterMark;
    }
  }), Object.defineProperty(q2.prototype, "readableBuffer", {
    // making it explicit this property is not enumerable
    // because otherwise some prototype manipulation in
    // userland will fail
    enumerable: false,
    get: function() {
      return this._readableState && this._readableState.buffer;
    }
  }), Object.defineProperty(q2.prototype, "readableFlowing", {
    // making it explicit this property is not enumerable
    // because otherwise some prototype manipulation in
    // userland will fail
    enumerable: false,
    get: function() {
      return this._readableState.flowing;
    },
    set: function(N2) {
      this._readableState && (this._readableState.flowing = N2);
    }
  }), q2._fromList = he2, Object.defineProperty(q2.prototype, "readableLength", {
    // making it explicit this property is not enumerable
    // because otherwise some prototype manipulation in
    // userland will fail
    enumerable: false,
    get: function() {
      return this._readableState.length;
    }
  });
  function he2(ae2, N2) {
    if (N2.length === 0)
      return null;
    var re2;
    return N2.objectMode ? re2 = N2.buffer.shift() : !ae2 || ae2 >= N2.length ? (N2.decoder ? re2 = N2.buffer.join("") : N2.buffer.length === 1 ? re2 = N2.buffer.first() : re2 = N2.buffer.concat(N2.length), N2.buffer.clear()) : re2 = N2.buffer.consume(ae2, N2.decoder), re2;
  }
  function Me2(ae2) {
    var N2 = ae2._readableState;
    P2("endReadable", N2.endEmitted), N2.endEmitted || (N2.ended = true, process$1.nextTick(Ae2, N2, ae2));
  }
  function Ae2(ae2, N2) {
    if (P2("endReadableNT", ae2.endEmitted, ae2.length), !ae2.endEmitted && ae2.length === 0 && (ae2.endEmitted = true, N2.readable = false, N2.emit("end"), ae2.autoDestroy)) {
      var re2 = N2._writableState;
      (!re2 || re2.autoDestroy && re2.finished) && N2.destroy();
    }
  }
  typeof Symbol == "function" && (q2.from = function(ae2, N2) {
    return pe2 === void 0 && (pe2 = requireFromBrowser$1()), pe2(q2, ae2, N2);
  });
  function xe2(ae2, N2) {
    for (var re2 = 0, fe2 = ae2.length; re2 < fe2; re2++)
      if (ae2[re2] === N2)
        return re2;
    return -1;
  }
  return _stream_readable$1;
}
var _stream_transform$1 = Transform$9, _require$codes$3 = errorsBrowser$1.codes, ERR_METHOD_NOT_IMPLEMENTED$1 = _require$codes$3.ERR_METHOD_NOT_IMPLEMENTED, ERR_MULTIPLE_CALLBACK$1 = _require$codes$3.ERR_MULTIPLE_CALLBACK, ERR_TRANSFORM_ALREADY_TRANSFORMING$1 = _require$codes$3.ERR_TRANSFORM_ALREADY_TRANSFORMING, ERR_TRANSFORM_WITH_LENGTH_0$1 = _require$codes$3.ERR_TRANSFORM_WITH_LENGTH_0, Duplex$1 = require_stream_duplex$1();
inherits_browserExports(Transform$9, Duplex$1);
function afterTransform$1(a420, u2) {
  var c = this._transformState;
  c.transforming = false;
  var l2 = c.writecb;
  if (l2 === null)
    return this.emit("error", new ERR_MULTIPLE_CALLBACK$1());
  c.writechunk = null, c.writecb = null, u2 != null && this.push(u2), l2(a420);
  var v2 = this._readableState;
  v2.reading = false, (v2.needReadable || v2.length < v2.highWaterMark) && this._read(v2.highWaterMark);
}
function Transform$9(a420) {
  if (!(this instanceof Transform$9))
    return new Transform$9(a420);
  Duplex$1.call(this, a420), this._transformState = { afterTransform: afterTransform$1.bind(this), needTransform: false, transforming: false, writecb: null, writechunk: null, writeencoding: null }, this._readableState.needReadable = true, this._readableState.sync = false, a420 && (typeof a420.transform == "function" && (this._transform = a420.transform), typeof a420.flush == "function" && (this._flush = a420.flush)), this.on("prefinish", prefinish$1);
}
function prefinish$1() {
  var a420 = this;
  typeof this._flush == "function" && !this._readableState.destroyed ? this._flush(function(u2, c) {
    done$1(a420, u2, c);
  }) : done$1(this, null, null);
}
Transform$9.prototype.push = function(a420, u2) {
  return this._transformState.needTransform = false, Duplex$1.prototype.push.call(this, a420, u2);
};
Transform$9.prototype._transform = function(a420, u2, c) {
  c(new ERR_METHOD_NOT_IMPLEMENTED$1("_transform()"));
};
Transform$9.prototype._write = function(a420, u2, c) {
  var l2 = this._transformState;
  if (l2.writecb = c, l2.writechunk = a420, l2.writeencoding = u2, !l2.transforming) {
    var v2 = this._readableState;
    (l2.needTransform || v2.needReadable || v2.length < v2.highWaterMark) && this._read(v2.highWaterMark);
  }
};
Transform$9.prototype._read = function(a420) {
  var u2 = this._transformState;
  u2.writechunk !== null && !u2.transforming ? (u2.transforming = true, this._transform(u2.writechunk, u2.writeencoding, u2.afterTransform)) : u2.needTransform = true;
};
Transform$9.prototype._destroy = function(a420, u2) {
  Duplex$1.prototype._destroy.call(this, a420, function(c) {
    u2(c);
  });
};
function done$1(a420, u2, c) {
  if (u2)
    return a420.emit("error", u2);
  if (c != null && a420.push(c), a420._writableState.length)
    throw new ERR_TRANSFORM_WITH_LENGTH_0$1();
  if (a420._transformState.transforming)
    throw new ERR_TRANSFORM_ALREADY_TRANSFORMING$1();
  return a420.push(null);
}
var _stream_passthrough$1 = PassThrough$1, Transform$8 = _stream_transform$1;
inherits_browserExports(PassThrough$1, Transform$8);
function PassThrough$1(a420) {
  if (!(this instanceof PassThrough$1))
    return new PassThrough$1(a420);
  Transform$8.call(this, a420);
}
PassThrough$1.prototype._transform = function(a420, u2, c) {
  c(null, a420);
};
var eos$2;
function once$5(a420) {
  var u2 = false;
  return function() {
    u2 || (u2 = true, a420.apply(void 0, arguments));
  };
}
var _require$codes$2 = errorsBrowser$1.codes, ERR_MISSING_ARGS$1 = _require$codes$2.ERR_MISSING_ARGS, ERR_STREAM_DESTROYED$1 = _require$codes$2.ERR_STREAM_DESTROYED;
function noop$3(a420) {
  if (a420)
    throw a420;
}
function isRequest$2(a420) {
  return a420.setHeader && typeof a420.abort == "function";
}
function destroyer$1(a420, u2, c, l2) {
  l2 = once$5(l2);
  var v2 = false;
  a420.on("close", function() {
    v2 = true;
  }), eos$2 === void 0 && (eos$2 = endOfStream$1), eos$2(a420, { readable: u2, writable: c }, function(_) {
    if (_)
      return l2(_);
    v2 = true, l2();
  });
  var p2 = false;
  return function(_) {
    if (!v2 && !p2) {
      if (p2 = true, isRequest$2(a420))
        return a420.abort();
      if (typeof a420.destroy == "function")
        return a420.destroy();
      l2(_ || new ERR_STREAM_DESTROYED$1("pipe"));
    }
  };
}
function call$1(a420) {
  a420();
}
function pipe$1(a420, u2) {
  return a420.pipe(u2);
}
function popCallback$1(a420) {
  return !a420.length || typeof a420[a420.length - 1] != "function" ? noop$3 : a420.pop();
}
function pipeline$1() {
  for (var a420 = arguments.length, u2 = new Array(a420), c = 0; c < a420; c++)
    u2[c] = arguments[c];
  var l2 = popCallback$1(u2);
  if (Array.isArray(u2[0]) && (u2 = u2[0]), u2.length < 2)
    throw new ERR_MISSING_ARGS$1("streams");
  var v2, p2 = u2.map(function(_, I2) {
    var P2 = I2 < u2.length - 1, $ = I2 > 0;
    return destroyer$1(_, P2, $, function(F2) {
      v2 || (v2 = F2), F2 && p2.forEach(call$1), !P2 && (p2.forEach(call$1), l2(v2));
    });
  });
  return u2.reduce(pipe$1);
}
var pipeline_1$1 = pipeline$1;
(function(a420, u2) {
  u2 = a420.exports = require_stream_readable$1(), u2.Stream = u2, u2.Readable = u2, u2.Writable = require_stream_writable$1(), u2.Duplex = require_stream_duplex$1(), u2.Transform = _stream_transform$1, u2.PassThrough = _stream_passthrough$1, u2.finished = endOfStream$1, u2.pipeline = pipeline_1$1;
})(readableBrowser$1, readableBrowser$1.exports);
var readableBrowserExports$1 = readableBrowser$1.exports, Buffer$H = safeBufferExports$1.Buffer, Transform$7 = readableBrowserExports$1.Transform, inherits$u = inherits_browserExports;
function throwIfNotStringOrBuffer(a420, u2) {
  if (!Buffer$H.isBuffer(a420) && typeof a420 != "string")
    throw new TypeError(u2 + " must be a string or a buffer");
}
function HashBase$2(a420) {
  Transform$7.call(this), this._block = Buffer$H.allocUnsafe(a420), this._blockSize = a420, this._blockOffset = 0, this._length = [0, 0, 0, 0], this._finalized = false;
}
inherits$u(HashBase$2, Transform$7);
HashBase$2.prototype._transform = function(a420, u2, c) {
  var l2 = null;
  try {
    this.update(a420, u2);
  } catch (v2) {
    l2 = v2;
  }
  c(l2);
};
HashBase$2.prototype._flush = function(a420) {
  var u2 = null;
  try {
    this.push(this.digest());
  } catch (c) {
    u2 = c;
  }
  a420(u2);
};
HashBase$2.prototype.update = function(a420, u2) {
  if (throwIfNotStringOrBuffer(a420, "Data"), this._finalized)
    throw new Error("Digest already called");
  Buffer$H.isBuffer(a420) || (a420 = Buffer$H.from(a420, u2));
  for (var c = this._block, l2 = 0; this._blockOffset + a420.length - l2 >= this._blockSize; ) {
    for (var v2 = this._blockOffset; v2 < this._blockSize; )
      c[v2++] = a420[l2++];
    this._update(), this._blockOffset = 0;
  }
  for (; l2 < a420.length; )
    c[this._blockOffset++] = a420[l2++];
  for (var p2 = 0, _ = a420.length * 8; _ > 0; ++p2)
    this._length[p2] += _, _ = this._length[p2] / 4294967296 | 0, _ > 0 && (this._length[p2] -= 4294967296 * _);
  return this;
};
HashBase$2.prototype._update = function() {
  throw new Error("_update is not implemented");
};
HashBase$2.prototype.digest = function(a420) {
  if (this._finalized)
    throw new Error("Digest already called");
  this._finalized = true;
  var u2 = this._digest();
  a420 !== void 0 && (u2 = u2.toString(a420)), this._block.fill(0), this._blockOffset = 0;
  for (var c = 0; c < 4; ++c)
    this._length[c] = 0;
  return u2;
};
HashBase$2.prototype._digest = function() {
  throw new Error("_digest is not implemented");
};
var hashBase = HashBase$2, inherits$t = inherits_browserExports, HashBase$1 = hashBase, Buffer$G = safeBufferExports$3.Buffer, ARRAY16$1 = new Array(16);
function MD5$3() {
  HashBase$1.call(this, 64), this._a = 1732584193, this._b = 4023233417, this._c = 2562383102, this._d = 271733878;
}
inherits$t(MD5$3, HashBase$1);
MD5$3.prototype._update = function() {
  for (var a420 = ARRAY16$1, u2 = 0; u2 < 16; ++u2)
    a420[u2] = this._block.readInt32LE(u2 * 4);
  var c = this._a, l2 = this._b, v2 = this._c, p2 = this._d;
  c = fnF(c, l2, v2, p2, a420[0], 3614090360, 7), p2 = fnF(p2, c, l2, v2, a420[1], 3905402710, 12), v2 = fnF(v2, p2, c, l2, a420[2], 606105819, 17), l2 = fnF(l2, v2, p2, c, a420[3], 3250441966, 22), c = fnF(c, l2, v2, p2, a420[4], 4118548399, 7), p2 = fnF(p2, c, l2, v2, a420[5], 1200080426, 12), v2 = fnF(v2, p2, c, l2, a420[6], 2821735955, 17), l2 = fnF(l2, v2, p2, c, a420[7], 4249261313, 22), c = fnF(c, l2, v2, p2, a420[8], 1770035416, 7), p2 = fnF(p2, c, l2, v2, a420[9], 2336552879, 12), v2 = fnF(v2, p2, c, l2, a420[10], 4294925233, 17), l2 = fnF(l2, v2, p2, c, a420[11], 2304563134, 22), c = fnF(c, l2, v2, p2, a420[12], 1804603682, 7), p2 = fnF(p2, c, l2, v2, a420[13], 4254626195, 12), v2 = fnF(v2, p2, c, l2, a420[14], 2792965006, 17), l2 = fnF(l2, v2, p2, c, a420[15], 1236535329, 22), c = fnG(c, l2, v2, p2, a420[1], 4129170786, 5), p2 = fnG(p2, c, l2, v2, a420[6], 3225465664, 9), v2 = fnG(v2, p2, c, l2, a420[11], 643717713, 14), l2 = fnG(l2, v2, p2, c, a420[0], 3921069994, 20), c = fnG(c, l2, v2, p2, a420[5], 3593408605, 5), p2 = fnG(p2, c, l2, v2, a420[10], 38016083, 9), v2 = fnG(v2, p2, c, l2, a420[15], 3634488961, 14), l2 = fnG(l2, v2, p2, c, a420[4], 3889429448, 20), c = fnG(c, l2, v2, p2, a420[9], 568446438, 5), p2 = fnG(p2, c, l2, v2, a420[14], 3275163606, 9), v2 = fnG(v2, p2, c, l2, a420[3], 4107603335, 14), l2 = fnG(l2, v2, p2, c, a420[8], 1163531501, 20), c = fnG(c, l2, v2, p2, a420[13], 2850285829, 5), p2 = fnG(p2, c, l2, v2, a420[2], 4243563512, 9), v2 = fnG(v2, p2, c, l2, a420[7], 1735328473, 14), l2 = fnG(l2, v2, p2, c, a420[12], 2368359562, 20), c = fnH(c, l2, v2, p2, a420[5], 4294588738, 4), p2 = fnH(p2, c, l2, v2, a420[8], 2272392833, 11), v2 = fnH(v2, p2, c, l2, a420[11], 1839030562, 16), l2 = fnH(l2, v2, p2, c, a420[14], 4259657740, 23), c = fnH(c, l2, v2, p2, a420[1], 2763975236, 4), p2 = fnH(p2, c, l2, v2, a420[4], 1272893353, 11), v2 = fnH(v2, p2, c, l2, a420[7], 4139469664, 16), l2 = fnH(l2, v2, p2, c, a420[10], 3200236656, 23), c = fnH(c, l2, v2, p2, a420[13], 681279174, 4), p2 = fnH(p2, c, l2, v2, a420[0], 3936430074, 11), v2 = fnH(v2, p2, c, l2, a420[3], 3572445317, 16), l2 = fnH(l2, v2, p2, c, a420[6], 76029189, 23), c = fnH(c, l2, v2, p2, a420[9], 3654602809, 4), p2 = fnH(p2, c, l2, v2, a420[12], 3873151461, 11), v2 = fnH(v2, p2, c, l2, a420[15], 530742520, 16), l2 = fnH(l2, v2, p2, c, a420[2], 3299628645, 23), c = fnI(c, l2, v2, p2, a420[0], 4096336452, 6), p2 = fnI(p2, c, l2, v2, a420[7], 1126891415, 10), v2 = fnI(v2, p2, c, l2, a420[14], 2878612391, 15), l2 = fnI(l2, v2, p2, c, a420[5], 4237533241, 21), c = fnI(c, l2, v2, p2, a420[12], 1700485571, 6), p2 = fnI(p2, c, l2, v2, a420[3], 2399980690, 10), v2 = fnI(v2, p2, c, l2, a420[10], 4293915773, 15), l2 = fnI(l2, v2, p2, c, a420[1], 2240044497, 21), c = fnI(c, l2, v2, p2, a420[8], 1873313359, 6), p2 = fnI(p2, c, l2, v2, a420[15], 4264355552, 10), v2 = fnI(v2, p2, c, l2, a420[6], 2734768916, 15), l2 = fnI(l2, v2, p2, c, a420[13], 1309151649, 21), c = fnI(c, l2, v2, p2, a420[4], 4149444226, 6), p2 = fnI(p2, c, l2, v2, a420[11], 3174756917, 10), v2 = fnI(v2, p2, c, l2, a420[2], 718787259, 15), l2 = fnI(l2, v2, p2, c, a420[9], 3951481745, 21), this._a = this._a + c | 0, this._b = this._b + l2 | 0, this._c = this._c + v2 | 0, this._d = this._d + p2 | 0;
};
MD5$3.prototype._digest = function() {
  this._block[this._blockOffset++] = 128, this._blockOffset > 56 && (this._block.fill(0, this._blockOffset, 64), this._update(), this._blockOffset = 0), this._block.fill(0, this._blockOffset, 56), this._block.writeUInt32LE(this._length[0], 56), this._block.writeUInt32LE(this._length[1], 60), this._update();
  var a420 = Buffer$G.allocUnsafe(16);
  return a420.writeInt32LE(this._a, 0), a420.writeInt32LE(this._b, 4), a420.writeInt32LE(this._c, 8), a420.writeInt32LE(this._d, 12), a420;
};
function rotl$1(a420, u2) {
  return a420 << u2 | a420 >>> 32 - u2;
}
function fnF(a420, u2, c, l2, v2, p2, _) {
  return rotl$1(a420 + (u2 & c | ~u2 & l2) + v2 + p2 | 0, _) + u2 | 0;
}
function fnG(a420, u2, c, l2, v2, p2, _) {
  return rotl$1(a420 + (u2 & l2 | c & ~l2) + v2 + p2 | 0, _) + u2 | 0;
}
function fnH(a420, u2, c, l2, v2, p2, _) {
  return rotl$1(a420 + (u2 ^ c ^ l2) + v2 + p2 | 0, _) + u2 | 0;
}
function fnI(a420, u2, c, l2, v2, p2, _) {
  return rotl$1(a420 + (c ^ (u2 | ~l2)) + v2 + p2 | 0, _) + u2 | 0;
}
var md5_js = MD5$3, Buffer$F = require$$0$2.Buffer, inherits$s = inherits_browserExports, HashBase = hashBase, ARRAY16 = new Array(16), zl = [0, 1, 2, 3, 4, 5, 6, 7, 8, 9, 10, 11, 12, 13, 14, 15, 7, 4, 13, 1, 10, 6, 15, 3, 12, 0, 9, 5, 2, 14, 11, 8, 3, 10, 14, 4, 9, 15, 8, 1, 2, 7, 0, 6, 13, 11, 5, 12, 1, 9, 11, 10, 0, 8, 12, 4, 13, 3, 7, 15, 14, 5, 6, 2, 4, 0, 5, 9, 7, 12, 2, 10, 14, 1, 3, 8, 11, 6, 15, 13], zr = [5, 14, 7, 0, 9, 2, 11, 4, 13, 6, 15, 8, 1, 10, 3, 12, 6, 11, 3, 7, 0, 13, 5, 10, 14, 15, 8, 12, 4, 9, 1, 2, 15, 5, 1, 3, 7, 14, 6, 9, 11, 8, 12, 2, 10, 0, 4, 13, 8, 6, 4, 1, 3, 11, 15, 0, 5, 12, 2, 13, 9, 7, 10, 14, 12, 15, 10, 4, 1, 5, 8, 7, 6, 2, 13, 14, 0, 3, 9, 11], sl = [11, 14, 15, 12, 5, 8, 7, 9, 11, 13, 14, 15, 6, 7, 9, 8, 7, 6, 8, 13, 11, 9, 7, 15, 7, 12, 15, 9, 11, 7, 13, 12, 11, 13, 6, 7, 14, 9, 13, 15, 14, 8, 13, 6, 5, 12, 7, 5, 11, 12, 14, 15, 14, 15, 9, 8, 9, 14, 5, 6, 8, 6, 5, 12, 9, 15, 5, 11, 6, 8, 13, 12, 5, 12, 13, 14, 11, 8, 5, 6], sr = [8, 9, 9, 11, 13, 15, 15, 5, 7, 7, 8, 11, 14, 14, 12, 6, 9, 13, 15, 7, 12, 8, 9, 11, 7, 7, 12, 7, 6, 15, 13, 11, 9, 7, 15, 11, 8, 6, 6, 14, 12, 13, 5, 14, 13, 13, 7, 5, 15, 5, 8, 11, 14, 14, 6, 14, 6, 9, 12, 9, 12, 5, 15, 8, 8, 5, 12, 9, 12, 5, 14, 6, 8, 13, 6, 5, 15, 13, 11, 11], hl = [0, 1518500249, 1859775393, 2400959708, 2840853838], hr = [1352829926, 1548603684, 1836072691, 2053994217, 0];
function RIPEMD160$4() {
  HashBase.call(this, 64), this._a = 1732584193, this._b = 4023233417, this._c = 2562383102, this._d = 271733878, this._e = 3285377520;
}
inherits$s(RIPEMD160$4, HashBase);
RIPEMD160$4.prototype._update = function() {
  for (var a420 = ARRAY16, u2 = 0; u2 < 16; ++u2)
    a420[u2] = this._block.readInt32LE(u2 * 4);
  for (var c = this._a | 0, l2 = this._b | 0, v2 = this._c | 0, p2 = this._d | 0, _ = this._e | 0, I2 = this._a | 0, P2 = this._b | 0, $ = this._c | 0, F2 = this._d | 0, H2 = this._e | 0, j = 0; j < 80; j += 1) {
    var ee2, X2;
    j < 16 ? (ee2 = fn1(c, l2, v2, p2, _, a420[zl[j]], hl[0], sl[j]), X2 = fn5(I2, P2, $, F2, H2, a420[zr[j]], hr[0], sr[j])) : j < 32 ? (ee2 = fn2(c, l2, v2, p2, _, a420[zl[j]], hl[1], sl[j]), X2 = fn4(I2, P2, $, F2, H2, a420[zr[j]], hr[1], sr[j])) : j < 48 ? (ee2 = fn3(c, l2, v2, p2, _, a420[zl[j]], hl[2], sl[j]), X2 = fn3(I2, P2, $, F2, H2, a420[zr[j]], hr[2], sr[j])) : j < 64 ? (ee2 = fn4(c, l2, v2, p2, _, a420[zl[j]], hl[3], sl[j]), X2 = fn2(I2, P2, $, F2, H2, a420[zr[j]], hr[3], sr[j])) : (ee2 = fn5(c, l2, v2, p2, _, a420[zl[j]], hl[4], sl[j]), X2 = fn1(I2, P2, $, F2, H2, a420[zr[j]], hr[4], sr[j])), c = _, _ = p2, p2 = rotl(v2, 10), v2 = l2, l2 = ee2, I2 = H2, H2 = F2, F2 = rotl($, 10), $ = P2, P2 = X2;
  }
  var ie2 = this._b + v2 + F2 | 0;
  this._b = this._c + p2 + H2 | 0, this._c = this._d + _ + I2 | 0, this._d = this._e + c + P2 | 0, this._e = this._a + l2 + $ | 0, this._a = ie2;
};
RIPEMD160$4.prototype._digest = function() {
  this._block[this._blockOffset++] = 128, this._blockOffset > 56 && (this._block.fill(0, this._blockOffset, 64), this._update(), this._blockOffset = 0), this._block.fill(0, this._blockOffset, 56), this._block.writeUInt32LE(this._length[0], 56), this._block.writeUInt32LE(this._length[1], 60), this._update();
  var a420 = Buffer$F.alloc ? Buffer$F.alloc(20) : new Buffer$F(20);
  return a420.writeInt32LE(this._a, 0), a420.writeInt32LE(this._b, 4), a420.writeInt32LE(this._c, 8), a420.writeInt32LE(this._d, 12), a420.writeInt32LE(this._e, 16), a420;
};
function rotl(a420, u2) {
  return a420 << u2 | a420 >>> 32 - u2;
}
function fn1(a420, u2, c, l2, v2, p2, _, I2) {
  return rotl(a420 + (u2 ^ c ^ l2) + p2 + _ | 0, I2) + v2 | 0;
}
function fn2(a420, u2, c, l2, v2, p2, _, I2) {
  return rotl(a420 + (u2 & c | ~u2 & l2) + p2 + _ | 0, I2) + v2 | 0;
}
function fn3(a420, u2, c, l2, v2, p2, _, I2) {
  return rotl(a420 + ((u2 | ~c) ^ l2) + p2 + _ | 0, I2) + v2 | 0;
}
function fn4(a420, u2, c, l2, v2, p2, _, I2) {
  return rotl(a420 + (u2 & l2 | c & ~l2) + p2 + _ | 0, I2) + v2 | 0;
}
function fn5(a420, u2, c, l2, v2, p2, _, I2) {
  return rotl(a420 + (u2 ^ (c | ~l2)) + p2 + _ | 0, I2) + v2 | 0;
}
var ripemd160 = RIPEMD160$4, sha_js = { exports: {} }, Buffer$E = safeBufferExports$3.Buffer;
function Hash$7(a420, u2) {
  this._block = Buffer$E.alloc(a420), this._finalSize = u2, this._blockSize = a420, this._len = 0;
}
Hash$7.prototype.update = function(a420, u2) {
  typeof a420 == "string" && (u2 = u2 || "utf8", a420 = Buffer$E.from(a420, u2));
  for (var c = this._block, l2 = this._blockSize, v2 = a420.length, p2 = this._len, _ = 0; _ < v2; ) {
    for (var I2 = p2 % l2, P2 = Math.min(v2 - _, l2 - I2), $ = 0; $ < P2; $++)
      c[I2 + $] = a420[_ + $];
    p2 += P2, _ += P2, p2 % l2 === 0 && this._update(c);
  }
  return this._len += v2, this;
};
Hash$7.prototype.digest = function(a420) {
  var u2 = this._len % this._blockSize;
  this._block[u2] = 128, this._block.fill(0, u2 + 1), u2 >= this._finalSize && (this._update(this._block), this._block.fill(0));
  var c = this._len * 8;
  if (c <= 4294967295)
    this._block.writeUInt32BE(c, this._blockSize - 4);
  else {
    var l2 = (c & 4294967295) >>> 0, v2 = (c - l2) / 4294967296;
    this._block.writeUInt32BE(v2, this._blockSize - 8), this._block.writeUInt32BE(l2, this._blockSize - 4);
  }
  this._update(this._block);
  var p2 = this._hash();
  return a420 ? p2.toString(a420) : p2;
};
Hash$7.prototype._update = function() {
  throw new Error("_update must be implemented by subclass");
};
var hash$3 = Hash$7, inherits$r = inherits_browserExports, Hash$6 = hash$3, Buffer$D = safeBufferExports$3.Buffer, K$4 = [1518500249, 1859775393, -1894007588, -899497514], W$5 = new Array(80);
function Sha() {
  this.init(), this._w = W$5, Hash$6.call(this, 64, 56);
}
inherits$r(Sha, Hash$6);
Sha.prototype.init = function() {
  return this._a = 1732584193, this._b = 4023233417, this._c = 2562383102, this._d = 271733878, this._e = 3285377520, this;
};
function rotl5$1(a420) {
  return a420 << 5 | a420 >>> 27;
}
function rotl30$1(a420) {
  return a420 << 30 | a420 >>> 2;
}
function ft$1(a420, u2, c, l2) {
  return a420 === 0 ? u2 & c | ~u2 & l2 : a420 === 2 ? u2 & c | u2 & l2 | c & l2 : u2 ^ c ^ l2;
}
Sha.prototype._update = function(a420) {
  for (var u2 = this._w, c = this._a | 0, l2 = this._b | 0, v2 = this._c | 0, p2 = this._d | 0, _ = this._e | 0, I2 = 0; I2 < 16; ++I2)
    u2[I2] = a420.readInt32BE(I2 * 4);
  for (; I2 < 80; ++I2)
    u2[I2] = u2[I2 - 3] ^ u2[I2 - 8] ^ u2[I2 - 14] ^ u2[I2 - 16];
  for (var P2 = 0; P2 < 80; ++P2) {
    var $ = ~~(P2 / 20), F2 = rotl5$1(c) + ft$1($, l2, v2, p2) + _ + u2[P2] + K$4[$] | 0;
    _ = p2, p2 = v2, v2 = rotl30$1(l2), l2 = c, c = F2;
  }
  this._a = c + this._a | 0, this._b = l2 + this._b | 0, this._c = v2 + this._c | 0, this._d = p2 + this._d | 0, this._e = _ + this._e | 0;
};
Sha.prototype._hash = function() {
  var a420 = Buffer$D.allocUnsafe(20);
  return a420.writeInt32BE(this._a | 0, 0), a420.writeInt32BE(this._b | 0, 4), a420.writeInt32BE(this._c | 0, 8), a420.writeInt32BE(this._d | 0, 12), a420.writeInt32BE(this._e | 0, 16), a420;
};
var sha$4 = Sha, inherits$q = inherits_browserExports, Hash$5 = hash$3, Buffer$C = safeBufferExports$3.Buffer, K$3 = [1518500249, 1859775393, -1894007588, -899497514], W$4 = new Array(80);
function Sha1() {
  this.init(), this._w = W$4, Hash$5.call(this, 64, 56);
}
inherits$q(Sha1, Hash$5);
Sha1.prototype.init = function() {
  return this._a = 1732584193, this._b = 4023233417, this._c = 2562383102, this._d = 271733878, this._e = 3285377520, this;
};
function rotl1(a420) {
  return a420 << 1 | a420 >>> 31;
}
function rotl5(a420) {
  return a420 << 5 | a420 >>> 27;
}
function rotl30(a420) {
  return a420 << 30 | a420 >>> 2;
}
function ft(a420, u2, c, l2) {
  return a420 === 0 ? u2 & c | ~u2 & l2 : a420 === 2 ? u2 & c | u2 & l2 | c & l2 : u2 ^ c ^ l2;
}
Sha1.prototype._update = function(a420) {
  for (var u2 = this._w, c = this._a | 0, l2 = this._b | 0, v2 = this._c | 0, p2 = this._d | 0, _ = this._e | 0, I2 = 0; I2 < 16; ++I2)
    u2[I2] = a420.readInt32BE(I2 * 4);
  for (; I2 < 80; ++I2)
    u2[I2] = rotl1(u2[I2 - 3] ^ u2[I2 - 8] ^ u2[I2 - 14] ^ u2[I2 - 16]);
  for (var P2 = 0; P2 < 80; ++P2) {
    var $ = ~~(P2 / 20), F2 = rotl5(c) + ft($, l2, v2, p2) + _ + u2[P2] + K$3[$] | 0;
    _ = p2, p2 = v2, v2 = rotl30(l2), l2 = c, c = F2;
  }
  this._a = c + this._a | 0, this._b = l2 + this._b | 0, this._c = v2 + this._c | 0, this._d = p2 + this._d | 0, this._e = _ + this._e | 0;
};
Sha1.prototype._hash = function() {
  var a420 = Buffer$C.allocUnsafe(20);
  return a420.writeInt32BE(this._a | 0, 0), a420.writeInt32BE(this._b | 0, 4), a420.writeInt32BE(this._c | 0, 8), a420.writeInt32BE(this._d | 0, 12), a420.writeInt32BE(this._e | 0, 16), a420;
};
var sha1 = Sha1, inherits$p = inherits_browserExports, Hash$4 = hash$3, Buffer$B = safeBufferExports$3.Buffer, K$2 = [1116352408, 1899447441, 3049323471, 3921009573, 961987163, 1508970993, 2453635748, 2870763221, 3624381080, 310598401, 607225278, 1426881987, 1925078388, 2162078206, 2614888103, 3248222580, 3835390401, 4022224774, 264347078, 604807628, 770255983, 1249150122, 1555081692, 1996064986, 2554220882, 2821834349, 2952996808, 3210313671, 3336571891, 3584528711, 113926993, 338241895, 666307205, 773529912, 1294757372, 1396182291, 1695183700, 1986661051, 2177026350, 2456956037, 2730485921, 2820302411, 3259730800, 3345764771, 3516065817, 3600352804, 4094571909, 275423344, 430227734, 506948616, 659060556, 883997877, 958139571, 1322822218, 1537002063, 1747873779, 1955562222, 2024104815, 2227730452, 2361852424, 2428436474, 2756734187, 3204031479, 3329325298], W$3 = new Array(64);
function Sha256$1() {
  this.init(), this._w = W$3, Hash$4.call(this, 64, 56);
}
inherits$p(Sha256$1, Hash$4);
Sha256$1.prototype.init = function() {
  return this._a = 1779033703, this._b = 3144134277, this._c = 1013904242, this._d = 2773480762, this._e = 1359893119, this._f = 2600822924, this._g = 528734635, this._h = 1541459225, this;
};
function ch(a420, u2, c) {
  return c ^ a420 & (u2 ^ c);
}
function maj$1(a420, u2, c) {
  return a420 & u2 | c & (a420 | u2);
}
function sigma0$1(a420) {
  return (a420 >>> 2 | a420 << 30) ^ (a420 >>> 13 | a420 << 19) ^ (a420 >>> 22 | a420 << 10);
}
function sigma1$1(a420) {
  return (a420 >>> 6 | a420 << 26) ^ (a420 >>> 11 | a420 << 21) ^ (a420 >>> 25 | a420 << 7);
}
function gamma0(a420) {
  return (a420 >>> 7 | a420 << 25) ^ (a420 >>> 18 | a420 << 14) ^ a420 >>> 3;
}
function gamma1(a420) {
  return (a420 >>> 17 | a420 << 15) ^ (a420 >>> 19 | a420 << 13) ^ a420 >>> 10;
}
Sha256$1.prototype._update = function(a420) {
  for (var u2 = this._w, c = this._a | 0, l2 = this._b | 0, v2 = this._c | 0, p2 = this._d | 0, _ = this._e | 0, I2 = this._f | 0, P2 = this._g | 0, $ = this._h | 0, F2 = 0; F2 < 16; ++F2)
    u2[F2] = a420.readInt32BE(F2 * 4);
  for (; F2 < 64; ++F2)
    u2[F2] = gamma1(u2[F2 - 2]) + u2[F2 - 7] + gamma0(u2[F2 - 15]) + u2[F2 - 16] | 0;
  for (var H2 = 0; H2 < 64; ++H2) {
    var j = $ + sigma1$1(_) + ch(_, I2, P2) + K$2[H2] + u2[H2] | 0, ee2 = sigma0$1(c) + maj$1(c, l2, v2) | 0;
    $ = P2, P2 = I2, I2 = _, _ = p2 + j | 0, p2 = v2, v2 = l2, l2 = c, c = j + ee2 | 0;
  }
  this._a = c + this._a | 0, this._b = l2 + this._b | 0, this._c = v2 + this._c | 0, this._d = p2 + this._d | 0, this._e = _ + this._e | 0, this._f = I2 + this._f | 0, this._g = P2 + this._g | 0, this._h = $ + this._h | 0;
};
Sha256$1.prototype._hash = function() {
  var a420 = Buffer$B.allocUnsafe(32);
  return a420.writeInt32BE(this._a, 0), a420.writeInt32BE(this._b, 4), a420.writeInt32BE(this._c, 8), a420.writeInt32BE(this._d, 12), a420.writeInt32BE(this._e, 16), a420.writeInt32BE(this._f, 20), a420.writeInt32BE(this._g, 24), a420.writeInt32BE(this._h, 28), a420;
};
var sha256$1 = Sha256$1, inherits$o = inherits_browserExports, Sha256 = sha256$1, Hash$3 = hash$3, Buffer$A = safeBufferExports$3.Buffer, W$2 = new Array(64);
function Sha224() {
  this.init(), this._w = W$2, Hash$3.call(this, 64, 56);
}
inherits$o(Sha224, Sha256);
Sha224.prototype.init = function() {
  return this._a = 3238371032, this._b = 914150663, this._c = 812702999, this._d = 4144912697, this._e = 4290775857, this._f = 1750603025, this._g = 1694076839, this._h = 3204075428, this;
};
Sha224.prototype._hash = function() {
  var a420 = Buffer$A.allocUnsafe(28);
  return a420.writeInt32BE(this._a, 0), a420.writeInt32BE(this._b, 4), a420.writeInt32BE(this._c, 8), a420.writeInt32BE(this._d, 12), a420.writeInt32BE(this._e, 16), a420.writeInt32BE(this._f, 20), a420.writeInt32BE(this._g, 24), a420;
};
var sha224$1 = Sha224, inherits$n = inherits_browserExports, Hash$2 = hash$3, Buffer$z = safeBufferExports$3.Buffer, K$1 = [1116352408, 3609767458, 1899447441, 602891725, 3049323471, 3964484399, 3921009573, 2173295548, 961987163, 4081628472, 1508970993, 3053834265, 2453635748, 2937671579, 2870763221, 3664609560, 3624381080, 2734883394, 310598401, 1164996542, 607225278, 1323610764, 1426881987, 3590304994, 1925078388, 4068182383, 2162078206, 991336113, 2614888103, 633803317, 3248222580, 3479774868, 3835390401, 2666613458, 4022224774, 944711139, 264347078, 2341262773, 604807628, 2007800933, 770255983, 1495990901, 1249150122, 1856431235, 1555081692, 3175218132, 1996064986, 2198950837, 2554220882, 3999719339, 2821834349, 766784016, 2952996808, 2566594879, 3210313671, 3203337956, 3336571891, 1034457026, 3584528711, 2466948901, 113926993, 3758326383, 338241895, 168717936, 666307205, 1188179964, 773529912, 1546045734, 1294757372, 1522805485, 1396182291, 2643833823, 1695183700, 2343527390, 1986661051, 1014477480, 2177026350, 1206759142, 2456956037, 344077627, 2730485921, 1290863460, 2820302411, 3158454273, 3259730800, 3505952657, 3345764771, 106217008, 3516065817, 3606008344, 3600352804, 1432725776, 4094571909, 1467031594, 275423344, 851169720, 430227734, 3100823752, 506948616, 1363258195, 659060556, 3750685593, 883997877, 3785050280, 958139571, 3318307427, 1322822218, 3812723403, 1537002063, 2003034995, 1747873779, 3602036899, 1955562222, 1575990012, 2024104815, 1125592928, 2227730452, 2716904306, 2361852424, 442776044, 2428436474, 593698344, 2756734187, 3733110249, 3204031479, 2999351573, 3329325298, 3815920427, 3391569614, 3928383900, 3515267271, 566280711, 3940187606, 3454069534, 4118630271, 4000239992, 116418474, 1914138554, 174292421, 2731055270, 289380356, 3203993006, 460393269, 320620315, 685471733, 587496836, 852142971, 1086792851, 1017036298, 365543100, 1126000580, 2618297676, 1288033470, 3409855158, 1501505948, 4234509866, 1607167915, 987167468, 1816402316, 1246189591], W$1 = new Array(160);
function Sha512() {
  this.init(), this._w = W$1, Hash$2.call(this, 128, 112);
}
inherits$n(Sha512, Hash$2);
Sha512.prototype.init = function() {
  return this._ah = 1779033703, this._bh = 3144134277, this._ch = 1013904242, this._dh = 2773480762, this._eh = 1359893119, this._fh = 2600822924, this._gh = 528734635, this._hh = 1541459225, this._al = 4089235720, this._bl = 2227873595, this._cl = 4271175723, this._dl = 1595750129, this._el = 2917565137, this._fl = 725511199, this._gl = 4215389547, this._hl = 327033209, this;
};
function Ch(a420, u2, c) {
  return c ^ a420 & (u2 ^ c);
}
function maj(a420, u2, c) {
  return a420 & u2 | c & (a420 | u2);
}
function sigma0(a420, u2) {
  return (a420 >>> 28 | u2 << 4) ^ (u2 >>> 2 | a420 << 30) ^ (u2 >>> 7 | a420 << 25);
}
function sigma1(a420, u2) {
  return (a420 >>> 14 | u2 << 18) ^ (a420 >>> 18 | u2 << 14) ^ (u2 >>> 9 | a420 << 23);
}
function Gamma0(a420, u2) {
  return (a420 >>> 1 | u2 << 31) ^ (a420 >>> 8 | u2 << 24) ^ a420 >>> 7;
}
function Gamma0l(a420, u2) {
  return (a420 >>> 1 | u2 << 31) ^ (a420 >>> 8 | u2 << 24) ^ (a420 >>> 7 | u2 << 25);
}
function Gamma1(a420, u2) {
  return (a420 >>> 19 | u2 << 13) ^ (u2 >>> 29 | a420 << 3) ^ a420 >>> 6;
}
function Gamma1l(a420, u2) {
  return (a420 >>> 19 | u2 << 13) ^ (u2 >>> 29 | a420 << 3) ^ (a420 >>> 6 | u2 << 26);
}
function getCarry(a420, u2) {
  return a420 >>> 0 < u2 >>> 0 ? 1 : 0;
}
Sha512.prototype._update = function(a420) {
  for (var u2 = this._w, c = this._ah | 0, l2 = this._bh | 0, v2 = this._ch | 0, p2 = this._dh | 0, _ = this._eh | 0, I2 = this._fh | 0, P2 = this._gh | 0, $ = this._hh | 0, F2 = this._al | 0, H2 = this._bl | 0, j = this._cl | 0, ee2 = this._dl | 0, X2 = this._el | 0, ie2 = this._fl | 0, Q2 = this._gl | 0, ne2 = this._hl | 0, Z2 = 0; Z2 < 32; Z2 += 2)
    u2[Z2] = a420.readInt32BE(Z2 * 4), u2[Z2 + 1] = a420.readInt32BE(Z2 * 4 + 4);
  for (; Z2 < 160; Z2 += 2) {
    var de2 = u2[Z2 - 30], pe2 = u2[Z2 - 15 * 2 + 1], le2 = Gamma0(de2, pe2), be2 = Gamma0l(pe2, de2);
    de2 = u2[Z2 - 2 * 2], pe2 = u2[Z2 - 2 * 2 + 1];
    var ke2 = Gamma1(de2, pe2), Te2 = Gamma1l(pe2, de2), q2 = u2[Z2 - 7 * 2], z2 = u2[Z2 - 7 * 2 + 1], C2 = u2[Z2 - 16 * 2], b = u2[Z2 - 16 * 2 + 1], E2 = be2 + z2 | 0, k = le2 + q2 + getCarry(E2, be2) | 0;
    E2 = E2 + Te2 | 0, k = k + ke2 + getCarry(E2, Te2) | 0, E2 = E2 + b | 0, k = k + C2 + getCarry(E2, b) | 0, u2[Z2] = k, u2[Z2 + 1] = E2;
  }
  for (var O2 = 0; O2 < 160; O2 += 2) {
    k = u2[O2], E2 = u2[O2 + 1];
    var A2 = maj(c, l2, v2), x2 = maj(F2, H2, j), Y2 = sigma0(c, F2), B2 = sigma0(F2, c), T2 = sigma1(_, X2), D2 = sigma1(X2, _), te2 = K$1[O2], me2 = K$1[O2 + 1], Ie2 = Ch(_, I2, P2), $e2 = Ch(X2, ie2, Q2), ye2 = ne2 + D2 | 0, he2 = $ + T2 + getCarry(ye2, ne2) | 0;
    ye2 = ye2 + $e2 | 0, he2 = he2 + Ie2 + getCarry(ye2, $e2) | 0, ye2 = ye2 + me2 | 0, he2 = he2 + te2 + getCarry(ye2, me2) | 0, ye2 = ye2 + E2 | 0, he2 = he2 + k + getCarry(ye2, E2) | 0;
    var Me2 = B2 + x2 | 0, Ae2 = Y2 + A2 + getCarry(Me2, B2) | 0;
    $ = P2, ne2 = Q2, P2 = I2, Q2 = ie2, I2 = _, ie2 = X2, X2 = ee2 + ye2 | 0, _ = p2 + he2 + getCarry(X2, ee2) | 0, p2 = v2, ee2 = j, v2 = l2, j = H2, l2 = c, H2 = F2, F2 = ye2 + Me2 | 0, c = he2 + Ae2 + getCarry(F2, ye2) | 0;
  }
  this._al = this._al + F2 | 0, this._bl = this._bl + H2 | 0, this._cl = this._cl + j | 0, this._dl = this._dl + ee2 | 0, this._el = this._el + X2 | 0, this._fl = this._fl + ie2 | 0, this._gl = this._gl + Q2 | 0, this._hl = this._hl + ne2 | 0, this._ah = this._ah + c + getCarry(this._al, F2) | 0, this._bh = this._bh + l2 + getCarry(this._bl, H2) | 0, this._ch = this._ch + v2 + getCarry(this._cl, j) | 0, this._dh = this._dh + p2 + getCarry(this._dl, ee2) | 0, this._eh = this._eh + _ + getCarry(this._el, X2) | 0, this._fh = this._fh + I2 + getCarry(this._fl, ie2) | 0, this._gh = this._gh + P2 + getCarry(this._gl, Q2) | 0, this._hh = this._hh + $ + getCarry(this._hl, ne2) | 0;
};
Sha512.prototype._hash = function() {
  var a420 = Buffer$z.allocUnsafe(64);
  function u2(c, l2, v2) {
    a420.writeInt32BE(c, v2), a420.writeInt32BE(l2, v2 + 4);
  }
  return u2(this._ah, this._al, 0), u2(this._bh, this._bl, 8), u2(this._ch, this._cl, 16), u2(this._dh, this._dl, 24), u2(this._eh, this._el, 32), u2(this._fh, this._fl, 40), u2(this._gh, this._gl, 48), u2(this._hh, this._hl, 56), a420;
};
var sha512$1 = Sha512, inherits$m = inherits_browserExports, SHA512$2 = sha512$1, Hash$1 = hash$3, Buffer$y = safeBufferExports$3.Buffer, W = new Array(160);
function Sha384() {
  this.init(), this._w = W, Hash$1.call(this, 128, 112);
}
inherits$m(Sha384, SHA512$2);
Sha384.prototype.init = function() {
  return this._ah = 3418070365, this._bh = 1654270250, this._ch = 2438529370, this._dh = 355462360, this._eh = 1731405415, this._fh = 2394180231, this._gh = 3675008525, this._hh = 1203062813, this._al = 3238371032, this._bl = 914150663, this._cl = 812702999, this._dl = 4144912697, this._el = 4290775857, this._fl = 1750603025, this._gl = 1694076839, this._hl = 3204075428, this;
};
Sha384.prototype._hash = function() {
  var a420 = Buffer$y.allocUnsafe(48);
  function u2(c, l2, v2) {
    a420.writeInt32BE(c, v2), a420.writeInt32BE(l2, v2 + 4);
  }
  return u2(this._ah, this._al, 0), u2(this._bh, this._bl, 8), u2(this._ch, this._cl, 16), u2(this._dh, this._dl, 24), u2(this._eh, this._el, 32), u2(this._fh, this._fl, 40), a420;
};
var sha384$1 = Sha384, exports$1 = sha_js.exports = function a93(u2) {
  u2 = u2.toLowerCase();
  var c = exports$1[u2];
  if (!c)
    throw new Error(u2 + " is not supported (we accept pull requests)");
  return new c();
};
exports$1.sha = sha$4;
exports$1.sha1 = sha1;
exports$1.sha224 = sha224$1;
exports$1.sha256 = sha256$1;
exports$1.sha384 = sha384$1;
exports$1.sha512 = sha512$1;
var sha_jsExports = sha_js.exports, Buffer$x = safeBufferExports$3.Buffer, Transform$6 = streamBrowserify.Transform, StringDecoder = string_decoder.StringDecoder, inherits$l = inherits_browserExports;
function CipherBase$1(a420) {
  Transform$6.call(this), this.hashMode = typeof a420 == "string", this.hashMode ? this[a420] = this._finalOrDigest : this.final = this._finalOrDigest, this._final && (this.__final = this._final, this._final = null), this._decoder = null, this._encoding = null;
}
inherits$l(CipherBase$1, Transform$6);
CipherBase$1.prototype.update = function(a420, u2, c) {
  typeof a420 == "string" && (a420 = Buffer$x.from(a420, u2));
  var l2 = this._update(a420);
  return this.hashMode ? this : (c && (l2 = this._toString(l2, c)), l2);
};
CipherBase$1.prototype.setAutoPadding = function() {
};
CipherBase$1.prototype.getAuthTag = function() {
  throw new Error("trying to get auth tag in unsupported state");
};
CipherBase$1.prototype.setAuthTag = function() {
  throw new Error("trying to set auth tag in unsupported state");
};
CipherBase$1.prototype.setAAD = function() {
  throw new Error("trying to set aad in unsupported state");
};
CipherBase$1.prototype._transform = function(a420, u2, c) {
  var l2;
  try {
    this.hashMode ? this._update(a420) : this.push(this._update(a420));
  } catch (v2) {
    l2 = v2;
  } finally {
    c(l2);
  }
};
CipherBase$1.prototype._flush = function(a420) {
  var u2;
  try {
    this.push(this.__final());
  } catch (c) {
    u2 = c;
  }
  a420(u2);
};
CipherBase$1.prototype._finalOrDigest = function(a420) {
  var u2 = this.__final() || Buffer$x.alloc(0);
  return a420 && (u2 = this._toString(u2, a420, true)), u2;
};
CipherBase$1.prototype._toString = function(a420, u2, c) {
  if (this._decoder || (this._decoder = new StringDecoder(u2), this._encoding = u2), this._encoding !== u2)
    throw new Error("can't switch encodings");
  var l2 = this._decoder.write(a420);
  return c && (l2 += this._decoder.end()), l2;
};
var cipherBase = CipherBase$1, inherits$k = inherits_browserExports, MD5$2 = md5_js, RIPEMD160$3 = ripemd160, sha$3 = sha_jsExports, Base$5 = cipherBase;
function Hash(a420) {
  Base$5.call(this, "digest"), this._hash = a420;
}
inherits$k(Hash, Base$5);
Hash.prototype._update = function(a420) {
  this._hash.update(a420);
};
Hash.prototype._final = function() {
  return this._hash.digest();
};
var browser$a = function a94(u2) {
  return u2 = u2.toLowerCase(), u2 === "md5" ? new MD5$2() : u2 === "rmd160" || u2 === "ripemd160" ? new RIPEMD160$3() : new Hash(sha$3(u2));
}, inherits$j = inherits_browserExports, Buffer$w = safeBufferExports$3.Buffer, Base$4 = cipherBase, ZEROS$2 = Buffer$w.alloc(128), blocksize = 64;
function Hmac$3(a420, u2) {
  Base$4.call(this, "digest"), typeof u2 == "string" && (u2 = Buffer$w.from(u2)), this._alg = a420, this._key = u2, u2.length > blocksize ? u2 = a420(u2) : u2.length < blocksize && (u2 = Buffer$w.concat([u2, ZEROS$2], blocksize));
  for (var c = this._ipad = Buffer$w.allocUnsafe(blocksize), l2 = this._opad = Buffer$w.allocUnsafe(blocksize), v2 = 0; v2 < blocksize; v2++)
    c[v2] = u2[v2] ^ 54, l2[v2] = u2[v2] ^ 92;
  this._hash = [c];
}
inherits$j(Hmac$3, Base$4);
Hmac$3.prototype._update = function(a420) {
  this._hash.push(a420);
};
Hmac$3.prototype._final = function() {
  var a420 = this._alg(Buffer$w.concat(this._hash));
  return this._alg(Buffer$w.concat([this._opad, a420]));
};
var legacy = Hmac$3, MD5$1 = md5_js, md5$2 = function(a420) {
  return new MD5$1().update(a420).digest();
}, inherits$i = inherits_browserExports, Legacy = legacy, Base$3 = cipherBase, Buffer$v = safeBufferExports$3.Buffer, md5$1 = md5$2, RIPEMD160$2 = ripemd160, sha$2 = sha_jsExports, ZEROS$1 = Buffer$v.alloc(128);
function Hmac$2(a420, u2) {
  Base$3.call(this, "digest"), typeof u2 == "string" && (u2 = Buffer$v.from(u2));
  var c = a420 === "sha512" || a420 === "sha384" ? 128 : 64;
  if (this._alg = a420, this._key = u2, u2.length > c) {
    var l2 = a420 === "rmd160" ? new RIPEMD160$2() : sha$2(a420);
    u2 = l2.update(u2).digest();
  } else
    u2.length < c && (u2 = Buffer$v.concat([u2, ZEROS$1], c));
  for (var v2 = this._ipad = Buffer$v.allocUnsafe(c), p2 = this._opad = Buffer$v.allocUnsafe(c), _ = 0; _ < c; _++)
    v2[_] = u2[_] ^ 54, p2[_] = u2[_] ^ 92;
  this._hash = a420 === "rmd160" ? new RIPEMD160$2() : sha$2(a420), this._hash.update(v2);
}
inherits$i(Hmac$2, Base$3);
Hmac$2.prototype._update = function(a420) {
  this._hash.update(a420);
};
Hmac$2.prototype._final = function() {
  var a420 = this._hash.digest(), u2 = this._alg === "rmd160" ? new RIPEMD160$2() : sha$2(this._alg);
  return u2.update(this._opad).update(a420).digest();
};
var browser$9 = function a95(u2, c) {
  return u2 = u2.toLowerCase(), u2 === "rmd160" || u2 === "ripemd160" ? new Hmac$2("rmd160", c) : u2 === "md5" ? new Legacy(md5$1, c) : new Hmac$2(u2, c);
};
const sha224WithRSAEncryption = { sign: "rsa", hash: "sha224", id: "302d300d06096086480165030402040500041c" }, sha256WithRSAEncryption = { sign: "rsa", hash: "sha256", id: "3031300d060960864801650304020105000420" }, sha384WithRSAEncryption = { sign: "rsa", hash: "sha384", id: "3041300d060960864801650304020205000430" }, sha512WithRSAEncryption = { sign: "rsa", hash: "sha512", id: "3051300d060960864801650304020305000440" }, sha256 = { sign: "ecdsa", hash: "sha256", id: "" }, sha224 = { sign: "ecdsa", hash: "sha224", id: "" }, sha384 = { sign: "ecdsa", hash: "sha384", id: "" }, sha512 = { sign: "ecdsa", hash: "sha512", id: "" }, DSA = { sign: "dsa", hash: "sha1", id: "" }, ripemd160WithRSA = { sign: "rsa", hash: "rmd160", id: "3021300906052b2403020105000414" }, md5WithRSAEncryption = { sign: "rsa", hash: "md5", id: "3020300c06082a864886f70d020505000410" }, require$$6 = { sha224WithRSAEncryption, "RSA-SHA224": { sign: "ecdsa/rsa", hash: "sha224", id: "302d300d06096086480165030402040500041c" }, sha256WithRSAEncryption, "RSA-SHA256": { sign: "ecdsa/rsa", hash: "sha256", id: "3031300d060960864801650304020105000420" }, sha384WithRSAEncryption, "RSA-SHA384": { sign: "ecdsa/rsa", hash: "sha384", id: "3041300d060960864801650304020205000430" }, sha512WithRSAEncryption, "RSA-SHA512": { sign: "ecdsa/rsa", hash: "sha512", id: "3051300d060960864801650304020305000440" }, "RSA-SHA1": { sign: "rsa", hash: "sha1", id: "3021300906052b0e03021a05000414" }, "ecdsa-with-SHA1": { sign: "ecdsa", hash: "sha1", id: "" }, sha256, sha224, sha384, sha512, "DSA-SHA": { sign: "dsa", hash: "sha1", id: "" }, "DSA-SHA1": { sign: "dsa", hash: "sha1", id: "" }, DSA, "DSA-WITH-SHA224": { sign: "dsa", hash: "sha224", id: "" }, "DSA-SHA224": { sign: "dsa", hash: "sha224", id: "" }, "DSA-WITH-SHA256": { sign: "dsa", hash: "sha256", id: "" }, "DSA-SHA256": { sign: "dsa", hash: "sha256", id: "" }, "DSA-WITH-SHA384": { sign: "dsa", hash: "sha384", id: "" }, "DSA-SHA384": { sign: "dsa", hash: "sha384", id: "" }, "DSA-WITH-SHA512": { sign: "dsa", hash: "sha512", id: "" }, "DSA-SHA512": { sign: "dsa", hash: "sha512", id: "" }, "DSA-RIPEMD160": { sign: "dsa", hash: "rmd160", id: "" }, ripemd160WithRSA, "RSA-RIPEMD160": { sign: "rsa", hash: "rmd160", id: "3021300906052b2403020105000414" }, md5WithRSAEncryption, "RSA-MD5": { sign: "rsa", hash: "md5", id: "3020300c06082a864886f70d020505000410" } };
var algos = require$$6, browser$8 = {}, MAX_ALLOC = Math.pow(2, 30) - 1, precondition = function(a420, u2) {
  if (typeof a420 != "number")
    throw new TypeError("Iterations not a number");
  if (a420 < 0)
    throw new TypeError("Bad iterations");
  if (typeof u2 != "number")
    throw new TypeError("Key length not a number");
  if (u2 < 0 || u2 > MAX_ALLOC || u2 !== u2)
    throw new TypeError("Bad key length");
}, defaultEncoding$2;
if (commonjsGlobal$1.process && commonjsGlobal$1.process.browser)
  defaultEncoding$2 = "utf-8";
else if (commonjsGlobal$1.process && commonjsGlobal$1.process.version) {
  var pVersionMajor = parseInt(process$1.version.split(".")[0].slice(1), 10);
  defaultEncoding$2 = pVersionMajor >= 6 ? "utf-8" : "binary";
} else
  defaultEncoding$2 = "utf-8";
var defaultEncoding_1 = defaultEncoding$2, Buffer$u = safeBufferExports$3.Buffer, toBuffer$2 = function(a420, u2, c) {
  if (Buffer$u.isBuffer(a420))
    return a420;
  if (typeof a420 == "string")
    return Buffer$u.from(a420, u2);
  if (ArrayBuffer.isView(a420))
    return Buffer$u.from(a420.buffer);
  throw new TypeError(c + " must be a string, a Buffer, a typed array or a DataView");
}, md5 = md5$2, RIPEMD160$1 = ripemd160, sha$1 = sha_jsExports, Buffer$t = safeBufferExports$3.Buffer, checkParameters$1 = precondition, defaultEncoding$1 = defaultEncoding_1, toBuffer$1 = toBuffer$2, ZEROS = Buffer$t.alloc(128), sizes = { md5: 16, sha1: 20, sha224: 28, sha256: 32, sha384: 48, sha512: 64, rmd160: 20, ripemd160: 20 };
function Hmac$1(a420, u2, c) {
  var l2 = getDigest(a420), v2 = a420 === "sha512" || a420 === "sha384" ? 128 : 64;
  u2.length > v2 ? u2 = l2(u2) : u2.length < v2 && (u2 = Buffer$t.concat([u2, ZEROS], v2));
  for (var p2 = Buffer$t.allocUnsafe(v2 + sizes[a420]), _ = Buffer$t.allocUnsafe(v2 + sizes[a420]), I2 = 0; I2 < v2; I2++)
    p2[I2] = u2[I2] ^ 54, _[I2] = u2[I2] ^ 92;
  var P2 = Buffer$t.allocUnsafe(v2 + c + 4);
  p2.copy(P2, 0, 0, v2), this.ipad1 = P2, this.ipad2 = p2, this.opad = _, this.alg = a420, this.blocksize = v2, this.hash = l2, this.size = sizes[a420];
}
Hmac$1.prototype.run = function(a420, u2) {
  a420.copy(u2, this.blocksize);
  var c = this.hash(u2);
  return c.copy(this.opad, this.blocksize), this.hash(this.opad);
};
function getDigest(a420) {
  function u2(l2) {
    return sha$1(a420).update(l2).digest();
  }
  function c(l2) {
    return new RIPEMD160$1().update(l2).digest();
  }
  return a420 === "rmd160" || a420 === "ripemd160" ? c : a420 === "md5" ? md5 : u2;
}
function pbkdf2(a420, u2, c, l2, v2) {
  checkParameters$1(c, l2), a420 = toBuffer$1(a420, defaultEncoding$1, "Password"), u2 = toBuffer$1(u2, defaultEncoding$1, "Salt"), v2 = v2 || "sha1";
  var p2 = new Hmac$1(v2, a420, u2.length), _ = Buffer$t.allocUnsafe(l2), I2 = Buffer$t.allocUnsafe(u2.length + 4);
  u2.copy(I2, 0, 0, u2.length);
  for (var P2 = 0, $ = sizes[v2], F2 = Math.ceil(l2 / $), H2 = 1; H2 <= F2; H2++) {
    I2.writeUInt32BE(H2, u2.length);
    for (var j = p2.run(I2, p2.ipad1), ee2 = j, X2 = 1; X2 < c; X2++) {
      ee2 = p2.run(ee2, p2.ipad2);
      for (var ie2 = 0; ie2 < $; ie2++)
        j[ie2] ^= ee2[ie2];
    }
    j.copy(_, P2), P2 += $;
  }
  return _;
}
var syncBrowser = pbkdf2, Buffer$s = safeBufferExports$3.Buffer, checkParameters = precondition, defaultEncoding = defaultEncoding_1, sync = syncBrowser, toBuffer = toBuffer$2, ZERO_BUF, subtle = commonjsGlobal$1.crypto && commonjsGlobal$1.crypto.subtle, toBrowser = { sha: "SHA-1", "sha-1": "SHA-1", sha1: "SHA-1", sha256: "SHA-256", "sha-256": "SHA-256", sha384: "SHA-384", "sha-384": "SHA-384", "sha-512": "SHA-512", sha512: "SHA-512" }, checks = [];
function checkNative(a420) {
  if (commonjsGlobal$1.process && !commonjsGlobal$1.process.browser || !subtle || !subtle.importKey || !subtle.deriveBits)
    return Promise.resolve(false);
  if (checks[a420] !== void 0)
    return checks[a420];
  ZERO_BUF = ZERO_BUF || Buffer$s.alloc(8);
  var u2 = browserPbkdf2(ZERO_BUF, ZERO_BUF, 10, 128, a420).then(function() {
    return true;
  }).catch(function() {
    return false;
  });
  return checks[a420] = u2, u2;
}
var nextTick$1;
function getNextTick() {
  return nextTick$1 || (commonjsGlobal$1.process && commonjsGlobal$1.process.nextTick ? nextTick$1 = commonjsGlobal$1.process.nextTick : commonjsGlobal$1.queueMicrotask ? nextTick$1 = commonjsGlobal$1.queueMicrotask : commonjsGlobal$1.setImmediate ? nextTick$1 = commonjsGlobal$1.setImmediate : nextTick$1 = commonjsGlobal$1.setTimeout, nextTick$1);
}
function browserPbkdf2(a420, u2, c, l2, v2) {
  return subtle.importKey("raw", a420, { name: "PBKDF2" }, false, ["deriveBits"]).then(function(p2) {
    return subtle.deriveBits({ name: "PBKDF2", salt: u2, iterations: c, hash: { name: v2 } }, p2, l2 << 3);
  }).then(function(p2) {
    return Buffer$s.from(p2);
  });
}
function resolvePromise(a420, u2) {
  a420.then(function(c) {
    getNextTick()(function() {
      u2(null, c);
    });
  }, function(c) {
    getNextTick()(function() {
      u2(c);
    });
  });
}
var async = function(a420, u2, c, l2, v2, p2) {
  typeof v2 == "function" && (p2 = v2, v2 = void 0), v2 = v2 || "sha1";
  var _ = toBrowser[v2.toLowerCase()];
  if (!_ || typeof commonjsGlobal$1.Promise != "function") {
    getNextTick()(function() {
      var I2;
      try {
        I2 = sync(a420, u2, c, l2, v2);
      } catch (P2) {
        return p2(P2);
      }
      p2(null, I2);
    });
    return;
  }
  if (checkParameters(c, l2), a420 = toBuffer(a420, defaultEncoding, "Password"), u2 = toBuffer(u2, defaultEncoding, "Salt"), typeof p2 != "function")
    throw new Error("No callback provided to pbkdf2");
  resolvePromise(checkNative(_).then(function(I2) {
    return I2 ? browserPbkdf2(a420, u2, c, l2, _) : sync(a420, u2, c, l2, v2);
  }), p2);
};
browser$8.pbkdf2 = async;
browser$8.pbkdf2Sync = syncBrowser;
var browser$7 = {}, des$2 = {}, utils$x = {};
utils$x.readUInt32BE = function a96(u2, c) {
  var l2 = u2[0 + c] << 24 | u2[1 + c] << 16 | u2[2 + c] << 8 | u2[3 + c];
  return l2 >>> 0;
};
utils$x.writeUInt32BE = function a97(u2, c, l2) {
  u2[0 + l2] = c >>> 24, u2[1 + l2] = c >>> 16 & 255, u2[2 + l2] = c >>> 8 & 255, u2[3 + l2] = c & 255;
};
utils$x.ip = function a98(u2, c, l2, v2) {
  for (var p2 = 0, _ = 0, I2 = 6; I2 >= 0; I2 -= 2) {
    for (var P2 = 0; P2 <= 24; P2 += 8)
      p2 <<= 1, p2 |= c >>> P2 + I2 & 1;
    for (var P2 = 0; P2 <= 24; P2 += 8)
      p2 <<= 1, p2 |= u2 >>> P2 + I2 & 1;
  }
  for (var I2 = 6; I2 >= 0; I2 -= 2) {
    for (var P2 = 1; P2 <= 25; P2 += 8)
      _ <<= 1, _ |= c >>> P2 + I2 & 1;
    for (var P2 = 1; P2 <= 25; P2 += 8)
      _ <<= 1, _ |= u2 >>> P2 + I2 & 1;
  }
  l2[v2 + 0] = p2 >>> 0, l2[v2 + 1] = _ >>> 0;
};
utils$x.rip = function a99(u2, c, l2, v2) {
  for (var p2 = 0, _ = 0, I2 = 0; I2 < 4; I2++)
    for (var P2 = 24; P2 >= 0; P2 -= 8)
      p2 <<= 1, p2 |= c >>> P2 + I2 & 1, p2 <<= 1, p2 |= u2 >>> P2 + I2 & 1;
  for (var I2 = 4; I2 < 8; I2++)
    for (var P2 = 24; P2 >= 0; P2 -= 8)
      _ <<= 1, _ |= c >>> P2 + I2 & 1, _ <<= 1, _ |= u2 >>> P2 + I2 & 1;
  l2[v2 + 0] = p2 >>> 0, l2[v2 + 1] = _ >>> 0;
};
utils$x.pc1 = function a100(u2, c, l2, v2) {
  for (var p2 = 0, _ = 0, I2 = 7; I2 >= 5; I2--) {
    for (var P2 = 0; P2 <= 24; P2 += 8)
      p2 <<= 1, p2 |= c >> P2 + I2 & 1;
    for (var P2 = 0; P2 <= 24; P2 += 8)
      p2 <<= 1, p2 |= u2 >> P2 + I2 & 1;
  }
  for (var P2 = 0; P2 <= 24; P2 += 8)
    p2 <<= 1, p2 |= c >> P2 + I2 & 1;
  for (var I2 = 1; I2 <= 3; I2++) {
    for (var P2 = 0; P2 <= 24; P2 += 8)
      _ <<= 1, _ |= c >> P2 + I2 & 1;
    for (var P2 = 0; P2 <= 24; P2 += 8)
      _ <<= 1, _ |= u2 >> P2 + I2 & 1;
  }
  for (var P2 = 0; P2 <= 24; P2 += 8)
    _ <<= 1, _ |= u2 >> P2 + I2 & 1;
  l2[v2 + 0] = p2 >>> 0, l2[v2 + 1] = _ >>> 0;
};
utils$x.r28shl = function a101(u2, c) {
  return u2 << c & 268435455 | u2 >>> 28 - c;
};
var pc2table = [
  // inL => outL
  14,
  11,
  17,
  4,
  27,
  23,
  25,
  0,
  13,
  22,
  7,
  18,
  5,
  9,
  16,
  24,
  2,
  20,
  12,
  21,
  1,
  8,
  15,
  26,
  // inR => outR
  15,
  4,
  25,
  19,
  9,
  1,
  26,
  16,
  5,
  11,
  23,
  8,
  12,
  7,
  17,
  0,
  22,
  3,
  10,
  14,
  6,
  20,
  27,
  24
];
utils$x.pc2 = function a102(u2, c, l2, v2) {
  for (var p2 = 0, _ = 0, I2 = pc2table.length >>> 1, P2 = 0; P2 < I2; P2++)
    p2 <<= 1, p2 |= u2 >>> pc2table[P2] & 1;
  for (var P2 = I2; P2 < pc2table.length; P2++)
    _ <<= 1, _ |= c >>> pc2table[P2] & 1;
  l2[v2 + 0] = p2 >>> 0, l2[v2 + 1] = _ >>> 0;
};
utils$x.expand = function a103(u2, c, l2) {
  var v2 = 0, p2 = 0;
  v2 = (u2 & 1) << 5 | u2 >>> 27;
  for (var _ = 23; _ >= 15; _ -= 4)
    v2 <<= 6, v2 |= u2 >>> _ & 63;
  for (var _ = 11; _ >= 3; _ -= 4)
    p2 |= u2 >>> _ & 63, p2 <<= 6;
  p2 |= (u2 & 31) << 1 | u2 >>> 31, c[l2 + 0] = v2 >>> 0, c[l2 + 1] = p2 >>> 0;
};
var sTable = [14, 0, 4, 15, 13, 7, 1, 4, 2, 14, 15, 2, 11, 13, 8, 1, 3, 10, 10, 6, 6, 12, 12, 11, 5, 9, 9, 5, 0, 3, 7, 8, 4, 15, 1, 12, 14, 8, 8, 2, 13, 4, 6, 9, 2, 1, 11, 7, 15, 5, 12, 11, 9, 3, 7, 14, 3, 10, 10, 0, 5, 6, 0, 13, 15, 3, 1, 13, 8, 4, 14, 7, 6, 15, 11, 2, 3, 8, 4, 14, 9, 12, 7, 0, 2, 1, 13, 10, 12, 6, 0, 9, 5, 11, 10, 5, 0, 13, 14, 8, 7, 10, 11, 1, 10, 3, 4, 15, 13, 4, 1, 2, 5, 11, 8, 6, 12, 7, 6, 12, 9, 0, 3, 5, 2, 14, 15, 9, 10, 13, 0, 7, 9, 0, 14, 9, 6, 3, 3, 4, 15, 6, 5, 10, 1, 2, 13, 8, 12, 5, 7, 14, 11, 12, 4, 11, 2, 15, 8, 1, 13, 1, 6, 10, 4, 13, 9, 0, 8, 6, 15, 9, 3, 8, 0, 7, 11, 4, 1, 15, 2, 14, 12, 3, 5, 11, 10, 5, 14, 2, 7, 12, 7, 13, 13, 8, 14, 11, 3, 5, 0, 6, 6, 15, 9, 0, 10, 3, 1, 4, 2, 7, 8, 2, 5, 12, 11, 1, 12, 10, 4, 14, 15, 9, 10, 3, 6, 15, 9, 0, 0, 6, 12, 10, 11, 1, 7, 13, 13, 8, 15, 9, 1, 4, 3, 5, 14, 11, 5, 12, 2, 7, 8, 2, 4, 14, 2, 14, 12, 11, 4, 2, 1, 12, 7, 4, 10, 7, 11, 13, 6, 1, 8, 5, 5, 0, 3, 15, 15, 10, 13, 3, 0, 9, 14, 8, 9, 6, 4, 11, 2, 8, 1, 12, 11, 7, 10, 1, 13, 14, 7, 2, 8, 13, 15, 6, 9, 15, 12, 0, 5, 9, 6, 10, 3, 4, 0, 5, 14, 3, 12, 10, 1, 15, 10, 4, 15, 2, 9, 7, 2, 12, 6, 9, 8, 5, 0, 6, 13, 1, 3, 13, 4, 14, 14, 0, 7, 11, 5, 3, 11, 8, 9, 4, 14, 3, 15, 2, 5, 12, 2, 9, 8, 5, 12, 15, 3, 10, 7, 11, 0, 14, 4, 1, 10, 7, 1, 6, 13, 0, 11, 8, 6, 13, 4, 13, 11, 0, 2, 11, 14, 7, 15, 4, 0, 9, 8, 1, 13, 10, 3, 14, 12, 3, 9, 5, 7, 12, 5, 2, 10, 15, 6, 8, 1, 6, 1, 6, 4, 11, 11, 13, 13, 8, 12, 1, 3, 4, 7, 10, 14, 7, 10, 9, 15, 5, 6, 0, 8, 15, 0, 14, 5, 2, 9, 3, 2, 12, 13, 1, 2, 15, 8, 13, 4, 8, 6, 10, 15, 3, 11, 7, 1, 4, 10, 12, 9, 5, 3, 6, 14, 11, 5, 0, 0, 14, 12, 9, 7, 2, 7, 2, 11, 1, 4, 14, 1, 7, 9, 4, 12, 10, 14, 8, 2, 13, 0, 15, 6, 12, 10, 9, 13, 0, 15, 3, 3, 5, 5, 6, 8, 11];
utils$x.substitute = function a104(u2, c) {
  for (var l2 = 0, v2 = 0; v2 < 4; v2++) {
    var p2 = u2 >>> 18 - v2 * 6 & 63, _ = sTable[v2 * 64 + p2];
    l2 <<= 4, l2 |= _;
  }
  for (var v2 = 0; v2 < 4; v2++) {
    var p2 = c >>> 18 - v2 * 6 & 63, _ = sTable[4 * 64 + v2 * 64 + p2];
    l2 <<= 4, l2 |= _;
  }
  return l2 >>> 0;
};
var permuteTable = [16, 25, 12, 11, 3, 20, 4, 15, 31, 17, 9, 6, 27, 14, 1, 22, 30, 24, 8, 18, 0, 5, 29, 23, 13, 19, 2, 26, 10, 21, 28, 7];
utils$x.permute = function a105(u2) {
  for (var c = 0, l2 = 0; l2 < permuteTable.length; l2++)
    c <<= 1, c |= u2 >>> permuteTable[l2] & 1;
  return c >>> 0;
};
utils$x.padSplit = function a106(u2, c, l2) {
  for (var v2 = u2.toString(2); v2.length < c; )
    v2 = "0" + v2;
  for (var p2 = [], _ = 0; _ < c; _ += l2)
    p2.push(v2.slice(_, _ + l2));
  return p2.join(" ");
};
var minimalisticAssert = assert$k;
function assert$k(a420, u2) {
  if (!a420)
    throw new Error(u2 || "Assertion failed");
}
assert$k.equal = function a107(u2, c, l2) {
  if (u2 != c)
    throw new Error(l2 || "Assertion failed: " + u2 + " != " + c);
};
var assert$j = minimalisticAssert;
function Cipher$3(a420) {
  this.options = a420, this.type = this.options.type, this.blockSize = 8, this._init(), this.buffer = new Array(this.blockSize), this.bufferOff = 0, this.padding = a420.padding !== false;
}
var cipher = Cipher$3;
Cipher$3.prototype._init = function a108() {
};
Cipher$3.prototype.update = function a109(u2) {
  return u2.length === 0 ? [] : this.type === "decrypt" ? this._updateDecrypt(u2) : this._updateEncrypt(u2);
};
Cipher$3.prototype._buffer = function a110(u2, c) {
  for (var l2 = Math.min(this.buffer.length - this.bufferOff, u2.length - c), v2 = 0; v2 < l2; v2++)
    this.buffer[this.bufferOff + v2] = u2[c + v2];
  return this.bufferOff += l2, l2;
};
Cipher$3.prototype._flushBuffer = function a111(u2, c) {
  return this._update(this.buffer, 0, u2, c), this.bufferOff = 0, this.blockSize;
};
Cipher$3.prototype._updateEncrypt = function a112(u2) {
  var c = 0, l2 = 0, v2 = (this.bufferOff + u2.length) / this.blockSize | 0, p2 = new Array(v2 * this.blockSize);
  this.bufferOff !== 0 && (c += this._buffer(u2, c), this.bufferOff === this.buffer.length && (l2 += this._flushBuffer(p2, l2)));
  for (var _ = u2.length - (u2.length - c) % this.blockSize; c < _; c += this.blockSize)
    this._update(u2, c, p2, l2), l2 += this.blockSize;
  for (; c < u2.length; c++, this.bufferOff++)
    this.buffer[this.bufferOff] = u2[c];
  return p2;
};
Cipher$3.prototype._updateDecrypt = function a113(u2) {
  for (var c = 0, l2 = 0, v2 = Math.ceil((this.bufferOff + u2.length) / this.blockSize) - 1, p2 = new Array(v2 * this.blockSize); v2 > 0; v2--)
    c += this._buffer(u2, c), l2 += this._flushBuffer(p2, l2);
  return c += this._buffer(u2, c), p2;
};
Cipher$3.prototype.final = function a114(u2) {
  var c;
  u2 && (c = this.update(u2));
  var l2;
  return this.type === "encrypt" ? l2 = this._finalEncrypt() : l2 = this._finalDecrypt(), c ? c.concat(l2) : l2;
};
Cipher$3.prototype._pad = function a115(u2, c) {
  if (c === 0)
    return false;
  for (; c < u2.length; )
    u2[c++] = 0;
  return true;
};
Cipher$3.prototype._finalEncrypt = function a116() {
  if (!this._pad(this.buffer, this.bufferOff))
    return [];
  var u2 = new Array(this.blockSize);
  return this._update(this.buffer, 0, u2, 0), u2;
};
Cipher$3.prototype._unpad = function a117(u2) {
  return u2;
};
Cipher$3.prototype._finalDecrypt = function a118() {
  assert$j.equal(this.bufferOff, this.blockSize, "Not enough data to decrypt");
  var u2 = new Array(this.blockSize);
  return this._flushBuffer(u2, 0), this._unpad(u2);
};
var assert$i = minimalisticAssert, inherits$h = inherits_browserExports, utils$w = utils$x, Cipher$2 = cipher;
function DESState() {
  this.tmp = new Array(2), this.keys = null;
}
function DES$3(a420) {
  Cipher$2.call(this, a420);
  var u2 = new DESState();
  this._desState = u2, this.deriveKeys(u2, a420.key);
}
inherits$h(DES$3, Cipher$2);
var des$1 = DES$3;
DES$3.create = function a119(u2) {
  return new DES$3(u2);
};
var shiftTable = [1, 1, 2, 2, 2, 2, 2, 2, 1, 2, 2, 2, 2, 2, 2, 1];
DES$3.prototype.deriveKeys = function a120(u2, c) {
  u2.keys = new Array(16 * 2), assert$i.equal(c.length, this.blockSize, "Invalid key length");
  var l2 = utils$w.readUInt32BE(c, 0), v2 = utils$w.readUInt32BE(c, 4);
  utils$w.pc1(l2, v2, u2.tmp, 0), l2 = u2.tmp[0], v2 = u2.tmp[1];
  for (var p2 = 0; p2 < u2.keys.length; p2 += 2) {
    var _ = shiftTable[p2 >>> 1];
    l2 = utils$w.r28shl(l2, _), v2 = utils$w.r28shl(v2, _), utils$w.pc2(l2, v2, u2.keys, p2);
  }
};
DES$3.prototype._update = function a121(u2, c, l2, v2) {
  var p2 = this._desState, _ = utils$w.readUInt32BE(u2, c), I2 = utils$w.readUInt32BE(u2, c + 4);
  utils$w.ip(_, I2, p2.tmp, 0), _ = p2.tmp[0], I2 = p2.tmp[1], this.type === "encrypt" ? this._encrypt(p2, _, I2, p2.tmp, 0) : this._decrypt(p2, _, I2, p2.tmp, 0), _ = p2.tmp[0], I2 = p2.tmp[1], utils$w.writeUInt32BE(l2, _, v2), utils$w.writeUInt32BE(l2, I2, v2 + 4);
};
DES$3.prototype._pad = function a122(u2, c) {
  if (this.padding === false)
    return false;
  for (var l2 = u2.length - c, v2 = c; v2 < u2.length; v2++)
    u2[v2] = l2;
  return true;
};
DES$3.prototype._unpad = function a123(u2) {
  if (this.padding === false)
    return u2;
  for (var c = u2[u2.length - 1], l2 = u2.length - c; l2 < u2.length; l2++)
    assert$i.equal(u2[l2], c);
  return u2.slice(0, u2.length - c);
};
DES$3.prototype._encrypt = function a124(u2, c, l2, v2, p2) {
  for (var _ = c, I2 = l2, P2 = 0; P2 < u2.keys.length; P2 += 2) {
    var $ = u2.keys[P2], F2 = u2.keys[P2 + 1];
    utils$w.expand(I2, u2.tmp, 0), $ ^= u2.tmp[0], F2 ^= u2.tmp[1];
    var H2 = utils$w.substitute($, F2), j = utils$w.permute(H2), ee2 = I2;
    I2 = (_ ^ j) >>> 0, _ = ee2;
  }
  utils$w.rip(I2, _, v2, p2);
};
DES$3.prototype._decrypt = function a125(u2, c, l2, v2, p2) {
  for (var _ = l2, I2 = c, P2 = u2.keys.length - 2; P2 >= 0; P2 -= 2) {
    var $ = u2.keys[P2], F2 = u2.keys[P2 + 1];
    utils$w.expand(_, u2.tmp, 0), $ ^= u2.tmp[0], F2 ^= u2.tmp[1];
    var H2 = utils$w.substitute($, F2), j = utils$w.permute(H2), ee2 = _;
    _ = (I2 ^ j) >>> 0, I2 = ee2;
  }
  utils$w.rip(_, I2, v2, p2);
};
var cbc$1 = {}, assert$h = minimalisticAssert, inherits$g = inherits_browserExports, proto = {};
function CBCState(a420) {
  assert$h.equal(a420.length, 8, "Invalid IV length"), this.iv = new Array(8);
  for (var u2 = 0; u2 < this.iv.length; u2++)
    this.iv[u2] = a420[u2];
}
function instantiate(a420) {
  function u2(p2) {
    a420.call(this, p2), this._cbcInit();
  }
  inherits$g(u2, a420);
  for (var c = Object.keys(proto), l2 = 0; l2 < c.length; l2++) {
    var v2 = c[l2];
    u2.prototype[v2] = proto[v2];
  }
  return u2.create = function(_) {
    return new u2(_);
  }, u2;
}
cbc$1.instantiate = instantiate;
proto._cbcInit = function a126() {
  var u2 = new CBCState(this.options.iv);
  this._cbcState = u2;
};
proto._update = function a127(u2, c, l2, v2) {
  var p2 = this._cbcState, _ = this.constructor.super_.prototype, I2 = p2.iv;
  if (this.type === "encrypt") {
    for (var P2 = 0; P2 < this.blockSize; P2++)
      I2[P2] ^= u2[c + P2];
    _._update.call(this, I2, 0, l2, v2);
    for (var P2 = 0; P2 < this.blockSize; P2++)
      I2[P2] = l2[v2 + P2];
  } else {
    _._update.call(this, u2, c, l2, v2);
    for (var P2 = 0; P2 < this.blockSize; P2++)
      l2[v2 + P2] ^= I2[P2];
    for (var P2 = 0; P2 < this.blockSize; P2++)
      I2[P2] = u2[c + P2];
  }
};
var assert$g = minimalisticAssert, inherits$f = inherits_browserExports, Cipher$1 = cipher, DES$2 = des$1;
function EDEState(a420, u2) {
  assert$g.equal(u2.length, 24, "Invalid key length");
  var c = u2.slice(0, 8), l2 = u2.slice(8, 16), v2 = u2.slice(16, 24);
  a420 === "encrypt" ? this.ciphers = [DES$2.create({ type: "encrypt", key: c }), DES$2.create({ type: "decrypt", key: l2 }), DES$2.create({ type: "encrypt", key: v2 })] : this.ciphers = [DES$2.create({ type: "decrypt", key: v2 }), DES$2.create({ type: "encrypt", key: l2 }), DES$2.create({ type: "decrypt", key: c })];
}
function EDE(a420) {
  Cipher$1.call(this, a420);
  var u2 = new EDEState(this.type, this.options.key);
  this._edeState = u2;
}
inherits$f(EDE, Cipher$1);
var ede = EDE;
EDE.create = function a128(u2) {
  return new EDE(u2);
};
EDE.prototype._update = function a129(u2, c, l2, v2) {
  var p2 = this._edeState;
  p2.ciphers[0]._update(u2, c, l2, v2), p2.ciphers[1]._update(l2, v2, l2, v2), p2.ciphers[2]._update(l2, v2, l2, v2);
};
EDE.prototype._pad = DES$2.prototype._pad;
EDE.prototype._unpad = DES$2.prototype._unpad;
des$2.utils = utils$x;
des$2.Cipher = cipher;
des$2.DES = des$1;
des$2.CBC = cbc$1;
des$2.EDE = ede;
var CipherBase = cipherBase, des = des$2, inherits$e = inherits_browserExports, Buffer$r = safeBufferExports$3.Buffer, modes$4 = { "des-ede3-cbc": des.CBC.instantiate(des.EDE), "des-ede3": des.EDE, "des-ede-cbc": des.CBC.instantiate(des.EDE), "des-ede": des.EDE, "des-cbc": des.CBC.instantiate(des.DES), "des-ecb": des.DES };
modes$4.des = modes$4["des-cbc"];
modes$4.des3 = modes$4["des-ede3-cbc"];
var browserifyDes = DES$1;
inherits$e(DES$1, CipherBase);
function DES$1(a420) {
  CipherBase.call(this);
  var u2 = a420.mode.toLowerCase(), c = modes$4[u2], l2;
  a420.decrypt ? l2 = "decrypt" : l2 = "encrypt";
  var v2 = a420.key;
  Buffer$r.isBuffer(v2) || (v2 = Buffer$r.from(v2)), (u2 === "des-ede" || u2 === "des-ede-cbc") && (v2 = Buffer$r.concat([v2, v2.slice(0, 8)]));
  var p2 = a420.iv;
  Buffer$r.isBuffer(p2) || (p2 = Buffer$r.from(p2)), this._des = c.create({ key: v2, iv: p2, type: l2 });
}
DES$1.prototype._update = function(a420) {
  return Buffer$r.from(this._des.update(a420));
};
DES$1.prototype._final = function() {
  return Buffer$r.from(this._des.final());
};
var browser$6 = {}, encrypter = {}, ecb = {};
ecb.encrypt = function(a420, u2) {
  return a420._cipher.encryptBlock(u2);
};
ecb.decrypt = function(a420, u2) {
  return a420._cipher.decryptBlock(u2);
};
var cbc = {}, bufferXor = function a130(u2, c) {
  for (var l2 = Math.min(u2.length, c.length), v2 = new Buffer$M(l2), p2 = 0; p2 < l2; ++p2)
    v2[p2] = u2[p2] ^ c[p2];
  return v2;
}, xor$7 = bufferXor;
cbc.encrypt = function(a420, u2) {
  var c = xor$7(u2, a420._prev);
  return a420._prev = a420._cipher.encryptBlock(c), a420._prev;
};
cbc.decrypt = function(a420, u2) {
  var c = a420._prev;
  a420._prev = u2;
  var l2 = a420._cipher.decryptBlock(u2);
  return xor$7(l2, c);
};
var cfb = {}, Buffer$q = safeBufferExports$3.Buffer, xor$6 = bufferXor;
function encryptStart(a420, u2, c) {
  var l2 = u2.length, v2 = xor$6(u2, a420._cache);
  return a420._cache = a420._cache.slice(l2), a420._prev = Buffer$q.concat([a420._prev, c ? u2 : v2]), v2;
}
cfb.encrypt = function(a420, u2, c) {
  for (var l2 = Buffer$q.allocUnsafe(0), v2; u2.length; )
    if (a420._cache.length === 0 && (a420._cache = a420._cipher.encryptBlock(a420._prev), a420._prev = Buffer$q.allocUnsafe(0)), a420._cache.length <= u2.length)
      v2 = a420._cache.length, l2 = Buffer$q.concat([l2, encryptStart(a420, u2.slice(0, v2), c)]), u2 = u2.slice(v2);
    else {
      l2 = Buffer$q.concat([l2, encryptStart(a420, u2, c)]);
      break;
    }
  return l2;
};
var cfb8 = {}, Buffer$p = safeBufferExports$3.Buffer;
function encryptByte$1(a420, u2, c) {
  var l2 = a420._cipher.encryptBlock(a420._prev), v2 = l2[0] ^ u2;
  return a420._prev = Buffer$p.concat([a420._prev.slice(1), Buffer$p.from([c ? u2 : v2])]), v2;
}
cfb8.encrypt = function(a420, u2, c) {
  for (var l2 = u2.length, v2 = Buffer$p.allocUnsafe(l2), p2 = -1; ++p2 < l2; )
    v2[p2] = encryptByte$1(a420, u2[p2], c);
  return v2;
};
var cfb1 = {}, Buffer$o = safeBufferExports$3.Buffer;
function encryptByte(a420, u2, c) {
  for (var l2, v2 = -1, p2 = 8, _ = 0, I2, P2; ++v2 < p2; )
    l2 = a420._cipher.encryptBlock(a420._prev), I2 = u2 & 1 << 7 - v2 ? 128 : 0, P2 = l2[0] ^ I2, _ += (P2 & 128) >> v2 % 8, a420._prev = shiftIn(a420._prev, c ? I2 : P2);
  return _;
}
function shiftIn(a420, u2) {
  var c = a420.length, l2 = -1, v2 = Buffer$o.allocUnsafe(a420.length);
  for (a420 = Buffer$o.concat([a420, Buffer$o.from([u2])]); ++l2 < c; )
    v2[l2] = a420[l2] << 1 | a420[l2 + 1] >> 7;
  return v2;
}
cfb1.encrypt = function(a420, u2, c) {
  for (var l2 = u2.length, v2 = Buffer$o.allocUnsafe(l2), p2 = -1; ++p2 < l2; )
    v2[p2] = encryptByte(a420, u2[p2], c);
  return v2;
};
var ofb = {}, xor$5 = bufferXor;
function getBlock$1(a420) {
  return a420._prev = a420._cipher.encryptBlock(a420._prev), a420._prev;
}
ofb.encrypt = function(a420, u2) {
  for (; a420._cache.length < u2.length; )
    a420._cache = Buffer$M.concat([a420._cache, getBlock$1(a420)]);
  var c = a420._cache.slice(0, u2.length);
  return a420._cache = a420._cache.slice(u2.length), xor$5(u2, c);
};
var ctr = {};
function incr32$2(a420) {
  for (var u2 = a420.length, c; u2--; )
    if (c = a420.readUInt8(u2), c === 255)
      a420.writeUInt8(0, u2);
    else {
      c++, a420.writeUInt8(c, u2);
      break;
    }
}
var incr32_1 = incr32$2, xor$4 = bufferXor, Buffer$n = safeBufferExports$3.Buffer, incr32$1 = incr32_1;
function getBlock(a420) {
  var u2 = a420._cipher.encryptBlockRaw(a420._prev);
  return incr32$1(a420._prev), u2;
}
var blockSize = 16;
ctr.encrypt = function(a420, u2) {
  var c = Math.ceil(u2.length / blockSize), l2 = a420._cache.length;
  a420._cache = Buffer$n.concat([a420._cache, Buffer$n.allocUnsafe(c * blockSize)]);
  for (var v2 = 0; v2 < c; v2++) {
    var p2 = getBlock(a420), _ = l2 + v2 * blockSize;
    a420._cache.writeUInt32BE(p2[0], _ + 0), a420._cache.writeUInt32BE(p2[1], _ + 4), a420._cache.writeUInt32BE(p2[2], _ + 8), a420._cache.writeUInt32BE(p2[3], _ + 12);
  }
  var I2 = a420._cache.slice(0, u2.length);
  return a420._cache = a420._cache.slice(u2.length), xor$4(u2, I2);
};
const aes128 = { cipher: "AES", key: 128, iv: 16, mode: "CBC", type: "block" }, aes192 = { cipher: "AES", key: 192, iv: 16, mode: "CBC", type: "block" }, aes256 = { cipher: "AES", key: 256, iv: 16, mode: "CBC", type: "block" }, require$$2 = { "aes-128-ecb": { cipher: "AES", key: 128, iv: 0, mode: "ECB", type: "block" }, "aes-192-ecb": { cipher: "AES", key: 192, iv: 0, mode: "ECB", type: "block" }, "aes-256-ecb": { cipher: "AES", key: 256, iv: 0, mode: "ECB", type: "block" }, "aes-128-cbc": { cipher: "AES", key: 128, iv: 16, mode: "CBC", type: "block" }, "aes-192-cbc": { cipher: "AES", key: 192, iv: 16, mode: "CBC", type: "block" }, "aes-256-cbc": { cipher: "AES", key: 256, iv: 16, mode: "CBC", type: "block" }, aes128, aes192, aes256, "aes-128-cfb": { cipher: "AES", key: 128, iv: 16, mode: "CFB", type: "stream" }, "aes-192-cfb": { cipher: "AES", key: 192, iv: 16, mode: "CFB", type: "stream" }, "aes-256-cfb": { cipher: "AES", key: 256, iv: 16, mode: "CFB", type: "stream" }, "aes-128-cfb8": { cipher: "AES", key: 128, iv: 16, mode: "CFB8", type: "stream" }, "aes-192-cfb8": { cipher: "AES", key: 192, iv: 16, mode: "CFB8", type: "stream" }, "aes-256-cfb8": { cipher: "AES", key: 256, iv: 16, mode: "CFB8", type: "stream" }, "aes-128-cfb1": { cipher: "AES", key: 128, iv: 16, mode: "CFB1", type: "stream" }, "aes-192-cfb1": { cipher: "AES", key: 192, iv: 16, mode: "CFB1", type: "stream" }, "aes-256-cfb1": { cipher: "AES", key: 256, iv: 16, mode: "CFB1", type: "stream" }, "aes-128-ofb": { cipher: "AES", key: 128, iv: 16, mode: "OFB", type: "stream" }, "aes-192-ofb": { cipher: "AES", key: 192, iv: 16, mode: "OFB", type: "stream" }, "aes-256-ofb": { cipher: "AES", key: 256, iv: 16, mode: "OFB", type: "stream" }, "aes-128-ctr": { cipher: "AES", key: 128, iv: 16, mode: "CTR", type: "stream" }, "aes-192-ctr": { cipher: "AES", key: 192, iv: 16, mode: "CTR", type: "stream" }, "aes-256-ctr": { cipher: "AES", key: 256, iv: 16, mode: "CTR", type: "stream" }, "aes-128-gcm": { cipher: "AES", key: 128, iv: 12, mode: "GCM", type: "auth" }, "aes-192-gcm": { cipher: "AES", key: 192, iv: 12, mode: "GCM", type: "auth" }, "aes-256-gcm": { cipher: "AES", key: 256, iv: 12, mode: "GCM", type: "auth" } };
var modeModules = { ECB: ecb, CBC: cbc, CFB: cfb, CFB8: cfb8, CFB1: cfb1, OFB: ofb, CTR: ctr, GCM: ctr }, modes$3 = require$$2;
for (var key$3 in modes$3)
  modes$3[key$3].module = modeModules[modes$3[key$3].mode];
var modes_1 = modes$3, aes$5 = {}, Buffer$m = safeBufferExports$3.Buffer;
function asUInt32Array(a420) {
  Buffer$m.isBuffer(a420) || (a420 = Buffer$m.from(a420));
  for (var u2 = a420.length / 4 | 0, c = new Array(u2), l2 = 0; l2 < u2; l2++)
    c[l2] = a420.readUInt32BE(l2 * 4);
  return c;
}
function scrubVec(a420) {
  for (var u2 = 0; u2 < a420.length; a420++)
    a420[u2] = 0;
}
function cryptBlock(a420, u2, c, l2, v2) {
  for (var p2 = c[0], _ = c[1], I2 = c[2], P2 = c[3], $ = a420[0] ^ u2[0], F2 = a420[1] ^ u2[1], H2 = a420[2] ^ u2[2], j = a420[3] ^ u2[3], ee2, X2, ie2, Q2, ne2 = 4, Z2 = 1; Z2 < v2; Z2++)
    ee2 = p2[$ >>> 24] ^ _[F2 >>> 16 & 255] ^ I2[H2 >>> 8 & 255] ^ P2[j & 255] ^ u2[ne2++], X2 = p2[F2 >>> 24] ^ _[H2 >>> 16 & 255] ^ I2[j >>> 8 & 255] ^ P2[$ & 255] ^ u2[ne2++], ie2 = p2[H2 >>> 24] ^ _[j >>> 16 & 255] ^ I2[$ >>> 8 & 255] ^ P2[F2 & 255] ^ u2[ne2++], Q2 = p2[j >>> 24] ^ _[$ >>> 16 & 255] ^ I2[F2 >>> 8 & 255] ^ P2[H2 & 255] ^ u2[ne2++], $ = ee2, F2 = X2, H2 = ie2, j = Q2;
  return ee2 = (l2[$ >>> 24] << 24 | l2[F2 >>> 16 & 255] << 16 | l2[H2 >>> 8 & 255] << 8 | l2[j & 255]) ^ u2[ne2++], X2 = (l2[F2 >>> 24] << 24 | l2[H2 >>> 16 & 255] << 16 | l2[j >>> 8 & 255] << 8 | l2[$ & 255]) ^ u2[ne2++], ie2 = (l2[H2 >>> 24] << 24 | l2[j >>> 16 & 255] << 16 | l2[$ >>> 8 & 255] << 8 | l2[F2 & 255]) ^ u2[ne2++], Q2 = (l2[j >>> 24] << 24 | l2[$ >>> 16 & 255] << 16 | l2[F2 >>> 8 & 255] << 8 | l2[H2 & 255]) ^ u2[ne2++], ee2 = ee2 >>> 0, X2 = X2 >>> 0, ie2 = ie2 >>> 0, Q2 = Q2 >>> 0, [ee2, X2, ie2, Q2];
}
var RCON = [0, 1, 2, 4, 8, 16, 32, 64, 128, 27, 54], G = function() {
  for (var a420 = new Array(256), u2 = 0; u2 < 256; u2++)
    u2 < 128 ? a420[u2] = u2 << 1 : a420[u2] = u2 << 1 ^ 283;
  for (var c = [], l2 = [], v2 = [[], [], [], []], p2 = [[], [], [], []], _ = 0, I2 = 0, P2 = 0; P2 < 256; ++P2) {
    var $ = I2 ^ I2 << 1 ^ I2 << 2 ^ I2 << 3 ^ I2 << 4;
    $ = $ >>> 8 ^ $ & 255 ^ 99, c[_] = $, l2[$] = _;
    var F2 = a420[_], H2 = a420[F2], j = a420[H2], ee2 = a420[$] * 257 ^ $ * 16843008;
    v2[0][_] = ee2 << 24 | ee2 >>> 8, v2[1][_] = ee2 << 16 | ee2 >>> 16, v2[2][_] = ee2 << 8 | ee2 >>> 24, v2[3][_] = ee2, ee2 = j * 16843009 ^ H2 * 65537 ^ F2 * 257 ^ _ * 16843008, p2[0][$] = ee2 << 24 | ee2 >>> 8, p2[1][$] = ee2 << 16 | ee2 >>> 16, p2[2][$] = ee2 << 8 | ee2 >>> 24, p2[3][$] = ee2, _ === 0 ? _ = I2 = 1 : (_ = F2 ^ a420[a420[a420[j ^ F2]]], I2 ^= a420[a420[I2]]);
  }
  return { SBOX: c, INV_SBOX: l2, SUB_MIX: v2, INV_SUB_MIX: p2 };
}();
function AES(a420) {
  this._key = asUInt32Array(a420), this._reset();
}
AES.blockSize = 4 * 4;
AES.keySize = 256 / 8;
AES.prototype.blockSize = AES.blockSize;
AES.prototype.keySize = AES.keySize;
AES.prototype._reset = function() {
  for (var a420 = this._key, u2 = a420.length, c = u2 + 6, l2 = (c + 1) * 4, v2 = [], p2 = 0; p2 < u2; p2++)
    v2[p2] = a420[p2];
  for (p2 = u2; p2 < l2; p2++) {
    var _ = v2[p2 - 1];
    p2 % u2 === 0 ? (_ = _ << 8 | _ >>> 24, _ = G.SBOX[_ >>> 24] << 24 | G.SBOX[_ >>> 16 & 255] << 16 | G.SBOX[_ >>> 8 & 255] << 8 | G.SBOX[_ & 255], _ ^= RCON[p2 / u2 | 0] << 24) : u2 > 6 && p2 % u2 === 4 && (_ = G.SBOX[_ >>> 24] << 24 | G.SBOX[_ >>> 16 & 255] << 16 | G.SBOX[_ >>> 8 & 255] << 8 | G.SBOX[_ & 255]), v2[p2] = v2[p2 - u2] ^ _;
  }
  for (var I2 = [], P2 = 0; P2 < l2; P2++) {
    var $ = l2 - P2, F2 = v2[$ - (P2 % 4 ? 0 : 4)];
    P2 < 4 || $ <= 4 ? I2[P2] = F2 : I2[P2] = G.INV_SUB_MIX[0][G.SBOX[F2 >>> 24]] ^ G.INV_SUB_MIX[1][G.SBOX[F2 >>> 16 & 255]] ^ G.INV_SUB_MIX[2][G.SBOX[F2 >>> 8 & 255]] ^ G.INV_SUB_MIX[3][G.SBOX[F2 & 255]];
  }
  this._nRounds = c, this._keySchedule = v2, this._invKeySchedule = I2;
};
AES.prototype.encryptBlockRaw = function(a420) {
  return a420 = asUInt32Array(a420), cryptBlock(a420, this._keySchedule, G.SUB_MIX, G.SBOX, this._nRounds);
};
AES.prototype.encryptBlock = function(a420) {
  var u2 = this.encryptBlockRaw(a420), c = Buffer$m.allocUnsafe(16);
  return c.writeUInt32BE(u2[0], 0), c.writeUInt32BE(u2[1], 4), c.writeUInt32BE(u2[2], 8), c.writeUInt32BE(u2[3], 12), c;
};
AES.prototype.decryptBlock = function(a420) {
  a420 = asUInt32Array(a420);
  var u2 = a420[1];
  a420[1] = a420[3], a420[3] = u2;
  var c = cryptBlock(a420, this._invKeySchedule, G.INV_SUB_MIX, G.INV_SBOX, this._nRounds), l2 = Buffer$m.allocUnsafe(16);
  return l2.writeUInt32BE(c[0], 0), l2.writeUInt32BE(c[3], 4), l2.writeUInt32BE(c[2], 8), l2.writeUInt32BE(c[1], 12), l2;
};
AES.prototype.scrub = function() {
  scrubVec(this._keySchedule), scrubVec(this._invKeySchedule), scrubVec(this._key);
};
aes$5.AES = AES;
var Buffer$l = safeBufferExports$3.Buffer, ZEROES = Buffer$l.alloc(16, 0);
function toArray$1(a420) {
  return [a420.readUInt32BE(0), a420.readUInt32BE(4), a420.readUInt32BE(8), a420.readUInt32BE(12)];
}
function fromArray(a420) {
  var u2 = Buffer$l.allocUnsafe(16);
  return u2.writeUInt32BE(a420[0] >>> 0, 0), u2.writeUInt32BE(a420[1] >>> 0, 4), u2.writeUInt32BE(a420[2] >>> 0, 8), u2.writeUInt32BE(a420[3] >>> 0, 12), u2;
}
function GHASH$1(a420) {
  this.h = a420, this.state = Buffer$l.alloc(16, 0), this.cache = Buffer$l.allocUnsafe(0);
}
GHASH$1.prototype.ghash = function(a420) {
  for (var u2 = -1; ++u2 < a420.length; )
    this.state[u2] ^= a420[u2];
  this._multiply();
};
GHASH$1.prototype._multiply = function() {
  for (var a420 = toArray$1(this.h), u2 = [0, 0, 0, 0], c, l2, v2, p2 = -1; ++p2 < 128; ) {
    for (l2 = (this.state[~~(p2 / 8)] & 1 << 7 - p2 % 8) !== 0, l2 && (u2[0] ^= a420[0], u2[1] ^= a420[1], u2[2] ^= a420[2], u2[3] ^= a420[3]), v2 = (a420[3] & 1) !== 0, c = 3; c > 0; c--)
      a420[c] = a420[c] >>> 1 | (a420[c - 1] & 1) << 31;
    a420[0] = a420[0] >>> 1, v2 && (a420[0] = a420[0] ^ 225 << 24);
  }
  this.state = fromArray(u2);
};
GHASH$1.prototype.update = function(a420) {
  this.cache = Buffer$l.concat([this.cache, a420]);
  for (var u2; this.cache.length >= 16; )
    u2 = this.cache.slice(0, 16), this.cache = this.cache.slice(16), this.ghash(u2);
};
GHASH$1.prototype.final = function(a420, u2) {
  return this.cache.length && this.ghash(Buffer$l.concat([this.cache, ZEROES], 16)), this.ghash(fromArray([0, a420, 0, u2])), this.state;
};
var ghash = GHASH$1, aes$4 = aes$5, Buffer$k = safeBufferExports$3.Buffer, Transform$5 = cipherBase, inherits$d = inherits_browserExports, GHASH = ghash, xor$3 = bufferXor, incr32 = incr32_1;
function xorTest(a420, u2) {
  var c = 0;
  a420.length !== u2.length && c++;
  for (var l2 = Math.min(a420.length, u2.length), v2 = 0; v2 < l2; ++v2)
    c += a420[v2] ^ u2[v2];
  return c;
}
function calcIv(a420, u2, c) {
  if (u2.length === 12)
    return a420._finID = Buffer$k.concat([u2, Buffer$k.from([0, 0, 0, 1])]), Buffer$k.concat([u2, Buffer$k.from([0, 0, 0, 2])]);
  var l2 = new GHASH(c), v2 = u2.length, p2 = v2 % 16;
  l2.update(u2), p2 && (p2 = 16 - p2, l2.update(Buffer$k.alloc(p2, 0))), l2.update(Buffer$k.alloc(8, 0));
  var _ = v2 * 8, I2 = Buffer$k.alloc(8);
  I2.writeUIntBE(_, 0, 8), l2.update(I2), a420._finID = l2.state;
  var P2 = Buffer$k.from(a420._finID);
  return incr32(P2), P2;
}
function StreamCipher$3(a420, u2, c, l2) {
  Transform$5.call(this);
  var v2 = Buffer$k.alloc(4, 0);
  this._cipher = new aes$4.AES(u2);
  var p2 = this._cipher.encryptBlock(v2);
  this._ghash = new GHASH(p2), c = calcIv(this, c, p2), this._prev = Buffer$k.from(c), this._cache = Buffer$k.allocUnsafe(0), this._secCache = Buffer$k.allocUnsafe(0), this._decrypt = l2, this._alen = 0, this._len = 0, this._mode = a420, this._authTag = null, this._called = false;
}
inherits$d(StreamCipher$3, Transform$5);
StreamCipher$3.prototype._update = function(a420) {
  if (!this._called && this._alen) {
    var u2 = 16 - this._alen % 16;
    u2 < 16 && (u2 = Buffer$k.alloc(u2, 0), this._ghash.update(u2));
  }
  this._called = true;
  var c = this._mode.encrypt(this, a420);
  return this._decrypt ? this._ghash.update(a420) : this._ghash.update(c), this._len += a420.length, c;
};
StreamCipher$3.prototype._final = function() {
  if (this._decrypt && !this._authTag)
    throw new Error("Unsupported state or unable to authenticate data");
  var a420 = xor$3(this._ghash.final(this._alen * 8, this._len * 8), this._cipher.encryptBlock(this._finID));
  if (this._decrypt && xorTest(a420, this._authTag))
    throw new Error("Unsupported state or unable to authenticate data");
  this._authTag = a420, this._cipher.scrub();
};
StreamCipher$3.prototype.getAuthTag = function a131() {
  if (this._decrypt || !Buffer$k.isBuffer(this._authTag))
    throw new Error("Attempting to get auth tag in unsupported state");
  return this._authTag;
};
StreamCipher$3.prototype.setAuthTag = function a132(u2) {
  if (!this._decrypt)
    throw new Error("Attempting to set auth tag in unsupported state");
  this._authTag = u2;
};
StreamCipher$3.prototype.setAAD = function a133(u2) {
  if (this._called)
    throw new Error("Attempting to set AAD in unsupported state");
  this._ghash.update(u2), this._alen += u2.length;
};
var authCipher = StreamCipher$3, aes$3 = aes$5, Buffer$j = safeBufferExports$3.Buffer, Transform$4 = cipherBase, inherits$c = inherits_browserExports;
function StreamCipher$2(a420, u2, c, l2) {
  Transform$4.call(this), this._cipher = new aes$3.AES(u2), this._prev = Buffer$j.from(c), this._cache = Buffer$j.allocUnsafe(0), this._secCache = Buffer$j.allocUnsafe(0), this._decrypt = l2, this._mode = a420;
}
inherits$c(StreamCipher$2, Transform$4);
StreamCipher$2.prototype._update = function(a420) {
  return this._mode.encrypt(this, a420, this._decrypt);
};
StreamCipher$2.prototype._final = function() {
  this._cipher.scrub();
};
var streamCipher = StreamCipher$2, Buffer$i = safeBufferExports$3.Buffer, MD5 = md5_js;
function EVP_BytesToKey(a420, u2, c, l2) {
  if (Buffer$i.isBuffer(a420) || (a420 = Buffer$i.from(a420, "binary")), u2 && (Buffer$i.isBuffer(u2) || (u2 = Buffer$i.from(u2, "binary")), u2.length !== 8))
    throw new RangeError("salt should be Buffer with 8 byte length");
  for (var v2 = c / 8, p2 = Buffer$i.alloc(v2), _ = Buffer$i.alloc(l2 || 0), I2 = Buffer$i.alloc(0); v2 > 0 || l2 > 0; ) {
    var P2 = new MD5();
    P2.update(I2), P2.update(a420), u2 && P2.update(u2), I2 = P2.digest();
    var $ = 0;
    if (v2 > 0) {
      var F2 = p2.length - v2;
      $ = Math.min(v2, I2.length), I2.copy(p2, F2, 0, $), v2 -= $;
    }
    if ($ < I2.length && l2 > 0) {
      var H2 = _.length - l2, j = Math.min(l2, I2.length - $);
      I2.copy(_, H2, $, $ + j), l2 -= j;
    }
  }
  return I2.fill(0), { key: p2, iv: _ };
}
var evp_bytestokey = EVP_BytesToKey, MODES$1 = modes_1, AuthCipher$1 = authCipher, Buffer$h = safeBufferExports$3.Buffer, StreamCipher$1 = streamCipher, Transform$3 = cipherBase, aes$2 = aes$5, ebtk$2 = evp_bytestokey, inherits$b = inherits_browserExports;
function Cipher(a420, u2, c) {
  Transform$3.call(this), this._cache = new Splitter$1(), this._cipher = new aes$2.AES(u2), this._prev = Buffer$h.from(c), this._mode = a420, this._autopadding = true;
}
inherits$b(Cipher, Transform$3);
Cipher.prototype._update = function(a420) {
  this._cache.add(a420);
  for (var u2, c, l2 = []; u2 = this._cache.get(); )
    c = this._mode.encrypt(this, u2), l2.push(c);
  return Buffer$h.concat(l2);
};
var PADDING$1 = Buffer$h.alloc(16, 16);
Cipher.prototype._final = function() {
  var a420 = this._cache.flush();
  if (this._autopadding)
    return a420 = this._mode.encrypt(this, a420), this._cipher.scrub(), a420;
  if (!a420.equals(PADDING$1))
    throw this._cipher.scrub(), new Error("data not multiple of block length");
};
Cipher.prototype.setAutoPadding = function(a420) {
  return this._autopadding = !!a420, this;
};
function Splitter$1() {
  this.cache = Buffer$h.allocUnsafe(0);
}
Splitter$1.prototype.add = function(a420) {
  this.cache = Buffer$h.concat([this.cache, a420]);
};
Splitter$1.prototype.get = function() {
  if (this.cache.length > 15) {
    var a420 = this.cache.slice(0, 16);
    return this.cache = this.cache.slice(16), a420;
  }
  return null;
};
Splitter$1.prototype.flush = function() {
  for (var a420 = 16 - this.cache.length, u2 = Buffer$h.allocUnsafe(a420), c = -1; ++c < a420; )
    u2.writeUInt8(a420, c);
  return Buffer$h.concat([this.cache, u2]);
};
function createCipheriv$1(a420, u2, c) {
  var l2 = MODES$1[a420.toLowerCase()];
  if (!l2)
    throw new TypeError("invalid suite type");
  if (typeof u2 == "string" && (u2 = Buffer$h.from(u2)), u2.length !== l2.key / 8)
    throw new TypeError("invalid key length " + u2.length);
  if (typeof c == "string" && (c = Buffer$h.from(c)), l2.mode !== "GCM" && c.length !== l2.iv)
    throw new TypeError("invalid iv length " + c.length);
  return l2.type === "stream" ? new StreamCipher$1(l2.module, u2, c) : l2.type === "auth" ? new AuthCipher$1(l2.module, u2, c) : new Cipher(l2.module, u2, c);
}
function createCipher$1(a420, u2) {
  var c = MODES$1[a420.toLowerCase()];
  if (!c)
    throw new TypeError("invalid suite type");
  var l2 = ebtk$2(u2, false, c.key, c.iv);
  return createCipheriv$1(a420, l2.key, l2.iv);
}
encrypter.createCipheriv = createCipheriv$1;
encrypter.createCipher = createCipher$1;
var decrypter = {}, AuthCipher = authCipher, Buffer$g = safeBufferExports$3.Buffer, MODES = modes_1, StreamCipher = streamCipher, Transform$2 = cipherBase, aes$1 = aes$5, ebtk$1 = evp_bytestokey, inherits$a = inherits_browserExports;
function Decipher(a420, u2, c) {
  Transform$2.call(this), this._cache = new Splitter(), this._last = void 0, this._cipher = new aes$1.AES(u2), this._prev = Buffer$g.from(c), this._mode = a420, this._autopadding = true;
}
inherits$a(Decipher, Transform$2);
Decipher.prototype._update = function(a420) {
  this._cache.add(a420);
  for (var u2, c, l2 = []; u2 = this._cache.get(this._autopadding); )
    c = this._mode.decrypt(this, u2), l2.push(c);
  return Buffer$g.concat(l2);
};
Decipher.prototype._final = function() {
  var a420 = this._cache.flush();
  if (this._autopadding)
    return unpad(this._mode.decrypt(this, a420));
  if (a420)
    throw new Error("data not multiple of block length");
};
Decipher.prototype.setAutoPadding = function(a420) {
  return this._autopadding = !!a420, this;
};
function Splitter() {
  this.cache = Buffer$g.allocUnsafe(0);
}
Splitter.prototype.add = function(a420) {
  this.cache = Buffer$g.concat([this.cache, a420]);
};
Splitter.prototype.get = function(a420) {
  var u2;
  if (a420) {
    if (this.cache.length > 16)
      return u2 = this.cache.slice(0, 16), this.cache = this.cache.slice(16), u2;
  } else if (this.cache.length >= 16)
    return u2 = this.cache.slice(0, 16), this.cache = this.cache.slice(16), u2;
  return null;
};
Splitter.prototype.flush = function() {
  if (this.cache.length)
    return this.cache;
};
function unpad(a420) {
  var u2 = a420[15];
  if (u2 < 1 || u2 > 16)
    throw new Error("unable to decrypt data");
  for (var c = -1; ++c < u2; )
    if (a420[c + (16 - u2)] !== u2)
      throw new Error("unable to decrypt data");
  if (u2 !== 16)
    return a420.slice(0, 16 - u2);
}
function createDecipheriv$1(a420, u2, c) {
  var l2 = MODES[a420.toLowerCase()];
  if (!l2)
    throw new TypeError("invalid suite type");
  if (typeof c == "string" && (c = Buffer$g.from(c)), l2.mode !== "GCM" && c.length !== l2.iv)
    throw new TypeError("invalid iv length " + c.length);
  if (typeof u2 == "string" && (u2 = Buffer$g.from(u2)), u2.length !== l2.key / 8)
    throw new TypeError("invalid key length " + u2.length);
  return l2.type === "stream" ? new StreamCipher(l2.module, u2, c, true) : l2.type === "auth" ? new AuthCipher(l2.module, u2, c, true) : new Decipher(l2.module, u2, c);
}
function createDecipher$1(a420, u2) {
  var c = MODES[a420.toLowerCase()];
  if (!c)
    throw new TypeError("invalid suite type");
  var l2 = ebtk$1(u2, false, c.key, c.iv);
  return createDecipheriv$1(a420, l2.key, l2.iv);
}
decrypter.createDecipher = createDecipher$1;
decrypter.createDecipheriv = createDecipheriv$1;
var ciphers$2 = encrypter, deciphers = decrypter, modes$2 = require$$2;
function getCiphers$1() {
  return Object.keys(modes$2);
}
browser$6.createCipher = browser$6.Cipher = ciphers$2.createCipher;
browser$6.createCipheriv = browser$6.Cipheriv = ciphers$2.createCipheriv;
browser$6.createDecipher = browser$6.Decipher = deciphers.createDecipher;
browser$6.createDecipheriv = browser$6.Decipheriv = deciphers.createDecipheriv;
browser$6.listCiphers = browser$6.getCiphers = getCiphers$1;
var modes$1 = {};
(function(a420) {
  a420["des-ecb"] = { key: 8, iv: 0 }, a420["des-cbc"] = a420.des = { key: 8, iv: 8 }, a420["des-ede3-cbc"] = a420.des3 = { key: 24, iv: 8 }, a420["des-ede3"] = { key: 24, iv: 0 }, a420["des-ede-cbc"] = { key: 16, iv: 8 }, a420["des-ede"] = { key: 16, iv: 0 };
})(modes$1);
var DES = browserifyDes, aes = browser$6, aesModes = modes_1, desModes = modes$1, ebtk = evp_bytestokey;
function createCipher(a420, u2) {
  a420 = a420.toLowerCase();
  var c, l2;
  if (aesModes[a420])
    c = aesModes[a420].key, l2 = aesModes[a420].iv;
  else if (desModes[a420])
    c = desModes[a420].key * 8, l2 = desModes[a420].iv;
  else
    throw new TypeError("invalid suite type");
  var v2 = ebtk(u2, false, c, l2);
  return createCipheriv(a420, v2.key, v2.iv);
}
function createDecipher(a420, u2) {
  a420 = a420.toLowerCase();
  var c, l2;
  if (aesModes[a420])
    c = aesModes[a420].key, l2 = aesModes[a420].iv;
  else if (desModes[a420])
    c = desModes[a420].key * 8, l2 = desModes[a420].iv;
  else
    throw new TypeError("invalid suite type");
  var v2 = ebtk(u2, false, c, l2);
  return createDecipheriv(a420, v2.key, v2.iv);
}
function createCipheriv(a420, u2, c) {
  if (a420 = a420.toLowerCase(), aesModes[a420])
    return aes.createCipheriv(a420, u2, c);
  if (desModes[a420])
    return new DES({ key: u2, iv: c, mode: a420 });
  throw new TypeError("invalid suite type");
}
function createDecipheriv(a420, u2, c) {
  if (a420 = a420.toLowerCase(), aesModes[a420])
    return aes.createDecipheriv(a420, u2, c);
  if (desModes[a420])
    return new DES({ key: u2, iv: c, mode: a420, decrypt: true });
  throw new TypeError("invalid suite type");
}
function getCiphers() {
  return Object.keys(desModes).concat(aes.getCiphers());
}
browser$7.createCipher = browser$7.Cipher = createCipher;
browser$7.createCipheriv = browser$7.Cipheriv = createCipheriv;
browser$7.createDecipher = browser$7.Decipher = createDecipher;
browser$7.createDecipheriv = browser$7.Decipheriv = createDecipheriv;
browser$7.listCiphers = browser$7.getCiphers = getCiphers;
var browser$5 = {}, bn$6 = { exports: {} };
(function(a420) {
  (function(u2, c) {
    function l2(C2, b) {
      if (!C2)
        throw new Error(b || "Assertion failed");
    }
    function v2(C2, b) {
      C2.super_ = b;
      var E2 = function() {
      };
      E2.prototype = b.prototype, C2.prototype = new E2(), C2.prototype.constructor = C2;
    }
    function p2(C2, b, E2) {
      if (p2.isBN(C2))
        return C2;
      this.negative = 0, this.words = null, this.length = 0, this.red = null, C2 !== null && ((b === "le" || b === "be") && (E2 = b, b = 10), this._init(C2 || 0, b || 10, E2 || "be"));
    }
    typeof u2 == "object" ? u2.exports = p2 : c.BN = p2, p2.BN = p2, p2.wordSize = 26;
    var _;
    try {
      typeof window < "u" && typeof window.Buffer < "u" ? _ = window.Buffer : _ = require$$0$2.Buffer;
    } catch {
    }
    p2.isBN = function(b) {
      return b instanceof p2 ? true : b !== null && typeof b == "object" && b.constructor.wordSize === p2.wordSize && Array.isArray(b.words);
    }, p2.max = function(b, E2) {
      return b.cmp(E2) > 0 ? b : E2;
    }, p2.min = function(b, E2) {
      return b.cmp(E2) < 0 ? b : E2;
    }, p2.prototype._init = function(b, E2, k) {
      if (typeof b == "number")
        return this._initNumber(b, E2, k);
      if (typeof b == "object")
        return this._initArray(b, E2, k);
      E2 === "hex" && (E2 = 16), l2(E2 === (E2 | 0) && E2 >= 2 && E2 <= 36), b = b.toString().replace(/\s+/g, "");
      var O2 = 0;
      b[0] === "-" && (O2++, this.negative = 1), O2 < b.length && (E2 === 16 ? this._parseHex(b, O2, k) : (this._parseBase(b, E2, O2), k === "le" && this._initArray(this.toArray(), E2, k)));
    }, p2.prototype._initNumber = function(b, E2, k) {
      b < 0 && (this.negative = 1, b = -b), b < 67108864 ? (this.words = [b & 67108863], this.length = 1) : b < 4503599627370496 ? (this.words = [b & 67108863, b / 67108864 & 67108863], this.length = 2) : (l2(b < 9007199254740992), this.words = [b & 67108863, b / 67108864 & 67108863, 1], this.length = 3), k === "le" && this._initArray(this.toArray(), E2, k);
    }, p2.prototype._initArray = function(b, E2, k) {
      if (l2(typeof b.length == "number"), b.length <= 0)
        return this.words = [0], this.length = 1, this;
      this.length = Math.ceil(b.length / 3), this.words = new Array(this.length);
      for (var O2 = 0; O2 < this.length; O2++)
        this.words[O2] = 0;
      var A2, x2, Y2 = 0;
      if (k === "be")
        for (O2 = b.length - 1, A2 = 0; O2 >= 0; O2 -= 3)
          x2 = b[O2] | b[O2 - 1] << 8 | b[O2 - 2] << 16, this.words[A2] |= x2 << Y2 & 67108863, this.words[A2 + 1] = x2 >>> 26 - Y2 & 67108863, Y2 += 24, Y2 >= 26 && (Y2 -= 26, A2++);
      else if (k === "le")
        for (O2 = 0, A2 = 0; O2 < b.length; O2 += 3)
          x2 = b[O2] | b[O2 + 1] << 8 | b[O2 + 2] << 16, this.words[A2] |= x2 << Y2 & 67108863, this.words[A2 + 1] = x2 >>> 26 - Y2 & 67108863, Y2 += 24, Y2 >= 26 && (Y2 -= 26, A2++);
      return this.strip();
    };
    function I2(C2, b) {
      var E2 = C2.charCodeAt(b);
      return E2 >= 65 && E2 <= 70 ? E2 - 55 : E2 >= 97 && E2 <= 102 ? E2 - 87 : E2 - 48 & 15;
    }
    function P2(C2, b, E2) {
      var k = I2(C2, E2);
      return E2 - 1 >= b && (k |= I2(C2, E2 - 1) << 4), k;
    }
    p2.prototype._parseHex = function(b, E2, k) {
      this.length = Math.ceil((b.length - E2) / 6), this.words = new Array(this.length);
      for (var O2 = 0; O2 < this.length; O2++)
        this.words[O2] = 0;
      var A2 = 0, x2 = 0, Y2;
      if (k === "be")
        for (O2 = b.length - 1; O2 >= E2; O2 -= 2)
          Y2 = P2(b, E2, O2) << A2, this.words[x2] |= Y2 & 67108863, A2 >= 18 ? (A2 -= 18, x2 += 1, this.words[x2] |= Y2 >>> 26) : A2 += 8;
      else {
        var B2 = b.length - E2;
        for (O2 = B2 % 2 === 0 ? E2 + 1 : E2; O2 < b.length; O2 += 2)
          Y2 = P2(b, E2, O2) << A2, this.words[x2] |= Y2 & 67108863, A2 >= 18 ? (A2 -= 18, x2 += 1, this.words[x2] |= Y2 >>> 26) : A2 += 8;
      }
      this.strip();
    };
    function $(C2, b, E2, k) {
      for (var O2 = 0, A2 = Math.min(C2.length, E2), x2 = b; x2 < A2; x2++) {
        var Y2 = C2.charCodeAt(x2) - 48;
        O2 *= k, Y2 >= 49 ? O2 += Y2 - 49 + 10 : Y2 >= 17 ? O2 += Y2 - 17 + 10 : O2 += Y2;
      }
      return O2;
    }
    p2.prototype._parseBase = function(b, E2, k) {
      this.words = [0], this.length = 1;
      for (var O2 = 0, A2 = 1; A2 <= 67108863; A2 *= E2)
        O2++;
      O2--, A2 = A2 / E2 | 0;
      for (var x2 = b.length - k, Y2 = x2 % O2, B2 = Math.min(x2, x2 - Y2) + k, T2 = 0, D2 = k; D2 < B2; D2 += O2)
        T2 = $(b, D2, D2 + O2, E2), this.imuln(A2), this.words[0] + T2 < 67108864 ? this.words[0] += T2 : this._iaddn(T2);
      if (Y2 !== 0) {
        var te2 = 1;
        for (T2 = $(b, D2, b.length, E2), D2 = 0; D2 < Y2; D2++)
          te2 *= E2;
        this.imuln(te2), this.words[0] + T2 < 67108864 ? this.words[0] += T2 : this._iaddn(T2);
      }
      this.strip();
    }, p2.prototype.copy = function(b) {
      b.words = new Array(this.length);
      for (var E2 = 0; E2 < this.length; E2++)
        b.words[E2] = this.words[E2];
      b.length = this.length, b.negative = this.negative, b.red = this.red;
    }, p2.prototype.clone = function() {
      var b = new p2(null);
      return this.copy(b), b;
    }, p2.prototype._expand = function(b) {
      for (; this.length < b; )
        this.words[this.length++] = 0;
      return this;
    }, p2.prototype.strip = function() {
      for (; this.length > 1 && this.words[this.length - 1] === 0; )
        this.length--;
      return this._normSign();
    }, p2.prototype._normSign = function() {
      return this.length === 1 && this.words[0] === 0 && (this.negative = 0), this;
    }, p2.prototype.inspect = function() {
      return (this.red ? "<BN-R: " : "<BN: ") + this.toString(16) + ">";
    };
    var F2 = ["", "0", "00", "000", "0000", "00000", "000000", "0000000", "00000000", "000000000", "0000000000", "00000000000", "000000000000", "0000000000000", "00000000000000", "000000000000000", "0000000000000000", "00000000000000000", "000000000000000000", "0000000000000000000", "00000000000000000000", "000000000000000000000", "0000000000000000000000", "00000000000000000000000", "000000000000000000000000", "0000000000000000000000000"], H2 = [0, 0, 25, 16, 12, 11, 10, 9, 8, 8, 7, 7, 7, 7, 6, 6, 6, 6, 6, 6, 6, 5, 5, 5, 5, 5, 5, 5, 5, 5, 5, 5, 5, 5, 5, 5, 5], j = [0, 0, 33554432, 43046721, 16777216, 48828125, 60466176, 40353607, 16777216, 43046721, 1e7, 19487171, 35831808, 62748517, 7529536, 11390625, 16777216, 24137569, 34012224, 47045881, 64e6, 4084101, 5153632, 6436343, 7962624, 9765625, 11881376, 14348907, 17210368, 20511149, 243e5, 28629151, 33554432, 39135393, 45435424, 52521875, 60466176];
    p2.prototype.toString = function(b, E2) {
      b = b || 10, E2 = E2 | 0 || 1;
      var k;
      if (b === 16 || b === "hex") {
        k = "";
        for (var O2 = 0, A2 = 0, x2 = 0; x2 < this.length; x2++) {
          var Y2 = this.words[x2], B2 = ((Y2 << O2 | A2) & 16777215).toString(16);
          A2 = Y2 >>> 24 - O2 & 16777215, A2 !== 0 || x2 !== this.length - 1 ? k = F2[6 - B2.length] + B2 + k : k = B2 + k, O2 += 2, O2 >= 26 && (O2 -= 26, x2--);
        }
        for (A2 !== 0 && (k = A2.toString(16) + k); k.length % E2 !== 0; )
          k = "0" + k;
        return this.negative !== 0 && (k = "-" + k), k;
      }
      if (b === (b | 0) && b >= 2 && b <= 36) {
        var T2 = H2[b], D2 = j[b];
        k = "";
        var te2 = this.clone();
        for (te2.negative = 0; !te2.isZero(); ) {
          var me2 = te2.modn(D2).toString(b);
          te2 = te2.idivn(D2), te2.isZero() ? k = me2 + k : k = F2[T2 - me2.length] + me2 + k;
        }
        for (this.isZero() && (k = "0" + k); k.length % E2 !== 0; )
          k = "0" + k;
        return this.negative !== 0 && (k = "-" + k), k;
      }
      l2(false, "Base should be between 2 and 36");
    }, p2.prototype.toNumber = function() {
      var b = this.words[0];
      return this.length === 2 ? b += this.words[1] * 67108864 : this.length === 3 && this.words[2] === 1 ? b += 4503599627370496 + this.words[1] * 67108864 : this.length > 2 && l2(false, "Number can only safely store up to 53 bits"), this.negative !== 0 ? -b : b;
    }, p2.prototype.toJSON = function() {
      return this.toString(16);
    }, p2.prototype.toBuffer = function(b, E2) {
      return l2(typeof _ < "u"), this.toArrayLike(_, b, E2);
    }, p2.prototype.toArray = function(b, E2) {
      return this.toArrayLike(Array, b, E2);
    }, p2.prototype.toArrayLike = function(b, E2, k) {
      var O2 = this.byteLength(), A2 = k || Math.max(1, O2);
      l2(O2 <= A2, "byte array longer than desired length"), l2(A2 > 0, "Requested array length <= 0"), this.strip();
      var x2 = E2 === "le", Y2 = new b(A2), B2, T2, D2 = this.clone();
      if (x2) {
        for (T2 = 0; !D2.isZero(); T2++)
          B2 = D2.andln(255), D2.iushrn(8), Y2[T2] = B2;
        for (; T2 < A2; T2++)
          Y2[T2] = 0;
      } else {
        for (T2 = 0; T2 < A2 - O2; T2++)
          Y2[T2] = 0;
        for (T2 = 0; !D2.isZero(); T2++)
          B2 = D2.andln(255), D2.iushrn(8), Y2[A2 - T2 - 1] = B2;
      }
      return Y2;
    }, Math.clz32 ? p2.prototype._countBits = function(b) {
      return 32 - Math.clz32(b);
    } : p2.prototype._countBits = function(b) {
      var E2 = b, k = 0;
      return E2 >= 4096 && (k += 13, E2 >>>= 13), E2 >= 64 && (k += 7, E2 >>>= 7), E2 >= 8 && (k += 4, E2 >>>= 4), E2 >= 2 && (k += 2, E2 >>>= 2), k + E2;
    }, p2.prototype._zeroBits = function(b) {
      if (b === 0)
        return 26;
      var E2 = b, k = 0;
      return E2 & 8191 || (k += 13, E2 >>>= 13), E2 & 127 || (k += 7, E2 >>>= 7), E2 & 15 || (k += 4, E2 >>>= 4), E2 & 3 || (k += 2, E2 >>>= 2), E2 & 1 || k++, k;
    }, p2.prototype.bitLength = function() {
      var b = this.words[this.length - 1], E2 = this._countBits(b);
      return (this.length - 1) * 26 + E2;
    };
    function ee2(C2) {
      for (var b = new Array(C2.bitLength()), E2 = 0; E2 < b.length; E2++) {
        var k = E2 / 26 | 0, O2 = E2 % 26;
        b[E2] = (C2.words[k] & 1 << O2) >>> O2;
      }
      return b;
    }
    p2.prototype.zeroBits = function() {
      if (this.isZero())
        return 0;
      for (var b = 0, E2 = 0; E2 < this.length; E2++) {
        var k = this._zeroBits(this.words[E2]);
        if (b += k, k !== 26)
          break;
      }
      return b;
    }, p2.prototype.byteLength = function() {
      return Math.ceil(this.bitLength() / 8);
    }, p2.prototype.toTwos = function(b) {
      return this.negative !== 0 ? this.abs().inotn(b).iaddn(1) : this.clone();
    }, p2.prototype.fromTwos = function(b) {
      return this.testn(b - 1) ? this.notn(b).iaddn(1).ineg() : this.clone();
    }, p2.prototype.isNeg = function() {
      return this.negative !== 0;
    }, p2.prototype.neg = function() {
      return this.clone().ineg();
    }, p2.prototype.ineg = function() {
      return this.isZero() || (this.negative ^= 1), this;
    }, p2.prototype.iuor = function(b) {
      for (; this.length < b.length; )
        this.words[this.length++] = 0;
      for (var E2 = 0; E2 < b.length; E2++)
        this.words[E2] = this.words[E2] | b.words[E2];
      return this.strip();
    }, p2.prototype.ior = function(b) {
      return l2((this.negative | b.negative) === 0), this.iuor(b);
    }, p2.prototype.or = function(b) {
      return this.length > b.length ? this.clone().ior(b) : b.clone().ior(this);
    }, p2.prototype.uor = function(b) {
      return this.length > b.length ? this.clone().iuor(b) : b.clone().iuor(this);
    }, p2.prototype.iuand = function(b) {
      var E2;
      this.length > b.length ? E2 = b : E2 = this;
      for (var k = 0; k < E2.length; k++)
        this.words[k] = this.words[k] & b.words[k];
      return this.length = E2.length, this.strip();
    }, p2.prototype.iand = function(b) {
      return l2((this.negative | b.negative) === 0), this.iuand(b);
    }, p2.prototype.and = function(b) {
      return this.length > b.length ? this.clone().iand(b) : b.clone().iand(this);
    }, p2.prototype.uand = function(b) {
      return this.length > b.length ? this.clone().iuand(b) : b.clone().iuand(this);
    }, p2.prototype.iuxor = function(b) {
      var E2, k;
      this.length > b.length ? (E2 = this, k = b) : (E2 = b, k = this);
      for (var O2 = 0; O2 < k.length; O2++)
        this.words[O2] = E2.words[O2] ^ k.words[O2];
      if (this !== E2)
        for (; O2 < E2.length; O2++)
          this.words[O2] = E2.words[O2];
      return this.length = E2.length, this.strip();
    }, p2.prototype.ixor = function(b) {
      return l2((this.negative | b.negative) === 0), this.iuxor(b);
    }, p2.prototype.xor = function(b) {
      return this.length > b.length ? this.clone().ixor(b) : b.clone().ixor(this);
    }, p2.prototype.uxor = function(b) {
      return this.length > b.length ? this.clone().iuxor(b) : b.clone().iuxor(this);
    }, p2.prototype.inotn = function(b) {
      l2(typeof b == "number" && b >= 0);
      var E2 = Math.ceil(b / 26) | 0, k = b % 26;
      this._expand(E2), k > 0 && E2--;
      for (var O2 = 0; O2 < E2; O2++)
        this.words[O2] = ~this.words[O2] & 67108863;
      return k > 0 && (this.words[O2] = ~this.words[O2] & 67108863 >> 26 - k), this.strip();
    }, p2.prototype.notn = function(b) {
      return this.clone().inotn(b);
    }, p2.prototype.setn = function(b, E2) {
      l2(typeof b == "number" && b >= 0);
      var k = b / 26 | 0, O2 = b % 26;
      return this._expand(k + 1), E2 ? this.words[k] = this.words[k] | 1 << O2 : this.words[k] = this.words[k] & ~(1 << O2), this.strip();
    }, p2.prototype.iadd = function(b) {
      var E2;
      if (this.negative !== 0 && b.negative === 0)
        return this.negative = 0, E2 = this.isub(b), this.negative ^= 1, this._normSign();
      if (this.negative === 0 && b.negative !== 0)
        return b.negative = 0, E2 = this.isub(b), b.negative = 1, E2._normSign();
      var k, O2;
      this.length > b.length ? (k = this, O2 = b) : (k = b, O2 = this);
      for (var A2 = 0, x2 = 0; x2 < O2.length; x2++)
        E2 = (k.words[x2] | 0) + (O2.words[x2] | 0) + A2, this.words[x2] = E2 & 67108863, A2 = E2 >>> 26;
      for (; A2 !== 0 && x2 < k.length; x2++)
        E2 = (k.words[x2] | 0) + A2, this.words[x2] = E2 & 67108863, A2 = E2 >>> 26;
      if (this.length = k.length, A2 !== 0)
        this.words[this.length] = A2, this.length++;
      else if (k !== this)
        for (; x2 < k.length; x2++)
          this.words[x2] = k.words[x2];
      return this;
    }, p2.prototype.add = function(b) {
      var E2;
      return b.negative !== 0 && this.negative === 0 ? (b.negative = 0, E2 = this.sub(b), b.negative ^= 1, E2) : b.negative === 0 && this.negative !== 0 ? (this.negative = 0, E2 = b.sub(this), this.negative = 1, E2) : this.length > b.length ? this.clone().iadd(b) : b.clone().iadd(this);
    }, p2.prototype.isub = function(b) {
      if (b.negative !== 0) {
        b.negative = 0;
        var E2 = this.iadd(b);
        return b.negative = 1, E2._normSign();
      } else if (this.negative !== 0)
        return this.negative = 0, this.iadd(b), this.negative = 1, this._normSign();
      var k = this.cmp(b);
      if (k === 0)
        return this.negative = 0, this.length = 1, this.words[0] = 0, this;
      var O2, A2;
      k > 0 ? (O2 = this, A2 = b) : (O2 = b, A2 = this);
      for (var x2 = 0, Y2 = 0; Y2 < A2.length; Y2++)
        E2 = (O2.words[Y2] | 0) - (A2.words[Y2] | 0) + x2, x2 = E2 >> 26, this.words[Y2] = E2 & 67108863;
      for (; x2 !== 0 && Y2 < O2.length; Y2++)
        E2 = (O2.words[Y2] | 0) + x2, x2 = E2 >> 26, this.words[Y2] = E2 & 67108863;
      if (x2 === 0 && Y2 < O2.length && O2 !== this)
        for (; Y2 < O2.length; Y2++)
          this.words[Y2] = O2.words[Y2];
      return this.length = Math.max(this.length, Y2), O2 !== this && (this.negative = 1), this.strip();
    }, p2.prototype.sub = function(b) {
      return this.clone().isub(b);
    };
    function X2(C2, b, E2) {
      E2.negative = b.negative ^ C2.negative;
      var k = C2.length + b.length | 0;
      E2.length = k, k = k - 1 | 0;
      var O2 = C2.words[0] | 0, A2 = b.words[0] | 0, x2 = O2 * A2, Y2 = x2 & 67108863, B2 = x2 / 67108864 | 0;
      E2.words[0] = Y2;
      for (var T2 = 1; T2 < k; T2++) {
        for (var D2 = B2 >>> 26, te2 = B2 & 67108863, me2 = Math.min(T2, b.length - 1), Ie2 = Math.max(0, T2 - C2.length + 1); Ie2 <= me2; Ie2++) {
          var $e2 = T2 - Ie2 | 0;
          O2 = C2.words[$e2] | 0, A2 = b.words[Ie2] | 0, x2 = O2 * A2 + te2, D2 += x2 / 67108864 | 0, te2 = x2 & 67108863;
        }
        E2.words[T2] = te2 | 0, B2 = D2 | 0;
      }
      return B2 !== 0 ? E2.words[T2] = B2 | 0 : E2.length--, E2.strip();
    }
    var ie2 = function(b, E2, k) {
      var O2 = b.words, A2 = E2.words, x2 = k.words, Y2 = 0, B2, T2, D2, te2 = O2[0] | 0, me2 = te2 & 8191, Ie2 = te2 >>> 13, $e2 = O2[1] | 0, ye2 = $e2 & 8191, he2 = $e2 >>> 13, Me2 = O2[2] | 0, Ae2 = Me2 & 8191, xe2 = Me2 >>> 13, ae2 = O2[3] | 0, N2 = ae2 & 8191, re2 = ae2 >>> 13, fe2 = O2[4] | 0, Ne2 = fe2 & 8191, Oe2 = fe2 >>> 13, qe2 = O2[5] | 0, je2 = qe2 & 8191, Fe2 = qe2 >>> 13, yt = O2[6] | 0, Xe2 = yt & 8191, Ge2 = yt >>> 13, V2 = O2[7] | 0, ge2 = V2 & 8191, we2 = V2 >>> 13, We2 = O2[8] | 0, Re2 = We2 & 8191, J2 = We2 >>> 13, _e = O2[9] | 0, ue2 = _e & 8191, ce2 = _e >>> 13, ve2 = A2[0] | 0, Ce2 = ve2 & 8191, Be2 = ve2 >>> 13, He2 = A2[1] | 0, Ve2 = He2 & 8191, Ze2 = He2 >>> 13, Ke2 = A2[2] | 0, U2 = Ke2 & 8191, se2 = Ke2 >>> 13, Se2 = A2[3] | 0, Ue2 = Se2 & 8191, De2 = Se2 >>> 13, Ye2 = A2[4] | 0, Qe2 = Ye2 & 8191, st = Ye2 >>> 13, St = A2[5] | 0, tt = St & 8191, it = St >>> 13, Tt = A2[6] | 0, rt = Tt & 8191, dt = Tt >>> 13, wt = A2[7] | 0, nt = wt & 8191, at = wt >>> 13, gt = A2[8] | 0, ot = gt & 8191, ct = gt >>> 13, Ct = A2[9] | 0, ut = Ct & 8191, lt = Ct >>> 13;
      k.negative = b.negative ^ E2.negative, k.length = 19, B2 = Math.imul(me2, Ce2), T2 = Math.imul(me2, Be2), T2 = T2 + Math.imul(Ie2, Ce2) | 0, D2 = Math.imul(Ie2, Be2);
      var kt = (Y2 + B2 | 0) + ((T2 & 8191) << 13) | 0;
      Y2 = (D2 + (T2 >>> 13) | 0) + (kt >>> 26) | 0, kt &= 67108863, B2 = Math.imul(ye2, Ce2), T2 = Math.imul(ye2, Be2), T2 = T2 + Math.imul(he2, Ce2) | 0, D2 = Math.imul(he2, Be2), B2 = B2 + Math.imul(me2, Ve2) | 0, T2 = T2 + Math.imul(me2, Ze2) | 0, T2 = T2 + Math.imul(Ie2, Ve2) | 0, D2 = D2 + Math.imul(Ie2, Ze2) | 0;
      var Rt = (Y2 + B2 | 0) + ((T2 & 8191) << 13) | 0;
      Y2 = (D2 + (T2 >>> 13) | 0) + (Rt >>> 26) | 0, Rt &= 67108863, B2 = Math.imul(Ae2, Ce2), T2 = Math.imul(Ae2, Be2), T2 = T2 + Math.imul(xe2, Ce2) | 0, D2 = Math.imul(xe2, Be2), B2 = B2 + Math.imul(ye2, Ve2) | 0, T2 = T2 + Math.imul(ye2, Ze2) | 0, T2 = T2 + Math.imul(he2, Ve2) | 0, D2 = D2 + Math.imul(he2, Ze2) | 0, B2 = B2 + Math.imul(me2, U2) | 0, T2 = T2 + Math.imul(me2, se2) | 0, T2 = T2 + Math.imul(Ie2, U2) | 0, D2 = D2 + Math.imul(Ie2, se2) | 0;
      var Je2 = (Y2 + B2 | 0) + ((T2 & 8191) << 13) | 0;
      Y2 = (D2 + (T2 >>> 13) | 0) + (Je2 >>> 26) | 0, Je2 &= 67108863, B2 = Math.imul(N2, Ce2), T2 = Math.imul(N2, Be2), T2 = T2 + Math.imul(re2, Ce2) | 0, D2 = Math.imul(re2, Be2), B2 = B2 + Math.imul(Ae2, Ve2) | 0, T2 = T2 + Math.imul(Ae2, Ze2) | 0, T2 = T2 + Math.imul(xe2, Ve2) | 0, D2 = D2 + Math.imul(xe2, Ze2) | 0, B2 = B2 + Math.imul(ye2, U2) | 0, T2 = T2 + Math.imul(ye2, se2) | 0, T2 = T2 + Math.imul(he2, U2) | 0, D2 = D2 + Math.imul(he2, se2) | 0, B2 = B2 + Math.imul(me2, Ue2) | 0, T2 = T2 + Math.imul(me2, De2) | 0, T2 = T2 + Math.imul(Ie2, Ue2) | 0, D2 = D2 + Math.imul(Ie2, De2) | 0;
      var ze2 = (Y2 + B2 | 0) + ((T2 & 8191) << 13) | 0;
      Y2 = (D2 + (T2 >>> 13) | 0) + (ze2 >>> 26) | 0, ze2 &= 67108863, B2 = Math.imul(Ne2, Ce2), T2 = Math.imul(Ne2, Be2), T2 = T2 + Math.imul(Oe2, Ce2) | 0, D2 = Math.imul(Oe2, Be2), B2 = B2 + Math.imul(N2, Ve2) | 0, T2 = T2 + Math.imul(N2, Ze2) | 0, T2 = T2 + Math.imul(re2, Ve2) | 0, D2 = D2 + Math.imul(re2, Ze2) | 0, B2 = B2 + Math.imul(Ae2, U2) | 0, T2 = T2 + Math.imul(Ae2, se2) | 0, T2 = T2 + Math.imul(xe2, U2) | 0, D2 = D2 + Math.imul(xe2, se2) | 0, B2 = B2 + Math.imul(ye2, Ue2) | 0, T2 = T2 + Math.imul(ye2, De2) | 0, T2 = T2 + Math.imul(he2, Ue2) | 0, D2 = D2 + Math.imul(he2, De2) | 0, B2 = B2 + Math.imul(me2, Qe2) | 0, T2 = T2 + Math.imul(me2, st) | 0, T2 = T2 + Math.imul(Ie2, Qe2) | 0, D2 = D2 + Math.imul(Ie2, st) | 0;
      var et = (Y2 + B2 | 0) + ((T2 & 8191) << 13) | 0;
      Y2 = (D2 + (T2 >>> 13) | 0) + (et >>> 26) | 0, et &= 67108863, B2 = Math.imul(je2, Ce2), T2 = Math.imul(je2, Be2), T2 = T2 + Math.imul(Fe2, Ce2) | 0, D2 = Math.imul(Fe2, Be2), B2 = B2 + Math.imul(Ne2, Ve2) | 0, T2 = T2 + Math.imul(Ne2, Ze2) | 0, T2 = T2 + Math.imul(Oe2, Ve2) | 0, D2 = D2 + Math.imul(Oe2, Ze2) | 0, B2 = B2 + Math.imul(N2, U2) | 0, T2 = T2 + Math.imul(N2, se2) | 0, T2 = T2 + Math.imul(re2, U2) | 0, D2 = D2 + Math.imul(re2, se2) | 0, B2 = B2 + Math.imul(Ae2, Ue2) | 0, T2 = T2 + Math.imul(Ae2, De2) | 0, T2 = T2 + Math.imul(xe2, Ue2) | 0, D2 = D2 + Math.imul(xe2, De2) | 0, B2 = B2 + Math.imul(ye2, Qe2) | 0, T2 = T2 + Math.imul(ye2, st) | 0, T2 = T2 + Math.imul(he2, Qe2) | 0, D2 = D2 + Math.imul(he2, st) | 0, B2 = B2 + Math.imul(me2, tt) | 0, T2 = T2 + Math.imul(me2, it) | 0, T2 = T2 + Math.imul(Ie2, tt) | 0, D2 = D2 + Math.imul(Ie2, it) | 0;
      var pt = (Y2 + B2 | 0) + ((T2 & 8191) << 13) | 0;
      Y2 = (D2 + (T2 >>> 13) | 0) + (pt >>> 26) | 0, pt &= 67108863, B2 = Math.imul(Xe2, Ce2), T2 = Math.imul(Xe2, Be2), T2 = T2 + Math.imul(Ge2, Ce2) | 0, D2 = Math.imul(Ge2, Be2), B2 = B2 + Math.imul(je2, Ve2) | 0, T2 = T2 + Math.imul(je2, Ze2) | 0, T2 = T2 + Math.imul(Fe2, Ve2) | 0, D2 = D2 + Math.imul(Fe2, Ze2) | 0, B2 = B2 + Math.imul(Ne2, U2) | 0, T2 = T2 + Math.imul(Ne2, se2) | 0, T2 = T2 + Math.imul(Oe2, U2) | 0, D2 = D2 + Math.imul(Oe2, se2) | 0, B2 = B2 + Math.imul(N2, Ue2) | 0, T2 = T2 + Math.imul(N2, De2) | 0, T2 = T2 + Math.imul(re2, Ue2) | 0, D2 = D2 + Math.imul(re2, De2) | 0, B2 = B2 + Math.imul(Ae2, Qe2) | 0, T2 = T2 + Math.imul(Ae2, st) | 0, T2 = T2 + Math.imul(xe2, Qe2) | 0, D2 = D2 + Math.imul(xe2, st) | 0, B2 = B2 + Math.imul(ye2, tt) | 0, T2 = T2 + Math.imul(ye2, it) | 0, T2 = T2 + Math.imul(he2, tt) | 0, D2 = D2 + Math.imul(he2, it) | 0, B2 = B2 + Math.imul(me2, rt) | 0, T2 = T2 + Math.imul(me2, dt) | 0, T2 = T2 + Math.imul(Ie2, rt) | 0, D2 = D2 + Math.imul(Ie2, dt) | 0;
      var mt = (Y2 + B2 | 0) + ((T2 & 8191) << 13) | 0;
      Y2 = (D2 + (T2 >>> 13) | 0) + (mt >>> 26) | 0, mt &= 67108863, B2 = Math.imul(ge2, Ce2), T2 = Math.imul(ge2, Be2), T2 = T2 + Math.imul(we2, Ce2) | 0, D2 = Math.imul(we2, Be2), B2 = B2 + Math.imul(Xe2, Ve2) | 0, T2 = T2 + Math.imul(Xe2, Ze2) | 0, T2 = T2 + Math.imul(Ge2, Ve2) | 0, D2 = D2 + Math.imul(Ge2, Ze2) | 0, B2 = B2 + Math.imul(je2, U2) | 0, T2 = T2 + Math.imul(je2, se2) | 0, T2 = T2 + Math.imul(Fe2, U2) | 0, D2 = D2 + Math.imul(Fe2, se2) | 0, B2 = B2 + Math.imul(Ne2, Ue2) | 0, T2 = T2 + Math.imul(Ne2, De2) | 0, T2 = T2 + Math.imul(Oe2, Ue2) | 0, D2 = D2 + Math.imul(Oe2, De2) | 0, B2 = B2 + Math.imul(N2, Qe2) | 0, T2 = T2 + Math.imul(N2, st) | 0, T2 = T2 + Math.imul(re2, Qe2) | 0, D2 = D2 + Math.imul(re2, st) | 0, B2 = B2 + Math.imul(Ae2, tt) | 0, T2 = T2 + Math.imul(Ae2, it) | 0, T2 = T2 + Math.imul(xe2, tt) | 0, D2 = D2 + Math.imul(xe2, it) | 0, B2 = B2 + Math.imul(ye2, rt) | 0, T2 = T2 + Math.imul(ye2, dt) | 0, T2 = T2 + Math.imul(he2, rt) | 0, D2 = D2 + Math.imul(he2, dt) | 0, B2 = B2 + Math.imul(me2, nt) | 0, T2 = T2 + Math.imul(me2, at) | 0, T2 = T2 + Math.imul(Ie2, nt) | 0, D2 = D2 + Math.imul(Ie2, at) | 0;
      var vt = (Y2 + B2 | 0) + ((T2 & 8191) << 13) | 0;
      Y2 = (D2 + (T2 >>> 13) | 0) + (vt >>> 26) | 0, vt &= 67108863, B2 = Math.imul(Re2, Ce2), T2 = Math.imul(Re2, Be2), T2 = T2 + Math.imul(J2, Ce2) | 0, D2 = Math.imul(J2, Be2), B2 = B2 + Math.imul(ge2, Ve2) | 0, T2 = T2 + Math.imul(ge2, Ze2) | 0, T2 = T2 + Math.imul(we2, Ve2) | 0, D2 = D2 + Math.imul(we2, Ze2) | 0, B2 = B2 + Math.imul(Xe2, U2) | 0, T2 = T2 + Math.imul(Xe2, se2) | 0, T2 = T2 + Math.imul(Ge2, U2) | 0, D2 = D2 + Math.imul(Ge2, se2) | 0, B2 = B2 + Math.imul(je2, Ue2) | 0, T2 = T2 + Math.imul(je2, De2) | 0, T2 = T2 + Math.imul(Fe2, Ue2) | 0, D2 = D2 + Math.imul(Fe2, De2) | 0, B2 = B2 + Math.imul(Ne2, Qe2) | 0, T2 = T2 + Math.imul(Ne2, st) | 0, T2 = T2 + Math.imul(Oe2, Qe2) | 0, D2 = D2 + Math.imul(Oe2, st) | 0, B2 = B2 + Math.imul(N2, tt) | 0, T2 = T2 + Math.imul(N2, it) | 0, T2 = T2 + Math.imul(re2, tt) | 0, D2 = D2 + Math.imul(re2, it) | 0, B2 = B2 + Math.imul(Ae2, rt) | 0, T2 = T2 + Math.imul(Ae2, dt) | 0, T2 = T2 + Math.imul(xe2, rt) | 0, D2 = D2 + Math.imul(xe2, dt) | 0, B2 = B2 + Math.imul(ye2, nt) | 0, T2 = T2 + Math.imul(ye2, at) | 0, T2 = T2 + Math.imul(he2, nt) | 0, D2 = D2 + Math.imul(he2, at) | 0, B2 = B2 + Math.imul(me2, ot) | 0, T2 = T2 + Math.imul(me2, ct) | 0, T2 = T2 + Math.imul(Ie2, ot) | 0, D2 = D2 + Math.imul(Ie2, ct) | 0;
      var ht = (Y2 + B2 | 0) + ((T2 & 8191) << 13) | 0;
      Y2 = (D2 + (T2 >>> 13) | 0) + (ht >>> 26) | 0, ht &= 67108863, B2 = Math.imul(ue2, Ce2), T2 = Math.imul(ue2, Be2), T2 = T2 + Math.imul(ce2, Ce2) | 0, D2 = Math.imul(ce2, Be2), B2 = B2 + Math.imul(Re2, Ve2) | 0, T2 = T2 + Math.imul(Re2, Ze2) | 0, T2 = T2 + Math.imul(J2, Ve2) | 0, D2 = D2 + Math.imul(J2, Ze2) | 0, B2 = B2 + Math.imul(ge2, U2) | 0, T2 = T2 + Math.imul(ge2, se2) | 0, T2 = T2 + Math.imul(we2, U2) | 0, D2 = D2 + Math.imul(we2, se2) | 0, B2 = B2 + Math.imul(Xe2, Ue2) | 0, T2 = T2 + Math.imul(Xe2, De2) | 0, T2 = T2 + Math.imul(Ge2, Ue2) | 0, D2 = D2 + Math.imul(Ge2, De2) | 0, B2 = B2 + Math.imul(je2, Qe2) | 0, T2 = T2 + Math.imul(je2, st) | 0, T2 = T2 + Math.imul(Fe2, Qe2) | 0, D2 = D2 + Math.imul(Fe2, st) | 0, B2 = B2 + Math.imul(Ne2, tt) | 0, T2 = T2 + Math.imul(Ne2, it) | 0, T2 = T2 + Math.imul(Oe2, tt) | 0, D2 = D2 + Math.imul(Oe2, it) | 0, B2 = B2 + Math.imul(N2, rt) | 0, T2 = T2 + Math.imul(N2, dt) | 0, T2 = T2 + Math.imul(re2, rt) | 0, D2 = D2 + Math.imul(re2, dt) | 0, B2 = B2 + Math.imul(Ae2, nt) | 0, T2 = T2 + Math.imul(Ae2, at) | 0, T2 = T2 + Math.imul(xe2, nt) | 0, D2 = D2 + Math.imul(xe2, at) | 0, B2 = B2 + Math.imul(ye2, ot) | 0, T2 = T2 + Math.imul(ye2, ct) | 0, T2 = T2 + Math.imul(he2, ot) | 0, D2 = D2 + Math.imul(he2, ct) | 0, B2 = B2 + Math.imul(me2, ut) | 0, T2 = T2 + Math.imul(me2, lt) | 0, T2 = T2 + Math.imul(Ie2, ut) | 0, D2 = D2 + Math.imul(Ie2, lt) | 0;
      var _t = (Y2 + B2 | 0) + ((T2 & 8191) << 13) | 0;
      Y2 = (D2 + (T2 >>> 13) | 0) + (_t >>> 26) | 0, _t &= 67108863, B2 = Math.imul(ue2, Ve2), T2 = Math.imul(ue2, Ze2), T2 = T2 + Math.imul(ce2, Ve2) | 0, D2 = Math.imul(ce2, Ze2), B2 = B2 + Math.imul(Re2, U2) | 0, T2 = T2 + Math.imul(Re2, se2) | 0, T2 = T2 + Math.imul(J2, U2) | 0, D2 = D2 + Math.imul(J2, se2) | 0, B2 = B2 + Math.imul(ge2, Ue2) | 0, T2 = T2 + Math.imul(ge2, De2) | 0, T2 = T2 + Math.imul(we2, Ue2) | 0, D2 = D2 + Math.imul(we2, De2) | 0, B2 = B2 + Math.imul(Xe2, Qe2) | 0, T2 = T2 + Math.imul(Xe2, st) | 0, T2 = T2 + Math.imul(Ge2, Qe2) | 0, D2 = D2 + Math.imul(Ge2, st) | 0, B2 = B2 + Math.imul(je2, tt) | 0, T2 = T2 + Math.imul(je2, it) | 0, T2 = T2 + Math.imul(Fe2, tt) | 0, D2 = D2 + Math.imul(Fe2, it) | 0, B2 = B2 + Math.imul(Ne2, rt) | 0, T2 = T2 + Math.imul(Ne2, dt) | 0, T2 = T2 + Math.imul(Oe2, rt) | 0, D2 = D2 + Math.imul(Oe2, dt) | 0, B2 = B2 + Math.imul(N2, nt) | 0, T2 = T2 + Math.imul(N2, at) | 0, T2 = T2 + Math.imul(re2, nt) | 0, D2 = D2 + Math.imul(re2, at) | 0, B2 = B2 + Math.imul(Ae2, ot) | 0, T2 = T2 + Math.imul(Ae2, ct) | 0, T2 = T2 + Math.imul(xe2, ot) | 0, D2 = D2 + Math.imul(xe2, ct) | 0, B2 = B2 + Math.imul(ye2, ut) | 0, T2 = T2 + Math.imul(ye2, lt) | 0, T2 = T2 + Math.imul(he2, ut) | 0, D2 = D2 + Math.imul(he2, lt) | 0;
      var Et = (Y2 + B2 | 0) + ((T2 & 8191) << 13) | 0;
      Y2 = (D2 + (T2 >>> 13) | 0) + (Et >>> 26) | 0, Et &= 67108863, B2 = Math.imul(ue2, U2), T2 = Math.imul(ue2, se2), T2 = T2 + Math.imul(ce2, U2) | 0, D2 = Math.imul(ce2, se2), B2 = B2 + Math.imul(Re2, Ue2) | 0, T2 = T2 + Math.imul(Re2, De2) | 0, T2 = T2 + Math.imul(J2, Ue2) | 0, D2 = D2 + Math.imul(J2, De2) | 0, B2 = B2 + Math.imul(ge2, Qe2) | 0, T2 = T2 + Math.imul(ge2, st) | 0, T2 = T2 + Math.imul(we2, Qe2) | 0, D2 = D2 + Math.imul(we2, st) | 0, B2 = B2 + Math.imul(Xe2, tt) | 0, T2 = T2 + Math.imul(Xe2, it) | 0, T2 = T2 + Math.imul(Ge2, tt) | 0, D2 = D2 + Math.imul(Ge2, it) | 0, B2 = B2 + Math.imul(je2, rt) | 0, T2 = T2 + Math.imul(je2, dt) | 0, T2 = T2 + Math.imul(Fe2, rt) | 0, D2 = D2 + Math.imul(Fe2, dt) | 0, B2 = B2 + Math.imul(Ne2, nt) | 0, T2 = T2 + Math.imul(Ne2, at) | 0, T2 = T2 + Math.imul(Oe2, nt) | 0, D2 = D2 + Math.imul(Oe2, at) | 0, B2 = B2 + Math.imul(N2, ot) | 0, T2 = T2 + Math.imul(N2, ct) | 0, T2 = T2 + Math.imul(re2, ot) | 0, D2 = D2 + Math.imul(re2, ct) | 0, B2 = B2 + Math.imul(Ae2, ut) | 0, T2 = T2 + Math.imul(Ae2, lt) | 0, T2 = T2 + Math.imul(xe2, ut) | 0, D2 = D2 + Math.imul(xe2, lt) | 0;
      var Pt = (Y2 + B2 | 0) + ((T2 & 8191) << 13) | 0;
      Y2 = (D2 + (T2 >>> 13) | 0) + (Pt >>> 26) | 0, Pt &= 67108863, B2 = Math.imul(ue2, Ue2), T2 = Math.imul(ue2, De2), T2 = T2 + Math.imul(ce2, Ue2) | 0, D2 = Math.imul(ce2, De2), B2 = B2 + Math.imul(Re2, Qe2) | 0, T2 = T2 + Math.imul(Re2, st) | 0, T2 = T2 + Math.imul(J2, Qe2) | 0, D2 = D2 + Math.imul(J2, st) | 0, B2 = B2 + Math.imul(ge2, tt) | 0, T2 = T2 + Math.imul(ge2, it) | 0, T2 = T2 + Math.imul(we2, tt) | 0, D2 = D2 + Math.imul(we2, it) | 0, B2 = B2 + Math.imul(Xe2, rt) | 0, T2 = T2 + Math.imul(Xe2, dt) | 0, T2 = T2 + Math.imul(Ge2, rt) | 0, D2 = D2 + Math.imul(Ge2, dt) | 0, B2 = B2 + Math.imul(je2, nt) | 0, T2 = T2 + Math.imul(je2, at) | 0, T2 = T2 + Math.imul(Fe2, nt) | 0, D2 = D2 + Math.imul(Fe2, at) | 0, B2 = B2 + Math.imul(Ne2, ot) | 0, T2 = T2 + Math.imul(Ne2, ct) | 0, T2 = T2 + Math.imul(Oe2, ot) | 0, D2 = D2 + Math.imul(Oe2, ct) | 0, B2 = B2 + Math.imul(N2, ut) | 0, T2 = T2 + Math.imul(N2, lt) | 0, T2 = T2 + Math.imul(re2, ut) | 0, D2 = D2 + Math.imul(re2, lt) | 0;
      var Nt = (Y2 + B2 | 0) + ((T2 & 8191) << 13) | 0;
      Y2 = (D2 + (T2 >>> 13) | 0) + (Nt >>> 26) | 0, Nt &= 67108863, B2 = Math.imul(ue2, Qe2), T2 = Math.imul(ue2, st), T2 = T2 + Math.imul(ce2, Qe2) | 0, D2 = Math.imul(ce2, st), B2 = B2 + Math.imul(Re2, tt) | 0, T2 = T2 + Math.imul(Re2, it) | 0, T2 = T2 + Math.imul(J2, tt) | 0, D2 = D2 + Math.imul(J2, it) | 0, B2 = B2 + Math.imul(ge2, rt) | 0, T2 = T2 + Math.imul(ge2, dt) | 0, T2 = T2 + Math.imul(we2, rt) | 0, D2 = D2 + Math.imul(we2, dt) | 0, B2 = B2 + Math.imul(Xe2, nt) | 0, T2 = T2 + Math.imul(Xe2, at) | 0, T2 = T2 + Math.imul(Ge2, nt) | 0, D2 = D2 + Math.imul(Ge2, at) | 0, B2 = B2 + Math.imul(je2, ot) | 0, T2 = T2 + Math.imul(je2, ct) | 0, T2 = T2 + Math.imul(Fe2, ot) | 0, D2 = D2 + Math.imul(Fe2, ct) | 0, B2 = B2 + Math.imul(Ne2, ut) | 0, T2 = T2 + Math.imul(Ne2, lt) | 0, T2 = T2 + Math.imul(Oe2, ut) | 0, D2 = D2 + Math.imul(Oe2, lt) | 0;
      var Mt = (Y2 + B2 | 0) + ((T2 & 8191) << 13) | 0;
      Y2 = (D2 + (T2 >>> 13) | 0) + (Mt >>> 26) | 0, Mt &= 67108863, B2 = Math.imul(ue2, tt), T2 = Math.imul(ue2, it), T2 = T2 + Math.imul(ce2, tt) | 0, D2 = Math.imul(ce2, it), B2 = B2 + Math.imul(Re2, rt) | 0, T2 = T2 + Math.imul(Re2, dt) | 0, T2 = T2 + Math.imul(J2, rt) | 0, D2 = D2 + Math.imul(J2, dt) | 0, B2 = B2 + Math.imul(ge2, nt) | 0, T2 = T2 + Math.imul(ge2, at) | 0, T2 = T2 + Math.imul(we2, nt) | 0, D2 = D2 + Math.imul(we2, at) | 0, B2 = B2 + Math.imul(Xe2, ot) | 0, T2 = T2 + Math.imul(Xe2, ct) | 0, T2 = T2 + Math.imul(Ge2, ot) | 0, D2 = D2 + Math.imul(Ge2, ct) | 0, B2 = B2 + Math.imul(je2, ut) | 0, T2 = T2 + Math.imul(je2, lt) | 0, T2 = T2 + Math.imul(Fe2, ut) | 0, D2 = D2 + Math.imul(Fe2, lt) | 0;
      var Ot = (Y2 + B2 | 0) + ((T2 & 8191) << 13) | 0;
      Y2 = (D2 + (T2 >>> 13) | 0) + (Ot >>> 26) | 0, Ot &= 67108863, B2 = Math.imul(ue2, rt), T2 = Math.imul(ue2, dt), T2 = T2 + Math.imul(ce2, rt) | 0, D2 = Math.imul(ce2, dt), B2 = B2 + Math.imul(Re2, nt) | 0, T2 = T2 + Math.imul(Re2, at) | 0, T2 = T2 + Math.imul(J2, nt) | 0, D2 = D2 + Math.imul(J2, at) | 0, B2 = B2 + Math.imul(ge2, ot) | 0, T2 = T2 + Math.imul(ge2, ct) | 0, T2 = T2 + Math.imul(we2, ot) | 0, D2 = D2 + Math.imul(we2, ct) | 0, B2 = B2 + Math.imul(Xe2, ut) | 0, T2 = T2 + Math.imul(Xe2, lt) | 0, T2 = T2 + Math.imul(Ge2, ut) | 0, D2 = D2 + Math.imul(Ge2, lt) | 0;
      var $t = (Y2 + B2 | 0) + ((T2 & 8191) << 13) | 0;
      Y2 = (D2 + (T2 >>> 13) | 0) + ($t >>> 26) | 0, $t &= 67108863, B2 = Math.imul(ue2, nt), T2 = Math.imul(ue2, at), T2 = T2 + Math.imul(ce2, nt) | 0, D2 = Math.imul(ce2, at), B2 = B2 + Math.imul(Re2, ot) | 0, T2 = T2 + Math.imul(Re2, ct) | 0, T2 = T2 + Math.imul(J2, ot) | 0, D2 = D2 + Math.imul(J2, ct) | 0, B2 = B2 + Math.imul(ge2, ut) | 0, T2 = T2 + Math.imul(ge2, lt) | 0, T2 = T2 + Math.imul(we2, ut) | 0, D2 = D2 + Math.imul(we2, lt) | 0;
      var Bt = (Y2 + B2 | 0) + ((T2 & 8191) << 13) | 0;
      Y2 = (D2 + (T2 >>> 13) | 0) + (Bt >>> 26) | 0, Bt &= 67108863, B2 = Math.imul(ue2, ot), T2 = Math.imul(ue2, ct), T2 = T2 + Math.imul(ce2, ot) | 0, D2 = Math.imul(ce2, ct), B2 = B2 + Math.imul(Re2, ut) | 0, T2 = T2 + Math.imul(Re2, lt) | 0, T2 = T2 + Math.imul(J2, ut) | 0, D2 = D2 + Math.imul(J2, lt) | 0;
      var xt = (Y2 + B2 | 0) + ((T2 & 8191) << 13) | 0;
      Y2 = (D2 + (T2 >>> 13) | 0) + (xt >>> 26) | 0, xt &= 67108863, B2 = Math.imul(ue2, ut), T2 = Math.imul(ue2, lt), T2 = T2 + Math.imul(ce2, ut) | 0, D2 = Math.imul(ce2, lt);
      var Ut = (Y2 + B2 | 0) + ((T2 & 8191) << 13) | 0;
      return Y2 = (D2 + (T2 >>> 13) | 0) + (Ut >>> 26) | 0, Ut &= 67108863, x2[0] = kt, x2[1] = Rt, x2[2] = Je2, x2[3] = ze2, x2[4] = et, x2[5] = pt, x2[6] = mt, x2[7] = vt, x2[8] = ht, x2[9] = _t, x2[10] = Et, x2[11] = Pt, x2[12] = Nt, x2[13] = Mt, x2[14] = Ot, x2[15] = $t, x2[16] = Bt, x2[17] = xt, x2[18] = Ut, Y2 !== 0 && (x2[19] = Y2, k.length++), k;
    };
    Math.imul || (ie2 = X2);
    function Q2(C2, b, E2) {
      E2.negative = b.negative ^ C2.negative, E2.length = C2.length + b.length;
      for (var k = 0, O2 = 0, A2 = 0; A2 < E2.length - 1; A2++) {
        var x2 = O2;
        O2 = 0;
        for (var Y2 = k & 67108863, B2 = Math.min(A2, b.length - 1), T2 = Math.max(0, A2 - C2.length + 1); T2 <= B2; T2++) {
          var D2 = A2 - T2, te2 = C2.words[D2] | 0, me2 = b.words[T2] | 0, Ie2 = te2 * me2, $e2 = Ie2 & 67108863;
          x2 = x2 + (Ie2 / 67108864 | 0) | 0, $e2 = $e2 + Y2 | 0, Y2 = $e2 & 67108863, x2 = x2 + ($e2 >>> 26) | 0, O2 += x2 >>> 26, x2 &= 67108863;
        }
        E2.words[A2] = Y2, k = x2, x2 = O2;
      }
      return k !== 0 ? E2.words[A2] = k : E2.length--, E2.strip();
    }
    function ne2(C2, b, E2) {
      var k = new Z2();
      return k.mulp(C2, b, E2);
    }
    p2.prototype.mulTo = function(b, E2) {
      var k, O2 = this.length + b.length;
      return this.length === 10 && b.length === 10 ? k = ie2(this, b, E2) : O2 < 63 ? k = X2(this, b, E2) : O2 < 1024 ? k = Q2(this, b, E2) : k = ne2(this, b, E2), k;
    };
    function Z2(C2, b) {
      this.x = C2, this.y = b;
    }
    Z2.prototype.makeRBT = function(b) {
      for (var E2 = new Array(b), k = p2.prototype._countBits(b) - 1, O2 = 0; O2 < b; O2++)
        E2[O2] = this.revBin(O2, k, b);
      return E2;
    }, Z2.prototype.revBin = function(b, E2, k) {
      if (b === 0 || b === k - 1)
        return b;
      for (var O2 = 0, A2 = 0; A2 < E2; A2++)
        O2 |= (b & 1) << E2 - A2 - 1, b >>= 1;
      return O2;
    }, Z2.prototype.permute = function(b, E2, k, O2, A2, x2) {
      for (var Y2 = 0; Y2 < x2; Y2++)
        O2[Y2] = E2[b[Y2]], A2[Y2] = k[b[Y2]];
    }, Z2.prototype.transform = function(b, E2, k, O2, A2, x2) {
      this.permute(x2, b, E2, k, O2, A2);
      for (var Y2 = 1; Y2 < A2; Y2 <<= 1)
        for (var B2 = Y2 << 1, T2 = Math.cos(2 * Math.PI / B2), D2 = Math.sin(2 * Math.PI / B2), te2 = 0; te2 < A2; te2 += B2)
          for (var me2 = T2, Ie2 = D2, $e2 = 0; $e2 < Y2; $e2++) {
            var ye2 = k[te2 + $e2], he2 = O2[te2 + $e2], Me2 = k[te2 + $e2 + Y2], Ae2 = O2[te2 + $e2 + Y2], xe2 = me2 * Me2 - Ie2 * Ae2;
            Ae2 = me2 * Ae2 + Ie2 * Me2, Me2 = xe2, k[te2 + $e2] = ye2 + Me2, O2[te2 + $e2] = he2 + Ae2, k[te2 + $e2 + Y2] = ye2 - Me2, O2[te2 + $e2 + Y2] = he2 - Ae2, $e2 !== B2 && (xe2 = T2 * me2 - D2 * Ie2, Ie2 = T2 * Ie2 + D2 * me2, me2 = xe2);
          }
    }, Z2.prototype.guessLen13b = function(b, E2) {
      var k = Math.max(E2, b) | 1, O2 = k & 1, A2 = 0;
      for (k = k / 2 | 0; k; k = k >>> 1)
        A2++;
      return 1 << A2 + 1 + O2;
    }, Z2.prototype.conjugate = function(b, E2, k) {
      if (!(k <= 1))
        for (var O2 = 0; O2 < k / 2; O2++) {
          var A2 = b[O2];
          b[O2] = b[k - O2 - 1], b[k - O2 - 1] = A2, A2 = E2[O2], E2[O2] = -E2[k - O2 - 1], E2[k - O2 - 1] = -A2;
        }
    }, Z2.prototype.normalize13b = function(b, E2) {
      for (var k = 0, O2 = 0; O2 < E2 / 2; O2++) {
        var A2 = Math.round(b[2 * O2 + 1] / E2) * 8192 + Math.round(b[2 * O2] / E2) + k;
        b[O2] = A2 & 67108863, A2 < 67108864 ? k = 0 : k = A2 / 67108864 | 0;
      }
      return b;
    }, Z2.prototype.convert13b = function(b, E2, k, O2) {
      for (var A2 = 0, x2 = 0; x2 < E2; x2++)
        A2 = A2 + (b[x2] | 0), k[2 * x2] = A2 & 8191, A2 = A2 >>> 13, k[2 * x2 + 1] = A2 & 8191, A2 = A2 >>> 13;
      for (x2 = 2 * E2; x2 < O2; ++x2)
        k[x2] = 0;
      l2(A2 === 0), l2((A2 & -8192) === 0);
    }, Z2.prototype.stub = function(b) {
      for (var E2 = new Array(b), k = 0; k < b; k++)
        E2[k] = 0;
      return E2;
    }, Z2.prototype.mulp = function(b, E2, k) {
      var O2 = 2 * this.guessLen13b(b.length, E2.length), A2 = this.makeRBT(O2), x2 = this.stub(O2), Y2 = new Array(O2), B2 = new Array(O2), T2 = new Array(O2), D2 = new Array(O2), te2 = new Array(O2), me2 = new Array(O2), Ie2 = k.words;
      Ie2.length = O2, this.convert13b(b.words, b.length, Y2, O2), this.convert13b(E2.words, E2.length, D2, O2), this.transform(Y2, x2, B2, T2, O2, A2), this.transform(D2, x2, te2, me2, O2, A2);
      for (var $e2 = 0; $e2 < O2; $e2++) {
        var ye2 = B2[$e2] * te2[$e2] - T2[$e2] * me2[$e2];
        T2[$e2] = B2[$e2] * me2[$e2] + T2[$e2] * te2[$e2], B2[$e2] = ye2;
      }
      return this.conjugate(B2, T2, O2), this.transform(B2, T2, Ie2, x2, O2, A2), this.conjugate(Ie2, x2, O2), this.normalize13b(Ie2, O2), k.negative = b.negative ^ E2.negative, k.length = b.length + E2.length, k.strip();
    }, p2.prototype.mul = function(b) {
      var E2 = new p2(null);
      return E2.words = new Array(this.length + b.length), this.mulTo(b, E2);
    }, p2.prototype.mulf = function(b) {
      var E2 = new p2(null);
      return E2.words = new Array(this.length + b.length), ne2(this, b, E2);
    }, p2.prototype.imul = function(b) {
      return this.clone().mulTo(b, this);
    }, p2.prototype.imuln = function(b) {
      l2(typeof b == "number"), l2(b < 67108864);
      for (var E2 = 0, k = 0; k < this.length; k++) {
        var O2 = (this.words[k] | 0) * b, A2 = (O2 & 67108863) + (E2 & 67108863);
        E2 >>= 26, E2 += O2 / 67108864 | 0, E2 += A2 >>> 26, this.words[k] = A2 & 67108863;
      }
      return E2 !== 0 && (this.words[k] = E2, this.length++), this;
    }, p2.prototype.muln = function(b) {
      return this.clone().imuln(b);
    }, p2.prototype.sqr = function() {
      return this.mul(this);
    }, p2.prototype.isqr = function() {
      return this.imul(this.clone());
    }, p2.prototype.pow = function(b) {
      var E2 = ee2(b);
      if (E2.length === 0)
        return new p2(1);
      for (var k = this, O2 = 0; O2 < E2.length && E2[O2] === 0; O2++, k = k.sqr())
        ;
      if (++O2 < E2.length)
        for (var A2 = k.sqr(); O2 < E2.length; O2++, A2 = A2.sqr())
          E2[O2] !== 0 && (k = k.mul(A2));
      return k;
    }, p2.prototype.iushln = function(b) {
      l2(typeof b == "number" && b >= 0);
      var E2 = b % 26, k = (b - E2) / 26, O2 = 67108863 >>> 26 - E2 << 26 - E2, A2;
      if (E2 !== 0) {
        var x2 = 0;
        for (A2 = 0; A2 < this.length; A2++) {
          var Y2 = this.words[A2] & O2, B2 = (this.words[A2] | 0) - Y2 << E2;
          this.words[A2] = B2 | x2, x2 = Y2 >>> 26 - E2;
        }
        x2 && (this.words[A2] = x2, this.length++);
      }
      if (k !== 0) {
        for (A2 = this.length - 1; A2 >= 0; A2--)
          this.words[A2 + k] = this.words[A2];
        for (A2 = 0; A2 < k; A2++)
          this.words[A2] = 0;
        this.length += k;
      }
      return this.strip();
    }, p2.prototype.ishln = function(b) {
      return l2(this.negative === 0), this.iushln(b);
    }, p2.prototype.iushrn = function(b, E2, k) {
      l2(typeof b == "number" && b >= 0);
      var O2;
      E2 ? O2 = (E2 - E2 % 26) / 26 : O2 = 0;
      var A2 = b % 26, x2 = Math.min((b - A2) / 26, this.length), Y2 = 67108863 ^ 67108863 >>> A2 << A2, B2 = k;
      if (O2 -= x2, O2 = Math.max(0, O2), B2) {
        for (var T2 = 0; T2 < x2; T2++)
          B2.words[T2] = this.words[T2];
        B2.length = x2;
      }
      if (x2 !== 0)
        if (this.length > x2)
          for (this.length -= x2, T2 = 0; T2 < this.length; T2++)
            this.words[T2] = this.words[T2 + x2];
        else
          this.words[0] = 0, this.length = 1;
      var D2 = 0;
      for (T2 = this.length - 1; T2 >= 0 && (D2 !== 0 || T2 >= O2); T2--) {
        var te2 = this.words[T2] | 0;
        this.words[T2] = D2 << 26 - A2 | te2 >>> A2, D2 = te2 & Y2;
      }
      return B2 && D2 !== 0 && (B2.words[B2.length++] = D2), this.length === 0 && (this.words[0] = 0, this.length = 1), this.strip();
    }, p2.prototype.ishrn = function(b, E2, k) {
      return l2(this.negative === 0), this.iushrn(b, E2, k);
    }, p2.prototype.shln = function(b) {
      return this.clone().ishln(b);
    }, p2.prototype.ushln = function(b) {
      return this.clone().iushln(b);
    }, p2.prototype.shrn = function(b) {
      return this.clone().ishrn(b);
    }, p2.prototype.ushrn = function(b) {
      return this.clone().iushrn(b);
    }, p2.prototype.testn = function(b) {
      l2(typeof b == "number" && b >= 0);
      var E2 = b % 26, k = (b - E2) / 26, O2 = 1 << E2;
      if (this.length <= k)
        return false;
      var A2 = this.words[k];
      return !!(A2 & O2);
    }, p2.prototype.imaskn = function(b) {
      l2(typeof b == "number" && b >= 0);
      var E2 = b % 26, k = (b - E2) / 26;
      if (l2(this.negative === 0, "imaskn works only with positive numbers"), this.length <= k)
        return this;
      if (E2 !== 0 && k++, this.length = Math.min(k, this.length), E2 !== 0) {
        var O2 = 67108863 ^ 67108863 >>> E2 << E2;
        this.words[this.length - 1] &= O2;
      }
      return this.strip();
    }, p2.prototype.maskn = function(b) {
      return this.clone().imaskn(b);
    }, p2.prototype.iaddn = function(b) {
      return l2(typeof b == "number"), l2(b < 67108864), b < 0 ? this.isubn(-b) : this.negative !== 0 ? this.length === 1 && (this.words[0] | 0) < b ? (this.words[0] = b - (this.words[0] | 0), this.negative = 0, this) : (this.negative = 0, this.isubn(b), this.negative = 1, this) : this._iaddn(b);
    }, p2.prototype._iaddn = function(b) {
      this.words[0] += b;
      for (var E2 = 0; E2 < this.length && this.words[E2] >= 67108864; E2++)
        this.words[E2] -= 67108864, E2 === this.length - 1 ? this.words[E2 + 1] = 1 : this.words[E2 + 1]++;
      return this.length = Math.max(this.length, E2 + 1), this;
    }, p2.prototype.isubn = function(b) {
      if (l2(typeof b == "number"), l2(b < 67108864), b < 0)
        return this.iaddn(-b);
      if (this.negative !== 0)
        return this.negative = 0, this.iaddn(b), this.negative = 1, this;
      if (this.words[0] -= b, this.length === 1 && this.words[0] < 0)
        this.words[0] = -this.words[0], this.negative = 1;
      else
        for (var E2 = 0; E2 < this.length && this.words[E2] < 0; E2++)
          this.words[E2] += 67108864, this.words[E2 + 1] -= 1;
      return this.strip();
    }, p2.prototype.addn = function(b) {
      return this.clone().iaddn(b);
    }, p2.prototype.subn = function(b) {
      return this.clone().isubn(b);
    }, p2.prototype.iabs = function() {
      return this.negative = 0, this;
    }, p2.prototype.abs = function() {
      return this.clone().iabs();
    }, p2.prototype._ishlnsubmul = function(b, E2, k) {
      var O2 = b.length + k, A2;
      this._expand(O2);
      var x2, Y2 = 0;
      for (A2 = 0; A2 < b.length; A2++) {
        x2 = (this.words[A2 + k] | 0) + Y2;
        var B2 = (b.words[A2] | 0) * E2;
        x2 -= B2 & 67108863, Y2 = (x2 >> 26) - (B2 / 67108864 | 0), this.words[A2 + k] = x2 & 67108863;
      }
      for (; A2 < this.length - k; A2++)
        x2 = (this.words[A2 + k] | 0) + Y2, Y2 = x2 >> 26, this.words[A2 + k] = x2 & 67108863;
      if (Y2 === 0)
        return this.strip();
      for (l2(Y2 === -1), Y2 = 0, A2 = 0; A2 < this.length; A2++)
        x2 = -(this.words[A2] | 0) + Y2, Y2 = x2 >> 26, this.words[A2] = x2 & 67108863;
      return this.negative = 1, this.strip();
    }, p2.prototype._wordDiv = function(b, E2) {
      var k = this.length - b.length, O2 = this.clone(), A2 = b, x2 = A2.words[A2.length - 1] | 0, Y2 = this._countBits(x2);
      k = 26 - Y2, k !== 0 && (A2 = A2.ushln(k), O2.iushln(k), x2 = A2.words[A2.length - 1] | 0);
      var B2 = O2.length - A2.length, T2;
      if (E2 !== "mod") {
        T2 = new p2(null), T2.length = B2 + 1, T2.words = new Array(T2.length);
        for (var D2 = 0; D2 < T2.length; D2++)
          T2.words[D2] = 0;
      }
      var te2 = O2.clone()._ishlnsubmul(A2, 1, B2);
      te2.negative === 0 && (O2 = te2, T2 && (T2.words[B2] = 1));
      for (var me2 = B2 - 1; me2 >= 0; me2--) {
        var Ie2 = (O2.words[A2.length + me2] | 0) * 67108864 + (O2.words[A2.length + me2 - 1] | 0);
        for (Ie2 = Math.min(Ie2 / x2 | 0, 67108863), O2._ishlnsubmul(A2, Ie2, me2); O2.negative !== 0; )
          Ie2--, O2.negative = 0, O2._ishlnsubmul(A2, 1, me2), O2.isZero() || (O2.negative ^= 1);
        T2 && (T2.words[me2] = Ie2);
      }
      return T2 && T2.strip(), O2.strip(), E2 !== "div" && k !== 0 && O2.iushrn(k), { div: T2 || null, mod: O2 };
    }, p2.prototype.divmod = function(b, E2, k) {
      if (l2(!b.isZero()), this.isZero())
        return { div: new p2(0), mod: new p2(0) };
      var O2, A2, x2;
      return this.negative !== 0 && b.negative === 0 ? (x2 = this.neg().divmod(b, E2), E2 !== "mod" && (O2 = x2.div.neg()), E2 !== "div" && (A2 = x2.mod.neg(), k && A2.negative !== 0 && A2.iadd(b)), { div: O2, mod: A2 }) : this.negative === 0 && b.negative !== 0 ? (x2 = this.divmod(b.neg(), E2), E2 !== "mod" && (O2 = x2.div.neg()), { div: O2, mod: x2.mod }) : this.negative & b.negative ? (x2 = this.neg().divmod(b.neg(), E2), E2 !== "div" && (A2 = x2.mod.neg(), k && A2.negative !== 0 && A2.isub(b)), { div: x2.div, mod: A2 }) : b.length > this.length || this.cmp(b) < 0 ? { div: new p2(0), mod: this } : b.length === 1 ? E2 === "div" ? { div: this.divn(b.words[0]), mod: null } : E2 === "mod" ? { div: null, mod: new p2(this.modn(b.words[0])) } : { div: this.divn(b.words[0]), mod: new p2(this.modn(b.words[0])) } : this._wordDiv(b, E2);
    }, p2.prototype.div = function(b) {
      return this.divmod(b, "div", false).div;
    }, p2.prototype.mod = function(b) {
      return this.divmod(b, "mod", false).mod;
    }, p2.prototype.umod = function(b) {
      return this.divmod(b, "mod", true).mod;
    }, p2.prototype.divRound = function(b) {
      var E2 = this.divmod(b);
      if (E2.mod.isZero())
        return E2.div;
      var k = E2.div.negative !== 0 ? E2.mod.isub(b) : E2.mod, O2 = b.ushrn(1), A2 = b.andln(1), x2 = k.cmp(O2);
      return x2 < 0 || A2 === 1 && x2 === 0 ? E2.div : E2.div.negative !== 0 ? E2.div.isubn(1) : E2.div.iaddn(1);
    }, p2.prototype.modn = function(b) {
      l2(b <= 67108863);
      for (var E2 = (1 << 26) % b, k = 0, O2 = this.length - 1; O2 >= 0; O2--)
        k = (E2 * k + (this.words[O2] | 0)) % b;
      return k;
    }, p2.prototype.idivn = function(b) {
      l2(b <= 67108863);
      for (var E2 = 0, k = this.length - 1; k >= 0; k--) {
        var O2 = (this.words[k] | 0) + E2 * 67108864;
        this.words[k] = O2 / b | 0, E2 = O2 % b;
      }
      return this.strip();
    }, p2.prototype.divn = function(b) {
      return this.clone().idivn(b);
    }, p2.prototype.egcd = function(b) {
      l2(b.negative === 0), l2(!b.isZero());
      var E2 = this, k = b.clone();
      E2.negative !== 0 ? E2 = E2.umod(b) : E2 = E2.clone();
      for (var O2 = new p2(1), A2 = new p2(0), x2 = new p2(0), Y2 = new p2(1), B2 = 0; E2.isEven() && k.isEven(); )
        E2.iushrn(1), k.iushrn(1), ++B2;
      for (var T2 = k.clone(), D2 = E2.clone(); !E2.isZero(); ) {
        for (var te2 = 0, me2 = 1; !(E2.words[0] & me2) && te2 < 26; ++te2, me2 <<= 1)
          ;
        if (te2 > 0)
          for (E2.iushrn(te2); te2-- > 0; )
            (O2.isOdd() || A2.isOdd()) && (O2.iadd(T2), A2.isub(D2)), O2.iushrn(1), A2.iushrn(1);
        for (var Ie2 = 0, $e2 = 1; !(k.words[0] & $e2) && Ie2 < 26; ++Ie2, $e2 <<= 1)
          ;
        if (Ie2 > 0)
          for (k.iushrn(Ie2); Ie2-- > 0; )
            (x2.isOdd() || Y2.isOdd()) && (x2.iadd(T2), Y2.isub(D2)), x2.iushrn(1), Y2.iushrn(1);
        E2.cmp(k) >= 0 ? (E2.isub(k), O2.isub(x2), A2.isub(Y2)) : (k.isub(E2), x2.isub(O2), Y2.isub(A2));
      }
      return { a: x2, b: Y2, gcd: k.iushln(B2) };
    }, p2.prototype._invmp = function(b) {
      l2(b.negative === 0), l2(!b.isZero());
      var E2 = this, k = b.clone();
      E2.negative !== 0 ? E2 = E2.umod(b) : E2 = E2.clone();
      for (var O2 = new p2(1), A2 = new p2(0), x2 = k.clone(); E2.cmpn(1) > 0 && k.cmpn(1) > 0; ) {
        for (var Y2 = 0, B2 = 1; !(E2.words[0] & B2) && Y2 < 26; ++Y2, B2 <<= 1)
          ;
        if (Y2 > 0)
          for (E2.iushrn(Y2); Y2-- > 0; )
            O2.isOdd() && O2.iadd(x2), O2.iushrn(1);
        for (var T2 = 0, D2 = 1; !(k.words[0] & D2) && T2 < 26; ++T2, D2 <<= 1)
          ;
        if (T2 > 0)
          for (k.iushrn(T2); T2-- > 0; )
            A2.isOdd() && A2.iadd(x2), A2.iushrn(1);
        E2.cmp(k) >= 0 ? (E2.isub(k), O2.isub(A2)) : (k.isub(E2), A2.isub(O2));
      }
      var te2;
      return E2.cmpn(1) === 0 ? te2 = O2 : te2 = A2, te2.cmpn(0) < 0 && te2.iadd(b), te2;
    }, p2.prototype.gcd = function(b) {
      if (this.isZero())
        return b.abs();
      if (b.isZero())
        return this.abs();
      var E2 = this.clone(), k = b.clone();
      E2.negative = 0, k.negative = 0;
      for (var O2 = 0; E2.isEven() && k.isEven(); O2++)
        E2.iushrn(1), k.iushrn(1);
      do {
        for (; E2.isEven(); )
          E2.iushrn(1);
        for (; k.isEven(); )
          k.iushrn(1);
        var A2 = E2.cmp(k);
        if (A2 < 0) {
          var x2 = E2;
          E2 = k, k = x2;
        } else if (A2 === 0 || k.cmpn(1) === 0)
          break;
        E2.isub(k);
      } while (true);
      return k.iushln(O2);
    }, p2.prototype.invm = function(b) {
      return this.egcd(b).a.umod(b);
    }, p2.prototype.isEven = function() {
      return (this.words[0] & 1) === 0;
    }, p2.prototype.isOdd = function() {
      return (this.words[0] & 1) === 1;
    }, p2.prototype.andln = function(b) {
      return this.words[0] & b;
    }, p2.prototype.bincn = function(b) {
      l2(typeof b == "number");
      var E2 = b % 26, k = (b - E2) / 26, O2 = 1 << E2;
      if (this.length <= k)
        return this._expand(k + 1), this.words[k] |= O2, this;
      for (var A2 = O2, x2 = k; A2 !== 0 && x2 < this.length; x2++) {
        var Y2 = this.words[x2] | 0;
        Y2 += A2, A2 = Y2 >>> 26, Y2 &= 67108863, this.words[x2] = Y2;
      }
      return A2 !== 0 && (this.words[x2] = A2, this.length++), this;
    }, p2.prototype.isZero = function() {
      return this.length === 1 && this.words[0] === 0;
    }, p2.prototype.cmpn = function(b) {
      var E2 = b < 0;
      if (this.negative !== 0 && !E2)
        return -1;
      if (this.negative === 0 && E2)
        return 1;
      this.strip();
      var k;
      if (this.length > 1)
        k = 1;
      else {
        E2 && (b = -b), l2(b <= 67108863, "Number is too big");
        var O2 = this.words[0] | 0;
        k = O2 === b ? 0 : O2 < b ? -1 : 1;
      }
      return this.negative !== 0 ? -k | 0 : k;
    }, p2.prototype.cmp = function(b) {
      if (this.negative !== 0 && b.negative === 0)
        return -1;
      if (this.negative === 0 && b.negative !== 0)
        return 1;
      var E2 = this.ucmp(b);
      return this.negative !== 0 ? -E2 | 0 : E2;
    }, p2.prototype.ucmp = function(b) {
      if (this.length > b.length)
        return 1;
      if (this.length < b.length)
        return -1;
      for (var E2 = 0, k = this.length - 1; k >= 0; k--) {
        var O2 = this.words[k] | 0, A2 = b.words[k] | 0;
        if (O2 !== A2) {
          O2 < A2 ? E2 = -1 : O2 > A2 && (E2 = 1);
          break;
        }
      }
      return E2;
    }, p2.prototype.gtn = function(b) {
      return this.cmpn(b) === 1;
    }, p2.prototype.gt = function(b) {
      return this.cmp(b) === 1;
    }, p2.prototype.gten = function(b) {
      return this.cmpn(b) >= 0;
    }, p2.prototype.gte = function(b) {
      return this.cmp(b) >= 0;
    }, p2.prototype.ltn = function(b) {
      return this.cmpn(b) === -1;
    }, p2.prototype.lt = function(b) {
      return this.cmp(b) === -1;
    }, p2.prototype.lten = function(b) {
      return this.cmpn(b) <= 0;
    }, p2.prototype.lte = function(b) {
      return this.cmp(b) <= 0;
    }, p2.prototype.eqn = function(b) {
      return this.cmpn(b) === 0;
    }, p2.prototype.eq = function(b) {
      return this.cmp(b) === 0;
    }, p2.red = function(b) {
      return new q2(b);
    }, p2.prototype.toRed = function(b) {
      return l2(!this.red, "Already a number in reduction context"), l2(this.negative === 0, "red works only with positives"), b.convertTo(this)._forceRed(b);
    }, p2.prototype.fromRed = function() {
      return l2(this.red, "fromRed works only with numbers in reduction context"), this.red.convertFrom(this);
    }, p2.prototype._forceRed = function(b) {
      return this.red = b, this;
    }, p2.prototype.forceRed = function(b) {
      return l2(!this.red, "Already a number in reduction context"), this._forceRed(b);
    }, p2.prototype.redAdd = function(b) {
      return l2(this.red, "redAdd works only with red numbers"), this.red.add(this, b);
    }, p2.prototype.redIAdd = function(b) {
      return l2(this.red, "redIAdd works only with red numbers"), this.red.iadd(this, b);
    }, p2.prototype.redSub = function(b) {
      return l2(this.red, "redSub works only with red numbers"), this.red.sub(this, b);
    }, p2.prototype.redISub = function(b) {
      return l2(this.red, "redISub works only with red numbers"), this.red.isub(this, b);
    }, p2.prototype.redShl = function(b) {
      return l2(this.red, "redShl works only with red numbers"), this.red.shl(this, b);
    }, p2.prototype.redMul = function(b) {
      return l2(this.red, "redMul works only with red numbers"), this.red._verify2(this, b), this.red.mul(this, b);
    }, p2.prototype.redIMul = function(b) {
      return l2(this.red, "redMul works only with red numbers"), this.red._verify2(this, b), this.red.imul(this, b);
    }, p2.prototype.redSqr = function() {
      return l2(this.red, "redSqr works only with red numbers"), this.red._verify1(this), this.red.sqr(this);
    }, p2.prototype.redISqr = function() {
      return l2(this.red, "redISqr works only with red numbers"), this.red._verify1(this), this.red.isqr(this);
    }, p2.prototype.redSqrt = function() {
      return l2(this.red, "redSqrt works only with red numbers"), this.red._verify1(this), this.red.sqrt(this);
    }, p2.prototype.redInvm = function() {
      return l2(this.red, "redInvm works only with red numbers"), this.red._verify1(this), this.red.invm(this);
    }, p2.prototype.redNeg = function() {
      return l2(this.red, "redNeg works only with red numbers"), this.red._verify1(this), this.red.neg(this);
    }, p2.prototype.redPow = function(b) {
      return l2(this.red && !b.red, "redPow(normalNum)"), this.red._verify1(this), this.red.pow(this, b);
    };
    var de2 = { k256: null, p224: null, p192: null, p25519: null };
    function pe2(C2, b) {
      this.name = C2, this.p = new p2(b, 16), this.n = this.p.bitLength(), this.k = new p2(1).iushln(this.n).isub(this.p), this.tmp = this._tmp();
    }
    pe2.prototype._tmp = function() {
      var b = new p2(null);
      return b.words = new Array(Math.ceil(this.n / 13)), b;
    }, pe2.prototype.ireduce = function(b) {
      var E2 = b, k;
      do
        this.split(E2, this.tmp), E2 = this.imulK(E2), E2 = E2.iadd(this.tmp), k = E2.bitLength();
      while (k > this.n);
      var O2 = k < this.n ? -1 : E2.ucmp(this.p);
      return O2 === 0 ? (E2.words[0] = 0, E2.length = 1) : O2 > 0 ? E2.isub(this.p) : E2.strip !== void 0 ? E2.strip() : E2._strip(), E2;
    }, pe2.prototype.split = function(b, E2) {
      b.iushrn(this.n, 0, E2);
    }, pe2.prototype.imulK = function(b) {
      return b.imul(this.k);
    };
    function le2() {
      pe2.call(this, "k256", "ffffffff ffffffff ffffffff ffffffff ffffffff ffffffff fffffffe fffffc2f");
    }
    v2(le2, pe2), le2.prototype.split = function(b, E2) {
      for (var k = 4194303, O2 = Math.min(b.length, 9), A2 = 0; A2 < O2; A2++)
        E2.words[A2] = b.words[A2];
      if (E2.length = O2, b.length <= 9) {
        b.words[0] = 0, b.length = 1;
        return;
      }
      var x2 = b.words[9];
      for (E2.words[E2.length++] = x2 & k, A2 = 10; A2 < b.length; A2++) {
        var Y2 = b.words[A2] | 0;
        b.words[A2 - 10] = (Y2 & k) << 4 | x2 >>> 22, x2 = Y2;
      }
      x2 >>>= 22, b.words[A2 - 10] = x2, x2 === 0 && b.length > 10 ? b.length -= 10 : b.length -= 9;
    }, le2.prototype.imulK = function(b) {
      b.words[b.length] = 0, b.words[b.length + 1] = 0, b.length += 2;
      for (var E2 = 0, k = 0; k < b.length; k++) {
        var O2 = b.words[k] | 0;
        E2 += O2 * 977, b.words[k] = E2 & 67108863, E2 = O2 * 64 + (E2 / 67108864 | 0);
      }
      return b.words[b.length - 1] === 0 && (b.length--, b.words[b.length - 1] === 0 && b.length--), b;
    };
    function be2() {
      pe2.call(this, "p224", "ffffffff ffffffff ffffffff ffffffff 00000000 00000000 00000001");
    }
    v2(be2, pe2);
    function ke2() {
      pe2.call(this, "p192", "ffffffff ffffffff ffffffff fffffffe ffffffff ffffffff");
    }
    v2(ke2, pe2);
    function Te2() {
      pe2.call(this, "25519", "7fffffffffffffff ffffffffffffffff ffffffffffffffff ffffffffffffffed");
    }
    v2(Te2, pe2), Te2.prototype.imulK = function(b) {
      for (var E2 = 0, k = 0; k < b.length; k++) {
        var O2 = (b.words[k] | 0) * 19 + E2, A2 = O2 & 67108863;
        O2 >>>= 26, b.words[k] = A2, E2 = O2;
      }
      return E2 !== 0 && (b.words[b.length++] = E2), b;
    }, p2._prime = function(b) {
      if (de2[b])
        return de2[b];
      var E2;
      if (b === "k256")
        E2 = new le2();
      else if (b === "p224")
        E2 = new be2();
      else if (b === "p192")
        E2 = new ke2();
      else if (b === "p25519")
        E2 = new Te2();
      else
        throw new Error("Unknown prime " + b);
      return de2[b] = E2, E2;
    };
    function q2(C2) {
      if (typeof C2 == "string") {
        var b = p2._prime(C2);
        this.m = b.p, this.prime = b;
      } else
        l2(C2.gtn(1), "modulus must be greater than 1"), this.m = C2, this.prime = null;
    }
    q2.prototype._verify1 = function(b) {
      l2(b.negative === 0, "red works only with positives"), l2(b.red, "red works only with red numbers");
    }, q2.prototype._verify2 = function(b, E2) {
      l2((b.negative | E2.negative) === 0, "red works only with positives"), l2(b.red && b.red === E2.red, "red works only with red numbers");
    }, q2.prototype.imod = function(b) {
      return this.prime ? this.prime.ireduce(b)._forceRed(this) : b.umod(this.m)._forceRed(this);
    }, q2.prototype.neg = function(b) {
      return b.isZero() ? b.clone() : this.m.sub(b)._forceRed(this);
    }, q2.prototype.add = function(b, E2) {
      this._verify2(b, E2);
      var k = b.add(E2);
      return k.cmp(this.m) >= 0 && k.isub(this.m), k._forceRed(this);
    }, q2.prototype.iadd = function(b, E2) {
      this._verify2(b, E2);
      var k = b.iadd(E2);
      return k.cmp(this.m) >= 0 && k.isub(this.m), k;
    }, q2.prototype.sub = function(b, E2) {
      this._verify2(b, E2);
      var k = b.sub(E2);
      return k.cmpn(0) < 0 && k.iadd(this.m), k._forceRed(this);
    }, q2.prototype.isub = function(b, E2) {
      this._verify2(b, E2);
      var k = b.isub(E2);
      return k.cmpn(0) < 0 && k.iadd(this.m), k;
    }, q2.prototype.shl = function(b, E2) {
      return this._verify1(b), this.imod(b.ushln(E2));
    }, q2.prototype.imul = function(b, E2) {
      return this._verify2(b, E2), this.imod(b.imul(E2));
    }, q2.prototype.mul = function(b, E2) {
      return this._verify2(b, E2), this.imod(b.mul(E2));
    }, q2.prototype.isqr = function(b) {
      return this.imul(b, b.clone());
    }, q2.prototype.sqr = function(b) {
      return this.mul(b, b);
    }, q2.prototype.sqrt = function(b) {
      if (b.isZero())
        return b.clone();
      var E2 = this.m.andln(3);
      if (l2(E2 % 2 === 1), E2 === 3) {
        var k = this.m.add(new p2(1)).iushrn(2);
        return this.pow(b, k);
      }
      for (var O2 = this.m.subn(1), A2 = 0; !O2.isZero() && O2.andln(1) === 0; )
        A2++, O2.iushrn(1);
      l2(!O2.isZero());
      var x2 = new p2(1).toRed(this), Y2 = x2.redNeg(), B2 = this.m.subn(1).iushrn(1), T2 = this.m.bitLength();
      for (T2 = new p2(2 * T2 * T2).toRed(this); this.pow(T2, B2).cmp(Y2) !== 0; )
        T2.redIAdd(Y2);
      for (var D2 = this.pow(T2, O2), te2 = this.pow(b, O2.addn(1).iushrn(1)), me2 = this.pow(b, O2), Ie2 = A2; me2.cmp(x2) !== 0; ) {
        for (var $e2 = me2, ye2 = 0; $e2.cmp(x2) !== 0; ye2++)
          $e2 = $e2.redSqr();
        l2(ye2 < Ie2);
        var he2 = this.pow(D2, new p2(1).iushln(Ie2 - ye2 - 1));
        te2 = te2.redMul(he2), D2 = he2.redSqr(), me2 = me2.redMul(D2), Ie2 = ye2;
      }
      return te2;
    }, q2.prototype.invm = function(b) {
      var E2 = b._invmp(this.m);
      return E2.negative !== 0 ? (E2.negative = 0, this.imod(E2).redNeg()) : this.imod(E2);
    }, q2.prototype.pow = function(b, E2) {
      if (E2.isZero())
        return new p2(1).toRed(this);
      if (E2.cmpn(1) === 0)
        return b.clone();
      var k = 4, O2 = new Array(1 << k);
      O2[0] = new p2(1).toRed(this), O2[1] = b;
      for (var A2 = 2; A2 < O2.length; A2++)
        O2[A2] = this.mul(O2[A2 - 1], b);
      var x2 = O2[0], Y2 = 0, B2 = 0, T2 = E2.bitLength() % 26;
      for (T2 === 0 && (T2 = 26), A2 = E2.length - 1; A2 >= 0; A2--) {
        for (var D2 = E2.words[A2], te2 = T2 - 1; te2 >= 0; te2--) {
          var me2 = D2 >> te2 & 1;
          if (x2 !== O2[0] && (x2 = this.sqr(x2)), me2 === 0 && Y2 === 0) {
            B2 = 0;
            continue;
          }
          Y2 <<= 1, Y2 |= me2, B2++, !(B2 !== k && (A2 !== 0 || te2 !== 0)) && (x2 = this.mul(x2, O2[Y2]), B2 = 0, Y2 = 0);
        }
        T2 = 26;
      }
      return x2;
    }, q2.prototype.convertTo = function(b) {
      var E2 = b.umod(this.m);
      return E2 === b ? E2.clone() : E2;
    }, q2.prototype.convertFrom = function(b) {
      var E2 = b.clone();
      return E2.red = null, E2;
    }, p2.mont = function(b) {
      return new z2(b);
    };
    function z2(C2) {
      q2.call(this, C2), this.shift = this.m.bitLength(), this.shift % 26 !== 0 && (this.shift += 26 - this.shift % 26), this.r = new p2(1).iushln(this.shift), this.r2 = this.imod(this.r.sqr()), this.rinv = this.r._invmp(this.m), this.minv = this.rinv.mul(this.r).isubn(1).div(this.m), this.minv = this.minv.umod(this.r), this.minv = this.r.sub(this.minv);
    }
    v2(z2, q2), z2.prototype.convertTo = function(b) {
      return this.imod(b.ushln(this.shift));
    }, z2.prototype.convertFrom = function(b) {
      var E2 = this.imod(b.mul(this.rinv));
      return E2.red = null, E2;
    }, z2.prototype.imul = function(b, E2) {
      if (b.isZero() || E2.isZero())
        return b.words[0] = 0, b.length = 1, b;
      var k = b.imul(E2), O2 = k.maskn(this.shift).mul(this.minv).imaskn(this.shift).mul(this.m), A2 = k.isub(O2).iushrn(this.shift), x2 = A2;
      return A2.cmp(this.m) >= 0 ? x2 = A2.isub(this.m) : A2.cmpn(0) < 0 && (x2 = A2.iadd(this.m)), x2._forceRed(this);
    }, z2.prototype.mul = function(b, E2) {
      if (b.isZero() || E2.isZero())
        return new p2(0)._forceRed(this);
      var k = b.mul(E2), O2 = k.maskn(this.shift).mul(this.minv).imaskn(this.shift).mul(this.m), A2 = k.isub(O2).iushrn(this.shift), x2 = A2;
      return A2.cmp(this.m) >= 0 ? x2 = A2.isub(this.m) : A2.cmpn(0) < 0 && (x2 = A2.iadd(this.m)), x2._forceRed(this);
    }, z2.prototype.invm = function(b) {
      var E2 = this.imod(b._invmp(this.m).mul(this.r2));
      return E2._forceRed(this);
    };
  })(a420, commonjsGlobal$1);
})(bn$6);
var bnExports$6 = bn$6.exports, bn$5 = { exports: {} };
(function(a420) {
  (function(u2, c) {
    function l2(C2, b) {
      if (!C2)
        throw new Error(b || "Assertion failed");
    }
    function v2(C2, b) {
      C2.super_ = b;
      var E2 = function() {
      };
      E2.prototype = b.prototype, C2.prototype = new E2(), C2.prototype.constructor = C2;
    }
    function p2(C2, b, E2) {
      if (p2.isBN(C2))
        return C2;
      this.negative = 0, this.words = null, this.length = 0, this.red = null, C2 !== null && ((b === "le" || b === "be") && (E2 = b, b = 10), this._init(C2 || 0, b || 10, E2 || "be"));
    }
    typeof u2 == "object" ? u2.exports = p2 : c.BN = p2, p2.BN = p2, p2.wordSize = 26;
    var _;
    try {
      typeof window < "u" && typeof window.Buffer < "u" ? _ = window.Buffer : _ = require$$0$2.Buffer;
    } catch {
    }
    p2.isBN = function(b) {
      return b instanceof p2 ? true : b !== null && typeof b == "object" && b.constructor.wordSize === p2.wordSize && Array.isArray(b.words);
    }, p2.max = function(b, E2) {
      return b.cmp(E2) > 0 ? b : E2;
    }, p2.min = function(b, E2) {
      return b.cmp(E2) < 0 ? b : E2;
    }, p2.prototype._init = function(b, E2, k) {
      if (typeof b == "number")
        return this._initNumber(b, E2, k);
      if (typeof b == "object")
        return this._initArray(b, E2, k);
      E2 === "hex" && (E2 = 16), l2(E2 === (E2 | 0) && E2 >= 2 && E2 <= 36), b = b.toString().replace(/\s+/g, "");
      var O2 = 0;
      b[0] === "-" && (O2++, this.negative = 1), O2 < b.length && (E2 === 16 ? this._parseHex(b, O2, k) : (this._parseBase(b, E2, O2), k === "le" && this._initArray(this.toArray(), E2, k)));
    }, p2.prototype._initNumber = function(b, E2, k) {
      b < 0 && (this.negative = 1, b = -b), b < 67108864 ? (this.words = [b & 67108863], this.length = 1) : b < 4503599627370496 ? (this.words = [b & 67108863, b / 67108864 & 67108863], this.length = 2) : (l2(b < 9007199254740992), this.words = [b & 67108863, b / 67108864 & 67108863, 1], this.length = 3), k === "le" && this._initArray(this.toArray(), E2, k);
    }, p2.prototype._initArray = function(b, E2, k) {
      if (l2(typeof b.length == "number"), b.length <= 0)
        return this.words = [0], this.length = 1, this;
      this.length = Math.ceil(b.length / 3), this.words = new Array(this.length);
      for (var O2 = 0; O2 < this.length; O2++)
        this.words[O2] = 0;
      var A2, x2, Y2 = 0;
      if (k === "be")
        for (O2 = b.length - 1, A2 = 0; O2 >= 0; O2 -= 3)
          x2 = b[O2] | b[O2 - 1] << 8 | b[O2 - 2] << 16, this.words[A2] |= x2 << Y2 & 67108863, this.words[A2 + 1] = x2 >>> 26 - Y2 & 67108863, Y2 += 24, Y2 >= 26 && (Y2 -= 26, A2++);
      else if (k === "le")
        for (O2 = 0, A2 = 0; O2 < b.length; O2 += 3)
          x2 = b[O2] | b[O2 + 1] << 8 | b[O2 + 2] << 16, this.words[A2] |= x2 << Y2 & 67108863, this.words[A2 + 1] = x2 >>> 26 - Y2 & 67108863, Y2 += 24, Y2 >= 26 && (Y2 -= 26, A2++);
      return this.strip();
    };
    function I2(C2, b) {
      var E2 = C2.charCodeAt(b);
      return E2 >= 65 && E2 <= 70 ? E2 - 55 : E2 >= 97 && E2 <= 102 ? E2 - 87 : E2 - 48 & 15;
    }
    function P2(C2, b, E2) {
      var k = I2(C2, E2);
      return E2 - 1 >= b && (k |= I2(C2, E2 - 1) << 4), k;
    }
    p2.prototype._parseHex = function(b, E2, k) {
      this.length = Math.ceil((b.length - E2) / 6), this.words = new Array(this.length);
      for (var O2 = 0; O2 < this.length; O2++)
        this.words[O2] = 0;
      var A2 = 0, x2 = 0, Y2;
      if (k === "be")
        for (O2 = b.length - 1; O2 >= E2; O2 -= 2)
          Y2 = P2(b, E2, O2) << A2, this.words[x2] |= Y2 & 67108863, A2 >= 18 ? (A2 -= 18, x2 += 1, this.words[x2] |= Y2 >>> 26) : A2 += 8;
      else {
        var B2 = b.length - E2;
        for (O2 = B2 % 2 === 0 ? E2 + 1 : E2; O2 < b.length; O2 += 2)
          Y2 = P2(b, E2, O2) << A2, this.words[x2] |= Y2 & 67108863, A2 >= 18 ? (A2 -= 18, x2 += 1, this.words[x2] |= Y2 >>> 26) : A2 += 8;
      }
      this.strip();
    };
    function $(C2, b, E2, k) {
      for (var O2 = 0, A2 = Math.min(C2.length, E2), x2 = b; x2 < A2; x2++) {
        var Y2 = C2.charCodeAt(x2) - 48;
        O2 *= k, Y2 >= 49 ? O2 += Y2 - 49 + 10 : Y2 >= 17 ? O2 += Y2 - 17 + 10 : O2 += Y2;
      }
      return O2;
    }
    p2.prototype._parseBase = function(b, E2, k) {
      this.words = [0], this.length = 1;
      for (var O2 = 0, A2 = 1; A2 <= 67108863; A2 *= E2)
        O2++;
      O2--, A2 = A2 / E2 | 0;
      for (var x2 = b.length - k, Y2 = x2 % O2, B2 = Math.min(x2, x2 - Y2) + k, T2 = 0, D2 = k; D2 < B2; D2 += O2)
        T2 = $(b, D2, D2 + O2, E2), this.imuln(A2), this.words[0] + T2 < 67108864 ? this.words[0] += T2 : this._iaddn(T2);
      if (Y2 !== 0) {
        var te2 = 1;
        for (T2 = $(b, D2, b.length, E2), D2 = 0; D2 < Y2; D2++)
          te2 *= E2;
        this.imuln(te2), this.words[0] + T2 < 67108864 ? this.words[0] += T2 : this._iaddn(T2);
      }
      this.strip();
    }, p2.prototype.copy = function(b) {
      b.words = new Array(this.length);
      for (var E2 = 0; E2 < this.length; E2++)
        b.words[E2] = this.words[E2];
      b.length = this.length, b.negative = this.negative, b.red = this.red;
    }, p2.prototype.clone = function() {
      var b = new p2(null);
      return this.copy(b), b;
    }, p2.prototype._expand = function(b) {
      for (; this.length < b; )
        this.words[this.length++] = 0;
      return this;
    }, p2.prototype.strip = function() {
      for (; this.length > 1 && this.words[this.length - 1] === 0; )
        this.length--;
      return this._normSign();
    }, p2.prototype._normSign = function() {
      return this.length === 1 && this.words[0] === 0 && (this.negative = 0), this;
    }, p2.prototype.inspect = function() {
      return (this.red ? "<BN-R: " : "<BN: ") + this.toString(16) + ">";
    };
    var F2 = ["", "0", "00", "000", "0000", "00000", "000000", "0000000", "00000000", "000000000", "0000000000", "00000000000", "000000000000", "0000000000000", "00000000000000", "000000000000000", "0000000000000000", "00000000000000000", "000000000000000000", "0000000000000000000", "00000000000000000000", "000000000000000000000", "0000000000000000000000", "00000000000000000000000", "000000000000000000000000", "0000000000000000000000000"], H2 = [0, 0, 25, 16, 12, 11, 10, 9, 8, 8, 7, 7, 7, 7, 6, 6, 6, 6, 6, 6, 6, 5, 5, 5, 5, 5, 5, 5, 5, 5, 5, 5, 5, 5, 5, 5, 5], j = [0, 0, 33554432, 43046721, 16777216, 48828125, 60466176, 40353607, 16777216, 43046721, 1e7, 19487171, 35831808, 62748517, 7529536, 11390625, 16777216, 24137569, 34012224, 47045881, 64e6, 4084101, 5153632, 6436343, 7962624, 9765625, 11881376, 14348907, 17210368, 20511149, 243e5, 28629151, 33554432, 39135393, 45435424, 52521875, 60466176];
    p2.prototype.toString = function(b, E2) {
      b = b || 10, E2 = E2 | 0 || 1;
      var k;
      if (b === 16 || b === "hex") {
        k = "";
        for (var O2 = 0, A2 = 0, x2 = 0; x2 < this.length; x2++) {
          var Y2 = this.words[x2], B2 = ((Y2 << O2 | A2) & 16777215).toString(16);
          A2 = Y2 >>> 24 - O2 & 16777215, A2 !== 0 || x2 !== this.length - 1 ? k = F2[6 - B2.length] + B2 + k : k = B2 + k, O2 += 2, O2 >= 26 && (O2 -= 26, x2--);
        }
        for (A2 !== 0 && (k = A2.toString(16) + k); k.length % E2 !== 0; )
          k = "0" + k;
        return this.negative !== 0 && (k = "-" + k), k;
      }
      if (b === (b | 0) && b >= 2 && b <= 36) {
        var T2 = H2[b], D2 = j[b];
        k = "";
        var te2 = this.clone();
        for (te2.negative = 0; !te2.isZero(); ) {
          var me2 = te2.modn(D2).toString(b);
          te2 = te2.idivn(D2), te2.isZero() ? k = me2 + k : k = F2[T2 - me2.length] + me2 + k;
        }
        for (this.isZero() && (k = "0" + k); k.length % E2 !== 0; )
          k = "0" + k;
        return this.negative !== 0 && (k = "-" + k), k;
      }
      l2(false, "Base should be between 2 and 36");
    }, p2.prototype.toNumber = function() {
      var b = this.words[0];
      return this.length === 2 ? b += this.words[1] * 67108864 : this.length === 3 && this.words[2] === 1 ? b += 4503599627370496 + this.words[1] * 67108864 : this.length > 2 && l2(false, "Number can only safely store up to 53 bits"), this.negative !== 0 ? -b : b;
    }, p2.prototype.toJSON = function() {
      return this.toString(16);
    }, p2.prototype.toBuffer = function(b, E2) {
      return l2(typeof _ < "u"), this.toArrayLike(_, b, E2);
    }, p2.prototype.toArray = function(b, E2) {
      return this.toArrayLike(Array, b, E2);
    }, p2.prototype.toArrayLike = function(b, E2, k) {
      var O2 = this.byteLength(), A2 = k || Math.max(1, O2);
      l2(O2 <= A2, "byte array longer than desired length"), l2(A2 > 0, "Requested array length <= 0"), this.strip();
      var x2 = E2 === "le", Y2 = new b(A2), B2, T2, D2 = this.clone();
      if (x2) {
        for (T2 = 0; !D2.isZero(); T2++)
          B2 = D2.andln(255), D2.iushrn(8), Y2[T2] = B2;
        for (; T2 < A2; T2++)
          Y2[T2] = 0;
      } else {
        for (T2 = 0; T2 < A2 - O2; T2++)
          Y2[T2] = 0;
        for (T2 = 0; !D2.isZero(); T2++)
          B2 = D2.andln(255), D2.iushrn(8), Y2[A2 - T2 - 1] = B2;
      }
      return Y2;
    }, Math.clz32 ? p2.prototype._countBits = function(b) {
      return 32 - Math.clz32(b);
    } : p2.prototype._countBits = function(b) {
      var E2 = b, k = 0;
      return E2 >= 4096 && (k += 13, E2 >>>= 13), E2 >= 64 && (k += 7, E2 >>>= 7), E2 >= 8 && (k += 4, E2 >>>= 4), E2 >= 2 && (k += 2, E2 >>>= 2), k + E2;
    }, p2.prototype._zeroBits = function(b) {
      if (b === 0)
        return 26;
      var E2 = b, k = 0;
      return E2 & 8191 || (k += 13, E2 >>>= 13), E2 & 127 || (k += 7, E2 >>>= 7), E2 & 15 || (k += 4, E2 >>>= 4), E2 & 3 || (k += 2, E2 >>>= 2), E2 & 1 || k++, k;
    }, p2.prototype.bitLength = function() {
      var b = this.words[this.length - 1], E2 = this._countBits(b);
      return (this.length - 1) * 26 + E2;
    };
    function ee2(C2) {
      for (var b = new Array(C2.bitLength()), E2 = 0; E2 < b.length; E2++) {
        var k = E2 / 26 | 0, O2 = E2 % 26;
        b[E2] = (C2.words[k] & 1 << O2) >>> O2;
      }
      return b;
    }
    p2.prototype.zeroBits = function() {
      if (this.isZero())
        return 0;
      for (var b = 0, E2 = 0; E2 < this.length; E2++) {
        var k = this._zeroBits(this.words[E2]);
        if (b += k, k !== 26)
          break;
      }
      return b;
    }, p2.prototype.byteLength = function() {
      return Math.ceil(this.bitLength() / 8);
    }, p2.prototype.toTwos = function(b) {
      return this.negative !== 0 ? this.abs().inotn(b).iaddn(1) : this.clone();
    }, p2.prototype.fromTwos = function(b) {
      return this.testn(b - 1) ? this.notn(b).iaddn(1).ineg() : this.clone();
    }, p2.prototype.isNeg = function() {
      return this.negative !== 0;
    }, p2.prototype.neg = function() {
      return this.clone().ineg();
    }, p2.prototype.ineg = function() {
      return this.isZero() || (this.negative ^= 1), this;
    }, p2.prototype.iuor = function(b) {
      for (; this.length < b.length; )
        this.words[this.length++] = 0;
      for (var E2 = 0; E2 < b.length; E2++)
        this.words[E2] = this.words[E2] | b.words[E2];
      return this.strip();
    }, p2.prototype.ior = function(b) {
      return l2((this.negative | b.negative) === 0), this.iuor(b);
    }, p2.prototype.or = function(b) {
      return this.length > b.length ? this.clone().ior(b) : b.clone().ior(this);
    }, p2.prototype.uor = function(b) {
      return this.length > b.length ? this.clone().iuor(b) : b.clone().iuor(this);
    }, p2.prototype.iuand = function(b) {
      var E2;
      this.length > b.length ? E2 = b : E2 = this;
      for (var k = 0; k < E2.length; k++)
        this.words[k] = this.words[k] & b.words[k];
      return this.length = E2.length, this.strip();
    }, p2.prototype.iand = function(b) {
      return l2((this.negative | b.negative) === 0), this.iuand(b);
    }, p2.prototype.and = function(b) {
      return this.length > b.length ? this.clone().iand(b) : b.clone().iand(this);
    }, p2.prototype.uand = function(b) {
      return this.length > b.length ? this.clone().iuand(b) : b.clone().iuand(this);
    }, p2.prototype.iuxor = function(b) {
      var E2, k;
      this.length > b.length ? (E2 = this, k = b) : (E2 = b, k = this);
      for (var O2 = 0; O2 < k.length; O2++)
        this.words[O2] = E2.words[O2] ^ k.words[O2];
      if (this !== E2)
        for (; O2 < E2.length; O2++)
          this.words[O2] = E2.words[O2];
      return this.length = E2.length, this.strip();
    }, p2.prototype.ixor = function(b) {
      return l2((this.negative | b.negative) === 0), this.iuxor(b);
    }, p2.prototype.xor = function(b) {
      return this.length > b.length ? this.clone().ixor(b) : b.clone().ixor(this);
    }, p2.prototype.uxor = function(b) {
      return this.length > b.length ? this.clone().iuxor(b) : b.clone().iuxor(this);
    }, p2.prototype.inotn = function(b) {
      l2(typeof b == "number" && b >= 0);
      var E2 = Math.ceil(b / 26) | 0, k = b % 26;
      this._expand(E2), k > 0 && E2--;
      for (var O2 = 0; O2 < E2; O2++)
        this.words[O2] = ~this.words[O2] & 67108863;
      return k > 0 && (this.words[O2] = ~this.words[O2] & 67108863 >> 26 - k), this.strip();
    }, p2.prototype.notn = function(b) {
      return this.clone().inotn(b);
    }, p2.prototype.setn = function(b, E2) {
      l2(typeof b == "number" && b >= 0);
      var k = b / 26 | 0, O2 = b % 26;
      return this._expand(k + 1), E2 ? this.words[k] = this.words[k] | 1 << O2 : this.words[k] = this.words[k] & ~(1 << O2), this.strip();
    }, p2.prototype.iadd = function(b) {
      var E2;
      if (this.negative !== 0 && b.negative === 0)
        return this.negative = 0, E2 = this.isub(b), this.negative ^= 1, this._normSign();
      if (this.negative === 0 && b.negative !== 0)
        return b.negative = 0, E2 = this.isub(b), b.negative = 1, E2._normSign();
      var k, O2;
      this.length > b.length ? (k = this, O2 = b) : (k = b, O2 = this);
      for (var A2 = 0, x2 = 0; x2 < O2.length; x2++)
        E2 = (k.words[x2] | 0) + (O2.words[x2] | 0) + A2, this.words[x2] = E2 & 67108863, A2 = E2 >>> 26;
      for (; A2 !== 0 && x2 < k.length; x2++)
        E2 = (k.words[x2] | 0) + A2, this.words[x2] = E2 & 67108863, A2 = E2 >>> 26;
      if (this.length = k.length, A2 !== 0)
        this.words[this.length] = A2, this.length++;
      else if (k !== this)
        for (; x2 < k.length; x2++)
          this.words[x2] = k.words[x2];
      return this;
    }, p2.prototype.add = function(b) {
      var E2;
      return b.negative !== 0 && this.negative === 0 ? (b.negative = 0, E2 = this.sub(b), b.negative ^= 1, E2) : b.negative === 0 && this.negative !== 0 ? (this.negative = 0, E2 = b.sub(this), this.negative = 1, E2) : this.length > b.length ? this.clone().iadd(b) : b.clone().iadd(this);
    }, p2.prototype.isub = function(b) {
      if (b.negative !== 0) {
        b.negative = 0;
        var E2 = this.iadd(b);
        return b.negative = 1, E2._normSign();
      } else if (this.negative !== 0)
        return this.negative = 0, this.iadd(b), this.negative = 1, this._normSign();
      var k = this.cmp(b);
      if (k === 0)
        return this.negative = 0, this.length = 1, this.words[0] = 0, this;
      var O2, A2;
      k > 0 ? (O2 = this, A2 = b) : (O2 = b, A2 = this);
      for (var x2 = 0, Y2 = 0; Y2 < A2.length; Y2++)
        E2 = (O2.words[Y2] | 0) - (A2.words[Y2] | 0) + x2, x2 = E2 >> 26, this.words[Y2] = E2 & 67108863;
      for (; x2 !== 0 && Y2 < O2.length; Y2++)
        E2 = (O2.words[Y2] | 0) + x2, x2 = E2 >> 26, this.words[Y2] = E2 & 67108863;
      if (x2 === 0 && Y2 < O2.length && O2 !== this)
        for (; Y2 < O2.length; Y2++)
          this.words[Y2] = O2.words[Y2];
      return this.length = Math.max(this.length, Y2), O2 !== this && (this.negative = 1), this.strip();
    }, p2.prototype.sub = function(b) {
      return this.clone().isub(b);
    };
    function X2(C2, b, E2) {
      E2.negative = b.negative ^ C2.negative;
      var k = C2.length + b.length | 0;
      E2.length = k, k = k - 1 | 0;
      var O2 = C2.words[0] | 0, A2 = b.words[0] | 0, x2 = O2 * A2, Y2 = x2 & 67108863, B2 = x2 / 67108864 | 0;
      E2.words[0] = Y2;
      for (var T2 = 1; T2 < k; T2++) {
        for (var D2 = B2 >>> 26, te2 = B2 & 67108863, me2 = Math.min(T2, b.length - 1), Ie2 = Math.max(0, T2 - C2.length + 1); Ie2 <= me2; Ie2++) {
          var $e2 = T2 - Ie2 | 0;
          O2 = C2.words[$e2] | 0, A2 = b.words[Ie2] | 0, x2 = O2 * A2 + te2, D2 += x2 / 67108864 | 0, te2 = x2 & 67108863;
        }
        E2.words[T2] = te2 | 0, B2 = D2 | 0;
      }
      return B2 !== 0 ? E2.words[T2] = B2 | 0 : E2.length--, E2.strip();
    }
    var ie2 = function(b, E2, k) {
      var O2 = b.words, A2 = E2.words, x2 = k.words, Y2 = 0, B2, T2, D2, te2 = O2[0] | 0, me2 = te2 & 8191, Ie2 = te2 >>> 13, $e2 = O2[1] | 0, ye2 = $e2 & 8191, he2 = $e2 >>> 13, Me2 = O2[2] | 0, Ae2 = Me2 & 8191, xe2 = Me2 >>> 13, ae2 = O2[3] | 0, N2 = ae2 & 8191, re2 = ae2 >>> 13, fe2 = O2[4] | 0, Ne2 = fe2 & 8191, Oe2 = fe2 >>> 13, qe2 = O2[5] | 0, je2 = qe2 & 8191, Fe2 = qe2 >>> 13, yt = O2[6] | 0, Xe2 = yt & 8191, Ge2 = yt >>> 13, V2 = O2[7] | 0, ge2 = V2 & 8191, we2 = V2 >>> 13, We2 = O2[8] | 0, Re2 = We2 & 8191, J2 = We2 >>> 13, _e = O2[9] | 0, ue2 = _e & 8191, ce2 = _e >>> 13, ve2 = A2[0] | 0, Ce2 = ve2 & 8191, Be2 = ve2 >>> 13, He2 = A2[1] | 0, Ve2 = He2 & 8191, Ze2 = He2 >>> 13, Ke2 = A2[2] | 0, U2 = Ke2 & 8191, se2 = Ke2 >>> 13, Se2 = A2[3] | 0, Ue2 = Se2 & 8191, De2 = Se2 >>> 13, Ye2 = A2[4] | 0, Qe2 = Ye2 & 8191, st = Ye2 >>> 13, St = A2[5] | 0, tt = St & 8191, it = St >>> 13, Tt = A2[6] | 0, rt = Tt & 8191, dt = Tt >>> 13, wt = A2[7] | 0, nt = wt & 8191, at = wt >>> 13, gt = A2[8] | 0, ot = gt & 8191, ct = gt >>> 13, Ct = A2[9] | 0, ut = Ct & 8191, lt = Ct >>> 13;
      k.negative = b.negative ^ E2.negative, k.length = 19, B2 = Math.imul(me2, Ce2), T2 = Math.imul(me2, Be2), T2 = T2 + Math.imul(Ie2, Ce2) | 0, D2 = Math.imul(Ie2, Be2);
      var kt = (Y2 + B2 | 0) + ((T2 & 8191) << 13) | 0;
      Y2 = (D2 + (T2 >>> 13) | 0) + (kt >>> 26) | 0, kt &= 67108863, B2 = Math.imul(ye2, Ce2), T2 = Math.imul(ye2, Be2), T2 = T2 + Math.imul(he2, Ce2) | 0, D2 = Math.imul(he2, Be2), B2 = B2 + Math.imul(me2, Ve2) | 0, T2 = T2 + Math.imul(me2, Ze2) | 0, T2 = T2 + Math.imul(Ie2, Ve2) | 0, D2 = D2 + Math.imul(Ie2, Ze2) | 0;
      var Rt = (Y2 + B2 | 0) + ((T2 & 8191) << 13) | 0;
      Y2 = (D2 + (T2 >>> 13) | 0) + (Rt >>> 26) | 0, Rt &= 67108863, B2 = Math.imul(Ae2, Ce2), T2 = Math.imul(Ae2, Be2), T2 = T2 + Math.imul(xe2, Ce2) | 0, D2 = Math.imul(xe2, Be2), B2 = B2 + Math.imul(ye2, Ve2) | 0, T2 = T2 + Math.imul(ye2, Ze2) | 0, T2 = T2 + Math.imul(he2, Ve2) | 0, D2 = D2 + Math.imul(he2, Ze2) | 0, B2 = B2 + Math.imul(me2, U2) | 0, T2 = T2 + Math.imul(me2, se2) | 0, T2 = T2 + Math.imul(Ie2, U2) | 0, D2 = D2 + Math.imul(Ie2, se2) | 0;
      var Je2 = (Y2 + B2 | 0) + ((T2 & 8191) << 13) | 0;
      Y2 = (D2 + (T2 >>> 13) | 0) + (Je2 >>> 26) | 0, Je2 &= 67108863, B2 = Math.imul(N2, Ce2), T2 = Math.imul(N2, Be2), T2 = T2 + Math.imul(re2, Ce2) | 0, D2 = Math.imul(re2, Be2), B2 = B2 + Math.imul(Ae2, Ve2) | 0, T2 = T2 + Math.imul(Ae2, Ze2) | 0, T2 = T2 + Math.imul(xe2, Ve2) | 0, D2 = D2 + Math.imul(xe2, Ze2) | 0, B2 = B2 + Math.imul(ye2, U2) | 0, T2 = T2 + Math.imul(ye2, se2) | 0, T2 = T2 + Math.imul(he2, U2) | 0, D2 = D2 + Math.imul(he2, se2) | 0, B2 = B2 + Math.imul(me2, Ue2) | 0, T2 = T2 + Math.imul(me2, De2) | 0, T2 = T2 + Math.imul(Ie2, Ue2) | 0, D2 = D2 + Math.imul(Ie2, De2) | 0;
      var ze2 = (Y2 + B2 | 0) + ((T2 & 8191) << 13) | 0;
      Y2 = (D2 + (T2 >>> 13) | 0) + (ze2 >>> 26) | 0, ze2 &= 67108863, B2 = Math.imul(Ne2, Ce2), T2 = Math.imul(Ne2, Be2), T2 = T2 + Math.imul(Oe2, Ce2) | 0, D2 = Math.imul(Oe2, Be2), B2 = B2 + Math.imul(N2, Ve2) | 0, T2 = T2 + Math.imul(N2, Ze2) | 0, T2 = T2 + Math.imul(re2, Ve2) | 0, D2 = D2 + Math.imul(re2, Ze2) | 0, B2 = B2 + Math.imul(Ae2, U2) | 0, T2 = T2 + Math.imul(Ae2, se2) | 0, T2 = T2 + Math.imul(xe2, U2) | 0, D2 = D2 + Math.imul(xe2, se2) | 0, B2 = B2 + Math.imul(ye2, Ue2) | 0, T2 = T2 + Math.imul(ye2, De2) | 0, T2 = T2 + Math.imul(he2, Ue2) | 0, D2 = D2 + Math.imul(he2, De2) | 0, B2 = B2 + Math.imul(me2, Qe2) | 0, T2 = T2 + Math.imul(me2, st) | 0, T2 = T2 + Math.imul(Ie2, Qe2) | 0, D2 = D2 + Math.imul(Ie2, st) | 0;
      var et = (Y2 + B2 | 0) + ((T2 & 8191) << 13) | 0;
      Y2 = (D2 + (T2 >>> 13) | 0) + (et >>> 26) | 0, et &= 67108863, B2 = Math.imul(je2, Ce2), T2 = Math.imul(je2, Be2), T2 = T2 + Math.imul(Fe2, Ce2) | 0, D2 = Math.imul(Fe2, Be2), B2 = B2 + Math.imul(Ne2, Ve2) | 0, T2 = T2 + Math.imul(Ne2, Ze2) | 0, T2 = T2 + Math.imul(Oe2, Ve2) | 0, D2 = D2 + Math.imul(Oe2, Ze2) | 0, B2 = B2 + Math.imul(N2, U2) | 0, T2 = T2 + Math.imul(N2, se2) | 0, T2 = T2 + Math.imul(re2, U2) | 0, D2 = D2 + Math.imul(re2, se2) | 0, B2 = B2 + Math.imul(Ae2, Ue2) | 0, T2 = T2 + Math.imul(Ae2, De2) | 0, T2 = T2 + Math.imul(xe2, Ue2) | 0, D2 = D2 + Math.imul(xe2, De2) | 0, B2 = B2 + Math.imul(ye2, Qe2) | 0, T2 = T2 + Math.imul(ye2, st) | 0, T2 = T2 + Math.imul(he2, Qe2) | 0, D2 = D2 + Math.imul(he2, st) | 0, B2 = B2 + Math.imul(me2, tt) | 0, T2 = T2 + Math.imul(me2, it) | 0, T2 = T2 + Math.imul(Ie2, tt) | 0, D2 = D2 + Math.imul(Ie2, it) | 0;
      var pt = (Y2 + B2 | 0) + ((T2 & 8191) << 13) | 0;
      Y2 = (D2 + (T2 >>> 13) | 0) + (pt >>> 26) | 0, pt &= 67108863, B2 = Math.imul(Xe2, Ce2), T2 = Math.imul(Xe2, Be2), T2 = T2 + Math.imul(Ge2, Ce2) | 0, D2 = Math.imul(Ge2, Be2), B2 = B2 + Math.imul(je2, Ve2) | 0, T2 = T2 + Math.imul(je2, Ze2) | 0, T2 = T2 + Math.imul(Fe2, Ve2) | 0, D2 = D2 + Math.imul(Fe2, Ze2) | 0, B2 = B2 + Math.imul(Ne2, U2) | 0, T2 = T2 + Math.imul(Ne2, se2) | 0, T2 = T2 + Math.imul(Oe2, U2) | 0, D2 = D2 + Math.imul(Oe2, se2) | 0, B2 = B2 + Math.imul(N2, Ue2) | 0, T2 = T2 + Math.imul(N2, De2) | 0, T2 = T2 + Math.imul(re2, Ue2) | 0, D2 = D2 + Math.imul(re2, De2) | 0, B2 = B2 + Math.imul(Ae2, Qe2) | 0, T2 = T2 + Math.imul(Ae2, st) | 0, T2 = T2 + Math.imul(xe2, Qe2) | 0, D2 = D2 + Math.imul(xe2, st) | 0, B2 = B2 + Math.imul(ye2, tt) | 0, T2 = T2 + Math.imul(ye2, it) | 0, T2 = T2 + Math.imul(he2, tt) | 0, D2 = D2 + Math.imul(he2, it) | 0, B2 = B2 + Math.imul(me2, rt) | 0, T2 = T2 + Math.imul(me2, dt) | 0, T2 = T2 + Math.imul(Ie2, rt) | 0, D2 = D2 + Math.imul(Ie2, dt) | 0;
      var mt = (Y2 + B2 | 0) + ((T2 & 8191) << 13) | 0;
      Y2 = (D2 + (T2 >>> 13) | 0) + (mt >>> 26) | 0, mt &= 67108863, B2 = Math.imul(ge2, Ce2), T2 = Math.imul(ge2, Be2), T2 = T2 + Math.imul(we2, Ce2) | 0, D2 = Math.imul(we2, Be2), B2 = B2 + Math.imul(Xe2, Ve2) | 0, T2 = T2 + Math.imul(Xe2, Ze2) | 0, T2 = T2 + Math.imul(Ge2, Ve2) | 0, D2 = D2 + Math.imul(Ge2, Ze2) | 0, B2 = B2 + Math.imul(je2, U2) | 0, T2 = T2 + Math.imul(je2, se2) | 0, T2 = T2 + Math.imul(Fe2, U2) | 0, D2 = D2 + Math.imul(Fe2, se2) | 0, B2 = B2 + Math.imul(Ne2, Ue2) | 0, T2 = T2 + Math.imul(Ne2, De2) | 0, T2 = T2 + Math.imul(Oe2, Ue2) | 0, D2 = D2 + Math.imul(Oe2, De2) | 0, B2 = B2 + Math.imul(N2, Qe2) | 0, T2 = T2 + Math.imul(N2, st) | 0, T2 = T2 + Math.imul(re2, Qe2) | 0, D2 = D2 + Math.imul(re2, st) | 0, B2 = B2 + Math.imul(Ae2, tt) | 0, T2 = T2 + Math.imul(Ae2, it) | 0, T2 = T2 + Math.imul(xe2, tt) | 0, D2 = D2 + Math.imul(xe2, it) | 0, B2 = B2 + Math.imul(ye2, rt) | 0, T2 = T2 + Math.imul(ye2, dt) | 0, T2 = T2 + Math.imul(he2, rt) | 0, D2 = D2 + Math.imul(he2, dt) | 0, B2 = B2 + Math.imul(me2, nt) | 0, T2 = T2 + Math.imul(me2, at) | 0, T2 = T2 + Math.imul(Ie2, nt) | 0, D2 = D2 + Math.imul(Ie2, at) | 0;
      var vt = (Y2 + B2 | 0) + ((T2 & 8191) << 13) | 0;
      Y2 = (D2 + (T2 >>> 13) | 0) + (vt >>> 26) | 0, vt &= 67108863, B2 = Math.imul(Re2, Ce2), T2 = Math.imul(Re2, Be2), T2 = T2 + Math.imul(J2, Ce2) | 0, D2 = Math.imul(J2, Be2), B2 = B2 + Math.imul(ge2, Ve2) | 0, T2 = T2 + Math.imul(ge2, Ze2) | 0, T2 = T2 + Math.imul(we2, Ve2) | 0, D2 = D2 + Math.imul(we2, Ze2) | 0, B2 = B2 + Math.imul(Xe2, U2) | 0, T2 = T2 + Math.imul(Xe2, se2) | 0, T2 = T2 + Math.imul(Ge2, U2) | 0, D2 = D2 + Math.imul(Ge2, se2) | 0, B2 = B2 + Math.imul(je2, Ue2) | 0, T2 = T2 + Math.imul(je2, De2) | 0, T2 = T2 + Math.imul(Fe2, Ue2) | 0, D2 = D2 + Math.imul(Fe2, De2) | 0, B2 = B2 + Math.imul(Ne2, Qe2) | 0, T2 = T2 + Math.imul(Ne2, st) | 0, T2 = T2 + Math.imul(Oe2, Qe2) | 0, D2 = D2 + Math.imul(Oe2, st) | 0, B2 = B2 + Math.imul(N2, tt) | 0, T2 = T2 + Math.imul(N2, it) | 0, T2 = T2 + Math.imul(re2, tt) | 0, D2 = D2 + Math.imul(re2, it) | 0, B2 = B2 + Math.imul(Ae2, rt) | 0, T2 = T2 + Math.imul(Ae2, dt) | 0, T2 = T2 + Math.imul(xe2, rt) | 0, D2 = D2 + Math.imul(xe2, dt) | 0, B2 = B2 + Math.imul(ye2, nt) | 0, T2 = T2 + Math.imul(ye2, at) | 0, T2 = T2 + Math.imul(he2, nt) | 0, D2 = D2 + Math.imul(he2, at) | 0, B2 = B2 + Math.imul(me2, ot) | 0, T2 = T2 + Math.imul(me2, ct) | 0, T2 = T2 + Math.imul(Ie2, ot) | 0, D2 = D2 + Math.imul(Ie2, ct) | 0;
      var ht = (Y2 + B2 | 0) + ((T2 & 8191) << 13) | 0;
      Y2 = (D2 + (T2 >>> 13) | 0) + (ht >>> 26) | 0, ht &= 67108863, B2 = Math.imul(ue2, Ce2), T2 = Math.imul(ue2, Be2), T2 = T2 + Math.imul(ce2, Ce2) | 0, D2 = Math.imul(ce2, Be2), B2 = B2 + Math.imul(Re2, Ve2) | 0, T2 = T2 + Math.imul(Re2, Ze2) | 0, T2 = T2 + Math.imul(J2, Ve2) | 0, D2 = D2 + Math.imul(J2, Ze2) | 0, B2 = B2 + Math.imul(ge2, U2) | 0, T2 = T2 + Math.imul(ge2, se2) | 0, T2 = T2 + Math.imul(we2, U2) | 0, D2 = D2 + Math.imul(we2, se2) | 0, B2 = B2 + Math.imul(Xe2, Ue2) | 0, T2 = T2 + Math.imul(Xe2, De2) | 0, T2 = T2 + Math.imul(Ge2, Ue2) | 0, D2 = D2 + Math.imul(Ge2, De2) | 0, B2 = B2 + Math.imul(je2, Qe2) | 0, T2 = T2 + Math.imul(je2, st) | 0, T2 = T2 + Math.imul(Fe2, Qe2) | 0, D2 = D2 + Math.imul(Fe2, st) | 0, B2 = B2 + Math.imul(Ne2, tt) | 0, T2 = T2 + Math.imul(Ne2, it) | 0, T2 = T2 + Math.imul(Oe2, tt) | 0, D2 = D2 + Math.imul(Oe2, it) | 0, B2 = B2 + Math.imul(N2, rt) | 0, T2 = T2 + Math.imul(N2, dt) | 0, T2 = T2 + Math.imul(re2, rt) | 0, D2 = D2 + Math.imul(re2, dt) | 0, B2 = B2 + Math.imul(Ae2, nt) | 0, T2 = T2 + Math.imul(Ae2, at) | 0, T2 = T2 + Math.imul(xe2, nt) | 0, D2 = D2 + Math.imul(xe2, at) | 0, B2 = B2 + Math.imul(ye2, ot) | 0, T2 = T2 + Math.imul(ye2, ct) | 0, T2 = T2 + Math.imul(he2, ot) | 0, D2 = D2 + Math.imul(he2, ct) | 0, B2 = B2 + Math.imul(me2, ut) | 0, T2 = T2 + Math.imul(me2, lt) | 0, T2 = T2 + Math.imul(Ie2, ut) | 0, D2 = D2 + Math.imul(Ie2, lt) | 0;
      var _t = (Y2 + B2 | 0) + ((T2 & 8191) << 13) | 0;
      Y2 = (D2 + (T2 >>> 13) | 0) + (_t >>> 26) | 0, _t &= 67108863, B2 = Math.imul(ue2, Ve2), T2 = Math.imul(ue2, Ze2), T2 = T2 + Math.imul(ce2, Ve2) | 0, D2 = Math.imul(ce2, Ze2), B2 = B2 + Math.imul(Re2, U2) | 0, T2 = T2 + Math.imul(Re2, se2) | 0, T2 = T2 + Math.imul(J2, U2) | 0, D2 = D2 + Math.imul(J2, se2) | 0, B2 = B2 + Math.imul(ge2, Ue2) | 0, T2 = T2 + Math.imul(ge2, De2) | 0, T2 = T2 + Math.imul(we2, Ue2) | 0, D2 = D2 + Math.imul(we2, De2) | 0, B2 = B2 + Math.imul(Xe2, Qe2) | 0, T2 = T2 + Math.imul(Xe2, st) | 0, T2 = T2 + Math.imul(Ge2, Qe2) | 0, D2 = D2 + Math.imul(Ge2, st) | 0, B2 = B2 + Math.imul(je2, tt) | 0, T2 = T2 + Math.imul(je2, it) | 0, T2 = T2 + Math.imul(Fe2, tt) | 0, D2 = D2 + Math.imul(Fe2, it) | 0, B2 = B2 + Math.imul(Ne2, rt) | 0, T2 = T2 + Math.imul(Ne2, dt) | 0, T2 = T2 + Math.imul(Oe2, rt) | 0, D2 = D2 + Math.imul(Oe2, dt) | 0, B2 = B2 + Math.imul(N2, nt) | 0, T2 = T2 + Math.imul(N2, at) | 0, T2 = T2 + Math.imul(re2, nt) | 0, D2 = D2 + Math.imul(re2, at) | 0, B2 = B2 + Math.imul(Ae2, ot) | 0, T2 = T2 + Math.imul(Ae2, ct) | 0, T2 = T2 + Math.imul(xe2, ot) | 0, D2 = D2 + Math.imul(xe2, ct) | 0, B2 = B2 + Math.imul(ye2, ut) | 0, T2 = T2 + Math.imul(ye2, lt) | 0, T2 = T2 + Math.imul(he2, ut) | 0, D2 = D2 + Math.imul(he2, lt) | 0;
      var Et = (Y2 + B2 | 0) + ((T2 & 8191) << 13) | 0;
      Y2 = (D2 + (T2 >>> 13) | 0) + (Et >>> 26) | 0, Et &= 67108863, B2 = Math.imul(ue2, U2), T2 = Math.imul(ue2, se2), T2 = T2 + Math.imul(ce2, U2) | 0, D2 = Math.imul(ce2, se2), B2 = B2 + Math.imul(Re2, Ue2) | 0, T2 = T2 + Math.imul(Re2, De2) | 0, T2 = T2 + Math.imul(J2, Ue2) | 0, D2 = D2 + Math.imul(J2, De2) | 0, B2 = B2 + Math.imul(ge2, Qe2) | 0, T2 = T2 + Math.imul(ge2, st) | 0, T2 = T2 + Math.imul(we2, Qe2) | 0, D2 = D2 + Math.imul(we2, st) | 0, B2 = B2 + Math.imul(Xe2, tt) | 0, T2 = T2 + Math.imul(Xe2, it) | 0, T2 = T2 + Math.imul(Ge2, tt) | 0, D2 = D2 + Math.imul(Ge2, it) | 0, B2 = B2 + Math.imul(je2, rt) | 0, T2 = T2 + Math.imul(je2, dt) | 0, T2 = T2 + Math.imul(Fe2, rt) | 0, D2 = D2 + Math.imul(Fe2, dt) | 0, B2 = B2 + Math.imul(Ne2, nt) | 0, T2 = T2 + Math.imul(Ne2, at) | 0, T2 = T2 + Math.imul(Oe2, nt) | 0, D2 = D2 + Math.imul(Oe2, at) | 0, B2 = B2 + Math.imul(N2, ot) | 0, T2 = T2 + Math.imul(N2, ct) | 0, T2 = T2 + Math.imul(re2, ot) | 0, D2 = D2 + Math.imul(re2, ct) | 0, B2 = B2 + Math.imul(Ae2, ut) | 0, T2 = T2 + Math.imul(Ae2, lt) | 0, T2 = T2 + Math.imul(xe2, ut) | 0, D2 = D2 + Math.imul(xe2, lt) | 0;
      var Pt = (Y2 + B2 | 0) + ((T2 & 8191) << 13) | 0;
      Y2 = (D2 + (T2 >>> 13) | 0) + (Pt >>> 26) | 0, Pt &= 67108863, B2 = Math.imul(ue2, Ue2), T2 = Math.imul(ue2, De2), T2 = T2 + Math.imul(ce2, Ue2) | 0, D2 = Math.imul(ce2, De2), B2 = B2 + Math.imul(Re2, Qe2) | 0, T2 = T2 + Math.imul(Re2, st) | 0, T2 = T2 + Math.imul(J2, Qe2) | 0, D2 = D2 + Math.imul(J2, st) | 0, B2 = B2 + Math.imul(ge2, tt) | 0, T2 = T2 + Math.imul(ge2, it) | 0, T2 = T2 + Math.imul(we2, tt) | 0, D2 = D2 + Math.imul(we2, it) | 0, B2 = B2 + Math.imul(Xe2, rt) | 0, T2 = T2 + Math.imul(Xe2, dt) | 0, T2 = T2 + Math.imul(Ge2, rt) | 0, D2 = D2 + Math.imul(Ge2, dt) | 0, B2 = B2 + Math.imul(je2, nt) | 0, T2 = T2 + Math.imul(je2, at) | 0, T2 = T2 + Math.imul(Fe2, nt) | 0, D2 = D2 + Math.imul(Fe2, at) | 0, B2 = B2 + Math.imul(Ne2, ot) | 0, T2 = T2 + Math.imul(Ne2, ct) | 0, T2 = T2 + Math.imul(Oe2, ot) | 0, D2 = D2 + Math.imul(Oe2, ct) | 0, B2 = B2 + Math.imul(N2, ut) | 0, T2 = T2 + Math.imul(N2, lt) | 0, T2 = T2 + Math.imul(re2, ut) | 0, D2 = D2 + Math.imul(re2, lt) | 0;
      var Nt = (Y2 + B2 | 0) + ((T2 & 8191) << 13) | 0;
      Y2 = (D2 + (T2 >>> 13) | 0) + (Nt >>> 26) | 0, Nt &= 67108863, B2 = Math.imul(ue2, Qe2), T2 = Math.imul(ue2, st), T2 = T2 + Math.imul(ce2, Qe2) | 0, D2 = Math.imul(ce2, st), B2 = B2 + Math.imul(Re2, tt) | 0, T2 = T2 + Math.imul(Re2, it) | 0, T2 = T2 + Math.imul(J2, tt) | 0, D2 = D2 + Math.imul(J2, it) | 0, B2 = B2 + Math.imul(ge2, rt) | 0, T2 = T2 + Math.imul(ge2, dt) | 0, T2 = T2 + Math.imul(we2, rt) | 0, D2 = D2 + Math.imul(we2, dt) | 0, B2 = B2 + Math.imul(Xe2, nt) | 0, T2 = T2 + Math.imul(Xe2, at) | 0, T2 = T2 + Math.imul(Ge2, nt) | 0, D2 = D2 + Math.imul(Ge2, at) | 0, B2 = B2 + Math.imul(je2, ot) | 0, T2 = T2 + Math.imul(je2, ct) | 0, T2 = T2 + Math.imul(Fe2, ot) | 0, D2 = D2 + Math.imul(Fe2, ct) | 0, B2 = B2 + Math.imul(Ne2, ut) | 0, T2 = T2 + Math.imul(Ne2, lt) | 0, T2 = T2 + Math.imul(Oe2, ut) | 0, D2 = D2 + Math.imul(Oe2, lt) | 0;
      var Mt = (Y2 + B2 | 0) + ((T2 & 8191) << 13) | 0;
      Y2 = (D2 + (T2 >>> 13) | 0) + (Mt >>> 26) | 0, Mt &= 67108863, B2 = Math.imul(ue2, tt), T2 = Math.imul(ue2, it), T2 = T2 + Math.imul(ce2, tt) | 0, D2 = Math.imul(ce2, it), B2 = B2 + Math.imul(Re2, rt) | 0, T2 = T2 + Math.imul(Re2, dt) | 0, T2 = T2 + Math.imul(J2, rt) | 0, D2 = D2 + Math.imul(J2, dt) | 0, B2 = B2 + Math.imul(ge2, nt) | 0, T2 = T2 + Math.imul(ge2, at) | 0, T2 = T2 + Math.imul(we2, nt) | 0, D2 = D2 + Math.imul(we2, at) | 0, B2 = B2 + Math.imul(Xe2, ot) | 0, T2 = T2 + Math.imul(Xe2, ct) | 0, T2 = T2 + Math.imul(Ge2, ot) | 0, D2 = D2 + Math.imul(Ge2, ct) | 0, B2 = B2 + Math.imul(je2, ut) | 0, T2 = T2 + Math.imul(je2, lt) | 0, T2 = T2 + Math.imul(Fe2, ut) | 0, D2 = D2 + Math.imul(Fe2, lt) | 0;
      var Ot = (Y2 + B2 | 0) + ((T2 & 8191) << 13) | 0;
      Y2 = (D2 + (T2 >>> 13) | 0) + (Ot >>> 26) | 0, Ot &= 67108863, B2 = Math.imul(ue2, rt), T2 = Math.imul(ue2, dt), T2 = T2 + Math.imul(ce2, rt) | 0, D2 = Math.imul(ce2, dt), B2 = B2 + Math.imul(Re2, nt) | 0, T2 = T2 + Math.imul(Re2, at) | 0, T2 = T2 + Math.imul(J2, nt) | 0, D2 = D2 + Math.imul(J2, at) | 0, B2 = B2 + Math.imul(ge2, ot) | 0, T2 = T2 + Math.imul(ge2, ct) | 0, T2 = T2 + Math.imul(we2, ot) | 0, D2 = D2 + Math.imul(we2, ct) | 0, B2 = B2 + Math.imul(Xe2, ut) | 0, T2 = T2 + Math.imul(Xe2, lt) | 0, T2 = T2 + Math.imul(Ge2, ut) | 0, D2 = D2 + Math.imul(Ge2, lt) | 0;
      var $t = (Y2 + B2 | 0) + ((T2 & 8191) << 13) | 0;
      Y2 = (D2 + (T2 >>> 13) | 0) + ($t >>> 26) | 0, $t &= 67108863, B2 = Math.imul(ue2, nt), T2 = Math.imul(ue2, at), T2 = T2 + Math.imul(ce2, nt) | 0, D2 = Math.imul(ce2, at), B2 = B2 + Math.imul(Re2, ot) | 0, T2 = T2 + Math.imul(Re2, ct) | 0, T2 = T2 + Math.imul(J2, ot) | 0, D2 = D2 + Math.imul(J2, ct) | 0, B2 = B2 + Math.imul(ge2, ut) | 0, T2 = T2 + Math.imul(ge2, lt) | 0, T2 = T2 + Math.imul(we2, ut) | 0, D2 = D2 + Math.imul(we2, lt) | 0;
      var Bt = (Y2 + B2 | 0) + ((T2 & 8191) << 13) | 0;
      Y2 = (D2 + (T2 >>> 13) | 0) + (Bt >>> 26) | 0, Bt &= 67108863, B2 = Math.imul(ue2, ot), T2 = Math.imul(ue2, ct), T2 = T2 + Math.imul(ce2, ot) | 0, D2 = Math.imul(ce2, ct), B2 = B2 + Math.imul(Re2, ut) | 0, T2 = T2 + Math.imul(Re2, lt) | 0, T2 = T2 + Math.imul(J2, ut) | 0, D2 = D2 + Math.imul(J2, lt) | 0;
      var xt = (Y2 + B2 | 0) + ((T2 & 8191) << 13) | 0;
      Y2 = (D2 + (T2 >>> 13) | 0) + (xt >>> 26) | 0, xt &= 67108863, B2 = Math.imul(ue2, ut), T2 = Math.imul(ue2, lt), T2 = T2 + Math.imul(ce2, ut) | 0, D2 = Math.imul(ce2, lt);
      var Ut = (Y2 + B2 | 0) + ((T2 & 8191) << 13) | 0;
      return Y2 = (D2 + (T2 >>> 13) | 0) + (Ut >>> 26) | 0, Ut &= 67108863, x2[0] = kt, x2[1] = Rt, x2[2] = Je2, x2[3] = ze2, x2[4] = et, x2[5] = pt, x2[6] = mt, x2[7] = vt, x2[8] = ht, x2[9] = _t, x2[10] = Et, x2[11] = Pt, x2[12] = Nt, x2[13] = Mt, x2[14] = Ot, x2[15] = $t, x2[16] = Bt, x2[17] = xt, x2[18] = Ut, Y2 !== 0 && (x2[19] = Y2, k.length++), k;
    };
    Math.imul || (ie2 = X2);
    function Q2(C2, b, E2) {
      E2.negative = b.negative ^ C2.negative, E2.length = C2.length + b.length;
      for (var k = 0, O2 = 0, A2 = 0; A2 < E2.length - 1; A2++) {
        var x2 = O2;
        O2 = 0;
        for (var Y2 = k & 67108863, B2 = Math.min(A2, b.length - 1), T2 = Math.max(0, A2 - C2.length + 1); T2 <= B2; T2++) {
          var D2 = A2 - T2, te2 = C2.words[D2] | 0, me2 = b.words[T2] | 0, Ie2 = te2 * me2, $e2 = Ie2 & 67108863;
          x2 = x2 + (Ie2 / 67108864 | 0) | 0, $e2 = $e2 + Y2 | 0, Y2 = $e2 & 67108863, x2 = x2 + ($e2 >>> 26) | 0, O2 += x2 >>> 26, x2 &= 67108863;
        }
        E2.words[A2] = Y2, k = x2, x2 = O2;
      }
      return k !== 0 ? E2.words[A2] = k : E2.length--, E2.strip();
    }
    function ne2(C2, b, E2) {
      var k = new Z2();
      return k.mulp(C2, b, E2);
    }
    p2.prototype.mulTo = function(b, E2) {
      var k, O2 = this.length + b.length;
      return this.length === 10 && b.length === 10 ? k = ie2(this, b, E2) : O2 < 63 ? k = X2(this, b, E2) : O2 < 1024 ? k = Q2(this, b, E2) : k = ne2(this, b, E2), k;
    };
    function Z2(C2, b) {
      this.x = C2, this.y = b;
    }
    Z2.prototype.makeRBT = function(b) {
      for (var E2 = new Array(b), k = p2.prototype._countBits(b) - 1, O2 = 0; O2 < b; O2++)
        E2[O2] = this.revBin(O2, k, b);
      return E2;
    }, Z2.prototype.revBin = function(b, E2, k) {
      if (b === 0 || b === k - 1)
        return b;
      for (var O2 = 0, A2 = 0; A2 < E2; A2++)
        O2 |= (b & 1) << E2 - A2 - 1, b >>= 1;
      return O2;
    }, Z2.prototype.permute = function(b, E2, k, O2, A2, x2) {
      for (var Y2 = 0; Y2 < x2; Y2++)
        O2[Y2] = E2[b[Y2]], A2[Y2] = k[b[Y2]];
    }, Z2.prototype.transform = function(b, E2, k, O2, A2, x2) {
      this.permute(x2, b, E2, k, O2, A2);
      for (var Y2 = 1; Y2 < A2; Y2 <<= 1)
        for (var B2 = Y2 << 1, T2 = Math.cos(2 * Math.PI / B2), D2 = Math.sin(2 * Math.PI / B2), te2 = 0; te2 < A2; te2 += B2)
          for (var me2 = T2, Ie2 = D2, $e2 = 0; $e2 < Y2; $e2++) {
            var ye2 = k[te2 + $e2], he2 = O2[te2 + $e2], Me2 = k[te2 + $e2 + Y2], Ae2 = O2[te2 + $e2 + Y2], xe2 = me2 * Me2 - Ie2 * Ae2;
            Ae2 = me2 * Ae2 + Ie2 * Me2, Me2 = xe2, k[te2 + $e2] = ye2 + Me2, O2[te2 + $e2] = he2 + Ae2, k[te2 + $e2 + Y2] = ye2 - Me2, O2[te2 + $e2 + Y2] = he2 - Ae2, $e2 !== B2 && (xe2 = T2 * me2 - D2 * Ie2, Ie2 = T2 * Ie2 + D2 * me2, me2 = xe2);
          }
    }, Z2.prototype.guessLen13b = function(b, E2) {
      var k = Math.max(E2, b) | 1, O2 = k & 1, A2 = 0;
      for (k = k / 2 | 0; k; k = k >>> 1)
        A2++;
      return 1 << A2 + 1 + O2;
    }, Z2.prototype.conjugate = function(b, E2, k) {
      if (!(k <= 1))
        for (var O2 = 0; O2 < k / 2; O2++) {
          var A2 = b[O2];
          b[O2] = b[k - O2 - 1], b[k - O2 - 1] = A2, A2 = E2[O2], E2[O2] = -E2[k - O2 - 1], E2[k - O2 - 1] = -A2;
        }
    }, Z2.prototype.normalize13b = function(b, E2) {
      for (var k = 0, O2 = 0; O2 < E2 / 2; O2++) {
        var A2 = Math.round(b[2 * O2 + 1] / E2) * 8192 + Math.round(b[2 * O2] / E2) + k;
        b[O2] = A2 & 67108863, A2 < 67108864 ? k = 0 : k = A2 / 67108864 | 0;
      }
      return b;
    }, Z2.prototype.convert13b = function(b, E2, k, O2) {
      for (var A2 = 0, x2 = 0; x2 < E2; x2++)
        A2 = A2 + (b[x2] | 0), k[2 * x2] = A2 & 8191, A2 = A2 >>> 13, k[2 * x2 + 1] = A2 & 8191, A2 = A2 >>> 13;
      for (x2 = 2 * E2; x2 < O2; ++x2)
        k[x2] = 0;
      l2(A2 === 0), l2((A2 & -8192) === 0);
    }, Z2.prototype.stub = function(b) {
      for (var E2 = new Array(b), k = 0; k < b; k++)
        E2[k] = 0;
      return E2;
    }, Z2.prototype.mulp = function(b, E2, k) {
      var O2 = 2 * this.guessLen13b(b.length, E2.length), A2 = this.makeRBT(O2), x2 = this.stub(O2), Y2 = new Array(O2), B2 = new Array(O2), T2 = new Array(O2), D2 = new Array(O2), te2 = new Array(O2), me2 = new Array(O2), Ie2 = k.words;
      Ie2.length = O2, this.convert13b(b.words, b.length, Y2, O2), this.convert13b(E2.words, E2.length, D2, O2), this.transform(Y2, x2, B2, T2, O2, A2), this.transform(D2, x2, te2, me2, O2, A2);
      for (var $e2 = 0; $e2 < O2; $e2++) {
        var ye2 = B2[$e2] * te2[$e2] - T2[$e2] * me2[$e2];
        T2[$e2] = B2[$e2] * me2[$e2] + T2[$e2] * te2[$e2], B2[$e2] = ye2;
      }
      return this.conjugate(B2, T2, O2), this.transform(B2, T2, Ie2, x2, O2, A2), this.conjugate(Ie2, x2, O2), this.normalize13b(Ie2, O2), k.negative = b.negative ^ E2.negative, k.length = b.length + E2.length, k.strip();
    }, p2.prototype.mul = function(b) {
      var E2 = new p2(null);
      return E2.words = new Array(this.length + b.length), this.mulTo(b, E2);
    }, p2.prototype.mulf = function(b) {
      var E2 = new p2(null);
      return E2.words = new Array(this.length + b.length), ne2(this, b, E2);
    }, p2.prototype.imul = function(b) {
      return this.clone().mulTo(b, this);
    }, p2.prototype.imuln = function(b) {
      l2(typeof b == "number"), l2(b < 67108864);
      for (var E2 = 0, k = 0; k < this.length; k++) {
        var O2 = (this.words[k] | 0) * b, A2 = (O2 & 67108863) + (E2 & 67108863);
        E2 >>= 26, E2 += O2 / 67108864 | 0, E2 += A2 >>> 26, this.words[k] = A2 & 67108863;
      }
      return E2 !== 0 && (this.words[k] = E2, this.length++), this;
    }, p2.prototype.muln = function(b) {
      return this.clone().imuln(b);
    }, p2.prototype.sqr = function() {
      return this.mul(this);
    }, p2.prototype.isqr = function() {
      return this.imul(this.clone());
    }, p2.prototype.pow = function(b) {
      var E2 = ee2(b);
      if (E2.length === 0)
        return new p2(1);
      for (var k = this, O2 = 0; O2 < E2.length && E2[O2] === 0; O2++, k = k.sqr())
        ;
      if (++O2 < E2.length)
        for (var A2 = k.sqr(); O2 < E2.length; O2++, A2 = A2.sqr())
          E2[O2] !== 0 && (k = k.mul(A2));
      return k;
    }, p2.prototype.iushln = function(b) {
      l2(typeof b == "number" && b >= 0);
      var E2 = b % 26, k = (b - E2) / 26, O2 = 67108863 >>> 26 - E2 << 26 - E2, A2;
      if (E2 !== 0) {
        var x2 = 0;
        for (A2 = 0; A2 < this.length; A2++) {
          var Y2 = this.words[A2] & O2, B2 = (this.words[A2] | 0) - Y2 << E2;
          this.words[A2] = B2 | x2, x2 = Y2 >>> 26 - E2;
        }
        x2 && (this.words[A2] = x2, this.length++);
      }
      if (k !== 0) {
        for (A2 = this.length - 1; A2 >= 0; A2--)
          this.words[A2 + k] = this.words[A2];
        for (A2 = 0; A2 < k; A2++)
          this.words[A2] = 0;
        this.length += k;
      }
      return this.strip();
    }, p2.prototype.ishln = function(b) {
      return l2(this.negative === 0), this.iushln(b);
    }, p2.prototype.iushrn = function(b, E2, k) {
      l2(typeof b == "number" && b >= 0);
      var O2;
      E2 ? O2 = (E2 - E2 % 26) / 26 : O2 = 0;
      var A2 = b % 26, x2 = Math.min((b - A2) / 26, this.length), Y2 = 67108863 ^ 67108863 >>> A2 << A2, B2 = k;
      if (O2 -= x2, O2 = Math.max(0, O2), B2) {
        for (var T2 = 0; T2 < x2; T2++)
          B2.words[T2] = this.words[T2];
        B2.length = x2;
      }
      if (x2 !== 0)
        if (this.length > x2)
          for (this.length -= x2, T2 = 0; T2 < this.length; T2++)
            this.words[T2] = this.words[T2 + x2];
        else
          this.words[0] = 0, this.length = 1;
      var D2 = 0;
      for (T2 = this.length - 1; T2 >= 0 && (D2 !== 0 || T2 >= O2); T2--) {
        var te2 = this.words[T2] | 0;
        this.words[T2] = D2 << 26 - A2 | te2 >>> A2, D2 = te2 & Y2;
      }
      return B2 && D2 !== 0 && (B2.words[B2.length++] = D2), this.length === 0 && (this.words[0] = 0, this.length = 1), this.strip();
    }, p2.prototype.ishrn = function(b, E2, k) {
      return l2(this.negative === 0), this.iushrn(b, E2, k);
    }, p2.prototype.shln = function(b) {
      return this.clone().ishln(b);
    }, p2.prototype.ushln = function(b) {
      return this.clone().iushln(b);
    }, p2.prototype.shrn = function(b) {
      return this.clone().ishrn(b);
    }, p2.prototype.ushrn = function(b) {
      return this.clone().iushrn(b);
    }, p2.prototype.testn = function(b) {
      l2(typeof b == "number" && b >= 0);
      var E2 = b % 26, k = (b - E2) / 26, O2 = 1 << E2;
      if (this.length <= k)
        return false;
      var A2 = this.words[k];
      return !!(A2 & O2);
    }, p2.prototype.imaskn = function(b) {
      l2(typeof b == "number" && b >= 0);
      var E2 = b % 26, k = (b - E2) / 26;
      if (l2(this.negative === 0, "imaskn works only with positive numbers"), this.length <= k)
        return this;
      if (E2 !== 0 && k++, this.length = Math.min(k, this.length), E2 !== 0) {
        var O2 = 67108863 ^ 67108863 >>> E2 << E2;
        this.words[this.length - 1] &= O2;
      }
      return this.strip();
    }, p2.prototype.maskn = function(b) {
      return this.clone().imaskn(b);
    }, p2.prototype.iaddn = function(b) {
      return l2(typeof b == "number"), l2(b < 67108864), b < 0 ? this.isubn(-b) : this.negative !== 0 ? this.length === 1 && (this.words[0] | 0) < b ? (this.words[0] = b - (this.words[0] | 0), this.negative = 0, this) : (this.negative = 0, this.isubn(b), this.negative = 1, this) : this._iaddn(b);
    }, p2.prototype._iaddn = function(b) {
      this.words[0] += b;
      for (var E2 = 0; E2 < this.length && this.words[E2] >= 67108864; E2++)
        this.words[E2] -= 67108864, E2 === this.length - 1 ? this.words[E2 + 1] = 1 : this.words[E2 + 1]++;
      return this.length = Math.max(this.length, E2 + 1), this;
    }, p2.prototype.isubn = function(b) {
      if (l2(typeof b == "number"), l2(b < 67108864), b < 0)
        return this.iaddn(-b);
      if (this.negative !== 0)
        return this.negative = 0, this.iaddn(b), this.negative = 1, this;
      if (this.words[0] -= b, this.length === 1 && this.words[0] < 0)
        this.words[0] = -this.words[0], this.negative = 1;
      else
        for (var E2 = 0; E2 < this.length && this.words[E2] < 0; E2++)
          this.words[E2] += 67108864, this.words[E2 + 1] -= 1;
      return this.strip();
    }, p2.prototype.addn = function(b) {
      return this.clone().iaddn(b);
    }, p2.prototype.subn = function(b) {
      return this.clone().isubn(b);
    }, p2.prototype.iabs = function() {
      return this.negative = 0, this;
    }, p2.prototype.abs = function() {
      return this.clone().iabs();
    }, p2.prototype._ishlnsubmul = function(b, E2, k) {
      var O2 = b.length + k, A2;
      this._expand(O2);
      var x2, Y2 = 0;
      for (A2 = 0; A2 < b.length; A2++) {
        x2 = (this.words[A2 + k] | 0) + Y2;
        var B2 = (b.words[A2] | 0) * E2;
        x2 -= B2 & 67108863, Y2 = (x2 >> 26) - (B2 / 67108864 | 0), this.words[A2 + k] = x2 & 67108863;
      }
      for (; A2 < this.length - k; A2++)
        x2 = (this.words[A2 + k] | 0) + Y2, Y2 = x2 >> 26, this.words[A2 + k] = x2 & 67108863;
      if (Y2 === 0)
        return this.strip();
      for (l2(Y2 === -1), Y2 = 0, A2 = 0; A2 < this.length; A2++)
        x2 = -(this.words[A2] | 0) + Y2, Y2 = x2 >> 26, this.words[A2] = x2 & 67108863;
      return this.negative = 1, this.strip();
    }, p2.prototype._wordDiv = function(b, E2) {
      var k = this.length - b.length, O2 = this.clone(), A2 = b, x2 = A2.words[A2.length - 1] | 0, Y2 = this._countBits(x2);
      k = 26 - Y2, k !== 0 && (A2 = A2.ushln(k), O2.iushln(k), x2 = A2.words[A2.length - 1] | 0);
      var B2 = O2.length - A2.length, T2;
      if (E2 !== "mod") {
        T2 = new p2(null), T2.length = B2 + 1, T2.words = new Array(T2.length);
        for (var D2 = 0; D2 < T2.length; D2++)
          T2.words[D2] = 0;
      }
      var te2 = O2.clone()._ishlnsubmul(A2, 1, B2);
      te2.negative === 0 && (O2 = te2, T2 && (T2.words[B2] = 1));
      for (var me2 = B2 - 1; me2 >= 0; me2--) {
        var Ie2 = (O2.words[A2.length + me2] | 0) * 67108864 + (O2.words[A2.length + me2 - 1] | 0);
        for (Ie2 = Math.min(Ie2 / x2 | 0, 67108863), O2._ishlnsubmul(A2, Ie2, me2); O2.negative !== 0; )
          Ie2--, O2.negative = 0, O2._ishlnsubmul(A2, 1, me2), O2.isZero() || (O2.negative ^= 1);
        T2 && (T2.words[me2] = Ie2);
      }
      return T2 && T2.strip(), O2.strip(), E2 !== "div" && k !== 0 && O2.iushrn(k), { div: T2 || null, mod: O2 };
    }, p2.prototype.divmod = function(b, E2, k) {
      if (l2(!b.isZero()), this.isZero())
        return { div: new p2(0), mod: new p2(0) };
      var O2, A2, x2;
      return this.negative !== 0 && b.negative === 0 ? (x2 = this.neg().divmod(b, E2), E2 !== "mod" && (O2 = x2.div.neg()), E2 !== "div" && (A2 = x2.mod.neg(), k && A2.negative !== 0 && A2.iadd(b)), { div: O2, mod: A2 }) : this.negative === 0 && b.negative !== 0 ? (x2 = this.divmod(b.neg(), E2), E2 !== "mod" && (O2 = x2.div.neg()), { div: O2, mod: x2.mod }) : this.negative & b.negative ? (x2 = this.neg().divmod(b.neg(), E2), E2 !== "div" && (A2 = x2.mod.neg(), k && A2.negative !== 0 && A2.isub(b)), { div: x2.div, mod: A2 }) : b.length > this.length || this.cmp(b) < 0 ? { div: new p2(0), mod: this } : b.length === 1 ? E2 === "div" ? { div: this.divn(b.words[0]), mod: null } : E2 === "mod" ? { div: null, mod: new p2(this.modn(b.words[0])) } : { div: this.divn(b.words[0]), mod: new p2(this.modn(b.words[0])) } : this._wordDiv(b, E2);
    }, p2.prototype.div = function(b) {
      return this.divmod(b, "div", false).div;
    }, p2.prototype.mod = function(b) {
      return this.divmod(b, "mod", false).mod;
    }, p2.prototype.umod = function(b) {
      return this.divmod(b, "mod", true).mod;
    }, p2.prototype.divRound = function(b) {
      var E2 = this.divmod(b);
      if (E2.mod.isZero())
        return E2.div;
      var k = E2.div.negative !== 0 ? E2.mod.isub(b) : E2.mod, O2 = b.ushrn(1), A2 = b.andln(1), x2 = k.cmp(O2);
      return x2 < 0 || A2 === 1 && x2 === 0 ? E2.div : E2.div.negative !== 0 ? E2.div.isubn(1) : E2.div.iaddn(1);
    }, p2.prototype.modn = function(b) {
      l2(b <= 67108863);
      for (var E2 = (1 << 26) % b, k = 0, O2 = this.length - 1; O2 >= 0; O2--)
        k = (E2 * k + (this.words[O2] | 0)) % b;
      return k;
    }, p2.prototype.idivn = function(b) {
      l2(b <= 67108863);
      for (var E2 = 0, k = this.length - 1; k >= 0; k--) {
        var O2 = (this.words[k] | 0) + E2 * 67108864;
        this.words[k] = O2 / b | 0, E2 = O2 % b;
      }
      return this.strip();
    }, p2.prototype.divn = function(b) {
      return this.clone().idivn(b);
    }, p2.prototype.egcd = function(b) {
      l2(b.negative === 0), l2(!b.isZero());
      var E2 = this, k = b.clone();
      E2.negative !== 0 ? E2 = E2.umod(b) : E2 = E2.clone();
      for (var O2 = new p2(1), A2 = new p2(0), x2 = new p2(0), Y2 = new p2(1), B2 = 0; E2.isEven() && k.isEven(); )
        E2.iushrn(1), k.iushrn(1), ++B2;
      for (var T2 = k.clone(), D2 = E2.clone(); !E2.isZero(); ) {
        for (var te2 = 0, me2 = 1; !(E2.words[0] & me2) && te2 < 26; ++te2, me2 <<= 1)
          ;
        if (te2 > 0)
          for (E2.iushrn(te2); te2-- > 0; )
            (O2.isOdd() || A2.isOdd()) && (O2.iadd(T2), A2.isub(D2)), O2.iushrn(1), A2.iushrn(1);
        for (var Ie2 = 0, $e2 = 1; !(k.words[0] & $e2) && Ie2 < 26; ++Ie2, $e2 <<= 1)
          ;
        if (Ie2 > 0)
          for (k.iushrn(Ie2); Ie2-- > 0; )
            (x2.isOdd() || Y2.isOdd()) && (x2.iadd(T2), Y2.isub(D2)), x2.iushrn(1), Y2.iushrn(1);
        E2.cmp(k) >= 0 ? (E2.isub(k), O2.isub(x2), A2.isub(Y2)) : (k.isub(E2), x2.isub(O2), Y2.isub(A2));
      }
      return { a: x2, b: Y2, gcd: k.iushln(B2) };
    }, p2.prototype._invmp = function(b) {
      l2(b.negative === 0), l2(!b.isZero());
      var E2 = this, k = b.clone();
      E2.negative !== 0 ? E2 = E2.umod(b) : E2 = E2.clone();
      for (var O2 = new p2(1), A2 = new p2(0), x2 = k.clone(); E2.cmpn(1) > 0 && k.cmpn(1) > 0; ) {
        for (var Y2 = 0, B2 = 1; !(E2.words[0] & B2) && Y2 < 26; ++Y2, B2 <<= 1)
          ;
        if (Y2 > 0)
          for (E2.iushrn(Y2); Y2-- > 0; )
            O2.isOdd() && O2.iadd(x2), O2.iushrn(1);
        for (var T2 = 0, D2 = 1; !(k.words[0] & D2) && T2 < 26; ++T2, D2 <<= 1)
          ;
        if (T2 > 0)
          for (k.iushrn(T2); T2-- > 0; )
            A2.isOdd() && A2.iadd(x2), A2.iushrn(1);
        E2.cmp(k) >= 0 ? (E2.isub(k), O2.isub(A2)) : (k.isub(E2), A2.isub(O2));
      }
      var te2;
      return E2.cmpn(1) === 0 ? te2 = O2 : te2 = A2, te2.cmpn(0) < 0 && te2.iadd(b), te2;
    }, p2.prototype.gcd = function(b) {
      if (this.isZero())
        return b.abs();
      if (b.isZero())
        return this.abs();
      var E2 = this.clone(), k = b.clone();
      E2.negative = 0, k.negative = 0;
      for (var O2 = 0; E2.isEven() && k.isEven(); O2++)
        E2.iushrn(1), k.iushrn(1);
      do {
        for (; E2.isEven(); )
          E2.iushrn(1);
        for (; k.isEven(); )
          k.iushrn(1);
        var A2 = E2.cmp(k);
        if (A2 < 0) {
          var x2 = E2;
          E2 = k, k = x2;
        } else if (A2 === 0 || k.cmpn(1) === 0)
          break;
        E2.isub(k);
      } while (true);
      return k.iushln(O2);
    }, p2.prototype.invm = function(b) {
      return this.egcd(b).a.umod(b);
    }, p2.prototype.isEven = function() {
      return (this.words[0] & 1) === 0;
    }, p2.prototype.isOdd = function() {
      return (this.words[0] & 1) === 1;
    }, p2.prototype.andln = function(b) {
      return this.words[0] & b;
    }, p2.prototype.bincn = function(b) {
      l2(typeof b == "number");
      var E2 = b % 26, k = (b - E2) / 26, O2 = 1 << E2;
      if (this.length <= k)
        return this._expand(k + 1), this.words[k] |= O2, this;
      for (var A2 = O2, x2 = k; A2 !== 0 && x2 < this.length; x2++) {
        var Y2 = this.words[x2] | 0;
        Y2 += A2, A2 = Y2 >>> 26, Y2 &= 67108863, this.words[x2] = Y2;
      }
      return A2 !== 0 && (this.words[x2] = A2, this.length++), this;
    }, p2.prototype.isZero = function() {
      return this.length === 1 && this.words[0] === 0;
    }, p2.prototype.cmpn = function(b) {
      var E2 = b < 0;
      if (this.negative !== 0 && !E2)
        return -1;
      if (this.negative === 0 && E2)
        return 1;
      this.strip();
      var k;
      if (this.length > 1)
        k = 1;
      else {
        E2 && (b = -b), l2(b <= 67108863, "Number is too big");
        var O2 = this.words[0] | 0;
        k = O2 === b ? 0 : O2 < b ? -1 : 1;
      }
      return this.negative !== 0 ? -k | 0 : k;
    }, p2.prototype.cmp = function(b) {
      if (this.negative !== 0 && b.negative === 0)
        return -1;
      if (this.negative === 0 && b.negative !== 0)
        return 1;
      var E2 = this.ucmp(b);
      return this.negative !== 0 ? -E2 | 0 : E2;
    }, p2.prototype.ucmp = function(b) {
      if (this.length > b.length)
        return 1;
      if (this.length < b.length)
        return -1;
      for (var E2 = 0, k = this.length - 1; k >= 0; k--) {
        var O2 = this.words[k] | 0, A2 = b.words[k] | 0;
        if (O2 !== A2) {
          O2 < A2 ? E2 = -1 : O2 > A2 && (E2 = 1);
          break;
        }
      }
      return E2;
    }, p2.prototype.gtn = function(b) {
      return this.cmpn(b) === 1;
    }, p2.prototype.gt = function(b) {
      return this.cmp(b) === 1;
    }, p2.prototype.gten = function(b) {
      return this.cmpn(b) >= 0;
    }, p2.prototype.gte = function(b) {
      return this.cmp(b) >= 0;
    }, p2.prototype.ltn = function(b) {
      return this.cmpn(b) === -1;
    }, p2.prototype.lt = function(b) {
      return this.cmp(b) === -1;
    }, p2.prototype.lten = function(b) {
      return this.cmpn(b) <= 0;
    }, p2.prototype.lte = function(b) {
      return this.cmp(b) <= 0;
    }, p2.prototype.eqn = function(b) {
      return this.cmpn(b) === 0;
    }, p2.prototype.eq = function(b) {
      return this.cmp(b) === 0;
    }, p2.red = function(b) {
      return new q2(b);
    }, p2.prototype.toRed = function(b) {
      return l2(!this.red, "Already a number in reduction context"), l2(this.negative === 0, "red works only with positives"), b.convertTo(this)._forceRed(b);
    }, p2.prototype.fromRed = function() {
      return l2(this.red, "fromRed works only with numbers in reduction context"), this.red.convertFrom(this);
    }, p2.prototype._forceRed = function(b) {
      return this.red = b, this;
    }, p2.prototype.forceRed = function(b) {
      return l2(!this.red, "Already a number in reduction context"), this._forceRed(b);
    }, p2.prototype.redAdd = function(b) {
      return l2(this.red, "redAdd works only with red numbers"), this.red.add(this, b);
    }, p2.prototype.redIAdd = function(b) {
      return l2(this.red, "redIAdd works only with red numbers"), this.red.iadd(this, b);
    }, p2.prototype.redSub = function(b) {
      return l2(this.red, "redSub works only with red numbers"), this.red.sub(this, b);
    }, p2.prototype.redISub = function(b) {
      return l2(this.red, "redISub works only with red numbers"), this.red.isub(this, b);
    }, p2.prototype.redShl = function(b) {
      return l2(this.red, "redShl works only with red numbers"), this.red.shl(this, b);
    }, p2.prototype.redMul = function(b) {
      return l2(this.red, "redMul works only with red numbers"), this.red._verify2(this, b), this.red.mul(this, b);
    }, p2.prototype.redIMul = function(b) {
      return l2(this.red, "redMul works only with red numbers"), this.red._verify2(this, b), this.red.imul(this, b);
    }, p2.prototype.redSqr = function() {
      return l2(this.red, "redSqr works only with red numbers"), this.red._verify1(this), this.red.sqr(this);
    }, p2.prototype.redISqr = function() {
      return l2(this.red, "redISqr works only with red numbers"), this.red._verify1(this), this.red.isqr(this);
    }, p2.prototype.redSqrt = function() {
      return l2(this.red, "redSqrt works only with red numbers"), this.red._verify1(this), this.red.sqrt(this);
    }, p2.prototype.redInvm = function() {
      return l2(this.red, "redInvm works only with red numbers"), this.red._verify1(this), this.red.invm(this);
    }, p2.prototype.redNeg = function() {
      return l2(this.red, "redNeg works only with red numbers"), this.red._verify1(this), this.red.neg(this);
    }, p2.prototype.redPow = function(b) {
      return l2(this.red && !b.red, "redPow(normalNum)"), this.red._verify1(this), this.red.pow(this, b);
    };
    var de2 = { k256: null, p224: null, p192: null, p25519: null };
    function pe2(C2, b) {
      this.name = C2, this.p = new p2(b, 16), this.n = this.p.bitLength(), this.k = new p2(1).iushln(this.n).isub(this.p), this.tmp = this._tmp();
    }
    pe2.prototype._tmp = function() {
      var b = new p2(null);
      return b.words = new Array(Math.ceil(this.n / 13)), b;
    }, pe2.prototype.ireduce = function(b) {
      var E2 = b, k;
      do
        this.split(E2, this.tmp), E2 = this.imulK(E2), E2 = E2.iadd(this.tmp), k = E2.bitLength();
      while (k > this.n);
      var O2 = k < this.n ? -1 : E2.ucmp(this.p);
      return O2 === 0 ? (E2.words[0] = 0, E2.length = 1) : O2 > 0 ? E2.isub(this.p) : E2.strip !== void 0 ? E2.strip() : E2._strip(), E2;
    }, pe2.prototype.split = function(b, E2) {
      b.iushrn(this.n, 0, E2);
    }, pe2.prototype.imulK = function(b) {
      return b.imul(this.k);
    };
    function le2() {
      pe2.call(this, "k256", "ffffffff ffffffff ffffffff ffffffff ffffffff ffffffff fffffffe fffffc2f");
    }
    v2(le2, pe2), le2.prototype.split = function(b, E2) {
      for (var k = 4194303, O2 = Math.min(b.length, 9), A2 = 0; A2 < O2; A2++)
        E2.words[A2] = b.words[A2];
      if (E2.length = O2, b.length <= 9) {
        b.words[0] = 0, b.length = 1;
        return;
      }
      var x2 = b.words[9];
      for (E2.words[E2.length++] = x2 & k, A2 = 10; A2 < b.length; A2++) {
        var Y2 = b.words[A2] | 0;
        b.words[A2 - 10] = (Y2 & k) << 4 | x2 >>> 22, x2 = Y2;
      }
      x2 >>>= 22, b.words[A2 - 10] = x2, x2 === 0 && b.length > 10 ? b.length -= 10 : b.length -= 9;
    }, le2.prototype.imulK = function(b) {
      b.words[b.length] = 0, b.words[b.length + 1] = 0, b.length += 2;
      for (var E2 = 0, k = 0; k < b.length; k++) {
        var O2 = b.words[k] | 0;
        E2 += O2 * 977, b.words[k] = E2 & 67108863, E2 = O2 * 64 + (E2 / 67108864 | 0);
      }
      return b.words[b.length - 1] === 0 && (b.length--, b.words[b.length - 1] === 0 && b.length--), b;
    };
    function be2() {
      pe2.call(this, "p224", "ffffffff ffffffff ffffffff ffffffff 00000000 00000000 00000001");
    }
    v2(be2, pe2);
    function ke2() {
      pe2.call(this, "p192", "ffffffff ffffffff ffffffff fffffffe ffffffff ffffffff");
    }
    v2(ke2, pe2);
    function Te2() {
      pe2.call(this, "25519", "7fffffffffffffff ffffffffffffffff ffffffffffffffff ffffffffffffffed");
    }
    v2(Te2, pe2), Te2.prototype.imulK = function(b) {
      for (var E2 = 0, k = 0; k < b.length; k++) {
        var O2 = (b.words[k] | 0) * 19 + E2, A2 = O2 & 67108863;
        O2 >>>= 26, b.words[k] = A2, E2 = O2;
      }
      return E2 !== 0 && (b.words[b.length++] = E2), b;
    }, p2._prime = function(b) {
      if (de2[b])
        return de2[b];
      var E2;
      if (b === "k256")
        E2 = new le2();
      else if (b === "p224")
        E2 = new be2();
      else if (b === "p192")
        E2 = new ke2();
      else if (b === "p25519")
        E2 = new Te2();
      else
        throw new Error("Unknown prime " + b);
      return de2[b] = E2, E2;
    };
    function q2(C2) {
      if (typeof C2 == "string") {
        var b = p2._prime(C2);
        this.m = b.p, this.prime = b;
      } else
        l2(C2.gtn(1), "modulus must be greater than 1"), this.m = C2, this.prime = null;
    }
    q2.prototype._verify1 = function(b) {
      l2(b.negative === 0, "red works only with positives"), l2(b.red, "red works only with red numbers");
    }, q2.prototype._verify2 = function(b, E2) {
      l2((b.negative | E2.negative) === 0, "red works only with positives"), l2(b.red && b.red === E2.red, "red works only with red numbers");
    }, q2.prototype.imod = function(b) {
      return this.prime ? this.prime.ireduce(b)._forceRed(this) : b.umod(this.m)._forceRed(this);
    }, q2.prototype.neg = function(b) {
      return b.isZero() ? b.clone() : this.m.sub(b)._forceRed(this);
    }, q2.prototype.add = function(b, E2) {
      this._verify2(b, E2);
      var k = b.add(E2);
      return k.cmp(this.m) >= 0 && k.isub(this.m), k._forceRed(this);
    }, q2.prototype.iadd = function(b, E2) {
      this._verify2(b, E2);
      var k = b.iadd(E2);
      return k.cmp(this.m) >= 0 && k.isub(this.m), k;
    }, q2.prototype.sub = function(b, E2) {
      this._verify2(b, E2);
      var k = b.sub(E2);
      return k.cmpn(0) < 0 && k.iadd(this.m), k._forceRed(this);
    }, q2.prototype.isub = function(b, E2) {
      this._verify2(b, E2);
      var k = b.isub(E2);
      return k.cmpn(0) < 0 && k.iadd(this.m), k;
    }, q2.prototype.shl = function(b, E2) {
      return this._verify1(b), this.imod(b.ushln(E2));
    }, q2.prototype.imul = function(b, E2) {
      return this._verify2(b, E2), this.imod(b.imul(E2));
    }, q2.prototype.mul = function(b, E2) {
      return this._verify2(b, E2), this.imod(b.mul(E2));
    }, q2.prototype.isqr = function(b) {
      return this.imul(b, b.clone());
    }, q2.prototype.sqr = function(b) {
      return this.mul(b, b);
    }, q2.prototype.sqrt = function(b) {
      if (b.isZero())
        return b.clone();
      var E2 = this.m.andln(3);
      if (l2(E2 % 2 === 1), E2 === 3) {
        var k = this.m.add(new p2(1)).iushrn(2);
        return this.pow(b, k);
      }
      for (var O2 = this.m.subn(1), A2 = 0; !O2.isZero() && O2.andln(1) === 0; )
        A2++, O2.iushrn(1);
      l2(!O2.isZero());
      var x2 = new p2(1).toRed(this), Y2 = x2.redNeg(), B2 = this.m.subn(1).iushrn(1), T2 = this.m.bitLength();
      for (T2 = new p2(2 * T2 * T2).toRed(this); this.pow(T2, B2).cmp(Y2) !== 0; )
        T2.redIAdd(Y2);
      for (var D2 = this.pow(T2, O2), te2 = this.pow(b, O2.addn(1).iushrn(1)), me2 = this.pow(b, O2), Ie2 = A2; me2.cmp(x2) !== 0; ) {
        for (var $e2 = me2, ye2 = 0; $e2.cmp(x2) !== 0; ye2++)
          $e2 = $e2.redSqr();
        l2(ye2 < Ie2);
        var he2 = this.pow(D2, new p2(1).iushln(Ie2 - ye2 - 1));
        te2 = te2.redMul(he2), D2 = he2.redSqr(), me2 = me2.redMul(D2), Ie2 = ye2;
      }
      return te2;
    }, q2.prototype.invm = function(b) {
      var E2 = b._invmp(this.m);
      return E2.negative !== 0 ? (E2.negative = 0, this.imod(E2).redNeg()) : this.imod(E2);
    }, q2.prototype.pow = function(b, E2) {
      if (E2.isZero())
        return new p2(1).toRed(this);
      if (E2.cmpn(1) === 0)
        return b.clone();
      var k = 4, O2 = new Array(1 << k);
      O2[0] = new p2(1).toRed(this), O2[1] = b;
      for (var A2 = 2; A2 < O2.length; A2++)
        O2[A2] = this.mul(O2[A2 - 1], b);
      var x2 = O2[0], Y2 = 0, B2 = 0, T2 = E2.bitLength() % 26;
      for (T2 === 0 && (T2 = 26), A2 = E2.length - 1; A2 >= 0; A2--) {
        for (var D2 = E2.words[A2], te2 = T2 - 1; te2 >= 0; te2--) {
          var me2 = D2 >> te2 & 1;
          if (x2 !== O2[0] && (x2 = this.sqr(x2)), me2 === 0 && Y2 === 0) {
            B2 = 0;
            continue;
          }
          Y2 <<= 1, Y2 |= me2, B2++, !(B2 !== k && (A2 !== 0 || te2 !== 0)) && (x2 = this.mul(x2, O2[Y2]), B2 = 0, Y2 = 0);
        }
        T2 = 26;
      }
      return x2;
    }, q2.prototype.convertTo = function(b) {
      var E2 = b.umod(this.m);
      return E2 === b ? E2.clone() : E2;
    }, q2.prototype.convertFrom = function(b) {
      var E2 = b.clone();
      return E2.red = null, E2;
    }, p2.mont = function(b) {
      return new z2(b);
    };
    function z2(C2) {
      q2.call(this, C2), this.shift = this.m.bitLength(), this.shift % 26 !== 0 && (this.shift += 26 - this.shift % 26), this.r = new p2(1).iushln(this.shift), this.r2 = this.imod(this.r.sqr()), this.rinv = this.r._invmp(this.m), this.minv = this.rinv.mul(this.r).isubn(1).div(this.m), this.minv = this.minv.umod(this.r), this.minv = this.r.sub(this.minv);
    }
    v2(z2, q2), z2.prototype.convertTo = function(b) {
      return this.imod(b.ushln(this.shift));
    }, z2.prototype.convertFrom = function(b) {
      var E2 = this.imod(b.mul(this.rinv));
      return E2.red = null, E2;
    }, z2.prototype.imul = function(b, E2) {
      if (b.isZero() || E2.isZero())
        return b.words[0] = 0, b.length = 1, b;
      var k = b.imul(E2), O2 = k.maskn(this.shift).mul(this.minv).imaskn(this.shift).mul(this.m), A2 = k.isub(O2).iushrn(this.shift), x2 = A2;
      return A2.cmp(this.m) >= 0 ? x2 = A2.isub(this.m) : A2.cmpn(0) < 0 && (x2 = A2.iadd(this.m)), x2._forceRed(this);
    }, z2.prototype.mul = function(b, E2) {
      if (b.isZero() || E2.isZero())
        return new p2(0)._forceRed(this);
      var k = b.mul(E2), O2 = k.maskn(this.shift).mul(this.minv).imaskn(this.shift).mul(this.m), A2 = k.isub(O2).iushrn(this.shift), x2 = A2;
      return A2.cmp(this.m) >= 0 ? x2 = A2.isub(this.m) : A2.cmpn(0) < 0 && (x2 = A2.iadd(this.m)), x2._forceRed(this);
    }, z2.prototype.invm = function(b) {
      var E2 = this.imod(b._invmp(this.m).mul(this.r2));
      return E2._forceRed(this);
    };
  })(a420, commonjsGlobal$1);
})(bn$5);
var bnExports$5 = bn$5.exports, brorand = { exports: {} }, hasRequiredBrorand;
function requireBrorand() {
  if (hasRequiredBrorand)
    return brorand.exports;
  hasRequiredBrorand = 1;
  var a420;
  brorand.exports = function(v2) {
    return a420 || (a420 = new u2(null)), a420.generate(v2);
  };
  function u2(l2) {
    this.rand = l2;
  }
  if (brorand.exports.Rand = u2, u2.prototype.generate = function(v2) {
    return this._rand(v2);
  }, u2.prototype._rand = function(v2) {
    if (this.rand.getBytes)
      return this.rand.getBytes(v2);
    for (var p2 = new Uint8Array(v2), _ = 0; _ < p2.length; _++)
      p2[_] = this.rand.getByte();
    return p2;
  }, typeof self == "object")
    self.crypto && self.crypto.getRandomValues ? u2.prototype._rand = function(v2) {
      var p2 = new Uint8Array(v2);
      return self.crypto.getRandomValues(p2), p2;
    } : self.msCrypto && self.msCrypto.getRandomValues ? u2.prototype._rand = function(v2) {
      var p2 = new Uint8Array(v2);
      return self.msCrypto.getRandomValues(p2), p2;
    } : typeof window == "object" && (u2.prototype._rand = function() {
      throw new Error("Not implemented yet");
    });
  else
    try {
      var c = requireCryptoBrowserify();
      if (typeof c.randomBytes != "function")
        throw new Error("Not supported");
      u2.prototype._rand = function(v2) {
        return c.randomBytes(v2);
      };
    } catch {
    }
  return brorand.exports;
}
var mr, hasRequiredMr;
function requireMr() {
  if (hasRequiredMr)
    return mr;
  hasRequiredMr = 1;
  var a420 = bnExports$5, u2 = requireBrorand();
  function c(l2) {
    this.rand = l2 || new u2.Rand();
  }
  return mr = c, c.create = function(v2) {
    return new c(v2);
  }, c.prototype._randbelow = function(v2) {
    var p2 = v2.bitLength(), _ = Math.ceil(p2 / 8);
    do
      var I2 = new a420(this.rand.generate(_));
    while (I2.cmp(v2) >= 0);
    return I2;
  }, c.prototype._randrange = function(v2, p2) {
    var _ = p2.sub(v2);
    return v2.add(this._randbelow(_));
  }, c.prototype.test = function(v2, p2, _) {
    var I2 = v2.bitLength(), P2 = a420.mont(v2), $ = new a420(1).toRed(P2);
    p2 || (p2 = Math.max(1, I2 / 48 | 0));
    for (var F2 = v2.subn(1), H2 = 0; !F2.testn(H2); H2++)
      ;
    for (var j = v2.shrn(H2), ee2 = F2.toRed(P2), X2 = true; p2 > 0; p2--) {
      var ie2 = this._randrange(new a420(2), F2);
      _ && _(ie2);
      var Q2 = ie2.toRed(P2).redPow(j);
      if (!(Q2.cmp($) === 0 || Q2.cmp(ee2) === 0)) {
        for (var ne2 = 1; ne2 < H2; ne2++) {
          if (Q2 = Q2.redSqr(), Q2.cmp($) === 0)
            return false;
          if (Q2.cmp(ee2) === 0)
            break;
        }
        if (ne2 === H2)
          return false;
      }
    }
    return X2;
  }, c.prototype.getDivisor = function(v2, p2) {
    var _ = v2.bitLength(), I2 = a420.mont(v2), P2 = new a420(1).toRed(I2);
    p2 || (p2 = Math.max(1, _ / 48 | 0));
    for (var $ = v2.subn(1), F2 = 0; !$.testn(F2); F2++)
      ;
    for (var H2 = v2.shrn(F2), j = $.toRed(I2); p2 > 0; p2--) {
      var ee2 = this._randrange(new a420(2), $), X2 = v2.gcd(ee2);
      if (X2.cmpn(1) !== 0)
        return X2;
      var ie2 = ee2.toRed(I2).redPow(H2);
      if (!(ie2.cmp(P2) === 0 || ie2.cmp(j) === 0)) {
        for (var Q2 = 1; Q2 < F2; Q2++) {
          if (ie2 = ie2.redSqr(), ie2.cmp(P2) === 0)
            return ie2.fromRed().subn(1).gcd(v2);
          if (ie2.cmp(j) === 0)
            break;
        }
        if (Q2 === F2)
          return ie2 = ie2.redSqr(), ie2.fromRed().subn(1).gcd(v2);
      }
    }
    return false;
  }, mr;
}
var generatePrime, hasRequiredGeneratePrime;
function requireGeneratePrime() {
  if (hasRequiredGeneratePrime)
    return generatePrime;
  hasRequiredGeneratePrime = 1;
  var a420 = browserExports;
  generatePrime = Q2, Q2.simpleSieve = X2, Q2.fermatTest = ie2;
  var u2 = bnExports$6, c = new u2(24), l2 = requireMr(), v2 = new l2(), p2 = new u2(1), _ = new u2(2), I2 = new u2(5);
  new u2(16), new u2(8);
  var P2 = new u2(10), $ = new u2(3);
  new u2(7);
  var F2 = new u2(11), H2 = new u2(4);
  new u2(12);
  var j = null;
  function ee2() {
    if (j !== null)
      return j;
    var ne2 = 1048576, Z2 = [];
    Z2[0] = 2;
    for (var de2 = 1, pe2 = 3; pe2 < ne2; pe2 += 2) {
      for (var le2 = Math.ceil(Math.sqrt(pe2)), be2 = 0; be2 < de2 && Z2[be2] <= le2 && pe2 % Z2[be2] !== 0; be2++)
        ;
      de2 !== be2 && Z2[be2] <= le2 || (Z2[de2++] = pe2);
    }
    return j = Z2, Z2;
  }
  function X2(ne2) {
    for (var Z2 = ee2(), de2 = 0; de2 < Z2.length; de2++)
      if (ne2.modn(Z2[de2]) === 0)
        return ne2.cmpn(Z2[de2]) === 0;
    return true;
  }
  function ie2(ne2) {
    var Z2 = u2.mont(ne2);
    return _.toRed(Z2).redPow(ne2.subn(1)).fromRed().cmpn(1) === 0;
  }
  function Q2(ne2, Z2) {
    if (ne2 < 16)
      return Z2 === 2 || Z2 === 5 ? new u2([140, 123]) : new u2([140, 39]);
    Z2 = new u2(Z2);
    for (var de2, pe2; ; ) {
      for (de2 = new u2(a420(Math.ceil(ne2 / 8))); de2.bitLength() > ne2; )
        de2.ishrn(1);
      if (de2.isEven() && de2.iadd(p2), de2.testn(1) || de2.iadd(_), Z2.cmp(_)) {
        if (!Z2.cmp(I2))
          for (; de2.mod(P2).cmp($); )
            de2.iadd(H2);
      } else
        for (; de2.mod(c).cmp(F2); )
          de2.iadd(H2);
      if (pe2 = de2.shrn(1), X2(pe2) && X2(de2) && ie2(pe2) && ie2(de2) && v2.test(pe2) && v2.test(de2))
        return de2;
    }
  }
  return generatePrime;
}
const modp1 = { gen: "02", prime: "ffffffffffffffffc90fdaa22168c234c4c6628b80dc1cd129024e088a67cc74020bbea63b139b22514a08798e3404ddef9519b3cd3a431b302b0a6df25f14374fe1356d6d51c245e485b576625e7ec6f44c42e9a63a3620ffffffffffffffff" }, modp2 = { gen: "02", prime: "ffffffffffffffffc90fdaa22168c234c4c6628b80dc1cd129024e088a67cc74020bbea63b139b22514a08798e3404ddef9519b3cd3a431b302b0a6df25f14374fe1356d6d51c245e485b576625e7ec6f44c42e9a637ed6b0bff5cb6f406b7edee386bfb5a899fa5ae9f24117c4b1fe649286651ece65381ffffffffffffffff" }, modp5 = { gen: "02", prime: "ffffffffffffffffc90fdaa22168c234c4c6628b80dc1cd129024e088a67cc74020bbea63b139b22514a08798e3404ddef9519b3cd3a431b302b0a6df25f14374fe1356d6d51c245e485b576625e7ec6f44c42e9a637ed6b0bff5cb6f406b7edee386bfb5a899fa5ae9f24117c4b1fe649286651ece45b3dc2007cb8a163bf0598da48361c55d39a69163fa8fd24cf5f83655d23dca3ad961c62f356208552bb9ed529077096966d670c354e4abc9804f1746c08ca237327ffffffffffffffff" }, modp14 = { gen: "02", prime: "ffffffffffffffffc90fdaa22168c234c4c6628b80dc1cd129024e088a67cc74020bbea63b139b22514a08798e3404ddef9519b3cd3a431b302b0a6df25f14374fe1356d6d51c245e485b576625e7ec6f44c42e9a637ed6b0bff5cb6f406b7edee386bfb5a899fa5ae9f24117c4b1fe649286651ece45b3dc2007cb8a163bf0598da48361c55d39a69163fa8fd24cf5f83655d23dca3ad961c62f356208552bb9ed529077096966d670c354e4abc9804f1746c08ca18217c32905e462e36ce3be39e772c180e86039b2783a2ec07a28fb5c55df06f4c52c9de2bcbf6955817183995497cea956ae515d2261898fa051015728e5a8aacaa68ffffffffffffffff" }, modp15 = { gen: "02", prime: "ffffffffffffffffc90fdaa22168c234c4c6628b80dc1cd129024e088a67cc74020bbea63b139b22514a08798e3404ddef9519b3cd3a431b302b0a6df25f14374fe1356d6d51c245e485b576625e7ec6f44c42e9a637ed6b0bff5cb6f406b7edee386bfb5a899fa5ae9f24117c4b1fe649286651ece45b3dc2007cb8a163bf0598da48361c55d39a69163fa8fd24cf5f83655d23dca3ad961c62f356208552bb9ed529077096966d670c354e4abc9804f1746c08ca18217c32905e462e36ce3be39e772c180e86039b2783a2ec07a28fb5c55df06f4c52c9de2bcbf6955817183995497cea956ae515d2261898fa051015728e5a8aaac42dad33170d04507a33a85521abdf1cba64ecfb850458dbef0a8aea71575d060c7db3970f85a6e1e4c7abf5ae8cdb0933d71e8c94e04a25619dcee3d2261ad2ee6bf12ffa06d98a0864d87602733ec86a64521f2b18177b200cbbe117577a615d6c770988c0bad946e208e24fa074e5ab3143db5bfce0fd108e4b82d120a93ad2caffffffffffffffff" }, modp16 = { gen: "02", prime: "ffffffffffffffffc90fdaa22168c234c4c6628b80dc1cd129024e088a67cc74020bbea63b139b22514a08798e3404ddef9519b3cd3a431b302b0a6df25f14374fe1356d6d51c245e485b576625e7ec6f44c42e9a637ed6b0bff5cb6f406b7edee386bfb5a899fa5ae9f24117c4b1fe649286651ece45b3dc2007cb8a163bf0598da48361c55d39a69163fa8fd24cf5f83655d23dca3ad961c62f356208552bb9ed529077096966d670c354e4abc9804f1746c08ca18217c32905e462e36ce3be39e772c180e86039b2783a2ec07a28fb5c55df06f4c52c9de2bcbf6955817183995497cea956ae515d2261898fa051015728e5a8aaac42dad33170d04507a33a85521abdf1cba64ecfb850458dbef0a8aea71575d060c7db3970f85a6e1e4c7abf5ae8cdb0933d71e8c94e04a25619dcee3d2261ad2ee6bf12ffa06d98a0864d87602733ec86a64521f2b18177b200cbbe117577a615d6c770988c0bad946e208e24fa074e5ab3143db5bfce0fd108e4b82d120a92108011a723c12a787e6d788719a10bdba5b2699c327186af4e23c1a946834b6150bda2583e9ca2ad44ce8dbbbc2db04de8ef92e8efc141fbecaa6287c59474e6bc05d99b2964fa090c3a2233ba186515be7ed1f612970cee2d7afb81bdd762170481cd0069127d5b05aa993b4ea988d8fddc186ffb7dc90a6c08f4df435c934063199ffffffffffffffff" }, modp17 = { gen: "02", prime: "ffffffffffffffffc90fdaa22168c234c4c6628b80dc1cd129024e088a67cc74020bbea63b139b22514a08798e3404ddef9519b3cd3a431b302b0a6df25f14374fe1356d6d51c245e485b576625e7ec6f44c42e9a637ed6b0bff5cb6f406b7edee386bfb5a899fa5ae9f24117c4b1fe649286651ece45b3dc2007cb8a163bf0598da48361c55d39a69163fa8fd24cf5f83655d23dca3ad961c62f356208552bb9ed529077096966d670c354e4abc9804f1746c08ca18217c32905e462e36ce3be39e772c180e86039b2783a2ec07a28fb5c55df06f4c52c9de2bcbf6955817183995497cea956ae515d2261898fa051015728e5a8aaac42dad33170d04507a33a85521abdf1cba64ecfb850458dbef0a8aea71575d060c7db3970f85a6e1e4c7abf5ae8cdb0933d71e8c94e04a25619dcee3d2261ad2ee6bf12ffa06d98a0864d87602733ec86a64521f2b18177b200cbbe117577a615d6c770988c0bad946e208e24fa074e5ab3143db5bfce0fd108e4b82d120a92108011a723c12a787e6d788719a10bdba5b2699c327186af4e23c1a946834b6150bda2583e9ca2ad44ce8dbbbc2db04de8ef92e8efc141fbecaa6287c59474e6bc05d99b2964fa090c3a2233ba186515be7ed1f612970cee2d7afb81bdd762170481cd0069127d5b05aa993b4ea988d8fddc186ffb7dc90a6c08f4df435c93402849236c3fab4d27c7026c1d4dcb2602646dec9751e763dba37bdf8ff9406ad9e530ee5db382f413001aeb06a53ed9027d831179727b0865a8918da3edbebcf9b14ed44ce6cbaced4bb1bdb7f1447e6cc254b332051512bd7af426fb8f401378cd2bf5983ca01c64b92ecf032ea15d1721d03f482d7ce6e74fef6d55e702f46980c82b5a84031900b1c9e59e7c97fbec7e8f323a97a7e36cc88be0f1d45b7ff585ac54bd407b22b4154aacc8f6d7ebf48e1d814cc5ed20f8037e0a79715eef29be32806a1d58bb7c5da76f550aa3d8a1fbff0eb19ccb1a313d55cda56c9ec2ef29632387fe8d76e3c0468043e8f663f4860ee12bf2d5b0b7474d6e694f91e6dcc4024ffffffffffffffff" }, modp18 = { gen: "02", prime: "ffffffffffffffffc90fdaa22168c234c4c6628b80dc1cd129024e088a67cc74020bbea63b139b22514a08798e3404ddef9519b3cd3a431b302b0a6df25f14374fe1356d6d51c245e485b576625e7ec6f44c42e9a637ed6b0bff5cb6f406b7edee386bfb5a899fa5ae9f24117c4b1fe649286651ece45b3dc2007cb8a163bf0598da48361c55d39a69163fa8fd24cf5f83655d23dca3ad961c62f356208552bb9ed529077096966d670c354e4abc9804f1746c08ca18217c32905e462e36ce3be39e772c180e86039b2783a2ec07a28fb5c55df06f4c52c9de2bcbf6955817183995497cea956ae515d2261898fa051015728e5a8aaac42dad33170d04507a33a85521abdf1cba64ecfb850458dbef0a8aea71575d060c7db3970f85a6e1e4c7abf5ae8cdb0933d71e8c94e04a25619dcee3d2261ad2ee6bf12ffa06d98a0864d87602733ec86a64521f2b18177b200cbbe117577a615d6c770988c0bad946e208e24fa074e5ab3143db5bfce0fd108e4b82d120a92108011a723c12a787e6d788719a10bdba5b2699c327186af4e23c1a946834b6150bda2583e9ca2ad44ce8dbbbc2db04de8ef92e8efc141fbecaa6287c59474e6bc05d99b2964fa090c3a2233ba186515be7ed1f612970cee2d7afb81bdd762170481cd0069127d5b05aa993b4ea988d8fddc186ffb7dc90a6c08f4df435c93402849236c3fab4d27c7026c1d4dcb2602646dec9751e763dba37bdf8ff9406ad9e530ee5db382f413001aeb06a53ed9027d831179727b0865a8918da3edbebcf9b14ed44ce6cbaced4bb1bdb7f1447e6cc254b332051512bd7af426fb8f401378cd2bf5983ca01c64b92ecf032ea15d1721d03f482d7ce6e74fef6d55e702f46980c82b5a84031900b1c9e59e7c97fbec7e8f323a97a7e36cc88be0f1d45b7ff585ac54bd407b22b4154aacc8f6d7ebf48e1d814cc5ed20f8037e0a79715eef29be32806a1d58bb7c5da76f550aa3d8a1fbff0eb19ccb1a313d55cda56c9ec2ef29632387fe8d76e3c0468043e8f663f4860ee12bf2d5b0b7474d6e694f91e6dbe115974a3926f12fee5e438777cb6a932df8cd8bec4d073b931ba3bc832b68d9dd300741fa7bf8afc47ed2576f6936ba424663aab639c5ae4f5683423b4742bf1c978238f16cbe39d652de3fdb8befc848ad922222e04a4037c0713eb57a81a23f0c73473fc646cea306b4bcbc8862f8385ddfa9d4b7fa2c087e879683303ed5bdd3a062b3cf5b3a278a66d2a13f83f44f82ddf310ee074ab6a364597e899a0255dc164f31cc50846851df9ab48195ded7ea1b1d510bd7ee74d73faf36bc31ecfa268359046f4eb879f924009438b481c6cd7889a002ed5ee382bc9190da6fc026e479558e4475677e9aa9e3050e2765694dfc81f56e880b96e7160c980dd98edd3dfffffffffffffffff" }, require$$1$1 = { modp1, modp2, modp5, modp14, modp15, modp16, modp17, modp18 };
var dh, hasRequiredDh;
function requireDh() {
  if (hasRequiredDh)
    return dh;
  hasRequiredDh = 1;
  var a420 = bnExports$6, u2 = requireMr(), c = new u2(), l2 = new a420(24), v2 = new a420(11), p2 = new a420(10), _ = new a420(3), I2 = new a420(7), P2 = requireGeneratePrime(), $ = browserExports;
  dh = X2;
  function F2(Q2, ne2) {
    return ne2 = ne2 || "utf8", Buffer$M.isBuffer(Q2) || (Q2 = new Buffer$M(Q2, ne2)), this._pub = new a420(Q2), this;
  }
  function H2(Q2, ne2) {
    return ne2 = ne2 || "utf8", Buffer$M.isBuffer(Q2) || (Q2 = new Buffer$M(Q2, ne2)), this._priv = new a420(Q2), this;
  }
  var j = {};
  function ee2(Q2, ne2) {
    var Z2 = ne2.toString("hex"), de2 = [Z2, Q2.toString(16)].join("_");
    if (de2 in j)
      return j[de2];
    var pe2 = 0;
    if (Q2.isEven() || !P2.simpleSieve || !P2.fermatTest(Q2) || !c.test(Q2))
      return pe2 += 1, Z2 === "02" || Z2 === "05" ? pe2 += 8 : pe2 += 4, j[de2] = pe2, pe2;
    c.test(Q2.shrn(1)) || (pe2 += 2);
    var le2;
    switch (Z2) {
      case "02":
        Q2.mod(l2).cmp(v2) && (pe2 += 8);
        break;
      case "05":
        le2 = Q2.mod(p2), le2.cmp(_) && le2.cmp(I2) && (pe2 += 8);
        break;
      default:
        pe2 += 4;
    }
    return j[de2] = pe2, pe2;
  }
  function X2(Q2, ne2, Z2) {
    this.setGenerator(ne2), this.__prime = new a420(Q2), this._prime = a420.mont(this.__prime), this._primeLen = Q2.length, this._pub = void 0, this._priv = void 0, this._primeCode = void 0, Z2 ? (this.setPublicKey = F2, this.setPrivateKey = H2) : this._primeCode = 8;
  }
  Object.defineProperty(X2.prototype, "verifyError", { enumerable: true, get: function() {
    return typeof this._primeCode != "number" && (this._primeCode = ee2(this.__prime, this.__gen)), this._primeCode;
  } }), X2.prototype.generateKeys = function() {
    return this._priv || (this._priv = new a420($(this._primeLen))), this._pub = this._gen.toRed(this._prime).redPow(this._priv).fromRed(), this.getPublicKey();
  }, X2.prototype.computeSecret = function(Q2) {
    Q2 = new a420(Q2), Q2 = Q2.toRed(this._prime);
    var ne2 = Q2.redPow(this._priv).fromRed(), Z2 = new Buffer$M(ne2.toArray()), de2 = this.getPrime();
    if (Z2.length < de2.length) {
      var pe2 = new Buffer$M(de2.length - Z2.length);
      pe2.fill(0), Z2 = Buffer$M.concat([pe2, Z2]);
    }
    return Z2;
  }, X2.prototype.getPublicKey = function(ne2) {
    return ie2(this._pub, ne2);
  }, X2.prototype.getPrivateKey = function(ne2) {
    return ie2(this._priv, ne2);
  }, X2.prototype.getPrime = function(Q2) {
    return ie2(this.__prime, Q2);
  }, X2.prototype.getGenerator = function(Q2) {
    return ie2(this._gen, Q2);
  }, X2.prototype.setGenerator = function(Q2, ne2) {
    return ne2 = ne2 || "utf8", Buffer$M.isBuffer(Q2) || (Q2 = new Buffer$M(Q2, ne2)), this.__gen = Q2, this._gen = new a420(Q2), this;
  };
  function ie2(Q2, ne2) {
    var Z2 = new Buffer$M(Q2.toArray());
    return ne2 ? Z2.toString(ne2) : Z2;
  }
  return dh;
}
var hasRequiredBrowser$2;
function requireBrowser$2() {
  if (hasRequiredBrowser$2)
    return browser$5;
  hasRequiredBrowser$2 = 1;
  var a420 = requireGeneratePrime(), u2 = require$$1$1, c = requireDh();
  function l2(_) {
    var I2 = new Buffer$M(u2[_].prime, "hex"), P2 = new Buffer$M(u2[_].gen, "hex");
    return new c(I2, P2);
  }
  var v2 = { binary: true, hex: true, base64: true };
  function p2(_, I2, P2, $) {
    return Buffer$M.isBuffer(I2) || v2[I2] === void 0 ? p2(_, "binary", I2, P2) : (I2 = I2 || "binary", $ = $ || "binary", P2 = P2 || new Buffer$M([2]), Buffer$M.isBuffer(P2) || (P2 = new Buffer$M(P2, $)), typeof _ == "number" ? new c(a420(_, P2), P2, true) : (Buffer$M.isBuffer(_) || (_ = new Buffer$M(_, I2)), new c(_, P2, true)));
  }
  return browser$5.DiffieHellmanGroup = browser$5.createDiffieHellmanGroup = browser$5.getDiffieHellman = l2, browser$5.createDiffieHellman = browser$5.DiffieHellman = p2, browser$5;
}
var safeBuffer$1 = { exports: {} };
/*! safe-buffer. MIT License. Feross Aboukhadijeh <https://feross.org/opensource> */
(function(a420, u2) {
  var c = require$$0$2, l2 = c.Buffer;
  function v2(_, I2) {
    for (var P2 in _)
      I2[P2] = _[P2];
  }
  l2.from && l2.alloc && l2.allocUnsafe && l2.allocUnsafeSlow ? a420.exports = c : (v2(c, u2), u2.Buffer = p2);
  function p2(_, I2, P2) {
    return l2(_, I2, P2);
  }
  p2.prototype = Object.create(l2.prototype), v2(l2, p2), p2.from = function(_, I2, P2) {
    if (typeof _ == "number")
      throw new TypeError("Argument must not be a number");
    return l2(_, I2, P2);
  }, p2.alloc = function(_, I2, P2) {
    if (typeof _ != "number")
      throw new TypeError("Argument must be a number");
    var $ = l2(_);
    return I2 !== void 0 ? typeof P2 == "string" ? $.fill(I2, P2) : $.fill(I2) : $.fill(0), $;
  }, p2.allocUnsafe = function(_) {
    if (typeof _ != "number")
      throw new TypeError("Argument must be a number");
    return l2(_);
  }, p2.allocUnsafeSlow = function(_) {
    if (typeof _ != "number")
      throw new TypeError("Argument must be a number");
    return c.SlowBuffer(_);
  };
})(safeBuffer$1, safeBuffer$1.exports);
var safeBufferExports = safeBuffer$1.exports, readableBrowser = { exports: {} }, streamBrowser = eventsExports$1.EventEmitter, buffer_list, hasRequiredBuffer_list;
function requireBuffer_list() {
  if (hasRequiredBuffer_list)
    return buffer_list;
  hasRequiredBuffer_list = 1;
  function a420(X2, ie2) {
    var Q2 = Object.keys(X2);
    if (Object.getOwnPropertySymbols) {
      var ne2 = Object.getOwnPropertySymbols(X2);
      ie2 && (ne2 = ne2.filter(function(Z2) {
        return Object.getOwnPropertyDescriptor(X2, Z2).enumerable;
      })), Q2.push.apply(Q2, ne2);
    }
    return Q2;
  }
  function u2(X2) {
    for (var ie2 = 1; ie2 < arguments.length; ie2++) {
      var Q2 = arguments[ie2] != null ? arguments[ie2] : {};
      ie2 % 2 ? a420(Object(Q2), true).forEach(function(ne2) {
        c(X2, ne2, Q2[ne2]);
      }) : Object.getOwnPropertyDescriptors ? Object.defineProperties(X2, Object.getOwnPropertyDescriptors(Q2)) : a420(Object(Q2)).forEach(function(ne2) {
        Object.defineProperty(X2, ne2, Object.getOwnPropertyDescriptor(Q2, ne2));
      });
    }
    return X2;
  }
  function c(X2, ie2, Q2) {
    return ie2 = _(ie2), ie2 in X2 ? Object.defineProperty(X2, ie2, { value: Q2, enumerable: true, configurable: true, writable: true }) : X2[ie2] = Q2, X2;
  }
  function l2(X2, ie2) {
    if (!(X2 instanceof ie2))
      throw new TypeError("Cannot call a class as a function");
  }
  function v2(X2, ie2) {
    for (var Q2 = 0; Q2 < ie2.length; Q2++) {
      var ne2 = ie2[Q2];
      ne2.enumerable = ne2.enumerable || false, ne2.configurable = true, "value" in ne2 && (ne2.writable = true), Object.defineProperty(X2, _(ne2.key), ne2);
    }
  }
  function p2(X2, ie2, Q2) {
    return ie2 && v2(X2.prototype, ie2), Q2 && v2(X2, Q2), Object.defineProperty(X2, "prototype", { writable: false }), X2;
  }
  function _(X2) {
    var ie2 = I2(X2, "string");
    return typeof ie2 == "symbol" ? ie2 : String(ie2);
  }
  function I2(X2, ie2) {
    if (typeof X2 != "object" || X2 === null)
      return X2;
    var Q2 = X2[Symbol.toPrimitive];
    if (Q2 !== void 0) {
      var ne2 = Q2.call(X2, ie2 || "default");
      if (typeof ne2 != "object")
        return ne2;
      throw new TypeError("@@toPrimitive must return a primitive value.");
    }
    return (ie2 === "string" ? String : Number)(X2);
  }
  var P2 = require$$0$2, $ = P2.Buffer, F2 = util$4, H2 = F2.inspect, j = H2 && H2.custom || "inspect";
  function ee2(X2, ie2, Q2) {
    $.prototype.copy.call(X2, ie2, Q2);
  }
  return buffer_list = /* @__PURE__ */ function() {
    function X2() {
      l2(this, X2), this.head = null, this.tail = null, this.length = 0;
    }
    return p2(X2, [{ key: "push", value: function(Q2) {
      var ne2 = { data: Q2, next: null };
      this.length > 0 ? this.tail.next = ne2 : this.head = ne2, this.tail = ne2, ++this.length;
    } }, { key: "unshift", value: function(Q2) {
      var ne2 = { data: Q2, next: this.head };
      this.length === 0 && (this.tail = ne2), this.head = ne2, ++this.length;
    } }, { key: "shift", value: function() {
      if (this.length !== 0) {
        var Q2 = this.head.data;
        return this.length === 1 ? this.head = this.tail = null : this.head = this.head.next, --this.length, Q2;
      }
    } }, { key: "clear", value: function() {
      this.head = this.tail = null, this.length = 0;
    } }, { key: "join", value: function(Q2) {
      if (this.length === 0)
        return "";
      for (var ne2 = this.head, Z2 = "" + ne2.data; ne2 = ne2.next; )
        Z2 += Q2 + ne2.data;
      return Z2;
    } }, {
      key: "concat",
      value: function(Q2) {
        if (this.length === 0)
          return $.alloc(0);
        for (var ne2 = $.allocUnsafe(Q2 >>> 0), Z2 = this.head, de2 = 0; Z2; )
          ee2(Z2.data, ne2, de2), de2 += Z2.data.length, Z2 = Z2.next;
        return ne2;
      }
      // Consumes a specified amount of bytes or characters from the buffered data.
    }, { key: "consume", value: function(Q2, ne2) {
      var Z2;
      return Q2 < this.head.data.length ? (Z2 = this.head.data.slice(0, Q2), this.head.data = this.head.data.slice(Q2)) : Q2 === this.head.data.length ? Z2 = this.shift() : Z2 = ne2 ? this._getString(Q2) : this._getBuffer(Q2), Z2;
    } }, {
      key: "first",
      value: function() {
        return this.head.data;
      }
      // Consumes a specified amount of characters from the buffered data.
    }, {
      key: "_getString",
      value: function(Q2) {
        var ne2 = this.head, Z2 = 1, de2 = ne2.data;
        for (Q2 -= de2.length; ne2 = ne2.next; ) {
          var pe2 = ne2.data, le2 = Q2 > pe2.length ? pe2.length : Q2;
          if (le2 === pe2.length ? de2 += pe2 : de2 += pe2.slice(0, Q2), Q2 -= le2, Q2 === 0) {
            le2 === pe2.length ? (++Z2, ne2.next ? this.head = ne2.next : this.head = this.tail = null) : (this.head = ne2, ne2.data = pe2.slice(le2));
            break;
          }
          ++Z2;
        }
        return this.length -= Z2, de2;
      }
      // Consumes a specified amount of bytes from the buffered data.
    }, {
      key: "_getBuffer",
      value: function(Q2) {
        var ne2 = $.allocUnsafe(Q2), Z2 = this.head, de2 = 1;
        for (Z2.data.copy(ne2), Q2 -= Z2.data.length; Z2 = Z2.next; ) {
          var pe2 = Z2.data, le2 = Q2 > pe2.length ? pe2.length : Q2;
          if (pe2.copy(ne2, ne2.length - Q2, 0, le2), Q2 -= le2, Q2 === 0) {
            le2 === pe2.length ? (++de2, Z2.next ? this.head = Z2.next : this.head = this.tail = null) : (this.head = Z2, Z2.data = pe2.slice(le2));
            break;
          }
          ++de2;
        }
        return this.length -= de2, ne2;
      }
      // Make sure the linked list only shows the minimal necessary information.
    }, { key: j, value: function(Q2, ne2) {
      return H2(this, u2(u2({}, ne2), {}, {
        // Only inspect one level.
        depth: 0,
        // It should not recurse.
        customInspect: false
      }));
    } }]), X2;
  }(), buffer_list;
}
function destroy(a420, u2) {
  var c = this, l2 = this._readableState && this._readableState.destroyed, v2 = this._writableState && this._writableState.destroyed;
  return l2 || v2 ? (u2 ? u2(a420) : a420 && (this._writableState ? this._writableState.errorEmitted || (this._writableState.errorEmitted = true, process$1.nextTick(emitErrorNT, this, a420)) : process$1.nextTick(emitErrorNT, this, a420)), this) : (this._readableState && (this._readableState.destroyed = true), this._writableState && (this._writableState.destroyed = true), this._destroy(a420 || null, function(p2) {
    !u2 && p2 ? c._writableState ? c._writableState.errorEmitted ? process$1.nextTick(emitCloseNT, c) : (c._writableState.errorEmitted = true, process$1.nextTick(emitErrorAndCloseNT, c, p2)) : process$1.nextTick(emitErrorAndCloseNT, c, p2) : u2 ? (process$1.nextTick(emitCloseNT, c), u2(p2)) : process$1.nextTick(emitCloseNT, c);
  }), this);
}
function emitErrorAndCloseNT(a420, u2) {
  emitErrorNT(a420, u2), emitCloseNT(a420);
}
function emitCloseNT(a420) {
  a420._writableState && !a420._writableState.emitClose || a420._readableState && !a420._readableState.emitClose || a420.emit("close");
}
function undestroy() {
  this._readableState && (this._readableState.destroyed = false, this._readableState.reading = false, this._readableState.ended = false, this._readableState.endEmitted = false), this._writableState && (this._writableState.destroyed = false, this._writableState.ended = false, this._writableState.ending = false, this._writableState.finalCalled = false, this._writableState.prefinished = false, this._writableState.finished = false, this._writableState.errorEmitted = false);
}
function emitErrorNT(a420, u2) {
  a420.emit("error", u2);
}
function errorOrDestroy(a420, u2) {
  var c = a420._readableState, l2 = a420._writableState;
  c && c.autoDestroy || l2 && l2.autoDestroy ? a420.destroy(u2) : a420.emit("error", u2);
}
var destroy_1 = { destroy, undestroy, errorOrDestroy }, errorsBrowser = {};
function _inheritsLoose$1(a420, u2) {
  a420.prototype = Object.create(u2.prototype), a420.prototype.constructor = a420, a420.__proto__ = u2;
}
var codes = {};
function createErrorType(a420, u2, c) {
  c || (c = Error);
  function l2(p2, _, I2) {
    return typeof u2 == "string" ? u2 : u2(p2, _, I2);
  }
  var v2 = /* @__PURE__ */ function(p2) {
    _inheritsLoose$1(_, p2);
    function _(I2, P2, $) {
      return p2.call(this, l2(I2, P2, $)) || this;
    }
    return _;
  }(c);
  v2.prototype.name = c.name, v2.prototype.code = a420, codes[a420] = v2;
}
function oneOf(a420, u2) {
  if (Array.isArray(a420)) {
    var c = a420.length;
    return a420 = a420.map(function(l2) {
      return String(l2);
    }), c > 2 ? "one of ".concat(u2, " ").concat(a420.slice(0, c - 1).join(", "), ", or ") + a420[c - 1] : c === 2 ? "one of ".concat(u2, " ").concat(a420[0], " or ").concat(a420[1]) : "of ".concat(u2, " ").concat(a420[0]);
  } else
    return "of ".concat(u2, " ").concat(String(a420));
}
function startsWith(a420, u2, c) {
  return a420.substr(!c || c < 0 ? 0 : +c, u2.length) === u2;
}
function endsWith(a420, u2, c) {
  return (c === void 0 || c > a420.length) && (c = a420.length), a420.substring(c - u2.length, c) === u2;
}
function includes$2(a420, u2, c) {
  return typeof c != "number" && (c = 0), c + u2.length > a420.length ? false : a420.indexOf(u2, c) !== -1;
}
createErrorType("ERR_INVALID_OPT_VALUE", function(a420, u2) {
  return 'The value "' + u2 + '" is invalid for option "' + a420 + '"';
}, TypeError);
createErrorType("ERR_INVALID_ARG_TYPE", function(a420, u2, c) {
  var l2;
  typeof u2 == "string" && startsWith(u2, "not ") ? (l2 = "must not be", u2 = u2.replace(/^not /, "")) : l2 = "must be";
  var v2;
  if (endsWith(a420, " argument"))
    v2 = "The ".concat(a420, " ").concat(l2, " ").concat(oneOf(u2, "type"));
  else {
    var p2 = includes$2(a420, ".") ? "property" : "argument";
    v2 = 'The "'.concat(a420, '" ').concat(p2, " ").concat(l2, " ").concat(oneOf(u2, "type"));
  }
  return v2 += ". Received type ".concat(typeof c), v2;
}, TypeError);
createErrorType("ERR_STREAM_PUSH_AFTER_EOF", "stream.push() after EOF");
createErrorType("ERR_METHOD_NOT_IMPLEMENTED", function(a420) {
  return "The " + a420 + " method is not implemented";
});
createErrorType("ERR_STREAM_PREMATURE_CLOSE", "Premature close");
createErrorType("ERR_STREAM_DESTROYED", function(a420) {
  return "Cannot call " + a420 + " after a stream was destroyed";
});
createErrorType("ERR_MULTIPLE_CALLBACK", "Callback called multiple times");
createErrorType("ERR_STREAM_CANNOT_PIPE", "Cannot pipe, not readable");
createErrorType("ERR_STREAM_WRITE_AFTER_END", "write after end");
createErrorType("ERR_STREAM_NULL_VALUES", "May not write null values to stream", TypeError);
createErrorType("ERR_UNKNOWN_ENCODING", function(a420) {
  return "Unknown encoding: " + a420;
}, TypeError);
createErrorType("ERR_STREAM_UNSHIFT_AFTER_END_EVENT", "stream.unshift() after end event");
errorsBrowser.codes = codes;
var ERR_INVALID_OPT_VALUE = errorsBrowser.codes.ERR_INVALID_OPT_VALUE;
function highWaterMarkFrom(a420, u2, c) {
  return a420.highWaterMark != null ? a420.highWaterMark : u2 ? a420[c] : null;
}
function getHighWaterMark(a420, u2, c, l2) {
  var v2 = highWaterMarkFrom(u2, l2, c);
  if (v2 != null) {
    if (!(isFinite(v2) && Math.floor(v2) === v2) || v2 < 0) {
      var p2 = l2 ? c : "highWaterMark";
      throw new ERR_INVALID_OPT_VALUE(p2, v2);
    }
    return Math.floor(v2);
  }
  return a420.objectMode ? 16 : 16 * 1024;
}
var state$3 = { getHighWaterMark }, _stream_writable, hasRequired_stream_writable;
function require_stream_writable() {
  if (hasRequired_stream_writable)
    return _stream_writable;
  hasRequired_stream_writable = 1, _stream_writable = Te2;
  function a420(ye2) {
    var he2 = this;
    this.next = null, this.entry = null, this.finish = function() {
      $e2(he2, ye2);
    };
  }
  var u2;
  Te2.WritableState = be2;
  var c = { deprecate: browser$c }, l2 = streamBrowser, v2 = require$$0$2.Buffer, p2 = (typeof commonjsGlobal$1 < "u" ? commonjsGlobal$1 : typeof window < "u" ? window : typeof self < "u" ? self : {}).Uint8Array || function() {
  };
  function _(ye2) {
    return v2.from(ye2);
  }
  function I2(ye2) {
    return v2.isBuffer(ye2) || ye2 instanceof p2;
  }
  var P2 = destroy_1, $ = state$3, F2 = $.getHighWaterMark, H2 = errorsBrowser.codes, j = H2.ERR_INVALID_ARG_TYPE, ee2 = H2.ERR_METHOD_NOT_IMPLEMENTED, X2 = H2.ERR_MULTIPLE_CALLBACK, ie2 = H2.ERR_STREAM_CANNOT_PIPE, Q2 = H2.ERR_STREAM_DESTROYED, ne2 = H2.ERR_STREAM_NULL_VALUES, Z2 = H2.ERR_STREAM_WRITE_AFTER_END, de2 = H2.ERR_UNKNOWN_ENCODING, pe2 = P2.errorOrDestroy;
  inherits_browserExports(Te2, l2);
  function le2() {
  }
  function be2(ye2, he2, Me2) {
    u2 = u2 || require_stream_duplex(), ye2 = ye2 || {}, typeof Me2 != "boolean" && (Me2 = he2 instanceof u2), this.objectMode = !!ye2.objectMode, Me2 && (this.objectMode = this.objectMode || !!ye2.writableObjectMode), this.highWaterMark = F2(this, ye2, "writableHighWaterMark", Me2), this.finalCalled = false, this.needDrain = false, this.ending = false, this.ended = false, this.finished = false, this.destroyed = false;
    var Ae2 = ye2.decodeStrings === false;
    this.decodeStrings = !Ae2, this.defaultEncoding = ye2.defaultEncoding || "utf8", this.length = 0, this.writing = false, this.corked = 0, this.sync = true, this.bufferProcessing = false, this.onwrite = function(xe2) {
      A2(he2, xe2);
    }, this.writecb = null, this.writelen = 0, this.bufferedRequest = null, this.lastBufferedRequest = null, this.pendingcb = 0, this.prefinished = false, this.errorEmitted = false, this.emitClose = ye2.emitClose !== false, this.autoDestroy = !!ye2.autoDestroy, this.bufferedRequestCount = 0, this.corkedRequestsFree = new a420(this);
  }
  be2.prototype.getBuffer = function() {
    for (var he2 = this.bufferedRequest, Me2 = []; he2; )
      Me2.push(he2), he2 = he2.next;
    return Me2;
  }, function() {
    try {
      Object.defineProperty(be2.prototype, "buffer", { get: c.deprecate(function() {
        return this.getBuffer();
      }, "_writableState.buffer is deprecated. Use _writableState.getBuffer instead.", "DEP0003") });
    } catch {
    }
  }();
  var ke2;
  typeof Symbol == "function" && Symbol.hasInstance && typeof Function.prototype[Symbol.hasInstance] == "function" ? (ke2 = Function.prototype[Symbol.hasInstance], Object.defineProperty(Te2, Symbol.hasInstance, { value: function(he2) {
    return ke2.call(this, he2) ? true : this !== Te2 ? false : he2 && he2._writableState instanceof be2;
  } })) : ke2 = function(he2) {
    return he2 instanceof this;
  };
  function Te2(ye2) {
    u2 = u2 || require_stream_duplex();
    var he2 = this instanceof u2;
    if (!he2 && !ke2.call(Te2, this))
      return new Te2(ye2);
    this._writableState = new be2(ye2, this, he2), this.writable = true, ye2 && (typeof ye2.write == "function" && (this._write = ye2.write), typeof ye2.writev == "function" && (this._writev = ye2.writev), typeof ye2.destroy == "function" && (this._destroy = ye2.destroy), typeof ye2.final == "function" && (this._final = ye2.final)), l2.call(this);
  }
  Te2.prototype.pipe = function() {
    pe2(this, new ie2());
  };
  function q2(ye2, he2) {
    var Me2 = new Z2();
    pe2(ye2, Me2), process$1.nextTick(he2, Me2);
  }
  function z2(ye2, he2, Me2, Ae2) {
    var xe2;
    return Me2 === null ? xe2 = new ne2() : typeof Me2 != "string" && !he2.objectMode && (xe2 = new j("chunk", ["string", "Buffer"], Me2)), xe2 ? (pe2(ye2, xe2), process$1.nextTick(Ae2, xe2), false) : true;
  }
  Te2.prototype.write = function(ye2, he2, Me2) {
    var Ae2 = this._writableState, xe2 = false, ae2 = !Ae2.objectMode && I2(ye2);
    return ae2 && !v2.isBuffer(ye2) && (ye2 = _(ye2)), typeof he2 == "function" && (Me2 = he2, he2 = null), ae2 ? he2 = "buffer" : he2 || (he2 = Ae2.defaultEncoding), typeof Me2 != "function" && (Me2 = le2), Ae2.ending ? q2(this, Me2) : (ae2 || z2(this, Ae2, ye2, Me2)) && (Ae2.pendingcb++, xe2 = b(this, Ae2, ae2, ye2, he2, Me2)), xe2;
  }, Te2.prototype.cork = function() {
    this._writableState.corked++;
  }, Te2.prototype.uncork = function() {
    var ye2 = this._writableState;
    ye2.corked && (ye2.corked--, !ye2.writing && !ye2.corked && !ye2.bufferProcessing && ye2.bufferedRequest && B2(this, ye2));
  }, Te2.prototype.setDefaultEncoding = function(he2) {
    if (typeof he2 == "string" && (he2 = he2.toLowerCase()), !(["hex", "utf8", "utf-8", "ascii", "binary", "base64", "ucs2", "ucs-2", "utf16le", "utf-16le", "raw"].indexOf((he2 + "").toLowerCase()) > -1))
      throw new de2(he2);
    return this._writableState.defaultEncoding = he2, this;
  }, Object.defineProperty(Te2.prototype, "writableBuffer", {
    // making it explicit this property is not enumerable
    // because otherwise some prototype manipulation in
    // userland will fail
    enumerable: false,
    get: function() {
      return this._writableState && this._writableState.getBuffer();
    }
  });
  function C2(ye2, he2, Me2) {
    return !ye2.objectMode && ye2.decodeStrings !== false && typeof he2 == "string" && (he2 = v2.from(he2, Me2)), he2;
  }
  Object.defineProperty(Te2.prototype, "writableHighWaterMark", {
    // making it explicit this property is not enumerable
    // because otherwise some prototype manipulation in
    // userland will fail
    enumerable: false,
    get: function() {
      return this._writableState.highWaterMark;
    }
  });
  function b(ye2, he2, Me2, Ae2, xe2, ae2) {
    if (!Me2) {
      var N2 = C2(he2, Ae2, xe2);
      Ae2 !== N2 && (Me2 = true, xe2 = "buffer", Ae2 = N2);
    }
    var re2 = he2.objectMode ? 1 : Ae2.length;
    he2.length += re2;
    var fe2 = he2.length < he2.highWaterMark;
    if (fe2 || (he2.needDrain = true), he2.writing || he2.corked) {
      var Ne2 = he2.lastBufferedRequest;
      he2.lastBufferedRequest = { chunk: Ae2, encoding: xe2, isBuf: Me2, callback: ae2, next: null }, Ne2 ? Ne2.next = he2.lastBufferedRequest : he2.bufferedRequest = he2.lastBufferedRequest, he2.bufferedRequestCount += 1;
    } else
      E2(ye2, he2, false, re2, Ae2, xe2, ae2);
    return fe2;
  }
  function E2(ye2, he2, Me2, Ae2, xe2, ae2, N2) {
    he2.writelen = Ae2, he2.writecb = N2, he2.writing = true, he2.sync = true, he2.destroyed ? he2.onwrite(new Q2("write")) : Me2 ? ye2._writev(xe2, he2.onwrite) : ye2._write(xe2, ae2, he2.onwrite), he2.sync = false;
  }
  function k(ye2, he2, Me2, Ae2, xe2) {
    --he2.pendingcb, Me2 ? (process$1.nextTick(xe2, Ae2), process$1.nextTick(me2, ye2, he2), ye2._writableState.errorEmitted = true, pe2(ye2, Ae2)) : (xe2(Ae2), ye2._writableState.errorEmitted = true, pe2(ye2, Ae2), me2(ye2, he2));
  }
  function O2(ye2) {
    ye2.writing = false, ye2.writecb = null, ye2.length -= ye2.writelen, ye2.writelen = 0;
  }
  function A2(ye2, he2) {
    var Me2 = ye2._writableState, Ae2 = Me2.sync, xe2 = Me2.writecb;
    if (typeof xe2 != "function")
      throw new X2();
    if (O2(Me2), he2)
      k(ye2, Me2, Ae2, he2, xe2);
    else {
      var ae2 = T2(Me2) || ye2.destroyed;
      !ae2 && !Me2.corked && !Me2.bufferProcessing && Me2.bufferedRequest && B2(ye2, Me2), Ae2 ? process$1.nextTick(x2, ye2, Me2, ae2, xe2) : x2(ye2, Me2, ae2, xe2);
    }
  }
  function x2(ye2, he2, Me2, Ae2) {
    Me2 || Y2(ye2, he2), he2.pendingcb--, Ae2(), me2(ye2, he2);
  }
  function Y2(ye2, he2) {
    he2.length === 0 && he2.needDrain && (he2.needDrain = false, ye2.emit("drain"));
  }
  function B2(ye2, he2) {
    he2.bufferProcessing = true;
    var Me2 = he2.bufferedRequest;
    if (ye2._writev && Me2 && Me2.next) {
      var Ae2 = he2.bufferedRequestCount, xe2 = new Array(Ae2), ae2 = he2.corkedRequestsFree;
      ae2.entry = Me2;
      for (var N2 = 0, re2 = true; Me2; )
        xe2[N2] = Me2, Me2.isBuf || (re2 = false), Me2 = Me2.next, N2 += 1;
      xe2.allBuffers = re2, E2(ye2, he2, true, he2.length, xe2, "", ae2.finish), he2.pendingcb++, he2.lastBufferedRequest = null, ae2.next ? (he2.corkedRequestsFree = ae2.next, ae2.next = null) : he2.corkedRequestsFree = new a420(he2), he2.bufferedRequestCount = 0;
    } else {
      for (; Me2; ) {
        var fe2 = Me2.chunk, Ne2 = Me2.encoding, Oe2 = Me2.callback, qe2 = he2.objectMode ? 1 : fe2.length;
        if (E2(ye2, he2, false, qe2, fe2, Ne2, Oe2), Me2 = Me2.next, he2.bufferedRequestCount--, he2.writing)
          break;
      }
      Me2 === null && (he2.lastBufferedRequest = null);
    }
    he2.bufferedRequest = Me2, he2.bufferProcessing = false;
  }
  Te2.prototype._write = function(ye2, he2, Me2) {
    Me2(new ee2("_write()"));
  }, Te2.prototype._writev = null, Te2.prototype.end = function(ye2, he2, Me2) {
    var Ae2 = this._writableState;
    return typeof ye2 == "function" ? (Me2 = ye2, ye2 = null, he2 = null) : typeof he2 == "function" && (Me2 = he2, he2 = null), ye2 != null && this.write(ye2, he2), Ae2.corked && (Ae2.corked = 1, this.uncork()), Ae2.ending || Ie2(this, Ae2, Me2), this;
  }, Object.defineProperty(Te2.prototype, "writableLength", {
    // making it explicit this property is not enumerable
    // because otherwise some prototype manipulation in
    // userland will fail
    enumerable: false,
    get: function() {
      return this._writableState.length;
    }
  });
  function T2(ye2) {
    return ye2.ending && ye2.length === 0 && ye2.bufferedRequest === null && !ye2.finished && !ye2.writing;
  }
  function D2(ye2, he2) {
    ye2._final(function(Me2) {
      he2.pendingcb--, Me2 && pe2(ye2, Me2), he2.prefinished = true, ye2.emit("prefinish"), me2(ye2, he2);
    });
  }
  function te2(ye2, he2) {
    !he2.prefinished && !he2.finalCalled && (typeof ye2._final == "function" && !he2.destroyed ? (he2.pendingcb++, he2.finalCalled = true, process$1.nextTick(D2, ye2, he2)) : (he2.prefinished = true, ye2.emit("prefinish")));
  }
  function me2(ye2, he2) {
    var Me2 = T2(he2);
    if (Me2 && (te2(ye2, he2), he2.pendingcb === 0 && (he2.finished = true, ye2.emit("finish"), he2.autoDestroy))) {
      var Ae2 = ye2._readableState;
      (!Ae2 || Ae2.autoDestroy && Ae2.endEmitted) && ye2.destroy();
    }
    return Me2;
  }
  function Ie2(ye2, he2, Me2) {
    he2.ending = true, me2(ye2, he2), Me2 && (he2.finished ? process$1.nextTick(Me2) : ye2.once("finish", Me2)), he2.ended = true, ye2.writable = false;
  }
  function $e2(ye2, he2, Me2) {
    var Ae2 = ye2.entry;
    for (ye2.entry = null; Ae2; ) {
      var xe2 = Ae2.callback;
      he2.pendingcb--, xe2(Me2), Ae2 = Ae2.next;
    }
    he2.corkedRequestsFree.next = ye2;
  }
  return Object.defineProperty(Te2.prototype, "destroyed", {
    // making it explicit this property is not enumerable
    // because otherwise some prototype manipulation in
    // userland will fail
    enumerable: false,
    get: function() {
      return this._writableState === void 0 ? false : this._writableState.destroyed;
    },
    set: function(he2) {
      this._writableState && (this._writableState.destroyed = he2);
    }
  }), Te2.prototype.destroy = P2.destroy, Te2.prototype._undestroy = P2.undestroy, Te2.prototype._destroy = function(ye2, he2) {
    he2(ye2);
  }, _stream_writable;
}
var _stream_duplex, hasRequired_stream_duplex;
function require_stream_duplex() {
  if (hasRequired_stream_duplex)
    return _stream_duplex;
  hasRequired_stream_duplex = 1;
  var a420 = Object.keys || function($) {
    var F2 = [];
    for (var H2 in $)
      F2.push(H2);
    return F2;
  };
  _stream_duplex = _;
  var u2 = require_stream_readable(), c = require_stream_writable();
  inherits_browserExports(_, u2);
  for (var l2 = a420(c.prototype), v2 = 0; v2 < l2.length; v2++) {
    var p2 = l2[v2];
    _.prototype[p2] || (_.prototype[p2] = c.prototype[p2]);
  }
  function _($) {
    if (!(this instanceof _))
      return new _($);
    u2.call(this, $), c.call(this, $), this.allowHalfOpen = true, $ && ($.readable === false && (this.readable = false), $.writable === false && (this.writable = false), $.allowHalfOpen === false && (this.allowHalfOpen = false, this.once("end", I2)));
  }
  Object.defineProperty(_.prototype, "writableHighWaterMark", {
    // making it explicit this property is not enumerable
    // because otherwise some prototype manipulation in
    // userland will fail
    enumerable: false,
    get: function() {
      return this._writableState.highWaterMark;
    }
  }), Object.defineProperty(_.prototype, "writableBuffer", {
    // making it explicit this property is not enumerable
    // because otherwise some prototype manipulation in
    // userland will fail
    enumerable: false,
    get: function() {
      return this._writableState && this._writableState.getBuffer();
    }
  }), Object.defineProperty(_.prototype, "writableLength", {
    // making it explicit this property is not enumerable
    // because otherwise some prototype manipulation in
    // userland will fail
    enumerable: false,
    get: function() {
      return this._writableState.length;
    }
  });
  function I2() {
    this._writableState.ended || process$1.nextTick(P2, this);
  }
  function P2($) {
    $.end();
  }
  return Object.defineProperty(_.prototype, "destroyed", {
    // making it explicit this property is not enumerable
    // because otherwise some prototype manipulation in
    // userland will fail
    enumerable: false,
    get: function() {
      return this._readableState === void 0 || this._writableState === void 0 ? false : this._readableState.destroyed && this._writableState.destroyed;
    },
    set: function(F2) {
      this._readableState === void 0 || this._writableState === void 0 || (this._readableState.destroyed = F2, this._writableState.destroyed = F2);
    }
  }), _stream_duplex;
}
var ERR_STREAM_PREMATURE_CLOSE = errorsBrowser.codes.ERR_STREAM_PREMATURE_CLOSE;
function once$4(a420) {
  var u2 = false;
  return function() {
    if (!u2) {
      u2 = true;
      for (var c = arguments.length, l2 = new Array(c), v2 = 0; v2 < c; v2++)
        l2[v2] = arguments[v2];
      a420.apply(this, l2);
    }
  };
}
function noop$2() {
}
function isRequest$1(a420) {
  return a420.setHeader && typeof a420.abort == "function";
}
function eos$1(a420, u2, c) {
  if (typeof u2 == "function")
    return eos$1(a420, null, u2);
  u2 || (u2 = {}), c = once$4(c || noop$2);
  var l2 = u2.readable || u2.readable !== false && a420.readable, v2 = u2.writable || u2.writable !== false && a420.writable, p2 = function() {
    a420.writable || I2();
  }, _ = a420._writableState && a420._writableState.finished, I2 = function() {
    v2 = false, _ = true, l2 || c.call(a420);
  }, P2 = a420._readableState && a420._readableState.endEmitted, $ = function() {
    l2 = false, P2 = true, v2 || c.call(a420);
  }, F2 = function(X2) {
    c.call(a420, X2);
  }, H2 = function() {
    var X2;
    if (l2 && !P2)
      return (!a420._readableState || !a420._readableState.ended) && (X2 = new ERR_STREAM_PREMATURE_CLOSE()), c.call(a420, X2);
    if (v2 && !_)
      return (!a420._writableState || !a420._writableState.ended) && (X2 = new ERR_STREAM_PREMATURE_CLOSE()), c.call(a420, X2);
  }, j = function() {
    a420.req.on("finish", I2);
  };
  return isRequest$1(a420) ? (a420.on("complete", I2), a420.on("abort", H2), a420.req ? j() : a420.on("request", j)) : v2 && !a420._writableState && (a420.on("end", p2), a420.on("close", p2)), a420.on("end", $), a420.on("finish", I2), u2.error !== false && a420.on("error", F2), a420.on("close", H2), function() {
    a420.removeListener("complete", I2), a420.removeListener("abort", H2), a420.removeListener("request", j), a420.req && a420.req.removeListener("finish", I2), a420.removeListener("end", p2), a420.removeListener("close", p2), a420.removeListener("finish", I2), a420.removeListener("end", $), a420.removeListener("error", F2), a420.removeListener("close", H2);
  };
}
var endOfStream = eos$1, async_iterator, hasRequiredAsync_iterator;
function requireAsync_iterator() {
  if (hasRequiredAsync_iterator)
    return async_iterator;
  hasRequiredAsync_iterator = 1;
  var a420;
  function u2(de2, pe2, le2) {
    return pe2 = c(pe2), pe2 in de2 ? Object.defineProperty(de2, pe2, { value: le2, enumerable: true, configurable: true, writable: true }) : de2[pe2] = le2, de2;
  }
  function c(de2) {
    var pe2 = l2(de2, "string");
    return typeof pe2 == "symbol" ? pe2 : String(pe2);
  }
  function l2(de2, pe2) {
    if (typeof de2 != "object" || de2 === null)
      return de2;
    var le2 = de2[Symbol.toPrimitive];
    if (le2 !== void 0) {
      var be2 = le2.call(de2, pe2 || "default");
      if (typeof be2 != "object")
        return be2;
      throw new TypeError("@@toPrimitive must return a primitive value.");
    }
    return (pe2 === "string" ? String : Number)(de2);
  }
  var v2 = endOfStream, p2 = Symbol("lastResolve"), _ = Symbol("lastReject"), I2 = Symbol("error"), P2 = Symbol("ended"), $ = Symbol("lastPromise"), F2 = Symbol("handlePromise"), H2 = Symbol("stream");
  function j(de2, pe2) {
    return { value: de2, done: pe2 };
  }
  function ee2(de2) {
    var pe2 = de2[p2];
    if (pe2 !== null) {
      var le2 = de2[H2].read();
      le2 !== null && (de2[$] = null, de2[p2] = null, de2[_] = null, pe2(j(le2, false)));
    }
  }
  function X2(de2) {
    process$1.nextTick(ee2, de2);
  }
  function ie2(de2, pe2) {
    return function(le2, be2) {
      de2.then(function() {
        if (pe2[P2]) {
          le2(j(void 0, true));
          return;
        }
        pe2[F2](le2, be2);
      }, be2);
    };
  }
  var Q2 = Object.getPrototypeOf(function() {
  }), ne2 = Object.setPrototypeOf((a420 = { get stream() {
    return this[H2];
  }, next: function() {
    var pe2 = this, le2 = this[I2];
    if (le2 !== null)
      return Promise.reject(le2);
    if (this[P2])
      return Promise.resolve(j(void 0, true));
    if (this[H2].destroyed)
      return new Promise(function(q2, z2) {
        process$1.nextTick(function() {
          pe2[I2] ? z2(pe2[I2]) : q2(j(void 0, true));
        });
      });
    var be2 = this[$], ke2;
    if (be2)
      ke2 = new Promise(ie2(be2, this));
    else {
      var Te2 = this[H2].read();
      if (Te2 !== null)
        return Promise.resolve(j(Te2, false));
      ke2 = new Promise(this[F2]);
    }
    return this[$] = ke2, ke2;
  } }, u2(a420, Symbol.asyncIterator, function() {
    return this;
  }), u2(a420, "return", function() {
    var pe2 = this;
    return new Promise(function(le2, be2) {
      pe2[H2].destroy(null, function(ke2) {
        if (ke2) {
          be2(ke2);
          return;
        }
        le2(j(void 0, true));
      });
    });
  }), a420), Q2), Z2 = function(pe2) {
    var le2, be2 = Object.create(ne2, (le2 = {}, u2(le2, H2, { value: pe2, writable: true }), u2(le2, p2, { value: null, writable: true }), u2(le2, _, { value: null, writable: true }), u2(le2, I2, { value: null, writable: true }), u2(le2, P2, { value: pe2._readableState.endEmitted, writable: true }), u2(le2, F2, { value: function(Te2, q2) {
      var z2 = be2[H2].read();
      z2 ? (be2[$] = null, be2[p2] = null, be2[_] = null, Te2(j(z2, false))) : (be2[p2] = Te2, be2[_] = q2);
    }, writable: true }), le2));
    return be2[$] = null, v2(pe2, function(ke2) {
      if (ke2 && ke2.code !== "ERR_STREAM_PREMATURE_CLOSE") {
        var Te2 = be2[_];
        Te2 !== null && (be2[$] = null, be2[p2] = null, be2[_] = null, Te2(ke2)), be2[I2] = ke2;
        return;
      }
      var q2 = be2[p2];
      q2 !== null && (be2[$] = null, be2[p2] = null, be2[_] = null, q2(j(void 0, true))), be2[P2] = true;
    }), pe2.on("readable", X2.bind(null, be2)), be2;
  };
  return async_iterator = Z2, async_iterator;
}
var fromBrowser, hasRequiredFromBrowser;
function requireFromBrowser() {
  return hasRequiredFromBrowser || (hasRequiredFromBrowser = 1, fromBrowser = function() {
    throw new Error("Readable.from is not available in the browser");
  }), fromBrowser;
}
var _stream_readable, hasRequired_stream_readable;
function require_stream_readable() {
  if (hasRequired_stream_readable)
    return _stream_readable;
  hasRequired_stream_readable = 1, _stream_readable = q2;
  var a420;
  q2.ReadableState = Te2, eventsExports$1.EventEmitter;
  var u2 = function(N2, re2) {
    return N2.listeners(re2).length;
  }, c = streamBrowser, l2 = require$$0$2.Buffer, v2 = (typeof commonjsGlobal$1 < "u" ? commonjsGlobal$1 : typeof window < "u" ? window : typeof self < "u" ? self : {}).Uint8Array || function() {
  };
  function p2(ae2) {
    return l2.from(ae2);
  }
  function _(ae2) {
    return l2.isBuffer(ae2) || ae2 instanceof v2;
  }
  var I2 = util$4, P2;
  I2 && I2.debuglog ? P2 = I2.debuglog("stream") : P2 = function() {
  };
  var $ = requireBuffer_list(), F2 = destroy_1, H2 = state$3, j = H2.getHighWaterMark, ee2 = errorsBrowser.codes, X2 = ee2.ERR_INVALID_ARG_TYPE, ie2 = ee2.ERR_STREAM_PUSH_AFTER_EOF, Q2 = ee2.ERR_METHOD_NOT_IMPLEMENTED, ne2 = ee2.ERR_STREAM_UNSHIFT_AFTER_END_EVENT, Z2, de2, pe2;
  inherits_browserExports(q2, c);
  var le2 = F2.errorOrDestroy, be2 = ["error", "close", "destroy", "pause", "resume"];
  function ke2(ae2, N2, re2) {
    if (typeof ae2.prependListener == "function")
      return ae2.prependListener(N2, re2);
    !ae2._events || !ae2._events[N2] ? ae2.on(N2, re2) : Array.isArray(ae2._events[N2]) ? ae2._events[N2].unshift(re2) : ae2._events[N2] = [re2, ae2._events[N2]];
  }
  function Te2(ae2, N2, re2) {
    a420 = a420 || require_stream_duplex(), ae2 = ae2 || {}, typeof re2 != "boolean" && (re2 = N2 instanceof a420), this.objectMode = !!ae2.objectMode, re2 && (this.objectMode = this.objectMode || !!ae2.readableObjectMode), this.highWaterMark = j(this, ae2, "readableHighWaterMark", re2), this.buffer = new $(), this.length = 0, this.pipes = null, this.pipesCount = 0, this.flowing = null, this.ended = false, this.endEmitted = false, this.reading = false, this.sync = true, this.needReadable = false, this.emittedReadable = false, this.readableListening = false, this.resumeScheduled = false, this.paused = true, this.emitClose = ae2.emitClose !== false, this.autoDestroy = !!ae2.autoDestroy, this.destroyed = false, this.defaultEncoding = ae2.defaultEncoding || "utf8", this.awaitDrain = 0, this.readingMore = false, this.decoder = null, this.encoding = null, ae2.encoding && (Z2 || (Z2 = string_decoder.StringDecoder), this.decoder = new Z2(ae2.encoding), this.encoding = ae2.encoding);
  }
  function q2(ae2) {
    if (a420 = a420 || require_stream_duplex(), !(this instanceof q2))
      return new q2(ae2);
    var N2 = this instanceof a420;
    this._readableState = new Te2(ae2, this, N2), this.readable = true, ae2 && (typeof ae2.read == "function" && (this._read = ae2.read), typeof ae2.destroy == "function" && (this._destroy = ae2.destroy)), c.call(this);
  }
  Object.defineProperty(q2.prototype, "destroyed", {
    // making it explicit this property is not enumerable
    // because otherwise some prototype manipulation in
    // userland will fail
    enumerable: false,
    get: function() {
      return this._readableState === void 0 ? false : this._readableState.destroyed;
    },
    set: function(N2) {
      this._readableState && (this._readableState.destroyed = N2);
    }
  }), q2.prototype.destroy = F2.destroy, q2.prototype._undestroy = F2.undestroy, q2.prototype._destroy = function(ae2, N2) {
    N2(ae2);
  }, q2.prototype.push = function(ae2, N2) {
    var re2 = this._readableState, fe2;
    return re2.objectMode ? fe2 = true : typeof ae2 == "string" && (N2 = N2 || re2.defaultEncoding, N2 !== re2.encoding && (ae2 = l2.from(ae2, N2), N2 = ""), fe2 = true), z2(this, ae2, N2, false, fe2);
  }, q2.prototype.unshift = function(ae2) {
    return z2(this, ae2, null, true, false);
  };
  function z2(ae2, N2, re2, fe2, Ne2) {
    P2("readableAddChunk", N2);
    var Oe2 = ae2._readableState;
    if (N2 === null)
      Oe2.reading = false, A2(ae2, Oe2);
    else {
      var qe2;
      if (Ne2 || (qe2 = b(Oe2, N2)), qe2)
        le2(ae2, qe2);
      else if (Oe2.objectMode || N2 && N2.length > 0) {
        if (typeof N2 != "string" && !Oe2.objectMode && Object.getPrototypeOf(N2) !== l2.prototype && (N2 = p2(N2)), fe2)
          Oe2.endEmitted ? le2(ae2, new ne2()) : C2(ae2, Oe2, N2, true);
        else if (Oe2.ended)
          le2(ae2, new ie2());
        else {
          if (Oe2.destroyed)
            return false;
          Oe2.reading = false, Oe2.decoder && !re2 ? (N2 = Oe2.decoder.write(N2), Oe2.objectMode || N2.length !== 0 ? C2(ae2, Oe2, N2, false) : B2(ae2, Oe2)) : C2(ae2, Oe2, N2, false);
        }
      } else
        fe2 || (Oe2.reading = false, B2(ae2, Oe2));
    }
    return !Oe2.ended && (Oe2.length < Oe2.highWaterMark || Oe2.length === 0);
  }
  function C2(ae2, N2, re2, fe2) {
    N2.flowing && N2.length === 0 && !N2.sync ? (N2.awaitDrain = 0, ae2.emit("data", re2)) : (N2.length += N2.objectMode ? 1 : re2.length, fe2 ? N2.buffer.unshift(re2) : N2.buffer.push(re2), N2.needReadable && x2(ae2)), B2(ae2, N2);
  }
  function b(ae2, N2) {
    var re2;
    return !_(N2) && typeof N2 != "string" && N2 !== void 0 && !ae2.objectMode && (re2 = new X2("chunk", ["string", "Buffer", "Uint8Array"], N2)), re2;
  }
  q2.prototype.isPaused = function() {
    return this._readableState.flowing === false;
  }, q2.prototype.setEncoding = function(ae2) {
    Z2 || (Z2 = string_decoder.StringDecoder);
    var N2 = new Z2(ae2);
    this._readableState.decoder = N2, this._readableState.encoding = this._readableState.decoder.encoding;
    for (var re2 = this._readableState.buffer.head, fe2 = ""; re2 !== null; )
      fe2 += N2.write(re2.data), re2 = re2.next;
    return this._readableState.buffer.clear(), fe2 !== "" && this._readableState.buffer.push(fe2), this._readableState.length = fe2.length, this;
  };
  var E2 = 1073741824;
  function k(ae2) {
    return ae2 >= E2 ? ae2 = E2 : (ae2--, ae2 |= ae2 >>> 1, ae2 |= ae2 >>> 2, ae2 |= ae2 >>> 4, ae2 |= ae2 >>> 8, ae2 |= ae2 >>> 16, ae2++), ae2;
  }
  function O2(ae2, N2) {
    return ae2 <= 0 || N2.length === 0 && N2.ended ? 0 : N2.objectMode ? 1 : ae2 !== ae2 ? N2.flowing && N2.length ? N2.buffer.head.data.length : N2.length : (ae2 > N2.highWaterMark && (N2.highWaterMark = k(ae2)), ae2 <= N2.length ? ae2 : N2.ended ? N2.length : (N2.needReadable = true, 0));
  }
  q2.prototype.read = function(ae2) {
    P2("read", ae2), ae2 = parseInt(ae2, 10);
    var N2 = this._readableState, re2 = ae2;
    if (ae2 !== 0 && (N2.emittedReadable = false), ae2 === 0 && N2.needReadable && ((N2.highWaterMark !== 0 ? N2.length >= N2.highWaterMark : N2.length > 0) || N2.ended))
      return P2("read: emitReadable", N2.length, N2.ended), N2.length === 0 && N2.ended ? Me2(this) : x2(this), null;
    if (ae2 = O2(ae2, N2), ae2 === 0 && N2.ended)
      return N2.length === 0 && Me2(this), null;
    var fe2 = N2.needReadable;
    P2("need readable", fe2), (N2.length === 0 || N2.length - ae2 < N2.highWaterMark) && (fe2 = true, P2("length less than watermark", fe2)), N2.ended || N2.reading ? (fe2 = false, P2("reading or ended", fe2)) : fe2 && (P2("do read"), N2.reading = true, N2.sync = true, N2.length === 0 && (N2.needReadable = true), this._read(N2.highWaterMark), N2.sync = false, N2.reading || (ae2 = O2(re2, N2)));
    var Ne2;
    return ae2 > 0 ? Ne2 = he2(ae2, N2) : Ne2 = null, Ne2 === null ? (N2.needReadable = N2.length <= N2.highWaterMark, ae2 = 0) : (N2.length -= ae2, N2.awaitDrain = 0), N2.length === 0 && (N2.ended || (N2.needReadable = true), re2 !== ae2 && N2.ended && Me2(this)), Ne2 !== null && this.emit("data", Ne2), Ne2;
  };
  function A2(ae2, N2) {
    if (P2("onEofChunk"), !N2.ended) {
      if (N2.decoder) {
        var re2 = N2.decoder.end();
        re2 && re2.length && (N2.buffer.push(re2), N2.length += N2.objectMode ? 1 : re2.length);
      }
      N2.ended = true, N2.sync ? x2(ae2) : (N2.needReadable = false, N2.emittedReadable || (N2.emittedReadable = true, Y2(ae2)));
    }
  }
  function x2(ae2) {
    var N2 = ae2._readableState;
    P2("emitReadable", N2.needReadable, N2.emittedReadable), N2.needReadable = false, N2.emittedReadable || (P2("emitReadable", N2.flowing), N2.emittedReadable = true, process$1.nextTick(Y2, ae2));
  }
  function Y2(ae2) {
    var N2 = ae2._readableState;
    P2("emitReadable_", N2.destroyed, N2.length, N2.ended), !N2.destroyed && (N2.length || N2.ended) && (ae2.emit("readable"), N2.emittedReadable = false), N2.needReadable = !N2.flowing && !N2.ended && N2.length <= N2.highWaterMark, ye2(ae2);
  }
  function B2(ae2, N2) {
    N2.readingMore || (N2.readingMore = true, process$1.nextTick(T2, ae2, N2));
  }
  function T2(ae2, N2) {
    for (; !N2.reading && !N2.ended && (N2.length < N2.highWaterMark || N2.flowing && N2.length === 0); ) {
      var re2 = N2.length;
      if (P2("maybeReadMore read 0"), ae2.read(0), re2 === N2.length)
        break;
    }
    N2.readingMore = false;
  }
  q2.prototype._read = function(ae2) {
    le2(this, new Q2("_read()"));
  }, q2.prototype.pipe = function(ae2, N2) {
    var re2 = this, fe2 = this._readableState;
    switch (fe2.pipesCount) {
      case 0:
        fe2.pipes = ae2;
        break;
      case 1:
        fe2.pipes = [fe2.pipes, ae2];
        break;
      default:
        fe2.pipes.push(ae2);
        break;
    }
    fe2.pipesCount += 1, P2("pipe count=%d opts=%j", fe2.pipesCount, N2);
    var Ne2 = (!N2 || N2.end !== false) && ae2 !== process$1.stdout && ae2 !== process$1.stderr, Oe2 = Ne2 ? je2 : We2;
    fe2.endEmitted ? process$1.nextTick(Oe2) : re2.once("end", Oe2), ae2.on("unpipe", qe2);
    function qe2(Re2, J2) {
      P2("onunpipe"), Re2 === re2 && J2 && J2.hasUnpiped === false && (J2.hasUnpiped = true, Xe2());
    }
    function je2() {
      P2("onend"), ae2.end();
    }
    var Fe2 = D2(re2);
    ae2.on("drain", Fe2);
    var yt = false;
    function Xe2() {
      P2("cleanup"), ae2.removeListener("close", ge2), ae2.removeListener("finish", we2), ae2.removeListener("drain", Fe2), ae2.removeListener("error", V2), ae2.removeListener("unpipe", qe2), re2.removeListener("end", je2), re2.removeListener("end", We2), re2.removeListener("data", Ge2), yt = true, fe2.awaitDrain && (!ae2._writableState || ae2._writableState.needDrain) && Fe2();
    }
    re2.on("data", Ge2);
    function Ge2(Re2) {
      P2("ondata");
      var J2 = ae2.write(Re2);
      P2("dest.write", J2), J2 === false && ((fe2.pipesCount === 1 && fe2.pipes === ae2 || fe2.pipesCount > 1 && xe2(fe2.pipes, ae2) !== -1) && !yt && (P2("false write response, pause", fe2.awaitDrain), fe2.awaitDrain++), re2.pause());
    }
    function V2(Re2) {
      P2("onerror", Re2), We2(), ae2.removeListener("error", V2), u2(ae2, "error") === 0 && le2(ae2, Re2);
    }
    ke2(ae2, "error", V2);
    function ge2() {
      ae2.removeListener("finish", we2), We2();
    }
    ae2.once("close", ge2);
    function we2() {
      P2("onfinish"), ae2.removeListener("close", ge2), We2();
    }
    ae2.once("finish", we2);
    function We2() {
      P2("unpipe"), re2.unpipe(ae2);
    }
    return ae2.emit("pipe", re2), fe2.flowing || (P2("pipe resume"), re2.resume()), ae2;
  };
  function D2(ae2) {
    return function() {
      var re2 = ae2._readableState;
      P2("pipeOnDrain", re2.awaitDrain), re2.awaitDrain && re2.awaitDrain--, re2.awaitDrain === 0 && u2(ae2, "data") && (re2.flowing = true, ye2(ae2));
    };
  }
  q2.prototype.unpipe = function(ae2) {
    var N2 = this._readableState, re2 = { hasUnpiped: false };
    if (N2.pipesCount === 0)
      return this;
    if (N2.pipesCount === 1)
      return ae2 && ae2 !== N2.pipes ? this : (ae2 || (ae2 = N2.pipes), N2.pipes = null, N2.pipesCount = 0, N2.flowing = false, ae2 && ae2.emit("unpipe", this, re2), this);
    if (!ae2) {
      var fe2 = N2.pipes, Ne2 = N2.pipesCount;
      N2.pipes = null, N2.pipesCount = 0, N2.flowing = false;
      for (var Oe2 = 0; Oe2 < Ne2; Oe2++)
        fe2[Oe2].emit("unpipe", this, { hasUnpiped: false });
      return this;
    }
    var qe2 = xe2(N2.pipes, ae2);
    return qe2 === -1 ? this : (N2.pipes.splice(qe2, 1), N2.pipesCount -= 1, N2.pipesCount === 1 && (N2.pipes = N2.pipes[0]), ae2.emit("unpipe", this, re2), this);
  }, q2.prototype.on = function(ae2, N2) {
    var re2 = c.prototype.on.call(this, ae2, N2), fe2 = this._readableState;
    return ae2 === "data" ? (fe2.readableListening = this.listenerCount("readable") > 0, fe2.flowing !== false && this.resume()) : ae2 === "readable" && !fe2.endEmitted && !fe2.readableListening && (fe2.readableListening = fe2.needReadable = true, fe2.flowing = false, fe2.emittedReadable = false, P2("on readable", fe2.length, fe2.reading), fe2.length ? x2(this) : fe2.reading || process$1.nextTick(me2, this)), re2;
  }, q2.prototype.addListener = q2.prototype.on, q2.prototype.removeListener = function(ae2, N2) {
    var re2 = c.prototype.removeListener.call(this, ae2, N2);
    return ae2 === "readable" && process$1.nextTick(te2, this), re2;
  }, q2.prototype.removeAllListeners = function(ae2) {
    var N2 = c.prototype.removeAllListeners.apply(this, arguments);
    return (ae2 === "readable" || ae2 === void 0) && process$1.nextTick(te2, this), N2;
  };
  function te2(ae2) {
    var N2 = ae2._readableState;
    N2.readableListening = ae2.listenerCount("readable") > 0, N2.resumeScheduled && !N2.paused ? N2.flowing = true : ae2.listenerCount("data") > 0 && ae2.resume();
  }
  function me2(ae2) {
    P2("readable nexttick read 0"), ae2.read(0);
  }
  q2.prototype.resume = function() {
    var ae2 = this._readableState;
    return ae2.flowing || (P2("resume"), ae2.flowing = !ae2.readableListening, Ie2(this, ae2)), ae2.paused = false, this;
  };
  function Ie2(ae2, N2) {
    N2.resumeScheduled || (N2.resumeScheduled = true, process$1.nextTick($e2, ae2, N2));
  }
  function $e2(ae2, N2) {
    P2("resume", N2.reading), N2.reading || ae2.read(0), N2.resumeScheduled = false, ae2.emit("resume"), ye2(ae2), N2.flowing && !N2.reading && ae2.read(0);
  }
  q2.prototype.pause = function() {
    return P2("call pause flowing=%j", this._readableState.flowing), this._readableState.flowing !== false && (P2("pause"), this._readableState.flowing = false, this.emit("pause")), this._readableState.paused = true, this;
  };
  function ye2(ae2) {
    var N2 = ae2._readableState;
    for (P2("flow", N2.flowing); N2.flowing && ae2.read() !== null; )
      ;
  }
  q2.prototype.wrap = function(ae2) {
    var N2 = this, re2 = this._readableState, fe2 = false;
    ae2.on("end", function() {
      if (P2("wrapped end"), re2.decoder && !re2.ended) {
        var qe2 = re2.decoder.end();
        qe2 && qe2.length && N2.push(qe2);
      }
      N2.push(null);
    }), ae2.on("data", function(qe2) {
      if (P2("wrapped data"), re2.decoder && (qe2 = re2.decoder.write(qe2)), !(re2.objectMode && qe2 == null) && !(!re2.objectMode && (!qe2 || !qe2.length))) {
        var je2 = N2.push(qe2);
        je2 || (fe2 = true, ae2.pause());
      }
    });
    for (var Ne2 in ae2)
      this[Ne2] === void 0 && typeof ae2[Ne2] == "function" && (this[Ne2] = /* @__PURE__ */ function(je2) {
        return function() {
          return ae2[je2].apply(ae2, arguments);
        };
      }(Ne2));
    for (var Oe2 = 0; Oe2 < be2.length; Oe2++)
      ae2.on(be2[Oe2], this.emit.bind(this, be2[Oe2]));
    return this._read = function(qe2) {
      P2("wrapped _read", qe2), fe2 && (fe2 = false, ae2.resume());
    }, this;
  }, typeof Symbol == "function" && (q2.prototype[Symbol.asyncIterator] = function() {
    return de2 === void 0 && (de2 = requireAsync_iterator()), de2(this);
  }), Object.defineProperty(q2.prototype, "readableHighWaterMark", {
    // making it explicit this property is not enumerable
    // because otherwise some prototype manipulation in
    // userland will fail
    enumerable: false,
    get: function() {
      return this._readableState.highWaterMark;
    }
  }), Object.defineProperty(q2.prototype, "readableBuffer", {
    // making it explicit this property is not enumerable
    // because otherwise some prototype manipulation in
    // userland will fail
    enumerable: false,
    get: function() {
      return this._readableState && this._readableState.buffer;
    }
  }), Object.defineProperty(q2.prototype, "readableFlowing", {
    // making it explicit this property is not enumerable
    // because otherwise some prototype manipulation in
    // userland will fail
    enumerable: false,
    get: function() {
      return this._readableState.flowing;
    },
    set: function(N2) {
      this._readableState && (this._readableState.flowing = N2);
    }
  }), q2._fromList = he2, Object.defineProperty(q2.prototype, "readableLength", {
    // making it explicit this property is not enumerable
    // because otherwise some prototype manipulation in
    // userland will fail
    enumerable: false,
    get: function() {
      return this._readableState.length;
    }
  });
  function he2(ae2, N2) {
    if (N2.length === 0)
      return null;
    var re2;
    return N2.objectMode ? re2 = N2.buffer.shift() : !ae2 || ae2 >= N2.length ? (N2.decoder ? re2 = N2.buffer.join("") : N2.buffer.length === 1 ? re2 = N2.buffer.first() : re2 = N2.buffer.concat(N2.length), N2.buffer.clear()) : re2 = N2.buffer.consume(ae2, N2.decoder), re2;
  }
  function Me2(ae2) {
    var N2 = ae2._readableState;
    P2("endReadable", N2.endEmitted), N2.endEmitted || (N2.ended = true, process$1.nextTick(Ae2, N2, ae2));
  }
  function Ae2(ae2, N2) {
    if (P2("endReadableNT", ae2.endEmitted, ae2.length), !ae2.endEmitted && ae2.length === 0 && (ae2.endEmitted = true, N2.readable = false, N2.emit("end"), ae2.autoDestroy)) {
      var re2 = N2._writableState;
      (!re2 || re2.autoDestroy && re2.finished) && N2.destroy();
    }
  }
  typeof Symbol == "function" && (q2.from = function(ae2, N2) {
    return pe2 === void 0 && (pe2 = requireFromBrowser()), pe2(q2, ae2, N2);
  });
  function xe2(ae2, N2) {
    for (var re2 = 0, fe2 = ae2.length; re2 < fe2; re2++)
      if (ae2[re2] === N2)
        return re2;
    return -1;
  }
  return _stream_readable;
}
var _stream_transform = Transform$1, _require$codes$1 = errorsBrowser.codes, ERR_METHOD_NOT_IMPLEMENTED = _require$codes$1.ERR_METHOD_NOT_IMPLEMENTED, ERR_MULTIPLE_CALLBACK = _require$codes$1.ERR_MULTIPLE_CALLBACK, ERR_TRANSFORM_ALREADY_TRANSFORMING = _require$codes$1.ERR_TRANSFORM_ALREADY_TRANSFORMING, ERR_TRANSFORM_WITH_LENGTH_0 = _require$codes$1.ERR_TRANSFORM_WITH_LENGTH_0, Duplex = require_stream_duplex();
inherits_browserExports(Transform$1, Duplex);
function afterTransform(a420, u2) {
  var c = this._transformState;
  c.transforming = false;
  var l2 = c.writecb;
  if (l2 === null)
    return this.emit("error", new ERR_MULTIPLE_CALLBACK());
  c.writechunk = null, c.writecb = null, u2 != null && this.push(u2), l2(a420);
  var v2 = this._readableState;
  v2.reading = false, (v2.needReadable || v2.length < v2.highWaterMark) && this._read(v2.highWaterMark);
}
function Transform$1(a420) {
  if (!(this instanceof Transform$1))
    return new Transform$1(a420);
  Duplex.call(this, a420), this._transformState = { afterTransform: afterTransform.bind(this), needTransform: false, transforming: false, writecb: null, writechunk: null, writeencoding: null }, this._readableState.needReadable = true, this._readableState.sync = false, a420 && (typeof a420.transform == "function" && (this._transform = a420.transform), typeof a420.flush == "function" && (this._flush = a420.flush)), this.on("prefinish", prefinish);
}
function prefinish() {
  var a420 = this;
  typeof this._flush == "function" && !this._readableState.destroyed ? this._flush(function(u2, c) {
    done(a420, u2, c);
  }) : done(this, null, null);
}
Transform$1.prototype.push = function(a420, u2) {
  return this._transformState.needTransform = false, Duplex.prototype.push.call(this, a420, u2);
};
Transform$1.prototype._transform = function(a420, u2, c) {
  c(new ERR_METHOD_NOT_IMPLEMENTED("_transform()"));
};
Transform$1.prototype._write = function(a420, u2, c) {
  var l2 = this._transformState;
  if (l2.writecb = c, l2.writechunk = a420, l2.writeencoding = u2, !l2.transforming) {
    var v2 = this._readableState;
    (l2.needTransform || v2.needReadable || v2.length < v2.highWaterMark) && this._read(v2.highWaterMark);
  }
};
Transform$1.prototype._read = function(a420) {
  var u2 = this._transformState;
  u2.writechunk !== null && !u2.transforming ? (u2.transforming = true, this._transform(u2.writechunk, u2.writeencoding, u2.afterTransform)) : u2.needTransform = true;
};
Transform$1.prototype._destroy = function(a420, u2) {
  Duplex.prototype._destroy.call(this, a420, function(c) {
    u2(c);
  });
};
function done(a420, u2, c) {
  if (u2)
    return a420.emit("error", u2);
  if (c != null && a420.push(c), a420._writableState.length)
    throw new ERR_TRANSFORM_WITH_LENGTH_0();
  if (a420._transformState.transforming)
    throw new ERR_TRANSFORM_ALREADY_TRANSFORMING();
  return a420.push(null);
}
var _stream_passthrough = PassThrough, Transform = _stream_transform;
inherits_browserExports(PassThrough, Transform);
function PassThrough(a420) {
  if (!(this instanceof PassThrough))
    return new PassThrough(a420);
  Transform.call(this, a420);
}
PassThrough.prototype._transform = function(a420, u2, c) {
  c(null, a420);
};
var eos;
function once$3(a420) {
  var u2 = false;
  return function() {
    u2 || (u2 = true, a420.apply(void 0, arguments));
  };
}
var _require$codes = errorsBrowser.codes, ERR_MISSING_ARGS = _require$codes.ERR_MISSING_ARGS, ERR_STREAM_DESTROYED = _require$codes.ERR_STREAM_DESTROYED;
function noop$1(a420) {
  if (a420)
    throw a420;
}
function isRequest(a420) {
  return a420.setHeader && typeof a420.abort == "function";
}
function destroyer(a420, u2, c, l2) {
  l2 = once$3(l2);
  var v2 = false;
  a420.on("close", function() {
    v2 = true;
  }), eos === void 0 && (eos = endOfStream), eos(a420, { readable: u2, writable: c }, function(_) {
    if (_)
      return l2(_);
    v2 = true, l2();
  });
  var p2 = false;
  return function(_) {
    if (!v2 && !p2) {
      if (p2 = true, isRequest(a420))
        return a420.abort();
      if (typeof a420.destroy == "function")
        return a420.destroy();
      l2(_ || new ERR_STREAM_DESTROYED("pipe"));
    }
  };
}
function call(a420) {
  a420();
}
function pipe(a420, u2) {
  return a420.pipe(u2);
}
function popCallback(a420) {
  return !a420.length || typeof a420[a420.length - 1] != "function" ? noop$1 : a420.pop();
}
function pipeline() {
  for (var a420 = arguments.length, u2 = new Array(a420), c = 0; c < a420; c++)
    u2[c] = arguments[c];
  var l2 = popCallback(u2);
  if (Array.isArray(u2[0]) && (u2 = u2[0]), u2.length < 2)
    throw new ERR_MISSING_ARGS("streams");
  var v2, p2 = u2.map(function(_, I2) {
    var P2 = I2 < u2.length - 1, $ = I2 > 0;
    return destroyer(_, P2, $, function(F2) {
      v2 || (v2 = F2), F2 && p2.forEach(call), !P2 && (p2.forEach(call), l2(v2));
    });
  });
  return u2.reduce(pipe);
}
var pipeline_1 = pipeline;
(function(a420, u2) {
  u2 = a420.exports = require_stream_readable(), u2.Stream = u2, u2.Readable = u2, u2.Writable = require_stream_writable(), u2.Duplex = require_stream_duplex(), u2.Transform = _stream_transform, u2.PassThrough = _stream_passthrough, u2.finished = endOfStream, u2.pipeline = pipeline_1;
})(readableBrowser, readableBrowser.exports);
var readableBrowserExports = readableBrowser.exports, sign$1 = { exports: {} }, bn$4 = { exports: {} };
(function(a420) {
  (function(u2, c) {
    function l2(E2, k) {
      if (!E2)
        throw new Error(k || "Assertion failed");
    }
    function v2(E2, k) {
      E2.super_ = k;
      var O2 = function() {
      };
      O2.prototype = k.prototype, E2.prototype = new O2(), E2.prototype.constructor = E2;
    }
    function p2(E2, k, O2) {
      if (p2.isBN(E2))
        return E2;
      this.negative = 0, this.words = null, this.length = 0, this.red = null, E2 !== null && ((k === "le" || k === "be") && (O2 = k, k = 10), this._init(E2 || 0, k || 10, O2 || "be"));
    }
    typeof u2 == "object" ? u2.exports = p2 : c.BN = p2, p2.BN = p2, p2.wordSize = 26;
    var _;
    try {
      typeof window < "u" && typeof window.Buffer < "u" ? _ = window.Buffer : _ = require$$0$2.Buffer;
    } catch {
    }
    p2.isBN = function(k) {
      return k instanceof p2 ? true : k !== null && typeof k == "object" && k.constructor.wordSize === p2.wordSize && Array.isArray(k.words);
    }, p2.max = function(k, O2) {
      return k.cmp(O2) > 0 ? k : O2;
    }, p2.min = function(k, O2) {
      return k.cmp(O2) < 0 ? k : O2;
    }, p2.prototype._init = function(k, O2, A2) {
      if (typeof k == "number")
        return this._initNumber(k, O2, A2);
      if (typeof k == "object")
        return this._initArray(k, O2, A2);
      O2 === "hex" && (O2 = 16), l2(O2 === (O2 | 0) && O2 >= 2 && O2 <= 36), k = k.toString().replace(/\s+/g, "");
      var x2 = 0;
      k[0] === "-" && (x2++, this.negative = 1), x2 < k.length && (O2 === 16 ? this._parseHex(k, x2, A2) : (this._parseBase(k, O2, x2), A2 === "le" && this._initArray(this.toArray(), O2, A2)));
    }, p2.prototype._initNumber = function(k, O2, A2) {
      k < 0 && (this.negative = 1, k = -k), k < 67108864 ? (this.words = [k & 67108863], this.length = 1) : k < 4503599627370496 ? (this.words = [k & 67108863, k / 67108864 & 67108863], this.length = 2) : (l2(k < 9007199254740992), this.words = [k & 67108863, k / 67108864 & 67108863, 1], this.length = 3), A2 === "le" && this._initArray(this.toArray(), O2, A2);
    }, p2.prototype._initArray = function(k, O2, A2) {
      if (l2(typeof k.length == "number"), k.length <= 0)
        return this.words = [0], this.length = 1, this;
      this.length = Math.ceil(k.length / 3), this.words = new Array(this.length);
      for (var x2 = 0; x2 < this.length; x2++)
        this.words[x2] = 0;
      var Y2, B2, T2 = 0;
      if (A2 === "be")
        for (x2 = k.length - 1, Y2 = 0; x2 >= 0; x2 -= 3)
          B2 = k[x2] | k[x2 - 1] << 8 | k[x2 - 2] << 16, this.words[Y2] |= B2 << T2 & 67108863, this.words[Y2 + 1] = B2 >>> 26 - T2 & 67108863, T2 += 24, T2 >= 26 && (T2 -= 26, Y2++);
      else if (A2 === "le")
        for (x2 = 0, Y2 = 0; x2 < k.length; x2 += 3)
          B2 = k[x2] | k[x2 + 1] << 8 | k[x2 + 2] << 16, this.words[Y2] |= B2 << T2 & 67108863, this.words[Y2 + 1] = B2 >>> 26 - T2 & 67108863, T2 += 24, T2 >= 26 && (T2 -= 26, Y2++);
      return this._strip();
    };
    function I2(E2, k) {
      var O2 = E2.charCodeAt(k);
      if (O2 >= 48 && O2 <= 57)
        return O2 - 48;
      if (O2 >= 65 && O2 <= 70)
        return O2 - 55;
      if (O2 >= 97 && O2 <= 102)
        return O2 - 87;
      l2(false, "Invalid character in " + E2);
    }
    function P2(E2, k, O2) {
      var A2 = I2(E2, O2);
      return O2 - 1 >= k && (A2 |= I2(E2, O2 - 1) << 4), A2;
    }
    p2.prototype._parseHex = function(k, O2, A2) {
      this.length = Math.ceil((k.length - O2) / 6), this.words = new Array(this.length);
      for (var x2 = 0; x2 < this.length; x2++)
        this.words[x2] = 0;
      var Y2 = 0, B2 = 0, T2;
      if (A2 === "be")
        for (x2 = k.length - 1; x2 >= O2; x2 -= 2)
          T2 = P2(k, O2, x2) << Y2, this.words[B2] |= T2 & 67108863, Y2 >= 18 ? (Y2 -= 18, B2 += 1, this.words[B2] |= T2 >>> 26) : Y2 += 8;
      else {
        var D2 = k.length - O2;
        for (x2 = D2 % 2 === 0 ? O2 + 1 : O2; x2 < k.length; x2 += 2)
          T2 = P2(k, O2, x2) << Y2, this.words[B2] |= T2 & 67108863, Y2 >= 18 ? (Y2 -= 18, B2 += 1, this.words[B2] |= T2 >>> 26) : Y2 += 8;
      }
      this._strip();
    };
    function $(E2, k, O2, A2) {
      for (var x2 = 0, Y2 = 0, B2 = Math.min(E2.length, O2), T2 = k; T2 < B2; T2++) {
        var D2 = E2.charCodeAt(T2) - 48;
        x2 *= A2, D2 >= 49 ? Y2 = D2 - 49 + 10 : D2 >= 17 ? Y2 = D2 - 17 + 10 : Y2 = D2, l2(D2 >= 0 && Y2 < A2, "Invalid character"), x2 += Y2;
      }
      return x2;
    }
    p2.prototype._parseBase = function(k, O2, A2) {
      this.words = [0], this.length = 1;
      for (var x2 = 0, Y2 = 1; Y2 <= 67108863; Y2 *= O2)
        x2++;
      x2--, Y2 = Y2 / O2 | 0;
      for (var B2 = k.length - A2, T2 = B2 % x2, D2 = Math.min(B2, B2 - T2) + A2, te2 = 0, me2 = A2; me2 < D2; me2 += x2)
        te2 = $(k, me2, me2 + x2, O2), this.imuln(Y2), this.words[0] + te2 < 67108864 ? this.words[0] += te2 : this._iaddn(te2);
      if (T2 !== 0) {
        var Ie2 = 1;
        for (te2 = $(k, me2, k.length, O2), me2 = 0; me2 < T2; me2++)
          Ie2 *= O2;
        this.imuln(Ie2), this.words[0] + te2 < 67108864 ? this.words[0] += te2 : this._iaddn(te2);
      }
      this._strip();
    }, p2.prototype.copy = function(k) {
      k.words = new Array(this.length);
      for (var O2 = 0; O2 < this.length; O2++)
        k.words[O2] = this.words[O2];
      k.length = this.length, k.negative = this.negative, k.red = this.red;
    };
    function F2(E2, k) {
      E2.words = k.words, E2.length = k.length, E2.negative = k.negative, E2.red = k.red;
    }
    if (p2.prototype._move = function(k) {
      F2(k, this);
    }, p2.prototype.clone = function() {
      var k = new p2(null);
      return this.copy(k), k;
    }, p2.prototype._expand = function(k) {
      for (; this.length < k; )
        this.words[this.length++] = 0;
      return this;
    }, p2.prototype._strip = function() {
      for (; this.length > 1 && this.words[this.length - 1] === 0; )
        this.length--;
      return this._normSign();
    }, p2.prototype._normSign = function() {
      return this.length === 1 && this.words[0] === 0 && (this.negative = 0), this;
    }, typeof Symbol < "u" && typeof Symbol.for == "function")
      try {
        p2.prototype[Symbol.for("nodejs.util.inspect.custom")] = H2;
      } catch {
        p2.prototype.inspect = H2;
      }
    else
      p2.prototype.inspect = H2;
    function H2() {
      return (this.red ? "<BN-R: " : "<BN: ") + this.toString(16) + ">";
    }
    var j = ["", "0", "00", "000", "0000", "00000", "000000", "0000000", "00000000", "000000000", "0000000000", "00000000000", "000000000000", "0000000000000", "00000000000000", "000000000000000", "0000000000000000", "00000000000000000", "000000000000000000", "0000000000000000000", "00000000000000000000", "000000000000000000000", "0000000000000000000000", "00000000000000000000000", "000000000000000000000000", "0000000000000000000000000"], ee2 = [0, 0, 25, 16, 12, 11, 10, 9, 8, 8, 7, 7, 7, 7, 6, 6, 6, 6, 6, 6, 6, 5, 5, 5, 5, 5, 5, 5, 5, 5, 5, 5, 5, 5, 5, 5, 5], X2 = [0, 0, 33554432, 43046721, 16777216, 48828125, 60466176, 40353607, 16777216, 43046721, 1e7, 19487171, 35831808, 62748517, 7529536, 11390625, 16777216, 24137569, 34012224, 47045881, 64e6, 4084101, 5153632, 6436343, 7962624, 9765625, 11881376, 14348907, 17210368, 20511149, 243e5, 28629151, 33554432, 39135393, 45435424, 52521875, 60466176];
    p2.prototype.toString = function(k, O2) {
      k = k || 10, O2 = O2 | 0 || 1;
      var A2;
      if (k === 16 || k === "hex") {
        A2 = "";
        for (var x2 = 0, Y2 = 0, B2 = 0; B2 < this.length; B2++) {
          var T2 = this.words[B2], D2 = ((T2 << x2 | Y2) & 16777215).toString(16);
          Y2 = T2 >>> 24 - x2 & 16777215, x2 += 2, x2 >= 26 && (x2 -= 26, B2--), Y2 !== 0 || B2 !== this.length - 1 ? A2 = j[6 - D2.length] + D2 + A2 : A2 = D2 + A2;
        }
        for (Y2 !== 0 && (A2 = Y2.toString(16) + A2); A2.length % O2 !== 0; )
          A2 = "0" + A2;
        return this.negative !== 0 && (A2 = "-" + A2), A2;
      }
      if (k === (k | 0) && k >= 2 && k <= 36) {
        var te2 = ee2[k], me2 = X2[k];
        A2 = "";
        var Ie2 = this.clone();
        for (Ie2.negative = 0; !Ie2.isZero(); ) {
          var $e2 = Ie2.modrn(me2).toString(k);
          Ie2 = Ie2.idivn(me2), Ie2.isZero() ? A2 = $e2 + A2 : A2 = j[te2 - $e2.length] + $e2 + A2;
        }
        for (this.isZero() && (A2 = "0" + A2); A2.length % O2 !== 0; )
          A2 = "0" + A2;
        return this.negative !== 0 && (A2 = "-" + A2), A2;
      }
      l2(false, "Base should be between 2 and 36");
    }, p2.prototype.toNumber = function() {
      var k = this.words[0];
      return this.length === 2 ? k += this.words[1] * 67108864 : this.length === 3 && this.words[2] === 1 ? k += 4503599627370496 + this.words[1] * 67108864 : this.length > 2 && l2(false, "Number can only safely store up to 53 bits"), this.negative !== 0 ? -k : k;
    }, p2.prototype.toJSON = function() {
      return this.toString(16, 2);
    }, _ && (p2.prototype.toBuffer = function(k, O2) {
      return this.toArrayLike(_, k, O2);
    }), p2.prototype.toArray = function(k, O2) {
      return this.toArrayLike(Array, k, O2);
    };
    var ie2 = function(k, O2) {
      return k.allocUnsafe ? k.allocUnsafe(O2) : new k(O2);
    };
    p2.prototype.toArrayLike = function(k, O2, A2) {
      this._strip();
      var x2 = this.byteLength(), Y2 = A2 || Math.max(1, x2);
      l2(x2 <= Y2, "byte array longer than desired length"), l2(Y2 > 0, "Requested array length <= 0");
      var B2 = ie2(k, Y2), T2 = O2 === "le" ? "LE" : "BE";
      return this["_toArrayLike" + T2](B2, x2), B2;
    }, p2.prototype._toArrayLikeLE = function(k, O2) {
      for (var A2 = 0, x2 = 0, Y2 = 0, B2 = 0; Y2 < this.length; Y2++) {
        var T2 = this.words[Y2] << B2 | x2;
        k[A2++] = T2 & 255, A2 < k.length && (k[A2++] = T2 >> 8 & 255), A2 < k.length && (k[A2++] = T2 >> 16 & 255), B2 === 6 ? (A2 < k.length && (k[A2++] = T2 >> 24 & 255), x2 = 0, B2 = 0) : (x2 = T2 >>> 24, B2 += 2);
      }
      if (A2 < k.length)
        for (k[A2++] = x2; A2 < k.length; )
          k[A2++] = 0;
    }, p2.prototype._toArrayLikeBE = function(k, O2) {
      for (var A2 = k.length - 1, x2 = 0, Y2 = 0, B2 = 0; Y2 < this.length; Y2++) {
        var T2 = this.words[Y2] << B2 | x2;
        k[A2--] = T2 & 255, A2 >= 0 && (k[A2--] = T2 >> 8 & 255), A2 >= 0 && (k[A2--] = T2 >> 16 & 255), B2 === 6 ? (A2 >= 0 && (k[A2--] = T2 >> 24 & 255), x2 = 0, B2 = 0) : (x2 = T2 >>> 24, B2 += 2);
      }
      if (A2 >= 0)
        for (k[A2--] = x2; A2 >= 0; )
          k[A2--] = 0;
    }, Math.clz32 ? p2.prototype._countBits = function(k) {
      return 32 - Math.clz32(k);
    } : p2.prototype._countBits = function(k) {
      var O2 = k, A2 = 0;
      return O2 >= 4096 && (A2 += 13, O2 >>>= 13), O2 >= 64 && (A2 += 7, O2 >>>= 7), O2 >= 8 && (A2 += 4, O2 >>>= 4), O2 >= 2 && (A2 += 2, O2 >>>= 2), A2 + O2;
    }, p2.prototype._zeroBits = function(k) {
      if (k === 0)
        return 26;
      var O2 = k, A2 = 0;
      return O2 & 8191 || (A2 += 13, O2 >>>= 13), O2 & 127 || (A2 += 7, O2 >>>= 7), O2 & 15 || (A2 += 4, O2 >>>= 4), O2 & 3 || (A2 += 2, O2 >>>= 2), O2 & 1 || A2++, A2;
    }, p2.prototype.bitLength = function() {
      var k = this.words[this.length - 1], O2 = this._countBits(k);
      return (this.length - 1) * 26 + O2;
    };
    function Q2(E2) {
      for (var k = new Array(E2.bitLength()), O2 = 0; O2 < k.length; O2++) {
        var A2 = O2 / 26 | 0, x2 = O2 % 26;
        k[O2] = E2.words[A2] >>> x2 & 1;
      }
      return k;
    }
    p2.prototype.zeroBits = function() {
      if (this.isZero())
        return 0;
      for (var k = 0, O2 = 0; O2 < this.length; O2++) {
        var A2 = this._zeroBits(this.words[O2]);
        if (k += A2, A2 !== 26)
          break;
      }
      return k;
    }, p2.prototype.byteLength = function() {
      return Math.ceil(this.bitLength() / 8);
    }, p2.prototype.toTwos = function(k) {
      return this.negative !== 0 ? this.abs().inotn(k).iaddn(1) : this.clone();
    }, p2.prototype.fromTwos = function(k) {
      return this.testn(k - 1) ? this.notn(k).iaddn(1).ineg() : this.clone();
    }, p2.prototype.isNeg = function() {
      return this.negative !== 0;
    }, p2.prototype.neg = function() {
      return this.clone().ineg();
    }, p2.prototype.ineg = function() {
      return this.isZero() || (this.negative ^= 1), this;
    }, p2.prototype.iuor = function(k) {
      for (; this.length < k.length; )
        this.words[this.length++] = 0;
      for (var O2 = 0; O2 < k.length; O2++)
        this.words[O2] = this.words[O2] | k.words[O2];
      return this._strip();
    }, p2.prototype.ior = function(k) {
      return l2((this.negative | k.negative) === 0), this.iuor(k);
    }, p2.prototype.or = function(k) {
      return this.length > k.length ? this.clone().ior(k) : k.clone().ior(this);
    }, p2.prototype.uor = function(k) {
      return this.length > k.length ? this.clone().iuor(k) : k.clone().iuor(this);
    }, p2.prototype.iuand = function(k) {
      var O2;
      this.length > k.length ? O2 = k : O2 = this;
      for (var A2 = 0; A2 < O2.length; A2++)
        this.words[A2] = this.words[A2] & k.words[A2];
      return this.length = O2.length, this._strip();
    }, p2.prototype.iand = function(k) {
      return l2((this.negative | k.negative) === 0), this.iuand(k);
    }, p2.prototype.and = function(k) {
      return this.length > k.length ? this.clone().iand(k) : k.clone().iand(this);
    }, p2.prototype.uand = function(k) {
      return this.length > k.length ? this.clone().iuand(k) : k.clone().iuand(this);
    }, p2.prototype.iuxor = function(k) {
      var O2, A2;
      this.length > k.length ? (O2 = this, A2 = k) : (O2 = k, A2 = this);
      for (var x2 = 0; x2 < A2.length; x2++)
        this.words[x2] = O2.words[x2] ^ A2.words[x2];
      if (this !== O2)
        for (; x2 < O2.length; x2++)
          this.words[x2] = O2.words[x2];
      return this.length = O2.length, this._strip();
    }, p2.prototype.ixor = function(k) {
      return l2((this.negative | k.negative) === 0), this.iuxor(k);
    }, p2.prototype.xor = function(k) {
      return this.length > k.length ? this.clone().ixor(k) : k.clone().ixor(this);
    }, p2.prototype.uxor = function(k) {
      return this.length > k.length ? this.clone().iuxor(k) : k.clone().iuxor(this);
    }, p2.prototype.inotn = function(k) {
      l2(typeof k == "number" && k >= 0);
      var O2 = Math.ceil(k / 26) | 0, A2 = k % 26;
      this._expand(O2), A2 > 0 && O2--;
      for (var x2 = 0; x2 < O2; x2++)
        this.words[x2] = ~this.words[x2] & 67108863;
      return A2 > 0 && (this.words[x2] = ~this.words[x2] & 67108863 >> 26 - A2), this._strip();
    }, p2.prototype.notn = function(k) {
      return this.clone().inotn(k);
    }, p2.prototype.setn = function(k, O2) {
      l2(typeof k == "number" && k >= 0);
      var A2 = k / 26 | 0, x2 = k % 26;
      return this._expand(A2 + 1), O2 ? this.words[A2] = this.words[A2] | 1 << x2 : this.words[A2] = this.words[A2] & ~(1 << x2), this._strip();
    }, p2.prototype.iadd = function(k) {
      var O2;
      if (this.negative !== 0 && k.negative === 0)
        return this.negative = 0, O2 = this.isub(k), this.negative ^= 1, this._normSign();
      if (this.negative === 0 && k.negative !== 0)
        return k.negative = 0, O2 = this.isub(k), k.negative = 1, O2._normSign();
      var A2, x2;
      this.length > k.length ? (A2 = this, x2 = k) : (A2 = k, x2 = this);
      for (var Y2 = 0, B2 = 0; B2 < x2.length; B2++)
        O2 = (A2.words[B2] | 0) + (x2.words[B2] | 0) + Y2, this.words[B2] = O2 & 67108863, Y2 = O2 >>> 26;
      for (; Y2 !== 0 && B2 < A2.length; B2++)
        O2 = (A2.words[B2] | 0) + Y2, this.words[B2] = O2 & 67108863, Y2 = O2 >>> 26;
      if (this.length = A2.length, Y2 !== 0)
        this.words[this.length] = Y2, this.length++;
      else if (A2 !== this)
        for (; B2 < A2.length; B2++)
          this.words[B2] = A2.words[B2];
      return this;
    }, p2.prototype.add = function(k) {
      var O2;
      return k.negative !== 0 && this.negative === 0 ? (k.negative = 0, O2 = this.sub(k), k.negative ^= 1, O2) : k.negative === 0 && this.negative !== 0 ? (this.negative = 0, O2 = k.sub(this), this.negative = 1, O2) : this.length > k.length ? this.clone().iadd(k) : k.clone().iadd(this);
    }, p2.prototype.isub = function(k) {
      if (k.negative !== 0) {
        k.negative = 0;
        var O2 = this.iadd(k);
        return k.negative = 1, O2._normSign();
      } else if (this.negative !== 0)
        return this.negative = 0, this.iadd(k), this.negative = 1, this._normSign();
      var A2 = this.cmp(k);
      if (A2 === 0)
        return this.negative = 0, this.length = 1, this.words[0] = 0, this;
      var x2, Y2;
      A2 > 0 ? (x2 = this, Y2 = k) : (x2 = k, Y2 = this);
      for (var B2 = 0, T2 = 0; T2 < Y2.length; T2++)
        O2 = (x2.words[T2] | 0) - (Y2.words[T2] | 0) + B2, B2 = O2 >> 26, this.words[T2] = O2 & 67108863;
      for (; B2 !== 0 && T2 < x2.length; T2++)
        O2 = (x2.words[T2] | 0) + B2, B2 = O2 >> 26, this.words[T2] = O2 & 67108863;
      if (B2 === 0 && T2 < x2.length && x2 !== this)
        for (; T2 < x2.length; T2++)
          this.words[T2] = x2.words[T2];
      return this.length = Math.max(this.length, T2), x2 !== this && (this.negative = 1), this._strip();
    }, p2.prototype.sub = function(k) {
      return this.clone().isub(k);
    };
    function ne2(E2, k, O2) {
      O2.negative = k.negative ^ E2.negative;
      var A2 = E2.length + k.length | 0;
      O2.length = A2, A2 = A2 - 1 | 0;
      var x2 = E2.words[0] | 0, Y2 = k.words[0] | 0, B2 = x2 * Y2, T2 = B2 & 67108863, D2 = B2 / 67108864 | 0;
      O2.words[0] = T2;
      for (var te2 = 1; te2 < A2; te2++) {
        for (var me2 = D2 >>> 26, Ie2 = D2 & 67108863, $e2 = Math.min(te2, k.length - 1), ye2 = Math.max(0, te2 - E2.length + 1); ye2 <= $e2; ye2++) {
          var he2 = te2 - ye2 | 0;
          x2 = E2.words[he2] | 0, Y2 = k.words[ye2] | 0, B2 = x2 * Y2 + Ie2, me2 += B2 / 67108864 | 0, Ie2 = B2 & 67108863;
        }
        O2.words[te2] = Ie2 | 0, D2 = me2 | 0;
      }
      return D2 !== 0 ? O2.words[te2] = D2 | 0 : O2.length--, O2._strip();
    }
    var Z2 = function(k, O2, A2) {
      var x2 = k.words, Y2 = O2.words, B2 = A2.words, T2 = 0, D2, te2, me2, Ie2 = x2[0] | 0, $e2 = Ie2 & 8191, ye2 = Ie2 >>> 13, he2 = x2[1] | 0, Me2 = he2 & 8191, Ae2 = he2 >>> 13, xe2 = x2[2] | 0, ae2 = xe2 & 8191, N2 = xe2 >>> 13, re2 = x2[3] | 0, fe2 = re2 & 8191, Ne2 = re2 >>> 13, Oe2 = x2[4] | 0, qe2 = Oe2 & 8191, je2 = Oe2 >>> 13, Fe2 = x2[5] | 0, yt = Fe2 & 8191, Xe2 = Fe2 >>> 13, Ge2 = x2[6] | 0, V2 = Ge2 & 8191, ge2 = Ge2 >>> 13, we2 = x2[7] | 0, We2 = we2 & 8191, Re2 = we2 >>> 13, J2 = x2[8] | 0, _e = J2 & 8191, ue2 = J2 >>> 13, ce2 = x2[9] | 0, ve2 = ce2 & 8191, Ce2 = ce2 >>> 13, Be2 = Y2[0] | 0, He2 = Be2 & 8191, Ve2 = Be2 >>> 13, Ze2 = Y2[1] | 0, Ke2 = Ze2 & 8191, U2 = Ze2 >>> 13, se2 = Y2[2] | 0, Se2 = se2 & 8191, Ue2 = se2 >>> 13, De2 = Y2[3] | 0, Ye2 = De2 & 8191, Qe2 = De2 >>> 13, st = Y2[4] | 0, St = st & 8191, tt = st >>> 13, it = Y2[5] | 0, Tt = it & 8191, rt = it >>> 13, dt = Y2[6] | 0, wt = dt & 8191, nt = dt >>> 13, at = Y2[7] | 0, gt = at & 8191, ot = at >>> 13, ct = Y2[8] | 0, Ct = ct & 8191, ut = ct >>> 13, lt = Y2[9] | 0, kt = lt & 8191, Rt = lt >>> 13;
      A2.negative = k.negative ^ O2.negative, A2.length = 19, D2 = Math.imul($e2, He2), te2 = Math.imul($e2, Ve2), te2 = te2 + Math.imul(ye2, He2) | 0, me2 = Math.imul(ye2, Ve2);
      var Je2 = (T2 + D2 | 0) + ((te2 & 8191) << 13) | 0;
      T2 = (me2 + (te2 >>> 13) | 0) + (Je2 >>> 26) | 0, Je2 &= 67108863, D2 = Math.imul(Me2, He2), te2 = Math.imul(Me2, Ve2), te2 = te2 + Math.imul(Ae2, He2) | 0, me2 = Math.imul(Ae2, Ve2), D2 = D2 + Math.imul($e2, Ke2) | 0, te2 = te2 + Math.imul($e2, U2) | 0, te2 = te2 + Math.imul(ye2, Ke2) | 0, me2 = me2 + Math.imul(ye2, U2) | 0;
      var ze2 = (T2 + D2 | 0) + ((te2 & 8191) << 13) | 0;
      T2 = (me2 + (te2 >>> 13) | 0) + (ze2 >>> 26) | 0, ze2 &= 67108863, D2 = Math.imul(ae2, He2), te2 = Math.imul(ae2, Ve2), te2 = te2 + Math.imul(N2, He2) | 0, me2 = Math.imul(N2, Ve2), D2 = D2 + Math.imul(Me2, Ke2) | 0, te2 = te2 + Math.imul(Me2, U2) | 0, te2 = te2 + Math.imul(Ae2, Ke2) | 0, me2 = me2 + Math.imul(Ae2, U2) | 0, D2 = D2 + Math.imul($e2, Se2) | 0, te2 = te2 + Math.imul($e2, Ue2) | 0, te2 = te2 + Math.imul(ye2, Se2) | 0, me2 = me2 + Math.imul(ye2, Ue2) | 0;
      var et = (T2 + D2 | 0) + ((te2 & 8191) << 13) | 0;
      T2 = (me2 + (te2 >>> 13) | 0) + (et >>> 26) | 0, et &= 67108863, D2 = Math.imul(fe2, He2), te2 = Math.imul(fe2, Ve2), te2 = te2 + Math.imul(Ne2, He2) | 0, me2 = Math.imul(Ne2, Ve2), D2 = D2 + Math.imul(ae2, Ke2) | 0, te2 = te2 + Math.imul(ae2, U2) | 0, te2 = te2 + Math.imul(N2, Ke2) | 0, me2 = me2 + Math.imul(N2, U2) | 0, D2 = D2 + Math.imul(Me2, Se2) | 0, te2 = te2 + Math.imul(Me2, Ue2) | 0, te2 = te2 + Math.imul(Ae2, Se2) | 0, me2 = me2 + Math.imul(Ae2, Ue2) | 0, D2 = D2 + Math.imul($e2, Ye2) | 0, te2 = te2 + Math.imul($e2, Qe2) | 0, te2 = te2 + Math.imul(ye2, Ye2) | 0, me2 = me2 + Math.imul(ye2, Qe2) | 0;
      var pt = (T2 + D2 | 0) + ((te2 & 8191) << 13) | 0;
      T2 = (me2 + (te2 >>> 13) | 0) + (pt >>> 26) | 0, pt &= 67108863, D2 = Math.imul(qe2, He2), te2 = Math.imul(qe2, Ve2), te2 = te2 + Math.imul(je2, He2) | 0, me2 = Math.imul(je2, Ve2), D2 = D2 + Math.imul(fe2, Ke2) | 0, te2 = te2 + Math.imul(fe2, U2) | 0, te2 = te2 + Math.imul(Ne2, Ke2) | 0, me2 = me2 + Math.imul(Ne2, U2) | 0, D2 = D2 + Math.imul(ae2, Se2) | 0, te2 = te2 + Math.imul(ae2, Ue2) | 0, te2 = te2 + Math.imul(N2, Se2) | 0, me2 = me2 + Math.imul(N2, Ue2) | 0, D2 = D2 + Math.imul(Me2, Ye2) | 0, te2 = te2 + Math.imul(Me2, Qe2) | 0, te2 = te2 + Math.imul(Ae2, Ye2) | 0, me2 = me2 + Math.imul(Ae2, Qe2) | 0, D2 = D2 + Math.imul($e2, St) | 0, te2 = te2 + Math.imul($e2, tt) | 0, te2 = te2 + Math.imul(ye2, St) | 0, me2 = me2 + Math.imul(ye2, tt) | 0;
      var mt = (T2 + D2 | 0) + ((te2 & 8191) << 13) | 0;
      T2 = (me2 + (te2 >>> 13) | 0) + (mt >>> 26) | 0, mt &= 67108863, D2 = Math.imul(yt, He2), te2 = Math.imul(yt, Ve2), te2 = te2 + Math.imul(Xe2, He2) | 0, me2 = Math.imul(Xe2, Ve2), D2 = D2 + Math.imul(qe2, Ke2) | 0, te2 = te2 + Math.imul(qe2, U2) | 0, te2 = te2 + Math.imul(je2, Ke2) | 0, me2 = me2 + Math.imul(je2, U2) | 0, D2 = D2 + Math.imul(fe2, Se2) | 0, te2 = te2 + Math.imul(fe2, Ue2) | 0, te2 = te2 + Math.imul(Ne2, Se2) | 0, me2 = me2 + Math.imul(Ne2, Ue2) | 0, D2 = D2 + Math.imul(ae2, Ye2) | 0, te2 = te2 + Math.imul(ae2, Qe2) | 0, te2 = te2 + Math.imul(N2, Ye2) | 0, me2 = me2 + Math.imul(N2, Qe2) | 0, D2 = D2 + Math.imul(Me2, St) | 0, te2 = te2 + Math.imul(Me2, tt) | 0, te2 = te2 + Math.imul(Ae2, St) | 0, me2 = me2 + Math.imul(Ae2, tt) | 0, D2 = D2 + Math.imul($e2, Tt) | 0, te2 = te2 + Math.imul($e2, rt) | 0, te2 = te2 + Math.imul(ye2, Tt) | 0, me2 = me2 + Math.imul(ye2, rt) | 0;
      var vt = (T2 + D2 | 0) + ((te2 & 8191) << 13) | 0;
      T2 = (me2 + (te2 >>> 13) | 0) + (vt >>> 26) | 0, vt &= 67108863, D2 = Math.imul(V2, He2), te2 = Math.imul(V2, Ve2), te2 = te2 + Math.imul(ge2, He2) | 0, me2 = Math.imul(ge2, Ve2), D2 = D2 + Math.imul(yt, Ke2) | 0, te2 = te2 + Math.imul(yt, U2) | 0, te2 = te2 + Math.imul(Xe2, Ke2) | 0, me2 = me2 + Math.imul(Xe2, U2) | 0, D2 = D2 + Math.imul(qe2, Se2) | 0, te2 = te2 + Math.imul(qe2, Ue2) | 0, te2 = te2 + Math.imul(je2, Se2) | 0, me2 = me2 + Math.imul(je2, Ue2) | 0, D2 = D2 + Math.imul(fe2, Ye2) | 0, te2 = te2 + Math.imul(fe2, Qe2) | 0, te2 = te2 + Math.imul(Ne2, Ye2) | 0, me2 = me2 + Math.imul(Ne2, Qe2) | 0, D2 = D2 + Math.imul(ae2, St) | 0, te2 = te2 + Math.imul(ae2, tt) | 0, te2 = te2 + Math.imul(N2, St) | 0, me2 = me2 + Math.imul(N2, tt) | 0, D2 = D2 + Math.imul(Me2, Tt) | 0, te2 = te2 + Math.imul(Me2, rt) | 0, te2 = te2 + Math.imul(Ae2, Tt) | 0, me2 = me2 + Math.imul(Ae2, rt) | 0, D2 = D2 + Math.imul($e2, wt) | 0, te2 = te2 + Math.imul($e2, nt) | 0, te2 = te2 + Math.imul(ye2, wt) | 0, me2 = me2 + Math.imul(ye2, nt) | 0;
      var ht = (T2 + D2 | 0) + ((te2 & 8191) << 13) | 0;
      T2 = (me2 + (te2 >>> 13) | 0) + (ht >>> 26) | 0, ht &= 67108863, D2 = Math.imul(We2, He2), te2 = Math.imul(We2, Ve2), te2 = te2 + Math.imul(Re2, He2) | 0, me2 = Math.imul(Re2, Ve2), D2 = D2 + Math.imul(V2, Ke2) | 0, te2 = te2 + Math.imul(V2, U2) | 0, te2 = te2 + Math.imul(ge2, Ke2) | 0, me2 = me2 + Math.imul(ge2, U2) | 0, D2 = D2 + Math.imul(yt, Se2) | 0, te2 = te2 + Math.imul(yt, Ue2) | 0, te2 = te2 + Math.imul(Xe2, Se2) | 0, me2 = me2 + Math.imul(Xe2, Ue2) | 0, D2 = D2 + Math.imul(qe2, Ye2) | 0, te2 = te2 + Math.imul(qe2, Qe2) | 0, te2 = te2 + Math.imul(je2, Ye2) | 0, me2 = me2 + Math.imul(je2, Qe2) | 0, D2 = D2 + Math.imul(fe2, St) | 0, te2 = te2 + Math.imul(fe2, tt) | 0, te2 = te2 + Math.imul(Ne2, St) | 0, me2 = me2 + Math.imul(Ne2, tt) | 0, D2 = D2 + Math.imul(ae2, Tt) | 0, te2 = te2 + Math.imul(ae2, rt) | 0, te2 = te2 + Math.imul(N2, Tt) | 0, me2 = me2 + Math.imul(N2, rt) | 0, D2 = D2 + Math.imul(Me2, wt) | 0, te2 = te2 + Math.imul(Me2, nt) | 0, te2 = te2 + Math.imul(Ae2, wt) | 0, me2 = me2 + Math.imul(Ae2, nt) | 0, D2 = D2 + Math.imul($e2, gt) | 0, te2 = te2 + Math.imul($e2, ot) | 0, te2 = te2 + Math.imul(ye2, gt) | 0, me2 = me2 + Math.imul(ye2, ot) | 0;
      var _t = (T2 + D2 | 0) + ((te2 & 8191) << 13) | 0;
      T2 = (me2 + (te2 >>> 13) | 0) + (_t >>> 26) | 0, _t &= 67108863, D2 = Math.imul(_e, He2), te2 = Math.imul(_e, Ve2), te2 = te2 + Math.imul(ue2, He2) | 0, me2 = Math.imul(ue2, Ve2), D2 = D2 + Math.imul(We2, Ke2) | 0, te2 = te2 + Math.imul(We2, U2) | 0, te2 = te2 + Math.imul(Re2, Ke2) | 0, me2 = me2 + Math.imul(Re2, U2) | 0, D2 = D2 + Math.imul(V2, Se2) | 0, te2 = te2 + Math.imul(V2, Ue2) | 0, te2 = te2 + Math.imul(ge2, Se2) | 0, me2 = me2 + Math.imul(ge2, Ue2) | 0, D2 = D2 + Math.imul(yt, Ye2) | 0, te2 = te2 + Math.imul(yt, Qe2) | 0, te2 = te2 + Math.imul(Xe2, Ye2) | 0, me2 = me2 + Math.imul(Xe2, Qe2) | 0, D2 = D2 + Math.imul(qe2, St) | 0, te2 = te2 + Math.imul(qe2, tt) | 0, te2 = te2 + Math.imul(je2, St) | 0, me2 = me2 + Math.imul(je2, tt) | 0, D2 = D2 + Math.imul(fe2, Tt) | 0, te2 = te2 + Math.imul(fe2, rt) | 0, te2 = te2 + Math.imul(Ne2, Tt) | 0, me2 = me2 + Math.imul(Ne2, rt) | 0, D2 = D2 + Math.imul(ae2, wt) | 0, te2 = te2 + Math.imul(ae2, nt) | 0, te2 = te2 + Math.imul(N2, wt) | 0, me2 = me2 + Math.imul(N2, nt) | 0, D2 = D2 + Math.imul(Me2, gt) | 0, te2 = te2 + Math.imul(Me2, ot) | 0, te2 = te2 + Math.imul(Ae2, gt) | 0, me2 = me2 + Math.imul(Ae2, ot) | 0, D2 = D2 + Math.imul($e2, Ct) | 0, te2 = te2 + Math.imul($e2, ut) | 0, te2 = te2 + Math.imul(ye2, Ct) | 0, me2 = me2 + Math.imul(ye2, ut) | 0;
      var Et = (T2 + D2 | 0) + ((te2 & 8191) << 13) | 0;
      T2 = (me2 + (te2 >>> 13) | 0) + (Et >>> 26) | 0, Et &= 67108863, D2 = Math.imul(ve2, He2), te2 = Math.imul(ve2, Ve2), te2 = te2 + Math.imul(Ce2, He2) | 0, me2 = Math.imul(Ce2, Ve2), D2 = D2 + Math.imul(_e, Ke2) | 0, te2 = te2 + Math.imul(_e, U2) | 0, te2 = te2 + Math.imul(ue2, Ke2) | 0, me2 = me2 + Math.imul(ue2, U2) | 0, D2 = D2 + Math.imul(We2, Se2) | 0, te2 = te2 + Math.imul(We2, Ue2) | 0, te2 = te2 + Math.imul(Re2, Se2) | 0, me2 = me2 + Math.imul(Re2, Ue2) | 0, D2 = D2 + Math.imul(V2, Ye2) | 0, te2 = te2 + Math.imul(V2, Qe2) | 0, te2 = te2 + Math.imul(ge2, Ye2) | 0, me2 = me2 + Math.imul(ge2, Qe2) | 0, D2 = D2 + Math.imul(yt, St) | 0, te2 = te2 + Math.imul(yt, tt) | 0, te2 = te2 + Math.imul(Xe2, St) | 0, me2 = me2 + Math.imul(Xe2, tt) | 0, D2 = D2 + Math.imul(qe2, Tt) | 0, te2 = te2 + Math.imul(qe2, rt) | 0, te2 = te2 + Math.imul(je2, Tt) | 0, me2 = me2 + Math.imul(je2, rt) | 0, D2 = D2 + Math.imul(fe2, wt) | 0, te2 = te2 + Math.imul(fe2, nt) | 0, te2 = te2 + Math.imul(Ne2, wt) | 0, me2 = me2 + Math.imul(Ne2, nt) | 0, D2 = D2 + Math.imul(ae2, gt) | 0, te2 = te2 + Math.imul(ae2, ot) | 0, te2 = te2 + Math.imul(N2, gt) | 0, me2 = me2 + Math.imul(N2, ot) | 0, D2 = D2 + Math.imul(Me2, Ct) | 0, te2 = te2 + Math.imul(Me2, ut) | 0, te2 = te2 + Math.imul(Ae2, Ct) | 0, me2 = me2 + Math.imul(Ae2, ut) | 0, D2 = D2 + Math.imul($e2, kt) | 0, te2 = te2 + Math.imul($e2, Rt) | 0, te2 = te2 + Math.imul(ye2, kt) | 0, me2 = me2 + Math.imul(ye2, Rt) | 0;
      var Pt = (T2 + D2 | 0) + ((te2 & 8191) << 13) | 0;
      T2 = (me2 + (te2 >>> 13) | 0) + (Pt >>> 26) | 0, Pt &= 67108863, D2 = Math.imul(ve2, Ke2), te2 = Math.imul(ve2, U2), te2 = te2 + Math.imul(Ce2, Ke2) | 0, me2 = Math.imul(Ce2, U2), D2 = D2 + Math.imul(_e, Se2) | 0, te2 = te2 + Math.imul(_e, Ue2) | 0, te2 = te2 + Math.imul(ue2, Se2) | 0, me2 = me2 + Math.imul(ue2, Ue2) | 0, D2 = D2 + Math.imul(We2, Ye2) | 0, te2 = te2 + Math.imul(We2, Qe2) | 0, te2 = te2 + Math.imul(Re2, Ye2) | 0, me2 = me2 + Math.imul(Re2, Qe2) | 0, D2 = D2 + Math.imul(V2, St) | 0, te2 = te2 + Math.imul(V2, tt) | 0, te2 = te2 + Math.imul(ge2, St) | 0, me2 = me2 + Math.imul(ge2, tt) | 0, D2 = D2 + Math.imul(yt, Tt) | 0, te2 = te2 + Math.imul(yt, rt) | 0, te2 = te2 + Math.imul(Xe2, Tt) | 0, me2 = me2 + Math.imul(Xe2, rt) | 0, D2 = D2 + Math.imul(qe2, wt) | 0, te2 = te2 + Math.imul(qe2, nt) | 0, te2 = te2 + Math.imul(je2, wt) | 0, me2 = me2 + Math.imul(je2, nt) | 0, D2 = D2 + Math.imul(fe2, gt) | 0, te2 = te2 + Math.imul(fe2, ot) | 0, te2 = te2 + Math.imul(Ne2, gt) | 0, me2 = me2 + Math.imul(Ne2, ot) | 0, D2 = D2 + Math.imul(ae2, Ct) | 0, te2 = te2 + Math.imul(ae2, ut) | 0, te2 = te2 + Math.imul(N2, Ct) | 0, me2 = me2 + Math.imul(N2, ut) | 0, D2 = D2 + Math.imul(Me2, kt) | 0, te2 = te2 + Math.imul(Me2, Rt) | 0, te2 = te2 + Math.imul(Ae2, kt) | 0, me2 = me2 + Math.imul(Ae2, Rt) | 0;
      var Nt = (T2 + D2 | 0) + ((te2 & 8191) << 13) | 0;
      T2 = (me2 + (te2 >>> 13) | 0) + (Nt >>> 26) | 0, Nt &= 67108863, D2 = Math.imul(ve2, Se2), te2 = Math.imul(ve2, Ue2), te2 = te2 + Math.imul(Ce2, Se2) | 0, me2 = Math.imul(Ce2, Ue2), D2 = D2 + Math.imul(_e, Ye2) | 0, te2 = te2 + Math.imul(_e, Qe2) | 0, te2 = te2 + Math.imul(ue2, Ye2) | 0, me2 = me2 + Math.imul(ue2, Qe2) | 0, D2 = D2 + Math.imul(We2, St) | 0, te2 = te2 + Math.imul(We2, tt) | 0, te2 = te2 + Math.imul(Re2, St) | 0, me2 = me2 + Math.imul(Re2, tt) | 0, D2 = D2 + Math.imul(V2, Tt) | 0, te2 = te2 + Math.imul(V2, rt) | 0, te2 = te2 + Math.imul(ge2, Tt) | 0, me2 = me2 + Math.imul(ge2, rt) | 0, D2 = D2 + Math.imul(yt, wt) | 0, te2 = te2 + Math.imul(yt, nt) | 0, te2 = te2 + Math.imul(Xe2, wt) | 0, me2 = me2 + Math.imul(Xe2, nt) | 0, D2 = D2 + Math.imul(qe2, gt) | 0, te2 = te2 + Math.imul(qe2, ot) | 0, te2 = te2 + Math.imul(je2, gt) | 0, me2 = me2 + Math.imul(je2, ot) | 0, D2 = D2 + Math.imul(fe2, Ct) | 0, te2 = te2 + Math.imul(fe2, ut) | 0, te2 = te2 + Math.imul(Ne2, Ct) | 0, me2 = me2 + Math.imul(Ne2, ut) | 0, D2 = D2 + Math.imul(ae2, kt) | 0, te2 = te2 + Math.imul(ae2, Rt) | 0, te2 = te2 + Math.imul(N2, kt) | 0, me2 = me2 + Math.imul(N2, Rt) | 0;
      var Mt = (T2 + D2 | 0) + ((te2 & 8191) << 13) | 0;
      T2 = (me2 + (te2 >>> 13) | 0) + (Mt >>> 26) | 0, Mt &= 67108863, D2 = Math.imul(ve2, Ye2), te2 = Math.imul(ve2, Qe2), te2 = te2 + Math.imul(Ce2, Ye2) | 0, me2 = Math.imul(Ce2, Qe2), D2 = D2 + Math.imul(_e, St) | 0, te2 = te2 + Math.imul(_e, tt) | 0, te2 = te2 + Math.imul(ue2, St) | 0, me2 = me2 + Math.imul(ue2, tt) | 0, D2 = D2 + Math.imul(We2, Tt) | 0, te2 = te2 + Math.imul(We2, rt) | 0, te2 = te2 + Math.imul(Re2, Tt) | 0, me2 = me2 + Math.imul(Re2, rt) | 0, D2 = D2 + Math.imul(V2, wt) | 0, te2 = te2 + Math.imul(V2, nt) | 0, te2 = te2 + Math.imul(ge2, wt) | 0, me2 = me2 + Math.imul(ge2, nt) | 0, D2 = D2 + Math.imul(yt, gt) | 0, te2 = te2 + Math.imul(yt, ot) | 0, te2 = te2 + Math.imul(Xe2, gt) | 0, me2 = me2 + Math.imul(Xe2, ot) | 0, D2 = D2 + Math.imul(qe2, Ct) | 0, te2 = te2 + Math.imul(qe2, ut) | 0, te2 = te2 + Math.imul(je2, Ct) | 0, me2 = me2 + Math.imul(je2, ut) | 0, D2 = D2 + Math.imul(fe2, kt) | 0, te2 = te2 + Math.imul(fe2, Rt) | 0, te2 = te2 + Math.imul(Ne2, kt) | 0, me2 = me2 + Math.imul(Ne2, Rt) | 0;
      var Ot = (T2 + D2 | 0) + ((te2 & 8191) << 13) | 0;
      T2 = (me2 + (te2 >>> 13) | 0) + (Ot >>> 26) | 0, Ot &= 67108863, D2 = Math.imul(ve2, St), te2 = Math.imul(ve2, tt), te2 = te2 + Math.imul(Ce2, St) | 0, me2 = Math.imul(Ce2, tt), D2 = D2 + Math.imul(_e, Tt) | 0, te2 = te2 + Math.imul(_e, rt) | 0, te2 = te2 + Math.imul(ue2, Tt) | 0, me2 = me2 + Math.imul(ue2, rt) | 0, D2 = D2 + Math.imul(We2, wt) | 0, te2 = te2 + Math.imul(We2, nt) | 0, te2 = te2 + Math.imul(Re2, wt) | 0, me2 = me2 + Math.imul(Re2, nt) | 0, D2 = D2 + Math.imul(V2, gt) | 0, te2 = te2 + Math.imul(V2, ot) | 0, te2 = te2 + Math.imul(ge2, gt) | 0, me2 = me2 + Math.imul(ge2, ot) | 0, D2 = D2 + Math.imul(yt, Ct) | 0, te2 = te2 + Math.imul(yt, ut) | 0, te2 = te2 + Math.imul(Xe2, Ct) | 0, me2 = me2 + Math.imul(Xe2, ut) | 0, D2 = D2 + Math.imul(qe2, kt) | 0, te2 = te2 + Math.imul(qe2, Rt) | 0, te2 = te2 + Math.imul(je2, kt) | 0, me2 = me2 + Math.imul(je2, Rt) | 0;
      var $t = (T2 + D2 | 0) + ((te2 & 8191) << 13) | 0;
      T2 = (me2 + (te2 >>> 13) | 0) + ($t >>> 26) | 0, $t &= 67108863, D2 = Math.imul(ve2, Tt), te2 = Math.imul(ve2, rt), te2 = te2 + Math.imul(Ce2, Tt) | 0, me2 = Math.imul(Ce2, rt), D2 = D2 + Math.imul(_e, wt) | 0, te2 = te2 + Math.imul(_e, nt) | 0, te2 = te2 + Math.imul(ue2, wt) | 0, me2 = me2 + Math.imul(ue2, nt) | 0, D2 = D2 + Math.imul(We2, gt) | 0, te2 = te2 + Math.imul(We2, ot) | 0, te2 = te2 + Math.imul(Re2, gt) | 0, me2 = me2 + Math.imul(Re2, ot) | 0, D2 = D2 + Math.imul(V2, Ct) | 0, te2 = te2 + Math.imul(V2, ut) | 0, te2 = te2 + Math.imul(ge2, Ct) | 0, me2 = me2 + Math.imul(ge2, ut) | 0, D2 = D2 + Math.imul(yt, kt) | 0, te2 = te2 + Math.imul(yt, Rt) | 0, te2 = te2 + Math.imul(Xe2, kt) | 0, me2 = me2 + Math.imul(Xe2, Rt) | 0;
      var Bt = (T2 + D2 | 0) + ((te2 & 8191) << 13) | 0;
      T2 = (me2 + (te2 >>> 13) | 0) + (Bt >>> 26) | 0, Bt &= 67108863, D2 = Math.imul(ve2, wt), te2 = Math.imul(ve2, nt), te2 = te2 + Math.imul(Ce2, wt) | 0, me2 = Math.imul(Ce2, nt), D2 = D2 + Math.imul(_e, gt) | 0, te2 = te2 + Math.imul(_e, ot) | 0, te2 = te2 + Math.imul(ue2, gt) | 0, me2 = me2 + Math.imul(ue2, ot) | 0, D2 = D2 + Math.imul(We2, Ct) | 0, te2 = te2 + Math.imul(We2, ut) | 0, te2 = te2 + Math.imul(Re2, Ct) | 0, me2 = me2 + Math.imul(Re2, ut) | 0, D2 = D2 + Math.imul(V2, kt) | 0, te2 = te2 + Math.imul(V2, Rt) | 0, te2 = te2 + Math.imul(ge2, kt) | 0, me2 = me2 + Math.imul(ge2, Rt) | 0;
      var xt = (T2 + D2 | 0) + ((te2 & 8191) << 13) | 0;
      T2 = (me2 + (te2 >>> 13) | 0) + (xt >>> 26) | 0, xt &= 67108863, D2 = Math.imul(ve2, gt), te2 = Math.imul(ve2, ot), te2 = te2 + Math.imul(Ce2, gt) | 0, me2 = Math.imul(Ce2, ot), D2 = D2 + Math.imul(_e, Ct) | 0, te2 = te2 + Math.imul(_e, ut) | 0, te2 = te2 + Math.imul(ue2, Ct) | 0, me2 = me2 + Math.imul(ue2, ut) | 0, D2 = D2 + Math.imul(We2, kt) | 0, te2 = te2 + Math.imul(We2, Rt) | 0, te2 = te2 + Math.imul(Re2, kt) | 0, me2 = me2 + Math.imul(Re2, Rt) | 0;
      var Ut = (T2 + D2 | 0) + ((te2 & 8191) << 13) | 0;
      T2 = (me2 + (te2 >>> 13) | 0) + (Ut >>> 26) | 0, Ut &= 67108863, D2 = Math.imul(ve2, Ct), te2 = Math.imul(ve2, ut), te2 = te2 + Math.imul(Ce2, Ct) | 0, me2 = Math.imul(Ce2, ut), D2 = D2 + Math.imul(_e, kt) | 0, te2 = te2 + Math.imul(_e, Rt) | 0, te2 = te2 + Math.imul(ue2, kt) | 0, me2 = me2 + Math.imul(ue2, Rt) | 0;
      var Jt = (T2 + D2 | 0) + ((te2 & 8191) << 13) | 0;
      T2 = (me2 + (te2 >>> 13) | 0) + (Jt >>> 26) | 0, Jt &= 67108863, D2 = Math.imul(ve2, kt), te2 = Math.imul(ve2, Rt), te2 = te2 + Math.imul(Ce2, kt) | 0, me2 = Math.imul(Ce2, Rt);
      var Vt = (T2 + D2 | 0) + ((te2 & 8191) << 13) | 0;
      return T2 = (me2 + (te2 >>> 13) | 0) + (Vt >>> 26) | 0, Vt &= 67108863, B2[0] = Je2, B2[1] = ze2, B2[2] = et, B2[3] = pt, B2[4] = mt, B2[5] = vt, B2[6] = ht, B2[7] = _t, B2[8] = Et, B2[9] = Pt, B2[10] = Nt, B2[11] = Mt, B2[12] = Ot, B2[13] = $t, B2[14] = Bt, B2[15] = xt, B2[16] = Ut, B2[17] = Jt, B2[18] = Vt, T2 !== 0 && (B2[19] = T2, A2.length++), A2;
    };
    Math.imul || (Z2 = ne2);
    function de2(E2, k, O2) {
      O2.negative = k.negative ^ E2.negative, O2.length = E2.length + k.length;
      for (var A2 = 0, x2 = 0, Y2 = 0; Y2 < O2.length - 1; Y2++) {
        var B2 = x2;
        x2 = 0;
        for (var T2 = A2 & 67108863, D2 = Math.min(Y2, k.length - 1), te2 = Math.max(0, Y2 - E2.length + 1); te2 <= D2; te2++) {
          var me2 = Y2 - te2, Ie2 = E2.words[me2] | 0, $e2 = k.words[te2] | 0, ye2 = Ie2 * $e2, he2 = ye2 & 67108863;
          B2 = B2 + (ye2 / 67108864 | 0) | 0, he2 = he2 + T2 | 0, T2 = he2 & 67108863, B2 = B2 + (he2 >>> 26) | 0, x2 += B2 >>> 26, B2 &= 67108863;
        }
        O2.words[Y2] = T2, A2 = B2, B2 = x2;
      }
      return A2 !== 0 ? O2.words[Y2] = A2 : O2.length--, O2._strip();
    }
    function pe2(E2, k, O2) {
      return de2(E2, k, O2);
    }
    p2.prototype.mulTo = function(k, O2) {
      var A2, x2 = this.length + k.length;
      return this.length === 10 && k.length === 10 ? A2 = Z2(this, k, O2) : x2 < 63 ? A2 = ne2(this, k, O2) : x2 < 1024 ? A2 = de2(this, k, O2) : A2 = pe2(this, k, O2), A2;
    }, p2.prototype.mul = function(k) {
      var O2 = new p2(null);
      return O2.words = new Array(this.length + k.length), this.mulTo(k, O2);
    }, p2.prototype.mulf = function(k) {
      var O2 = new p2(null);
      return O2.words = new Array(this.length + k.length), pe2(this, k, O2);
    }, p2.prototype.imul = function(k) {
      return this.clone().mulTo(k, this);
    }, p2.prototype.imuln = function(k) {
      var O2 = k < 0;
      O2 && (k = -k), l2(typeof k == "number"), l2(k < 67108864);
      for (var A2 = 0, x2 = 0; x2 < this.length; x2++) {
        var Y2 = (this.words[x2] | 0) * k, B2 = (Y2 & 67108863) + (A2 & 67108863);
        A2 >>= 26, A2 += Y2 / 67108864 | 0, A2 += B2 >>> 26, this.words[x2] = B2 & 67108863;
      }
      return A2 !== 0 && (this.words[x2] = A2, this.length++), O2 ? this.ineg() : this;
    }, p2.prototype.muln = function(k) {
      return this.clone().imuln(k);
    }, p2.prototype.sqr = function() {
      return this.mul(this);
    }, p2.prototype.isqr = function() {
      return this.imul(this.clone());
    }, p2.prototype.pow = function(k) {
      var O2 = Q2(k);
      if (O2.length === 0)
        return new p2(1);
      for (var A2 = this, x2 = 0; x2 < O2.length && O2[x2] === 0; x2++, A2 = A2.sqr())
        ;
      if (++x2 < O2.length)
        for (var Y2 = A2.sqr(); x2 < O2.length; x2++, Y2 = Y2.sqr())
          O2[x2] !== 0 && (A2 = A2.mul(Y2));
      return A2;
    }, p2.prototype.iushln = function(k) {
      l2(typeof k == "number" && k >= 0);
      var O2 = k % 26, A2 = (k - O2) / 26, x2 = 67108863 >>> 26 - O2 << 26 - O2, Y2;
      if (O2 !== 0) {
        var B2 = 0;
        for (Y2 = 0; Y2 < this.length; Y2++) {
          var T2 = this.words[Y2] & x2, D2 = (this.words[Y2] | 0) - T2 << O2;
          this.words[Y2] = D2 | B2, B2 = T2 >>> 26 - O2;
        }
        B2 && (this.words[Y2] = B2, this.length++);
      }
      if (A2 !== 0) {
        for (Y2 = this.length - 1; Y2 >= 0; Y2--)
          this.words[Y2 + A2] = this.words[Y2];
        for (Y2 = 0; Y2 < A2; Y2++)
          this.words[Y2] = 0;
        this.length += A2;
      }
      return this._strip();
    }, p2.prototype.ishln = function(k) {
      return l2(this.negative === 0), this.iushln(k);
    }, p2.prototype.iushrn = function(k, O2, A2) {
      l2(typeof k == "number" && k >= 0);
      var x2;
      O2 ? x2 = (O2 - O2 % 26) / 26 : x2 = 0;
      var Y2 = k % 26, B2 = Math.min((k - Y2) / 26, this.length), T2 = 67108863 ^ 67108863 >>> Y2 << Y2, D2 = A2;
      if (x2 -= B2, x2 = Math.max(0, x2), D2) {
        for (var te2 = 0; te2 < B2; te2++)
          D2.words[te2] = this.words[te2];
        D2.length = B2;
      }
      if (B2 !== 0)
        if (this.length > B2)
          for (this.length -= B2, te2 = 0; te2 < this.length; te2++)
            this.words[te2] = this.words[te2 + B2];
        else
          this.words[0] = 0, this.length = 1;
      var me2 = 0;
      for (te2 = this.length - 1; te2 >= 0 && (me2 !== 0 || te2 >= x2); te2--) {
        var Ie2 = this.words[te2] | 0;
        this.words[te2] = me2 << 26 - Y2 | Ie2 >>> Y2, me2 = Ie2 & T2;
      }
      return D2 && me2 !== 0 && (D2.words[D2.length++] = me2), this.length === 0 && (this.words[0] = 0, this.length = 1), this._strip();
    }, p2.prototype.ishrn = function(k, O2, A2) {
      return l2(this.negative === 0), this.iushrn(k, O2, A2);
    }, p2.prototype.shln = function(k) {
      return this.clone().ishln(k);
    }, p2.prototype.ushln = function(k) {
      return this.clone().iushln(k);
    }, p2.prototype.shrn = function(k) {
      return this.clone().ishrn(k);
    }, p2.prototype.ushrn = function(k) {
      return this.clone().iushrn(k);
    }, p2.prototype.testn = function(k) {
      l2(typeof k == "number" && k >= 0);
      var O2 = k % 26, A2 = (k - O2) / 26, x2 = 1 << O2;
      if (this.length <= A2)
        return false;
      var Y2 = this.words[A2];
      return !!(Y2 & x2);
    }, p2.prototype.imaskn = function(k) {
      l2(typeof k == "number" && k >= 0);
      var O2 = k % 26, A2 = (k - O2) / 26;
      if (l2(this.negative === 0, "imaskn works only with positive numbers"), this.length <= A2)
        return this;
      if (O2 !== 0 && A2++, this.length = Math.min(A2, this.length), O2 !== 0) {
        var x2 = 67108863 ^ 67108863 >>> O2 << O2;
        this.words[this.length - 1] &= x2;
      }
      return this._strip();
    }, p2.prototype.maskn = function(k) {
      return this.clone().imaskn(k);
    }, p2.prototype.iaddn = function(k) {
      return l2(typeof k == "number"), l2(k < 67108864), k < 0 ? this.isubn(-k) : this.negative !== 0 ? this.length === 1 && (this.words[0] | 0) <= k ? (this.words[0] = k - (this.words[0] | 0), this.negative = 0, this) : (this.negative = 0, this.isubn(k), this.negative = 1, this) : this._iaddn(k);
    }, p2.prototype._iaddn = function(k) {
      this.words[0] += k;
      for (var O2 = 0; O2 < this.length && this.words[O2] >= 67108864; O2++)
        this.words[O2] -= 67108864, O2 === this.length - 1 ? this.words[O2 + 1] = 1 : this.words[O2 + 1]++;
      return this.length = Math.max(this.length, O2 + 1), this;
    }, p2.prototype.isubn = function(k) {
      if (l2(typeof k == "number"), l2(k < 67108864), k < 0)
        return this.iaddn(-k);
      if (this.negative !== 0)
        return this.negative = 0, this.iaddn(k), this.negative = 1, this;
      if (this.words[0] -= k, this.length === 1 && this.words[0] < 0)
        this.words[0] = -this.words[0], this.negative = 1;
      else
        for (var O2 = 0; O2 < this.length && this.words[O2] < 0; O2++)
          this.words[O2] += 67108864, this.words[O2 + 1] -= 1;
      return this._strip();
    }, p2.prototype.addn = function(k) {
      return this.clone().iaddn(k);
    }, p2.prototype.subn = function(k) {
      return this.clone().isubn(k);
    }, p2.prototype.iabs = function() {
      return this.negative = 0, this;
    }, p2.prototype.abs = function() {
      return this.clone().iabs();
    }, p2.prototype._ishlnsubmul = function(k, O2, A2) {
      var x2 = k.length + A2, Y2;
      this._expand(x2);
      var B2, T2 = 0;
      for (Y2 = 0; Y2 < k.length; Y2++) {
        B2 = (this.words[Y2 + A2] | 0) + T2;
        var D2 = (k.words[Y2] | 0) * O2;
        B2 -= D2 & 67108863, T2 = (B2 >> 26) - (D2 / 67108864 | 0), this.words[Y2 + A2] = B2 & 67108863;
      }
      for (; Y2 < this.length - A2; Y2++)
        B2 = (this.words[Y2 + A2] | 0) + T2, T2 = B2 >> 26, this.words[Y2 + A2] = B2 & 67108863;
      if (T2 === 0)
        return this._strip();
      for (l2(T2 === -1), T2 = 0, Y2 = 0; Y2 < this.length; Y2++)
        B2 = -(this.words[Y2] | 0) + T2, T2 = B2 >> 26, this.words[Y2] = B2 & 67108863;
      return this.negative = 1, this._strip();
    }, p2.prototype._wordDiv = function(k, O2) {
      var A2 = this.length - k.length, x2 = this.clone(), Y2 = k, B2 = Y2.words[Y2.length - 1] | 0, T2 = this._countBits(B2);
      A2 = 26 - T2, A2 !== 0 && (Y2 = Y2.ushln(A2), x2.iushln(A2), B2 = Y2.words[Y2.length - 1] | 0);
      var D2 = x2.length - Y2.length, te2;
      if (O2 !== "mod") {
        te2 = new p2(null), te2.length = D2 + 1, te2.words = new Array(te2.length);
        for (var me2 = 0; me2 < te2.length; me2++)
          te2.words[me2] = 0;
      }
      var Ie2 = x2.clone()._ishlnsubmul(Y2, 1, D2);
      Ie2.negative === 0 && (x2 = Ie2, te2 && (te2.words[D2] = 1));
      for (var $e2 = D2 - 1; $e2 >= 0; $e2--) {
        var ye2 = (x2.words[Y2.length + $e2] | 0) * 67108864 + (x2.words[Y2.length + $e2 - 1] | 0);
        for (ye2 = Math.min(ye2 / B2 | 0, 67108863), x2._ishlnsubmul(Y2, ye2, $e2); x2.negative !== 0; )
          ye2--, x2.negative = 0, x2._ishlnsubmul(Y2, 1, $e2), x2.isZero() || (x2.negative ^= 1);
        te2 && (te2.words[$e2] = ye2);
      }
      return te2 && te2._strip(), x2._strip(), O2 !== "div" && A2 !== 0 && x2.iushrn(A2), { div: te2 || null, mod: x2 };
    }, p2.prototype.divmod = function(k, O2, A2) {
      if (l2(!k.isZero()), this.isZero())
        return { div: new p2(0), mod: new p2(0) };
      var x2, Y2, B2;
      return this.negative !== 0 && k.negative === 0 ? (B2 = this.neg().divmod(k, O2), O2 !== "mod" && (x2 = B2.div.neg()), O2 !== "div" && (Y2 = B2.mod.neg(), A2 && Y2.negative !== 0 && Y2.iadd(k)), { div: x2, mod: Y2 }) : this.negative === 0 && k.negative !== 0 ? (B2 = this.divmod(k.neg(), O2), O2 !== "mod" && (x2 = B2.div.neg()), { div: x2, mod: B2.mod }) : this.negative & k.negative ? (B2 = this.neg().divmod(k.neg(), O2), O2 !== "div" && (Y2 = B2.mod.neg(), A2 && Y2.negative !== 0 && Y2.isub(k)), { div: B2.div, mod: Y2 }) : k.length > this.length || this.cmp(k) < 0 ? { div: new p2(0), mod: this } : k.length === 1 ? O2 === "div" ? { div: this.divn(k.words[0]), mod: null } : O2 === "mod" ? { div: null, mod: new p2(this.modrn(k.words[0])) } : { div: this.divn(k.words[0]), mod: new p2(this.modrn(k.words[0])) } : this._wordDiv(k, O2);
    }, p2.prototype.div = function(k) {
      return this.divmod(k, "div", false).div;
    }, p2.prototype.mod = function(k) {
      return this.divmod(k, "mod", false).mod;
    }, p2.prototype.umod = function(k) {
      return this.divmod(k, "mod", true).mod;
    }, p2.prototype.divRound = function(k) {
      var O2 = this.divmod(k);
      if (O2.mod.isZero())
        return O2.div;
      var A2 = O2.div.negative !== 0 ? O2.mod.isub(k) : O2.mod, x2 = k.ushrn(1), Y2 = k.andln(1), B2 = A2.cmp(x2);
      return B2 < 0 || Y2 === 1 && B2 === 0 ? O2.div : O2.div.negative !== 0 ? O2.div.isubn(1) : O2.div.iaddn(1);
    }, p2.prototype.modrn = function(k) {
      var O2 = k < 0;
      O2 && (k = -k), l2(k <= 67108863);
      for (var A2 = (1 << 26) % k, x2 = 0, Y2 = this.length - 1; Y2 >= 0; Y2--)
        x2 = (A2 * x2 + (this.words[Y2] | 0)) % k;
      return O2 ? -x2 : x2;
    }, p2.prototype.modn = function(k) {
      return this.modrn(k);
    }, p2.prototype.idivn = function(k) {
      var O2 = k < 0;
      O2 && (k = -k), l2(k <= 67108863);
      for (var A2 = 0, x2 = this.length - 1; x2 >= 0; x2--) {
        var Y2 = (this.words[x2] | 0) + A2 * 67108864;
        this.words[x2] = Y2 / k | 0, A2 = Y2 % k;
      }
      return this._strip(), O2 ? this.ineg() : this;
    }, p2.prototype.divn = function(k) {
      return this.clone().idivn(k);
    }, p2.prototype.egcd = function(k) {
      l2(k.negative === 0), l2(!k.isZero());
      var O2 = this, A2 = k.clone();
      O2.negative !== 0 ? O2 = O2.umod(k) : O2 = O2.clone();
      for (var x2 = new p2(1), Y2 = new p2(0), B2 = new p2(0), T2 = new p2(1), D2 = 0; O2.isEven() && A2.isEven(); )
        O2.iushrn(1), A2.iushrn(1), ++D2;
      for (var te2 = A2.clone(), me2 = O2.clone(); !O2.isZero(); ) {
        for (var Ie2 = 0, $e2 = 1; !(O2.words[0] & $e2) && Ie2 < 26; ++Ie2, $e2 <<= 1)
          ;
        if (Ie2 > 0)
          for (O2.iushrn(Ie2); Ie2-- > 0; )
            (x2.isOdd() || Y2.isOdd()) && (x2.iadd(te2), Y2.isub(me2)), x2.iushrn(1), Y2.iushrn(1);
        for (var ye2 = 0, he2 = 1; !(A2.words[0] & he2) && ye2 < 26; ++ye2, he2 <<= 1)
          ;
        if (ye2 > 0)
          for (A2.iushrn(ye2); ye2-- > 0; )
            (B2.isOdd() || T2.isOdd()) && (B2.iadd(te2), T2.isub(me2)), B2.iushrn(1), T2.iushrn(1);
        O2.cmp(A2) >= 0 ? (O2.isub(A2), x2.isub(B2), Y2.isub(T2)) : (A2.isub(O2), B2.isub(x2), T2.isub(Y2));
      }
      return { a: B2, b: T2, gcd: A2.iushln(D2) };
    }, p2.prototype._invmp = function(k) {
      l2(k.negative === 0), l2(!k.isZero());
      var O2 = this, A2 = k.clone();
      O2.negative !== 0 ? O2 = O2.umod(k) : O2 = O2.clone();
      for (var x2 = new p2(1), Y2 = new p2(0), B2 = A2.clone(); O2.cmpn(1) > 0 && A2.cmpn(1) > 0; ) {
        for (var T2 = 0, D2 = 1; !(O2.words[0] & D2) && T2 < 26; ++T2, D2 <<= 1)
          ;
        if (T2 > 0)
          for (O2.iushrn(T2); T2-- > 0; )
            x2.isOdd() && x2.iadd(B2), x2.iushrn(1);
        for (var te2 = 0, me2 = 1; !(A2.words[0] & me2) && te2 < 26; ++te2, me2 <<= 1)
          ;
        if (te2 > 0)
          for (A2.iushrn(te2); te2-- > 0; )
            Y2.isOdd() && Y2.iadd(B2), Y2.iushrn(1);
        O2.cmp(A2) >= 0 ? (O2.isub(A2), x2.isub(Y2)) : (A2.isub(O2), Y2.isub(x2));
      }
      var Ie2;
      return O2.cmpn(1) === 0 ? Ie2 = x2 : Ie2 = Y2, Ie2.cmpn(0) < 0 && Ie2.iadd(k), Ie2;
    }, p2.prototype.gcd = function(k) {
      if (this.isZero())
        return k.abs();
      if (k.isZero())
        return this.abs();
      var O2 = this.clone(), A2 = k.clone();
      O2.negative = 0, A2.negative = 0;
      for (var x2 = 0; O2.isEven() && A2.isEven(); x2++)
        O2.iushrn(1), A2.iushrn(1);
      do {
        for (; O2.isEven(); )
          O2.iushrn(1);
        for (; A2.isEven(); )
          A2.iushrn(1);
        var Y2 = O2.cmp(A2);
        if (Y2 < 0) {
          var B2 = O2;
          O2 = A2, A2 = B2;
        } else if (Y2 === 0 || A2.cmpn(1) === 0)
          break;
        O2.isub(A2);
      } while (true);
      return A2.iushln(x2);
    }, p2.prototype.invm = function(k) {
      return this.egcd(k).a.umod(k);
    }, p2.prototype.isEven = function() {
      return (this.words[0] & 1) === 0;
    }, p2.prototype.isOdd = function() {
      return (this.words[0] & 1) === 1;
    }, p2.prototype.andln = function(k) {
      return this.words[0] & k;
    }, p2.prototype.bincn = function(k) {
      l2(typeof k == "number");
      var O2 = k % 26, A2 = (k - O2) / 26, x2 = 1 << O2;
      if (this.length <= A2)
        return this._expand(A2 + 1), this.words[A2] |= x2, this;
      for (var Y2 = x2, B2 = A2; Y2 !== 0 && B2 < this.length; B2++) {
        var T2 = this.words[B2] | 0;
        T2 += Y2, Y2 = T2 >>> 26, T2 &= 67108863, this.words[B2] = T2;
      }
      return Y2 !== 0 && (this.words[B2] = Y2, this.length++), this;
    }, p2.prototype.isZero = function() {
      return this.length === 1 && this.words[0] === 0;
    }, p2.prototype.cmpn = function(k) {
      var O2 = k < 0;
      if (this.negative !== 0 && !O2)
        return -1;
      if (this.negative === 0 && O2)
        return 1;
      this._strip();
      var A2;
      if (this.length > 1)
        A2 = 1;
      else {
        O2 && (k = -k), l2(k <= 67108863, "Number is too big");
        var x2 = this.words[0] | 0;
        A2 = x2 === k ? 0 : x2 < k ? -1 : 1;
      }
      return this.negative !== 0 ? -A2 | 0 : A2;
    }, p2.prototype.cmp = function(k) {
      if (this.negative !== 0 && k.negative === 0)
        return -1;
      if (this.negative === 0 && k.negative !== 0)
        return 1;
      var O2 = this.ucmp(k);
      return this.negative !== 0 ? -O2 | 0 : O2;
    }, p2.prototype.ucmp = function(k) {
      if (this.length > k.length)
        return 1;
      if (this.length < k.length)
        return -1;
      for (var O2 = 0, A2 = this.length - 1; A2 >= 0; A2--) {
        var x2 = this.words[A2] | 0, Y2 = k.words[A2] | 0;
        if (x2 !== Y2) {
          x2 < Y2 ? O2 = -1 : x2 > Y2 && (O2 = 1);
          break;
        }
      }
      return O2;
    }, p2.prototype.gtn = function(k) {
      return this.cmpn(k) === 1;
    }, p2.prototype.gt = function(k) {
      return this.cmp(k) === 1;
    }, p2.prototype.gten = function(k) {
      return this.cmpn(k) >= 0;
    }, p2.prototype.gte = function(k) {
      return this.cmp(k) >= 0;
    }, p2.prototype.ltn = function(k) {
      return this.cmpn(k) === -1;
    }, p2.prototype.lt = function(k) {
      return this.cmp(k) === -1;
    }, p2.prototype.lten = function(k) {
      return this.cmpn(k) <= 0;
    }, p2.prototype.lte = function(k) {
      return this.cmp(k) <= 0;
    }, p2.prototype.eqn = function(k) {
      return this.cmpn(k) === 0;
    }, p2.prototype.eq = function(k) {
      return this.cmp(k) === 0;
    }, p2.red = function(k) {
      return new C2(k);
    }, p2.prototype.toRed = function(k) {
      return l2(!this.red, "Already a number in reduction context"), l2(this.negative === 0, "red works only with positives"), k.convertTo(this)._forceRed(k);
    }, p2.prototype.fromRed = function() {
      return l2(this.red, "fromRed works only with numbers in reduction context"), this.red.convertFrom(this);
    }, p2.prototype._forceRed = function(k) {
      return this.red = k, this;
    }, p2.prototype.forceRed = function(k) {
      return l2(!this.red, "Already a number in reduction context"), this._forceRed(k);
    }, p2.prototype.redAdd = function(k) {
      return l2(this.red, "redAdd works only with red numbers"), this.red.add(this, k);
    }, p2.prototype.redIAdd = function(k) {
      return l2(this.red, "redIAdd works only with red numbers"), this.red.iadd(this, k);
    }, p2.prototype.redSub = function(k) {
      return l2(this.red, "redSub works only with red numbers"), this.red.sub(this, k);
    }, p2.prototype.redISub = function(k) {
      return l2(this.red, "redISub works only with red numbers"), this.red.isub(this, k);
    }, p2.prototype.redShl = function(k) {
      return l2(this.red, "redShl works only with red numbers"), this.red.shl(this, k);
    }, p2.prototype.redMul = function(k) {
      return l2(this.red, "redMul works only with red numbers"), this.red._verify2(this, k), this.red.mul(this, k);
    }, p2.prototype.redIMul = function(k) {
      return l2(this.red, "redMul works only with red numbers"), this.red._verify2(this, k), this.red.imul(this, k);
    }, p2.prototype.redSqr = function() {
      return l2(this.red, "redSqr works only with red numbers"), this.red._verify1(this), this.red.sqr(this);
    }, p2.prototype.redISqr = function() {
      return l2(this.red, "redISqr works only with red numbers"), this.red._verify1(this), this.red.isqr(this);
    }, p2.prototype.redSqrt = function() {
      return l2(this.red, "redSqrt works only with red numbers"), this.red._verify1(this), this.red.sqrt(this);
    }, p2.prototype.redInvm = function() {
      return l2(this.red, "redInvm works only with red numbers"), this.red._verify1(this), this.red.invm(this);
    }, p2.prototype.redNeg = function() {
      return l2(this.red, "redNeg works only with red numbers"), this.red._verify1(this), this.red.neg(this);
    }, p2.prototype.redPow = function(k) {
      return l2(this.red && !k.red, "redPow(normalNum)"), this.red._verify1(this), this.red.pow(this, k);
    };
    var le2 = { k256: null, p224: null, p192: null, p25519: null };
    function be2(E2, k) {
      this.name = E2, this.p = new p2(k, 16), this.n = this.p.bitLength(), this.k = new p2(1).iushln(this.n).isub(this.p), this.tmp = this._tmp();
    }
    be2.prototype._tmp = function() {
      var k = new p2(null);
      return k.words = new Array(Math.ceil(this.n / 13)), k;
    }, be2.prototype.ireduce = function(k) {
      var O2 = k, A2;
      do
        this.split(O2, this.tmp), O2 = this.imulK(O2), O2 = O2.iadd(this.tmp), A2 = O2.bitLength();
      while (A2 > this.n);
      var x2 = A2 < this.n ? -1 : O2.ucmp(this.p);
      return x2 === 0 ? (O2.words[0] = 0, O2.length = 1) : x2 > 0 ? O2.isub(this.p) : O2.strip !== void 0 ? O2.strip() : O2._strip(), O2;
    }, be2.prototype.split = function(k, O2) {
      k.iushrn(this.n, 0, O2);
    }, be2.prototype.imulK = function(k) {
      return k.imul(this.k);
    };
    function ke2() {
      be2.call(this, "k256", "ffffffff ffffffff ffffffff ffffffff ffffffff ffffffff fffffffe fffffc2f");
    }
    v2(ke2, be2), ke2.prototype.split = function(k, O2) {
      for (var A2 = 4194303, x2 = Math.min(k.length, 9), Y2 = 0; Y2 < x2; Y2++)
        O2.words[Y2] = k.words[Y2];
      if (O2.length = x2, k.length <= 9) {
        k.words[0] = 0, k.length = 1;
        return;
      }
      var B2 = k.words[9];
      for (O2.words[O2.length++] = B2 & A2, Y2 = 10; Y2 < k.length; Y2++) {
        var T2 = k.words[Y2] | 0;
        k.words[Y2 - 10] = (T2 & A2) << 4 | B2 >>> 22, B2 = T2;
      }
      B2 >>>= 22, k.words[Y2 - 10] = B2, B2 === 0 && k.length > 10 ? k.length -= 10 : k.length -= 9;
    }, ke2.prototype.imulK = function(k) {
      k.words[k.length] = 0, k.words[k.length + 1] = 0, k.length += 2;
      for (var O2 = 0, A2 = 0; A2 < k.length; A2++) {
        var x2 = k.words[A2] | 0;
        O2 += x2 * 977, k.words[A2] = O2 & 67108863, O2 = x2 * 64 + (O2 / 67108864 | 0);
      }
      return k.words[k.length - 1] === 0 && (k.length--, k.words[k.length - 1] === 0 && k.length--), k;
    };
    function Te2() {
      be2.call(this, "p224", "ffffffff ffffffff ffffffff ffffffff 00000000 00000000 00000001");
    }
    v2(Te2, be2);
    function q2() {
      be2.call(this, "p192", "ffffffff ffffffff ffffffff fffffffe ffffffff ffffffff");
    }
    v2(q2, be2);
    function z2() {
      be2.call(this, "25519", "7fffffffffffffff ffffffffffffffff ffffffffffffffff ffffffffffffffed");
    }
    v2(z2, be2), z2.prototype.imulK = function(k) {
      for (var O2 = 0, A2 = 0; A2 < k.length; A2++) {
        var x2 = (k.words[A2] | 0) * 19 + O2, Y2 = x2 & 67108863;
        x2 >>>= 26, k.words[A2] = Y2, O2 = x2;
      }
      return O2 !== 0 && (k.words[k.length++] = O2), k;
    }, p2._prime = function(k) {
      if (le2[k])
        return le2[k];
      var O2;
      if (k === "k256")
        O2 = new ke2();
      else if (k === "p224")
        O2 = new Te2();
      else if (k === "p192")
        O2 = new q2();
      else if (k === "p25519")
        O2 = new z2();
      else
        throw new Error("Unknown prime " + k);
      return le2[k] = O2, O2;
    };
    function C2(E2) {
      if (typeof E2 == "string") {
        var k = p2._prime(E2);
        this.m = k.p, this.prime = k;
      } else
        l2(E2.gtn(1), "modulus must be greater than 1"), this.m = E2, this.prime = null;
    }
    C2.prototype._verify1 = function(k) {
      l2(k.negative === 0, "red works only with positives"), l2(k.red, "red works only with red numbers");
    }, C2.prototype._verify2 = function(k, O2) {
      l2((k.negative | O2.negative) === 0, "red works only with positives"), l2(k.red && k.red === O2.red, "red works only with red numbers");
    }, C2.prototype.imod = function(k) {
      return this.prime ? this.prime.ireduce(k)._forceRed(this) : (F2(k, k.umod(this.m)._forceRed(this)), k);
    }, C2.prototype.neg = function(k) {
      return k.isZero() ? k.clone() : this.m.sub(k)._forceRed(this);
    }, C2.prototype.add = function(k, O2) {
      this._verify2(k, O2);
      var A2 = k.add(O2);
      return A2.cmp(this.m) >= 0 && A2.isub(this.m), A2._forceRed(this);
    }, C2.prototype.iadd = function(k, O2) {
      this._verify2(k, O2);
      var A2 = k.iadd(O2);
      return A2.cmp(this.m) >= 0 && A2.isub(this.m), A2;
    }, C2.prototype.sub = function(k, O2) {
      this._verify2(k, O2);
      var A2 = k.sub(O2);
      return A2.cmpn(0) < 0 && A2.iadd(this.m), A2._forceRed(this);
    }, C2.prototype.isub = function(k, O2) {
      this._verify2(k, O2);
      var A2 = k.isub(O2);
      return A2.cmpn(0) < 0 && A2.iadd(this.m), A2;
    }, C2.prototype.shl = function(k, O2) {
      return this._verify1(k), this.imod(k.ushln(O2));
    }, C2.prototype.imul = function(k, O2) {
      return this._verify2(k, O2), this.imod(k.imul(O2));
    }, C2.prototype.mul = function(k, O2) {
      return this._verify2(k, O2), this.imod(k.mul(O2));
    }, C2.prototype.isqr = function(k) {
      return this.imul(k, k.clone());
    }, C2.prototype.sqr = function(k) {
      return this.mul(k, k);
    }, C2.prototype.sqrt = function(k) {
      if (k.isZero())
        return k.clone();
      var O2 = this.m.andln(3);
      if (l2(O2 % 2 === 1), O2 === 3) {
        var A2 = this.m.add(new p2(1)).iushrn(2);
        return this.pow(k, A2);
      }
      for (var x2 = this.m.subn(1), Y2 = 0; !x2.isZero() && x2.andln(1) === 0; )
        Y2++, x2.iushrn(1);
      l2(!x2.isZero());
      var B2 = new p2(1).toRed(this), T2 = B2.redNeg(), D2 = this.m.subn(1).iushrn(1), te2 = this.m.bitLength();
      for (te2 = new p2(2 * te2 * te2).toRed(this); this.pow(te2, D2).cmp(T2) !== 0; )
        te2.redIAdd(T2);
      for (var me2 = this.pow(te2, x2), Ie2 = this.pow(k, x2.addn(1).iushrn(1)), $e2 = this.pow(k, x2), ye2 = Y2; $e2.cmp(B2) !== 0; ) {
        for (var he2 = $e2, Me2 = 0; he2.cmp(B2) !== 0; Me2++)
          he2 = he2.redSqr();
        l2(Me2 < ye2);
        var Ae2 = this.pow(me2, new p2(1).iushln(ye2 - Me2 - 1));
        Ie2 = Ie2.redMul(Ae2), me2 = Ae2.redSqr(), $e2 = $e2.redMul(me2), ye2 = Me2;
      }
      return Ie2;
    }, C2.prototype.invm = function(k) {
      var O2 = k._invmp(this.m);
      return O2.negative !== 0 ? (O2.negative = 0, this.imod(O2).redNeg()) : this.imod(O2);
    }, C2.prototype.pow = function(k, O2) {
      if (O2.isZero())
        return new p2(1).toRed(this);
      if (O2.cmpn(1) === 0)
        return k.clone();
      var A2 = 4, x2 = new Array(1 << A2);
      x2[0] = new p2(1).toRed(this), x2[1] = k;
      for (var Y2 = 2; Y2 < x2.length; Y2++)
        x2[Y2] = this.mul(x2[Y2 - 1], k);
      var B2 = x2[0], T2 = 0, D2 = 0, te2 = O2.bitLength() % 26;
      for (te2 === 0 && (te2 = 26), Y2 = O2.length - 1; Y2 >= 0; Y2--) {
        for (var me2 = O2.words[Y2], Ie2 = te2 - 1; Ie2 >= 0; Ie2--) {
          var $e2 = me2 >> Ie2 & 1;
          if (B2 !== x2[0] && (B2 = this.sqr(B2)), $e2 === 0 && T2 === 0) {
            D2 = 0;
            continue;
          }
          T2 <<= 1, T2 |= $e2, D2++, !(D2 !== A2 && (Y2 !== 0 || Ie2 !== 0)) && (B2 = this.mul(B2, x2[T2]), D2 = 0, T2 = 0);
        }
        te2 = 26;
      }
      return B2;
    }, C2.prototype.convertTo = function(k) {
      var O2 = k.umod(this.m);
      return O2 === k ? O2.clone() : O2;
    }, C2.prototype.convertFrom = function(k) {
      var O2 = k.clone();
      return O2.red = null, O2;
    }, p2.mont = function(k) {
      return new b(k);
    };
    function b(E2) {
      C2.call(this, E2), this.shift = this.m.bitLength(), this.shift % 26 !== 0 && (this.shift += 26 - this.shift % 26), this.r = new p2(1).iushln(this.shift), this.r2 = this.imod(this.r.sqr()), this.rinv = this.r._invmp(this.m), this.minv = this.rinv.mul(this.r).isubn(1).div(this.m), this.minv = this.minv.umod(this.r), this.minv = this.r.sub(this.minv);
    }
    v2(b, C2), b.prototype.convertTo = function(k) {
      return this.imod(k.ushln(this.shift));
    }, b.prototype.convertFrom = function(k) {
      var O2 = this.imod(k.mul(this.rinv));
      return O2.red = null, O2;
    }, b.prototype.imul = function(k, O2) {
      if (k.isZero() || O2.isZero())
        return k.words[0] = 0, k.length = 1, k;
      var A2 = k.imul(O2), x2 = A2.maskn(this.shift).mul(this.minv).imaskn(this.shift).mul(this.m), Y2 = A2.isub(x2).iushrn(this.shift), B2 = Y2;
      return Y2.cmp(this.m) >= 0 ? B2 = Y2.isub(this.m) : Y2.cmpn(0) < 0 && (B2 = Y2.iadd(this.m)), B2._forceRed(this);
    }, b.prototype.mul = function(k, O2) {
      if (k.isZero() || O2.isZero())
        return new p2(0)._forceRed(this);
      var A2 = k.mul(O2), x2 = A2.maskn(this.shift).mul(this.minv).imaskn(this.shift).mul(this.m), Y2 = A2.isub(x2).iushrn(this.shift), B2 = Y2;
      return Y2.cmp(this.m) >= 0 ? B2 = Y2.isub(this.m) : Y2.cmpn(0) < 0 && (B2 = Y2.iadd(this.m)), B2._forceRed(this);
    }, b.prototype.invm = function(k) {
      var O2 = this.imod(k._invmp(this.m).mul(this.r2));
      return O2._forceRed(this);
    };
  })(a420, commonjsGlobal$1);
})(bn$4);
var bnExports$4 = bn$4.exports, BN$a = bnExports$4, randomBytes$1 = browserExports;
function blind(a420) {
  var u2 = getr(a420), c = u2.toRed(BN$a.mont(a420.modulus)).redPow(new BN$a(a420.publicExponent)).fromRed();
  return { blinder: c, unblinder: u2.invm(a420.modulus) };
}
function getr(a420) {
  var u2 = a420.modulus.byteLength(), c;
  do
    c = new BN$a(randomBytes$1(u2));
  while (c.cmp(a420.modulus) >= 0 || !c.umod(a420.prime1) || !c.umod(a420.prime2));
  return c;
}
function crt$2(a420, u2) {
  var c = blind(u2), l2 = u2.modulus.byteLength(), v2 = new BN$a(a420).mul(c.blinder).umod(u2.modulus), p2 = v2.toRed(BN$a.mont(u2.prime1)), _ = v2.toRed(BN$a.mont(u2.prime2)), I2 = u2.coefficient, P2 = u2.prime1, $ = u2.prime2, F2 = p2.redPow(u2.exponent1).fromRed(), H2 = _.redPow(u2.exponent2).fromRed(), j = F2.isub(H2).imul(I2).umod(P2).imul($);
  return H2.iadd(j).imul(c.unblinder).umod(u2.modulus).toArrayLike(Buffer$M, "be", l2);
}
crt$2.getr = getr;
var browserifyRsa = crt$2, elliptic = {};
const name$1 = "elliptic", version$3 = "6.5.4", description$1 = "EC cryptography", main$1 = "lib/elliptic.js", files = ["lib"], scripts$1 = { lint: "eslint lib test", "lint:fix": "npm run lint -- --fix", unit: "istanbul test _mocha --reporter=spec test/index.js", test: "npm run lint && npm run unit", version: "grunt dist && git add dist/" }, repository$1 = { type: "git", url: "git@github.com:indutny/elliptic" }, keywords$1 = ["EC", "Elliptic", "curve", "Cryptography"], author$1 = "Fedor Indutny <fedor@indutny.com>", license$1 = "MIT", bugs$1 = { url: "https://github.com/indutny/elliptic/issues" }, homepage$1 = "https://github.com/indutny/elliptic", devDependencies$1 = { brfs: "^2.0.2", coveralls: "^3.1.0", eslint: "^7.6.0", grunt: "^1.2.1", "grunt-browserify": "^5.3.0", "grunt-cli": "^1.3.2", "grunt-contrib-connect": "^3.0.0", "grunt-contrib-copy": "^1.0.0", "grunt-contrib-uglify": "^5.0.0", "grunt-mocha-istanbul": "^5.0.2", "grunt-saucelabs": "^9.0.1", istanbul: "^0.4.5", mocha: "^8.0.1" }, dependencies$1 = { "bn.js": "^4.11.9", brorand: "^1.1.0", "hash.js": "^1.0.0", "hmac-drbg": "^1.0.1", inherits: "^2.0.4", "minimalistic-assert": "^1.0.1", "minimalistic-crypto-utils": "^1.0.1" }, require$$0$1 = { name: name$1, version: version$3, description: description$1, main: main$1, files, scripts: scripts$1, repository: repository$1, keywords: keywords$1, author: author$1, license: license$1, bugs: bugs$1, homepage: homepage$1, devDependencies: devDependencies$1, dependencies: dependencies$1 };
var utils$v = {}, bn$3 = { exports: {} };
(function(a420) {
  (function(u2, c) {
    function l2(C2, b) {
      if (!C2)
        throw new Error(b || "Assertion failed");
    }
    function v2(C2, b) {
      C2.super_ = b;
      var E2 = function() {
      };
      E2.prototype = b.prototype, C2.prototype = new E2(), C2.prototype.constructor = C2;
    }
    function p2(C2, b, E2) {
      if (p2.isBN(C2))
        return C2;
      this.negative = 0, this.words = null, this.length = 0, this.red = null, C2 !== null && ((b === "le" || b === "be") && (E2 = b, b = 10), this._init(C2 || 0, b || 10, E2 || "be"));
    }
    typeof u2 == "object" ? u2.exports = p2 : c.BN = p2, p2.BN = p2, p2.wordSize = 26;
    var _;
    try {
      typeof window < "u" && typeof window.Buffer < "u" ? _ = window.Buffer : _ = require$$0$2.Buffer;
    } catch {
    }
    p2.isBN = function(b) {
      return b instanceof p2 ? true : b !== null && typeof b == "object" && b.constructor.wordSize === p2.wordSize && Array.isArray(b.words);
    }, p2.max = function(b, E2) {
      return b.cmp(E2) > 0 ? b : E2;
    }, p2.min = function(b, E2) {
      return b.cmp(E2) < 0 ? b : E2;
    }, p2.prototype._init = function(b, E2, k) {
      if (typeof b == "number")
        return this._initNumber(b, E2, k);
      if (typeof b == "object")
        return this._initArray(b, E2, k);
      E2 === "hex" && (E2 = 16), l2(E2 === (E2 | 0) && E2 >= 2 && E2 <= 36), b = b.toString().replace(/\s+/g, "");
      var O2 = 0;
      b[0] === "-" && (O2++, this.negative = 1), O2 < b.length && (E2 === 16 ? this._parseHex(b, O2, k) : (this._parseBase(b, E2, O2), k === "le" && this._initArray(this.toArray(), E2, k)));
    }, p2.prototype._initNumber = function(b, E2, k) {
      b < 0 && (this.negative = 1, b = -b), b < 67108864 ? (this.words = [b & 67108863], this.length = 1) : b < 4503599627370496 ? (this.words = [b & 67108863, b / 67108864 & 67108863], this.length = 2) : (l2(b < 9007199254740992), this.words = [b & 67108863, b / 67108864 & 67108863, 1], this.length = 3), k === "le" && this._initArray(this.toArray(), E2, k);
    }, p2.prototype._initArray = function(b, E2, k) {
      if (l2(typeof b.length == "number"), b.length <= 0)
        return this.words = [0], this.length = 1, this;
      this.length = Math.ceil(b.length / 3), this.words = new Array(this.length);
      for (var O2 = 0; O2 < this.length; O2++)
        this.words[O2] = 0;
      var A2, x2, Y2 = 0;
      if (k === "be")
        for (O2 = b.length - 1, A2 = 0; O2 >= 0; O2 -= 3)
          x2 = b[O2] | b[O2 - 1] << 8 | b[O2 - 2] << 16, this.words[A2] |= x2 << Y2 & 67108863, this.words[A2 + 1] = x2 >>> 26 - Y2 & 67108863, Y2 += 24, Y2 >= 26 && (Y2 -= 26, A2++);
      else if (k === "le")
        for (O2 = 0, A2 = 0; O2 < b.length; O2 += 3)
          x2 = b[O2] | b[O2 + 1] << 8 | b[O2 + 2] << 16, this.words[A2] |= x2 << Y2 & 67108863, this.words[A2 + 1] = x2 >>> 26 - Y2 & 67108863, Y2 += 24, Y2 >= 26 && (Y2 -= 26, A2++);
      return this.strip();
    };
    function I2(C2, b) {
      var E2 = C2.charCodeAt(b);
      return E2 >= 65 && E2 <= 70 ? E2 - 55 : E2 >= 97 && E2 <= 102 ? E2 - 87 : E2 - 48 & 15;
    }
    function P2(C2, b, E2) {
      var k = I2(C2, E2);
      return E2 - 1 >= b && (k |= I2(C2, E2 - 1) << 4), k;
    }
    p2.prototype._parseHex = function(b, E2, k) {
      this.length = Math.ceil((b.length - E2) / 6), this.words = new Array(this.length);
      for (var O2 = 0; O2 < this.length; O2++)
        this.words[O2] = 0;
      var A2 = 0, x2 = 0, Y2;
      if (k === "be")
        for (O2 = b.length - 1; O2 >= E2; O2 -= 2)
          Y2 = P2(b, E2, O2) << A2, this.words[x2] |= Y2 & 67108863, A2 >= 18 ? (A2 -= 18, x2 += 1, this.words[x2] |= Y2 >>> 26) : A2 += 8;
      else {
        var B2 = b.length - E2;
        for (O2 = B2 % 2 === 0 ? E2 + 1 : E2; O2 < b.length; O2 += 2)
          Y2 = P2(b, E2, O2) << A2, this.words[x2] |= Y2 & 67108863, A2 >= 18 ? (A2 -= 18, x2 += 1, this.words[x2] |= Y2 >>> 26) : A2 += 8;
      }
      this.strip();
    };
    function $(C2, b, E2, k) {
      for (var O2 = 0, A2 = Math.min(C2.length, E2), x2 = b; x2 < A2; x2++) {
        var Y2 = C2.charCodeAt(x2) - 48;
        O2 *= k, Y2 >= 49 ? O2 += Y2 - 49 + 10 : Y2 >= 17 ? O2 += Y2 - 17 + 10 : O2 += Y2;
      }
      return O2;
    }
    p2.prototype._parseBase = function(b, E2, k) {
      this.words = [0], this.length = 1;
      for (var O2 = 0, A2 = 1; A2 <= 67108863; A2 *= E2)
        O2++;
      O2--, A2 = A2 / E2 | 0;
      for (var x2 = b.length - k, Y2 = x2 % O2, B2 = Math.min(x2, x2 - Y2) + k, T2 = 0, D2 = k; D2 < B2; D2 += O2)
        T2 = $(b, D2, D2 + O2, E2), this.imuln(A2), this.words[0] + T2 < 67108864 ? this.words[0] += T2 : this._iaddn(T2);
      if (Y2 !== 0) {
        var te2 = 1;
        for (T2 = $(b, D2, b.length, E2), D2 = 0; D2 < Y2; D2++)
          te2 *= E2;
        this.imuln(te2), this.words[0] + T2 < 67108864 ? this.words[0] += T2 : this._iaddn(T2);
      }
      this.strip();
    }, p2.prototype.copy = function(b) {
      b.words = new Array(this.length);
      for (var E2 = 0; E2 < this.length; E2++)
        b.words[E2] = this.words[E2];
      b.length = this.length, b.negative = this.negative, b.red = this.red;
    }, p2.prototype.clone = function() {
      var b = new p2(null);
      return this.copy(b), b;
    }, p2.prototype._expand = function(b) {
      for (; this.length < b; )
        this.words[this.length++] = 0;
      return this;
    }, p2.prototype.strip = function() {
      for (; this.length > 1 && this.words[this.length - 1] === 0; )
        this.length--;
      return this._normSign();
    }, p2.prototype._normSign = function() {
      return this.length === 1 && this.words[0] === 0 && (this.negative = 0), this;
    }, p2.prototype.inspect = function() {
      return (this.red ? "<BN-R: " : "<BN: ") + this.toString(16) + ">";
    };
    var F2 = ["", "0", "00", "000", "0000", "00000", "000000", "0000000", "00000000", "000000000", "0000000000", "00000000000", "000000000000", "0000000000000", "00000000000000", "000000000000000", "0000000000000000", "00000000000000000", "000000000000000000", "0000000000000000000", "00000000000000000000", "000000000000000000000", "0000000000000000000000", "00000000000000000000000", "000000000000000000000000", "0000000000000000000000000"], H2 = [0, 0, 25, 16, 12, 11, 10, 9, 8, 8, 7, 7, 7, 7, 6, 6, 6, 6, 6, 6, 6, 5, 5, 5, 5, 5, 5, 5, 5, 5, 5, 5, 5, 5, 5, 5, 5], j = [0, 0, 33554432, 43046721, 16777216, 48828125, 60466176, 40353607, 16777216, 43046721, 1e7, 19487171, 35831808, 62748517, 7529536, 11390625, 16777216, 24137569, 34012224, 47045881, 64e6, 4084101, 5153632, 6436343, 7962624, 9765625, 11881376, 14348907, 17210368, 20511149, 243e5, 28629151, 33554432, 39135393, 45435424, 52521875, 60466176];
    p2.prototype.toString = function(b, E2) {
      b = b || 10, E2 = E2 | 0 || 1;
      var k;
      if (b === 16 || b === "hex") {
        k = "";
        for (var O2 = 0, A2 = 0, x2 = 0; x2 < this.length; x2++) {
          var Y2 = this.words[x2], B2 = ((Y2 << O2 | A2) & 16777215).toString(16);
          A2 = Y2 >>> 24 - O2 & 16777215, A2 !== 0 || x2 !== this.length - 1 ? k = F2[6 - B2.length] + B2 + k : k = B2 + k, O2 += 2, O2 >= 26 && (O2 -= 26, x2--);
        }
        for (A2 !== 0 && (k = A2.toString(16) + k); k.length % E2 !== 0; )
          k = "0" + k;
        return this.negative !== 0 && (k = "-" + k), k;
      }
      if (b === (b | 0) && b >= 2 && b <= 36) {
        var T2 = H2[b], D2 = j[b];
        k = "";
        var te2 = this.clone();
        for (te2.negative = 0; !te2.isZero(); ) {
          var me2 = te2.modn(D2).toString(b);
          te2 = te2.idivn(D2), te2.isZero() ? k = me2 + k : k = F2[T2 - me2.length] + me2 + k;
        }
        for (this.isZero() && (k = "0" + k); k.length % E2 !== 0; )
          k = "0" + k;
        return this.negative !== 0 && (k = "-" + k), k;
      }
      l2(false, "Base should be between 2 and 36");
    }, p2.prototype.toNumber = function() {
      var b = this.words[0];
      return this.length === 2 ? b += this.words[1] * 67108864 : this.length === 3 && this.words[2] === 1 ? b += 4503599627370496 + this.words[1] * 67108864 : this.length > 2 && l2(false, "Number can only safely store up to 53 bits"), this.negative !== 0 ? -b : b;
    }, p2.prototype.toJSON = function() {
      return this.toString(16);
    }, p2.prototype.toBuffer = function(b, E2) {
      return l2(typeof _ < "u"), this.toArrayLike(_, b, E2);
    }, p2.prototype.toArray = function(b, E2) {
      return this.toArrayLike(Array, b, E2);
    }, p2.prototype.toArrayLike = function(b, E2, k) {
      var O2 = this.byteLength(), A2 = k || Math.max(1, O2);
      l2(O2 <= A2, "byte array longer than desired length"), l2(A2 > 0, "Requested array length <= 0"), this.strip();
      var x2 = E2 === "le", Y2 = new b(A2), B2, T2, D2 = this.clone();
      if (x2) {
        for (T2 = 0; !D2.isZero(); T2++)
          B2 = D2.andln(255), D2.iushrn(8), Y2[T2] = B2;
        for (; T2 < A2; T2++)
          Y2[T2] = 0;
      } else {
        for (T2 = 0; T2 < A2 - O2; T2++)
          Y2[T2] = 0;
        for (T2 = 0; !D2.isZero(); T2++)
          B2 = D2.andln(255), D2.iushrn(8), Y2[A2 - T2 - 1] = B2;
      }
      return Y2;
    }, Math.clz32 ? p2.prototype._countBits = function(b) {
      return 32 - Math.clz32(b);
    } : p2.prototype._countBits = function(b) {
      var E2 = b, k = 0;
      return E2 >= 4096 && (k += 13, E2 >>>= 13), E2 >= 64 && (k += 7, E2 >>>= 7), E2 >= 8 && (k += 4, E2 >>>= 4), E2 >= 2 && (k += 2, E2 >>>= 2), k + E2;
    }, p2.prototype._zeroBits = function(b) {
      if (b === 0)
        return 26;
      var E2 = b, k = 0;
      return E2 & 8191 || (k += 13, E2 >>>= 13), E2 & 127 || (k += 7, E2 >>>= 7), E2 & 15 || (k += 4, E2 >>>= 4), E2 & 3 || (k += 2, E2 >>>= 2), E2 & 1 || k++, k;
    }, p2.prototype.bitLength = function() {
      var b = this.words[this.length - 1], E2 = this._countBits(b);
      return (this.length - 1) * 26 + E2;
    };
    function ee2(C2) {
      for (var b = new Array(C2.bitLength()), E2 = 0; E2 < b.length; E2++) {
        var k = E2 / 26 | 0, O2 = E2 % 26;
        b[E2] = (C2.words[k] & 1 << O2) >>> O2;
      }
      return b;
    }
    p2.prototype.zeroBits = function() {
      if (this.isZero())
        return 0;
      for (var b = 0, E2 = 0; E2 < this.length; E2++) {
        var k = this._zeroBits(this.words[E2]);
        if (b += k, k !== 26)
          break;
      }
      return b;
    }, p2.prototype.byteLength = function() {
      return Math.ceil(this.bitLength() / 8);
    }, p2.prototype.toTwos = function(b) {
      return this.negative !== 0 ? this.abs().inotn(b).iaddn(1) : this.clone();
    }, p2.prototype.fromTwos = function(b) {
      return this.testn(b - 1) ? this.notn(b).iaddn(1).ineg() : this.clone();
    }, p2.prototype.isNeg = function() {
      return this.negative !== 0;
    }, p2.prototype.neg = function() {
      return this.clone().ineg();
    }, p2.prototype.ineg = function() {
      return this.isZero() || (this.negative ^= 1), this;
    }, p2.prototype.iuor = function(b) {
      for (; this.length < b.length; )
        this.words[this.length++] = 0;
      for (var E2 = 0; E2 < b.length; E2++)
        this.words[E2] = this.words[E2] | b.words[E2];
      return this.strip();
    }, p2.prototype.ior = function(b) {
      return l2((this.negative | b.negative) === 0), this.iuor(b);
    }, p2.prototype.or = function(b) {
      return this.length > b.length ? this.clone().ior(b) : b.clone().ior(this);
    }, p2.prototype.uor = function(b) {
      return this.length > b.length ? this.clone().iuor(b) : b.clone().iuor(this);
    }, p2.prototype.iuand = function(b) {
      var E2;
      this.length > b.length ? E2 = b : E2 = this;
      for (var k = 0; k < E2.length; k++)
        this.words[k] = this.words[k] & b.words[k];
      return this.length = E2.length, this.strip();
    }, p2.prototype.iand = function(b) {
      return l2((this.negative | b.negative) === 0), this.iuand(b);
    }, p2.prototype.and = function(b) {
      return this.length > b.length ? this.clone().iand(b) : b.clone().iand(this);
    }, p2.prototype.uand = function(b) {
      return this.length > b.length ? this.clone().iuand(b) : b.clone().iuand(this);
    }, p2.prototype.iuxor = function(b) {
      var E2, k;
      this.length > b.length ? (E2 = this, k = b) : (E2 = b, k = this);
      for (var O2 = 0; O2 < k.length; O2++)
        this.words[O2] = E2.words[O2] ^ k.words[O2];
      if (this !== E2)
        for (; O2 < E2.length; O2++)
          this.words[O2] = E2.words[O2];
      return this.length = E2.length, this.strip();
    }, p2.prototype.ixor = function(b) {
      return l2((this.negative | b.negative) === 0), this.iuxor(b);
    }, p2.prototype.xor = function(b) {
      return this.length > b.length ? this.clone().ixor(b) : b.clone().ixor(this);
    }, p2.prototype.uxor = function(b) {
      return this.length > b.length ? this.clone().iuxor(b) : b.clone().iuxor(this);
    }, p2.prototype.inotn = function(b) {
      l2(typeof b == "number" && b >= 0);
      var E2 = Math.ceil(b / 26) | 0, k = b % 26;
      this._expand(E2), k > 0 && E2--;
      for (var O2 = 0; O2 < E2; O2++)
        this.words[O2] = ~this.words[O2] & 67108863;
      return k > 0 && (this.words[O2] = ~this.words[O2] & 67108863 >> 26 - k), this.strip();
    }, p2.prototype.notn = function(b) {
      return this.clone().inotn(b);
    }, p2.prototype.setn = function(b, E2) {
      l2(typeof b == "number" && b >= 0);
      var k = b / 26 | 0, O2 = b % 26;
      return this._expand(k + 1), E2 ? this.words[k] = this.words[k] | 1 << O2 : this.words[k] = this.words[k] & ~(1 << O2), this.strip();
    }, p2.prototype.iadd = function(b) {
      var E2;
      if (this.negative !== 0 && b.negative === 0)
        return this.negative = 0, E2 = this.isub(b), this.negative ^= 1, this._normSign();
      if (this.negative === 0 && b.negative !== 0)
        return b.negative = 0, E2 = this.isub(b), b.negative = 1, E2._normSign();
      var k, O2;
      this.length > b.length ? (k = this, O2 = b) : (k = b, O2 = this);
      for (var A2 = 0, x2 = 0; x2 < O2.length; x2++)
        E2 = (k.words[x2] | 0) + (O2.words[x2] | 0) + A2, this.words[x2] = E2 & 67108863, A2 = E2 >>> 26;
      for (; A2 !== 0 && x2 < k.length; x2++)
        E2 = (k.words[x2] | 0) + A2, this.words[x2] = E2 & 67108863, A2 = E2 >>> 26;
      if (this.length = k.length, A2 !== 0)
        this.words[this.length] = A2, this.length++;
      else if (k !== this)
        for (; x2 < k.length; x2++)
          this.words[x2] = k.words[x2];
      return this;
    }, p2.prototype.add = function(b) {
      var E2;
      return b.negative !== 0 && this.negative === 0 ? (b.negative = 0, E2 = this.sub(b), b.negative ^= 1, E2) : b.negative === 0 && this.negative !== 0 ? (this.negative = 0, E2 = b.sub(this), this.negative = 1, E2) : this.length > b.length ? this.clone().iadd(b) : b.clone().iadd(this);
    }, p2.prototype.isub = function(b) {
      if (b.negative !== 0) {
        b.negative = 0;
        var E2 = this.iadd(b);
        return b.negative = 1, E2._normSign();
      } else if (this.negative !== 0)
        return this.negative = 0, this.iadd(b), this.negative = 1, this._normSign();
      var k = this.cmp(b);
      if (k === 0)
        return this.negative = 0, this.length = 1, this.words[0] = 0, this;
      var O2, A2;
      k > 0 ? (O2 = this, A2 = b) : (O2 = b, A2 = this);
      for (var x2 = 0, Y2 = 0; Y2 < A2.length; Y2++)
        E2 = (O2.words[Y2] | 0) - (A2.words[Y2] | 0) + x2, x2 = E2 >> 26, this.words[Y2] = E2 & 67108863;
      for (; x2 !== 0 && Y2 < O2.length; Y2++)
        E2 = (O2.words[Y2] | 0) + x2, x2 = E2 >> 26, this.words[Y2] = E2 & 67108863;
      if (x2 === 0 && Y2 < O2.length && O2 !== this)
        for (; Y2 < O2.length; Y2++)
          this.words[Y2] = O2.words[Y2];
      return this.length = Math.max(this.length, Y2), O2 !== this && (this.negative = 1), this.strip();
    }, p2.prototype.sub = function(b) {
      return this.clone().isub(b);
    };
    function X2(C2, b, E2) {
      E2.negative = b.negative ^ C2.negative;
      var k = C2.length + b.length | 0;
      E2.length = k, k = k - 1 | 0;
      var O2 = C2.words[0] | 0, A2 = b.words[0] | 0, x2 = O2 * A2, Y2 = x2 & 67108863, B2 = x2 / 67108864 | 0;
      E2.words[0] = Y2;
      for (var T2 = 1; T2 < k; T2++) {
        for (var D2 = B2 >>> 26, te2 = B2 & 67108863, me2 = Math.min(T2, b.length - 1), Ie2 = Math.max(0, T2 - C2.length + 1); Ie2 <= me2; Ie2++) {
          var $e2 = T2 - Ie2 | 0;
          O2 = C2.words[$e2] | 0, A2 = b.words[Ie2] | 0, x2 = O2 * A2 + te2, D2 += x2 / 67108864 | 0, te2 = x2 & 67108863;
        }
        E2.words[T2] = te2 | 0, B2 = D2 | 0;
      }
      return B2 !== 0 ? E2.words[T2] = B2 | 0 : E2.length--, E2.strip();
    }
    var ie2 = function(b, E2, k) {
      var O2 = b.words, A2 = E2.words, x2 = k.words, Y2 = 0, B2, T2, D2, te2 = O2[0] | 0, me2 = te2 & 8191, Ie2 = te2 >>> 13, $e2 = O2[1] | 0, ye2 = $e2 & 8191, he2 = $e2 >>> 13, Me2 = O2[2] | 0, Ae2 = Me2 & 8191, xe2 = Me2 >>> 13, ae2 = O2[3] | 0, N2 = ae2 & 8191, re2 = ae2 >>> 13, fe2 = O2[4] | 0, Ne2 = fe2 & 8191, Oe2 = fe2 >>> 13, qe2 = O2[5] | 0, je2 = qe2 & 8191, Fe2 = qe2 >>> 13, yt = O2[6] | 0, Xe2 = yt & 8191, Ge2 = yt >>> 13, V2 = O2[7] | 0, ge2 = V2 & 8191, we2 = V2 >>> 13, We2 = O2[8] | 0, Re2 = We2 & 8191, J2 = We2 >>> 13, _e = O2[9] | 0, ue2 = _e & 8191, ce2 = _e >>> 13, ve2 = A2[0] | 0, Ce2 = ve2 & 8191, Be2 = ve2 >>> 13, He2 = A2[1] | 0, Ve2 = He2 & 8191, Ze2 = He2 >>> 13, Ke2 = A2[2] | 0, U2 = Ke2 & 8191, se2 = Ke2 >>> 13, Se2 = A2[3] | 0, Ue2 = Se2 & 8191, De2 = Se2 >>> 13, Ye2 = A2[4] | 0, Qe2 = Ye2 & 8191, st = Ye2 >>> 13, St = A2[5] | 0, tt = St & 8191, it = St >>> 13, Tt = A2[6] | 0, rt = Tt & 8191, dt = Tt >>> 13, wt = A2[7] | 0, nt = wt & 8191, at = wt >>> 13, gt = A2[8] | 0, ot = gt & 8191, ct = gt >>> 13, Ct = A2[9] | 0, ut = Ct & 8191, lt = Ct >>> 13;
      k.negative = b.negative ^ E2.negative, k.length = 19, B2 = Math.imul(me2, Ce2), T2 = Math.imul(me2, Be2), T2 = T2 + Math.imul(Ie2, Ce2) | 0, D2 = Math.imul(Ie2, Be2);
      var kt = (Y2 + B2 | 0) + ((T2 & 8191) << 13) | 0;
      Y2 = (D2 + (T2 >>> 13) | 0) + (kt >>> 26) | 0, kt &= 67108863, B2 = Math.imul(ye2, Ce2), T2 = Math.imul(ye2, Be2), T2 = T2 + Math.imul(he2, Ce2) | 0, D2 = Math.imul(he2, Be2), B2 = B2 + Math.imul(me2, Ve2) | 0, T2 = T2 + Math.imul(me2, Ze2) | 0, T2 = T2 + Math.imul(Ie2, Ve2) | 0, D2 = D2 + Math.imul(Ie2, Ze2) | 0;
      var Rt = (Y2 + B2 | 0) + ((T2 & 8191) << 13) | 0;
      Y2 = (D2 + (T2 >>> 13) | 0) + (Rt >>> 26) | 0, Rt &= 67108863, B2 = Math.imul(Ae2, Ce2), T2 = Math.imul(Ae2, Be2), T2 = T2 + Math.imul(xe2, Ce2) | 0, D2 = Math.imul(xe2, Be2), B2 = B2 + Math.imul(ye2, Ve2) | 0, T2 = T2 + Math.imul(ye2, Ze2) | 0, T2 = T2 + Math.imul(he2, Ve2) | 0, D2 = D2 + Math.imul(he2, Ze2) | 0, B2 = B2 + Math.imul(me2, U2) | 0, T2 = T2 + Math.imul(me2, se2) | 0, T2 = T2 + Math.imul(Ie2, U2) | 0, D2 = D2 + Math.imul(Ie2, se2) | 0;
      var Je2 = (Y2 + B2 | 0) + ((T2 & 8191) << 13) | 0;
      Y2 = (D2 + (T2 >>> 13) | 0) + (Je2 >>> 26) | 0, Je2 &= 67108863, B2 = Math.imul(N2, Ce2), T2 = Math.imul(N2, Be2), T2 = T2 + Math.imul(re2, Ce2) | 0, D2 = Math.imul(re2, Be2), B2 = B2 + Math.imul(Ae2, Ve2) | 0, T2 = T2 + Math.imul(Ae2, Ze2) | 0, T2 = T2 + Math.imul(xe2, Ve2) | 0, D2 = D2 + Math.imul(xe2, Ze2) | 0, B2 = B2 + Math.imul(ye2, U2) | 0, T2 = T2 + Math.imul(ye2, se2) | 0, T2 = T2 + Math.imul(he2, U2) | 0, D2 = D2 + Math.imul(he2, se2) | 0, B2 = B2 + Math.imul(me2, Ue2) | 0, T2 = T2 + Math.imul(me2, De2) | 0, T2 = T2 + Math.imul(Ie2, Ue2) | 0, D2 = D2 + Math.imul(Ie2, De2) | 0;
      var ze2 = (Y2 + B2 | 0) + ((T2 & 8191) << 13) | 0;
      Y2 = (D2 + (T2 >>> 13) | 0) + (ze2 >>> 26) | 0, ze2 &= 67108863, B2 = Math.imul(Ne2, Ce2), T2 = Math.imul(Ne2, Be2), T2 = T2 + Math.imul(Oe2, Ce2) | 0, D2 = Math.imul(Oe2, Be2), B2 = B2 + Math.imul(N2, Ve2) | 0, T2 = T2 + Math.imul(N2, Ze2) | 0, T2 = T2 + Math.imul(re2, Ve2) | 0, D2 = D2 + Math.imul(re2, Ze2) | 0, B2 = B2 + Math.imul(Ae2, U2) | 0, T2 = T2 + Math.imul(Ae2, se2) | 0, T2 = T2 + Math.imul(xe2, U2) | 0, D2 = D2 + Math.imul(xe2, se2) | 0, B2 = B2 + Math.imul(ye2, Ue2) | 0, T2 = T2 + Math.imul(ye2, De2) | 0, T2 = T2 + Math.imul(he2, Ue2) | 0, D2 = D2 + Math.imul(he2, De2) | 0, B2 = B2 + Math.imul(me2, Qe2) | 0, T2 = T2 + Math.imul(me2, st) | 0, T2 = T2 + Math.imul(Ie2, Qe2) | 0, D2 = D2 + Math.imul(Ie2, st) | 0;
      var et = (Y2 + B2 | 0) + ((T2 & 8191) << 13) | 0;
      Y2 = (D2 + (T2 >>> 13) | 0) + (et >>> 26) | 0, et &= 67108863, B2 = Math.imul(je2, Ce2), T2 = Math.imul(je2, Be2), T2 = T2 + Math.imul(Fe2, Ce2) | 0, D2 = Math.imul(Fe2, Be2), B2 = B2 + Math.imul(Ne2, Ve2) | 0, T2 = T2 + Math.imul(Ne2, Ze2) | 0, T2 = T2 + Math.imul(Oe2, Ve2) | 0, D2 = D2 + Math.imul(Oe2, Ze2) | 0, B2 = B2 + Math.imul(N2, U2) | 0, T2 = T2 + Math.imul(N2, se2) | 0, T2 = T2 + Math.imul(re2, U2) | 0, D2 = D2 + Math.imul(re2, se2) | 0, B2 = B2 + Math.imul(Ae2, Ue2) | 0, T2 = T2 + Math.imul(Ae2, De2) | 0, T2 = T2 + Math.imul(xe2, Ue2) | 0, D2 = D2 + Math.imul(xe2, De2) | 0, B2 = B2 + Math.imul(ye2, Qe2) | 0, T2 = T2 + Math.imul(ye2, st) | 0, T2 = T2 + Math.imul(he2, Qe2) | 0, D2 = D2 + Math.imul(he2, st) | 0, B2 = B2 + Math.imul(me2, tt) | 0, T2 = T2 + Math.imul(me2, it) | 0, T2 = T2 + Math.imul(Ie2, tt) | 0, D2 = D2 + Math.imul(Ie2, it) | 0;
      var pt = (Y2 + B2 | 0) + ((T2 & 8191) << 13) | 0;
      Y2 = (D2 + (T2 >>> 13) | 0) + (pt >>> 26) | 0, pt &= 67108863, B2 = Math.imul(Xe2, Ce2), T2 = Math.imul(Xe2, Be2), T2 = T2 + Math.imul(Ge2, Ce2) | 0, D2 = Math.imul(Ge2, Be2), B2 = B2 + Math.imul(je2, Ve2) | 0, T2 = T2 + Math.imul(je2, Ze2) | 0, T2 = T2 + Math.imul(Fe2, Ve2) | 0, D2 = D2 + Math.imul(Fe2, Ze2) | 0, B2 = B2 + Math.imul(Ne2, U2) | 0, T2 = T2 + Math.imul(Ne2, se2) | 0, T2 = T2 + Math.imul(Oe2, U2) | 0, D2 = D2 + Math.imul(Oe2, se2) | 0, B2 = B2 + Math.imul(N2, Ue2) | 0, T2 = T2 + Math.imul(N2, De2) | 0, T2 = T2 + Math.imul(re2, Ue2) | 0, D2 = D2 + Math.imul(re2, De2) | 0, B2 = B2 + Math.imul(Ae2, Qe2) | 0, T2 = T2 + Math.imul(Ae2, st) | 0, T2 = T2 + Math.imul(xe2, Qe2) | 0, D2 = D2 + Math.imul(xe2, st) | 0, B2 = B2 + Math.imul(ye2, tt) | 0, T2 = T2 + Math.imul(ye2, it) | 0, T2 = T2 + Math.imul(he2, tt) | 0, D2 = D2 + Math.imul(he2, it) | 0, B2 = B2 + Math.imul(me2, rt) | 0, T2 = T2 + Math.imul(me2, dt) | 0, T2 = T2 + Math.imul(Ie2, rt) | 0, D2 = D2 + Math.imul(Ie2, dt) | 0;
      var mt = (Y2 + B2 | 0) + ((T2 & 8191) << 13) | 0;
      Y2 = (D2 + (T2 >>> 13) | 0) + (mt >>> 26) | 0, mt &= 67108863, B2 = Math.imul(ge2, Ce2), T2 = Math.imul(ge2, Be2), T2 = T2 + Math.imul(we2, Ce2) | 0, D2 = Math.imul(we2, Be2), B2 = B2 + Math.imul(Xe2, Ve2) | 0, T2 = T2 + Math.imul(Xe2, Ze2) | 0, T2 = T2 + Math.imul(Ge2, Ve2) | 0, D2 = D2 + Math.imul(Ge2, Ze2) | 0, B2 = B2 + Math.imul(je2, U2) | 0, T2 = T2 + Math.imul(je2, se2) | 0, T2 = T2 + Math.imul(Fe2, U2) | 0, D2 = D2 + Math.imul(Fe2, se2) | 0, B2 = B2 + Math.imul(Ne2, Ue2) | 0, T2 = T2 + Math.imul(Ne2, De2) | 0, T2 = T2 + Math.imul(Oe2, Ue2) | 0, D2 = D2 + Math.imul(Oe2, De2) | 0, B2 = B2 + Math.imul(N2, Qe2) | 0, T2 = T2 + Math.imul(N2, st) | 0, T2 = T2 + Math.imul(re2, Qe2) | 0, D2 = D2 + Math.imul(re2, st) | 0, B2 = B2 + Math.imul(Ae2, tt) | 0, T2 = T2 + Math.imul(Ae2, it) | 0, T2 = T2 + Math.imul(xe2, tt) | 0, D2 = D2 + Math.imul(xe2, it) | 0, B2 = B2 + Math.imul(ye2, rt) | 0, T2 = T2 + Math.imul(ye2, dt) | 0, T2 = T2 + Math.imul(he2, rt) | 0, D2 = D2 + Math.imul(he2, dt) | 0, B2 = B2 + Math.imul(me2, nt) | 0, T2 = T2 + Math.imul(me2, at) | 0, T2 = T2 + Math.imul(Ie2, nt) | 0, D2 = D2 + Math.imul(Ie2, at) | 0;
      var vt = (Y2 + B2 | 0) + ((T2 & 8191) << 13) | 0;
      Y2 = (D2 + (T2 >>> 13) | 0) + (vt >>> 26) | 0, vt &= 67108863, B2 = Math.imul(Re2, Ce2), T2 = Math.imul(Re2, Be2), T2 = T2 + Math.imul(J2, Ce2) | 0, D2 = Math.imul(J2, Be2), B2 = B2 + Math.imul(ge2, Ve2) | 0, T2 = T2 + Math.imul(ge2, Ze2) | 0, T2 = T2 + Math.imul(we2, Ve2) | 0, D2 = D2 + Math.imul(we2, Ze2) | 0, B2 = B2 + Math.imul(Xe2, U2) | 0, T2 = T2 + Math.imul(Xe2, se2) | 0, T2 = T2 + Math.imul(Ge2, U2) | 0, D2 = D2 + Math.imul(Ge2, se2) | 0, B2 = B2 + Math.imul(je2, Ue2) | 0, T2 = T2 + Math.imul(je2, De2) | 0, T2 = T2 + Math.imul(Fe2, Ue2) | 0, D2 = D2 + Math.imul(Fe2, De2) | 0, B2 = B2 + Math.imul(Ne2, Qe2) | 0, T2 = T2 + Math.imul(Ne2, st) | 0, T2 = T2 + Math.imul(Oe2, Qe2) | 0, D2 = D2 + Math.imul(Oe2, st) | 0, B2 = B2 + Math.imul(N2, tt) | 0, T2 = T2 + Math.imul(N2, it) | 0, T2 = T2 + Math.imul(re2, tt) | 0, D2 = D2 + Math.imul(re2, it) | 0, B2 = B2 + Math.imul(Ae2, rt) | 0, T2 = T2 + Math.imul(Ae2, dt) | 0, T2 = T2 + Math.imul(xe2, rt) | 0, D2 = D2 + Math.imul(xe2, dt) | 0, B2 = B2 + Math.imul(ye2, nt) | 0, T2 = T2 + Math.imul(ye2, at) | 0, T2 = T2 + Math.imul(he2, nt) | 0, D2 = D2 + Math.imul(he2, at) | 0, B2 = B2 + Math.imul(me2, ot) | 0, T2 = T2 + Math.imul(me2, ct) | 0, T2 = T2 + Math.imul(Ie2, ot) | 0, D2 = D2 + Math.imul(Ie2, ct) | 0;
      var ht = (Y2 + B2 | 0) + ((T2 & 8191) << 13) | 0;
      Y2 = (D2 + (T2 >>> 13) | 0) + (ht >>> 26) | 0, ht &= 67108863, B2 = Math.imul(ue2, Ce2), T2 = Math.imul(ue2, Be2), T2 = T2 + Math.imul(ce2, Ce2) | 0, D2 = Math.imul(ce2, Be2), B2 = B2 + Math.imul(Re2, Ve2) | 0, T2 = T2 + Math.imul(Re2, Ze2) | 0, T2 = T2 + Math.imul(J2, Ve2) | 0, D2 = D2 + Math.imul(J2, Ze2) | 0, B2 = B2 + Math.imul(ge2, U2) | 0, T2 = T2 + Math.imul(ge2, se2) | 0, T2 = T2 + Math.imul(we2, U2) | 0, D2 = D2 + Math.imul(we2, se2) | 0, B2 = B2 + Math.imul(Xe2, Ue2) | 0, T2 = T2 + Math.imul(Xe2, De2) | 0, T2 = T2 + Math.imul(Ge2, Ue2) | 0, D2 = D2 + Math.imul(Ge2, De2) | 0, B2 = B2 + Math.imul(je2, Qe2) | 0, T2 = T2 + Math.imul(je2, st) | 0, T2 = T2 + Math.imul(Fe2, Qe2) | 0, D2 = D2 + Math.imul(Fe2, st) | 0, B2 = B2 + Math.imul(Ne2, tt) | 0, T2 = T2 + Math.imul(Ne2, it) | 0, T2 = T2 + Math.imul(Oe2, tt) | 0, D2 = D2 + Math.imul(Oe2, it) | 0, B2 = B2 + Math.imul(N2, rt) | 0, T2 = T2 + Math.imul(N2, dt) | 0, T2 = T2 + Math.imul(re2, rt) | 0, D2 = D2 + Math.imul(re2, dt) | 0, B2 = B2 + Math.imul(Ae2, nt) | 0, T2 = T2 + Math.imul(Ae2, at) | 0, T2 = T2 + Math.imul(xe2, nt) | 0, D2 = D2 + Math.imul(xe2, at) | 0, B2 = B2 + Math.imul(ye2, ot) | 0, T2 = T2 + Math.imul(ye2, ct) | 0, T2 = T2 + Math.imul(he2, ot) | 0, D2 = D2 + Math.imul(he2, ct) | 0, B2 = B2 + Math.imul(me2, ut) | 0, T2 = T2 + Math.imul(me2, lt) | 0, T2 = T2 + Math.imul(Ie2, ut) | 0, D2 = D2 + Math.imul(Ie2, lt) | 0;
      var _t = (Y2 + B2 | 0) + ((T2 & 8191) << 13) | 0;
      Y2 = (D2 + (T2 >>> 13) | 0) + (_t >>> 26) | 0, _t &= 67108863, B2 = Math.imul(ue2, Ve2), T2 = Math.imul(ue2, Ze2), T2 = T2 + Math.imul(ce2, Ve2) | 0, D2 = Math.imul(ce2, Ze2), B2 = B2 + Math.imul(Re2, U2) | 0, T2 = T2 + Math.imul(Re2, se2) | 0, T2 = T2 + Math.imul(J2, U2) | 0, D2 = D2 + Math.imul(J2, se2) | 0, B2 = B2 + Math.imul(ge2, Ue2) | 0, T2 = T2 + Math.imul(ge2, De2) | 0, T2 = T2 + Math.imul(we2, Ue2) | 0, D2 = D2 + Math.imul(we2, De2) | 0, B2 = B2 + Math.imul(Xe2, Qe2) | 0, T2 = T2 + Math.imul(Xe2, st) | 0, T2 = T2 + Math.imul(Ge2, Qe2) | 0, D2 = D2 + Math.imul(Ge2, st) | 0, B2 = B2 + Math.imul(je2, tt) | 0, T2 = T2 + Math.imul(je2, it) | 0, T2 = T2 + Math.imul(Fe2, tt) | 0, D2 = D2 + Math.imul(Fe2, it) | 0, B2 = B2 + Math.imul(Ne2, rt) | 0, T2 = T2 + Math.imul(Ne2, dt) | 0, T2 = T2 + Math.imul(Oe2, rt) | 0, D2 = D2 + Math.imul(Oe2, dt) | 0, B2 = B2 + Math.imul(N2, nt) | 0, T2 = T2 + Math.imul(N2, at) | 0, T2 = T2 + Math.imul(re2, nt) | 0, D2 = D2 + Math.imul(re2, at) | 0, B2 = B2 + Math.imul(Ae2, ot) | 0, T2 = T2 + Math.imul(Ae2, ct) | 0, T2 = T2 + Math.imul(xe2, ot) | 0, D2 = D2 + Math.imul(xe2, ct) | 0, B2 = B2 + Math.imul(ye2, ut) | 0, T2 = T2 + Math.imul(ye2, lt) | 0, T2 = T2 + Math.imul(he2, ut) | 0, D2 = D2 + Math.imul(he2, lt) | 0;
      var Et = (Y2 + B2 | 0) + ((T2 & 8191) << 13) | 0;
      Y2 = (D2 + (T2 >>> 13) | 0) + (Et >>> 26) | 0, Et &= 67108863, B2 = Math.imul(ue2, U2), T2 = Math.imul(ue2, se2), T2 = T2 + Math.imul(ce2, U2) | 0, D2 = Math.imul(ce2, se2), B2 = B2 + Math.imul(Re2, Ue2) | 0, T2 = T2 + Math.imul(Re2, De2) | 0, T2 = T2 + Math.imul(J2, Ue2) | 0, D2 = D2 + Math.imul(J2, De2) | 0, B2 = B2 + Math.imul(ge2, Qe2) | 0, T2 = T2 + Math.imul(ge2, st) | 0, T2 = T2 + Math.imul(we2, Qe2) | 0, D2 = D2 + Math.imul(we2, st) | 0, B2 = B2 + Math.imul(Xe2, tt) | 0, T2 = T2 + Math.imul(Xe2, it) | 0, T2 = T2 + Math.imul(Ge2, tt) | 0, D2 = D2 + Math.imul(Ge2, it) | 0, B2 = B2 + Math.imul(je2, rt) | 0, T2 = T2 + Math.imul(je2, dt) | 0, T2 = T2 + Math.imul(Fe2, rt) | 0, D2 = D2 + Math.imul(Fe2, dt) | 0, B2 = B2 + Math.imul(Ne2, nt) | 0, T2 = T2 + Math.imul(Ne2, at) | 0, T2 = T2 + Math.imul(Oe2, nt) | 0, D2 = D2 + Math.imul(Oe2, at) | 0, B2 = B2 + Math.imul(N2, ot) | 0, T2 = T2 + Math.imul(N2, ct) | 0, T2 = T2 + Math.imul(re2, ot) | 0, D2 = D2 + Math.imul(re2, ct) | 0, B2 = B2 + Math.imul(Ae2, ut) | 0, T2 = T2 + Math.imul(Ae2, lt) | 0, T2 = T2 + Math.imul(xe2, ut) | 0, D2 = D2 + Math.imul(xe2, lt) | 0;
      var Pt = (Y2 + B2 | 0) + ((T2 & 8191) << 13) | 0;
      Y2 = (D2 + (T2 >>> 13) | 0) + (Pt >>> 26) | 0, Pt &= 67108863, B2 = Math.imul(ue2, Ue2), T2 = Math.imul(ue2, De2), T2 = T2 + Math.imul(ce2, Ue2) | 0, D2 = Math.imul(ce2, De2), B2 = B2 + Math.imul(Re2, Qe2) | 0, T2 = T2 + Math.imul(Re2, st) | 0, T2 = T2 + Math.imul(J2, Qe2) | 0, D2 = D2 + Math.imul(J2, st) | 0, B2 = B2 + Math.imul(ge2, tt) | 0, T2 = T2 + Math.imul(ge2, it) | 0, T2 = T2 + Math.imul(we2, tt) | 0, D2 = D2 + Math.imul(we2, it) | 0, B2 = B2 + Math.imul(Xe2, rt) | 0, T2 = T2 + Math.imul(Xe2, dt) | 0, T2 = T2 + Math.imul(Ge2, rt) | 0, D2 = D2 + Math.imul(Ge2, dt) | 0, B2 = B2 + Math.imul(je2, nt) | 0, T2 = T2 + Math.imul(je2, at) | 0, T2 = T2 + Math.imul(Fe2, nt) | 0, D2 = D2 + Math.imul(Fe2, at) | 0, B2 = B2 + Math.imul(Ne2, ot) | 0, T2 = T2 + Math.imul(Ne2, ct) | 0, T2 = T2 + Math.imul(Oe2, ot) | 0, D2 = D2 + Math.imul(Oe2, ct) | 0, B2 = B2 + Math.imul(N2, ut) | 0, T2 = T2 + Math.imul(N2, lt) | 0, T2 = T2 + Math.imul(re2, ut) | 0, D2 = D2 + Math.imul(re2, lt) | 0;
      var Nt = (Y2 + B2 | 0) + ((T2 & 8191) << 13) | 0;
      Y2 = (D2 + (T2 >>> 13) | 0) + (Nt >>> 26) | 0, Nt &= 67108863, B2 = Math.imul(ue2, Qe2), T2 = Math.imul(ue2, st), T2 = T2 + Math.imul(ce2, Qe2) | 0, D2 = Math.imul(ce2, st), B2 = B2 + Math.imul(Re2, tt) | 0, T2 = T2 + Math.imul(Re2, it) | 0, T2 = T2 + Math.imul(J2, tt) | 0, D2 = D2 + Math.imul(J2, it) | 0, B2 = B2 + Math.imul(ge2, rt) | 0, T2 = T2 + Math.imul(ge2, dt) | 0, T2 = T2 + Math.imul(we2, rt) | 0, D2 = D2 + Math.imul(we2, dt) | 0, B2 = B2 + Math.imul(Xe2, nt) | 0, T2 = T2 + Math.imul(Xe2, at) | 0, T2 = T2 + Math.imul(Ge2, nt) | 0, D2 = D2 + Math.imul(Ge2, at) | 0, B2 = B2 + Math.imul(je2, ot) | 0, T2 = T2 + Math.imul(je2, ct) | 0, T2 = T2 + Math.imul(Fe2, ot) | 0, D2 = D2 + Math.imul(Fe2, ct) | 0, B2 = B2 + Math.imul(Ne2, ut) | 0, T2 = T2 + Math.imul(Ne2, lt) | 0, T2 = T2 + Math.imul(Oe2, ut) | 0, D2 = D2 + Math.imul(Oe2, lt) | 0;
      var Mt = (Y2 + B2 | 0) + ((T2 & 8191) << 13) | 0;
      Y2 = (D2 + (T2 >>> 13) | 0) + (Mt >>> 26) | 0, Mt &= 67108863, B2 = Math.imul(ue2, tt), T2 = Math.imul(ue2, it), T2 = T2 + Math.imul(ce2, tt) | 0, D2 = Math.imul(ce2, it), B2 = B2 + Math.imul(Re2, rt) | 0, T2 = T2 + Math.imul(Re2, dt) | 0, T2 = T2 + Math.imul(J2, rt) | 0, D2 = D2 + Math.imul(J2, dt) | 0, B2 = B2 + Math.imul(ge2, nt) | 0, T2 = T2 + Math.imul(ge2, at) | 0, T2 = T2 + Math.imul(we2, nt) | 0, D2 = D2 + Math.imul(we2, at) | 0, B2 = B2 + Math.imul(Xe2, ot) | 0, T2 = T2 + Math.imul(Xe2, ct) | 0, T2 = T2 + Math.imul(Ge2, ot) | 0, D2 = D2 + Math.imul(Ge2, ct) | 0, B2 = B2 + Math.imul(je2, ut) | 0, T2 = T2 + Math.imul(je2, lt) | 0, T2 = T2 + Math.imul(Fe2, ut) | 0, D2 = D2 + Math.imul(Fe2, lt) | 0;
      var Ot = (Y2 + B2 | 0) + ((T2 & 8191) << 13) | 0;
      Y2 = (D2 + (T2 >>> 13) | 0) + (Ot >>> 26) | 0, Ot &= 67108863, B2 = Math.imul(ue2, rt), T2 = Math.imul(ue2, dt), T2 = T2 + Math.imul(ce2, rt) | 0, D2 = Math.imul(ce2, dt), B2 = B2 + Math.imul(Re2, nt) | 0, T2 = T2 + Math.imul(Re2, at) | 0, T2 = T2 + Math.imul(J2, nt) | 0, D2 = D2 + Math.imul(J2, at) | 0, B2 = B2 + Math.imul(ge2, ot) | 0, T2 = T2 + Math.imul(ge2, ct) | 0, T2 = T2 + Math.imul(we2, ot) | 0, D2 = D2 + Math.imul(we2, ct) | 0, B2 = B2 + Math.imul(Xe2, ut) | 0, T2 = T2 + Math.imul(Xe2, lt) | 0, T2 = T2 + Math.imul(Ge2, ut) | 0, D2 = D2 + Math.imul(Ge2, lt) | 0;
      var $t = (Y2 + B2 | 0) + ((T2 & 8191) << 13) | 0;
      Y2 = (D2 + (T2 >>> 13) | 0) + ($t >>> 26) | 0, $t &= 67108863, B2 = Math.imul(ue2, nt), T2 = Math.imul(ue2, at), T2 = T2 + Math.imul(ce2, nt) | 0, D2 = Math.imul(ce2, at), B2 = B2 + Math.imul(Re2, ot) | 0, T2 = T2 + Math.imul(Re2, ct) | 0, T2 = T2 + Math.imul(J2, ot) | 0, D2 = D2 + Math.imul(J2, ct) | 0, B2 = B2 + Math.imul(ge2, ut) | 0, T2 = T2 + Math.imul(ge2, lt) | 0, T2 = T2 + Math.imul(we2, ut) | 0, D2 = D2 + Math.imul(we2, lt) | 0;
      var Bt = (Y2 + B2 | 0) + ((T2 & 8191) << 13) | 0;
      Y2 = (D2 + (T2 >>> 13) | 0) + (Bt >>> 26) | 0, Bt &= 67108863, B2 = Math.imul(ue2, ot), T2 = Math.imul(ue2, ct), T2 = T2 + Math.imul(ce2, ot) | 0, D2 = Math.imul(ce2, ct), B2 = B2 + Math.imul(Re2, ut) | 0, T2 = T2 + Math.imul(Re2, lt) | 0, T2 = T2 + Math.imul(J2, ut) | 0, D2 = D2 + Math.imul(J2, lt) | 0;
      var xt = (Y2 + B2 | 0) + ((T2 & 8191) << 13) | 0;
      Y2 = (D2 + (T2 >>> 13) | 0) + (xt >>> 26) | 0, xt &= 67108863, B2 = Math.imul(ue2, ut), T2 = Math.imul(ue2, lt), T2 = T2 + Math.imul(ce2, ut) | 0, D2 = Math.imul(ce2, lt);
      var Ut = (Y2 + B2 | 0) + ((T2 & 8191) << 13) | 0;
      return Y2 = (D2 + (T2 >>> 13) | 0) + (Ut >>> 26) | 0, Ut &= 67108863, x2[0] = kt, x2[1] = Rt, x2[2] = Je2, x2[3] = ze2, x2[4] = et, x2[5] = pt, x2[6] = mt, x2[7] = vt, x2[8] = ht, x2[9] = _t, x2[10] = Et, x2[11] = Pt, x2[12] = Nt, x2[13] = Mt, x2[14] = Ot, x2[15] = $t, x2[16] = Bt, x2[17] = xt, x2[18] = Ut, Y2 !== 0 && (x2[19] = Y2, k.length++), k;
    };
    Math.imul || (ie2 = X2);
    function Q2(C2, b, E2) {
      E2.negative = b.negative ^ C2.negative, E2.length = C2.length + b.length;
      for (var k = 0, O2 = 0, A2 = 0; A2 < E2.length - 1; A2++) {
        var x2 = O2;
        O2 = 0;
        for (var Y2 = k & 67108863, B2 = Math.min(A2, b.length - 1), T2 = Math.max(0, A2 - C2.length + 1); T2 <= B2; T2++) {
          var D2 = A2 - T2, te2 = C2.words[D2] | 0, me2 = b.words[T2] | 0, Ie2 = te2 * me2, $e2 = Ie2 & 67108863;
          x2 = x2 + (Ie2 / 67108864 | 0) | 0, $e2 = $e2 + Y2 | 0, Y2 = $e2 & 67108863, x2 = x2 + ($e2 >>> 26) | 0, O2 += x2 >>> 26, x2 &= 67108863;
        }
        E2.words[A2] = Y2, k = x2, x2 = O2;
      }
      return k !== 0 ? E2.words[A2] = k : E2.length--, E2.strip();
    }
    function ne2(C2, b, E2) {
      var k = new Z2();
      return k.mulp(C2, b, E2);
    }
    p2.prototype.mulTo = function(b, E2) {
      var k, O2 = this.length + b.length;
      return this.length === 10 && b.length === 10 ? k = ie2(this, b, E2) : O2 < 63 ? k = X2(this, b, E2) : O2 < 1024 ? k = Q2(this, b, E2) : k = ne2(this, b, E2), k;
    };
    function Z2(C2, b) {
      this.x = C2, this.y = b;
    }
    Z2.prototype.makeRBT = function(b) {
      for (var E2 = new Array(b), k = p2.prototype._countBits(b) - 1, O2 = 0; O2 < b; O2++)
        E2[O2] = this.revBin(O2, k, b);
      return E2;
    }, Z2.prototype.revBin = function(b, E2, k) {
      if (b === 0 || b === k - 1)
        return b;
      for (var O2 = 0, A2 = 0; A2 < E2; A2++)
        O2 |= (b & 1) << E2 - A2 - 1, b >>= 1;
      return O2;
    }, Z2.prototype.permute = function(b, E2, k, O2, A2, x2) {
      for (var Y2 = 0; Y2 < x2; Y2++)
        O2[Y2] = E2[b[Y2]], A2[Y2] = k[b[Y2]];
    }, Z2.prototype.transform = function(b, E2, k, O2, A2, x2) {
      this.permute(x2, b, E2, k, O2, A2);
      for (var Y2 = 1; Y2 < A2; Y2 <<= 1)
        for (var B2 = Y2 << 1, T2 = Math.cos(2 * Math.PI / B2), D2 = Math.sin(2 * Math.PI / B2), te2 = 0; te2 < A2; te2 += B2)
          for (var me2 = T2, Ie2 = D2, $e2 = 0; $e2 < Y2; $e2++) {
            var ye2 = k[te2 + $e2], he2 = O2[te2 + $e2], Me2 = k[te2 + $e2 + Y2], Ae2 = O2[te2 + $e2 + Y2], xe2 = me2 * Me2 - Ie2 * Ae2;
            Ae2 = me2 * Ae2 + Ie2 * Me2, Me2 = xe2, k[te2 + $e2] = ye2 + Me2, O2[te2 + $e2] = he2 + Ae2, k[te2 + $e2 + Y2] = ye2 - Me2, O2[te2 + $e2 + Y2] = he2 - Ae2, $e2 !== B2 && (xe2 = T2 * me2 - D2 * Ie2, Ie2 = T2 * Ie2 + D2 * me2, me2 = xe2);
          }
    }, Z2.prototype.guessLen13b = function(b, E2) {
      var k = Math.max(E2, b) | 1, O2 = k & 1, A2 = 0;
      for (k = k / 2 | 0; k; k = k >>> 1)
        A2++;
      return 1 << A2 + 1 + O2;
    }, Z2.prototype.conjugate = function(b, E2, k) {
      if (!(k <= 1))
        for (var O2 = 0; O2 < k / 2; O2++) {
          var A2 = b[O2];
          b[O2] = b[k - O2 - 1], b[k - O2 - 1] = A2, A2 = E2[O2], E2[O2] = -E2[k - O2 - 1], E2[k - O2 - 1] = -A2;
        }
    }, Z2.prototype.normalize13b = function(b, E2) {
      for (var k = 0, O2 = 0; O2 < E2 / 2; O2++) {
        var A2 = Math.round(b[2 * O2 + 1] / E2) * 8192 + Math.round(b[2 * O2] / E2) + k;
        b[O2] = A2 & 67108863, A2 < 67108864 ? k = 0 : k = A2 / 67108864 | 0;
      }
      return b;
    }, Z2.prototype.convert13b = function(b, E2, k, O2) {
      for (var A2 = 0, x2 = 0; x2 < E2; x2++)
        A2 = A2 + (b[x2] | 0), k[2 * x2] = A2 & 8191, A2 = A2 >>> 13, k[2 * x2 + 1] = A2 & 8191, A2 = A2 >>> 13;
      for (x2 = 2 * E2; x2 < O2; ++x2)
        k[x2] = 0;
      l2(A2 === 0), l2((A2 & -8192) === 0);
    }, Z2.prototype.stub = function(b) {
      for (var E2 = new Array(b), k = 0; k < b; k++)
        E2[k] = 0;
      return E2;
    }, Z2.prototype.mulp = function(b, E2, k) {
      var O2 = 2 * this.guessLen13b(b.length, E2.length), A2 = this.makeRBT(O2), x2 = this.stub(O2), Y2 = new Array(O2), B2 = new Array(O2), T2 = new Array(O2), D2 = new Array(O2), te2 = new Array(O2), me2 = new Array(O2), Ie2 = k.words;
      Ie2.length = O2, this.convert13b(b.words, b.length, Y2, O2), this.convert13b(E2.words, E2.length, D2, O2), this.transform(Y2, x2, B2, T2, O2, A2), this.transform(D2, x2, te2, me2, O2, A2);
      for (var $e2 = 0; $e2 < O2; $e2++) {
        var ye2 = B2[$e2] * te2[$e2] - T2[$e2] * me2[$e2];
        T2[$e2] = B2[$e2] * me2[$e2] + T2[$e2] * te2[$e2], B2[$e2] = ye2;
      }
      return this.conjugate(B2, T2, O2), this.transform(B2, T2, Ie2, x2, O2, A2), this.conjugate(Ie2, x2, O2), this.normalize13b(Ie2, O2), k.negative = b.negative ^ E2.negative, k.length = b.length + E2.length, k.strip();
    }, p2.prototype.mul = function(b) {
      var E2 = new p2(null);
      return E2.words = new Array(this.length + b.length), this.mulTo(b, E2);
    }, p2.prototype.mulf = function(b) {
      var E2 = new p2(null);
      return E2.words = new Array(this.length + b.length), ne2(this, b, E2);
    }, p2.prototype.imul = function(b) {
      return this.clone().mulTo(b, this);
    }, p2.prototype.imuln = function(b) {
      l2(typeof b == "number"), l2(b < 67108864);
      for (var E2 = 0, k = 0; k < this.length; k++) {
        var O2 = (this.words[k] | 0) * b, A2 = (O2 & 67108863) + (E2 & 67108863);
        E2 >>= 26, E2 += O2 / 67108864 | 0, E2 += A2 >>> 26, this.words[k] = A2 & 67108863;
      }
      return E2 !== 0 && (this.words[k] = E2, this.length++), this;
    }, p2.prototype.muln = function(b) {
      return this.clone().imuln(b);
    }, p2.prototype.sqr = function() {
      return this.mul(this);
    }, p2.prototype.isqr = function() {
      return this.imul(this.clone());
    }, p2.prototype.pow = function(b) {
      var E2 = ee2(b);
      if (E2.length === 0)
        return new p2(1);
      for (var k = this, O2 = 0; O2 < E2.length && E2[O2] === 0; O2++, k = k.sqr())
        ;
      if (++O2 < E2.length)
        for (var A2 = k.sqr(); O2 < E2.length; O2++, A2 = A2.sqr())
          E2[O2] !== 0 && (k = k.mul(A2));
      return k;
    }, p2.prototype.iushln = function(b) {
      l2(typeof b == "number" && b >= 0);
      var E2 = b % 26, k = (b - E2) / 26, O2 = 67108863 >>> 26 - E2 << 26 - E2, A2;
      if (E2 !== 0) {
        var x2 = 0;
        for (A2 = 0; A2 < this.length; A2++) {
          var Y2 = this.words[A2] & O2, B2 = (this.words[A2] | 0) - Y2 << E2;
          this.words[A2] = B2 | x2, x2 = Y2 >>> 26 - E2;
        }
        x2 && (this.words[A2] = x2, this.length++);
      }
      if (k !== 0) {
        for (A2 = this.length - 1; A2 >= 0; A2--)
          this.words[A2 + k] = this.words[A2];
        for (A2 = 0; A2 < k; A2++)
          this.words[A2] = 0;
        this.length += k;
      }
      return this.strip();
    }, p2.prototype.ishln = function(b) {
      return l2(this.negative === 0), this.iushln(b);
    }, p2.prototype.iushrn = function(b, E2, k) {
      l2(typeof b == "number" && b >= 0);
      var O2;
      E2 ? O2 = (E2 - E2 % 26) / 26 : O2 = 0;
      var A2 = b % 26, x2 = Math.min((b - A2) / 26, this.length), Y2 = 67108863 ^ 67108863 >>> A2 << A2, B2 = k;
      if (O2 -= x2, O2 = Math.max(0, O2), B2) {
        for (var T2 = 0; T2 < x2; T2++)
          B2.words[T2] = this.words[T2];
        B2.length = x2;
      }
      if (x2 !== 0)
        if (this.length > x2)
          for (this.length -= x2, T2 = 0; T2 < this.length; T2++)
            this.words[T2] = this.words[T2 + x2];
        else
          this.words[0] = 0, this.length = 1;
      var D2 = 0;
      for (T2 = this.length - 1; T2 >= 0 && (D2 !== 0 || T2 >= O2); T2--) {
        var te2 = this.words[T2] | 0;
        this.words[T2] = D2 << 26 - A2 | te2 >>> A2, D2 = te2 & Y2;
      }
      return B2 && D2 !== 0 && (B2.words[B2.length++] = D2), this.length === 0 && (this.words[0] = 0, this.length = 1), this.strip();
    }, p2.prototype.ishrn = function(b, E2, k) {
      return l2(this.negative === 0), this.iushrn(b, E2, k);
    }, p2.prototype.shln = function(b) {
      return this.clone().ishln(b);
    }, p2.prototype.ushln = function(b) {
      return this.clone().iushln(b);
    }, p2.prototype.shrn = function(b) {
      return this.clone().ishrn(b);
    }, p2.prototype.ushrn = function(b) {
      return this.clone().iushrn(b);
    }, p2.prototype.testn = function(b) {
      l2(typeof b == "number" && b >= 0);
      var E2 = b % 26, k = (b - E2) / 26, O2 = 1 << E2;
      if (this.length <= k)
        return false;
      var A2 = this.words[k];
      return !!(A2 & O2);
    }, p2.prototype.imaskn = function(b) {
      l2(typeof b == "number" && b >= 0);
      var E2 = b % 26, k = (b - E2) / 26;
      if (l2(this.negative === 0, "imaskn works only with positive numbers"), this.length <= k)
        return this;
      if (E2 !== 0 && k++, this.length = Math.min(k, this.length), E2 !== 0) {
        var O2 = 67108863 ^ 67108863 >>> E2 << E2;
        this.words[this.length - 1] &= O2;
      }
      return this.strip();
    }, p2.prototype.maskn = function(b) {
      return this.clone().imaskn(b);
    }, p2.prototype.iaddn = function(b) {
      return l2(typeof b == "number"), l2(b < 67108864), b < 0 ? this.isubn(-b) : this.negative !== 0 ? this.length === 1 && (this.words[0] | 0) < b ? (this.words[0] = b - (this.words[0] | 0), this.negative = 0, this) : (this.negative = 0, this.isubn(b), this.negative = 1, this) : this._iaddn(b);
    }, p2.prototype._iaddn = function(b) {
      this.words[0] += b;
      for (var E2 = 0; E2 < this.length && this.words[E2] >= 67108864; E2++)
        this.words[E2] -= 67108864, E2 === this.length - 1 ? this.words[E2 + 1] = 1 : this.words[E2 + 1]++;
      return this.length = Math.max(this.length, E2 + 1), this;
    }, p2.prototype.isubn = function(b) {
      if (l2(typeof b == "number"), l2(b < 67108864), b < 0)
        return this.iaddn(-b);
      if (this.negative !== 0)
        return this.negative = 0, this.iaddn(b), this.negative = 1, this;
      if (this.words[0] -= b, this.length === 1 && this.words[0] < 0)
        this.words[0] = -this.words[0], this.negative = 1;
      else
        for (var E2 = 0; E2 < this.length && this.words[E2] < 0; E2++)
          this.words[E2] += 67108864, this.words[E2 + 1] -= 1;
      return this.strip();
    }, p2.prototype.addn = function(b) {
      return this.clone().iaddn(b);
    }, p2.prototype.subn = function(b) {
      return this.clone().isubn(b);
    }, p2.prototype.iabs = function() {
      return this.negative = 0, this;
    }, p2.prototype.abs = function() {
      return this.clone().iabs();
    }, p2.prototype._ishlnsubmul = function(b, E2, k) {
      var O2 = b.length + k, A2;
      this._expand(O2);
      var x2, Y2 = 0;
      for (A2 = 0; A2 < b.length; A2++) {
        x2 = (this.words[A2 + k] | 0) + Y2;
        var B2 = (b.words[A2] | 0) * E2;
        x2 -= B2 & 67108863, Y2 = (x2 >> 26) - (B2 / 67108864 | 0), this.words[A2 + k] = x2 & 67108863;
      }
      for (; A2 < this.length - k; A2++)
        x2 = (this.words[A2 + k] | 0) + Y2, Y2 = x2 >> 26, this.words[A2 + k] = x2 & 67108863;
      if (Y2 === 0)
        return this.strip();
      for (l2(Y2 === -1), Y2 = 0, A2 = 0; A2 < this.length; A2++)
        x2 = -(this.words[A2] | 0) + Y2, Y2 = x2 >> 26, this.words[A2] = x2 & 67108863;
      return this.negative = 1, this.strip();
    }, p2.prototype._wordDiv = function(b, E2) {
      var k = this.length - b.length, O2 = this.clone(), A2 = b, x2 = A2.words[A2.length - 1] | 0, Y2 = this._countBits(x2);
      k = 26 - Y2, k !== 0 && (A2 = A2.ushln(k), O2.iushln(k), x2 = A2.words[A2.length - 1] | 0);
      var B2 = O2.length - A2.length, T2;
      if (E2 !== "mod") {
        T2 = new p2(null), T2.length = B2 + 1, T2.words = new Array(T2.length);
        for (var D2 = 0; D2 < T2.length; D2++)
          T2.words[D2] = 0;
      }
      var te2 = O2.clone()._ishlnsubmul(A2, 1, B2);
      te2.negative === 0 && (O2 = te2, T2 && (T2.words[B2] = 1));
      for (var me2 = B2 - 1; me2 >= 0; me2--) {
        var Ie2 = (O2.words[A2.length + me2] | 0) * 67108864 + (O2.words[A2.length + me2 - 1] | 0);
        for (Ie2 = Math.min(Ie2 / x2 | 0, 67108863), O2._ishlnsubmul(A2, Ie2, me2); O2.negative !== 0; )
          Ie2--, O2.negative = 0, O2._ishlnsubmul(A2, 1, me2), O2.isZero() || (O2.negative ^= 1);
        T2 && (T2.words[me2] = Ie2);
      }
      return T2 && T2.strip(), O2.strip(), E2 !== "div" && k !== 0 && O2.iushrn(k), { div: T2 || null, mod: O2 };
    }, p2.prototype.divmod = function(b, E2, k) {
      if (l2(!b.isZero()), this.isZero())
        return { div: new p2(0), mod: new p2(0) };
      var O2, A2, x2;
      return this.negative !== 0 && b.negative === 0 ? (x2 = this.neg().divmod(b, E2), E2 !== "mod" && (O2 = x2.div.neg()), E2 !== "div" && (A2 = x2.mod.neg(), k && A2.negative !== 0 && A2.iadd(b)), { div: O2, mod: A2 }) : this.negative === 0 && b.negative !== 0 ? (x2 = this.divmod(b.neg(), E2), E2 !== "mod" && (O2 = x2.div.neg()), { div: O2, mod: x2.mod }) : this.negative & b.negative ? (x2 = this.neg().divmod(b.neg(), E2), E2 !== "div" && (A2 = x2.mod.neg(), k && A2.negative !== 0 && A2.isub(b)), { div: x2.div, mod: A2 }) : b.length > this.length || this.cmp(b) < 0 ? { div: new p2(0), mod: this } : b.length === 1 ? E2 === "div" ? { div: this.divn(b.words[0]), mod: null } : E2 === "mod" ? { div: null, mod: new p2(this.modn(b.words[0])) } : { div: this.divn(b.words[0]), mod: new p2(this.modn(b.words[0])) } : this._wordDiv(b, E2);
    }, p2.prototype.div = function(b) {
      return this.divmod(b, "div", false).div;
    }, p2.prototype.mod = function(b) {
      return this.divmod(b, "mod", false).mod;
    }, p2.prototype.umod = function(b) {
      return this.divmod(b, "mod", true).mod;
    }, p2.prototype.divRound = function(b) {
      var E2 = this.divmod(b);
      if (E2.mod.isZero())
        return E2.div;
      var k = E2.div.negative !== 0 ? E2.mod.isub(b) : E2.mod, O2 = b.ushrn(1), A2 = b.andln(1), x2 = k.cmp(O2);
      return x2 < 0 || A2 === 1 && x2 === 0 ? E2.div : E2.div.negative !== 0 ? E2.div.isubn(1) : E2.div.iaddn(1);
    }, p2.prototype.modn = function(b) {
      l2(b <= 67108863);
      for (var E2 = (1 << 26) % b, k = 0, O2 = this.length - 1; O2 >= 0; O2--)
        k = (E2 * k + (this.words[O2] | 0)) % b;
      return k;
    }, p2.prototype.idivn = function(b) {
      l2(b <= 67108863);
      for (var E2 = 0, k = this.length - 1; k >= 0; k--) {
        var O2 = (this.words[k] | 0) + E2 * 67108864;
        this.words[k] = O2 / b | 0, E2 = O2 % b;
      }
      return this.strip();
    }, p2.prototype.divn = function(b) {
      return this.clone().idivn(b);
    }, p2.prototype.egcd = function(b) {
      l2(b.negative === 0), l2(!b.isZero());
      var E2 = this, k = b.clone();
      E2.negative !== 0 ? E2 = E2.umod(b) : E2 = E2.clone();
      for (var O2 = new p2(1), A2 = new p2(0), x2 = new p2(0), Y2 = new p2(1), B2 = 0; E2.isEven() && k.isEven(); )
        E2.iushrn(1), k.iushrn(1), ++B2;
      for (var T2 = k.clone(), D2 = E2.clone(); !E2.isZero(); ) {
        for (var te2 = 0, me2 = 1; !(E2.words[0] & me2) && te2 < 26; ++te2, me2 <<= 1)
          ;
        if (te2 > 0)
          for (E2.iushrn(te2); te2-- > 0; )
            (O2.isOdd() || A2.isOdd()) && (O2.iadd(T2), A2.isub(D2)), O2.iushrn(1), A2.iushrn(1);
        for (var Ie2 = 0, $e2 = 1; !(k.words[0] & $e2) && Ie2 < 26; ++Ie2, $e2 <<= 1)
          ;
        if (Ie2 > 0)
          for (k.iushrn(Ie2); Ie2-- > 0; )
            (x2.isOdd() || Y2.isOdd()) && (x2.iadd(T2), Y2.isub(D2)), x2.iushrn(1), Y2.iushrn(1);
        E2.cmp(k) >= 0 ? (E2.isub(k), O2.isub(x2), A2.isub(Y2)) : (k.isub(E2), x2.isub(O2), Y2.isub(A2));
      }
      return { a: x2, b: Y2, gcd: k.iushln(B2) };
    }, p2.prototype._invmp = function(b) {
      l2(b.negative === 0), l2(!b.isZero());
      var E2 = this, k = b.clone();
      E2.negative !== 0 ? E2 = E2.umod(b) : E2 = E2.clone();
      for (var O2 = new p2(1), A2 = new p2(0), x2 = k.clone(); E2.cmpn(1) > 0 && k.cmpn(1) > 0; ) {
        for (var Y2 = 0, B2 = 1; !(E2.words[0] & B2) && Y2 < 26; ++Y2, B2 <<= 1)
          ;
        if (Y2 > 0)
          for (E2.iushrn(Y2); Y2-- > 0; )
            O2.isOdd() && O2.iadd(x2), O2.iushrn(1);
        for (var T2 = 0, D2 = 1; !(k.words[0] & D2) && T2 < 26; ++T2, D2 <<= 1)
          ;
        if (T2 > 0)
          for (k.iushrn(T2); T2-- > 0; )
            A2.isOdd() && A2.iadd(x2), A2.iushrn(1);
        E2.cmp(k) >= 0 ? (E2.isub(k), O2.isub(A2)) : (k.isub(E2), A2.isub(O2));
      }
      var te2;
      return E2.cmpn(1) === 0 ? te2 = O2 : te2 = A2, te2.cmpn(0) < 0 && te2.iadd(b), te2;
    }, p2.prototype.gcd = function(b) {
      if (this.isZero())
        return b.abs();
      if (b.isZero())
        return this.abs();
      var E2 = this.clone(), k = b.clone();
      E2.negative = 0, k.negative = 0;
      for (var O2 = 0; E2.isEven() && k.isEven(); O2++)
        E2.iushrn(1), k.iushrn(1);
      do {
        for (; E2.isEven(); )
          E2.iushrn(1);
        for (; k.isEven(); )
          k.iushrn(1);
        var A2 = E2.cmp(k);
        if (A2 < 0) {
          var x2 = E2;
          E2 = k, k = x2;
        } else if (A2 === 0 || k.cmpn(1) === 0)
          break;
        E2.isub(k);
      } while (true);
      return k.iushln(O2);
    }, p2.prototype.invm = function(b) {
      return this.egcd(b).a.umod(b);
    }, p2.prototype.isEven = function() {
      return (this.words[0] & 1) === 0;
    }, p2.prototype.isOdd = function() {
      return (this.words[0] & 1) === 1;
    }, p2.prototype.andln = function(b) {
      return this.words[0] & b;
    }, p2.prototype.bincn = function(b) {
      l2(typeof b == "number");
      var E2 = b % 26, k = (b - E2) / 26, O2 = 1 << E2;
      if (this.length <= k)
        return this._expand(k + 1), this.words[k] |= O2, this;
      for (var A2 = O2, x2 = k; A2 !== 0 && x2 < this.length; x2++) {
        var Y2 = this.words[x2] | 0;
        Y2 += A2, A2 = Y2 >>> 26, Y2 &= 67108863, this.words[x2] = Y2;
      }
      return A2 !== 0 && (this.words[x2] = A2, this.length++), this;
    }, p2.prototype.isZero = function() {
      return this.length === 1 && this.words[0] === 0;
    }, p2.prototype.cmpn = function(b) {
      var E2 = b < 0;
      if (this.negative !== 0 && !E2)
        return -1;
      if (this.negative === 0 && E2)
        return 1;
      this.strip();
      var k;
      if (this.length > 1)
        k = 1;
      else {
        E2 && (b = -b), l2(b <= 67108863, "Number is too big");
        var O2 = this.words[0] | 0;
        k = O2 === b ? 0 : O2 < b ? -1 : 1;
      }
      return this.negative !== 0 ? -k | 0 : k;
    }, p2.prototype.cmp = function(b) {
      if (this.negative !== 0 && b.negative === 0)
        return -1;
      if (this.negative === 0 && b.negative !== 0)
        return 1;
      var E2 = this.ucmp(b);
      return this.negative !== 0 ? -E2 | 0 : E2;
    }, p2.prototype.ucmp = function(b) {
      if (this.length > b.length)
        return 1;
      if (this.length < b.length)
        return -1;
      for (var E2 = 0, k = this.length - 1; k >= 0; k--) {
        var O2 = this.words[k] | 0, A2 = b.words[k] | 0;
        if (O2 !== A2) {
          O2 < A2 ? E2 = -1 : O2 > A2 && (E2 = 1);
          break;
        }
      }
      return E2;
    }, p2.prototype.gtn = function(b) {
      return this.cmpn(b) === 1;
    }, p2.prototype.gt = function(b) {
      return this.cmp(b) === 1;
    }, p2.prototype.gten = function(b) {
      return this.cmpn(b) >= 0;
    }, p2.prototype.gte = function(b) {
      return this.cmp(b) >= 0;
    }, p2.prototype.ltn = function(b) {
      return this.cmpn(b) === -1;
    }, p2.prototype.lt = function(b) {
      return this.cmp(b) === -1;
    }, p2.prototype.lten = function(b) {
      return this.cmpn(b) <= 0;
    }, p2.prototype.lte = function(b) {
      return this.cmp(b) <= 0;
    }, p2.prototype.eqn = function(b) {
      return this.cmpn(b) === 0;
    }, p2.prototype.eq = function(b) {
      return this.cmp(b) === 0;
    }, p2.red = function(b) {
      return new q2(b);
    }, p2.prototype.toRed = function(b) {
      return l2(!this.red, "Already a number in reduction context"), l2(this.negative === 0, "red works only with positives"), b.convertTo(this)._forceRed(b);
    }, p2.prototype.fromRed = function() {
      return l2(this.red, "fromRed works only with numbers in reduction context"), this.red.convertFrom(this);
    }, p2.prototype._forceRed = function(b) {
      return this.red = b, this;
    }, p2.prototype.forceRed = function(b) {
      return l2(!this.red, "Already a number in reduction context"), this._forceRed(b);
    }, p2.prototype.redAdd = function(b) {
      return l2(this.red, "redAdd works only with red numbers"), this.red.add(this, b);
    }, p2.prototype.redIAdd = function(b) {
      return l2(this.red, "redIAdd works only with red numbers"), this.red.iadd(this, b);
    }, p2.prototype.redSub = function(b) {
      return l2(this.red, "redSub works only with red numbers"), this.red.sub(this, b);
    }, p2.prototype.redISub = function(b) {
      return l2(this.red, "redISub works only with red numbers"), this.red.isub(this, b);
    }, p2.prototype.redShl = function(b) {
      return l2(this.red, "redShl works only with red numbers"), this.red.shl(this, b);
    }, p2.prototype.redMul = function(b) {
      return l2(this.red, "redMul works only with red numbers"), this.red._verify2(this, b), this.red.mul(this, b);
    }, p2.prototype.redIMul = function(b) {
      return l2(this.red, "redMul works only with red numbers"), this.red._verify2(this, b), this.red.imul(this, b);
    }, p2.prototype.redSqr = function() {
      return l2(this.red, "redSqr works only with red numbers"), this.red._verify1(this), this.red.sqr(this);
    }, p2.prototype.redISqr = function() {
      return l2(this.red, "redISqr works only with red numbers"), this.red._verify1(this), this.red.isqr(this);
    }, p2.prototype.redSqrt = function() {
      return l2(this.red, "redSqrt works only with red numbers"), this.red._verify1(this), this.red.sqrt(this);
    }, p2.prototype.redInvm = function() {
      return l2(this.red, "redInvm works only with red numbers"), this.red._verify1(this), this.red.invm(this);
    }, p2.prototype.redNeg = function() {
      return l2(this.red, "redNeg works only with red numbers"), this.red._verify1(this), this.red.neg(this);
    }, p2.prototype.redPow = function(b) {
      return l2(this.red && !b.red, "redPow(normalNum)"), this.red._verify1(this), this.red.pow(this, b);
    };
    var de2 = { k256: null, p224: null, p192: null, p25519: null };
    function pe2(C2, b) {
      this.name = C2, this.p = new p2(b, 16), this.n = this.p.bitLength(), this.k = new p2(1).iushln(this.n).isub(this.p), this.tmp = this._tmp();
    }
    pe2.prototype._tmp = function() {
      var b = new p2(null);
      return b.words = new Array(Math.ceil(this.n / 13)), b;
    }, pe2.prototype.ireduce = function(b) {
      var E2 = b, k;
      do
        this.split(E2, this.tmp), E2 = this.imulK(E2), E2 = E2.iadd(this.tmp), k = E2.bitLength();
      while (k > this.n);
      var O2 = k < this.n ? -1 : E2.ucmp(this.p);
      return O2 === 0 ? (E2.words[0] = 0, E2.length = 1) : O2 > 0 ? E2.isub(this.p) : E2.strip !== void 0 ? E2.strip() : E2._strip(), E2;
    }, pe2.prototype.split = function(b, E2) {
      b.iushrn(this.n, 0, E2);
    }, pe2.prototype.imulK = function(b) {
      return b.imul(this.k);
    };
    function le2() {
      pe2.call(this, "k256", "ffffffff ffffffff ffffffff ffffffff ffffffff ffffffff fffffffe fffffc2f");
    }
    v2(le2, pe2), le2.prototype.split = function(b, E2) {
      for (var k = 4194303, O2 = Math.min(b.length, 9), A2 = 0; A2 < O2; A2++)
        E2.words[A2] = b.words[A2];
      if (E2.length = O2, b.length <= 9) {
        b.words[0] = 0, b.length = 1;
        return;
      }
      var x2 = b.words[9];
      for (E2.words[E2.length++] = x2 & k, A2 = 10; A2 < b.length; A2++) {
        var Y2 = b.words[A2] | 0;
        b.words[A2 - 10] = (Y2 & k) << 4 | x2 >>> 22, x2 = Y2;
      }
      x2 >>>= 22, b.words[A2 - 10] = x2, x2 === 0 && b.length > 10 ? b.length -= 10 : b.length -= 9;
    }, le2.prototype.imulK = function(b) {
      b.words[b.length] = 0, b.words[b.length + 1] = 0, b.length += 2;
      for (var E2 = 0, k = 0; k < b.length; k++) {
        var O2 = b.words[k] | 0;
        E2 += O2 * 977, b.words[k] = E2 & 67108863, E2 = O2 * 64 + (E2 / 67108864 | 0);
      }
      return b.words[b.length - 1] === 0 && (b.length--, b.words[b.length - 1] === 0 && b.length--), b;
    };
    function be2() {
      pe2.call(this, "p224", "ffffffff ffffffff ffffffff ffffffff 00000000 00000000 00000001");
    }
    v2(be2, pe2);
    function ke2() {
      pe2.call(this, "p192", "ffffffff ffffffff ffffffff fffffffe ffffffff ffffffff");
    }
    v2(ke2, pe2);
    function Te2() {
      pe2.call(this, "25519", "7fffffffffffffff ffffffffffffffff ffffffffffffffff ffffffffffffffed");
    }
    v2(Te2, pe2), Te2.prototype.imulK = function(b) {
      for (var E2 = 0, k = 0; k < b.length; k++) {
        var O2 = (b.words[k] | 0) * 19 + E2, A2 = O2 & 67108863;
        O2 >>>= 26, b.words[k] = A2, E2 = O2;
      }
      return E2 !== 0 && (b.words[b.length++] = E2), b;
    }, p2._prime = function(b) {
      if (de2[b])
        return de2[b];
      var E2;
      if (b === "k256")
        E2 = new le2();
      else if (b === "p224")
        E2 = new be2();
      else if (b === "p192")
        E2 = new ke2();
      else if (b === "p25519")
        E2 = new Te2();
      else
        throw new Error("Unknown prime " + b);
      return de2[b] = E2, E2;
    };
    function q2(C2) {
      if (typeof C2 == "string") {
        var b = p2._prime(C2);
        this.m = b.p, this.prime = b;
      } else
        l2(C2.gtn(1), "modulus must be greater than 1"), this.m = C2, this.prime = null;
    }
    q2.prototype._verify1 = function(b) {
      l2(b.negative === 0, "red works only with positives"), l2(b.red, "red works only with red numbers");
    }, q2.prototype._verify2 = function(b, E2) {
      l2((b.negative | E2.negative) === 0, "red works only with positives"), l2(b.red && b.red === E2.red, "red works only with red numbers");
    }, q2.prototype.imod = function(b) {
      return this.prime ? this.prime.ireduce(b)._forceRed(this) : b.umod(this.m)._forceRed(this);
    }, q2.prototype.neg = function(b) {
      return b.isZero() ? b.clone() : this.m.sub(b)._forceRed(this);
    }, q2.prototype.add = function(b, E2) {
      this._verify2(b, E2);
      var k = b.add(E2);
      return k.cmp(this.m) >= 0 && k.isub(this.m), k._forceRed(this);
    }, q2.prototype.iadd = function(b, E2) {
      this._verify2(b, E2);
      var k = b.iadd(E2);
      return k.cmp(this.m) >= 0 && k.isub(this.m), k;
    }, q2.prototype.sub = function(b, E2) {
      this._verify2(b, E2);
      var k = b.sub(E2);
      return k.cmpn(0) < 0 && k.iadd(this.m), k._forceRed(this);
    }, q2.prototype.isub = function(b, E2) {
      this._verify2(b, E2);
      var k = b.isub(E2);
      return k.cmpn(0) < 0 && k.iadd(this.m), k;
    }, q2.prototype.shl = function(b, E2) {
      return this._verify1(b), this.imod(b.ushln(E2));
    }, q2.prototype.imul = function(b, E2) {
      return this._verify2(b, E2), this.imod(b.imul(E2));
    }, q2.prototype.mul = function(b, E2) {
      return this._verify2(b, E2), this.imod(b.mul(E2));
    }, q2.prototype.isqr = function(b) {
      return this.imul(b, b.clone());
    }, q2.prototype.sqr = function(b) {
      return this.mul(b, b);
    }, q2.prototype.sqrt = function(b) {
      if (b.isZero())
        return b.clone();
      var E2 = this.m.andln(3);
      if (l2(E2 % 2 === 1), E2 === 3) {
        var k = this.m.add(new p2(1)).iushrn(2);
        return this.pow(b, k);
      }
      for (var O2 = this.m.subn(1), A2 = 0; !O2.isZero() && O2.andln(1) === 0; )
        A2++, O2.iushrn(1);
      l2(!O2.isZero());
      var x2 = new p2(1).toRed(this), Y2 = x2.redNeg(), B2 = this.m.subn(1).iushrn(1), T2 = this.m.bitLength();
      for (T2 = new p2(2 * T2 * T2).toRed(this); this.pow(T2, B2).cmp(Y2) !== 0; )
        T2.redIAdd(Y2);
      for (var D2 = this.pow(T2, O2), te2 = this.pow(b, O2.addn(1).iushrn(1)), me2 = this.pow(b, O2), Ie2 = A2; me2.cmp(x2) !== 0; ) {
        for (var $e2 = me2, ye2 = 0; $e2.cmp(x2) !== 0; ye2++)
          $e2 = $e2.redSqr();
        l2(ye2 < Ie2);
        var he2 = this.pow(D2, new p2(1).iushln(Ie2 - ye2 - 1));
        te2 = te2.redMul(he2), D2 = he2.redSqr(), me2 = me2.redMul(D2), Ie2 = ye2;
      }
      return te2;
    }, q2.prototype.invm = function(b) {
      var E2 = b._invmp(this.m);
      return E2.negative !== 0 ? (E2.negative = 0, this.imod(E2).redNeg()) : this.imod(E2);
    }, q2.prototype.pow = function(b, E2) {
      if (E2.isZero())
        return new p2(1).toRed(this);
      if (E2.cmpn(1) === 0)
        return b.clone();
      var k = 4, O2 = new Array(1 << k);
      O2[0] = new p2(1).toRed(this), O2[1] = b;
      for (var A2 = 2; A2 < O2.length; A2++)
        O2[A2] = this.mul(O2[A2 - 1], b);
      var x2 = O2[0], Y2 = 0, B2 = 0, T2 = E2.bitLength() % 26;
      for (T2 === 0 && (T2 = 26), A2 = E2.length - 1; A2 >= 0; A2--) {
        for (var D2 = E2.words[A2], te2 = T2 - 1; te2 >= 0; te2--) {
          var me2 = D2 >> te2 & 1;
          if (x2 !== O2[0] && (x2 = this.sqr(x2)), me2 === 0 && Y2 === 0) {
            B2 = 0;
            continue;
          }
          Y2 <<= 1, Y2 |= me2, B2++, !(B2 !== k && (A2 !== 0 || te2 !== 0)) && (x2 = this.mul(x2, O2[Y2]), B2 = 0, Y2 = 0);
        }
        T2 = 26;
      }
      return x2;
    }, q2.prototype.convertTo = function(b) {
      var E2 = b.umod(this.m);
      return E2 === b ? E2.clone() : E2;
    }, q2.prototype.convertFrom = function(b) {
      var E2 = b.clone();
      return E2.red = null, E2;
    }, p2.mont = function(b) {
      return new z2(b);
    };
    function z2(C2) {
      q2.call(this, C2), this.shift = this.m.bitLength(), this.shift % 26 !== 0 && (this.shift += 26 - this.shift % 26), this.r = new p2(1).iushln(this.shift), this.r2 = this.imod(this.r.sqr()), this.rinv = this.r._invmp(this.m), this.minv = this.rinv.mul(this.r).isubn(1).div(this.m), this.minv = this.minv.umod(this.r), this.minv = this.r.sub(this.minv);
    }
    v2(z2, q2), z2.prototype.convertTo = function(b) {
      return this.imod(b.ushln(this.shift));
    }, z2.prototype.convertFrom = function(b) {
      var E2 = this.imod(b.mul(this.rinv));
      return E2.red = null, E2;
    }, z2.prototype.imul = function(b, E2) {
      if (b.isZero() || E2.isZero())
        return b.words[0] = 0, b.length = 1, b;
      var k = b.imul(E2), O2 = k.maskn(this.shift).mul(this.minv).imaskn(this.shift).mul(this.m), A2 = k.isub(O2).iushrn(this.shift), x2 = A2;
      return A2.cmp(this.m) >= 0 ? x2 = A2.isub(this.m) : A2.cmpn(0) < 0 && (x2 = A2.iadd(this.m)), x2._forceRed(this);
    }, z2.prototype.mul = function(b, E2) {
      if (b.isZero() || E2.isZero())
        return new p2(0)._forceRed(this);
      var k = b.mul(E2), O2 = k.maskn(this.shift).mul(this.minv).imaskn(this.shift).mul(this.m), A2 = k.isub(O2).iushrn(this.shift), x2 = A2;
      return A2.cmp(this.m) >= 0 ? x2 = A2.isub(this.m) : A2.cmpn(0) < 0 && (x2 = A2.iadd(this.m)), x2._forceRed(this);
    }, z2.prototype.invm = function(b) {
      var E2 = this.imod(b._invmp(this.m).mul(this.r2));
      return E2._forceRed(this);
    };
  })(a420, commonjsGlobal$1);
})(bn$3);
var bnExports$3 = bn$3.exports, utils$u = {};
(function(a420) {
  var u2 = a420;
  function c(p2, _) {
    if (Array.isArray(p2))
      return p2.slice();
    if (!p2)
      return [];
    var I2 = [];
    if (typeof p2 != "string") {
      for (var P2 = 0; P2 < p2.length; P2++)
        I2[P2] = p2[P2] | 0;
      return I2;
    }
    if (_ === "hex") {
      p2 = p2.replace(/[^a-z0-9]+/ig, ""), p2.length % 2 !== 0 && (p2 = "0" + p2);
      for (var P2 = 0; P2 < p2.length; P2 += 2)
        I2.push(parseInt(p2[P2] + p2[P2 + 1], 16));
    } else
      for (var P2 = 0; P2 < p2.length; P2++) {
        var $ = p2.charCodeAt(P2), F2 = $ >> 8, H2 = $ & 255;
        F2 ? I2.push(F2, H2) : I2.push(H2);
      }
    return I2;
  }
  u2.toArray = c;
  function l2(p2) {
    return p2.length === 1 ? "0" + p2 : p2;
  }
  u2.zero2 = l2;
  function v2(p2) {
    for (var _ = "", I2 = 0; I2 < p2.length; I2++)
      _ += l2(p2[I2].toString(16));
    return _;
  }
  u2.toHex = v2, u2.encode = function(_, I2) {
    return I2 === "hex" ? v2(_) : _;
  };
})(utils$u);
(function(a420) {
  var u2 = a420, c = bnExports$3, l2 = minimalisticAssert, v2 = utils$u;
  u2.assert = l2, u2.toArray = v2.toArray, u2.zero2 = v2.zero2, u2.toHex = v2.toHex, u2.encode = v2.encode;
  function p2(F2, H2, j) {
    var ee2 = new Array(Math.max(F2.bitLength(), j) + 1);
    ee2.fill(0);
    for (var X2 = 1 << H2 + 1, ie2 = F2.clone(), Q2 = 0; Q2 < ee2.length; Q2++) {
      var ne2, Z2 = ie2.andln(X2 - 1);
      ie2.isOdd() ? (Z2 > (X2 >> 1) - 1 ? ne2 = (X2 >> 1) - Z2 : ne2 = Z2, ie2.isubn(ne2)) : ne2 = 0, ee2[Q2] = ne2, ie2.iushrn(1);
    }
    return ee2;
  }
  u2.getNAF = p2;
  function _(F2, H2) {
    var j = [[], []];
    F2 = F2.clone(), H2 = H2.clone();
    for (var ee2 = 0, X2 = 0, ie2; F2.cmpn(-ee2) > 0 || H2.cmpn(-X2) > 0; ) {
      var Q2 = F2.andln(3) + ee2 & 3, ne2 = H2.andln(3) + X2 & 3;
      Q2 === 3 && (Q2 = -1), ne2 === 3 && (ne2 = -1);
      var Z2;
      Q2 & 1 ? (ie2 = F2.andln(7) + ee2 & 7, (ie2 === 3 || ie2 === 5) && ne2 === 2 ? Z2 = -Q2 : Z2 = Q2) : Z2 = 0, j[0].push(Z2);
      var de2;
      ne2 & 1 ? (ie2 = H2.andln(7) + X2 & 7, (ie2 === 3 || ie2 === 5) && Q2 === 2 ? de2 = -ne2 : de2 = ne2) : de2 = 0, j[1].push(de2), 2 * ee2 === Z2 + 1 && (ee2 = 1 - ee2), 2 * X2 === de2 + 1 && (X2 = 1 - X2), F2.iushrn(1), H2.iushrn(1);
    }
    return j;
  }
  u2.getJSF = _;
  function I2(F2, H2, j) {
    var ee2 = "_" + H2;
    F2.prototype[H2] = function() {
      return this[ee2] !== void 0 ? this[ee2] : this[ee2] = j.call(this);
    };
  }
  u2.cachedProperty = I2;
  function P2(F2) {
    return typeof F2 == "string" ? u2.toArray(F2, "hex") : F2;
  }
  u2.parseBytes = P2;
  function $(F2) {
    return new c(F2, "hex", "le");
  }
  u2.intFromLE = $;
})(utils$v);
var curve = {}, BN$9 = bnExports$3, utils$t = utils$v, getNAF = utils$t.getNAF, getJSF = utils$t.getJSF, assert$f = utils$t.assert;
function BaseCurve(a420, u2) {
  this.type = a420, this.p = new BN$9(u2.p, 16), this.red = u2.prime ? BN$9.red(u2.prime) : BN$9.mont(this.p), this.zero = new BN$9(0).toRed(this.red), this.one = new BN$9(1).toRed(this.red), this.two = new BN$9(2).toRed(this.red), this.n = u2.n && new BN$9(u2.n, 16), this.g = u2.g && this.pointFromJSON(u2.g, u2.gRed), this._wnafT1 = new Array(4), this._wnafT2 = new Array(4), this._wnafT3 = new Array(4), this._wnafT4 = new Array(4), this._bitLength = this.n ? this.n.bitLength() : 0;
  var c = this.n && this.p.div(this.n);
  !c || c.cmpn(100) > 0 ? this.redN = null : (this._maxwellTrick = true, this.redN = this.n.toRed(this.red));
}
var base$1 = BaseCurve;
BaseCurve.prototype.point = function a134() {
  throw new Error("Not implemented");
};
BaseCurve.prototype.validate = function a135() {
  throw new Error("Not implemented");
};
BaseCurve.prototype._fixedNafMul = function a136(u2, c) {
  assert$f(u2.precomputed);
  var l2 = u2._getDoubles(), v2 = getNAF(c, 1, this._bitLength), p2 = (1 << l2.step + 1) - (l2.step % 2 === 0 ? 2 : 1);
  p2 /= 3;
  var _ = [], I2, P2;
  for (I2 = 0; I2 < v2.length; I2 += l2.step) {
    P2 = 0;
    for (var $ = I2 + l2.step - 1; $ >= I2; $--)
      P2 = (P2 << 1) + v2[$];
    _.push(P2);
  }
  for (var F2 = this.jpoint(null, null, null), H2 = this.jpoint(null, null, null), j = p2; j > 0; j--) {
    for (I2 = 0; I2 < _.length; I2++)
      P2 = _[I2], P2 === j ? H2 = H2.mixedAdd(l2.points[I2]) : P2 === -j && (H2 = H2.mixedAdd(l2.points[I2].neg()));
    F2 = F2.add(H2);
  }
  return F2.toP();
};
BaseCurve.prototype._wnafMul = function a137(u2, c) {
  var l2 = 4, v2 = u2._getNAFPoints(l2);
  l2 = v2.wnd;
  for (var p2 = v2.points, _ = getNAF(c, l2, this._bitLength), I2 = this.jpoint(null, null, null), P2 = _.length - 1; P2 >= 0; P2--) {
    for (var $ = 0; P2 >= 0 && _[P2] === 0; P2--)
      $++;
    if (P2 >= 0 && $++, I2 = I2.dblp($), P2 < 0)
      break;
    var F2 = _[P2];
    assert$f(F2 !== 0), u2.type === "affine" ? F2 > 0 ? I2 = I2.mixedAdd(p2[F2 - 1 >> 1]) : I2 = I2.mixedAdd(p2[-F2 - 1 >> 1].neg()) : F2 > 0 ? I2 = I2.add(p2[F2 - 1 >> 1]) : I2 = I2.add(p2[-F2 - 1 >> 1].neg());
  }
  return u2.type === "affine" ? I2.toP() : I2;
};
BaseCurve.prototype._wnafMulAdd = function a138(u2, c, l2, v2, p2) {
  var _ = this._wnafT1, I2 = this._wnafT2, P2 = this._wnafT3, $ = 0, F2, H2, j;
  for (F2 = 0; F2 < v2; F2++) {
    j = c[F2];
    var ee2 = j._getNAFPoints(u2);
    _[F2] = ee2.wnd, I2[F2] = ee2.points;
  }
  for (F2 = v2 - 1; F2 >= 1; F2 -= 2) {
    var X2 = F2 - 1, ie2 = F2;
    if (_[X2] !== 1 || _[ie2] !== 1) {
      P2[X2] = getNAF(l2[X2], _[X2], this._bitLength), P2[ie2] = getNAF(l2[ie2], _[ie2], this._bitLength), $ = Math.max(P2[X2].length, $), $ = Math.max(P2[ie2].length, $);
      continue;
    }
    var Q2 = [
      c[X2],
      /* 1 */
      null,
      /* 3 */
      null,
      /* 5 */
      c[ie2]
      /* 7 */
    ];
    c[X2].y.cmp(c[ie2].y) === 0 ? (Q2[1] = c[X2].add(c[ie2]), Q2[2] = c[X2].toJ().mixedAdd(c[ie2].neg())) : c[X2].y.cmp(c[ie2].y.redNeg()) === 0 ? (Q2[1] = c[X2].toJ().mixedAdd(c[ie2]), Q2[2] = c[X2].add(c[ie2].neg())) : (Q2[1] = c[X2].toJ().mixedAdd(c[ie2]), Q2[2] = c[X2].toJ().mixedAdd(c[ie2].neg()));
    var ne2 = [
      -3,
      /* -1 -1 */
      -1,
      /* -1 0 */
      -5,
      /* -1 1 */
      -7,
      /* 0 -1 */
      0,
      /* 0 0 */
      7,
      /* 0 1 */
      5,
      /* 1 -1 */
      1,
      /* 1 0 */
      3
      /* 1 1 */
    ], Z2 = getJSF(l2[X2], l2[ie2]);
    for ($ = Math.max(Z2[0].length, $), P2[X2] = new Array($), P2[ie2] = new Array($), H2 = 0; H2 < $; H2++) {
      var de2 = Z2[0][H2] | 0, pe2 = Z2[1][H2] | 0;
      P2[X2][H2] = ne2[(de2 + 1) * 3 + (pe2 + 1)], P2[ie2][H2] = 0, I2[X2] = Q2;
    }
  }
  var le2 = this.jpoint(null, null, null), be2 = this._wnafT4;
  for (F2 = $; F2 >= 0; F2--) {
    for (var ke2 = 0; F2 >= 0; ) {
      var Te2 = true;
      for (H2 = 0; H2 < v2; H2++)
        be2[H2] = P2[H2][F2] | 0, be2[H2] !== 0 && (Te2 = false);
      if (!Te2)
        break;
      ke2++, F2--;
    }
    if (F2 >= 0 && ke2++, le2 = le2.dblp(ke2), F2 < 0)
      break;
    for (H2 = 0; H2 < v2; H2++) {
      var q2 = be2[H2];
      q2 !== 0 && (q2 > 0 ? j = I2[H2][q2 - 1 >> 1] : q2 < 0 && (j = I2[H2][-q2 - 1 >> 1].neg()), j.type === "affine" ? le2 = le2.mixedAdd(j) : le2 = le2.add(j));
    }
  }
  for (F2 = 0; F2 < v2; F2++)
    I2[F2] = null;
  return p2 ? le2 : le2.toP();
};
function BasePoint(a420, u2) {
  this.curve = a420, this.type = u2, this.precomputed = null;
}
BaseCurve.BasePoint = BasePoint;
BasePoint.prototype.eq = function a139() {
  throw new Error("Not implemented");
};
BasePoint.prototype.validate = function a140() {
  return this.curve.validate(this);
};
BaseCurve.prototype.decodePoint = function a141(u2, c) {
  u2 = utils$t.toArray(u2, c);
  var l2 = this.p.byteLength();
  if ((u2[0] === 4 || u2[0] === 6 || u2[0] === 7) && u2.length - 1 === 2 * l2) {
    u2[0] === 6 ? assert$f(u2[u2.length - 1] % 2 === 0) : u2[0] === 7 && assert$f(u2[u2.length - 1] % 2 === 1);
    var v2 = this.point(u2.slice(1, 1 + l2), u2.slice(1 + l2, 1 + 2 * l2));
    return v2;
  } else if ((u2[0] === 2 || u2[0] === 3) && u2.length - 1 === l2)
    return this.pointFromX(u2.slice(1, 1 + l2), u2[0] === 3);
  throw new Error("Unknown point format");
};
BasePoint.prototype.encodeCompressed = function a142(u2) {
  return this.encode(u2, true);
};
BasePoint.prototype._encode = function a143(u2) {
  var c = this.curve.p.byteLength(), l2 = this.getX().toArray("be", c);
  return u2 ? [this.getY().isEven() ? 2 : 3].concat(l2) : [4].concat(l2, this.getY().toArray("be", c));
};
BasePoint.prototype.encode = function a144(u2, c) {
  return utils$t.encode(this._encode(c), u2);
};
BasePoint.prototype.precompute = function a145(u2) {
  if (this.precomputed)
    return this;
  var c = { doubles: null, naf: null, beta: null };
  return c.naf = this._getNAFPoints(8), c.doubles = this._getDoubles(4, u2), c.beta = this._getBeta(), this.precomputed = c, this;
};
BasePoint.prototype._hasDoubles = function a146(u2) {
  if (!this.precomputed)
    return false;
  var c = this.precomputed.doubles;
  return c ? c.points.length >= Math.ceil((u2.bitLength() + 1) / c.step) : false;
};
BasePoint.prototype._getDoubles = function a147(u2, c) {
  if (this.precomputed && this.precomputed.doubles)
    return this.precomputed.doubles;
  for (var l2 = [this], v2 = this, p2 = 0; p2 < c; p2 += u2) {
    for (var _ = 0; _ < u2; _++)
      v2 = v2.dbl();
    l2.push(v2);
  }
  return { step: u2, points: l2 };
};
BasePoint.prototype._getNAFPoints = function a148(u2) {
  if (this.precomputed && this.precomputed.naf)
    return this.precomputed.naf;
  for (var c = [this], l2 = (1 << u2) - 1, v2 = l2 === 1 ? null : this.dbl(), p2 = 1; p2 < l2; p2++)
    c[p2] = c[p2 - 1].add(v2);
  return { wnd: u2, points: c };
};
BasePoint.prototype._getBeta = function a149() {
  return null;
};
BasePoint.prototype.dblp = function a150(u2) {
  for (var c = this, l2 = 0; l2 < u2; l2++)
    c = c.dbl();
  return c;
};
var utils$s = utils$v, BN$8 = bnExports$3, inherits$9 = inherits_browserExports, Base$2 = base$1, assert$e = utils$s.assert;
function ShortCurve(a420) {
  Base$2.call(this, "short", a420), this.a = new BN$8(a420.a, 16).toRed(this.red), this.b = new BN$8(a420.b, 16).toRed(this.red), this.tinv = this.two.redInvm(), this.zeroA = this.a.fromRed().cmpn(0) === 0, this.threeA = this.a.fromRed().sub(this.p).cmpn(-3) === 0, this.endo = this._getEndomorphism(a420), this._endoWnafT1 = new Array(4), this._endoWnafT2 = new Array(4);
}
inherits$9(ShortCurve, Base$2);
var short = ShortCurve;
ShortCurve.prototype._getEndomorphism = function a151(u2) {
  if (!(!this.zeroA || !this.g || !this.n || this.p.modn(3) !== 1)) {
    var c, l2;
    if (u2.beta)
      c = new BN$8(u2.beta, 16).toRed(this.red);
    else {
      var v2 = this._getEndoRoots(this.p);
      c = v2[0].cmp(v2[1]) < 0 ? v2[0] : v2[1], c = c.toRed(this.red);
    }
    if (u2.lambda)
      l2 = new BN$8(u2.lambda, 16);
    else {
      var p2 = this._getEndoRoots(this.n);
      this.g.mul(p2[0]).x.cmp(this.g.x.redMul(c)) === 0 ? l2 = p2[0] : (l2 = p2[1], assert$e(this.g.mul(l2).x.cmp(this.g.x.redMul(c)) === 0));
    }
    var _;
    return u2.basis ? _ = u2.basis.map(function(I2) {
      return { a: new BN$8(I2.a, 16), b: new BN$8(I2.b, 16) };
    }) : _ = this._getEndoBasis(l2), { beta: c, lambda: l2, basis: _ };
  }
};
ShortCurve.prototype._getEndoRoots = function a152(u2) {
  var c = u2 === this.p ? this.red : BN$8.mont(u2), l2 = new BN$8(2).toRed(c).redInvm(), v2 = l2.redNeg(), p2 = new BN$8(3).toRed(c).redNeg().redSqrt().redMul(l2), _ = v2.redAdd(p2).fromRed(), I2 = v2.redSub(p2).fromRed();
  return [_, I2];
};
ShortCurve.prototype._getEndoBasis = function a153(u2) {
  for (var c = this.n.ushrn(Math.floor(this.n.bitLength() / 2)), l2 = u2, v2 = this.n.clone(), p2 = new BN$8(1), _ = new BN$8(0), I2 = new BN$8(0), P2 = new BN$8(1), $, F2, H2, j, ee2, X2, ie2, Q2 = 0, ne2, Z2; l2.cmpn(0) !== 0; ) {
    var de2 = v2.div(l2);
    ne2 = v2.sub(de2.mul(l2)), Z2 = I2.sub(de2.mul(p2));
    var pe2 = P2.sub(de2.mul(_));
    if (!H2 && ne2.cmp(c) < 0)
      $ = ie2.neg(), F2 = p2, H2 = ne2.neg(), j = Z2;
    else if (H2 && ++Q2 === 2)
      break;
    ie2 = ne2, v2 = l2, l2 = ne2, I2 = p2, p2 = Z2, P2 = _, _ = pe2;
  }
  ee2 = ne2.neg(), X2 = Z2;
  var le2 = H2.sqr().add(j.sqr()), be2 = ee2.sqr().add(X2.sqr());
  return be2.cmp(le2) >= 0 && (ee2 = $, X2 = F2), H2.negative && (H2 = H2.neg(), j = j.neg()), ee2.negative && (ee2 = ee2.neg(), X2 = X2.neg()), [{ a: H2, b: j }, { a: ee2, b: X2 }];
};
ShortCurve.prototype._endoSplit = function a154(u2) {
  var c = this.endo.basis, l2 = c[0], v2 = c[1], p2 = v2.b.mul(u2).divRound(this.n), _ = l2.b.neg().mul(u2).divRound(this.n), I2 = p2.mul(l2.a), P2 = _.mul(v2.a), $ = p2.mul(l2.b), F2 = _.mul(v2.b), H2 = u2.sub(I2).sub(P2), j = $.add(F2).neg();
  return { k1: H2, k2: j };
};
ShortCurve.prototype.pointFromX = function a155(u2, c) {
  u2 = new BN$8(u2, 16), u2.red || (u2 = u2.toRed(this.red));
  var l2 = u2.redSqr().redMul(u2).redIAdd(u2.redMul(this.a)).redIAdd(this.b), v2 = l2.redSqrt();
  if (v2.redSqr().redSub(l2).cmp(this.zero) !== 0)
    throw new Error("invalid point");
  var p2 = v2.fromRed().isOdd();
  return (c && !p2 || !c && p2) && (v2 = v2.redNeg()), this.point(u2, v2);
};
ShortCurve.prototype.validate = function a156(u2) {
  if (u2.inf)
    return true;
  var c = u2.x, l2 = u2.y, v2 = this.a.redMul(c), p2 = c.redSqr().redMul(c).redIAdd(v2).redIAdd(this.b);
  return l2.redSqr().redISub(p2).cmpn(0) === 0;
};
ShortCurve.prototype._endoWnafMulAdd = function a157(u2, c, l2) {
  for (var v2 = this._endoWnafT1, p2 = this._endoWnafT2, _ = 0; _ < u2.length; _++) {
    var I2 = this._endoSplit(c[_]), P2 = u2[_], $ = P2._getBeta();
    I2.k1.negative && (I2.k1.ineg(), P2 = P2.neg(true)), I2.k2.negative && (I2.k2.ineg(), $ = $.neg(true)), v2[_ * 2] = P2, v2[_ * 2 + 1] = $, p2[_ * 2] = I2.k1, p2[_ * 2 + 1] = I2.k2;
  }
  for (var F2 = this._wnafMulAdd(1, v2, p2, _ * 2, l2), H2 = 0; H2 < _ * 2; H2++)
    v2[H2] = null, p2[H2] = null;
  return F2;
};
function Point$2(a420, u2, c, l2) {
  Base$2.BasePoint.call(this, a420, "affine"), u2 === null && c === null ? (this.x = null, this.y = null, this.inf = true) : (this.x = new BN$8(u2, 16), this.y = new BN$8(c, 16), l2 && (this.x.forceRed(this.curve.red), this.y.forceRed(this.curve.red)), this.x.red || (this.x = this.x.toRed(this.curve.red)), this.y.red || (this.y = this.y.toRed(this.curve.red)), this.inf = false);
}
inherits$9(Point$2, Base$2.BasePoint);
ShortCurve.prototype.point = function a158(u2, c, l2) {
  return new Point$2(this, u2, c, l2);
};
ShortCurve.prototype.pointFromJSON = function a159(u2, c) {
  return Point$2.fromJSON(this, u2, c);
};
Point$2.prototype._getBeta = function a160() {
  if (this.curve.endo) {
    var u2 = this.precomputed;
    if (u2 && u2.beta)
      return u2.beta;
    var c = this.curve.point(this.x.redMul(this.curve.endo.beta), this.y);
    if (u2) {
      var l2 = this.curve, v2 = function(p2) {
        return l2.point(p2.x.redMul(l2.endo.beta), p2.y);
      };
      u2.beta = c, c.precomputed = { beta: null, naf: u2.naf && { wnd: u2.naf.wnd, points: u2.naf.points.map(v2) }, doubles: u2.doubles && { step: u2.doubles.step, points: u2.doubles.points.map(v2) } };
    }
    return c;
  }
};
Point$2.prototype.toJSON = function a161() {
  return this.precomputed ? [this.x, this.y, this.precomputed && { doubles: this.precomputed.doubles && { step: this.precomputed.doubles.step, points: this.precomputed.doubles.points.slice(1) }, naf: this.precomputed.naf && { wnd: this.precomputed.naf.wnd, points: this.precomputed.naf.points.slice(1) } }] : [this.x, this.y];
};
Point$2.fromJSON = function a162(u2, c, l2) {
  typeof c == "string" && (c = JSON.parse(c));
  var v2 = u2.point(c[0], c[1], l2);
  if (!c[2])
    return v2;
  function p2(I2) {
    return u2.point(I2[0], I2[1], l2);
  }
  var _ = c[2];
  return v2.precomputed = { beta: null, doubles: _.doubles && { step: _.doubles.step, points: [v2].concat(_.doubles.points.map(p2)) }, naf: _.naf && { wnd: _.naf.wnd, points: [v2].concat(_.naf.points.map(p2)) } }, v2;
};
Point$2.prototype.inspect = function a163() {
  return this.isInfinity() ? "<EC Point Infinity>" : "<EC Point x: " + this.x.fromRed().toString(16, 2) + " y: " + this.y.fromRed().toString(16, 2) + ">";
};
Point$2.prototype.isInfinity = function a164() {
  return this.inf;
};
Point$2.prototype.add = function a165(u2) {
  if (this.inf)
    return u2;
  if (u2.inf)
    return this;
  if (this.eq(u2))
    return this.dbl();
  if (this.neg().eq(u2))
    return this.curve.point(null, null);
  if (this.x.cmp(u2.x) === 0)
    return this.curve.point(null, null);
  var c = this.y.redSub(u2.y);
  c.cmpn(0) !== 0 && (c = c.redMul(this.x.redSub(u2.x).redInvm()));
  var l2 = c.redSqr().redISub(this.x).redISub(u2.x), v2 = c.redMul(this.x.redSub(l2)).redISub(this.y);
  return this.curve.point(l2, v2);
};
Point$2.prototype.dbl = function a166() {
  if (this.inf)
    return this;
  var u2 = this.y.redAdd(this.y);
  if (u2.cmpn(0) === 0)
    return this.curve.point(null, null);
  var c = this.curve.a, l2 = this.x.redSqr(), v2 = u2.redInvm(), p2 = l2.redAdd(l2).redIAdd(l2).redIAdd(c).redMul(v2), _ = p2.redSqr().redISub(this.x.redAdd(this.x)), I2 = p2.redMul(this.x.redSub(_)).redISub(this.y);
  return this.curve.point(_, I2);
};
Point$2.prototype.getX = function a167() {
  return this.x.fromRed();
};
Point$2.prototype.getY = function a168() {
  return this.y.fromRed();
};
Point$2.prototype.mul = function a169(u2) {
  return u2 = new BN$8(u2, 16), this.isInfinity() ? this : this._hasDoubles(u2) ? this.curve._fixedNafMul(this, u2) : this.curve.endo ? this.curve._endoWnafMulAdd([this], [u2]) : this.curve._wnafMul(this, u2);
};
Point$2.prototype.mulAdd = function a170(u2, c, l2) {
  var v2 = [this, c], p2 = [u2, l2];
  return this.curve.endo ? this.curve._endoWnafMulAdd(v2, p2) : this.curve._wnafMulAdd(1, v2, p2, 2);
};
Point$2.prototype.jmulAdd = function a171(u2, c, l2) {
  var v2 = [this, c], p2 = [u2, l2];
  return this.curve.endo ? this.curve._endoWnafMulAdd(v2, p2, true) : this.curve._wnafMulAdd(1, v2, p2, 2, true);
};
Point$2.prototype.eq = function a172(u2) {
  return this === u2 || this.inf === u2.inf && (this.inf || this.x.cmp(u2.x) === 0 && this.y.cmp(u2.y) === 0);
};
Point$2.prototype.neg = function a173(u2) {
  if (this.inf)
    return this;
  var c = this.curve.point(this.x, this.y.redNeg());
  if (u2 && this.precomputed) {
    var l2 = this.precomputed, v2 = function(p2) {
      return p2.neg();
    };
    c.precomputed = { naf: l2.naf && { wnd: l2.naf.wnd, points: l2.naf.points.map(v2) }, doubles: l2.doubles && { step: l2.doubles.step, points: l2.doubles.points.map(v2) } };
  }
  return c;
};
Point$2.prototype.toJ = function a174() {
  if (this.inf)
    return this.curve.jpoint(null, null, null);
  var u2 = this.curve.jpoint(this.x, this.y, this.curve.one);
  return u2;
};
function JPoint(a420, u2, c, l2) {
  Base$2.BasePoint.call(this, a420, "jacobian"), u2 === null && c === null && l2 === null ? (this.x = this.curve.one, this.y = this.curve.one, this.z = new BN$8(0)) : (this.x = new BN$8(u2, 16), this.y = new BN$8(c, 16), this.z = new BN$8(l2, 16)), this.x.red || (this.x = this.x.toRed(this.curve.red)), this.y.red || (this.y = this.y.toRed(this.curve.red)), this.z.red || (this.z = this.z.toRed(this.curve.red)), this.zOne = this.z === this.curve.one;
}
inherits$9(JPoint, Base$2.BasePoint);
ShortCurve.prototype.jpoint = function a175(u2, c, l2) {
  return new JPoint(this, u2, c, l2);
};
JPoint.prototype.toP = function a176() {
  if (this.isInfinity())
    return this.curve.point(null, null);
  var u2 = this.z.redInvm(), c = u2.redSqr(), l2 = this.x.redMul(c), v2 = this.y.redMul(c).redMul(u2);
  return this.curve.point(l2, v2);
};
JPoint.prototype.neg = function a177() {
  return this.curve.jpoint(this.x, this.y.redNeg(), this.z);
};
JPoint.prototype.add = function a178(u2) {
  if (this.isInfinity())
    return u2;
  if (u2.isInfinity())
    return this;
  var c = u2.z.redSqr(), l2 = this.z.redSqr(), v2 = this.x.redMul(c), p2 = u2.x.redMul(l2), _ = this.y.redMul(c.redMul(u2.z)), I2 = u2.y.redMul(l2.redMul(this.z)), P2 = v2.redSub(p2), $ = _.redSub(I2);
  if (P2.cmpn(0) === 0)
    return $.cmpn(0) !== 0 ? this.curve.jpoint(null, null, null) : this.dbl();
  var F2 = P2.redSqr(), H2 = F2.redMul(P2), j = v2.redMul(F2), ee2 = $.redSqr().redIAdd(H2).redISub(j).redISub(j), X2 = $.redMul(j.redISub(ee2)).redISub(_.redMul(H2)), ie2 = this.z.redMul(u2.z).redMul(P2);
  return this.curve.jpoint(ee2, X2, ie2);
};
JPoint.prototype.mixedAdd = function a179(u2) {
  if (this.isInfinity())
    return u2.toJ();
  if (u2.isInfinity())
    return this;
  var c = this.z.redSqr(), l2 = this.x, v2 = u2.x.redMul(c), p2 = this.y, _ = u2.y.redMul(c).redMul(this.z), I2 = l2.redSub(v2), P2 = p2.redSub(_);
  if (I2.cmpn(0) === 0)
    return P2.cmpn(0) !== 0 ? this.curve.jpoint(null, null, null) : this.dbl();
  var $ = I2.redSqr(), F2 = $.redMul(I2), H2 = l2.redMul($), j = P2.redSqr().redIAdd(F2).redISub(H2).redISub(H2), ee2 = P2.redMul(H2.redISub(j)).redISub(p2.redMul(F2)), X2 = this.z.redMul(I2);
  return this.curve.jpoint(j, ee2, X2);
};
JPoint.prototype.dblp = function a180(u2) {
  if (u2 === 0)
    return this;
  if (this.isInfinity())
    return this;
  if (!u2)
    return this.dbl();
  var c;
  if (this.curve.zeroA || this.curve.threeA) {
    var l2 = this;
    for (c = 0; c < u2; c++)
      l2 = l2.dbl();
    return l2;
  }
  var v2 = this.curve.a, p2 = this.curve.tinv, _ = this.x, I2 = this.y, P2 = this.z, $ = P2.redSqr().redSqr(), F2 = I2.redAdd(I2);
  for (c = 0; c < u2; c++) {
    var H2 = _.redSqr(), j = F2.redSqr(), ee2 = j.redSqr(), X2 = H2.redAdd(H2).redIAdd(H2).redIAdd(v2.redMul($)), ie2 = _.redMul(j), Q2 = X2.redSqr().redISub(ie2.redAdd(ie2)), ne2 = ie2.redISub(Q2), Z2 = X2.redMul(ne2);
    Z2 = Z2.redIAdd(Z2).redISub(ee2);
    var de2 = F2.redMul(P2);
    c + 1 < u2 && ($ = $.redMul(ee2)), _ = Q2, P2 = de2, F2 = Z2;
  }
  return this.curve.jpoint(_, F2.redMul(p2), P2);
};
JPoint.prototype.dbl = function a181() {
  return this.isInfinity() ? this : this.curve.zeroA ? this._zeroDbl() : this.curve.threeA ? this._threeDbl() : this._dbl();
};
JPoint.prototype._zeroDbl = function a182() {
  var u2, c, l2;
  if (this.zOne) {
    var v2 = this.x.redSqr(), p2 = this.y.redSqr(), _ = p2.redSqr(), I2 = this.x.redAdd(p2).redSqr().redISub(v2).redISub(_);
    I2 = I2.redIAdd(I2);
    var P2 = v2.redAdd(v2).redIAdd(v2), $ = P2.redSqr().redISub(I2).redISub(I2), F2 = _.redIAdd(_);
    F2 = F2.redIAdd(F2), F2 = F2.redIAdd(F2), u2 = $, c = P2.redMul(I2.redISub($)).redISub(F2), l2 = this.y.redAdd(this.y);
  } else {
    var H2 = this.x.redSqr(), j = this.y.redSqr(), ee2 = j.redSqr(), X2 = this.x.redAdd(j).redSqr().redISub(H2).redISub(ee2);
    X2 = X2.redIAdd(X2);
    var ie2 = H2.redAdd(H2).redIAdd(H2), Q2 = ie2.redSqr(), ne2 = ee2.redIAdd(ee2);
    ne2 = ne2.redIAdd(ne2), ne2 = ne2.redIAdd(ne2), u2 = Q2.redISub(X2).redISub(X2), c = ie2.redMul(X2.redISub(u2)).redISub(ne2), l2 = this.y.redMul(this.z), l2 = l2.redIAdd(l2);
  }
  return this.curve.jpoint(u2, c, l2);
};
JPoint.prototype._threeDbl = function a183() {
  var u2, c, l2;
  if (this.zOne) {
    var v2 = this.x.redSqr(), p2 = this.y.redSqr(), _ = p2.redSqr(), I2 = this.x.redAdd(p2).redSqr().redISub(v2).redISub(_);
    I2 = I2.redIAdd(I2);
    var P2 = v2.redAdd(v2).redIAdd(v2).redIAdd(this.curve.a), $ = P2.redSqr().redISub(I2).redISub(I2);
    u2 = $;
    var F2 = _.redIAdd(_);
    F2 = F2.redIAdd(F2), F2 = F2.redIAdd(F2), c = P2.redMul(I2.redISub($)).redISub(F2), l2 = this.y.redAdd(this.y);
  } else {
    var H2 = this.z.redSqr(), j = this.y.redSqr(), ee2 = this.x.redMul(j), X2 = this.x.redSub(H2).redMul(this.x.redAdd(H2));
    X2 = X2.redAdd(X2).redIAdd(X2);
    var ie2 = ee2.redIAdd(ee2);
    ie2 = ie2.redIAdd(ie2);
    var Q2 = ie2.redAdd(ie2);
    u2 = X2.redSqr().redISub(Q2), l2 = this.y.redAdd(this.z).redSqr().redISub(j).redISub(H2);
    var ne2 = j.redSqr();
    ne2 = ne2.redIAdd(ne2), ne2 = ne2.redIAdd(ne2), ne2 = ne2.redIAdd(ne2), c = X2.redMul(ie2.redISub(u2)).redISub(ne2);
  }
  return this.curve.jpoint(u2, c, l2);
};
JPoint.prototype._dbl = function a184() {
  var u2 = this.curve.a, c = this.x, l2 = this.y, v2 = this.z, p2 = v2.redSqr().redSqr(), _ = c.redSqr(), I2 = l2.redSqr(), P2 = _.redAdd(_).redIAdd(_).redIAdd(u2.redMul(p2)), $ = c.redAdd(c);
  $ = $.redIAdd($);
  var F2 = $.redMul(I2), H2 = P2.redSqr().redISub(F2.redAdd(F2)), j = F2.redISub(H2), ee2 = I2.redSqr();
  ee2 = ee2.redIAdd(ee2), ee2 = ee2.redIAdd(ee2), ee2 = ee2.redIAdd(ee2);
  var X2 = P2.redMul(j).redISub(ee2), ie2 = l2.redAdd(l2).redMul(v2);
  return this.curve.jpoint(H2, X2, ie2);
};
JPoint.prototype.trpl = function a185() {
  if (!this.curve.zeroA)
    return this.dbl().add(this);
  var u2 = this.x.redSqr(), c = this.y.redSqr(), l2 = this.z.redSqr(), v2 = c.redSqr(), p2 = u2.redAdd(u2).redIAdd(u2), _ = p2.redSqr(), I2 = this.x.redAdd(c).redSqr().redISub(u2).redISub(v2);
  I2 = I2.redIAdd(I2), I2 = I2.redAdd(I2).redIAdd(I2), I2 = I2.redISub(_);
  var P2 = I2.redSqr(), $ = v2.redIAdd(v2);
  $ = $.redIAdd($), $ = $.redIAdd($), $ = $.redIAdd($);
  var F2 = p2.redIAdd(I2).redSqr().redISub(_).redISub(P2).redISub($), H2 = c.redMul(F2);
  H2 = H2.redIAdd(H2), H2 = H2.redIAdd(H2);
  var j = this.x.redMul(P2).redISub(H2);
  j = j.redIAdd(j), j = j.redIAdd(j);
  var ee2 = this.y.redMul(F2.redMul($.redISub(F2)).redISub(I2.redMul(P2)));
  ee2 = ee2.redIAdd(ee2), ee2 = ee2.redIAdd(ee2), ee2 = ee2.redIAdd(ee2);
  var X2 = this.z.redAdd(I2).redSqr().redISub(l2).redISub(P2);
  return this.curve.jpoint(j, ee2, X2);
};
JPoint.prototype.mul = function a186(u2, c) {
  return u2 = new BN$8(u2, c), this.curve._wnafMul(this, u2);
};
JPoint.prototype.eq = function a187(u2) {
  if (u2.type === "affine")
    return this.eq(u2.toJ());
  if (this === u2)
    return true;
  var c = this.z.redSqr(), l2 = u2.z.redSqr();
  if (this.x.redMul(l2).redISub(u2.x.redMul(c)).cmpn(0) !== 0)
    return false;
  var v2 = c.redMul(this.z), p2 = l2.redMul(u2.z);
  return this.y.redMul(p2).redISub(u2.y.redMul(v2)).cmpn(0) === 0;
};
JPoint.prototype.eqXToP = function a188(u2) {
  var c = this.z.redSqr(), l2 = u2.toRed(this.curve.red).redMul(c);
  if (this.x.cmp(l2) === 0)
    return true;
  for (var v2 = u2.clone(), p2 = this.curve.redN.redMul(c); ; ) {
    if (v2.iadd(this.curve.n), v2.cmp(this.curve.p) >= 0)
      return false;
    if (l2.redIAdd(p2), this.x.cmp(l2) === 0)
      return true;
  }
};
JPoint.prototype.inspect = function a189() {
  return this.isInfinity() ? "<EC JPoint Infinity>" : "<EC JPoint x: " + this.x.toString(16, 2) + " y: " + this.y.toString(16, 2) + " z: " + this.z.toString(16, 2) + ">";
};
JPoint.prototype.isInfinity = function a190() {
  return this.z.cmpn(0) === 0;
};
var BN$7 = bnExports$3, inherits$8 = inherits_browserExports, Base$1 = base$1, utils$r = utils$v;
function MontCurve(a420) {
  Base$1.call(this, "mont", a420), this.a = new BN$7(a420.a, 16).toRed(this.red), this.b = new BN$7(a420.b, 16).toRed(this.red), this.i4 = new BN$7(4).toRed(this.red).redInvm(), this.two = new BN$7(2).toRed(this.red), this.a24 = this.i4.redMul(this.a.redAdd(this.two));
}
inherits$8(MontCurve, Base$1);
var mont = MontCurve;
MontCurve.prototype.validate = function a191(u2) {
  var c = u2.normalize().x, l2 = c.redSqr(), v2 = l2.redMul(c).redAdd(l2.redMul(this.a)).redAdd(c), p2 = v2.redSqrt();
  return p2.redSqr().cmp(v2) === 0;
};
function Point$1(a420, u2, c) {
  Base$1.BasePoint.call(this, a420, "projective"), u2 === null && c === null ? (this.x = this.curve.one, this.z = this.curve.zero) : (this.x = new BN$7(u2, 16), this.z = new BN$7(c, 16), this.x.red || (this.x = this.x.toRed(this.curve.red)), this.z.red || (this.z = this.z.toRed(this.curve.red)));
}
inherits$8(Point$1, Base$1.BasePoint);
MontCurve.prototype.decodePoint = function a192(u2, c) {
  return this.point(utils$r.toArray(u2, c), 1);
};
MontCurve.prototype.point = function a193(u2, c) {
  return new Point$1(this, u2, c);
};
MontCurve.prototype.pointFromJSON = function a194(u2) {
  return Point$1.fromJSON(this, u2);
};
Point$1.prototype.precompute = function a195() {
};
Point$1.prototype._encode = function a196() {
  return this.getX().toArray("be", this.curve.p.byteLength());
};
Point$1.fromJSON = function a197(u2, c) {
  return new Point$1(u2, c[0], c[1] || u2.one);
};
Point$1.prototype.inspect = function a198() {
  return this.isInfinity() ? "<EC Point Infinity>" : "<EC Point x: " + this.x.fromRed().toString(16, 2) + " z: " + this.z.fromRed().toString(16, 2) + ">";
};
Point$1.prototype.isInfinity = function a199() {
  return this.z.cmpn(0) === 0;
};
Point$1.prototype.dbl = function a200() {
  var u2 = this.x.redAdd(this.z), c = u2.redSqr(), l2 = this.x.redSub(this.z), v2 = l2.redSqr(), p2 = c.redSub(v2), _ = c.redMul(v2), I2 = p2.redMul(v2.redAdd(this.curve.a24.redMul(p2)));
  return this.curve.point(_, I2);
};
Point$1.prototype.add = function a201() {
  throw new Error("Not supported on Montgomery curve");
};
Point$1.prototype.diffAdd = function a202(u2, c) {
  var l2 = this.x.redAdd(this.z), v2 = this.x.redSub(this.z), p2 = u2.x.redAdd(u2.z), _ = u2.x.redSub(u2.z), I2 = _.redMul(l2), P2 = p2.redMul(v2), $ = c.z.redMul(I2.redAdd(P2).redSqr()), F2 = c.x.redMul(I2.redISub(P2).redSqr());
  return this.curve.point($, F2);
};
Point$1.prototype.mul = function a203(u2) {
  for (var c = u2.clone(), l2 = this, v2 = this.curve.point(null, null), p2 = this, _ = []; c.cmpn(0) !== 0; c.iushrn(1))
    _.push(c.andln(1));
  for (var I2 = _.length - 1; I2 >= 0; I2--)
    _[I2] === 0 ? (l2 = l2.diffAdd(v2, p2), v2 = v2.dbl()) : (v2 = l2.diffAdd(v2, p2), l2 = l2.dbl());
  return v2;
};
Point$1.prototype.mulAdd = function a204() {
  throw new Error("Not supported on Montgomery curve");
};
Point$1.prototype.jumlAdd = function a205() {
  throw new Error("Not supported on Montgomery curve");
};
Point$1.prototype.eq = function a206(u2) {
  return this.getX().cmp(u2.getX()) === 0;
};
Point$1.prototype.normalize = function a207() {
  return this.x = this.x.redMul(this.z.redInvm()), this.z = this.curve.one, this;
};
Point$1.prototype.getX = function a208() {
  return this.normalize(), this.x.fromRed();
};
var utils$q = utils$v, BN$6 = bnExports$3, inherits$7 = inherits_browserExports, Base = base$1, assert$d = utils$q.assert;
function EdwardsCurve(a420) {
  this.twisted = (a420.a | 0) !== 1, this.mOneA = this.twisted && (a420.a | 0) === -1, this.extended = this.mOneA, Base.call(this, "edwards", a420), this.a = new BN$6(a420.a, 16).umod(this.red.m), this.a = this.a.toRed(this.red), this.c = new BN$6(a420.c, 16).toRed(this.red), this.c2 = this.c.redSqr(), this.d = new BN$6(a420.d, 16).toRed(this.red), this.dd = this.d.redAdd(this.d), assert$d(!this.twisted || this.c.fromRed().cmpn(1) === 0), this.oneC = (a420.c | 0) === 1;
}
inherits$7(EdwardsCurve, Base);
var edwards = EdwardsCurve;
EdwardsCurve.prototype._mulA = function a209(u2) {
  return this.mOneA ? u2.redNeg() : this.a.redMul(u2);
};
EdwardsCurve.prototype._mulC = function a210(u2) {
  return this.oneC ? u2 : this.c.redMul(u2);
};
EdwardsCurve.prototype.jpoint = function a211(u2, c, l2, v2) {
  return this.point(u2, c, l2, v2);
};
EdwardsCurve.prototype.pointFromX = function a212(u2, c) {
  u2 = new BN$6(u2, 16), u2.red || (u2 = u2.toRed(this.red));
  var l2 = u2.redSqr(), v2 = this.c2.redSub(this.a.redMul(l2)), p2 = this.one.redSub(this.c2.redMul(this.d).redMul(l2)), _ = v2.redMul(p2.redInvm()), I2 = _.redSqrt();
  if (I2.redSqr().redSub(_).cmp(this.zero) !== 0)
    throw new Error("invalid point");
  var P2 = I2.fromRed().isOdd();
  return (c && !P2 || !c && P2) && (I2 = I2.redNeg()), this.point(u2, I2);
};
EdwardsCurve.prototype.pointFromY = function a213(u2, c) {
  u2 = new BN$6(u2, 16), u2.red || (u2 = u2.toRed(this.red));
  var l2 = u2.redSqr(), v2 = l2.redSub(this.c2), p2 = l2.redMul(this.d).redMul(this.c2).redSub(this.a), _ = v2.redMul(p2.redInvm());
  if (_.cmp(this.zero) === 0) {
    if (c)
      throw new Error("invalid point");
    return this.point(this.zero, u2);
  }
  var I2 = _.redSqrt();
  if (I2.redSqr().redSub(_).cmp(this.zero) !== 0)
    throw new Error("invalid point");
  return I2.fromRed().isOdd() !== c && (I2 = I2.redNeg()), this.point(I2, u2);
};
EdwardsCurve.prototype.validate = function a214(u2) {
  if (u2.isInfinity())
    return true;
  u2.normalize();
  var c = u2.x.redSqr(), l2 = u2.y.redSqr(), v2 = c.redMul(this.a).redAdd(l2), p2 = this.c2.redMul(this.one.redAdd(this.d.redMul(c).redMul(l2)));
  return v2.cmp(p2) === 0;
};
function Point(a420, u2, c, l2, v2) {
  Base.BasePoint.call(this, a420, "projective"), u2 === null && c === null && l2 === null ? (this.x = this.curve.zero, this.y = this.curve.one, this.z = this.curve.one, this.t = this.curve.zero, this.zOne = true) : (this.x = new BN$6(u2, 16), this.y = new BN$6(c, 16), this.z = l2 ? new BN$6(l2, 16) : this.curve.one, this.t = v2 && new BN$6(v2, 16), this.x.red || (this.x = this.x.toRed(this.curve.red)), this.y.red || (this.y = this.y.toRed(this.curve.red)), this.z.red || (this.z = this.z.toRed(this.curve.red)), this.t && !this.t.red && (this.t = this.t.toRed(this.curve.red)), this.zOne = this.z === this.curve.one, this.curve.extended && !this.t && (this.t = this.x.redMul(this.y), this.zOne || (this.t = this.t.redMul(this.z.redInvm()))));
}
inherits$7(Point, Base.BasePoint);
EdwardsCurve.prototype.pointFromJSON = function a215(u2) {
  return Point.fromJSON(this, u2);
};
EdwardsCurve.prototype.point = function a216(u2, c, l2, v2) {
  return new Point(this, u2, c, l2, v2);
};
Point.fromJSON = function a217(u2, c) {
  return new Point(u2, c[0], c[1], c[2]);
};
Point.prototype.inspect = function a218() {
  return this.isInfinity() ? "<EC Point Infinity>" : "<EC Point x: " + this.x.fromRed().toString(16, 2) + " y: " + this.y.fromRed().toString(16, 2) + " z: " + this.z.fromRed().toString(16, 2) + ">";
};
Point.prototype.isInfinity = function a219() {
  return this.x.cmpn(0) === 0 && (this.y.cmp(this.z) === 0 || this.zOne && this.y.cmp(this.curve.c) === 0);
};
Point.prototype._extDbl = function a220() {
  var u2 = this.x.redSqr(), c = this.y.redSqr(), l2 = this.z.redSqr();
  l2 = l2.redIAdd(l2);
  var v2 = this.curve._mulA(u2), p2 = this.x.redAdd(this.y).redSqr().redISub(u2).redISub(c), _ = v2.redAdd(c), I2 = _.redSub(l2), P2 = v2.redSub(c), $ = p2.redMul(I2), F2 = _.redMul(P2), H2 = p2.redMul(P2), j = I2.redMul(_);
  return this.curve.point($, F2, j, H2);
};
Point.prototype._projDbl = function a221() {
  var u2 = this.x.redAdd(this.y).redSqr(), c = this.x.redSqr(), l2 = this.y.redSqr(), v2, p2, _, I2, P2, $;
  if (this.curve.twisted) {
    I2 = this.curve._mulA(c);
    var F2 = I2.redAdd(l2);
    this.zOne ? (v2 = u2.redSub(c).redSub(l2).redMul(F2.redSub(this.curve.two)), p2 = F2.redMul(I2.redSub(l2)), _ = F2.redSqr().redSub(F2).redSub(F2)) : (P2 = this.z.redSqr(), $ = F2.redSub(P2).redISub(P2), v2 = u2.redSub(c).redISub(l2).redMul($), p2 = F2.redMul(I2.redSub(l2)), _ = F2.redMul($));
  } else
    I2 = c.redAdd(l2), P2 = this.curve._mulC(this.z).redSqr(), $ = I2.redSub(P2).redSub(P2), v2 = this.curve._mulC(u2.redISub(I2)).redMul($), p2 = this.curve._mulC(I2).redMul(c.redISub(l2)), _ = I2.redMul($);
  return this.curve.point(v2, p2, _);
};
Point.prototype.dbl = function a222() {
  return this.isInfinity() ? this : this.curve.extended ? this._extDbl() : this._projDbl();
};
Point.prototype._extAdd = function a223(u2) {
  var c = this.y.redSub(this.x).redMul(u2.y.redSub(u2.x)), l2 = this.y.redAdd(this.x).redMul(u2.y.redAdd(u2.x)), v2 = this.t.redMul(this.curve.dd).redMul(u2.t), p2 = this.z.redMul(u2.z.redAdd(u2.z)), _ = l2.redSub(c), I2 = p2.redSub(v2), P2 = p2.redAdd(v2), $ = l2.redAdd(c), F2 = _.redMul(I2), H2 = P2.redMul($), j = _.redMul($), ee2 = I2.redMul(P2);
  return this.curve.point(F2, H2, ee2, j);
};
Point.prototype._projAdd = function a224(u2) {
  var c = this.z.redMul(u2.z), l2 = c.redSqr(), v2 = this.x.redMul(u2.x), p2 = this.y.redMul(u2.y), _ = this.curve.d.redMul(v2).redMul(p2), I2 = l2.redSub(_), P2 = l2.redAdd(_), $ = this.x.redAdd(this.y).redMul(u2.x.redAdd(u2.y)).redISub(v2).redISub(p2), F2 = c.redMul(I2).redMul($), H2, j;
  return this.curve.twisted ? (H2 = c.redMul(P2).redMul(p2.redSub(this.curve._mulA(v2))), j = I2.redMul(P2)) : (H2 = c.redMul(P2).redMul(p2.redSub(v2)), j = this.curve._mulC(I2).redMul(P2)), this.curve.point(F2, H2, j);
};
Point.prototype.add = function a225(u2) {
  return this.isInfinity() ? u2 : u2.isInfinity() ? this : this.curve.extended ? this._extAdd(u2) : this._projAdd(u2);
};
Point.prototype.mul = function a226(u2) {
  return this._hasDoubles(u2) ? this.curve._fixedNafMul(this, u2) : this.curve._wnafMul(this, u2);
};
Point.prototype.mulAdd = function a227(u2, c, l2) {
  return this.curve._wnafMulAdd(1, [this, c], [u2, l2], 2, false);
};
Point.prototype.jmulAdd = function a228(u2, c, l2) {
  return this.curve._wnafMulAdd(1, [this, c], [u2, l2], 2, true);
};
Point.prototype.normalize = function a229() {
  if (this.zOne)
    return this;
  var u2 = this.z.redInvm();
  return this.x = this.x.redMul(u2), this.y = this.y.redMul(u2), this.t && (this.t = this.t.redMul(u2)), this.z = this.curve.one, this.zOne = true, this;
};
Point.prototype.neg = function a230() {
  return this.curve.point(this.x.redNeg(), this.y, this.z, this.t && this.t.redNeg());
};
Point.prototype.getX = function a231() {
  return this.normalize(), this.x.fromRed();
};
Point.prototype.getY = function a232() {
  return this.normalize(), this.y.fromRed();
};
Point.prototype.eq = function a233(u2) {
  return this === u2 || this.getX().cmp(u2.getX()) === 0 && this.getY().cmp(u2.getY()) === 0;
};
Point.prototype.eqXToP = function a234(u2) {
  var c = u2.toRed(this.curve.red).redMul(this.z);
  if (this.x.cmp(c) === 0)
    return true;
  for (var l2 = u2.clone(), v2 = this.curve.redN.redMul(this.z); ; ) {
    if (l2.iadd(this.curve.n), l2.cmp(this.curve.p) >= 0)
      return false;
    if (c.redIAdd(v2), this.x.cmp(c) === 0)
      return true;
  }
};
Point.prototype.toP = Point.prototype.normalize;
Point.prototype.mixedAdd = Point.prototype.add;
(function(a420) {
  var u2 = a420;
  u2.base = base$1, u2.short = short, u2.mont = mont, u2.edwards = edwards;
})(curve);
var curves$1 = {}, hash$2 = {}, utils$p = {}, assert$c = minimalisticAssert, inherits$6 = inherits_browserExports;
utils$p.inherits = inherits$6;
function isSurrogatePair(a420, u2) {
  return (a420.charCodeAt(u2) & 64512) !== 55296 || u2 < 0 || u2 + 1 >= a420.length ? false : (a420.charCodeAt(u2 + 1) & 64512) === 56320;
}
function toArray(a420, u2) {
  if (Array.isArray(a420))
    return a420.slice();
  if (!a420)
    return [];
  var c = [];
  if (typeof a420 == "string") {
    if (u2) {
      if (u2 === "hex")
        for (a420 = a420.replace(/[^a-z0-9]+/ig, ""), a420.length % 2 !== 0 && (a420 = "0" + a420), v2 = 0; v2 < a420.length; v2 += 2)
          c.push(parseInt(a420[v2] + a420[v2 + 1], 16));
    } else
      for (var l2 = 0, v2 = 0; v2 < a420.length; v2++) {
        var p2 = a420.charCodeAt(v2);
        p2 < 128 ? c[l2++] = p2 : p2 < 2048 ? (c[l2++] = p2 >> 6 | 192, c[l2++] = p2 & 63 | 128) : isSurrogatePair(a420, v2) ? (p2 = 65536 + ((p2 & 1023) << 10) + (a420.charCodeAt(++v2) & 1023), c[l2++] = p2 >> 18 | 240, c[l2++] = p2 >> 12 & 63 | 128, c[l2++] = p2 >> 6 & 63 | 128, c[l2++] = p2 & 63 | 128) : (c[l2++] = p2 >> 12 | 224, c[l2++] = p2 >> 6 & 63 | 128, c[l2++] = p2 & 63 | 128);
      }
  } else
    for (v2 = 0; v2 < a420.length; v2++)
      c[v2] = a420[v2] | 0;
  return c;
}
utils$p.toArray = toArray;
function toHex$1(a420) {
  for (var u2 = "", c = 0; c < a420.length; c++)
    u2 += zero2(a420[c].toString(16));
  return u2;
}
utils$p.toHex = toHex$1;
function htonl(a420) {
  var u2 = a420 >>> 24 | a420 >>> 8 & 65280 | a420 << 8 & 16711680 | (a420 & 255) << 24;
  return u2 >>> 0;
}
utils$p.htonl = htonl;
function toHex32(a420, u2) {
  for (var c = "", l2 = 0; l2 < a420.length; l2++) {
    var v2 = a420[l2];
    u2 === "little" && (v2 = htonl(v2)), c += zero8(v2.toString(16));
  }
  return c;
}
utils$p.toHex32 = toHex32;
function zero2(a420) {
  return a420.length === 1 ? "0" + a420 : a420;
}
utils$p.zero2 = zero2;
function zero8(a420) {
  return a420.length === 7 ? "0" + a420 : a420.length === 6 ? "00" + a420 : a420.length === 5 ? "000" + a420 : a420.length === 4 ? "0000" + a420 : a420.length === 3 ? "00000" + a420 : a420.length === 2 ? "000000" + a420 : a420.length === 1 ? "0000000" + a420 : a420;
}
utils$p.zero8 = zero8;
function join32(a420, u2, c, l2) {
  var v2 = c - u2;
  assert$c(v2 % 4 === 0);
  for (var p2 = new Array(v2 / 4), _ = 0, I2 = u2; _ < p2.length; _++, I2 += 4) {
    var P2;
    l2 === "big" ? P2 = a420[I2] << 24 | a420[I2 + 1] << 16 | a420[I2 + 2] << 8 | a420[I2 + 3] : P2 = a420[I2 + 3] << 24 | a420[I2 + 2] << 16 | a420[I2 + 1] << 8 | a420[I2], p2[_] = P2 >>> 0;
  }
  return p2;
}
utils$p.join32 = join32;
function split32(a420, u2) {
  for (var c = new Array(a420.length * 4), l2 = 0, v2 = 0; l2 < a420.length; l2++, v2 += 4) {
    var p2 = a420[l2];
    u2 === "big" ? (c[v2] = p2 >>> 24, c[v2 + 1] = p2 >>> 16 & 255, c[v2 + 2] = p2 >>> 8 & 255, c[v2 + 3] = p2 & 255) : (c[v2 + 3] = p2 >>> 24, c[v2 + 2] = p2 >>> 16 & 255, c[v2 + 1] = p2 >>> 8 & 255, c[v2] = p2 & 255);
  }
  return c;
}
utils$p.split32 = split32;
function rotr32$1(a420, u2) {
  return a420 >>> u2 | a420 << 32 - u2;
}
utils$p.rotr32 = rotr32$1;
function rotl32$2(a420, u2) {
  return a420 << u2 | a420 >>> 32 - u2;
}
utils$p.rotl32 = rotl32$2;
function sum32$3(a420, u2) {
  return a420 + u2 >>> 0;
}
utils$p.sum32 = sum32$3;
function sum32_3$1(a420, u2, c) {
  return a420 + u2 + c >>> 0;
}
utils$p.sum32_3 = sum32_3$1;
function sum32_4$2(a420, u2, c, l2) {
  return a420 + u2 + c + l2 >>> 0;
}
utils$p.sum32_4 = sum32_4$2;
function sum32_5$2(a420, u2, c, l2, v2) {
  return a420 + u2 + c + l2 + v2 >>> 0;
}
utils$p.sum32_5 = sum32_5$2;
function sum64$1(a420, u2, c, l2) {
  var v2 = a420[u2], p2 = a420[u2 + 1], _ = l2 + p2 >>> 0, I2 = (_ < l2 ? 1 : 0) + c + v2;
  a420[u2] = I2 >>> 0, a420[u2 + 1] = _;
}
utils$p.sum64 = sum64$1;
function sum64_hi$1(a420, u2, c, l2) {
  var v2 = u2 + l2 >>> 0, p2 = (v2 < u2 ? 1 : 0) + a420 + c;
  return p2 >>> 0;
}
utils$p.sum64_hi = sum64_hi$1;
function sum64_lo$1(a420, u2, c, l2) {
  var v2 = u2 + l2;
  return v2 >>> 0;
}
utils$p.sum64_lo = sum64_lo$1;
function sum64_4_hi$1(a420, u2, c, l2, v2, p2, _, I2) {
  var P2 = 0, $ = u2;
  $ = $ + l2 >>> 0, P2 += $ < u2 ? 1 : 0, $ = $ + p2 >>> 0, P2 += $ < p2 ? 1 : 0, $ = $ + I2 >>> 0, P2 += $ < I2 ? 1 : 0;
  var F2 = a420 + c + v2 + _ + P2;
  return F2 >>> 0;
}
utils$p.sum64_4_hi = sum64_4_hi$1;
function sum64_4_lo$1(a420, u2, c, l2, v2, p2, _, I2) {
  var P2 = u2 + l2 + p2 + I2;
  return P2 >>> 0;
}
utils$p.sum64_4_lo = sum64_4_lo$1;
function sum64_5_hi$1(a420, u2, c, l2, v2, p2, _, I2, P2, $) {
  var F2 = 0, H2 = u2;
  H2 = H2 + l2 >>> 0, F2 += H2 < u2 ? 1 : 0, H2 = H2 + p2 >>> 0, F2 += H2 < p2 ? 1 : 0, H2 = H2 + I2 >>> 0, F2 += H2 < I2 ? 1 : 0, H2 = H2 + $ >>> 0, F2 += H2 < $ ? 1 : 0;
  var j = a420 + c + v2 + _ + P2 + F2;
  return j >>> 0;
}
utils$p.sum64_5_hi = sum64_5_hi$1;
function sum64_5_lo$1(a420, u2, c, l2, v2, p2, _, I2, P2, $) {
  var F2 = u2 + l2 + p2 + I2 + $;
  return F2 >>> 0;
}
utils$p.sum64_5_lo = sum64_5_lo$1;
function rotr64_hi$1(a420, u2, c) {
  var l2 = u2 << 32 - c | a420 >>> c;
  return l2 >>> 0;
}
utils$p.rotr64_hi = rotr64_hi$1;
function rotr64_lo$1(a420, u2, c) {
  var l2 = a420 << 32 - c | u2 >>> c;
  return l2 >>> 0;
}
utils$p.rotr64_lo = rotr64_lo$1;
function shr64_hi$1(a420, u2, c) {
  return a420 >>> c;
}
utils$p.shr64_hi = shr64_hi$1;
function shr64_lo$1(a420, u2, c) {
  var l2 = a420 << 32 - c | u2 >>> c;
  return l2 >>> 0;
}
utils$p.shr64_lo = shr64_lo$1;
var common$5 = {}, utils$o = utils$p, assert$b = minimalisticAssert;
function BlockHash$4() {
  this.pending = null, this.pendingTotal = 0, this.blockSize = this.constructor.blockSize, this.outSize = this.constructor.outSize, this.hmacStrength = this.constructor.hmacStrength, this.padLength = this.constructor.padLength / 8, this.endian = "big", this._delta8 = this.blockSize / 8, this._delta32 = this.blockSize / 32;
}
common$5.BlockHash = BlockHash$4;
BlockHash$4.prototype.update = function a235(u2, c) {
  if (u2 = utils$o.toArray(u2, c), this.pending ? this.pending = this.pending.concat(u2) : this.pending = u2, this.pendingTotal += u2.length, this.pending.length >= this._delta8) {
    u2 = this.pending;
    var l2 = u2.length % this._delta8;
    this.pending = u2.slice(u2.length - l2, u2.length), this.pending.length === 0 && (this.pending = null), u2 = utils$o.join32(u2, 0, u2.length - l2, this.endian);
    for (var v2 = 0; v2 < u2.length; v2 += this._delta32)
      this._update(u2, v2, v2 + this._delta32);
  }
  return this;
};
BlockHash$4.prototype.digest = function a236(u2) {
  return this.update(this._pad()), assert$b(this.pending === null), this._digest(u2);
};
BlockHash$4.prototype._pad = function a237() {
  var u2 = this.pendingTotal, c = this._delta8, l2 = c - (u2 + this.padLength) % c, v2 = new Array(l2 + this.padLength);
  v2[0] = 128;
  for (var p2 = 1; p2 < l2; p2++)
    v2[p2] = 0;
  if (u2 <<= 3, this.endian === "big") {
    for (var _ = 8; _ < this.padLength; _++)
      v2[p2++] = 0;
    v2[p2++] = 0, v2[p2++] = 0, v2[p2++] = 0, v2[p2++] = 0, v2[p2++] = u2 >>> 24 & 255, v2[p2++] = u2 >>> 16 & 255, v2[p2++] = u2 >>> 8 & 255, v2[p2++] = u2 & 255;
  } else
    for (v2[p2++] = u2 & 255, v2[p2++] = u2 >>> 8 & 255, v2[p2++] = u2 >>> 16 & 255, v2[p2++] = u2 >>> 24 & 255, v2[p2++] = 0, v2[p2++] = 0, v2[p2++] = 0, v2[p2++] = 0, _ = 8; _ < this.padLength; _++)
      v2[p2++] = 0;
  return v2;
};
var sha = {}, common$4 = {}, utils$n = utils$p, rotr32 = utils$n.rotr32;
function ft_1$1(a420, u2, c, l2) {
  if (a420 === 0)
    return ch32$1(u2, c, l2);
  if (a420 === 1 || a420 === 3)
    return p32(u2, c, l2);
  if (a420 === 2)
    return maj32$1(u2, c, l2);
}
common$4.ft_1 = ft_1$1;
function ch32$1(a420, u2, c) {
  return a420 & u2 ^ ~a420 & c;
}
common$4.ch32 = ch32$1;
function maj32$1(a420, u2, c) {
  return a420 & u2 ^ a420 & c ^ u2 & c;
}
common$4.maj32 = maj32$1;
function p32(a420, u2, c) {
  return a420 ^ u2 ^ c;
}
common$4.p32 = p32;
function s0_256$1(a420) {
  return rotr32(a420, 2) ^ rotr32(a420, 13) ^ rotr32(a420, 22);
}
common$4.s0_256 = s0_256$1;
function s1_256$1(a420) {
  return rotr32(a420, 6) ^ rotr32(a420, 11) ^ rotr32(a420, 25);
}
common$4.s1_256 = s1_256$1;
function g0_256$1(a420) {
  return rotr32(a420, 7) ^ rotr32(a420, 18) ^ a420 >>> 3;
}
common$4.g0_256 = g0_256$1;
function g1_256$1(a420) {
  return rotr32(a420, 17) ^ rotr32(a420, 19) ^ a420 >>> 10;
}
common$4.g1_256 = g1_256$1;
var utils$m = utils$p, common$3 = common$5, shaCommon$1 = common$4, rotl32$1 = utils$m.rotl32, sum32$2 = utils$m.sum32, sum32_5$1 = utils$m.sum32_5, ft_1 = shaCommon$1.ft_1, BlockHash$3 = common$3.BlockHash, sha1_K = [1518500249, 1859775393, 2400959708, 3395469782];
function SHA1() {
  if (!(this instanceof SHA1))
    return new SHA1();
  BlockHash$3.call(this), this.h = [1732584193, 4023233417, 2562383102, 271733878, 3285377520], this.W = new Array(80);
}
utils$m.inherits(SHA1, BlockHash$3);
var _1 = SHA1;
SHA1.blockSize = 512;
SHA1.outSize = 160;
SHA1.hmacStrength = 80;
SHA1.padLength = 64;
SHA1.prototype._update = function a238(u2, c) {
  for (var l2 = this.W, v2 = 0; v2 < 16; v2++)
    l2[v2] = u2[c + v2];
  for (; v2 < l2.length; v2++)
    l2[v2] = rotl32$1(l2[v2 - 3] ^ l2[v2 - 8] ^ l2[v2 - 14] ^ l2[v2 - 16], 1);
  var p2 = this.h[0], _ = this.h[1], I2 = this.h[2], P2 = this.h[3], $ = this.h[4];
  for (v2 = 0; v2 < l2.length; v2++) {
    var F2 = ~~(v2 / 20), H2 = sum32_5$1(rotl32$1(p2, 5), ft_1(F2, _, I2, P2), $, l2[v2], sha1_K[F2]);
    $ = P2, P2 = I2, I2 = rotl32$1(_, 30), _ = p2, p2 = H2;
  }
  this.h[0] = sum32$2(this.h[0], p2), this.h[1] = sum32$2(this.h[1], _), this.h[2] = sum32$2(this.h[2], I2), this.h[3] = sum32$2(this.h[3], P2), this.h[4] = sum32$2(this.h[4], $);
};
SHA1.prototype._digest = function a239(u2) {
  return u2 === "hex" ? utils$m.toHex32(this.h, "big") : utils$m.split32(this.h, "big");
};
var utils$l = utils$p, common$2 = common$5, shaCommon = common$4, assert$a = minimalisticAssert, sum32$1 = utils$l.sum32, sum32_4$1 = utils$l.sum32_4, sum32_5 = utils$l.sum32_5, ch32 = shaCommon.ch32, maj32 = shaCommon.maj32, s0_256 = shaCommon.s0_256, s1_256 = shaCommon.s1_256, g0_256 = shaCommon.g0_256, g1_256 = shaCommon.g1_256, BlockHash$2 = common$2.BlockHash, sha256_K = [1116352408, 1899447441, 3049323471, 3921009573, 961987163, 1508970993, 2453635748, 2870763221, 3624381080, 310598401, 607225278, 1426881987, 1925078388, 2162078206, 2614888103, 3248222580, 3835390401, 4022224774, 264347078, 604807628, 770255983, 1249150122, 1555081692, 1996064986, 2554220882, 2821834349, 2952996808, 3210313671, 3336571891, 3584528711, 113926993, 338241895, 666307205, 773529912, 1294757372, 1396182291, 1695183700, 1986661051, 2177026350, 2456956037, 2730485921, 2820302411, 3259730800, 3345764771, 3516065817, 3600352804, 4094571909, 275423344, 430227734, 506948616, 659060556, 883997877, 958139571, 1322822218, 1537002063, 1747873779, 1955562222, 2024104815, 2227730452, 2361852424, 2428436474, 2756734187, 3204031479, 3329325298];
function SHA256$1() {
  if (!(this instanceof SHA256$1))
    return new SHA256$1();
  BlockHash$2.call(this), this.h = [1779033703, 3144134277, 1013904242, 2773480762, 1359893119, 2600822924, 528734635, 1541459225], this.k = sha256_K, this.W = new Array(64);
}
utils$l.inherits(SHA256$1, BlockHash$2);
var _256 = SHA256$1;
SHA256$1.blockSize = 512;
SHA256$1.outSize = 256;
SHA256$1.hmacStrength = 192;
SHA256$1.padLength = 64;
SHA256$1.prototype._update = function a240(u2, c) {
  for (var l2 = this.W, v2 = 0; v2 < 16; v2++)
    l2[v2] = u2[c + v2];
  for (; v2 < l2.length; v2++)
    l2[v2] = sum32_4$1(g1_256(l2[v2 - 2]), l2[v2 - 7], g0_256(l2[v2 - 15]), l2[v2 - 16]);
  var p2 = this.h[0], _ = this.h[1], I2 = this.h[2], P2 = this.h[3], $ = this.h[4], F2 = this.h[5], H2 = this.h[6], j = this.h[7];
  for (assert$a(this.k.length === l2.length), v2 = 0; v2 < l2.length; v2++) {
    var ee2 = sum32_5(j, s1_256($), ch32($, F2, H2), this.k[v2], l2[v2]), X2 = sum32$1(s0_256(p2), maj32(p2, _, I2));
    j = H2, H2 = F2, F2 = $, $ = sum32$1(P2, ee2), P2 = I2, I2 = _, _ = p2, p2 = sum32$1(ee2, X2);
  }
  this.h[0] = sum32$1(this.h[0], p2), this.h[1] = sum32$1(this.h[1], _), this.h[2] = sum32$1(this.h[2], I2), this.h[3] = sum32$1(this.h[3], P2), this.h[4] = sum32$1(this.h[4], $), this.h[5] = sum32$1(this.h[5], F2), this.h[6] = sum32$1(this.h[6], H2), this.h[7] = sum32$1(this.h[7], j);
};
SHA256$1.prototype._digest = function a241(u2) {
  return u2 === "hex" ? utils$l.toHex32(this.h, "big") : utils$l.split32(this.h, "big");
};
var utils$k = utils$p, SHA256 = _256;
function SHA224() {
  if (!(this instanceof SHA224))
    return new SHA224();
  SHA256.call(this), this.h = [3238371032, 914150663, 812702999, 4144912697, 4290775857, 1750603025, 1694076839, 3204075428];
}
utils$k.inherits(SHA224, SHA256);
var _224 = SHA224;
SHA224.blockSize = 512;
SHA224.outSize = 224;
SHA224.hmacStrength = 192;
SHA224.padLength = 64;
SHA224.prototype._digest = function a242(u2) {
  return u2 === "hex" ? utils$k.toHex32(this.h.slice(0, 7), "big") : utils$k.split32(this.h.slice(0, 7), "big");
};
var utils$j = utils$p, common$1 = common$5, assert$9 = minimalisticAssert, rotr64_hi = utils$j.rotr64_hi, rotr64_lo = utils$j.rotr64_lo, shr64_hi = utils$j.shr64_hi, shr64_lo = utils$j.shr64_lo, sum64 = utils$j.sum64, sum64_hi = utils$j.sum64_hi, sum64_lo = utils$j.sum64_lo, sum64_4_hi = utils$j.sum64_4_hi, sum64_4_lo = utils$j.sum64_4_lo, sum64_5_hi = utils$j.sum64_5_hi, sum64_5_lo = utils$j.sum64_5_lo, BlockHash$1 = common$1.BlockHash, sha512_K = [1116352408, 3609767458, 1899447441, 602891725, 3049323471, 3964484399, 3921009573, 2173295548, 961987163, 4081628472, 1508970993, 3053834265, 2453635748, 2937671579, 2870763221, 3664609560, 3624381080, 2734883394, 310598401, 1164996542, 607225278, 1323610764, 1426881987, 3590304994, 1925078388, 4068182383, 2162078206, 991336113, 2614888103, 633803317, 3248222580, 3479774868, 3835390401, 2666613458, 4022224774, 944711139, 264347078, 2341262773, 604807628, 2007800933, 770255983, 1495990901, 1249150122, 1856431235, 1555081692, 3175218132, 1996064986, 2198950837, 2554220882, 3999719339, 2821834349, 766784016, 2952996808, 2566594879, 3210313671, 3203337956, 3336571891, 1034457026, 3584528711, 2466948901, 113926993, 3758326383, 338241895, 168717936, 666307205, 1188179964, 773529912, 1546045734, 1294757372, 1522805485, 1396182291, 2643833823, 1695183700, 2343527390, 1986661051, 1014477480, 2177026350, 1206759142, 2456956037, 344077627, 2730485921, 1290863460, 2820302411, 3158454273, 3259730800, 3505952657, 3345764771, 106217008, 3516065817, 3606008344, 3600352804, 1432725776, 4094571909, 1467031594, 275423344, 851169720, 430227734, 3100823752, 506948616, 1363258195, 659060556, 3750685593, 883997877, 3785050280, 958139571, 3318307427, 1322822218, 3812723403, 1537002063, 2003034995, 1747873779, 3602036899, 1955562222, 1575990012, 2024104815, 1125592928, 2227730452, 2716904306, 2361852424, 442776044, 2428436474, 593698344, 2756734187, 3733110249, 3204031479, 2999351573, 3329325298, 3815920427, 3391569614, 3928383900, 3515267271, 566280711, 3940187606, 3454069534, 4118630271, 4000239992, 116418474, 1914138554, 174292421, 2731055270, 289380356, 3203993006, 460393269, 320620315, 685471733, 587496836, 852142971, 1086792851, 1017036298, 365543100, 1126000580, 2618297676, 1288033470, 3409855158, 1501505948, 4234509866, 1607167915, 987167468, 1816402316, 1246189591];
function SHA512$1() {
  if (!(this instanceof SHA512$1))
    return new SHA512$1();
  BlockHash$1.call(this), this.h = [1779033703, 4089235720, 3144134277, 2227873595, 1013904242, 4271175723, 2773480762, 1595750129, 1359893119, 2917565137, 2600822924, 725511199, 528734635, 4215389547, 1541459225, 327033209], this.k = sha512_K, this.W = new Array(160);
}
utils$j.inherits(SHA512$1, BlockHash$1);
var _512 = SHA512$1;
SHA512$1.blockSize = 1024;
SHA512$1.outSize = 512;
SHA512$1.hmacStrength = 192;
SHA512$1.padLength = 128;
SHA512$1.prototype._prepareBlock = function a243(u2, c) {
  for (var l2 = this.W, v2 = 0; v2 < 32; v2++)
    l2[v2] = u2[c + v2];
  for (; v2 < l2.length; v2 += 2) {
    var p2 = g1_512_hi(l2[v2 - 4], l2[v2 - 3]), _ = g1_512_lo(l2[v2 - 4], l2[v2 - 3]), I2 = l2[v2 - 14], P2 = l2[v2 - 13], $ = g0_512_hi(l2[v2 - 30], l2[v2 - 29]), F2 = g0_512_lo(l2[v2 - 30], l2[v2 - 29]), H2 = l2[v2 - 32], j = l2[v2 - 31];
    l2[v2] = sum64_4_hi(p2, _, I2, P2, $, F2, H2, j), l2[v2 + 1] = sum64_4_lo(p2, _, I2, P2, $, F2, H2, j);
  }
};
SHA512$1.prototype._update = function a244(u2, c) {
  this._prepareBlock(u2, c);
  var l2 = this.W, v2 = this.h[0], p2 = this.h[1], _ = this.h[2], I2 = this.h[3], P2 = this.h[4], $ = this.h[5], F2 = this.h[6], H2 = this.h[7], j = this.h[8], ee2 = this.h[9], X2 = this.h[10], ie2 = this.h[11], Q2 = this.h[12], ne2 = this.h[13], Z2 = this.h[14], de2 = this.h[15];
  assert$9(this.k.length === l2.length);
  for (var pe2 = 0; pe2 < l2.length; pe2 += 2) {
    var le2 = Z2, be2 = de2, ke2 = s1_512_hi(j, ee2), Te2 = s1_512_lo(j, ee2), q2 = ch64_hi(j, ee2, X2, ie2, Q2), z2 = ch64_lo(j, ee2, X2, ie2, Q2, ne2), C2 = this.k[pe2], b = this.k[pe2 + 1], E2 = l2[pe2], k = l2[pe2 + 1], O2 = sum64_5_hi(le2, be2, ke2, Te2, q2, z2, C2, b, E2, k), A2 = sum64_5_lo(le2, be2, ke2, Te2, q2, z2, C2, b, E2, k);
    le2 = s0_512_hi(v2, p2), be2 = s0_512_lo(v2, p2), ke2 = maj64_hi(v2, p2, _, I2, P2), Te2 = maj64_lo(v2, p2, _, I2, P2, $);
    var x2 = sum64_hi(le2, be2, ke2, Te2), Y2 = sum64_lo(le2, be2, ke2, Te2);
    Z2 = Q2, de2 = ne2, Q2 = X2, ne2 = ie2, X2 = j, ie2 = ee2, j = sum64_hi(F2, H2, O2, A2), ee2 = sum64_lo(H2, H2, O2, A2), F2 = P2, H2 = $, P2 = _, $ = I2, _ = v2, I2 = p2, v2 = sum64_hi(O2, A2, x2, Y2), p2 = sum64_lo(O2, A2, x2, Y2);
  }
  sum64(this.h, 0, v2, p2), sum64(this.h, 2, _, I2), sum64(this.h, 4, P2, $), sum64(this.h, 6, F2, H2), sum64(this.h, 8, j, ee2), sum64(this.h, 10, X2, ie2), sum64(this.h, 12, Q2, ne2), sum64(this.h, 14, Z2, de2);
};
SHA512$1.prototype._digest = function a245(u2) {
  return u2 === "hex" ? utils$j.toHex32(this.h, "big") : utils$j.split32(this.h, "big");
};
function ch64_hi(a420, u2, c, l2, v2) {
  var p2 = a420 & c ^ ~a420 & v2;
  return p2 < 0 && (p2 += 4294967296), p2;
}
function ch64_lo(a420, u2, c, l2, v2, p2) {
  var _ = u2 & l2 ^ ~u2 & p2;
  return _ < 0 && (_ += 4294967296), _;
}
function maj64_hi(a420, u2, c, l2, v2) {
  var p2 = a420 & c ^ a420 & v2 ^ c & v2;
  return p2 < 0 && (p2 += 4294967296), p2;
}
function maj64_lo(a420, u2, c, l2, v2, p2) {
  var _ = u2 & l2 ^ u2 & p2 ^ l2 & p2;
  return _ < 0 && (_ += 4294967296), _;
}
function s0_512_hi(a420, u2) {
  var c = rotr64_hi(a420, u2, 28), l2 = rotr64_hi(u2, a420, 2), v2 = rotr64_hi(u2, a420, 7), p2 = c ^ l2 ^ v2;
  return p2 < 0 && (p2 += 4294967296), p2;
}
function s0_512_lo(a420, u2) {
  var c = rotr64_lo(a420, u2, 28), l2 = rotr64_lo(u2, a420, 2), v2 = rotr64_lo(u2, a420, 7), p2 = c ^ l2 ^ v2;
  return p2 < 0 && (p2 += 4294967296), p2;
}
function s1_512_hi(a420, u2) {
  var c = rotr64_hi(a420, u2, 14), l2 = rotr64_hi(a420, u2, 18), v2 = rotr64_hi(u2, a420, 9), p2 = c ^ l2 ^ v2;
  return p2 < 0 && (p2 += 4294967296), p2;
}
function s1_512_lo(a420, u2) {
  var c = rotr64_lo(a420, u2, 14), l2 = rotr64_lo(a420, u2, 18), v2 = rotr64_lo(u2, a420, 9), p2 = c ^ l2 ^ v2;
  return p2 < 0 && (p2 += 4294967296), p2;
}
function g0_512_hi(a420, u2) {
  var c = rotr64_hi(a420, u2, 1), l2 = rotr64_hi(a420, u2, 8), v2 = shr64_hi(a420, u2, 7), p2 = c ^ l2 ^ v2;
  return p2 < 0 && (p2 += 4294967296), p2;
}
function g0_512_lo(a420, u2) {
  var c = rotr64_lo(a420, u2, 1), l2 = rotr64_lo(a420, u2, 8), v2 = shr64_lo(a420, u2, 7), p2 = c ^ l2 ^ v2;
  return p2 < 0 && (p2 += 4294967296), p2;
}
function g1_512_hi(a420, u2) {
  var c = rotr64_hi(a420, u2, 19), l2 = rotr64_hi(u2, a420, 29), v2 = shr64_hi(a420, u2, 6), p2 = c ^ l2 ^ v2;
  return p2 < 0 && (p2 += 4294967296), p2;
}
function g1_512_lo(a420, u2) {
  var c = rotr64_lo(a420, u2, 19), l2 = rotr64_lo(u2, a420, 29), v2 = shr64_lo(a420, u2, 6), p2 = c ^ l2 ^ v2;
  return p2 < 0 && (p2 += 4294967296), p2;
}
var utils$i = utils$p, SHA512 = _512;
function SHA384() {
  if (!(this instanceof SHA384))
    return new SHA384();
  SHA512.call(this), this.h = [3418070365, 3238371032, 1654270250, 914150663, 2438529370, 812702999, 355462360, 4144912697, 1731405415, 4290775857, 2394180231, 1750603025, 3675008525, 1694076839, 1203062813, 3204075428];
}
utils$i.inherits(SHA384, SHA512);
var _384 = SHA384;
SHA384.blockSize = 1024;
SHA384.outSize = 384;
SHA384.hmacStrength = 192;
SHA384.padLength = 128;
SHA384.prototype._digest = function a246(u2) {
  return u2 === "hex" ? utils$i.toHex32(this.h.slice(0, 12), "big") : utils$i.split32(this.h.slice(0, 12), "big");
};
sha.sha1 = _1;
sha.sha224 = _224;
sha.sha256 = _256;
sha.sha384 = _384;
sha.sha512 = _512;
var ripemd = {}, utils$h = utils$p, common = common$5, rotl32 = utils$h.rotl32, sum32 = utils$h.sum32, sum32_3 = utils$h.sum32_3, sum32_4 = utils$h.sum32_4, BlockHash = common.BlockHash;
function RIPEMD160() {
  if (!(this instanceof RIPEMD160))
    return new RIPEMD160();
  BlockHash.call(this), this.h = [1732584193, 4023233417, 2562383102, 271733878, 3285377520], this.endian = "little";
}
utils$h.inherits(RIPEMD160, BlockHash);
ripemd.ripemd160 = RIPEMD160;
RIPEMD160.blockSize = 512;
RIPEMD160.outSize = 160;
RIPEMD160.hmacStrength = 192;
RIPEMD160.padLength = 64;
RIPEMD160.prototype._update = function a247(u2, c) {
  for (var l2 = this.h[0], v2 = this.h[1], p2 = this.h[2], _ = this.h[3], I2 = this.h[4], P2 = l2, $ = v2, F2 = p2, H2 = _, j = I2, ee2 = 0; ee2 < 80; ee2++) {
    var X2 = sum32(rotl32(sum32_4(l2, f(ee2, v2, p2, _), u2[r$1[ee2] + c], K(ee2)), s$1[ee2]), I2);
    l2 = I2, I2 = _, _ = rotl32(p2, 10), p2 = v2, v2 = X2, X2 = sum32(rotl32(sum32_4(P2, f(79 - ee2, $, F2, H2), u2[rh[ee2] + c], Kh(ee2)), sh[ee2]), j), P2 = j, j = H2, H2 = rotl32(F2, 10), F2 = $, $ = X2;
  }
  X2 = sum32_3(this.h[1], p2, H2), this.h[1] = sum32_3(this.h[2], _, j), this.h[2] = sum32_3(this.h[3], I2, P2), this.h[3] = sum32_3(this.h[4], l2, $), this.h[4] = sum32_3(this.h[0], v2, F2), this.h[0] = X2;
};
RIPEMD160.prototype._digest = function a248(u2) {
  return u2 === "hex" ? utils$h.toHex32(this.h, "little") : utils$h.split32(this.h, "little");
};
function f(a420, u2, c, l2) {
  return a420 <= 15 ? u2 ^ c ^ l2 : a420 <= 31 ? u2 & c | ~u2 & l2 : a420 <= 47 ? (u2 | ~c) ^ l2 : a420 <= 63 ? u2 & l2 | c & ~l2 : u2 ^ (c | ~l2);
}
function K(a420) {
  return a420 <= 15 ? 0 : a420 <= 31 ? 1518500249 : a420 <= 47 ? 1859775393 : a420 <= 63 ? 2400959708 : 2840853838;
}
function Kh(a420) {
  return a420 <= 15 ? 1352829926 : a420 <= 31 ? 1548603684 : a420 <= 47 ? 1836072691 : a420 <= 63 ? 2053994217 : 0;
}
var r$1 = [0, 1, 2, 3, 4, 5, 6, 7, 8, 9, 10, 11, 12, 13, 14, 15, 7, 4, 13, 1, 10, 6, 15, 3, 12, 0, 9, 5, 2, 14, 11, 8, 3, 10, 14, 4, 9, 15, 8, 1, 2, 7, 0, 6, 13, 11, 5, 12, 1, 9, 11, 10, 0, 8, 12, 4, 13, 3, 7, 15, 14, 5, 6, 2, 4, 0, 5, 9, 7, 12, 2, 10, 14, 1, 3, 8, 11, 6, 15, 13], rh = [5, 14, 7, 0, 9, 2, 11, 4, 13, 6, 15, 8, 1, 10, 3, 12, 6, 11, 3, 7, 0, 13, 5, 10, 14, 15, 8, 12, 4, 9, 1, 2, 15, 5, 1, 3, 7, 14, 6, 9, 11, 8, 12, 2, 10, 0, 4, 13, 8, 6, 4, 1, 3, 11, 15, 0, 5, 12, 2, 13, 9, 7, 10, 14, 12, 15, 10, 4, 1, 5, 8, 7, 6, 2, 13, 14, 0, 3, 9, 11], s$1 = [11, 14, 15, 12, 5, 8, 7, 9, 11, 13, 14, 15, 6, 7, 9, 8, 7, 6, 8, 13, 11, 9, 7, 15, 7, 12, 15, 9, 11, 7, 13, 12, 11, 13, 6, 7, 14, 9, 13, 15, 14, 8, 13, 6, 5, 12, 7, 5, 11, 12, 14, 15, 14, 15, 9, 8, 9, 14, 5, 6, 8, 6, 5, 12, 9, 15, 5, 11, 6, 8, 13, 12, 5, 12, 13, 14, 11, 8, 5, 6], sh = [8, 9, 9, 11, 13, 15, 15, 5, 7, 7, 8, 11, 14, 14, 12, 6, 9, 13, 15, 7, 12, 8, 9, 11, 7, 7, 12, 7, 6, 15, 13, 11, 9, 7, 15, 11, 8, 6, 6, 14, 12, 13, 5, 14, 13, 13, 7, 5, 15, 5, 8, 11, 14, 14, 6, 14, 6, 9, 12, 9, 12, 5, 15, 8, 8, 5, 12, 9, 12, 5, 14, 6, 8, 13, 6, 5, 15, 13, 11, 11], utils$g = utils$p, assert$8 = minimalisticAssert;
function Hmac(a420, u2, c) {
  if (!(this instanceof Hmac))
    return new Hmac(a420, u2, c);
  this.Hash = a420, this.blockSize = a420.blockSize / 8, this.outSize = a420.outSize / 8, this.inner = null, this.outer = null, this._init(utils$g.toArray(u2, c));
}
var hmac = Hmac;
Hmac.prototype._init = function a249(u2) {
  u2.length > this.blockSize && (u2 = new this.Hash().update(u2).digest()), assert$8(u2.length <= this.blockSize);
  for (var c = u2.length; c < this.blockSize; c++)
    u2.push(0);
  for (c = 0; c < u2.length; c++)
    u2[c] ^= 54;
  for (this.inner = new this.Hash().update(u2), c = 0; c < u2.length; c++)
    u2[c] ^= 106;
  this.outer = new this.Hash().update(u2);
};
Hmac.prototype.update = function a250(u2, c) {
  return this.inner.update(u2, c), this;
};
Hmac.prototype.digest = function a251(u2) {
  return this.outer.update(this.inner.digest()), this.outer.digest(u2);
};
(function(a420) {
  var u2 = a420;
  u2.utils = utils$p, u2.common = common$5, u2.sha = sha, u2.ripemd = ripemd, u2.hmac = hmac, u2.sha1 = u2.sha.sha1, u2.sha256 = u2.sha.sha256, u2.sha224 = u2.sha.sha224, u2.sha384 = u2.sha.sha384, u2.sha512 = u2.sha.sha512, u2.ripemd160 = u2.ripemd.ripemd160;
})(hash$2);
var secp256k1, hasRequiredSecp256k1;
function requireSecp256k1() {
  return hasRequiredSecp256k1 || (hasRequiredSecp256k1 = 1, secp256k1 = { doubles: { step: 4, points: [["e60fce93b59e9ec53011aabc21c23e97b2a31369b87a5ae9c44ee89e2a6dec0a", "f7e3507399e595929db99f34f57937101296891e44d23f0be1f32cce69616821"], ["8282263212c609d9ea2a6e3e172de238d8c39cabd5ac1ca10646e23fd5f51508", "11f8a8098557dfe45e8256e830b60ace62d613ac2f7b17bed31b6eaff6e26caf"], ["175e159f728b865a72f99cc6c6fc846de0b93833fd2222ed73fce5b551e5b739", "d3506e0d9e3c79eba4ef97a51ff71f5eacb5955add24345c6efa6ffee9fed695"], ["363d90d447b00c9c99ceac05b6262ee053441c7e55552ffe526bad8f83ff4640", "4e273adfc732221953b445397f3363145b9a89008199ecb62003c7f3bee9de9"], ["8b4b5f165df3c2be8c6244b5b745638843e4a781a15bcd1b69f79a55dffdf80c", "4aad0a6f68d308b4b3fbd7813ab0da04f9e336546162ee56b3eff0c65fd4fd36"], ["723cbaa6e5db996d6bf771c00bd548c7b700dbffa6c0e77bcb6115925232fcda", "96e867b5595cc498a921137488824d6e2660a0653779494801dc069d9eb39f5f"], ["eebfa4d493bebf98ba5feec812c2d3b50947961237a919839a533eca0e7dd7fa", "5d9a8ca3970ef0f269ee7edaf178089d9ae4cdc3a711f712ddfd4fdae1de8999"], ["100f44da696e71672791d0a09b7bde459f1215a29b3c03bfefd7835b39a48db0", "cdd9e13192a00b772ec8f3300c090666b7ff4a18ff5195ac0fbd5cd62bc65a09"], ["e1031be262c7ed1b1dc9227a4a04c017a77f8d4464f3b3852c8acde6e534fd2d", "9d7061928940405e6bb6a4176597535af292dd419e1ced79a44f18f29456a00d"], ["feea6cae46d55b530ac2839f143bd7ec5cf8b266a41d6af52d5e688d9094696d", "e57c6b6c97dce1bab06e4e12bf3ecd5c981c8957cc41442d3155debf18090088"], ["da67a91d91049cdcb367be4be6ffca3cfeed657d808583de33fa978bc1ec6cb1", "9bacaa35481642bc41f463f7ec9780e5dec7adc508f740a17e9ea8e27a68be1d"], ["53904faa0b334cdda6e000935ef22151ec08d0f7bb11069f57545ccc1a37b7c0", "5bc087d0bc80106d88c9eccac20d3c1c13999981e14434699dcb096b022771c8"], ["8e7bcd0bd35983a7719cca7764ca906779b53a043a9b8bcaeff959f43ad86047", "10b7770b2a3da4b3940310420ca9514579e88e2e47fd68b3ea10047e8460372a"], ["385eed34c1cdff21e6d0818689b81bde71a7f4f18397e6690a841e1599c43862", "283bebc3e8ea23f56701de19e9ebf4576b304eec2086dc8cc0458fe5542e5453"], ["6f9d9b803ecf191637c73a4413dfa180fddf84a5947fbc9c606ed86c3fac3a7", "7c80c68e603059ba69b8e2a30e45c4d47ea4dd2f5c281002d86890603a842160"], ["3322d401243c4e2582a2147c104d6ecbf774d163db0f5e5313b7e0e742d0e6bd", "56e70797e9664ef5bfb019bc4ddaf9b72805f63ea2873af624f3a2e96c28b2a0"], ["85672c7d2de0b7da2bd1770d89665868741b3f9af7643397721d74d28134ab83", "7c481b9b5b43b2eb6374049bfa62c2e5e77f17fcc5298f44c8e3094f790313a6"], ["948bf809b1988a46b06c9f1919413b10f9226c60f668832ffd959af60c82a0a", "53a562856dcb6646dc6b74c5d1c3418c6d4dff08c97cd2bed4cb7f88d8c8e589"], ["6260ce7f461801c34f067ce0f02873a8f1b0e44dfc69752accecd819f38fd8e8", "bc2da82b6fa5b571a7f09049776a1ef7ecd292238051c198c1a84e95b2b4ae17"], ["e5037de0afc1d8d43d8348414bbf4103043ec8f575bfdc432953cc8d2037fa2d", "4571534baa94d3b5f9f98d09fb990bddbd5f5b03ec481f10e0e5dc841d755bda"], ["e06372b0f4a207adf5ea905e8f1771b4e7e8dbd1c6a6c5b725866a0ae4fce725", "7a908974bce18cfe12a27bb2ad5a488cd7484a7787104870b27034f94eee31dd"], ["213c7a715cd5d45358d0bbf9dc0ce02204b10bdde2a3f58540ad6908d0559754", "4b6dad0b5ae462507013ad06245ba190bb4850f5f36a7eeddff2c27534b458f2"], ["4e7c272a7af4b34e8dbb9352a5419a87e2838c70adc62cddf0cc3a3b08fbd53c", "17749c766c9d0b18e16fd09f6def681b530b9614bff7dd33e0b3941817dcaae6"], ["fea74e3dbe778b1b10f238ad61686aa5c76e3db2be43057632427e2840fb27b6", "6e0568db9b0b13297cf674deccb6af93126b596b973f7b77701d3db7f23cb96f"], ["76e64113f677cf0e10a2570d599968d31544e179b760432952c02a4417bdde39", "c90ddf8dee4e95cf577066d70681f0d35e2a33d2b56d2032b4b1752d1901ac01"], ["c738c56b03b2abe1e8281baa743f8f9a8f7cc643df26cbee3ab150242bcbb891", "893fb578951ad2537f718f2eacbfbbbb82314eef7880cfe917e735d9699a84c3"], ["d895626548b65b81e264c7637c972877d1d72e5f3a925014372e9f6588f6c14b", "febfaa38f2bc7eae728ec60818c340eb03428d632bb067e179363ed75d7d991f"], ["b8da94032a957518eb0f6433571e8761ceffc73693e84edd49150a564f676e03", "2804dfa44805a1e4d7c99cc9762808b092cc584d95ff3b511488e4e74efdf6e7"], ["e80fea14441fb33a7d8adab9475d7fab2019effb5156a792f1a11778e3c0df5d", "eed1de7f638e00771e89768ca3ca94472d155e80af322ea9fcb4291b6ac9ec78"], ["a301697bdfcd704313ba48e51d567543f2a182031efd6915ddc07bbcc4e16070", "7370f91cfb67e4f5081809fa25d40f9b1735dbf7c0a11a130c0d1a041e177ea1"], ["90ad85b389d6b936463f9d0512678de208cc330b11307fffab7ac63e3fb04ed4", "e507a3620a38261affdcbd9427222b839aefabe1582894d991d4d48cb6ef150"], ["8f68b9d2f63b5f339239c1ad981f162ee88c5678723ea3351b7b444c9ec4c0da", "662a9f2dba063986de1d90c2b6be215dbbea2cfe95510bfdf23cbf79501fff82"], ["e4f3fb0176af85d65ff99ff9198c36091f48e86503681e3e6686fd5053231e11", "1e63633ad0ef4f1c1661a6d0ea02b7286cc7e74ec951d1c9822c38576feb73bc"], ["8c00fa9b18ebf331eb961537a45a4266c7034f2f0d4e1d0716fb6eae20eae29e", "efa47267fea521a1a9dc343a3736c974c2fadafa81e36c54e7d2a4c66702414b"], ["e7a26ce69dd4829f3e10cec0a9e98ed3143d084f308b92c0997fddfc60cb3e41", "2a758e300fa7984b471b006a1aafbb18d0a6b2c0420e83e20e8a9421cf2cfd51"], ["b6459e0ee3662ec8d23540c223bcbdc571cbcb967d79424f3cf29eb3de6b80ef", "67c876d06f3e06de1dadf16e5661db3c4b3ae6d48e35b2ff30bf0b61a71ba45"], ["d68a80c8280bb840793234aa118f06231d6f1fc67e73c5a5deda0f5b496943e8", "db8ba9fff4b586d00c4b1f9177b0e28b5b0e7b8f7845295a294c84266b133120"], ["324aed7df65c804252dc0270907a30b09612aeb973449cea4095980fc28d3d5d", "648a365774b61f2ff130c0c35aec1f4f19213b0c7e332843967224af96ab7c84"], ["4df9c14919cde61f6d51dfdbe5fee5dceec4143ba8d1ca888e8bd373fd054c96", "35ec51092d8728050974c23a1d85d4b5d506cdc288490192ebac06cad10d5d"], ["9c3919a84a474870faed8a9c1cc66021523489054d7f0308cbfc99c8ac1f98cd", "ddb84f0f4a4ddd57584f044bf260e641905326f76c64c8e6be7e5e03d4fc599d"], ["6057170b1dd12fdf8de05f281d8e06bb91e1493a8b91d4cc5a21382120a959e5", "9a1af0b26a6a4807add9a2daf71df262465152bc3ee24c65e899be932385a2a8"], ["a576df8e23a08411421439a4518da31880cef0fba7d4df12b1a6973eecb94266", "40a6bf20e76640b2c92b97afe58cd82c432e10a7f514d9f3ee8be11ae1b28ec8"], ["7778a78c28dec3e30a05fe9629de8c38bb30d1f5cf9a3a208f763889be58ad71", "34626d9ab5a5b22ff7098e12f2ff580087b38411ff24ac563b513fc1fd9f43ac"], ["928955ee637a84463729fd30e7afd2ed5f96274e5ad7e5cb09eda9c06d903ac", "c25621003d3f42a827b78a13093a95eeac3d26efa8a8d83fc5180e935bcd091f"], ["85d0fef3ec6db109399064f3a0e3b2855645b4a907ad354527aae75163d82751", "1f03648413a38c0be29d496e582cf5663e8751e96877331582c237a24eb1f962"], ["ff2b0dce97eece97c1c9b6041798b85dfdfb6d8882da20308f5404824526087e", "493d13fef524ba188af4c4dc54d07936c7b7ed6fb90e2ceb2c951e01f0c29907"], ["827fbbe4b1e880ea9ed2b2e6301b212b57f1ee148cd6dd28780e5e2cf856e241", "c60f9c923c727b0b71bef2c67d1d12687ff7a63186903166d605b68baec293ec"], ["eaa649f21f51bdbae7be4ae34ce6e5217a58fdce7f47f9aa7f3b58fa2120e2b3", "be3279ed5bbbb03ac69a80f89879aa5a01a6b965f13f7e59d47a5305ba5ad93d"], ["e4a42d43c5cf169d9391df6decf42ee541b6d8f0c9a137401e23632dda34d24f", "4d9f92e716d1c73526fc99ccfb8ad34ce886eedfa8d8e4f13a7f7131deba9414"], ["1ec80fef360cbdd954160fadab352b6b92b53576a88fea4947173b9d4300bf19", "aeefe93756b5340d2f3a4958a7abbf5e0146e77f6295a07b671cdc1cc107cefd"], ["146a778c04670c2f91b00af4680dfa8bce3490717d58ba889ddb5928366642be", "b318e0ec3354028add669827f9d4b2870aaa971d2f7e5ed1d0b297483d83efd0"], ["fa50c0f61d22e5f07e3acebb1aa07b128d0012209a28b9776d76a8793180eef9", "6b84c6922397eba9b72cd2872281a68a5e683293a57a213b38cd8d7d3f4f2811"], ["da1d61d0ca721a11b1a5bf6b7d88e8421a288ab5d5bba5220e53d32b5f067ec2", "8157f55a7c99306c79c0766161c91e2966a73899d279b48a655fba0f1ad836f1"], ["a8e282ff0c9706907215ff98e8fd416615311de0446f1e062a73b0610d064e13", "7f97355b8db81c09abfb7f3c5b2515888b679a3e50dd6bd6cef7c73111f4cc0c"], ["174a53b9c9a285872d39e56e6913cab15d59b1fa512508c022f382de8319497c", "ccc9dc37abfc9c1657b4155f2c47f9e6646b3a1d8cb9854383da13ac079afa73"], ["959396981943785c3d3e57edf5018cdbe039e730e4918b3d884fdff09475b7ba", "2e7e552888c331dd8ba0386a4b9cd6849c653f64c8709385e9b8abf87524f2fd"], ["d2a63a50ae401e56d645a1153b109a8fcca0a43d561fba2dbb51340c9d82b151", "e82d86fb6443fcb7565aee58b2948220a70f750af484ca52d4142174dcf89405"], ["64587e2335471eb890ee7896d7cfdc866bacbdbd3839317b3436f9b45617e073", "d99fcdd5bf6902e2ae96dd6447c299a185b90a39133aeab358299e5e9faf6589"], ["8481bde0e4e4d885b3a546d3e549de042f0aa6cea250e7fd358d6c86dd45e458", "38ee7b8cba5404dd84a25bf39cecb2ca900a79c42b262e556d64b1b59779057e"], ["13464a57a78102aa62b6979ae817f4637ffcfed3c4b1ce30bcd6303f6caf666b", "69be159004614580ef7e433453ccb0ca48f300a81d0942e13f495a907f6ecc27"], ["bc4a9df5b713fe2e9aef430bcc1dc97a0cd9ccede2f28588cada3a0d2d83f366", "d3a81ca6e785c06383937adf4b798caa6e8a9fbfa547b16d758d666581f33c1"], ["8c28a97bf8298bc0d23d8c749452a32e694b65e30a9472a3954ab30fe5324caa", "40a30463a3305193378fedf31f7cc0eb7ae784f0451cb9459e71dc73cbef9482"], ["8ea9666139527a8c1dd94ce4f071fd23c8b350c5a4bb33748c4ba111faccae0", "620efabbc8ee2782e24e7c0cfb95c5d735b783be9cf0f8e955af34a30e62b945"], ["dd3625faef5ba06074669716bbd3788d89bdde815959968092f76cc4eb9a9787", "7a188fa3520e30d461da2501045731ca941461982883395937f68d00c644a573"], ["f710d79d9eb962297e4f6232b40e8f7feb2bc63814614d692c12de752408221e", "ea98e67232d3b3295d3b535532115ccac8612c721851617526ae47a9c77bfc82"]] }, naf: { wnd: 7, points: [["f9308a019258c31049344f85f89d5229b531c845836f99b08601f113bce036f9", "388f7b0f632de8140fe337e62a37f3566500a99934c2231b6cb9fd7584b8e672"], ["2f8bde4d1a07209355b4a7250a5c5128e88b84bddc619ab7cba8d569b240efe4", "d8ac222636e5e3d6d4dba9dda6c9c426f788271bab0d6840dca87d3aa6ac62d6"], ["5cbdf0646e5db4eaa398f365f2ea7a0e3d419b7e0330e39ce92bddedcac4f9bc", "6aebca40ba255960a3178d6d861a54dba813d0b813fde7b5a5082628087264da"], ["acd484e2f0c7f65309ad178a9f559abde09796974c57e714c35f110dfc27ccbe", "cc338921b0a7d9fd64380971763b61e9add888a4375f8e0f05cc262ac64f9c37"], ["774ae7f858a9411e5ef4246b70c65aac5649980be5c17891bbec17895da008cb", "d984a032eb6b5e190243dd56d7b7b365372db1e2dff9d6a8301d74c9c953c61b"], ["f28773c2d975288bc7d1d205c3748651b075fbc6610e58cddeeddf8f19405aa8", "ab0902e8d880a89758212eb65cdaf473a1a06da521fa91f29b5cb52db03ed81"], ["d7924d4f7d43ea965a465ae3095ff41131e5946f3c85f79e44adbcf8e27e080e", "581e2872a86c72a683842ec228cc6defea40af2bd896d3a5c504dc9ff6a26b58"], ["defdea4cdb677750a420fee807eacf21eb9898ae79b9768766e4faa04a2d4a34", "4211ab0694635168e997b0ead2a93daeced1f4a04a95c0f6cfb199f69e56eb77"], ["2b4ea0a797a443d293ef5cff444f4979f06acfebd7e86d277475656138385b6c", "85e89bc037945d93b343083b5a1c86131a01f60c50269763b570c854e5c09b7a"], ["352bbf4a4cdd12564f93fa332ce333301d9ad40271f8107181340aef25be59d5", "321eb4075348f534d59c18259dda3e1f4a1b3b2e71b1039c67bd3d8bcf81998c"], ["2fa2104d6b38d11b0230010559879124e42ab8dfeff5ff29dc9cdadd4ecacc3f", "2de1068295dd865b64569335bd5dd80181d70ecfc882648423ba76b532b7d67"], ["9248279b09b4d68dab21a9b066edda83263c3d84e09572e269ca0cd7f5453714", "73016f7bf234aade5d1aa71bdea2b1ff3fc0de2a887912ffe54a32ce97cb3402"], ["daed4f2be3a8bf278e70132fb0beb7522f570e144bf615c07e996d443dee8729", "a69dce4a7d6c98e8d4a1aca87ef8d7003f83c230f3afa726ab40e52290be1c55"], ["c44d12c7065d812e8acf28d7cbb19f9011ecd9e9fdf281b0e6a3b5e87d22e7db", "2119a460ce326cdc76c45926c982fdac0e106e861edf61c5a039063f0e0e6482"], ["6a245bf6dc698504c89a20cfded60853152b695336c28063b61c65cbd269e6b4", "e022cf42c2bd4a708b3f5126f16a24ad8b33ba48d0423b6efd5e6348100d8a82"], ["1697ffa6fd9de627c077e3d2fe541084ce13300b0bec1146f95ae57f0d0bd6a5", "b9c398f186806f5d27561506e4557433a2cf15009e498ae7adee9d63d01b2396"], ["605bdb019981718b986d0f07e834cb0d9deb8360ffb7f61df982345ef27a7479", "2972d2de4f8d20681a78d93ec96fe23c26bfae84fb14db43b01e1e9056b8c49"], ["62d14dab4150bf497402fdc45a215e10dcb01c354959b10cfe31c7e9d87ff33d", "80fc06bd8cc5b01098088a1950eed0db01aa132967ab472235f5642483b25eaf"], ["80c60ad0040f27dade5b4b06c408e56b2c50e9f56b9b8b425e555c2f86308b6f", "1c38303f1cc5c30f26e66bad7fe72f70a65eed4cbe7024eb1aa01f56430bd57a"], ["7a9375ad6167ad54aa74c6348cc54d344cc5dc9487d847049d5eabb0fa03c8fb", "d0e3fa9eca8726909559e0d79269046bdc59ea10c70ce2b02d499ec224dc7f7"], ["d528ecd9b696b54c907a9ed045447a79bb408ec39b68df504bb51f459bc3ffc9", "eecf41253136e5f99966f21881fd656ebc4345405c520dbc063465b521409933"], ["49370a4b5f43412ea25f514e8ecdad05266115e4a7ecb1387231808f8b45963", "758f3f41afd6ed428b3081b0512fd62a54c3f3afbb5b6764b653052a12949c9a"], ["77f230936ee88cbbd73df930d64702ef881d811e0e1498e2f1c13eb1fc345d74", "958ef42a7886b6400a08266e9ba1b37896c95330d97077cbbe8eb3c7671c60d6"], ["f2dac991cc4ce4b9ea44887e5c7c0bce58c80074ab9d4dbaeb28531b7739f530", "e0dedc9b3b2f8dad4da1f32dec2531df9eb5fbeb0598e4fd1a117dba703a3c37"], ["463b3d9f662621fb1b4be8fbbe2520125a216cdfc9dae3debcba4850c690d45b", "5ed430d78c296c3543114306dd8622d7c622e27c970a1de31cb377b01af7307e"], ["f16f804244e46e2a09232d4aff3b59976b98fac14328a2d1a32496b49998f247", "cedabd9b82203f7e13d206fcdf4e33d92a6c53c26e5cce26d6579962c4e31df6"], ["caf754272dc84563b0352b7a14311af55d245315ace27c65369e15f7151d41d1", "cb474660ef35f5f2a41b643fa5e460575f4fa9b7962232a5c32f908318a04476"], ["2600ca4b282cb986f85d0f1709979d8b44a09c07cb86d7c124497bc86f082120", "4119b88753c15bd6a693b03fcddbb45d5ac6be74ab5f0ef44b0be9475a7e4b40"], ["7635ca72d7e8432c338ec53cd12220bc01c48685e24f7dc8c602a7746998e435", "91b649609489d613d1d5e590f78e6d74ecfc061d57048bad9e76f302c5b9c61"], ["754e3239f325570cdbbf4a87deee8a66b7f2b33479d468fbc1a50743bf56cc18", "673fb86e5bda30fb3cd0ed304ea49a023ee33d0197a695d0c5d98093c536683"], ["e3e6bd1071a1e96aff57859c82d570f0330800661d1c952f9fe2694691d9b9e8", "59c9e0bba394e76f40c0aa58379a3cb6a5a2283993e90c4167002af4920e37f5"], ["186b483d056a033826ae73d88f732985c4ccb1f32ba35f4b4cc47fdcf04aa6eb", "3b952d32c67cf77e2e17446e204180ab21fb8090895138b4a4a797f86e80888b"], ["df9d70a6b9876ce544c98561f4be4f725442e6d2b737d9c91a8321724ce0963f", "55eb2dafd84d6ccd5f862b785dc39d4ab157222720ef9da217b8c45cf2ba2417"], ["5edd5cc23c51e87a497ca815d5dce0f8ab52554f849ed8995de64c5f34ce7143", "efae9c8dbc14130661e8cec030c89ad0c13c66c0d17a2905cdc706ab7399a868"], ["290798c2b6476830da12fe02287e9e777aa3fba1c355b17a722d362f84614fba", "e38da76dcd440621988d00bcf79af25d5b29c094db2a23146d003afd41943e7a"], ["af3c423a95d9f5b3054754efa150ac39cd29552fe360257362dfdecef4053b45", "f98a3fd831eb2b749a93b0e6f35cfb40c8cd5aa667a15581bc2feded498fd9c6"], ["766dbb24d134e745cccaa28c99bf274906bb66b26dcf98df8d2fed50d884249a", "744b1152eacbe5e38dcc887980da38b897584a65fa06cedd2c924f97cbac5996"], ["59dbf46f8c94759ba21277c33784f41645f7b44f6c596a58ce92e666191abe3e", "c534ad44175fbc300f4ea6ce648309a042ce739a7919798cd85e216c4a307f6e"], ["f13ada95103c4537305e691e74e9a4a8dd647e711a95e73cb62dc6018cfd87b8", "e13817b44ee14de663bf4bc808341f326949e21a6a75c2570778419bdaf5733d"], ["7754b4fa0e8aced06d4167a2c59cca4cda1869c06ebadfb6488550015a88522c", "30e93e864e669d82224b967c3020b8fa8d1e4e350b6cbcc537a48b57841163a2"], ["948dcadf5990e048aa3874d46abef9d701858f95de8041d2a6828c99e2262519", "e491a42537f6e597d5d28a3224b1bc25df9154efbd2ef1d2cbba2cae5347d57e"], ["7962414450c76c1689c7b48f8202ec37fb224cf5ac0bfa1570328a8a3d7c77ab", "100b610ec4ffb4760d5c1fc133ef6f6b12507a051f04ac5760afa5b29db83437"], ["3514087834964b54b15b160644d915485a16977225b8847bb0dd085137ec47ca", "ef0afbb2056205448e1652c48e8127fc6039e77c15c2378b7e7d15a0de293311"], ["d3cc30ad6b483e4bc79ce2c9dd8bc54993e947eb8df787b442943d3f7b527eaf", "8b378a22d827278d89c5e9be8f9508ae3c2ad46290358630afb34db04eede0a4"], ["1624d84780732860ce1c78fcbfefe08b2b29823db913f6493975ba0ff4847610", "68651cf9b6da903e0914448c6cd9d4ca896878f5282be4c8cc06e2a404078575"], ["733ce80da955a8a26902c95633e62a985192474b5af207da6df7b4fd5fc61cd4", "f5435a2bd2badf7d485a4d8b8db9fcce3e1ef8e0201e4578c54673bc1dc5ea1d"], ["15d9441254945064cf1a1c33bbd3b49f8966c5092171e699ef258dfab81c045c", "d56eb30b69463e7234f5137b73b84177434800bacebfc685fc37bbe9efe4070d"], ["a1d0fcf2ec9de675b612136e5ce70d271c21417c9d2b8aaaac138599d0717940", "edd77f50bcb5a3cab2e90737309667f2641462a54070f3d519212d39c197a629"], ["e22fbe15c0af8ccc5780c0735f84dbe9a790badee8245c06c7ca37331cb36980", "a855babad5cd60c88b430a69f53a1a7a38289154964799be43d06d77d31da06"], ["311091dd9860e8e20ee13473c1155f5f69635e394704eaa74009452246cfa9b3", "66db656f87d1f04fffd1f04788c06830871ec5a64feee685bd80f0b1286d8374"], ["34c1fd04d301be89b31c0442d3e6ac24883928b45a9340781867d4232ec2dbdf", "9414685e97b1b5954bd46f730174136d57f1ceeb487443dc5321857ba73abee"], ["f219ea5d6b54701c1c14de5b557eb42a8d13f3abbcd08affcc2a5e6b049b8d63", "4cb95957e83d40b0f73af4544cccf6b1f4b08d3c07b27fb8d8c2962a400766d1"], ["d7b8740f74a8fbaab1f683db8f45de26543a5490bca627087236912469a0b448", "fa77968128d9c92ee1010f337ad4717eff15db5ed3c049b3411e0315eaa4593b"], ["32d31c222f8f6f0ef86f7c98d3a3335ead5bcd32abdd94289fe4d3091aa824bf", "5f3032f5892156e39ccd3d7915b9e1da2e6dac9e6f26e961118d14b8462e1661"], ["7461f371914ab32671045a155d9831ea8793d77cd59592c4340f86cbc18347b5", "8ec0ba238b96bec0cbdddcae0aa442542eee1ff50c986ea6b39847b3cc092ff6"], ["ee079adb1df1860074356a25aa38206a6d716b2c3e67453d287698bad7b2b2d6", "8dc2412aafe3be5c4c5f37e0ecc5f9f6a446989af04c4e25ebaac479ec1c8c1e"], ["16ec93e447ec83f0467b18302ee620f7e65de331874c9dc72bfd8616ba9da6b5", "5e4631150e62fb40d0e8c2a7ca5804a39d58186a50e497139626778e25b0674d"], ["eaa5f980c245f6f038978290afa70b6bd8855897f98b6aa485b96065d537bd99", "f65f5d3e292c2e0819a528391c994624d784869d7e6ea67fb18041024edc07dc"], ["78c9407544ac132692ee1910a02439958ae04877151342ea96c4b6b35a49f51", "f3e0319169eb9b85d5404795539a5e68fa1fbd583c064d2462b675f194a3ddb4"], ["494f4be219a1a77016dcd838431aea0001cdc8ae7a6fc688726578d9702857a5", "42242a969283a5f339ba7f075e36ba2af925ce30d767ed6e55f4b031880d562c"], ["a598a8030da6d86c6bc7f2f5144ea549d28211ea58faa70ebf4c1e665c1fe9b5", "204b5d6f84822c307e4b4a7140737aec23fc63b65b35f86a10026dbd2d864e6b"], ["c41916365abb2b5d09192f5f2dbeafec208f020f12570a184dbadc3e58595997", "4f14351d0087efa49d245b328984989d5caf9450f34bfc0ed16e96b58fa9913"], ["841d6063a586fa475a724604da03bc5b92a2e0d2e0a36acfe4c73a5514742881", "73867f59c0659e81904f9a1c7543698e62562d6744c169ce7a36de01a8d6154"], ["5e95bb399a6971d376026947f89bde2f282b33810928be4ded112ac4d70e20d5", "39f23f366809085beebfc71181313775a99c9aed7d8ba38b161384c746012865"], ["36e4641a53948fd476c39f8a99fd974e5ec07564b5315d8bf99471bca0ef2f66", "d2424b1b1abe4eb8164227b085c9aa9456ea13493fd563e06fd51cf5694c78fc"], ["336581ea7bfbbb290c191a2f507a41cf5643842170e914faeab27c2c579f726", "ead12168595fe1be99252129b6e56b3391f7ab1410cd1e0ef3dcdcabd2fda224"], ["8ab89816dadfd6b6a1f2634fcf00ec8403781025ed6890c4849742706bd43ede", "6fdcef09f2f6d0a044e654aef624136f503d459c3e89845858a47a9129cdd24e"], ["1e33f1a746c9c5778133344d9299fcaa20b0938e8acff2544bb40284b8c5fb94", "60660257dd11b3aa9c8ed618d24edff2306d320f1d03010e33a7d2057f3b3b6"], ["85b7c1dcb3cec1b7ee7f30ded79dd20a0ed1f4cc18cbcfcfa410361fd8f08f31", "3d98a9cdd026dd43f39048f25a8847f4fcafad1895d7a633c6fed3c35e999511"], ["29df9fbd8d9e46509275f4b125d6d45d7fbe9a3b878a7af872a2800661ac5f51", "b4c4fe99c775a606e2d8862179139ffda61dc861c019e55cd2876eb2a27d84b"], ["a0b1cae06b0a847a3fea6e671aaf8adfdfe58ca2f768105c8082b2e449fce252", "ae434102edde0958ec4b19d917a6a28e6b72da1834aff0e650f049503a296cf2"], ["4e8ceafb9b3e9a136dc7ff67e840295b499dfb3b2133e4ba113f2e4c0e121e5", "cf2174118c8b6d7a4b48f6d534ce5c79422c086a63460502b827ce62a326683c"], ["d24a44e047e19b6f5afb81c7ca2f69080a5076689a010919f42725c2b789a33b", "6fb8d5591b466f8fc63db50f1c0f1c69013f996887b8244d2cdec417afea8fa3"], ["ea01606a7a6c9cdd249fdfcfacb99584001edd28abbab77b5104e98e8e3b35d4", "322af4908c7312b0cfbfe369f7a7b3cdb7d4494bc2823700cfd652188a3ea98d"], ["af8addbf2b661c8a6c6328655eb96651252007d8c5ea31be4ad196de8ce2131f", "6749e67c029b85f52a034eafd096836b2520818680e26ac8f3dfbcdb71749700"], ["e3ae1974566ca06cc516d47e0fb165a674a3dabcfca15e722f0e3450f45889", "2aeabe7e4531510116217f07bf4d07300de97e4874f81f533420a72eeb0bd6a4"], ["591ee355313d99721cf6993ffed1e3e301993ff3ed258802075ea8ced397e246", "b0ea558a113c30bea60fc4775460c7901ff0b053d25ca2bdeee98f1a4be5d196"], ["11396d55fda54c49f19aa97318d8da61fa8584e47b084945077cf03255b52984", "998c74a8cd45ac01289d5833a7beb4744ff536b01b257be4c5767bea93ea57a4"], ["3c5d2a1ba39c5a1790000738c9e0c40b8dcdfd5468754b6405540157e017aa7a", "b2284279995a34e2f9d4de7396fc18b80f9b8b9fdd270f6661f79ca4c81bd257"], ["cc8704b8a60a0defa3a99a7299f2e9c3fbc395afb04ac078425ef8a1793cc030", "bdd46039feed17881d1e0862db347f8cf395b74fc4bcdc4e940b74e3ac1f1b13"], ["c533e4f7ea8555aacd9777ac5cad29b97dd4defccc53ee7ea204119b2889b197", "6f0a256bc5efdf429a2fb6242f1a43a2d9b925bb4a4b3a26bb8e0f45eb596096"], ["c14f8f2ccb27d6f109f6d08d03cc96a69ba8c34eec07bbcf566d48e33da6593", "c359d6923bb398f7fd4473e16fe1c28475b740dd098075e6c0e8649113dc3a38"], ["a6cbc3046bc6a450bac24789fa17115a4c9739ed75f8f21ce441f72e0b90e6ef", "21ae7f4680e889bb130619e2c0f95a360ceb573c70603139862afd617fa9b9f"], ["347d6d9a02c48927ebfb86c1359b1caf130a3c0267d11ce6344b39f99d43cc38", "60ea7f61a353524d1c987f6ecec92f086d565ab687870cb12689ff1e31c74448"], ["da6545d2181db8d983f7dcb375ef5866d47c67b1bf31c8cf855ef7437b72656a", "49b96715ab6878a79e78f07ce5680c5d6673051b4935bd897fea824b77dc208a"], ["c40747cc9d012cb1a13b8148309c6de7ec25d6945d657146b9d5994b8feb1111", "5ca560753be2a12fc6de6caf2cb489565db936156b9514e1bb5e83037e0fa2d4"], ["4e42c8ec82c99798ccf3a610be870e78338c7f713348bd34c8203ef4037f3502", "7571d74ee5e0fb92a7a8b33a07783341a5492144cc54bcc40a94473693606437"], ["3775ab7089bc6af823aba2e1af70b236d251cadb0c86743287522a1b3b0dedea", "be52d107bcfa09d8bcb9736a828cfa7fac8db17bf7a76a2c42ad961409018cf7"], ["cee31cbf7e34ec379d94fb814d3d775ad954595d1314ba8846959e3e82f74e26", "8fd64a14c06b589c26b947ae2bcf6bfa0149ef0be14ed4d80f448a01c43b1c6d"], ["b4f9eaea09b6917619f6ea6a4eb5464efddb58fd45b1ebefcdc1a01d08b47986", "39e5c9925b5a54b07433a4f18c61726f8bb131c012ca542eb24a8ac07200682a"], ["d4263dfc3d2df923a0179a48966d30ce84e2515afc3dccc1b77907792ebcc60e", "62dfaf07a0f78feb30e30d6295853ce189e127760ad6cf7fae164e122a208d54"], ["48457524820fa65a4f8d35eb6930857c0032acc0a4a2de422233eeda897612c4", "25a748ab367979d98733c38a1fa1c2e7dc6cc07db2d60a9ae7a76aaa49bd0f77"], ["dfeeef1881101f2cb11644f3a2afdfc2045e19919152923f367a1767c11cceda", "ecfb7056cf1de042f9420bab396793c0c390bde74b4bbdff16a83ae09a9a7517"], ["6d7ef6b17543f8373c573f44e1f389835d89bcbc6062ced36c82df83b8fae859", "cd450ec335438986dfefa10c57fea9bcc521a0959b2d80bbf74b190dca712d10"], ["e75605d59102a5a2684500d3b991f2e3f3c88b93225547035af25af66e04541f", "f5c54754a8f71ee540b9b48728473e314f729ac5308b06938360990e2bfad125"], ["eb98660f4c4dfaa06a2be453d5020bc99a0c2e60abe388457dd43fefb1ed620c", "6cb9a8876d9cb8520609af3add26cd20a0a7cd8a9411131ce85f44100099223e"], ["13e87b027d8514d35939f2e6892b19922154596941888336dc3563e3b8dba942", "fef5a3c68059a6dec5d624114bf1e91aac2b9da568d6abeb2570d55646b8adf1"], ["ee163026e9fd6fe017c38f06a5be6fc125424b371ce2708e7bf4491691e5764a", "1acb250f255dd61c43d94ccc670d0f58f49ae3fa15b96623e5430da0ad6c62b2"], ["b268f5ef9ad51e4d78de3a750c2dc89b1e626d43505867999932e5db33af3d80", "5f310d4b3c99b9ebb19f77d41c1dee018cf0d34fd4191614003e945a1216e423"], ["ff07f3118a9df035e9fad85eb6c7bfe42b02f01ca99ceea3bf7ffdba93c4750d", "438136d603e858a3a5c440c38eccbaddc1d2942114e2eddd4740d098ced1f0d8"], ["8d8b9855c7c052a34146fd20ffb658bea4b9f69e0d825ebec16e8c3ce2b526a1", "cdb559eedc2d79f926baf44fb84ea4d44bcf50fee51d7ceb30e2e7f463036758"], ["52db0b5384dfbf05bfa9d472d7ae26dfe4b851ceca91b1eba54263180da32b63", "c3b997d050ee5d423ebaf66a6db9f57b3180c902875679de924b69d84a7b375"], ["e62f9490d3d51da6395efd24e80919cc7d0f29c3f3fa48c6fff543becbd43352", "6d89ad7ba4876b0b22c2ca280c682862f342c8591f1daf5170e07bfd9ccafa7d"], ["7f30ea2476b399b4957509c88f77d0191afa2ff5cb7b14fd6d8e7d65aaab1193", "ca5ef7d4b231c94c3b15389a5f6311e9daff7bb67b103e9880ef4bff637acaec"], ["5098ff1e1d9f14fb46a210fada6c903fef0fb7b4a1dd1d9ac60a0361800b7a00", "9731141d81fc8f8084d37c6e7542006b3ee1b40d60dfe5362a5b132fd17ddc0"], ["32b78c7de9ee512a72895be6b9cbefa6e2f3c4ccce445c96b9f2c81e2778ad58", "ee1849f513df71e32efc3896ee28260c73bb80547ae2275ba497237794c8753c"], ["e2cb74fddc8e9fbcd076eef2a7c72b0ce37d50f08269dfc074b581550547a4f7", "d3aa2ed71c9dd2247a62df062736eb0baddea9e36122d2be8641abcb005cc4a4"], ["8438447566d4d7bedadc299496ab357426009a35f235cb141be0d99cd10ae3a8", "c4e1020916980a4da5d01ac5e6ad330734ef0d7906631c4f2390426b2edd791f"], ["4162d488b89402039b584c6fc6c308870587d9c46f660b878ab65c82c711d67e", "67163e903236289f776f22c25fb8a3afc1732f2b84b4e95dbda47ae5a0852649"], ["3fad3fa84caf0f34f0f89bfd2dcf54fc175d767aec3e50684f3ba4a4bf5f683d", "cd1bc7cb6cc407bb2f0ca647c718a730cf71872e7d0d2a53fa20efcdfe61826"], ["674f2600a3007a00568c1a7ce05d0816c1fb84bf1370798f1c69532faeb1a86b", "299d21f9413f33b3edf43b257004580b70db57da0b182259e09eecc69e0d38a5"], ["d32f4da54ade74abb81b815ad1fb3b263d82d6c692714bcff87d29bd5ee9f08f", "f9429e738b8e53b968e99016c059707782e14f4535359d582fc416910b3eea87"], ["30e4e670435385556e593657135845d36fbb6931f72b08cb1ed954f1e3ce3ff6", "462f9bce619898638499350113bbc9b10a878d35da70740dc695a559eb88db7b"], ["be2062003c51cc3004682904330e4dee7f3dcd10b01e580bf1971b04d4cad297", "62188bc49d61e5428573d48a74e1c655b1c61090905682a0d5558ed72dccb9bc"], ["93144423ace3451ed29e0fb9ac2af211cb6e84a601df5993c419859fff5df04a", "7c10dfb164c3425f5c71a3f9d7992038f1065224f72bb9d1d902a6d13037b47c"], ["b015f8044f5fcbdcf21ca26d6c34fb8197829205c7b7d2a7cb66418c157b112c", "ab8c1e086d04e813744a655b2df8d5f83b3cdc6faa3088c1d3aea1454e3a1d5f"], ["d5e9e1da649d97d89e4868117a465a3a4f8a18de57a140d36b3f2af341a21b52", "4cb04437f391ed73111a13cc1d4dd0db1693465c2240480d8955e8592f27447a"], ["d3ae41047dd7ca065dbf8ed77b992439983005cd72e16d6f996a5316d36966bb", "bd1aeb21ad22ebb22a10f0303417c6d964f8cdd7df0aca614b10dc14d125ac46"], ["463e2763d885f958fc66cdd22800f0a487197d0a82e377b49f80af87c897b065", "bfefacdb0e5d0fd7df3a311a94de062b26b80c61fbc97508b79992671ef7ca7f"], ["7985fdfd127c0567c6f53ec1bb63ec3158e597c40bfe747c83cddfc910641917", "603c12daf3d9862ef2b25fe1de289aed24ed291e0ec6708703a5bd567f32ed03"], ["74a1ad6b5f76e39db2dd249410eac7f99e74c59cb83d2d0ed5ff1543da7703e9", "cc6157ef18c9c63cd6193d83631bbea0093e0968942e8c33d5737fd790e0db08"], ["30682a50703375f602d416664ba19b7fc9bab42c72747463a71d0896b22f6da3", "553e04f6b018b4fa6c8f39e7f311d3176290d0e0f19ca73f17714d9977a22ff8"], ["9e2158f0d7c0d5f26c3791efefa79597654e7a2b2464f52b1ee6c1347769ef57", "712fcdd1b9053f09003a3481fa7762e9ffd7c8ef35a38509e2fbf2629008373"], ["176e26989a43c9cfeba4029c202538c28172e566e3c4fce7322857f3be327d66", "ed8cc9d04b29eb877d270b4878dc43c19aefd31f4eee09ee7b47834c1fa4b1c3"], ["75d46efea3771e6e68abb89a13ad747ecf1892393dfc4f1b7004788c50374da8", "9852390a99507679fd0b86fd2b39a868d7efc22151346e1a3ca4726586a6bed8"], ["809a20c67d64900ffb698c4c825f6d5f2310fb0451c869345b7319f645605721", "9e994980d9917e22b76b061927fa04143d096ccc54963e6a5ebfa5f3f8e286c1"], ["1b38903a43f7f114ed4500b4eac7083fdefece1cf29c63528d563446f972c180", "4036edc931a60ae889353f77fd53de4a2708b26b6f5da72ad3394119daf408f9"]] } }), secp256k1;
}
(function(a420) {
  var u2 = a420, c = hash$2, l2 = curve, v2 = utils$v, p2 = v2.assert;
  function _($) {
    $.type === "short" ? this.curve = new l2.short($) : $.type === "edwards" ? this.curve = new l2.edwards($) : this.curve = new l2.mont($), this.g = this.curve.g, this.n = this.curve.n, this.hash = $.hash, p2(this.g.validate(), "Invalid curve"), p2(this.g.mul(this.n).isInfinity(), "Invalid curve, G*N != O");
  }
  u2.PresetCurve = _;
  function I2($, F2) {
    Object.defineProperty(u2, $, { configurable: true, enumerable: true, get: function() {
      var H2 = new _(F2);
      return Object.defineProperty(u2, $, { configurable: true, enumerable: true, value: H2 }), H2;
    } });
  }
  I2("p192", { type: "short", prime: "p192", p: "ffffffff ffffffff ffffffff fffffffe ffffffff ffffffff", a: "ffffffff ffffffff ffffffff fffffffe ffffffff fffffffc", b: "64210519 e59c80e7 0fa7e9ab 72243049 feb8deec c146b9b1", n: "ffffffff ffffffff ffffffff 99def836 146bc9b1 b4d22831", hash: c.sha256, gRed: false, g: ["188da80e b03090f6 7cbf20eb 43a18800 f4ff0afd 82ff1012", "07192b95 ffc8da78 631011ed 6b24cdd5 73f977a1 1e794811"] }), I2("p224", { type: "short", prime: "p224", p: "ffffffff ffffffff ffffffff ffffffff 00000000 00000000 00000001", a: "ffffffff ffffffff ffffffff fffffffe ffffffff ffffffff fffffffe", b: "b4050a85 0c04b3ab f5413256 5044b0b7 d7bfd8ba 270b3943 2355ffb4", n: "ffffffff ffffffff ffffffff ffff16a2 e0b8f03e 13dd2945 5c5c2a3d", hash: c.sha256, gRed: false, g: ["b70e0cbd 6bb4bf7f 321390b9 4a03c1d3 56c21122 343280d6 115c1d21", "bd376388 b5f723fb 4c22dfe6 cd4375a0 5a074764 44d58199 85007e34"] }), I2("p256", { type: "short", prime: null, p: "ffffffff 00000001 00000000 00000000 00000000 ffffffff ffffffff ffffffff", a: "ffffffff 00000001 00000000 00000000 00000000 ffffffff ffffffff fffffffc", b: "5ac635d8 aa3a93e7 b3ebbd55 769886bc 651d06b0 cc53b0f6 3bce3c3e 27d2604b", n: "ffffffff 00000000 ffffffff ffffffff bce6faad a7179e84 f3b9cac2 fc632551", hash: c.sha256, gRed: false, g: ["6b17d1f2 e12c4247 f8bce6e5 63a440f2 77037d81 2deb33a0 f4a13945 d898c296", "4fe342e2 fe1a7f9b 8ee7eb4a 7c0f9e16 2bce3357 6b315ece cbb64068 37bf51f5"] }), I2("p384", { type: "short", prime: null, p: "ffffffff ffffffff ffffffff ffffffff ffffffff ffffffff ffffffff fffffffe ffffffff 00000000 00000000 ffffffff", a: "ffffffff ffffffff ffffffff ffffffff ffffffff ffffffff ffffffff fffffffe ffffffff 00000000 00000000 fffffffc", b: "b3312fa7 e23ee7e4 988e056b e3f82d19 181d9c6e fe814112 0314088f 5013875a c656398d 8a2ed19d 2a85c8ed d3ec2aef", n: "ffffffff ffffffff ffffffff ffffffff ffffffff ffffffff c7634d81 f4372ddf 581a0db2 48b0a77a ecec196a ccc52973", hash: c.sha384, gRed: false, g: ["aa87ca22 be8b0537 8eb1c71e f320ad74 6e1d3b62 8ba79b98 59f741e0 82542a38 5502f25d bf55296c 3a545e38 72760ab7", "3617de4a 96262c6f 5d9e98bf 9292dc29 f8f41dbd 289a147c e9da3113 b5f0b8c0 0a60b1ce 1d7e819d 7a431d7c 90ea0e5f"] }), I2("p521", { type: "short", prime: null, p: "000001ff ffffffff ffffffff ffffffff ffffffff ffffffff ffffffff ffffffff ffffffff ffffffff ffffffff ffffffff ffffffff ffffffff ffffffff ffffffff ffffffff", a: "000001ff ffffffff ffffffff ffffffff ffffffff ffffffff ffffffff ffffffff ffffffff ffffffff ffffffff ffffffff ffffffff ffffffff ffffffff ffffffff fffffffc", b: "00000051 953eb961 8e1c9a1f 929a21a0 b68540ee a2da725b 99b315f3 b8b48991 8ef109e1 56193951 ec7e937b 1652c0bd 3bb1bf07 3573df88 3d2c34f1 ef451fd4 6b503f00", n: "000001ff ffffffff ffffffff ffffffff ffffffff ffffffff ffffffff ffffffff fffffffa 51868783 bf2f966b 7fcc0148 f709a5d0 3bb5c9b8 899c47ae bb6fb71e 91386409", hash: c.sha512, gRed: false, g: ["000000c6 858e06b7 0404e9cd 9e3ecb66 2395b442 9c648139 053fb521 f828af60 6b4d3dba a14b5e77 efe75928 fe1dc127 a2ffa8de 3348b3c1 856a429b f97e7e31 c2e5bd66", "00000118 39296a78 9a3bc004 5c8a5fb4 2c7d1bd9 98f54449 579b4468 17afbd17 273e662c 97ee7299 5ef42640 c550b901 3fad0761 353c7086 a272c240 88be9476 9fd16650"] }), I2("curve25519", { type: "mont", prime: "p25519", p: "7fffffffffffffff ffffffffffffffff ffffffffffffffff ffffffffffffffed", a: "76d06", b: "1", n: "1000000000000000 0000000000000000 14def9dea2f79cd6 5812631a5cf5d3ed", hash: c.sha256, gRed: false, g: ["9"] }), I2("ed25519", {
    type: "edwards",
    prime: "p25519",
    p: "7fffffffffffffff ffffffffffffffff ffffffffffffffff ffffffffffffffed",
    a: "-1",
    c: "1",
    // -121665 * (121666^(-1)) (mod P)
    d: "52036cee2b6ffe73 8cc740797779e898 00700a4d4141d8ab 75eb4dca135978a3",
    n: "1000000000000000 0000000000000000 14def9dea2f79cd6 5812631a5cf5d3ed",
    hash: c.sha256,
    gRed: false,
    g: [
      "216936d3cd6e53fec0a4e231fdd6dc5c692cc7609525a7b2c9562d608f25d51a",
      // 4/5
      "6666666666666666666666666666666666666666666666666666666666666658"
    ]
  });
  var P2;
  try {
    P2 = requireSecp256k1();
  } catch {
    P2 = void 0;
  }
  I2("secp256k1", {
    type: "short",
    prime: "k256",
    p: "ffffffff ffffffff ffffffff ffffffff ffffffff ffffffff fffffffe fffffc2f",
    a: "0",
    b: "7",
    n: "ffffffff ffffffff ffffffff fffffffe baaedce6 af48a03b bfd25e8c d0364141",
    h: "1",
    hash: c.sha256,
    // Precomputed endomorphism
    beta: "7ae96a2b657c07106e64479eac3434e99cf0497512f58995c1396c28719501ee",
    lambda: "5363ad4cc05c30e0a5261c028812645a122e22ea20816678df02967c1b23bd72",
    basis: [{ a: "3086d221a7d46bcde86c90e49284eb15", b: "-e4437ed6010e88286f547fa90abfe4c3" }, { a: "114ca50f7a8e2f3f657c1108d9d44cfd8", b: "3086d221a7d46bcde86c90e49284eb15" }],
    gRed: false,
    g: ["79be667ef9dcbbac55a06295ce870b07029bfcdb2dce28d959f2815b16f81798", "483ada7726a3c4655da4fbfc0e1108a8fd17b448a68554199c47d08ffb10d4b8", P2]
  });
})(curves$1);
var hash$1 = hash$2, utils$f = utils$u, assert$7 = minimalisticAssert;
function HmacDRBG(a420) {
  if (!(this instanceof HmacDRBG))
    return new HmacDRBG(a420);
  this.hash = a420.hash, this.predResist = !!a420.predResist, this.outLen = this.hash.outSize, this.minEntropy = a420.minEntropy || this.hash.hmacStrength, this._reseed = null, this.reseedInterval = null, this.K = null, this.V = null;
  var u2 = utils$f.toArray(a420.entropy, a420.entropyEnc || "hex"), c = utils$f.toArray(a420.nonce, a420.nonceEnc || "hex"), l2 = utils$f.toArray(a420.pers, a420.persEnc || "hex");
  assert$7(u2.length >= this.minEntropy / 8, "Not enough entropy. Minimum is: " + this.minEntropy + " bits"), this._init(u2, c, l2);
}
var hmacDrbg = HmacDRBG;
HmacDRBG.prototype._init = function a252(u2, c, l2) {
  var v2 = u2.concat(c).concat(l2);
  this.K = new Array(this.outLen / 8), this.V = new Array(this.outLen / 8);
  for (var p2 = 0; p2 < this.V.length; p2++)
    this.K[p2] = 0, this.V[p2] = 1;
  this._update(v2), this._reseed = 1, this.reseedInterval = 281474976710656;
};
HmacDRBG.prototype._hmac = function a253() {
  return new hash$1.hmac(this.hash, this.K);
};
HmacDRBG.prototype._update = function a254(u2) {
  var c = this._hmac().update(this.V).update([0]);
  u2 && (c = c.update(u2)), this.K = c.digest(), this.V = this._hmac().update(this.V).digest(), u2 && (this.K = this._hmac().update(this.V).update([1]).update(u2).digest(), this.V = this._hmac().update(this.V).digest());
};
HmacDRBG.prototype.reseed = function a255(u2, c, l2, v2) {
  typeof c != "string" && (v2 = l2, l2 = c, c = null), u2 = utils$f.toArray(u2, c), l2 = utils$f.toArray(l2, v2), assert$7(u2.length >= this.minEntropy / 8, "Not enough entropy. Minimum is: " + this.minEntropy + " bits"), this._update(u2.concat(l2 || [])), this._reseed = 1;
};
HmacDRBG.prototype.generate = function a256(u2, c, l2, v2) {
  if (this._reseed > this.reseedInterval)
    throw new Error("Reseed is required");
  typeof c != "string" && (v2 = l2, l2 = c, c = null), l2 && (l2 = utils$f.toArray(l2, v2 || "hex"), this._update(l2));
  for (var p2 = []; p2.length < u2; )
    this.V = this._hmac().update(this.V).digest(), p2 = p2.concat(this.V);
  var _ = p2.slice(0, u2);
  return this._update(l2), this._reseed++, utils$f.encode(_, c);
};
var BN$5 = bnExports$3, utils$e = utils$v, assert$6 = utils$e.assert;
function KeyPair$2(a420, u2) {
  this.ec = a420, this.priv = null, this.pub = null, u2.priv && this._importPrivate(u2.priv, u2.privEnc), u2.pub && this._importPublic(u2.pub, u2.pubEnc);
}
var key$2 = KeyPair$2;
KeyPair$2.fromPublic = function a257(u2, c, l2) {
  return c instanceof KeyPair$2 ? c : new KeyPair$2(u2, { pub: c, pubEnc: l2 });
};
KeyPair$2.fromPrivate = function a258(u2, c, l2) {
  return c instanceof KeyPair$2 ? c : new KeyPair$2(u2, { priv: c, privEnc: l2 });
};
KeyPair$2.prototype.validate = function a259() {
  var u2 = this.getPublic();
  return u2.isInfinity() ? { result: false, reason: "Invalid public key" } : u2.validate() ? u2.mul(this.ec.curve.n).isInfinity() ? { result: true, reason: null } : { result: false, reason: "Public key * N != O" } : { result: false, reason: "Public key is not a point" };
};
KeyPair$2.prototype.getPublic = function a260(u2, c) {
  return typeof u2 == "string" && (c = u2, u2 = null), this.pub || (this.pub = this.ec.g.mul(this.priv)), c ? this.pub.encode(c, u2) : this.pub;
};
KeyPair$2.prototype.getPrivate = function a261(u2) {
  return u2 === "hex" ? this.priv.toString(16, 2) : this.priv;
};
KeyPair$2.prototype._importPrivate = function a262(u2, c) {
  this.priv = new BN$5(u2, c || 16), this.priv = this.priv.umod(this.ec.curve.n);
};
KeyPair$2.prototype._importPublic = function a263(u2, c) {
  if (u2.x || u2.y) {
    this.ec.curve.type === "mont" ? assert$6(u2.x, "Need x coordinate") : (this.ec.curve.type === "short" || this.ec.curve.type === "edwards") && assert$6(u2.x && u2.y, "Need both x and y coordinate"), this.pub = this.ec.curve.point(u2.x, u2.y);
    return;
  }
  this.pub = this.ec.curve.decodePoint(u2, c);
};
KeyPair$2.prototype.derive = function a264(u2) {
  return u2.validate() || assert$6(u2.validate(), "public point not validated"), u2.mul(this.priv).getX();
};
KeyPair$2.prototype.sign = function a265(u2, c, l2) {
  return this.ec.sign(u2, this, c, l2);
};
KeyPair$2.prototype.verify = function a266(u2, c) {
  return this.ec.verify(u2, c, this);
};
KeyPair$2.prototype.inspect = function a267() {
  return "<Key priv: " + (this.priv && this.priv.toString(16, 2)) + " pub: " + (this.pub && this.pub.inspect()) + " >";
};
var BN$4 = bnExports$3, utils$d = utils$v, assert$5 = utils$d.assert;
function Signature$2(a420, u2) {
  if (a420 instanceof Signature$2)
    return a420;
  this._importDER(a420, u2) || (assert$5(a420.r && a420.s, "Signature without r or s"), this.r = new BN$4(a420.r, 16), this.s = new BN$4(a420.s, 16), a420.recoveryParam === void 0 ? this.recoveryParam = null : this.recoveryParam = a420.recoveryParam);
}
var signature$1 = Signature$2;
function Position() {
  this.place = 0;
}
function getLength(a420, u2) {
  var c = a420[u2.place++];
  if (!(c & 128))
    return c;
  var l2 = c & 15;
  if (l2 === 0 || l2 > 4)
    return false;
  for (var v2 = 0, p2 = 0, _ = u2.place; p2 < l2; p2++, _++)
    v2 <<= 8, v2 |= a420[_], v2 >>>= 0;
  return v2 <= 127 ? false : (u2.place = _, v2);
}
function rmPadding(a420) {
  for (var u2 = 0, c = a420.length - 1; !a420[u2] && !(a420[u2 + 1] & 128) && u2 < c; )
    u2++;
  return u2 === 0 ? a420 : a420.slice(u2);
}
Signature$2.prototype._importDER = function a268(u2, c) {
  u2 = utils$d.toArray(u2, c);
  var l2 = new Position();
  if (u2[l2.place++] !== 48)
    return false;
  var v2 = getLength(u2, l2);
  if (v2 === false || v2 + l2.place !== u2.length || u2[l2.place++] !== 2)
    return false;
  var p2 = getLength(u2, l2);
  if (p2 === false)
    return false;
  var _ = u2.slice(l2.place, p2 + l2.place);
  if (l2.place += p2, u2[l2.place++] !== 2)
    return false;
  var I2 = getLength(u2, l2);
  if (I2 === false || u2.length !== I2 + l2.place)
    return false;
  var P2 = u2.slice(l2.place, I2 + l2.place);
  if (_[0] === 0)
    if (_[1] & 128)
      _ = _.slice(1);
    else
      return false;
  if (P2[0] === 0)
    if (P2[1] & 128)
      P2 = P2.slice(1);
    else
      return false;
  return this.r = new BN$4(_), this.s = new BN$4(P2), this.recoveryParam = null, true;
};
function constructLength(a420, u2) {
  if (u2 < 128) {
    a420.push(u2);
    return;
  }
  var c = 1 + (Math.log(u2) / Math.LN2 >>> 3);
  for (a420.push(c | 128); --c; )
    a420.push(u2 >>> (c << 3) & 255);
  a420.push(u2);
}
Signature$2.prototype.toDER = function a269(u2) {
  var c = this.r.toArray(), l2 = this.s.toArray();
  for (c[0] & 128 && (c = [0].concat(c)), l2[0] & 128 && (l2 = [0].concat(l2)), c = rmPadding(c), l2 = rmPadding(l2); !l2[0] && !(l2[1] & 128); )
    l2 = l2.slice(1);
  var v2 = [2];
  constructLength(v2, c.length), v2 = v2.concat(c), v2.push(2), constructLength(v2, l2.length);
  var p2 = v2.concat(l2), _ = [48];
  return constructLength(_, p2.length), _ = _.concat(p2), utils$d.encode(_, u2);
};
var ec, hasRequiredEc;
function requireEc() {
  if (hasRequiredEc)
    return ec;
  hasRequiredEc = 1;
  var a420 = bnExports$3, u2 = hmacDrbg, c = utils$v, l2 = curves$1, v2 = requireBrorand(), p2 = c.assert, _ = key$2, I2 = signature$1;
  function P2($) {
    if (!(this instanceof P2))
      return new P2($);
    typeof $ == "string" && (p2(Object.prototype.hasOwnProperty.call(l2, $), "Unknown curve " + $), $ = l2[$]), $ instanceof l2.PresetCurve && ($ = { curve: $ }), this.curve = $.curve.curve, this.n = this.curve.n, this.nh = this.n.ushrn(1), this.g = this.curve.g, this.g = $.curve.g, this.g.precompute($.curve.n.bitLength() + 1), this.hash = $.hash || $.curve.hash;
  }
  return ec = P2, P2.prototype.keyPair = function(F2) {
    return new _(this, F2);
  }, P2.prototype.keyFromPrivate = function(F2, H2) {
    return _.fromPrivate(this, F2, H2);
  }, P2.prototype.keyFromPublic = function(F2, H2) {
    return _.fromPublic(this, F2, H2);
  }, P2.prototype.genKeyPair = function(F2) {
    F2 || (F2 = {});
    for (var H2 = new u2({ hash: this.hash, pers: F2.pers, persEnc: F2.persEnc || "utf8", entropy: F2.entropy || v2(this.hash.hmacStrength), entropyEnc: F2.entropy && F2.entropyEnc || "utf8", nonce: this.n.toArray() }), j = this.n.byteLength(), ee2 = this.n.sub(new a420(2)); ; ) {
      var X2 = new a420(H2.generate(j));
      if (!(X2.cmp(ee2) > 0))
        return X2.iaddn(1), this.keyFromPrivate(X2);
    }
  }, P2.prototype._truncateToN = function(F2, H2) {
    var j = F2.byteLength() * 8 - this.n.bitLength();
    return j > 0 && (F2 = F2.ushrn(j)), !H2 && F2.cmp(this.n) >= 0 ? F2.sub(this.n) : F2;
  }, P2.prototype.sign = function(F2, H2, j, ee2) {
    typeof j == "object" && (ee2 = j, j = null), ee2 || (ee2 = {}), H2 = this.keyFromPrivate(H2, j), F2 = this._truncateToN(new a420(F2, 16));
    for (var X2 = this.n.byteLength(), ie2 = H2.getPrivate().toArray("be", X2), Q2 = F2.toArray("be", X2), ne2 = new u2({ hash: this.hash, entropy: ie2, nonce: Q2, pers: ee2.pers, persEnc: ee2.persEnc || "utf8" }), Z2 = this.n.sub(new a420(1)), de2 = 0; ; de2++) {
      var pe2 = ee2.k ? ee2.k(de2) : new a420(ne2.generate(this.n.byteLength()));
      if (pe2 = this._truncateToN(pe2, true), !(pe2.cmpn(1) <= 0 || pe2.cmp(Z2) >= 0)) {
        var le2 = this.g.mul(pe2);
        if (!le2.isInfinity()) {
          var be2 = le2.getX(), ke2 = be2.umod(this.n);
          if (ke2.cmpn(0) !== 0) {
            var Te2 = pe2.invm(this.n).mul(ke2.mul(H2.getPrivate()).iadd(F2));
            if (Te2 = Te2.umod(this.n), Te2.cmpn(0) !== 0) {
              var q2 = (le2.getY().isOdd() ? 1 : 0) | (be2.cmp(ke2) !== 0 ? 2 : 0);
              return ee2.canonical && Te2.cmp(this.nh) > 0 && (Te2 = this.n.sub(Te2), q2 ^= 1), new I2({ r: ke2, s: Te2, recoveryParam: q2 });
            }
          }
        }
      }
    }
  }, P2.prototype.verify = function(F2, H2, j, ee2) {
    F2 = this._truncateToN(new a420(F2, 16)), j = this.keyFromPublic(j, ee2), H2 = new I2(H2, "hex");
    var X2 = H2.r, ie2 = H2.s;
    if (X2.cmpn(1) < 0 || X2.cmp(this.n) >= 0 || ie2.cmpn(1) < 0 || ie2.cmp(this.n) >= 0)
      return false;
    var Q2 = ie2.invm(this.n), ne2 = Q2.mul(F2).umod(this.n), Z2 = Q2.mul(X2).umod(this.n), de2;
    return this.curve._maxwellTrick ? (de2 = this.g.jmulAdd(ne2, j.getPublic(), Z2), de2.isInfinity() ? false : de2.eqXToP(X2)) : (de2 = this.g.mulAdd(ne2, j.getPublic(), Z2), de2.isInfinity() ? false : de2.getX().umod(this.n).cmp(X2) === 0);
  }, P2.prototype.recoverPubKey = function($, F2, H2, j) {
    p2((3 & H2) === H2, "The recovery param is more than two bits"), F2 = new I2(F2, j);
    var ee2 = this.n, X2 = new a420($), ie2 = F2.r, Q2 = F2.s, ne2 = H2 & 1, Z2 = H2 >> 1;
    if (ie2.cmp(this.curve.p.umod(this.curve.n)) >= 0 && Z2)
      throw new Error("Unable to find sencond key candinate");
    Z2 ? ie2 = this.curve.pointFromX(ie2.add(this.curve.n), ne2) : ie2 = this.curve.pointFromX(ie2, ne2);
    var de2 = F2.r.invm(ee2), pe2 = ee2.sub(X2).mul(de2).umod(ee2), le2 = Q2.mul(de2).umod(ee2);
    return this.g.mulAdd(pe2, ie2, le2);
  }, P2.prototype.getKeyRecoveryParam = function($, F2, H2, j) {
    if (F2 = new I2(F2, j), F2.recoveryParam !== null)
      return F2.recoveryParam;
    for (var ee2 = 0; ee2 < 4; ee2++) {
      var X2;
      try {
        X2 = this.recoverPubKey($, F2, ee2);
      } catch {
        continue;
      }
      if (X2.eq(H2))
        return ee2;
    }
    throw new Error("Unable to find valid recovery factor");
  }, ec;
}
var utils$c = utils$v, assert$4 = utils$c.assert, parseBytes$2 = utils$c.parseBytes, cachedProperty$1 = utils$c.cachedProperty;
function KeyPair$1(a420, u2) {
  this.eddsa = a420, this._secret = parseBytes$2(u2.secret), a420.isPoint(u2.pub) ? this._pub = u2.pub : this._pubBytes = parseBytes$2(u2.pub);
}
KeyPair$1.fromPublic = function a270(u2, c) {
  return c instanceof KeyPair$1 ? c : new KeyPair$1(u2, { pub: c });
};
KeyPair$1.fromSecret = function a271(u2, c) {
  return c instanceof KeyPair$1 ? c : new KeyPair$1(u2, { secret: c });
};
KeyPair$1.prototype.secret = function a272() {
  return this._secret;
};
cachedProperty$1(KeyPair$1, "pubBytes", function a273() {
  return this.eddsa.encodePoint(this.pub());
});
cachedProperty$1(KeyPair$1, "pub", function a274() {
  return this._pubBytes ? this.eddsa.decodePoint(this._pubBytes) : this.eddsa.g.mul(this.priv());
});
cachedProperty$1(KeyPair$1, "privBytes", function a275() {
  var u2 = this.eddsa, c = this.hash(), l2 = u2.encodingLength - 1, v2 = c.slice(0, u2.encodingLength);
  return v2[0] &= 248, v2[l2] &= 127, v2[l2] |= 64, v2;
});
cachedProperty$1(KeyPair$1, "priv", function a276() {
  return this.eddsa.decodeInt(this.privBytes());
});
cachedProperty$1(KeyPair$1, "hash", function a277() {
  return this.eddsa.hash().update(this.secret()).digest();
});
cachedProperty$1(KeyPair$1, "messagePrefix", function a278() {
  return this.hash().slice(this.eddsa.encodingLength);
});
KeyPair$1.prototype.sign = function a279(u2) {
  return assert$4(this._secret, "KeyPair can only verify"), this.eddsa.sign(u2, this);
};
KeyPair$1.prototype.verify = function a280(u2, c) {
  return this.eddsa.verify(u2, c, this);
};
KeyPair$1.prototype.getSecret = function a281(u2) {
  return assert$4(this._secret, "KeyPair is public only"), utils$c.encode(this.secret(), u2);
};
KeyPair$1.prototype.getPublic = function a282(u2) {
  return utils$c.encode(this.pubBytes(), u2);
};
var key$1 = KeyPair$1, BN$3 = bnExports$3, utils$b = utils$v, assert$3 = utils$b.assert, cachedProperty = utils$b.cachedProperty, parseBytes$1 = utils$b.parseBytes;
function Signature$1(a420, u2) {
  this.eddsa = a420, typeof u2 != "object" && (u2 = parseBytes$1(u2)), Array.isArray(u2) && (u2 = { R: u2.slice(0, a420.encodingLength), S: u2.slice(a420.encodingLength) }), assert$3(u2.R && u2.S, "Signature without R or S"), a420.isPoint(u2.R) && (this._R = u2.R), u2.S instanceof BN$3 && (this._S = u2.S), this._Rencoded = Array.isArray(u2.R) ? u2.R : u2.Rencoded, this._Sencoded = Array.isArray(u2.S) ? u2.S : u2.Sencoded;
}
cachedProperty(Signature$1, "S", function a283() {
  return this.eddsa.decodeInt(this.Sencoded());
});
cachedProperty(Signature$1, "R", function a284() {
  return this.eddsa.decodePoint(this.Rencoded());
});
cachedProperty(Signature$1, "Rencoded", function a285() {
  return this.eddsa.encodePoint(this.R());
});
cachedProperty(Signature$1, "Sencoded", function a286() {
  return this.eddsa.encodeInt(this.S());
});
Signature$1.prototype.toBytes = function a287() {
  return this.Rencoded().concat(this.Sencoded());
};
Signature$1.prototype.toHex = function a288() {
  return utils$b.encode(this.toBytes(), "hex").toUpperCase();
};
var signature = Signature$1, hash = hash$2, curves = curves$1, utils$a = utils$v, assert$2 = utils$a.assert, parseBytes = utils$a.parseBytes, KeyPair = key$1, Signature = signature;
function EDDSA(a420) {
  if (assert$2(a420 === "ed25519", "only tested with ed25519 so far"), !(this instanceof EDDSA))
    return new EDDSA(a420);
  a420 = curves[a420].curve, this.curve = a420, this.g = a420.g, this.g.precompute(a420.n.bitLength() + 1), this.pointClass = a420.point().constructor, this.encodingLength = Math.ceil(a420.n.bitLength() / 8), this.hash = hash.sha512;
}
var eddsa = EDDSA;
EDDSA.prototype.sign = function a289(u2, c) {
  u2 = parseBytes(u2);
  var l2 = this.keyFromSecret(c), v2 = this.hashInt(l2.messagePrefix(), u2), p2 = this.g.mul(v2), _ = this.encodePoint(p2), I2 = this.hashInt(_, l2.pubBytes(), u2).mul(l2.priv()), P2 = v2.add(I2).umod(this.curve.n);
  return this.makeSignature({ R: p2, S: P2, Rencoded: _ });
};
EDDSA.prototype.verify = function a290(u2, c, l2) {
  u2 = parseBytes(u2), c = this.makeSignature(c);
  var v2 = this.keyFromPublic(l2), p2 = this.hashInt(c.Rencoded(), v2.pubBytes(), u2), _ = this.g.mul(c.S()), I2 = c.R().add(v2.pub().mul(p2));
  return I2.eq(_);
};
EDDSA.prototype.hashInt = function a291() {
  for (var u2 = this.hash(), c = 0; c < arguments.length; c++)
    u2.update(arguments[c]);
  return utils$a.intFromLE(u2.digest()).umod(this.curve.n);
};
EDDSA.prototype.keyFromPublic = function a292(u2) {
  return KeyPair.fromPublic(this, u2);
};
EDDSA.prototype.keyFromSecret = function a293(u2) {
  return KeyPair.fromSecret(this, u2);
};
EDDSA.prototype.makeSignature = function a294(u2) {
  return u2 instanceof Signature ? u2 : new Signature(this, u2);
};
EDDSA.prototype.encodePoint = function a295(u2) {
  var c = u2.getY().toArray("le", this.encodingLength);
  return c[this.encodingLength - 1] |= u2.getX().isOdd() ? 128 : 0, c;
};
EDDSA.prototype.decodePoint = function a296(u2) {
  u2 = utils$a.parseBytes(u2);
  var c = u2.length - 1, l2 = u2.slice(0, c).concat(u2[c] & -129), v2 = (u2[c] & 128) !== 0, p2 = utils$a.intFromLE(l2);
  return this.curve.pointFromY(p2, v2);
};
EDDSA.prototype.encodeInt = function a297(u2) {
  return u2.toArray("le", this.encodingLength);
};
EDDSA.prototype.decodeInt = function a298(u2) {
  return utils$a.intFromLE(u2);
};
EDDSA.prototype.isPoint = function a299(u2) {
  return u2 instanceof this.pointClass;
};
var hasRequiredElliptic;
function requireElliptic() {
  return hasRequiredElliptic || (hasRequiredElliptic = 1, function(a420) {
    var u2 = a420;
    u2.version = require$$0$1.version, u2.utils = utils$v, u2.rand = requireBrorand(), u2.curve = curve, u2.curves = curves$1, u2.ec = requireEc(), u2.eddsa = eddsa;
  }(elliptic)), elliptic;
}
var asn1$3 = {}, asn1$2 = {}, bn$2 = { exports: {} };
(function(a420) {
  (function(u2, c) {
    function l2(C2, b) {
      if (!C2)
        throw new Error(b || "Assertion failed");
    }
    function v2(C2, b) {
      C2.super_ = b;
      var E2 = function() {
      };
      E2.prototype = b.prototype, C2.prototype = new E2(), C2.prototype.constructor = C2;
    }
    function p2(C2, b, E2) {
      if (p2.isBN(C2))
        return C2;
      this.negative = 0, this.words = null, this.length = 0, this.red = null, C2 !== null && ((b === "le" || b === "be") && (E2 = b, b = 10), this._init(C2 || 0, b || 10, E2 || "be"));
    }
    typeof u2 == "object" ? u2.exports = p2 : c.BN = p2, p2.BN = p2, p2.wordSize = 26;
    var _;
    try {
      typeof window < "u" && typeof window.Buffer < "u" ? _ = window.Buffer : _ = require$$0$2.Buffer;
    } catch {
    }
    p2.isBN = function(b) {
      return b instanceof p2 ? true : b !== null && typeof b == "object" && b.constructor.wordSize === p2.wordSize && Array.isArray(b.words);
    }, p2.max = function(b, E2) {
      return b.cmp(E2) > 0 ? b : E2;
    }, p2.min = function(b, E2) {
      return b.cmp(E2) < 0 ? b : E2;
    }, p2.prototype._init = function(b, E2, k) {
      if (typeof b == "number")
        return this._initNumber(b, E2, k);
      if (typeof b == "object")
        return this._initArray(b, E2, k);
      E2 === "hex" && (E2 = 16), l2(E2 === (E2 | 0) && E2 >= 2 && E2 <= 36), b = b.toString().replace(/\s+/g, "");
      var O2 = 0;
      b[0] === "-" && (O2++, this.negative = 1), O2 < b.length && (E2 === 16 ? this._parseHex(b, O2, k) : (this._parseBase(b, E2, O2), k === "le" && this._initArray(this.toArray(), E2, k)));
    }, p2.prototype._initNumber = function(b, E2, k) {
      b < 0 && (this.negative = 1, b = -b), b < 67108864 ? (this.words = [b & 67108863], this.length = 1) : b < 4503599627370496 ? (this.words = [b & 67108863, b / 67108864 & 67108863], this.length = 2) : (l2(b < 9007199254740992), this.words = [b & 67108863, b / 67108864 & 67108863, 1], this.length = 3), k === "le" && this._initArray(this.toArray(), E2, k);
    }, p2.prototype._initArray = function(b, E2, k) {
      if (l2(typeof b.length == "number"), b.length <= 0)
        return this.words = [0], this.length = 1, this;
      this.length = Math.ceil(b.length / 3), this.words = new Array(this.length);
      for (var O2 = 0; O2 < this.length; O2++)
        this.words[O2] = 0;
      var A2, x2, Y2 = 0;
      if (k === "be")
        for (O2 = b.length - 1, A2 = 0; O2 >= 0; O2 -= 3)
          x2 = b[O2] | b[O2 - 1] << 8 | b[O2 - 2] << 16, this.words[A2] |= x2 << Y2 & 67108863, this.words[A2 + 1] = x2 >>> 26 - Y2 & 67108863, Y2 += 24, Y2 >= 26 && (Y2 -= 26, A2++);
      else if (k === "le")
        for (O2 = 0, A2 = 0; O2 < b.length; O2 += 3)
          x2 = b[O2] | b[O2 + 1] << 8 | b[O2 + 2] << 16, this.words[A2] |= x2 << Y2 & 67108863, this.words[A2 + 1] = x2 >>> 26 - Y2 & 67108863, Y2 += 24, Y2 >= 26 && (Y2 -= 26, A2++);
      return this.strip();
    };
    function I2(C2, b) {
      var E2 = C2.charCodeAt(b);
      return E2 >= 65 && E2 <= 70 ? E2 - 55 : E2 >= 97 && E2 <= 102 ? E2 - 87 : E2 - 48 & 15;
    }
    function P2(C2, b, E2) {
      var k = I2(C2, E2);
      return E2 - 1 >= b && (k |= I2(C2, E2 - 1) << 4), k;
    }
    p2.prototype._parseHex = function(b, E2, k) {
      this.length = Math.ceil((b.length - E2) / 6), this.words = new Array(this.length);
      for (var O2 = 0; O2 < this.length; O2++)
        this.words[O2] = 0;
      var A2 = 0, x2 = 0, Y2;
      if (k === "be")
        for (O2 = b.length - 1; O2 >= E2; O2 -= 2)
          Y2 = P2(b, E2, O2) << A2, this.words[x2] |= Y2 & 67108863, A2 >= 18 ? (A2 -= 18, x2 += 1, this.words[x2] |= Y2 >>> 26) : A2 += 8;
      else {
        var B2 = b.length - E2;
        for (O2 = B2 % 2 === 0 ? E2 + 1 : E2; O2 < b.length; O2 += 2)
          Y2 = P2(b, E2, O2) << A2, this.words[x2] |= Y2 & 67108863, A2 >= 18 ? (A2 -= 18, x2 += 1, this.words[x2] |= Y2 >>> 26) : A2 += 8;
      }
      this.strip();
    };
    function $(C2, b, E2, k) {
      for (var O2 = 0, A2 = Math.min(C2.length, E2), x2 = b; x2 < A2; x2++) {
        var Y2 = C2.charCodeAt(x2) - 48;
        O2 *= k, Y2 >= 49 ? O2 += Y2 - 49 + 10 : Y2 >= 17 ? O2 += Y2 - 17 + 10 : O2 += Y2;
      }
      return O2;
    }
    p2.prototype._parseBase = function(b, E2, k) {
      this.words = [0], this.length = 1;
      for (var O2 = 0, A2 = 1; A2 <= 67108863; A2 *= E2)
        O2++;
      O2--, A2 = A2 / E2 | 0;
      for (var x2 = b.length - k, Y2 = x2 % O2, B2 = Math.min(x2, x2 - Y2) + k, T2 = 0, D2 = k; D2 < B2; D2 += O2)
        T2 = $(b, D2, D2 + O2, E2), this.imuln(A2), this.words[0] + T2 < 67108864 ? this.words[0] += T2 : this._iaddn(T2);
      if (Y2 !== 0) {
        var te2 = 1;
        for (T2 = $(b, D2, b.length, E2), D2 = 0; D2 < Y2; D2++)
          te2 *= E2;
        this.imuln(te2), this.words[0] + T2 < 67108864 ? this.words[0] += T2 : this._iaddn(T2);
      }
      this.strip();
    }, p2.prototype.copy = function(b) {
      b.words = new Array(this.length);
      for (var E2 = 0; E2 < this.length; E2++)
        b.words[E2] = this.words[E2];
      b.length = this.length, b.negative = this.negative, b.red = this.red;
    }, p2.prototype.clone = function() {
      var b = new p2(null);
      return this.copy(b), b;
    }, p2.prototype._expand = function(b) {
      for (; this.length < b; )
        this.words[this.length++] = 0;
      return this;
    }, p2.prototype.strip = function() {
      for (; this.length > 1 && this.words[this.length - 1] === 0; )
        this.length--;
      return this._normSign();
    }, p2.prototype._normSign = function() {
      return this.length === 1 && this.words[0] === 0 && (this.negative = 0), this;
    }, p2.prototype.inspect = function() {
      return (this.red ? "<BN-R: " : "<BN: ") + this.toString(16) + ">";
    };
    var F2 = ["", "0", "00", "000", "0000", "00000", "000000", "0000000", "00000000", "000000000", "0000000000", "00000000000", "000000000000", "0000000000000", "00000000000000", "000000000000000", "0000000000000000", "00000000000000000", "000000000000000000", "0000000000000000000", "00000000000000000000", "000000000000000000000", "0000000000000000000000", "00000000000000000000000", "000000000000000000000000", "0000000000000000000000000"], H2 = [0, 0, 25, 16, 12, 11, 10, 9, 8, 8, 7, 7, 7, 7, 6, 6, 6, 6, 6, 6, 6, 5, 5, 5, 5, 5, 5, 5, 5, 5, 5, 5, 5, 5, 5, 5, 5], j = [0, 0, 33554432, 43046721, 16777216, 48828125, 60466176, 40353607, 16777216, 43046721, 1e7, 19487171, 35831808, 62748517, 7529536, 11390625, 16777216, 24137569, 34012224, 47045881, 64e6, 4084101, 5153632, 6436343, 7962624, 9765625, 11881376, 14348907, 17210368, 20511149, 243e5, 28629151, 33554432, 39135393, 45435424, 52521875, 60466176];
    p2.prototype.toString = function(b, E2) {
      b = b || 10, E2 = E2 | 0 || 1;
      var k;
      if (b === 16 || b === "hex") {
        k = "";
        for (var O2 = 0, A2 = 0, x2 = 0; x2 < this.length; x2++) {
          var Y2 = this.words[x2], B2 = ((Y2 << O2 | A2) & 16777215).toString(16);
          A2 = Y2 >>> 24 - O2 & 16777215, A2 !== 0 || x2 !== this.length - 1 ? k = F2[6 - B2.length] + B2 + k : k = B2 + k, O2 += 2, O2 >= 26 && (O2 -= 26, x2--);
        }
        for (A2 !== 0 && (k = A2.toString(16) + k); k.length % E2 !== 0; )
          k = "0" + k;
        return this.negative !== 0 && (k = "-" + k), k;
      }
      if (b === (b | 0) && b >= 2 && b <= 36) {
        var T2 = H2[b], D2 = j[b];
        k = "";
        var te2 = this.clone();
        for (te2.negative = 0; !te2.isZero(); ) {
          var me2 = te2.modn(D2).toString(b);
          te2 = te2.idivn(D2), te2.isZero() ? k = me2 + k : k = F2[T2 - me2.length] + me2 + k;
        }
        for (this.isZero() && (k = "0" + k); k.length % E2 !== 0; )
          k = "0" + k;
        return this.negative !== 0 && (k = "-" + k), k;
      }
      l2(false, "Base should be between 2 and 36");
    }, p2.prototype.toNumber = function() {
      var b = this.words[0];
      return this.length === 2 ? b += this.words[1] * 67108864 : this.length === 3 && this.words[2] === 1 ? b += 4503599627370496 + this.words[1] * 67108864 : this.length > 2 && l2(false, "Number can only safely store up to 53 bits"), this.negative !== 0 ? -b : b;
    }, p2.prototype.toJSON = function() {
      return this.toString(16);
    }, p2.prototype.toBuffer = function(b, E2) {
      return l2(typeof _ < "u"), this.toArrayLike(_, b, E2);
    }, p2.prototype.toArray = function(b, E2) {
      return this.toArrayLike(Array, b, E2);
    }, p2.prototype.toArrayLike = function(b, E2, k) {
      var O2 = this.byteLength(), A2 = k || Math.max(1, O2);
      l2(O2 <= A2, "byte array longer than desired length"), l2(A2 > 0, "Requested array length <= 0"), this.strip();
      var x2 = E2 === "le", Y2 = new b(A2), B2, T2, D2 = this.clone();
      if (x2) {
        for (T2 = 0; !D2.isZero(); T2++)
          B2 = D2.andln(255), D2.iushrn(8), Y2[T2] = B2;
        for (; T2 < A2; T2++)
          Y2[T2] = 0;
      } else {
        for (T2 = 0; T2 < A2 - O2; T2++)
          Y2[T2] = 0;
        for (T2 = 0; !D2.isZero(); T2++)
          B2 = D2.andln(255), D2.iushrn(8), Y2[A2 - T2 - 1] = B2;
      }
      return Y2;
    }, Math.clz32 ? p2.prototype._countBits = function(b) {
      return 32 - Math.clz32(b);
    } : p2.prototype._countBits = function(b) {
      var E2 = b, k = 0;
      return E2 >= 4096 && (k += 13, E2 >>>= 13), E2 >= 64 && (k += 7, E2 >>>= 7), E2 >= 8 && (k += 4, E2 >>>= 4), E2 >= 2 && (k += 2, E2 >>>= 2), k + E2;
    }, p2.prototype._zeroBits = function(b) {
      if (b === 0)
        return 26;
      var E2 = b, k = 0;
      return E2 & 8191 || (k += 13, E2 >>>= 13), E2 & 127 || (k += 7, E2 >>>= 7), E2 & 15 || (k += 4, E2 >>>= 4), E2 & 3 || (k += 2, E2 >>>= 2), E2 & 1 || k++, k;
    }, p2.prototype.bitLength = function() {
      var b = this.words[this.length - 1], E2 = this._countBits(b);
      return (this.length - 1) * 26 + E2;
    };
    function ee2(C2) {
      for (var b = new Array(C2.bitLength()), E2 = 0; E2 < b.length; E2++) {
        var k = E2 / 26 | 0, O2 = E2 % 26;
        b[E2] = (C2.words[k] & 1 << O2) >>> O2;
      }
      return b;
    }
    p2.prototype.zeroBits = function() {
      if (this.isZero())
        return 0;
      for (var b = 0, E2 = 0; E2 < this.length; E2++) {
        var k = this._zeroBits(this.words[E2]);
        if (b += k, k !== 26)
          break;
      }
      return b;
    }, p2.prototype.byteLength = function() {
      return Math.ceil(this.bitLength() / 8);
    }, p2.prototype.toTwos = function(b) {
      return this.negative !== 0 ? this.abs().inotn(b).iaddn(1) : this.clone();
    }, p2.prototype.fromTwos = function(b) {
      return this.testn(b - 1) ? this.notn(b).iaddn(1).ineg() : this.clone();
    }, p2.prototype.isNeg = function() {
      return this.negative !== 0;
    }, p2.prototype.neg = function() {
      return this.clone().ineg();
    }, p2.prototype.ineg = function() {
      return this.isZero() || (this.negative ^= 1), this;
    }, p2.prototype.iuor = function(b) {
      for (; this.length < b.length; )
        this.words[this.length++] = 0;
      for (var E2 = 0; E2 < b.length; E2++)
        this.words[E2] = this.words[E2] | b.words[E2];
      return this.strip();
    }, p2.prototype.ior = function(b) {
      return l2((this.negative | b.negative) === 0), this.iuor(b);
    }, p2.prototype.or = function(b) {
      return this.length > b.length ? this.clone().ior(b) : b.clone().ior(this);
    }, p2.prototype.uor = function(b) {
      return this.length > b.length ? this.clone().iuor(b) : b.clone().iuor(this);
    }, p2.prototype.iuand = function(b) {
      var E2;
      this.length > b.length ? E2 = b : E2 = this;
      for (var k = 0; k < E2.length; k++)
        this.words[k] = this.words[k] & b.words[k];
      return this.length = E2.length, this.strip();
    }, p2.prototype.iand = function(b) {
      return l2((this.negative | b.negative) === 0), this.iuand(b);
    }, p2.prototype.and = function(b) {
      return this.length > b.length ? this.clone().iand(b) : b.clone().iand(this);
    }, p2.prototype.uand = function(b) {
      return this.length > b.length ? this.clone().iuand(b) : b.clone().iuand(this);
    }, p2.prototype.iuxor = function(b) {
      var E2, k;
      this.length > b.length ? (E2 = this, k = b) : (E2 = b, k = this);
      for (var O2 = 0; O2 < k.length; O2++)
        this.words[O2] = E2.words[O2] ^ k.words[O2];
      if (this !== E2)
        for (; O2 < E2.length; O2++)
          this.words[O2] = E2.words[O2];
      return this.length = E2.length, this.strip();
    }, p2.prototype.ixor = function(b) {
      return l2((this.negative | b.negative) === 0), this.iuxor(b);
    }, p2.prototype.xor = function(b) {
      return this.length > b.length ? this.clone().ixor(b) : b.clone().ixor(this);
    }, p2.prototype.uxor = function(b) {
      return this.length > b.length ? this.clone().iuxor(b) : b.clone().iuxor(this);
    }, p2.prototype.inotn = function(b) {
      l2(typeof b == "number" && b >= 0);
      var E2 = Math.ceil(b / 26) | 0, k = b % 26;
      this._expand(E2), k > 0 && E2--;
      for (var O2 = 0; O2 < E2; O2++)
        this.words[O2] = ~this.words[O2] & 67108863;
      return k > 0 && (this.words[O2] = ~this.words[O2] & 67108863 >> 26 - k), this.strip();
    }, p2.prototype.notn = function(b) {
      return this.clone().inotn(b);
    }, p2.prototype.setn = function(b, E2) {
      l2(typeof b == "number" && b >= 0);
      var k = b / 26 | 0, O2 = b % 26;
      return this._expand(k + 1), E2 ? this.words[k] = this.words[k] | 1 << O2 : this.words[k] = this.words[k] & ~(1 << O2), this.strip();
    }, p2.prototype.iadd = function(b) {
      var E2;
      if (this.negative !== 0 && b.negative === 0)
        return this.negative = 0, E2 = this.isub(b), this.negative ^= 1, this._normSign();
      if (this.negative === 0 && b.negative !== 0)
        return b.negative = 0, E2 = this.isub(b), b.negative = 1, E2._normSign();
      var k, O2;
      this.length > b.length ? (k = this, O2 = b) : (k = b, O2 = this);
      for (var A2 = 0, x2 = 0; x2 < O2.length; x2++)
        E2 = (k.words[x2] | 0) + (O2.words[x2] | 0) + A2, this.words[x2] = E2 & 67108863, A2 = E2 >>> 26;
      for (; A2 !== 0 && x2 < k.length; x2++)
        E2 = (k.words[x2] | 0) + A2, this.words[x2] = E2 & 67108863, A2 = E2 >>> 26;
      if (this.length = k.length, A2 !== 0)
        this.words[this.length] = A2, this.length++;
      else if (k !== this)
        for (; x2 < k.length; x2++)
          this.words[x2] = k.words[x2];
      return this;
    }, p2.prototype.add = function(b) {
      var E2;
      return b.negative !== 0 && this.negative === 0 ? (b.negative = 0, E2 = this.sub(b), b.negative ^= 1, E2) : b.negative === 0 && this.negative !== 0 ? (this.negative = 0, E2 = b.sub(this), this.negative = 1, E2) : this.length > b.length ? this.clone().iadd(b) : b.clone().iadd(this);
    }, p2.prototype.isub = function(b) {
      if (b.negative !== 0) {
        b.negative = 0;
        var E2 = this.iadd(b);
        return b.negative = 1, E2._normSign();
      } else if (this.negative !== 0)
        return this.negative = 0, this.iadd(b), this.negative = 1, this._normSign();
      var k = this.cmp(b);
      if (k === 0)
        return this.negative = 0, this.length = 1, this.words[0] = 0, this;
      var O2, A2;
      k > 0 ? (O2 = this, A2 = b) : (O2 = b, A2 = this);
      for (var x2 = 0, Y2 = 0; Y2 < A2.length; Y2++)
        E2 = (O2.words[Y2] | 0) - (A2.words[Y2] | 0) + x2, x2 = E2 >> 26, this.words[Y2] = E2 & 67108863;
      for (; x2 !== 0 && Y2 < O2.length; Y2++)
        E2 = (O2.words[Y2] | 0) + x2, x2 = E2 >> 26, this.words[Y2] = E2 & 67108863;
      if (x2 === 0 && Y2 < O2.length && O2 !== this)
        for (; Y2 < O2.length; Y2++)
          this.words[Y2] = O2.words[Y2];
      return this.length = Math.max(this.length, Y2), O2 !== this && (this.negative = 1), this.strip();
    }, p2.prototype.sub = function(b) {
      return this.clone().isub(b);
    };
    function X2(C2, b, E2) {
      E2.negative = b.negative ^ C2.negative;
      var k = C2.length + b.length | 0;
      E2.length = k, k = k - 1 | 0;
      var O2 = C2.words[0] | 0, A2 = b.words[0] | 0, x2 = O2 * A2, Y2 = x2 & 67108863, B2 = x2 / 67108864 | 0;
      E2.words[0] = Y2;
      for (var T2 = 1; T2 < k; T2++) {
        for (var D2 = B2 >>> 26, te2 = B2 & 67108863, me2 = Math.min(T2, b.length - 1), Ie2 = Math.max(0, T2 - C2.length + 1); Ie2 <= me2; Ie2++) {
          var $e2 = T2 - Ie2 | 0;
          O2 = C2.words[$e2] | 0, A2 = b.words[Ie2] | 0, x2 = O2 * A2 + te2, D2 += x2 / 67108864 | 0, te2 = x2 & 67108863;
        }
        E2.words[T2] = te2 | 0, B2 = D2 | 0;
      }
      return B2 !== 0 ? E2.words[T2] = B2 | 0 : E2.length--, E2.strip();
    }
    var ie2 = function(b, E2, k) {
      var O2 = b.words, A2 = E2.words, x2 = k.words, Y2 = 0, B2, T2, D2, te2 = O2[0] | 0, me2 = te2 & 8191, Ie2 = te2 >>> 13, $e2 = O2[1] | 0, ye2 = $e2 & 8191, he2 = $e2 >>> 13, Me2 = O2[2] | 0, Ae2 = Me2 & 8191, xe2 = Me2 >>> 13, ae2 = O2[3] | 0, N2 = ae2 & 8191, re2 = ae2 >>> 13, fe2 = O2[4] | 0, Ne2 = fe2 & 8191, Oe2 = fe2 >>> 13, qe2 = O2[5] | 0, je2 = qe2 & 8191, Fe2 = qe2 >>> 13, yt = O2[6] | 0, Xe2 = yt & 8191, Ge2 = yt >>> 13, V2 = O2[7] | 0, ge2 = V2 & 8191, we2 = V2 >>> 13, We2 = O2[8] | 0, Re2 = We2 & 8191, J2 = We2 >>> 13, _e = O2[9] | 0, ue2 = _e & 8191, ce2 = _e >>> 13, ve2 = A2[0] | 0, Ce2 = ve2 & 8191, Be2 = ve2 >>> 13, He2 = A2[1] | 0, Ve2 = He2 & 8191, Ze2 = He2 >>> 13, Ke2 = A2[2] | 0, U2 = Ke2 & 8191, se2 = Ke2 >>> 13, Se2 = A2[3] | 0, Ue2 = Se2 & 8191, De2 = Se2 >>> 13, Ye2 = A2[4] | 0, Qe2 = Ye2 & 8191, st = Ye2 >>> 13, St = A2[5] | 0, tt = St & 8191, it = St >>> 13, Tt = A2[6] | 0, rt = Tt & 8191, dt = Tt >>> 13, wt = A2[7] | 0, nt = wt & 8191, at = wt >>> 13, gt = A2[8] | 0, ot = gt & 8191, ct = gt >>> 13, Ct = A2[9] | 0, ut = Ct & 8191, lt = Ct >>> 13;
      k.negative = b.negative ^ E2.negative, k.length = 19, B2 = Math.imul(me2, Ce2), T2 = Math.imul(me2, Be2), T2 = T2 + Math.imul(Ie2, Ce2) | 0, D2 = Math.imul(Ie2, Be2);
      var kt = (Y2 + B2 | 0) + ((T2 & 8191) << 13) | 0;
      Y2 = (D2 + (T2 >>> 13) | 0) + (kt >>> 26) | 0, kt &= 67108863, B2 = Math.imul(ye2, Ce2), T2 = Math.imul(ye2, Be2), T2 = T2 + Math.imul(he2, Ce2) | 0, D2 = Math.imul(he2, Be2), B2 = B2 + Math.imul(me2, Ve2) | 0, T2 = T2 + Math.imul(me2, Ze2) | 0, T2 = T2 + Math.imul(Ie2, Ve2) | 0, D2 = D2 + Math.imul(Ie2, Ze2) | 0;
      var Rt = (Y2 + B2 | 0) + ((T2 & 8191) << 13) | 0;
      Y2 = (D2 + (T2 >>> 13) | 0) + (Rt >>> 26) | 0, Rt &= 67108863, B2 = Math.imul(Ae2, Ce2), T2 = Math.imul(Ae2, Be2), T2 = T2 + Math.imul(xe2, Ce2) | 0, D2 = Math.imul(xe2, Be2), B2 = B2 + Math.imul(ye2, Ve2) | 0, T2 = T2 + Math.imul(ye2, Ze2) | 0, T2 = T2 + Math.imul(he2, Ve2) | 0, D2 = D2 + Math.imul(he2, Ze2) | 0, B2 = B2 + Math.imul(me2, U2) | 0, T2 = T2 + Math.imul(me2, se2) | 0, T2 = T2 + Math.imul(Ie2, U2) | 0, D2 = D2 + Math.imul(Ie2, se2) | 0;
      var Je2 = (Y2 + B2 | 0) + ((T2 & 8191) << 13) | 0;
      Y2 = (D2 + (T2 >>> 13) | 0) + (Je2 >>> 26) | 0, Je2 &= 67108863, B2 = Math.imul(N2, Ce2), T2 = Math.imul(N2, Be2), T2 = T2 + Math.imul(re2, Ce2) | 0, D2 = Math.imul(re2, Be2), B2 = B2 + Math.imul(Ae2, Ve2) | 0, T2 = T2 + Math.imul(Ae2, Ze2) | 0, T2 = T2 + Math.imul(xe2, Ve2) | 0, D2 = D2 + Math.imul(xe2, Ze2) | 0, B2 = B2 + Math.imul(ye2, U2) | 0, T2 = T2 + Math.imul(ye2, se2) | 0, T2 = T2 + Math.imul(he2, U2) | 0, D2 = D2 + Math.imul(he2, se2) | 0, B2 = B2 + Math.imul(me2, Ue2) | 0, T2 = T2 + Math.imul(me2, De2) | 0, T2 = T2 + Math.imul(Ie2, Ue2) | 0, D2 = D2 + Math.imul(Ie2, De2) | 0;
      var ze2 = (Y2 + B2 | 0) + ((T2 & 8191) << 13) | 0;
      Y2 = (D2 + (T2 >>> 13) | 0) + (ze2 >>> 26) | 0, ze2 &= 67108863, B2 = Math.imul(Ne2, Ce2), T2 = Math.imul(Ne2, Be2), T2 = T2 + Math.imul(Oe2, Ce2) | 0, D2 = Math.imul(Oe2, Be2), B2 = B2 + Math.imul(N2, Ve2) | 0, T2 = T2 + Math.imul(N2, Ze2) | 0, T2 = T2 + Math.imul(re2, Ve2) | 0, D2 = D2 + Math.imul(re2, Ze2) | 0, B2 = B2 + Math.imul(Ae2, U2) | 0, T2 = T2 + Math.imul(Ae2, se2) | 0, T2 = T2 + Math.imul(xe2, U2) | 0, D2 = D2 + Math.imul(xe2, se2) | 0, B2 = B2 + Math.imul(ye2, Ue2) | 0, T2 = T2 + Math.imul(ye2, De2) | 0, T2 = T2 + Math.imul(he2, Ue2) | 0, D2 = D2 + Math.imul(he2, De2) | 0, B2 = B2 + Math.imul(me2, Qe2) | 0, T2 = T2 + Math.imul(me2, st) | 0, T2 = T2 + Math.imul(Ie2, Qe2) | 0, D2 = D2 + Math.imul(Ie2, st) | 0;
      var et = (Y2 + B2 | 0) + ((T2 & 8191) << 13) | 0;
      Y2 = (D2 + (T2 >>> 13) | 0) + (et >>> 26) | 0, et &= 67108863, B2 = Math.imul(je2, Ce2), T2 = Math.imul(je2, Be2), T2 = T2 + Math.imul(Fe2, Ce2) | 0, D2 = Math.imul(Fe2, Be2), B2 = B2 + Math.imul(Ne2, Ve2) | 0, T2 = T2 + Math.imul(Ne2, Ze2) | 0, T2 = T2 + Math.imul(Oe2, Ve2) | 0, D2 = D2 + Math.imul(Oe2, Ze2) | 0, B2 = B2 + Math.imul(N2, U2) | 0, T2 = T2 + Math.imul(N2, se2) | 0, T2 = T2 + Math.imul(re2, U2) | 0, D2 = D2 + Math.imul(re2, se2) | 0, B2 = B2 + Math.imul(Ae2, Ue2) | 0, T2 = T2 + Math.imul(Ae2, De2) | 0, T2 = T2 + Math.imul(xe2, Ue2) | 0, D2 = D2 + Math.imul(xe2, De2) | 0, B2 = B2 + Math.imul(ye2, Qe2) | 0, T2 = T2 + Math.imul(ye2, st) | 0, T2 = T2 + Math.imul(he2, Qe2) | 0, D2 = D2 + Math.imul(he2, st) | 0, B2 = B2 + Math.imul(me2, tt) | 0, T2 = T2 + Math.imul(me2, it) | 0, T2 = T2 + Math.imul(Ie2, tt) | 0, D2 = D2 + Math.imul(Ie2, it) | 0;
      var pt = (Y2 + B2 | 0) + ((T2 & 8191) << 13) | 0;
      Y2 = (D2 + (T2 >>> 13) | 0) + (pt >>> 26) | 0, pt &= 67108863, B2 = Math.imul(Xe2, Ce2), T2 = Math.imul(Xe2, Be2), T2 = T2 + Math.imul(Ge2, Ce2) | 0, D2 = Math.imul(Ge2, Be2), B2 = B2 + Math.imul(je2, Ve2) | 0, T2 = T2 + Math.imul(je2, Ze2) | 0, T2 = T2 + Math.imul(Fe2, Ve2) | 0, D2 = D2 + Math.imul(Fe2, Ze2) | 0, B2 = B2 + Math.imul(Ne2, U2) | 0, T2 = T2 + Math.imul(Ne2, se2) | 0, T2 = T2 + Math.imul(Oe2, U2) | 0, D2 = D2 + Math.imul(Oe2, se2) | 0, B2 = B2 + Math.imul(N2, Ue2) | 0, T2 = T2 + Math.imul(N2, De2) | 0, T2 = T2 + Math.imul(re2, Ue2) | 0, D2 = D2 + Math.imul(re2, De2) | 0, B2 = B2 + Math.imul(Ae2, Qe2) | 0, T2 = T2 + Math.imul(Ae2, st) | 0, T2 = T2 + Math.imul(xe2, Qe2) | 0, D2 = D2 + Math.imul(xe2, st) | 0, B2 = B2 + Math.imul(ye2, tt) | 0, T2 = T2 + Math.imul(ye2, it) | 0, T2 = T2 + Math.imul(he2, tt) | 0, D2 = D2 + Math.imul(he2, it) | 0, B2 = B2 + Math.imul(me2, rt) | 0, T2 = T2 + Math.imul(me2, dt) | 0, T2 = T2 + Math.imul(Ie2, rt) | 0, D2 = D2 + Math.imul(Ie2, dt) | 0;
      var mt = (Y2 + B2 | 0) + ((T2 & 8191) << 13) | 0;
      Y2 = (D2 + (T2 >>> 13) | 0) + (mt >>> 26) | 0, mt &= 67108863, B2 = Math.imul(ge2, Ce2), T2 = Math.imul(ge2, Be2), T2 = T2 + Math.imul(we2, Ce2) | 0, D2 = Math.imul(we2, Be2), B2 = B2 + Math.imul(Xe2, Ve2) | 0, T2 = T2 + Math.imul(Xe2, Ze2) | 0, T2 = T2 + Math.imul(Ge2, Ve2) | 0, D2 = D2 + Math.imul(Ge2, Ze2) | 0, B2 = B2 + Math.imul(je2, U2) | 0, T2 = T2 + Math.imul(je2, se2) | 0, T2 = T2 + Math.imul(Fe2, U2) | 0, D2 = D2 + Math.imul(Fe2, se2) | 0, B2 = B2 + Math.imul(Ne2, Ue2) | 0, T2 = T2 + Math.imul(Ne2, De2) | 0, T2 = T2 + Math.imul(Oe2, Ue2) | 0, D2 = D2 + Math.imul(Oe2, De2) | 0, B2 = B2 + Math.imul(N2, Qe2) | 0, T2 = T2 + Math.imul(N2, st) | 0, T2 = T2 + Math.imul(re2, Qe2) | 0, D2 = D2 + Math.imul(re2, st) | 0, B2 = B2 + Math.imul(Ae2, tt) | 0, T2 = T2 + Math.imul(Ae2, it) | 0, T2 = T2 + Math.imul(xe2, tt) | 0, D2 = D2 + Math.imul(xe2, it) | 0, B2 = B2 + Math.imul(ye2, rt) | 0, T2 = T2 + Math.imul(ye2, dt) | 0, T2 = T2 + Math.imul(he2, rt) | 0, D2 = D2 + Math.imul(he2, dt) | 0, B2 = B2 + Math.imul(me2, nt) | 0, T2 = T2 + Math.imul(me2, at) | 0, T2 = T2 + Math.imul(Ie2, nt) | 0, D2 = D2 + Math.imul(Ie2, at) | 0;
      var vt = (Y2 + B2 | 0) + ((T2 & 8191) << 13) | 0;
      Y2 = (D2 + (T2 >>> 13) | 0) + (vt >>> 26) | 0, vt &= 67108863, B2 = Math.imul(Re2, Ce2), T2 = Math.imul(Re2, Be2), T2 = T2 + Math.imul(J2, Ce2) | 0, D2 = Math.imul(J2, Be2), B2 = B2 + Math.imul(ge2, Ve2) | 0, T2 = T2 + Math.imul(ge2, Ze2) | 0, T2 = T2 + Math.imul(we2, Ve2) | 0, D2 = D2 + Math.imul(we2, Ze2) | 0, B2 = B2 + Math.imul(Xe2, U2) | 0, T2 = T2 + Math.imul(Xe2, se2) | 0, T2 = T2 + Math.imul(Ge2, U2) | 0, D2 = D2 + Math.imul(Ge2, se2) | 0, B2 = B2 + Math.imul(je2, Ue2) | 0, T2 = T2 + Math.imul(je2, De2) | 0, T2 = T2 + Math.imul(Fe2, Ue2) | 0, D2 = D2 + Math.imul(Fe2, De2) | 0, B2 = B2 + Math.imul(Ne2, Qe2) | 0, T2 = T2 + Math.imul(Ne2, st) | 0, T2 = T2 + Math.imul(Oe2, Qe2) | 0, D2 = D2 + Math.imul(Oe2, st) | 0, B2 = B2 + Math.imul(N2, tt) | 0, T2 = T2 + Math.imul(N2, it) | 0, T2 = T2 + Math.imul(re2, tt) | 0, D2 = D2 + Math.imul(re2, it) | 0, B2 = B2 + Math.imul(Ae2, rt) | 0, T2 = T2 + Math.imul(Ae2, dt) | 0, T2 = T2 + Math.imul(xe2, rt) | 0, D2 = D2 + Math.imul(xe2, dt) | 0, B2 = B2 + Math.imul(ye2, nt) | 0, T2 = T2 + Math.imul(ye2, at) | 0, T2 = T2 + Math.imul(he2, nt) | 0, D2 = D2 + Math.imul(he2, at) | 0, B2 = B2 + Math.imul(me2, ot) | 0, T2 = T2 + Math.imul(me2, ct) | 0, T2 = T2 + Math.imul(Ie2, ot) | 0, D2 = D2 + Math.imul(Ie2, ct) | 0;
      var ht = (Y2 + B2 | 0) + ((T2 & 8191) << 13) | 0;
      Y2 = (D2 + (T2 >>> 13) | 0) + (ht >>> 26) | 0, ht &= 67108863, B2 = Math.imul(ue2, Ce2), T2 = Math.imul(ue2, Be2), T2 = T2 + Math.imul(ce2, Ce2) | 0, D2 = Math.imul(ce2, Be2), B2 = B2 + Math.imul(Re2, Ve2) | 0, T2 = T2 + Math.imul(Re2, Ze2) | 0, T2 = T2 + Math.imul(J2, Ve2) | 0, D2 = D2 + Math.imul(J2, Ze2) | 0, B2 = B2 + Math.imul(ge2, U2) | 0, T2 = T2 + Math.imul(ge2, se2) | 0, T2 = T2 + Math.imul(we2, U2) | 0, D2 = D2 + Math.imul(we2, se2) | 0, B2 = B2 + Math.imul(Xe2, Ue2) | 0, T2 = T2 + Math.imul(Xe2, De2) | 0, T2 = T2 + Math.imul(Ge2, Ue2) | 0, D2 = D2 + Math.imul(Ge2, De2) | 0, B2 = B2 + Math.imul(je2, Qe2) | 0, T2 = T2 + Math.imul(je2, st) | 0, T2 = T2 + Math.imul(Fe2, Qe2) | 0, D2 = D2 + Math.imul(Fe2, st) | 0, B2 = B2 + Math.imul(Ne2, tt) | 0, T2 = T2 + Math.imul(Ne2, it) | 0, T2 = T2 + Math.imul(Oe2, tt) | 0, D2 = D2 + Math.imul(Oe2, it) | 0, B2 = B2 + Math.imul(N2, rt) | 0, T2 = T2 + Math.imul(N2, dt) | 0, T2 = T2 + Math.imul(re2, rt) | 0, D2 = D2 + Math.imul(re2, dt) | 0, B2 = B2 + Math.imul(Ae2, nt) | 0, T2 = T2 + Math.imul(Ae2, at) | 0, T2 = T2 + Math.imul(xe2, nt) | 0, D2 = D2 + Math.imul(xe2, at) | 0, B2 = B2 + Math.imul(ye2, ot) | 0, T2 = T2 + Math.imul(ye2, ct) | 0, T2 = T2 + Math.imul(he2, ot) | 0, D2 = D2 + Math.imul(he2, ct) | 0, B2 = B2 + Math.imul(me2, ut) | 0, T2 = T2 + Math.imul(me2, lt) | 0, T2 = T2 + Math.imul(Ie2, ut) | 0, D2 = D2 + Math.imul(Ie2, lt) | 0;
      var _t = (Y2 + B2 | 0) + ((T2 & 8191) << 13) | 0;
      Y2 = (D2 + (T2 >>> 13) | 0) + (_t >>> 26) | 0, _t &= 67108863, B2 = Math.imul(ue2, Ve2), T2 = Math.imul(ue2, Ze2), T2 = T2 + Math.imul(ce2, Ve2) | 0, D2 = Math.imul(ce2, Ze2), B2 = B2 + Math.imul(Re2, U2) | 0, T2 = T2 + Math.imul(Re2, se2) | 0, T2 = T2 + Math.imul(J2, U2) | 0, D2 = D2 + Math.imul(J2, se2) | 0, B2 = B2 + Math.imul(ge2, Ue2) | 0, T2 = T2 + Math.imul(ge2, De2) | 0, T2 = T2 + Math.imul(we2, Ue2) | 0, D2 = D2 + Math.imul(we2, De2) | 0, B2 = B2 + Math.imul(Xe2, Qe2) | 0, T2 = T2 + Math.imul(Xe2, st) | 0, T2 = T2 + Math.imul(Ge2, Qe2) | 0, D2 = D2 + Math.imul(Ge2, st) | 0, B2 = B2 + Math.imul(je2, tt) | 0, T2 = T2 + Math.imul(je2, it) | 0, T2 = T2 + Math.imul(Fe2, tt) | 0, D2 = D2 + Math.imul(Fe2, it) | 0, B2 = B2 + Math.imul(Ne2, rt) | 0, T2 = T2 + Math.imul(Ne2, dt) | 0, T2 = T2 + Math.imul(Oe2, rt) | 0, D2 = D2 + Math.imul(Oe2, dt) | 0, B2 = B2 + Math.imul(N2, nt) | 0, T2 = T2 + Math.imul(N2, at) | 0, T2 = T2 + Math.imul(re2, nt) | 0, D2 = D2 + Math.imul(re2, at) | 0, B2 = B2 + Math.imul(Ae2, ot) | 0, T2 = T2 + Math.imul(Ae2, ct) | 0, T2 = T2 + Math.imul(xe2, ot) | 0, D2 = D2 + Math.imul(xe2, ct) | 0, B2 = B2 + Math.imul(ye2, ut) | 0, T2 = T2 + Math.imul(ye2, lt) | 0, T2 = T2 + Math.imul(he2, ut) | 0, D2 = D2 + Math.imul(he2, lt) | 0;
      var Et = (Y2 + B2 | 0) + ((T2 & 8191) << 13) | 0;
      Y2 = (D2 + (T2 >>> 13) | 0) + (Et >>> 26) | 0, Et &= 67108863, B2 = Math.imul(ue2, U2), T2 = Math.imul(ue2, se2), T2 = T2 + Math.imul(ce2, U2) | 0, D2 = Math.imul(ce2, se2), B2 = B2 + Math.imul(Re2, Ue2) | 0, T2 = T2 + Math.imul(Re2, De2) | 0, T2 = T2 + Math.imul(J2, Ue2) | 0, D2 = D2 + Math.imul(J2, De2) | 0, B2 = B2 + Math.imul(ge2, Qe2) | 0, T2 = T2 + Math.imul(ge2, st) | 0, T2 = T2 + Math.imul(we2, Qe2) | 0, D2 = D2 + Math.imul(we2, st) | 0, B2 = B2 + Math.imul(Xe2, tt) | 0, T2 = T2 + Math.imul(Xe2, it) | 0, T2 = T2 + Math.imul(Ge2, tt) | 0, D2 = D2 + Math.imul(Ge2, it) | 0, B2 = B2 + Math.imul(je2, rt) | 0, T2 = T2 + Math.imul(je2, dt) | 0, T2 = T2 + Math.imul(Fe2, rt) | 0, D2 = D2 + Math.imul(Fe2, dt) | 0, B2 = B2 + Math.imul(Ne2, nt) | 0, T2 = T2 + Math.imul(Ne2, at) | 0, T2 = T2 + Math.imul(Oe2, nt) | 0, D2 = D2 + Math.imul(Oe2, at) | 0, B2 = B2 + Math.imul(N2, ot) | 0, T2 = T2 + Math.imul(N2, ct) | 0, T2 = T2 + Math.imul(re2, ot) | 0, D2 = D2 + Math.imul(re2, ct) | 0, B2 = B2 + Math.imul(Ae2, ut) | 0, T2 = T2 + Math.imul(Ae2, lt) | 0, T2 = T2 + Math.imul(xe2, ut) | 0, D2 = D2 + Math.imul(xe2, lt) | 0;
      var Pt = (Y2 + B2 | 0) + ((T2 & 8191) << 13) | 0;
      Y2 = (D2 + (T2 >>> 13) | 0) + (Pt >>> 26) | 0, Pt &= 67108863, B2 = Math.imul(ue2, Ue2), T2 = Math.imul(ue2, De2), T2 = T2 + Math.imul(ce2, Ue2) | 0, D2 = Math.imul(ce2, De2), B2 = B2 + Math.imul(Re2, Qe2) | 0, T2 = T2 + Math.imul(Re2, st) | 0, T2 = T2 + Math.imul(J2, Qe2) | 0, D2 = D2 + Math.imul(J2, st) | 0, B2 = B2 + Math.imul(ge2, tt) | 0, T2 = T2 + Math.imul(ge2, it) | 0, T2 = T2 + Math.imul(we2, tt) | 0, D2 = D2 + Math.imul(we2, it) | 0, B2 = B2 + Math.imul(Xe2, rt) | 0, T2 = T2 + Math.imul(Xe2, dt) | 0, T2 = T2 + Math.imul(Ge2, rt) | 0, D2 = D2 + Math.imul(Ge2, dt) | 0, B2 = B2 + Math.imul(je2, nt) | 0, T2 = T2 + Math.imul(je2, at) | 0, T2 = T2 + Math.imul(Fe2, nt) | 0, D2 = D2 + Math.imul(Fe2, at) | 0, B2 = B2 + Math.imul(Ne2, ot) | 0, T2 = T2 + Math.imul(Ne2, ct) | 0, T2 = T2 + Math.imul(Oe2, ot) | 0, D2 = D2 + Math.imul(Oe2, ct) | 0, B2 = B2 + Math.imul(N2, ut) | 0, T2 = T2 + Math.imul(N2, lt) | 0, T2 = T2 + Math.imul(re2, ut) | 0, D2 = D2 + Math.imul(re2, lt) | 0;
      var Nt = (Y2 + B2 | 0) + ((T2 & 8191) << 13) | 0;
      Y2 = (D2 + (T2 >>> 13) | 0) + (Nt >>> 26) | 0, Nt &= 67108863, B2 = Math.imul(ue2, Qe2), T2 = Math.imul(ue2, st), T2 = T2 + Math.imul(ce2, Qe2) | 0, D2 = Math.imul(ce2, st), B2 = B2 + Math.imul(Re2, tt) | 0, T2 = T2 + Math.imul(Re2, it) | 0, T2 = T2 + Math.imul(J2, tt) | 0, D2 = D2 + Math.imul(J2, it) | 0, B2 = B2 + Math.imul(ge2, rt) | 0, T2 = T2 + Math.imul(ge2, dt) | 0, T2 = T2 + Math.imul(we2, rt) | 0, D2 = D2 + Math.imul(we2, dt) | 0, B2 = B2 + Math.imul(Xe2, nt) | 0, T2 = T2 + Math.imul(Xe2, at) | 0, T2 = T2 + Math.imul(Ge2, nt) | 0, D2 = D2 + Math.imul(Ge2, at) | 0, B2 = B2 + Math.imul(je2, ot) | 0, T2 = T2 + Math.imul(je2, ct) | 0, T2 = T2 + Math.imul(Fe2, ot) | 0, D2 = D2 + Math.imul(Fe2, ct) | 0, B2 = B2 + Math.imul(Ne2, ut) | 0, T2 = T2 + Math.imul(Ne2, lt) | 0, T2 = T2 + Math.imul(Oe2, ut) | 0, D2 = D2 + Math.imul(Oe2, lt) | 0;
      var Mt = (Y2 + B2 | 0) + ((T2 & 8191) << 13) | 0;
      Y2 = (D2 + (T2 >>> 13) | 0) + (Mt >>> 26) | 0, Mt &= 67108863, B2 = Math.imul(ue2, tt), T2 = Math.imul(ue2, it), T2 = T2 + Math.imul(ce2, tt) | 0, D2 = Math.imul(ce2, it), B2 = B2 + Math.imul(Re2, rt) | 0, T2 = T2 + Math.imul(Re2, dt) | 0, T2 = T2 + Math.imul(J2, rt) | 0, D2 = D2 + Math.imul(J2, dt) | 0, B2 = B2 + Math.imul(ge2, nt) | 0, T2 = T2 + Math.imul(ge2, at) | 0, T2 = T2 + Math.imul(we2, nt) | 0, D2 = D2 + Math.imul(we2, at) | 0, B2 = B2 + Math.imul(Xe2, ot) | 0, T2 = T2 + Math.imul(Xe2, ct) | 0, T2 = T2 + Math.imul(Ge2, ot) | 0, D2 = D2 + Math.imul(Ge2, ct) | 0, B2 = B2 + Math.imul(je2, ut) | 0, T2 = T2 + Math.imul(je2, lt) | 0, T2 = T2 + Math.imul(Fe2, ut) | 0, D2 = D2 + Math.imul(Fe2, lt) | 0;
      var Ot = (Y2 + B2 | 0) + ((T2 & 8191) << 13) | 0;
      Y2 = (D2 + (T2 >>> 13) | 0) + (Ot >>> 26) | 0, Ot &= 67108863, B2 = Math.imul(ue2, rt), T2 = Math.imul(ue2, dt), T2 = T2 + Math.imul(ce2, rt) | 0, D2 = Math.imul(ce2, dt), B2 = B2 + Math.imul(Re2, nt) | 0, T2 = T2 + Math.imul(Re2, at) | 0, T2 = T2 + Math.imul(J2, nt) | 0, D2 = D2 + Math.imul(J2, at) | 0, B2 = B2 + Math.imul(ge2, ot) | 0, T2 = T2 + Math.imul(ge2, ct) | 0, T2 = T2 + Math.imul(we2, ot) | 0, D2 = D2 + Math.imul(we2, ct) | 0, B2 = B2 + Math.imul(Xe2, ut) | 0, T2 = T2 + Math.imul(Xe2, lt) | 0, T2 = T2 + Math.imul(Ge2, ut) | 0, D2 = D2 + Math.imul(Ge2, lt) | 0;
      var $t = (Y2 + B2 | 0) + ((T2 & 8191) << 13) | 0;
      Y2 = (D2 + (T2 >>> 13) | 0) + ($t >>> 26) | 0, $t &= 67108863, B2 = Math.imul(ue2, nt), T2 = Math.imul(ue2, at), T2 = T2 + Math.imul(ce2, nt) | 0, D2 = Math.imul(ce2, at), B2 = B2 + Math.imul(Re2, ot) | 0, T2 = T2 + Math.imul(Re2, ct) | 0, T2 = T2 + Math.imul(J2, ot) | 0, D2 = D2 + Math.imul(J2, ct) | 0, B2 = B2 + Math.imul(ge2, ut) | 0, T2 = T2 + Math.imul(ge2, lt) | 0, T2 = T2 + Math.imul(we2, ut) | 0, D2 = D2 + Math.imul(we2, lt) | 0;
      var Bt = (Y2 + B2 | 0) + ((T2 & 8191) << 13) | 0;
      Y2 = (D2 + (T2 >>> 13) | 0) + (Bt >>> 26) | 0, Bt &= 67108863, B2 = Math.imul(ue2, ot), T2 = Math.imul(ue2, ct), T2 = T2 + Math.imul(ce2, ot) | 0, D2 = Math.imul(ce2, ct), B2 = B2 + Math.imul(Re2, ut) | 0, T2 = T2 + Math.imul(Re2, lt) | 0, T2 = T2 + Math.imul(J2, ut) | 0, D2 = D2 + Math.imul(J2, lt) | 0;
      var xt = (Y2 + B2 | 0) + ((T2 & 8191) << 13) | 0;
      Y2 = (D2 + (T2 >>> 13) | 0) + (xt >>> 26) | 0, xt &= 67108863, B2 = Math.imul(ue2, ut), T2 = Math.imul(ue2, lt), T2 = T2 + Math.imul(ce2, ut) | 0, D2 = Math.imul(ce2, lt);
      var Ut = (Y2 + B2 | 0) + ((T2 & 8191) << 13) | 0;
      return Y2 = (D2 + (T2 >>> 13) | 0) + (Ut >>> 26) | 0, Ut &= 67108863, x2[0] = kt, x2[1] = Rt, x2[2] = Je2, x2[3] = ze2, x2[4] = et, x2[5] = pt, x2[6] = mt, x2[7] = vt, x2[8] = ht, x2[9] = _t, x2[10] = Et, x2[11] = Pt, x2[12] = Nt, x2[13] = Mt, x2[14] = Ot, x2[15] = $t, x2[16] = Bt, x2[17] = xt, x2[18] = Ut, Y2 !== 0 && (x2[19] = Y2, k.length++), k;
    };
    Math.imul || (ie2 = X2);
    function Q2(C2, b, E2) {
      E2.negative = b.negative ^ C2.negative, E2.length = C2.length + b.length;
      for (var k = 0, O2 = 0, A2 = 0; A2 < E2.length - 1; A2++) {
        var x2 = O2;
        O2 = 0;
        for (var Y2 = k & 67108863, B2 = Math.min(A2, b.length - 1), T2 = Math.max(0, A2 - C2.length + 1); T2 <= B2; T2++) {
          var D2 = A2 - T2, te2 = C2.words[D2] | 0, me2 = b.words[T2] | 0, Ie2 = te2 * me2, $e2 = Ie2 & 67108863;
          x2 = x2 + (Ie2 / 67108864 | 0) | 0, $e2 = $e2 + Y2 | 0, Y2 = $e2 & 67108863, x2 = x2 + ($e2 >>> 26) | 0, O2 += x2 >>> 26, x2 &= 67108863;
        }
        E2.words[A2] = Y2, k = x2, x2 = O2;
      }
      return k !== 0 ? E2.words[A2] = k : E2.length--, E2.strip();
    }
    function ne2(C2, b, E2) {
      var k = new Z2();
      return k.mulp(C2, b, E2);
    }
    p2.prototype.mulTo = function(b, E2) {
      var k, O2 = this.length + b.length;
      return this.length === 10 && b.length === 10 ? k = ie2(this, b, E2) : O2 < 63 ? k = X2(this, b, E2) : O2 < 1024 ? k = Q2(this, b, E2) : k = ne2(this, b, E2), k;
    };
    function Z2(C2, b) {
      this.x = C2, this.y = b;
    }
    Z2.prototype.makeRBT = function(b) {
      for (var E2 = new Array(b), k = p2.prototype._countBits(b) - 1, O2 = 0; O2 < b; O2++)
        E2[O2] = this.revBin(O2, k, b);
      return E2;
    }, Z2.prototype.revBin = function(b, E2, k) {
      if (b === 0 || b === k - 1)
        return b;
      for (var O2 = 0, A2 = 0; A2 < E2; A2++)
        O2 |= (b & 1) << E2 - A2 - 1, b >>= 1;
      return O2;
    }, Z2.prototype.permute = function(b, E2, k, O2, A2, x2) {
      for (var Y2 = 0; Y2 < x2; Y2++)
        O2[Y2] = E2[b[Y2]], A2[Y2] = k[b[Y2]];
    }, Z2.prototype.transform = function(b, E2, k, O2, A2, x2) {
      this.permute(x2, b, E2, k, O2, A2);
      for (var Y2 = 1; Y2 < A2; Y2 <<= 1)
        for (var B2 = Y2 << 1, T2 = Math.cos(2 * Math.PI / B2), D2 = Math.sin(2 * Math.PI / B2), te2 = 0; te2 < A2; te2 += B2)
          for (var me2 = T2, Ie2 = D2, $e2 = 0; $e2 < Y2; $e2++) {
            var ye2 = k[te2 + $e2], he2 = O2[te2 + $e2], Me2 = k[te2 + $e2 + Y2], Ae2 = O2[te2 + $e2 + Y2], xe2 = me2 * Me2 - Ie2 * Ae2;
            Ae2 = me2 * Ae2 + Ie2 * Me2, Me2 = xe2, k[te2 + $e2] = ye2 + Me2, O2[te2 + $e2] = he2 + Ae2, k[te2 + $e2 + Y2] = ye2 - Me2, O2[te2 + $e2 + Y2] = he2 - Ae2, $e2 !== B2 && (xe2 = T2 * me2 - D2 * Ie2, Ie2 = T2 * Ie2 + D2 * me2, me2 = xe2);
          }
    }, Z2.prototype.guessLen13b = function(b, E2) {
      var k = Math.max(E2, b) | 1, O2 = k & 1, A2 = 0;
      for (k = k / 2 | 0; k; k = k >>> 1)
        A2++;
      return 1 << A2 + 1 + O2;
    }, Z2.prototype.conjugate = function(b, E2, k) {
      if (!(k <= 1))
        for (var O2 = 0; O2 < k / 2; O2++) {
          var A2 = b[O2];
          b[O2] = b[k - O2 - 1], b[k - O2 - 1] = A2, A2 = E2[O2], E2[O2] = -E2[k - O2 - 1], E2[k - O2 - 1] = -A2;
        }
    }, Z2.prototype.normalize13b = function(b, E2) {
      for (var k = 0, O2 = 0; O2 < E2 / 2; O2++) {
        var A2 = Math.round(b[2 * O2 + 1] / E2) * 8192 + Math.round(b[2 * O2] / E2) + k;
        b[O2] = A2 & 67108863, A2 < 67108864 ? k = 0 : k = A2 / 67108864 | 0;
      }
      return b;
    }, Z2.prototype.convert13b = function(b, E2, k, O2) {
      for (var A2 = 0, x2 = 0; x2 < E2; x2++)
        A2 = A2 + (b[x2] | 0), k[2 * x2] = A2 & 8191, A2 = A2 >>> 13, k[2 * x2 + 1] = A2 & 8191, A2 = A2 >>> 13;
      for (x2 = 2 * E2; x2 < O2; ++x2)
        k[x2] = 0;
      l2(A2 === 0), l2((A2 & -8192) === 0);
    }, Z2.prototype.stub = function(b) {
      for (var E2 = new Array(b), k = 0; k < b; k++)
        E2[k] = 0;
      return E2;
    }, Z2.prototype.mulp = function(b, E2, k) {
      var O2 = 2 * this.guessLen13b(b.length, E2.length), A2 = this.makeRBT(O2), x2 = this.stub(O2), Y2 = new Array(O2), B2 = new Array(O2), T2 = new Array(O2), D2 = new Array(O2), te2 = new Array(O2), me2 = new Array(O2), Ie2 = k.words;
      Ie2.length = O2, this.convert13b(b.words, b.length, Y2, O2), this.convert13b(E2.words, E2.length, D2, O2), this.transform(Y2, x2, B2, T2, O2, A2), this.transform(D2, x2, te2, me2, O2, A2);
      for (var $e2 = 0; $e2 < O2; $e2++) {
        var ye2 = B2[$e2] * te2[$e2] - T2[$e2] * me2[$e2];
        T2[$e2] = B2[$e2] * me2[$e2] + T2[$e2] * te2[$e2], B2[$e2] = ye2;
      }
      return this.conjugate(B2, T2, O2), this.transform(B2, T2, Ie2, x2, O2, A2), this.conjugate(Ie2, x2, O2), this.normalize13b(Ie2, O2), k.negative = b.negative ^ E2.negative, k.length = b.length + E2.length, k.strip();
    }, p2.prototype.mul = function(b) {
      var E2 = new p2(null);
      return E2.words = new Array(this.length + b.length), this.mulTo(b, E2);
    }, p2.prototype.mulf = function(b) {
      var E2 = new p2(null);
      return E2.words = new Array(this.length + b.length), ne2(this, b, E2);
    }, p2.prototype.imul = function(b) {
      return this.clone().mulTo(b, this);
    }, p2.prototype.imuln = function(b) {
      l2(typeof b == "number"), l2(b < 67108864);
      for (var E2 = 0, k = 0; k < this.length; k++) {
        var O2 = (this.words[k] | 0) * b, A2 = (O2 & 67108863) + (E2 & 67108863);
        E2 >>= 26, E2 += O2 / 67108864 | 0, E2 += A2 >>> 26, this.words[k] = A2 & 67108863;
      }
      return E2 !== 0 && (this.words[k] = E2, this.length++), this;
    }, p2.prototype.muln = function(b) {
      return this.clone().imuln(b);
    }, p2.prototype.sqr = function() {
      return this.mul(this);
    }, p2.prototype.isqr = function() {
      return this.imul(this.clone());
    }, p2.prototype.pow = function(b) {
      var E2 = ee2(b);
      if (E2.length === 0)
        return new p2(1);
      for (var k = this, O2 = 0; O2 < E2.length && E2[O2] === 0; O2++, k = k.sqr())
        ;
      if (++O2 < E2.length)
        for (var A2 = k.sqr(); O2 < E2.length; O2++, A2 = A2.sqr())
          E2[O2] !== 0 && (k = k.mul(A2));
      return k;
    }, p2.prototype.iushln = function(b) {
      l2(typeof b == "number" && b >= 0);
      var E2 = b % 26, k = (b - E2) / 26, O2 = 67108863 >>> 26 - E2 << 26 - E2, A2;
      if (E2 !== 0) {
        var x2 = 0;
        for (A2 = 0; A2 < this.length; A2++) {
          var Y2 = this.words[A2] & O2, B2 = (this.words[A2] | 0) - Y2 << E2;
          this.words[A2] = B2 | x2, x2 = Y2 >>> 26 - E2;
        }
        x2 && (this.words[A2] = x2, this.length++);
      }
      if (k !== 0) {
        for (A2 = this.length - 1; A2 >= 0; A2--)
          this.words[A2 + k] = this.words[A2];
        for (A2 = 0; A2 < k; A2++)
          this.words[A2] = 0;
        this.length += k;
      }
      return this.strip();
    }, p2.prototype.ishln = function(b) {
      return l2(this.negative === 0), this.iushln(b);
    }, p2.prototype.iushrn = function(b, E2, k) {
      l2(typeof b == "number" && b >= 0);
      var O2;
      E2 ? O2 = (E2 - E2 % 26) / 26 : O2 = 0;
      var A2 = b % 26, x2 = Math.min((b - A2) / 26, this.length), Y2 = 67108863 ^ 67108863 >>> A2 << A2, B2 = k;
      if (O2 -= x2, O2 = Math.max(0, O2), B2) {
        for (var T2 = 0; T2 < x2; T2++)
          B2.words[T2] = this.words[T2];
        B2.length = x2;
      }
      if (x2 !== 0)
        if (this.length > x2)
          for (this.length -= x2, T2 = 0; T2 < this.length; T2++)
            this.words[T2] = this.words[T2 + x2];
        else
          this.words[0] = 0, this.length = 1;
      var D2 = 0;
      for (T2 = this.length - 1; T2 >= 0 && (D2 !== 0 || T2 >= O2); T2--) {
        var te2 = this.words[T2] | 0;
        this.words[T2] = D2 << 26 - A2 | te2 >>> A2, D2 = te2 & Y2;
      }
      return B2 && D2 !== 0 && (B2.words[B2.length++] = D2), this.length === 0 && (this.words[0] = 0, this.length = 1), this.strip();
    }, p2.prototype.ishrn = function(b, E2, k) {
      return l2(this.negative === 0), this.iushrn(b, E2, k);
    }, p2.prototype.shln = function(b) {
      return this.clone().ishln(b);
    }, p2.prototype.ushln = function(b) {
      return this.clone().iushln(b);
    }, p2.prototype.shrn = function(b) {
      return this.clone().ishrn(b);
    }, p2.prototype.ushrn = function(b) {
      return this.clone().iushrn(b);
    }, p2.prototype.testn = function(b) {
      l2(typeof b == "number" && b >= 0);
      var E2 = b % 26, k = (b - E2) / 26, O2 = 1 << E2;
      if (this.length <= k)
        return false;
      var A2 = this.words[k];
      return !!(A2 & O2);
    }, p2.prototype.imaskn = function(b) {
      l2(typeof b == "number" && b >= 0);
      var E2 = b % 26, k = (b - E2) / 26;
      if (l2(this.negative === 0, "imaskn works only with positive numbers"), this.length <= k)
        return this;
      if (E2 !== 0 && k++, this.length = Math.min(k, this.length), E2 !== 0) {
        var O2 = 67108863 ^ 67108863 >>> E2 << E2;
        this.words[this.length - 1] &= O2;
      }
      return this.strip();
    }, p2.prototype.maskn = function(b) {
      return this.clone().imaskn(b);
    }, p2.prototype.iaddn = function(b) {
      return l2(typeof b == "number"), l2(b < 67108864), b < 0 ? this.isubn(-b) : this.negative !== 0 ? this.length === 1 && (this.words[0] | 0) < b ? (this.words[0] = b - (this.words[0] | 0), this.negative = 0, this) : (this.negative = 0, this.isubn(b), this.negative = 1, this) : this._iaddn(b);
    }, p2.prototype._iaddn = function(b) {
      this.words[0] += b;
      for (var E2 = 0; E2 < this.length && this.words[E2] >= 67108864; E2++)
        this.words[E2] -= 67108864, E2 === this.length - 1 ? this.words[E2 + 1] = 1 : this.words[E2 + 1]++;
      return this.length = Math.max(this.length, E2 + 1), this;
    }, p2.prototype.isubn = function(b) {
      if (l2(typeof b == "number"), l2(b < 67108864), b < 0)
        return this.iaddn(-b);
      if (this.negative !== 0)
        return this.negative = 0, this.iaddn(b), this.negative = 1, this;
      if (this.words[0] -= b, this.length === 1 && this.words[0] < 0)
        this.words[0] = -this.words[0], this.negative = 1;
      else
        for (var E2 = 0; E2 < this.length && this.words[E2] < 0; E2++)
          this.words[E2] += 67108864, this.words[E2 + 1] -= 1;
      return this.strip();
    }, p2.prototype.addn = function(b) {
      return this.clone().iaddn(b);
    }, p2.prototype.subn = function(b) {
      return this.clone().isubn(b);
    }, p2.prototype.iabs = function() {
      return this.negative = 0, this;
    }, p2.prototype.abs = function() {
      return this.clone().iabs();
    }, p2.prototype._ishlnsubmul = function(b, E2, k) {
      var O2 = b.length + k, A2;
      this._expand(O2);
      var x2, Y2 = 0;
      for (A2 = 0; A2 < b.length; A2++) {
        x2 = (this.words[A2 + k] | 0) + Y2;
        var B2 = (b.words[A2] | 0) * E2;
        x2 -= B2 & 67108863, Y2 = (x2 >> 26) - (B2 / 67108864 | 0), this.words[A2 + k] = x2 & 67108863;
      }
      for (; A2 < this.length - k; A2++)
        x2 = (this.words[A2 + k] | 0) + Y2, Y2 = x2 >> 26, this.words[A2 + k] = x2 & 67108863;
      if (Y2 === 0)
        return this.strip();
      for (l2(Y2 === -1), Y2 = 0, A2 = 0; A2 < this.length; A2++)
        x2 = -(this.words[A2] | 0) + Y2, Y2 = x2 >> 26, this.words[A2] = x2 & 67108863;
      return this.negative = 1, this.strip();
    }, p2.prototype._wordDiv = function(b, E2) {
      var k = this.length - b.length, O2 = this.clone(), A2 = b, x2 = A2.words[A2.length - 1] | 0, Y2 = this._countBits(x2);
      k = 26 - Y2, k !== 0 && (A2 = A2.ushln(k), O2.iushln(k), x2 = A2.words[A2.length - 1] | 0);
      var B2 = O2.length - A2.length, T2;
      if (E2 !== "mod") {
        T2 = new p2(null), T2.length = B2 + 1, T2.words = new Array(T2.length);
        for (var D2 = 0; D2 < T2.length; D2++)
          T2.words[D2] = 0;
      }
      var te2 = O2.clone()._ishlnsubmul(A2, 1, B2);
      te2.negative === 0 && (O2 = te2, T2 && (T2.words[B2] = 1));
      for (var me2 = B2 - 1; me2 >= 0; me2--) {
        var Ie2 = (O2.words[A2.length + me2] | 0) * 67108864 + (O2.words[A2.length + me2 - 1] | 0);
        for (Ie2 = Math.min(Ie2 / x2 | 0, 67108863), O2._ishlnsubmul(A2, Ie2, me2); O2.negative !== 0; )
          Ie2--, O2.negative = 0, O2._ishlnsubmul(A2, 1, me2), O2.isZero() || (O2.negative ^= 1);
        T2 && (T2.words[me2] = Ie2);
      }
      return T2 && T2.strip(), O2.strip(), E2 !== "div" && k !== 0 && O2.iushrn(k), { div: T2 || null, mod: O2 };
    }, p2.prototype.divmod = function(b, E2, k) {
      if (l2(!b.isZero()), this.isZero())
        return { div: new p2(0), mod: new p2(0) };
      var O2, A2, x2;
      return this.negative !== 0 && b.negative === 0 ? (x2 = this.neg().divmod(b, E2), E2 !== "mod" && (O2 = x2.div.neg()), E2 !== "div" && (A2 = x2.mod.neg(), k && A2.negative !== 0 && A2.iadd(b)), { div: O2, mod: A2 }) : this.negative === 0 && b.negative !== 0 ? (x2 = this.divmod(b.neg(), E2), E2 !== "mod" && (O2 = x2.div.neg()), { div: O2, mod: x2.mod }) : this.negative & b.negative ? (x2 = this.neg().divmod(b.neg(), E2), E2 !== "div" && (A2 = x2.mod.neg(), k && A2.negative !== 0 && A2.isub(b)), { div: x2.div, mod: A2 }) : b.length > this.length || this.cmp(b) < 0 ? { div: new p2(0), mod: this } : b.length === 1 ? E2 === "div" ? { div: this.divn(b.words[0]), mod: null } : E2 === "mod" ? { div: null, mod: new p2(this.modn(b.words[0])) } : { div: this.divn(b.words[0]), mod: new p2(this.modn(b.words[0])) } : this._wordDiv(b, E2);
    }, p2.prototype.div = function(b) {
      return this.divmod(b, "div", false).div;
    }, p2.prototype.mod = function(b) {
      return this.divmod(b, "mod", false).mod;
    }, p2.prototype.umod = function(b) {
      return this.divmod(b, "mod", true).mod;
    }, p2.prototype.divRound = function(b) {
      var E2 = this.divmod(b);
      if (E2.mod.isZero())
        return E2.div;
      var k = E2.div.negative !== 0 ? E2.mod.isub(b) : E2.mod, O2 = b.ushrn(1), A2 = b.andln(1), x2 = k.cmp(O2);
      return x2 < 0 || A2 === 1 && x2 === 0 ? E2.div : E2.div.negative !== 0 ? E2.div.isubn(1) : E2.div.iaddn(1);
    }, p2.prototype.modn = function(b) {
      l2(b <= 67108863);
      for (var E2 = (1 << 26) % b, k = 0, O2 = this.length - 1; O2 >= 0; O2--)
        k = (E2 * k + (this.words[O2] | 0)) % b;
      return k;
    }, p2.prototype.idivn = function(b) {
      l2(b <= 67108863);
      for (var E2 = 0, k = this.length - 1; k >= 0; k--) {
        var O2 = (this.words[k] | 0) + E2 * 67108864;
        this.words[k] = O2 / b | 0, E2 = O2 % b;
      }
      return this.strip();
    }, p2.prototype.divn = function(b) {
      return this.clone().idivn(b);
    }, p2.prototype.egcd = function(b) {
      l2(b.negative === 0), l2(!b.isZero());
      var E2 = this, k = b.clone();
      E2.negative !== 0 ? E2 = E2.umod(b) : E2 = E2.clone();
      for (var O2 = new p2(1), A2 = new p2(0), x2 = new p2(0), Y2 = new p2(1), B2 = 0; E2.isEven() && k.isEven(); )
        E2.iushrn(1), k.iushrn(1), ++B2;
      for (var T2 = k.clone(), D2 = E2.clone(); !E2.isZero(); ) {
        for (var te2 = 0, me2 = 1; !(E2.words[0] & me2) && te2 < 26; ++te2, me2 <<= 1)
          ;
        if (te2 > 0)
          for (E2.iushrn(te2); te2-- > 0; )
            (O2.isOdd() || A2.isOdd()) && (O2.iadd(T2), A2.isub(D2)), O2.iushrn(1), A2.iushrn(1);
        for (var Ie2 = 0, $e2 = 1; !(k.words[0] & $e2) && Ie2 < 26; ++Ie2, $e2 <<= 1)
          ;
        if (Ie2 > 0)
          for (k.iushrn(Ie2); Ie2-- > 0; )
            (x2.isOdd() || Y2.isOdd()) && (x2.iadd(T2), Y2.isub(D2)), x2.iushrn(1), Y2.iushrn(1);
        E2.cmp(k) >= 0 ? (E2.isub(k), O2.isub(x2), A2.isub(Y2)) : (k.isub(E2), x2.isub(O2), Y2.isub(A2));
      }
      return { a: x2, b: Y2, gcd: k.iushln(B2) };
    }, p2.prototype._invmp = function(b) {
      l2(b.negative === 0), l2(!b.isZero());
      var E2 = this, k = b.clone();
      E2.negative !== 0 ? E2 = E2.umod(b) : E2 = E2.clone();
      for (var O2 = new p2(1), A2 = new p2(0), x2 = k.clone(); E2.cmpn(1) > 0 && k.cmpn(1) > 0; ) {
        for (var Y2 = 0, B2 = 1; !(E2.words[0] & B2) && Y2 < 26; ++Y2, B2 <<= 1)
          ;
        if (Y2 > 0)
          for (E2.iushrn(Y2); Y2-- > 0; )
            O2.isOdd() && O2.iadd(x2), O2.iushrn(1);
        for (var T2 = 0, D2 = 1; !(k.words[0] & D2) && T2 < 26; ++T2, D2 <<= 1)
          ;
        if (T2 > 0)
          for (k.iushrn(T2); T2-- > 0; )
            A2.isOdd() && A2.iadd(x2), A2.iushrn(1);
        E2.cmp(k) >= 0 ? (E2.isub(k), O2.isub(A2)) : (k.isub(E2), A2.isub(O2));
      }
      var te2;
      return E2.cmpn(1) === 0 ? te2 = O2 : te2 = A2, te2.cmpn(0) < 0 && te2.iadd(b), te2;
    }, p2.prototype.gcd = function(b) {
      if (this.isZero())
        return b.abs();
      if (b.isZero())
        return this.abs();
      var E2 = this.clone(), k = b.clone();
      E2.negative = 0, k.negative = 0;
      for (var O2 = 0; E2.isEven() && k.isEven(); O2++)
        E2.iushrn(1), k.iushrn(1);
      do {
        for (; E2.isEven(); )
          E2.iushrn(1);
        for (; k.isEven(); )
          k.iushrn(1);
        var A2 = E2.cmp(k);
        if (A2 < 0) {
          var x2 = E2;
          E2 = k, k = x2;
        } else if (A2 === 0 || k.cmpn(1) === 0)
          break;
        E2.isub(k);
      } while (true);
      return k.iushln(O2);
    }, p2.prototype.invm = function(b) {
      return this.egcd(b).a.umod(b);
    }, p2.prototype.isEven = function() {
      return (this.words[0] & 1) === 0;
    }, p2.prototype.isOdd = function() {
      return (this.words[0] & 1) === 1;
    }, p2.prototype.andln = function(b) {
      return this.words[0] & b;
    }, p2.prototype.bincn = function(b) {
      l2(typeof b == "number");
      var E2 = b % 26, k = (b - E2) / 26, O2 = 1 << E2;
      if (this.length <= k)
        return this._expand(k + 1), this.words[k] |= O2, this;
      for (var A2 = O2, x2 = k; A2 !== 0 && x2 < this.length; x2++) {
        var Y2 = this.words[x2] | 0;
        Y2 += A2, A2 = Y2 >>> 26, Y2 &= 67108863, this.words[x2] = Y2;
      }
      return A2 !== 0 && (this.words[x2] = A2, this.length++), this;
    }, p2.prototype.isZero = function() {
      return this.length === 1 && this.words[0] === 0;
    }, p2.prototype.cmpn = function(b) {
      var E2 = b < 0;
      if (this.negative !== 0 && !E2)
        return -1;
      if (this.negative === 0 && E2)
        return 1;
      this.strip();
      var k;
      if (this.length > 1)
        k = 1;
      else {
        E2 && (b = -b), l2(b <= 67108863, "Number is too big");
        var O2 = this.words[0] | 0;
        k = O2 === b ? 0 : O2 < b ? -1 : 1;
      }
      return this.negative !== 0 ? -k | 0 : k;
    }, p2.prototype.cmp = function(b) {
      if (this.negative !== 0 && b.negative === 0)
        return -1;
      if (this.negative === 0 && b.negative !== 0)
        return 1;
      var E2 = this.ucmp(b);
      return this.negative !== 0 ? -E2 | 0 : E2;
    }, p2.prototype.ucmp = function(b) {
      if (this.length > b.length)
        return 1;
      if (this.length < b.length)
        return -1;
      for (var E2 = 0, k = this.length - 1; k >= 0; k--) {
        var O2 = this.words[k] | 0, A2 = b.words[k] | 0;
        if (O2 !== A2) {
          O2 < A2 ? E2 = -1 : O2 > A2 && (E2 = 1);
          break;
        }
      }
      return E2;
    }, p2.prototype.gtn = function(b) {
      return this.cmpn(b) === 1;
    }, p2.prototype.gt = function(b) {
      return this.cmp(b) === 1;
    }, p2.prototype.gten = function(b) {
      return this.cmpn(b) >= 0;
    }, p2.prototype.gte = function(b) {
      return this.cmp(b) >= 0;
    }, p2.prototype.ltn = function(b) {
      return this.cmpn(b) === -1;
    }, p2.prototype.lt = function(b) {
      return this.cmp(b) === -1;
    }, p2.prototype.lten = function(b) {
      return this.cmpn(b) <= 0;
    }, p2.prototype.lte = function(b) {
      return this.cmp(b) <= 0;
    }, p2.prototype.eqn = function(b) {
      return this.cmpn(b) === 0;
    }, p2.prototype.eq = function(b) {
      return this.cmp(b) === 0;
    }, p2.red = function(b) {
      return new q2(b);
    }, p2.prototype.toRed = function(b) {
      return l2(!this.red, "Already a number in reduction context"), l2(this.negative === 0, "red works only with positives"), b.convertTo(this)._forceRed(b);
    }, p2.prototype.fromRed = function() {
      return l2(this.red, "fromRed works only with numbers in reduction context"), this.red.convertFrom(this);
    }, p2.prototype._forceRed = function(b) {
      return this.red = b, this;
    }, p2.prototype.forceRed = function(b) {
      return l2(!this.red, "Already a number in reduction context"), this._forceRed(b);
    }, p2.prototype.redAdd = function(b) {
      return l2(this.red, "redAdd works only with red numbers"), this.red.add(this, b);
    }, p2.prototype.redIAdd = function(b) {
      return l2(this.red, "redIAdd works only with red numbers"), this.red.iadd(this, b);
    }, p2.prototype.redSub = function(b) {
      return l2(this.red, "redSub works only with red numbers"), this.red.sub(this, b);
    }, p2.prototype.redISub = function(b) {
      return l2(this.red, "redISub works only with red numbers"), this.red.isub(this, b);
    }, p2.prototype.redShl = function(b) {
      return l2(this.red, "redShl works only with red numbers"), this.red.shl(this, b);
    }, p2.prototype.redMul = function(b) {
      return l2(this.red, "redMul works only with red numbers"), this.red._verify2(this, b), this.red.mul(this, b);
    }, p2.prototype.redIMul = function(b) {
      return l2(this.red, "redMul works only with red numbers"), this.red._verify2(this, b), this.red.imul(this, b);
    }, p2.prototype.redSqr = function() {
      return l2(this.red, "redSqr works only with red numbers"), this.red._verify1(this), this.red.sqr(this);
    }, p2.prototype.redISqr = function() {
      return l2(this.red, "redISqr works only with red numbers"), this.red._verify1(this), this.red.isqr(this);
    }, p2.prototype.redSqrt = function() {
      return l2(this.red, "redSqrt works only with red numbers"), this.red._verify1(this), this.red.sqrt(this);
    }, p2.prototype.redInvm = function() {
      return l2(this.red, "redInvm works only with red numbers"), this.red._verify1(this), this.red.invm(this);
    }, p2.prototype.redNeg = function() {
      return l2(this.red, "redNeg works only with red numbers"), this.red._verify1(this), this.red.neg(this);
    }, p2.prototype.redPow = function(b) {
      return l2(this.red && !b.red, "redPow(normalNum)"), this.red._verify1(this), this.red.pow(this, b);
    };
    var de2 = { k256: null, p224: null, p192: null, p25519: null };
    function pe2(C2, b) {
      this.name = C2, this.p = new p2(b, 16), this.n = this.p.bitLength(), this.k = new p2(1).iushln(this.n).isub(this.p), this.tmp = this._tmp();
    }
    pe2.prototype._tmp = function() {
      var b = new p2(null);
      return b.words = new Array(Math.ceil(this.n / 13)), b;
    }, pe2.prototype.ireduce = function(b) {
      var E2 = b, k;
      do
        this.split(E2, this.tmp), E2 = this.imulK(E2), E2 = E2.iadd(this.tmp), k = E2.bitLength();
      while (k > this.n);
      var O2 = k < this.n ? -1 : E2.ucmp(this.p);
      return O2 === 0 ? (E2.words[0] = 0, E2.length = 1) : O2 > 0 ? E2.isub(this.p) : E2.strip !== void 0 ? E2.strip() : E2._strip(), E2;
    }, pe2.prototype.split = function(b, E2) {
      b.iushrn(this.n, 0, E2);
    }, pe2.prototype.imulK = function(b) {
      return b.imul(this.k);
    };
    function le2() {
      pe2.call(this, "k256", "ffffffff ffffffff ffffffff ffffffff ffffffff ffffffff fffffffe fffffc2f");
    }
    v2(le2, pe2), le2.prototype.split = function(b, E2) {
      for (var k = 4194303, O2 = Math.min(b.length, 9), A2 = 0; A2 < O2; A2++)
        E2.words[A2] = b.words[A2];
      if (E2.length = O2, b.length <= 9) {
        b.words[0] = 0, b.length = 1;
        return;
      }
      var x2 = b.words[9];
      for (E2.words[E2.length++] = x2 & k, A2 = 10; A2 < b.length; A2++) {
        var Y2 = b.words[A2] | 0;
        b.words[A2 - 10] = (Y2 & k) << 4 | x2 >>> 22, x2 = Y2;
      }
      x2 >>>= 22, b.words[A2 - 10] = x2, x2 === 0 && b.length > 10 ? b.length -= 10 : b.length -= 9;
    }, le2.prototype.imulK = function(b) {
      b.words[b.length] = 0, b.words[b.length + 1] = 0, b.length += 2;
      for (var E2 = 0, k = 0; k < b.length; k++) {
        var O2 = b.words[k] | 0;
        E2 += O2 * 977, b.words[k] = E2 & 67108863, E2 = O2 * 64 + (E2 / 67108864 | 0);
      }
      return b.words[b.length - 1] === 0 && (b.length--, b.words[b.length - 1] === 0 && b.length--), b;
    };
    function be2() {
      pe2.call(this, "p224", "ffffffff ffffffff ffffffff ffffffff 00000000 00000000 00000001");
    }
    v2(be2, pe2);
    function ke2() {
      pe2.call(this, "p192", "ffffffff ffffffff ffffffff fffffffe ffffffff ffffffff");
    }
    v2(ke2, pe2);
    function Te2() {
      pe2.call(this, "25519", "7fffffffffffffff ffffffffffffffff ffffffffffffffff ffffffffffffffed");
    }
    v2(Te2, pe2), Te2.prototype.imulK = function(b) {
      for (var E2 = 0, k = 0; k < b.length; k++) {
        var O2 = (b.words[k] | 0) * 19 + E2, A2 = O2 & 67108863;
        O2 >>>= 26, b.words[k] = A2, E2 = O2;
      }
      return E2 !== 0 && (b.words[b.length++] = E2), b;
    }, p2._prime = function(b) {
      if (de2[b])
        return de2[b];
      var E2;
      if (b === "k256")
        E2 = new le2();
      else if (b === "p224")
        E2 = new be2();
      else if (b === "p192")
        E2 = new ke2();
      else if (b === "p25519")
        E2 = new Te2();
      else
        throw new Error("Unknown prime " + b);
      return de2[b] = E2, E2;
    };
    function q2(C2) {
      if (typeof C2 == "string") {
        var b = p2._prime(C2);
        this.m = b.p, this.prime = b;
      } else
        l2(C2.gtn(1), "modulus must be greater than 1"), this.m = C2, this.prime = null;
    }
    q2.prototype._verify1 = function(b) {
      l2(b.negative === 0, "red works only with positives"), l2(b.red, "red works only with red numbers");
    }, q2.prototype._verify2 = function(b, E2) {
      l2((b.negative | E2.negative) === 0, "red works only with positives"), l2(b.red && b.red === E2.red, "red works only with red numbers");
    }, q2.prototype.imod = function(b) {
      return this.prime ? this.prime.ireduce(b)._forceRed(this) : b.umod(this.m)._forceRed(this);
    }, q2.prototype.neg = function(b) {
      return b.isZero() ? b.clone() : this.m.sub(b)._forceRed(this);
    }, q2.prototype.add = function(b, E2) {
      this._verify2(b, E2);
      var k = b.add(E2);
      return k.cmp(this.m) >= 0 && k.isub(this.m), k._forceRed(this);
    }, q2.prototype.iadd = function(b, E2) {
      this._verify2(b, E2);
      var k = b.iadd(E2);
      return k.cmp(this.m) >= 0 && k.isub(this.m), k;
    }, q2.prototype.sub = function(b, E2) {
      this._verify2(b, E2);
      var k = b.sub(E2);
      return k.cmpn(0) < 0 && k.iadd(this.m), k._forceRed(this);
    }, q2.prototype.isub = function(b, E2) {
      this._verify2(b, E2);
      var k = b.isub(E2);
      return k.cmpn(0) < 0 && k.iadd(this.m), k;
    }, q2.prototype.shl = function(b, E2) {
      return this._verify1(b), this.imod(b.ushln(E2));
    }, q2.prototype.imul = function(b, E2) {
      return this._verify2(b, E2), this.imod(b.imul(E2));
    }, q2.prototype.mul = function(b, E2) {
      return this._verify2(b, E2), this.imod(b.mul(E2));
    }, q2.prototype.isqr = function(b) {
      return this.imul(b, b.clone());
    }, q2.prototype.sqr = function(b) {
      return this.mul(b, b);
    }, q2.prototype.sqrt = function(b) {
      if (b.isZero())
        return b.clone();
      var E2 = this.m.andln(3);
      if (l2(E2 % 2 === 1), E2 === 3) {
        var k = this.m.add(new p2(1)).iushrn(2);
        return this.pow(b, k);
      }
      for (var O2 = this.m.subn(1), A2 = 0; !O2.isZero() && O2.andln(1) === 0; )
        A2++, O2.iushrn(1);
      l2(!O2.isZero());
      var x2 = new p2(1).toRed(this), Y2 = x2.redNeg(), B2 = this.m.subn(1).iushrn(1), T2 = this.m.bitLength();
      for (T2 = new p2(2 * T2 * T2).toRed(this); this.pow(T2, B2).cmp(Y2) !== 0; )
        T2.redIAdd(Y2);
      for (var D2 = this.pow(T2, O2), te2 = this.pow(b, O2.addn(1).iushrn(1)), me2 = this.pow(b, O2), Ie2 = A2; me2.cmp(x2) !== 0; ) {
        for (var $e2 = me2, ye2 = 0; $e2.cmp(x2) !== 0; ye2++)
          $e2 = $e2.redSqr();
        l2(ye2 < Ie2);
        var he2 = this.pow(D2, new p2(1).iushln(Ie2 - ye2 - 1));
        te2 = te2.redMul(he2), D2 = he2.redSqr(), me2 = me2.redMul(D2), Ie2 = ye2;
      }
      return te2;
    }, q2.prototype.invm = function(b) {
      var E2 = b._invmp(this.m);
      return E2.negative !== 0 ? (E2.negative = 0, this.imod(E2).redNeg()) : this.imod(E2);
    }, q2.prototype.pow = function(b, E2) {
      if (E2.isZero())
        return new p2(1).toRed(this);
      if (E2.cmpn(1) === 0)
        return b.clone();
      var k = 4, O2 = new Array(1 << k);
      O2[0] = new p2(1).toRed(this), O2[1] = b;
      for (var A2 = 2; A2 < O2.length; A2++)
        O2[A2] = this.mul(O2[A2 - 1], b);
      var x2 = O2[0], Y2 = 0, B2 = 0, T2 = E2.bitLength() % 26;
      for (T2 === 0 && (T2 = 26), A2 = E2.length - 1; A2 >= 0; A2--) {
        for (var D2 = E2.words[A2], te2 = T2 - 1; te2 >= 0; te2--) {
          var me2 = D2 >> te2 & 1;
          if (x2 !== O2[0] && (x2 = this.sqr(x2)), me2 === 0 && Y2 === 0) {
            B2 = 0;
            continue;
          }
          Y2 <<= 1, Y2 |= me2, B2++, !(B2 !== k && (A2 !== 0 || te2 !== 0)) && (x2 = this.mul(x2, O2[Y2]), B2 = 0, Y2 = 0);
        }
        T2 = 26;
      }
      return x2;
    }, q2.prototype.convertTo = function(b) {
      var E2 = b.umod(this.m);
      return E2 === b ? E2.clone() : E2;
    }, q2.prototype.convertFrom = function(b) {
      var E2 = b.clone();
      return E2.red = null, E2;
    }, p2.mont = function(b) {
      return new z2(b);
    };
    function z2(C2) {
      q2.call(this, C2), this.shift = this.m.bitLength(), this.shift % 26 !== 0 && (this.shift += 26 - this.shift % 26), this.r = new p2(1).iushln(this.shift), this.r2 = this.imod(this.r.sqr()), this.rinv = this.r._invmp(this.m), this.minv = this.rinv.mul(this.r).isubn(1).div(this.m), this.minv = this.minv.umod(this.r), this.minv = this.r.sub(this.minv);
    }
    v2(z2, q2), z2.prototype.convertTo = function(b) {
      return this.imod(b.ushln(this.shift));
    }, z2.prototype.convertFrom = function(b) {
      var E2 = this.imod(b.mul(this.rinv));
      return E2.red = null, E2;
    }, z2.prototype.imul = function(b, E2) {
      if (b.isZero() || E2.isZero())
        return b.words[0] = 0, b.length = 1, b;
      var k = b.imul(E2), O2 = k.maskn(this.shift).mul(this.minv).imaskn(this.shift).mul(this.m), A2 = k.isub(O2).iushrn(this.shift), x2 = A2;
      return A2.cmp(this.m) >= 0 ? x2 = A2.isub(this.m) : A2.cmpn(0) < 0 && (x2 = A2.iadd(this.m)), x2._forceRed(this);
    }, z2.prototype.mul = function(b, E2) {
      if (b.isZero() || E2.isZero())
        return new p2(0)._forceRed(this);
      var k = b.mul(E2), O2 = k.maskn(this.shift).mul(this.minv).imaskn(this.shift).mul(this.m), A2 = k.isub(O2).iushrn(this.shift), x2 = A2;
      return A2.cmp(this.m) >= 0 ? x2 = A2.isub(this.m) : A2.cmpn(0) < 0 && (x2 = A2.iadd(this.m)), x2._forceRed(this);
    }, z2.prototype.invm = function(b) {
      var E2 = this.imod(b._invmp(this.m).mul(this.r2));
      return E2._forceRed(this);
    };
  })(a420, commonjsGlobal$1);
})(bn$2);
var bnExports$2 = bn$2.exports, api = {}, encoders = {}, buffer$1 = require$$0$2, Buffer$f = buffer$1.Buffer, safer = {}, key;
for (key in buffer$1)
  buffer$1.hasOwnProperty(key) && (key === "SlowBuffer" || key === "Buffer" || (safer[key] = buffer$1[key]));
var Safer = safer.Buffer = {};
for (key in Buffer$f)
  Buffer$f.hasOwnProperty(key) && (key === "allocUnsafe" || key === "allocUnsafeSlow" || (Safer[key] = Buffer$f[key]));
safer.Buffer.prototype = Buffer$f.prototype;
(!Safer.from || Safer.from === Uint8Array.from) && (Safer.from = function(a420, u2, c) {
  if (typeof a420 == "number")
    throw new TypeError('The "value" argument must not be of type number. Received type ' + typeof a420);
  if (a420 && typeof a420.length > "u")
    throw new TypeError("The first argument must be one of type string, Buffer, ArrayBuffer, Array, or Array-like Object. Received type " + typeof a420);
  return Buffer$f(a420, u2, c);
});
Safer.alloc || (Safer.alloc = function(a420, u2, c) {
  if (typeof a420 != "number")
    throw new TypeError('The "size" argument must be of type number. Received type ' + typeof a420);
  if (a420 < 0 || a420 >= 2 * (1 << 30))
    throw new RangeError('The value "' + a420 + '" is invalid for option "size"');
  var l2 = Buffer$f(a420);
  return !u2 || u2.length === 0 ? l2.fill(0) : typeof c == "string" ? l2.fill(u2, c) : l2.fill(u2), l2;
});
if (!safer.kStringMaxLength)
  try {
    safer.kStringMaxLength = process$1.binding("buffer").kStringMaxLength;
  } catch {
  }
safer.constants || (safer.constants = { MAX_LENGTH: safer.kMaxLength }, safer.kStringMaxLength && (safer.constants.MAX_STRING_LENGTH = safer.kStringMaxLength));
var safer_1 = safer, reporter = {};
const inherits$5 = inherits_browserExports;
function Reporter$2(a420) {
  this._reporterState = { obj: null, path: [], options: a420 || {}, errors: [] };
}
reporter.Reporter = Reporter$2;
Reporter$2.prototype.isError = function a300(u2) {
  return u2 instanceof ReporterError;
};
Reporter$2.prototype.save = function a301() {
  const u2 = this._reporterState;
  return { obj: u2.obj, pathLen: u2.path.length };
};
Reporter$2.prototype.restore = function a302(u2) {
  const c = this._reporterState;
  c.obj = u2.obj, c.path = c.path.slice(0, u2.pathLen);
};
Reporter$2.prototype.enterKey = function a303(u2) {
  return this._reporterState.path.push(u2);
};
Reporter$2.prototype.exitKey = function a304(u2) {
  const c = this._reporterState;
  c.path = c.path.slice(0, u2 - 1);
};
Reporter$2.prototype.leaveKey = function a305(u2, c, l2) {
  const v2 = this._reporterState;
  this.exitKey(u2), v2.obj !== null && (v2.obj[c] = l2);
};
Reporter$2.prototype.path = function a306() {
  return this._reporterState.path.join("/");
};
Reporter$2.prototype.enterObject = function a307() {
  const u2 = this._reporterState, c = u2.obj;
  return u2.obj = {}, c;
};
Reporter$2.prototype.leaveObject = function a308(u2) {
  const c = this._reporterState, l2 = c.obj;
  return c.obj = u2, l2;
};
Reporter$2.prototype.error = function a309(u2) {
  let c;
  const l2 = this._reporterState, v2 = u2 instanceof ReporterError;
  if (v2 ? c = u2 : c = new ReporterError(l2.path.map(function(p2) {
    return "[" + JSON.stringify(p2) + "]";
  }).join(""), u2.message || u2, u2.stack), !l2.options.partial)
    throw c;
  return v2 || l2.errors.push(c), c;
};
Reporter$2.prototype.wrapResult = function a310(u2) {
  const c = this._reporterState;
  return c.options.partial ? { result: this.isError(u2) ? null : u2, errors: c.errors } : u2;
};
function ReporterError(a420, u2) {
  this.path = a420, this.rethrow(u2);
}
inherits$5(ReporterError, Error);
ReporterError.prototype.rethrow = function a311(u2) {
  if (this.message = u2 + " at: " + (this.path || "(shallow)"), Error.captureStackTrace && Error.captureStackTrace(this, ReporterError), !this.stack)
    try {
      throw new Error(this.message);
    } catch (c) {
      this.stack = c.stack;
    }
  return this;
};
var buffer = {};
const inherits$4 = inherits_browserExports, Reporter$1 = reporter.Reporter, Buffer$e = safer_1.Buffer;
function DecoderBuffer$2(a420, u2) {
  if (Reporter$1.call(this, u2), !Buffer$e.isBuffer(a420)) {
    this.error("Input not Buffer");
    return;
  }
  this.base = a420, this.offset = 0, this.length = a420.length;
}
inherits$4(DecoderBuffer$2, Reporter$1);
buffer.DecoderBuffer = DecoderBuffer$2;
DecoderBuffer$2.isDecoderBuffer = function a312(u2) {
  return u2 instanceof DecoderBuffer$2 ? true : typeof u2 == "object" && Buffer$e.isBuffer(u2.base) && u2.constructor.name === "DecoderBuffer" && typeof u2.offset == "number" && typeof u2.length == "number" && typeof u2.save == "function" && typeof u2.restore == "function" && typeof u2.isEmpty == "function" && typeof u2.readUInt8 == "function" && typeof u2.skip == "function" && typeof u2.raw == "function";
};
DecoderBuffer$2.prototype.save = function a313() {
  return { offset: this.offset, reporter: Reporter$1.prototype.save.call(this) };
};
DecoderBuffer$2.prototype.restore = function a314(u2) {
  const c = new DecoderBuffer$2(this.base);
  return c.offset = u2.offset, c.length = this.offset, this.offset = u2.offset, Reporter$1.prototype.restore.call(this, u2.reporter), c;
};
DecoderBuffer$2.prototype.isEmpty = function a315() {
  return this.offset === this.length;
};
DecoderBuffer$2.prototype.readUInt8 = function a316(u2) {
  return this.offset + 1 <= this.length ? this.base.readUInt8(this.offset++, true) : this.error(u2 || "DecoderBuffer overrun");
};
DecoderBuffer$2.prototype.skip = function a317(u2, c) {
  if (!(this.offset + u2 <= this.length))
    return this.error(c || "DecoderBuffer overrun");
  const l2 = new DecoderBuffer$2(this.base);
  return l2._reporterState = this._reporterState, l2.offset = this.offset, l2.length = this.offset + u2, this.offset += u2, l2;
};
DecoderBuffer$2.prototype.raw = function a318(u2) {
  return this.base.slice(u2 ? u2.offset : this.offset, this.length);
};
function EncoderBuffer$1(a420, u2) {
  if (Array.isArray(a420))
    this.length = 0, this.value = a420.map(function(c) {
      return EncoderBuffer$1.isEncoderBuffer(c) || (c = new EncoderBuffer$1(c, u2)), this.length += c.length, c;
    }, this);
  else if (typeof a420 == "number") {
    if (!(0 <= a420 && a420 <= 255))
      return u2.error("non-byte EncoderBuffer value");
    this.value = a420, this.length = 1;
  } else if (typeof a420 == "string")
    this.value = a420, this.length = Buffer$e.byteLength(a420);
  else if (Buffer$e.isBuffer(a420))
    this.value = a420, this.length = a420.length;
  else
    return u2.error("Unsupported type: " + typeof a420);
}
buffer.EncoderBuffer = EncoderBuffer$1;
EncoderBuffer$1.isEncoderBuffer = function a319(u2) {
  return u2 instanceof EncoderBuffer$1 ? true : typeof u2 == "object" && u2.constructor.name === "EncoderBuffer" && typeof u2.length == "number" && typeof u2.join == "function";
};
EncoderBuffer$1.prototype.join = function a320(u2, c) {
  return u2 || (u2 = Buffer$e.alloc(this.length)), c || (c = 0), this.length === 0 || (Array.isArray(this.value) ? this.value.forEach(function(l2) {
    l2.join(u2, c), c += l2.length;
  }) : (typeof this.value == "number" ? u2[c] = this.value : typeof this.value == "string" ? u2.write(this.value, c) : Buffer$e.isBuffer(this.value) && this.value.copy(u2, c), c += this.length)), u2;
};
const Reporter = reporter.Reporter, EncoderBuffer = buffer.EncoderBuffer, DecoderBuffer$1 = buffer.DecoderBuffer, assert$1 = minimalisticAssert, tags = ["seq", "seqof", "set", "setof", "objid", "bool", "gentime", "utctime", "null_", "enum", "int", "objDesc", "bitstr", "bmpstr", "charstr", "genstr", "graphstr", "ia5str", "iso646str", "numstr", "octstr", "printstr", "t61str", "unistr", "utf8str", "videostr"], methods = ["key", "obj", "use", "optional", "explicit", "implicit", "def", "choice", "any", "contains"].concat(tags), overrided = ["_peekTag", "_decodeTag", "_use", "_decodeStr", "_decodeObjid", "_decodeTime", "_decodeNull", "_decodeInt", "_decodeBool", "_decodeList", "_encodeComposite", "_encodeStr", "_encodeObjid", "_encodeTime", "_encodeNull", "_encodeInt", "_encodeBool"];
function Node$2(a420, u2, c) {
  const l2 = {};
  this._baseState = l2, l2.name = c, l2.enc = a420, l2.parent = u2 || null, l2.children = null, l2.tag = null, l2.args = null, l2.reverseArgs = null, l2.choice = null, l2.optional = false, l2.any = false, l2.obj = false, l2.use = null, l2.useDecoder = null, l2.key = null, l2.default = null, l2.explicit = null, l2.implicit = null, l2.contains = null, l2.parent || (l2.children = [], this._wrap());
}
var node = Node$2;
const stateProps = ["enc", "parent", "children", "tag", "args", "reverseArgs", "choice", "optional", "any", "obj", "use", "alteredUse", "key", "default", "explicit", "implicit", "contains"];
Node$2.prototype.clone = function a321() {
  const u2 = this._baseState, c = {};
  stateProps.forEach(function(v2) {
    c[v2] = u2[v2];
  });
  const l2 = new this.constructor(c.parent);
  return l2._baseState = c, l2;
};
Node$2.prototype._wrap = function a322() {
  const u2 = this._baseState;
  methods.forEach(function(c) {
    this[c] = function() {
      const v2 = new this.constructor(this);
      return u2.children.push(v2), v2[c].apply(v2, arguments);
    };
  }, this);
};
Node$2.prototype._init = function a323(u2) {
  const c = this._baseState;
  assert$1(c.parent === null), u2.call(this), c.children = c.children.filter(function(l2) {
    return l2._baseState.parent === this;
  }, this), assert$1.equal(c.children.length, 1, "Root node can have only one child");
};
Node$2.prototype._useArgs = function a324(u2) {
  const c = this._baseState, l2 = u2.filter(function(v2) {
    return v2 instanceof this.constructor;
  }, this);
  u2 = u2.filter(function(v2) {
    return !(v2 instanceof this.constructor);
  }, this), l2.length !== 0 && (assert$1(c.children === null), c.children = l2, l2.forEach(function(v2) {
    v2._baseState.parent = this;
  }, this)), u2.length !== 0 && (assert$1(c.args === null), c.args = u2, c.reverseArgs = u2.map(function(v2) {
    if (typeof v2 != "object" || v2.constructor !== Object)
      return v2;
    const p2 = {};
    return Object.keys(v2).forEach(function(_) {
      _ == (_ | 0) && (_ |= 0);
      const I2 = v2[_];
      p2[I2] = _;
    }), p2;
  }));
};
overrided.forEach(function(a420) {
  Node$2.prototype[a420] = function() {
    const c = this._baseState;
    throw new Error(a420 + " not implemented for encoding: " + c.enc);
  };
});
tags.forEach(function(a420) {
  Node$2.prototype[a420] = function() {
    const c = this._baseState, l2 = Array.prototype.slice.call(arguments);
    return assert$1(c.tag === null), c.tag = a420, this._useArgs(l2), this;
  };
});
Node$2.prototype.use = function a325(u2) {
  assert$1(u2);
  const c = this._baseState;
  return assert$1(c.use === null), c.use = u2, this;
};
Node$2.prototype.optional = function a326() {
  const u2 = this._baseState;
  return u2.optional = true, this;
};
Node$2.prototype.def = function a327(u2) {
  const c = this._baseState;
  return assert$1(c.default === null), c.default = u2, c.optional = true, this;
};
Node$2.prototype.explicit = function a328(u2) {
  const c = this._baseState;
  return assert$1(c.explicit === null && c.implicit === null), c.explicit = u2, this;
};
Node$2.prototype.implicit = function a329(u2) {
  const c = this._baseState;
  return assert$1(c.explicit === null && c.implicit === null), c.implicit = u2, this;
};
Node$2.prototype.obj = function a330() {
  const u2 = this._baseState, c = Array.prototype.slice.call(arguments);
  return u2.obj = true, c.length !== 0 && this._useArgs(c), this;
};
Node$2.prototype.key = function a331(u2) {
  const c = this._baseState;
  return assert$1(c.key === null), c.key = u2, this;
};
Node$2.prototype.any = function a332() {
  const u2 = this._baseState;
  return u2.any = true, this;
};
Node$2.prototype.choice = function a333(u2) {
  const c = this._baseState;
  return assert$1(c.choice === null), c.choice = u2, this._useArgs(Object.keys(u2).map(function(l2) {
    return u2[l2];
  })), this;
};
Node$2.prototype.contains = function a334(u2) {
  const c = this._baseState;
  return assert$1(c.use === null), c.contains = u2, this;
};
Node$2.prototype._decode = function a335(u2, c) {
  const l2 = this._baseState;
  if (l2.parent === null)
    return u2.wrapResult(l2.children[0]._decode(u2, c));
  let v2 = l2.default, p2 = true, _ = null;
  if (l2.key !== null && (_ = u2.enterKey(l2.key)), l2.optional) {
    let P2 = null;
    if (l2.explicit !== null ? P2 = l2.explicit : l2.implicit !== null ? P2 = l2.implicit : l2.tag !== null && (P2 = l2.tag), P2 === null && !l2.any) {
      const $ = u2.save();
      try {
        l2.choice === null ? this._decodeGeneric(l2.tag, u2, c) : this._decodeChoice(u2, c), p2 = true;
      } catch {
        p2 = false;
      }
      u2.restore($);
    } else if (p2 = this._peekTag(u2, P2, l2.any), u2.isError(p2))
      return p2;
  }
  let I2;
  if (l2.obj && p2 && (I2 = u2.enterObject()), p2) {
    if (l2.explicit !== null) {
      const $ = this._decodeTag(u2, l2.explicit);
      if (u2.isError($))
        return $;
      u2 = $;
    }
    const P2 = u2.offset;
    if (l2.use === null && l2.choice === null) {
      let $;
      l2.any && ($ = u2.save());
      const F2 = this._decodeTag(u2, l2.implicit !== null ? l2.implicit : l2.tag, l2.any);
      if (u2.isError(F2))
        return F2;
      l2.any ? v2 = u2.raw($) : u2 = F2;
    }
    if (c && c.track && l2.tag !== null && c.track(u2.path(), P2, u2.length, "tagged"), c && c.track && l2.tag !== null && c.track(u2.path(), u2.offset, u2.length, "content"), l2.any || (l2.choice === null ? v2 = this._decodeGeneric(l2.tag, u2, c) : v2 = this._decodeChoice(u2, c)), u2.isError(v2))
      return v2;
    if (!l2.any && l2.choice === null && l2.children !== null && l2.children.forEach(function(F2) {
      F2._decode(u2, c);
    }), l2.contains && (l2.tag === "octstr" || l2.tag === "bitstr")) {
      const $ = new DecoderBuffer$1(v2);
      v2 = this._getUse(l2.contains, u2._reporterState.obj)._decode($, c);
    }
  }
  return l2.obj && p2 && (v2 = u2.leaveObject(I2)), l2.key !== null && (v2 !== null || p2 === true) ? u2.leaveKey(_, l2.key, v2) : _ !== null && u2.exitKey(_), v2;
};
Node$2.prototype._decodeGeneric = function a336(u2, c, l2) {
  const v2 = this._baseState;
  return u2 === "seq" || u2 === "set" ? null : u2 === "seqof" || u2 === "setof" ? this._decodeList(c, u2, v2.args[0], l2) : /str$/.test(u2) ? this._decodeStr(c, u2, l2) : u2 === "objid" && v2.args ? this._decodeObjid(c, v2.args[0], v2.args[1], l2) : u2 === "objid" ? this._decodeObjid(c, null, null, l2) : u2 === "gentime" || u2 === "utctime" ? this._decodeTime(c, u2, l2) : u2 === "null_" ? this._decodeNull(c, l2) : u2 === "bool" ? this._decodeBool(c, l2) : u2 === "objDesc" ? this._decodeStr(c, u2, l2) : u2 === "int" || u2 === "enum" ? this._decodeInt(c, v2.args && v2.args[0], l2) : v2.use !== null ? this._getUse(v2.use, c._reporterState.obj)._decode(c, l2) : c.error("unknown tag: " + u2);
};
Node$2.prototype._getUse = function a337(u2, c) {
  const l2 = this._baseState;
  return l2.useDecoder = this._use(u2, c), assert$1(l2.useDecoder._baseState.parent === null), l2.useDecoder = l2.useDecoder._baseState.children[0], l2.implicit !== l2.useDecoder._baseState.implicit && (l2.useDecoder = l2.useDecoder.clone(), l2.useDecoder._baseState.implicit = l2.implicit), l2.useDecoder;
};
Node$2.prototype._decodeChoice = function a338(u2, c) {
  const l2 = this._baseState;
  let v2 = null, p2 = false;
  return Object.keys(l2.choice).some(function(_) {
    const I2 = u2.save(), P2 = l2.choice[_];
    try {
      const $ = P2._decode(u2, c);
      if (u2.isError($))
        return false;
      v2 = { type: _, value: $ }, p2 = true;
    } catch {
      return u2.restore(I2), false;
    }
    return true;
  }, this), p2 ? v2 : u2.error("Choice not matched");
};
Node$2.prototype._createEncoderBuffer = function a339(u2) {
  return new EncoderBuffer(u2, this.reporter);
};
Node$2.prototype._encode = function a340(u2, c, l2) {
  const v2 = this._baseState;
  if (v2.default !== null && v2.default === u2)
    return;
  const p2 = this._encodeValue(u2, c, l2);
  if (p2 !== void 0 && !this._skipDefault(p2, c, l2))
    return p2;
};
Node$2.prototype._encodeValue = function a341(u2, c, l2) {
  const v2 = this._baseState;
  if (v2.parent === null)
    return v2.children[0]._encode(u2, c || new Reporter());
  let p2 = null;
  if (this.reporter = c, v2.optional && u2 === void 0)
    if (v2.default !== null)
      u2 = v2.default;
    else
      return;
  let _ = null, I2 = false;
  if (v2.any)
    p2 = this._createEncoderBuffer(u2);
  else if (v2.choice)
    p2 = this._encodeChoice(u2, c);
  else if (v2.contains)
    _ = this._getUse(v2.contains, l2)._encode(u2, c), I2 = true;
  else if (v2.children)
    _ = v2.children.map(function(P2) {
      if (P2._baseState.tag === "null_")
        return P2._encode(null, c, u2);
      if (P2._baseState.key === null)
        return c.error("Child should have a key");
      const $ = c.enterKey(P2._baseState.key);
      if (typeof u2 != "object")
        return c.error("Child expected, but input is not object");
      const F2 = P2._encode(u2[P2._baseState.key], c, u2);
      return c.leaveKey($), F2;
    }, this).filter(function(P2) {
      return P2;
    }), _ = this._createEncoderBuffer(_);
  else if (v2.tag === "seqof" || v2.tag === "setof") {
    if (!(v2.args && v2.args.length === 1))
      return c.error("Too many args for : " + v2.tag);
    if (!Array.isArray(u2))
      return c.error("seqof/setof, but data is not Array");
    const P2 = this.clone();
    P2._baseState.implicit = null, _ = this._createEncoderBuffer(u2.map(function($) {
      const F2 = this._baseState;
      return this._getUse(F2.args[0], u2)._encode($, c);
    }, P2));
  } else
    v2.use !== null ? p2 = this._getUse(v2.use, l2)._encode(u2, c) : (_ = this._encodePrimitive(v2.tag, u2), I2 = true);
  if (!v2.any && v2.choice === null) {
    const P2 = v2.implicit !== null ? v2.implicit : v2.tag, $ = v2.implicit === null ? "universal" : "context";
    P2 === null ? v2.use === null && c.error("Tag could be omitted only for .use()") : v2.use === null && (p2 = this._encodeComposite(P2, I2, $, _));
  }
  return v2.explicit !== null && (p2 = this._encodeComposite(v2.explicit, false, "context", p2)), p2;
};
Node$2.prototype._encodeChoice = function a342(u2, c) {
  const l2 = this._baseState, v2 = l2.choice[u2.type];
  return v2 || assert$1(false, u2.type + " not found in " + JSON.stringify(Object.keys(l2.choice))), v2._encode(u2.value, c);
};
Node$2.prototype._encodePrimitive = function a343(u2, c) {
  const l2 = this._baseState;
  if (/str$/.test(u2))
    return this._encodeStr(c, u2);
  if (u2 === "objid" && l2.args)
    return this._encodeObjid(c, l2.reverseArgs[0], l2.args[1]);
  if (u2 === "objid")
    return this._encodeObjid(c, null, null);
  if (u2 === "gentime" || u2 === "utctime")
    return this._encodeTime(c, u2);
  if (u2 === "null_")
    return this._encodeNull();
  if (u2 === "int" || u2 === "enum")
    return this._encodeInt(c, l2.args && l2.reverseArgs[0]);
  if (u2 === "bool")
    return this._encodeBool(c);
  if (u2 === "objDesc")
    return this._encodeStr(c, u2);
  throw new Error("Unsupported tag: " + u2);
};
Node$2.prototype._isNumstr = function a344(u2) {
  return /^[0-9 ]*$/.test(u2);
};
Node$2.prototype._isPrintstr = function a345(u2) {
  return /^[A-Za-z0-9 '()+,-./:=?]*$/.test(u2);
};
var der$2 = {};
(function(a420) {
  function u2(c) {
    const l2 = {};
    return Object.keys(c).forEach(function(v2) {
      (v2 | 0) == v2 && (v2 = v2 | 0);
      const p2 = c[v2];
      l2[p2] = v2;
    }), l2;
  }
  a420.tagClass = { 0: "universal", 1: "application", 2: "context", 3: "private" }, a420.tagClassByName = u2(a420.tagClass), a420.tag = { 0: "end", 1: "bool", 2: "int", 3: "bitstr", 4: "octstr", 5: "null_", 6: "objid", 7: "objDesc", 8: "external", 9: "real", 10: "enum", 11: "embed", 12: "utf8str", 13: "relativeOid", 16: "seq", 17: "set", 18: "numstr", 19: "printstr", 20: "t61str", 21: "videostr", 22: "ia5str", 23: "utctime", 24: "gentime", 25: "graphstr", 26: "iso646str", 27: "genstr", 28: "unistr", 29: "charstr", 30: "bmpstr" }, a420.tagByName = u2(a420.tag);
})(der$2);
const inherits$3 = inherits_browserExports, Buffer$d = safer_1.Buffer, Node$1 = node, der$1 = der$2;
function DEREncoder$1(a420) {
  this.enc = "der", this.name = a420.name, this.entity = a420, this.tree = new DERNode$1(), this.tree._init(a420.body);
}
var der_1$1 = DEREncoder$1;
DEREncoder$1.prototype.encode = function a346(u2, c) {
  return this.tree._encode(u2, c).join();
};
function DERNode$1(a420) {
  Node$1.call(this, "der", a420);
}
inherits$3(DERNode$1, Node$1);
DERNode$1.prototype._encodeComposite = function a347(u2, c, l2, v2) {
  const p2 = encodeTag(u2, c, l2, this.reporter);
  if (v2.length < 128) {
    const P2 = Buffer$d.alloc(2);
    return P2[0] = p2, P2[1] = v2.length, this._createEncoderBuffer([P2, v2]);
  }
  let _ = 1;
  for (let P2 = v2.length; P2 >= 256; P2 >>= 8)
    _++;
  const I2 = Buffer$d.alloc(2 + _);
  I2[0] = p2, I2[1] = 128 | _;
  for (let P2 = 1 + _, $ = v2.length; $ > 0; P2--, $ >>= 8)
    I2[P2] = $ & 255;
  return this._createEncoderBuffer([I2, v2]);
};
DERNode$1.prototype._encodeStr = function a348(u2, c) {
  if (c === "bitstr")
    return this._createEncoderBuffer([u2.unused | 0, u2.data]);
  if (c === "bmpstr") {
    const l2 = Buffer$d.alloc(u2.length * 2);
    for (let v2 = 0; v2 < u2.length; v2++)
      l2.writeUInt16BE(u2.charCodeAt(v2), v2 * 2);
    return this._createEncoderBuffer(l2);
  } else
    return c === "numstr" ? this._isNumstr(u2) ? this._createEncoderBuffer(u2) : this.reporter.error("Encoding of string type: numstr supports only digits and space") : c === "printstr" ? this._isPrintstr(u2) ? this._createEncoderBuffer(u2) : this.reporter.error("Encoding of string type: printstr supports only latin upper and lower case letters, digits, space, apostrophe, left and rigth parenthesis, plus sign, comma, hyphen, dot, slash, colon, equal sign, question mark") : /str$/.test(c) ? this._createEncoderBuffer(u2) : c === "objDesc" ? this._createEncoderBuffer(u2) : this.reporter.error("Encoding of string type: " + c + " unsupported");
};
DERNode$1.prototype._encodeObjid = function a349(u2, c, l2) {
  if (typeof u2 == "string") {
    if (!c)
      return this.reporter.error("string objid given, but no values map found");
    if (!c.hasOwnProperty(u2))
      return this.reporter.error("objid not found in values map");
    u2 = c[u2].split(/[\s.]+/g);
    for (let I2 = 0; I2 < u2.length; I2++)
      u2[I2] |= 0;
  } else if (Array.isArray(u2)) {
    u2 = u2.slice();
    for (let I2 = 0; I2 < u2.length; I2++)
      u2[I2] |= 0;
  }
  if (!Array.isArray(u2))
    return this.reporter.error("objid() should be either array or string, got: " + JSON.stringify(u2));
  if (!l2) {
    if (u2[1] >= 40)
      return this.reporter.error("Second objid identifier OOB");
    u2.splice(0, 2, u2[0] * 40 + u2[1]);
  }
  let v2 = 0;
  for (let I2 = 0; I2 < u2.length; I2++) {
    let P2 = u2[I2];
    for (v2++; P2 >= 128; P2 >>= 7)
      v2++;
  }
  const p2 = Buffer$d.alloc(v2);
  let _ = p2.length - 1;
  for (let I2 = u2.length - 1; I2 >= 0; I2--) {
    let P2 = u2[I2];
    for (p2[_--] = P2 & 127; (P2 >>= 7) > 0; )
      p2[_--] = 128 | P2 & 127;
  }
  return this._createEncoderBuffer(p2);
};
function two(a420) {
  return a420 < 10 ? "0" + a420 : a420;
}
DERNode$1.prototype._encodeTime = function a350(u2, c) {
  let l2;
  const v2 = new Date(u2);
  return c === "gentime" ? l2 = [two(v2.getUTCFullYear()), two(v2.getUTCMonth() + 1), two(v2.getUTCDate()), two(v2.getUTCHours()), two(v2.getUTCMinutes()), two(v2.getUTCSeconds()), "Z"].join("") : c === "utctime" ? l2 = [two(v2.getUTCFullYear() % 100), two(v2.getUTCMonth() + 1), two(v2.getUTCDate()), two(v2.getUTCHours()), two(v2.getUTCMinutes()), two(v2.getUTCSeconds()), "Z"].join("") : this.reporter.error("Encoding " + c + " time is not supported yet"), this._encodeStr(l2, "octstr");
};
DERNode$1.prototype._encodeNull = function a351() {
  return this._createEncoderBuffer("");
};
DERNode$1.prototype._encodeInt = function a352(u2, c) {
  if (typeof u2 == "string") {
    if (!c)
      return this.reporter.error("String int or enum given, but no values map");
    if (!c.hasOwnProperty(u2))
      return this.reporter.error("Values map doesn't contain: " + JSON.stringify(u2));
    u2 = c[u2];
  }
  if (typeof u2 != "number" && !Buffer$d.isBuffer(u2)) {
    const p2 = u2.toArray();
    !u2.sign && p2[0] & 128 && p2.unshift(0), u2 = Buffer$d.from(p2);
  }
  if (Buffer$d.isBuffer(u2)) {
    let p2 = u2.length;
    u2.length === 0 && p2++;
    const _ = Buffer$d.alloc(p2);
    return u2.copy(_), u2.length === 0 && (_[0] = 0), this._createEncoderBuffer(_);
  }
  if (u2 < 128)
    return this._createEncoderBuffer(u2);
  if (u2 < 256)
    return this._createEncoderBuffer([0, u2]);
  let l2 = 1;
  for (let p2 = u2; p2 >= 256; p2 >>= 8)
    l2++;
  const v2 = new Array(l2);
  for (let p2 = v2.length - 1; p2 >= 0; p2--)
    v2[p2] = u2 & 255, u2 >>= 8;
  return v2[0] & 128 && v2.unshift(0), this._createEncoderBuffer(Buffer$d.from(v2));
};
DERNode$1.prototype._encodeBool = function a353(u2) {
  return this._createEncoderBuffer(u2 ? 255 : 0);
};
DERNode$1.prototype._use = function a354(u2, c) {
  return typeof u2 == "function" && (u2 = u2(c)), u2._getEncoder("der").tree;
};
DERNode$1.prototype._skipDefault = function a355(u2, c, l2) {
  const v2 = this._baseState;
  let p2;
  if (v2.default === null)
    return false;
  const _ = u2.join();
  if (v2.defaultBuffer === void 0 && (v2.defaultBuffer = this._encodeValue(v2.default, c, l2).join()), _.length !== v2.defaultBuffer.length)
    return false;
  for (p2 = 0; p2 < _.length; p2++)
    if (_[p2] !== v2.defaultBuffer[p2])
      return false;
  return true;
};
function encodeTag(a420, u2, c, l2) {
  let v2;
  if (a420 === "seqof" ? a420 = "seq" : a420 === "setof" && (a420 = "set"), der$1.tagByName.hasOwnProperty(a420))
    v2 = der$1.tagByName[a420];
  else if (typeof a420 == "number" && (a420 | 0) === a420)
    v2 = a420;
  else
    return l2.error("Unknown tag: " + a420);
  return v2 >= 31 ? l2.error("Multi-octet tag encoding unsupported") : (u2 || (v2 |= 32), v2 |= der$1.tagClassByName[c || "universal"] << 6, v2);
}
const inherits$2 = inherits_browserExports, DEREncoder = der_1$1;
function PEMEncoder(a420) {
  DEREncoder.call(this, a420), this.enc = "pem";
}
inherits$2(PEMEncoder, DEREncoder);
var pem$1 = PEMEncoder;
PEMEncoder.prototype.encode = function a356(u2, c) {
  const v2 = DEREncoder.prototype.encode.call(this, u2).toString("base64"), p2 = ["-----BEGIN " + c.label + "-----"];
  for (let _ = 0; _ < v2.length; _ += 64)
    p2.push(v2.slice(_, _ + 64));
  return p2.push("-----END " + c.label + "-----"), p2.join(`
`);
};
(function(a420) {
  const u2 = a420;
  u2.der = der_1$1, u2.pem = pem$1;
})(encoders);
var decoders = {};
const inherits$1 = inherits_browserExports, bignum = bnExports$2, DecoderBuffer = buffer.DecoderBuffer, Node = node, der = der$2;
function DERDecoder$1(a420) {
  this.enc = "der", this.name = a420.name, this.entity = a420, this.tree = new DERNode(), this.tree._init(a420.body);
}
var der_1 = DERDecoder$1;
DERDecoder$1.prototype.decode = function a357(u2, c) {
  return DecoderBuffer.isDecoderBuffer(u2) || (u2 = new DecoderBuffer(u2, c)), this.tree._decode(u2, c);
};
function DERNode(a420) {
  Node.call(this, "der", a420);
}
inherits$1(DERNode, Node);
DERNode.prototype._peekTag = function a358(u2, c, l2) {
  if (u2.isEmpty())
    return false;
  const v2 = u2.save(), p2 = derDecodeTag(u2, 'Failed to peek tag: "' + c + '"');
  return u2.isError(p2) ? p2 : (u2.restore(v2), p2.tag === c || p2.tagStr === c || p2.tagStr + "of" === c || l2);
};
DERNode.prototype._decodeTag = function a359(u2, c, l2) {
  const v2 = derDecodeTag(u2, 'Failed to decode tag of "' + c + '"');
  if (u2.isError(v2))
    return v2;
  let p2 = derDecodeLen(u2, v2.primitive, 'Failed to get length of "' + c + '"');
  if (u2.isError(p2))
    return p2;
  if (!l2 && v2.tag !== c && v2.tagStr !== c && v2.tagStr + "of" !== c)
    return u2.error('Failed to match tag: "' + c + '"');
  if (v2.primitive || p2 !== null)
    return u2.skip(p2, 'Failed to match body of: "' + c + '"');
  const _ = u2.save(), I2 = this._skipUntilEnd(u2, 'Failed to skip indefinite length body: "' + this.tag + '"');
  return u2.isError(I2) ? I2 : (p2 = u2.offset - _.offset, u2.restore(_), u2.skip(p2, 'Failed to match body of: "' + c + '"'));
};
DERNode.prototype._skipUntilEnd = function a360(u2, c) {
  for (; ; ) {
    const l2 = derDecodeTag(u2, c);
    if (u2.isError(l2))
      return l2;
    const v2 = derDecodeLen(u2, l2.primitive, c);
    if (u2.isError(v2))
      return v2;
    let p2;
    if (l2.primitive || v2 !== null ? p2 = u2.skip(v2) : p2 = this._skipUntilEnd(u2, c), u2.isError(p2))
      return p2;
    if (l2.tagStr === "end")
      break;
  }
};
DERNode.prototype._decodeList = function a361(u2, c, l2, v2) {
  const p2 = [];
  for (; !u2.isEmpty(); ) {
    const _ = this._peekTag(u2, "end");
    if (u2.isError(_))
      return _;
    const I2 = l2.decode(u2, "der", v2);
    if (u2.isError(I2) && _)
      break;
    p2.push(I2);
  }
  return p2;
};
DERNode.prototype._decodeStr = function a362(u2, c) {
  if (c === "bitstr") {
    const l2 = u2.readUInt8();
    return u2.isError(l2) ? l2 : { unused: l2, data: u2.raw() };
  } else if (c === "bmpstr") {
    const l2 = u2.raw();
    if (l2.length % 2 === 1)
      return u2.error("Decoding of string type: bmpstr length mismatch");
    let v2 = "";
    for (let p2 = 0; p2 < l2.length / 2; p2++)
      v2 += String.fromCharCode(l2.readUInt16BE(p2 * 2));
    return v2;
  } else if (c === "numstr") {
    const l2 = u2.raw().toString("ascii");
    return this._isNumstr(l2) ? l2 : u2.error("Decoding of string type: numstr unsupported characters");
  } else {
    if (c === "octstr")
      return u2.raw();
    if (c === "objDesc")
      return u2.raw();
    if (c === "printstr") {
      const l2 = u2.raw().toString("ascii");
      return this._isPrintstr(l2) ? l2 : u2.error("Decoding of string type: printstr unsupported characters");
    } else
      return /str$/.test(c) ? u2.raw().toString() : u2.error("Decoding of string type: " + c + " unsupported");
  }
};
DERNode.prototype._decodeObjid = function a363(u2, c, l2) {
  let v2;
  const p2 = [];
  let _ = 0, I2 = 0;
  for (; !u2.isEmpty(); )
    I2 = u2.readUInt8(), _ <<= 7, _ |= I2 & 127, I2 & 128 || (p2.push(_), _ = 0);
  I2 & 128 && p2.push(_);
  const P2 = p2[0] / 40 | 0, $ = p2[0] % 40;
  if (l2 ? v2 = p2 : v2 = [P2, $].concat(p2.slice(1)), c) {
    let F2 = c[v2.join(" ")];
    F2 === void 0 && (F2 = c[v2.join(".")]), F2 !== void 0 && (v2 = F2);
  }
  return v2;
};
DERNode.prototype._decodeTime = function a364(u2, c) {
  const l2 = u2.raw().toString();
  let v2, p2, _, I2, P2, $;
  if (c === "gentime")
    v2 = l2.slice(0, 4) | 0, p2 = l2.slice(4, 6) | 0, _ = l2.slice(6, 8) | 0, I2 = l2.slice(8, 10) | 0, P2 = l2.slice(10, 12) | 0, $ = l2.slice(12, 14) | 0;
  else if (c === "utctime")
    v2 = l2.slice(0, 2) | 0, p2 = l2.slice(2, 4) | 0, _ = l2.slice(4, 6) | 0, I2 = l2.slice(6, 8) | 0, P2 = l2.slice(8, 10) | 0, $ = l2.slice(10, 12) | 0, v2 < 70 ? v2 = 2e3 + v2 : v2 = 1900 + v2;
  else
    return u2.error("Decoding " + c + " time is not supported yet");
  return Date.UTC(v2, p2 - 1, _, I2, P2, $, 0);
};
DERNode.prototype._decodeNull = function a365() {
  return null;
};
DERNode.prototype._decodeBool = function a366(u2) {
  const c = u2.readUInt8();
  return u2.isError(c) ? c : c !== 0;
};
DERNode.prototype._decodeInt = function a367(u2, c) {
  const l2 = u2.raw();
  let v2 = new bignum(l2);
  return c && (v2 = c[v2.toString(10)] || v2), v2;
};
DERNode.prototype._use = function a368(u2, c) {
  return typeof u2 == "function" && (u2 = u2(c)), u2._getDecoder("der").tree;
};
function derDecodeTag(a420, u2) {
  let c = a420.readUInt8(u2);
  if (a420.isError(c))
    return c;
  const l2 = der.tagClass[c >> 6], v2 = (c & 32) === 0;
  if ((c & 31) === 31) {
    let _ = c;
    for (c = 0; (_ & 128) === 128; ) {
      if (_ = a420.readUInt8(u2), a420.isError(_))
        return _;
      c <<= 7, c |= _ & 127;
    }
  } else
    c &= 31;
  const p2 = der.tag[c];
  return { cls: l2, primitive: v2, tag: c, tagStr: p2 };
}
function derDecodeLen(a420, u2, c) {
  let l2 = a420.readUInt8(c);
  if (a420.isError(l2))
    return l2;
  if (!u2 && l2 === 128)
    return null;
  if (!(l2 & 128))
    return l2;
  const v2 = l2 & 127;
  if (v2 > 4)
    return a420.error("length octect is too long");
  l2 = 0;
  for (let p2 = 0; p2 < v2; p2++) {
    l2 <<= 8;
    const _ = a420.readUInt8(c);
    if (a420.isError(_))
      return _;
    l2 |= _;
  }
  return l2;
}
const inherits = inherits_browserExports, Buffer$c = safer_1.Buffer, DERDecoder = der_1;
function PEMDecoder(a420) {
  DERDecoder.call(this, a420), this.enc = "pem";
}
inherits(PEMDecoder, DERDecoder);
var pem = PEMDecoder;
PEMDecoder.prototype.decode = function a369(u2, c) {
  const l2 = u2.toString().split(/[\r\n]+/g), v2 = c.label.toUpperCase(), p2 = /^-----(BEGIN|END) ([^-]+)-----$/;
  let _ = -1, I2 = -1;
  for (let F2 = 0; F2 < l2.length; F2++) {
    const H2 = l2[F2].match(p2);
    if (H2 !== null && H2[2] === v2)
      if (_ === -1) {
        if (H2[1] !== "BEGIN")
          break;
        _ = F2;
      } else {
        if (H2[1] !== "END")
          break;
        I2 = F2;
        break;
      }
  }
  if (_ === -1 || I2 === -1)
    throw new Error("PEM section not found for: " + v2);
  const P2 = l2.slice(_ + 1, I2).join("");
  P2.replace(/[^a-z0-9+/=]+/gi, "");
  const $ = Buffer$c.from(P2, "base64");
  return DERDecoder.prototype.decode.call(this, $, c);
};
(function(a420) {
  const u2 = a420;
  u2.der = der_1, u2.pem = pem;
})(decoders);
(function(a420) {
  const u2 = encoders, c = decoders, l2 = inherits_browserExports, v2 = a420;
  v2.define = function(I2, P2) {
    return new p2(I2, P2);
  };
  function p2(_, I2) {
    this.name = _, this.body = I2, this.decoders = {}, this.encoders = {};
  }
  p2.prototype._createNamed = function(I2) {
    const P2 = this.name;
    function $(F2) {
      this._initNamed(F2, P2);
    }
    return l2($, I2), $.prototype._initNamed = function(H2, j) {
      I2.call(this, H2, j);
    }, new $(this);
  }, p2.prototype._getDecoder = function(I2) {
    return I2 = I2 || "der", this.decoders.hasOwnProperty(I2) || (this.decoders[I2] = this._createNamed(c[I2])), this.decoders[I2];
  }, p2.prototype.decode = function(I2, P2, $) {
    return this._getDecoder(P2).decode(I2, $);
  }, p2.prototype._getEncoder = function(I2) {
    return I2 = I2 || "der", this.encoders.hasOwnProperty(I2) || (this.encoders[I2] = this._createNamed(u2[I2])), this.encoders[I2];
  }, p2.prototype.encode = function(I2, P2, $) {
    return this._getEncoder(P2).encode(I2, $);
  };
})(api);
var base = {};
(function(a420) {
  const u2 = a420;
  u2.Reporter = reporter.Reporter, u2.DecoderBuffer = buffer.DecoderBuffer, u2.EncoderBuffer = buffer.EncoderBuffer, u2.Node = node;
})(base);
var constants = {};
(function(a420) {
  const u2 = a420;
  u2._reverse = function(l2) {
    const v2 = {};
    return Object.keys(l2).forEach(function(p2) {
      (p2 | 0) == p2 && (p2 = p2 | 0);
      const _ = l2[p2];
      v2[_] = p2;
    }), v2;
  }, u2.der = der$2;
})(constants);
(function(a420) {
  const u2 = a420;
  u2.bignum = bnExports$2, u2.define = api.define, u2.base = base, u2.constants = constants, u2.decoders = decoders, u2.encoders = encoders;
})(asn1$2);
var asn = asn1$2, Time = asn.define("Time", function() {
  this.choice({ utcTime: this.utctime(), generalTime: this.gentime() });
}), AttributeTypeValue = asn.define("AttributeTypeValue", function() {
  this.seq().obj(this.key("type").objid(), this.key("value").any());
}), AlgorithmIdentifier$1 = asn.define("AlgorithmIdentifier", function() {
  this.seq().obj(this.key("algorithm").objid(), this.key("parameters").optional(), this.key("curve").objid().optional());
}), SubjectPublicKeyInfo = asn.define("SubjectPublicKeyInfo", function() {
  this.seq().obj(this.key("algorithm").use(AlgorithmIdentifier$1), this.key("subjectPublicKey").bitstr());
}), RelativeDistinguishedName = asn.define("RelativeDistinguishedName", function() {
  this.setof(AttributeTypeValue);
}), RDNSequence = asn.define("RDNSequence", function() {
  this.seqof(RelativeDistinguishedName);
}), Name = asn.define("Name", function() {
  this.choice({ rdnSequence: this.use(RDNSequence) });
}), Validity = asn.define("Validity", function() {
  this.seq().obj(this.key("notBefore").use(Time), this.key("notAfter").use(Time));
}), Extension = asn.define("Extension", function() {
  this.seq().obj(this.key("extnID").objid(), this.key("critical").bool().def(false), this.key("extnValue").octstr());
}), TBSCertificate = asn.define("TBSCertificate", function() {
  this.seq().obj(this.key("version").explicit(0).int().optional(), this.key("serialNumber").int(), this.key("signature").use(AlgorithmIdentifier$1), this.key("issuer").use(Name), this.key("validity").use(Validity), this.key("subject").use(Name), this.key("subjectPublicKeyInfo").use(SubjectPublicKeyInfo), this.key("issuerUniqueID").implicit(1).bitstr().optional(), this.key("subjectUniqueID").implicit(2).bitstr().optional(), this.key("extensions").explicit(3).seqof(Extension).optional());
}), X509Certificate = asn.define("X509Certificate", function() {
  this.seq().obj(this.key("tbsCertificate").use(TBSCertificate), this.key("signatureAlgorithm").use(AlgorithmIdentifier$1), this.key("signatureValue").bitstr());
}), certificate = X509Certificate, asn1$1 = asn1$2;
asn1$3.certificate = certificate;
var RSAPrivateKey = asn1$1.define("RSAPrivateKey", function() {
  this.seq().obj(this.key("version").int(), this.key("modulus").int(), this.key("publicExponent").int(), this.key("privateExponent").int(), this.key("prime1").int(), this.key("prime2").int(), this.key("exponent1").int(), this.key("exponent2").int(), this.key("coefficient").int());
});
asn1$3.RSAPrivateKey = RSAPrivateKey;
var RSAPublicKey = asn1$1.define("RSAPublicKey", function() {
  this.seq().obj(this.key("modulus").int(), this.key("publicExponent").int());
});
asn1$3.RSAPublicKey = RSAPublicKey;
var PublicKey = asn1$1.define("SubjectPublicKeyInfo", function() {
  this.seq().obj(this.key("algorithm").use(AlgorithmIdentifier), this.key("subjectPublicKey").bitstr());
});
asn1$3.PublicKey = PublicKey;
var AlgorithmIdentifier = asn1$1.define("AlgorithmIdentifier", function() {
  this.seq().obj(this.key("algorithm").objid(), this.key("none").null_().optional(), this.key("curve").objid().optional(), this.key("params").seq().obj(this.key("p").int(), this.key("q").int(), this.key("g").int()).optional());
}), PrivateKeyInfo = asn1$1.define("PrivateKeyInfo", function() {
  this.seq().obj(this.key("version").int(), this.key("algorithm").use(AlgorithmIdentifier), this.key("subjectPrivateKey").octstr());
});
asn1$3.PrivateKey = PrivateKeyInfo;
var EncryptedPrivateKeyInfo = asn1$1.define("EncryptedPrivateKeyInfo", function() {
  this.seq().obj(this.key("algorithm").seq().obj(this.key("id").objid(), this.key("decrypt").seq().obj(this.key("kde").seq().obj(this.key("id").objid(), this.key("kdeparams").seq().obj(this.key("salt").octstr(), this.key("iters").int())), this.key("cipher").seq().obj(this.key("algo").objid(), this.key("iv").octstr()))), this.key("subjectPrivateKey").octstr());
});
asn1$3.EncryptedPrivateKey = EncryptedPrivateKeyInfo;
var DSAPrivateKey = asn1$1.define("DSAPrivateKey", function() {
  this.seq().obj(this.key("version").int(), this.key("p").int(), this.key("q").int(), this.key("g").int(), this.key("pub_key").int(), this.key("priv_key").int());
});
asn1$3.DSAPrivateKey = DSAPrivateKey;
asn1$3.DSAparam = asn1$1.define("DSAparam", function() {
  this.int();
});
var ECPrivateKey = asn1$1.define("ECPrivateKey", function() {
  this.seq().obj(this.key("version").int(), this.key("privateKey").octstr(), this.key("parameters").optional().explicit(0).use(ECParameters), this.key("publicKey").optional().explicit(1).bitstr());
});
asn1$3.ECPrivateKey = ECPrivateKey;
var ECParameters = asn1$1.define("ECParameters", function() {
  this.choice({ namedCurve: this.objid() });
});
asn1$3.signature = asn1$1.define("signature", function() {
  this.seq().obj(this.key("r").int(), this.key("s").int());
});
const require$$1 = { "2.16.840.1.101.3.4.1.1": "aes-128-ecb", "2.16.840.1.101.3.4.1.2": "aes-128-cbc", "2.16.840.1.101.3.4.1.3": "aes-128-ofb", "2.16.840.1.101.3.4.1.4": "aes-128-cfb", "2.16.840.1.101.3.4.1.21": "aes-192-ecb", "2.16.840.1.101.3.4.1.22": "aes-192-cbc", "2.16.840.1.101.3.4.1.23": "aes-192-ofb", "2.16.840.1.101.3.4.1.24": "aes-192-cfb", "2.16.840.1.101.3.4.1.41": "aes-256-ecb", "2.16.840.1.101.3.4.1.42": "aes-256-cbc", "2.16.840.1.101.3.4.1.43": "aes-256-ofb", "2.16.840.1.101.3.4.1.44": "aes-256-cfb" };
var findProc = /Proc-Type: 4,ENCRYPTED[\n\r]+DEK-Info: AES-((?:128)|(?:192)|(?:256))-CBC,([0-9A-H]+)[\n\r]+([0-9A-z\n\r+/=]+)[\n\r]+/m, startRegex = /^-----BEGIN ((?:.*? KEY)|CERTIFICATE)-----/m, fullRegex = /^-----BEGIN ((?:.*? KEY)|CERTIFICATE)-----([0-9A-z\n\r+/=]+)-----END \1-----$/m, evp = evp_bytestokey, ciphers$1 = browser$6, Buffer$b = safeBufferExports$3.Buffer, fixProc$1 = function(a420, u2) {
  var c = a420.toString(), l2 = c.match(findProc), v2;
  if (l2) {
    var _ = "aes" + l2[1], I2 = Buffer$b.from(l2[2], "hex"), P2 = Buffer$b.from(l2[3].replace(/[\r\n]/g, ""), "base64"), $ = evp(u2, I2.slice(0, 8), parseInt(l2[1], 10)).key, F2 = [], H2 = ciphers$1.createDecipheriv(_, $, I2);
    F2.push(H2.update(P2)), F2.push(H2.final()), v2 = Buffer$b.concat(F2);
  } else {
    var p2 = c.match(fullRegex);
    v2 = Buffer$b.from(p2[2].replace(/[\r\n]/g, ""), "base64");
  }
  var j = c.match(startRegex)[1];
  return { tag: j, data: v2 };
}, asn1 = asn1$3, aesid = require$$1, fixProc = fixProc$1, ciphers = browser$6, compat = browser$8, Buffer$a = safeBufferExports$3.Buffer, parseAsn1 = parseKeys$2;
function parseKeys$2(a420) {
  var u2;
  typeof a420 == "object" && !Buffer$a.isBuffer(a420) && (u2 = a420.passphrase, a420 = a420.key), typeof a420 == "string" && (a420 = Buffer$a.from(a420));
  var c = fixProc(a420, u2), l2 = c.tag, v2 = c.data, p2, _;
  switch (l2) {
    case "CERTIFICATE":
      _ = asn1.certificate.decode(v2, "der").tbsCertificate.subjectPublicKeyInfo;
    case "PUBLIC KEY":
      switch (_ || (_ = asn1.PublicKey.decode(v2, "der")), p2 = _.algorithm.algorithm.join("."), p2) {
        case "1.2.840.113549.1.1.1":
          return asn1.RSAPublicKey.decode(_.subjectPublicKey.data, "der");
        case "1.2.840.10045.2.1":
          return _.subjectPrivateKey = _.subjectPublicKey, { type: "ec", data: _ };
        case "1.2.840.10040.4.1":
          return _.algorithm.params.pub_key = asn1.DSAparam.decode(_.subjectPublicKey.data, "der"), { type: "dsa", data: _.algorithm.params };
        default:
          throw new Error("unknown key id " + p2);
      }
    case "ENCRYPTED PRIVATE KEY":
      v2 = asn1.EncryptedPrivateKey.decode(v2, "der"), v2 = decrypt(v2, u2);
    case "PRIVATE KEY":
      switch (_ = asn1.PrivateKey.decode(v2, "der"), p2 = _.algorithm.algorithm.join("."), p2) {
        case "1.2.840.113549.1.1.1":
          return asn1.RSAPrivateKey.decode(_.subjectPrivateKey, "der");
        case "1.2.840.10045.2.1":
          return { curve: _.algorithm.curve, privateKey: asn1.ECPrivateKey.decode(_.subjectPrivateKey, "der").privateKey };
        case "1.2.840.10040.4.1":
          return _.algorithm.params.priv_key = asn1.DSAparam.decode(_.subjectPrivateKey, "der"), { type: "dsa", params: _.algorithm.params };
        default:
          throw new Error("unknown key id " + p2);
      }
    case "RSA PUBLIC KEY":
      return asn1.RSAPublicKey.decode(v2, "der");
    case "RSA PRIVATE KEY":
      return asn1.RSAPrivateKey.decode(v2, "der");
    case "DSA PRIVATE KEY":
      return { type: "dsa", params: asn1.DSAPrivateKey.decode(v2, "der") };
    case "EC PRIVATE KEY":
      return v2 = asn1.ECPrivateKey.decode(v2, "der"), { curve: v2.parameters.value, privateKey: v2.privateKey };
    default:
      throw new Error("unknown key type " + l2);
  }
}
parseKeys$2.signature = asn1.signature;
function decrypt(a420, u2) {
  var c = a420.algorithm.decrypt.kde.kdeparams.salt, l2 = parseInt(a420.algorithm.decrypt.kde.kdeparams.iters.toString(), 10), v2 = aesid[a420.algorithm.decrypt.cipher.algo.join(".")], p2 = a420.algorithm.decrypt.cipher.iv, _ = a420.subjectPrivateKey, I2 = parseInt(v2.split("-")[1], 10) / 8, P2 = compat.pbkdf2Sync(u2, c, l2, I2, "sha1"), $ = ciphers.createDecipheriv(v2, P2, p2), F2 = [];
  return F2.push($.update(_)), F2.push($.final()), Buffer$a.concat(F2);
}
const require$$4 = { "1.3.132.0.10": "secp256k1", "1.3.132.0.33": "p224", "1.2.840.10045.3.1.1": "p192", "1.2.840.10045.3.1.7": "p256", "1.3.132.0.34": "p384", "1.3.132.0.35": "p521" };
var hasRequiredSign;
function requireSign() {
  if (hasRequiredSign)
    return sign$1.exports;
  hasRequiredSign = 1;
  var a420 = safeBufferExports.Buffer, u2 = browser$9, c = browserifyRsa, l2 = requireElliptic().ec, v2 = bnExports$4, p2 = parseAsn1, _ = require$$4, I2 = 1;
  function P2(ne2, Z2, de2, pe2, le2) {
    var be2 = p2(Z2);
    if (be2.curve) {
      if (pe2 !== "ecdsa" && pe2 !== "ecdsa/rsa")
        throw new Error("wrong private key type");
      return $(ne2, be2);
    } else if (be2.type === "dsa") {
      if (pe2 !== "dsa")
        throw new Error("wrong private key type");
      return F2(ne2, be2, de2);
    }
    if (pe2 !== "rsa" && pe2 !== "ecdsa/rsa")
      throw new Error("wrong private key type");
    if (Z2.padding !== void 0 && Z2.padding !== I2)
      throw new Error("illegal or unsupported padding mode");
    ne2 = a420.concat([le2, ne2]);
    for (var ke2 = be2.modulus.byteLength(), Te2 = [0, 1]; ne2.length + Te2.length + 1 < ke2; )
      Te2.push(255);
    Te2.push(0);
    for (var q2 = -1; ++q2 < ne2.length; )
      Te2.push(ne2[q2]);
    var z2 = c(Te2, be2);
    return z2;
  }
  function $(ne2, Z2) {
    var de2 = _[Z2.curve.join(".")];
    if (!de2)
      throw new Error("unknown curve " + Z2.curve.join("."));
    var pe2 = new l2(de2), le2 = pe2.keyFromPrivate(Z2.privateKey), be2 = le2.sign(ne2);
    return a420.from(be2.toDER());
  }
  function F2(ne2, Z2, de2) {
    for (var pe2 = Z2.params.priv_key, le2 = Z2.params.p, be2 = Z2.params.q, ke2 = Z2.params.g, Te2 = new v2(0), q2, z2 = ee2(ne2, be2).mod(be2), C2 = false, b = j(pe2, be2, ne2, de2); C2 === false; )
      q2 = ie2(be2, b, de2), Te2 = Q2(ke2, q2, le2, be2), C2 = q2.invm(be2).imul(z2.add(pe2.mul(Te2))).mod(be2), C2.cmpn(0) === 0 && (C2 = false, Te2 = new v2(0));
    return H2(Te2, C2);
  }
  function H2(ne2, Z2) {
    ne2 = ne2.toArray(), Z2 = Z2.toArray(), ne2[0] & 128 && (ne2 = [0].concat(ne2)), Z2[0] & 128 && (Z2 = [0].concat(Z2));
    var de2 = ne2.length + Z2.length + 4, pe2 = [48, de2, 2, ne2.length];
    return pe2 = pe2.concat(ne2, [2, Z2.length], Z2), a420.from(pe2);
  }
  function j(ne2, Z2, de2, pe2) {
    if (ne2 = a420.from(ne2.toArray()), ne2.length < Z2.byteLength()) {
      var le2 = a420.alloc(Z2.byteLength() - ne2.length);
      ne2 = a420.concat([le2, ne2]);
    }
    var be2 = de2.length, ke2 = X2(de2, Z2), Te2 = a420.alloc(be2);
    Te2.fill(1);
    var q2 = a420.alloc(be2);
    return q2 = u2(pe2, q2).update(Te2).update(a420.from([0])).update(ne2).update(ke2).digest(), Te2 = u2(pe2, q2).update(Te2).digest(), q2 = u2(pe2, q2).update(Te2).update(a420.from([1])).update(ne2).update(ke2).digest(), Te2 = u2(pe2, q2).update(Te2).digest(), { k: q2, v: Te2 };
  }
  function ee2(ne2, Z2) {
    var de2 = new v2(ne2), pe2 = (ne2.length << 3) - Z2.bitLength();
    return pe2 > 0 && de2.ishrn(pe2), de2;
  }
  function X2(ne2, Z2) {
    ne2 = ee2(ne2, Z2), ne2 = ne2.mod(Z2);
    var de2 = a420.from(ne2.toArray());
    if (de2.length < Z2.byteLength()) {
      var pe2 = a420.alloc(Z2.byteLength() - de2.length);
      de2 = a420.concat([pe2, de2]);
    }
    return de2;
  }
  function ie2(ne2, Z2, de2) {
    var pe2, le2;
    do {
      for (pe2 = a420.alloc(0); pe2.length * 8 < ne2.bitLength(); )
        Z2.v = u2(de2, Z2.k).update(Z2.v).digest(), pe2 = a420.concat([pe2, Z2.v]);
      le2 = ee2(pe2, ne2), Z2.k = u2(de2, Z2.k).update(Z2.v).update(a420.from([0])).digest(), Z2.v = u2(de2, Z2.k).update(Z2.v).digest();
    } while (le2.cmp(ne2) !== -1);
    return le2;
  }
  function Q2(ne2, Z2, de2, pe2) {
    return ne2.toRed(v2.mont(de2)).redPow(Z2).fromRed().mod(pe2);
  }
  return sign$1.exports = P2, sign$1.exports.getKey = j, sign$1.exports.makeKey = ie2, sign$1.exports;
}
var verify_1, hasRequiredVerify;
function requireVerify() {
  if (hasRequiredVerify)
    return verify_1;
  hasRequiredVerify = 1;
  var a420 = safeBufferExports.Buffer, u2 = bnExports$4, c = requireElliptic().ec, l2 = parseAsn1, v2 = require$$4;
  function p2($, F2, H2, j, ee2) {
    var X2 = l2(H2);
    if (X2.type === "ec") {
      if (j !== "ecdsa" && j !== "ecdsa/rsa")
        throw new Error("wrong public key type");
      return _($, F2, X2);
    } else if (X2.type === "dsa") {
      if (j !== "dsa")
        throw new Error("wrong public key type");
      return I2($, F2, X2);
    }
    if (j !== "rsa" && j !== "ecdsa/rsa")
      throw new Error("wrong public key type");
    F2 = a420.concat([ee2, F2]);
    for (var ie2 = X2.modulus.byteLength(), Q2 = [1], ne2 = 0; F2.length + Q2.length + 2 < ie2; )
      Q2.push(255), ne2 += 1;
    Q2.push(0);
    for (var Z2 = -1; ++Z2 < F2.length; )
      Q2.push(F2[Z2]);
    Q2 = a420.from(Q2);
    var de2 = u2.mont(X2.modulus);
    $ = new u2($).toRed(de2), $ = $.redPow(new u2(X2.publicExponent)), $ = a420.from($.fromRed().toArray());
    var pe2 = ne2 < 8 ? 1 : 0;
    for (ie2 = Math.min($.length, Q2.length), $.length !== Q2.length && (pe2 = 1), Z2 = -1; ++Z2 < ie2; )
      pe2 |= $[Z2] ^ Q2[Z2];
    return pe2 === 0;
  }
  function _($, F2, H2) {
    var j = v2[H2.data.algorithm.curve.join(".")];
    if (!j)
      throw new Error("unknown curve " + H2.data.algorithm.curve.join("."));
    var ee2 = new c(j), X2 = H2.data.subjectPrivateKey.data;
    return ee2.verify(F2, $, X2);
  }
  function I2($, F2, H2) {
    var j = H2.data.p, ee2 = H2.data.q, X2 = H2.data.g, ie2 = H2.data.pub_key, Q2 = l2.signature.decode($, "der"), ne2 = Q2.s, Z2 = Q2.r;
    P2(ne2, ee2), P2(Z2, ee2);
    var de2 = u2.mont(j), pe2 = ne2.invm(ee2), le2 = X2.toRed(de2).redPow(new u2(F2).mul(pe2).mod(ee2)).fromRed().mul(ie2.toRed(de2).redPow(Z2.mul(pe2).mod(ee2)).fromRed()).mod(j).mod(ee2);
    return le2.cmp(Z2) === 0;
  }
  function P2($, F2) {
    if ($.cmpn(0) <= 0)
      throw new Error("invalid sig");
    if ($.cmp(F2) >= 0)
      throw new Error("invalid sig");
  }
  return verify_1 = p2, verify_1;
}
var browser$4, hasRequiredBrowser$1;
function requireBrowser$1() {
  if (hasRequiredBrowser$1)
    return browser$4;
  hasRequiredBrowser$1 = 1;
  var a420 = safeBufferExports.Buffer, u2 = browser$a, c = readableBrowserExports, l2 = inherits_browserExports, v2 = requireSign(), p2 = requireVerify(), _ = require$$6;
  Object.keys(_).forEach(function(H2) {
    _[H2].id = a420.from(_[H2].id, "hex"), _[H2.toLowerCase()] = _[H2];
  });
  function I2(H2) {
    c.Writable.call(this);
    var j = _[H2];
    if (!j)
      throw new Error("Unknown message digest");
    this._hashType = j.hash, this._hash = u2(j.hash), this._tag = j.id, this._signType = j.sign;
  }
  l2(I2, c.Writable), I2.prototype._write = function(j, ee2, X2) {
    this._hash.update(j), X2();
  }, I2.prototype.update = function(j, ee2) {
    return this._hash.update(typeof j == "string" ? a420.from(j, ee2) : j), this;
  }, I2.prototype.sign = function(j, ee2) {
    this.end();
    var X2 = this._hash.digest(), ie2 = v2(X2, j, this._hashType, this._signType, this._tag);
    return ee2 ? ie2.toString(ee2) : ie2;
  };
  function P2(H2) {
    c.Writable.call(this);
    var j = _[H2];
    if (!j)
      throw new Error("Unknown message digest");
    this._hash = u2(j.hash), this._tag = j.id, this._signType = j.sign;
  }
  l2(P2, c.Writable), P2.prototype._write = function(j, ee2, X2) {
    this._hash.update(j), X2();
  }, P2.prototype.update = function(j, ee2) {
    return this._hash.update(typeof j == "string" ? a420.from(j, ee2) : j), this;
  }, P2.prototype.verify = function(j, ee2, X2) {
    var ie2 = typeof ee2 == "string" ? a420.from(ee2, X2) : ee2;
    this.end();
    var Q2 = this._hash.digest();
    return p2(ie2, Q2, j, this._signType, this._tag);
  };
  function $(H2) {
    return new I2(H2);
  }
  function F2(H2) {
    return new P2(H2);
  }
  return browser$4 = { Sign: $, Verify: F2, createSign: $, createVerify: F2 }, browser$4;
}
var bn$1 = { exports: {} };
(function(a420) {
  (function(u2, c) {
    function l2(C2, b) {
      if (!C2)
        throw new Error(b || "Assertion failed");
    }
    function v2(C2, b) {
      C2.super_ = b;
      var E2 = function() {
      };
      E2.prototype = b.prototype, C2.prototype = new E2(), C2.prototype.constructor = C2;
    }
    function p2(C2, b, E2) {
      if (p2.isBN(C2))
        return C2;
      this.negative = 0, this.words = null, this.length = 0, this.red = null, C2 !== null && ((b === "le" || b === "be") && (E2 = b, b = 10), this._init(C2 || 0, b || 10, E2 || "be"));
    }
    typeof u2 == "object" ? u2.exports = p2 : c.BN = p2, p2.BN = p2, p2.wordSize = 26;
    var _;
    try {
      typeof window < "u" && typeof window.Buffer < "u" ? _ = window.Buffer : _ = require$$0$2.Buffer;
    } catch {
    }
    p2.isBN = function(b) {
      return b instanceof p2 ? true : b !== null && typeof b == "object" && b.constructor.wordSize === p2.wordSize && Array.isArray(b.words);
    }, p2.max = function(b, E2) {
      return b.cmp(E2) > 0 ? b : E2;
    }, p2.min = function(b, E2) {
      return b.cmp(E2) < 0 ? b : E2;
    }, p2.prototype._init = function(b, E2, k) {
      if (typeof b == "number")
        return this._initNumber(b, E2, k);
      if (typeof b == "object")
        return this._initArray(b, E2, k);
      E2 === "hex" && (E2 = 16), l2(E2 === (E2 | 0) && E2 >= 2 && E2 <= 36), b = b.toString().replace(/\s+/g, "");
      var O2 = 0;
      b[0] === "-" && (O2++, this.negative = 1), O2 < b.length && (E2 === 16 ? this._parseHex(b, O2, k) : (this._parseBase(b, E2, O2), k === "le" && this._initArray(this.toArray(), E2, k)));
    }, p2.prototype._initNumber = function(b, E2, k) {
      b < 0 && (this.negative = 1, b = -b), b < 67108864 ? (this.words = [b & 67108863], this.length = 1) : b < 4503599627370496 ? (this.words = [b & 67108863, b / 67108864 & 67108863], this.length = 2) : (l2(b < 9007199254740992), this.words = [b & 67108863, b / 67108864 & 67108863, 1], this.length = 3), k === "le" && this._initArray(this.toArray(), E2, k);
    }, p2.prototype._initArray = function(b, E2, k) {
      if (l2(typeof b.length == "number"), b.length <= 0)
        return this.words = [0], this.length = 1, this;
      this.length = Math.ceil(b.length / 3), this.words = new Array(this.length);
      for (var O2 = 0; O2 < this.length; O2++)
        this.words[O2] = 0;
      var A2, x2, Y2 = 0;
      if (k === "be")
        for (O2 = b.length - 1, A2 = 0; O2 >= 0; O2 -= 3)
          x2 = b[O2] | b[O2 - 1] << 8 | b[O2 - 2] << 16, this.words[A2] |= x2 << Y2 & 67108863, this.words[A2 + 1] = x2 >>> 26 - Y2 & 67108863, Y2 += 24, Y2 >= 26 && (Y2 -= 26, A2++);
      else if (k === "le")
        for (O2 = 0, A2 = 0; O2 < b.length; O2 += 3)
          x2 = b[O2] | b[O2 + 1] << 8 | b[O2 + 2] << 16, this.words[A2] |= x2 << Y2 & 67108863, this.words[A2 + 1] = x2 >>> 26 - Y2 & 67108863, Y2 += 24, Y2 >= 26 && (Y2 -= 26, A2++);
      return this.strip();
    };
    function I2(C2, b) {
      var E2 = C2.charCodeAt(b);
      return E2 >= 65 && E2 <= 70 ? E2 - 55 : E2 >= 97 && E2 <= 102 ? E2 - 87 : E2 - 48 & 15;
    }
    function P2(C2, b, E2) {
      var k = I2(C2, E2);
      return E2 - 1 >= b && (k |= I2(C2, E2 - 1) << 4), k;
    }
    p2.prototype._parseHex = function(b, E2, k) {
      this.length = Math.ceil((b.length - E2) / 6), this.words = new Array(this.length);
      for (var O2 = 0; O2 < this.length; O2++)
        this.words[O2] = 0;
      var A2 = 0, x2 = 0, Y2;
      if (k === "be")
        for (O2 = b.length - 1; O2 >= E2; O2 -= 2)
          Y2 = P2(b, E2, O2) << A2, this.words[x2] |= Y2 & 67108863, A2 >= 18 ? (A2 -= 18, x2 += 1, this.words[x2] |= Y2 >>> 26) : A2 += 8;
      else {
        var B2 = b.length - E2;
        for (O2 = B2 % 2 === 0 ? E2 + 1 : E2; O2 < b.length; O2 += 2)
          Y2 = P2(b, E2, O2) << A2, this.words[x2] |= Y2 & 67108863, A2 >= 18 ? (A2 -= 18, x2 += 1, this.words[x2] |= Y2 >>> 26) : A2 += 8;
      }
      this.strip();
    };
    function $(C2, b, E2, k) {
      for (var O2 = 0, A2 = Math.min(C2.length, E2), x2 = b; x2 < A2; x2++) {
        var Y2 = C2.charCodeAt(x2) - 48;
        O2 *= k, Y2 >= 49 ? O2 += Y2 - 49 + 10 : Y2 >= 17 ? O2 += Y2 - 17 + 10 : O2 += Y2;
      }
      return O2;
    }
    p2.prototype._parseBase = function(b, E2, k) {
      this.words = [0], this.length = 1;
      for (var O2 = 0, A2 = 1; A2 <= 67108863; A2 *= E2)
        O2++;
      O2--, A2 = A2 / E2 | 0;
      for (var x2 = b.length - k, Y2 = x2 % O2, B2 = Math.min(x2, x2 - Y2) + k, T2 = 0, D2 = k; D2 < B2; D2 += O2)
        T2 = $(b, D2, D2 + O2, E2), this.imuln(A2), this.words[0] + T2 < 67108864 ? this.words[0] += T2 : this._iaddn(T2);
      if (Y2 !== 0) {
        var te2 = 1;
        for (T2 = $(b, D2, b.length, E2), D2 = 0; D2 < Y2; D2++)
          te2 *= E2;
        this.imuln(te2), this.words[0] + T2 < 67108864 ? this.words[0] += T2 : this._iaddn(T2);
      }
      this.strip();
    }, p2.prototype.copy = function(b) {
      b.words = new Array(this.length);
      for (var E2 = 0; E2 < this.length; E2++)
        b.words[E2] = this.words[E2];
      b.length = this.length, b.negative = this.negative, b.red = this.red;
    }, p2.prototype.clone = function() {
      var b = new p2(null);
      return this.copy(b), b;
    }, p2.prototype._expand = function(b) {
      for (; this.length < b; )
        this.words[this.length++] = 0;
      return this;
    }, p2.prototype.strip = function() {
      for (; this.length > 1 && this.words[this.length - 1] === 0; )
        this.length--;
      return this._normSign();
    }, p2.prototype._normSign = function() {
      return this.length === 1 && this.words[0] === 0 && (this.negative = 0), this;
    }, p2.prototype.inspect = function() {
      return (this.red ? "<BN-R: " : "<BN: ") + this.toString(16) + ">";
    };
    var F2 = ["", "0", "00", "000", "0000", "00000", "000000", "0000000", "00000000", "000000000", "0000000000", "00000000000", "000000000000", "0000000000000", "00000000000000", "000000000000000", "0000000000000000", "00000000000000000", "000000000000000000", "0000000000000000000", "00000000000000000000", "000000000000000000000", "0000000000000000000000", "00000000000000000000000", "000000000000000000000000", "0000000000000000000000000"], H2 = [0, 0, 25, 16, 12, 11, 10, 9, 8, 8, 7, 7, 7, 7, 6, 6, 6, 6, 6, 6, 6, 5, 5, 5, 5, 5, 5, 5, 5, 5, 5, 5, 5, 5, 5, 5, 5], j = [0, 0, 33554432, 43046721, 16777216, 48828125, 60466176, 40353607, 16777216, 43046721, 1e7, 19487171, 35831808, 62748517, 7529536, 11390625, 16777216, 24137569, 34012224, 47045881, 64e6, 4084101, 5153632, 6436343, 7962624, 9765625, 11881376, 14348907, 17210368, 20511149, 243e5, 28629151, 33554432, 39135393, 45435424, 52521875, 60466176];
    p2.prototype.toString = function(b, E2) {
      b = b || 10, E2 = E2 | 0 || 1;
      var k;
      if (b === 16 || b === "hex") {
        k = "";
        for (var O2 = 0, A2 = 0, x2 = 0; x2 < this.length; x2++) {
          var Y2 = this.words[x2], B2 = ((Y2 << O2 | A2) & 16777215).toString(16);
          A2 = Y2 >>> 24 - O2 & 16777215, A2 !== 0 || x2 !== this.length - 1 ? k = F2[6 - B2.length] + B2 + k : k = B2 + k, O2 += 2, O2 >= 26 && (O2 -= 26, x2--);
        }
        for (A2 !== 0 && (k = A2.toString(16) + k); k.length % E2 !== 0; )
          k = "0" + k;
        return this.negative !== 0 && (k = "-" + k), k;
      }
      if (b === (b | 0) && b >= 2 && b <= 36) {
        var T2 = H2[b], D2 = j[b];
        k = "";
        var te2 = this.clone();
        for (te2.negative = 0; !te2.isZero(); ) {
          var me2 = te2.modn(D2).toString(b);
          te2 = te2.idivn(D2), te2.isZero() ? k = me2 + k : k = F2[T2 - me2.length] + me2 + k;
        }
        for (this.isZero() && (k = "0" + k); k.length % E2 !== 0; )
          k = "0" + k;
        return this.negative !== 0 && (k = "-" + k), k;
      }
      l2(false, "Base should be between 2 and 36");
    }, p2.prototype.toNumber = function() {
      var b = this.words[0];
      return this.length === 2 ? b += this.words[1] * 67108864 : this.length === 3 && this.words[2] === 1 ? b += 4503599627370496 + this.words[1] * 67108864 : this.length > 2 && l2(false, "Number can only safely store up to 53 bits"), this.negative !== 0 ? -b : b;
    }, p2.prototype.toJSON = function() {
      return this.toString(16);
    }, p2.prototype.toBuffer = function(b, E2) {
      return l2(typeof _ < "u"), this.toArrayLike(_, b, E2);
    }, p2.prototype.toArray = function(b, E2) {
      return this.toArrayLike(Array, b, E2);
    }, p2.prototype.toArrayLike = function(b, E2, k) {
      var O2 = this.byteLength(), A2 = k || Math.max(1, O2);
      l2(O2 <= A2, "byte array longer than desired length"), l2(A2 > 0, "Requested array length <= 0"), this.strip();
      var x2 = E2 === "le", Y2 = new b(A2), B2, T2, D2 = this.clone();
      if (x2) {
        for (T2 = 0; !D2.isZero(); T2++)
          B2 = D2.andln(255), D2.iushrn(8), Y2[T2] = B2;
        for (; T2 < A2; T2++)
          Y2[T2] = 0;
      } else {
        for (T2 = 0; T2 < A2 - O2; T2++)
          Y2[T2] = 0;
        for (T2 = 0; !D2.isZero(); T2++)
          B2 = D2.andln(255), D2.iushrn(8), Y2[A2 - T2 - 1] = B2;
      }
      return Y2;
    }, Math.clz32 ? p2.prototype._countBits = function(b) {
      return 32 - Math.clz32(b);
    } : p2.prototype._countBits = function(b) {
      var E2 = b, k = 0;
      return E2 >= 4096 && (k += 13, E2 >>>= 13), E2 >= 64 && (k += 7, E2 >>>= 7), E2 >= 8 && (k += 4, E2 >>>= 4), E2 >= 2 && (k += 2, E2 >>>= 2), k + E2;
    }, p2.prototype._zeroBits = function(b) {
      if (b === 0)
        return 26;
      var E2 = b, k = 0;
      return E2 & 8191 || (k += 13, E2 >>>= 13), E2 & 127 || (k += 7, E2 >>>= 7), E2 & 15 || (k += 4, E2 >>>= 4), E2 & 3 || (k += 2, E2 >>>= 2), E2 & 1 || k++, k;
    }, p2.prototype.bitLength = function() {
      var b = this.words[this.length - 1], E2 = this._countBits(b);
      return (this.length - 1) * 26 + E2;
    };
    function ee2(C2) {
      for (var b = new Array(C2.bitLength()), E2 = 0; E2 < b.length; E2++) {
        var k = E2 / 26 | 0, O2 = E2 % 26;
        b[E2] = (C2.words[k] & 1 << O2) >>> O2;
      }
      return b;
    }
    p2.prototype.zeroBits = function() {
      if (this.isZero())
        return 0;
      for (var b = 0, E2 = 0; E2 < this.length; E2++) {
        var k = this._zeroBits(this.words[E2]);
        if (b += k, k !== 26)
          break;
      }
      return b;
    }, p2.prototype.byteLength = function() {
      return Math.ceil(this.bitLength() / 8);
    }, p2.prototype.toTwos = function(b) {
      return this.negative !== 0 ? this.abs().inotn(b).iaddn(1) : this.clone();
    }, p2.prototype.fromTwos = function(b) {
      return this.testn(b - 1) ? this.notn(b).iaddn(1).ineg() : this.clone();
    }, p2.prototype.isNeg = function() {
      return this.negative !== 0;
    }, p2.prototype.neg = function() {
      return this.clone().ineg();
    }, p2.prototype.ineg = function() {
      return this.isZero() || (this.negative ^= 1), this;
    }, p2.prototype.iuor = function(b) {
      for (; this.length < b.length; )
        this.words[this.length++] = 0;
      for (var E2 = 0; E2 < b.length; E2++)
        this.words[E2] = this.words[E2] | b.words[E2];
      return this.strip();
    }, p2.prototype.ior = function(b) {
      return l2((this.negative | b.negative) === 0), this.iuor(b);
    }, p2.prototype.or = function(b) {
      return this.length > b.length ? this.clone().ior(b) : b.clone().ior(this);
    }, p2.prototype.uor = function(b) {
      return this.length > b.length ? this.clone().iuor(b) : b.clone().iuor(this);
    }, p2.prototype.iuand = function(b) {
      var E2;
      this.length > b.length ? E2 = b : E2 = this;
      for (var k = 0; k < E2.length; k++)
        this.words[k] = this.words[k] & b.words[k];
      return this.length = E2.length, this.strip();
    }, p2.prototype.iand = function(b) {
      return l2((this.negative | b.negative) === 0), this.iuand(b);
    }, p2.prototype.and = function(b) {
      return this.length > b.length ? this.clone().iand(b) : b.clone().iand(this);
    }, p2.prototype.uand = function(b) {
      return this.length > b.length ? this.clone().iuand(b) : b.clone().iuand(this);
    }, p2.prototype.iuxor = function(b) {
      var E2, k;
      this.length > b.length ? (E2 = this, k = b) : (E2 = b, k = this);
      for (var O2 = 0; O2 < k.length; O2++)
        this.words[O2] = E2.words[O2] ^ k.words[O2];
      if (this !== E2)
        for (; O2 < E2.length; O2++)
          this.words[O2] = E2.words[O2];
      return this.length = E2.length, this.strip();
    }, p2.prototype.ixor = function(b) {
      return l2((this.negative | b.negative) === 0), this.iuxor(b);
    }, p2.prototype.xor = function(b) {
      return this.length > b.length ? this.clone().ixor(b) : b.clone().ixor(this);
    }, p2.prototype.uxor = function(b) {
      return this.length > b.length ? this.clone().iuxor(b) : b.clone().iuxor(this);
    }, p2.prototype.inotn = function(b) {
      l2(typeof b == "number" && b >= 0);
      var E2 = Math.ceil(b / 26) | 0, k = b % 26;
      this._expand(E2), k > 0 && E2--;
      for (var O2 = 0; O2 < E2; O2++)
        this.words[O2] = ~this.words[O2] & 67108863;
      return k > 0 && (this.words[O2] = ~this.words[O2] & 67108863 >> 26 - k), this.strip();
    }, p2.prototype.notn = function(b) {
      return this.clone().inotn(b);
    }, p2.prototype.setn = function(b, E2) {
      l2(typeof b == "number" && b >= 0);
      var k = b / 26 | 0, O2 = b % 26;
      return this._expand(k + 1), E2 ? this.words[k] = this.words[k] | 1 << O2 : this.words[k] = this.words[k] & ~(1 << O2), this.strip();
    }, p2.prototype.iadd = function(b) {
      var E2;
      if (this.negative !== 0 && b.negative === 0)
        return this.negative = 0, E2 = this.isub(b), this.negative ^= 1, this._normSign();
      if (this.negative === 0 && b.negative !== 0)
        return b.negative = 0, E2 = this.isub(b), b.negative = 1, E2._normSign();
      var k, O2;
      this.length > b.length ? (k = this, O2 = b) : (k = b, O2 = this);
      for (var A2 = 0, x2 = 0; x2 < O2.length; x2++)
        E2 = (k.words[x2] | 0) + (O2.words[x2] | 0) + A2, this.words[x2] = E2 & 67108863, A2 = E2 >>> 26;
      for (; A2 !== 0 && x2 < k.length; x2++)
        E2 = (k.words[x2] | 0) + A2, this.words[x2] = E2 & 67108863, A2 = E2 >>> 26;
      if (this.length = k.length, A2 !== 0)
        this.words[this.length] = A2, this.length++;
      else if (k !== this)
        for (; x2 < k.length; x2++)
          this.words[x2] = k.words[x2];
      return this;
    }, p2.prototype.add = function(b) {
      var E2;
      return b.negative !== 0 && this.negative === 0 ? (b.negative = 0, E2 = this.sub(b), b.negative ^= 1, E2) : b.negative === 0 && this.negative !== 0 ? (this.negative = 0, E2 = b.sub(this), this.negative = 1, E2) : this.length > b.length ? this.clone().iadd(b) : b.clone().iadd(this);
    }, p2.prototype.isub = function(b) {
      if (b.negative !== 0) {
        b.negative = 0;
        var E2 = this.iadd(b);
        return b.negative = 1, E2._normSign();
      } else if (this.negative !== 0)
        return this.negative = 0, this.iadd(b), this.negative = 1, this._normSign();
      var k = this.cmp(b);
      if (k === 0)
        return this.negative = 0, this.length = 1, this.words[0] = 0, this;
      var O2, A2;
      k > 0 ? (O2 = this, A2 = b) : (O2 = b, A2 = this);
      for (var x2 = 0, Y2 = 0; Y2 < A2.length; Y2++)
        E2 = (O2.words[Y2] | 0) - (A2.words[Y2] | 0) + x2, x2 = E2 >> 26, this.words[Y2] = E2 & 67108863;
      for (; x2 !== 0 && Y2 < O2.length; Y2++)
        E2 = (O2.words[Y2] | 0) + x2, x2 = E2 >> 26, this.words[Y2] = E2 & 67108863;
      if (x2 === 0 && Y2 < O2.length && O2 !== this)
        for (; Y2 < O2.length; Y2++)
          this.words[Y2] = O2.words[Y2];
      return this.length = Math.max(this.length, Y2), O2 !== this && (this.negative = 1), this.strip();
    }, p2.prototype.sub = function(b) {
      return this.clone().isub(b);
    };
    function X2(C2, b, E2) {
      E2.negative = b.negative ^ C2.negative;
      var k = C2.length + b.length | 0;
      E2.length = k, k = k - 1 | 0;
      var O2 = C2.words[0] | 0, A2 = b.words[0] | 0, x2 = O2 * A2, Y2 = x2 & 67108863, B2 = x2 / 67108864 | 0;
      E2.words[0] = Y2;
      for (var T2 = 1; T2 < k; T2++) {
        for (var D2 = B2 >>> 26, te2 = B2 & 67108863, me2 = Math.min(T2, b.length - 1), Ie2 = Math.max(0, T2 - C2.length + 1); Ie2 <= me2; Ie2++) {
          var $e2 = T2 - Ie2 | 0;
          O2 = C2.words[$e2] | 0, A2 = b.words[Ie2] | 0, x2 = O2 * A2 + te2, D2 += x2 / 67108864 | 0, te2 = x2 & 67108863;
        }
        E2.words[T2] = te2 | 0, B2 = D2 | 0;
      }
      return B2 !== 0 ? E2.words[T2] = B2 | 0 : E2.length--, E2.strip();
    }
    var ie2 = function(b, E2, k) {
      var O2 = b.words, A2 = E2.words, x2 = k.words, Y2 = 0, B2, T2, D2, te2 = O2[0] | 0, me2 = te2 & 8191, Ie2 = te2 >>> 13, $e2 = O2[1] | 0, ye2 = $e2 & 8191, he2 = $e2 >>> 13, Me2 = O2[2] | 0, Ae2 = Me2 & 8191, xe2 = Me2 >>> 13, ae2 = O2[3] | 0, N2 = ae2 & 8191, re2 = ae2 >>> 13, fe2 = O2[4] | 0, Ne2 = fe2 & 8191, Oe2 = fe2 >>> 13, qe2 = O2[5] | 0, je2 = qe2 & 8191, Fe2 = qe2 >>> 13, yt = O2[6] | 0, Xe2 = yt & 8191, Ge2 = yt >>> 13, V2 = O2[7] | 0, ge2 = V2 & 8191, we2 = V2 >>> 13, We2 = O2[8] | 0, Re2 = We2 & 8191, J2 = We2 >>> 13, _e = O2[9] | 0, ue2 = _e & 8191, ce2 = _e >>> 13, ve2 = A2[0] | 0, Ce2 = ve2 & 8191, Be2 = ve2 >>> 13, He2 = A2[1] | 0, Ve2 = He2 & 8191, Ze2 = He2 >>> 13, Ke2 = A2[2] | 0, U2 = Ke2 & 8191, se2 = Ke2 >>> 13, Se2 = A2[3] | 0, Ue2 = Se2 & 8191, De2 = Se2 >>> 13, Ye2 = A2[4] | 0, Qe2 = Ye2 & 8191, st = Ye2 >>> 13, St = A2[5] | 0, tt = St & 8191, it = St >>> 13, Tt = A2[6] | 0, rt = Tt & 8191, dt = Tt >>> 13, wt = A2[7] | 0, nt = wt & 8191, at = wt >>> 13, gt = A2[8] | 0, ot = gt & 8191, ct = gt >>> 13, Ct = A2[9] | 0, ut = Ct & 8191, lt = Ct >>> 13;
      k.negative = b.negative ^ E2.negative, k.length = 19, B2 = Math.imul(me2, Ce2), T2 = Math.imul(me2, Be2), T2 = T2 + Math.imul(Ie2, Ce2) | 0, D2 = Math.imul(Ie2, Be2);
      var kt = (Y2 + B2 | 0) + ((T2 & 8191) << 13) | 0;
      Y2 = (D2 + (T2 >>> 13) | 0) + (kt >>> 26) | 0, kt &= 67108863, B2 = Math.imul(ye2, Ce2), T2 = Math.imul(ye2, Be2), T2 = T2 + Math.imul(he2, Ce2) | 0, D2 = Math.imul(he2, Be2), B2 = B2 + Math.imul(me2, Ve2) | 0, T2 = T2 + Math.imul(me2, Ze2) | 0, T2 = T2 + Math.imul(Ie2, Ve2) | 0, D2 = D2 + Math.imul(Ie2, Ze2) | 0;
      var Rt = (Y2 + B2 | 0) + ((T2 & 8191) << 13) | 0;
      Y2 = (D2 + (T2 >>> 13) | 0) + (Rt >>> 26) | 0, Rt &= 67108863, B2 = Math.imul(Ae2, Ce2), T2 = Math.imul(Ae2, Be2), T2 = T2 + Math.imul(xe2, Ce2) | 0, D2 = Math.imul(xe2, Be2), B2 = B2 + Math.imul(ye2, Ve2) | 0, T2 = T2 + Math.imul(ye2, Ze2) | 0, T2 = T2 + Math.imul(he2, Ve2) | 0, D2 = D2 + Math.imul(he2, Ze2) | 0, B2 = B2 + Math.imul(me2, U2) | 0, T2 = T2 + Math.imul(me2, se2) | 0, T2 = T2 + Math.imul(Ie2, U2) | 0, D2 = D2 + Math.imul(Ie2, se2) | 0;
      var Je2 = (Y2 + B2 | 0) + ((T2 & 8191) << 13) | 0;
      Y2 = (D2 + (T2 >>> 13) | 0) + (Je2 >>> 26) | 0, Je2 &= 67108863, B2 = Math.imul(N2, Ce2), T2 = Math.imul(N2, Be2), T2 = T2 + Math.imul(re2, Ce2) | 0, D2 = Math.imul(re2, Be2), B2 = B2 + Math.imul(Ae2, Ve2) | 0, T2 = T2 + Math.imul(Ae2, Ze2) | 0, T2 = T2 + Math.imul(xe2, Ve2) | 0, D2 = D2 + Math.imul(xe2, Ze2) | 0, B2 = B2 + Math.imul(ye2, U2) | 0, T2 = T2 + Math.imul(ye2, se2) | 0, T2 = T2 + Math.imul(he2, U2) | 0, D2 = D2 + Math.imul(he2, se2) | 0, B2 = B2 + Math.imul(me2, Ue2) | 0, T2 = T2 + Math.imul(me2, De2) | 0, T2 = T2 + Math.imul(Ie2, Ue2) | 0, D2 = D2 + Math.imul(Ie2, De2) | 0;
      var ze2 = (Y2 + B2 | 0) + ((T2 & 8191) << 13) | 0;
      Y2 = (D2 + (T2 >>> 13) | 0) + (ze2 >>> 26) | 0, ze2 &= 67108863, B2 = Math.imul(Ne2, Ce2), T2 = Math.imul(Ne2, Be2), T2 = T2 + Math.imul(Oe2, Ce2) | 0, D2 = Math.imul(Oe2, Be2), B2 = B2 + Math.imul(N2, Ve2) | 0, T2 = T2 + Math.imul(N2, Ze2) | 0, T2 = T2 + Math.imul(re2, Ve2) | 0, D2 = D2 + Math.imul(re2, Ze2) | 0, B2 = B2 + Math.imul(Ae2, U2) | 0, T2 = T2 + Math.imul(Ae2, se2) | 0, T2 = T2 + Math.imul(xe2, U2) | 0, D2 = D2 + Math.imul(xe2, se2) | 0, B2 = B2 + Math.imul(ye2, Ue2) | 0, T2 = T2 + Math.imul(ye2, De2) | 0, T2 = T2 + Math.imul(he2, Ue2) | 0, D2 = D2 + Math.imul(he2, De2) | 0, B2 = B2 + Math.imul(me2, Qe2) | 0, T2 = T2 + Math.imul(me2, st) | 0, T2 = T2 + Math.imul(Ie2, Qe2) | 0, D2 = D2 + Math.imul(Ie2, st) | 0;
      var et = (Y2 + B2 | 0) + ((T2 & 8191) << 13) | 0;
      Y2 = (D2 + (T2 >>> 13) | 0) + (et >>> 26) | 0, et &= 67108863, B2 = Math.imul(je2, Ce2), T2 = Math.imul(je2, Be2), T2 = T2 + Math.imul(Fe2, Ce2) | 0, D2 = Math.imul(Fe2, Be2), B2 = B2 + Math.imul(Ne2, Ve2) | 0, T2 = T2 + Math.imul(Ne2, Ze2) | 0, T2 = T2 + Math.imul(Oe2, Ve2) | 0, D2 = D2 + Math.imul(Oe2, Ze2) | 0, B2 = B2 + Math.imul(N2, U2) | 0, T2 = T2 + Math.imul(N2, se2) | 0, T2 = T2 + Math.imul(re2, U2) | 0, D2 = D2 + Math.imul(re2, se2) | 0, B2 = B2 + Math.imul(Ae2, Ue2) | 0, T2 = T2 + Math.imul(Ae2, De2) | 0, T2 = T2 + Math.imul(xe2, Ue2) | 0, D2 = D2 + Math.imul(xe2, De2) | 0, B2 = B2 + Math.imul(ye2, Qe2) | 0, T2 = T2 + Math.imul(ye2, st) | 0, T2 = T2 + Math.imul(he2, Qe2) | 0, D2 = D2 + Math.imul(he2, st) | 0, B2 = B2 + Math.imul(me2, tt) | 0, T2 = T2 + Math.imul(me2, it) | 0, T2 = T2 + Math.imul(Ie2, tt) | 0, D2 = D2 + Math.imul(Ie2, it) | 0;
      var pt = (Y2 + B2 | 0) + ((T2 & 8191) << 13) | 0;
      Y2 = (D2 + (T2 >>> 13) | 0) + (pt >>> 26) | 0, pt &= 67108863, B2 = Math.imul(Xe2, Ce2), T2 = Math.imul(Xe2, Be2), T2 = T2 + Math.imul(Ge2, Ce2) | 0, D2 = Math.imul(Ge2, Be2), B2 = B2 + Math.imul(je2, Ve2) | 0, T2 = T2 + Math.imul(je2, Ze2) | 0, T2 = T2 + Math.imul(Fe2, Ve2) | 0, D2 = D2 + Math.imul(Fe2, Ze2) | 0, B2 = B2 + Math.imul(Ne2, U2) | 0, T2 = T2 + Math.imul(Ne2, se2) | 0, T2 = T2 + Math.imul(Oe2, U2) | 0, D2 = D2 + Math.imul(Oe2, se2) | 0, B2 = B2 + Math.imul(N2, Ue2) | 0, T2 = T2 + Math.imul(N2, De2) | 0, T2 = T2 + Math.imul(re2, Ue2) | 0, D2 = D2 + Math.imul(re2, De2) | 0, B2 = B2 + Math.imul(Ae2, Qe2) | 0, T2 = T2 + Math.imul(Ae2, st) | 0, T2 = T2 + Math.imul(xe2, Qe2) | 0, D2 = D2 + Math.imul(xe2, st) | 0, B2 = B2 + Math.imul(ye2, tt) | 0, T2 = T2 + Math.imul(ye2, it) | 0, T2 = T2 + Math.imul(he2, tt) | 0, D2 = D2 + Math.imul(he2, it) | 0, B2 = B2 + Math.imul(me2, rt) | 0, T2 = T2 + Math.imul(me2, dt) | 0, T2 = T2 + Math.imul(Ie2, rt) | 0, D2 = D2 + Math.imul(Ie2, dt) | 0;
      var mt = (Y2 + B2 | 0) + ((T2 & 8191) << 13) | 0;
      Y2 = (D2 + (T2 >>> 13) | 0) + (mt >>> 26) | 0, mt &= 67108863, B2 = Math.imul(ge2, Ce2), T2 = Math.imul(ge2, Be2), T2 = T2 + Math.imul(we2, Ce2) | 0, D2 = Math.imul(we2, Be2), B2 = B2 + Math.imul(Xe2, Ve2) | 0, T2 = T2 + Math.imul(Xe2, Ze2) | 0, T2 = T2 + Math.imul(Ge2, Ve2) | 0, D2 = D2 + Math.imul(Ge2, Ze2) | 0, B2 = B2 + Math.imul(je2, U2) | 0, T2 = T2 + Math.imul(je2, se2) | 0, T2 = T2 + Math.imul(Fe2, U2) | 0, D2 = D2 + Math.imul(Fe2, se2) | 0, B2 = B2 + Math.imul(Ne2, Ue2) | 0, T2 = T2 + Math.imul(Ne2, De2) | 0, T2 = T2 + Math.imul(Oe2, Ue2) | 0, D2 = D2 + Math.imul(Oe2, De2) | 0, B2 = B2 + Math.imul(N2, Qe2) | 0, T2 = T2 + Math.imul(N2, st) | 0, T2 = T2 + Math.imul(re2, Qe2) | 0, D2 = D2 + Math.imul(re2, st) | 0, B2 = B2 + Math.imul(Ae2, tt) | 0, T2 = T2 + Math.imul(Ae2, it) | 0, T2 = T2 + Math.imul(xe2, tt) | 0, D2 = D2 + Math.imul(xe2, it) | 0, B2 = B2 + Math.imul(ye2, rt) | 0, T2 = T2 + Math.imul(ye2, dt) | 0, T2 = T2 + Math.imul(he2, rt) | 0, D2 = D2 + Math.imul(he2, dt) | 0, B2 = B2 + Math.imul(me2, nt) | 0, T2 = T2 + Math.imul(me2, at) | 0, T2 = T2 + Math.imul(Ie2, nt) | 0, D2 = D2 + Math.imul(Ie2, at) | 0;
      var vt = (Y2 + B2 | 0) + ((T2 & 8191) << 13) | 0;
      Y2 = (D2 + (T2 >>> 13) | 0) + (vt >>> 26) | 0, vt &= 67108863, B2 = Math.imul(Re2, Ce2), T2 = Math.imul(Re2, Be2), T2 = T2 + Math.imul(J2, Ce2) | 0, D2 = Math.imul(J2, Be2), B2 = B2 + Math.imul(ge2, Ve2) | 0, T2 = T2 + Math.imul(ge2, Ze2) | 0, T2 = T2 + Math.imul(we2, Ve2) | 0, D2 = D2 + Math.imul(we2, Ze2) | 0, B2 = B2 + Math.imul(Xe2, U2) | 0, T2 = T2 + Math.imul(Xe2, se2) | 0, T2 = T2 + Math.imul(Ge2, U2) | 0, D2 = D2 + Math.imul(Ge2, se2) | 0, B2 = B2 + Math.imul(je2, Ue2) | 0, T2 = T2 + Math.imul(je2, De2) | 0, T2 = T2 + Math.imul(Fe2, Ue2) | 0, D2 = D2 + Math.imul(Fe2, De2) | 0, B2 = B2 + Math.imul(Ne2, Qe2) | 0, T2 = T2 + Math.imul(Ne2, st) | 0, T2 = T2 + Math.imul(Oe2, Qe2) | 0, D2 = D2 + Math.imul(Oe2, st) | 0, B2 = B2 + Math.imul(N2, tt) | 0, T2 = T2 + Math.imul(N2, it) | 0, T2 = T2 + Math.imul(re2, tt) | 0, D2 = D2 + Math.imul(re2, it) | 0, B2 = B2 + Math.imul(Ae2, rt) | 0, T2 = T2 + Math.imul(Ae2, dt) | 0, T2 = T2 + Math.imul(xe2, rt) | 0, D2 = D2 + Math.imul(xe2, dt) | 0, B2 = B2 + Math.imul(ye2, nt) | 0, T2 = T2 + Math.imul(ye2, at) | 0, T2 = T2 + Math.imul(he2, nt) | 0, D2 = D2 + Math.imul(he2, at) | 0, B2 = B2 + Math.imul(me2, ot) | 0, T2 = T2 + Math.imul(me2, ct) | 0, T2 = T2 + Math.imul(Ie2, ot) | 0, D2 = D2 + Math.imul(Ie2, ct) | 0;
      var ht = (Y2 + B2 | 0) + ((T2 & 8191) << 13) | 0;
      Y2 = (D2 + (T2 >>> 13) | 0) + (ht >>> 26) | 0, ht &= 67108863, B2 = Math.imul(ue2, Ce2), T2 = Math.imul(ue2, Be2), T2 = T2 + Math.imul(ce2, Ce2) | 0, D2 = Math.imul(ce2, Be2), B2 = B2 + Math.imul(Re2, Ve2) | 0, T2 = T2 + Math.imul(Re2, Ze2) | 0, T2 = T2 + Math.imul(J2, Ve2) | 0, D2 = D2 + Math.imul(J2, Ze2) | 0, B2 = B2 + Math.imul(ge2, U2) | 0, T2 = T2 + Math.imul(ge2, se2) | 0, T2 = T2 + Math.imul(we2, U2) | 0, D2 = D2 + Math.imul(we2, se2) | 0, B2 = B2 + Math.imul(Xe2, Ue2) | 0, T2 = T2 + Math.imul(Xe2, De2) | 0, T2 = T2 + Math.imul(Ge2, Ue2) | 0, D2 = D2 + Math.imul(Ge2, De2) | 0, B2 = B2 + Math.imul(je2, Qe2) | 0, T2 = T2 + Math.imul(je2, st) | 0, T2 = T2 + Math.imul(Fe2, Qe2) | 0, D2 = D2 + Math.imul(Fe2, st) | 0, B2 = B2 + Math.imul(Ne2, tt) | 0, T2 = T2 + Math.imul(Ne2, it) | 0, T2 = T2 + Math.imul(Oe2, tt) | 0, D2 = D2 + Math.imul(Oe2, it) | 0, B2 = B2 + Math.imul(N2, rt) | 0, T2 = T2 + Math.imul(N2, dt) | 0, T2 = T2 + Math.imul(re2, rt) | 0, D2 = D2 + Math.imul(re2, dt) | 0, B2 = B2 + Math.imul(Ae2, nt) | 0, T2 = T2 + Math.imul(Ae2, at) | 0, T2 = T2 + Math.imul(xe2, nt) | 0, D2 = D2 + Math.imul(xe2, at) | 0, B2 = B2 + Math.imul(ye2, ot) | 0, T2 = T2 + Math.imul(ye2, ct) | 0, T2 = T2 + Math.imul(he2, ot) | 0, D2 = D2 + Math.imul(he2, ct) | 0, B2 = B2 + Math.imul(me2, ut) | 0, T2 = T2 + Math.imul(me2, lt) | 0, T2 = T2 + Math.imul(Ie2, ut) | 0, D2 = D2 + Math.imul(Ie2, lt) | 0;
      var _t = (Y2 + B2 | 0) + ((T2 & 8191) << 13) | 0;
      Y2 = (D2 + (T2 >>> 13) | 0) + (_t >>> 26) | 0, _t &= 67108863, B2 = Math.imul(ue2, Ve2), T2 = Math.imul(ue2, Ze2), T2 = T2 + Math.imul(ce2, Ve2) | 0, D2 = Math.imul(ce2, Ze2), B2 = B2 + Math.imul(Re2, U2) | 0, T2 = T2 + Math.imul(Re2, se2) | 0, T2 = T2 + Math.imul(J2, U2) | 0, D2 = D2 + Math.imul(J2, se2) | 0, B2 = B2 + Math.imul(ge2, Ue2) | 0, T2 = T2 + Math.imul(ge2, De2) | 0, T2 = T2 + Math.imul(we2, Ue2) | 0, D2 = D2 + Math.imul(we2, De2) | 0, B2 = B2 + Math.imul(Xe2, Qe2) | 0, T2 = T2 + Math.imul(Xe2, st) | 0, T2 = T2 + Math.imul(Ge2, Qe2) | 0, D2 = D2 + Math.imul(Ge2, st) | 0, B2 = B2 + Math.imul(je2, tt) | 0, T2 = T2 + Math.imul(je2, it) | 0, T2 = T2 + Math.imul(Fe2, tt) | 0, D2 = D2 + Math.imul(Fe2, it) | 0, B2 = B2 + Math.imul(Ne2, rt) | 0, T2 = T2 + Math.imul(Ne2, dt) | 0, T2 = T2 + Math.imul(Oe2, rt) | 0, D2 = D2 + Math.imul(Oe2, dt) | 0, B2 = B2 + Math.imul(N2, nt) | 0, T2 = T2 + Math.imul(N2, at) | 0, T2 = T2 + Math.imul(re2, nt) | 0, D2 = D2 + Math.imul(re2, at) | 0, B2 = B2 + Math.imul(Ae2, ot) | 0, T2 = T2 + Math.imul(Ae2, ct) | 0, T2 = T2 + Math.imul(xe2, ot) | 0, D2 = D2 + Math.imul(xe2, ct) | 0, B2 = B2 + Math.imul(ye2, ut) | 0, T2 = T2 + Math.imul(ye2, lt) | 0, T2 = T2 + Math.imul(he2, ut) | 0, D2 = D2 + Math.imul(he2, lt) | 0;
      var Et = (Y2 + B2 | 0) + ((T2 & 8191) << 13) | 0;
      Y2 = (D2 + (T2 >>> 13) | 0) + (Et >>> 26) | 0, Et &= 67108863, B2 = Math.imul(ue2, U2), T2 = Math.imul(ue2, se2), T2 = T2 + Math.imul(ce2, U2) | 0, D2 = Math.imul(ce2, se2), B2 = B2 + Math.imul(Re2, Ue2) | 0, T2 = T2 + Math.imul(Re2, De2) | 0, T2 = T2 + Math.imul(J2, Ue2) | 0, D2 = D2 + Math.imul(J2, De2) | 0, B2 = B2 + Math.imul(ge2, Qe2) | 0, T2 = T2 + Math.imul(ge2, st) | 0, T2 = T2 + Math.imul(we2, Qe2) | 0, D2 = D2 + Math.imul(we2, st) | 0, B2 = B2 + Math.imul(Xe2, tt) | 0, T2 = T2 + Math.imul(Xe2, it) | 0, T2 = T2 + Math.imul(Ge2, tt) | 0, D2 = D2 + Math.imul(Ge2, it) | 0, B2 = B2 + Math.imul(je2, rt) | 0, T2 = T2 + Math.imul(je2, dt) | 0, T2 = T2 + Math.imul(Fe2, rt) | 0, D2 = D2 + Math.imul(Fe2, dt) | 0, B2 = B2 + Math.imul(Ne2, nt) | 0, T2 = T2 + Math.imul(Ne2, at) | 0, T2 = T2 + Math.imul(Oe2, nt) | 0, D2 = D2 + Math.imul(Oe2, at) | 0, B2 = B2 + Math.imul(N2, ot) | 0, T2 = T2 + Math.imul(N2, ct) | 0, T2 = T2 + Math.imul(re2, ot) | 0, D2 = D2 + Math.imul(re2, ct) | 0, B2 = B2 + Math.imul(Ae2, ut) | 0, T2 = T2 + Math.imul(Ae2, lt) | 0, T2 = T2 + Math.imul(xe2, ut) | 0, D2 = D2 + Math.imul(xe2, lt) | 0;
      var Pt = (Y2 + B2 | 0) + ((T2 & 8191) << 13) | 0;
      Y2 = (D2 + (T2 >>> 13) | 0) + (Pt >>> 26) | 0, Pt &= 67108863, B2 = Math.imul(ue2, Ue2), T2 = Math.imul(ue2, De2), T2 = T2 + Math.imul(ce2, Ue2) | 0, D2 = Math.imul(ce2, De2), B2 = B2 + Math.imul(Re2, Qe2) | 0, T2 = T2 + Math.imul(Re2, st) | 0, T2 = T2 + Math.imul(J2, Qe2) | 0, D2 = D2 + Math.imul(J2, st) | 0, B2 = B2 + Math.imul(ge2, tt) | 0, T2 = T2 + Math.imul(ge2, it) | 0, T2 = T2 + Math.imul(we2, tt) | 0, D2 = D2 + Math.imul(we2, it) | 0, B2 = B2 + Math.imul(Xe2, rt) | 0, T2 = T2 + Math.imul(Xe2, dt) | 0, T2 = T2 + Math.imul(Ge2, rt) | 0, D2 = D2 + Math.imul(Ge2, dt) | 0, B2 = B2 + Math.imul(je2, nt) | 0, T2 = T2 + Math.imul(je2, at) | 0, T2 = T2 + Math.imul(Fe2, nt) | 0, D2 = D2 + Math.imul(Fe2, at) | 0, B2 = B2 + Math.imul(Ne2, ot) | 0, T2 = T2 + Math.imul(Ne2, ct) | 0, T2 = T2 + Math.imul(Oe2, ot) | 0, D2 = D2 + Math.imul(Oe2, ct) | 0, B2 = B2 + Math.imul(N2, ut) | 0, T2 = T2 + Math.imul(N2, lt) | 0, T2 = T2 + Math.imul(re2, ut) | 0, D2 = D2 + Math.imul(re2, lt) | 0;
      var Nt = (Y2 + B2 | 0) + ((T2 & 8191) << 13) | 0;
      Y2 = (D2 + (T2 >>> 13) | 0) + (Nt >>> 26) | 0, Nt &= 67108863, B2 = Math.imul(ue2, Qe2), T2 = Math.imul(ue2, st), T2 = T2 + Math.imul(ce2, Qe2) | 0, D2 = Math.imul(ce2, st), B2 = B2 + Math.imul(Re2, tt) | 0, T2 = T2 + Math.imul(Re2, it) | 0, T2 = T2 + Math.imul(J2, tt) | 0, D2 = D2 + Math.imul(J2, it) | 0, B2 = B2 + Math.imul(ge2, rt) | 0, T2 = T2 + Math.imul(ge2, dt) | 0, T2 = T2 + Math.imul(we2, rt) | 0, D2 = D2 + Math.imul(we2, dt) | 0, B2 = B2 + Math.imul(Xe2, nt) | 0, T2 = T2 + Math.imul(Xe2, at) | 0, T2 = T2 + Math.imul(Ge2, nt) | 0, D2 = D2 + Math.imul(Ge2, at) | 0, B2 = B2 + Math.imul(je2, ot) | 0, T2 = T2 + Math.imul(je2, ct) | 0, T2 = T2 + Math.imul(Fe2, ot) | 0, D2 = D2 + Math.imul(Fe2, ct) | 0, B2 = B2 + Math.imul(Ne2, ut) | 0, T2 = T2 + Math.imul(Ne2, lt) | 0, T2 = T2 + Math.imul(Oe2, ut) | 0, D2 = D2 + Math.imul(Oe2, lt) | 0;
      var Mt = (Y2 + B2 | 0) + ((T2 & 8191) << 13) | 0;
      Y2 = (D2 + (T2 >>> 13) | 0) + (Mt >>> 26) | 0, Mt &= 67108863, B2 = Math.imul(ue2, tt), T2 = Math.imul(ue2, it), T2 = T2 + Math.imul(ce2, tt) | 0, D2 = Math.imul(ce2, it), B2 = B2 + Math.imul(Re2, rt) | 0, T2 = T2 + Math.imul(Re2, dt) | 0, T2 = T2 + Math.imul(J2, rt) | 0, D2 = D2 + Math.imul(J2, dt) | 0, B2 = B2 + Math.imul(ge2, nt) | 0, T2 = T2 + Math.imul(ge2, at) | 0, T2 = T2 + Math.imul(we2, nt) | 0, D2 = D2 + Math.imul(we2, at) | 0, B2 = B2 + Math.imul(Xe2, ot) | 0, T2 = T2 + Math.imul(Xe2, ct) | 0, T2 = T2 + Math.imul(Ge2, ot) | 0, D2 = D2 + Math.imul(Ge2, ct) | 0, B2 = B2 + Math.imul(je2, ut) | 0, T2 = T2 + Math.imul(je2, lt) | 0, T2 = T2 + Math.imul(Fe2, ut) | 0, D2 = D2 + Math.imul(Fe2, lt) | 0;
      var Ot = (Y2 + B2 | 0) + ((T2 & 8191) << 13) | 0;
      Y2 = (D2 + (T2 >>> 13) | 0) + (Ot >>> 26) | 0, Ot &= 67108863, B2 = Math.imul(ue2, rt), T2 = Math.imul(ue2, dt), T2 = T2 + Math.imul(ce2, rt) | 0, D2 = Math.imul(ce2, dt), B2 = B2 + Math.imul(Re2, nt) | 0, T2 = T2 + Math.imul(Re2, at) | 0, T2 = T2 + Math.imul(J2, nt) | 0, D2 = D2 + Math.imul(J2, at) | 0, B2 = B2 + Math.imul(ge2, ot) | 0, T2 = T2 + Math.imul(ge2, ct) | 0, T2 = T2 + Math.imul(we2, ot) | 0, D2 = D2 + Math.imul(we2, ct) | 0, B2 = B2 + Math.imul(Xe2, ut) | 0, T2 = T2 + Math.imul(Xe2, lt) | 0, T2 = T2 + Math.imul(Ge2, ut) | 0, D2 = D2 + Math.imul(Ge2, lt) | 0;
      var $t = (Y2 + B2 | 0) + ((T2 & 8191) << 13) | 0;
      Y2 = (D2 + (T2 >>> 13) | 0) + ($t >>> 26) | 0, $t &= 67108863, B2 = Math.imul(ue2, nt), T2 = Math.imul(ue2, at), T2 = T2 + Math.imul(ce2, nt) | 0, D2 = Math.imul(ce2, at), B2 = B2 + Math.imul(Re2, ot) | 0, T2 = T2 + Math.imul(Re2, ct) | 0, T2 = T2 + Math.imul(J2, ot) | 0, D2 = D2 + Math.imul(J2, ct) | 0, B2 = B2 + Math.imul(ge2, ut) | 0, T2 = T2 + Math.imul(ge2, lt) | 0, T2 = T2 + Math.imul(we2, ut) | 0, D2 = D2 + Math.imul(we2, lt) | 0;
      var Bt = (Y2 + B2 | 0) + ((T2 & 8191) << 13) | 0;
      Y2 = (D2 + (T2 >>> 13) | 0) + (Bt >>> 26) | 0, Bt &= 67108863, B2 = Math.imul(ue2, ot), T2 = Math.imul(ue2, ct), T2 = T2 + Math.imul(ce2, ot) | 0, D2 = Math.imul(ce2, ct), B2 = B2 + Math.imul(Re2, ut) | 0, T2 = T2 + Math.imul(Re2, lt) | 0, T2 = T2 + Math.imul(J2, ut) | 0, D2 = D2 + Math.imul(J2, lt) | 0;
      var xt = (Y2 + B2 | 0) + ((T2 & 8191) << 13) | 0;
      Y2 = (D2 + (T2 >>> 13) | 0) + (xt >>> 26) | 0, xt &= 67108863, B2 = Math.imul(ue2, ut), T2 = Math.imul(ue2, lt), T2 = T2 + Math.imul(ce2, ut) | 0, D2 = Math.imul(ce2, lt);
      var Ut = (Y2 + B2 | 0) + ((T2 & 8191) << 13) | 0;
      return Y2 = (D2 + (T2 >>> 13) | 0) + (Ut >>> 26) | 0, Ut &= 67108863, x2[0] = kt, x2[1] = Rt, x2[2] = Je2, x2[3] = ze2, x2[4] = et, x2[5] = pt, x2[6] = mt, x2[7] = vt, x2[8] = ht, x2[9] = _t, x2[10] = Et, x2[11] = Pt, x2[12] = Nt, x2[13] = Mt, x2[14] = Ot, x2[15] = $t, x2[16] = Bt, x2[17] = xt, x2[18] = Ut, Y2 !== 0 && (x2[19] = Y2, k.length++), k;
    };
    Math.imul || (ie2 = X2);
    function Q2(C2, b, E2) {
      E2.negative = b.negative ^ C2.negative, E2.length = C2.length + b.length;
      for (var k = 0, O2 = 0, A2 = 0; A2 < E2.length - 1; A2++) {
        var x2 = O2;
        O2 = 0;
        for (var Y2 = k & 67108863, B2 = Math.min(A2, b.length - 1), T2 = Math.max(0, A2 - C2.length + 1); T2 <= B2; T2++) {
          var D2 = A2 - T2, te2 = C2.words[D2] | 0, me2 = b.words[T2] | 0, Ie2 = te2 * me2, $e2 = Ie2 & 67108863;
          x2 = x2 + (Ie2 / 67108864 | 0) | 0, $e2 = $e2 + Y2 | 0, Y2 = $e2 & 67108863, x2 = x2 + ($e2 >>> 26) | 0, O2 += x2 >>> 26, x2 &= 67108863;
        }
        E2.words[A2] = Y2, k = x2, x2 = O2;
      }
      return k !== 0 ? E2.words[A2] = k : E2.length--, E2.strip();
    }
    function ne2(C2, b, E2) {
      var k = new Z2();
      return k.mulp(C2, b, E2);
    }
    p2.prototype.mulTo = function(b, E2) {
      var k, O2 = this.length + b.length;
      return this.length === 10 && b.length === 10 ? k = ie2(this, b, E2) : O2 < 63 ? k = X2(this, b, E2) : O2 < 1024 ? k = Q2(this, b, E2) : k = ne2(this, b, E2), k;
    };
    function Z2(C2, b) {
      this.x = C2, this.y = b;
    }
    Z2.prototype.makeRBT = function(b) {
      for (var E2 = new Array(b), k = p2.prototype._countBits(b) - 1, O2 = 0; O2 < b; O2++)
        E2[O2] = this.revBin(O2, k, b);
      return E2;
    }, Z2.prototype.revBin = function(b, E2, k) {
      if (b === 0 || b === k - 1)
        return b;
      for (var O2 = 0, A2 = 0; A2 < E2; A2++)
        O2 |= (b & 1) << E2 - A2 - 1, b >>= 1;
      return O2;
    }, Z2.prototype.permute = function(b, E2, k, O2, A2, x2) {
      for (var Y2 = 0; Y2 < x2; Y2++)
        O2[Y2] = E2[b[Y2]], A2[Y2] = k[b[Y2]];
    }, Z2.prototype.transform = function(b, E2, k, O2, A2, x2) {
      this.permute(x2, b, E2, k, O2, A2);
      for (var Y2 = 1; Y2 < A2; Y2 <<= 1)
        for (var B2 = Y2 << 1, T2 = Math.cos(2 * Math.PI / B2), D2 = Math.sin(2 * Math.PI / B2), te2 = 0; te2 < A2; te2 += B2)
          for (var me2 = T2, Ie2 = D2, $e2 = 0; $e2 < Y2; $e2++) {
            var ye2 = k[te2 + $e2], he2 = O2[te2 + $e2], Me2 = k[te2 + $e2 + Y2], Ae2 = O2[te2 + $e2 + Y2], xe2 = me2 * Me2 - Ie2 * Ae2;
            Ae2 = me2 * Ae2 + Ie2 * Me2, Me2 = xe2, k[te2 + $e2] = ye2 + Me2, O2[te2 + $e2] = he2 + Ae2, k[te2 + $e2 + Y2] = ye2 - Me2, O2[te2 + $e2 + Y2] = he2 - Ae2, $e2 !== B2 && (xe2 = T2 * me2 - D2 * Ie2, Ie2 = T2 * Ie2 + D2 * me2, me2 = xe2);
          }
    }, Z2.prototype.guessLen13b = function(b, E2) {
      var k = Math.max(E2, b) | 1, O2 = k & 1, A2 = 0;
      for (k = k / 2 | 0; k; k = k >>> 1)
        A2++;
      return 1 << A2 + 1 + O2;
    }, Z2.prototype.conjugate = function(b, E2, k) {
      if (!(k <= 1))
        for (var O2 = 0; O2 < k / 2; O2++) {
          var A2 = b[O2];
          b[O2] = b[k - O2 - 1], b[k - O2 - 1] = A2, A2 = E2[O2], E2[O2] = -E2[k - O2 - 1], E2[k - O2 - 1] = -A2;
        }
    }, Z2.prototype.normalize13b = function(b, E2) {
      for (var k = 0, O2 = 0; O2 < E2 / 2; O2++) {
        var A2 = Math.round(b[2 * O2 + 1] / E2) * 8192 + Math.round(b[2 * O2] / E2) + k;
        b[O2] = A2 & 67108863, A2 < 67108864 ? k = 0 : k = A2 / 67108864 | 0;
      }
      return b;
    }, Z2.prototype.convert13b = function(b, E2, k, O2) {
      for (var A2 = 0, x2 = 0; x2 < E2; x2++)
        A2 = A2 + (b[x2] | 0), k[2 * x2] = A2 & 8191, A2 = A2 >>> 13, k[2 * x2 + 1] = A2 & 8191, A2 = A2 >>> 13;
      for (x2 = 2 * E2; x2 < O2; ++x2)
        k[x2] = 0;
      l2(A2 === 0), l2((A2 & -8192) === 0);
    }, Z2.prototype.stub = function(b) {
      for (var E2 = new Array(b), k = 0; k < b; k++)
        E2[k] = 0;
      return E2;
    }, Z2.prototype.mulp = function(b, E2, k) {
      var O2 = 2 * this.guessLen13b(b.length, E2.length), A2 = this.makeRBT(O2), x2 = this.stub(O2), Y2 = new Array(O2), B2 = new Array(O2), T2 = new Array(O2), D2 = new Array(O2), te2 = new Array(O2), me2 = new Array(O2), Ie2 = k.words;
      Ie2.length = O2, this.convert13b(b.words, b.length, Y2, O2), this.convert13b(E2.words, E2.length, D2, O2), this.transform(Y2, x2, B2, T2, O2, A2), this.transform(D2, x2, te2, me2, O2, A2);
      for (var $e2 = 0; $e2 < O2; $e2++) {
        var ye2 = B2[$e2] * te2[$e2] - T2[$e2] * me2[$e2];
        T2[$e2] = B2[$e2] * me2[$e2] + T2[$e2] * te2[$e2], B2[$e2] = ye2;
      }
      return this.conjugate(B2, T2, O2), this.transform(B2, T2, Ie2, x2, O2, A2), this.conjugate(Ie2, x2, O2), this.normalize13b(Ie2, O2), k.negative = b.negative ^ E2.negative, k.length = b.length + E2.length, k.strip();
    }, p2.prototype.mul = function(b) {
      var E2 = new p2(null);
      return E2.words = new Array(this.length + b.length), this.mulTo(b, E2);
    }, p2.prototype.mulf = function(b) {
      var E2 = new p2(null);
      return E2.words = new Array(this.length + b.length), ne2(this, b, E2);
    }, p2.prototype.imul = function(b) {
      return this.clone().mulTo(b, this);
    }, p2.prototype.imuln = function(b) {
      l2(typeof b == "number"), l2(b < 67108864);
      for (var E2 = 0, k = 0; k < this.length; k++) {
        var O2 = (this.words[k] | 0) * b, A2 = (O2 & 67108863) + (E2 & 67108863);
        E2 >>= 26, E2 += O2 / 67108864 | 0, E2 += A2 >>> 26, this.words[k] = A2 & 67108863;
      }
      return E2 !== 0 && (this.words[k] = E2, this.length++), this;
    }, p2.prototype.muln = function(b) {
      return this.clone().imuln(b);
    }, p2.prototype.sqr = function() {
      return this.mul(this);
    }, p2.prototype.isqr = function() {
      return this.imul(this.clone());
    }, p2.prototype.pow = function(b) {
      var E2 = ee2(b);
      if (E2.length === 0)
        return new p2(1);
      for (var k = this, O2 = 0; O2 < E2.length && E2[O2] === 0; O2++, k = k.sqr())
        ;
      if (++O2 < E2.length)
        for (var A2 = k.sqr(); O2 < E2.length; O2++, A2 = A2.sqr())
          E2[O2] !== 0 && (k = k.mul(A2));
      return k;
    }, p2.prototype.iushln = function(b) {
      l2(typeof b == "number" && b >= 0);
      var E2 = b % 26, k = (b - E2) / 26, O2 = 67108863 >>> 26 - E2 << 26 - E2, A2;
      if (E2 !== 0) {
        var x2 = 0;
        for (A2 = 0; A2 < this.length; A2++) {
          var Y2 = this.words[A2] & O2, B2 = (this.words[A2] | 0) - Y2 << E2;
          this.words[A2] = B2 | x2, x2 = Y2 >>> 26 - E2;
        }
        x2 && (this.words[A2] = x2, this.length++);
      }
      if (k !== 0) {
        for (A2 = this.length - 1; A2 >= 0; A2--)
          this.words[A2 + k] = this.words[A2];
        for (A2 = 0; A2 < k; A2++)
          this.words[A2] = 0;
        this.length += k;
      }
      return this.strip();
    }, p2.prototype.ishln = function(b) {
      return l2(this.negative === 0), this.iushln(b);
    }, p2.prototype.iushrn = function(b, E2, k) {
      l2(typeof b == "number" && b >= 0);
      var O2;
      E2 ? O2 = (E2 - E2 % 26) / 26 : O2 = 0;
      var A2 = b % 26, x2 = Math.min((b - A2) / 26, this.length), Y2 = 67108863 ^ 67108863 >>> A2 << A2, B2 = k;
      if (O2 -= x2, O2 = Math.max(0, O2), B2) {
        for (var T2 = 0; T2 < x2; T2++)
          B2.words[T2] = this.words[T2];
        B2.length = x2;
      }
      if (x2 !== 0)
        if (this.length > x2)
          for (this.length -= x2, T2 = 0; T2 < this.length; T2++)
            this.words[T2] = this.words[T2 + x2];
        else
          this.words[0] = 0, this.length = 1;
      var D2 = 0;
      for (T2 = this.length - 1; T2 >= 0 && (D2 !== 0 || T2 >= O2); T2--) {
        var te2 = this.words[T2] | 0;
        this.words[T2] = D2 << 26 - A2 | te2 >>> A2, D2 = te2 & Y2;
      }
      return B2 && D2 !== 0 && (B2.words[B2.length++] = D2), this.length === 0 && (this.words[0] = 0, this.length = 1), this.strip();
    }, p2.prototype.ishrn = function(b, E2, k) {
      return l2(this.negative === 0), this.iushrn(b, E2, k);
    }, p2.prototype.shln = function(b) {
      return this.clone().ishln(b);
    }, p2.prototype.ushln = function(b) {
      return this.clone().iushln(b);
    }, p2.prototype.shrn = function(b) {
      return this.clone().ishrn(b);
    }, p2.prototype.ushrn = function(b) {
      return this.clone().iushrn(b);
    }, p2.prototype.testn = function(b) {
      l2(typeof b == "number" && b >= 0);
      var E2 = b % 26, k = (b - E2) / 26, O2 = 1 << E2;
      if (this.length <= k)
        return false;
      var A2 = this.words[k];
      return !!(A2 & O2);
    }, p2.prototype.imaskn = function(b) {
      l2(typeof b == "number" && b >= 0);
      var E2 = b % 26, k = (b - E2) / 26;
      if (l2(this.negative === 0, "imaskn works only with positive numbers"), this.length <= k)
        return this;
      if (E2 !== 0 && k++, this.length = Math.min(k, this.length), E2 !== 0) {
        var O2 = 67108863 ^ 67108863 >>> E2 << E2;
        this.words[this.length - 1] &= O2;
      }
      return this.strip();
    }, p2.prototype.maskn = function(b) {
      return this.clone().imaskn(b);
    }, p2.prototype.iaddn = function(b) {
      return l2(typeof b == "number"), l2(b < 67108864), b < 0 ? this.isubn(-b) : this.negative !== 0 ? this.length === 1 && (this.words[0] | 0) < b ? (this.words[0] = b - (this.words[0] | 0), this.negative = 0, this) : (this.negative = 0, this.isubn(b), this.negative = 1, this) : this._iaddn(b);
    }, p2.prototype._iaddn = function(b) {
      this.words[0] += b;
      for (var E2 = 0; E2 < this.length && this.words[E2] >= 67108864; E2++)
        this.words[E2] -= 67108864, E2 === this.length - 1 ? this.words[E2 + 1] = 1 : this.words[E2 + 1]++;
      return this.length = Math.max(this.length, E2 + 1), this;
    }, p2.prototype.isubn = function(b) {
      if (l2(typeof b == "number"), l2(b < 67108864), b < 0)
        return this.iaddn(-b);
      if (this.negative !== 0)
        return this.negative = 0, this.iaddn(b), this.negative = 1, this;
      if (this.words[0] -= b, this.length === 1 && this.words[0] < 0)
        this.words[0] = -this.words[0], this.negative = 1;
      else
        for (var E2 = 0; E2 < this.length && this.words[E2] < 0; E2++)
          this.words[E2] += 67108864, this.words[E2 + 1] -= 1;
      return this.strip();
    }, p2.prototype.addn = function(b) {
      return this.clone().iaddn(b);
    }, p2.prototype.subn = function(b) {
      return this.clone().isubn(b);
    }, p2.prototype.iabs = function() {
      return this.negative = 0, this;
    }, p2.prototype.abs = function() {
      return this.clone().iabs();
    }, p2.prototype._ishlnsubmul = function(b, E2, k) {
      var O2 = b.length + k, A2;
      this._expand(O2);
      var x2, Y2 = 0;
      for (A2 = 0; A2 < b.length; A2++) {
        x2 = (this.words[A2 + k] | 0) + Y2;
        var B2 = (b.words[A2] | 0) * E2;
        x2 -= B2 & 67108863, Y2 = (x2 >> 26) - (B2 / 67108864 | 0), this.words[A2 + k] = x2 & 67108863;
      }
      for (; A2 < this.length - k; A2++)
        x2 = (this.words[A2 + k] | 0) + Y2, Y2 = x2 >> 26, this.words[A2 + k] = x2 & 67108863;
      if (Y2 === 0)
        return this.strip();
      for (l2(Y2 === -1), Y2 = 0, A2 = 0; A2 < this.length; A2++)
        x2 = -(this.words[A2] | 0) + Y2, Y2 = x2 >> 26, this.words[A2] = x2 & 67108863;
      return this.negative = 1, this.strip();
    }, p2.prototype._wordDiv = function(b, E2) {
      var k = this.length - b.length, O2 = this.clone(), A2 = b, x2 = A2.words[A2.length - 1] | 0, Y2 = this._countBits(x2);
      k = 26 - Y2, k !== 0 && (A2 = A2.ushln(k), O2.iushln(k), x2 = A2.words[A2.length - 1] | 0);
      var B2 = O2.length - A2.length, T2;
      if (E2 !== "mod") {
        T2 = new p2(null), T2.length = B2 + 1, T2.words = new Array(T2.length);
        for (var D2 = 0; D2 < T2.length; D2++)
          T2.words[D2] = 0;
      }
      var te2 = O2.clone()._ishlnsubmul(A2, 1, B2);
      te2.negative === 0 && (O2 = te2, T2 && (T2.words[B2] = 1));
      for (var me2 = B2 - 1; me2 >= 0; me2--) {
        var Ie2 = (O2.words[A2.length + me2] | 0) * 67108864 + (O2.words[A2.length + me2 - 1] | 0);
        for (Ie2 = Math.min(Ie2 / x2 | 0, 67108863), O2._ishlnsubmul(A2, Ie2, me2); O2.negative !== 0; )
          Ie2--, O2.negative = 0, O2._ishlnsubmul(A2, 1, me2), O2.isZero() || (O2.negative ^= 1);
        T2 && (T2.words[me2] = Ie2);
      }
      return T2 && T2.strip(), O2.strip(), E2 !== "div" && k !== 0 && O2.iushrn(k), { div: T2 || null, mod: O2 };
    }, p2.prototype.divmod = function(b, E2, k) {
      if (l2(!b.isZero()), this.isZero())
        return { div: new p2(0), mod: new p2(0) };
      var O2, A2, x2;
      return this.negative !== 0 && b.negative === 0 ? (x2 = this.neg().divmod(b, E2), E2 !== "mod" && (O2 = x2.div.neg()), E2 !== "div" && (A2 = x2.mod.neg(), k && A2.negative !== 0 && A2.iadd(b)), { div: O2, mod: A2 }) : this.negative === 0 && b.negative !== 0 ? (x2 = this.divmod(b.neg(), E2), E2 !== "mod" && (O2 = x2.div.neg()), { div: O2, mod: x2.mod }) : this.negative & b.negative ? (x2 = this.neg().divmod(b.neg(), E2), E2 !== "div" && (A2 = x2.mod.neg(), k && A2.negative !== 0 && A2.isub(b)), { div: x2.div, mod: A2 }) : b.length > this.length || this.cmp(b) < 0 ? { div: new p2(0), mod: this } : b.length === 1 ? E2 === "div" ? { div: this.divn(b.words[0]), mod: null } : E2 === "mod" ? { div: null, mod: new p2(this.modn(b.words[0])) } : { div: this.divn(b.words[0]), mod: new p2(this.modn(b.words[0])) } : this._wordDiv(b, E2);
    }, p2.prototype.div = function(b) {
      return this.divmod(b, "div", false).div;
    }, p2.prototype.mod = function(b) {
      return this.divmod(b, "mod", false).mod;
    }, p2.prototype.umod = function(b) {
      return this.divmod(b, "mod", true).mod;
    }, p2.prototype.divRound = function(b) {
      var E2 = this.divmod(b);
      if (E2.mod.isZero())
        return E2.div;
      var k = E2.div.negative !== 0 ? E2.mod.isub(b) : E2.mod, O2 = b.ushrn(1), A2 = b.andln(1), x2 = k.cmp(O2);
      return x2 < 0 || A2 === 1 && x2 === 0 ? E2.div : E2.div.negative !== 0 ? E2.div.isubn(1) : E2.div.iaddn(1);
    }, p2.prototype.modn = function(b) {
      l2(b <= 67108863);
      for (var E2 = (1 << 26) % b, k = 0, O2 = this.length - 1; O2 >= 0; O2--)
        k = (E2 * k + (this.words[O2] | 0)) % b;
      return k;
    }, p2.prototype.idivn = function(b) {
      l2(b <= 67108863);
      for (var E2 = 0, k = this.length - 1; k >= 0; k--) {
        var O2 = (this.words[k] | 0) + E2 * 67108864;
        this.words[k] = O2 / b | 0, E2 = O2 % b;
      }
      return this.strip();
    }, p2.prototype.divn = function(b) {
      return this.clone().idivn(b);
    }, p2.prototype.egcd = function(b) {
      l2(b.negative === 0), l2(!b.isZero());
      var E2 = this, k = b.clone();
      E2.negative !== 0 ? E2 = E2.umod(b) : E2 = E2.clone();
      for (var O2 = new p2(1), A2 = new p2(0), x2 = new p2(0), Y2 = new p2(1), B2 = 0; E2.isEven() && k.isEven(); )
        E2.iushrn(1), k.iushrn(1), ++B2;
      for (var T2 = k.clone(), D2 = E2.clone(); !E2.isZero(); ) {
        for (var te2 = 0, me2 = 1; !(E2.words[0] & me2) && te2 < 26; ++te2, me2 <<= 1)
          ;
        if (te2 > 0)
          for (E2.iushrn(te2); te2-- > 0; )
            (O2.isOdd() || A2.isOdd()) && (O2.iadd(T2), A2.isub(D2)), O2.iushrn(1), A2.iushrn(1);
        for (var Ie2 = 0, $e2 = 1; !(k.words[0] & $e2) && Ie2 < 26; ++Ie2, $e2 <<= 1)
          ;
        if (Ie2 > 0)
          for (k.iushrn(Ie2); Ie2-- > 0; )
            (x2.isOdd() || Y2.isOdd()) && (x2.iadd(T2), Y2.isub(D2)), x2.iushrn(1), Y2.iushrn(1);
        E2.cmp(k) >= 0 ? (E2.isub(k), O2.isub(x2), A2.isub(Y2)) : (k.isub(E2), x2.isub(O2), Y2.isub(A2));
      }
      return { a: x2, b: Y2, gcd: k.iushln(B2) };
    }, p2.prototype._invmp = function(b) {
      l2(b.negative === 0), l2(!b.isZero());
      var E2 = this, k = b.clone();
      E2.negative !== 0 ? E2 = E2.umod(b) : E2 = E2.clone();
      for (var O2 = new p2(1), A2 = new p2(0), x2 = k.clone(); E2.cmpn(1) > 0 && k.cmpn(1) > 0; ) {
        for (var Y2 = 0, B2 = 1; !(E2.words[0] & B2) && Y2 < 26; ++Y2, B2 <<= 1)
          ;
        if (Y2 > 0)
          for (E2.iushrn(Y2); Y2-- > 0; )
            O2.isOdd() && O2.iadd(x2), O2.iushrn(1);
        for (var T2 = 0, D2 = 1; !(k.words[0] & D2) && T2 < 26; ++T2, D2 <<= 1)
          ;
        if (T2 > 0)
          for (k.iushrn(T2); T2-- > 0; )
            A2.isOdd() && A2.iadd(x2), A2.iushrn(1);
        E2.cmp(k) >= 0 ? (E2.isub(k), O2.isub(A2)) : (k.isub(E2), A2.isub(O2));
      }
      var te2;
      return E2.cmpn(1) === 0 ? te2 = O2 : te2 = A2, te2.cmpn(0) < 0 && te2.iadd(b), te2;
    }, p2.prototype.gcd = function(b) {
      if (this.isZero())
        return b.abs();
      if (b.isZero())
        return this.abs();
      var E2 = this.clone(), k = b.clone();
      E2.negative = 0, k.negative = 0;
      for (var O2 = 0; E2.isEven() && k.isEven(); O2++)
        E2.iushrn(1), k.iushrn(1);
      do {
        for (; E2.isEven(); )
          E2.iushrn(1);
        for (; k.isEven(); )
          k.iushrn(1);
        var A2 = E2.cmp(k);
        if (A2 < 0) {
          var x2 = E2;
          E2 = k, k = x2;
        } else if (A2 === 0 || k.cmpn(1) === 0)
          break;
        E2.isub(k);
      } while (true);
      return k.iushln(O2);
    }, p2.prototype.invm = function(b) {
      return this.egcd(b).a.umod(b);
    }, p2.prototype.isEven = function() {
      return (this.words[0] & 1) === 0;
    }, p2.prototype.isOdd = function() {
      return (this.words[0] & 1) === 1;
    }, p2.prototype.andln = function(b) {
      return this.words[0] & b;
    }, p2.prototype.bincn = function(b) {
      l2(typeof b == "number");
      var E2 = b % 26, k = (b - E2) / 26, O2 = 1 << E2;
      if (this.length <= k)
        return this._expand(k + 1), this.words[k] |= O2, this;
      for (var A2 = O2, x2 = k; A2 !== 0 && x2 < this.length; x2++) {
        var Y2 = this.words[x2] | 0;
        Y2 += A2, A2 = Y2 >>> 26, Y2 &= 67108863, this.words[x2] = Y2;
      }
      return A2 !== 0 && (this.words[x2] = A2, this.length++), this;
    }, p2.prototype.isZero = function() {
      return this.length === 1 && this.words[0] === 0;
    }, p2.prototype.cmpn = function(b) {
      var E2 = b < 0;
      if (this.negative !== 0 && !E2)
        return -1;
      if (this.negative === 0 && E2)
        return 1;
      this.strip();
      var k;
      if (this.length > 1)
        k = 1;
      else {
        E2 && (b = -b), l2(b <= 67108863, "Number is too big");
        var O2 = this.words[0] | 0;
        k = O2 === b ? 0 : O2 < b ? -1 : 1;
      }
      return this.negative !== 0 ? -k | 0 : k;
    }, p2.prototype.cmp = function(b) {
      if (this.negative !== 0 && b.negative === 0)
        return -1;
      if (this.negative === 0 && b.negative !== 0)
        return 1;
      var E2 = this.ucmp(b);
      return this.negative !== 0 ? -E2 | 0 : E2;
    }, p2.prototype.ucmp = function(b) {
      if (this.length > b.length)
        return 1;
      if (this.length < b.length)
        return -1;
      for (var E2 = 0, k = this.length - 1; k >= 0; k--) {
        var O2 = this.words[k] | 0, A2 = b.words[k] | 0;
        if (O2 !== A2) {
          O2 < A2 ? E2 = -1 : O2 > A2 && (E2 = 1);
          break;
        }
      }
      return E2;
    }, p2.prototype.gtn = function(b) {
      return this.cmpn(b) === 1;
    }, p2.prototype.gt = function(b) {
      return this.cmp(b) === 1;
    }, p2.prototype.gten = function(b) {
      return this.cmpn(b) >= 0;
    }, p2.prototype.gte = function(b) {
      return this.cmp(b) >= 0;
    }, p2.prototype.ltn = function(b) {
      return this.cmpn(b) === -1;
    }, p2.prototype.lt = function(b) {
      return this.cmp(b) === -1;
    }, p2.prototype.lten = function(b) {
      return this.cmpn(b) <= 0;
    }, p2.prototype.lte = function(b) {
      return this.cmp(b) <= 0;
    }, p2.prototype.eqn = function(b) {
      return this.cmpn(b) === 0;
    }, p2.prototype.eq = function(b) {
      return this.cmp(b) === 0;
    }, p2.red = function(b) {
      return new q2(b);
    }, p2.prototype.toRed = function(b) {
      return l2(!this.red, "Already a number in reduction context"), l2(this.negative === 0, "red works only with positives"), b.convertTo(this)._forceRed(b);
    }, p2.prototype.fromRed = function() {
      return l2(this.red, "fromRed works only with numbers in reduction context"), this.red.convertFrom(this);
    }, p2.prototype._forceRed = function(b) {
      return this.red = b, this;
    }, p2.prototype.forceRed = function(b) {
      return l2(!this.red, "Already a number in reduction context"), this._forceRed(b);
    }, p2.prototype.redAdd = function(b) {
      return l2(this.red, "redAdd works only with red numbers"), this.red.add(this, b);
    }, p2.prototype.redIAdd = function(b) {
      return l2(this.red, "redIAdd works only with red numbers"), this.red.iadd(this, b);
    }, p2.prototype.redSub = function(b) {
      return l2(this.red, "redSub works only with red numbers"), this.red.sub(this, b);
    }, p2.prototype.redISub = function(b) {
      return l2(this.red, "redISub works only with red numbers"), this.red.isub(this, b);
    }, p2.prototype.redShl = function(b) {
      return l2(this.red, "redShl works only with red numbers"), this.red.shl(this, b);
    }, p2.prototype.redMul = function(b) {
      return l2(this.red, "redMul works only with red numbers"), this.red._verify2(this, b), this.red.mul(this, b);
    }, p2.prototype.redIMul = function(b) {
      return l2(this.red, "redMul works only with red numbers"), this.red._verify2(this, b), this.red.imul(this, b);
    }, p2.prototype.redSqr = function() {
      return l2(this.red, "redSqr works only with red numbers"), this.red._verify1(this), this.red.sqr(this);
    }, p2.prototype.redISqr = function() {
      return l2(this.red, "redISqr works only with red numbers"), this.red._verify1(this), this.red.isqr(this);
    }, p2.prototype.redSqrt = function() {
      return l2(this.red, "redSqrt works only with red numbers"), this.red._verify1(this), this.red.sqrt(this);
    }, p2.prototype.redInvm = function() {
      return l2(this.red, "redInvm works only with red numbers"), this.red._verify1(this), this.red.invm(this);
    }, p2.prototype.redNeg = function() {
      return l2(this.red, "redNeg works only with red numbers"), this.red._verify1(this), this.red.neg(this);
    }, p2.prototype.redPow = function(b) {
      return l2(this.red && !b.red, "redPow(normalNum)"), this.red._verify1(this), this.red.pow(this, b);
    };
    var de2 = { k256: null, p224: null, p192: null, p25519: null };
    function pe2(C2, b) {
      this.name = C2, this.p = new p2(b, 16), this.n = this.p.bitLength(), this.k = new p2(1).iushln(this.n).isub(this.p), this.tmp = this._tmp();
    }
    pe2.prototype._tmp = function() {
      var b = new p2(null);
      return b.words = new Array(Math.ceil(this.n / 13)), b;
    }, pe2.prototype.ireduce = function(b) {
      var E2 = b, k;
      do
        this.split(E2, this.tmp), E2 = this.imulK(E2), E2 = E2.iadd(this.tmp), k = E2.bitLength();
      while (k > this.n);
      var O2 = k < this.n ? -1 : E2.ucmp(this.p);
      return O2 === 0 ? (E2.words[0] = 0, E2.length = 1) : O2 > 0 ? E2.isub(this.p) : E2.strip !== void 0 ? E2.strip() : E2._strip(), E2;
    }, pe2.prototype.split = function(b, E2) {
      b.iushrn(this.n, 0, E2);
    }, pe2.prototype.imulK = function(b) {
      return b.imul(this.k);
    };
    function le2() {
      pe2.call(this, "k256", "ffffffff ffffffff ffffffff ffffffff ffffffff ffffffff fffffffe fffffc2f");
    }
    v2(le2, pe2), le2.prototype.split = function(b, E2) {
      for (var k = 4194303, O2 = Math.min(b.length, 9), A2 = 0; A2 < O2; A2++)
        E2.words[A2] = b.words[A2];
      if (E2.length = O2, b.length <= 9) {
        b.words[0] = 0, b.length = 1;
        return;
      }
      var x2 = b.words[9];
      for (E2.words[E2.length++] = x2 & k, A2 = 10; A2 < b.length; A2++) {
        var Y2 = b.words[A2] | 0;
        b.words[A2 - 10] = (Y2 & k) << 4 | x2 >>> 22, x2 = Y2;
      }
      x2 >>>= 22, b.words[A2 - 10] = x2, x2 === 0 && b.length > 10 ? b.length -= 10 : b.length -= 9;
    }, le2.prototype.imulK = function(b) {
      b.words[b.length] = 0, b.words[b.length + 1] = 0, b.length += 2;
      for (var E2 = 0, k = 0; k < b.length; k++) {
        var O2 = b.words[k] | 0;
        E2 += O2 * 977, b.words[k] = E2 & 67108863, E2 = O2 * 64 + (E2 / 67108864 | 0);
      }
      return b.words[b.length - 1] === 0 && (b.length--, b.words[b.length - 1] === 0 && b.length--), b;
    };
    function be2() {
      pe2.call(this, "p224", "ffffffff ffffffff ffffffff ffffffff 00000000 00000000 00000001");
    }
    v2(be2, pe2);
    function ke2() {
      pe2.call(this, "p192", "ffffffff ffffffff ffffffff fffffffe ffffffff ffffffff");
    }
    v2(ke2, pe2);
    function Te2() {
      pe2.call(this, "25519", "7fffffffffffffff ffffffffffffffff ffffffffffffffff ffffffffffffffed");
    }
    v2(Te2, pe2), Te2.prototype.imulK = function(b) {
      for (var E2 = 0, k = 0; k < b.length; k++) {
        var O2 = (b.words[k] | 0) * 19 + E2, A2 = O2 & 67108863;
        O2 >>>= 26, b.words[k] = A2, E2 = O2;
      }
      return E2 !== 0 && (b.words[b.length++] = E2), b;
    }, p2._prime = function(b) {
      if (de2[b])
        return de2[b];
      var E2;
      if (b === "k256")
        E2 = new le2();
      else if (b === "p224")
        E2 = new be2();
      else if (b === "p192")
        E2 = new ke2();
      else if (b === "p25519")
        E2 = new Te2();
      else
        throw new Error("Unknown prime " + b);
      return de2[b] = E2, E2;
    };
    function q2(C2) {
      if (typeof C2 == "string") {
        var b = p2._prime(C2);
        this.m = b.p, this.prime = b;
      } else
        l2(C2.gtn(1), "modulus must be greater than 1"), this.m = C2, this.prime = null;
    }
    q2.prototype._verify1 = function(b) {
      l2(b.negative === 0, "red works only with positives"), l2(b.red, "red works only with red numbers");
    }, q2.prototype._verify2 = function(b, E2) {
      l2((b.negative | E2.negative) === 0, "red works only with positives"), l2(b.red && b.red === E2.red, "red works only with red numbers");
    }, q2.prototype.imod = function(b) {
      return this.prime ? this.prime.ireduce(b)._forceRed(this) : b.umod(this.m)._forceRed(this);
    }, q2.prototype.neg = function(b) {
      return b.isZero() ? b.clone() : this.m.sub(b)._forceRed(this);
    }, q2.prototype.add = function(b, E2) {
      this._verify2(b, E2);
      var k = b.add(E2);
      return k.cmp(this.m) >= 0 && k.isub(this.m), k._forceRed(this);
    }, q2.prototype.iadd = function(b, E2) {
      this._verify2(b, E2);
      var k = b.iadd(E2);
      return k.cmp(this.m) >= 0 && k.isub(this.m), k;
    }, q2.prototype.sub = function(b, E2) {
      this._verify2(b, E2);
      var k = b.sub(E2);
      return k.cmpn(0) < 0 && k.iadd(this.m), k._forceRed(this);
    }, q2.prototype.isub = function(b, E2) {
      this._verify2(b, E2);
      var k = b.isub(E2);
      return k.cmpn(0) < 0 && k.iadd(this.m), k;
    }, q2.prototype.shl = function(b, E2) {
      return this._verify1(b), this.imod(b.ushln(E2));
    }, q2.prototype.imul = function(b, E2) {
      return this._verify2(b, E2), this.imod(b.imul(E2));
    }, q2.prototype.mul = function(b, E2) {
      return this._verify2(b, E2), this.imod(b.mul(E2));
    }, q2.prototype.isqr = function(b) {
      return this.imul(b, b.clone());
    }, q2.prototype.sqr = function(b) {
      return this.mul(b, b);
    }, q2.prototype.sqrt = function(b) {
      if (b.isZero())
        return b.clone();
      var E2 = this.m.andln(3);
      if (l2(E2 % 2 === 1), E2 === 3) {
        var k = this.m.add(new p2(1)).iushrn(2);
        return this.pow(b, k);
      }
      for (var O2 = this.m.subn(1), A2 = 0; !O2.isZero() && O2.andln(1) === 0; )
        A2++, O2.iushrn(1);
      l2(!O2.isZero());
      var x2 = new p2(1).toRed(this), Y2 = x2.redNeg(), B2 = this.m.subn(1).iushrn(1), T2 = this.m.bitLength();
      for (T2 = new p2(2 * T2 * T2).toRed(this); this.pow(T2, B2).cmp(Y2) !== 0; )
        T2.redIAdd(Y2);
      for (var D2 = this.pow(T2, O2), te2 = this.pow(b, O2.addn(1).iushrn(1)), me2 = this.pow(b, O2), Ie2 = A2; me2.cmp(x2) !== 0; ) {
        for (var $e2 = me2, ye2 = 0; $e2.cmp(x2) !== 0; ye2++)
          $e2 = $e2.redSqr();
        l2(ye2 < Ie2);
        var he2 = this.pow(D2, new p2(1).iushln(Ie2 - ye2 - 1));
        te2 = te2.redMul(he2), D2 = he2.redSqr(), me2 = me2.redMul(D2), Ie2 = ye2;
      }
      return te2;
    }, q2.prototype.invm = function(b) {
      var E2 = b._invmp(this.m);
      return E2.negative !== 0 ? (E2.negative = 0, this.imod(E2).redNeg()) : this.imod(E2);
    }, q2.prototype.pow = function(b, E2) {
      if (E2.isZero())
        return new p2(1).toRed(this);
      if (E2.cmpn(1) === 0)
        return b.clone();
      var k = 4, O2 = new Array(1 << k);
      O2[0] = new p2(1).toRed(this), O2[1] = b;
      for (var A2 = 2; A2 < O2.length; A2++)
        O2[A2] = this.mul(O2[A2 - 1], b);
      var x2 = O2[0], Y2 = 0, B2 = 0, T2 = E2.bitLength() % 26;
      for (T2 === 0 && (T2 = 26), A2 = E2.length - 1; A2 >= 0; A2--) {
        for (var D2 = E2.words[A2], te2 = T2 - 1; te2 >= 0; te2--) {
          var me2 = D2 >> te2 & 1;
          if (x2 !== O2[0] && (x2 = this.sqr(x2)), me2 === 0 && Y2 === 0) {
            B2 = 0;
            continue;
          }
          Y2 <<= 1, Y2 |= me2, B2++, !(B2 !== k && (A2 !== 0 || te2 !== 0)) && (x2 = this.mul(x2, O2[Y2]), B2 = 0, Y2 = 0);
        }
        T2 = 26;
      }
      return x2;
    }, q2.prototype.convertTo = function(b) {
      var E2 = b.umod(this.m);
      return E2 === b ? E2.clone() : E2;
    }, q2.prototype.convertFrom = function(b) {
      var E2 = b.clone();
      return E2.red = null, E2;
    }, p2.mont = function(b) {
      return new z2(b);
    };
    function z2(C2) {
      q2.call(this, C2), this.shift = this.m.bitLength(), this.shift % 26 !== 0 && (this.shift += 26 - this.shift % 26), this.r = new p2(1).iushln(this.shift), this.r2 = this.imod(this.r.sqr()), this.rinv = this.r._invmp(this.m), this.minv = this.rinv.mul(this.r).isubn(1).div(this.m), this.minv = this.minv.umod(this.r), this.minv = this.r.sub(this.minv);
    }
    v2(z2, q2), z2.prototype.convertTo = function(b) {
      return this.imod(b.ushln(this.shift));
    }, z2.prototype.convertFrom = function(b) {
      var E2 = this.imod(b.mul(this.rinv));
      return E2.red = null, E2;
    }, z2.prototype.imul = function(b, E2) {
      if (b.isZero() || E2.isZero())
        return b.words[0] = 0, b.length = 1, b;
      var k = b.imul(E2), O2 = k.maskn(this.shift).mul(this.minv).imaskn(this.shift).mul(this.m), A2 = k.isub(O2).iushrn(this.shift), x2 = A2;
      return A2.cmp(this.m) >= 0 ? x2 = A2.isub(this.m) : A2.cmpn(0) < 0 && (x2 = A2.iadd(this.m)), x2._forceRed(this);
    }, z2.prototype.mul = function(b, E2) {
      if (b.isZero() || E2.isZero())
        return new p2(0)._forceRed(this);
      var k = b.mul(E2), O2 = k.maskn(this.shift).mul(this.minv).imaskn(this.shift).mul(this.m), A2 = k.isub(O2).iushrn(this.shift), x2 = A2;
      return A2.cmp(this.m) >= 0 ? x2 = A2.isub(this.m) : A2.cmpn(0) < 0 && (x2 = A2.iadd(this.m)), x2._forceRed(this);
    }, z2.prototype.invm = function(b) {
      var E2 = this.imod(b._invmp(this.m).mul(this.r2));
      return E2._forceRed(this);
    };
  })(a420, commonjsGlobal$1);
})(bn$1);
var bnExports$1 = bn$1.exports, browser$3, hasRequiredBrowser;
function requireBrowser() {
  if (hasRequiredBrowser)
    return browser$3;
  hasRequiredBrowser = 1;
  var a420 = requireElliptic(), u2 = bnExports$1;
  browser$3 = function(_) {
    return new l2(_);
  };
  var c = { secp256k1: { name: "secp256k1", byteLength: 32 }, secp224r1: { name: "p224", byteLength: 28 }, prime256v1: { name: "p256", byteLength: 32 }, prime192v1: { name: "p192", byteLength: 24 }, ed25519: { name: "ed25519", byteLength: 32 }, secp384r1: { name: "p384", byteLength: 48 }, secp521r1: { name: "p521", byteLength: 66 } };
  c.p224 = c.secp224r1, c.p256 = c.secp256r1 = c.prime256v1, c.p192 = c.secp192r1 = c.prime192v1, c.p384 = c.secp384r1, c.p521 = c.secp521r1;
  function l2(p2) {
    this.curveType = c[p2], this.curveType || (this.curveType = { name: p2 }), this.curve = new a420.ec(this.curveType.name), this.keys = void 0;
  }
  l2.prototype.generateKeys = function(p2, _) {
    return this.keys = this.curve.genKeyPair(), this.getPublicKey(p2, _);
  }, l2.prototype.computeSecret = function(p2, _, I2) {
    _ = _ || "utf8", Buffer$M.isBuffer(p2) || (p2 = new Buffer$M(p2, _));
    var P2 = this.curve.keyFromPublic(p2).getPublic(), $ = P2.mul(this.keys.getPrivate()).getX();
    return v2($, I2, this.curveType.byteLength);
  }, l2.prototype.getPublicKey = function(p2, _) {
    var I2 = this.keys.getPublic(_ === "compressed", true);
    return _ === "hybrid" && (I2[I2.length - 1] % 2 ? I2[0] = 7 : I2[0] = 6), v2(I2, p2);
  }, l2.prototype.getPrivateKey = function(p2) {
    return v2(this.keys.getPrivate(), p2);
  }, l2.prototype.setPublicKey = function(p2, _) {
    return _ = _ || "utf8", Buffer$M.isBuffer(p2) || (p2 = new Buffer$M(p2, _)), this.keys._importPublic(p2), this;
  }, l2.prototype.setPrivateKey = function(p2, _) {
    _ = _ || "utf8", Buffer$M.isBuffer(p2) || (p2 = new Buffer$M(p2, _));
    var I2 = new u2(p2);
    return I2 = I2.toString(16), this.keys = this.curve.genKeyPair(), this.keys._importPrivate(I2), this;
  };
  function v2(p2, _, I2) {
    Array.isArray(p2) || (p2 = p2.toArray());
    var P2 = new Buffer$M(p2);
    if (I2 && P2.length < I2) {
      var $ = new Buffer$M(I2 - P2.length);
      $.fill(0), P2 = Buffer$M.concat([$, P2]);
    }
    return _ ? P2.toString(_) : P2;
  }
  return browser$3;
}
var browser$2 = {}, createHash$2 = browser$a, Buffer$9 = safeBufferExports$3.Buffer, mgf$2 = function(a420, u2) {
  for (var c = Buffer$9.alloc(0), l2 = 0, v2; c.length < u2; )
    v2 = i2ops(l2++), c = Buffer$9.concat([c, createHash$2("sha1").update(a420).update(v2).digest()]);
  return c.slice(0, u2);
};
function i2ops(a420) {
  var u2 = Buffer$9.allocUnsafe(4);
  return u2.writeUInt32BE(a420, 0), u2;
}
var xor$2 = function a370(u2, c) {
  for (var l2 = u2.length, v2 = -1; ++v2 < l2; )
    u2[v2] ^= c[v2];
  return u2;
}, bn = { exports: {} };
(function(a420) {
  (function(u2, c) {
    function l2(C2, b) {
      if (!C2)
        throw new Error(b || "Assertion failed");
    }
    function v2(C2, b) {
      C2.super_ = b;
      var E2 = function() {
      };
      E2.prototype = b.prototype, C2.prototype = new E2(), C2.prototype.constructor = C2;
    }
    function p2(C2, b, E2) {
      if (p2.isBN(C2))
        return C2;
      this.negative = 0, this.words = null, this.length = 0, this.red = null, C2 !== null && ((b === "le" || b === "be") && (E2 = b, b = 10), this._init(C2 || 0, b || 10, E2 || "be"));
    }
    typeof u2 == "object" ? u2.exports = p2 : c.BN = p2, p2.BN = p2, p2.wordSize = 26;
    var _;
    try {
      typeof window < "u" && typeof window.Buffer < "u" ? _ = window.Buffer : _ = require$$0$2.Buffer;
    } catch {
    }
    p2.isBN = function(b) {
      return b instanceof p2 ? true : b !== null && typeof b == "object" && b.constructor.wordSize === p2.wordSize && Array.isArray(b.words);
    }, p2.max = function(b, E2) {
      return b.cmp(E2) > 0 ? b : E2;
    }, p2.min = function(b, E2) {
      return b.cmp(E2) < 0 ? b : E2;
    }, p2.prototype._init = function(b, E2, k) {
      if (typeof b == "number")
        return this._initNumber(b, E2, k);
      if (typeof b == "object")
        return this._initArray(b, E2, k);
      E2 === "hex" && (E2 = 16), l2(E2 === (E2 | 0) && E2 >= 2 && E2 <= 36), b = b.toString().replace(/\s+/g, "");
      var O2 = 0;
      b[0] === "-" && (O2++, this.negative = 1), O2 < b.length && (E2 === 16 ? this._parseHex(b, O2, k) : (this._parseBase(b, E2, O2), k === "le" && this._initArray(this.toArray(), E2, k)));
    }, p2.prototype._initNumber = function(b, E2, k) {
      b < 0 && (this.negative = 1, b = -b), b < 67108864 ? (this.words = [b & 67108863], this.length = 1) : b < 4503599627370496 ? (this.words = [b & 67108863, b / 67108864 & 67108863], this.length = 2) : (l2(b < 9007199254740992), this.words = [b & 67108863, b / 67108864 & 67108863, 1], this.length = 3), k === "le" && this._initArray(this.toArray(), E2, k);
    }, p2.prototype._initArray = function(b, E2, k) {
      if (l2(typeof b.length == "number"), b.length <= 0)
        return this.words = [0], this.length = 1, this;
      this.length = Math.ceil(b.length / 3), this.words = new Array(this.length);
      for (var O2 = 0; O2 < this.length; O2++)
        this.words[O2] = 0;
      var A2, x2, Y2 = 0;
      if (k === "be")
        for (O2 = b.length - 1, A2 = 0; O2 >= 0; O2 -= 3)
          x2 = b[O2] | b[O2 - 1] << 8 | b[O2 - 2] << 16, this.words[A2] |= x2 << Y2 & 67108863, this.words[A2 + 1] = x2 >>> 26 - Y2 & 67108863, Y2 += 24, Y2 >= 26 && (Y2 -= 26, A2++);
      else if (k === "le")
        for (O2 = 0, A2 = 0; O2 < b.length; O2 += 3)
          x2 = b[O2] | b[O2 + 1] << 8 | b[O2 + 2] << 16, this.words[A2] |= x2 << Y2 & 67108863, this.words[A2 + 1] = x2 >>> 26 - Y2 & 67108863, Y2 += 24, Y2 >= 26 && (Y2 -= 26, A2++);
      return this.strip();
    };
    function I2(C2, b) {
      var E2 = C2.charCodeAt(b);
      return E2 >= 65 && E2 <= 70 ? E2 - 55 : E2 >= 97 && E2 <= 102 ? E2 - 87 : E2 - 48 & 15;
    }
    function P2(C2, b, E2) {
      var k = I2(C2, E2);
      return E2 - 1 >= b && (k |= I2(C2, E2 - 1) << 4), k;
    }
    p2.prototype._parseHex = function(b, E2, k) {
      this.length = Math.ceil((b.length - E2) / 6), this.words = new Array(this.length);
      for (var O2 = 0; O2 < this.length; O2++)
        this.words[O2] = 0;
      var A2 = 0, x2 = 0, Y2;
      if (k === "be")
        for (O2 = b.length - 1; O2 >= E2; O2 -= 2)
          Y2 = P2(b, E2, O2) << A2, this.words[x2] |= Y2 & 67108863, A2 >= 18 ? (A2 -= 18, x2 += 1, this.words[x2] |= Y2 >>> 26) : A2 += 8;
      else {
        var B2 = b.length - E2;
        for (O2 = B2 % 2 === 0 ? E2 + 1 : E2; O2 < b.length; O2 += 2)
          Y2 = P2(b, E2, O2) << A2, this.words[x2] |= Y2 & 67108863, A2 >= 18 ? (A2 -= 18, x2 += 1, this.words[x2] |= Y2 >>> 26) : A2 += 8;
      }
      this.strip();
    };
    function $(C2, b, E2, k) {
      for (var O2 = 0, A2 = Math.min(C2.length, E2), x2 = b; x2 < A2; x2++) {
        var Y2 = C2.charCodeAt(x2) - 48;
        O2 *= k, Y2 >= 49 ? O2 += Y2 - 49 + 10 : Y2 >= 17 ? O2 += Y2 - 17 + 10 : O2 += Y2;
      }
      return O2;
    }
    p2.prototype._parseBase = function(b, E2, k) {
      this.words = [0], this.length = 1;
      for (var O2 = 0, A2 = 1; A2 <= 67108863; A2 *= E2)
        O2++;
      O2--, A2 = A2 / E2 | 0;
      for (var x2 = b.length - k, Y2 = x2 % O2, B2 = Math.min(x2, x2 - Y2) + k, T2 = 0, D2 = k; D2 < B2; D2 += O2)
        T2 = $(b, D2, D2 + O2, E2), this.imuln(A2), this.words[0] + T2 < 67108864 ? this.words[0] += T2 : this._iaddn(T2);
      if (Y2 !== 0) {
        var te2 = 1;
        for (T2 = $(b, D2, b.length, E2), D2 = 0; D2 < Y2; D2++)
          te2 *= E2;
        this.imuln(te2), this.words[0] + T2 < 67108864 ? this.words[0] += T2 : this._iaddn(T2);
      }
      this.strip();
    }, p2.prototype.copy = function(b) {
      b.words = new Array(this.length);
      for (var E2 = 0; E2 < this.length; E2++)
        b.words[E2] = this.words[E2];
      b.length = this.length, b.negative = this.negative, b.red = this.red;
    }, p2.prototype.clone = function() {
      var b = new p2(null);
      return this.copy(b), b;
    }, p2.prototype._expand = function(b) {
      for (; this.length < b; )
        this.words[this.length++] = 0;
      return this;
    }, p2.prototype.strip = function() {
      for (; this.length > 1 && this.words[this.length - 1] === 0; )
        this.length--;
      return this._normSign();
    }, p2.prototype._normSign = function() {
      return this.length === 1 && this.words[0] === 0 && (this.negative = 0), this;
    }, p2.prototype.inspect = function() {
      return (this.red ? "<BN-R: " : "<BN: ") + this.toString(16) + ">";
    };
    var F2 = ["", "0", "00", "000", "0000", "00000", "000000", "0000000", "00000000", "000000000", "0000000000", "00000000000", "000000000000", "0000000000000", "00000000000000", "000000000000000", "0000000000000000", "00000000000000000", "000000000000000000", "0000000000000000000", "00000000000000000000", "000000000000000000000", "0000000000000000000000", "00000000000000000000000", "000000000000000000000000", "0000000000000000000000000"], H2 = [0, 0, 25, 16, 12, 11, 10, 9, 8, 8, 7, 7, 7, 7, 6, 6, 6, 6, 6, 6, 6, 5, 5, 5, 5, 5, 5, 5, 5, 5, 5, 5, 5, 5, 5, 5, 5], j = [0, 0, 33554432, 43046721, 16777216, 48828125, 60466176, 40353607, 16777216, 43046721, 1e7, 19487171, 35831808, 62748517, 7529536, 11390625, 16777216, 24137569, 34012224, 47045881, 64e6, 4084101, 5153632, 6436343, 7962624, 9765625, 11881376, 14348907, 17210368, 20511149, 243e5, 28629151, 33554432, 39135393, 45435424, 52521875, 60466176];
    p2.prototype.toString = function(b, E2) {
      b = b || 10, E2 = E2 | 0 || 1;
      var k;
      if (b === 16 || b === "hex") {
        k = "";
        for (var O2 = 0, A2 = 0, x2 = 0; x2 < this.length; x2++) {
          var Y2 = this.words[x2], B2 = ((Y2 << O2 | A2) & 16777215).toString(16);
          A2 = Y2 >>> 24 - O2 & 16777215, A2 !== 0 || x2 !== this.length - 1 ? k = F2[6 - B2.length] + B2 + k : k = B2 + k, O2 += 2, O2 >= 26 && (O2 -= 26, x2--);
        }
        for (A2 !== 0 && (k = A2.toString(16) + k); k.length % E2 !== 0; )
          k = "0" + k;
        return this.negative !== 0 && (k = "-" + k), k;
      }
      if (b === (b | 0) && b >= 2 && b <= 36) {
        var T2 = H2[b], D2 = j[b];
        k = "";
        var te2 = this.clone();
        for (te2.negative = 0; !te2.isZero(); ) {
          var me2 = te2.modn(D2).toString(b);
          te2 = te2.idivn(D2), te2.isZero() ? k = me2 + k : k = F2[T2 - me2.length] + me2 + k;
        }
        for (this.isZero() && (k = "0" + k); k.length % E2 !== 0; )
          k = "0" + k;
        return this.negative !== 0 && (k = "-" + k), k;
      }
      l2(false, "Base should be between 2 and 36");
    }, p2.prototype.toNumber = function() {
      var b = this.words[0];
      return this.length === 2 ? b += this.words[1] * 67108864 : this.length === 3 && this.words[2] === 1 ? b += 4503599627370496 + this.words[1] * 67108864 : this.length > 2 && l2(false, "Number can only safely store up to 53 bits"), this.negative !== 0 ? -b : b;
    }, p2.prototype.toJSON = function() {
      return this.toString(16);
    }, p2.prototype.toBuffer = function(b, E2) {
      return l2(typeof _ < "u"), this.toArrayLike(_, b, E2);
    }, p2.prototype.toArray = function(b, E2) {
      return this.toArrayLike(Array, b, E2);
    }, p2.prototype.toArrayLike = function(b, E2, k) {
      var O2 = this.byteLength(), A2 = k || Math.max(1, O2);
      l2(O2 <= A2, "byte array longer than desired length"), l2(A2 > 0, "Requested array length <= 0"), this.strip();
      var x2 = E2 === "le", Y2 = new b(A2), B2, T2, D2 = this.clone();
      if (x2) {
        for (T2 = 0; !D2.isZero(); T2++)
          B2 = D2.andln(255), D2.iushrn(8), Y2[T2] = B2;
        for (; T2 < A2; T2++)
          Y2[T2] = 0;
      } else {
        for (T2 = 0; T2 < A2 - O2; T2++)
          Y2[T2] = 0;
        for (T2 = 0; !D2.isZero(); T2++)
          B2 = D2.andln(255), D2.iushrn(8), Y2[A2 - T2 - 1] = B2;
      }
      return Y2;
    }, Math.clz32 ? p2.prototype._countBits = function(b) {
      return 32 - Math.clz32(b);
    } : p2.prototype._countBits = function(b) {
      var E2 = b, k = 0;
      return E2 >= 4096 && (k += 13, E2 >>>= 13), E2 >= 64 && (k += 7, E2 >>>= 7), E2 >= 8 && (k += 4, E2 >>>= 4), E2 >= 2 && (k += 2, E2 >>>= 2), k + E2;
    }, p2.prototype._zeroBits = function(b) {
      if (b === 0)
        return 26;
      var E2 = b, k = 0;
      return E2 & 8191 || (k += 13, E2 >>>= 13), E2 & 127 || (k += 7, E2 >>>= 7), E2 & 15 || (k += 4, E2 >>>= 4), E2 & 3 || (k += 2, E2 >>>= 2), E2 & 1 || k++, k;
    }, p2.prototype.bitLength = function() {
      var b = this.words[this.length - 1], E2 = this._countBits(b);
      return (this.length - 1) * 26 + E2;
    };
    function ee2(C2) {
      for (var b = new Array(C2.bitLength()), E2 = 0; E2 < b.length; E2++) {
        var k = E2 / 26 | 0, O2 = E2 % 26;
        b[E2] = (C2.words[k] & 1 << O2) >>> O2;
      }
      return b;
    }
    p2.prototype.zeroBits = function() {
      if (this.isZero())
        return 0;
      for (var b = 0, E2 = 0; E2 < this.length; E2++) {
        var k = this._zeroBits(this.words[E2]);
        if (b += k, k !== 26)
          break;
      }
      return b;
    }, p2.prototype.byteLength = function() {
      return Math.ceil(this.bitLength() / 8);
    }, p2.prototype.toTwos = function(b) {
      return this.negative !== 0 ? this.abs().inotn(b).iaddn(1) : this.clone();
    }, p2.prototype.fromTwos = function(b) {
      return this.testn(b - 1) ? this.notn(b).iaddn(1).ineg() : this.clone();
    }, p2.prototype.isNeg = function() {
      return this.negative !== 0;
    }, p2.prototype.neg = function() {
      return this.clone().ineg();
    }, p2.prototype.ineg = function() {
      return this.isZero() || (this.negative ^= 1), this;
    }, p2.prototype.iuor = function(b) {
      for (; this.length < b.length; )
        this.words[this.length++] = 0;
      for (var E2 = 0; E2 < b.length; E2++)
        this.words[E2] = this.words[E2] | b.words[E2];
      return this.strip();
    }, p2.prototype.ior = function(b) {
      return l2((this.negative | b.negative) === 0), this.iuor(b);
    }, p2.prototype.or = function(b) {
      return this.length > b.length ? this.clone().ior(b) : b.clone().ior(this);
    }, p2.prototype.uor = function(b) {
      return this.length > b.length ? this.clone().iuor(b) : b.clone().iuor(this);
    }, p2.prototype.iuand = function(b) {
      var E2;
      this.length > b.length ? E2 = b : E2 = this;
      for (var k = 0; k < E2.length; k++)
        this.words[k] = this.words[k] & b.words[k];
      return this.length = E2.length, this.strip();
    }, p2.prototype.iand = function(b) {
      return l2((this.negative | b.negative) === 0), this.iuand(b);
    }, p2.prototype.and = function(b) {
      return this.length > b.length ? this.clone().iand(b) : b.clone().iand(this);
    }, p2.prototype.uand = function(b) {
      return this.length > b.length ? this.clone().iuand(b) : b.clone().iuand(this);
    }, p2.prototype.iuxor = function(b) {
      var E2, k;
      this.length > b.length ? (E2 = this, k = b) : (E2 = b, k = this);
      for (var O2 = 0; O2 < k.length; O2++)
        this.words[O2] = E2.words[O2] ^ k.words[O2];
      if (this !== E2)
        for (; O2 < E2.length; O2++)
          this.words[O2] = E2.words[O2];
      return this.length = E2.length, this.strip();
    }, p2.prototype.ixor = function(b) {
      return l2((this.negative | b.negative) === 0), this.iuxor(b);
    }, p2.prototype.xor = function(b) {
      return this.length > b.length ? this.clone().ixor(b) : b.clone().ixor(this);
    }, p2.prototype.uxor = function(b) {
      return this.length > b.length ? this.clone().iuxor(b) : b.clone().iuxor(this);
    }, p2.prototype.inotn = function(b) {
      l2(typeof b == "number" && b >= 0);
      var E2 = Math.ceil(b / 26) | 0, k = b % 26;
      this._expand(E2), k > 0 && E2--;
      for (var O2 = 0; O2 < E2; O2++)
        this.words[O2] = ~this.words[O2] & 67108863;
      return k > 0 && (this.words[O2] = ~this.words[O2] & 67108863 >> 26 - k), this.strip();
    }, p2.prototype.notn = function(b) {
      return this.clone().inotn(b);
    }, p2.prototype.setn = function(b, E2) {
      l2(typeof b == "number" && b >= 0);
      var k = b / 26 | 0, O2 = b % 26;
      return this._expand(k + 1), E2 ? this.words[k] = this.words[k] | 1 << O2 : this.words[k] = this.words[k] & ~(1 << O2), this.strip();
    }, p2.prototype.iadd = function(b) {
      var E2;
      if (this.negative !== 0 && b.negative === 0)
        return this.negative = 0, E2 = this.isub(b), this.negative ^= 1, this._normSign();
      if (this.negative === 0 && b.negative !== 0)
        return b.negative = 0, E2 = this.isub(b), b.negative = 1, E2._normSign();
      var k, O2;
      this.length > b.length ? (k = this, O2 = b) : (k = b, O2 = this);
      for (var A2 = 0, x2 = 0; x2 < O2.length; x2++)
        E2 = (k.words[x2] | 0) + (O2.words[x2] | 0) + A2, this.words[x2] = E2 & 67108863, A2 = E2 >>> 26;
      for (; A2 !== 0 && x2 < k.length; x2++)
        E2 = (k.words[x2] | 0) + A2, this.words[x2] = E2 & 67108863, A2 = E2 >>> 26;
      if (this.length = k.length, A2 !== 0)
        this.words[this.length] = A2, this.length++;
      else if (k !== this)
        for (; x2 < k.length; x2++)
          this.words[x2] = k.words[x2];
      return this;
    }, p2.prototype.add = function(b) {
      var E2;
      return b.negative !== 0 && this.negative === 0 ? (b.negative = 0, E2 = this.sub(b), b.negative ^= 1, E2) : b.negative === 0 && this.negative !== 0 ? (this.negative = 0, E2 = b.sub(this), this.negative = 1, E2) : this.length > b.length ? this.clone().iadd(b) : b.clone().iadd(this);
    }, p2.prototype.isub = function(b) {
      if (b.negative !== 0) {
        b.negative = 0;
        var E2 = this.iadd(b);
        return b.negative = 1, E2._normSign();
      } else if (this.negative !== 0)
        return this.negative = 0, this.iadd(b), this.negative = 1, this._normSign();
      var k = this.cmp(b);
      if (k === 0)
        return this.negative = 0, this.length = 1, this.words[0] = 0, this;
      var O2, A2;
      k > 0 ? (O2 = this, A2 = b) : (O2 = b, A2 = this);
      for (var x2 = 0, Y2 = 0; Y2 < A2.length; Y2++)
        E2 = (O2.words[Y2] | 0) - (A2.words[Y2] | 0) + x2, x2 = E2 >> 26, this.words[Y2] = E2 & 67108863;
      for (; x2 !== 0 && Y2 < O2.length; Y2++)
        E2 = (O2.words[Y2] | 0) + x2, x2 = E2 >> 26, this.words[Y2] = E2 & 67108863;
      if (x2 === 0 && Y2 < O2.length && O2 !== this)
        for (; Y2 < O2.length; Y2++)
          this.words[Y2] = O2.words[Y2];
      return this.length = Math.max(this.length, Y2), O2 !== this && (this.negative = 1), this.strip();
    }, p2.prototype.sub = function(b) {
      return this.clone().isub(b);
    };
    function X2(C2, b, E2) {
      E2.negative = b.negative ^ C2.negative;
      var k = C2.length + b.length | 0;
      E2.length = k, k = k - 1 | 0;
      var O2 = C2.words[0] | 0, A2 = b.words[0] | 0, x2 = O2 * A2, Y2 = x2 & 67108863, B2 = x2 / 67108864 | 0;
      E2.words[0] = Y2;
      for (var T2 = 1; T2 < k; T2++) {
        for (var D2 = B2 >>> 26, te2 = B2 & 67108863, me2 = Math.min(T2, b.length - 1), Ie2 = Math.max(0, T2 - C2.length + 1); Ie2 <= me2; Ie2++) {
          var $e2 = T2 - Ie2 | 0;
          O2 = C2.words[$e2] | 0, A2 = b.words[Ie2] | 0, x2 = O2 * A2 + te2, D2 += x2 / 67108864 | 0, te2 = x2 & 67108863;
        }
        E2.words[T2] = te2 | 0, B2 = D2 | 0;
      }
      return B2 !== 0 ? E2.words[T2] = B2 | 0 : E2.length--, E2.strip();
    }
    var ie2 = function(b, E2, k) {
      var O2 = b.words, A2 = E2.words, x2 = k.words, Y2 = 0, B2, T2, D2, te2 = O2[0] | 0, me2 = te2 & 8191, Ie2 = te2 >>> 13, $e2 = O2[1] | 0, ye2 = $e2 & 8191, he2 = $e2 >>> 13, Me2 = O2[2] | 0, Ae2 = Me2 & 8191, xe2 = Me2 >>> 13, ae2 = O2[3] | 0, N2 = ae2 & 8191, re2 = ae2 >>> 13, fe2 = O2[4] | 0, Ne2 = fe2 & 8191, Oe2 = fe2 >>> 13, qe2 = O2[5] | 0, je2 = qe2 & 8191, Fe2 = qe2 >>> 13, yt = O2[6] | 0, Xe2 = yt & 8191, Ge2 = yt >>> 13, V2 = O2[7] | 0, ge2 = V2 & 8191, we2 = V2 >>> 13, We2 = O2[8] | 0, Re2 = We2 & 8191, J2 = We2 >>> 13, _e = O2[9] | 0, ue2 = _e & 8191, ce2 = _e >>> 13, ve2 = A2[0] | 0, Ce2 = ve2 & 8191, Be2 = ve2 >>> 13, He2 = A2[1] | 0, Ve2 = He2 & 8191, Ze2 = He2 >>> 13, Ke2 = A2[2] | 0, U2 = Ke2 & 8191, se2 = Ke2 >>> 13, Se2 = A2[3] | 0, Ue2 = Se2 & 8191, De2 = Se2 >>> 13, Ye2 = A2[4] | 0, Qe2 = Ye2 & 8191, st = Ye2 >>> 13, St = A2[5] | 0, tt = St & 8191, it = St >>> 13, Tt = A2[6] | 0, rt = Tt & 8191, dt = Tt >>> 13, wt = A2[7] | 0, nt = wt & 8191, at = wt >>> 13, gt = A2[8] | 0, ot = gt & 8191, ct = gt >>> 13, Ct = A2[9] | 0, ut = Ct & 8191, lt = Ct >>> 13;
      k.negative = b.negative ^ E2.negative, k.length = 19, B2 = Math.imul(me2, Ce2), T2 = Math.imul(me2, Be2), T2 = T2 + Math.imul(Ie2, Ce2) | 0, D2 = Math.imul(Ie2, Be2);
      var kt = (Y2 + B2 | 0) + ((T2 & 8191) << 13) | 0;
      Y2 = (D2 + (T2 >>> 13) | 0) + (kt >>> 26) | 0, kt &= 67108863, B2 = Math.imul(ye2, Ce2), T2 = Math.imul(ye2, Be2), T2 = T2 + Math.imul(he2, Ce2) | 0, D2 = Math.imul(he2, Be2), B2 = B2 + Math.imul(me2, Ve2) | 0, T2 = T2 + Math.imul(me2, Ze2) | 0, T2 = T2 + Math.imul(Ie2, Ve2) | 0, D2 = D2 + Math.imul(Ie2, Ze2) | 0;
      var Rt = (Y2 + B2 | 0) + ((T2 & 8191) << 13) | 0;
      Y2 = (D2 + (T2 >>> 13) | 0) + (Rt >>> 26) | 0, Rt &= 67108863, B2 = Math.imul(Ae2, Ce2), T2 = Math.imul(Ae2, Be2), T2 = T2 + Math.imul(xe2, Ce2) | 0, D2 = Math.imul(xe2, Be2), B2 = B2 + Math.imul(ye2, Ve2) | 0, T2 = T2 + Math.imul(ye2, Ze2) | 0, T2 = T2 + Math.imul(he2, Ve2) | 0, D2 = D2 + Math.imul(he2, Ze2) | 0, B2 = B2 + Math.imul(me2, U2) | 0, T2 = T2 + Math.imul(me2, se2) | 0, T2 = T2 + Math.imul(Ie2, U2) | 0, D2 = D2 + Math.imul(Ie2, se2) | 0;
      var Je2 = (Y2 + B2 | 0) + ((T2 & 8191) << 13) | 0;
      Y2 = (D2 + (T2 >>> 13) | 0) + (Je2 >>> 26) | 0, Je2 &= 67108863, B2 = Math.imul(N2, Ce2), T2 = Math.imul(N2, Be2), T2 = T2 + Math.imul(re2, Ce2) | 0, D2 = Math.imul(re2, Be2), B2 = B2 + Math.imul(Ae2, Ve2) | 0, T2 = T2 + Math.imul(Ae2, Ze2) | 0, T2 = T2 + Math.imul(xe2, Ve2) | 0, D2 = D2 + Math.imul(xe2, Ze2) | 0, B2 = B2 + Math.imul(ye2, U2) | 0, T2 = T2 + Math.imul(ye2, se2) | 0, T2 = T2 + Math.imul(he2, U2) | 0, D2 = D2 + Math.imul(he2, se2) | 0, B2 = B2 + Math.imul(me2, Ue2) | 0, T2 = T2 + Math.imul(me2, De2) | 0, T2 = T2 + Math.imul(Ie2, Ue2) | 0, D2 = D2 + Math.imul(Ie2, De2) | 0;
      var ze2 = (Y2 + B2 | 0) + ((T2 & 8191) << 13) | 0;
      Y2 = (D2 + (T2 >>> 13) | 0) + (ze2 >>> 26) | 0, ze2 &= 67108863, B2 = Math.imul(Ne2, Ce2), T2 = Math.imul(Ne2, Be2), T2 = T2 + Math.imul(Oe2, Ce2) | 0, D2 = Math.imul(Oe2, Be2), B2 = B2 + Math.imul(N2, Ve2) | 0, T2 = T2 + Math.imul(N2, Ze2) | 0, T2 = T2 + Math.imul(re2, Ve2) | 0, D2 = D2 + Math.imul(re2, Ze2) | 0, B2 = B2 + Math.imul(Ae2, U2) | 0, T2 = T2 + Math.imul(Ae2, se2) | 0, T2 = T2 + Math.imul(xe2, U2) | 0, D2 = D2 + Math.imul(xe2, se2) | 0, B2 = B2 + Math.imul(ye2, Ue2) | 0, T2 = T2 + Math.imul(ye2, De2) | 0, T2 = T2 + Math.imul(he2, Ue2) | 0, D2 = D2 + Math.imul(he2, De2) | 0, B2 = B2 + Math.imul(me2, Qe2) | 0, T2 = T2 + Math.imul(me2, st) | 0, T2 = T2 + Math.imul(Ie2, Qe2) | 0, D2 = D2 + Math.imul(Ie2, st) | 0;
      var et = (Y2 + B2 | 0) + ((T2 & 8191) << 13) | 0;
      Y2 = (D2 + (T2 >>> 13) | 0) + (et >>> 26) | 0, et &= 67108863, B2 = Math.imul(je2, Ce2), T2 = Math.imul(je2, Be2), T2 = T2 + Math.imul(Fe2, Ce2) | 0, D2 = Math.imul(Fe2, Be2), B2 = B2 + Math.imul(Ne2, Ve2) | 0, T2 = T2 + Math.imul(Ne2, Ze2) | 0, T2 = T2 + Math.imul(Oe2, Ve2) | 0, D2 = D2 + Math.imul(Oe2, Ze2) | 0, B2 = B2 + Math.imul(N2, U2) | 0, T2 = T2 + Math.imul(N2, se2) | 0, T2 = T2 + Math.imul(re2, U2) | 0, D2 = D2 + Math.imul(re2, se2) | 0, B2 = B2 + Math.imul(Ae2, Ue2) | 0, T2 = T2 + Math.imul(Ae2, De2) | 0, T2 = T2 + Math.imul(xe2, Ue2) | 0, D2 = D2 + Math.imul(xe2, De2) | 0, B2 = B2 + Math.imul(ye2, Qe2) | 0, T2 = T2 + Math.imul(ye2, st) | 0, T2 = T2 + Math.imul(he2, Qe2) | 0, D2 = D2 + Math.imul(he2, st) | 0, B2 = B2 + Math.imul(me2, tt) | 0, T2 = T2 + Math.imul(me2, it) | 0, T2 = T2 + Math.imul(Ie2, tt) | 0, D2 = D2 + Math.imul(Ie2, it) | 0;
      var pt = (Y2 + B2 | 0) + ((T2 & 8191) << 13) | 0;
      Y2 = (D2 + (T2 >>> 13) | 0) + (pt >>> 26) | 0, pt &= 67108863, B2 = Math.imul(Xe2, Ce2), T2 = Math.imul(Xe2, Be2), T2 = T2 + Math.imul(Ge2, Ce2) | 0, D2 = Math.imul(Ge2, Be2), B2 = B2 + Math.imul(je2, Ve2) | 0, T2 = T2 + Math.imul(je2, Ze2) | 0, T2 = T2 + Math.imul(Fe2, Ve2) | 0, D2 = D2 + Math.imul(Fe2, Ze2) | 0, B2 = B2 + Math.imul(Ne2, U2) | 0, T2 = T2 + Math.imul(Ne2, se2) | 0, T2 = T2 + Math.imul(Oe2, U2) | 0, D2 = D2 + Math.imul(Oe2, se2) | 0, B2 = B2 + Math.imul(N2, Ue2) | 0, T2 = T2 + Math.imul(N2, De2) | 0, T2 = T2 + Math.imul(re2, Ue2) | 0, D2 = D2 + Math.imul(re2, De2) | 0, B2 = B2 + Math.imul(Ae2, Qe2) | 0, T2 = T2 + Math.imul(Ae2, st) | 0, T2 = T2 + Math.imul(xe2, Qe2) | 0, D2 = D2 + Math.imul(xe2, st) | 0, B2 = B2 + Math.imul(ye2, tt) | 0, T2 = T2 + Math.imul(ye2, it) | 0, T2 = T2 + Math.imul(he2, tt) | 0, D2 = D2 + Math.imul(he2, it) | 0, B2 = B2 + Math.imul(me2, rt) | 0, T2 = T2 + Math.imul(me2, dt) | 0, T2 = T2 + Math.imul(Ie2, rt) | 0, D2 = D2 + Math.imul(Ie2, dt) | 0;
      var mt = (Y2 + B2 | 0) + ((T2 & 8191) << 13) | 0;
      Y2 = (D2 + (T2 >>> 13) | 0) + (mt >>> 26) | 0, mt &= 67108863, B2 = Math.imul(ge2, Ce2), T2 = Math.imul(ge2, Be2), T2 = T2 + Math.imul(we2, Ce2) | 0, D2 = Math.imul(we2, Be2), B2 = B2 + Math.imul(Xe2, Ve2) | 0, T2 = T2 + Math.imul(Xe2, Ze2) | 0, T2 = T2 + Math.imul(Ge2, Ve2) | 0, D2 = D2 + Math.imul(Ge2, Ze2) | 0, B2 = B2 + Math.imul(je2, U2) | 0, T2 = T2 + Math.imul(je2, se2) | 0, T2 = T2 + Math.imul(Fe2, U2) | 0, D2 = D2 + Math.imul(Fe2, se2) | 0, B2 = B2 + Math.imul(Ne2, Ue2) | 0, T2 = T2 + Math.imul(Ne2, De2) | 0, T2 = T2 + Math.imul(Oe2, Ue2) | 0, D2 = D2 + Math.imul(Oe2, De2) | 0, B2 = B2 + Math.imul(N2, Qe2) | 0, T2 = T2 + Math.imul(N2, st) | 0, T2 = T2 + Math.imul(re2, Qe2) | 0, D2 = D2 + Math.imul(re2, st) | 0, B2 = B2 + Math.imul(Ae2, tt) | 0, T2 = T2 + Math.imul(Ae2, it) | 0, T2 = T2 + Math.imul(xe2, tt) | 0, D2 = D2 + Math.imul(xe2, it) | 0, B2 = B2 + Math.imul(ye2, rt) | 0, T2 = T2 + Math.imul(ye2, dt) | 0, T2 = T2 + Math.imul(he2, rt) | 0, D2 = D2 + Math.imul(he2, dt) | 0, B2 = B2 + Math.imul(me2, nt) | 0, T2 = T2 + Math.imul(me2, at) | 0, T2 = T2 + Math.imul(Ie2, nt) | 0, D2 = D2 + Math.imul(Ie2, at) | 0;
      var vt = (Y2 + B2 | 0) + ((T2 & 8191) << 13) | 0;
      Y2 = (D2 + (T2 >>> 13) | 0) + (vt >>> 26) | 0, vt &= 67108863, B2 = Math.imul(Re2, Ce2), T2 = Math.imul(Re2, Be2), T2 = T2 + Math.imul(J2, Ce2) | 0, D2 = Math.imul(J2, Be2), B2 = B2 + Math.imul(ge2, Ve2) | 0, T2 = T2 + Math.imul(ge2, Ze2) | 0, T2 = T2 + Math.imul(we2, Ve2) | 0, D2 = D2 + Math.imul(we2, Ze2) | 0, B2 = B2 + Math.imul(Xe2, U2) | 0, T2 = T2 + Math.imul(Xe2, se2) | 0, T2 = T2 + Math.imul(Ge2, U2) | 0, D2 = D2 + Math.imul(Ge2, se2) | 0, B2 = B2 + Math.imul(je2, Ue2) | 0, T2 = T2 + Math.imul(je2, De2) | 0, T2 = T2 + Math.imul(Fe2, Ue2) | 0, D2 = D2 + Math.imul(Fe2, De2) | 0, B2 = B2 + Math.imul(Ne2, Qe2) | 0, T2 = T2 + Math.imul(Ne2, st) | 0, T2 = T2 + Math.imul(Oe2, Qe2) | 0, D2 = D2 + Math.imul(Oe2, st) | 0, B2 = B2 + Math.imul(N2, tt) | 0, T2 = T2 + Math.imul(N2, it) | 0, T2 = T2 + Math.imul(re2, tt) | 0, D2 = D2 + Math.imul(re2, it) | 0, B2 = B2 + Math.imul(Ae2, rt) | 0, T2 = T2 + Math.imul(Ae2, dt) | 0, T2 = T2 + Math.imul(xe2, rt) | 0, D2 = D2 + Math.imul(xe2, dt) | 0, B2 = B2 + Math.imul(ye2, nt) | 0, T2 = T2 + Math.imul(ye2, at) | 0, T2 = T2 + Math.imul(he2, nt) | 0, D2 = D2 + Math.imul(he2, at) | 0, B2 = B2 + Math.imul(me2, ot) | 0, T2 = T2 + Math.imul(me2, ct) | 0, T2 = T2 + Math.imul(Ie2, ot) | 0, D2 = D2 + Math.imul(Ie2, ct) | 0;
      var ht = (Y2 + B2 | 0) + ((T2 & 8191) << 13) | 0;
      Y2 = (D2 + (T2 >>> 13) | 0) + (ht >>> 26) | 0, ht &= 67108863, B2 = Math.imul(ue2, Ce2), T2 = Math.imul(ue2, Be2), T2 = T2 + Math.imul(ce2, Ce2) | 0, D2 = Math.imul(ce2, Be2), B2 = B2 + Math.imul(Re2, Ve2) | 0, T2 = T2 + Math.imul(Re2, Ze2) | 0, T2 = T2 + Math.imul(J2, Ve2) | 0, D2 = D2 + Math.imul(J2, Ze2) | 0, B2 = B2 + Math.imul(ge2, U2) | 0, T2 = T2 + Math.imul(ge2, se2) | 0, T2 = T2 + Math.imul(we2, U2) | 0, D2 = D2 + Math.imul(we2, se2) | 0, B2 = B2 + Math.imul(Xe2, Ue2) | 0, T2 = T2 + Math.imul(Xe2, De2) | 0, T2 = T2 + Math.imul(Ge2, Ue2) | 0, D2 = D2 + Math.imul(Ge2, De2) | 0, B2 = B2 + Math.imul(je2, Qe2) | 0, T2 = T2 + Math.imul(je2, st) | 0, T2 = T2 + Math.imul(Fe2, Qe2) | 0, D2 = D2 + Math.imul(Fe2, st) | 0, B2 = B2 + Math.imul(Ne2, tt) | 0, T2 = T2 + Math.imul(Ne2, it) | 0, T2 = T2 + Math.imul(Oe2, tt) | 0, D2 = D2 + Math.imul(Oe2, it) | 0, B2 = B2 + Math.imul(N2, rt) | 0, T2 = T2 + Math.imul(N2, dt) | 0, T2 = T2 + Math.imul(re2, rt) | 0, D2 = D2 + Math.imul(re2, dt) | 0, B2 = B2 + Math.imul(Ae2, nt) | 0, T2 = T2 + Math.imul(Ae2, at) | 0, T2 = T2 + Math.imul(xe2, nt) | 0, D2 = D2 + Math.imul(xe2, at) | 0, B2 = B2 + Math.imul(ye2, ot) | 0, T2 = T2 + Math.imul(ye2, ct) | 0, T2 = T2 + Math.imul(he2, ot) | 0, D2 = D2 + Math.imul(he2, ct) | 0, B2 = B2 + Math.imul(me2, ut) | 0, T2 = T2 + Math.imul(me2, lt) | 0, T2 = T2 + Math.imul(Ie2, ut) | 0, D2 = D2 + Math.imul(Ie2, lt) | 0;
      var _t = (Y2 + B2 | 0) + ((T2 & 8191) << 13) | 0;
      Y2 = (D2 + (T2 >>> 13) | 0) + (_t >>> 26) | 0, _t &= 67108863, B2 = Math.imul(ue2, Ve2), T2 = Math.imul(ue2, Ze2), T2 = T2 + Math.imul(ce2, Ve2) | 0, D2 = Math.imul(ce2, Ze2), B2 = B2 + Math.imul(Re2, U2) | 0, T2 = T2 + Math.imul(Re2, se2) | 0, T2 = T2 + Math.imul(J2, U2) | 0, D2 = D2 + Math.imul(J2, se2) | 0, B2 = B2 + Math.imul(ge2, Ue2) | 0, T2 = T2 + Math.imul(ge2, De2) | 0, T2 = T2 + Math.imul(we2, Ue2) | 0, D2 = D2 + Math.imul(we2, De2) | 0, B2 = B2 + Math.imul(Xe2, Qe2) | 0, T2 = T2 + Math.imul(Xe2, st) | 0, T2 = T2 + Math.imul(Ge2, Qe2) | 0, D2 = D2 + Math.imul(Ge2, st) | 0, B2 = B2 + Math.imul(je2, tt) | 0, T2 = T2 + Math.imul(je2, it) | 0, T2 = T2 + Math.imul(Fe2, tt) | 0, D2 = D2 + Math.imul(Fe2, it) | 0, B2 = B2 + Math.imul(Ne2, rt) | 0, T2 = T2 + Math.imul(Ne2, dt) | 0, T2 = T2 + Math.imul(Oe2, rt) | 0, D2 = D2 + Math.imul(Oe2, dt) | 0, B2 = B2 + Math.imul(N2, nt) | 0, T2 = T2 + Math.imul(N2, at) | 0, T2 = T2 + Math.imul(re2, nt) | 0, D2 = D2 + Math.imul(re2, at) | 0, B2 = B2 + Math.imul(Ae2, ot) | 0, T2 = T2 + Math.imul(Ae2, ct) | 0, T2 = T2 + Math.imul(xe2, ot) | 0, D2 = D2 + Math.imul(xe2, ct) | 0, B2 = B2 + Math.imul(ye2, ut) | 0, T2 = T2 + Math.imul(ye2, lt) | 0, T2 = T2 + Math.imul(he2, ut) | 0, D2 = D2 + Math.imul(he2, lt) | 0;
      var Et = (Y2 + B2 | 0) + ((T2 & 8191) << 13) | 0;
      Y2 = (D2 + (T2 >>> 13) | 0) + (Et >>> 26) | 0, Et &= 67108863, B2 = Math.imul(ue2, U2), T2 = Math.imul(ue2, se2), T2 = T2 + Math.imul(ce2, U2) | 0, D2 = Math.imul(ce2, se2), B2 = B2 + Math.imul(Re2, Ue2) | 0, T2 = T2 + Math.imul(Re2, De2) | 0, T2 = T2 + Math.imul(J2, Ue2) | 0, D2 = D2 + Math.imul(J2, De2) | 0, B2 = B2 + Math.imul(ge2, Qe2) | 0, T2 = T2 + Math.imul(ge2, st) | 0, T2 = T2 + Math.imul(we2, Qe2) | 0, D2 = D2 + Math.imul(we2, st) | 0, B2 = B2 + Math.imul(Xe2, tt) | 0, T2 = T2 + Math.imul(Xe2, it) | 0, T2 = T2 + Math.imul(Ge2, tt) | 0, D2 = D2 + Math.imul(Ge2, it) | 0, B2 = B2 + Math.imul(je2, rt) | 0, T2 = T2 + Math.imul(je2, dt) | 0, T2 = T2 + Math.imul(Fe2, rt) | 0, D2 = D2 + Math.imul(Fe2, dt) | 0, B2 = B2 + Math.imul(Ne2, nt) | 0, T2 = T2 + Math.imul(Ne2, at) | 0, T2 = T2 + Math.imul(Oe2, nt) | 0, D2 = D2 + Math.imul(Oe2, at) | 0, B2 = B2 + Math.imul(N2, ot) | 0, T2 = T2 + Math.imul(N2, ct) | 0, T2 = T2 + Math.imul(re2, ot) | 0, D2 = D2 + Math.imul(re2, ct) | 0, B2 = B2 + Math.imul(Ae2, ut) | 0, T2 = T2 + Math.imul(Ae2, lt) | 0, T2 = T2 + Math.imul(xe2, ut) | 0, D2 = D2 + Math.imul(xe2, lt) | 0;
      var Pt = (Y2 + B2 | 0) + ((T2 & 8191) << 13) | 0;
      Y2 = (D2 + (T2 >>> 13) | 0) + (Pt >>> 26) | 0, Pt &= 67108863, B2 = Math.imul(ue2, Ue2), T2 = Math.imul(ue2, De2), T2 = T2 + Math.imul(ce2, Ue2) | 0, D2 = Math.imul(ce2, De2), B2 = B2 + Math.imul(Re2, Qe2) | 0, T2 = T2 + Math.imul(Re2, st) | 0, T2 = T2 + Math.imul(J2, Qe2) | 0, D2 = D2 + Math.imul(J2, st) | 0, B2 = B2 + Math.imul(ge2, tt) | 0, T2 = T2 + Math.imul(ge2, it) | 0, T2 = T2 + Math.imul(we2, tt) | 0, D2 = D2 + Math.imul(we2, it) | 0, B2 = B2 + Math.imul(Xe2, rt) | 0, T2 = T2 + Math.imul(Xe2, dt) | 0, T2 = T2 + Math.imul(Ge2, rt) | 0, D2 = D2 + Math.imul(Ge2, dt) | 0, B2 = B2 + Math.imul(je2, nt) | 0, T2 = T2 + Math.imul(je2, at) | 0, T2 = T2 + Math.imul(Fe2, nt) | 0, D2 = D2 + Math.imul(Fe2, at) | 0, B2 = B2 + Math.imul(Ne2, ot) | 0, T2 = T2 + Math.imul(Ne2, ct) | 0, T2 = T2 + Math.imul(Oe2, ot) | 0, D2 = D2 + Math.imul(Oe2, ct) | 0, B2 = B2 + Math.imul(N2, ut) | 0, T2 = T2 + Math.imul(N2, lt) | 0, T2 = T2 + Math.imul(re2, ut) | 0, D2 = D2 + Math.imul(re2, lt) | 0;
      var Nt = (Y2 + B2 | 0) + ((T2 & 8191) << 13) | 0;
      Y2 = (D2 + (T2 >>> 13) | 0) + (Nt >>> 26) | 0, Nt &= 67108863, B2 = Math.imul(ue2, Qe2), T2 = Math.imul(ue2, st), T2 = T2 + Math.imul(ce2, Qe2) | 0, D2 = Math.imul(ce2, st), B2 = B2 + Math.imul(Re2, tt) | 0, T2 = T2 + Math.imul(Re2, it) | 0, T2 = T2 + Math.imul(J2, tt) | 0, D2 = D2 + Math.imul(J2, it) | 0, B2 = B2 + Math.imul(ge2, rt) | 0, T2 = T2 + Math.imul(ge2, dt) | 0, T2 = T2 + Math.imul(we2, rt) | 0, D2 = D2 + Math.imul(we2, dt) | 0, B2 = B2 + Math.imul(Xe2, nt) | 0, T2 = T2 + Math.imul(Xe2, at) | 0, T2 = T2 + Math.imul(Ge2, nt) | 0, D2 = D2 + Math.imul(Ge2, at) | 0, B2 = B2 + Math.imul(je2, ot) | 0, T2 = T2 + Math.imul(je2, ct) | 0, T2 = T2 + Math.imul(Fe2, ot) | 0, D2 = D2 + Math.imul(Fe2, ct) | 0, B2 = B2 + Math.imul(Ne2, ut) | 0, T2 = T2 + Math.imul(Ne2, lt) | 0, T2 = T2 + Math.imul(Oe2, ut) | 0, D2 = D2 + Math.imul(Oe2, lt) | 0;
      var Mt = (Y2 + B2 | 0) + ((T2 & 8191) << 13) | 0;
      Y2 = (D2 + (T2 >>> 13) | 0) + (Mt >>> 26) | 0, Mt &= 67108863, B2 = Math.imul(ue2, tt), T2 = Math.imul(ue2, it), T2 = T2 + Math.imul(ce2, tt) | 0, D2 = Math.imul(ce2, it), B2 = B2 + Math.imul(Re2, rt) | 0, T2 = T2 + Math.imul(Re2, dt) | 0, T2 = T2 + Math.imul(J2, rt) | 0, D2 = D2 + Math.imul(J2, dt) | 0, B2 = B2 + Math.imul(ge2, nt) | 0, T2 = T2 + Math.imul(ge2, at) | 0, T2 = T2 + Math.imul(we2, nt) | 0, D2 = D2 + Math.imul(we2, at) | 0, B2 = B2 + Math.imul(Xe2, ot) | 0, T2 = T2 + Math.imul(Xe2, ct) | 0, T2 = T2 + Math.imul(Ge2, ot) | 0, D2 = D2 + Math.imul(Ge2, ct) | 0, B2 = B2 + Math.imul(je2, ut) | 0, T2 = T2 + Math.imul(je2, lt) | 0, T2 = T2 + Math.imul(Fe2, ut) | 0, D2 = D2 + Math.imul(Fe2, lt) | 0;
      var Ot = (Y2 + B2 | 0) + ((T2 & 8191) << 13) | 0;
      Y2 = (D2 + (T2 >>> 13) | 0) + (Ot >>> 26) | 0, Ot &= 67108863, B2 = Math.imul(ue2, rt), T2 = Math.imul(ue2, dt), T2 = T2 + Math.imul(ce2, rt) | 0, D2 = Math.imul(ce2, dt), B2 = B2 + Math.imul(Re2, nt) | 0, T2 = T2 + Math.imul(Re2, at) | 0, T2 = T2 + Math.imul(J2, nt) | 0, D2 = D2 + Math.imul(J2, at) | 0, B2 = B2 + Math.imul(ge2, ot) | 0, T2 = T2 + Math.imul(ge2, ct) | 0, T2 = T2 + Math.imul(we2, ot) | 0, D2 = D2 + Math.imul(we2, ct) | 0, B2 = B2 + Math.imul(Xe2, ut) | 0, T2 = T2 + Math.imul(Xe2, lt) | 0, T2 = T2 + Math.imul(Ge2, ut) | 0, D2 = D2 + Math.imul(Ge2, lt) | 0;
      var $t = (Y2 + B2 | 0) + ((T2 & 8191) << 13) | 0;
      Y2 = (D2 + (T2 >>> 13) | 0) + ($t >>> 26) | 0, $t &= 67108863, B2 = Math.imul(ue2, nt), T2 = Math.imul(ue2, at), T2 = T2 + Math.imul(ce2, nt) | 0, D2 = Math.imul(ce2, at), B2 = B2 + Math.imul(Re2, ot) | 0, T2 = T2 + Math.imul(Re2, ct) | 0, T2 = T2 + Math.imul(J2, ot) | 0, D2 = D2 + Math.imul(J2, ct) | 0, B2 = B2 + Math.imul(ge2, ut) | 0, T2 = T2 + Math.imul(ge2, lt) | 0, T2 = T2 + Math.imul(we2, ut) | 0, D2 = D2 + Math.imul(we2, lt) | 0;
      var Bt = (Y2 + B2 | 0) + ((T2 & 8191) << 13) | 0;
      Y2 = (D2 + (T2 >>> 13) | 0) + (Bt >>> 26) | 0, Bt &= 67108863, B2 = Math.imul(ue2, ot), T2 = Math.imul(ue2, ct), T2 = T2 + Math.imul(ce2, ot) | 0, D2 = Math.imul(ce2, ct), B2 = B2 + Math.imul(Re2, ut) | 0, T2 = T2 + Math.imul(Re2, lt) | 0, T2 = T2 + Math.imul(J2, ut) | 0, D2 = D2 + Math.imul(J2, lt) | 0;
      var xt = (Y2 + B2 | 0) + ((T2 & 8191) << 13) | 0;
      Y2 = (D2 + (T2 >>> 13) | 0) + (xt >>> 26) | 0, xt &= 67108863, B2 = Math.imul(ue2, ut), T2 = Math.imul(ue2, lt), T2 = T2 + Math.imul(ce2, ut) | 0, D2 = Math.imul(ce2, lt);
      var Ut = (Y2 + B2 | 0) + ((T2 & 8191) << 13) | 0;
      return Y2 = (D2 + (T2 >>> 13) | 0) + (Ut >>> 26) | 0, Ut &= 67108863, x2[0] = kt, x2[1] = Rt, x2[2] = Je2, x2[3] = ze2, x2[4] = et, x2[5] = pt, x2[6] = mt, x2[7] = vt, x2[8] = ht, x2[9] = _t, x2[10] = Et, x2[11] = Pt, x2[12] = Nt, x2[13] = Mt, x2[14] = Ot, x2[15] = $t, x2[16] = Bt, x2[17] = xt, x2[18] = Ut, Y2 !== 0 && (x2[19] = Y2, k.length++), k;
    };
    Math.imul || (ie2 = X2);
    function Q2(C2, b, E2) {
      E2.negative = b.negative ^ C2.negative, E2.length = C2.length + b.length;
      for (var k = 0, O2 = 0, A2 = 0; A2 < E2.length - 1; A2++) {
        var x2 = O2;
        O2 = 0;
        for (var Y2 = k & 67108863, B2 = Math.min(A2, b.length - 1), T2 = Math.max(0, A2 - C2.length + 1); T2 <= B2; T2++) {
          var D2 = A2 - T2, te2 = C2.words[D2] | 0, me2 = b.words[T2] | 0, Ie2 = te2 * me2, $e2 = Ie2 & 67108863;
          x2 = x2 + (Ie2 / 67108864 | 0) | 0, $e2 = $e2 + Y2 | 0, Y2 = $e2 & 67108863, x2 = x2 + ($e2 >>> 26) | 0, O2 += x2 >>> 26, x2 &= 67108863;
        }
        E2.words[A2] = Y2, k = x2, x2 = O2;
      }
      return k !== 0 ? E2.words[A2] = k : E2.length--, E2.strip();
    }
    function ne2(C2, b, E2) {
      var k = new Z2();
      return k.mulp(C2, b, E2);
    }
    p2.prototype.mulTo = function(b, E2) {
      var k, O2 = this.length + b.length;
      return this.length === 10 && b.length === 10 ? k = ie2(this, b, E2) : O2 < 63 ? k = X2(this, b, E2) : O2 < 1024 ? k = Q2(this, b, E2) : k = ne2(this, b, E2), k;
    };
    function Z2(C2, b) {
      this.x = C2, this.y = b;
    }
    Z2.prototype.makeRBT = function(b) {
      for (var E2 = new Array(b), k = p2.prototype._countBits(b) - 1, O2 = 0; O2 < b; O2++)
        E2[O2] = this.revBin(O2, k, b);
      return E2;
    }, Z2.prototype.revBin = function(b, E2, k) {
      if (b === 0 || b === k - 1)
        return b;
      for (var O2 = 0, A2 = 0; A2 < E2; A2++)
        O2 |= (b & 1) << E2 - A2 - 1, b >>= 1;
      return O2;
    }, Z2.prototype.permute = function(b, E2, k, O2, A2, x2) {
      for (var Y2 = 0; Y2 < x2; Y2++)
        O2[Y2] = E2[b[Y2]], A2[Y2] = k[b[Y2]];
    }, Z2.prototype.transform = function(b, E2, k, O2, A2, x2) {
      this.permute(x2, b, E2, k, O2, A2);
      for (var Y2 = 1; Y2 < A2; Y2 <<= 1)
        for (var B2 = Y2 << 1, T2 = Math.cos(2 * Math.PI / B2), D2 = Math.sin(2 * Math.PI / B2), te2 = 0; te2 < A2; te2 += B2)
          for (var me2 = T2, Ie2 = D2, $e2 = 0; $e2 < Y2; $e2++) {
            var ye2 = k[te2 + $e2], he2 = O2[te2 + $e2], Me2 = k[te2 + $e2 + Y2], Ae2 = O2[te2 + $e2 + Y2], xe2 = me2 * Me2 - Ie2 * Ae2;
            Ae2 = me2 * Ae2 + Ie2 * Me2, Me2 = xe2, k[te2 + $e2] = ye2 + Me2, O2[te2 + $e2] = he2 + Ae2, k[te2 + $e2 + Y2] = ye2 - Me2, O2[te2 + $e2 + Y2] = he2 - Ae2, $e2 !== B2 && (xe2 = T2 * me2 - D2 * Ie2, Ie2 = T2 * Ie2 + D2 * me2, me2 = xe2);
          }
    }, Z2.prototype.guessLen13b = function(b, E2) {
      var k = Math.max(E2, b) | 1, O2 = k & 1, A2 = 0;
      for (k = k / 2 | 0; k; k = k >>> 1)
        A2++;
      return 1 << A2 + 1 + O2;
    }, Z2.prototype.conjugate = function(b, E2, k) {
      if (!(k <= 1))
        for (var O2 = 0; O2 < k / 2; O2++) {
          var A2 = b[O2];
          b[O2] = b[k - O2 - 1], b[k - O2 - 1] = A2, A2 = E2[O2], E2[O2] = -E2[k - O2 - 1], E2[k - O2 - 1] = -A2;
        }
    }, Z2.prototype.normalize13b = function(b, E2) {
      for (var k = 0, O2 = 0; O2 < E2 / 2; O2++) {
        var A2 = Math.round(b[2 * O2 + 1] / E2) * 8192 + Math.round(b[2 * O2] / E2) + k;
        b[O2] = A2 & 67108863, A2 < 67108864 ? k = 0 : k = A2 / 67108864 | 0;
      }
      return b;
    }, Z2.prototype.convert13b = function(b, E2, k, O2) {
      for (var A2 = 0, x2 = 0; x2 < E2; x2++)
        A2 = A2 + (b[x2] | 0), k[2 * x2] = A2 & 8191, A2 = A2 >>> 13, k[2 * x2 + 1] = A2 & 8191, A2 = A2 >>> 13;
      for (x2 = 2 * E2; x2 < O2; ++x2)
        k[x2] = 0;
      l2(A2 === 0), l2((A2 & -8192) === 0);
    }, Z2.prototype.stub = function(b) {
      for (var E2 = new Array(b), k = 0; k < b; k++)
        E2[k] = 0;
      return E2;
    }, Z2.prototype.mulp = function(b, E2, k) {
      var O2 = 2 * this.guessLen13b(b.length, E2.length), A2 = this.makeRBT(O2), x2 = this.stub(O2), Y2 = new Array(O2), B2 = new Array(O2), T2 = new Array(O2), D2 = new Array(O2), te2 = new Array(O2), me2 = new Array(O2), Ie2 = k.words;
      Ie2.length = O2, this.convert13b(b.words, b.length, Y2, O2), this.convert13b(E2.words, E2.length, D2, O2), this.transform(Y2, x2, B2, T2, O2, A2), this.transform(D2, x2, te2, me2, O2, A2);
      for (var $e2 = 0; $e2 < O2; $e2++) {
        var ye2 = B2[$e2] * te2[$e2] - T2[$e2] * me2[$e2];
        T2[$e2] = B2[$e2] * me2[$e2] + T2[$e2] * te2[$e2], B2[$e2] = ye2;
      }
      return this.conjugate(B2, T2, O2), this.transform(B2, T2, Ie2, x2, O2, A2), this.conjugate(Ie2, x2, O2), this.normalize13b(Ie2, O2), k.negative = b.negative ^ E2.negative, k.length = b.length + E2.length, k.strip();
    }, p2.prototype.mul = function(b) {
      var E2 = new p2(null);
      return E2.words = new Array(this.length + b.length), this.mulTo(b, E2);
    }, p2.prototype.mulf = function(b) {
      var E2 = new p2(null);
      return E2.words = new Array(this.length + b.length), ne2(this, b, E2);
    }, p2.prototype.imul = function(b) {
      return this.clone().mulTo(b, this);
    }, p2.prototype.imuln = function(b) {
      l2(typeof b == "number"), l2(b < 67108864);
      for (var E2 = 0, k = 0; k < this.length; k++) {
        var O2 = (this.words[k] | 0) * b, A2 = (O2 & 67108863) + (E2 & 67108863);
        E2 >>= 26, E2 += O2 / 67108864 | 0, E2 += A2 >>> 26, this.words[k] = A2 & 67108863;
      }
      return E2 !== 0 && (this.words[k] = E2, this.length++), this;
    }, p2.prototype.muln = function(b) {
      return this.clone().imuln(b);
    }, p2.prototype.sqr = function() {
      return this.mul(this);
    }, p2.prototype.isqr = function() {
      return this.imul(this.clone());
    }, p2.prototype.pow = function(b) {
      var E2 = ee2(b);
      if (E2.length === 0)
        return new p2(1);
      for (var k = this, O2 = 0; O2 < E2.length && E2[O2] === 0; O2++, k = k.sqr())
        ;
      if (++O2 < E2.length)
        for (var A2 = k.sqr(); O2 < E2.length; O2++, A2 = A2.sqr())
          E2[O2] !== 0 && (k = k.mul(A2));
      return k;
    }, p2.prototype.iushln = function(b) {
      l2(typeof b == "number" && b >= 0);
      var E2 = b % 26, k = (b - E2) / 26, O2 = 67108863 >>> 26 - E2 << 26 - E2, A2;
      if (E2 !== 0) {
        var x2 = 0;
        for (A2 = 0; A2 < this.length; A2++) {
          var Y2 = this.words[A2] & O2, B2 = (this.words[A2] | 0) - Y2 << E2;
          this.words[A2] = B2 | x2, x2 = Y2 >>> 26 - E2;
        }
        x2 && (this.words[A2] = x2, this.length++);
      }
      if (k !== 0) {
        for (A2 = this.length - 1; A2 >= 0; A2--)
          this.words[A2 + k] = this.words[A2];
        for (A2 = 0; A2 < k; A2++)
          this.words[A2] = 0;
        this.length += k;
      }
      return this.strip();
    }, p2.prototype.ishln = function(b) {
      return l2(this.negative === 0), this.iushln(b);
    }, p2.prototype.iushrn = function(b, E2, k) {
      l2(typeof b == "number" && b >= 0);
      var O2;
      E2 ? O2 = (E2 - E2 % 26) / 26 : O2 = 0;
      var A2 = b % 26, x2 = Math.min((b - A2) / 26, this.length), Y2 = 67108863 ^ 67108863 >>> A2 << A2, B2 = k;
      if (O2 -= x2, O2 = Math.max(0, O2), B2) {
        for (var T2 = 0; T2 < x2; T2++)
          B2.words[T2] = this.words[T2];
        B2.length = x2;
      }
      if (x2 !== 0)
        if (this.length > x2)
          for (this.length -= x2, T2 = 0; T2 < this.length; T2++)
            this.words[T2] = this.words[T2 + x2];
        else
          this.words[0] = 0, this.length = 1;
      var D2 = 0;
      for (T2 = this.length - 1; T2 >= 0 && (D2 !== 0 || T2 >= O2); T2--) {
        var te2 = this.words[T2] | 0;
        this.words[T2] = D2 << 26 - A2 | te2 >>> A2, D2 = te2 & Y2;
      }
      return B2 && D2 !== 0 && (B2.words[B2.length++] = D2), this.length === 0 && (this.words[0] = 0, this.length = 1), this.strip();
    }, p2.prototype.ishrn = function(b, E2, k) {
      return l2(this.negative === 0), this.iushrn(b, E2, k);
    }, p2.prototype.shln = function(b) {
      return this.clone().ishln(b);
    }, p2.prototype.ushln = function(b) {
      return this.clone().iushln(b);
    }, p2.prototype.shrn = function(b) {
      return this.clone().ishrn(b);
    }, p2.prototype.ushrn = function(b) {
      return this.clone().iushrn(b);
    }, p2.prototype.testn = function(b) {
      l2(typeof b == "number" && b >= 0);
      var E2 = b % 26, k = (b - E2) / 26, O2 = 1 << E2;
      if (this.length <= k)
        return false;
      var A2 = this.words[k];
      return !!(A2 & O2);
    }, p2.prototype.imaskn = function(b) {
      l2(typeof b == "number" && b >= 0);
      var E2 = b % 26, k = (b - E2) / 26;
      if (l2(this.negative === 0, "imaskn works only with positive numbers"), this.length <= k)
        return this;
      if (E2 !== 0 && k++, this.length = Math.min(k, this.length), E2 !== 0) {
        var O2 = 67108863 ^ 67108863 >>> E2 << E2;
        this.words[this.length - 1] &= O2;
      }
      return this.strip();
    }, p2.prototype.maskn = function(b) {
      return this.clone().imaskn(b);
    }, p2.prototype.iaddn = function(b) {
      return l2(typeof b == "number"), l2(b < 67108864), b < 0 ? this.isubn(-b) : this.negative !== 0 ? this.length === 1 && (this.words[0] | 0) < b ? (this.words[0] = b - (this.words[0] | 0), this.negative = 0, this) : (this.negative = 0, this.isubn(b), this.negative = 1, this) : this._iaddn(b);
    }, p2.prototype._iaddn = function(b) {
      this.words[0] += b;
      for (var E2 = 0; E2 < this.length && this.words[E2] >= 67108864; E2++)
        this.words[E2] -= 67108864, E2 === this.length - 1 ? this.words[E2 + 1] = 1 : this.words[E2 + 1]++;
      return this.length = Math.max(this.length, E2 + 1), this;
    }, p2.prototype.isubn = function(b) {
      if (l2(typeof b == "number"), l2(b < 67108864), b < 0)
        return this.iaddn(-b);
      if (this.negative !== 0)
        return this.negative = 0, this.iaddn(b), this.negative = 1, this;
      if (this.words[0] -= b, this.length === 1 && this.words[0] < 0)
        this.words[0] = -this.words[0], this.negative = 1;
      else
        for (var E2 = 0; E2 < this.length && this.words[E2] < 0; E2++)
          this.words[E2] += 67108864, this.words[E2 + 1] -= 1;
      return this.strip();
    }, p2.prototype.addn = function(b) {
      return this.clone().iaddn(b);
    }, p2.prototype.subn = function(b) {
      return this.clone().isubn(b);
    }, p2.prototype.iabs = function() {
      return this.negative = 0, this;
    }, p2.prototype.abs = function() {
      return this.clone().iabs();
    }, p2.prototype._ishlnsubmul = function(b, E2, k) {
      var O2 = b.length + k, A2;
      this._expand(O2);
      var x2, Y2 = 0;
      for (A2 = 0; A2 < b.length; A2++) {
        x2 = (this.words[A2 + k] | 0) + Y2;
        var B2 = (b.words[A2] | 0) * E2;
        x2 -= B2 & 67108863, Y2 = (x2 >> 26) - (B2 / 67108864 | 0), this.words[A2 + k] = x2 & 67108863;
      }
      for (; A2 < this.length - k; A2++)
        x2 = (this.words[A2 + k] | 0) + Y2, Y2 = x2 >> 26, this.words[A2 + k] = x2 & 67108863;
      if (Y2 === 0)
        return this.strip();
      for (l2(Y2 === -1), Y2 = 0, A2 = 0; A2 < this.length; A2++)
        x2 = -(this.words[A2] | 0) + Y2, Y2 = x2 >> 26, this.words[A2] = x2 & 67108863;
      return this.negative = 1, this.strip();
    }, p2.prototype._wordDiv = function(b, E2) {
      var k = this.length - b.length, O2 = this.clone(), A2 = b, x2 = A2.words[A2.length - 1] | 0, Y2 = this._countBits(x2);
      k = 26 - Y2, k !== 0 && (A2 = A2.ushln(k), O2.iushln(k), x2 = A2.words[A2.length - 1] | 0);
      var B2 = O2.length - A2.length, T2;
      if (E2 !== "mod") {
        T2 = new p2(null), T2.length = B2 + 1, T2.words = new Array(T2.length);
        for (var D2 = 0; D2 < T2.length; D2++)
          T2.words[D2] = 0;
      }
      var te2 = O2.clone()._ishlnsubmul(A2, 1, B2);
      te2.negative === 0 && (O2 = te2, T2 && (T2.words[B2] = 1));
      for (var me2 = B2 - 1; me2 >= 0; me2--) {
        var Ie2 = (O2.words[A2.length + me2] | 0) * 67108864 + (O2.words[A2.length + me2 - 1] | 0);
        for (Ie2 = Math.min(Ie2 / x2 | 0, 67108863), O2._ishlnsubmul(A2, Ie2, me2); O2.negative !== 0; )
          Ie2--, O2.negative = 0, O2._ishlnsubmul(A2, 1, me2), O2.isZero() || (O2.negative ^= 1);
        T2 && (T2.words[me2] = Ie2);
      }
      return T2 && T2.strip(), O2.strip(), E2 !== "div" && k !== 0 && O2.iushrn(k), { div: T2 || null, mod: O2 };
    }, p2.prototype.divmod = function(b, E2, k) {
      if (l2(!b.isZero()), this.isZero())
        return { div: new p2(0), mod: new p2(0) };
      var O2, A2, x2;
      return this.negative !== 0 && b.negative === 0 ? (x2 = this.neg().divmod(b, E2), E2 !== "mod" && (O2 = x2.div.neg()), E2 !== "div" && (A2 = x2.mod.neg(), k && A2.negative !== 0 && A2.iadd(b)), { div: O2, mod: A2 }) : this.negative === 0 && b.negative !== 0 ? (x2 = this.divmod(b.neg(), E2), E2 !== "mod" && (O2 = x2.div.neg()), { div: O2, mod: x2.mod }) : this.negative & b.negative ? (x2 = this.neg().divmod(b.neg(), E2), E2 !== "div" && (A2 = x2.mod.neg(), k && A2.negative !== 0 && A2.isub(b)), { div: x2.div, mod: A2 }) : b.length > this.length || this.cmp(b) < 0 ? { div: new p2(0), mod: this } : b.length === 1 ? E2 === "div" ? { div: this.divn(b.words[0]), mod: null } : E2 === "mod" ? { div: null, mod: new p2(this.modn(b.words[0])) } : { div: this.divn(b.words[0]), mod: new p2(this.modn(b.words[0])) } : this._wordDiv(b, E2);
    }, p2.prototype.div = function(b) {
      return this.divmod(b, "div", false).div;
    }, p2.prototype.mod = function(b) {
      return this.divmod(b, "mod", false).mod;
    }, p2.prototype.umod = function(b) {
      return this.divmod(b, "mod", true).mod;
    }, p2.prototype.divRound = function(b) {
      var E2 = this.divmod(b);
      if (E2.mod.isZero())
        return E2.div;
      var k = E2.div.negative !== 0 ? E2.mod.isub(b) : E2.mod, O2 = b.ushrn(1), A2 = b.andln(1), x2 = k.cmp(O2);
      return x2 < 0 || A2 === 1 && x2 === 0 ? E2.div : E2.div.negative !== 0 ? E2.div.isubn(1) : E2.div.iaddn(1);
    }, p2.prototype.modn = function(b) {
      l2(b <= 67108863);
      for (var E2 = (1 << 26) % b, k = 0, O2 = this.length - 1; O2 >= 0; O2--)
        k = (E2 * k + (this.words[O2] | 0)) % b;
      return k;
    }, p2.prototype.idivn = function(b) {
      l2(b <= 67108863);
      for (var E2 = 0, k = this.length - 1; k >= 0; k--) {
        var O2 = (this.words[k] | 0) + E2 * 67108864;
        this.words[k] = O2 / b | 0, E2 = O2 % b;
      }
      return this.strip();
    }, p2.prototype.divn = function(b) {
      return this.clone().idivn(b);
    }, p2.prototype.egcd = function(b) {
      l2(b.negative === 0), l2(!b.isZero());
      var E2 = this, k = b.clone();
      E2.negative !== 0 ? E2 = E2.umod(b) : E2 = E2.clone();
      for (var O2 = new p2(1), A2 = new p2(0), x2 = new p2(0), Y2 = new p2(1), B2 = 0; E2.isEven() && k.isEven(); )
        E2.iushrn(1), k.iushrn(1), ++B2;
      for (var T2 = k.clone(), D2 = E2.clone(); !E2.isZero(); ) {
        for (var te2 = 0, me2 = 1; !(E2.words[0] & me2) && te2 < 26; ++te2, me2 <<= 1)
          ;
        if (te2 > 0)
          for (E2.iushrn(te2); te2-- > 0; )
            (O2.isOdd() || A2.isOdd()) && (O2.iadd(T2), A2.isub(D2)), O2.iushrn(1), A2.iushrn(1);
        for (var Ie2 = 0, $e2 = 1; !(k.words[0] & $e2) && Ie2 < 26; ++Ie2, $e2 <<= 1)
          ;
        if (Ie2 > 0)
          for (k.iushrn(Ie2); Ie2-- > 0; )
            (x2.isOdd() || Y2.isOdd()) && (x2.iadd(T2), Y2.isub(D2)), x2.iushrn(1), Y2.iushrn(1);
        E2.cmp(k) >= 0 ? (E2.isub(k), O2.isub(x2), A2.isub(Y2)) : (k.isub(E2), x2.isub(O2), Y2.isub(A2));
      }
      return { a: x2, b: Y2, gcd: k.iushln(B2) };
    }, p2.prototype._invmp = function(b) {
      l2(b.negative === 0), l2(!b.isZero());
      var E2 = this, k = b.clone();
      E2.negative !== 0 ? E2 = E2.umod(b) : E2 = E2.clone();
      for (var O2 = new p2(1), A2 = new p2(0), x2 = k.clone(); E2.cmpn(1) > 0 && k.cmpn(1) > 0; ) {
        for (var Y2 = 0, B2 = 1; !(E2.words[0] & B2) && Y2 < 26; ++Y2, B2 <<= 1)
          ;
        if (Y2 > 0)
          for (E2.iushrn(Y2); Y2-- > 0; )
            O2.isOdd() && O2.iadd(x2), O2.iushrn(1);
        for (var T2 = 0, D2 = 1; !(k.words[0] & D2) && T2 < 26; ++T2, D2 <<= 1)
          ;
        if (T2 > 0)
          for (k.iushrn(T2); T2-- > 0; )
            A2.isOdd() && A2.iadd(x2), A2.iushrn(1);
        E2.cmp(k) >= 0 ? (E2.isub(k), O2.isub(A2)) : (k.isub(E2), A2.isub(O2));
      }
      var te2;
      return E2.cmpn(1) === 0 ? te2 = O2 : te2 = A2, te2.cmpn(0) < 0 && te2.iadd(b), te2;
    }, p2.prototype.gcd = function(b) {
      if (this.isZero())
        return b.abs();
      if (b.isZero())
        return this.abs();
      var E2 = this.clone(), k = b.clone();
      E2.negative = 0, k.negative = 0;
      for (var O2 = 0; E2.isEven() && k.isEven(); O2++)
        E2.iushrn(1), k.iushrn(1);
      do {
        for (; E2.isEven(); )
          E2.iushrn(1);
        for (; k.isEven(); )
          k.iushrn(1);
        var A2 = E2.cmp(k);
        if (A2 < 0) {
          var x2 = E2;
          E2 = k, k = x2;
        } else if (A2 === 0 || k.cmpn(1) === 0)
          break;
        E2.isub(k);
      } while (true);
      return k.iushln(O2);
    }, p2.prototype.invm = function(b) {
      return this.egcd(b).a.umod(b);
    }, p2.prototype.isEven = function() {
      return (this.words[0] & 1) === 0;
    }, p2.prototype.isOdd = function() {
      return (this.words[0] & 1) === 1;
    }, p2.prototype.andln = function(b) {
      return this.words[0] & b;
    }, p2.prototype.bincn = function(b) {
      l2(typeof b == "number");
      var E2 = b % 26, k = (b - E2) / 26, O2 = 1 << E2;
      if (this.length <= k)
        return this._expand(k + 1), this.words[k] |= O2, this;
      for (var A2 = O2, x2 = k; A2 !== 0 && x2 < this.length; x2++) {
        var Y2 = this.words[x2] | 0;
        Y2 += A2, A2 = Y2 >>> 26, Y2 &= 67108863, this.words[x2] = Y2;
      }
      return A2 !== 0 && (this.words[x2] = A2, this.length++), this;
    }, p2.prototype.isZero = function() {
      return this.length === 1 && this.words[0] === 0;
    }, p2.prototype.cmpn = function(b) {
      var E2 = b < 0;
      if (this.negative !== 0 && !E2)
        return -1;
      if (this.negative === 0 && E2)
        return 1;
      this.strip();
      var k;
      if (this.length > 1)
        k = 1;
      else {
        E2 && (b = -b), l2(b <= 67108863, "Number is too big");
        var O2 = this.words[0] | 0;
        k = O2 === b ? 0 : O2 < b ? -1 : 1;
      }
      return this.negative !== 0 ? -k | 0 : k;
    }, p2.prototype.cmp = function(b) {
      if (this.negative !== 0 && b.negative === 0)
        return -1;
      if (this.negative === 0 && b.negative !== 0)
        return 1;
      var E2 = this.ucmp(b);
      return this.negative !== 0 ? -E2 | 0 : E2;
    }, p2.prototype.ucmp = function(b) {
      if (this.length > b.length)
        return 1;
      if (this.length < b.length)
        return -1;
      for (var E2 = 0, k = this.length - 1; k >= 0; k--) {
        var O2 = this.words[k] | 0, A2 = b.words[k] | 0;
        if (O2 !== A2) {
          O2 < A2 ? E2 = -1 : O2 > A2 && (E2 = 1);
          break;
        }
      }
      return E2;
    }, p2.prototype.gtn = function(b) {
      return this.cmpn(b) === 1;
    }, p2.prototype.gt = function(b) {
      return this.cmp(b) === 1;
    }, p2.prototype.gten = function(b) {
      return this.cmpn(b) >= 0;
    }, p2.prototype.gte = function(b) {
      return this.cmp(b) >= 0;
    }, p2.prototype.ltn = function(b) {
      return this.cmpn(b) === -1;
    }, p2.prototype.lt = function(b) {
      return this.cmp(b) === -1;
    }, p2.prototype.lten = function(b) {
      return this.cmpn(b) <= 0;
    }, p2.prototype.lte = function(b) {
      return this.cmp(b) <= 0;
    }, p2.prototype.eqn = function(b) {
      return this.cmpn(b) === 0;
    }, p2.prototype.eq = function(b) {
      return this.cmp(b) === 0;
    }, p2.red = function(b) {
      return new q2(b);
    }, p2.prototype.toRed = function(b) {
      return l2(!this.red, "Already a number in reduction context"), l2(this.negative === 0, "red works only with positives"), b.convertTo(this)._forceRed(b);
    }, p2.prototype.fromRed = function() {
      return l2(this.red, "fromRed works only with numbers in reduction context"), this.red.convertFrom(this);
    }, p2.prototype._forceRed = function(b) {
      return this.red = b, this;
    }, p2.prototype.forceRed = function(b) {
      return l2(!this.red, "Already a number in reduction context"), this._forceRed(b);
    }, p2.prototype.redAdd = function(b) {
      return l2(this.red, "redAdd works only with red numbers"), this.red.add(this, b);
    }, p2.prototype.redIAdd = function(b) {
      return l2(this.red, "redIAdd works only with red numbers"), this.red.iadd(this, b);
    }, p2.prototype.redSub = function(b) {
      return l2(this.red, "redSub works only with red numbers"), this.red.sub(this, b);
    }, p2.prototype.redISub = function(b) {
      return l2(this.red, "redISub works only with red numbers"), this.red.isub(this, b);
    }, p2.prototype.redShl = function(b) {
      return l2(this.red, "redShl works only with red numbers"), this.red.shl(this, b);
    }, p2.prototype.redMul = function(b) {
      return l2(this.red, "redMul works only with red numbers"), this.red._verify2(this, b), this.red.mul(this, b);
    }, p2.prototype.redIMul = function(b) {
      return l2(this.red, "redMul works only with red numbers"), this.red._verify2(this, b), this.red.imul(this, b);
    }, p2.prototype.redSqr = function() {
      return l2(this.red, "redSqr works only with red numbers"), this.red._verify1(this), this.red.sqr(this);
    }, p2.prototype.redISqr = function() {
      return l2(this.red, "redISqr works only with red numbers"), this.red._verify1(this), this.red.isqr(this);
    }, p2.prototype.redSqrt = function() {
      return l2(this.red, "redSqrt works only with red numbers"), this.red._verify1(this), this.red.sqrt(this);
    }, p2.prototype.redInvm = function() {
      return l2(this.red, "redInvm works only with red numbers"), this.red._verify1(this), this.red.invm(this);
    }, p2.prototype.redNeg = function() {
      return l2(this.red, "redNeg works only with red numbers"), this.red._verify1(this), this.red.neg(this);
    }, p2.prototype.redPow = function(b) {
      return l2(this.red && !b.red, "redPow(normalNum)"), this.red._verify1(this), this.red.pow(this, b);
    };
    var de2 = { k256: null, p224: null, p192: null, p25519: null };
    function pe2(C2, b) {
      this.name = C2, this.p = new p2(b, 16), this.n = this.p.bitLength(), this.k = new p2(1).iushln(this.n).isub(this.p), this.tmp = this._tmp();
    }
    pe2.prototype._tmp = function() {
      var b = new p2(null);
      return b.words = new Array(Math.ceil(this.n / 13)), b;
    }, pe2.prototype.ireduce = function(b) {
      var E2 = b, k;
      do
        this.split(E2, this.tmp), E2 = this.imulK(E2), E2 = E2.iadd(this.tmp), k = E2.bitLength();
      while (k > this.n);
      var O2 = k < this.n ? -1 : E2.ucmp(this.p);
      return O2 === 0 ? (E2.words[0] = 0, E2.length = 1) : O2 > 0 ? E2.isub(this.p) : E2.strip !== void 0 ? E2.strip() : E2._strip(), E2;
    }, pe2.prototype.split = function(b, E2) {
      b.iushrn(this.n, 0, E2);
    }, pe2.prototype.imulK = function(b) {
      return b.imul(this.k);
    };
    function le2() {
      pe2.call(this, "k256", "ffffffff ffffffff ffffffff ffffffff ffffffff ffffffff fffffffe fffffc2f");
    }
    v2(le2, pe2), le2.prototype.split = function(b, E2) {
      for (var k = 4194303, O2 = Math.min(b.length, 9), A2 = 0; A2 < O2; A2++)
        E2.words[A2] = b.words[A2];
      if (E2.length = O2, b.length <= 9) {
        b.words[0] = 0, b.length = 1;
        return;
      }
      var x2 = b.words[9];
      for (E2.words[E2.length++] = x2 & k, A2 = 10; A2 < b.length; A2++) {
        var Y2 = b.words[A2] | 0;
        b.words[A2 - 10] = (Y2 & k) << 4 | x2 >>> 22, x2 = Y2;
      }
      x2 >>>= 22, b.words[A2 - 10] = x2, x2 === 0 && b.length > 10 ? b.length -= 10 : b.length -= 9;
    }, le2.prototype.imulK = function(b) {
      b.words[b.length] = 0, b.words[b.length + 1] = 0, b.length += 2;
      for (var E2 = 0, k = 0; k < b.length; k++) {
        var O2 = b.words[k] | 0;
        E2 += O2 * 977, b.words[k] = E2 & 67108863, E2 = O2 * 64 + (E2 / 67108864 | 0);
      }
      return b.words[b.length - 1] === 0 && (b.length--, b.words[b.length - 1] === 0 && b.length--), b;
    };
    function be2() {
      pe2.call(this, "p224", "ffffffff ffffffff ffffffff ffffffff 00000000 00000000 00000001");
    }
    v2(be2, pe2);
    function ke2() {
      pe2.call(this, "p192", "ffffffff ffffffff ffffffff fffffffe ffffffff ffffffff");
    }
    v2(ke2, pe2);
    function Te2() {
      pe2.call(this, "25519", "7fffffffffffffff ffffffffffffffff ffffffffffffffff ffffffffffffffed");
    }
    v2(Te2, pe2), Te2.prototype.imulK = function(b) {
      for (var E2 = 0, k = 0; k < b.length; k++) {
        var O2 = (b.words[k] | 0) * 19 + E2, A2 = O2 & 67108863;
        O2 >>>= 26, b.words[k] = A2, E2 = O2;
      }
      return E2 !== 0 && (b.words[b.length++] = E2), b;
    }, p2._prime = function(b) {
      if (de2[b])
        return de2[b];
      var E2;
      if (b === "k256")
        E2 = new le2();
      else if (b === "p224")
        E2 = new be2();
      else if (b === "p192")
        E2 = new ke2();
      else if (b === "p25519")
        E2 = new Te2();
      else
        throw new Error("Unknown prime " + b);
      return de2[b] = E2, E2;
    };
    function q2(C2) {
      if (typeof C2 == "string") {
        var b = p2._prime(C2);
        this.m = b.p, this.prime = b;
      } else
        l2(C2.gtn(1), "modulus must be greater than 1"), this.m = C2, this.prime = null;
    }
    q2.prototype._verify1 = function(b) {
      l2(b.negative === 0, "red works only with positives"), l2(b.red, "red works only with red numbers");
    }, q2.prototype._verify2 = function(b, E2) {
      l2((b.negative | E2.negative) === 0, "red works only with positives"), l2(b.red && b.red === E2.red, "red works only with red numbers");
    }, q2.prototype.imod = function(b) {
      return this.prime ? this.prime.ireduce(b)._forceRed(this) : b.umod(this.m)._forceRed(this);
    }, q2.prototype.neg = function(b) {
      return b.isZero() ? b.clone() : this.m.sub(b)._forceRed(this);
    }, q2.prototype.add = function(b, E2) {
      this._verify2(b, E2);
      var k = b.add(E2);
      return k.cmp(this.m) >= 0 && k.isub(this.m), k._forceRed(this);
    }, q2.prototype.iadd = function(b, E2) {
      this._verify2(b, E2);
      var k = b.iadd(E2);
      return k.cmp(this.m) >= 0 && k.isub(this.m), k;
    }, q2.prototype.sub = function(b, E2) {
      this._verify2(b, E2);
      var k = b.sub(E2);
      return k.cmpn(0) < 0 && k.iadd(this.m), k._forceRed(this);
    }, q2.prototype.isub = function(b, E2) {
      this._verify2(b, E2);
      var k = b.isub(E2);
      return k.cmpn(0) < 0 && k.iadd(this.m), k;
    }, q2.prototype.shl = function(b, E2) {
      return this._verify1(b), this.imod(b.ushln(E2));
    }, q2.prototype.imul = function(b, E2) {
      return this._verify2(b, E2), this.imod(b.imul(E2));
    }, q2.prototype.mul = function(b, E2) {
      return this._verify2(b, E2), this.imod(b.mul(E2));
    }, q2.prototype.isqr = function(b) {
      return this.imul(b, b.clone());
    }, q2.prototype.sqr = function(b) {
      return this.mul(b, b);
    }, q2.prototype.sqrt = function(b) {
      if (b.isZero())
        return b.clone();
      var E2 = this.m.andln(3);
      if (l2(E2 % 2 === 1), E2 === 3) {
        var k = this.m.add(new p2(1)).iushrn(2);
        return this.pow(b, k);
      }
      for (var O2 = this.m.subn(1), A2 = 0; !O2.isZero() && O2.andln(1) === 0; )
        A2++, O2.iushrn(1);
      l2(!O2.isZero());
      var x2 = new p2(1).toRed(this), Y2 = x2.redNeg(), B2 = this.m.subn(1).iushrn(1), T2 = this.m.bitLength();
      for (T2 = new p2(2 * T2 * T2).toRed(this); this.pow(T2, B2).cmp(Y2) !== 0; )
        T2.redIAdd(Y2);
      for (var D2 = this.pow(T2, O2), te2 = this.pow(b, O2.addn(1).iushrn(1)), me2 = this.pow(b, O2), Ie2 = A2; me2.cmp(x2) !== 0; ) {
        for (var $e2 = me2, ye2 = 0; $e2.cmp(x2) !== 0; ye2++)
          $e2 = $e2.redSqr();
        l2(ye2 < Ie2);
        var he2 = this.pow(D2, new p2(1).iushln(Ie2 - ye2 - 1));
        te2 = te2.redMul(he2), D2 = he2.redSqr(), me2 = me2.redMul(D2), Ie2 = ye2;
      }
      return te2;
    }, q2.prototype.invm = function(b) {
      var E2 = b._invmp(this.m);
      return E2.negative !== 0 ? (E2.negative = 0, this.imod(E2).redNeg()) : this.imod(E2);
    }, q2.prototype.pow = function(b, E2) {
      if (E2.isZero())
        return new p2(1).toRed(this);
      if (E2.cmpn(1) === 0)
        return b.clone();
      var k = 4, O2 = new Array(1 << k);
      O2[0] = new p2(1).toRed(this), O2[1] = b;
      for (var A2 = 2; A2 < O2.length; A2++)
        O2[A2] = this.mul(O2[A2 - 1], b);
      var x2 = O2[0], Y2 = 0, B2 = 0, T2 = E2.bitLength() % 26;
      for (T2 === 0 && (T2 = 26), A2 = E2.length - 1; A2 >= 0; A2--) {
        for (var D2 = E2.words[A2], te2 = T2 - 1; te2 >= 0; te2--) {
          var me2 = D2 >> te2 & 1;
          if (x2 !== O2[0] && (x2 = this.sqr(x2)), me2 === 0 && Y2 === 0) {
            B2 = 0;
            continue;
          }
          Y2 <<= 1, Y2 |= me2, B2++, !(B2 !== k && (A2 !== 0 || te2 !== 0)) && (x2 = this.mul(x2, O2[Y2]), B2 = 0, Y2 = 0);
        }
        T2 = 26;
      }
      return x2;
    }, q2.prototype.convertTo = function(b) {
      var E2 = b.umod(this.m);
      return E2 === b ? E2.clone() : E2;
    }, q2.prototype.convertFrom = function(b) {
      var E2 = b.clone();
      return E2.red = null, E2;
    }, p2.mont = function(b) {
      return new z2(b);
    };
    function z2(C2) {
      q2.call(this, C2), this.shift = this.m.bitLength(), this.shift % 26 !== 0 && (this.shift += 26 - this.shift % 26), this.r = new p2(1).iushln(this.shift), this.r2 = this.imod(this.r.sqr()), this.rinv = this.r._invmp(this.m), this.minv = this.rinv.mul(this.r).isubn(1).div(this.m), this.minv = this.minv.umod(this.r), this.minv = this.r.sub(this.minv);
    }
    v2(z2, q2), z2.prototype.convertTo = function(b) {
      return this.imod(b.ushln(this.shift));
    }, z2.prototype.convertFrom = function(b) {
      var E2 = this.imod(b.mul(this.rinv));
      return E2.red = null, E2;
    }, z2.prototype.imul = function(b, E2) {
      if (b.isZero() || E2.isZero())
        return b.words[0] = 0, b.length = 1, b;
      var k = b.imul(E2), O2 = k.maskn(this.shift).mul(this.minv).imaskn(this.shift).mul(this.m), A2 = k.isub(O2).iushrn(this.shift), x2 = A2;
      return A2.cmp(this.m) >= 0 ? x2 = A2.isub(this.m) : A2.cmpn(0) < 0 && (x2 = A2.iadd(this.m)), x2._forceRed(this);
    }, z2.prototype.mul = function(b, E2) {
      if (b.isZero() || E2.isZero())
        return new p2(0)._forceRed(this);
      var k = b.mul(E2), O2 = k.maskn(this.shift).mul(this.minv).imaskn(this.shift).mul(this.m), A2 = k.isub(O2).iushrn(this.shift), x2 = A2;
      return A2.cmp(this.m) >= 0 ? x2 = A2.isub(this.m) : A2.cmpn(0) < 0 && (x2 = A2.iadd(this.m)), x2._forceRed(this);
    }, z2.prototype.invm = function(b) {
      var E2 = this.imod(b._invmp(this.m).mul(this.r2));
      return E2._forceRed(this);
    };
  })(a420, commonjsGlobal$1);
})(bn);
var bnExports = bn.exports, BN$2 = bnExports, Buffer$8 = safeBufferExports$3.Buffer;
function withPublic$2(a420, u2) {
  return Buffer$8.from(a420.toRed(BN$2.mont(u2.modulus)).redPow(new BN$2(u2.publicExponent)).fromRed().toArray());
}
var withPublic_1 = withPublic$2, parseKeys$1 = parseAsn1, randomBytes = browserExports, createHash$1 = browser$a, mgf$1 = mgf$2, xor$1 = xor$2, BN$1 = bnExports, withPublic$1 = withPublic_1, crt$1 = browserifyRsa, Buffer$7 = safeBufferExports$3.Buffer, publicEncrypt = function a371(u2, c, l2) {
  var v2;
  u2.padding ? v2 = u2.padding : l2 ? v2 = 1 : v2 = 4;
  var p2 = parseKeys$1(u2), _;
  if (v2 === 4)
    _ = oaep$1(p2, c);
  else if (v2 === 1)
    _ = pkcs1$1(p2, c, l2);
  else if (v2 === 3) {
    if (_ = new BN$1(c), _.cmp(p2.modulus) >= 0)
      throw new Error("data too long for modulus");
  } else
    throw new Error("unknown padding");
  return l2 ? crt$1(_, p2) : withPublic$1(_, p2);
};
function oaep$1(a420, u2) {
  var c = a420.modulus.byteLength(), l2 = u2.length, v2 = createHash$1("sha1").update(Buffer$7.alloc(0)).digest(), p2 = v2.length, _ = 2 * p2;
  if (l2 > c - _ - 2)
    throw new Error("message too long");
  var I2 = Buffer$7.alloc(c - l2 - _ - 2), P2 = c - p2 - 1, $ = randomBytes(p2), F2 = xor$1(Buffer$7.concat([v2, I2, Buffer$7.alloc(1, 1), u2], P2), mgf$1($, P2)), H2 = xor$1($, mgf$1(F2, p2));
  return new BN$1(Buffer$7.concat([Buffer$7.alloc(1), H2, F2], c));
}
function pkcs1$1(a420, u2, c) {
  var l2 = u2.length, v2 = a420.modulus.byteLength();
  if (l2 > v2 - 11)
    throw new Error("message too long");
  var p2;
  return c ? p2 = Buffer$7.alloc(v2 - l2 - 3, 255) : p2 = nonZero(v2 - l2 - 3), new BN$1(Buffer$7.concat([Buffer$7.from([0, c ? 1 : 2]), p2, Buffer$7.alloc(1), u2], v2));
}
function nonZero(a420) {
  for (var u2 = Buffer$7.allocUnsafe(a420), c = 0, l2 = randomBytes(a420 * 2), v2 = 0, p2; c < a420; )
    v2 === l2.length && (l2 = randomBytes(a420 * 2), v2 = 0), p2 = l2[v2++], p2 && (u2[c++] = p2);
  return u2;
}
var parseKeys = parseAsn1, mgf = mgf$2, xor = xor$2, BN = bnExports, crt = browserifyRsa, createHash = browser$a, withPublic = withPublic_1, Buffer$6 = safeBufferExports$3.Buffer, privateDecrypt = function a372(u2, c, l2) {
  var v2;
  u2.padding ? v2 = u2.padding : l2 ? v2 = 1 : v2 = 4;
  var p2 = parseKeys(u2), _ = p2.modulus.byteLength();
  if (c.length > _ || new BN(c).cmp(p2.modulus) >= 0)
    throw new Error("decryption error");
  var I2;
  l2 ? I2 = withPublic(new BN(c), p2) : I2 = crt(c, p2);
  var P2 = Buffer$6.alloc(_ - I2.length);
  if (I2 = Buffer$6.concat([P2, I2], _), v2 === 4)
    return oaep(p2, I2);
  if (v2 === 1)
    return pkcs1(p2, I2, l2);
  if (v2 === 3)
    return I2;
  throw new Error("unknown padding");
};
function oaep(a420, u2) {
  var c = a420.modulus.byteLength(), l2 = createHash("sha1").update(Buffer$6.alloc(0)).digest(), v2 = l2.length;
  if (u2[0] !== 0)
    throw new Error("decryption error");
  var p2 = u2.slice(1, v2 + 1), _ = u2.slice(v2 + 1), I2 = xor(p2, mgf(_, v2)), P2 = xor(_, mgf(I2, c - v2 - 1));
  if (compare(l2, P2.slice(0, v2)))
    throw new Error("decryption error");
  for (var $ = v2; P2[$] === 0; )
    $++;
  if (P2[$++] !== 1)
    throw new Error("decryption error");
  return P2.slice($);
}
function pkcs1(a420, u2, c) {
  for (var l2 = u2.slice(0, 2), v2 = 2, p2 = 0; u2[v2++] !== 0; )
    if (v2 >= u2.length) {
      p2++;
      break;
    }
  var _ = u2.slice(2, v2 - 1);
  if ((l2.toString("hex") !== "0002" && !c || l2.toString("hex") !== "0001" && c) && p2++, _.length < 8 && p2++, p2)
    throw new Error("decryption error");
  return u2.slice(v2);
}
function compare(a420, u2) {
  a420 = Buffer$6.from(a420), u2 = Buffer$6.from(u2);
  var c = 0, l2 = a420.length;
  a420.length !== u2.length && (c++, l2 = Math.min(a420.length, u2.length));
  for (var v2 = -1; ++v2 < l2; )
    c += a420[v2] ^ u2[v2];
  return c;
}
(function(a420) {
  a420.publicEncrypt = publicEncrypt, a420.privateDecrypt = privateDecrypt, a420.privateEncrypt = function(c, l2) {
    return a420.publicEncrypt(c, l2, true);
  }, a420.publicDecrypt = function(c, l2) {
    return a420.privateDecrypt(c, l2, true);
  };
})(browser$2);
var browser$1 = {};
function oldBrowser() {
  throw new Error(`secure random number generation not supported by this browser
use chrome, FireFox or Internet Explorer 11`);
}
var safeBuffer = safeBufferExports$3, randombytes = browserExports, Buffer$5 = safeBuffer.Buffer, kBufferMaxLength = safeBuffer.kMaxLength, crypto$2 = commonjsGlobal$1.crypto || commonjsGlobal$1.msCrypto, kMaxUint32 = Math.pow(2, 32) - 1;
function assertOffset(a420, u2) {
  if (typeof a420 != "number" || a420 !== a420)
    throw new TypeError("offset must be a number");
  if (a420 > kMaxUint32 || a420 < 0)
    throw new TypeError("offset must be a uint32");
  if (a420 > kBufferMaxLength || a420 > u2)
    throw new RangeError("offset out of range");
}
function assertSize(a420, u2, c) {
  if (typeof a420 != "number" || a420 !== a420)
    throw new TypeError("size must be a number");
  if (a420 > kMaxUint32 || a420 < 0)
    throw new TypeError("size must be a uint32");
  if (a420 + u2 > c || a420 > kBufferMaxLength)
    throw new RangeError("buffer too small");
}
crypto$2 && crypto$2.getRandomValues || !process$1.browser ? (browser$1.randomFill = randomFill, browser$1.randomFillSync = randomFillSync) : (browser$1.randomFill = oldBrowser, browser$1.randomFillSync = oldBrowser);
function randomFill(a420, u2, c, l2) {
  if (!Buffer$5.isBuffer(a420) && !(a420 instanceof commonjsGlobal$1.Uint8Array))
    throw new TypeError('"buf" argument must be a Buffer or Uint8Array');
  if (typeof u2 == "function")
    l2 = u2, u2 = 0, c = a420.length;
  else if (typeof c == "function")
    l2 = c, c = a420.length - u2;
  else if (typeof l2 != "function")
    throw new TypeError('"cb" argument must be a function');
  return assertOffset(u2, a420.length), assertSize(c, u2, a420.length), actualFill(a420, u2, c, l2);
}
function actualFill(a420, u2, c, l2) {
  if (process$1.browser) {
    var v2 = a420.buffer, p2 = new Uint8Array(v2, u2, c);
    if (crypto$2.getRandomValues(p2), l2) {
      process$1.nextTick(function() {
        l2(null, a420);
      });
      return;
    }
    return a420;
  }
  if (l2) {
    randombytes(c, function(I2, P2) {
      if (I2)
        return l2(I2);
      P2.copy(a420, u2), l2(null, a420);
    });
    return;
  }
  var _ = randombytes(c);
  return _.copy(a420, u2), a420;
}
function randomFillSync(a420, u2, c) {
  if (typeof u2 > "u" && (u2 = 0), !Buffer$5.isBuffer(a420) && !(a420 instanceof commonjsGlobal$1.Uint8Array))
    throw new TypeError('"buf" argument must be a Buffer or Uint8Array');
  return assertOffset(u2, a420.length), c === void 0 && (c = a420.length - u2), assertSize(c, u2, a420.length), actualFill(a420, u2, c);
}
var hasRequiredCryptoBrowserify;
function requireCryptoBrowserify() {
  if (hasRequiredCryptoBrowserify)
    return cryptoBrowserify;
  hasRequiredCryptoBrowserify = 1, cryptoBrowserify.randomBytes = cryptoBrowserify.rng = cryptoBrowserify.pseudoRandomBytes = cryptoBrowserify.prng = browserExports, cryptoBrowserify.createHash = cryptoBrowserify.Hash = browser$a, cryptoBrowserify.createHmac = cryptoBrowserify.Hmac = browser$9;
  var a420 = algos, u2 = Object.keys(a420), c = ["sha1", "sha224", "sha256", "sha384", "sha512", "md5", "rmd160"].concat(u2);
  cryptoBrowserify.getHashes = function() {
    return c;
  };
  var l2 = browser$8;
  cryptoBrowserify.pbkdf2 = l2.pbkdf2, cryptoBrowserify.pbkdf2Sync = l2.pbkdf2Sync;
  var v2 = browser$7;
  cryptoBrowserify.Cipher = v2.Cipher, cryptoBrowserify.createCipher = v2.createCipher, cryptoBrowserify.Cipheriv = v2.Cipheriv, cryptoBrowserify.createCipheriv = v2.createCipheriv, cryptoBrowserify.Decipher = v2.Decipher, cryptoBrowserify.createDecipher = v2.createDecipher, cryptoBrowserify.Decipheriv = v2.Decipheriv, cryptoBrowserify.createDecipheriv = v2.createDecipheriv, cryptoBrowserify.getCiphers = v2.getCiphers, cryptoBrowserify.listCiphers = v2.listCiphers;
  var p2 = requireBrowser$2();
  cryptoBrowserify.DiffieHellmanGroup = p2.DiffieHellmanGroup, cryptoBrowserify.createDiffieHellmanGroup = p2.createDiffieHellmanGroup, cryptoBrowserify.getDiffieHellman = p2.getDiffieHellman, cryptoBrowserify.createDiffieHellman = p2.createDiffieHellman, cryptoBrowserify.DiffieHellman = p2.DiffieHellman;
  var _ = requireBrowser$1();
  cryptoBrowserify.createSign = _.createSign, cryptoBrowserify.Sign = _.Sign, cryptoBrowserify.createVerify = _.createVerify, cryptoBrowserify.Verify = _.Verify, cryptoBrowserify.createECDH = requireBrowser();
  var I2 = browser$2;
  cryptoBrowserify.publicEncrypt = I2.publicEncrypt, cryptoBrowserify.privateEncrypt = I2.privateEncrypt, cryptoBrowserify.publicDecrypt = I2.publicDecrypt, cryptoBrowserify.privateDecrypt = I2.privateDecrypt;
  var P2 = browser$1;
  return cryptoBrowserify.randomFill = P2.randomFill, cryptoBrowserify.randomFillSync = P2.randomFillSync, cryptoBrowserify.createCredentials = function() {
    throw new Error(["sorry, createCredentials is not implemented yet", "we accept pull requests", "https://github.com/crypto-browserify/crypto-browserify"].join(`
`));
  }, cryptoBrowserify.constants = { DH_CHECK_P_NOT_SAFE_PRIME: 2, DH_CHECK_P_NOT_PRIME: 1, DH_UNABLE_TO_CHECK_GENERATOR: 4, DH_NOT_SUITABLE_GENERATOR: 8, NPN_ENABLED: 1, ALPN_ENABLED: 1, RSA_PKCS1_PADDING: 1, RSA_SSLV23_PADDING: 2, RSA_NO_PADDING: 3, RSA_PKCS1_OAEP_PADDING: 4, RSA_X931_PADDING: 5, RSA_PKCS1_PSS_PADDING: 6, POINT_CONVERSION_COMPRESSED: 2, POINT_CONVERSION_UNCOMPRESSED: 4, POINT_CONVERSION_HYBRID: 6 }, cryptoBrowserify;
}
function getParamSize(a420) {
  var u2 = (a420 / 8 | 0) + (a420 % 8 === 0 ? 0 : 1);
  return u2;
}
var paramBytesForAlg = { ES256: getParamSize(256), ES384: getParamSize(384), ES512: getParamSize(521) };
function getParamBytesForAlg$1(a420) {
  var u2 = paramBytesForAlg[a420];
  if (u2)
    return u2;
  throw new Error('Unknown algorithm "' + a420 + '"');
}
var paramBytesForAlg_1 = getParamBytesForAlg$1, Buffer$4 = safeBufferExports$3.Buffer, getParamBytesForAlg = paramBytesForAlg_1, MAX_OCTET = 128, CLASS_UNIVERSAL = 0, PRIMITIVE_BIT = 32, TAG_SEQ = 16, TAG_INT = 2, ENCODED_TAG_SEQ = TAG_SEQ | PRIMITIVE_BIT | CLASS_UNIVERSAL << 6, ENCODED_TAG_INT = TAG_INT | CLASS_UNIVERSAL << 6;
function base64Url(a420) {
  return a420.replace(/=/g, "").replace(/\+/g, "-").replace(/\//g, "_");
}
function signatureAsBuffer(a420) {
  if (Buffer$4.isBuffer(a420))
    return a420;
  if (typeof a420 == "string")
    return Buffer$4.from(a420, "base64");
  throw new TypeError("ECDSA signature must be a Base64 string or a Buffer");
}
function derToJose(a420, u2) {
  a420 = signatureAsBuffer(a420);
  var c = getParamBytesForAlg(u2), l2 = c + 1, v2 = a420.length, p2 = 0;
  if (a420[p2++] !== ENCODED_TAG_SEQ)
    throw new Error('Could not find expected "seq"');
  var _ = a420[p2++];
  if (_ === (MAX_OCTET | 1) && (_ = a420[p2++]), v2 - p2 < _)
    throw new Error('"seq" specified length of "' + _ + '", only "' + (v2 - p2) + '" remaining');
  if (a420[p2++] !== ENCODED_TAG_INT)
    throw new Error('Could not find expected "int" for "r"');
  var I2 = a420[p2++];
  if (v2 - p2 - 2 < I2)
    throw new Error('"r" specified length of "' + I2 + '", only "' + (v2 - p2 - 2) + '" available');
  if (l2 < I2)
    throw new Error('"r" specified length of "' + I2 + '", max of "' + l2 + '" is acceptable');
  var P2 = p2;
  if (p2 += I2, a420[p2++] !== ENCODED_TAG_INT)
    throw new Error('Could not find expected "int" for "s"');
  var $ = a420[p2++];
  if (v2 - p2 !== $)
    throw new Error('"s" specified length of "' + $ + '", expected "' + (v2 - p2) + '"');
  if (l2 < $)
    throw new Error('"s" specified length of "' + $ + '", max of "' + l2 + '" is acceptable');
  var F2 = p2;
  if (p2 += $, p2 !== v2)
    throw new Error('Expected to consume entire buffer, but "' + (v2 - p2) + '" bytes remain');
  var H2 = c - I2, j = c - $, ee2 = Buffer$4.allocUnsafe(H2 + I2 + j + $);
  for (p2 = 0; p2 < H2; ++p2)
    ee2[p2] = 0;
  a420.copy(ee2, p2, P2 + Math.max(-H2, 0), P2 + I2), p2 = c;
  for (var X2 = p2; p2 < X2 + j; ++p2)
    ee2[p2] = 0;
  return a420.copy(ee2, p2, F2 + Math.max(-j, 0), F2 + $), ee2 = ee2.toString("base64"), ee2 = base64Url(ee2), ee2;
}
function countPadding(a420, u2, c) {
  for (var l2 = 0; u2 + l2 < c && a420[u2 + l2] === 0; )
    ++l2;
  var v2 = a420[u2 + l2] >= MAX_OCTET;
  return v2 && --l2, l2;
}
function joseToDer(a420, u2) {
  a420 = signatureAsBuffer(a420);
  var c = getParamBytesForAlg(u2), l2 = a420.length;
  if (l2 !== c * 2)
    throw new TypeError('"' + u2 + '" signatures must be "' + c * 2 + '" bytes, saw "' + l2 + '"');
  var v2 = countPadding(a420, 0, c), p2 = countPadding(a420, c, a420.length), _ = c - v2, I2 = c - p2, P2 = 2 + _ + 1 + 1 + I2, $ = P2 < MAX_OCTET, F2 = Buffer$4.allocUnsafe(($ ? 2 : 3) + P2), H2 = 0;
  return F2[H2++] = ENCODED_TAG_SEQ, $ ? F2[H2++] = P2 : (F2[H2++] = MAX_OCTET | 1, F2[H2++] = P2 & 255), F2[H2++] = ENCODED_TAG_INT, F2[H2++] = _, v2 < 0 ? (F2[H2++] = 0, H2 += a420.copy(F2, H2, 0, c)) : H2 += a420.copy(F2, H2, v2, c), F2[H2++] = ENCODED_TAG_INT, F2[H2++] = I2, p2 < 0 ? (F2[H2++] = 0, a420.copy(F2, H2, c)) : a420.copy(F2, H2, c + p2), F2;
}
var ecdsaSigFormatter = { derToJose, joseToDer }, bufferEqual = bufferEqualConstantTime, Buffer$3 = safeBufferExports$3.Buffer, crypto$1 = requireCryptoBrowserify(), formatEcdsa = ecdsaSigFormatter, util$2 = util$4, MSG_INVALID_ALGORITHM = `"%s" is not a valid algorithm.
  Supported algorithms are:
  "HS256", "HS384", "HS512", "RS256", "RS384", "RS512", "PS256", "PS384", "PS512", "ES256", "ES384", "ES512" and "none".`, MSG_INVALID_SECRET = "secret must be a string or buffer", MSG_INVALID_VERIFIER_KEY = "key must be a string or a buffer", MSG_INVALID_SIGNER_KEY = "key must be a string, a buffer or an object", supportsKeyObjects = typeof crypto$1.createPublicKey == "function";
supportsKeyObjects && (MSG_INVALID_VERIFIER_KEY += " or a KeyObject", MSG_INVALID_SECRET += "or a KeyObject");
function checkIsPublicKey(a420) {
  if (!Buffer$3.isBuffer(a420) && typeof a420 != "string" && (!supportsKeyObjects || typeof a420 != "object" || typeof a420.type != "string" || typeof a420.asymmetricKeyType != "string" || typeof a420.export != "function"))
    throw typeError(MSG_INVALID_VERIFIER_KEY);
}
function checkIsPrivateKey(a420) {
  if (!Buffer$3.isBuffer(a420) && typeof a420 != "string" && typeof a420 != "object")
    throw typeError(MSG_INVALID_SIGNER_KEY);
}
function checkIsSecretKey(a420) {
  if (!Buffer$3.isBuffer(a420)) {
    if (typeof a420 == "string")
      return a420;
    if (!supportsKeyObjects || typeof a420 != "object" || a420.type !== "secret" || typeof a420.export != "function")
      throw typeError(MSG_INVALID_SECRET);
  }
}
function fromBase64(a420) {
  return a420.replace(/=/g, "").replace(/\+/g, "-").replace(/\//g, "_");
}
function toBase64(a420) {
  a420 = a420.toString();
  var u2 = 4 - a420.length % 4;
  if (u2 !== 4)
    for (var c = 0; c < u2; ++c)
      a420 += "=";
  return a420.replace(/\-/g, "+").replace(/_/g, "/");
}
function typeError(a420) {
  var u2 = [].slice.call(arguments, 1), c = util$2.format.bind(util$2, a420).apply(null, u2);
  return new TypeError(c);
}
function bufferOrString(a420) {
  return Buffer$3.isBuffer(a420) || typeof a420 == "string";
}
function normalizeInput(a420) {
  return bufferOrString(a420) || (a420 = JSON.stringify(a420)), a420;
}
function createHmacSigner(a420) {
  return function(c, l2) {
    checkIsSecretKey(l2), c = normalizeInput(c);
    var v2 = crypto$1.createHmac("sha" + a420, l2), p2 = (v2.update(c), v2.digest("base64"));
    return fromBase64(p2);
  };
}
function createHmacVerifier(a420) {
  return function(c, l2, v2) {
    var p2 = createHmacSigner(a420)(c, v2);
    return bufferEqual(Buffer$3.from(l2), Buffer$3.from(p2));
  };
}
function createKeySigner(a420) {
  return function(c, l2) {
    checkIsPrivateKey(l2), c = normalizeInput(c);
    var v2 = crypto$1.createSign("RSA-SHA" + a420), p2 = (v2.update(c), v2.sign(l2, "base64"));
    return fromBase64(p2);
  };
}
function createKeyVerifier(a420) {
  return function(c, l2, v2) {
    checkIsPublicKey(v2), c = normalizeInput(c), l2 = toBase64(l2);
    var p2 = crypto$1.createVerify("RSA-SHA" + a420);
    return p2.update(c), p2.verify(v2, l2, "base64");
  };
}
function createPSSKeySigner(a420) {
  return function(c, l2) {
    checkIsPrivateKey(l2), c = normalizeInput(c);
    var v2 = crypto$1.createSign("RSA-SHA" + a420), p2 = (v2.update(c), v2.sign({ key: l2, padding: crypto$1.constants.RSA_PKCS1_PSS_PADDING, saltLength: crypto$1.constants.RSA_PSS_SALTLEN_DIGEST }, "base64"));
    return fromBase64(p2);
  };
}
function createPSSKeyVerifier(a420) {
  return function(c, l2, v2) {
    checkIsPublicKey(v2), c = normalizeInput(c), l2 = toBase64(l2);
    var p2 = crypto$1.createVerify("RSA-SHA" + a420);
    return p2.update(c), p2.verify({ key: v2, padding: crypto$1.constants.RSA_PKCS1_PSS_PADDING, saltLength: crypto$1.constants.RSA_PSS_SALTLEN_DIGEST }, l2, "base64");
  };
}
function createECDSASigner(a420) {
  var u2 = createKeySigner(a420);
  return function() {
    var l2 = u2.apply(null, arguments);
    return l2 = formatEcdsa.derToJose(l2, "ES" + a420), l2;
  };
}
function createECDSAVerifer(a420) {
  var u2 = createKeyVerifier(a420);
  return function(l2, v2, p2) {
    v2 = formatEcdsa.joseToDer(v2, "ES" + a420).toString("base64");
    var _ = u2(l2, v2, p2);
    return _;
  };
}
function createNoneSigner() {
  return function() {
    return "";
  };
}
function createNoneVerifier() {
  return function(u2, c) {
    return c === "";
  };
}
var jwa$2 = function a373(u2) {
  var c = { hs: createHmacSigner, rs: createKeySigner, ps: createPSSKeySigner, es: createECDSASigner, none: createNoneSigner }, l2 = { hs: createHmacVerifier, rs: createKeyVerifier, ps: createPSSKeyVerifier, es: createECDSAVerifer, none: createNoneVerifier }, v2 = u2.match(/^(RS|PS|ES|HS)(256|384|512)$|^(none)$/i);
  if (!v2)
    throw typeError(MSG_INVALID_ALGORITHM, u2);
  var p2 = (v2[1] || v2[3]).toLowerCase(), _ = v2[2];
  return { sign: c[p2](_), verify: l2[p2](_) };
}, Buffer$2 = require$$0$2.Buffer, tostring = function a374(u2) {
  return typeof u2 == "string" ? u2 : typeof u2 == "number" || Buffer$2.isBuffer(u2) ? u2.toString() : JSON.stringify(u2);
}, Buffer$1 = safeBufferExports$3.Buffer, DataStream$1 = dataStream, jwa$1 = jwa$2, Stream$1 = streamBrowserify, toString$2 = tostring, util$1 = util$4;
function base64url(a420, u2) {
  return Buffer$1.from(a420, u2).toString("base64").replace(/=/g, "").replace(/\+/g, "-").replace(/\//g, "_");
}
function jwsSecuredInput(a420, u2, c) {
  c = c || "utf8";
  var l2 = base64url(toString$2(a420), "binary"), v2 = base64url(toString$2(u2), c);
  return util$1.format("%s.%s", l2, v2);
}
function jwsSign(a420) {
  var u2 = a420.header, c = a420.payload, l2 = a420.secret || a420.privateKey, v2 = a420.encoding, p2 = jwa$1(u2.alg), _ = jwsSecuredInput(u2, c, v2), I2 = p2.sign(_, l2);
  return util$1.format("%s.%s", _, I2);
}
function SignStream$1(a420) {
  var u2 = a420.secret || a420.privateKey || a420.key, c = new DataStream$1(u2);
  this.readable = true, this.header = a420.header, this.encoding = a420.encoding, this.secret = this.privateKey = this.key = c, this.payload = new DataStream$1(a420.payload), this.secret.once("close", (function() {
    !this.payload.writable && this.readable && this.sign();
  }).bind(this)), this.payload.once("close", (function() {
    !this.secret.writable && this.readable && this.sign();
  }).bind(this));
}
util$1.inherits(SignStream$1, Stream$1);
SignStream$1.prototype.sign = function a375() {
  try {
    var u2 = jwsSign({ header: this.header, payload: this.payload.buffer, secret: this.secret.buffer, encoding: this.encoding });
    return this.emit("done", u2), this.emit("data", u2), this.emit("end"), this.readable = false, u2;
  } catch (c) {
    this.readable = false, this.emit("error", c), this.emit("close");
  }
};
SignStream$1.sign = jwsSign;
var signStream = SignStream$1, Buffer = safeBufferExports$3.Buffer, DataStream = dataStream, jwa = jwa$2, Stream = streamBrowserify, toString$1 = tostring, util = util$4, JWS_REGEX = /^[a-zA-Z0-9\-_]+?\.[a-zA-Z0-9\-_]+?\.([a-zA-Z0-9\-_]+)?$/;
function isObject$7(a420) {
  return Object.prototype.toString.call(a420) === "[object Object]";
}
function safeJsonParse(a420) {
  if (isObject$7(a420))
    return a420;
  try {
    return JSON.parse(a420);
  } catch {
    return;
  }
}
function headerFromJWS(a420) {
  var u2 = a420.split(".", 1)[0];
  return safeJsonParse(Buffer.from(u2, "base64").toString("binary"));
}
function securedInputFromJWS(a420) {
  return a420.split(".", 2).join(".");
}
function signatureFromJWS(a420) {
  return a420.split(".")[2];
}
function payloadFromJWS(a420, u2) {
  u2 = u2 || "utf8";
  var c = a420.split(".")[1];
  return Buffer.from(c, "base64").toString(u2);
}
function isValidJws(a420) {
  return JWS_REGEX.test(a420) && !!headerFromJWS(a420);
}
function jwsVerify(a420, u2, c) {
  if (!u2) {
    var l2 = new Error("Missing algorithm parameter for jws.verify");
    throw l2.code = "MISSING_ALGORITHM", l2;
  }
  a420 = toString$1(a420);
  var v2 = signatureFromJWS(a420), p2 = securedInputFromJWS(a420), _ = jwa(u2);
  return _.verify(p2, v2, c);
}
function jwsDecode(a420, u2) {
  if (u2 = u2 || {}, a420 = toString$1(a420), !isValidJws(a420))
    return null;
  var c = headerFromJWS(a420);
  if (!c)
    return null;
  var l2 = payloadFromJWS(a420);
  return (c.typ === "JWT" || u2.json) && (l2 = JSON.parse(l2, u2.encoding)), { header: c, payload: l2, signature: signatureFromJWS(a420) };
}
function VerifyStream$1(a420) {
  a420 = a420 || {};
  var u2 = a420.secret || a420.publicKey || a420.key, c = new DataStream(u2);
  this.readable = true, this.algorithm = a420.algorithm, this.encoding = a420.encoding, this.secret = this.publicKey = this.key = c, this.signature = new DataStream(a420.signature), this.secret.once("close", (function() {
    !this.signature.writable && this.readable && this.verify();
  }).bind(this)), this.signature.once("close", (function() {
    !this.secret.writable && this.readable && this.verify();
  }).bind(this));
}
util.inherits(VerifyStream$1, Stream);
VerifyStream$1.prototype.verify = function a376() {
  try {
    var u2 = jwsVerify(this.signature.buffer, this.algorithm, this.key.buffer), c = jwsDecode(this.signature.buffer, this.encoding);
    return this.emit("done", u2, c), this.emit("data", u2), this.emit("end"), this.readable = false, u2;
  } catch (l2) {
    this.readable = false, this.emit("error", l2), this.emit("close");
  }
};
VerifyStream$1.decode = jwsDecode;
VerifyStream$1.isValid = isValidJws;
VerifyStream$1.verify = jwsVerify;
var verifyStream = VerifyStream$1, SignStream = signStream, VerifyStream = verifyStream, ALGORITHMS = ["HS256", "HS384", "HS512", "RS256", "RS384", "RS512", "PS256", "PS384", "PS512", "ES256", "ES384", "ES512"];
jws$3.ALGORITHMS = ALGORITHMS;
jws$3.sign = SignStream.sign;
jws$3.verify = VerifyStream.verify;
jws$3.decode = VerifyStream.decode;
jws$3.isValid = VerifyStream.isValid;
jws$3.createSign = function a377(u2) {
  return new SignStream(u2);
};
jws$3.createVerify = function a378(u2) {
  return new VerifyStream(u2);
};
var jws$2 = jws$3, decode$1 = function(a420, u2) {
  u2 = u2 || {};
  var c = jws$2.decode(a420, u2);
  if (!c)
    return null;
  var l2 = c.payload;
  if (typeof l2 == "string")
    try {
      var v2 = JSON.parse(l2);
      v2 !== null && typeof v2 == "object" && (l2 = v2);
    } catch {
    }
  return u2.complete === true ? { header: c.header, payload: l2, signature: c.signature } : l2;
}, JsonWebTokenError$3 = function(a420, u2) {
  Error.call(this, a420), Error.captureStackTrace && Error.captureStackTrace(this, this.constructor), this.name = "JsonWebTokenError", this.message = a420, u2 && (this.inner = u2);
};
JsonWebTokenError$3.prototype = Object.create(Error.prototype);
JsonWebTokenError$3.prototype.constructor = JsonWebTokenError$3;
var JsonWebTokenError_1 = JsonWebTokenError$3, JsonWebTokenError$2 = JsonWebTokenError_1, NotBeforeError$1 = function(a420, u2) {
  JsonWebTokenError$2.call(this, a420), this.name = "NotBeforeError", this.date = u2;
};
NotBeforeError$1.prototype = Object.create(JsonWebTokenError$2.prototype);
NotBeforeError$1.prototype.constructor = NotBeforeError$1;
var NotBeforeError_1 = NotBeforeError$1, JsonWebTokenError$1 = JsonWebTokenError_1, TokenExpiredError$1 = function(a420, u2) {
  JsonWebTokenError$1.call(this, a420), this.name = "TokenExpiredError", this.expiredAt = u2;
};
TokenExpiredError$1.prototype = Object.create(JsonWebTokenError$1.prototype);
TokenExpiredError$1.prototype.constructor = TokenExpiredError$1;
var TokenExpiredError_1 = TokenExpiredError$1, s = 1e3, m$1 = s * 60, h = m$1 * 60, d = h * 24, w = d * 7, y = d * 365.25, ms$1 = function(a420, u2) {
  u2 = u2 || {};
  var c = typeof a420;
  if (c === "string" && a420.length > 0)
    return parse$2(a420);
  if (c === "number" && isFinite(a420))
    return u2.long ? fmtLong(a420) : fmtShort(a420);
  throw new Error("val is not a non-empty string or a valid number. val=" + JSON.stringify(a420));
};
function parse$2(a420) {
  if (a420 = String(a420), !(a420.length > 100)) {
    var u2 = /^(-?(?:\d+)?\.?\d+) *(milliseconds?|msecs?|ms|seconds?|secs?|s|minutes?|mins?|m|hours?|hrs?|h|days?|d|weeks?|w|years?|yrs?|y)?$/i.exec(a420);
    if (u2) {
      var c = parseFloat(u2[1]), l2 = (u2[2] || "ms").toLowerCase();
      switch (l2) {
        case "years":
        case "year":
        case "yrs":
        case "yr":
        case "y":
          return c * y;
        case "weeks":
        case "week":
        case "w":
          return c * w;
        case "days":
        case "day":
        case "d":
          return c * d;
        case "hours":
        case "hour":
        case "hrs":
        case "hr":
        case "h":
          return c * h;
        case "minutes":
        case "minute":
        case "mins":
        case "min":
        case "m":
          return c * m$1;
        case "seconds":
        case "second":
        case "secs":
        case "sec":
        case "s":
          return c * s;
        case "milliseconds":
        case "millisecond":
        case "msecs":
        case "msec":
        case "ms":
          return c;
        default:
          return;
      }
    }
  }
}
function fmtShort(a420) {
  var u2 = Math.abs(a420);
  return u2 >= d ? Math.round(a420 / d) + "d" : u2 >= h ? Math.round(a420 / h) + "h" : u2 >= m$1 ? Math.round(a420 / m$1) + "m" : u2 >= s ? Math.round(a420 / s) + "s" : a420 + "ms";
}
function fmtLong(a420) {
  var u2 = Math.abs(a420);
  return u2 >= d ? plural(a420, u2, d, "day") : u2 >= h ? plural(a420, u2, h, "hour") : u2 >= m$1 ? plural(a420, u2, m$1, "minute") : u2 >= s ? plural(a420, u2, s, "second") : a420 + " ms";
}
function plural(a420, u2, c, l2) {
  var v2 = u2 >= c * 1.5;
  return Math.round(a420 / c) + " " + l2 + (v2 ? "s" : "");
}
var ms = ms$1, timespan$2 = function(a420, u2) {
  var c = u2 || Math.floor(Date.now() / 1e3);
  if (typeof a420 == "string") {
    var l2 = ms(a420);
    return typeof l2 > "u" ? void 0 : Math.floor(c + l2 / 1e3);
  } else
    return typeof a420 == "number" ? c + a420 : void 0;
}, semver$1 = { exports: {} };
(function(a420, u2) {
  u2 = a420.exports = qe2;
  var c;
  typeof process$1 == "object" && process$1.env && process$1.env.NODE_DEBUG && /\bsemver\b/i.test(process$1.env.NODE_DEBUG) ? c = function() {
    var Je2 = Array.prototype.slice.call(arguments, 0);
    Je2.unshift("SEMVER"), console.log.apply(console, Je2);
  } : c = function() {
  }, u2.SEMVER_SPEC_VERSION = "2.0.0";
  var l2 = 256, v2 = Number.MAX_SAFE_INTEGER || /* istanbul ignore next */
  9007199254740991, p2 = 16, _ = u2.re = [], I2 = u2.src = [], P2 = 0, $ = P2++;
  I2[$] = "0|[1-9]\\d*";
  var F2 = P2++;
  I2[F2] = "[0-9]+";
  var H2 = P2++;
  I2[H2] = "\\d*[a-zA-Z-][a-zA-Z0-9-]*";
  var j = P2++;
  I2[j] = "(" + I2[$] + ")\\.(" + I2[$] + ")\\.(" + I2[$] + ")";
  var ee2 = P2++;
  I2[ee2] = "(" + I2[F2] + ")\\.(" + I2[F2] + ")\\.(" + I2[F2] + ")";
  var X2 = P2++;
  I2[X2] = "(?:" + I2[$] + "|" + I2[H2] + ")";
  var ie2 = P2++;
  I2[ie2] = "(?:" + I2[F2] + "|" + I2[H2] + ")";
  var Q2 = P2++;
  I2[Q2] = "(?:-(" + I2[X2] + "(?:\\." + I2[X2] + ")*))";
  var ne2 = P2++;
  I2[ne2] = "(?:-?(" + I2[ie2] + "(?:\\." + I2[ie2] + ")*))";
  var Z2 = P2++;
  I2[Z2] = "[0-9A-Za-z-]+";
  var de2 = P2++;
  I2[de2] = "(?:\\+(" + I2[Z2] + "(?:\\." + I2[Z2] + ")*))";
  var pe2 = P2++, le2 = "v?" + I2[j] + I2[Q2] + "?" + I2[de2] + "?";
  I2[pe2] = "^" + le2 + "$";
  var be2 = "[v=\\s]*" + I2[ee2] + I2[ne2] + "?" + I2[de2] + "?", ke2 = P2++;
  I2[ke2] = "^" + be2 + "$";
  var Te2 = P2++;
  I2[Te2] = "((?:<|>)?=?)";
  var q2 = P2++;
  I2[q2] = I2[F2] + "|x|X|\\*";
  var z2 = P2++;
  I2[z2] = I2[$] + "|x|X|\\*";
  var C2 = P2++;
  I2[C2] = "[v=\\s]*(" + I2[z2] + ")(?:\\.(" + I2[z2] + ")(?:\\.(" + I2[z2] + ")(?:" + I2[Q2] + ")?" + I2[de2] + "?)?)?";
  var b = P2++;
  I2[b] = "[v=\\s]*(" + I2[q2] + ")(?:\\.(" + I2[q2] + ")(?:\\.(" + I2[q2] + ")(?:" + I2[ne2] + ")?" + I2[de2] + "?)?)?";
  var E2 = P2++;
  I2[E2] = "^" + I2[Te2] + "\\s*" + I2[C2] + "$";
  var k = P2++;
  I2[k] = "^" + I2[Te2] + "\\s*" + I2[b] + "$";
  var O2 = P2++;
  I2[O2] = "(?:^|[^\\d])(\\d{1," + p2 + "})(?:\\.(\\d{1," + p2 + "}))?(?:\\.(\\d{1," + p2 + "}))?(?:$|[^\\d])";
  var A2 = P2++;
  I2[A2] = "(?:~>?)";
  var x2 = P2++;
  I2[x2] = "(\\s*)" + I2[A2] + "\\s+", _[x2] = new RegExp(I2[x2], "g");
  var Y2 = "$1~", B2 = P2++;
  I2[B2] = "^" + I2[A2] + I2[C2] + "$";
  var T2 = P2++;
  I2[T2] = "^" + I2[A2] + I2[b] + "$";
  var D2 = P2++;
  I2[D2] = "(?:\\^)";
  var te2 = P2++;
  I2[te2] = "(\\s*)" + I2[D2] + "\\s+", _[te2] = new RegExp(I2[te2], "g");
  var me2 = "$1^", Ie2 = P2++;
  I2[Ie2] = "^" + I2[D2] + I2[C2] + "$";
  var $e2 = P2++;
  I2[$e2] = "^" + I2[D2] + I2[b] + "$";
  var ye2 = P2++;
  I2[ye2] = "^" + I2[Te2] + "\\s*(" + be2 + ")$|^$";
  var he2 = P2++;
  I2[he2] = "^" + I2[Te2] + "\\s*(" + le2 + ")$|^$";
  var Me2 = P2++;
  I2[Me2] = "(\\s*)" + I2[Te2] + "\\s*(" + be2 + "|" + I2[C2] + ")", _[Me2] = new RegExp(I2[Me2], "g");
  var Ae2 = "$1$2$3", xe2 = P2++;
  I2[xe2] = "^\\s*(" + I2[C2] + ")\\s+-\\s+(" + I2[C2] + ")\\s*$";
  var ae2 = P2++;
  I2[ae2] = "^\\s*(" + I2[b] + ")\\s+-\\s+(" + I2[b] + ")\\s*$";
  var N2 = P2++;
  I2[N2] = "(<|>)?=?\\s*\\*";
  for (var re2 = 0; re2 < P2; re2++)
    c(re2, I2[re2]), _[re2] || (_[re2] = new RegExp(I2[re2]));
  u2.parse = fe2;
  function fe2(Je2, ze2) {
    if ((!ze2 || typeof ze2 != "object") && (ze2 = { loose: !!ze2, includePrerelease: false }), Je2 instanceof qe2)
      return Je2;
    if (typeof Je2 != "string" || Je2.length > l2)
      return null;
    var et = ze2.loose ? _[ke2] : _[pe2];
    if (!et.test(Je2))
      return null;
    try {
      return new qe2(Je2, ze2);
    } catch {
      return null;
    }
  }
  u2.valid = Ne2;
  function Ne2(Je2, ze2) {
    var et = fe2(Je2, ze2);
    return et ? et.version : null;
  }
  u2.clean = Oe2;
  function Oe2(Je2, ze2) {
    var et = fe2(Je2.trim().replace(/^[=v]+/, ""), ze2);
    return et ? et.version : null;
  }
  u2.SemVer = qe2;
  function qe2(Je2, ze2) {
    if ((!ze2 || typeof ze2 != "object") && (ze2 = { loose: !!ze2, includePrerelease: false }), Je2 instanceof qe2) {
      if (Je2.loose === ze2.loose)
        return Je2;
      Je2 = Je2.version;
    } else if (typeof Je2 != "string")
      throw new TypeError("Invalid Version: " + Je2);
    if (Je2.length > l2)
      throw new TypeError("version is longer than " + l2 + " characters");
    if (!(this instanceof qe2))
      return new qe2(Je2, ze2);
    c("SemVer", Je2, ze2), this.options = ze2, this.loose = !!ze2.loose;
    var et = Je2.trim().match(ze2.loose ? _[ke2] : _[pe2]);
    if (!et)
      throw new TypeError("Invalid Version: " + Je2);
    if (this.raw = Je2, this.major = +et[1], this.minor = +et[2], this.patch = +et[3], this.major > v2 || this.major < 0)
      throw new TypeError("Invalid major version");
    if (this.minor > v2 || this.minor < 0)
      throw new TypeError("Invalid minor version");
    if (this.patch > v2 || this.patch < 0)
      throw new TypeError("Invalid patch version");
    et[4] ? this.prerelease = et[4].split(".").map(function(pt) {
      if (/^[0-9]+$/.test(pt)) {
        var mt = +pt;
        if (mt >= 0 && mt < v2)
          return mt;
      }
      return pt;
    }) : this.prerelease = [], this.build = et[5] ? et[5].split(".") : [], this.format();
  }
  qe2.prototype.format = function() {
    return this.version = this.major + "." + this.minor + "." + this.patch, this.prerelease.length && (this.version += "-" + this.prerelease.join(".")), this.version;
  }, qe2.prototype.toString = function() {
    return this.version;
  }, qe2.prototype.compare = function(Je2) {
    return c("SemVer.compare", this.version, this.options, Je2), Je2 instanceof qe2 || (Je2 = new qe2(Je2, this.options)), this.compareMain(Je2) || this.comparePre(Je2);
  }, qe2.prototype.compareMain = function(Je2) {
    return Je2 instanceof qe2 || (Je2 = new qe2(Je2, this.options)), Xe2(this.major, Je2.major) || Xe2(this.minor, Je2.minor) || Xe2(this.patch, Je2.patch);
  }, qe2.prototype.comparePre = function(Je2) {
    if (Je2 instanceof qe2 || (Je2 = new qe2(Je2, this.options)), this.prerelease.length && !Je2.prerelease.length)
      return -1;
    if (!this.prerelease.length && Je2.prerelease.length)
      return 1;
    if (!this.prerelease.length && !Je2.prerelease.length)
      return 0;
    var ze2 = 0;
    do {
      var et = this.prerelease[ze2], pt = Je2.prerelease[ze2];
      if (c("prerelease compare", ze2, et, pt), et === void 0 && pt === void 0)
        return 0;
      if (pt === void 0)
        return 1;
      if (et === void 0)
        return -1;
      if (et === pt)
        continue;
      return Xe2(et, pt);
    } while (++ze2);
  }, qe2.prototype.inc = function(Je2, ze2) {
    switch (Je2) {
      case "premajor":
        this.prerelease.length = 0, this.patch = 0, this.minor = 0, this.major++, this.inc("pre", ze2);
        break;
      case "preminor":
        this.prerelease.length = 0, this.patch = 0, this.minor++, this.inc("pre", ze2);
        break;
      case "prepatch":
        this.prerelease.length = 0, this.inc("patch", ze2), this.inc("pre", ze2);
        break;
      case "prerelease":
        this.prerelease.length === 0 && this.inc("patch", ze2), this.inc("pre", ze2);
        break;
      case "major":
        (this.minor !== 0 || this.patch !== 0 || this.prerelease.length === 0) && this.major++, this.minor = 0, this.patch = 0, this.prerelease = [];
        break;
      case "minor":
        (this.patch !== 0 || this.prerelease.length === 0) && this.minor++, this.patch = 0, this.prerelease = [];
        break;
      case "patch":
        this.prerelease.length === 0 && this.patch++, this.prerelease = [];
        break;
      case "pre":
        if (this.prerelease.length === 0)
          this.prerelease = [0];
        else {
          for (var et = this.prerelease.length; --et >= 0; )
            typeof this.prerelease[et] == "number" && (this.prerelease[et]++, et = -2);
          et === -1 && this.prerelease.push(0);
        }
        ze2 && (this.prerelease[0] === ze2 ? isNaN(this.prerelease[1]) && (this.prerelease = [ze2, 0]) : this.prerelease = [ze2, 0]);
        break;
      default:
        throw new Error("invalid increment argument: " + Je2);
    }
    return this.format(), this.raw = this.version, this;
  }, u2.inc = je2;
  function je2(Je2, ze2, et, pt) {
    typeof et == "string" && (pt = et, et = void 0);
    try {
      return new qe2(Je2, et).inc(ze2, pt).version;
    } catch {
      return null;
    }
  }
  u2.diff = Fe2;
  function Fe2(Je2, ze2) {
    if (Ce2(Je2, ze2))
      return null;
    var et = fe2(Je2), pt = fe2(ze2), mt = "";
    if (et.prerelease.length || pt.prerelease.length) {
      mt = "pre";
      var vt = "prerelease";
    }
    for (var ht in et)
      if ((ht === "major" || ht === "minor" || ht === "patch") && et[ht] !== pt[ht])
        return mt + ht;
    return vt;
  }
  u2.compareIdentifiers = Xe2;
  var yt = /^[0-9]+$/;
  function Xe2(Je2, ze2) {
    var et = yt.test(Je2), pt = yt.test(ze2);
    return et && pt && (Je2 = +Je2, ze2 = +ze2), Je2 === ze2 ? 0 : et && !pt ? -1 : pt && !et ? 1 : Je2 < ze2 ? -1 : 1;
  }
  u2.rcompareIdentifiers = Ge2;
  function Ge2(Je2, ze2) {
    return Xe2(ze2, Je2);
  }
  u2.major = V2;
  function V2(Je2, ze2) {
    return new qe2(Je2, ze2).major;
  }
  u2.minor = ge2;
  function ge2(Je2, ze2) {
    return new qe2(Je2, ze2).minor;
  }
  u2.patch = we2;
  function we2(Je2, ze2) {
    return new qe2(Je2, ze2).patch;
  }
  u2.compare = We2;
  function We2(Je2, ze2, et) {
    return new qe2(Je2, et).compare(new qe2(ze2, et));
  }
  u2.compareLoose = Re2;
  function Re2(Je2, ze2) {
    return We2(Je2, ze2, true);
  }
  u2.rcompare = J2;
  function J2(Je2, ze2, et) {
    return We2(ze2, Je2, et);
  }
  u2.sort = _e;
  function _e(Je2, ze2) {
    return Je2.sort(function(et, pt) {
      return u2.compare(et, pt, ze2);
    });
  }
  u2.rsort = ue2;
  function ue2(Je2, ze2) {
    return Je2.sort(function(et, pt) {
      return u2.rcompare(et, pt, ze2);
    });
  }
  u2.gt = ce2;
  function ce2(Je2, ze2, et) {
    return We2(Je2, ze2, et) > 0;
  }
  u2.lt = ve2;
  function ve2(Je2, ze2, et) {
    return We2(Je2, ze2, et) < 0;
  }
  u2.eq = Ce2;
  function Ce2(Je2, ze2, et) {
    return We2(Je2, ze2, et) === 0;
  }
  u2.neq = Be2;
  function Be2(Je2, ze2, et) {
    return We2(Je2, ze2, et) !== 0;
  }
  u2.gte = He2;
  function He2(Je2, ze2, et) {
    return We2(Je2, ze2, et) >= 0;
  }
  u2.lte = Ve2;
  function Ve2(Je2, ze2, et) {
    return We2(Je2, ze2, et) <= 0;
  }
  u2.cmp = Ze2;
  function Ze2(Je2, ze2, et, pt) {
    switch (ze2) {
      case "===":
        return typeof Je2 == "object" && (Je2 = Je2.version), typeof et == "object" && (et = et.version), Je2 === et;
      case "!==":
        return typeof Je2 == "object" && (Je2 = Je2.version), typeof et == "object" && (et = et.version), Je2 !== et;
      case "":
      case "=":
      case "==":
        return Ce2(Je2, et, pt);
      case "!=":
        return Be2(Je2, et, pt);
      case ">":
        return ce2(Je2, et, pt);
      case ">=":
        return He2(Je2, et, pt);
      case "<":
        return ve2(Je2, et, pt);
      case "<=":
        return Ve2(Je2, et, pt);
      default:
        throw new TypeError("Invalid operator: " + ze2);
    }
  }
  u2.Comparator = Ke2;
  function Ke2(Je2, ze2) {
    if ((!ze2 || typeof ze2 != "object") && (ze2 = { loose: !!ze2, includePrerelease: false }), Je2 instanceof Ke2) {
      if (Je2.loose === !!ze2.loose)
        return Je2;
      Je2 = Je2.value;
    }
    if (!(this instanceof Ke2))
      return new Ke2(Je2, ze2);
    c("comparator", Je2, ze2), this.options = ze2, this.loose = !!ze2.loose, this.parse(Je2), this.semver === U2 ? this.value = "" : this.value = this.operator + this.semver.version, c("comp", this);
  }
  var U2 = {};
  Ke2.prototype.parse = function(Je2) {
    var ze2 = this.options.loose ? _[ye2] : _[he2], et = Je2.match(ze2);
    if (!et)
      throw new TypeError("Invalid comparator: " + Je2);
    this.operator = et[1], this.operator === "=" && (this.operator = ""), et[2] ? this.semver = new qe2(et[2], this.options.loose) : this.semver = U2;
  }, Ke2.prototype.toString = function() {
    return this.value;
  }, Ke2.prototype.test = function(Je2) {
    return c("Comparator.test", Je2, this.options.loose), this.semver === U2 ? true : (typeof Je2 == "string" && (Je2 = new qe2(Je2, this.options)), Ze2(Je2, this.operator, this.semver, this.options));
  }, Ke2.prototype.intersects = function(Je2, ze2) {
    if (!(Je2 instanceof Ke2))
      throw new TypeError("a Comparator is required");
    (!ze2 || typeof ze2 != "object") && (ze2 = { loose: !!ze2, includePrerelease: false });
    var et;
    if (this.operator === "")
      return et = new se2(Je2.value, ze2), wt(this.value, et, ze2);
    if (Je2.operator === "")
      return et = new se2(this.value, ze2), wt(Je2.semver, et, ze2);
    var pt = (this.operator === ">=" || this.operator === ">") && (Je2.operator === ">=" || Je2.operator === ">"), mt = (this.operator === "<=" || this.operator === "<") && (Je2.operator === "<=" || Je2.operator === "<"), vt = this.semver.version === Je2.semver.version, ht = (this.operator === ">=" || this.operator === "<=") && (Je2.operator === ">=" || Je2.operator === "<="), _t = Ze2(this.semver, "<", Je2.semver, ze2) && (this.operator === ">=" || this.operator === ">") && (Je2.operator === "<=" || Je2.operator === "<"), Et = Ze2(this.semver, ">", Je2.semver, ze2) && (this.operator === "<=" || this.operator === "<") && (Je2.operator === ">=" || Je2.operator === ">");
    return pt || mt || vt && ht || _t || Et;
  }, u2.Range = se2;
  function se2(Je2, ze2) {
    if ((!ze2 || typeof ze2 != "object") && (ze2 = { loose: !!ze2, includePrerelease: false }), Je2 instanceof se2)
      return Je2.loose === !!ze2.loose && Je2.includePrerelease === !!ze2.includePrerelease ? Je2 : new se2(Je2.raw, ze2);
    if (Je2 instanceof Ke2)
      return new se2(Je2.value, ze2);
    if (!(this instanceof se2))
      return new se2(Je2, ze2);
    if (this.options = ze2, this.loose = !!ze2.loose, this.includePrerelease = !!ze2.includePrerelease, this.raw = Je2, this.set = Je2.split(/\s*\|\|\s*/).map(function(et) {
      return this.parseRange(et.trim());
    }, this).filter(function(et) {
      return et.length;
    }), !this.set.length)
      throw new TypeError("Invalid SemVer Range: " + Je2);
    this.format();
  }
  se2.prototype.format = function() {
    return this.range = this.set.map(function(Je2) {
      return Je2.join(" ").trim();
    }).join("||").trim(), this.range;
  }, se2.prototype.toString = function() {
    return this.range;
  }, se2.prototype.parseRange = function(Je2) {
    var ze2 = this.options.loose;
    Je2 = Je2.trim();
    var et = ze2 ? _[ae2] : _[xe2];
    Je2 = Je2.replace(et, rt), c("hyphen replace", Je2), Je2 = Je2.replace(_[Me2], Ae2), c("comparator trim", Je2, _[Me2]), Je2 = Je2.replace(_[x2], Y2), Je2 = Je2.replace(_[te2], me2), Je2 = Je2.split(/\s+/).join(" ");
    var pt = ze2 ? _[ye2] : _[he2], mt = Je2.split(" ").map(function(vt) {
      return Ue2(vt, this.options);
    }, this).join(" ").split(/\s+/);
    return this.options.loose && (mt = mt.filter(function(vt) {
      return !!vt.match(pt);
    })), mt = mt.map(function(vt) {
      return new Ke2(vt, this.options);
    }, this), mt;
  }, se2.prototype.intersects = function(Je2, ze2) {
    if (!(Je2 instanceof se2))
      throw new TypeError("a Range is required");
    return this.set.some(function(et) {
      return et.every(function(pt) {
        return Je2.set.some(function(mt) {
          return mt.every(function(vt) {
            return pt.intersects(vt, ze2);
          });
        });
      });
    });
  }, u2.toComparators = Se2;
  function Se2(Je2, ze2) {
    return new se2(Je2, ze2).set.map(function(et) {
      return et.map(function(pt) {
        return pt.value;
      }).join(" ").trim().split(" ");
    });
  }
  function Ue2(Je2, ze2) {
    return c("comp", Je2, ze2), Je2 = st(Je2, ze2), c("caret", Je2), Je2 = Ye2(Je2, ze2), c("tildes", Je2), Je2 = tt(Je2, ze2), c("xrange", Je2), Je2 = Tt(Je2, ze2), c("stars", Je2), Je2;
  }
  function De2(Je2) {
    return !Je2 || Je2.toLowerCase() === "x" || Je2 === "*";
  }
  function Ye2(Je2, ze2) {
    return Je2.trim().split(/\s+/).map(function(et) {
      return Qe2(et, ze2);
    }).join(" ");
  }
  function Qe2(Je2, ze2) {
    var et = ze2.loose ? _[T2] : _[B2];
    return Je2.replace(et, function(pt, mt, vt, ht, _t) {
      c("tilde", Je2, pt, mt, vt, ht, _t);
      var Et;
      return De2(mt) ? Et = "" : De2(vt) ? Et = ">=" + mt + ".0.0 <" + (+mt + 1) + ".0.0" : De2(ht) ? Et = ">=" + mt + "." + vt + ".0 <" + mt + "." + (+vt + 1) + ".0" : _t ? (c("replaceTilde pr", _t), Et = ">=" + mt + "." + vt + "." + ht + "-" + _t + " <" + mt + "." + (+vt + 1) + ".0") : Et = ">=" + mt + "." + vt + "." + ht + " <" + mt + "." + (+vt + 1) + ".0", c("tilde return", Et), Et;
    });
  }
  function st(Je2, ze2) {
    return Je2.trim().split(/\s+/).map(function(et) {
      return St(et, ze2);
    }).join(" ");
  }
  function St(Je2, ze2) {
    c("caret", Je2, ze2);
    var et = ze2.loose ? _[$e2] : _[Ie2];
    return Je2.replace(et, function(pt, mt, vt, ht, _t) {
      c("caret", Je2, pt, mt, vt, ht, _t);
      var Et;
      return De2(mt) ? Et = "" : De2(vt) ? Et = ">=" + mt + ".0.0 <" + (+mt + 1) + ".0.0" : De2(ht) ? mt === "0" ? Et = ">=" + mt + "." + vt + ".0 <" + mt + "." + (+vt + 1) + ".0" : Et = ">=" + mt + "." + vt + ".0 <" + (+mt + 1) + ".0.0" : _t ? (c("replaceCaret pr", _t), mt === "0" ? vt === "0" ? Et = ">=" + mt + "." + vt + "." + ht + "-" + _t + " <" + mt + "." + vt + "." + (+ht + 1) : Et = ">=" + mt + "." + vt + "." + ht + "-" + _t + " <" + mt + "." + (+vt + 1) + ".0" : Et = ">=" + mt + "." + vt + "." + ht + "-" + _t + " <" + (+mt + 1) + ".0.0") : (c("no pr"), mt === "0" ? vt === "0" ? Et = ">=" + mt + "." + vt + "." + ht + " <" + mt + "." + vt + "." + (+ht + 1) : Et = ">=" + mt + "." + vt + "." + ht + " <" + mt + "." + (+vt + 1) + ".0" : Et = ">=" + mt + "." + vt + "." + ht + " <" + (+mt + 1) + ".0.0"), c("caret return", Et), Et;
    });
  }
  function tt(Je2, ze2) {
    return c("replaceXRanges", Je2, ze2), Je2.split(/\s+/).map(function(et) {
      return it(et, ze2);
    }).join(" ");
  }
  function it(Je2, ze2) {
    Je2 = Je2.trim();
    var et = ze2.loose ? _[k] : _[E2];
    return Je2.replace(et, function(pt, mt, vt, ht, _t, Et) {
      c("xRange", Je2, pt, mt, vt, ht, _t, Et);
      var Pt = De2(vt), Nt = Pt || De2(ht), Mt = Nt || De2(_t), Ot = Mt;
      return mt === "=" && Ot && (mt = ""), Pt ? mt === ">" || mt === "<" ? pt = "<0.0.0" : pt = "*" : mt && Ot ? (Nt && (ht = 0), _t = 0, mt === ">" ? (mt = ">=", Nt ? (vt = +vt + 1, ht = 0, _t = 0) : (ht = +ht + 1, _t = 0)) : mt === "<=" && (mt = "<", Nt ? vt = +vt + 1 : ht = +ht + 1), pt = mt + vt + "." + ht + "." + _t) : Nt ? pt = ">=" + vt + ".0.0 <" + (+vt + 1) + ".0.0" : Mt && (pt = ">=" + vt + "." + ht + ".0 <" + vt + "." + (+ht + 1) + ".0"), c("xRange return", pt), pt;
    });
  }
  function Tt(Je2, ze2) {
    return c("replaceStars", Je2, ze2), Je2.trim().replace(_[N2], "");
  }
  function rt(Je2, ze2, et, pt, mt, vt, ht, _t, Et, Pt, Nt, Mt, Ot) {
    return De2(et) ? ze2 = "" : De2(pt) ? ze2 = ">=" + et + ".0.0" : De2(mt) ? ze2 = ">=" + et + "." + pt + ".0" : ze2 = ">=" + ze2, De2(Et) ? _t = "" : De2(Pt) ? _t = "<" + (+Et + 1) + ".0.0" : De2(Nt) ? _t = "<" + Et + "." + (+Pt + 1) + ".0" : Mt ? _t = "<=" + Et + "." + Pt + "." + Nt + "-" + Mt : _t = "<=" + _t, (ze2 + " " + _t).trim();
  }
  se2.prototype.test = function(Je2) {
    if (!Je2)
      return false;
    typeof Je2 == "string" && (Je2 = new qe2(Je2, this.options));
    for (var ze2 = 0; ze2 < this.set.length; ze2++)
      if (dt(this.set[ze2], Je2, this.options))
        return true;
    return false;
  };
  function dt(Je2, ze2, et) {
    for (var pt = 0; pt < Je2.length; pt++)
      if (!Je2[pt].test(ze2))
        return false;
    if (ze2.prerelease.length && !et.includePrerelease) {
      for (pt = 0; pt < Je2.length; pt++)
        if (c(Je2[pt].semver), Je2[pt].semver !== U2 && Je2[pt].semver.prerelease.length > 0) {
          var mt = Je2[pt].semver;
          if (mt.major === ze2.major && mt.minor === ze2.minor && mt.patch === ze2.patch)
            return true;
        }
      return false;
    }
    return true;
  }
  u2.satisfies = wt;
  function wt(Je2, ze2, et) {
    try {
      ze2 = new se2(ze2, et);
    } catch {
      return false;
    }
    return ze2.test(Je2);
  }
  u2.maxSatisfying = nt;
  function nt(Je2, ze2, et) {
    var pt = null, mt = null;
    try {
      var vt = new se2(ze2, et);
    } catch {
      return null;
    }
    return Je2.forEach(function(ht) {
      vt.test(ht) && (!pt || mt.compare(ht) === -1) && (pt = ht, mt = new qe2(pt, et));
    }), pt;
  }
  u2.minSatisfying = at;
  function at(Je2, ze2, et) {
    var pt = null, mt = null;
    try {
      var vt = new se2(ze2, et);
    } catch {
      return null;
    }
    return Je2.forEach(function(ht) {
      vt.test(ht) && (!pt || mt.compare(ht) === 1) && (pt = ht, mt = new qe2(pt, et));
    }), pt;
  }
  u2.minVersion = gt;
  function gt(Je2, ze2) {
    Je2 = new se2(Je2, ze2);
    var et = new qe2("0.0.0");
    if (Je2.test(et) || (et = new qe2("0.0.0-0"), Je2.test(et)))
      return et;
    et = null;
    for (var pt = 0; pt < Je2.set.length; ++pt) {
      var mt = Je2.set[pt];
      mt.forEach(function(vt) {
        var ht = new qe2(vt.semver.version);
        switch (vt.operator) {
          case ">":
            ht.prerelease.length === 0 ? ht.patch++ : ht.prerelease.push(0), ht.raw = ht.format();
          case "":
          case ">=":
            (!et || ce2(et, ht)) && (et = ht);
            break;
          case "<":
          case "<=":
            break;
          default:
            throw new Error("Unexpected operation: " + vt.operator);
        }
      });
    }
    return et && Je2.test(et) ? et : null;
  }
  u2.validRange = ot;
  function ot(Je2, ze2) {
    try {
      return new se2(Je2, ze2).range || "*";
    } catch {
      return null;
    }
  }
  u2.ltr = ct;
  function ct(Je2, ze2, et) {
    return ut(Je2, ze2, "<", et);
  }
  u2.gtr = Ct;
  function Ct(Je2, ze2, et) {
    return ut(Je2, ze2, ">", et);
  }
  u2.outside = ut;
  function ut(Je2, ze2, et, pt) {
    Je2 = new qe2(Je2, pt), ze2 = new se2(ze2, pt);
    var mt, vt, ht, _t, Et;
    switch (et) {
      case ">":
        mt = ce2, vt = Ve2, ht = ve2, _t = ">", Et = ">=";
        break;
      case "<":
        mt = ve2, vt = He2, ht = ce2, _t = "<", Et = "<=";
        break;
      default:
        throw new TypeError('Must provide a hilo val of "<" or ">"');
    }
    if (wt(Je2, ze2, pt))
      return false;
    for (var Pt = 0; Pt < ze2.set.length; ++Pt) {
      var Nt = ze2.set[Pt], Mt = null, Ot = null;
      if (Nt.forEach(function($t) {
        $t.semver === U2 && ($t = new Ke2(">=0.0.0")), Mt = Mt || $t, Ot = Ot || $t, mt($t.semver, Mt.semver, pt) ? Mt = $t : ht($t.semver, Ot.semver, pt) && (Ot = $t);
      }), Mt.operator === _t || Mt.operator === Et || (!Ot.operator || Ot.operator === _t) && vt(Je2, Ot.semver))
        return false;
      if (Ot.operator === Et && ht(Je2, Ot.semver))
        return false;
    }
    return true;
  }
  u2.prerelease = lt;
  function lt(Je2, ze2) {
    var et = fe2(Je2, ze2);
    return et && et.prerelease.length ? et.prerelease : null;
  }
  u2.intersects = kt;
  function kt(Je2, ze2, et) {
    return Je2 = new se2(Je2, et), ze2 = new se2(ze2, et), Je2.intersects(ze2);
  }
  u2.coerce = Rt;
  function Rt(Je2) {
    if (Je2 instanceof qe2)
      return Je2;
    if (typeof Je2 != "string")
      return null;
    var ze2 = Je2.match(_[O2]);
    return ze2 == null ? null : fe2(ze2[1] + "." + (ze2[2] || "0") + "." + (ze2[3] || "0"));
  }
})(semver$1, semver$1.exports);
var semverExports = semver$1.exports, semver = semverExports, psSupported = semver.satisfies(process$1.version, "^6.12.0 || >=8.0.0"), JsonWebTokenError = JsonWebTokenError_1, NotBeforeError = NotBeforeError_1, TokenExpiredError = TokenExpiredError_1, decode = decode$1, timespan$1 = timespan$2, PS_SUPPORTED$1 = psSupported, jws$1 = jws$3, PUB_KEY_ALGS = ["RS256", "RS384", "RS512", "ES256", "ES384", "ES512"], RSA_KEY_ALGS = ["RS256", "RS384", "RS512"], HS_ALGS = ["HS256", "HS384", "HS512"];
PS_SUPPORTED$1 && (PUB_KEY_ALGS.splice(3, 0, "PS256", "PS384", "PS512"), RSA_KEY_ALGS.splice(3, 0, "PS256", "PS384", "PS512"));
var verify = function(a420, u2, c, l2) {
  typeof c == "function" && !l2 && (l2 = c, c = {}), c || (c = {}), c = Object.assign({}, c);
  var v2;
  if (l2 ? v2 = l2 : v2 = function(F2, H2) {
    if (F2)
      throw F2;
    return H2;
  }, c.clockTimestamp && typeof c.clockTimestamp != "number")
    return v2(new JsonWebTokenError("clockTimestamp must be a number"));
  if (c.nonce !== void 0 && (typeof c.nonce != "string" || c.nonce.trim() === ""))
    return v2(new JsonWebTokenError("nonce must be a non-empty string"));
  var p2 = c.clockTimestamp || Math.floor(Date.now() / 1e3);
  if (!a420)
    return v2(new JsonWebTokenError("jwt must be provided"));
  if (typeof a420 != "string")
    return v2(new JsonWebTokenError("jwt must be a string"));
  var _ = a420.split(".");
  if (_.length !== 3)
    return v2(new JsonWebTokenError("jwt malformed"));
  var I2;
  try {
    I2 = decode(a420, { complete: true });
  } catch (F2) {
    return v2(F2);
  }
  if (!I2)
    return v2(new JsonWebTokenError("invalid token"));
  var P2 = I2.header, $;
  if (typeof u2 == "function") {
    if (!l2)
      return v2(new JsonWebTokenError("verify must be called asynchronous if secret or public key is provided as a callback"));
    $ = u2;
  } else
    $ = function(F2, H2) {
      return H2(null, u2);
    };
  return $(P2, function(F2, H2) {
    if (F2)
      return v2(new JsonWebTokenError("error in secret or public key callback: " + F2.message));
    var j = _[2].trim() !== "";
    if (!j && H2)
      return v2(new JsonWebTokenError("jwt signature is required"));
    if (j && !H2)
      return v2(new JsonWebTokenError("secret or public key must be provided"));
    if (!j && !c.algorithms && (c.algorithms = ["none"]), c.algorithms || (c.algorithms = ~H2.toString().indexOf("BEGIN CERTIFICATE") || ~H2.toString().indexOf("BEGIN PUBLIC KEY") ? PUB_KEY_ALGS : ~H2.toString().indexOf("BEGIN RSA PUBLIC KEY") ? RSA_KEY_ALGS : HS_ALGS), !~c.algorithms.indexOf(I2.header.alg))
      return v2(new JsonWebTokenError("invalid algorithm"));
    var ee2;
    try {
      ee2 = jws$1.verify(a420, I2.header.alg, H2);
    } catch (le2) {
      return v2(le2);
    }
    if (!ee2)
      return v2(new JsonWebTokenError("invalid signature"));
    var X2 = I2.payload;
    if (typeof X2.nbf < "u" && !c.ignoreNotBefore) {
      if (typeof X2.nbf != "number")
        return v2(new JsonWebTokenError("invalid nbf value"));
      if (X2.nbf > p2 + (c.clockTolerance || 0))
        return v2(new NotBeforeError("jwt not active", new Date(X2.nbf * 1e3)));
    }
    if (typeof X2.exp < "u" && !c.ignoreExpiration) {
      if (typeof X2.exp != "number")
        return v2(new JsonWebTokenError("invalid exp value"));
      if (p2 >= X2.exp + (c.clockTolerance || 0))
        return v2(new TokenExpiredError("jwt expired", new Date(X2.exp * 1e3)));
    }
    if (c.audience) {
      var ie2 = Array.isArray(c.audience) ? c.audience : [c.audience], Q2 = Array.isArray(X2.aud) ? X2.aud : [X2.aud], ne2 = Q2.some(function(le2) {
        return ie2.some(function(be2) {
          return be2 instanceof RegExp ? be2.test(le2) : be2 === le2;
        });
      });
      if (!ne2)
        return v2(new JsonWebTokenError("jwt audience invalid. expected: " + ie2.join(" or ")));
    }
    if (c.issuer) {
      var Z2 = typeof c.issuer == "string" && X2.iss !== c.issuer || Array.isArray(c.issuer) && c.issuer.indexOf(X2.iss) === -1;
      if (Z2)
        return v2(new JsonWebTokenError("jwt issuer invalid. expected: " + c.issuer));
    }
    if (c.subject && X2.sub !== c.subject)
      return v2(new JsonWebTokenError("jwt subject invalid. expected: " + c.subject));
    if (c.jwtid && X2.jti !== c.jwtid)
      return v2(new JsonWebTokenError("jwt jwtid invalid. expected: " + c.jwtid));
    if (c.nonce && X2.nonce !== c.nonce)
      return v2(new JsonWebTokenError("jwt nonce invalid. expected: " + c.nonce));
    if (c.maxAge) {
      if (typeof X2.iat != "number")
        return v2(new JsonWebTokenError("iat required when maxAge is specified"));
      var de2 = timespan$1(c.maxAge, X2.iat);
      if (typeof de2 > "u")
        return v2(new JsonWebTokenError('"maxAge" should be a number of seconds or string representing a timespan eg: "1d", "20h", 60'));
      if (p2 >= de2 + (c.clockTolerance || 0))
        return v2(new TokenExpiredError("maxAge exceeded", new Date(de2 * 1e3)));
    }
    if (c.complete === true) {
      var pe2 = I2.signature;
      return v2(null, { header: P2, payload: X2, signature: pe2 });
    }
    return v2(null, X2);
  });
}, INFINITY$2 = 1 / 0, MAX_SAFE_INTEGER = 9007199254740991, MAX_INTEGER$2 = 17976931348623157e292, NAN$2 = NaN, argsTag = "[object Arguments]", funcTag = "[object Function]", genTag = "[object GeneratorFunction]", stringTag$1 = "[object String]", symbolTag$2 = "[object Symbol]", reTrim$2 = /^\s+|\s+$/g, reIsBadHex$2 = /^[-+]0x[0-9a-f]+$/i, reIsBinary$2 = /^0b[01]+$/i, reIsOctal$2 = /^0o[0-7]+$/i, reIsUint = /^(?:0|[1-9]\d*)$/, freeParseInt$2 = parseInt;
function arrayMap(a420, u2) {
  for (var c = -1, l2 = a420 ? a420.length : 0, v2 = Array(l2); ++c < l2; )
    v2[c] = u2(a420[c], c, a420);
  return v2;
}
function baseFindIndex(a420, u2, c, l2) {
  for (var v2 = a420.length, p2 = c + (l2 ? 1 : -1); l2 ? p2-- : ++p2 < v2; )
    if (u2(a420[p2], p2, a420))
      return p2;
  return -1;
}
function baseIndexOf(a420, u2, c) {
  if (u2 !== u2)
    return baseFindIndex(a420, baseIsNaN, c);
  for (var l2 = c - 1, v2 = a420.length; ++l2 < v2; )
    if (a420[l2] === u2)
      return l2;
  return -1;
}
function baseIsNaN(a420) {
  return a420 !== a420;
}
function baseTimes(a420, u2) {
  for (var c = -1, l2 = Array(a420); ++c < a420; )
    l2[c] = u2(c);
  return l2;
}
function baseValues(a420, u2) {
  return arrayMap(u2, function(c) {
    return a420[c];
  });
}
function overArg$1(a420, u2) {
  return function(c) {
    return a420(u2(c));
  };
}
var objectProto$6 = Object.prototype, hasOwnProperty$1 = objectProto$6.hasOwnProperty, objectToString$6 = objectProto$6.toString, propertyIsEnumerable = objectProto$6.propertyIsEnumerable, nativeKeys = overArg$1(Object.keys, Object), nativeMax = Math.max;
function arrayLikeKeys(a420, u2) {
  var c = isArray$3(a420) || isArguments(a420) ? baseTimes(a420.length, String) : [], l2 = c.length, v2 = !!l2;
  for (var p2 in a420)
    (u2 || hasOwnProperty$1.call(a420, p2)) && !(v2 && (p2 == "length" || isIndex(p2, l2))) && c.push(p2);
  return c;
}
function baseKeys(a420) {
  if (!isPrototype(a420))
    return nativeKeys(a420);
  var u2 = [];
  for (var c in Object(a420))
    hasOwnProperty$1.call(a420, c) && c != "constructor" && u2.push(c);
  return u2;
}
function isIndex(a420, u2) {
  return u2 = u2 ?? MAX_SAFE_INTEGER, !!u2 && (typeof a420 == "number" || reIsUint.test(a420)) && a420 > -1 && a420 % 1 == 0 && a420 < u2;
}
function isPrototype(a420) {
  var u2 = a420 && a420.constructor, c = typeof u2 == "function" && u2.prototype || objectProto$6;
  return a420 === c;
}
function includes$1(a420, u2, c, l2) {
  a420 = isArrayLike(a420) ? a420 : values(a420), c = c && !l2 ? toInteger$2(c) : 0;
  var v2 = a420.length;
  return c < 0 && (c = nativeMax(v2 + c, 0)), isString$3(a420) ? c <= v2 && a420.indexOf(u2, c) > -1 : !!v2 && baseIndexOf(a420, u2, c) > -1;
}
function isArguments(a420) {
  return isArrayLikeObject(a420) && hasOwnProperty$1.call(a420, "callee") && (!propertyIsEnumerable.call(a420, "callee") || objectToString$6.call(a420) == argsTag);
}
var isArray$3 = Array.isArray;
function isArrayLike(a420) {
  return a420 != null && isLength(a420.length) && !isFunction$1(a420);
}
function isArrayLikeObject(a420) {
  return isObjectLike$6(a420) && isArrayLike(a420);
}
function isFunction$1(a420) {
  var u2 = isObject$6(a420) ? objectToString$6.call(a420) : "";
  return u2 == funcTag || u2 == genTag;
}
function isLength(a420) {
  return typeof a420 == "number" && a420 > -1 && a420 % 1 == 0 && a420 <= MAX_SAFE_INTEGER;
}
function isObject$6(a420) {
  var u2 = typeof a420;
  return !!a420 && (u2 == "object" || u2 == "function");
}
function isObjectLike$6(a420) {
  return !!a420 && typeof a420 == "object";
}
function isString$3(a420) {
  return typeof a420 == "string" || !isArray$3(a420) && isObjectLike$6(a420) && objectToString$6.call(a420) == stringTag$1;
}
function isSymbol$2(a420) {
  return typeof a420 == "symbol" || isObjectLike$6(a420) && objectToString$6.call(a420) == symbolTag$2;
}
function toFinite$2(a420) {
  if (!a420)
    return a420 === 0 ? a420 : 0;
  if (a420 = toNumber$2(a420), a420 === INFINITY$2 || a420 === -INFINITY$2) {
    var u2 = a420 < 0 ? -1 : 1;
    return u2 * MAX_INTEGER$2;
  }
  return a420 === a420 ? a420 : 0;
}
function toInteger$2(a420) {
  var u2 = toFinite$2(a420), c = u2 % 1;
  return u2 === u2 ? c ? u2 - c : u2 : 0;
}
function toNumber$2(a420) {
  if (typeof a420 == "number")
    return a420;
  if (isSymbol$2(a420))
    return NAN$2;
  if (isObject$6(a420)) {
    var u2 = typeof a420.valueOf == "function" ? a420.valueOf() : a420;
    a420 = isObject$6(u2) ? u2 + "" : u2;
  }
  if (typeof a420 != "string")
    return a420 === 0 ? a420 : +a420;
  a420 = a420.replace(reTrim$2, "");
  var c = reIsBinary$2.test(a420);
  return c || reIsOctal$2.test(a420) ? freeParseInt$2(a420.slice(2), c ? 2 : 8) : reIsBadHex$2.test(a420) ? NAN$2 : +a420;
}
function keys$1(a420) {
  return isArrayLike(a420) ? arrayLikeKeys(a420) : baseKeys(a420);
}
function values(a420) {
  return a420 ? baseValues(a420, keys$1(a420)) : [];
}
var lodash_includes = includes$1, boolTag = "[object Boolean]", objectProto$5 = Object.prototype, objectToString$5 = objectProto$5.toString;
function isBoolean$1(a420) {
  return a420 === true || a420 === false || isObjectLike$5(a420) && objectToString$5.call(a420) == boolTag;
}
function isObjectLike$5(a420) {
  return !!a420 && typeof a420 == "object";
}
var lodash_isboolean = isBoolean$1, INFINITY$1 = 1 / 0, MAX_INTEGER$1 = 17976931348623157e292, NAN$1 = NaN, symbolTag$1 = "[object Symbol]", reTrim$1 = /^\s+|\s+$/g, reIsBadHex$1 = /^[-+]0x[0-9a-f]+$/i, reIsBinary$1 = /^0b[01]+$/i, reIsOctal$1 = /^0o[0-7]+$/i, freeParseInt$1 = parseInt, objectProto$4 = Object.prototype, objectToString$4 = objectProto$4.toString;
function isInteger$1(a420) {
  return typeof a420 == "number" && a420 == toInteger$1(a420);
}
function isObject$5(a420) {
  var u2 = typeof a420;
  return !!a420 && (u2 == "object" || u2 == "function");
}
function isObjectLike$4(a420) {
  return !!a420 && typeof a420 == "object";
}
function isSymbol$1(a420) {
  return typeof a420 == "symbol" || isObjectLike$4(a420) && objectToString$4.call(a420) == symbolTag$1;
}
function toFinite$1(a420) {
  if (!a420)
    return a420 === 0 ? a420 : 0;
  if (a420 = toNumber$1(a420), a420 === INFINITY$1 || a420 === -INFINITY$1) {
    var u2 = a420 < 0 ? -1 : 1;
    return u2 * MAX_INTEGER$1;
  }
  return a420 === a420 ? a420 : 0;
}
function toInteger$1(a420) {
  var u2 = toFinite$1(a420), c = u2 % 1;
  return u2 === u2 ? c ? u2 - c : u2 : 0;
}
function toNumber$1(a420) {
  if (typeof a420 == "number")
    return a420;
  if (isSymbol$1(a420))
    return NAN$1;
  if (isObject$5(a420)) {
    var u2 = typeof a420.valueOf == "function" ? a420.valueOf() : a420;
    a420 = isObject$5(u2) ? u2 + "" : u2;
  }
  if (typeof a420 != "string")
    return a420 === 0 ? a420 : +a420;
  a420 = a420.replace(reTrim$1, "");
  var c = reIsBinary$1.test(a420);
  return c || reIsOctal$1.test(a420) ? freeParseInt$1(a420.slice(2), c ? 2 : 8) : reIsBadHex$1.test(a420) ? NAN$1 : +a420;
}
var lodash_isinteger = isInteger$1, numberTag = "[object Number]", objectProto$3 = Object.prototype, objectToString$3 = objectProto$3.toString;
function isObjectLike$3(a420) {
  return !!a420 && typeof a420 == "object";
}
function isNumber$2(a420) {
  return typeof a420 == "number" || isObjectLike$3(a420) && objectToString$3.call(a420) == numberTag;
}
var lodash_isnumber = isNumber$2, objectTag = "[object Object]";
function isHostObject(a420) {
  var u2 = false;
  if (a420 != null && typeof a420.toString != "function")
    try {
      u2 = !!(a420 + "");
    } catch {
    }
  return u2;
}
function overArg(a420, u2) {
  return function(c) {
    return a420(u2(c));
  };
}
var funcProto = Function.prototype, objectProto$2 = Object.prototype, funcToString = funcProto.toString, hasOwnProperty = objectProto$2.hasOwnProperty, objectCtorString = funcToString.call(Object), objectToString$2 = objectProto$2.toString, getPrototype = overArg(Object.getPrototypeOf, Object);
function isObjectLike$2(a420) {
  return !!a420 && typeof a420 == "object";
}
function isPlainObject$2(a420) {
  if (!isObjectLike$2(a420) || objectToString$2.call(a420) != objectTag || isHostObject(a420))
    return false;
  var u2 = getPrototype(a420);
  if (u2 === null)
    return true;
  var c = hasOwnProperty.call(u2, "constructor") && u2.constructor;
  return typeof c == "function" && c instanceof c && funcToString.call(c) == objectCtorString;
}
var lodash_isplainobject = isPlainObject$2, stringTag = "[object String]", objectProto$1 = Object.prototype, objectToString$1 = objectProto$1.toString, isArray$2 = Array.isArray;
function isObjectLike$1(a420) {
  return !!a420 && typeof a420 == "object";
}
function isString$2(a420) {
  return typeof a420 == "string" || !isArray$2(a420) && isObjectLike$1(a420) && objectToString$1.call(a420) == stringTag;
}
var lodash_isstring = isString$2, FUNC_ERROR_TEXT = "Expected a function", INFINITY = 1 / 0, MAX_INTEGER = 17976931348623157e292, NAN = NaN, symbolTag = "[object Symbol]", reTrim = /^\s+|\s+$/g, reIsBadHex = /^[-+]0x[0-9a-f]+$/i, reIsBinary = /^0b[01]+$/i, reIsOctal = /^0o[0-7]+$/i, freeParseInt = parseInt, objectProto = Object.prototype, objectToString = objectProto.toString;
function before(a420, u2) {
  var c;
  if (typeof u2 != "function")
    throw new TypeError(FUNC_ERROR_TEXT);
  return a420 = toInteger(a420), function() {
    return --a420 > 0 && (c = u2.apply(this, arguments)), a420 <= 1 && (u2 = void 0), c;
  };
}
function once$2(a420) {
  return before(2, a420);
}
function isObject$4(a420) {
  var u2 = typeof a420;
  return !!a420 && (u2 == "object" || u2 == "function");
}
function isObjectLike(a420) {
  return !!a420 && typeof a420 == "object";
}
function isSymbol(a420) {
  return typeof a420 == "symbol" || isObjectLike(a420) && objectToString.call(a420) == symbolTag;
}
function toFinite(a420) {
  if (!a420)
    return a420 === 0 ? a420 : 0;
  if (a420 = toNumber(a420), a420 === INFINITY || a420 === -INFINITY) {
    var u2 = a420 < 0 ? -1 : 1;
    return u2 * MAX_INTEGER;
  }
  return a420 === a420 ? a420 : 0;
}
function toInteger(a420) {
  var u2 = toFinite(a420), c = u2 % 1;
  return u2 === u2 ? c ? u2 - c : u2 : 0;
}
function toNumber(a420) {
  if (typeof a420 == "number")
    return a420;
  if (isSymbol(a420))
    return NAN;
  if (isObject$4(a420)) {
    var u2 = typeof a420.valueOf == "function" ? a420.valueOf() : a420;
    a420 = isObject$4(u2) ? u2 + "" : u2;
  }
  if (typeof a420 != "string")
    return a420 === 0 ? a420 : +a420;
  a420 = a420.replace(reTrim, "");
  var c = reIsBinary.test(a420);
  return c || reIsOctal.test(a420) ? freeParseInt(a420.slice(2), c ? 2 : 8) : reIsBadHex.test(a420) ? NAN : +a420;
}
var lodash_once = once$2, timespan = timespan$2, PS_SUPPORTED = psSupported, jws = jws$3, includes = lodash_includes, isBoolean = lodash_isboolean, isInteger = lodash_isinteger, isNumber$1 = lodash_isnumber, isPlainObject$1 = lodash_isplainobject, isString$1 = lodash_isstring, once$1 = lodash_once, SUPPORTED_ALGS = ["RS256", "RS384", "RS512", "ES256", "ES384", "ES512", "HS256", "HS384", "HS512", "none"];
PS_SUPPORTED && SUPPORTED_ALGS.splice(3, 0, "PS256", "PS384", "PS512");
var sign_options_schema = { expiresIn: { isValid: function(a420) {
  return isInteger(a420) || isString$1(a420) && a420;
}, message: '"expiresIn" should be a number of seconds or string representing a timespan' }, notBefore: { isValid: function(a420) {
  return isInteger(a420) || isString$1(a420) && a420;
}, message: '"notBefore" should be a number of seconds or string representing a timespan' }, audience: { isValid: function(a420) {
  return isString$1(a420) || Array.isArray(a420);
}, message: '"audience" must be a string or array' }, algorithm: { isValid: includes.bind(null, SUPPORTED_ALGS), message: '"algorithm" must be a valid string enum value' }, header: { isValid: isPlainObject$1, message: '"header" must be an object' }, encoding: { isValid: isString$1, message: '"encoding" must be a string' }, issuer: { isValid: isString$1, message: '"issuer" must be a string' }, subject: { isValid: isString$1, message: '"subject" must be a string' }, jwtid: { isValid: isString$1, message: '"jwtid" must be a string' }, noTimestamp: { isValid: isBoolean, message: '"noTimestamp" must be a boolean' }, keyid: { isValid: isString$1, message: '"keyid" must be a string' }, mutatePayload: { isValid: isBoolean, message: '"mutatePayload" must be a boolean' } }, registered_claims_schema = { iat: { isValid: isNumber$1, message: '"iat" should be a number of seconds' }, exp: { isValid: isNumber$1, message: '"exp" should be a number of seconds' }, nbf: { isValid: isNumber$1, message: '"nbf" should be a number of seconds' } };
function validate(a420, u2, c, l2) {
  if (!isPlainObject$1(c))
    throw new Error('Expected "' + l2 + '" to be a plain object.');
  Object.keys(c).forEach(function(v2) {
    var p2 = a420[v2];
    if (!p2) {
      if (!u2)
        throw new Error('"' + v2 + '" is not allowed in "' + l2 + '"');
      return;
    }
    if (!p2.isValid(c[v2]))
      throw new Error(p2.message);
  });
}
function validateOptions(a420) {
  return validate(sign_options_schema, false, a420, "options");
}
function validatePayload(a420) {
  return validate(registered_claims_schema, true, a420, "payload");
}
var options_to_payload = { audience: "aud", issuer: "iss", subject: "sub", jwtid: "jti" }, options_for_objects = ["expiresIn", "notBefore", "noTimestamp", "audience", "issuer", "subject", "jwtid"], sign = function(a420, u2, c, l2) {
  typeof c == "function" ? (l2 = c, c = {}) : c = c || {};
  var v2 = typeof a420 == "object" && !Buffer$M.isBuffer(a420), p2 = Object.assign({ alg: c.algorithm || "HS256", typ: v2 ? "JWT" : void 0, kid: c.keyid }, c.header);
  function _(F2) {
    if (l2)
      return l2(F2);
    throw F2;
  }
  if (!u2 && c.algorithm !== "none")
    return _(new Error("secretOrPrivateKey must have a value"));
  if (typeof a420 > "u")
    return _(new Error("payload is required"));
  if (v2) {
    try {
      validatePayload(a420);
    } catch (F2) {
      return _(F2);
    }
    c.mutatePayload || (a420 = Object.assign({}, a420));
  } else {
    var I2 = options_for_objects.filter(function(F2) {
      return typeof c[F2] < "u";
    });
    if (I2.length > 0)
      return _(new Error("invalid " + I2.join(",") + " option for " + typeof a420 + " payload"));
  }
  if (typeof a420.exp < "u" && typeof c.expiresIn < "u")
    return _(new Error('Bad "options.expiresIn" option the payload already has an "exp" property.'));
  if (typeof a420.nbf < "u" && typeof c.notBefore < "u")
    return _(new Error('Bad "options.notBefore" option the payload already has an "nbf" property.'));
  try {
    validateOptions(c);
  } catch (F2) {
    return _(F2);
  }
  var P2 = a420.iat || Math.floor(Date.now() / 1e3);
  if (c.noTimestamp ? delete a420.iat : v2 && (a420.iat = P2), typeof c.notBefore < "u") {
    try {
      a420.nbf = timespan(c.notBefore, P2);
    } catch (F2) {
      return _(F2);
    }
    if (typeof a420.nbf > "u")
      return _(new Error('"notBefore" should be a number of seconds or string representing a timespan eg: "1d", "20h", 60'));
  }
  if (typeof c.expiresIn < "u" && typeof a420 == "object") {
    try {
      a420.exp = timespan(c.expiresIn, P2);
    } catch (F2) {
      return _(F2);
    }
    if (typeof a420.exp > "u")
      return _(new Error('"expiresIn" should be a number of seconds or string representing a timespan eg: "1d", "20h", 60'));
  }
  Object.keys(options_to_payload).forEach(function(F2) {
    var H2 = options_to_payload[F2];
    if (typeof c[F2] < "u") {
      if (typeof a420[H2] < "u")
        return _(new Error('Bad "options.' + F2 + '" option. The payload already has an "' + H2 + '" property.'));
      a420[H2] = c[F2];
    }
  });
  var $ = c.encoding || "utf8";
  if (typeof l2 == "function")
    l2 = l2 && once$1(l2), jws.createSign({ header: p2, privateKey: u2, payload: a420, encoding: $ }).once("error", l2).once("done", function(F2) {
      l2(null, F2);
    });
  else
    return jws.sign({ header: p2, payload: a420, secret: u2, encoding: $ });
}, jsonwebtoken = { decode: decode$1, verify, sign, JsonWebTokenError: JsonWebTokenError_1, NotBeforeError: NotBeforeError_1, TokenExpiredError: TokenExpiredError_1 }, __createBinding = commonjsGlobal$1 && commonjsGlobal$1.__createBinding || (Object.create ? function(a420, u2, c, l2) {
  l2 === void 0 && (l2 = c), Object.defineProperty(a420, l2, { enumerable: true, get: function() {
    return u2[c];
  } });
} : function(a420, u2, c, l2) {
  l2 === void 0 && (l2 = c), a420[l2] = u2[c];
}), __setModuleDefault = commonjsGlobal$1 && commonjsGlobal$1.__setModuleDefault || (Object.create ? function(a420, u2) {
  Object.defineProperty(a420, "default", { enumerable: true, value: u2 });
} : function(a420, u2) {
  a420.default = u2;
}), __importStar = commonjsGlobal$1 && commonjsGlobal$1.__importStar || function(a420) {
  if (a420 && a420.__esModule)
    return a420;
  var u2 = {};
  if (a420 != null)
    for (var c in a420)
      c !== "default" && Object.prototype.hasOwnProperty.call(a420, c) && __createBinding(u2, a420, c);
  return __setModuleDefault(u2, a420), u2;
};
Object.defineProperty(AccessToken$1, "__esModule", { value: true });
AccessToken$1.TokenVerifier = AccessToken$1.AccessToken = void 0;
const jwt = __importStar(jsonwebtoken), defaultTTL = 6 * 60 * 60;
class AccessToken {
  /**
  * Creates a new AccessToken
  * @param apiKey API Key, can be set in env LIVEKIT_API_KEY
  * @param apiSecret Secret, can be set in env LIVEKIT_API_SECRET
  */
  constructor(u2, c, l2) {
    if (u2 || (u2 = process$1.env.LIVEKIT_API_KEY), c || (c = process$1.env.LIVEKIT_API_SECRET), !u2 || !c)
      throw Error("api-key and api-secret must be set");
    this.apiKey = u2, this.apiSecret = c, this.grants = {}, this.identity = l2 == null ? void 0 : l2.identity, this.ttl = (l2 == null ? void 0 : l2.ttl) || defaultTTL, l2 != null && l2.metadata && (this.metadata = l2.metadata), l2 != null && l2.name && (this.name = l2.name);
  }
  /**
  * Adds a video grant to this token.
  * @param grant
  */
  addGrant(u2) {
    this.grants.video = u2;
  }
  /**
  * Set metadata to be passed to the Participant, used only when joining the room
  */
  set metadata(u2) {
    this.grants.metadata = u2;
  }
  set name(u2) {
    this.grants.name = u2;
  }
  get sha256() {
    return this.grants.sha256;
  }
  set sha256(u2) {
    this.grants.sha256 = u2;
  }
  /**
  * @returns JWT encoded token
  */
  toJwt() {
    var u2;
    const c = { issuer: this.apiKey, expiresIn: this.ttl, notBefore: 0 };
    if (this.identity)
      c.subject = this.identity, c.jwtid = this.identity;
    else if (!((u2 = this.grants.video) === null || u2 === void 0) && u2.roomJoin)
      throw Error("identity is required for join but not set");
    return jwt.sign(this.grants, this.apiSecret, c);
  }
}
AccessToken$1.AccessToken = AccessToken;
class TokenVerifier {
  constructor(u2, c) {
    this.apiKey = u2, this.apiSecret = c;
  }
  verify(u2) {
    const c = jwt.verify(u2, this.apiSecret, { issuer: this.apiKey });
    if (!c)
      throw Error("invalid token");
    return c;
  }
}
AccessToken$1.TokenVerifier = TokenVerifier;
var EgressClient$1 = {}, livekit_egress = {};
(function(a420) {
  var u2 = commonjsGlobal$1 && commonjsGlobal$1.__importDefault || function(V2) {
    return V2 && V2.__esModule ? V2 : { default: V2 };
  };
  Object.defineProperty(a420, "__esModule", { value: true }), a420.AutoTrackEgress = a420.SegmentsInfo = a420.FileInfo = a420.StreamInfo = a420.StreamInfoList = a420.EgressInfo = a420.StopEgressRequest = a420.ListEgressResponse = a420.ListEgressRequest = a420.UpdateStreamRequest = a420.UpdateLayoutRequest = a420.EncodingOptions = a420.StreamOutput = a420.AliOSSUpload = a420.AzureBlobUpload = a420.GCPUpload = a420.S3Upload_MetadataEntry = a420.S3Upload = a420.DirectFileOutput = a420.SegmentedFileOutput = a420.EncodedFileOutput = a420.WebEgressRequest = a420.TrackEgressRequest = a420.TrackCompositeEgressRequest = a420.RoomCompositeEgressRequest = a420.streamInfo_StatusToJSON = a420.streamInfo_StatusFromJSON = a420.StreamInfo_Status = a420.egressStatusToJSON = a420.egressStatusFromJSON = a420.EgressStatus = a420.encodingOptionsPresetToJSON = a420.encodingOptionsPresetFromJSON = a420.EncodingOptionsPreset = a420.videoCodecToJSON = a420.videoCodecFromJSON = a420.VideoCodec = a420.audioCodecToJSON = a420.audioCodecFromJSON = a420.AudioCodec = a420.segmentedFileProtocolToJSON = a420.segmentedFileProtocolFromJSON = a420.SegmentedFileProtocol = a420.streamProtocolToJSON = a420.streamProtocolFromJSON = a420.StreamProtocol = a420.encodedFileTypeToJSON = a420.encodedFileTypeFromJSON = a420.EncodedFileType = a420.protobufPackage = void 0;
  const c = u2(umdExports), l2 = u2(minimal);
  a420.protobufPackage = "livekit";
  var v2;
  (function(V2) {
    V2[V2.DEFAULT_FILETYPE = 0] = "DEFAULT_FILETYPE", V2[V2.MP4 = 1] = "MP4", V2[V2.OGG = 2] = "OGG", V2[V2.UNRECOGNIZED = -1] = "UNRECOGNIZED";
  })(v2 = a420.EncodedFileType || (a420.EncodedFileType = {}));
  function p2(V2) {
    switch (V2) {
      case 0:
      case "DEFAULT_FILETYPE":
        return v2.DEFAULT_FILETYPE;
      case 1:
      case "MP4":
        return v2.MP4;
      case 2:
      case "OGG":
        return v2.OGG;
      case -1:
      case "UNRECOGNIZED":
      default:
        return v2.UNRECOGNIZED;
    }
  }
  a420.encodedFileTypeFromJSON = p2;
  function _(V2) {
    switch (V2) {
      case v2.DEFAULT_FILETYPE:
        return "DEFAULT_FILETYPE";
      case v2.MP4:
        return "MP4";
      case v2.OGG:
        return "OGG";
      case v2.UNRECOGNIZED:
      default:
        return "UNRECOGNIZED";
    }
  }
  a420.encodedFileTypeToJSON = _;
  var I2;
  (function(V2) {
    V2[V2.DEFAULT_PROTOCOL = 0] = "DEFAULT_PROTOCOL", V2[V2.RTMP = 1] = "RTMP", V2[V2.UNRECOGNIZED = -1] = "UNRECOGNIZED";
  })(I2 = a420.StreamProtocol || (a420.StreamProtocol = {}));
  function P2(V2) {
    switch (V2) {
      case 0:
      case "DEFAULT_PROTOCOL":
        return I2.DEFAULT_PROTOCOL;
      case 1:
      case "RTMP":
        return I2.RTMP;
      case -1:
      case "UNRECOGNIZED":
      default:
        return I2.UNRECOGNIZED;
    }
  }
  a420.streamProtocolFromJSON = P2;
  function $(V2) {
    switch (V2) {
      case I2.DEFAULT_PROTOCOL:
        return "DEFAULT_PROTOCOL";
      case I2.RTMP:
        return "RTMP";
      case I2.UNRECOGNIZED:
      default:
        return "UNRECOGNIZED";
    }
  }
  a420.streamProtocolToJSON = $;
  var F2;
  (function(V2) {
    V2[V2.DEFAULT_SEGMENTED_FILE_PROTOCOL = 0] = "DEFAULT_SEGMENTED_FILE_PROTOCOL", V2[V2.HLS_PROTOCOL = 1] = "HLS_PROTOCOL", V2[V2.UNRECOGNIZED = -1] = "UNRECOGNIZED";
  })(F2 = a420.SegmentedFileProtocol || (a420.SegmentedFileProtocol = {}));
  function H2(V2) {
    switch (V2) {
      case 0:
      case "DEFAULT_SEGMENTED_FILE_PROTOCOL":
        return F2.DEFAULT_SEGMENTED_FILE_PROTOCOL;
      case 1:
      case "HLS_PROTOCOL":
        return F2.HLS_PROTOCOL;
      case -1:
      case "UNRECOGNIZED":
      default:
        return F2.UNRECOGNIZED;
    }
  }
  a420.segmentedFileProtocolFromJSON = H2;
  function j(V2) {
    switch (V2) {
      case F2.DEFAULT_SEGMENTED_FILE_PROTOCOL:
        return "DEFAULT_SEGMENTED_FILE_PROTOCOL";
      case F2.HLS_PROTOCOL:
        return "HLS_PROTOCOL";
      case F2.UNRECOGNIZED:
      default:
        return "UNRECOGNIZED";
    }
  }
  a420.segmentedFileProtocolToJSON = j;
  var ee2;
  (function(V2) {
    V2[V2.DEFAULT_AC = 0] = "DEFAULT_AC", V2[V2.OPUS = 1] = "OPUS", V2[V2.AAC = 2] = "AAC", V2[V2.UNRECOGNIZED = -1] = "UNRECOGNIZED";
  })(ee2 = a420.AudioCodec || (a420.AudioCodec = {}));
  function X2(V2) {
    switch (V2) {
      case 0:
      case "DEFAULT_AC":
        return ee2.DEFAULT_AC;
      case 1:
      case "OPUS":
        return ee2.OPUS;
      case 2:
      case "AAC":
        return ee2.AAC;
      case -1:
      case "UNRECOGNIZED":
      default:
        return ee2.UNRECOGNIZED;
    }
  }
  a420.audioCodecFromJSON = X2;
  function ie2(V2) {
    switch (V2) {
      case ee2.DEFAULT_AC:
        return "DEFAULT_AC";
      case ee2.OPUS:
        return "OPUS";
      case ee2.AAC:
        return "AAC";
      case ee2.UNRECOGNIZED:
      default:
        return "UNRECOGNIZED";
    }
  }
  a420.audioCodecToJSON = ie2;
  var Q2;
  (function(V2) {
    V2[V2.DEFAULT_VC = 0] = "DEFAULT_VC", V2[V2.H264_BASELINE = 1] = "H264_BASELINE", V2[V2.H264_MAIN = 2] = "H264_MAIN", V2[V2.H264_HIGH = 3] = "H264_HIGH", V2[V2.UNRECOGNIZED = -1] = "UNRECOGNIZED";
  })(Q2 = a420.VideoCodec || (a420.VideoCodec = {}));
  function ne2(V2) {
    switch (V2) {
      case 0:
      case "DEFAULT_VC":
        return Q2.DEFAULT_VC;
      case 1:
      case "H264_BASELINE":
        return Q2.H264_BASELINE;
      case 2:
      case "H264_MAIN":
        return Q2.H264_MAIN;
      case 3:
      case "H264_HIGH":
        return Q2.H264_HIGH;
      case -1:
      case "UNRECOGNIZED":
      default:
        return Q2.UNRECOGNIZED;
    }
  }
  a420.videoCodecFromJSON = ne2;
  function Z2(V2) {
    switch (V2) {
      case Q2.DEFAULT_VC:
        return "DEFAULT_VC";
      case Q2.H264_BASELINE:
        return "H264_BASELINE";
      case Q2.H264_MAIN:
        return "H264_MAIN";
      case Q2.H264_HIGH:
        return "H264_HIGH";
      case Q2.UNRECOGNIZED:
      default:
        return "UNRECOGNIZED";
    }
  }
  a420.videoCodecToJSON = Z2;
  var de2;
  (function(V2) {
    V2[V2.H264_720P_30 = 0] = "H264_720P_30", V2[V2.H264_720P_60 = 1] = "H264_720P_60", V2[V2.H264_1080P_30 = 2] = "H264_1080P_30", V2[V2.H264_1080P_60 = 3] = "H264_1080P_60", V2[V2.PORTRAIT_H264_720P_30 = 4] = "PORTRAIT_H264_720P_30", V2[V2.PORTRAIT_H264_720P_60 = 5] = "PORTRAIT_H264_720P_60", V2[V2.PORTRAIT_H264_1080P_30 = 6] = "PORTRAIT_H264_1080P_30", V2[V2.PORTRAIT_H264_1080P_60 = 7] = "PORTRAIT_H264_1080P_60", V2[V2.UNRECOGNIZED = -1] = "UNRECOGNIZED";
  })(de2 = a420.EncodingOptionsPreset || (a420.EncodingOptionsPreset = {}));
  function pe2(V2) {
    switch (V2) {
      case 0:
      case "H264_720P_30":
        return de2.H264_720P_30;
      case 1:
      case "H264_720P_60":
        return de2.H264_720P_60;
      case 2:
      case "H264_1080P_30":
        return de2.H264_1080P_30;
      case 3:
      case "H264_1080P_60":
        return de2.H264_1080P_60;
      case 4:
      case "PORTRAIT_H264_720P_30":
        return de2.PORTRAIT_H264_720P_30;
      case 5:
      case "PORTRAIT_H264_720P_60":
        return de2.PORTRAIT_H264_720P_60;
      case 6:
      case "PORTRAIT_H264_1080P_30":
        return de2.PORTRAIT_H264_1080P_30;
      case 7:
      case "PORTRAIT_H264_1080P_60":
        return de2.PORTRAIT_H264_1080P_60;
      case -1:
      case "UNRECOGNIZED":
      default:
        return de2.UNRECOGNIZED;
    }
  }
  a420.encodingOptionsPresetFromJSON = pe2;
  function le2(V2) {
    switch (V2) {
      case de2.H264_720P_30:
        return "H264_720P_30";
      case de2.H264_720P_60:
        return "H264_720P_60";
      case de2.H264_1080P_30:
        return "H264_1080P_30";
      case de2.H264_1080P_60:
        return "H264_1080P_60";
      case de2.PORTRAIT_H264_720P_30:
        return "PORTRAIT_H264_720P_30";
      case de2.PORTRAIT_H264_720P_60:
        return "PORTRAIT_H264_720P_60";
      case de2.PORTRAIT_H264_1080P_30:
        return "PORTRAIT_H264_1080P_30";
      case de2.PORTRAIT_H264_1080P_60:
        return "PORTRAIT_H264_1080P_60";
      case de2.UNRECOGNIZED:
      default:
        return "UNRECOGNIZED";
    }
  }
  a420.encodingOptionsPresetToJSON = le2;
  var be2;
  (function(V2) {
    V2[V2.EGRESS_STARTING = 0] = "EGRESS_STARTING", V2[V2.EGRESS_ACTIVE = 1] = "EGRESS_ACTIVE", V2[V2.EGRESS_ENDING = 2] = "EGRESS_ENDING", V2[V2.EGRESS_COMPLETE = 3] = "EGRESS_COMPLETE", V2[V2.EGRESS_FAILED = 4] = "EGRESS_FAILED", V2[V2.EGRESS_ABORTED = 5] = "EGRESS_ABORTED", V2[V2.EGRESS_LIMIT_REACHED = 6] = "EGRESS_LIMIT_REACHED", V2[V2.UNRECOGNIZED = -1] = "UNRECOGNIZED";
  })(be2 = a420.EgressStatus || (a420.EgressStatus = {}));
  function ke2(V2) {
    switch (V2) {
      case 0:
      case "EGRESS_STARTING":
        return be2.EGRESS_STARTING;
      case 1:
      case "EGRESS_ACTIVE":
        return be2.EGRESS_ACTIVE;
      case 2:
      case "EGRESS_ENDING":
        return be2.EGRESS_ENDING;
      case 3:
      case "EGRESS_COMPLETE":
        return be2.EGRESS_COMPLETE;
      case 4:
      case "EGRESS_FAILED":
        return be2.EGRESS_FAILED;
      case 5:
      case "EGRESS_ABORTED":
        return be2.EGRESS_ABORTED;
      case 6:
      case "EGRESS_LIMIT_REACHED":
        return be2.EGRESS_LIMIT_REACHED;
      case -1:
      case "UNRECOGNIZED":
      default:
        return be2.UNRECOGNIZED;
    }
  }
  a420.egressStatusFromJSON = ke2;
  function Te2(V2) {
    switch (V2) {
      case be2.EGRESS_STARTING:
        return "EGRESS_STARTING";
      case be2.EGRESS_ACTIVE:
        return "EGRESS_ACTIVE";
      case be2.EGRESS_ENDING:
        return "EGRESS_ENDING";
      case be2.EGRESS_COMPLETE:
        return "EGRESS_COMPLETE";
      case be2.EGRESS_FAILED:
        return "EGRESS_FAILED";
      case be2.EGRESS_ABORTED:
        return "EGRESS_ABORTED";
      case be2.EGRESS_LIMIT_REACHED:
        return "EGRESS_LIMIT_REACHED";
      case be2.UNRECOGNIZED:
      default:
        return "UNRECOGNIZED";
    }
  }
  a420.egressStatusToJSON = Te2;
  var q2;
  (function(V2) {
    V2[V2.ACTIVE = 0] = "ACTIVE", V2[V2.FINISHED = 1] = "FINISHED", V2[V2.FAILED = 2] = "FAILED", V2[V2.UNRECOGNIZED = -1] = "UNRECOGNIZED";
  })(q2 = a420.StreamInfo_Status || (a420.StreamInfo_Status = {}));
  function z2(V2) {
    switch (V2) {
      case 0:
      case "ACTIVE":
        return q2.ACTIVE;
      case 1:
      case "FINISHED":
        return q2.FINISHED;
      case 2:
      case "FAILED":
        return q2.FAILED;
      case -1:
      case "UNRECOGNIZED":
      default:
        return q2.UNRECOGNIZED;
    }
  }
  a420.streamInfo_StatusFromJSON = z2;
  function C2(V2) {
    switch (V2) {
      case q2.ACTIVE:
        return "ACTIVE";
      case q2.FINISHED:
        return "FINISHED";
      case q2.FAILED:
        return "FAILED";
      case q2.UNRECOGNIZED:
      default:
        return "UNRECOGNIZED";
    }
  }
  a420.streamInfo_StatusToJSON = C2;
  function b() {
    return { roomName: "", layout: "", audioOnly: false, videoOnly: false, customBaseUrl: "", file: void 0, stream: void 0, segments: void 0, preset: void 0, advanced: void 0 };
  }
  a420.RoomCompositeEgressRequest = { encode(V2, ge2 = l2.default.Writer.create()) {
    return V2.roomName !== void 0 && V2.roomName !== "" && ge2.uint32(10).string(V2.roomName), V2.layout !== void 0 && V2.layout !== "" && ge2.uint32(18).string(V2.layout), V2.audioOnly === true && ge2.uint32(24).bool(V2.audioOnly), V2.videoOnly === true && ge2.uint32(32).bool(V2.videoOnly), V2.customBaseUrl !== void 0 && V2.customBaseUrl !== "" && ge2.uint32(42).string(V2.customBaseUrl), V2.file !== void 0 && a420.EncodedFileOutput.encode(V2.file, ge2.uint32(50).fork()).ldelim(), V2.stream !== void 0 && a420.StreamOutput.encode(V2.stream, ge2.uint32(58).fork()).ldelim(), V2.segments !== void 0 && a420.SegmentedFileOutput.encode(V2.segments, ge2.uint32(82).fork()).ldelim(), V2.preset !== void 0 && ge2.uint32(64).int32(V2.preset), V2.advanced !== void 0 && a420.EncodingOptions.encode(V2.advanced, ge2.uint32(74).fork()).ldelim(), ge2;
  }, decode(V2, ge2) {
    const we2 = V2 instanceof l2.default.Reader ? V2 : new l2.default.Reader(V2);
    let We2 = ge2 === void 0 ? we2.len : we2.pos + ge2;
    const Re2 = b();
    for (; we2.pos < We2; ) {
      const J2 = we2.uint32();
      switch (J2 >>> 3) {
        case 1:
          Re2.roomName = we2.string();
          break;
        case 2:
          Re2.layout = we2.string();
          break;
        case 3:
          Re2.audioOnly = we2.bool();
          break;
        case 4:
          Re2.videoOnly = we2.bool();
          break;
        case 5:
          Re2.customBaseUrl = we2.string();
          break;
        case 6:
          Re2.file = a420.EncodedFileOutput.decode(we2, we2.uint32());
          break;
        case 7:
          Re2.stream = a420.StreamOutput.decode(we2, we2.uint32());
          break;
        case 10:
          Re2.segments = a420.SegmentedFileOutput.decode(we2, we2.uint32());
          break;
        case 8:
          Re2.preset = we2.int32();
          break;
        case 9:
          Re2.advanced = a420.EncodingOptions.decode(we2, we2.uint32());
          break;
        default:
          we2.skipType(J2 & 7);
          break;
      }
    }
    return Re2;
  }, fromJSON(V2) {
    return { roomName: Ge2(V2.roomName) ? String(V2.roomName) : "", layout: Ge2(V2.layout) ? String(V2.layout) : "", audioOnly: Ge2(V2.audioOnly) ? !!V2.audioOnly : false, videoOnly: Ge2(V2.videoOnly) ? !!V2.videoOnly : false, customBaseUrl: Ge2(V2.customBaseUrl) ? String(V2.customBaseUrl) : "", file: Ge2(V2.file) ? a420.EncodedFileOutput.fromJSON(V2.file) : void 0, stream: Ge2(V2.stream) ? a420.StreamOutput.fromJSON(V2.stream) : void 0, segments: Ge2(V2.segments) ? a420.SegmentedFileOutput.fromJSON(V2.segments) : void 0, preset: Ge2(V2.preset) ? pe2(V2.preset) : void 0, advanced: Ge2(V2.advanced) ? a420.EncodingOptions.fromJSON(V2.advanced) : void 0 };
  }, toJSON(V2) {
    const ge2 = {};
    return V2.roomName !== void 0 && (ge2.roomName = V2.roomName), V2.layout !== void 0 && (ge2.layout = V2.layout), V2.audioOnly !== void 0 && (ge2.audioOnly = V2.audioOnly), V2.videoOnly !== void 0 && (ge2.videoOnly = V2.videoOnly), V2.customBaseUrl !== void 0 && (ge2.customBaseUrl = V2.customBaseUrl), V2.file !== void 0 && (ge2.file = V2.file ? a420.EncodedFileOutput.toJSON(V2.file) : void 0), V2.stream !== void 0 && (ge2.stream = V2.stream ? a420.StreamOutput.toJSON(V2.stream) : void 0), V2.segments !== void 0 && (ge2.segments = V2.segments ? a420.SegmentedFileOutput.toJSON(V2.segments) : void 0), V2.preset !== void 0 && (ge2.preset = V2.preset !== void 0 ? le2(V2.preset) : void 0), V2.advanced !== void 0 && (ge2.advanced = V2.advanced ? a420.EncodingOptions.toJSON(V2.advanced) : void 0), ge2;
  }, fromPartial(V2) {
    var ge2, we2, We2, Re2, J2, _e;
    const ue2 = b();
    return ue2.roomName = (ge2 = V2.roomName) !== null && ge2 !== void 0 ? ge2 : "", ue2.layout = (we2 = V2.layout) !== null && we2 !== void 0 ? we2 : "", ue2.audioOnly = (We2 = V2.audioOnly) !== null && We2 !== void 0 ? We2 : false, ue2.videoOnly = (Re2 = V2.videoOnly) !== null && Re2 !== void 0 ? Re2 : false, ue2.customBaseUrl = (J2 = V2.customBaseUrl) !== null && J2 !== void 0 ? J2 : "", ue2.file = V2.file !== void 0 && V2.file !== null ? a420.EncodedFileOutput.fromPartial(V2.file) : void 0, ue2.stream = V2.stream !== void 0 && V2.stream !== null ? a420.StreamOutput.fromPartial(V2.stream) : void 0, ue2.segments = V2.segments !== void 0 && V2.segments !== null ? a420.SegmentedFileOutput.fromPartial(V2.segments) : void 0, ue2.preset = (_e = V2.preset) !== null && _e !== void 0 ? _e : void 0, ue2.advanced = V2.advanced !== void 0 && V2.advanced !== null ? a420.EncodingOptions.fromPartial(V2.advanced) : void 0, ue2;
  } };
  function E2() {
    return { roomName: "", audioTrackId: "", videoTrackId: "", file: void 0, stream: void 0, segments: void 0, preset: void 0, advanced: void 0 };
  }
  a420.TrackCompositeEgressRequest = { encode(V2, ge2 = l2.default.Writer.create()) {
    return V2.roomName !== void 0 && V2.roomName !== "" && ge2.uint32(10).string(V2.roomName), V2.audioTrackId !== void 0 && V2.audioTrackId !== "" && ge2.uint32(18).string(V2.audioTrackId), V2.videoTrackId !== void 0 && V2.videoTrackId !== "" && ge2.uint32(26).string(V2.videoTrackId), V2.file !== void 0 && a420.EncodedFileOutput.encode(V2.file, ge2.uint32(34).fork()).ldelim(), V2.stream !== void 0 && a420.StreamOutput.encode(V2.stream, ge2.uint32(42).fork()).ldelim(), V2.segments !== void 0 && a420.SegmentedFileOutput.encode(V2.segments, ge2.uint32(66).fork()).ldelim(), V2.preset !== void 0 && ge2.uint32(48).int32(V2.preset), V2.advanced !== void 0 && a420.EncodingOptions.encode(V2.advanced, ge2.uint32(58).fork()).ldelim(), ge2;
  }, decode(V2, ge2) {
    const we2 = V2 instanceof l2.default.Reader ? V2 : new l2.default.Reader(V2);
    let We2 = ge2 === void 0 ? we2.len : we2.pos + ge2;
    const Re2 = E2();
    for (; we2.pos < We2; ) {
      const J2 = we2.uint32();
      switch (J2 >>> 3) {
        case 1:
          Re2.roomName = we2.string();
          break;
        case 2:
          Re2.audioTrackId = we2.string();
          break;
        case 3:
          Re2.videoTrackId = we2.string();
          break;
        case 4:
          Re2.file = a420.EncodedFileOutput.decode(we2, we2.uint32());
          break;
        case 5:
          Re2.stream = a420.StreamOutput.decode(we2, we2.uint32());
          break;
        case 8:
          Re2.segments = a420.SegmentedFileOutput.decode(we2, we2.uint32());
          break;
        case 6:
          Re2.preset = we2.int32();
          break;
        case 7:
          Re2.advanced = a420.EncodingOptions.decode(we2, we2.uint32());
          break;
        default:
          we2.skipType(J2 & 7);
          break;
      }
    }
    return Re2;
  }, fromJSON(V2) {
    return { roomName: Ge2(V2.roomName) ? String(V2.roomName) : "", audioTrackId: Ge2(V2.audioTrackId) ? String(V2.audioTrackId) : "", videoTrackId: Ge2(V2.videoTrackId) ? String(V2.videoTrackId) : "", file: Ge2(V2.file) ? a420.EncodedFileOutput.fromJSON(V2.file) : void 0, stream: Ge2(V2.stream) ? a420.StreamOutput.fromJSON(V2.stream) : void 0, segments: Ge2(V2.segments) ? a420.SegmentedFileOutput.fromJSON(V2.segments) : void 0, preset: Ge2(V2.preset) ? pe2(V2.preset) : void 0, advanced: Ge2(V2.advanced) ? a420.EncodingOptions.fromJSON(V2.advanced) : void 0 };
  }, toJSON(V2) {
    const ge2 = {};
    return V2.roomName !== void 0 && (ge2.roomName = V2.roomName), V2.audioTrackId !== void 0 && (ge2.audioTrackId = V2.audioTrackId), V2.videoTrackId !== void 0 && (ge2.videoTrackId = V2.videoTrackId), V2.file !== void 0 && (ge2.file = V2.file ? a420.EncodedFileOutput.toJSON(V2.file) : void 0), V2.stream !== void 0 && (ge2.stream = V2.stream ? a420.StreamOutput.toJSON(V2.stream) : void 0), V2.segments !== void 0 && (ge2.segments = V2.segments ? a420.SegmentedFileOutput.toJSON(V2.segments) : void 0), V2.preset !== void 0 && (ge2.preset = V2.preset !== void 0 ? le2(V2.preset) : void 0), V2.advanced !== void 0 && (ge2.advanced = V2.advanced ? a420.EncodingOptions.toJSON(V2.advanced) : void 0), ge2;
  }, fromPartial(V2) {
    var ge2, we2, We2, Re2;
    const J2 = E2();
    return J2.roomName = (ge2 = V2.roomName) !== null && ge2 !== void 0 ? ge2 : "", J2.audioTrackId = (we2 = V2.audioTrackId) !== null && we2 !== void 0 ? we2 : "", J2.videoTrackId = (We2 = V2.videoTrackId) !== null && We2 !== void 0 ? We2 : "", J2.file = V2.file !== void 0 && V2.file !== null ? a420.EncodedFileOutput.fromPartial(V2.file) : void 0, J2.stream = V2.stream !== void 0 && V2.stream !== null ? a420.StreamOutput.fromPartial(V2.stream) : void 0, J2.segments = V2.segments !== void 0 && V2.segments !== null ? a420.SegmentedFileOutput.fromPartial(V2.segments) : void 0, J2.preset = (Re2 = V2.preset) !== null && Re2 !== void 0 ? Re2 : void 0, J2.advanced = V2.advanced !== void 0 && V2.advanced !== null ? a420.EncodingOptions.fromPartial(V2.advanced) : void 0, J2;
  } };
  function k() {
    return { roomName: "", trackId: "", file: void 0, websocketUrl: void 0 };
  }
  a420.TrackEgressRequest = { encode(V2, ge2 = l2.default.Writer.create()) {
    return V2.roomName !== void 0 && V2.roomName !== "" && ge2.uint32(10).string(V2.roomName), V2.trackId !== void 0 && V2.trackId !== "" && ge2.uint32(18).string(V2.trackId), V2.file !== void 0 && a420.DirectFileOutput.encode(V2.file, ge2.uint32(26).fork()).ldelim(), V2.websocketUrl !== void 0 && ge2.uint32(34).string(V2.websocketUrl), ge2;
  }, decode(V2, ge2) {
    const we2 = V2 instanceof l2.default.Reader ? V2 : new l2.default.Reader(V2);
    let We2 = ge2 === void 0 ? we2.len : we2.pos + ge2;
    const Re2 = k();
    for (; we2.pos < We2; ) {
      const J2 = we2.uint32();
      switch (J2 >>> 3) {
        case 1:
          Re2.roomName = we2.string();
          break;
        case 2:
          Re2.trackId = we2.string();
          break;
        case 3:
          Re2.file = a420.DirectFileOutput.decode(we2, we2.uint32());
          break;
        case 4:
          Re2.websocketUrl = we2.string();
          break;
        default:
          we2.skipType(J2 & 7);
          break;
      }
    }
    return Re2;
  }, fromJSON(V2) {
    return { roomName: Ge2(V2.roomName) ? String(V2.roomName) : "", trackId: Ge2(V2.trackId) ? String(V2.trackId) : "", file: Ge2(V2.file) ? a420.DirectFileOutput.fromJSON(V2.file) : void 0, websocketUrl: Ge2(V2.websocketUrl) ? String(V2.websocketUrl) : void 0 };
  }, toJSON(V2) {
    const ge2 = {};
    return V2.roomName !== void 0 && (ge2.roomName = V2.roomName), V2.trackId !== void 0 && (ge2.trackId = V2.trackId), V2.file !== void 0 && (ge2.file = V2.file ? a420.DirectFileOutput.toJSON(V2.file) : void 0), V2.websocketUrl !== void 0 && (ge2.websocketUrl = V2.websocketUrl), ge2;
  }, fromPartial(V2) {
    var ge2, we2, We2;
    const Re2 = k();
    return Re2.roomName = (ge2 = V2.roomName) !== null && ge2 !== void 0 ? ge2 : "", Re2.trackId = (we2 = V2.trackId) !== null && we2 !== void 0 ? we2 : "", Re2.file = V2.file !== void 0 && V2.file !== null ? a420.DirectFileOutput.fromPartial(V2.file) : void 0, Re2.websocketUrl = (We2 = V2.websocketUrl) !== null && We2 !== void 0 ? We2 : void 0, Re2;
  } };
  function O2() {
    return { url: "", audioOnly: false, videoOnly: false, file: void 0, stream: void 0, segments: void 0, preset: void 0, advanced: void 0 };
  }
  a420.WebEgressRequest = { encode(V2, ge2 = l2.default.Writer.create()) {
    return V2.url !== void 0 && V2.url !== "" && ge2.uint32(10).string(V2.url), V2.audioOnly === true && ge2.uint32(16).bool(V2.audioOnly), V2.videoOnly === true && ge2.uint32(24).bool(V2.videoOnly), V2.file !== void 0 && a420.EncodedFileOutput.encode(V2.file, ge2.uint32(34).fork()).ldelim(), V2.stream !== void 0 && a420.StreamOutput.encode(V2.stream, ge2.uint32(42).fork()).ldelim(), V2.segments !== void 0 && a420.SegmentedFileOutput.encode(V2.segments, ge2.uint32(50).fork()).ldelim(), V2.preset !== void 0 && ge2.uint32(56).int32(V2.preset), V2.advanced !== void 0 && a420.EncodingOptions.encode(V2.advanced, ge2.uint32(66).fork()).ldelim(), ge2;
  }, decode(V2, ge2) {
    const we2 = V2 instanceof l2.default.Reader ? V2 : new l2.default.Reader(V2);
    let We2 = ge2 === void 0 ? we2.len : we2.pos + ge2;
    const Re2 = O2();
    for (; we2.pos < We2; ) {
      const J2 = we2.uint32();
      switch (J2 >>> 3) {
        case 1:
          Re2.url = we2.string();
          break;
        case 2:
          Re2.audioOnly = we2.bool();
          break;
        case 3:
          Re2.videoOnly = we2.bool();
          break;
        case 4:
          Re2.file = a420.EncodedFileOutput.decode(we2, we2.uint32());
          break;
        case 5:
          Re2.stream = a420.StreamOutput.decode(we2, we2.uint32());
          break;
        case 6:
          Re2.segments = a420.SegmentedFileOutput.decode(we2, we2.uint32());
          break;
        case 7:
          Re2.preset = we2.int32();
          break;
        case 8:
          Re2.advanced = a420.EncodingOptions.decode(we2, we2.uint32());
          break;
        default:
          we2.skipType(J2 & 7);
          break;
      }
    }
    return Re2;
  }, fromJSON(V2) {
    return { url: Ge2(V2.url) ? String(V2.url) : "", audioOnly: Ge2(V2.audioOnly) ? !!V2.audioOnly : false, videoOnly: Ge2(V2.videoOnly) ? !!V2.videoOnly : false, file: Ge2(V2.file) ? a420.EncodedFileOutput.fromJSON(V2.file) : void 0, stream: Ge2(V2.stream) ? a420.StreamOutput.fromJSON(V2.stream) : void 0, segments: Ge2(V2.segments) ? a420.SegmentedFileOutput.fromJSON(V2.segments) : void 0, preset: Ge2(V2.preset) ? pe2(V2.preset) : void 0, advanced: Ge2(V2.advanced) ? a420.EncodingOptions.fromJSON(V2.advanced) : void 0 };
  }, toJSON(V2) {
    const ge2 = {};
    return V2.url !== void 0 && (ge2.url = V2.url), V2.audioOnly !== void 0 && (ge2.audioOnly = V2.audioOnly), V2.videoOnly !== void 0 && (ge2.videoOnly = V2.videoOnly), V2.file !== void 0 && (ge2.file = V2.file ? a420.EncodedFileOutput.toJSON(V2.file) : void 0), V2.stream !== void 0 && (ge2.stream = V2.stream ? a420.StreamOutput.toJSON(V2.stream) : void 0), V2.segments !== void 0 && (ge2.segments = V2.segments ? a420.SegmentedFileOutput.toJSON(V2.segments) : void 0), V2.preset !== void 0 && (ge2.preset = V2.preset !== void 0 ? le2(V2.preset) : void 0), V2.advanced !== void 0 && (ge2.advanced = V2.advanced ? a420.EncodingOptions.toJSON(V2.advanced) : void 0), ge2;
  }, fromPartial(V2) {
    var ge2, we2, We2, Re2;
    const J2 = O2();
    return J2.url = (ge2 = V2.url) !== null && ge2 !== void 0 ? ge2 : "", J2.audioOnly = (we2 = V2.audioOnly) !== null && we2 !== void 0 ? we2 : false, J2.videoOnly = (We2 = V2.videoOnly) !== null && We2 !== void 0 ? We2 : false, J2.file = V2.file !== void 0 && V2.file !== null ? a420.EncodedFileOutput.fromPartial(V2.file) : void 0, J2.stream = V2.stream !== void 0 && V2.stream !== null ? a420.StreamOutput.fromPartial(V2.stream) : void 0, J2.segments = V2.segments !== void 0 && V2.segments !== null ? a420.SegmentedFileOutput.fromPartial(V2.segments) : void 0, J2.preset = (Re2 = V2.preset) !== null && Re2 !== void 0 ? Re2 : void 0, J2.advanced = V2.advanced !== void 0 && V2.advanced !== null ? a420.EncodingOptions.fromPartial(V2.advanced) : void 0, J2;
  } };
  function A2() {
    return { fileType: 0, filepath: "", disableManifest: false, s3: void 0, gcp: void 0, azure: void 0, aliOSS: void 0 };
  }
  a420.EncodedFileOutput = { encode(V2, ge2 = l2.default.Writer.create()) {
    return V2.fileType !== void 0 && V2.fileType !== 0 && ge2.uint32(8).int32(V2.fileType), V2.filepath !== void 0 && V2.filepath !== "" && ge2.uint32(18).string(V2.filepath), V2.disableManifest === true && ge2.uint32(48).bool(V2.disableManifest), V2.s3 !== void 0 && a420.S3Upload.encode(V2.s3, ge2.uint32(26).fork()).ldelim(), V2.gcp !== void 0 && a420.GCPUpload.encode(V2.gcp, ge2.uint32(34).fork()).ldelim(), V2.azure !== void 0 && a420.AzureBlobUpload.encode(V2.azure, ge2.uint32(42).fork()).ldelim(), V2.aliOSS !== void 0 && a420.AliOSSUpload.encode(V2.aliOSS, ge2.uint32(58).fork()).ldelim(), ge2;
  }, decode(V2, ge2) {
    const we2 = V2 instanceof l2.default.Reader ? V2 : new l2.default.Reader(V2);
    let We2 = ge2 === void 0 ? we2.len : we2.pos + ge2;
    const Re2 = A2();
    for (; we2.pos < We2; ) {
      const J2 = we2.uint32();
      switch (J2 >>> 3) {
        case 1:
          Re2.fileType = we2.int32();
          break;
        case 2:
          Re2.filepath = we2.string();
          break;
        case 6:
          Re2.disableManifest = we2.bool();
          break;
        case 3:
          Re2.s3 = a420.S3Upload.decode(we2, we2.uint32());
          break;
        case 4:
          Re2.gcp = a420.GCPUpload.decode(we2, we2.uint32());
          break;
        case 5:
          Re2.azure = a420.AzureBlobUpload.decode(we2, we2.uint32());
          break;
        case 7:
          Re2.aliOSS = a420.AliOSSUpload.decode(we2, we2.uint32());
          break;
        default:
          we2.skipType(J2 & 7);
          break;
      }
    }
    return Re2;
  }, fromJSON(V2) {
    return { fileType: Ge2(V2.fileType) ? p2(V2.fileType) : 0, filepath: Ge2(V2.filepath) ? String(V2.filepath) : "", disableManifest: Ge2(V2.disableManifest) ? !!V2.disableManifest : false, s3: Ge2(V2.s3) ? a420.S3Upload.fromJSON(V2.s3) : void 0, gcp: Ge2(V2.gcp) ? a420.GCPUpload.fromJSON(V2.gcp) : void 0, azure: Ge2(V2.azure) ? a420.AzureBlobUpload.fromJSON(V2.azure) : void 0, aliOSS: Ge2(V2.aliOSS) ? a420.AliOSSUpload.fromJSON(V2.aliOSS) : void 0 };
  }, toJSON(V2) {
    const ge2 = {};
    return V2.fileType !== void 0 && (ge2.fileType = _(V2.fileType)), V2.filepath !== void 0 && (ge2.filepath = V2.filepath), V2.disableManifest !== void 0 && (ge2.disableManifest = V2.disableManifest), V2.s3 !== void 0 && (ge2.s3 = V2.s3 ? a420.S3Upload.toJSON(V2.s3) : void 0), V2.gcp !== void 0 && (ge2.gcp = V2.gcp ? a420.GCPUpload.toJSON(V2.gcp) : void 0), V2.azure !== void 0 && (ge2.azure = V2.azure ? a420.AzureBlobUpload.toJSON(V2.azure) : void 0), V2.aliOSS !== void 0 && (ge2.aliOSS = V2.aliOSS ? a420.AliOSSUpload.toJSON(V2.aliOSS) : void 0), ge2;
  }, fromPartial(V2) {
    var ge2, we2, We2;
    const Re2 = A2();
    return Re2.fileType = (ge2 = V2.fileType) !== null && ge2 !== void 0 ? ge2 : 0, Re2.filepath = (we2 = V2.filepath) !== null && we2 !== void 0 ? we2 : "", Re2.disableManifest = (We2 = V2.disableManifest) !== null && We2 !== void 0 ? We2 : false, Re2.s3 = V2.s3 !== void 0 && V2.s3 !== null ? a420.S3Upload.fromPartial(V2.s3) : void 0, Re2.gcp = V2.gcp !== void 0 && V2.gcp !== null ? a420.GCPUpload.fromPartial(V2.gcp) : void 0, Re2.azure = V2.azure !== void 0 && V2.azure !== null ? a420.AzureBlobUpload.fromPartial(V2.azure) : void 0, Re2.aliOSS = V2.aliOSS !== void 0 && V2.aliOSS !== null ? a420.AliOSSUpload.fromPartial(V2.aliOSS) : void 0, Re2;
  } };
  function x2() {
    return { protocol: 0, filenamePrefix: "", playlistName: "", segmentDuration: 0, disableManifest: false, s3: void 0, gcp: void 0, azure: void 0, aliOSS: void 0 };
  }
  a420.SegmentedFileOutput = { encode(V2, ge2 = l2.default.Writer.create()) {
    return V2.protocol !== void 0 && V2.protocol !== 0 && ge2.uint32(8).int32(V2.protocol), V2.filenamePrefix !== void 0 && V2.filenamePrefix !== "" && ge2.uint32(18).string(V2.filenamePrefix), V2.playlistName !== void 0 && V2.playlistName !== "" && ge2.uint32(26).string(V2.playlistName), V2.segmentDuration !== void 0 && V2.segmentDuration !== 0 && ge2.uint32(32).uint32(V2.segmentDuration), V2.disableManifest === true && ge2.uint32(64).bool(V2.disableManifest), V2.s3 !== void 0 && a420.S3Upload.encode(V2.s3, ge2.uint32(42).fork()).ldelim(), V2.gcp !== void 0 && a420.GCPUpload.encode(V2.gcp, ge2.uint32(50).fork()).ldelim(), V2.azure !== void 0 && a420.AzureBlobUpload.encode(V2.azure, ge2.uint32(58).fork()).ldelim(), V2.aliOSS !== void 0 && a420.AliOSSUpload.encode(V2.aliOSS, ge2.uint32(74).fork()).ldelim(), ge2;
  }, decode(V2, ge2) {
    const we2 = V2 instanceof l2.default.Reader ? V2 : new l2.default.Reader(V2);
    let We2 = ge2 === void 0 ? we2.len : we2.pos + ge2;
    const Re2 = x2();
    for (; we2.pos < We2; ) {
      const J2 = we2.uint32();
      switch (J2 >>> 3) {
        case 1:
          Re2.protocol = we2.int32();
          break;
        case 2:
          Re2.filenamePrefix = we2.string();
          break;
        case 3:
          Re2.playlistName = we2.string();
          break;
        case 4:
          Re2.segmentDuration = we2.uint32();
          break;
        case 8:
          Re2.disableManifest = we2.bool();
          break;
        case 5:
          Re2.s3 = a420.S3Upload.decode(we2, we2.uint32());
          break;
        case 6:
          Re2.gcp = a420.GCPUpload.decode(we2, we2.uint32());
          break;
        case 7:
          Re2.azure = a420.AzureBlobUpload.decode(we2, we2.uint32());
          break;
        case 9:
          Re2.aliOSS = a420.AliOSSUpload.decode(we2, we2.uint32());
          break;
        default:
          we2.skipType(J2 & 7);
          break;
      }
    }
    return Re2;
  }, fromJSON(V2) {
    return { protocol: Ge2(V2.protocol) ? H2(V2.protocol) : 0, filenamePrefix: Ge2(V2.filenamePrefix) ? String(V2.filenamePrefix) : "", playlistName: Ge2(V2.playlistName) ? String(V2.playlistName) : "", segmentDuration: Ge2(V2.segmentDuration) ? Number(V2.segmentDuration) : 0, disableManifest: Ge2(V2.disableManifest) ? !!V2.disableManifest : false, s3: Ge2(V2.s3) ? a420.S3Upload.fromJSON(V2.s3) : void 0, gcp: Ge2(V2.gcp) ? a420.GCPUpload.fromJSON(V2.gcp) : void 0, azure: Ge2(V2.azure) ? a420.AzureBlobUpload.fromJSON(V2.azure) : void 0, aliOSS: Ge2(V2.aliOSS) ? a420.AliOSSUpload.fromJSON(V2.aliOSS) : void 0 };
  }, toJSON(V2) {
    const ge2 = {};
    return V2.protocol !== void 0 && (ge2.protocol = j(V2.protocol)), V2.filenamePrefix !== void 0 && (ge2.filenamePrefix = V2.filenamePrefix), V2.playlistName !== void 0 && (ge2.playlistName = V2.playlistName), V2.segmentDuration !== void 0 && (ge2.segmentDuration = Math.round(V2.segmentDuration)), V2.disableManifest !== void 0 && (ge2.disableManifest = V2.disableManifest), V2.s3 !== void 0 && (ge2.s3 = V2.s3 ? a420.S3Upload.toJSON(V2.s3) : void 0), V2.gcp !== void 0 && (ge2.gcp = V2.gcp ? a420.GCPUpload.toJSON(V2.gcp) : void 0), V2.azure !== void 0 && (ge2.azure = V2.azure ? a420.AzureBlobUpload.toJSON(V2.azure) : void 0), V2.aliOSS !== void 0 && (ge2.aliOSS = V2.aliOSS ? a420.AliOSSUpload.toJSON(V2.aliOSS) : void 0), ge2;
  }, fromPartial(V2) {
    var ge2, we2, We2, Re2, J2;
    const _e = x2();
    return _e.protocol = (ge2 = V2.protocol) !== null && ge2 !== void 0 ? ge2 : 0, _e.filenamePrefix = (we2 = V2.filenamePrefix) !== null && we2 !== void 0 ? we2 : "", _e.playlistName = (We2 = V2.playlistName) !== null && We2 !== void 0 ? We2 : "", _e.segmentDuration = (Re2 = V2.segmentDuration) !== null && Re2 !== void 0 ? Re2 : 0, _e.disableManifest = (J2 = V2.disableManifest) !== null && J2 !== void 0 ? J2 : false, _e.s3 = V2.s3 !== void 0 && V2.s3 !== null ? a420.S3Upload.fromPartial(V2.s3) : void 0, _e.gcp = V2.gcp !== void 0 && V2.gcp !== null ? a420.GCPUpload.fromPartial(V2.gcp) : void 0, _e.azure = V2.azure !== void 0 && V2.azure !== null ? a420.AzureBlobUpload.fromPartial(V2.azure) : void 0, _e.aliOSS = V2.aliOSS !== void 0 && V2.aliOSS !== null ? a420.AliOSSUpload.fromPartial(V2.aliOSS) : void 0, _e;
  } };
  function Y2() {
    return { filepath: "", disableManifest: false, s3: void 0, gcp: void 0, azure: void 0, aliOSS: void 0 };
  }
  a420.DirectFileOutput = { encode(V2, ge2 = l2.default.Writer.create()) {
    return V2.filepath !== void 0 && V2.filepath !== "" && ge2.uint32(10).string(V2.filepath), V2.disableManifest === true && ge2.uint32(40).bool(V2.disableManifest), V2.s3 !== void 0 && a420.S3Upload.encode(V2.s3, ge2.uint32(18).fork()).ldelim(), V2.gcp !== void 0 && a420.GCPUpload.encode(V2.gcp, ge2.uint32(26).fork()).ldelim(), V2.azure !== void 0 && a420.AzureBlobUpload.encode(V2.azure, ge2.uint32(34).fork()).ldelim(), V2.aliOSS !== void 0 && a420.AliOSSUpload.encode(V2.aliOSS, ge2.uint32(50).fork()).ldelim(), ge2;
  }, decode(V2, ge2) {
    const we2 = V2 instanceof l2.default.Reader ? V2 : new l2.default.Reader(V2);
    let We2 = ge2 === void 0 ? we2.len : we2.pos + ge2;
    const Re2 = Y2();
    for (; we2.pos < We2; ) {
      const J2 = we2.uint32();
      switch (J2 >>> 3) {
        case 1:
          Re2.filepath = we2.string();
          break;
        case 5:
          Re2.disableManifest = we2.bool();
          break;
        case 2:
          Re2.s3 = a420.S3Upload.decode(we2, we2.uint32());
          break;
        case 3:
          Re2.gcp = a420.GCPUpload.decode(we2, we2.uint32());
          break;
        case 4:
          Re2.azure = a420.AzureBlobUpload.decode(we2, we2.uint32());
          break;
        case 6:
          Re2.aliOSS = a420.AliOSSUpload.decode(we2, we2.uint32());
          break;
        default:
          we2.skipType(J2 & 7);
          break;
      }
    }
    return Re2;
  }, fromJSON(V2) {
    return { filepath: Ge2(V2.filepath) ? String(V2.filepath) : "", disableManifest: Ge2(V2.disableManifest) ? !!V2.disableManifest : false, s3: Ge2(V2.s3) ? a420.S3Upload.fromJSON(V2.s3) : void 0, gcp: Ge2(V2.gcp) ? a420.GCPUpload.fromJSON(V2.gcp) : void 0, azure: Ge2(V2.azure) ? a420.AzureBlobUpload.fromJSON(V2.azure) : void 0, aliOSS: Ge2(V2.aliOSS) ? a420.AliOSSUpload.fromJSON(V2.aliOSS) : void 0 };
  }, toJSON(V2) {
    const ge2 = {};
    return V2.filepath !== void 0 && (ge2.filepath = V2.filepath), V2.disableManifest !== void 0 && (ge2.disableManifest = V2.disableManifest), V2.s3 !== void 0 && (ge2.s3 = V2.s3 ? a420.S3Upload.toJSON(V2.s3) : void 0), V2.gcp !== void 0 && (ge2.gcp = V2.gcp ? a420.GCPUpload.toJSON(V2.gcp) : void 0), V2.azure !== void 0 && (ge2.azure = V2.azure ? a420.AzureBlobUpload.toJSON(V2.azure) : void 0), V2.aliOSS !== void 0 && (ge2.aliOSS = V2.aliOSS ? a420.AliOSSUpload.toJSON(V2.aliOSS) : void 0), ge2;
  }, fromPartial(V2) {
    var ge2, we2;
    const We2 = Y2();
    return We2.filepath = (ge2 = V2.filepath) !== null && ge2 !== void 0 ? ge2 : "", We2.disableManifest = (we2 = V2.disableManifest) !== null && we2 !== void 0 ? we2 : false, We2.s3 = V2.s3 !== void 0 && V2.s3 !== null ? a420.S3Upload.fromPartial(V2.s3) : void 0, We2.gcp = V2.gcp !== void 0 && V2.gcp !== null ? a420.GCPUpload.fromPartial(V2.gcp) : void 0, We2.azure = V2.azure !== void 0 && V2.azure !== null ? a420.AzureBlobUpload.fromPartial(V2.azure) : void 0, We2.aliOSS = V2.aliOSS !== void 0 && V2.aliOSS !== null ? a420.AliOSSUpload.fromPartial(V2.aliOSS) : void 0, We2;
  } };
  function B2() {
    return { accessKey: "", secret: "", region: "", endpoint: "", bucket: "", forcePathStyle: false, metadata: {}, tagging: "" };
  }
  a420.S3Upload = { encode(V2, ge2 = l2.default.Writer.create()) {
    return V2.accessKey !== void 0 && V2.accessKey !== "" && ge2.uint32(10).string(V2.accessKey), V2.secret !== void 0 && V2.secret !== "" && ge2.uint32(18).string(V2.secret), V2.region !== void 0 && V2.region !== "" && ge2.uint32(26).string(V2.region), V2.endpoint !== void 0 && V2.endpoint !== "" && ge2.uint32(34).string(V2.endpoint), V2.bucket !== void 0 && V2.bucket !== "" && ge2.uint32(42).string(V2.bucket), V2.forcePathStyle === true && ge2.uint32(48).bool(V2.forcePathStyle), Object.entries(V2.metadata || {}).forEach(([we2, We2]) => {
      a420.S3Upload_MetadataEntry.encode({ key: we2, value: We2 }, ge2.uint32(58).fork()).ldelim();
    }), V2.tagging !== void 0 && V2.tagging !== "" && ge2.uint32(66).string(V2.tagging), ge2;
  }, decode(V2, ge2) {
    const we2 = V2 instanceof l2.default.Reader ? V2 : new l2.default.Reader(V2);
    let We2 = ge2 === void 0 ? we2.len : we2.pos + ge2;
    const Re2 = B2();
    for (; we2.pos < We2; ) {
      const J2 = we2.uint32();
      switch (J2 >>> 3) {
        case 1:
          Re2.accessKey = we2.string();
          break;
        case 2:
          Re2.secret = we2.string();
          break;
        case 3:
          Re2.region = we2.string();
          break;
        case 4:
          Re2.endpoint = we2.string();
          break;
        case 5:
          Re2.bucket = we2.string();
          break;
        case 6:
          Re2.forcePathStyle = we2.bool();
          break;
        case 7:
          const _e = a420.S3Upload_MetadataEntry.decode(we2, we2.uint32());
          _e.value !== void 0 && (Re2.metadata[_e.key] = _e.value);
          break;
        case 8:
          Re2.tagging = we2.string();
          break;
        default:
          we2.skipType(J2 & 7);
          break;
      }
    }
    return Re2;
  }, fromJSON(V2) {
    return { accessKey: Ge2(V2.accessKey) ? String(V2.accessKey) : "", secret: Ge2(V2.secret) ? String(V2.secret) : "", region: Ge2(V2.region) ? String(V2.region) : "", endpoint: Ge2(V2.endpoint) ? String(V2.endpoint) : "", bucket: Ge2(V2.bucket) ? String(V2.bucket) : "", forcePathStyle: Ge2(V2.forcePathStyle) ? !!V2.forcePathStyle : false, metadata: Xe2(V2.metadata) ? Object.entries(V2.metadata).reduce((ge2, [we2, We2]) => (ge2[we2] = String(We2), ge2), {}) : {}, tagging: Ge2(V2.tagging) ? String(V2.tagging) : "" };
  }, toJSON(V2) {
    const ge2 = {};
    return V2.accessKey !== void 0 && (ge2.accessKey = V2.accessKey), V2.secret !== void 0 && (ge2.secret = V2.secret), V2.region !== void 0 && (ge2.region = V2.region), V2.endpoint !== void 0 && (ge2.endpoint = V2.endpoint), V2.bucket !== void 0 && (ge2.bucket = V2.bucket), V2.forcePathStyle !== void 0 && (ge2.forcePathStyle = V2.forcePathStyle), ge2.metadata = {}, V2.metadata && Object.entries(V2.metadata).forEach(([we2, We2]) => {
      ge2.metadata[we2] = We2;
    }), V2.tagging !== void 0 && (ge2.tagging = V2.tagging), ge2;
  }, fromPartial(V2) {
    var ge2, we2, We2, Re2, J2, _e, ue2, ce2;
    const ve2 = B2();
    return ve2.accessKey = (ge2 = V2.accessKey) !== null && ge2 !== void 0 ? ge2 : "", ve2.secret = (we2 = V2.secret) !== null && we2 !== void 0 ? we2 : "", ve2.region = (We2 = V2.region) !== null && We2 !== void 0 ? We2 : "", ve2.endpoint = (Re2 = V2.endpoint) !== null && Re2 !== void 0 ? Re2 : "", ve2.bucket = (J2 = V2.bucket) !== null && J2 !== void 0 ? J2 : "", ve2.forcePathStyle = (_e = V2.forcePathStyle) !== null && _e !== void 0 ? _e : false, ve2.metadata = Object.entries((ue2 = V2.metadata) !== null && ue2 !== void 0 ? ue2 : {}).reduce((Ce2, [Be2, He2]) => (He2 !== void 0 && (Ce2[Be2] = String(He2)), Ce2), {}), ve2.tagging = (ce2 = V2.tagging) !== null && ce2 !== void 0 ? ce2 : "", ve2;
  } };
  function T2() {
    return { key: "", value: "" };
  }
  a420.S3Upload_MetadataEntry = { encode(V2, ge2 = l2.default.Writer.create()) {
    return V2.key !== "" && ge2.uint32(10).string(V2.key), V2.value !== "" && ge2.uint32(18).string(V2.value), ge2;
  }, decode(V2, ge2) {
    const we2 = V2 instanceof l2.default.Reader ? V2 : new l2.default.Reader(V2);
    let We2 = ge2 === void 0 ? we2.len : we2.pos + ge2;
    const Re2 = T2();
    for (; we2.pos < We2; ) {
      const J2 = we2.uint32();
      switch (J2 >>> 3) {
        case 1:
          Re2.key = we2.string();
          break;
        case 2:
          Re2.value = we2.string();
          break;
        default:
          we2.skipType(J2 & 7);
          break;
      }
    }
    return Re2;
  }, fromJSON(V2) {
    return { key: Ge2(V2.key) ? String(V2.key) : "", value: Ge2(V2.value) ? String(V2.value) : "" };
  }, toJSON(V2) {
    const ge2 = {};
    return V2.key !== void 0 && (ge2.key = V2.key), V2.value !== void 0 && (ge2.value = V2.value), ge2;
  }, fromPartial(V2) {
    var ge2, we2;
    const We2 = T2();
    return We2.key = (ge2 = V2.key) !== null && ge2 !== void 0 ? ge2 : "", We2.value = (we2 = V2.value) !== null && we2 !== void 0 ? we2 : "", We2;
  } };
  function D2() {
    return { credentials: new Uint8Array(), bucket: "" };
  }
  a420.GCPUpload = { encode(V2, ge2 = l2.default.Writer.create()) {
    return V2.credentials !== void 0 && V2.credentials.length !== 0 && ge2.uint32(10).bytes(V2.credentials), V2.bucket !== void 0 && V2.bucket !== "" && ge2.uint32(18).string(V2.bucket), ge2;
  }, decode(V2, ge2) {
    const we2 = V2 instanceof l2.default.Reader ? V2 : new l2.default.Reader(V2);
    let We2 = ge2 === void 0 ? we2.len : we2.pos + ge2;
    const Re2 = D2();
    for (; we2.pos < We2; ) {
      const J2 = we2.uint32();
      switch (J2 >>> 3) {
        case 1:
          Re2.credentials = we2.bytes();
          break;
        case 2:
          Re2.bucket = we2.string();
          break;
        default:
          we2.skipType(J2 & 7);
          break;
      }
    }
    return Re2;
  }, fromJSON(V2) {
    return { credentials: Ge2(V2.credentials) ? je2(V2.credentials) : new Uint8Array(), bucket: Ge2(V2.bucket) ? String(V2.bucket) : "" };
  }, toJSON(V2) {
    const ge2 = {};
    return V2.credentials !== void 0 && (ge2.credentials = Fe2(V2.credentials !== void 0 ? V2.credentials : new Uint8Array())), V2.bucket !== void 0 && (ge2.bucket = V2.bucket), ge2;
  }, fromPartial(V2) {
    var ge2, we2;
    const We2 = D2();
    return We2.credentials = (ge2 = V2.credentials) !== null && ge2 !== void 0 ? ge2 : new Uint8Array(), We2.bucket = (we2 = V2.bucket) !== null && we2 !== void 0 ? we2 : "", We2;
  } };
  function te2() {
    return { accountName: "", accountKey: "", containerName: "" };
  }
  a420.AzureBlobUpload = { encode(V2, ge2 = l2.default.Writer.create()) {
    return V2.accountName !== void 0 && V2.accountName !== "" && ge2.uint32(10).string(V2.accountName), V2.accountKey !== void 0 && V2.accountKey !== "" && ge2.uint32(18).string(V2.accountKey), V2.containerName !== void 0 && V2.containerName !== "" && ge2.uint32(26).string(V2.containerName), ge2;
  }, decode(V2, ge2) {
    const we2 = V2 instanceof l2.default.Reader ? V2 : new l2.default.Reader(V2);
    let We2 = ge2 === void 0 ? we2.len : we2.pos + ge2;
    const Re2 = te2();
    for (; we2.pos < We2; ) {
      const J2 = we2.uint32();
      switch (J2 >>> 3) {
        case 1:
          Re2.accountName = we2.string();
          break;
        case 2:
          Re2.accountKey = we2.string();
          break;
        case 3:
          Re2.containerName = we2.string();
          break;
        default:
          we2.skipType(J2 & 7);
          break;
      }
    }
    return Re2;
  }, fromJSON(V2) {
    return { accountName: Ge2(V2.accountName) ? String(V2.accountName) : "", accountKey: Ge2(V2.accountKey) ? String(V2.accountKey) : "", containerName: Ge2(V2.containerName) ? String(V2.containerName) : "" };
  }, toJSON(V2) {
    const ge2 = {};
    return V2.accountName !== void 0 && (ge2.accountName = V2.accountName), V2.accountKey !== void 0 && (ge2.accountKey = V2.accountKey), V2.containerName !== void 0 && (ge2.containerName = V2.containerName), ge2;
  }, fromPartial(V2) {
    var ge2, we2, We2;
    const Re2 = te2();
    return Re2.accountName = (ge2 = V2.accountName) !== null && ge2 !== void 0 ? ge2 : "", Re2.accountKey = (we2 = V2.accountKey) !== null && we2 !== void 0 ? we2 : "", Re2.containerName = (We2 = V2.containerName) !== null && We2 !== void 0 ? We2 : "", Re2;
  } };
  function me2() {
    return { accessKey: "", secret: "", region: "", endpoint: "", bucket: "" };
  }
  a420.AliOSSUpload = { encode(V2, ge2 = l2.default.Writer.create()) {
    return V2.accessKey !== void 0 && V2.accessKey !== "" && ge2.uint32(10).string(V2.accessKey), V2.secret !== void 0 && V2.secret !== "" && ge2.uint32(18).string(V2.secret), V2.region !== void 0 && V2.region !== "" && ge2.uint32(26).string(V2.region), V2.endpoint !== void 0 && V2.endpoint !== "" && ge2.uint32(34).string(V2.endpoint), V2.bucket !== void 0 && V2.bucket !== "" && ge2.uint32(42).string(V2.bucket), ge2;
  }, decode(V2, ge2) {
    const we2 = V2 instanceof l2.default.Reader ? V2 : new l2.default.Reader(V2);
    let We2 = ge2 === void 0 ? we2.len : we2.pos + ge2;
    const Re2 = me2();
    for (; we2.pos < We2; ) {
      const J2 = we2.uint32();
      switch (J2 >>> 3) {
        case 1:
          Re2.accessKey = we2.string();
          break;
        case 2:
          Re2.secret = we2.string();
          break;
        case 3:
          Re2.region = we2.string();
          break;
        case 4:
          Re2.endpoint = we2.string();
          break;
        case 5:
          Re2.bucket = we2.string();
          break;
        default:
          we2.skipType(J2 & 7);
          break;
      }
    }
    return Re2;
  }, fromJSON(V2) {
    return { accessKey: Ge2(V2.accessKey) ? String(V2.accessKey) : "", secret: Ge2(V2.secret) ? String(V2.secret) : "", region: Ge2(V2.region) ? String(V2.region) : "", endpoint: Ge2(V2.endpoint) ? String(V2.endpoint) : "", bucket: Ge2(V2.bucket) ? String(V2.bucket) : "" };
  }, toJSON(V2) {
    const ge2 = {};
    return V2.accessKey !== void 0 && (ge2.accessKey = V2.accessKey), V2.secret !== void 0 && (ge2.secret = V2.secret), V2.region !== void 0 && (ge2.region = V2.region), V2.endpoint !== void 0 && (ge2.endpoint = V2.endpoint), V2.bucket !== void 0 && (ge2.bucket = V2.bucket), ge2;
  }, fromPartial(V2) {
    var ge2, we2, We2, Re2, J2;
    const _e = me2();
    return _e.accessKey = (ge2 = V2.accessKey) !== null && ge2 !== void 0 ? ge2 : "", _e.secret = (we2 = V2.secret) !== null && we2 !== void 0 ? we2 : "", _e.region = (We2 = V2.region) !== null && We2 !== void 0 ? We2 : "", _e.endpoint = (Re2 = V2.endpoint) !== null && Re2 !== void 0 ? Re2 : "", _e.bucket = (J2 = V2.bucket) !== null && J2 !== void 0 ? J2 : "", _e;
  } };
  function Ie2() {
    return { protocol: 0, urls: [] };
  }
  a420.StreamOutput = { encode(V2, ge2 = l2.default.Writer.create()) {
    if (V2.protocol !== void 0 && V2.protocol !== 0 && ge2.uint32(8).int32(V2.protocol), V2.urls !== void 0 && V2.urls.length !== 0)
      for (const we2 of V2.urls)
        ge2.uint32(18).string(we2);
    return ge2;
  }, decode(V2, ge2) {
    const we2 = V2 instanceof l2.default.Reader ? V2 : new l2.default.Reader(V2);
    let We2 = ge2 === void 0 ? we2.len : we2.pos + ge2;
    const Re2 = Ie2();
    for (; we2.pos < We2; ) {
      const J2 = we2.uint32();
      switch (J2 >>> 3) {
        case 1:
          Re2.protocol = we2.int32();
          break;
        case 2:
          Re2.urls.push(we2.string());
          break;
        default:
          we2.skipType(J2 & 7);
          break;
      }
    }
    return Re2;
  }, fromJSON(V2) {
    return { protocol: Ge2(V2.protocol) ? P2(V2.protocol) : 0, urls: Array.isArray(V2 == null ? void 0 : V2.urls) ? V2.urls.map((ge2) => String(ge2)) : [] };
  }, toJSON(V2) {
    const ge2 = {};
    return V2.protocol !== void 0 && (ge2.protocol = $(V2.protocol)), V2.urls ? ge2.urls = V2.urls.map((we2) => we2) : ge2.urls = [], ge2;
  }, fromPartial(V2) {
    var ge2, we2;
    const We2 = Ie2();
    return We2.protocol = (ge2 = V2.protocol) !== null && ge2 !== void 0 ? ge2 : 0, We2.urls = ((we2 = V2.urls) === null || we2 === void 0 ? void 0 : we2.map((Re2) => Re2)) || [], We2;
  } };
  function $e2() {
    return { width: 0, height: 0, depth: 0, framerate: 0, audioCodec: 0, audioBitrate: 0, audioFrequency: 0, videoCodec: 0, videoBitrate: 0 };
  }
  a420.EncodingOptions = { encode(V2, ge2 = l2.default.Writer.create()) {
    return V2.width !== void 0 && V2.width !== 0 && ge2.uint32(8).int32(V2.width), V2.height !== void 0 && V2.height !== 0 && ge2.uint32(16).int32(V2.height), V2.depth !== void 0 && V2.depth !== 0 && ge2.uint32(24).int32(V2.depth), V2.framerate !== void 0 && V2.framerate !== 0 && ge2.uint32(32).int32(V2.framerate), V2.audioCodec !== void 0 && V2.audioCodec !== 0 && ge2.uint32(40).int32(V2.audioCodec), V2.audioBitrate !== void 0 && V2.audioBitrate !== 0 && ge2.uint32(48).int32(V2.audioBitrate), V2.audioFrequency !== void 0 && V2.audioFrequency !== 0 && ge2.uint32(56).int32(V2.audioFrequency), V2.videoCodec !== void 0 && V2.videoCodec !== 0 && ge2.uint32(64).int32(V2.videoCodec), V2.videoBitrate !== void 0 && V2.videoBitrate !== 0 && ge2.uint32(72).int32(V2.videoBitrate), ge2;
  }, decode(V2, ge2) {
    const we2 = V2 instanceof l2.default.Reader ? V2 : new l2.default.Reader(V2);
    let We2 = ge2 === void 0 ? we2.len : we2.pos + ge2;
    const Re2 = $e2();
    for (; we2.pos < We2; ) {
      const J2 = we2.uint32();
      switch (J2 >>> 3) {
        case 1:
          Re2.width = we2.int32();
          break;
        case 2:
          Re2.height = we2.int32();
          break;
        case 3:
          Re2.depth = we2.int32();
          break;
        case 4:
          Re2.framerate = we2.int32();
          break;
        case 5:
          Re2.audioCodec = we2.int32();
          break;
        case 6:
          Re2.audioBitrate = we2.int32();
          break;
        case 7:
          Re2.audioFrequency = we2.int32();
          break;
        case 8:
          Re2.videoCodec = we2.int32();
          break;
        case 9:
          Re2.videoBitrate = we2.int32();
          break;
        default:
          we2.skipType(J2 & 7);
          break;
      }
    }
    return Re2;
  }, fromJSON(V2) {
    return { width: Ge2(V2.width) ? Number(V2.width) : 0, height: Ge2(V2.height) ? Number(V2.height) : 0, depth: Ge2(V2.depth) ? Number(V2.depth) : 0, framerate: Ge2(V2.framerate) ? Number(V2.framerate) : 0, audioCodec: Ge2(V2.audioCodec) ? X2(V2.audioCodec) : 0, audioBitrate: Ge2(V2.audioBitrate) ? Number(V2.audioBitrate) : 0, audioFrequency: Ge2(V2.audioFrequency) ? Number(V2.audioFrequency) : 0, videoCodec: Ge2(V2.videoCodec) ? ne2(V2.videoCodec) : 0, videoBitrate: Ge2(V2.videoBitrate) ? Number(V2.videoBitrate) : 0 };
  }, toJSON(V2) {
    const ge2 = {};
    return V2.width !== void 0 && (ge2.width = Math.round(V2.width)), V2.height !== void 0 && (ge2.height = Math.round(V2.height)), V2.depth !== void 0 && (ge2.depth = Math.round(V2.depth)), V2.framerate !== void 0 && (ge2.framerate = Math.round(V2.framerate)), V2.audioCodec !== void 0 && (ge2.audioCodec = ie2(V2.audioCodec)), V2.audioBitrate !== void 0 && (ge2.audioBitrate = Math.round(V2.audioBitrate)), V2.audioFrequency !== void 0 && (ge2.audioFrequency = Math.round(V2.audioFrequency)), V2.videoCodec !== void 0 && (ge2.videoCodec = Z2(V2.videoCodec)), V2.videoBitrate !== void 0 && (ge2.videoBitrate = Math.round(V2.videoBitrate)), ge2;
  }, fromPartial(V2) {
    var ge2, we2, We2, Re2, J2, _e, ue2, ce2, ve2;
    const Ce2 = $e2();
    return Ce2.width = (ge2 = V2.width) !== null && ge2 !== void 0 ? ge2 : 0, Ce2.height = (we2 = V2.height) !== null && we2 !== void 0 ? we2 : 0, Ce2.depth = (We2 = V2.depth) !== null && We2 !== void 0 ? We2 : 0, Ce2.framerate = (Re2 = V2.framerate) !== null && Re2 !== void 0 ? Re2 : 0, Ce2.audioCodec = (J2 = V2.audioCodec) !== null && J2 !== void 0 ? J2 : 0, Ce2.audioBitrate = (_e = V2.audioBitrate) !== null && _e !== void 0 ? _e : 0, Ce2.audioFrequency = (ue2 = V2.audioFrequency) !== null && ue2 !== void 0 ? ue2 : 0, Ce2.videoCodec = (ce2 = V2.videoCodec) !== null && ce2 !== void 0 ? ce2 : 0, Ce2.videoBitrate = (ve2 = V2.videoBitrate) !== null && ve2 !== void 0 ? ve2 : 0, Ce2;
  } };
  function ye2() {
    return { egressId: "", layout: "" };
  }
  a420.UpdateLayoutRequest = { encode(V2, ge2 = l2.default.Writer.create()) {
    return V2.egressId !== void 0 && V2.egressId !== "" && ge2.uint32(10).string(V2.egressId), V2.layout !== void 0 && V2.layout !== "" && ge2.uint32(18).string(V2.layout), ge2;
  }, decode(V2, ge2) {
    const we2 = V2 instanceof l2.default.Reader ? V2 : new l2.default.Reader(V2);
    let We2 = ge2 === void 0 ? we2.len : we2.pos + ge2;
    const Re2 = ye2();
    for (; we2.pos < We2; ) {
      const J2 = we2.uint32();
      switch (J2 >>> 3) {
        case 1:
          Re2.egressId = we2.string();
          break;
        case 2:
          Re2.layout = we2.string();
          break;
        default:
          we2.skipType(J2 & 7);
          break;
      }
    }
    return Re2;
  }, fromJSON(V2) {
    return { egressId: Ge2(V2.egressId) ? String(V2.egressId) : "", layout: Ge2(V2.layout) ? String(V2.layout) : "" };
  }, toJSON(V2) {
    const ge2 = {};
    return V2.egressId !== void 0 && (ge2.egressId = V2.egressId), V2.layout !== void 0 && (ge2.layout = V2.layout), ge2;
  }, fromPartial(V2) {
    var ge2, we2;
    const We2 = ye2();
    return We2.egressId = (ge2 = V2.egressId) !== null && ge2 !== void 0 ? ge2 : "", We2.layout = (we2 = V2.layout) !== null && we2 !== void 0 ? we2 : "", We2;
  } };
  function he2() {
    return { egressId: "", addOutputUrls: [], removeOutputUrls: [] };
  }
  a420.UpdateStreamRequest = { encode(V2, ge2 = l2.default.Writer.create()) {
    if (V2.egressId !== void 0 && V2.egressId !== "" && ge2.uint32(10).string(V2.egressId), V2.addOutputUrls !== void 0 && V2.addOutputUrls.length !== 0)
      for (const we2 of V2.addOutputUrls)
        ge2.uint32(18).string(we2);
    if (V2.removeOutputUrls !== void 0 && V2.removeOutputUrls.length !== 0)
      for (const we2 of V2.removeOutputUrls)
        ge2.uint32(26).string(we2);
    return ge2;
  }, decode(V2, ge2) {
    const we2 = V2 instanceof l2.default.Reader ? V2 : new l2.default.Reader(V2);
    let We2 = ge2 === void 0 ? we2.len : we2.pos + ge2;
    const Re2 = he2();
    for (; we2.pos < We2; ) {
      const J2 = we2.uint32();
      switch (J2 >>> 3) {
        case 1:
          Re2.egressId = we2.string();
          break;
        case 2:
          Re2.addOutputUrls.push(we2.string());
          break;
        case 3:
          Re2.removeOutputUrls.push(we2.string());
          break;
        default:
          we2.skipType(J2 & 7);
          break;
      }
    }
    return Re2;
  }, fromJSON(V2) {
    return { egressId: Ge2(V2.egressId) ? String(V2.egressId) : "", addOutputUrls: Array.isArray(V2 == null ? void 0 : V2.addOutputUrls) ? V2.addOutputUrls.map((ge2) => String(ge2)) : [], removeOutputUrls: Array.isArray(V2 == null ? void 0 : V2.removeOutputUrls) ? V2.removeOutputUrls.map((ge2) => String(ge2)) : [] };
  }, toJSON(V2) {
    const ge2 = {};
    return V2.egressId !== void 0 && (ge2.egressId = V2.egressId), V2.addOutputUrls ? ge2.addOutputUrls = V2.addOutputUrls.map((we2) => we2) : ge2.addOutputUrls = [], V2.removeOutputUrls ? ge2.removeOutputUrls = V2.removeOutputUrls.map((we2) => we2) : ge2.removeOutputUrls = [], ge2;
  }, fromPartial(V2) {
    var ge2, we2, We2;
    const Re2 = he2();
    return Re2.egressId = (ge2 = V2.egressId) !== null && ge2 !== void 0 ? ge2 : "", Re2.addOutputUrls = ((we2 = V2.addOutputUrls) === null || we2 === void 0 ? void 0 : we2.map((J2) => J2)) || [], Re2.removeOutputUrls = ((We2 = V2.removeOutputUrls) === null || We2 === void 0 ? void 0 : We2.map((J2) => J2)) || [], Re2;
  } };
  function Me2() {
    return { roomName: "" };
  }
  a420.ListEgressRequest = { encode(V2, ge2 = l2.default.Writer.create()) {
    return V2.roomName !== void 0 && V2.roomName !== "" && ge2.uint32(10).string(V2.roomName), ge2;
  }, decode(V2, ge2) {
    const we2 = V2 instanceof l2.default.Reader ? V2 : new l2.default.Reader(V2);
    let We2 = ge2 === void 0 ? we2.len : we2.pos + ge2;
    const Re2 = Me2();
    for (; we2.pos < We2; ) {
      const J2 = we2.uint32();
      switch (J2 >>> 3) {
        case 1:
          Re2.roomName = we2.string();
          break;
        default:
          we2.skipType(J2 & 7);
          break;
      }
    }
    return Re2;
  }, fromJSON(V2) {
    return { roomName: Ge2(V2.roomName) ? String(V2.roomName) : "" };
  }, toJSON(V2) {
    const ge2 = {};
    return V2.roomName !== void 0 && (ge2.roomName = V2.roomName), ge2;
  }, fromPartial(V2) {
    var ge2;
    const we2 = Me2();
    return we2.roomName = (ge2 = V2.roomName) !== null && ge2 !== void 0 ? ge2 : "", we2;
  } };
  function Ae2() {
    return { items: [] };
  }
  a420.ListEgressResponse = { encode(V2, ge2 = l2.default.Writer.create()) {
    if (V2.items !== void 0 && V2.items.length !== 0)
      for (const we2 of V2.items)
        a420.EgressInfo.encode(we2, ge2.uint32(10).fork()).ldelim();
    return ge2;
  }, decode(V2, ge2) {
    const we2 = V2 instanceof l2.default.Reader ? V2 : new l2.default.Reader(V2);
    let We2 = ge2 === void 0 ? we2.len : we2.pos + ge2;
    const Re2 = Ae2();
    for (; we2.pos < We2; ) {
      const J2 = we2.uint32();
      switch (J2 >>> 3) {
        case 1:
          Re2.items.push(a420.EgressInfo.decode(we2, we2.uint32()));
          break;
        default:
          we2.skipType(J2 & 7);
          break;
      }
    }
    return Re2;
  }, fromJSON(V2) {
    return { items: Array.isArray(V2 == null ? void 0 : V2.items) ? V2.items.map((ge2) => a420.EgressInfo.fromJSON(ge2)) : [] };
  }, toJSON(V2) {
    const ge2 = {};
    return V2.items ? ge2.items = V2.items.map((we2) => we2 ? a420.EgressInfo.toJSON(we2) : void 0) : ge2.items = [], ge2;
  }, fromPartial(V2) {
    var ge2;
    const we2 = Ae2();
    return we2.items = ((ge2 = V2.items) === null || ge2 === void 0 ? void 0 : ge2.map((We2) => a420.EgressInfo.fromPartial(We2))) || [], we2;
  } };
  function xe2() {
    return { egressId: "" };
  }
  a420.StopEgressRequest = { encode(V2, ge2 = l2.default.Writer.create()) {
    return V2.egressId !== void 0 && V2.egressId !== "" && ge2.uint32(10).string(V2.egressId), ge2;
  }, decode(V2, ge2) {
    const we2 = V2 instanceof l2.default.Reader ? V2 : new l2.default.Reader(V2);
    let We2 = ge2 === void 0 ? we2.len : we2.pos + ge2;
    const Re2 = xe2();
    for (; we2.pos < We2; ) {
      const J2 = we2.uint32();
      switch (J2 >>> 3) {
        case 1:
          Re2.egressId = we2.string();
          break;
        default:
          we2.skipType(J2 & 7);
          break;
      }
    }
    return Re2;
  }, fromJSON(V2) {
    return { egressId: Ge2(V2.egressId) ? String(V2.egressId) : "" };
  }, toJSON(V2) {
    const ge2 = {};
    return V2.egressId !== void 0 && (ge2.egressId = V2.egressId), ge2;
  }, fromPartial(V2) {
    var ge2;
    const we2 = xe2();
    return we2.egressId = (ge2 = V2.egressId) !== null && ge2 !== void 0 ? ge2 : "", we2;
  } };
  function ae2() {
    return { egressId: "", roomId: "", roomName: "", status: 0, startedAt: 0, endedAt: 0, error: "", roomComposite: void 0, trackComposite: void 0, track: void 0, web: void 0, stream: void 0, file: void 0, segments: void 0 };
  }
  a420.EgressInfo = { encode(V2, ge2 = l2.default.Writer.create()) {
    return V2.egressId !== void 0 && V2.egressId !== "" && ge2.uint32(10).string(V2.egressId), V2.roomId !== void 0 && V2.roomId !== "" && ge2.uint32(18).string(V2.roomId), V2.roomName !== void 0 && V2.roomName !== "" && ge2.uint32(106).string(V2.roomName), V2.status !== void 0 && V2.status !== 0 && ge2.uint32(24).int32(V2.status), V2.startedAt !== void 0 && V2.startedAt !== 0 && ge2.uint32(80).int64(V2.startedAt), V2.endedAt !== void 0 && V2.endedAt !== 0 && ge2.uint32(88).int64(V2.endedAt), V2.error !== void 0 && V2.error !== "" && ge2.uint32(74).string(V2.error), V2.roomComposite !== void 0 && a420.RoomCompositeEgressRequest.encode(V2.roomComposite, ge2.uint32(34).fork()).ldelim(), V2.trackComposite !== void 0 && a420.TrackCompositeEgressRequest.encode(V2.trackComposite, ge2.uint32(42).fork()).ldelim(), V2.track !== void 0 && a420.TrackEgressRequest.encode(V2.track, ge2.uint32(50).fork()).ldelim(), V2.web !== void 0 && a420.WebEgressRequest.encode(V2.web, ge2.uint32(114).fork()).ldelim(), V2.stream !== void 0 && a420.StreamInfoList.encode(V2.stream, ge2.uint32(58).fork()).ldelim(), V2.file !== void 0 && a420.FileInfo.encode(V2.file, ge2.uint32(66).fork()).ldelim(), V2.segments !== void 0 && a420.SegmentsInfo.encode(V2.segments, ge2.uint32(98).fork()).ldelim(), ge2;
  }, decode(V2, ge2) {
    const we2 = V2 instanceof l2.default.Reader ? V2 : new l2.default.Reader(V2);
    let We2 = ge2 === void 0 ? we2.len : we2.pos + ge2;
    const Re2 = ae2();
    for (; we2.pos < We2; ) {
      const J2 = we2.uint32();
      switch (J2 >>> 3) {
        case 1:
          Re2.egressId = we2.string();
          break;
        case 2:
          Re2.roomId = we2.string();
          break;
        case 13:
          Re2.roomName = we2.string();
          break;
        case 3:
          Re2.status = we2.int32();
          break;
        case 10:
          Re2.startedAt = yt(we2.int64());
          break;
        case 11:
          Re2.endedAt = yt(we2.int64());
          break;
        case 9:
          Re2.error = we2.string();
          break;
        case 4:
          Re2.roomComposite = a420.RoomCompositeEgressRequest.decode(we2, we2.uint32());
          break;
        case 5:
          Re2.trackComposite = a420.TrackCompositeEgressRequest.decode(we2, we2.uint32());
          break;
        case 6:
          Re2.track = a420.TrackEgressRequest.decode(we2, we2.uint32());
          break;
        case 14:
          Re2.web = a420.WebEgressRequest.decode(we2, we2.uint32());
          break;
        case 7:
          Re2.stream = a420.StreamInfoList.decode(we2, we2.uint32());
          break;
        case 8:
          Re2.file = a420.FileInfo.decode(we2, we2.uint32());
          break;
        case 12:
          Re2.segments = a420.SegmentsInfo.decode(we2, we2.uint32());
          break;
        default:
          we2.skipType(J2 & 7);
          break;
      }
    }
    return Re2;
  }, fromJSON(V2) {
    return { egressId: Ge2(V2.egressId) ? String(V2.egressId) : "", roomId: Ge2(V2.roomId) ? String(V2.roomId) : "", roomName: Ge2(V2.roomName) ? String(V2.roomName) : "", status: Ge2(V2.status) ? ke2(V2.status) : 0, startedAt: Ge2(V2.startedAt) ? Number(V2.startedAt) : 0, endedAt: Ge2(V2.endedAt) ? Number(V2.endedAt) : 0, error: Ge2(V2.error) ? String(V2.error) : "", roomComposite: Ge2(V2.roomComposite) ? a420.RoomCompositeEgressRequest.fromJSON(V2.roomComposite) : void 0, trackComposite: Ge2(V2.trackComposite) ? a420.TrackCompositeEgressRequest.fromJSON(V2.trackComposite) : void 0, track: Ge2(V2.track) ? a420.TrackEgressRequest.fromJSON(V2.track) : void 0, web: Ge2(V2.web) ? a420.WebEgressRequest.fromJSON(V2.web) : void 0, stream: Ge2(V2.stream) ? a420.StreamInfoList.fromJSON(V2.stream) : void 0, file: Ge2(V2.file) ? a420.FileInfo.fromJSON(V2.file) : void 0, segments: Ge2(V2.segments) ? a420.SegmentsInfo.fromJSON(V2.segments) : void 0 };
  }, toJSON(V2) {
    const ge2 = {};
    return V2.egressId !== void 0 && (ge2.egressId = V2.egressId), V2.roomId !== void 0 && (ge2.roomId = V2.roomId), V2.roomName !== void 0 && (ge2.roomName = V2.roomName), V2.status !== void 0 && (ge2.status = Te2(V2.status)), V2.startedAt !== void 0 && (ge2.startedAt = Math.round(V2.startedAt)), V2.endedAt !== void 0 && (ge2.endedAt = Math.round(V2.endedAt)), V2.error !== void 0 && (ge2.error = V2.error), V2.roomComposite !== void 0 && (ge2.roomComposite = V2.roomComposite ? a420.RoomCompositeEgressRequest.toJSON(V2.roomComposite) : void 0), V2.trackComposite !== void 0 && (ge2.trackComposite = V2.trackComposite ? a420.TrackCompositeEgressRequest.toJSON(V2.trackComposite) : void 0), V2.track !== void 0 && (ge2.track = V2.track ? a420.TrackEgressRequest.toJSON(V2.track) : void 0), V2.web !== void 0 && (ge2.web = V2.web ? a420.WebEgressRequest.toJSON(V2.web) : void 0), V2.stream !== void 0 && (ge2.stream = V2.stream ? a420.StreamInfoList.toJSON(V2.stream) : void 0), V2.file !== void 0 && (ge2.file = V2.file ? a420.FileInfo.toJSON(V2.file) : void 0), V2.segments !== void 0 && (ge2.segments = V2.segments ? a420.SegmentsInfo.toJSON(V2.segments) : void 0), ge2;
  }, fromPartial(V2) {
    var ge2, we2, We2, Re2, J2, _e, ue2;
    const ce2 = ae2();
    return ce2.egressId = (ge2 = V2.egressId) !== null && ge2 !== void 0 ? ge2 : "", ce2.roomId = (we2 = V2.roomId) !== null && we2 !== void 0 ? we2 : "", ce2.roomName = (We2 = V2.roomName) !== null && We2 !== void 0 ? We2 : "", ce2.status = (Re2 = V2.status) !== null && Re2 !== void 0 ? Re2 : 0, ce2.startedAt = (J2 = V2.startedAt) !== null && J2 !== void 0 ? J2 : 0, ce2.endedAt = (_e = V2.endedAt) !== null && _e !== void 0 ? _e : 0, ce2.error = (ue2 = V2.error) !== null && ue2 !== void 0 ? ue2 : "", ce2.roomComposite = V2.roomComposite !== void 0 && V2.roomComposite !== null ? a420.RoomCompositeEgressRequest.fromPartial(V2.roomComposite) : void 0, ce2.trackComposite = V2.trackComposite !== void 0 && V2.trackComposite !== null ? a420.TrackCompositeEgressRequest.fromPartial(V2.trackComposite) : void 0, ce2.track = V2.track !== void 0 && V2.track !== null ? a420.TrackEgressRequest.fromPartial(V2.track) : void 0, ce2.web = V2.web !== void 0 && V2.web !== null ? a420.WebEgressRequest.fromPartial(V2.web) : void 0, ce2.stream = V2.stream !== void 0 && V2.stream !== null ? a420.StreamInfoList.fromPartial(V2.stream) : void 0, ce2.file = V2.file !== void 0 && V2.file !== null ? a420.FileInfo.fromPartial(V2.file) : void 0, ce2.segments = V2.segments !== void 0 && V2.segments !== null ? a420.SegmentsInfo.fromPartial(V2.segments) : void 0, ce2;
  } };
  function N2() {
    return { info: [] };
  }
  a420.StreamInfoList = { encode(V2, ge2 = l2.default.Writer.create()) {
    if (V2.info !== void 0 && V2.info.length !== 0)
      for (const we2 of V2.info)
        a420.StreamInfo.encode(we2, ge2.uint32(10).fork()).ldelim();
    return ge2;
  }, decode(V2, ge2) {
    const we2 = V2 instanceof l2.default.Reader ? V2 : new l2.default.Reader(V2);
    let We2 = ge2 === void 0 ? we2.len : we2.pos + ge2;
    const Re2 = N2();
    for (; we2.pos < We2; ) {
      const J2 = we2.uint32();
      switch (J2 >>> 3) {
        case 1:
          Re2.info.push(a420.StreamInfo.decode(we2, we2.uint32()));
          break;
        default:
          we2.skipType(J2 & 7);
          break;
      }
    }
    return Re2;
  }, fromJSON(V2) {
    return { info: Array.isArray(V2 == null ? void 0 : V2.info) ? V2.info.map((ge2) => a420.StreamInfo.fromJSON(ge2)) : [] };
  }, toJSON(V2) {
    const ge2 = {};
    return V2.info ? ge2.info = V2.info.map((we2) => we2 ? a420.StreamInfo.toJSON(we2) : void 0) : ge2.info = [], ge2;
  }, fromPartial(V2) {
    var ge2;
    const we2 = N2();
    return we2.info = ((ge2 = V2.info) === null || ge2 === void 0 ? void 0 : ge2.map((We2) => a420.StreamInfo.fromPartial(We2))) || [], we2;
  } };
  function re2() {
    return { url: "", startedAt: 0, endedAt: 0, duration: 0, status: 0 };
  }
  a420.StreamInfo = { encode(V2, ge2 = l2.default.Writer.create()) {
    return V2.url !== void 0 && V2.url !== "" && ge2.uint32(10).string(V2.url), V2.startedAt !== void 0 && V2.startedAt !== 0 && ge2.uint32(16).int64(V2.startedAt), V2.endedAt !== void 0 && V2.endedAt !== 0 && ge2.uint32(24).int64(V2.endedAt), V2.duration !== void 0 && V2.duration !== 0 && ge2.uint32(32).int64(V2.duration), V2.status !== void 0 && V2.status !== 0 && ge2.uint32(40).int32(V2.status), ge2;
  }, decode(V2, ge2) {
    const we2 = V2 instanceof l2.default.Reader ? V2 : new l2.default.Reader(V2);
    let We2 = ge2 === void 0 ? we2.len : we2.pos + ge2;
    const Re2 = re2();
    for (; we2.pos < We2; ) {
      const J2 = we2.uint32();
      switch (J2 >>> 3) {
        case 1:
          Re2.url = we2.string();
          break;
        case 2:
          Re2.startedAt = yt(we2.int64());
          break;
        case 3:
          Re2.endedAt = yt(we2.int64());
          break;
        case 4:
          Re2.duration = yt(we2.int64());
          break;
        case 5:
          Re2.status = we2.int32();
          break;
        default:
          we2.skipType(J2 & 7);
          break;
      }
    }
    return Re2;
  }, fromJSON(V2) {
    return { url: Ge2(V2.url) ? String(V2.url) : "", startedAt: Ge2(V2.startedAt) ? Number(V2.startedAt) : 0, endedAt: Ge2(V2.endedAt) ? Number(V2.endedAt) : 0, duration: Ge2(V2.duration) ? Number(V2.duration) : 0, status: Ge2(V2.status) ? z2(V2.status) : 0 };
  }, toJSON(V2) {
    const ge2 = {};
    return V2.url !== void 0 && (ge2.url = V2.url), V2.startedAt !== void 0 && (ge2.startedAt = Math.round(V2.startedAt)), V2.endedAt !== void 0 && (ge2.endedAt = Math.round(V2.endedAt)), V2.duration !== void 0 && (ge2.duration = Math.round(V2.duration)), V2.status !== void 0 && (ge2.status = C2(V2.status)), ge2;
  }, fromPartial(V2) {
    var ge2, we2, We2, Re2, J2;
    const _e = re2();
    return _e.url = (ge2 = V2.url) !== null && ge2 !== void 0 ? ge2 : "", _e.startedAt = (we2 = V2.startedAt) !== null && we2 !== void 0 ? we2 : 0, _e.endedAt = (We2 = V2.endedAt) !== null && We2 !== void 0 ? We2 : 0, _e.duration = (Re2 = V2.duration) !== null && Re2 !== void 0 ? Re2 : 0, _e.status = (J2 = V2.status) !== null && J2 !== void 0 ? J2 : 0, _e;
  } };
  function fe2() {
    return { filename: "", startedAt: 0, endedAt: 0, duration: 0, size: 0, location: "" };
  }
  a420.FileInfo = { encode(V2, ge2 = l2.default.Writer.create()) {
    return V2.filename !== void 0 && V2.filename !== "" && ge2.uint32(10).string(V2.filename), V2.startedAt !== void 0 && V2.startedAt !== 0 && ge2.uint32(16).int64(V2.startedAt), V2.endedAt !== void 0 && V2.endedAt !== 0 && ge2.uint32(24).int64(V2.endedAt), V2.duration !== void 0 && V2.duration !== 0 && ge2.uint32(48).int64(V2.duration), V2.size !== void 0 && V2.size !== 0 && ge2.uint32(32).int64(V2.size), V2.location !== void 0 && V2.location !== "" && ge2.uint32(42).string(V2.location), ge2;
  }, decode(V2, ge2) {
    const we2 = V2 instanceof l2.default.Reader ? V2 : new l2.default.Reader(V2);
    let We2 = ge2 === void 0 ? we2.len : we2.pos + ge2;
    const Re2 = fe2();
    for (; we2.pos < We2; ) {
      const J2 = we2.uint32();
      switch (J2 >>> 3) {
        case 1:
          Re2.filename = we2.string();
          break;
        case 2:
          Re2.startedAt = yt(we2.int64());
          break;
        case 3:
          Re2.endedAt = yt(we2.int64());
          break;
        case 6:
          Re2.duration = yt(we2.int64());
          break;
        case 4:
          Re2.size = yt(we2.int64());
          break;
        case 5:
          Re2.location = we2.string();
          break;
        default:
          we2.skipType(J2 & 7);
          break;
      }
    }
    return Re2;
  }, fromJSON(V2) {
    return { filename: Ge2(V2.filename) ? String(V2.filename) : "", startedAt: Ge2(V2.startedAt) ? Number(V2.startedAt) : 0, endedAt: Ge2(V2.endedAt) ? Number(V2.endedAt) : 0, duration: Ge2(V2.duration) ? Number(V2.duration) : 0, size: Ge2(V2.size) ? Number(V2.size) : 0, location: Ge2(V2.location) ? String(V2.location) : "" };
  }, toJSON(V2) {
    const ge2 = {};
    return V2.filename !== void 0 && (ge2.filename = V2.filename), V2.startedAt !== void 0 && (ge2.startedAt = Math.round(V2.startedAt)), V2.endedAt !== void 0 && (ge2.endedAt = Math.round(V2.endedAt)), V2.duration !== void 0 && (ge2.duration = Math.round(V2.duration)), V2.size !== void 0 && (ge2.size = Math.round(V2.size)), V2.location !== void 0 && (ge2.location = V2.location), ge2;
  }, fromPartial(V2) {
    var ge2, we2, We2, Re2, J2, _e;
    const ue2 = fe2();
    return ue2.filename = (ge2 = V2.filename) !== null && ge2 !== void 0 ? ge2 : "", ue2.startedAt = (we2 = V2.startedAt) !== null && we2 !== void 0 ? we2 : 0, ue2.endedAt = (We2 = V2.endedAt) !== null && We2 !== void 0 ? We2 : 0, ue2.duration = (Re2 = V2.duration) !== null && Re2 !== void 0 ? Re2 : 0, ue2.size = (J2 = V2.size) !== null && J2 !== void 0 ? J2 : 0, ue2.location = (_e = V2.location) !== null && _e !== void 0 ? _e : "", ue2;
  } };
  function Ne2() {
    return { playlistName: "", duration: 0, size: 0, playlistLocation: "", segmentCount: 0, startedAt: 0, endedAt: 0 };
  }
  a420.SegmentsInfo = { encode(V2, ge2 = l2.default.Writer.create()) {
    return V2.playlistName !== void 0 && V2.playlistName !== "" && ge2.uint32(10).string(V2.playlistName), V2.duration !== void 0 && V2.duration !== 0 && ge2.uint32(16).int64(V2.duration), V2.size !== void 0 && V2.size !== 0 && ge2.uint32(24).int64(V2.size), V2.playlistLocation !== void 0 && V2.playlistLocation !== "" && ge2.uint32(34).string(V2.playlistLocation), V2.segmentCount !== void 0 && V2.segmentCount !== 0 && ge2.uint32(40).int64(V2.segmentCount), V2.startedAt !== void 0 && V2.startedAt !== 0 && ge2.uint32(48).int64(V2.startedAt), V2.endedAt !== void 0 && V2.endedAt !== 0 && ge2.uint32(56).int64(V2.endedAt), ge2;
  }, decode(V2, ge2) {
    const we2 = V2 instanceof l2.default.Reader ? V2 : new l2.default.Reader(V2);
    let We2 = ge2 === void 0 ? we2.len : we2.pos + ge2;
    const Re2 = Ne2();
    for (; we2.pos < We2; ) {
      const J2 = we2.uint32();
      switch (J2 >>> 3) {
        case 1:
          Re2.playlistName = we2.string();
          break;
        case 2:
          Re2.duration = yt(we2.int64());
          break;
        case 3:
          Re2.size = yt(we2.int64());
          break;
        case 4:
          Re2.playlistLocation = we2.string();
          break;
        case 5:
          Re2.segmentCount = yt(we2.int64());
          break;
        case 6:
          Re2.startedAt = yt(we2.int64());
          break;
        case 7:
          Re2.endedAt = yt(we2.int64());
          break;
        default:
          we2.skipType(J2 & 7);
          break;
      }
    }
    return Re2;
  }, fromJSON(V2) {
    return { playlistName: Ge2(V2.playlistName) ? String(V2.playlistName) : "", duration: Ge2(V2.duration) ? Number(V2.duration) : 0, size: Ge2(V2.size) ? Number(V2.size) : 0, playlistLocation: Ge2(V2.playlistLocation) ? String(V2.playlistLocation) : "", segmentCount: Ge2(V2.segmentCount) ? Number(V2.segmentCount) : 0, startedAt: Ge2(V2.startedAt) ? Number(V2.startedAt) : 0, endedAt: Ge2(V2.endedAt) ? Number(V2.endedAt) : 0 };
  }, toJSON(V2) {
    const ge2 = {};
    return V2.playlistName !== void 0 && (ge2.playlistName = V2.playlistName), V2.duration !== void 0 && (ge2.duration = Math.round(V2.duration)), V2.size !== void 0 && (ge2.size = Math.round(V2.size)), V2.playlistLocation !== void 0 && (ge2.playlistLocation = V2.playlistLocation), V2.segmentCount !== void 0 && (ge2.segmentCount = Math.round(V2.segmentCount)), V2.startedAt !== void 0 && (ge2.startedAt = Math.round(V2.startedAt)), V2.endedAt !== void 0 && (ge2.endedAt = Math.round(V2.endedAt)), ge2;
  }, fromPartial(V2) {
    var ge2, we2, We2, Re2, J2, _e, ue2;
    const ce2 = Ne2();
    return ce2.playlistName = (ge2 = V2.playlistName) !== null && ge2 !== void 0 ? ge2 : "", ce2.duration = (we2 = V2.duration) !== null && we2 !== void 0 ? we2 : 0, ce2.size = (We2 = V2.size) !== null && We2 !== void 0 ? We2 : 0, ce2.playlistLocation = (Re2 = V2.playlistLocation) !== null && Re2 !== void 0 ? Re2 : "", ce2.segmentCount = (J2 = V2.segmentCount) !== null && J2 !== void 0 ? J2 : 0, ce2.startedAt = (_e = V2.startedAt) !== null && _e !== void 0 ? _e : 0, ce2.endedAt = (ue2 = V2.endedAt) !== null && ue2 !== void 0 ? ue2 : 0, ce2;
  } };
  function Oe2() {
    return { filepath: "", disableManifest: false, s3: void 0, gcp: void 0, azure: void 0 };
  }
  a420.AutoTrackEgress = { encode(V2, ge2 = l2.default.Writer.create()) {
    return V2.filepath !== void 0 && V2.filepath !== "" && ge2.uint32(10).string(V2.filepath), V2.disableManifest === true && ge2.uint32(40).bool(V2.disableManifest), V2.s3 !== void 0 && a420.S3Upload.encode(V2.s3, ge2.uint32(18).fork()).ldelim(), V2.gcp !== void 0 && a420.GCPUpload.encode(V2.gcp, ge2.uint32(26).fork()).ldelim(), V2.azure !== void 0 && a420.AzureBlobUpload.encode(V2.azure, ge2.uint32(34).fork()).ldelim(), ge2;
  }, decode(V2, ge2) {
    const we2 = V2 instanceof l2.default.Reader ? V2 : new l2.default.Reader(V2);
    let We2 = ge2 === void 0 ? we2.len : we2.pos + ge2;
    const Re2 = Oe2();
    for (; we2.pos < We2; ) {
      const J2 = we2.uint32();
      switch (J2 >>> 3) {
        case 1:
          Re2.filepath = we2.string();
          break;
        case 5:
          Re2.disableManifest = we2.bool();
          break;
        case 2:
          Re2.s3 = a420.S3Upload.decode(we2, we2.uint32());
          break;
        case 3:
          Re2.gcp = a420.GCPUpload.decode(we2, we2.uint32());
          break;
        case 4:
          Re2.azure = a420.AzureBlobUpload.decode(we2, we2.uint32());
          break;
        default:
          we2.skipType(J2 & 7);
          break;
      }
    }
    return Re2;
  }, fromJSON(V2) {
    return { filepath: Ge2(V2.filepath) ? String(V2.filepath) : "", disableManifest: Ge2(V2.disableManifest) ? !!V2.disableManifest : false, s3: Ge2(V2.s3) ? a420.S3Upload.fromJSON(V2.s3) : void 0, gcp: Ge2(V2.gcp) ? a420.GCPUpload.fromJSON(V2.gcp) : void 0, azure: Ge2(V2.azure) ? a420.AzureBlobUpload.fromJSON(V2.azure) : void 0 };
  }, toJSON(V2) {
    const ge2 = {};
    return V2.filepath !== void 0 && (ge2.filepath = V2.filepath), V2.disableManifest !== void 0 && (ge2.disableManifest = V2.disableManifest), V2.s3 !== void 0 && (ge2.s3 = V2.s3 ? a420.S3Upload.toJSON(V2.s3) : void 0), V2.gcp !== void 0 && (ge2.gcp = V2.gcp ? a420.GCPUpload.toJSON(V2.gcp) : void 0), V2.azure !== void 0 && (ge2.azure = V2.azure ? a420.AzureBlobUpload.toJSON(V2.azure) : void 0), ge2;
  }, fromPartial(V2) {
    var ge2, we2;
    const We2 = Oe2();
    return We2.filepath = (ge2 = V2.filepath) !== null && ge2 !== void 0 ? ge2 : "", We2.disableManifest = (we2 = V2.disableManifest) !== null && we2 !== void 0 ? we2 : false, We2.s3 = V2.s3 !== void 0 && V2.s3 !== null ? a420.S3Upload.fromPartial(V2.s3) : void 0, We2.gcp = V2.gcp !== void 0 && V2.gcp !== null ? a420.GCPUpload.fromPartial(V2.gcp) : void 0, We2.azure = V2.azure !== void 0 && V2.azure !== null ? a420.AzureBlobUpload.fromPartial(V2.azure) : void 0, We2;
  } };
  var qe2 = (() => {
    if (typeof qe2 < "u")
      return qe2;
    if (typeof self < "u")
      return self;
    if (typeof window < "u")
      return window;
    if (typeof commonjsGlobal$1 < "u")
      return commonjsGlobal$1;
    throw "Unable to locate global object";
  })();
  function je2(V2) {
    if (qe2.Buffer)
      return Uint8Array.from(qe2.Buffer.from(V2, "base64"));
    {
      const ge2 = qe2.atob(V2), we2 = new Uint8Array(ge2.length);
      for (let We2 = 0; We2 < ge2.length; ++We2)
        we2[We2] = ge2.charCodeAt(We2);
      return we2;
    }
  }
  function Fe2(V2) {
    if (qe2.Buffer)
      return qe2.Buffer.from(V2).toString("base64");
    {
      const ge2 = [];
      return V2.forEach((we2) => {
        ge2.push(String.fromCharCode(we2));
      }), qe2.btoa(ge2.join(""));
    }
  }
  function yt(V2) {
    if (V2.gt(Number.MAX_SAFE_INTEGER))
      throw new qe2.Error("Value is larger than Number.MAX_SAFE_INTEGER");
    return V2.toNumber();
  }
  l2.default.util.Long !== c.default && (l2.default.util.Long = c.default, l2.default.configure());
  function Xe2(V2) {
    return typeof V2 == "object" && V2 !== null;
  }
  function Ge2(V2) {
    return V2 != null;
  }
})(livekit_egress);
var ServiceBase$1 = {};
Object.defineProperty(ServiceBase$1, "__esModule", { value: true });
const AccessToken_1$1 = AccessToken$1;
class ServiceBase {
  /**
  * @param apiKey API Key.
  * @param secret API Secret.
  * @param ttl token TTL
  */
  constructor(u2, c, l2) {
    this.apiKey = u2, this.secret = c, this.ttl = l2 || "10m";
  }
  authHeader(u2) {
    const c = new AccessToken_1$1.AccessToken(this.apiKey, this.secret, { ttl: this.ttl });
    return c.addGrant(u2), { Authorization: `Bearer ${c.toJwt()}` };
  }
}
ServiceBase$1.default = ServiceBase;
var TwirpRPC = {}, axios$2 = { exports: {} }, bind$2 = function a379(u2, c) {
  return function() {
    for (var v2 = new Array(arguments.length), p2 = 0; p2 < v2.length; p2++)
      v2[p2] = arguments[p2];
    return u2.apply(c, v2);
  };
}, bind$1 = bind$2, toString = Object.prototype.toString;
function isArray$1(a420) {
  return toString.call(a420) === "[object Array]";
}
function isUndefined(a420) {
  return typeof a420 > "u";
}
function isBuffer(a420) {
  return a420 !== null && !isUndefined(a420) && a420.constructor !== null && !isUndefined(a420.constructor) && typeof a420.constructor.isBuffer == "function" && a420.constructor.isBuffer(a420);
}
function isArrayBuffer(a420) {
  return toString.call(a420) === "[object ArrayBuffer]";
}
function isFormData(a420) {
  return typeof FormData < "u" && a420 instanceof FormData;
}
function isArrayBufferView(a420) {
  var u2;
  return typeof ArrayBuffer < "u" && ArrayBuffer.isView ? u2 = ArrayBuffer.isView(a420) : u2 = a420 && a420.buffer && a420.buffer instanceof ArrayBuffer, u2;
}
function isString(a420) {
  return typeof a420 == "string";
}
function isNumber(a420) {
  return typeof a420 == "number";
}
function isObject$3(a420) {
  return a420 !== null && typeof a420 == "object";
}
function isPlainObject(a420) {
  if (toString.call(a420) !== "[object Object]")
    return false;
  var u2 = Object.getPrototypeOf(a420);
  return u2 === null || u2 === Object.prototype;
}
function isDate(a420) {
  return toString.call(a420) === "[object Date]";
}
function isFile(a420) {
  return toString.call(a420) === "[object File]";
}
function isBlob(a420) {
  return toString.call(a420) === "[object Blob]";
}
function isFunction(a420) {
  return toString.call(a420) === "[object Function]";
}
function isStream(a420) {
  return isObject$3(a420) && isFunction(a420.pipe);
}
function isURLSearchParams(a420) {
  return typeof URLSearchParams < "u" && a420 instanceof URLSearchParams;
}
function trim$1(a420) {
  return a420.trim ? a420.trim() : a420.replace(/^\s+|\s+$/g, "");
}
function isStandardBrowserEnv() {
  return typeof navigator < "u" && (navigator.product === "ReactNative" || navigator.product === "NativeScript" || navigator.product === "NS") ? false : typeof window < "u" && typeof document < "u";
}
function forEach(a420, u2) {
  if (!(a420 === null || typeof a420 > "u"))
    if (typeof a420 != "object" && (a420 = [a420]), isArray$1(a420))
      for (var c = 0, l2 = a420.length; c < l2; c++)
        u2.call(null, a420[c], c, a420);
    else
      for (var v2 in a420)
        Object.prototype.hasOwnProperty.call(a420, v2) && u2.call(null, a420[v2], v2, a420);
}
function merge() {
  var a420 = {};
  function u2(v2, p2) {
    isPlainObject(a420[p2]) && isPlainObject(v2) ? a420[p2] = merge(a420[p2], v2) : isPlainObject(v2) ? a420[p2] = merge({}, v2) : isArray$1(v2) ? a420[p2] = v2.slice() : a420[p2] = v2;
  }
  for (var c = 0, l2 = arguments.length; c < l2; c++)
    forEach(arguments[c], u2);
  return a420;
}
function extend(a420, u2, c) {
  return forEach(u2, function(v2, p2) {
    c && typeof v2 == "function" ? a420[p2] = bind$1(v2, c) : a420[p2] = v2;
  }), a420;
}
function stripBOM(a420) {
  return a420.charCodeAt(0) === 65279 && (a420 = a420.slice(1)), a420;
}
var utils$9 = { isArray: isArray$1, isArrayBuffer, isBuffer, isFormData, isArrayBufferView, isString, isNumber, isObject: isObject$3, isPlainObject, isUndefined, isDate, isFile, isBlob, isFunction, isStream, isURLSearchParams, isStandardBrowserEnv, forEach, merge, extend, trim: trim$1, stripBOM }, utils$8 = utils$9;
function encode(a420) {
  return encodeURIComponent(a420).replace(/%3A/gi, ":").replace(/%24/g, "$").replace(/%2C/gi, ",").replace(/%20/g, "+").replace(/%5B/gi, "[").replace(/%5D/gi, "]");
}
var buildURL$1 = function a380(u2, c, l2) {
  if (!c)
    return u2;
  var v2;
  if (l2)
    v2 = l2(c);
  else if (utils$8.isURLSearchParams(c))
    v2 = c.toString();
  else {
    var p2 = [];
    utils$8.forEach(c, function(P2, $) {
      P2 === null || typeof P2 > "u" || (utils$8.isArray(P2) ? $ = $ + "[]" : P2 = [P2], utils$8.forEach(P2, function(H2) {
        utils$8.isDate(H2) ? H2 = H2.toISOString() : utils$8.isObject(H2) && (H2 = JSON.stringify(H2)), p2.push(encode($) + "=" + encode(H2));
      }));
    }), v2 = p2.join("&");
  }
  if (v2) {
    var _ = u2.indexOf("#");
    _ !== -1 && (u2 = u2.slice(0, _)), u2 += (u2.indexOf("?") === -1 ? "?" : "&") + v2;
  }
  return u2;
}, utils$7 = utils$9;
function InterceptorManager$1() {
  this.handlers = [];
}
InterceptorManager$1.prototype.use = function a381(u2, c, l2) {
  return this.handlers.push({ fulfilled: u2, rejected: c, synchronous: l2 ? l2.synchronous : false, runWhen: l2 ? l2.runWhen : null }), this.handlers.length - 1;
};
InterceptorManager$1.prototype.eject = function a382(u2) {
  this.handlers[u2] && (this.handlers[u2] = null);
};
InterceptorManager$1.prototype.forEach = function a383(u2) {
  utils$7.forEach(this.handlers, function(l2) {
    l2 !== null && u2(l2);
  });
};
var InterceptorManager_1 = InterceptorManager$1, utils$6 = utils$9, normalizeHeaderName$1 = function a384(u2, c) {
  utils$6.forEach(u2, function(v2, p2) {
    p2 !== c && p2.toUpperCase() === c.toUpperCase() && (u2[c] = v2, delete u2[p2]);
  });
}, enhanceError$1 = function a385(u2, c, l2, v2, p2) {
  return u2.config = c, l2 && (u2.code = l2), u2.request = v2, u2.response = p2, u2.isAxiosError = true, u2.toJSON = function() {
    return {
      // Standard
      message: this.message,
      name: this.name,
      // Microsoft
      description: this.description,
      number: this.number,
      // Mozilla
      fileName: this.fileName,
      lineNumber: this.lineNumber,
      columnNumber: this.columnNumber,
      stack: this.stack,
      // Axios
      config: this.config,
      code: this.code
    };
  }, u2;
}, createError, hasRequiredCreateError;
function requireCreateError() {
  if (hasRequiredCreateError)
    return createError;
  hasRequiredCreateError = 1;
  var a420 = enhanceError$1;
  return createError = function(c, l2, v2, p2, _) {
    var I2 = new Error(c);
    return a420(I2, l2, v2, p2, _);
  }, createError;
}
var settle, hasRequiredSettle;
function requireSettle() {
  if (hasRequiredSettle)
    return settle;
  hasRequiredSettle = 1;
  var a420 = requireCreateError();
  return settle = function(c, l2, v2) {
    var p2 = v2.config.validateStatus;
    !v2.status || !p2 || p2(v2.status) ? c(v2) : l2(a420("Request failed with status code " + v2.status, v2.config, null, v2.request, v2));
  }, settle;
}
var cookies, hasRequiredCookies;
function requireCookies() {
  if (hasRequiredCookies)
    return cookies;
  hasRequiredCookies = 1;
  var a420 = utils$9;
  return cookies = a420.isStandardBrowserEnv() ? (
    // Standard browser envs support document.cookie
    /* @__PURE__ */ function() {
      return { write: function(l2, v2, p2, _, I2, P2) {
        var $ = [];
        $.push(l2 + "=" + encodeURIComponent(v2)), a420.isNumber(p2) && $.push("expires=" + new Date(p2).toGMTString()), a420.isString(_) && $.push("path=" + _), a420.isString(I2) && $.push("domain=" + I2), P2 === true && $.push("secure"), document.cookie = $.join("; ");
      }, read: function(l2) {
        var v2 = document.cookie.match(new RegExp("(^|;\\s*)(" + l2 + ")=([^;]*)"));
        return v2 ? decodeURIComponent(v2[3]) : null;
      }, remove: function(l2) {
        this.write(l2, "", Date.now() - 864e5);
      } };
    }()
  ) : (
    // Non standard browser env (web workers, react-native) lack needed support.
    /* @__PURE__ */ function() {
      return { write: function() {
      }, read: function() {
        return null;
      }, remove: function() {
      } };
    }()
  ), cookies;
}
var isAbsoluteURL, hasRequiredIsAbsoluteURL;
function requireIsAbsoluteURL() {
  return hasRequiredIsAbsoluteURL || (hasRequiredIsAbsoluteURL = 1, isAbsoluteURL = function(u2) {
    return /^([a-z][a-z\d\+\-\.]*:)?\/\//i.test(u2);
  }), isAbsoluteURL;
}
var combineURLs, hasRequiredCombineURLs;
function requireCombineURLs() {
  return hasRequiredCombineURLs || (hasRequiredCombineURLs = 1, combineURLs = function(u2, c) {
    return c ? u2.replace(/\/+$/, "") + "/" + c.replace(/^\/+/, "") : u2;
  }), combineURLs;
}
var buildFullPath, hasRequiredBuildFullPath;
function requireBuildFullPath() {
  if (hasRequiredBuildFullPath)
    return buildFullPath;
  hasRequiredBuildFullPath = 1;
  var a420 = requireIsAbsoluteURL(), u2 = requireCombineURLs();
  return buildFullPath = function(l2, v2) {
    return l2 && !a420(v2) ? u2(l2, v2) : v2;
  }, buildFullPath;
}
var parseHeaders, hasRequiredParseHeaders;
function requireParseHeaders() {
  if (hasRequiredParseHeaders)
    return parseHeaders;
  hasRequiredParseHeaders = 1;
  var a420 = utils$9, u2 = ["age", "authorization", "content-length", "content-type", "etag", "expires", "from", "host", "if-modified-since", "if-unmodified-since", "last-modified", "location", "max-forwards", "proxy-authorization", "referer", "retry-after", "user-agent"];
  return parseHeaders = function(l2) {
    var v2 = {}, p2, _, I2;
    return l2 && a420.forEach(l2.split(`
`), function($) {
      if (I2 = $.indexOf(":"), p2 = a420.trim($.substr(0, I2)).toLowerCase(), _ = a420.trim($.substr(I2 + 1)), p2) {
        if (v2[p2] && u2.indexOf(p2) >= 0)
          return;
        p2 === "set-cookie" ? v2[p2] = (v2[p2] ? v2[p2] : []).concat([_]) : v2[p2] = v2[p2] ? v2[p2] + ", " + _ : _;
      }
    }), v2;
  }, parseHeaders;
}
var isURLSameOrigin, hasRequiredIsURLSameOrigin;
function requireIsURLSameOrigin() {
  if (hasRequiredIsURLSameOrigin)
    return isURLSameOrigin;
  hasRequiredIsURLSameOrigin = 1;
  var a420 = utils$9;
  return isURLSameOrigin = a420.isStandardBrowserEnv() ? (
    // Standard browser envs have full support of the APIs needed to test
    // whether the request URL is of the same origin as current location.
    function() {
      var c = /(msie|trident)/i.test(navigator.userAgent), l2 = document.createElement("a"), v2;
      function p2(_) {
        var I2 = _;
        return c && (l2.setAttribute("href", I2), I2 = l2.href), l2.setAttribute("href", I2), { href: l2.href, protocol: l2.protocol ? l2.protocol.replace(/:$/, "") : "", host: l2.host, search: l2.search ? l2.search.replace(/^\?/, "") : "", hash: l2.hash ? l2.hash.replace(/^#/, "") : "", hostname: l2.hostname, port: l2.port, pathname: l2.pathname.charAt(0) === "/" ? l2.pathname : "/" + l2.pathname };
      }
      return v2 = p2(window.location.href), function(I2) {
        var P2 = a420.isString(I2) ? p2(I2) : I2;
        return P2.protocol === v2.protocol && P2.host === v2.host;
      };
    }()
  ) : (
    // Non standard browser envs (web workers, react-native) lack needed support.
    /* @__PURE__ */ function() {
      return function() {
        return true;
      };
    }()
  ), isURLSameOrigin;
}
var xhr, hasRequiredXhr;
function requireXhr() {
  if (hasRequiredXhr)
    return xhr;
  hasRequiredXhr = 1;
  var a420 = utils$9, u2 = requireSettle(), c = requireCookies(), l2 = buildURL$1, v2 = requireBuildFullPath(), p2 = requireParseHeaders(), _ = requireIsURLSameOrigin(), I2 = requireCreateError();
  return xhr = function($) {
    return new Promise(function(H2, j) {
      var ee2 = $.data, X2 = $.headers, ie2 = $.responseType;
      a420.isFormData(ee2) && delete X2["Content-Type"];
      var Q2 = new XMLHttpRequest();
      if ($.auth) {
        var ne2 = $.auth.username || "", Z2 = $.auth.password ? unescape(encodeURIComponent($.auth.password)) : "";
        X2.Authorization = "Basic " + btoa(ne2 + ":" + Z2);
      }
      var de2 = v2($.baseURL, $.url);
      Q2.open($.method.toUpperCase(), l2(de2, $.params, $.paramsSerializer), true), Q2.timeout = $.timeout;
      function pe2() {
        if (Q2) {
          var be2 = "getAllResponseHeaders" in Q2 ? p2(Q2.getAllResponseHeaders()) : null, ke2 = !ie2 || ie2 === "text" || ie2 === "json" ? Q2.responseText : Q2.response, Te2 = { data: ke2, status: Q2.status, statusText: Q2.statusText, headers: be2, config: $, request: Q2 };
          u2(H2, j, Te2), Q2 = null;
        }
      }
      if ("onloadend" in Q2 ? Q2.onloadend = pe2 : Q2.onreadystatechange = function() {
        !Q2 || Q2.readyState !== 4 || Q2.status === 0 && !(Q2.responseURL && Q2.responseURL.indexOf("file:") === 0) || setTimeout(pe2);
      }, Q2.onabort = function() {
        Q2 && (j(I2("Request aborted", $, "ECONNABORTED", Q2)), Q2 = null);
      }, Q2.onerror = function() {
        j(I2("Network Error", $, null, Q2)), Q2 = null;
      }, Q2.ontimeout = function() {
        var ke2 = "timeout of " + $.timeout + "ms exceeded";
        $.timeoutErrorMessage && (ke2 = $.timeoutErrorMessage), j(I2(ke2, $, $.transitional && $.transitional.clarifyTimeoutError ? "ETIMEDOUT" : "ECONNABORTED", Q2)), Q2 = null;
      }, a420.isStandardBrowserEnv()) {
        var le2 = ($.withCredentials || _(de2)) && $.xsrfCookieName ? c.read($.xsrfCookieName) : void 0;
        le2 && (X2[$.xsrfHeaderName] = le2);
      }
      "setRequestHeader" in Q2 && a420.forEach(X2, function(ke2, Te2) {
        typeof ee2 > "u" && Te2.toLowerCase() === "content-type" ? delete X2[Te2] : Q2.setRequestHeader(Te2, ke2);
      }), a420.isUndefined($.withCredentials) || (Q2.withCredentials = !!$.withCredentials), ie2 && ie2 !== "json" && (Q2.responseType = $.responseType), typeof $.onDownloadProgress == "function" && Q2.addEventListener("progress", $.onDownloadProgress), typeof $.onUploadProgress == "function" && Q2.upload && Q2.upload.addEventListener("progress", $.onUploadProgress), $.cancelToken && $.cancelToken.promise.then(function(ke2) {
        Q2 && (Q2.abort(), j(ke2), Q2 = null);
      }), ee2 || (ee2 = null), Q2.send(ee2);
    });
  }, xhr;
}
var utils$5 = utils$9, normalizeHeaderName = normalizeHeaderName$1, enhanceError = enhanceError$1, DEFAULT_CONTENT_TYPE = { "Content-Type": "application/x-www-form-urlencoded" };
function setContentTypeIfUnset(a420, u2) {
  !utils$5.isUndefined(a420) && utils$5.isUndefined(a420["Content-Type"]) && (a420["Content-Type"] = u2);
}
function getDefaultAdapter() {
  var a420;
  return (typeof XMLHttpRequest < "u" || typeof process$1 < "u" && Object.prototype.toString.call(process$1) === "[object process]") && (a420 = requireXhr()), a420;
}
function stringifySafely(a420, u2, c) {
  if (utils$5.isString(a420))
    try {
      return (u2 || JSON.parse)(a420), utils$5.trim(a420);
    } catch (l2) {
      if (l2.name !== "SyntaxError")
        throw l2;
    }
  return (c || JSON.stringify)(a420);
}
var defaults$3 = {
  transitional: { silentJSONParsing: true, forcedJSONParsing: true, clarifyTimeoutError: false },
  adapter: getDefaultAdapter(),
  transformRequest: [function a386(u2, c) {
    return normalizeHeaderName(c, "Accept"), normalizeHeaderName(c, "Content-Type"), utils$5.isFormData(u2) || utils$5.isArrayBuffer(u2) || utils$5.isBuffer(u2) || utils$5.isStream(u2) || utils$5.isFile(u2) || utils$5.isBlob(u2) ? u2 : utils$5.isArrayBufferView(u2) ? u2.buffer : utils$5.isURLSearchParams(u2) ? (setContentTypeIfUnset(c, "application/x-www-form-urlencoded;charset=utf-8"), u2.toString()) : utils$5.isObject(u2) || c && c["Content-Type"] === "application/json" ? (setContentTypeIfUnset(c, "application/json"), stringifySafely(u2)) : u2;
  }],
  transformResponse: [function a387(u2) {
    var c = this.transitional, l2 = c && c.silentJSONParsing, v2 = c && c.forcedJSONParsing, p2 = !l2 && this.responseType === "json";
    if (p2 || v2 && utils$5.isString(u2) && u2.length)
      try {
        return JSON.parse(u2);
      } catch (_) {
        if (p2)
          throw _.name === "SyntaxError" ? enhanceError(_, this, "E_JSON_PARSE") : _;
      }
    return u2;
  }],
  /**
  * A timeout in milliseconds to abort a request. If set to 0 (default) a
  * timeout is not created.
  */
  timeout: 0,
  xsrfCookieName: "XSRF-TOKEN",
  xsrfHeaderName: "X-XSRF-TOKEN",
  maxContentLength: -1,
  maxBodyLength: -1,
  validateStatus: function a388(u2) {
    return u2 >= 200 && u2 < 300;
  }
};
defaults$3.headers = { common: { Accept: "application/json, text/plain, */*" } };
utils$5.forEach(["delete", "get", "head"], function a389(u2) {
  defaults$3.headers[u2] = {};
});
utils$5.forEach(["post", "put", "patch"], function a390(u2) {
  defaults$3.headers[u2] = utils$5.merge(DEFAULT_CONTENT_TYPE);
});
var defaults_1 = defaults$3, utils$4 = utils$9, defaults$2 = defaults_1, transformData$1 = function a391(u2, c, l2) {
  var v2 = this || defaults$2;
  return utils$4.forEach(l2, function(_) {
    u2 = _.call(v2, u2, c);
  }), u2;
}, isCancel$1, hasRequiredIsCancel;
function requireIsCancel() {
  return hasRequiredIsCancel || (hasRequiredIsCancel = 1, isCancel$1 = function(u2) {
    return !!(u2 && u2.__CANCEL__);
  }), isCancel$1;
}
var utils$3 = utils$9, transformData = transformData$1, isCancel = requireIsCancel(), defaults$1 = defaults_1;
function throwIfCancellationRequested(a420) {
  a420.cancelToken && a420.cancelToken.throwIfRequested();
}
var dispatchRequest$1 = function a392(u2) {
  throwIfCancellationRequested(u2), u2.headers = u2.headers || {}, u2.data = transformData.call(u2, u2.data, u2.headers, u2.transformRequest), u2.headers = utils$3.merge(u2.headers.common || {}, u2.headers[u2.method] || {}, u2.headers), utils$3.forEach(["delete", "get", "head", "post", "put", "patch", "common"], function(v2) {
    delete u2.headers[v2];
  });
  var c = u2.adapter || defaults$1.adapter;
  return c(u2).then(function(v2) {
    return throwIfCancellationRequested(u2), v2.data = transformData.call(u2, v2.data, v2.headers, u2.transformResponse), v2;
  }, function(v2) {
    return isCancel(v2) || (throwIfCancellationRequested(u2), v2 && v2.response && (v2.response.data = transformData.call(u2, v2.response.data, v2.response.headers, u2.transformResponse))), Promise.reject(v2);
  });
}, utils$2 = utils$9, mergeConfig$2 = function a393(u2, c) {
  c = c || {};
  var l2 = {}, v2 = ["url", "method", "data"], p2 = ["headers", "auth", "proxy", "params"], _ = ["baseURL", "transformRequest", "transformResponse", "paramsSerializer", "timeout", "timeoutMessage", "withCredentials", "adapter", "responseType", "xsrfCookieName", "xsrfHeaderName", "onUploadProgress", "onDownloadProgress", "decompress", "maxContentLength", "maxBodyLength", "maxRedirects", "transport", "httpAgent", "httpsAgent", "cancelToken", "socketPath", "responseEncoding"], I2 = ["validateStatus"];
  function P2(j, ee2) {
    return utils$2.isPlainObject(j) && utils$2.isPlainObject(ee2) ? utils$2.merge(j, ee2) : utils$2.isPlainObject(ee2) ? utils$2.merge({}, ee2) : utils$2.isArray(ee2) ? ee2.slice() : ee2;
  }
  function $(j) {
    utils$2.isUndefined(c[j]) ? utils$2.isUndefined(u2[j]) || (l2[j] = P2(void 0, u2[j])) : l2[j] = P2(u2[j], c[j]);
  }
  utils$2.forEach(v2, function(ee2) {
    utils$2.isUndefined(c[ee2]) || (l2[ee2] = P2(void 0, c[ee2]));
  }), utils$2.forEach(p2, $), utils$2.forEach(_, function(ee2) {
    utils$2.isUndefined(c[ee2]) ? utils$2.isUndefined(u2[ee2]) || (l2[ee2] = P2(void 0, u2[ee2])) : l2[ee2] = P2(void 0, c[ee2]);
  }), utils$2.forEach(I2, function(ee2) {
    ee2 in c ? l2[ee2] = P2(u2[ee2], c[ee2]) : ee2 in u2 && (l2[ee2] = P2(void 0, u2[ee2]));
  });
  var F2 = v2.concat(p2).concat(_).concat(I2), H2 = Object.keys(u2).concat(Object.keys(c)).filter(function(ee2) {
    return F2.indexOf(ee2) === -1;
  });
  return utils$2.forEach(H2, $), l2;
};
const name = "axios", version$2 = "0.21.4", description = "Promise based HTTP client for the browser and node.js", main = "index.js", scripts = { test: "grunt test", start: "node ./sandbox/server.js", build: "NODE_ENV=production grunt build", preversion: "npm test", version: "npm run build && grunt version && git add -A dist && git add CHANGELOG.md bower.json package.json", postversion: "git push && git push --tags", examples: "node ./examples/server.js", coveralls: "cat coverage/lcov.info | ./node_modules/coveralls/bin/coveralls.js", fix: "eslint --fix lib/**/*.js" }, repository = { type: "git", url: "https://github.com/axios/axios.git" }, keywords = ["xhr", "http", "ajax", "promise", "node"], author = "Matt Zabriskie", license = "MIT", bugs = { url: "https://github.com/axios/axios/issues" }, homepage = "https://axios-http.com", devDependencies = { coveralls: "^3.0.0", "es6-promise": "^4.2.4", grunt: "^1.3.0", "grunt-banner": "^0.6.0", "grunt-cli": "^1.2.0", "grunt-contrib-clean": "^1.1.0", "grunt-contrib-watch": "^1.0.0", "grunt-eslint": "^23.0.0", "grunt-karma": "^4.0.0", "grunt-mocha-test": "^0.13.3", "grunt-ts": "^6.0.0-beta.19", "grunt-webpack": "^4.0.2", "istanbul-instrumenter-loader": "^1.0.0", "jasmine-core": "^2.4.1", karma: "^6.3.2", "karma-chrome-launcher": "^3.1.0", "karma-firefox-launcher": "^2.1.0", "karma-jasmine": "^1.1.1", "karma-jasmine-ajax": "^0.1.13", "karma-safari-launcher": "^1.0.0", "karma-sauce-launcher": "^4.3.6", "karma-sinon": "^1.0.5", "karma-sourcemap-loader": "^0.3.8", "karma-webpack": "^4.0.2", "load-grunt-tasks": "^3.5.2", minimist: "^1.2.0", mocha: "^8.2.1", sinon: "^4.5.0", "terser-webpack-plugin": "^4.2.3", typescript: "^4.0.5", "url-search-params": "^0.10.0", webpack: "^4.44.2", "webpack-dev-server": "^3.11.0" }, browser = { "./lib/adapters/http.js": "./lib/adapters/xhr.js" }, jsdelivr = "dist/axios.min.js", unpkg = "dist/axios.min.js", typings = "./index.d.ts", dependencies = { "follow-redirects": "^1.14.0" }, bundlesize = [{ path: "./dist/axios.min.js", threshold: "5kB" }], require$$0 = { name, version: version$2, description, main, scripts, repository, keywords, author, license, bugs, homepage, devDependencies, browser, jsdelivr, unpkg, typings, dependencies, bundlesize };
var pkg = require$$0, validators$1 = {};
["object", "boolean", "number", "function", "string", "symbol"].forEach(function(a420, u2) {
  validators$1[a420] = function(l2) {
    return typeof l2 === a420 || "a" + (u2 < 1 ? "n " : " ") + a420;
  };
});
var deprecatedWarnings = {}, currentVerArr = pkg.version.split(".");
function isOlderVersion(a420, u2) {
  for (var c = u2 ? u2.split(".") : currentVerArr, l2 = a420.split("."), v2 = 0; v2 < 3; v2++) {
    if (c[v2] > l2[v2])
      return true;
    if (c[v2] < l2[v2])
      return false;
  }
  return false;
}
validators$1.transitional = function a394(u2, c, l2) {
  var v2 = c && isOlderVersion(c);
  function p2(_, I2) {
    return "[Axios v" + pkg.version + "] Transitional option '" + _ + "'" + I2 + (l2 ? ". " + l2 : "");
  }
  return function(_, I2, P2) {
    if (u2 === false)
      throw new Error(p2(I2, " has been removed in " + c));
    return v2 && !deprecatedWarnings[I2] && (deprecatedWarnings[I2] = true, console.warn(p2(I2, " has been deprecated since v" + c + " and will be removed in the near future"))), u2 ? u2(_, I2, P2) : true;
  };
};
function assertOptions(a420, u2, c) {
  if (typeof a420 != "object")
    throw new TypeError("options must be an object");
  for (var l2 = Object.keys(a420), v2 = l2.length; v2-- > 0; ) {
    var p2 = l2[v2], _ = u2[p2];
    if (_) {
      var I2 = a420[p2], P2 = I2 === void 0 || _(I2, p2, a420);
      if (P2 !== true)
        throw new TypeError("option " + p2 + " must be " + P2);
      continue;
    }
    if (c !== true)
      throw Error("Unknown option " + p2);
  }
}
var validator$1 = { isOlderVersion, assertOptions, validators: validators$1 }, utils$1 = utils$9, buildURL = buildURL$1, InterceptorManager = InterceptorManager_1, dispatchRequest = dispatchRequest$1, mergeConfig$1 = mergeConfig$2, validator = validator$1, validators = validator.validators;
function Axios$1(a420) {
  this.defaults = a420, this.interceptors = { request: new InterceptorManager(), response: new InterceptorManager() };
}
Axios$1.prototype.request = function a395(u2) {
  typeof u2 == "string" ? (u2 = arguments[1] || {}, u2.url = arguments[0]) : u2 = u2 || {}, u2 = mergeConfig$1(this.defaults, u2), u2.method ? u2.method = u2.method.toLowerCase() : this.defaults.method ? u2.method = this.defaults.method.toLowerCase() : u2.method = "get";
  var c = u2.transitional;
  c !== void 0 && validator.assertOptions(c, { silentJSONParsing: validators.transitional(validators.boolean, "1.0.0"), forcedJSONParsing: validators.transitional(validators.boolean, "1.0.0"), clarifyTimeoutError: validators.transitional(validators.boolean, "1.0.0") }, false);
  var l2 = [], v2 = true;
  this.interceptors.request.forEach(function(j) {
    typeof j.runWhen == "function" && j.runWhen(u2) === false || (v2 = v2 && j.synchronous, l2.unshift(j.fulfilled, j.rejected));
  });
  var p2 = [];
  this.interceptors.response.forEach(function(j) {
    p2.push(j.fulfilled, j.rejected);
  });
  var _;
  if (!v2) {
    var I2 = [dispatchRequest, void 0];
    for (Array.prototype.unshift.apply(I2, l2), I2 = I2.concat(p2), _ = Promise.resolve(u2); I2.length; )
      _ = _.then(I2.shift(), I2.shift());
    return _;
  }
  for (var P2 = u2; l2.length; ) {
    var $ = l2.shift(), F2 = l2.shift();
    try {
      P2 = $(P2);
    } catch (H2) {
      F2(H2);
      break;
    }
  }
  try {
    _ = dispatchRequest(P2);
  } catch (H2) {
    return Promise.reject(H2);
  }
  for (; p2.length; )
    _ = _.then(p2.shift(), p2.shift());
  return _;
};
Axios$1.prototype.getUri = function a396(u2) {
  return u2 = mergeConfig$1(this.defaults, u2), buildURL(u2.url, u2.params, u2.paramsSerializer).replace(/^\?/, "");
};
utils$1.forEach(["delete", "get", "head", "options"], function a397(u2) {
  Axios$1.prototype[u2] = function(c, l2) {
    return this.request(mergeConfig$1(l2 || {}, { method: u2, url: c, data: (l2 || {}).data }));
  };
});
utils$1.forEach(["post", "put", "patch"], function a398(u2) {
  Axios$1.prototype[u2] = function(c, l2, v2) {
    return this.request(mergeConfig$1(v2 || {}, { method: u2, url: c, data: l2 }));
  };
});
var Axios_1 = Axios$1, Cancel_1, hasRequiredCancel;
function requireCancel() {
  if (hasRequiredCancel)
    return Cancel_1;
  hasRequiredCancel = 1;
  function a420(u2) {
    this.message = u2;
  }
  return a420.prototype.toString = function() {
    return "Cancel" + (this.message ? ": " + this.message : "");
  }, a420.prototype.__CANCEL__ = true, Cancel_1 = a420, Cancel_1;
}
var CancelToken_1, hasRequiredCancelToken;
function requireCancelToken() {
  if (hasRequiredCancelToken)
    return CancelToken_1;
  hasRequiredCancelToken = 1;
  var a420 = requireCancel();
  function u2(c) {
    if (typeof c != "function")
      throw new TypeError("executor must be a function.");
    var l2;
    this.promise = new Promise(function(_) {
      l2 = _;
    });
    var v2 = this;
    c(function(_) {
      v2.reason || (v2.reason = new a420(_), l2(v2.reason));
    });
  }
  return u2.prototype.throwIfRequested = function() {
    if (this.reason)
      throw this.reason;
  }, u2.source = function() {
    var l2, v2 = new u2(function(_) {
      l2 = _;
    });
    return { token: v2, cancel: l2 };
  }, CancelToken_1 = u2, CancelToken_1;
}
var spread, hasRequiredSpread;
function requireSpread() {
  return hasRequiredSpread || (hasRequiredSpread = 1, spread = function(u2) {
    return function(l2) {
      return u2.apply(null, l2);
    };
  }), spread;
}
var isAxiosError, hasRequiredIsAxiosError;
function requireIsAxiosError() {
  return hasRequiredIsAxiosError || (hasRequiredIsAxiosError = 1, isAxiosError = function(u2) {
    return typeof u2 == "object" && u2.isAxiosError === true;
  }), isAxiosError;
}
var utils = utils$9, bind = bind$2, Axios = Axios_1, mergeConfig = mergeConfig$2, defaults = defaults_1;
function createInstance(a420) {
  var u2 = new Axios(a420), c = bind(Axios.prototype.request, u2);
  return utils.extend(c, Axios.prototype, u2), utils.extend(c, u2), c;
}
var axios$1 = createInstance(defaults);
axios$1.Axios = Axios;
axios$1.create = function a399(u2) {
  return createInstance(mergeConfig(axios$1.defaults, u2));
};
axios$1.Cancel = requireCancel();
axios$1.CancelToken = requireCancelToken();
axios$1.isCancel = requireIsCancel();
axios$1.all = function a400(u2) {
  return Promise.all(u2);
};
axios$1.spread = requireSpread();
axios$1.isAxiosError = requireIsAxiosError();
axios$2.exports = axios$1;
axios$2.exports.default = axios$1;
var axiosExports = axios$2.exports, axios = axiosExports, mapObj$1 = { exports: {} };
const isObject$2 = (a420) => typeof a420 == "object" && a420 !== null, mapObjectSkip = Symbol("skip"), isObjectCustom = (a420) => isObject$2(a420) && !(a420 instanceof RegExp) && !(a420 instanceof Error) && !(a420 instanceof Date), mapObject = (a420, u2, c, l2 = /* @__PURE__ */ new WeakMap()) => {
  if (c = { deep: false, target: {}, ...c }, l2.has(a420))
    return l2.get(a420);
  l2.set(a420, c.target);
  const { target: v2 } = c;
  delete c.target;
  const p2 = (_) => _.map((I2) => isObjectCustom(I2) ? mapObject(I2, u2, c, l2) : I2);
  if (Array.isArray(a420))
    return p2(a420);
  for (const [_, I2] of Object.entries(a420)) {
    const P2 = u2(_, I2, a420);
    if (P2 === mapObjectSkip)
      continue;
    let [$, F2, { shouldRecurse: H2 = true } = {}] = P2;
    $ !== "__proto__" && (c.deep && H2 && isObjectCustom(F2) && (F2 = Array.isArray(F2) ? p2(F2) : mapObject(F2, u2, c, l2)), v2[$] = F2);
  }
  return v2;
};
mapObj$1.exports = (a420, u2, c) => {
  if (!isObject$2(a420))
    throw new TypeError(`Expected an object, got \`${a420}\` (${typeof a420})`);
  return mapObject(a420, u2, c);
};
mapObj$1.exports.mapObjectSkip = mapObjectSkip;
var mapObjExports = mapObj$1.exports, camelcase = { exports: {} };
const UPPERCASE = /[\p{Lu}]/u, LOWERCASE = /[\p{Ll}]/u, LEADING_CAPITAL = /^[\p{Lu}](?![\p{Lu}])/gu, IDENTIFIER = /([\p{Alpha}\p{N}_]|$)/u, SEPARATORS = /[_.\- ]+/, LEADING_SEPARATORS = new RegExp("^" + SEPARATORS.source), SEPARATORS_AND_IDENTIFIER = new RegExp(SEPARATORS.source + IDENTIFIER.source, "gu"), NUMBERS_AND_IDENTIFIER = new RegExp("\\d+" + IDENTIFIER.source, "gu"), preserveCamelCase = (a420, u2, c) => {
  let l2 = false, v2 = false, p2 = false;
  for (let _ = 0; _ < a420.length; _++) {
    const I2 = a420[_];
    l2 && UPPERCASE.test(I2) ? (a420 = a420.slice(0, _) + "-" + a420.slice(_), l2 = false, p2 = v2, v2 = true, _++) : v2 && p2 && LOWERCASE.test(I2) ? (a420 = a420.slice(0, _ - 1) + "-" + a420.slice(_ - 1), p2 = v2, v2 = false, l2 = true) : (l2 = u2(I2) === I2 && c(I2) !== I2, p2 = v2, v2 = c(I2) === I2 && u2(I2) !== I2);
  }
  return a420;
}, preserveConsecutiveUppercase = (a420, u2) => (LEADING_CAPITAL.lastIndex = 0, a420.replace(LEADING_CAPITAL, (c) => u2(c))), postProcess = (a420, u2) => (SEPARATORS_AND_IDENTIFIER.lastIndex = 0, NUMBERS_AND_IDENTIFIER.lastIndex = 0, a420.replace(SEPARATORS_AND_IDENTIFIER, (c, l2) => u2(l2)).replace(NUMBERS_AND_IDENTIFIER, (c) => u2(c))), camelCase$1 = (a420, u2) => {
  if (!(typeof a420 == "string" || Array.isArray(a420)))
    throw new TypeError("Expected the input to be `string | string[]`");
  if (u2 = { pascalCase: false, preserveConsecutiveUppercase: false, ...u2 }, Array.isArray(a420) ? a420 = a420.map((p2) => p2.trim()).filter((p2) => p2.length).join("-") : a420 = a420.trim(), a420.length === 0)
    return "";
  const c = u2.locale === false ? (p2) => p2.toLowerCase() : (p2) => p2.toLocaleLowerCase(u2.locale), l2 = u2.locale === false ? (p2) => p2.toUpperCase() : (p2) => p2.toLocaleUpperCase(u2.locale);
  return a420.length === 1 ? u2.pascalCase ? l2(a420) : c(a420) : (a420 !== c(a420) && (a420 = preserveCamelCase(a420, c, l2)), a420 = a420.replace(LEADING_SEPARATORS, ""), u2.preserveConsecutiveUppercase ? a420 = preserveConsecutiveUppercase(a420, c) : a420 = c(a420), u2.pascalCase && (a420 = l2(a420.charAt(0)) + a420.slice(1)), postProcess(a420, l2));
};
camelcase.exports = camelCase$1;
camelcase.exports.default = camelCase$1;
var camelcaseExports = camelcase.exports;
class QuickLRU {
  constructor(u2 = {}) {
    if (!(u2.maxSize && u2.maxSize > 0))
      throw new TypeError("`maxSize` must be a number greater than 0");
    this.maxSize = u2.maxSize, this.onEviction = u2.onEviction, this.cache = /* @__PURE__ */ new Map(), this.oldCache = /* @__PURE__ */ new Map(), this._size = 0;
  }
  _set(u2, c) {
    if (this.cache.set(u2, c), this._size++, this._size >= this.maxSize) {
      if (this._size = 0, typeof this.onEviction == "function")
        for (const [l2, v2] of this.oldCache.entries())
          this.onEviction(l2, v2);
      this.oldCache = this.cache, this.cache = /* @__PURE__ */ new Map();
    }
  }
  get(u2) {
    if (this.cache.has(u2))
      return this.cache.get(u2);
    if (this.oldCache.has(u2)) {
      const c = this.oldCache.get(u2);
      return this.oldCache.delete(u2), this._set(u2, c), c;
    }
  }
  set(u2, c) {
    return this.cache.has(u2) ? this.cache.set(u2, c) : this._set(u2, c), this;
  }
  has(u2) {
    return this.cache.has(u2) || this.oldCache.has(u2);
  }
  peek(u2) {
    if (this.cache.has(u2))
      return this.cache.get(u2);
    if (this.oldCache.has(u2))
      return this.oldCache.get(u2);
  }
  delete(u2) {
    const c = this.cache.delete(u2);
    return c && this._size--, this.oldCache.delete(u2) || c;
  }
  clear() {
    this.cache.clear(), this.oldCache.clear(), this._size = 0;
  }
  *keys() {
    for (const [u2] of this)
      yield u2;
  }
  *values() {
    for (const [, u2] of this)
      yield u2;
  }
  *[Symbol.iterator]() {
    for (const u2 of this.cache)
      yield u2;
    for (const u2 of this.oldCache) {
      const [c] = u2;
      this.cache.has(c) || (yield u2);
    }
  }
  get size() {
    let u2 = 0;
    for (const c of this.oldCache.keys())
      this.cache.has(c) || u2++;
    return Math.min(this._size + u2, this.maxSize);
  }
}
var quickLru = QuickLRU;
const mapObj = mapObjExports, camelCase = camelcaseExports, QuickLru = quickLru, has$1 = (a420, u2) => a420.some((c) => typeof c == "string" ? c === u2 : (c.lastIndex = 0, c.test(u2))), cache$1 = new QuickLru({ maxSize: 1e5 }), isObject$1 = (a420) => typeof a420 == "object" && a420 !== null && !(a420 instanceof RegExp) && !(a420 instanceof Error) && !(a420 instanceof Date), camelCaseConvert = (a420, u2) => {
  if (!isObject$1(a420))
    return a420;
  u2 = { deep: false, pascalCase: false, ...u2 };
  const { exclude: c, pascalCase: l2, stopPaths: v2, deep: p2 } = u2, _ = new Set(v2), I2 = (P2) => ($, F2) => {
    if (p2 && isObject$1(F2)) {
      const H2 = P2 === void 0 ? $ : `${P2}.${$}`;
      _.has(H2) || (F2 = mapObj(F2, I2(H2)));
    }
    if (!(c && has$1(c, $))) {
      const H2 = l2 ? `${$}_` : $;
      if (cache$1.has(H2))
        $ = cache$1.get(H2);
      else {
        const j = camelCase($, { pascalCase: l2, locale: false });
        $.length < 100 && cache$1.set(H2, j), $ = j;
      }
    }
    return [$, F2];
  };
  return mapObj(a420, I2(void 0));
};
var camelcaseKeys = (a420, u2) => Array.isArray(a420) ? Object.keys(a420).map((c) => camelCaseConvert(a420[c], u2)) : camelCaseConvert(a420, u2), __importDefault$6 = commonjsGlobal$1 && commonjsGlobal$1.__importDefault || function(a420) {
  return a420 && a420.__esModule ? a420 : { default: a420 };
};
Object.defineProperty(TwirpRPC, "__esModule", { value: true });
TwirpRPC.TwirpRpc = TwirpRPC.livekitPackage = void 0;
const axios_1 = __importDefault$6(axios), camelcase_keys_1 = __importDefault$6(camelcaseKeys), defaultPrefix = "/twirp";
TwirpRPC.livekitPackage = "livekit";
class TwirpRpc {
  constructor(u2, c, l2, v2) {
    this.host = u2, this.pkg = c, this.prefix = l2 || defaultPrefix, this.instance = axios_1.default.create({ baseURL: u2, headers: Object.assign({}, v2 ? { Host: v2 } : {}) });
  }
  request(u2, c, l2, v2) {
    return new Promise((p2, _) => {
      const I2 = `${this.prefix}/${this.pkg}.${u2}/${c}`;
      this.instance.post(I2, l2, { headers: v2 }).then((P2) => {
        p2(camelcase_keys_1.default(P2.data, { deep: true }));
      }).catch(_);
    });
  }
}
TwirpRPC.TwirpRpc = TwirpRpc;
var __awaiter$3 = commonjsGlobal$1 && commonjsGlobal$1.__awaiter || function(a420, u2, c, l2) {
  function v2(p2) {
    return p2 instanceof c ? p2 : new c(function(_) {
      _(p2);
    });
  }
  return new (c || (c = Promise))(function(p2, _) {
    function I2(F2) {
      try {
        $(l2.next(F2));
      } catch (H2) {
        _(H2);
      }
    }
    function P2(F2) {
      try {
        $(l2.throw(F2));
      } catch (H2) {
        _(H2);
      }
    }
    function $(F2) {
      F2.done ? p2(F2.value) : v2(F2.value).then(I2, P2);
    }
    $((l2 = l2.apply(a420, u2 || [])).next());
  });
}, __importDefault$5 = commonjsGlobal$1 && commonjsGlobal$1.__importDefault || function(a420) {
  return a420 && a420.__esModule ? a420 : { default: a420 };
};
Object.defineProperty(EgressClient$1, "__esModule", { value: true });
EgressClient$1.EgressClient = void 0;
const livekit_egress_1$1 = livekit_egress, ServiceBase_1$2 = __importDefault$5(ServiceBase$1), TwirpRPC_1$2 = TwirpRPC, svc$2 = "Egress";
class EgressClient extends ServiceBase_1$2.default {
  /**
  * @param host hostname including protocol. i.e. 'https://cluster.livekit.io'
  * @param apiKey API Key, can be set in env var LIVEKIT_API_KEY
  * @param secret API Secret, can be set in env var LIVEKIT_API_SECRET
  */
  constructor(u2, c, l2) {
    super(c, l2), this.rpc = new TwirpRPC_1$2.TwirpRpc(u2, TwirpRPC_1$2.livekitPackage);
  }
  startRoomCompositeEgress(u2, c, l2, v2, p2, _, I2) {
    return __awaiter$3(this, void 0, void 0, function* () {
      let P2;
      if (l2 !== void 0)
        if (typeof l2 == "string")
          P2 = l2;
        else {
          const Q2 = l2;
          P2 = Q2.layout, v2 = Q2.encodingOptions, p2 = Q2.audioOnly, _ = Q2.videoOnly, I2 = Q2.customBaseUrl;
        }
      P2 ?? (P2 = ""), p2 ?? (p2 = false), _ ?? (_ = false), I2 ?? (I2 = "");
      const { file: $, segments: F2, stream: H2, preset: j, advanced: ee2 } = this.getOutputParams(c, v2), X2 = livekit_egress_1$1.RoomCompositeEgressRequest.toJSON({ roomName: u2, layout: P2, audioOnly: p2, videoOnly: _, customBaseUrl: I2, file: $, stream: H2, segments: F2, preset: j, advanced: ee2 }), ie2 = yield this.rpc.request(svc$2, "StartRoomCompositeEgress", X2, this.authHeader({ roomRecord: true }));
      return livekit_egress_1$1.EgressInfo.fromJSON(ie2);
    });
  }
  /**
  * @param url url
  * @param output file or stream output
  * @param opts WebOptions
  */
  startWebEgress(u2, c, l2) {
    return __awaiter$3(this, void 0, void 0, function* () {
      const v2 = (l2 == null ? void 0 : l2.audioOnly) || false, p2 = (l2 == null ? void 0 : l2.videoOnly) || false, { file: _, segments: I2, stream: P2, preset: $, advanced: F2 } = this.getOutputParams(c, l2 == null ? void 0 : l2.encodingOptions), H2 = livekit_egress_1$1.WebEgressRequest.toJSON({ url: u2, audioOnly: v2, videoOnly: p2, file: _, stream: P2, segments: I2, preset: $, advanced: F2 }), j = yield this.rpc.request(svc$2, "StartWebEgress", H2, this.authHeader({ roomRecord: true }));
      return livekit_egress_1$1.EgressInfo.fromJSON(j);
    });
  }
  startTrackCompositeEgress(u2, c, l2, v2, p2) {
    return __awaiter$3(this, void 0, void 0, function* () {
      let _;
      if (l2 !== void 0)
        if (typeof l2 == "string")
          _ = l2;
        else {
          const X2 = l2;
          _ = X2.audioTrackId, v2 = X2.videoTrackId, p2 = X2.encodingOptions;
        }
      _ ?? (_ = ""), v2 ?? (v2 = "");
      const { file: I2, segments: P2, stream: $, preset: F2, advanced: H2 } = this.getOutputParams(c, p2), j = livekit_egress_1$1.TrackCompositeEgressRequest.toJSON({ roomName: u2, audioTrackId: _, videoTrackId: v2, file: I2, stream: $, segments: P2, preset: F2, advanced: H2 }), ee2 = yield this.rpc.request(svc$2, "StartTrackCompositeEgress", j, this.authHeader({ roomRecord: true }));
      return livekit_egress_1$1.EgressInfo.fromJSON(ee2);
    });
  }
  getOutputParams(u2, c) {
    let l2, v2, p2, _, I2;
    return u2.filepath !== void 0 ? l2 = u2 : u2.filenamePrefix !== void 0 ? p2 = u2 : v2 = u2, c && (typeof c == "number" ? _ = c : I2 = c), { file: l2, segments: p2, stream: v2, preset: _, advanced: I2 };
  }
  /**
  * @param roomName room name
  * @param output file or websocket output
  * @param trackId track Id
  */
  startTrackEgress(u2, c, l2) {
    return __awaiter$3(this, void 0, void 0, function* () {
      let v2, p2;
      c.filepath !== void 0 ? v2 = c : p2 = c;
      const _ = livekit_egress_1$1.TrackEgressRequest.toJSON({ roomName: u2, trackId: l2, file: v2, websocketUrl: p2 }), I2 = yield this.rpc.request(svc$2, "StartTrackEgress", _, this.authHeader({ roomRecord: true }));
      return livekit_egress_1$1.EgressInfo.fromJSON(I2);
    });
  }
  /**
  * @param egressId
  * @param layout
  */
  updateLayout(u2, c) {
    return __awaiter$3(this, void 0, void 0, function* () {
      const l2 = yield this.rpc.request(svc$2, "UpdateLayout", livekit_egress_1$1.UpdateLayoutRequest.toJSON({ egressId: u2, layout: c }), this.authHeader({ roomRecord: true }));
      return livekit_egress_1$1.EgressInfo.fromJSON(l2);
    });
  }
  /**
  * @param egressId
  * @param addOutputUrls
  * @param removeOutputUrls
  */
  updateStream(u2, c, l2) {
    return __awaiter$3(this, void 0, void 0, function* () {
      c ?? (c = []), l2 ?? (l2 = []);
      const v2 = yield this.rpc.request(svc$2, "UpdateStream", livekit_egress_1$1.UpdateStreamRequest.toJSON({ egressId: u2, addOutputUrls: c, removeOutputUrls: l2 }), this.authHeader({ roomRecord: true }));
      return livekit_egress_1$1.EgressInfo.fromJSON(v2);
    });
  }
  /**
  * @param roomName list egress for one room only
  */
  listEgress(u2) {
    var c;
    return __awaiter$3(this, void 0, void 0, function* () {
      u2 ?? (u2 = "");
      const l2 = yield this.rpc.request(svc$2, "ListEgress", livekit_egress_1$1.ListEgressRequest.toJSON({ roomName: u2 }), this.authHeader({ roomRecord: true }));
      return (c = livekit_egress_1$1.ListEgressResponse.fromJSON(l2).items) !== null && c !== void 0 ? c : [];
    });
  }
  /**
  * @param egressId
  */
  stopEgress(u2) {
    return __awaiter$3(this, void 0, void 0, function* () {
      const c = yield this.rpc.request(svc$2, "StopEgress", livekit_egress_1$1.StopEgressRequest.toJSON({ egressId: u2 }), this.authHeader({ roomRecord: true }));
      return livekit_egress_1$1.EgressInfo.fromJSON(c);
    });
  }
}
EgressClient$1.EgressClient = EgressClient;
var grants = {};
Object.defineProperty(grants, "__esModule", { value: true });
var IngressClient$1 = {}, livekit_ingress = {}, livekit_models = {}, timestamp = {}, __importDefault$4 = commonjsGlobal$1 && commonjsGlobal$1.__importDefault || function(a420) {
  return a420 && a420.__esModule ? a420 : { default: a420 };
};
Object.defineProperty(timestamp, "__esModule", { value: true });
timestamp.Timestamp = timestamp.protobufPackage = void 0;
const long_1$1 = __importDefault$4(umdExports), minimal_1$1 = __importDefault$4(minimal);
timestamp.protobufPackage = "google.protobuf";
function createBaseTimestamp() {
  return { seconds: 0, nanos: 0 };
}
timestamp.Timestamp = { encode(a420, u2 = minimal_1$1.default.Writer.create()) {
  return a420.seconds !== 0 && u2.uint32(8).int64(a420.seconds), a420.nanos !== 0 && u2.uint32(16).int32(a420.nanos), u2;
}, decode(a420, u2) {
  const c = a420 instanceof minimal_1$1.default.Reader ? a420 : new minimal_1$1.default.Reader(a420);
  let l2 = u2 === void 0 ? c.len : c.pos + u2;
  const v2 = createBaseTimestamp();
  for (; c.pos < l2; ) {
    const p2 = c.uint32();
    switch (p2 >>> 3) {
      case 1:
        v2.seconds = longToNumber$1(c.int64());
        break;
      case 2:
        v2.nanos = c.int32();
        break;
      default:
        c.skipType(p2 & 7);
        break;
    }
  }
  return v2;
}, fromJSON(a420) {
  return { seconds: isSet$1(a420.seconds) ? Number(a420.seconds) : 0, nanos: isSet$1(a420.nanos) ? Number(a420.nanos) : 0 };
}, toJSON(a420) {
  const u2 = {};
  return a420.seconds !== void 0 && (u2.seconds = Math.round(a420.seconds)), a420.nanos !== void 0 && (u2.nanos = Math.round(a420.nanos)), u2;
}, fromPartial(a420) {
  var u2, c;
  const l2 = createBaseTimestamp();
  return l2.seconds = (u2 = a420.seconds) !== null && u2 !== void 0 ? u2 : 0, l2.nanos = (c = a420.nanos) !== null && c !== void 0 ? c : 0, l2;
} };
var globalThis$2 = (() => {
  if (typeof globalThis$2 < "u")
    return globalThis$2;
  if (typeof self < "u")
    return self;
  if (typeof window < "u")
    return window;
  if (typeof commonjsGlobal$1 < "u")
    return commonjsGlobal$1;
  throw "Unable to locate global object";
})();
function longToNumber$1(a420) {
  if (a420.gt(Number.MAX_SAFE_INTEGER))
    throw new globalThis$2.Error("Value is larger than Number.MAX_SAFE_INTEGER");
  return a420.toNumber();
}
minimal_1$1.default.util.Long !== long_1$1.default && (minimal_1$1.default.util.Long = long_1$1.default, minimal_1$1.default.configure());
function isSet$1(a420) {
  return a420 != null;
}
(function(a420) {
  var u2 = commonjsGlobal$1 && commonjsGlobal$1.__importDefault || function(J2) {
    return J2 && J2.__esModule ? J2 : { default: J2 };
  };
  Object.defineProperty(a420, "__esModule", { value: true }), a420.RTPStats_GapHistogramEntry = a420.RTPStats = a420.DisabledCodecs = a420.VideoConfiguration = a420.ClientConfiguration = a420.ClientInfo = a420.ServerInfo = a420.ParticipantTracks = a420.UserPacket = a420.SpeakerInfo = a420.ActiveSpeakerUpdate = a420.DataPacket = a420.VideoLayer = a420.TrackInfo = a420.SimulcastCodecInfo = a420.ParticipantInfo = a420.ParticipantPermission = a420.Codec = a420.Room = a420.clientInfo_SDKToJSON = a420.clientInfo_SDKFromJSON = a420.ClientInfo_SDK = a420.serverInfo_EditionToJSON = a420.serverInfo_EditionFromJSON = a420.ServerInfo_Edition = a420.dataPacket_KindToJSON = a420.dataPacket_KindFromJSON = a420.DataPacket_Kind = a420.participantInfo_StateToJSON = a420.participantInfo_StateFromJSON = a420.ParticipantInfo_State = a420.disconnectReasonToJSON = a420.disconnectReasonFromJSON = a420.DisconnectReason = a420.clientConfigSettingToJSON = a420.clientConfigSettingFromJSON = a420.ClientConfigSetting = a420.connectionQualityToJSON = a420.connectionQualityFromJSON = a420.ConnectionQuality = a420.videoQualityToJSON = a420.videoQualityFromJSON = a420.VideoQuality = a420.trackSourceToJSON = a420.trackSourceFromJSON = a420.TrackSource = a420.trackTypeToJSON = a420.trackTypeFromJSON = a420.TrackType = a420.protobufPackage = void 0, a420.TimedVersion = void 0;
  const c = u2(umdExports), l2 = u2(minimal), v2 = timestamp;
  a420.protobufPackage = "livekit";
  var p2;
  (function(J2) {
    J2[J2.AUDIO = 0] = "AUDIO", J2[J2.VIDEO = 1] = "VIDEO", J2[J2.DATA = 2] = "DATA", J2[J2.UNRECOGNIZED = -1] = "UNRECOGNIZED";
  })(p2 = a420.TrackType || (a420.TrackType = {}));
  function _(J2) {
    switch (J2) {
      case 0:
      case "AUDIO":
        return p2.AUDIO;
      case 1:
      case "VIDEO":
        return p2.VIDEO;
      case 2:
      case "DATA":
        return p2.DATA;
      case -1:
      case "UNRECOGNIZED":
      default:
        return p2.UNRECOGNIZED;
    }
  }
  a420.trackTypeFromJSON = _;
  function I2(J2) {
    switch (J2) {
      case p2.AUDIO:
        return "AUDIO";
      case p2.VIDEO:
        return "VIDEO";
      case p2.DATA:
        return "DATA";
      case p2.UNRECOGNIZED:
      default:
        return "UNRECOGNIZED";
    }
  }
  a420.trackTypeToJSON = I2;
  var P2;
  (function(J2) {
    J2[J2.UNKNOWN = 0] = "UNKNOWN", J2[J2.CAMERA = 1] = "CAMERA", J2[J2.MICROPHONE = 2] = "MICROPHONE", J2[J2.SCREEN_SHARE = 3] = "SCREEN_SHARE", J2[J2.SCREEN_SHARE_AUDIO = 4] = "SCREEN_SHARE_AUDIO", J2[J2.UNRECOGNIZED = -1] = "UNRECOGNIZED";
  })(P2 = a420.TrackSource || (a420.TrackSource = {}));
  function $(J2) {
    switch (J2) {
      case 0:
      case "UNKNOWN":
        return P2.UNKNOWN;
      case 1:
      case "CAMERA":
        return P2.CAMERA;
      case 2:
      case "MICROPHONE":
        return P2.MICROPHONE;
      case 3:
      case "SCREEN_SHARE":
        return P2.SCREEN_SHARE;
      case 4:
      case "SCREEN_SHARE_AUDIO":
        return P2.SCREEN_SHARE_AUDIO;
      case -1:
      case "UNRECOGNIZED":
      default:
        return P2.UNRECOGNIZED;
    }
  }
  a420.trackSourceFromJSON = $;
  function F2(J2) {
    switch (J2) {
      case P2.UNKNOWN:
        return "UNKNOWN";
      case P2.CAMERA:
        return "CAMERA";
      case P2.MICROPHONE:
        return "MICROPHONE";
      case P2.SCREEN_SHARE:
        return "SCREEN_SHARE";
      case P2.SCREEN_SHARE_AUDIO:
        return "SCREEN_SHARE_AUDIO";
      case P2.UNRECOGNIZED:
      default:
        return "UNRECOGNIZED";
    }
  }
  a420.trackSourceToJSON = F2;
  var H2;
  (function(J2) {
    J2[J2.LOW = 0] = "LOW", J2[J2.MEDIUM = 1] = "MEDIUM", J2[J2.HIGH = 2] = "HIGH", J2[J2.OFF = 3] = "OFF", J2[J2.UNRECOGNIZED = -1] = "UNRECOGNIZED";
  })(H2 = a420.VideoQuality || (a420.VideoQuality = {}));
  function j(J2) {
    switch (J2) {
      case 0:
      case "LOW":
        return H2.LOW;
      case 1:
      case "MEDIUM":
        return H2.MEDIUM;
      case 2:
      case "HIGH":
        return H2.HIGH;
      case 3:
      case "OFF":
        return H2.OFF;
      case -1:
      case "UNRECOGNIZED":
      default:
        return H2.UNRECOGNIZED;
    }
  }
  a420.videoQualityFromJSON = j;
  function ee2(J2) {
    switch (J2) {
      case H2.LOW:
        return "LOW";
      case H2.MEDIUM:
        return "MEDIUM";
      case H2.HIGH:
        return "HIGH";
      case H2.OFF:
        return "OFF";
      case H2.UNRECOGNIZED:
      default:
        return "UNRECOGNIZED";
    }
  }
  a420.videoQualityToJSON = ee2;
  var X2;
  (function(J2) {
    J2[J2.POOR = 0] = "POOR", J2[J2.GOOD = 1] = "GOOD", J2[J2.EXCELLENT = 2] = "EXCELLENT", J2[J2.UNRECOGNIZED = -1] = "UNRECOGNIZED";
  })(X2 = a420.ConnectionQuality || (a420.ConnectionQuality = {}));
  function ie2(J2) {
    switch (J2) {
      case 0:
      case "POOR":
        return X2.POOR;
      case 1:
      case "GOOD":
        return X2.GOOD;
      case 2:
      case "EXCELLENT":
        return X2.EXCELLENT;
      case -1:
      case "UNRECOGNIZED":
      default:
        return X2.UNRECOGNIZED;
    }
  }
  a420.connectionQualityFromJSON = ie2;
  function Q2(J2) {
    switch (J2) {
      case X2.POOR:
        return "POOR";
      case X2.GOOD:
        return "GOOD";
      case X2.EXCELLENT:
        return "EXCELLENT";
      case X2.UNRECOGNIZED:
      default:
        return "UNRECOGNIZED";
    }
  }
  a420.connectionQualityToJSON = Q2;
  var ne2;
  (function(J2) {
    J2[J2.UNSET = 0] = "UNSET", J2[J2.DISABLED = 1] = "DISABLED", J2[J2.ENABLED = 2] = "ENABLED", J2[J2.UNRECOGNIZED = -1] = "UNRECOGNIZED";
  })(ne2 = a420.ClientConfigSetting || (a420.ClientConfigSetting = {}));
  function Z2(J2) {
    switch (J2) {
      case 0:
      case "UNSET":
        return ne2.UNSET;
      case 1:
      case "DISABLED":
        return ne2.DISABLED;
      case 2:
      case "ENABLED":
        return ne2.ENABLED;
      case -1:
      case "UNRECOGNIZED":
      default:
        return ne2.UNRECOGNIZED;
    }
  }
  a420.clientConfigSettingFromJSON = Z2;
  function de2(J2) {
    switch (J2) {
      case ne2.UNSET:
        return "UNSET";
      case ne2.DISABLED:
        return "DISABLED";
      case ne2.ENABLED:
        return "ENABLED";
      case ne2.UNRECOGNIZED:
      default:
        return "UNRECOGNIZED";
    }
  }
  a420.clientConfigSettingToJSON = de2;
  var pe2;
  (function(J2) {
    J2[J2.UNKNOWN_REASON = 0] = "UNKNOWN_REASON", J2[J2.CLIENT_INITIATED = 1] = "CLIENT_INITIATED", J2[J2.DUPLICATE_IDENTITY = 2] = "DUPLICATE_IDENTITY", J2[J2.SERVER_SHUTDOWN = 3] = "SERVER_SHUTDOWN", J2[J2.PARTICIPANT_REMOVED = 4] = "PARTICIPANT_REMOVED", J2[J2.ROOM_DELETED = 5] = "ROOM_DELETED", J2[J2.STATE_MISMATCH = 6] = "STATE_MISMATCH", J2[J2.JOIN_FAILURE = 7] = "JOIN_FAILURE", J2[J2.UNRECOGNIZED = -1] = "UNRECOGNIZED";
  })(pe2 = a420.DisconnectReason || (a420.DisconnectReason = {}));
  function le2(J2) {
    switch (J2) {
      case 0:
      case "UNKNOWN_REASON":
        return pe2.UNKNOWN_REASON;
      case 1:
      case "CLIENT_INITIATED":
        return pe2.CLIENT_INITIATED;
      case 2:
      case "DUPLICATE_IDENTITY":
        return pe2.DUPLICATE_IDENTITY;
      case 3:
      case "SERVER_SHUTDOWN":
        return pe2.SERVER_SHUTDOWN;
      case 4:
      case "PARTICIPANT_REMOVED":
        return pe2.PARTICIPANT_REMOVED;
      case 5:
      case "ROOM_DELETED":
        return pe2.ROOM_DELETED;
      case 6:
      case "STATE_MISMATCH":
        return pe2.STATE_MISMATCH;
      case 7:
      case "JOIN_FAILURE":
        return pe2.JOIN_FAILURE;
      case -1:
      case "UNRECOGNIZED":
      default:
        return pe2.UNRECOGNIZED;
    }
  }
  a420.disconnectReasonFromJSON = le2;
  function be2(J2) {
    switch (J2) {
      case pe2.UNKNOWN_REASON:
        return "UNKNOWN_REASON";
      case pe2.CLIENT_INITIATED:
        return "CLIENT_INITIATED";
      case pe2.DUPLICATE_IDENTITY:
        return "DUPLICATE_IDENTITY";
      case pe2.SERVER_SHUTDOWN:
        return "SERVER_SHUTDOWN";
      case pe2.PARTICIPANT_REMOVED:
        return "PARTICIPANT_REMOVED";
      case pe2.ROOM_DELETED:
        return "ROOM_DELETED";
      case pe2.STATE_MISMATCH:
        return "STATE_MISMATCH";
      case pe2.JOIN_FAILURE:
        return "JOIN_FAILURE";
      case pe2.UNRECOGNIZED:
      default:
        return "UNRECOGNIZED";
    }
  }
  a420.disconnectReasonToJSON = be2;
  var ke2;
  (function(J2) {
    J2[J2.JOINING = 0] = "JOINING", J2[J2.JOINED = 1] = "JOINED", J2[J2.ACTIVE = 2] = "ACTIVE", J2[J2.DISCONNECTED = 3] = "DISCONNECTED", J2[J2.UNRECOGNIZED = -1] = "UNRECOGNIZED";
  })(ke2 = a420.ParticipantInfo_State || (a420.ParticipantInfo_State = {}));
  function Te2(J2) {
    switch (J2) {
      case 0:
      case "JOINING":
        return ke2.JOINING;
      case 1:
      case "JOINED":
        return ke2.JOINED;
      case 2:
      case "ACTIVE":
        return ke2.ACTIVE;
      case 3:
      case "DISCONNECTED":
        return ke2.DISCONNECTED;
      case -1:
      case "UNRECOGNIZED":
      default:
        return ke2.UNRECOGNIZED;
    }
  }
  a420.participantInfo_StateFromJSON = Te2;
  function q2(J2) {
    switch (J2) {
      case ke2.JOINING:
        return "JOINING";
      case ke2.JOINED:
        return "JOINED";
      case ke2.ACTIVE:
        return "ACTIVE";
      case ke2.DISCONNECTED:
        return "DISCONNECTED";
      case ke2.UNRECOGNIZED:
      default:
        return "UNRECOGNIZED";
    }
  }
  a420.participantInfo_StateToJSON = q2;
  var z2;
  (function(J2) {
    J2[J2.RELIABLE = 0] = "RELIABLE", J2[J2.LOSSY = 1] = "LOSSY", J2[J2.UNRECOGNIZED = -1] = "UNRECOGNIZED";
  })(z2 = a420.DataPacket_Kind || (a420.DataPacket_Kind = {}));
  function C2(J2) {
    switch (J2) {
      case 0:
      case "RELIABLE":
        return z2.RELIABLE;
      case 1:
      case "LOSSY":
        return z2.LOSSY;
      case -1:
      case "UNRECOGNIZED":
      default:
        return z2.UNRECOGNIZED;
    }
  }
  a420.dataPacket_KindFromJSON = C2;
  function b(J2) {
    switch (J2) {
      case z2.RELIABLE:
        return "RELIABLE";
      case z2.LOSSY:
        return "LOSSY";
      case z2.UNRECOGNIZED:
      default:
        return "UNRECOGNIZED";
    }
  }
  a420.dataPacket_KindToJSON = b;
  var E2;
  (function(J2) {
    J2[J2.Standard = 0] = "Standard", J2[J2.Cloud = 1] = "Cloud", J2[J2.UNRECOGNIZED = -1] = "UNRECOGNIZED";
  })(E2 = a420.ServerInfo_Edition || (a420.ServerInfo_Edition = {}));
  function k(J2) {
    switch (J2) {
      case 0:
      case "Standard":
        return E2.Standard;
      case 1:
      case "Cloud":
        return E2.Cloud;
      case -1:
      case "UNRECOGNIZED":
      default:
        return E2.UNRECOGNIZED;
    }
  }
  a420.serverInfo_EditionFromJSON = k;
  function O2(J2) {
    switch (J2) {
      case E2.Standard:
        return "Standard";
      case E2.Cloud:
        return "Cloud";
      case E2.UNRECOGNIZED:
      default:
        return "UNRECOGNIZED";
    }
  }
  a420.serverInfo_EditionToJSON = O2;
  var A2;
  (function(J2) {
    J2[J2.UNKNOWN = 0] = "UNKNOWN", J2[J2.JS = 1] = "JS", J2[J2.SWIFT = 2] = "SWIFT", J2[J2.ANDROID = 3] = "ANDROID", J2[J2.FLUTTER = 4] = "FLUTTER", J2[J2.GO = 5] = "GO", J2[J2.UNITY = 6] = "UNITY", J2[J2.UNRECOGNIZED = -1] = "UNRECOGNIZED";
  })(A2 = a420.ClientInfo_SDK || (a420.ClientInfo_SDK = {}));
  function x2(J2) {
    switch (J2) {
      case 0:
      case "UNKNOWN":
        return A2.UNKNOWN;
      case 1:
      case "JS":
        return A2.JS;
      case 2:
      case "SWIFT":
        return A2.SWIFT;
      case 3:
      case "ANDROID":
        return A2.ANDROID;
      case 4:
      case "FLUTTER":
        return A2.FLUTTER;
      case 5:
      case "GO":
        return A2.GO;
      case 6:
      case "UNITY":
        return A2.UNITY;
      case -1:
      case "UNRECOGNIZED":
      default:
        return A2.UNRECOGNIZED;
    }
  }
  a420.clientInfo_SDKFromJSON = x2;
  function Y2(J2) {
    switch (J2) {
      case A2.UNKNOWN:
        return "UNKNOWN";
      case A2.JS:
        return "JS";
      case A2.SWIFT:
        return "SWIFT";
      case A2.ANDROID:
        return "ANDROID";
      case A2.FLUTTER:
        return "FLUTTER";
      case A2.GO:
        return "GO";
      case A2.UNITY:
        return "UNITY";
      case A2.UNRECOGNIZED:
      default:
        return "UNRECOGNIZED";
    }
  }
  a420.clientInfo_SDKToJSON = Y2;
  function B2() {
    return { sid: "", name: "", emptyTimeout: 0, maxParticipants: 0, creationTime: 0, turnPassword: "", enabledCodecs: [], metadata: "", numParticipants: 0, activeRecording: false };
  }
  a420.Room = { encode(J2, _e = l2.default.Writer.create()) {
    J2.sid !== "" && _e.uint32(10).string(J2.sid), J2.name !== "" && _e.uint32(18).string(J2.name), J2.emptyTimeout !== 0 && _e.uint32(24).uint32(J2.emptyTimeout), J2.maxParticipants !== 0 && _e.uint32(32).uint32(J2.maxParticipants), J2.creationTime !== 0 && _e.uint32(40).int64(J2.creationTime), J2.turnPassword !== "" && _e.uint32(50).string(J2.turnPassword);
    for (const ue2 of J2.enabledCodecs)
      a420.Codec.encode(ue2, _e.uint32(58).fork()).ldelim();
    return J2.metadata !== "" && _e.uint32(66).string(J2.metadata), J2.numParticipants !== 0 && _e.uint32(72).uint32(J2.numParticipants), J2.activeRecording === true && _e.uint32(80).bool(J2.activeRecording), _e;
  }, decode(J2, _e) {
    const ue2 = J2 instanceof l2.default.Reader ? J2 : new l2.default.Reader(J2);
    let ce2 = _e === void 0 ? ue2.len : ue2.pos + _e;
    const ve2 = B2();
    for (; ue2.pos < ce2; ) {
      const Ce2 = ue2.uint32();
      switch (Ce2 >>> 3) {
        case 1:
          ve2.sid = ue2.string();
          break;
        case 2:
          ve2.name = ue2.string();
          break;
        case 3:
          ve2.emptyTimeout = ue2.uint32();
          break;
        case 4:
          ve2.maxParticipants = ue2.uint32();
          break;
        case 5:
          ve2.creationTime = we2(ue2.int64());
          break;
        case 6:
          ve2.turnPassword = ue2.string();
          break;
        case 7:
          ve2.enabledCodecs.push(a420.Codec.decode(ue2, ue2.uint32()));
          break;
        case 8:
          ve2.metadata = ue2.string();
          break;
        case 9:
          ve2.numParticipants = ue2.uint32();
          break;
        case 10:
          ve2.activeRecording = ue2.bool();
          break;
        default:
          ue2.skipType(Ce2 & 7);
          break;
      }
    }
    return ve2;
  }, fromJSON(J2) {
    return { sid: Re2(J2.sid) ? String(J2.sid) : "", name: Re2(J2.name) ? String(J2.name) : "", emptyTimeout: Re2(J2.emptyTimeout) ? Number(J2.emptyTimeout) : 0, maxParticipants: Re2(J2.maxParticipants) ? Number(J2.maxParticipants) : 0, creationTime: Re2(J2.creationTime) ? Number(J2.creationTime) : 0, turnPassword: Re2(J2.turnPassword) ? String(J2.turnPassword) : "", enabledCodecs: Array.isArray(J2 == null ? void 0 : J2.enabledCodecs) ? J2.enabledCodecs.map((_e) => a420.Codec.fromJSON(_e)) : [], metadata: Re2(J2.metadata) ? String(J2.metadata) : "", numParticipants: Re2(J2.numParticipants) ? Number(J2.numParticipants) : 0, activeRecording: Re2(J2.activeRecording) ? !!J2.activeRecording : false };
  }, toJSON(J2) {
    const _e = {};
    return J2.sid !== void 0 && (_e.sid = J2.sid), J2.name !== void 0 && (_e.name = J2.name), J2.emptyTimeout !== void 0 && (_e.emptyTimeout = Math.round(J2.emptyTimeout)), J2.maxParticipants !== void 0 && (_e.maxParticipants = Math.round(J2.maxParticipants)), J2.creationTime !== void 0 && (_e.creationTime = Math.round(J2.creationTime)), J2.turnPassword !== void 0 && (_e.turnPassword = J2.turnPassword), J2.enabledCodecs ? _e.enabledCodecs = J2.enabledCodecs.map((ue2) => ue2 ? a420.Codec.toJSON(ue2) : void 0) : _e.enabledCodecs = [], J2.metadata !== void 0 && (_e.metadata = J2.metadata), J2.numParticipants !== void 0 && (_e.numParticipants = Math.round(J2.numParticipants)), J2.activeRecording !== void 0 && (_e.activeRecording = J2.activeRecording), _e;
  }, fromPartial(J2) {
    var _e, ue2, ce2, ve2, Ce2, Be2, He2, Ve2, Ze2, Ke2;
    const U2 = B2();
    return U2.sid = (_e = J2.sid) !== null && _e !== void 0 ? _e : "", U2.name = (ue2 = J2.name) !== null && ue2 !== void 0 ? ue2 : "", U2.emptyTimeout = (ce2 = J2.emptyTimeout) !== null && ce2 !== void 0 ? ce2 : 0, U2.maxParticipants = (ve2 = J2.maxParticipants) !== null && ve2 !== void 0 ? ve2 : 0, U2.creationTime = (Ce2 = J2.creationTime) !== null && Ce2 !== void 0 ? Ce2 : 0, U2.turnPassword = (Be2 = J2.turnPassword) !== null && Be2 !== void 0 ? Be2 : "", U2.enabledCodecs = ((He2 = J2.enabledCodecs) === null || He2 === void 0 ? void 0 : He2.map((se2) => a420.Codec.fromPartial(se2))) || [], U2.metadata = (Ve2 = J2.metadata) !== null && Ve2 !== void 0 ? Ve2 : "", U2.numParticipants = (Ze2 = J2.numParticipants) !== null && Ze2 !== void 0 ? Ze2 : 0, U2.activeRecording = (Ke2 = J2.activeRecording) !== null && Ke2 !== void 0 ? Ke2 : false, U2;
  } };
  function T2() {
    return { mime: "", fmtpLine: "" };
  }
  a420.Codec = { encode(J2, _e = l2.default.Writer.create()) {
    return J2.mime !== "" && _e.uint32(10).string(J2.mime), J2.fmtpLine !== "" && _e.uint32(18).string(J2.fmtpLine), _e;
  }, decode(J2, _e) {
    const ue2 = J2 instanceof l2.default.Reader ? J2 : new l2.default.Reader(J2);
    let ce2 = _e === void 0 ? ue2.len : ue2.pos + _e;
    const ve2 = T2();
    for (; ue2.pos < ce2; ) {
      const Ce2 = ue2.uint32();
      switch (Ce2 >>> 3) {
        case 1:
          ve2.mime = ue2.string();
          break;
        case 2:
          ve2.fmtpLine = ue2.string();
          break;
        default:
          ue2.skipType(Ce2 & 7);
          break;
      }
    }
    return ve2;
  }, fromJSON(J2) {
    return { mime: Re2(J2.mime) ? String(J2.mime) : "", fmtpLine: Re2(J2.fmtpLine) ? String(J2.fmtpLine) : "" };
  }, toJSON(J2) {
    const _e = {};
    return J2.mime !== void 0 && (_e.mime = J2.mime), J2.fmtpLine !== void 0 && (_e.fmtpLine = J2.fmtpLine), _e;
  }, fromPartial(J2) {
    var _e, ue2;
    const ce2 = T2();
    return ce2.mime = (_e = J2.mime) !== null && _e !== void 0 ? _e : "", ce2.fmtpLine = (ue2 = J2.fmtpLine) !== null && ue2 !== void 0 ? ue2 : "", ce2;
  } };
  function D2() {
    return { canSubscribe: false, canPublish: false, canPublishData: false, hidden: false, recorder: false };
  }
  a420.ParticipantPermission = { encode(J2, _e = l2.default.Writer.create()) {
    return J2.canSubscribe === true && _e.uint32(8).bool(J2.canSubscribe), J2.canPublish === true && _e.uint32(16).bool(J2.canPublish), J2.canPublishData === true && _e.uint32(24).bool(J2.canPublishData), J2.hidden === true && _e.uint32(56).bool(J2.hidden), J2.recorder === true && _e.uint32(64).bool(J2.recorder), _e;
  }, decode(J2, _e) {
    const ue2 = J2 instanceof l2.default.Reader ? J2 : new l2.default.Reader(J2);
    let ce2 = _e === void 0 ? ue2.len : ue2.pos + _e;
    const ve2 = D2();
    for (; ue2.pos < ce2; ) {
      const Ce2 = ue2.uint32();
      switch (Ce2 >>> 3) {
        case 1:
          ve2.canSubscribe = ue2.bool();
          break;
        case 2:
          ve2.canPublish = ue2.bool();
          break;
        case 3:
          ve2.canPublishData = ue2.bool();
          break;
        case 7:
          ve2.hidden = ue2.bool();
          break;
        case 8:
          ve2.recorder = ue2.bool();
          break;
        default:
          ue2.skipType(Ce2 & 7);
          break;
      }
    }
    return ve2;
  }, fromJSON(J2) {
    return { canSubscribe: Re2(J2.canSubscribe) ? !!J2.canSubscribe : false, canPublish: Re2(J2.canPublish) ? !!J2.canPublish : false, canPublishData: Re2(J2.canPublishData) ? !!J2.canPublishData : false, hidden: Re2(J2.hidden) ? !!J2.hidden : false, recorder: Re2(J2.recorder) ? !!J2.recorder : false };
  }, toJSON(J2) {
    const _e = {};
    return J2.canSubscribe !== void 0 && (_e.canSubscribe = J2.canSubscribe), J2.canPublish !== void 0 && (_e.canPublish = J2.canPublish), J2.canPublishData !== void 0 && (_e.canPublishData = J2.canPublishData), J2.hidden !== void 0 && (_e.hidden = J2.hidden), J2.recorder !== void 0 && (_e.recorder = J2.recorder), _e;
  }, fromPartial(J2) {
    var _e, ue2, ce2, ve2, Ce2;
    const Be2 = D2();
    return Be2.canSubscribe = (_e = J2.canSubscribe) !== null && _e !== void 0 ? _e : false, Be2.canPublish = (ue2 = J2.canPublish) !== null && ue2 !== void 0 ? ue2 : false, Be2.canPublishData = (ce2 = J2.canPublishData) !== null && ce2 !== void 0 ? ce2 : false, Be2.hidden = (ve2 = J2.hidden) !== null && ve2 !== void 0 ? ve2 : false, Be2.recorder = (Ce2 = J2.recorder) !== null && Ce2 !== void 0 ? Ce2 : false, Be2;
  } };
  function te2() {
    return { sid: "", identity: "", state: 0, tracks: [], metadata: "", joinedAt: 0, name: "", version: 0, permission: void 0, region: "", isPublisher: false };
  }
  a420.ParticipantInfo = { encode(J2, _e = l2.default.Writer.create()) {
    J2.sid !== "" && _e.uint32(10).string(J2.sid), J2.identity !== "" && _e.uint32(18).string(J2.identity), J2.state !== 0 && _e.uint32(24).int32(J2.state);
    for (const ue2 of J2.tracks)
      a420.TrackInfo.encode(ue2, _e.uint32(34).fork()).ldelim();
    return J2.metadata !== "" && _e.uint32(42).string(J2.metadata), J2.joinedAt !== 0 && _e.uint32(48).int64(J2.joinedAt), J2.name !== "" && _e.uint32(74).string(J2.name), J2.version !== 0 && _e.uint32(80).uint32(J2.version), J2.permission !== void 0 && a420.ParticipantPermission.encode(J2.permission, _e.uint32(90).fork()).ldelim(), J2.region !== "" && _e.uint32(98).string(J2.region), J2.isPublisher === true && _e.uint32(104).bool(J2.isPublisher), _e;
  }, decode(J2, _e) {
    const ue2 = J2 instanceof l2.default.Reader ? J2 : new l2.default.Reader(J2);
    let ce2 = _e === void 0 ? ue2.len : ue2.pos + _e;
    const ve2 = te2();
    for (; ue2.pos < ce2; ) {
      const Ce2 = ue2.uint32();
      switch (Ce2 >>> 3) {
        case 1:
          ve2.sid = ue2.string();
          break;
        case 2:
          ve2.identity = ue2.string();
          break;
        case 3:
          ve2.state = ue2.int32();
          break;
        case 4:
          ve2.tracks.push(a420.TrackInfo.decode(ue2, ue2.uint32()));
          break;
        case 5:
          ve2.metadata = ue2.string();
          break;
        case 6:
          ve2.joinedAt = we2(ue2.int64());
          break;
        case 9:
          ve2.name = ue2.string();
          break;
        case 10:
          ve2.version = ue2.uint32();
          break;
        case 11:
          ve2.permission = a420.ParticipantPermission.decode(ue2, ue2.uint32());
          break;
        case 12:
          ve2.region = ue2.string();
          break;
        case 13:
          ve2.isPublisher = ue2.bool();
          break;
        default:
          ue2.skipType(Ce2 & 7);
          break;
      }
    }
    return ve2;
  }, fromJSON(J2) {
    return { sid: Re2(J2.sid) ? String(J2.sid) : "", identity: Re2(J2.identity) ? String(J2.identity) : "", state: Re2(J2.state) ? Te2(J2.state) : 0, tracks: Array.isArray(J2 == null ? void 0 : J2.tracks) ? J2.tracks.map((_e) => a420.TrackInfo.fromJSON(_e)) : [], metadata: Re2(J2.metadata) ? String(J2.metadata) : "", joinedAt: Re2(J2.joinedAt) ? Number(J2.joinedAt) : 0, name: Re2(J2.name) ? String(J2.name) : "", version: Re2(J2.version) ? Number(J2.version) : 0, permission: Re2(J2.permission) ? a420.ParticipantPermission.fromJSON(J2.permission) : void 0, region: Re2(J2.region) ? String(J2.region) : "", isPublisher: Re2(J2.isPublisher) ? !!J2.isPublisher : false };
  }, toJSON(J2) {
    const _e = {};
    return J2.sid !== void 0 && (_e.sid = J2.sid), J2.identity !== void 0 && (_e.identity = J2.identity), J2.state !== void 0 && (_e.state = q2(J2.state)), J2.tracks ? _e.tracks = J2.tracks.map((ue2) => ue2 ? a420.TrackInfo.toJSON(ue2) : void 0) : _e.tracks = [], J2.metadata !== void 0 && (_e.metadata = J2.metadata), J2.joinedAt !== void 0 && (_e.joinedAt = Math.round(J2.joinedAt)), J2.name !== void 0 && (_e.name = J2.name), J2.version !== void 0 && (_e.version = Math.round(J2.version)), J2.permission !== void 0 && (_e.permission = J2.permission ? a420.ParticipantPermission.toJSON(J2.permission) : void 0), J2.region !== void 0 && (_e.region = J2.region), J2.isPublisher !== void 0 && (_e.isPublisher = J2.isPublisher), _e;
  }, fromPartial(J2) {
    var _e, ue2, ce2, ve2, Ce2, Be2, He2, Ve2, Ze2, Ke2;
    const U2 = te2();
    return U2.sid = (_e = J2.sid) !== null && _e !== void 0 ? _e : "", U2.identity = (ue2 = J2.identity) !== null && ue2 !== void 0 ? ue2 : "", U2.state = (ce2 = J2.state) !== null && ce2 !== void 0 ? ce2 : 0, U2.tracks = ((ve2 = J2.tracks) === null || ve2 === void 0 ? void 0 : ve2.map((se2) => a420.TrackInfo.fromPartial(se2))) || [], U2.metadata = (Ce2 = J2.metadata) !== null && Ce2 !== void 0 ? Ce2 : "", U2.joinedAt = (Be2 = J2.joinedAt) !== null && Be2 !== void 0 ? Be2 : 0, U2.name = (He2 = J2.name) !== null && He2 !== void 0 ? He2 : "", U2.version = (Ve2 = J2.version) !== null && Ve2 !== void 0 ? Ve2 : 0, U2.permission = J2.permission !== void 0 && J2.permission !== null ? a420.ParticipantPermission.fromPartial(J2.permission) : void 0, U2.region = (Ze2 = J2.region) !== null && Ze2 !== void 0 ? Ze2 : "", U2.isPublisher = (Ke2 = J2.isPublisher) !== null && Ke2 !== void 0 ? Ke2 : false, U2;
  } };
  function me2() {
    return { mimeType: "", mid: "", cid: "", layers: [] };
  }
  a420.SimulcastCodecInfo = { encode(J2, _e = l2.default.Writer.create()) {
    J2.mimeType !== "" && _e.uint32(10).string(J2.mimeType), J2.mid !== "" && _e.uint32(18).string(J2.mid), J2.cid !== "" && _e.uint32(26).string(J2.cid);
    for (const ue2 of J2.layers)
      a420.VideoLayer.encode(ue2, _e.uint32(34).fork()).ldelim();
    return _e;
  }, decode(J2, _e) {
    const ue2 = J2 instanceof l2.default.Reader ? J2 : new l2.default.Reader(J2);
    let ce2 = _e === void 0 ? ue2.len : ue2.pos + _e;
    const ve2 = me2();
    for (; ue2.pos < ce2; ) {
      const Ce2 = ue2.uint32();
      switch (Ce2 >>> 3) {
        case 1:
          ve2.mimeType = ue2.string();
          break;
        case 2:
          ve2.mid = ue2.string();
          break;
        case 3:
          ve2.cid = ue2.string();
          break;
        case 4:
          ve2.layers.push(a420.VideoLayer.decode(ue2, ue2.uint32()));
          break;
        default:
          ue2.skipType(Ce2 & 7);
          break;
      }
    }
    return ve2;
  }, fromJSON(J2) {
    return { mimeType: Re2(J2.mimeType) ? String(J2.mimeType) : "", mid: Re2(J2.mid) ? String(J2.mid) : "", cid: Re2(J2.cid) ? String(J2.cid) : "", layers: Array.isArray(J2 == null ? void 0 : J2.layers) ? J2.layers.map((_e) => a420.VideoLayer.fromJSON(_e)) : [] };
  }, toJSON(J2) {
    const _e = {};
    return J2.mimeType !== void 0 && (_e.mimeType = J2.mimeType), J2.mid !== void 0 && (_e.mid = J2.mid), J2.cid !== void 0 && (_e.cid = J2.cid), J2.layers ? _e.layers = J2.layers.map((ue2) => ue2 ? a420.VideoLayer.toJSON(ue2) : void 0) : _e.layers = [], _e;
  }, fromPartial(J2) {
    var _e, ue2, ce2, ve2;
    const Ce2 = me2();
    return Ce2.mimeType = (_e = J2.mimeType) !== null && _e !== void 0 ? _e : "", Ce2.mid = (ue2 = J2.mid) !== null && ue2 !== void 0 ? ue2 : "", Ce2.cid = (ce2 = J2.cid) !== null && ce2 !== void 0 ? ce2 : "", Ce2.layers = ((ve2 = J2.layers) === null || ve2 === void 0 ? void 0 : ve2.map((Be2) => a420.VideoLayer.fromPartial(Be2))) || [], Ce2;
  } };
  function Ie2() {
    return { sid: "", type: 0, name: "", muted: false, width: 0, height: 0, simulcast: false, disableDtx: false, source: 0, layers: [], mimeType: "", mid: "", codecs: [], stereo: false, disableRed: false };
  }
  a420.TrackInfo = { encode(J2, _e = l2.default.Writer.create()) {
    J2.sid !== "" && _e.uint32(10).string(J2.sid), J2.type !== 0 && _e.uint32(16).int32(J2.type), J2.name !== "" && _e.uint32(26).string(J2.name), J2.muted === true && _e.uint32(32).bool(J2.muted), J2.width !== 0 && _e.uint32(40).uint32(J2.width), J2.height !== 0 && _e.uint32(48).uint32(J2.height), J2.simulcast === true && _e.uint32(56).bool(J2.simulcast), J2.disableDtx === true && _e.uint32(64).bool(J2.disableDtx), J2.source !== 0 && _e.uint32(72).int32(J2.source);
    for (const ue2 of J2.layers)
      a420.VideoLayer.encode(ue2, _e.uint32(82).fork()).ldelim();
    J2.mimeType !== "" && _e.uint32(90).string(J2.mimeType), J2.mid !== "" && _e.uint32(98).string(J2.mid);
    for (const ue2 of J2.codecs)
      a420.SimulcastCodecInfo.encode(ue2, _e.uint32(106).fork()).ldelim();
    return J2.stereo === true && _e.uint32(112).bool(J2.stereo), J2.disableRed === true && _e.uint32(120).bool(J2.disableRed), _e;
  }, decode(J2, _e) {
    const ue2 = J2 instanceof l2.default.Reader ? J2 : new l2.default.Reader(J2);
    let ce2 = _e === void 0 ? ue2.len : ue2.pos + _e;
    const ve2 = Ie2();
    for (; ue2.pos < ce2; ) {
      const Ce2 = ue2.uint32();
      switch (Ce2 >>> 3) {
        case 1:
          ve2.sid = ue2.string();
          break;
        case 2:
          ve2.type = ue2.int32();
          break;
        case 3:
          ve2.name = ue2.string();
          break;
        case 4:
          ve2.muted = ue2.bool();
          break;
        case 5:
          ve2.width = ue2.uint32();
          break;
        case 6:
          ve2.height = ue2.uint32();
          break;
        case 7:
          ve2.simulcast = ue2.bool();
          break;
        case 8:
          ve2.disableDtx = ue2.bool();
          break;
        case 9:
          ve2.source = ue2.int32();
          break;
        case 10:
          ve2.layers.push(a420.VideoLayer.decode(ue2, ue2.uint32()));
          break;
        case 11:
          ve2.mimeType = ue2.string();
          break;
        case 12:
          ve2.mid = ue2.string();
          break;
        case 13:
          ve2.codecs.push(a420.SimulcastCodecInfo.decode(ue2, ue2.uint32()));
          break;
        case 14:
          ve2.stereo = ue2.bool();
          break;
        case 15:
          ve2.disableRed = ue2.bool();
          break;
        default:
          ue2.skipType(Ce2 & 7);
          break;
      }
    }
    return ve2;
  }, fromJSON(J2) {
    return { sid: Re2(J2.sid) ? String(J2.sid) : "", type: Re2(J2.type) ? _(J2.type) : 0, name: Re2(J2.name) ? String(J2.name) : "", muted: Re2(J2.muted) ? !!J2.muted : false, width: Re2(J2.width) ? Number(J2.width) : 0, height: Re2(J2.height) ? Number(J2.height) : 0, simulcast: Re2(J2.simulcast) ? !!J2.simulcast : false, disableDtx: Re2(J2.disableDtx) ? !!J2.disableDtx : false, source: Re2(J2.source) ? $(J2.source) : 0, layers: Array.isArray(J2 == null ? void 0 : J2.layers) ? J2.layers.map((_e) => a420.VideoLayer.fromJSON(_e)) : [], mimeType: Re2(J2.mimeType) ? String(J2.mimeType) : "", mid: Re2(J2.mid) ? String(J2.mid) : "", codecs: Array.isArray(J2 == null ? void 0 : J2.codecs) ? J2.codecs.map((_e) => a420.SimulcastCodecInfo.fromJSON(_e)) : [], stereo: Re2(J2.stereo) ? !!J2.stereo : false, disableRed: Re2(J2.disableRed) ? !!J2.disableRed : false };
  }, toJSON(J2) {
    const _e = {};
    return J2.sid !== void 0 && (_e.sid = J2.sid), J2.type !== void 0 && (_e.type = I2(J2.type)), J2.name !== void 0 && (_e.name = J2.name), J2.muted !== void 0 && (_e.muted = J2.muted), J2.width !== void 0 && (_e.width = Math.round(J2.width)), J2.height !== void 0 && (_e.height = Math.round(J2.height)), J2.simulcast !== void 0 && (_e.simulcast = J2.simulcast), J2.disableDtx !== void 0 && (_e.disableDtx = J2.disableDtx), J2.source !== void 0 && (_e.source = F2(J2.source)), J2.layers ? _e.layers = J2.layers.map((ue2) => ue2 ? a420.VideoLayer.toJSON(ue2) : void 0) : _e.layers = [], J2.mimeType !== void 0 && (_e.mimeType = J2.mimeType), J2.mid !== void 0 && (_e.mid = J2.mid), J2.codecs ? _e.codecs = J2.codecs.map((ue2) => ue2 ? a420.SimulcastCodecInfo.toJSON(ue2) : void 0) : _e.codecs = [], J2.stereo !== void 0 && (_e.stereo = J2.stereo), J2.disableRed !== void 0 && (_e.disableRed = J2.disableRed), _e;
  }, fromPartial(J2) {
    var _e, ue2, ce2, ve2, Ce2, Be2, He2, Ve2, Ze2, Ke2, U2, se2, Se2, Ue2, De2;
    const Ye2 = Ie2();
    return Ye2.sid = (_e = J2.sid) !== null && _e !== void 0 ? _e : "", Ye2.type = (ue2 = J2.type) !== null && ue2 !== void 0 ? ue2 : 0, Ye2.name = (ce2 = J2.name) !== null && ce2 !== void 0 ? ce2 : "", Ye2.muted = (ve2 = J2.muted) !== null && ve2 !== void 0 ? ve2 : false, Ye2.width = (Ce2 = J2.width) !== null && Ce2 !== void 0 ? Ce2 : 0, Ye2.height = (Be2 = J2.height) !== null && Be2 !== void 0 ? Be2 : 0, Ye2.simulcast = (He2 = J2.simulcast) !== null && He2 !== void 0 ? He2 : false, Ye2.disableDtx = (Ve2 = J2.disableDtx) !== null && Ve2 !== void 0 ? Ve2 : false, Ye2.source = (Ze2 = J2.source) !== null && Ze2 !== void 0 ? Ze2 : 0, Ye2.layers = ((Ke2 = J2.layers) === null || Ke2 === void 0 ? void 0 : Ke2.map((Qe2) => a420.VideoLayer.fromPartial(Qe2))) || [], Ye2.mimeType = (U2 = J2.mimeType) !== null && U2 !== void 0 ? U2 : "", Ye2.mid = (se2 = J2.mid) !== null && se2 !== void 0 ? se2 : "", Ye2.codecs = ((Se2 = J2.codecs) === null || Se2 === void 0 ? void 0 : Se2.map((Qe2) => a420.SimulcastCodecInfo.fromPartial(Qe2))) || [], Ye2.stereo = (Ue2 = J2.stereo) !== null && Ue2 !== void 0 ? Ue2 : false, Ye2.disableRed = (De2 = J2.disableRed) !== null && De2 !== void 0 ? De2 : false, Ye2;
  } };
  function $e2() {
    return { quality: 0, width: 0, height: 0, bitrate: 0, ssrc: 0 };
  }
  a420.VideoLayer = { encode(J2, _e = l2.default.Writer.create()) {
    return J2.quality !== 0 && _e.uint32(8).int32(J2.quality), J2.width !== 0 && _e.uint32(16).uint32(J2.width), J2.height !== 0 && _e.uint32(24).uint32(J2.height), J2.bitrate !== 0 && _e.uint32(32).uint32(J2.bitrate), J2.ssrc !== 0 && _e.uint32(40).uint32(J2.ssrc), _e;
  }, decode(J2, _e) {
    const ue2 = J2 instanceof l2.default.Reader ? J2 : new l2.default.Reader(J2);
    let ce2 = _e === void 0 ? ue2.len : ue2.pos + _e;
    const ve2 = $e2();
    for (; ue2.pos < ce2; ) {
      const Ce2 = ue2.uint32();
      switch (Ce2 >>> 3) {
        case 1:
          ve2.quality = ue2.int32();
          break;
        case 2:
          ve2.width = ue2.uint32();
          break;
        case 3:
          ve2.height = ue2.uint32();
          break;
        case 4:
          ve2.bitrate = ue2.uint32();
          break;
        case 5:
          ve2.ssrc = ue2.uint32();
          break;
        default:
          ue2.skipType(Ce2 & 7);
          break;
      }
    }
    return ve2;
  }, fromJSON(J2) {
    return { quality: Re2(J2.quality) ? j(J2.quality) : 0, width: Re2(J2.width) ? Number(J2.width) : 0, height: Re2(J2.height) ? Number(J2.height) : 0, bitrate: Re2(J2.bitrate) ? Number(J2.bitrate) : 0, ssrc: Re2(J2.ssrc) ? Number(J2.ssrc) : 0 };
  }, toJSON(J2) {
    const _e = {};
    return J2.quality !== void 0 && (_e.quality = ee2(J2.quality)), J2.width !== void 0 && (_e.width = Math.round(J2.width)), J2.height !== void 0 && (_e.height = Math.round(J2.height)), J2.bitrate !== void 0 && (_e.bitrate = Math.round(J2.bitrate)), J2.ssrc !== void 0 && (_e.ssrc = Math.round(J2.ssrc)), _e;
  }, fromPartial(J2) {
    var _e, ue2, ce2, ve2, Ce2;
    const Be2 = $e2();
    return Be2.quality = (_e = J2.quality) !== null && _e !== void 0 ? _e : 0, Be2.width = (ue2 = J2.width) !== null && ue2 !== void 0 ? ue2 : 0, Be2.height = (ce2 = J2.height) !== null && ce2 !== void 0 ? ce2 : 0, Be2.bitrate = (ve2 = J2.bitrate) !== null && ve2 !== void 0 ? ve2 : 0, Be2.ssrc = (Ce2 = J2.ssrc) !== null && Ce2 !== void 0 ? Ce2 : 0, Be2;
  } };
  function ye2() {
    return { kind: 0, user: void 0, speaker: void 0 };
  }
  a420.DataPacket = { encode(J2, _e = l2.default.Writer.create()) {
    return J2.kind !== 0 && _e.uint32(8).int32(J2.kind), J2.user !== void 0 && a420.UserPacket.encode(J2.user, _e.uint32(18).fork()).ldelim(), J2.speaker !== void 0 && a420.ActiveSpeakerUpdate.encode(J2.speaker, _e.uint32(26).fork()).ldelim(), _e;
  }, decode(J2, _e) {
    const ue2 = J2 instanceof l2.default.Reader ? J2 : new l2.default.Reader(J2);
    let ce2 = _e === void 0 ? ue2.len : ue2.pos + _e;
    const ve2 = ye2();
    for (; ue2.pos < ce2; ) {
      const Ce2 = ue2.uint32();
      switch (Ce2 >>> 3) {
        case 1:
          ve2.kind = ue2.int32();
          break;
        case 2:
          ve2.user = a420.UserPacket.decode(ue2, ue2.uint32());
          break;
        case 3:
          ve2.speaker = a420.ActiveSpeakerUpdate.decode(ue2, ue2.uint32());
          break;
        default:
          ue2.skipType(Ce2 & 7);
          break;
      }
    }
    return ve2;
  }, fromJSON(J2) {
    return { kind: Re2(J2.kind) ? C2(J2.kind) : 0, user: Re2(J2.user) ? a420.UserPacket.fromJSON(J2.user) : void 0, speaker: Re2(J2.speaker) ? a420.ActiveSpeakerUpdate.fromJSON(J2.speaker) : void 0 };
  }, toJSON(J2) {
    const _e = {};
    return J2.kind !== void 0 && (_e.kind = b(J2.kind)), J2.user !== void 0 && (_e.user = J2.user ? a420.UserPacket.toJSON(J2.user) : void 0), J2.speaker !== void 0 && (_e.speaker = J2.speaker ? a420.ActiveSpeakerUpdate.toJSON(J2.speaker) : void 0), _e;
  }, fromPartial(J2) {
    var _e;
    const ue2 = ye2();
    return ue2.kind = (_e = J2.kind) !== null && _e !== void 0 ? _e : 0, ue2.user = J2.user !== void 0 && J2.user !== null ? a420.UserPacket.fromPartial(J2.user) : void 0, ue2.speaker = J2.speaker !== void 0 && J2.speaker !== null ? a420.ActiveSpeakerUpdate.fromPartial(J2.speaker) : void 0, ue2;
  } };
  function he2() {
    return { speakers: [] };
  }
  a420.ActiveSpeakerUpdate = { encode(J2, _e = l2.default.Writer.create()) {
    for (const ue2 of J2.speakers)
      a420.SpeakerInfo.encode(ue2, _e.uint32(10).fork()).ldelim();
    return _e;
  }, decode(J2, _e) {
    const ue2 = J2 instanceof l2.default.Reader ? J2 : new l2.default.Reader(J2);
    let ce2 = _e === void 0 ? ue2.len : ue2.pos + _e;
    const ve2 = he2();
    for (; ue2.pos < ce2; ) {
      const Ce2 = ue2.uint32();
      switch (Ce2 >>> 3) {
        case 1:
          ve2.speakers.push(a420.SpeakerInfo.decode(ue2, ue2.uint32()));
          break;
        default:
          ue2.skipType(Ce2 & 7);
          break;
      }
    }
    return ve2;
  }, fromJSON(J2) {
    return { speakers: Array.isArray(J2 == null ? void 0 : J2.speakers) ? J2.speakers.map((_e) => a420.SpeakerInfo.fromJSON(_e)) : [] };
  }, toJSON(J2) {
    const _e = {};
    return J2.speakers ? _e.speakers = J2.speakers.map((ue2) => ue2 ? a420.SpeakerInfo.toJSON(ue2) : void 0) : _e.speakers = [], _e;
  }, fromPartial(J2) {
    var _e;
    const ue2 = he2();
    return ue2.speakers = ((_e = J2.speakers) === null || _e === void 0 ? void 0 : _e.map((ce2) => a420.SpeakerInfo.fromPartial(ce2))) || [], ue2;
  } };
  function Me2() {
    return { sid: "", level: 0, active: false };
  }
  a420.SpeakerInfo = { encode(J2, _e = l2.default.Writer.create()) {
    return J2.sid !== "" && _e.uint32(10).string(J2.sid), J2.level !== 0 && _e.uint32(21).float(J2.level), J2.active === true && _e.uint32(24).bool(J2.active), _e;
  }, decode(J2, _e) {
    const ue2 = J2 instanceof l2.default.Reader ? J2 : new l2.default.Reader(J2);
    let ce2 = _e === void 0 ? ue2.len : ue2.pos + _e;
    const ve2 = Me2();
    for (; ue2.pos < ce2; ) {
      const Ce2 = ue2.uint32();
      switch (Ce2 >>> 3) {
        case 1:
          ve2.sid = ue2.string();
          break;
        case 2:
          ve2.level = ue2.float();
          break;
        case 3:
          ve2.active = ue2.bool();
          break;
        default:
          ue2.skipType(Ce2 & 7);
          break;
      }
    }
    return ve2;
  }, fromJSON(J2) {
    return { sid: Re2(J2.sid) ? String(J2.sid) : "", level: Re2(J2.level) ? Number(J2.level) : 0, active: Re2(J2.active) ? !!J2.active : false };
  }, toJSON(J2) {
    const _e = {};
    return J2.sid !== void 0 && (_e.sid = J2.sid), J2.level !== void 0 && (_e.level = J2.level), J2.active !== void 0 && (_e.active = J2.active), _e;
  }, fromPartial(J2) {
    var _e, ue2, ce2;
    const ve2 = Me2();
    return ve2.sid = (_e = J2.sid) !== null && _e !== void 0 ? _e : "", ve2.level = (ue2 = J2.level) !== null && ue2 !== void 0 ? ue2 : 0, ve2.active = (ce2 = J2.active) !== null && ce2 !== void 0 ? ce2 : false, ve2;
  } };
  function Ae2() {
    return { participantSid: "", payload: new Uint8Array(), destinationSids: [] };
  }
  a420.UserPacket = { encode(J2, _e = l2.default.Writer.create()) {
    J2.participantSid !== "" && _e.uint32(10).string(J2.participantSid), J2.payload.length !== 0 && _e.uint32(18).bytes(J2.payload);
    for (const ue2 of J2.destinationSids)
      _e.uint32(26).string(ue2);
    return _e;
  }, decode(J2, _e) {
    const ue2 = J2 instanceof l2.default.Reader ? J2 : new l2.default.Reader(J2);
    let ce2 = _e === void 0 ? ue2.len : ue2.pos + _e;
    const ve2 = Ae2();
    for (; ue2.pos < ce2; ) {
      const Ce2 = ue2.uint32();
      switch (Ce2 >>> 3) {
        case 1:
          ve2.participantSid = ue2.string();
          break;
        case 2:
          ve2.payload = ue2.bytes();
          break;
        case 3:
          ve2.destinationSids.push(ue2.string());
          break;
        default:
          ue2.skipType(Ce2 & 7);
          break;
      }
    }
    return ve2;
  }, fromJSON(J2) {
    return { participantSid: Re2(J2.participantSid) ? String(J2.participantSid) : "", payload: Re2(J2.payload) ? yt(J2.payload) : new Uint8Array(), destinationSids: Array.isArray(J2 == null ? void 0 : J2.destinationSids) ? J2.destinationSids.map((_e) => String(_e)) : [] };
  }, toJSON(J2) {
    const _e = {};
    return J2.participantSid !== void 0 && (_e.participantSid = J2.participantSid), J2.payload !== void 0 && (_e.payload = Xe2(J2.payload !== void 0 ? J2.payload : new Uint8Array())), J2.destinationSids ? _e.destinationSids = J2.destinationSids.map((ue2) => ue2) : _e.destinationSids = [], _e;
  }, fromPartial(J2) {
    var _e, ue2, ce2;
    const ve2 = Ae2();
    return ve2.participantSid = (_e = J2.participantSid) !== null && _e !== void 0 ? _e : "", ve2.payload = (ue2 = J2.payload) !== null && ue2 !== void 0 ? ue2 : new Uint8Array(), ve2.destinationSids = ((ce2 = J2.destinationSids) === null || ce2 === void 0 ? void 0 : ce2.map((Ce2) => Ce2)) || [], ve2;
  } };
  function xe2() {
    return { participantSid: "", trackSids: [] };
  }
  a420.ParticipantTracks = { encode(J2, _e = l2.default.Writer.create()) {
    J2.participantSid !== "" && _e.uint32(10).string(J2.participantSid);
    for (const ue2 of J2.trackSids)
      _e.uint32(18).string(ue2);
    return _e;
  }, decode(J2, _e) {
    const ue2 = J2 instanceof l2.default.Reader ? J2 : new l2.default.Reader(J2);
    let ce2 = _e === void 0 ? ue2.len : ue2.pos + _e;
    const ve2 = xe2();
    for (; ue2.pos < ce2; ) {
      const Ce2 = ue2.uint32();
      switch (Ce2 >>> 3) {
        case 1:
          ve2.participantSid = ue2.string();
          break;
        case 2:
          ve2.trackSids.push(ue2.string());
          break;
        default:
          ue2.skipType(Ce2 & 7);
          break;
      }
    }
    return ve2;
  }, fromJSON(J2) {
    return { participantSid: Re2(J2.participantSid) ? String(J2.participantSid) : "", trackSids: Array.isArray(J2 == null ? void 0 : J2.trackSids) ? J2.trackSids.map((_e) => String(_e)) : [] };
  }, toJSON(J2) {
    const _e = {};
    return J2.participantSid !== void 0 && (_e.participantSid = J2.participantSid), J2.trackSids ? _e.trackSids = J2.trackSids.map((ue2) => ue2) : _e.trackSids = [], _e;
  }, fromPartial(J2) {
    var _e, ue2;
    const ce2 = xe2();
    return ce2.participantSid = (_e = J2.participantSid) !== null && _e !== void 0 ? _e : "", ce2.trackSids = ((ue2 = J2.trackSids) === null || ue2 === void 0 ? void 0 : ue2.map((ve2) => ve2)) || [], ce2;
  } };
  function ae2() {
    return { edition: 0, version: "", protocol: 0, region: "", nodeId: "", debugInfo: "" };
  }
  a420.ServerInfo = { encode(J2, _e = l2.default.Writer.create()) {
    return J2.edition !== 0 && _e.uint32(8).int32(J2.edition), J2.version !== "" && _e.uint32(18).string(J2.version), J2.protocol !== 0 && _e.uint32(24).int32(J2.protocol), J2.region !== "" && _e.uint32(34).string(J2.region), J2.nodeId !== "" && _e.uint32(42).string(J2.nodeId), J2.debugInfo !== "" && _e.uint32(50).string(J2.debugInfo), _e;
  }, decode(J2, _e) {
    const ue2 = J2 instanceof l2.default.Reader ? J2 : new l2.default.Reader(J2);
    let ce2 = _e === void 0 ? ue2.len : ue2.pos + _e;
    const ve2 = ae2();
    for (; ue2.pos < ce2; ) {
      const Ce2 = ue2.uint32();
      switch (Ce2 >>> 3) {
        case 1:
          ve2.edition = ue2.int32();
          break;
        case 2:
          ve2.version = ue2.string();
          break;
        case 3:
          ve2.protocol = ue2.int32();
          break;
        case 4:
          ve2.region = ue2.string();
          break;
        case 5:
          ve2.nodeId = ue2.string();
          break;
        case 6:
          ve2.debugInfo = ue2.string();
          break;
        default:
          ue2.skipType(Ce2 & 7);
          break;
      }
    }
    return ve2;
  }, fromJSON(J2) {
    return { edition: Re2(J2.edition) ? k(J2.edition) : 0, version: Re2(J2.version) ? String(J2.version) : "", protocol: Re2(J2.protocol) ? Number(J2.protocol) : 0, region: Re2(J2.region) ? String(J2.region) : "", nodeId: Re2(J2.nodeId) ? String(J2.nodeId) : "", debugInfo: Re2(J2.debugInfo) ? String(J2.debugInfo) : "" };
  }, toJSON(J2) {
    const _e = {};
    return J2.edition !== void 0 && (_e.edition = O2(J2.edition)), J2.version !== void 0 && (_e.version = J2.version), J2.protocol !== void 0 && (_e.protocol = Math.round(J2.protocol)), J2.region !== void 0 && (_e.region = J2.region), J2.nodeId !== void 0 && (_e.nodeId = J2.nodeId), J2.debugInfo !== void 0 && (_e.debugInfo = J2.debugInfo), _e;
  }, fromPartial(J2) {
    var _e, ue2, ce2, ve2, Ce2, Be2;
    const He2 = ae2();
    return He2.edition = (_e = J2.edition) !== null && _e !== void 0 ? _e : 0, He2.version = (ue2 = J2.version) !== null && ue2 !== void 0 ? ue2 : "", He2.protocol = (ce2 = J2.protocol) !== null && ce2 !== void 0 ? ce2 : 0, He2.region = (ve2 = J2.region) !== null && ve2 !== void 0 ? ve2 : "", He2.nodeId = (Ce2 = J2.nodeId) !== null && Ce2 !== void 0 ? Ce2 : "", He2.debugInfo = (Be2 = J2.debugInfo) !== null && Be2 !== void 0 ? Be2 : "", He2;
  } };
  function N2() {
    return { sdk: 0, version: "", protocol: 0, os: "", osVersion: "", deviceModel: "", browser: "", browserVersion: "", address: "", network: "" };
  }
  a420.ClientInfo = { encode(J2, _e = l2.default.Writer.create()) {
    return J2.sdk !== 0 && _e.uint32(8).int32(J2.sdk), J2.version !== "" && _e.uint32(18).string(J2.version), J2.protocol !== 0 && _e.uint32(24).int32(J2.protocol), J2.os !== "" && _e.uint32(34).string(J2.os), J2.osVersion !== "" && _e.uint32(42).string(J2.osVersion), J2.deviceModel !== "" && _e.uint32(50).string(J2.deviceModel), J2.browser !== "" && _e.uint32(58).string(J2.browser), J2.browserVersion !== "" && _e.uint32(66).string(J2.browserVersion), J2.address !== "" && _e.uint32(74).string(J2.address), J2.network !== "" && _e.uint32(82).string(J2.network), _e;
  }, decode(J2, _e) {
    const ue2 = J2 instanceof l2.default.Reader ? J2 : new l2.default.Reader(J2);
    let ce2 = _e === void 0 ? ue2.len : ue2.pos + _e;
    const ve2 = N2();
    for (; ue2.pos < ce2; ) {
      const Ce2 = ue2.uint32();
      switch (Ce2 >>> 3) {
        case 1:
          ve2.sdk = ue2.int32();
          break;
        case 2:
          ve2.version = ue2.string();
          break;
        case 3:
          ve2.protocol = ue2.int32();
          break;
        case 4:
          ve2.os = ue2.string();
          break;
        case 5:
          ve2.osVersion = ue2.string();
          break;
        case 6:
          ve2.deviceModel = ue2.string();
          break;
        case 7:
          ve2.browser = ue2.string();
          break;
        case 8:
          ve2.browserVersion = ue2.string();
          break;
        case 9:
          ve2.address = ue2.string();
          break;
        case 10:
          ve2.network = ue2.string();
          break;
        default:
          ue2.skipType(Ce2 & 7);
          break;
      }
    }
    return ve2;
  }, fromJSON(J2) {
    return { sdk: Re2(J2.sdk) ? x2(J2.sdk) : 0, version: Re2(J2.version) ? String(J2.version) : "", protocol: Re2(J2.protocol) ? Number(J2.protocol) : 0, os: Re2(J2.os) ? String(J2.os) : "", osVersion: Re2(J2.osVersion) ? String(J2.osVersion) : "", deviceModel: Re2(J2.deviceModel) ? String(J2.deviceModel) : "", browser: Re2(J2.browser) ? String(J2.browser) : "", browserVersion: Re2(J2.browserVersion) ? String(J2.browserVersion) : "", address: Re2(J2.address) ? String(J2.address) : "", network: Re2(J2.network) ? String(J2.network) : "" };
  }, toJSON(J2) {
    const _e = {};
    return J2.sdk !== void 0 && (_e.sdk = Y2(J2.sdk)), J2.version !== void 0 && (_e.version = J2.version), J2.protocol !== void 0 && (_e.protocol = Math.round(J2.protocol)), J2.os !== void 0 && (_e.os = J2.os), J2.osVersion !== void 0 && (_e.osVersion = J2.osVersion), J2.deviceModel !== void 0 && (_e.deviceModel = J2.deviceModel), J2.browser !== void 0 && (_e.browser = J2.browser), J2.browserVersion !== void 0 && (_e.browserVersion = J2.browserVersion), J2.address !== void 0 && (_e.address = J2.address), J2.network !== void 0 && (_e.network = J2.network), _e;
  }, fromPartial(J2) {
    var _e, ue2, ce2, ve2, Ce2, Be2, He2, Ve2, Ze2, Ke2;
    const U2 = N2();
    return U2.sdk = (_e = J2.sdk) !== null && _e !== void 0 ? _e : 0, U2.version = (ue2 = J2.version) !== null && ue2 !== void 0 ? ue2 : "", U2.protocol = (ce2 = J2.protocol) !== null && ce2 !== void 0 ? ce2 : 0, U2.os = (ve2 = J2.os) !== null && ve2 !== void 0 ? ve2 : "", U2.osVersion = (Ce2 = J2.osVersion) !== null && Ce2 !== void 0 ? Ce2 : "", U2.deviceModel = (Be2 = J2.deviceModel) !== null && Be2 !== void 0 ? Be2 : "", U2.browser = (He2 = J2.browser) !== null && He2 !== void 0 ? He2 : "", U2.browserVersion = (Ve2 = J2.browserVersion) !== null && Ve2 !== void 0 ? Ve2 : "", U2.address = (Ze2 = J2.address) !== null && Ze2 !== void 0 ? Ze2 : "", U2.network = (Ke2 = J2.network) !== null && Ke2 !== void 0 ? Ke2 : "", U2;
  } };
  function re2() {
    return { video: void 0, screen: void 0, resumeConnection: 0, disabledCodecs: void 0, forceRelay: 0 };
  }
  a420.ClientConfiguration = { encode(J2, _e = l2.default.Writer.create()) {
    return J2.video !== void 0 && a420.VideoConfiguration.encode(J2.video, _e.uint32(10).fork()).ldelim(), J2.screen !== void 0 && a420.VideoConfiguration.encode(J2.screen, _e.uint32(18).fork()).ldelim(), J2.resumeConnection !== 0 && _e.uint32(24).int32(J2.resumeConnection), J2.disabledCodecs !== void 0 && a420.DisabledCodecs.encode(J2.disabledCodecs, _e.uint32(34).fork()).ldelim(), J2.forceRelay !== 0 && _e.uint32(40).int32(J2.forceRelay), _e;
  }, decode(J2, _e) {
    const ue2 = J2 instanceof l2.default.Reader ? J2 : new l2.default.Reader(J2);
    let ce2 = _e === void 0 ? ue2.len : ue2.pos + _e;
    const ve2 = re2();
    for (; ue2.pos < ce2; ) {
      const Ce2 = ue2.uint32();
      switch (Ce2 >>> 3) {
        case 1:
          ve2.video = a420.VideoConfiguration.decode(ue2, ue2.uint32());
          break;
        case 2:
          ve2.screen = a420.VideoConfiguration.decode(ue2, ue2.uint32());
          break;
        case 3:
          ve2.resumeConnection = ue2.int32();
          break;
        case 4:
          ve2.disabledCodecs = a420.DisabledCodecs.decode(ue2, ue2.uint32());
          break;
        case 5:
          ve2.forceRelay = ue2.int32();
          break;
        default:
          ue2.skipType(Ce2 & 7);
          break;
      }
    }
    return ve2;
  }, fromJSON(J2) {
    return { video: Re2(J2.video) ? a420.VideoConfiguration.fromJSON(J2.video) : void 0, screen: Re2(J2.screen) ? a420.VideoConfiguration.fromJSON(J2.screen) : void 0, resumeConnection: Re2(J2.resumeConnection) ? Z2(J2.resumeConnection) : 0, disabledCodecs: Re2(J2.disabledCodecs) ? a420.DisabledCodecs.fromJSON(J2.disabledCodecs) : void 0, forceRelay: Re2(J2.forceRelay) ? Z2(J2.forceRelay) : 0 };
  }, toJSON(J2) {
    const _e = {};
    return J2.video !== void 0 && (_e.video = J2.video ? a420.VideoConfiguration.toJSON(J2.video) : void 0), J2.screen !== void 0 && (_e.screen = J2.screen ? a420.VideoConfiguration.toJSON(J2.screen) : void 0), J2.resumeConnection !== void 0 && (_e.resumeConnection = de2(J2.resumeConnection)), J2.disabledCodecs !== void 0 && (_e.disabledCodecs = J2.disabledCodecs ? a420.DisabledCodecs.toJSON(J2.disabledCodecs) : void 0), J2.forceRelay !== void 0 && (_e.forceRelay = de2(J2.forceRelay)), _e;
  }, fromPartial(J2) {
    var _e, ue2;
    const ce2 = re2();
    return ce2.video = J2.video !== void 0 && J2.video !== null ? a420.VideoConfiguration.fromPartial(J2.video) : void 0, ce2.screen = J2.screen !== void 0 && J2.screen !== null ? a420.VideoConfiguration.fromPartial(J2.screen) : void 0, ce2.resumeConnection = (_e = J2.resumeConnection) !== null && _e !== void 0 ? _e : 0, ce2.disabledCodecs = J2.disabledCodecs !== void 0 && J2.disabledCodecs !== null ? a420.DisabledCodecs.fromPartial(J2.disabledCodecs) : void 0, ce2.forceRelay = (ue2 = J2.forceRelay) !== null && ue2 !== void 0 ? ue2 : 0, ce2;
  } };
  function fe2() {
    return { hardwareEncoder: 0 };
  }
  a420.VideoConfiguration = { encode(J2, _e = l2.default.Writer.create()) {
    return J2.hardwareEncoder !== 0 && _e.uint32(8).int32(J2.hardwareEncoder), _e;
  }, decode(J2, _e) {
    const ue2 = J2 instanceof l2.default.Reader ? J2 : new l2.default.Reader(J2);
    let ce2 = _e === void 0 ? ue2.len : ue2.pos + _e;
    const ve2 = fe2();
    for (; ue2.pos < ce2; ) {
      const Ce2 = ue2.uint32();
      switch (Ce2 >>> 3) {
        case 1:
          ve2.hardwareEncoder = ue2.int32();
          break;
        default:
          ue2.skipType(Ce2 & 7);
          break;
      }
    }
    return ve2;
  }, fromJSON(J2) {
    return { hardwareEncoder: Re2(J2.hardwareEncoder) ? Z2(J2.hardwareEncoder) : 0 };
  }, toJSON(J2) {
    const _e = {};
    return J2.hardwareEncoder !== void 0 && (_e.hardwareEncoder = de2(J2.hardwareEncoder)), _e;
  }, fromPartial(J2) {
    var _e;
    const ue2 = fe2();
    return ue2.hardwareEncoder = (_e = J2.hardwareEncoder) !== null && _e !== void 0 ? _e : 0, ue2;
  } };
  function Ne2() {
    return { codecs: [] };
  }
  a420.DisabledCodecs = { encode(J2, _e = l2.default.Writer.create()) {
    for (const ue2 of J2.codecs)
      a420.Codec.encode(ue2, _e.uint32(10).fork()).ldelim();
    return _e;
  }, decode(J2, _e) {
    const ue2 = J2 instanceof l2.default.Reader ? J2 : new l2.default.Reader(J2);
    let ce2 = _e === void 0 ? ue2.len : ue2.pos + _e;
    const ve2 = Ne2();
    for (; ue2.pos < ce2; ) {
      const Ce2 = ue2.uint32();
      switch (Ce2 >>> 3) {
        case 1:
          ve2.codecs.push(a420.Codec.decode(ue2, ue2.uint32()));
          break;
        default:
          ue2.skipType(Ce2 & 7);
          break;
      }
    }
    return ve2;
  }, fromJSON(J2) {
    return { codecs: Array.isArray(J2 == null ? void 0 : J2.codecs) ? J2.codecs.map((_e) => a420.Codec.fromJSON(_e)) : [] };
  }, toJSON(J2) {
    const _e = {};
    return J2.codecs ? _e.codecs = J2.codecs.map((ue2) => ue2 ? a420.Codec.toJSON(ue2) : void 0) : _e.codecs = [], _e;
  }, fromPartial(J2) {
    var _e;
    const ue2 = Ne2();
    return ue2.codecs = ((_e = J2.codecs) === null || _e === void 0 ? void 0 : _e.map((ce2) => a420.Codec.fromPartial(ce2))) || [], ue2;
  } };
  function Oe2() {
    return { startTime: void 0, endTime: void 0, duration: 0, packets: 0, packetRate: 0, bytes: 0, headerBytes: 0, bitrate: 0, packetsLost: 0, packetLossRate: 0, packetLossPercentage: 0, packetsDuplicate: 0, packetDuplicateRate: 0, bytesDuplicate: 0, headerBytesDuplicate: 0, bitrateDuplicate: 0, packetsPadding: 0, packetPaddingRate: 0, bytesPadding: 0, headerBytesPadding: 0, bitratePadding: 0, packetsOutOfOrder: 0, frames: 0, frameRate: 0, jitterCurrent: 0, jitterMax: 0, gapHistogram: {}, nacks: 0, nackAcks: 0, nackMisses: 0, nackRepeated: 0, plis: 0, lastPli: void 0, firs: 0, lastFir: void 0, rttCurrent: 0, rttMax: 0, keyFrames: 0, lastKeyFrame: void 0, layerLockPlis: 0, lastLayerLockPli: void 0 };
  }
  a420.RTPStats = { encode(J2, _e = l2.default.Writer.create()) {
    return J2.startTime !== void 0 && v2.Timestamp.encode(Ge2(J2.startTime), _e.uint32(10).fork()).ldelim(), J2.endTime !== void 0 && v2.Timestamp.encode(Ge2(J2.endTime), _e.uint32(18).fork()).ldelim(), J2.duration !== 0 && _e.uint32(25).double(J2.duration), J2.packets !== 0 && _e.uint32(32).uint32(J2.packets), J2.packetRate !== 0 && _e.uint32(41).double(J2.packetRate), J2.bytes !== 0 && _e.uint32(48).uint64(J2.bytes), J2.headerBytes !== 0 && _e.uint32(312).uint64(J2.headerBytes), J2.bitrate !== 0 && _e.uint32(57).double(J2.bitrate), J2.packetsLost !== 0 && _e.uint32(64).uint32(J2.packetsLost), J2.packetLossRate !== 0 && _e.uint32(73).double(J2.packetLossRate), J2.packetLossPercentage !== 0 && _e.uint32(85).float(J2.packetLossPercentage), J2.packetsDuplicate !== 0 && _e.uint32(88).uint32(J2.packetsDuplicate), J2.packetDuplicateRate !== 0 && _e.uint32(97).double(J2.packetDuplicateRate), J2.bytesDuplicate !== 0 && _e.uint32(104).uint64(J2.bytesDuplicate), J2.headerBytesDuplicate !== 0 && _e.uint32(320).uint64(J2.headerBytesDuplicate), J2.bitrateDuplicate !== 0 && _e.uint32(113).double(J2.bitrateDuplicate), J2.packetsPadding !== 0 && _e.uint32(120).uint32(J2.packetsPadding), J2.packetPaddingRate !== 0 && _e.uint32(129).double(J2.packetPaddingRate), J2.bytesPadding !== 0 && _e.uint32(136).uint64(J2.bytesPadding), J2.headerBytesPadding !== 0 && _e.uint32(328).uint64(J2.headerBytesPadding), J2.bitratePadding !== 0 && _e.uint32(145).double(J2.bitratePadding), J2.packetsOutOfOrder !== 0 && _e.uint32(152).uint32(J2.packetsOutOfOrder), J2.frames !== 0 && _e.uint32(160).uint32(J2.frames), J2.frameRate !== 0 && _e.uint32(169).double(J2.frameRate), J2.jitterCurrent !== 0 && _e.uint32(177).double(J2.jitterCurrent), J2.jitterMax !== 0 && _e.uint32(185).double(J2.jitterMax), Object.entries(J2.gapHistogram).forEach(([ue2, ce2]) => {
      a420.RTPStats_GapHistogramEntry.encode({ key: ue2, value: ce2 }, _e.uint32(194).fork()).ldelim();
    }), J2.nacks !== 0 && _e.uint32(200).uint32(J2.nacks), J2.nackAcks !== 0 && _e.uint32(296).uint32(J2.nackAcks), J2.nackMisses !== 0 && _e.uint32(208).uint32(J2.nackMisses), J2.nackRepeated !== 0 && _e.uint32(304).uint32(J2.nackRepeated), J2.plis !== 0 && _e.uint32(216).uint32(J2.plis), J2.lastPli !== void 0 && v2.Timestamp.encode(Ge2(J2.lastPli), _e.uint32(226).fork()).ldelim(), J2.firs !== 0 && _e.uint32(232).uint32(J2.firs), J2.lastFir !== void 0 && v2.Timestamp.encode(Ge2(J2.lastFir), _e.uint32(242).fork()).ldelim(), J2.rttCurrent !== 0 && _e.uint32(248).uint32(J2.rttCurrent), J2.rttMax !== 0 && _e.uint32(256).uint32(J2.rttMax), J2.keyFrames !== 0 && _e.uint32(264).uint32(J2.keyFrames), J2.lastKeyFrame !== void 0 && v2.Timestamp.encode(Ge2(J2.lastKeyFrame), _e.uint32(274).fork()).ldelim(), J2.layerLockPlis !== 0 && _e.uint32(280).uint32(J2.layerLockPlis), J2.lastLayerLockPli !== void 0 && v2.Timestamp.encode(Ge2(J2.lastLayerLockPli), _e.uint32(290).fork()).ldelim(), _e;
  }, decode(J2, _e) {
    const ue2 = J2 instanceof l2.default.Reader ? J2 : new l2.default.Reader(J2);
    let ce2 = _e === void 0 ? ue2.len : ue2.pos + _e;
    const ve2 = Oe2();
    for (; ue2.pos < ce2; ) {
      const Ce2 = ue2.uint32();
      switch (Ce2 >>> 3) {
        case 1:
          ve2.startTime = V2(v2.Timestamp.decode(ue2, ue2.uint32()));
          break;
        case 2:
          ve2.endTime = V2(v2.Timestamp.decode(ue2, ue2.uint32()));
          break;
        case 3:
          ve2.duration = ue2.double();
          break;
        case 4:
          ve2.packets = ue2.uint32();
          break;
        case 5:
          ve2.packetRate = ue2.double();
          break;
        case 6:
          ve2.bytes = we2(ue2.uint64());
          break;
        case 39:
          ve2.headerBytes = we2(ue2.uint64());
          break;
        case 7:
          ve2.bitrate = ue2.double();
          break;
        case 8:
          ve2.packetsLost = ue2.uint32();
          break;
        case 9:
          ve2.packetLossRate = ue2.double();
          break;
        case 10:
          ve2.packetLossPercentage = ue2.float();
          break;
        case 11:
          ve2.packetsDuplicate = ue2.uint32();
          break;
        case 12:
          ve2.packetDuplicateRate = ue2.double();
          break;
        case 13:
          ve2.bytesDuplicate = we2(ue2.uint64());
          break;
        case 40:
          ve2.headerBytesDuplicate = we2(ue2.uint64());
          break;
        case 14:
          ve2.bitrateDuplicate = ue2.double();
          break;
        case 15:
          ve2.packetsPadding = ue2.uint32();
          break;
        case 16:
          ve2.packetPaddingRate = ue2.double();
          break;
        case 17:
          ve2.bytesPadding = we2(ue2.uint64());
          break;
        case 41:
          ve2.headerBytesPadding = we2(ue2.uint64());
          break;
        case 18:
          ve2.bitratePadding = ue2.double();
          break;
        case 19:
          ve2.packetsOutOfOrder = ue2.uint32();
          break;
        case 20:
          ve2.frames = ue2.uint32();
          break;
        case 21:
          ve2.frameRate = ue2.double();
          break;
        case 22:
          ve2.jitterCurrent = ue2.double();
          break;
        case 23:
          ve2.jitterMax = ue2.double();
          break;
        case 24:
          const Be2 = a420.RTPStats_GapHistogramEntry.decode(ue2, ue2.uint32());
          Be2.value !== void 0 && (ve2.gapHistogram[Be2.key] = Be2.value);
          break;
        case 25:
          ve2.nacks = ue2.uint32();
          break;
        case 37:
          ve2.nackAcks = ue2.uint32();
          break;
        case 26:
          ve2.nackMisses = ue2.uint32();
          break;
        case 38:
          ve2.nackRepeated = ue2.uint32();
          break;
        case 27:
          ve2.plis = ue2.uint32();
          break;
        case 28:
          ve2.lastPli = V2(v2.Timestamp.decode(ue2, ue2.uint32()));
          break;
        case 29:
          ve2.firs = ue2.uint32();
          break;
        case 30:
          ve2.lastFir = V2(v2.Timestamp.decode(ue2, ue2.uint32()));
          break;
        case 31:
          ve2.rttCurrent = ue2.uint32();
          break;
        case 32:
          ve2.rttMax = ue2.uint32();
          break;
        case 33:
          ve2.keyFrames = ue2.uint32();
          break;
        case 34:
          ve2.lastKeyFrame = V2(v2.Timestamp.decode(ue2, ue2.uint32()));
          break;
        case 35:
          ve2.layerLockPlis = ue2.uint32();
          break;
        case 36:
          ve2.lastLayerLockPli = V2(v2.Timestamp.decode(ue2, ue2.uint32()));
          break;
        default:
          ue2.skipType(Ce2 & 7);
          break;
      }
    }
    return ve2;
  }, fromJSON(J2) {
    return { startTime: Re2(J2.startTime) ? ge2(J2.startTime) : void 0, endTime: Re2(J2.endTime) ? ge2(J2.endTime) : void 0, duration: Re2(J2.duration) ? Number(J2.duration) : 0, packets: Re2(J2.packets) ? Number(J2.packets) : 0, packetRate: Re2(J2.packetRate) ? Number(J2.packetRate) : 0, bytes: Re2(J2.bytes) ? Number(J2.bytes) : 0, headerBytes: Re2(J2.headerBytes) ? Number(J2.headerBytes) : 0, bitrate: Re2(J2.bitrate) ? Number(J2.bitrate) : 0, packetsLost: Re2(J2.packetsLost) ? Number(J2.packetsLost) : 0, packetLossRate: Re2(J2.packetLossRate) ? Number(J2.packetLossRate) : 0, packetLossPercentage: Re2(J2.packetLossPercentage) ? Number(J2.packetLossPercentage) : 0, packetsDuplicate: Re2(J2.packetsDuplicate) ? Number(J2.packetsDuplicate) : 0, packetDuplicateRate: Re2(J2.packetDuplicateRate) ? Number(J2.packetDuplicateRate) : 0, bytesDuplicate: Re2(J2.bytesDuplicate) ? Number(J2.bytesDuplicate) : 0, headerBytesDuplicate: Re2(J2.headerBytesDuplicate) ? Number(J2.headerBytesDuplicate) : 0, bitrateDuplicate: Re2(J2.bitrateDuplicate) ? Number(J2.bitrateDuplicate) : 0, packetsPadding: Re2(J2.packetsPadding) ? Number(J2.packetsPadding) : 0, packetPaddingRate: Re2(J2.packetPaddingRate) ? Number(J2.packetPaddingRate) : 0, bytesPadding: Re2(J2.bytesPadding) ? Number(J2.bytesPadding) : 0, headerBytesPadding: Re2(J2.headerBytesPadding) ? Number(J2.headerBytesPadding) : 0, bitratePadding: Re2(J2.bitratePadding) ? Number(J2.bitratePadding) : 0, packetsOutOfOrder: Re2(J2.packetsOutOfOrder) ? Number(J2.packetsOutOfOrder) : 0, frames: Re2(J2.frames) ? Number(J2.frames) : 0, frameRate: Re2(J2.frameRate) ? Number(J2.frameRate) : 0, jitterCurrent: Re2(J2.jitterCurrent) ? Number(J2.jitterCurrent) : 0, jitterMax: Re2(J2.jitterMax) ? Number(J2.jitterMax) : 0, gapHistogram: We2(J2.gapHistogram) ? Object.entries(J2.gapHistogram).reduce((_e, [ue2, ce2]) => (_e[Number(ue2)] = Number(ce2), _e), {}) : {}, nacks: Re2(J2.nacks) ? Number(J2.nacks) : 0, nackAcks: Re2(J2.nackAcks) ? Number(J2.nackAcks) : 0, nackMisses: Re2(J2.nackMisses) ? Number(J2.nackMisses) : 0, nackRepeated: Re2(J2.nackRepeated) ? Number(J2.nackRepeated) : 0, plis: Re2(J2.plis) ? Number(J2.plis) : 0, lastPli: Re2(J2.lastPli) ? ge2(J2.lastPli) : void 0, firs: Re2(J2.firs) ? Number(J2.firs) : 0, lastFir: Re2(J2.lastFir) ? ge2(J2.lastFir) : void 0, rttCurrent: Re2(J2.rttCurrent) ? Number(J2.rttCurrent) : 0, rttMax: Re2(J2.rttMax) ? Number(J2.rttMax) : 0, keyFrames: Re2(J2.keyFrames) ? Number(J2.keyFrames) : 0, lastKeyFrame: Re2(J2.lastKeyFrame) ? ge2(J2.lastKeyFrame) : void 0, layerLockPlis: Re2(J2.layerLockPlis) ? Number(J2.layerLockPlis) : 0, lastLayerLockPli: Re2(J2.lastLayerLockPli) ? ge2(J2.lastLayerLockPli) : void 0 };
  }, toJSON(J2) {
    const _e = {};
    return J2.startTime !== void 0 && (_e.startTime = J2.startTime.toISOString()), J2.endTime !== void 0 && (_e.endTime = J2.endTime.toISOString()), J2.duration !== void 0 && (_e.duration = J2.duration), J2.packets !== void 0 && (_e.packets = Math.round(J2.packets)), J2.packetRate !== void 0 && (_e.packetRate = J2.packetRate), J2.bytes !== void 0 && (_e.bytes = Math.round(J2.bytes)), J2.headerBytes !== void 0 && (_e.headerBytes = Math.round(J2.headerBytes)), J2.bitrate !== void 0 && (_e.bitrate = J2.bitrate), J2.packetsLost !== void 0 && (_e.packetsLost = Math.round(J2.packetsLost)), J2.packetLossRate !== void 0 && (_e.packetLossRate = J2.packetLossRate), J2.packetLossPercentage !== void 0 && (_e.packetLossPercentage = J2.packetLossPercentage), J2.packetsDuplicate !== void 0 && (_e.packetsDuplicate = Math.round(J2.packetsDuplicate)), J2.packetDuplicateRate !== void 0 && (_e.packetDuplicateRate = J2.packetDuplicateRate), J2.bytesDuplicate !== void 0 && (_e.bytesDuplicate = Math.round(J2.bytesDuplicate)), J2.headerBytesDuplicate !== void 0 && (_e.headerBytesDuplicate = Math.round(J2.headerBytesDuplicate)), J2.bitrateDuplicate !== void 0 && (_e.bitrateDuplicate = J2.bitrateDuplicate), J2.packetsPadding !== void 0 && (_e.packetsPadding = Math.round(J2.packetsPadding)), J2.packetPaddingRate !== void 0 && (_e.packetPaddingRate = J2.packetPaddingRate), J2.bytesPadding !== void 0 && (_e.bytesPadding = Math.round(J2.bytesPadding)), J2.headerBytesPadding !== void 0 && (_e.headerBytesPadding = Math.round(J2.headerBytesPadding)), J2.bitratePadding !== void 0 && (_e.bitratePadding = J2.bitratePadding), J2.packetsOutOfOrder !== void 0 && (_e.packetsOutOfOrder = Math.round(J2.packetsOutOfOrder)), J2.frames !== void 0 && (_e.frames = Math.round(J2.frames)), J2.frameRate !== void 0 && (_e.frameRate = J2.frameRate), J2.jitterCurrent !== void 0 && (_e.jitterCurrent = J2.jitterCurrent), J2.jitterMax !== void 0 && (_e.jitterMax = J2.jitterMax), _e.gapHistogram = {}, J2.gapHistogram && Object.entries(J2.gapHistogram).forEach(([ue2, ce2]) => {
      _e.gapHistogram[ue2] = Math.round(ce2);
    }), J2.nacks !== void 0 && (_e.nacks = Math.round(J2.nacks)), J2.nackAcks !== void 0 && (_e.nackAcks = Math.round(J2.nackAcks)), J2.nackMisses !== void 0 && (_e.nackMisses = Math.round(J2.nackMisses)), J2.nackRepeated !== void 0 && (_e.nackRepeated = Math.round(J2.nackRepeated)), J2.plis !== void 0 && (_e.plis = Math.round(J2.plis)), J2.lastPli !== void 0 && (_e.lastPli = J2.lastPli.toISOString()), J2.firs !== void 0 && (_e.firs = Math.round(J2.firs)), J2.lastFir !== void 0 && (_e.lastFir = J2.lastFir.toISOString()), J2.rttCurrent !== void 0 && (_e.rttCurrent = Math.round(J2.rttCurrent)), J2.rttMax !== void 0 && (_e.rttMax = Math.round(J2.rttMax)), J2.keyFrames !== void 0 && (_e.keyFrames = Math.round(J2.keyFrames)), J2.lastKeyFrame !== void 0 && (_e.lastKeyFrame = J2.lastKeyFrame.toISOString()), J2.layerLockPlis !== void 0 && (_e.layerLockPlis = Math.round(J2.layerLockPlis)), J2.lastLayerLockPli !== void 0 && (_e.lastLayerLockPli = J2.lastLayerLockPli.toISOString()), _e;
  }, fromPartial(J2) {
    var _e, ue2, ce2, ve2, Ce2, Be2, He2, Ve2, Ze2, Ke2, U2, se2, Se2, Ue2, De2, Ye2, Qe2, st, St, tt, it, Tt, rt, dt, wt, nt, at, gt, ot, ct, Ct, ut, lt, kt, Rt, Je2, ze2, et, pt, mt, vt;
    const ht = Oe2();
    return ht.startTime = (_e = J2.startTime) !== null && _e !== void 0 ? _e : void 0, ht.endTime = (ue2 = J2.endTime) !== null && ue2 !== void 0 ? ue2 : void 0, ht.duration = (ce2 = J2.duration) !== null && ce2 !== void 0 ? ce2 : 0, ht.packets = (ve2 = J2.packets) !== null && ve2 !== void 0 ? ve2 : 0, ht.packetRate = (Ce2 = J2.packetRate) !== null && Ce2 !== void 0 ? Ce2 : 0, ht.bytes = (Be2 = J2.bytes) !== null && Be2 !== void 0 ? Be2 : 0, ht.headerBytes = (He2 = J2.headerBytes) !== null && He2 !== void 0 ? He2 : 0, ht.bitrate = (Ve2 = J2.bitrate) !== null && Ve2 !== void 0 ? Ve2 : 0, ht.packetsLost = (Ze2 = J2.packetsLost) !== null && Ze2 !== void 0 ? Ze2 : 0, ht.packetLossRate = (Ke2 = J2.packetLossRate) !== null && Ke2 !== void 0 ? Ke2 : 0, ht.packetLossPercentage = (U2 = J2.packetLossPercentage) !== null && U2 !== void 0 ? U2 : 0, ht.packetsDuplicate = (se2 = J2.packetsDuplicate) !== null && se2 !== void 0 ? se2 : 0, ht.packetDuplicateRate = (Se2 = J2.packetDuplicateRate) !== null && Se2 !== void 0 ? Se2 : 0, ht.bytesDuplicate = (Ue2 = J2.bytesDuplicate) !== null && Ue2 !== void 0 ? Ue2 : 0, ht.headerBytesDuplicate = (De2 = J2.headerBytesDuplicate) !== null && De2 !== void 0 ? De2 : 0, ht.bitrateDuplicate = (Ye2 = J2.bitrateDuplicate) !== null && Ye2 !== void 0 ? Ye2 : 0, ht.packetsPadding = (Qe2 = J2.packetsPadding) !== null && Qe2 !== void 0 ? Qe2 : 0, ht.packetPaddingRate = (st = J2.packetPaddingRate) !== null && st !== void 0 ? st : 0, ht.bytesPadding = (St = J2.bytesPadding) !== null && St !== void 0 ? St : 0, ht.headerBytesPadding = (tt = J2.headerBytesPadding) !== null && tt !== void 0 ? tt : 0, ht.bitratePadding = (it = J2.bitratePadding) !== null && it !== void 0 ? it : 0, ht.packetsOutOfOrder = (Tt = J2.packetsOutOfOrder) !== null && Tt !== void 0 ? Tt : 0, ht.frames = (rt = J2.frames) !== null && rt !== void 0 ? rt : 0, ht.frameRate = (dt = J2.frameRate) !== null && dt !== void 0 ? dt : 0, ht.jitterCurrent = (wt = J2.jitterCurrent) !== null && wt !== void 0 ? wt : 0, ht.jitterMax = (nt = J2.jitterMax) !== null && nt !== void 0 ? nt : 0, ht.gapHistogram = Object.entries((at = J2.gapHistogram) !== null && at !== void 0 ? at : {}).reduce((_t, [Et, Pt]) => (Pt !== void 0 && (_t[Number(Et)] = Number(Pt)), _t), {}), ht.nacks = (gt = J2.nacks) !== null && gt !== void 0 ? gt : 0, ht.nackAcks = (ot = J2.nackAcks) !== null && ot !== void 0 ? ot : 0, ht.nackMisses = (ct = J2.nackMisses) !== null && ct !== void 0 ? ct : 0, ht.nackRepeated = (Ct = J2.nackRepeated) !== null && Ct !== void 0 ? Ct : 0, ht.plis = (ut = J2.plis) !== null && ut !== void 0 ? ut : 0, ht.lastPli = (lt = J2.lastPli) !== null && lt !== void 0 ? lt : void 0, ht.firs = (kt = J2.firs) !== null && kt !== void 0 ? kt : 0, ht.lastFir = (Rt = J2.lastFir) !== null && Rt !== void 0 ? Rt : void 0, ht.rttCurrent = (Je2 = J2.rttCurrent) !== null && Je2 !== void 0 ? Je2 : 0, ht.rttMax = (ze2 = J2.rttMax) !== null && ze2 !== void 0 ? ze2 : 0, ht.keyFrames = (et = J2.keyFrames) !== null && et !== void 0 ? et : 0, ht.lastKeyFrame = (pt = J2.lastKeyFrame) !== null && pt !== void 0 ? pt : void 0, ht.layerLockPlis = (mt = J2.layerLockPlis) !== null && mt !== void 0 ? mt : 0, ht.lastLayerLockPli = (vt = J2.lastLayerLockPli) !== null && vt !== void 0 ? vt : void 0, ht;
  } };
  function qe2() {
    return { key: 0, value: 0 };
  }
  a420.RTPStats_GapHistogramEntry = { encode(J2, _e = l2.default.Writer.create()) {
    return J2.key !== 0 && _e.uint32(8).int32(J2.key), J2.value !== 0 && _e.uint32(16).uint32(J2.value), _e;
  }, decode(J2, _e) {
    const ue2 = J2 instanceof l2.default.Reader ? J2 : new l2.default.Reader(J2);
    let ce2 = _e === void 0 ? ue2.len : ue2.pos + _e;
    const ve2 = qe2();
    for (; ue2.pos < ce2; ) {
      const Ce2 = ue2.uint32();
      switch (Ce2 >>> 3) {
        case 1:
          ve2.key = ue2.int32();
          break;
        case 2:
          ve2.value = ue2.uint32();
          break;
        default:
          ue2.skipType(Ce2 & 7);
          break;
      }
    }
    return ve2;
  }, fromJSON(J2) {
    return { key: Re2(J2.key) ? Number(J2.key) : 0, value: Re2(J2.value) ? Number(J2.value) : 0 };
  }, toJSON(J2) {
    const _e = {};
    return J2.key !== void 0 && (_e.key = Math.round(J2.key)), J2.value !== void 0 && (_e.value = Math.round(J2.value)), _e;
  }, fromPartial(J2) {
    var _e, ue2;
    const ce2 = qe2();
    return ce2.key = (_e = J2.key) !== null && _e !== void 0 ? _e : 0, ce2.value = (ue2 = J2.value) !== null && ue2 !== void 0 ? ue2 : 0, ce2;
  } };
  function je2() {
    return { unixMicro: 0, ticks: 0 };
  }
  a420.TimedVersion = { encode(J2, _e = l2.default.Writer.create()) {
    return J2.unixMicro !== 0 && _e.uint32(8).int64(J2.unixMicro), J2.ticks !== 0 && _e.uint32(16).int32(J2.ticks), _e;
  }, decode(J2, _e) {
    const ue2 = J2 instanceof l2.default.Reader ? J2 : new l2.default.Reader(J2);
    let ce2 = _e === void 0 ? ue2.len : ue2.pos + _e;
    const ve2 = je2();
    for (; ue2.pos < ce2; ) {
      const Ce2 = ue2.uint32();
      switch (Ce2 >>> 3) {
        case 1:
          ve2.unixMicro = we2(ue2.int64());
          break;
        case 2:
          ve2.ticks = ue2.int32();
          break;
        default:
          ue2.skipType(Ce2 & 7);
          break;
      }
    }
    return ve2;
  }, fromJSON(J2) {
    return { unixMicro: Re2(J2.unixMicro) ? Number(J2.unixMicro) : 0, ticks: Re2(J2.ticks) ? Number(J2.ticks) : 0 };
  }, toJSON(J2) {
    const _e = {};
    return J2.unixMicro !== void 0 && (_e.unixMicro = Math.round(J2.unixMicro)), J2.ticks !== void 0 && (_e.ticks = Math.round(J2.ticks)), _e;
  }, fromPartial(J2) {
    var _e, ue2;
    const ce2 = je2();
    return ce2.unixMicro = (_e = J2.unixMicro) !== null && _e !== void 0 ? _e : 0, ce2.ticks = (ue2 = J2.ticks) !== null && ue2 !== void 0 ? ue2 : 0, ce2;
  } };
  var Fe2 = (() => {
    if (typeof Fe2 < "u")
      return Fe2;
    if (typeof self < "u")
      return self;
    if (typeof window < "u")
      return window;
    if (typeof commonjsGlobal$1 < "u")
      return commonjsGlobal$1;
    throw "Unable to locate global object";
  })();
  function yt(J2) {
    if (Fe2.Buffer)
      return Uint8Array.from(Fe2.Buffer.from(J2, "base64"));
    {
      const _e = Fe2.atob(J2), ue2 = new Uint8Array(_e.length);
      for (let ce2 = 0; ce2 < _e.length; ++ce2)
        ue2[ce2] = _e.charCodeAt(ce2);
      return ue2;
    }
  }
  function Xe2(J2) {
    if (Fe2.Buffer)
      return Fe2.Buffer.from(J2).toString("base64");
    {
      const _e = [];
      return J2.forEach((ue2) => {
        _e.push(String.fromCharCode(ue2));
      }), Fe2.btoa(_e.join(""));
    }
  }
  function Ge2(J2) {
    const _e = J2.getTime() / 1e3, ue2 = J2.getTime() % 1e3 * 1e6;
    return { seconds: _e, nanos: ue2 };
  }
  function V2(J2) {
    let _e = J2.seconds * 1e3;
    return _e += J2.nanos / 1e6, new Date(_e);
  }
  function ge2(J2) {
    return J2 instanceof Date ? J2 : typeof J2 == "string" ? new Date(J2) : V2(v2.Timestamp.fromJSON(J2));
  }
  function we2(J2) {
    if (J2.gt(Number.MAX_SAFE_INTEGER))
      throw new Fe2.Error("Value is larger than Number.MAX_SAFE_INTEGER");
    return J2.toNumber();
  }
  l2.default.util.Long !== c.default && (l2.default.util.Long = c.default, l2.default.configure());
  function We2(J2) {
    return typeof J2 == "object" && J2 !== null;
  }
  function Re2(J2) {
    return J2 != null;
  }
})(livekit_models);
(function(a420) {
  var u2 = commonjsGlobal$1 && commonjsGlobal$1.__importDefault || function(q2) {
    return q2 && q2.__esModule ? q2 : { default: q2 };
  };
  Object.defineProperty(a420, "__esModule", { value: true }), a420.DeleteIngressRequest = a420.ListIngressResponse = a420.ListIngressRequest = a420.UpdateIngressRequest = a420.InputAudioState = a420.InputVideoState = a420.IngressState = a420.IngressInfo = a420.IngressVideoOptions = a420.IngressAudioOptions = a420.CreateIngressRequest = a420.ingressState_StatusToJSON = a420.ingressState_StatusFromJSON = a420.IngressState_Status = a420.ingressInputToJSON = a420.ingressInputFromJSON = a420.IngressInput = a420.protobufPackage = void 0;
  const c = u2(umdExports), l2 = u2(minimal), v2 = livekit_models;
  a420.protobufPackage = "livekit";
  var p2;
  (function(q2) {
    q2[q2.RTMP_INPUT = 0] = "RTMP_INPUT", q2[q2.UNRECOGNIZED = -1] = "UNRECOGNIZED";
  })(p2 = a420.IngressInput || (a420.IngressInput = {}));
  function _(q2) {
    switch (q2) {
      case 0:
      case "RTMP_INPUT":
        return p2.RTMP_INPUT;
      case -1:
      case "UNRECOGNIZED":
      default:
        return p2.UNRECOGNIZED;
    }
  }
  a420.ingressInputFromJSON = _;
  function I2(q2) {
    switch (q2) {
      case p2.RTMP_INPUT:
        return "RTMP_INPUT";
      case p2.UNRECOGNIZED:
      default:
        return "UNRECOGNIZED";
    }
  }
  a420.ingressInputToJSON = I2;
  var P2;
  (function(q2) {
    q2[q2.ENDPOINT_INACTIVE = 0] = "ENDPOINT_INACTIVE", q2[q2.ENDPOINT_BUFFERING = 1] = "ENDPOINT_BUFFERING", q2[q2.ENDPOINT_PUBLISHING = 2] = "ENDPOINT_PUBLISHING", q2[q2.ENDPOINT_ERROR = 3] = "ENDPOINT_ERROR", q2[q2.UNRECOGNIZED = -1] = "UNRECOGNIZED";
  })(P2 = a420.IngressState_Status || (a420.IngressState_Status = {}));
  function $(q2) {
    switch (q2) {
      case 0:
      case "ENDPOINT_INACTIVE":
        return P2.ENDPOINT_INACTIVE;
      case 1:
      case "ENDPOINT_BUFFERING":
        return P2.ENDPOINT_BUFFERING;
      case 2:
      case "ENDPOINT_PUBLISHING":
        return P2.ENDPOINT_PUBLISHING;
      case 3:
      case "ENDPOINT_ERROR":
        return P2.ENDPOINT_ERROR;
      case -1:
      case "UNRECOGNIZED":
      default:
        return P2.UNRECOGNIZED;
    }
  }
  a420.ingressState_StatusFromJSON = $;
  function F2(q2) {
    switch (q2) {
      case P2.ENDPOINT_INACTIVE:
        return "ENDPOINT_INACTIVE";
      case P2.ENDPOINT_BUFFERING:
        return "ENDPOINT_BUFFERING";
      case P2.ENDPOINT_PUBLISHING:
        return "ENDPOINT_PUBLISHING";
      case P2.ENDPOINT_ERROR:
        return "ENDPOINT_ERROR";
      case P2.UNRECOGNIZED:
      default:
        return "UNRECOGNIZED";
    }
  }
  a420.ingressState_StatusToJSON = F2;
  function H2() {
    return { inputType: 0, name: "", roomName: "", participantIdentity: "", participantName: "", audio: void 0, video: void 0 };
  }
  a420.CreateIngressRequest = { encode(q2, z2 = l2.default.Writer.create()) {
    return q2.inputType !== void 0 && q2.inputType !== 0 && z2.uint32(8).int32(q2.inputType), q2.name !== void 0 && q2.name !== "" && z2.uint32(18).string(q2.name), q2.roomName !== void 0 && q2.roomName !== "" && z2.uint32(26).string(q2.roomName), q2.participantIdentity !== void 0 && q2.participantIdentity !== "" && z2.uint32(34).string(q2.participantIdentity), q2.participantName !== void 0 && q2.participantName !== "" && z2.uint32(42).string(q2.participantName), q2.audio !== void 0 && a420.IngressAudioOptions.encode(q2.audio, z2.uint32(50).fork()).ldelim(), q2.video !== void 0 && a420.IngressVideoOptions.encode(q2.video, z2.uint32(58).fork()).ldelim(), z2;
  }, decode(q2, z2) {
    const C2 = q2 instanceof l2.default.Reader ? q2 : new l2.default.Reader(q2);
    let b = z2 === void 0 ? C2.len : C2.pos + z2;
    const E2 = H2();
    for (; C2.pos < b; ) {
      const k = C2.uint32();
      switch (k >>> 3) {
        case 1:
          E2.inputType = C2.int32();
          break;
        case 2:
          E2.name = C2.string();
          break;
        case 3:
          E2.roomName = C2.string();
          break;
        case 4:
          E2.participantIdentity = C2.string();
          break;
        case 5:
          E2.participantName = C2.string();
          break;
        case 6:
          E2.audio = a420.IngressAudioOptions.decode(C2, C2.uint32());
          break;
        case 7:
          E2.video = a420.IngressVideoOptions.decode(C2, C2.uint32());
          break;
        default:
          C2.skipType(k & 7);
          break;
      }
    }
    return E2;
  }, fromJSON(q2) {
    return { inputType: Te2(q2.inputType) ? _(q2.inputType) : 0, name: Te2(q2.name) ? String(q2.name) : "", roomName: Te2(q2.roomName) ? String(q2.roomName) : "", participantIdentity: Te2(q2.participantIdentity) ? String(q2.participantIdentity) : "", participantName: Te2(q2.participantName) ? String(q2.participantName) : "", audio: Te2(q2.audio) ? a420.IngressAudioOptions.fromJSON(q2.audio) : void 0, video: Te2(q2.video) ? a420.IngressVideoOptions.fromJSON(q2.video) : void 0 };
  }, toJSON(q2) {
    const z2 = {};
    return q2.inputType !== void 0 && (z2.inputType = I2(q2.inputType)), q2.name !== void 0 && (z2.name = q2.name), q2.roomName !== void 0 && (z2.roomName = q2.roomName), q2.participantIdentity !== void 0 && (z2.participantIdentity = q2.participantIdentity), q2.participantName !== void 0 && (z2.participantName = q2.participantName), q2.audio !== void 0 && (z2.audio = q2.audio ? a420.IngressAudioOptions.toJSON(q2.audio) : void 0), q2.video !== void 0 && (z2.video = q2.video ? a420.IngressVideoOptions.toJSON(q2.video) : void 0), z2;
  }, fromPartial(q2) {
    var z2, C2, b, E2, k;
    const O2 = H2();
    return O2.inputType = (z2 = q2.inputType) !== null && z2 !== void 0 ? z2 : 0, O2.name = (C2 = q2.name) !== null && C2 !== void 0 ? C2 : "", O2.roomName = (b = q2.roomName) !== null && b !== void 0 ? b : "", O2.participantIdentity = (E2 = q2.participantIdentity) !== null && E2 !== void 0 ? E2 : "", O2.participantName = (k = q2.participantName) !== null && k !== void 0 ? k : "", O2.audio = q2.audio !== void 0 && q2.audio !== null ? a420.IngressAudioOptions.fromPartial(q2.audio) : void 0, O2.video = q2.video !== void 0 && q2.video !== null ? a420.IngressVideoOptions.fromPartial(q2.video) : void 0, O2;
  } };
  function j() {
    return { name: "", source: 0, mimeType: "", bitrate: 0, disableDtx: false, channels: 0 };
  }
  a420.IngressAudioOptions = { encode(q2, z2 = l2.default.Writer.create()) {
    return q2.name !== void 0 && q2.name !== "" && z2.uint32(10).string(q2.name), q2.source !== void 0 && q2.source !== 0 && z2.uint32(16).int32(q2.source), q2.mimeType !== void 0 && q2.mimeType !== "" && z2.uint32(26).string(q2.mimeType), q2.bitrate !== void 0 && q2.bitrate !== 0 && z2.uint32(32).uint32(q2.bitrate), q2.disableDtx === true && z2.uint32(40).bool(q2.disableDtx), q2.channels !== void 0 && q2.channels !== 0 && z2.uint32(48).uint32(q2.channels), z2;
  }, decode(q2, z2) {
    const C2 = q2 instanceof l2.default.Reader ? q2 : new l2.default.Reader(q2);
    let b = z2 === void 0 ? C2.len : C2.pos + z2;
    const E2 = j();
    for (; C2.pos < b; ) {
      const k = C2.uint32();
      switch (k >>> 3) {
        case 1:
          E2.name = C2.string();
          break;
        case 2:
          E2.source = C2.int32();
          break;
        case 3:
          E2.mimeType = C2.string();
          break;
        case 4:
          E2.bitrate = C2.uint32();
          break;
        case 5:
          E2.disableDtx = C2.bool();
          break;
        case 6:
          E2.channels = C2.uint32();
          break;
        default:
          C2.skipType(k & 7);
          break;
      }
    }
    return E2;
  }, fromJSON(q2) {
    return { name: Te2(q2.name) ? String(q2.name) : "", source: Te2(q2.source) ? v2.trackSourceFromJSON(q2.source) : 0, mimeType: Te2(q2.mimeType) ? String(q2.mimeType) : "", bitrate: Te2(q2.bitrate) ? Number(q2.bitrate) : 0, disableDtx: Te2(q2.disableDtx) ? !!q2.disableDtx : false, channels: Te2(q2.channels) ? Number(q2.channels) : 0 };
  }, toJSON(q2) {
    const z2 = {};
    return q2.name !== void 0 && (z2.name = q2.name), q2.source !== void 0 && (z2.source = v2.trackSourceToJSON(q2.source)), q2.mimeType !== void 0 && (z2.mimeType = q2.mimeType), q2.bitrate !== void 0 && (z2.bitrate = Math.round(q2.bitrate)), q2.disableDtx !== void 0 && (z2.disableDtx = q2.disableDtx), q2.channels !== void 0 && (z2.channels = Math.round(q2.channels)), z2;
  }, fromPartial(q2) {
    var z2, C2, b, E2, k, O2;
    const A2 = j();
    return A2.name = (z2 = q2.name) !== null && z2 !== void 0 ? z2 : "", A2.source = (C2 = q2.source) !== null && C2 !== void 0 ? C2 : 0, A2.mimeType = (b = q2.mimeType) !== null && b !== void 0 ? b : "", A2.bitrate = (E2 = q2.bitrate) !== null && E2 !== void 0 ? E2 : 0, A2.disableDtx = (k = q2.disableDtx) !== null && k !== void 0 ? k : false, A2.channels = (O2 = q2.channels) !== null && O2 !== void 0 ? O2 : 0, A2;
  } };
  function ee2() {
    return { name: "", source: 0, mimeType: "", layers: [] };
  }
  a420.IngressVideoOptions = { encode(q2, z2 = l2.default.Writer.create()) {
    if (q2.name !== void 0 && q2.name !== "" && z2.uint32(10).string(q2.name), q2.source !== void 0 && q2.source !== 0 && z2.uint32(16).int32(q2.source), q2.mimeType !== void 0 && q2.mimeType !== "" && z2.uint32(26).string(q2.mimeType), q2.layers !== void 0 && q2.layers.length !== 0)
      for (const C2 of q2.layers)
        v2.VideoLayer.encode(C2, z2.uint32(34).fork()).ldelim();
    return z2;
  }, decode(q2, z2) {
    const C2 = q2 instanceof l2.default.Reader ? q2 : new l2.default.Reader(q2);
    let b = z2 === void 0 ? C2.len : C2.pos + z2;
    const E2 = ee2();
    for (; C2.pos < b; ) {
      const k = C2.uint32();
      switch (k >>> 3) {
        case 1:
          E2.name = C2.string();
          break;
        case 2:
          E2.source = C2.int32();
          break;
        case 3:
          E2.mimeType = C2.string();
          break;
        case 4:
          E2.layers.push(v2.VideoLayer.decode(C2, C2.uint32()));
          break;
        default:
          C2.skipType(k & 7);
          break;
      }
    }
    return E2;
  }, fromJSON(q2) {
    return { name: Te2(q2.name) ? String(q2.name) : "", source: Te2(q2.source) ? v2.trackSourceFromJSON(q2.source) : 0, mimeType: Te2(q2.mimeType) ? String(q2.mimeType) : "", layers: Array.isArray(q2 == null ? void 0 : q2.layers) ? q2.layers.map((z2) => v2.VideoLayer.fromJSON(z2)) : [] };
  }, toJSON(q2) {
    const z2 = {};
    return q2.name !== void 0 && (z2.name = q2.name), q2.source !== void 0 && (z2.source = v2.trackSourceToJSON(q2.source)), q2.mimeType !== void 0 && (z2.mimeType = q2.mimeType), q2.layers ? z2.layers = q2.layers.map((C2) => C2 ? v2.VideoLayer.toJSON(C2) : void 0) : z2.layers = [], z2;
  }, fromPartial(q2) {
    var z2, C2, b, E2;
    const k = ee2();
    return k.name = (z2 = q2.name) !== null && z2 !== void 0 ? z2 : "", k.source = (C2 = q2.source) !== null && C2 !== void 0 ? C2 : 0, k.mimeType = (b = q2.mimeType) !== null && b !== void 0 ? b : "", k.layers = ((E2 = q2.layers) === null || E2 === void 0 ? void 0 : E2.map((O2) => v2.VideoLayer.fromPartial(O2))) || [], k;
  } };
  function X2() {
    return { ingressId: "", name: "", streamKey: "", url: "", inputType: 0, audio: void 0, video: void 0, roomName: "", participantIdentity: "", participantName: "", reusable: false, state: void 0 };
  }
  a420.IngressInfo = { encode(q2, z2 = l2.default.Writer.create()) {
    return q2.ingressId !== void 0 && q2.ingressId !== "" && z2.uint32(10).string(q2.ingressId), q2.name !== void 0 && q2.name !== "" && z2.uint32(18).string(q2.name), q2.streamKey !== void 0 && q2.streamKey !== "" && z2.uint32(26).string(q2.streamKey), q2.url !== void 0 && q2.url !== "" && z2.uint32(34).string(q2.url), q2.inputType !== void 0 && q2.inputType !== 0 && z2.uint32(40).int32(q2.inputType), q2.audio !== void 0 && a420.IngressAudioOptions.encode(q2.audio, z2.uint32(50).fork()).ldelim(), q2.video !== void 0 && a420.IngressVideoOptions.encode(q2.video, z2.uint32(58).fork()).ldelim(), q2.roomName !== void 0 && q2.roomName !== "" && z2.uint32(66).string(q2.roomName), q2.participantIdentity !== void 0 && q2.participantIdentity !== "" && z2.uint32(74).string(q2.participantIdentity), q2.participantName !== void 0 && q2.participantName !== "" && z2.uint32(82).string(q2.participantName), q2.reusable === true && z2.uint32(88).bool(q2.reusable), q2.state !== void 0 && a420.IngressState.encode(q2.state, z2.uint32(98).fork()).ldelim(), z2;
  }, decode(q2, z2) {
    const C2 = q2 instanceof l2.default.Reader ? q2 : new l2.default.Reader(q2);
    let b = z2 === void 0 ? C2.len : C2.pos + z2;
    const E2 = X2();
    for (; C2.pos < b; ) {
      const k = C2.uint32();
      switch (k >>> 3) {
        case 1:
          E2.ingressId = C2.string();
          break;
        case 2:
          E2.name = C2.string();
          break;
        case 3:
          E2.streamKey = C2.string();
          break;
        case 4:
          E2.url = C2.string();
          break;
        case 5:
          E2.inputType = C2.int32();
          break;
        case 6:
          E2.audio = a420.IngressAudioOptions.decode(C2, C2.uint32());
          break;
        case 7:
          E2.video = a420.IngressVideoOptions.decode(C2, C2.uint32());
          break;
        case 8:
          E2.roomName = C2.string();
          break;
        case 9:
          E2.participantIdentity = C2.string();
          break;
        case 10:
          E2.participantName = C2.string();
          break;
        case 11:
          E2.reusable = C2.bool();
          break;
        case 12:
          E2.state = a420.IngressState.decode(C2, C2.uint32());
          break;
        default:
          C2.skipType(k & 7);
          break;
      }
    }
    return E2;
  }, fromJSON(q2) {
    return { ingressId: Te2(q2.ingressId) ? String(q2.ingressId) : "", name: Te2(q2.name) ? String(q2.name) : "", streamKey: Te2(q2.streamKey) ? String(q2.streamKey) : "", url: Te2(q2.url) ? String(q2.url) : "", inputType: Te2(q2.inputType) ? _(q2.inputType) : 0, audio: Te2(q2.audio) ? a420.IngressAudioOptions.fromJSON(q2.audio) : void 0, video: Te2(q2.video) ? a420.IngressVideoOptions.fromJSON(q2.video) : void 0, roomName: Te2(q2.roomName) ? String(q2.roomName) : "", participantIdentity: Te2(q2.participantIdentity) ? String(q2.participantIdentity) : "", participantName: Te2(q2.participantName) ? String(q2.participantName) : "", reusable: Te2(q2.reusable) ? !!q2.reusable : false, state: Te2(q2.state) ? a420.IngressState.fromJSON(q2.state) : void 0 };
  }, toJSON(q2) {
    const z2 = {};
    return q2.ingressId !== void 0 && (z2.ingressId = q2.ingressId), q2.name !== void 0 && (z2.name = q2.name), q2.streamKey !== void 0 && (z2.streamKey = q2.streamKey), q2.url !== void 0 && (z2.url = q2.url), q2.inputType !== void 0 && (z2.inputType = I2(q2.inputType)), q2.audio !== void 0 && (z2.audio = q2.audio ? a420.IngressAudioOptions.toJSON(q2.audio) : void 0), q2.video !== void 0 && (z2.video = q2.video ? a420.IngressVideoOptions.toJSON(q2.video) : void 0), q2.roomName !== void 0 && (z2.roomName = q2.roomName), q2.participantIdentity !== void 0 && (z2.participantIdentity = q2.participantIdentity), q2.participantName !== void 0 && (z2.participantName = q2.participantName), q2.reusable !== void 0 && (z2.reusable = q2.reusable), q2.state !== void 0 && (z2.state = q2.state ? a420.IngressState.toJSON(q2.state) : void 0), z2;
  }, fromPartial(q2) {
    var z2, C2, b, E2, k, O2, A2, x2, Y2;
    const B2 = X2();
    return B2.ingressId = (z2 = q2.ingressId) !== null && z2 !== void 0 ? z2 : "", B2.name = (C2 = q2.name) !== null && C2 !== void 0 ? C2 : "", B2.streamKey = (b = q2.streamKey) !== null && b !== void 0 ? b : "", B2.url = (E2 = q2.url) !== null && E2 !== void 0 ? E2 : "", B2.inputType = (k = q2.inputType) !== null && k !== void 0 ? k : 0, B2.audio = q2.audio !== void 0 && q2.audio !== null ? a420.IngressAudioOptions.fromPartial(q2.audio) : void 0, B2.video = q2.video !== void 0 && q2.video !== null ? a420.IngressVideoOptions.fromPartial(q2.video) : void 0, B2.roomName = (O2 = q2.roomName) !== null && O2 !== void 0 ? O2 : "", B2.participantIdentity = (A2 = q2.participantIdentity) !== null && A2 !== void 0 ? A2 : "", B2.participantName = (x2 = q2.participantName) !== null && x2 !== void 0 ? x2 : "", B2.reusable = (Y2 = q2.reusable) !== null && Y2 !== void 0 ? Y2 : false, B2.state = q2.state !== void 0 && q2.state !== null ? a420.IngressState.fromPartial(q2.state) : void 0, B2;
  } };
  function ie2() {
    return { status: 0, error: "", video: void 0, audio: void 0, roomId: "", startedAt: 0, tracks: [] };
  }
  a420.IngressState = { encode(q2, z2 = l2.default.Writer.create()) {
    if (q2.status !== void 0 && q2.status !== 0 && z2.uint32(8).int32(q2.status), q2.error !== void 0 && q2.error !== "" && z2.uint32(18).string(q2.error), q2.video !== void 0 && a420.InputVideoState.encode(q2.video, z2.uint32(26).fork()).ldelim(), q2.audio !== void 0 && a420.InputAudioState.encode(q2.audio, z2.uint32(34).fork()).ldelim(), q2.roomId !== void 0 && q2.roomId !== "" && z2.uint32(42).string(q2.roomId), q2.startedAt !== void 0 && q2.startedAt !== 0 && z2.uint32(56).int64(q2.startedAt), q2.tracks !== void 0 && q2.tracks.length !== 0)
      for (const C2 of q2.tracks)
        v2.TrackInfo.encode(C2, z2.uint32(50).fork()).ldelim();
    return z2;
  }, decode(q2, z2) {
    const C2 = q2 instanceof l2.default.Reader ? q2 : new l2.default.Reader(q2);
    let b = z2 === void 0 ? C2.len : C2.pos + z2;
    const E2 = ie2();
    for (; C2.pos < b; ) {
      const k = C2.uint32();
      switch (k >>> 3) {
        case 1:
          E2.status = C2.int32();
          break;
        case 2:
          E2.error = C2.string();
          break;
        case 3:
          E2.video = a420.InputVideoState.decode(C2, C2.uint32());
          break;
        case 4:
          E2.audio = a420.InputAudioState.decode(C2, C2.uint32());
          break;
        case 5:
          E2.roomId = C2.string();
          break;
        case 7:
          E2.startedAt = ke2(C2.int64());
          break;
        case 6:
          E2.tracks.push(v2.TrackInfo.decode(C2, C2.uint32()));
          break;
        default:
          C2.skipType(k & 7);
          break;
      }
    }
    return E2;
  }, fromJSON(q2) {
    return { status: Te2(q2.status) ? $(q2.status) : 0, error: Te2(q2.error) ? String(q2.error) : "", video: Te2(q2.video) ? a420.InputVideoState.fromJSON(q2.video) : void 0, audio: Te2(q2.audio) ? a420.InputAudioState.fromJSON(q2.audio) : void 0, roomId: Te2(q2.roomId) ? String(q2.roomId) : "", startedAt: Te2(q2.startedAt) ? Number(q2.startedAt) : 0, tracks: Array.isArray(q2 == null ? void 0 : q2.tracks) ? q2.tracks.map((z2) => v2.TrackInfo.fromJSON(z2)) : [] };
  }, toJSON(q2) {
    const z2 = {};
    return q2.status !== void 0 && (z2.status = F2(q2.status)), q2.error !== void 0 && (z2.error = q2.error), q2.video !== void 0 && (z2.video = q2.video ? a420.InputVideoState.toJSON(q2.video) : void 0), q2.audio !== void 0 && (z2.audio = q2.audio ? a420.InputAudioState.toJSON(q2.audio) : void 0), q2.roomId !== void 0 && (z2.roomId = q2.roomId), q2.startedAt !== void 0 && (z2.startedAt = Math.round(q2.startedAt)), q2.tracks ? z2.tracks = q2.tracks.map((C2) => C2 ? v2.TrackInfo.toJSON(C2) : void 0) : z2.tracks = [], z2;
  }, fromPartial(q2) {
    var z2, C2, b, E2, k;
    const O2 = ie2();
    return O2.status = (z2 = q2.status) !== null && z2 !== void 0 ? z2 : 0, O2.error = (C2 = q2.error) !== null && C2 !== void 0 ? C2 : "", O2.video = q2.video !== void 0 && q2.video !== null ? a420.InputVideoState.fromPartial(q2.video) : void 0, O2.audio = q2.audio !== void 0 && q2.audio !== null ? a420.InputAudioState.fromPartial(q2.audio) : void 0, O2.roomId = (b = q2.roomId) !== null && b !== void 0 ? b : "", O2.startedAt = (E2 = q2.startedAt) !== null && E2 !== void 0 ? E2 : 0, O2.tracks = ((k = q2.tracks) === null || k === void 0 ? void 0 : k.map((A2) => v2.TrackInfo.fromPartial(A2))) || [], O2;
  } };
  function Q2() {
    return { mimeType: 0, width: 0, height: 0, framerate: 0 };
  }
  a420.InputVideoState = { encode(q2, z2 = l2.default.Writer.create()) {
    return q2.mimeType !== void 0 && q2.mimeType !== 0 && z2.uint32(8).uint32(q2.mimeType), q2.width !== void 0 && q2.width !== 0 && z2.uint32(24).uint32(q2.width), q2.height !== void 0 && q2.height !== 0 && z2.uint32(32).uint32(q2.height), q2.framerate !== void 0 && q2.framerate !== 0 && z2.uint32(40).uint32(q2.framerate), z2;
  }, decode(q2, z2) {
    const C2 = q2 instanceof l2.default.Reader ? q2 : new l2.default.Reader(q2);
    let b = z2 === void 0 ? C2.len : C2.pos + z2;
    const E2 = Q2();
    for (; C2.pos < b; ) {
      const k = C2.uint32();
      switch (k >>> 3) {
        case 1:
          E2.mimeType = C2.uint32();
          break;
        case 3:
          E2.width = C2.uint32();
          break;
        case 4:
          E2.height = C2.uint32();
          break;
        case 5:
          E2.framerate = C2.uint32();
          break;
        default:
          C2.skipType(k & 7);
          break;
      }
    }
    return E2;
  }, fromJSON(q2) {
    return { mimeType: Te2(q2.mimeType) ? Number(q2.mimeType) : 0, width: Te2(q2.width) ? Number(q2.width) : 0, height: Te2(q2.height) ? Number(q2.height) : 0, framerate: Te2(q2.framerate) ? Number(q2.framerate) : 0 };
  }, toJSON(q2) {
    const z2 = {};
    return q2.mimeType !== void 0 && (z2.mimeType = Math.round(q2.mimeType)), q2.width !== void 0 && (z2.width = Math.round(q2.width)), q2.height !== void 0 && (z2.height = Math.round(q2.height)), q2.framerate !== void 0 && (z2.framerate = Math.round(q2.framerate)), z2;
  }, fromPartial(q2) {
    var z2, C2, b, E2;
    const k = Q2();
    return k.mimeType = (z2 = q2.mimeType) !== null && z2 !== void 0 ? z2 : 0, k.width = (C2 = q2.width) !== null && C2 !== void 0 ? C2 : 0, k.height = (b = q2.height) !== null && b !== void 0 ? b : 0, k.framerate = (E2 = q2.framerate) !== null && E2 !== void 0 ? E2 : 0, k;
  } };
  function ne2() {
    return { mimeType: 0, channels: 0, sampleRate: 0 };
  }
  a420.InputAudioState = { encode(q2, z2 = l2.default.Writer.create()) {
    return q2.mimeType !== void 0 && q2.mimeType !== 0 && z2.uint32(8).uint32(q2.mimeType), q2.channels !== void 0 && q2.channels !== 0 && z2.uint32(24).uint32(q2.channels), q2.sampleRate !== void 0 && q2.sampleRate !== 0 && z2.uint32(32).uint32(q2.sampleRate), z2;
  }, decode(q2, z2) {
    const C2 = q2 instanceof l2.default.Reader ? q2 : new l2.default.Reader(q2);
    let b = z2 === void 0 ? C2.len : C2.pos + z2;
    const E2 = ne2();
    for (; C2.pos < b; ) {
      const k = C2.uint32();
      switch (k >>> 3) {
        case 1:
          E2.mimeType = C2.uint32();
          break;
        case 3:
          E2.channels = C2.uint32();
          break;
        case 4:
          E2.sampleRate = C2.uint32();
          break;
        default:
          C2.skipType(k & 7);
          break;
      }
    }
    return E2;
  }, fromJSON(q2) {
    return { mimeType: Te2(q2.mimeType) ? Number(q2.mimeType) : 0, channels: Te2(q2.channels) ? Number(q2.channels) : 0, sampleRate: Te2(q2.sampleRate) ? Number(q2.sampleRate) : 0 };
  }, toJSON(q2) {
    const z2 = {};
    return q2.mimeType !== void 0 && (z2.mimeType = Math.round(q2.mimeType)), q2.channels !== void 0 && (z2.channels = Math.round(q2.channels)), q2.sampleRate !== void 0 && (z2.sampleRate = Math.round(q2.sampleRate)), z2;
  }, fromPartial(q2) {
    var z2, C2, b;
    const E2 = ne2();
    return E2.mimeType = (z2 = q2.mimeType) !== null && z2 !== void 0 ? z2 : 0, E2.channels = (C2 = q2.channels) !== null && C2 !== void 0 ? C2 : 0, E2.sampleRate = (b = q2.sampleRate) !== null && b !== void 0 ? b : 0, E2;
  } };
  function Z2() {
    return { ingressId: "", name: "", roomName: "", participantIdentity: "", participantName: "", audio: void 0, video: void 0 };
  }
  a420.UpdateIngressRequest = { encode(q2, z2 = l2.default.Writer.create()) {
    return q2.ingressId !== void 0 && q2.ingressId !== "" && z2.uint32(10).string(q2.ingressId), q2.name !== void 0 && q2.name !== "" && z2.uint32(18).string(q2.name), q2.roomName !== void 0 && q2.roomName !== "" && z2.uint32(26).string(q2.roomName), q2.participantIdentity !== void 0 && q2.participantIdentity !== "" && z2.uint32(34).string(q2.participantIdentity), q2.participantName !== void 0 && q2.participantName !== "" && z2.uint32(42).string(q2.participantName), q2.audio !== void 0 && a420.IngressAudioOptions.encode(q2.audio, z2.uint32(50).fork()).ldelim(), q2.video !== void 0 && a420.IngressVideoOptions.encode(q2.video, z2.uint32(58).fork()).ldelim(), z2;
  }, decode(q2, z2) {
    const C2 = q2 instanceof l2.default.Reader ? q2 : new l2.default.Reader(q2);
    let b = z2 === void 0 ? C2.len : C2.pos + z2;
    const E2 = Z2();
    for (; C2.pos < b; ) {
      const k = C2.uint32();
      switch (k >>> 3) {
        case 1:
          E2.ingressId = C2.string();
          break;
        case 2:
          E2.name = C2.string();
          break;
        case 3:
          E2.roomName = C2.string();
          break;
        case 4:
          E2.participantIdentity = C2.string();
          break;
        case 5:
          E2.participantName = C2.string();
          break;
        case 6:
          E2.audio = a420.IngressAudioOptions.decode(C2, C2.uint32());
          break;
        case 7:
          E2.video = a420.IngressVideoOptions.decode(C2, C2.uint32());
          break;
        default:
          C2.skipType(k & 7);
          break;
      }
    }
    return E2;
  }, fromJSON(q2) {
    return { ingressId: Te2(q2.ingressId) ? String(q2.ingressId) : "", name: Te2(q2.name) ? String(q2.name) : "", roomName: Te2(q2.roomName) ? String(q2.roomName) : "", participantIdentity: Te2(q2.participantIdentity) ? String(q2.participantIdentity) : "", participantName: Te2(q2.participantName) ? String(q2.participantName) : "", audio: Te2(q2.audio) ? a420.IngressAudioOptions.fromJSON(q2.audio) : void 0, video: Te2(q2.video) ? a420.IngressVideoOptions.fromJSON(q2.video) : void 0 };
  }, toJSON(q2) {
    const z2 = {};
    return q2.ingressId !== void 0 && (z2.ingressId = q2.ingressId), q2.name !== void 0 && (z2.name = q2.name), q2.roomName !== void 0 && (z2.roomName = q2.roomName), q2.participantIdentity !== void 0 && (z2.participantIdentity = q2.participantIdentity), q2.participantName !== void 0 && (z2.participantName = q2.participantName), q2.audio !== void 0 && (z2.audio = q2.audio ? a420.IngressAudioOptions.toJSON(q2.audio) : void 0), q2.video !== void 0 && (z2.video = q2.video ? a420.IngressVideoOptions.toJSON(q2.video) : void 0), z2;
  }, fromPartial(q2) {
    var z2, C2, b, E2, k;
    const O2 = Z2();
    return O2.ingressId = (z2 = q2.ingressId) !== null && z2 !== void 0 ? z2 : "", O2.name = (C2 = q2.name) !== null && C2 !== void 0 ? C2 : "", O2.roomName = (b = q2.roomName) !== null && b !== void 0 ? b : "", O2.participantIdentity = (E2 = q2.participantIdentity) !== null && E2 !== void 0 ? E2 : "", O2.participantName = (k = q2.participantName) !== null && k !== void 0 ? k : "", O2.audio = q2.audio !== void 0 && q2.audio !== null ? a420.IngressAudioOptions.fromPartial(q2.audio) : void 0, O2.video = q2.video !== void 0 && q2.video !== null ? a420.IngressVideoOptions.fromPartial(q2.video) : void 0, O2;
  } };
  function de2() {
    return { roomName: "" };
  }
  a420.ListIngressRequest = { encode(q2, z2 = l2.default.Writer.create()) {
    return q2.roomName !== void 0 && q2.roomName !== "" && z2.uint32(10).string(q2.roomName), z2;
  }, decode(q2, z2) {
    const C2 = q2 instanceof l2.default.Reader ? q2 : new l2.default.Reader(q2);
    let b = z2 === void 0 ? C2.len : C2.pos + z2;
    const E2 = de2();
    for (; C2.pos < b; ) {
      const k = C2.uint32();
      switch (k >>> 3) {
        case 1:
          E2.roomName = C2.string();
          break;
        default:
          C2.skipType(k & 7);
          break;
      }
    }
    return E2;
  }, fromJSON(q2) {
    return { roomName: Te2(q2.roomName) ? String(q2.roomName) : "" };
  }, toJSON(q2) {
    const z2 = {};
    return q2.roomName !== void 0 && (z2.roomName = q2.roomName), z2;
  }, fromPartial(q2) {
    var z2;
    const C2 = de2();
    return C2.roomName = (z2 = q2.roomName) !== null && z2 !== void 0 ? z2 : "", C2;
  } };
  function pe2() {
    return { items: [] };
  }
  a420.ListIngressResponse = { encode(q2, z2 = l2.default.Writer.create()) {
    if (q2.items !== void 0 && q2.items.length !== 0)
      for (const C2 of q2.items)
        a420.IngressInfo.encode(C2, z2.uint32(10).fork()).ldelim();
    return z2;
  }, decode(q2, z2) {
    const C2 = q2 instanceof l2.default.Reader ? q2 : new l2.default.Reader(q2);
    let b = z2 === void 0 ? C2.len : C2.pos + z2;
    const E2 = pe2();
    for (; C2.pos < b; ) {
      const k = C2.uint32();
      switch (k >>> 3) {
        case 1:
          E2.items.push(a420.IngressInfo.decode(C2, C2.uint32()));
          break;
        default:
          C2.skipType(k & 7);
          break;
      }
    }
    return E2;
  }, fromJSON(q2) {
    return { items: Array.isArray(q2 == null ? void 0 : q2.items) ? q2.items.map((z2) => a420.IngressInfo.fromJSON(z2)) : [] };
  }, toJSON(q2) {
    const z2 = {};
    return q2.items ? z2.items = q2.items.map((C2) => C2 ? a420.IngressInfo.toJSON(C2) : void 0) : z2.items = [], z2;
  }, fromPartial(q2) {
    var z2;
    const C2 = pe2();
    return C2.items = ((z2 = q2.items) === null || z2 === void 0 ? void 0 : z2.map((b) => a420.IngressInfo.fromPartial(b))) || [], C2;
  } };
  function le2() {
    return { ingressId: "" };
  }
  a420.DeleteIngressRequest = { encode(q2, z2 = l2.default.Writer.create()) {
    return q2.ingressId !== void 0 && q2.ingressId !== "" && z2.uint32(10).string(q2.ingressId), z2;
  }, decode(q2, z2) {
    const C2 = q2 instanceof l2.default.Reader ? q2 : new l2.default.Reader(q2);
    let b = z2 === void 0 ? C2.len : C2.pos + z2;
    const E2 = le2();
    for (; C2.pos < b; ) {
      const k = C2.uint32();
      switch (k >>> 3) {
        case 1:
          E2.ingressId = C2.string();
          break;
        default:
          C2.skipType(k & 7);
          break;
      }
    }
    return E2;
  }, fromJSON(q2) {
    return { ingressId: Te2(q2.ingressId) ? String(q2.ingressId) : "" };
  }, toJSON(q2) {
    const z2 = {};
    return q2.ingressId !== void 0 && (z2.ingressId = q2.ingressId), z2;
  }, fromPartial(q2) {
    var z2;
    const C2 = le2();
    return C2.ingressId = (z2 = q2.ingressId) !== null && z2 !== void 0 ? z2 : "", C2;
  } };
  var be2 = (() => {
    if (typeof be2 < "u")
      return be2;
    if (typeof self < "u")
      return self;
    if (typeof window < "u")
      return window;
    if (typeof commonjsGlobal$1 < "u")
      return commonjsGlobal$1;
    throw "Unable to locate global object";
  })();
  function ke2(q2) {
    if (q2.gt(Number.MAX_SAFE_INTEGER))
      throw new be2.Error("Value is larger than Number.MAX_SAFE_INTEGER");
    return q2.toNumber();
  }
  l2.default.util.Long !== c.default && (l2.default.util.Long = c.default, l2.default.configure());
  function Te2(q2) {
    return q2 != null;
  }
})(livekit_ingress);
var __awaiter$2 = commonjsGlobal$1 && commonjsGlobal$1.__awaiter || function(a420, u2, c, l2) {
  function v2(p2) {
    return p2 instanceof c ? p2 : new c(function(_) {
      _(p2);
    });
  }
  return new (c || (c = Promise))(function(p2, _) {
    function I2(F2) {
      try {
        $(l2.next(F2));
      } catch (H2) {
        _(H2);
      }
    }
    function P2(F2) {
      try {
        $(l2.throw(F2));
      } catch (H2) {
        _(H2);
      }
    }
    function $(F2) {
      F2.done ? p2(F2.value) : v2(F2.value).then(I2, P2);
    }
    $((l2 = l2.apply(a420, u2 || [])).next());
  });
}, __importDefault$3 = commonjsGlobal$1 && commonjsGlobal$1.__importDefault || function(a420) {
  return a420 && a420.__esModule ? a420 : { default: a420 };
};
Object.defineProperty(IngressClient$1, "__esModule", { value: true });
IngressClient$1.IngressClient = void 0;
const livekit_ingress_1$1 = livekit_ingress, ServiceBase_1$1 = __importDefault$3(ServiceBase$1), TwirpRPC_1$1 = TwirpRPC, svc$1 = "Ingress";
class IngressClient extends ServiceBase_1$1.default {
  /**
  * @param host hostname including protocol. i.e. 'https://cluster.livekit.io'
  * @param apiKey API Key, can be set in env var LIVEKIT_API_KEY
  * @param secret API Secret, can be set in env var LIVEKIT_API_SECRET
  */
  constructor(u2, c, l2) {
    super(c, l2), this.rpc = new TwirpRPC_1$1.TwirpRpc(u2, TwirpRPC_1$1.livekitPackage);
  }
  /**
  * @param inputType protocol for the ingress
  * @param opts CreateIngressOptions
  */
  createIngress(u2, c) {
    return __awaiter$2(this, void 0, void 0, function* () {
      let l2 = "", v2 = "", p2 = "", _ = "", I2, P2;
      c !== void 0 && (l2 = c.name || "", v2 = c.roomName || "", p2 = c.participantName || "", _ = c.participantIdentity || "", I2 = c.audioParams, P2 = c.videoParams);
      const $ = livekit_ingress_1$1.CreateIngressRequest.toJSON({ inputType: u2, name: l2, roomName: v2, participantIdentity: _, participantName: p2, audio: I2, video: P2 }), F2 = yield this.rpc.request(svc$1, "CreateIngress", $, this.authHeader({ ingressAdmin: true }));
      return livekit_ingress_1$1.IngressInfo.fromJSON(F2);
    });
  }
  /**
  * @param ingressId ID of the ingress to update
  * @param opts UpdateIngressOptions
  */
  updateIngress(u2, c) {
    return __awaiter$2(this, void 0, void 0, function* () {
      const l2 = c.name || "", v2 = c.roomName || "", p2 = c.participantName || "", _ = c.participantIdentity || "", I2 = c.audioParams, P2 = c.videoParams, $ = livekit_ingress_1$1.UpdateIngressRequest.toJSON({ ingressId: u2, name: l2, roomName: v2, participantIdentity: _, participantName: p2, audio: I2, video: P2 }), F2 = yield this.rpc.request(svc$1, "UpdateIngress", $, this.authHeader({ ingressAdmin: true }));
      return livekit_ingress_1$1.IngressInfo.fromJSON(F2);
    });
  }
  /**
  * @param roomName list ingress for one room only
  */
  listIngress(u2) {
    var c;
    return __awaiter$2(this, void 0, void 0, function* () {
      u2 ?? (u2 = "");
      const l2 = yield this.rpc.request(svc$1, "ListIngress", livekit_ingress_1$1.ListIngressRequest.toJSON({ roomName: u2 }), this.authHeader({ ingressAdmin: true }));
      return (c = livekit_ingress_1$1.ListIngressResponse.fromJSON(l2).items) !== null && c !== void 0 ? c : [];
    });
  }
  /**
  * @param ingressId ingress to delete
  */
  deleteIngress(u2) {
    return __awaiter$2(this, void 0, void 0, function* () {
      const c = yield this.rpc.request(svc$1, "DeleteIngress", livekit_ingress_1$1.DeleteIngressRequest.toJSON({ ingressId: u2 }), this.authHeader({ ingressAdmin: true }));
      return livekit_ingress_1$1.IngressInfo.fromJSON(c);
    });
  }
}
IngressClient$1.IngressClient = IngressClient;
var RoomServiceClient$1 = {}, livekit_room = {};
(function(a420) {
  var u2 = commonjsGlobal$1 && commonjsGlobal$1.__importDefault || function(C2) {
    return C2 && C2.__esModule ? C2 : { default: C2 };
  };
  Object.defineProperty(a420, "__esModule", { value: true }), a420.UpdateRoomMetadataRequest = a420.SendDataResponse = a420.SendDataRequest = a420.UpdateSubscriptionsResponse = a420.UpdateSubscriptionsRequest = a420.UpdateParticipantRequest = a420.MuteRoomTrackResponse = a420.MuteRoomTrackRequest = a420.RemoveParticipantResponse = a420.RoomParticipantIdentity = a420.ListParticipantsResponse = a420.ListParticipantsRequest = a420.DeleteRoomResponse = a420.DeleteRoomRequest = a420.ListRoomsResponse = a420.ListRoomsRequest = a420.RoomEgress = a420.CreateRoomRequest = a420.protobufPackage = void 0;
  const c = u2(minimal), l2 = livekit_egress, v2 = livekit_models;
  a420.protobufPackage = "livekit";
  function p2() {
    return { name: "", emptyTimeout: 0, maxParticipants: 0, nodeId: "", metadata: "", egress: void 0 };
  }
  a420.CreateRoomRequest = { encode(C2, b = c.default.Writer.create()) {
    return C2.name !== void 0 && C2.name !== "" && b.uint32(10).string(C2.name), C2.emptyTimeout !== void 0 && C2.emptyTimeout !== 0 && b.uint32(16).uint32(C2.emptyTimeout), C2.maxParticipants !== void 0 && C2.maxParticipants !== 0 && b.uint32(24).uint32(C2.maxParticipants), C2.nodeId !== void 0 && C2.nodeId !== "" && b.uint32(34).string(C2.nodeId), C2.metadata !== void 0 && C2.metadata !== "" && b.uint32(42).string(C2.metadata), C2.egress !== void 0 && a420.RoomEgress.encode(C2.egress, b.uint32(50).fork()).ldelim(), b;
  }, decode(C2, b) {
    const E2 = C2 instanceof c.default.Reader ? C2 : new c.default.Reader(C2);
    let k = b === void 0 ? E2.len : E2.pos + b;
    const O2 = p2();
    for (; E2.pos < k; ) {
      const A2 = E2.uint32();
      switch (A2 >>> 3) {
        case 1:
          O2.name = E2.string();
          break;
        case 2:
          O2.emptyTimeout = E2.uint32();
          break;
        case 3:
          O2.maxParticipants = E2.uint32();
          break;
        case 4:
          O2.nodeId = E2.string();
          break;
        case 5:
          O2.metadata = E2.string();
          break;
        case 6:
          O2.egress = a420.RoomEgress.decode(E2, E2.uint32());
          break;
        default:
          E2.skipType(A2 & 7);
          break;
      }
    }
    return O2;
  }, fromJSON(C2) {
    return { name: z2(C2.name) ? String(C2.name) : "", emptyTimeout: z2(C2.emptyTimeout) ? Number(C2.emptyTimeout) : 0, maxParticipants: z2(C2.maxParticipants) ? Number(C2.maxParticipants) : 0, nodeId: z2(C2.nodeId) ? String(C2.nodeId) : "", metadata: z2(C2.metadata) ? String(C2.metadata) : "", egress: z2(C2.egress) ? a420.RoomEgress.fromJSON(C2.egress) : void 0 };
  }, toJSON(C2) {
    const b = {};
    return C2.name !== void 0 && (b.name = C2.name), C2.emptyTimeout !== void 0 && (b.emptyTimeout = Math.round(C2.emptyTimeout)), C2.maxParticipants !== void 0 && (b.maxParticipants = Math.round(C2.maxParticipants)), C2.nodeId !== void 0 && (b.nodeId = C2.nodeId), C2.metadata !== void 0 && (b.metadata = C2.metadata), C2.egress !== void 0 && (b.egress = C2.egress ? a420.RoomEgress.toJSON(C2.egress) : void 0), b;
  }, fromPartial(C2) {
    var b, E2, k, O2, A2;
    const x2 = p2();
    return x2.name = (b = C2.name) !== null && b !== void 0 ? b : "", x2.emptyTimeout = (E2 = C2.emptyTimeout) !== null && E2 !== void 0 ? E2 : 0, x2.maxParticipants = (k = C2.maxParticipants) !== null && k !== void 0 ? k : 0, x2.nodeId = (O2 = C2.nodeId) !== null && O2 !== void 0 ? O2 : "", x2.metadata = (A2 = C2.metadata) !== null && A2 !== void 0 ? A2 : "", x2.egress = C2.egress !== void 0 && C2.egress !== null ? a420.RoomEgress.fromPartial(C2.egress) : void 0, x2;
  } };
  function _() {
    return { room: void 0, tracks: void 0 };
  }
  a420.RoomEgress = { encode(C2, b = c.default.Writer.create()) {
    return C2.room !== void 0 && l2.RoomCompositeEgressRequest.encode(C2.room, b.uint32(10).fork()).ldelim(), C2.tracks !== void 0 && l2.AutoTrackEgress.encode(C2.tracks, b.uint32(18).fork()).ldelim(), b;
  }, decode(C2, b) {
    const E2 = C2 instanceof c.default.Reader ? C2 : new c.default.Reader(C2);
    let k = b === void 0 ? E2.len : E2.pos + b;
    const O2 = _();
    for (; E2.pos < k; ) {
      const A2 = E2.uint32();
      switch (A2 >>> 3) {
        case 1:
          O2.room = l2.RoomCompositeEgressRequest.decode(E2, E2.uint32());
          break;
        case 2:
          O2.tracks = l2.AutoTrackEgress.decode(E2, E2.uint32());
          break;
        default:
          E2.skipType(A2 & 7);
          break;
      }
    }
    return O2;
  }, fromJSON(C2) {
    return { room: z2(C2.room) ? l2.RoomCompositeEgressRequest.fromJSON(C2.room) : void 0, tracks: z2(C2.tracks) ? l2.AutoTrackEgress.fromJSON(C2.tracks) : void 0 };
  }, toJSON(C2) {
    const b = {};
    return C2.room !== void 0 && (b.room = C2.room ? l2.RoomCompositeEgressRequest.toJSON(C2.room) : void 0), C2.tracks !== void 0 && (b.tracks = C2.tracks ? l2.AutoTrackEgress.toJSON(C2.tracks) : void 0), b;
  }, fromPartial(C2) {
    const b = _();
    return b.room = C2.room !== void 0 && C2.room !== null ? l2.RoomCompositeEgressRequest.fromPartial(C2.room) : void 0, b.tracks = C2.tracks !== void 0 && C2.tracks !== null ? l2.AutoTrackEgress.fromPartial(C2.tracks) : void 0, b;
  } };
  function I2() {
    return { names: [] };
  }
  a420.ListRoomsRequest = { encode(C2, b = c.default.Writer.create()) {
    if (C2.names !== void 0 && C2.names.length !== 0)
      for (const E2 of C2.names)
        b.uint32(10).string(E2);
    return b;
  }, decode(C2, b) {
    const E2 = C2 instanceof c.default.Reader ? C2 : new c.default.Reader(C2);
    let k = b === void 0 ? E2.len : E2.pos + b;
    const O2 = I2();
    for (; E2.pos < k; ) {
      const A2 = E2.uint32();
      switch (A2 >>> 3) {
        case 1:
          O2.names.push(E2.string());
          break;
        default:
          E2.skipType(A2 & 7);
          break;
      }
    }
    return O2;
  }, fromJSON(C2) {
    return { names: Array.isArray(C2 == null ? void 0 : C2.names) ? C2.names.map((b) => String(b)) : [] };
  }, toJSON(C2) {
    const b = {};
    return C2.names ? b.names = C2.names.map((E2) => E2) : b.names = [], b;
  }, fromPartial(C2) {
    var b;
    const E2 = I2();
    return E2.names = ((b = C2.names) === null || b === void 0 ? void 0 : b.map((k) => k)) || [], E2;
  } };
  function P2() {
    return { rooms: [] };
  }
  a420.ListRoomsResponse = { encode(C2, b = c.default.Writer.create()) {
    if (C2.rooms !== void 0 && C2.rooms.length !== 0)
      for (const E2 of C2.rooms)
        v2.Room.encode(E2, b.uint32(10).fork()).ldelim();
    return b;
  }, decode(C2, b) {
    const E2 = C2 instanceof c.default.Reader ? C2 : new c.default.Reader(C2);
    let k = b === void 0 ? E2.len : E2.pos + b;
    const O2 = P2();
    for (; E2.pos < k; ) {
      const A2 = E2.uint32();
      switch (A2 >>> 3) {
        case 1:
          O2.rooms.push(v2.Room.decode(E2, E2.uint32()));
          break;
        default:
          E2.skipType(A2 & 7);
          break;
      }
    }
    return O2;
  }, fromJSON(C2) {
    return { rooms: Array.isArray(C2 == null ? void 0 : C2.rooms) ? C2.rooms.map((b) => v2.Room.fromJSON(b)) : [] };
  }, toJSON(C2) {
    const b = {};
    return C2.rooms ? b.rooms = C2.rooms.map((E2) => E2 ? v2.Room.toJSON(E2) : void 0) : b.rooms = [], b;
  }, fromPartial(C2) {
    var b;
    const E2 = P2();
    return E2.rooms = ((b = C2.rooms) === null || b === void 0 ? void 0 : b.map((k) => v2.Room.fromPartial(k))) || [], E2;
  } };
  function $() {
    return { room: "" };
  }
  a420.DeleteRoomRequest = { encode(C2, b = c.default.Writer.create()) {
    return C2.room !== void 0 && C2.room !== "" && b.uint32(10).string(C2.room), b;
  }, decode(C2, b) {
    const E2 = C2 instanceof c.default.Reader ? C2 : new c.default.Reader(C2);
    let k = b === void 0 ? E2.len : E2.pos + b;
    const O2 = $();
    for (; E2.pos < k; ) {
      const A2 = E2.uint32();
      switch (A2 >>> 3) {
        case 1:
          O2.room = E2.string();
          break;
        default:
          E2.skipType(A2 & 7);
          break;
      }
    }
    return O2;
  }, fromJSON(C2) {
    return { room: z2(C2.room) ? String(C2.room) : "" };
  }, toJSON(C2) {
    const b = {};
    return C2.room !== void 0 && (b.room = C2.room), b;
  }, fromPartial(C2) {
    var b;
    const E2 = $();
    return E2.room = (b = C2.room) !== null && b !== void 0 ? b : "", E2;
  } };
  function F2() {
    return {};
  }
  a420.DeleteRoomResponse = { encode(C2, b = c.default.Writer.create()) {
    return b;
  }, decode(C2, b) {
    const E2 = C2 instanceof c.default.Reader ? C2 : new c.default.Reader(C2);
    let k = b === void 0 ? E2.len : E2.pos + b;
    const O2 = F2();
    for (; E2.pos < k; ) {
      const A2 = E2.uint32();
      switch (A2 >>> 3) {
        default:
          E2.skipType(A2 & 7);
          break;
      }
    }
    return O2;
  }, fromJSON(C2) {
    return {};
  }, toJSON(C2) {
    return {};
  }, fromPartial(C2) {
    return F2();
  } };
  function H2() {
    return { room: "" };
  }
  a420.ListParticipantsRequest = { encode(C2, b = c.default.Writer.create()) {
    return C2.room !== void 0 && C2.room !== "" && b.uint32(10).string(C2.room), b;
  }, decode(C2, b) {
    const E2 = C2 instanceof c.default.Reader ? C2 : new c.default.Reader(C2);
    let k = b === void 0 ? E2.len : E2.pos + b;
    const O2 = H2();
    for (; E2.pos < k; ) {
      const A2 = E2.uint32();
      switch (A2 >>> 3) {
        case 1:
          O2.room = E2.string();
          break;
        default:
          E2.skipType(A2 & 7);
          break;
      }
    }
    return O2;
  }, fromJSON(C2) {
    return { room: z2(C2.room) ? String(C2.room) : "" };
  }, toJSON(C2) {
    const b = {};
    return C2.room !== void 0 && (b.room = C2.room), b;
  }, fromPartial(C2) {
    var b;
    const E2 = H2();
    return E2.room = (b = C2.room) !== null && b !== void 0 ? b : "", E2;
  } };
  function j() {
    return { participants: [] };
  }
  a420.ListParticipantsResponse = { encode(C2, b = c.default.Writer.create()) {
    if (C2.participants !== void 0 && C2.participants.length !== 0)
      for (const E2 of C2.participants)
        v2.ParticipantInfo.encode(E2, b.uint32(10).fork()).ldelim();
    return b;
  }, decode(C2, b) {
    const E2 = C2 instanceof c.default.Reader ? C2 : new c.default.Reader(C2);
    let k = b === void 0 ? E2.len : E2.pos + b;
    const O2 = j();
    for (; E2.pos < k; ) {
      const A2 = E2.uint32();
      switch (A2 >>> 3) {
        case 1:
          O2.participants.push(v2.ParticipantInfo.decode(E2, E2.uint32()));
          break;
        default:
          E2.skipType(A2 & 7);
          break;
      }
    }
    return O2;
  }, fromJSON(C2) {
    return { participants: Array.isArray(C2 == null ? void 0 : C2.participants) ? C2.participants.map((b) => v2.ParticipantInfo.fromJSON(b)) : [] };
  }, toJSON(C2) {
    const b = {};
    return C2.participants ? b.participants = C2.participants.map((E2) => E2 ? v2.ParticipantInfo.toJSON(E2) : void 0) : b.participants = [], b;
  }, fromPartial(C2) {
    var b;
    const E2 = j();
    return E2.participants = ((b = C2.participants) === null || b === void 0 ? void 0 : b.map((k) => v2.ParticipantInfo.fromPartial(k))) || [], E2;
  } };
  function ee2() {
    return { room: "", identity: "" };
  }
  a420.RoomParticipantIdentity = { encode(C2, b = c.default.Writer.create()) {
    return C2.room !== void 0 && C2.room !== "" && b.uint32(10).string(C2.room), C2.identity !== void 0 && C2.identity !== "" && b.uint32(18).string(C2.identity), b;
  }, decode(C2, b) {
    const E2 = C2 instanceof c.default.Reader ? C2 : new c.default.Reader(C2);
    let k = b === void 0 ? E2.len : E2.pos + b;
    const O2 = ee2();
    for (; E2.pos < k; ) {
      const A2 = E2.uint32();
      switch (A2 >>> 3) {
        case 1:
          O2.room = E2.string();
          break;
        case 2:
          O2.identity = E2.string();
          break;
        default:
          E2.skipType(A2 & 7);
          break;
      }
    }
    return O2;
  }, fromJSON(C2) {
    return { room: z2(C2.room) ? String(C2.room) : "", identity: z2(C2.identity) ? String(C2.identity) : "" };
  }, toJSON(C2) {
    const b = {};
    return C2.room !== void 0 && (b.room = C2.room), C2.identity !== void 0 && (b.identity = C2.identity), b;
  }, fromPartial(C2) {
    var b, E2;
    const k = ee2();
    return k.room = (b = C2.room) !== null && b !== void 0 ? b : "", k.identity = (E2 = C2.identity) !== null && E2 !== void 0 ? E2 : "", k;
  } };
  function X2() {
    return {};
  }
  a420.RemoveParticipantResponse = { encode(C2, b = c.default.Writer.create()) {
    return b;
  }, decode(C2, b) {
    const E2 = C2 instanceof c.default.Reader ? C2 : new c.default.Reader(C2);
    let k = b === void 0 ? E2.len : E2.pos + b;
    const O2 = X2();
    for (; E2.pos < k; ) {
      const A2 = E2.uint32();
      switch (A2 >>> 3) {
        default:
          E2.skipType(A2 & 7);
          break;
      }
    }
    return O2;
  }, fromJSON(C2) {
    return {};
  }, toJSON(C2) {
    return {};
  }, fromPartial(C2) {
    return X2();
  } };
  function ie2() {
    return { room: "", identity: "", trackSid: "", muted: false };
  }
  a420.MuteRoomTrackRequest = { encode(C2, b = c.default.Writer.create()) {
    return C2.room !== void 0 && C2.room !== "" && b.uint32(10).string(C2.room), C2.identity !== void 0 && C2.identity !== "" && b.uint32(18).string(C2.identity), C2.trackSid !== void 0 && C2.trackSid !== "" && b.uint32(26).string(C2.trackSid), C2.muted === true && b.uint32(32).bool(C2.muted), b;
  }, decode(C2, b) {
    const E2 = C2 instanceof c.default.Reader ? C2 : new c.default.Reader(C2);
    let k = b === void 0 ? E2.len : E2.pos + b;
    const O2 = ie2();
    for (; E2.pos < k; ) {
      const A2 = E2.uint32();
      switch (A2 >>> 3) {
        case 1:
          O2.room = E2.string();
          break;
        case 2:
          O2.identity = E2.string();
          break;
        case 3:
          O2.trackSid = E2.string();
          break;
        case 4:
          O2.muted = E2.bool();
          break;
        default:
          E2.skipType(A2 & 7);
          break;
      }
    }
    return O2;
  }, fromJSON(C2) {
    return { room: z2(C2.room) ? String(C2.room) : "", identity: z2(C2.identity) ? String(C2.identity) : "", trackSid: z2(C2.trackSid) ? String(C2.trackSid) : "", muted: z2(C2.muted) ? !!C2.muted : false };
  }, toJSON(C2) {
    const b = {};
    return C2.room !== void 0 && (b.room = C2.room), C2.identity !== void 0 && (b.identity = C2.identity), C2.trackSid !== void 0 && (b.trackSid = C2.trackSid), C2.muted !== void 0 && (b.muted = C2.muted), b;
  }, fromPartial(C2) {
    var b, E2, k, O2;
    const A2 = ie2();
    return A2.room = (b = C2.room) !== null && b !== void 0 ? b : "", A2.identity = (E2 = C2.identity) !== null && E2 !== void 0 ? E2 : "", A2.trackSid = (k = C2.trackSid) !== null && k !== void 0 ? k : "", A2.muted = (O2 = C2.muted) !== null && O2 !== void 0 ? O2 : false, A2;
  } };
  function Q2() {
    return { track: void 0 };
  }
  a420.MuteRoomTrackResponse = { encode(C2, b = c.default.Writer.create()) {
    return C2.track !== void 0 && v2.TrackInfo.encode(C2.track, b.uint32(10).fork()).ldelim(), b;
  }, decode(C2, b) {
    const E2 = C2 instanceof c.default.Reader ? C2 : new c.default.Reader(C2);
    let k = b === void 0 ? E2.len : E2.pos + b;
    const O2 = Q2();
    for (; E2.pos < k; ) {
      const A2 = E2.uint32();
      switch (A2 >>> 3) {
        case 1:
          O2.track = v2.TrackInfo.decode(E2, E2.uint32());
          break;
        default:
          E2.skipType(A2 & 7);
          break;
      }
    }
    return O2;
  }, fromJSON(C2) {
    return { track: z2(C2.track) ? v2.TrackInfo.fromJSON(C2.track) : void 0 };
  }, toJSON(C2) {
    const b = {};
    return C2.track !== void 0 && (b.track = C2.track ? v2.TrackInfo.toJSON(C2.track) : void 0), b;
  }, fromPartial(C2) {
    const b = Q2();
    return b.track = C2.track !== void 0 && C2.track !== null ? v2.TrackInfo.fromPartial(C2.track) : void 0, b;
  } };
  function ne2() {
    return { room: "", identity: "", metadata: "", permission: void 0, name: "" };
  }
  a420.UpdateParticipantRequest = { encode(C2, b = c.default.Writer.create()) {
    return C2.room !== void 0 && C2.room !== "" && b.uint32(10).string(C2.room), C2.identity !== void 0 && C2.identity !== "" && b.uint32(18).string(C2.identity), C2.metadata !== void 0 && C2.metadata !== "" && b.uint32(26).string(C2.metadata), C2.permission !== void 0 && v2.ParticipantPermission.encode(C2.permission, b.uint32(34).fork()).ldelim(), C2.name !== void 0 && C2.name !== "" && b.uint32(42).string(C2.name), b;
  }, decode(C2, b) {
    const E2 = C2 instanceof c.default.Reader ? C2 : new c.default.Reader(C2);
    let k = b === void 0 ? E2.len : E2.pos + b;
    const O2 = ne2();
    for (; E2.pos < k; ) {
      const A2 = E2.uint32();
      switch (A2 >>> 3) {
        case 1:
          O2.room = E2.string();
          break;
        case 2:
          O2.identity = E2.string();
          break;
        case 3:
          O2.metadata = E2.string();
          break;
        case 4:
          O2.permission = v2.ParticipantPermission.decode(E2, E2.uint32());
          break;
        case 5:
          O2.name = E2.string();
          break;
        default:
          E2.skipType(A2 & 7);
          break;
      }
    }
    return O2;
  }, fromJSON(C2) {
    return { room: z2(C2.room) ? String(C2.room) : "", identity: z2(C2.identity) ? String(C2.identity) : "", metadata: z2(C2.metadata) ? String(C2.metadata) : "", permission: z2(C2.permission) ? v2.ParticipantPermission.fromJSON(C2.permission) : void 0, name: z2(C2.name) ? String(C2.name) : "" };
  }, toJSON(C2) {
    const b = {};
    return C2.room !== void 0 && (b.room = C2.room), C2.identity !== void 0 && (b.identity = C2.identity), C2.metadata !== void 0 && (b.metadata = C2.metadata), C2.permission !== void 0 && (b.permission = C2.permission ? v2.ParticipantPermission.toJSON(C2.permission) : void 0), C2.name !== void 0 && (b.name = C2.name), b;
  }, fromPartial(C2) {
    var b, E2, k, O2;
    const A2 = ne2();
    return A2.room = (b = C2.room) !== null && b !== void 0 ? b : "", A2.identity = (E2 = C2.identity) !== null && E2 !== void 0 ? E2 : "", A2.metadata = (k = C2.metadata) !== null && k !== void 0 ? k : "", A2.permission = C2.permission !== void 0 && C2.permission !== null ? v2.ParticipantPermission.fromPartial(C2.permission) : void 0, A2.name = (O2 = C2.name) !== null && O2 !== void 0 ? O2 : "", A2;
  } };
  function Z2() {
    return { room: "", identity: "", trackSids: [], subscribe: false, participantTracks: [] };
  }
  a420.UpdateSubscriptionsRequest = { encode(C2, b = c.default.Writer.create()) {
    if (C2.room !== void 0 && C2.room !== "" && b.uint32(10).string(C2.room), C2.identity !== void 0 && C2.identity !== "" && b.uint32(18).string(C2.identity), C2.trackSids !== void 0 && C2.trackSids.length !== 0)
      for (const E2 of C2.trackSids)
        b.uint32(26).string(E2);
    if (C2.subscribe === true && b.uint32(32).bool(C2.subscribe), C2.participantTracks !== void 0 && C2.participantTracks.length !== 0)
      for (const E2 of C2.participantTracks)
        v2.ParticipantTracks.encode(E2, b.uint32(42).fork()).ldelim();
    return b;
  }, decode(C2, b) {
    const E2 = C2 instanceof c.default.Reader ? C2 : new c.default.Reader(C2);
    let k = b === void 0 ? E2.len : E2.pos + b;
    const O2 = Z2();
    for (; E2.pos < k; ) {
      const A2 = E2.uint32();
      switch (A2 >>> 3) {
        case 1:
          O2.room = E2.string();
          break;
        case 2:
          O2.identity = E2.string();
          break;
        case 3:
          O2.trackSids.push(E2.string());
          break;
        case 4:
          O2.subscribe = E2.bool();
          break;
        case 5:
          O2.participantTracks.push(v2.ParticipantTracks.decode(E2, E2.uint32()));
          break;
        default:
          E2.skipType(A2 & 7);
          break;
      }
    }
    return O2;
  }, fromJSON(C2) {
    return { room: z2(C2.room) ? String(C2.room) : "", identity: z2(C2.identity) ? String(C2.identity) : "", trackSids: Array.isArray(C2 == null ? void 0 : C2.trackSids) ? C2.trackSids.map((b) => String(b)) : [], subscribe: z2(C2.subscribe) ? !!C2.subscribe : false, participantTracks: Array.isArray(C2 == null ? void 0 : C2.participantTracks) ? C2.participantTracks.map((b) => v2.ParticipantTracks.fromJSON(b)) : [] };
  }, toJSON(C2) {
    const b = {};
    return C2.room !== void 0 && (b.room = C2.room), C2.identity !== void 0 && (b.identity = C2.identity), C2.trackSids ? b.trackSids = C2.trackSids.map((E2) => E2) : b.trackSids = [], C2.subscribe !== void 0 && (b.subscribe = C2.subscribe), C2.participantTracks ? b.participantTracks = C2.participantTracks.map((E2) => E2 ? v2.ParticipantTracks.toJSON(E2) : void 0) : b.participantTracks = [], b;
  }, fromPartial(C2) {
    var b, E2, k, O2, A2;
    const x2 = Z2();
    return x2.room = (b = C2.room) !== null && b !== void 0 ? b : "", x2.identity = (E2 = C2.identity) !== null && E2 !== void 0 ? E2 : "", x2.trackSids = ((k = C2.trackSids) === null || k === void 0 ? void 0 : k.map((Y2) => Y2)) || [], x2.subscribe = (O2 = C2.subscribe) !== null && O2 !== void 0 ? O2 : false, x2.participantTracks = ((A2 = C2.participantTracks) === null || A2 === void 0 ? void 0 : A2.map((Y2) => v2.ParticipantTracks.fromPartial(Y2))) || [], x2;
  } };
  function de2() {
    return {};
  }
  a420.UpdateSubscriptionsResponse = { encode(C2, b = c.default.Writer.create()) {
    return b;
  }, decode(C2, b) {
    const E2 = C2 instanceof c.default.Reader ? C2 : new c.default.Reader(C2);
    let k = b === void 0 ? E2.len : E2.pos + b;
    const O2 = de2();
    for (; E2.pos < k; ) {
      const A2 = E2.uint32();
      switch (A2 >>> 3) {
        default:
          E2.skipType(A2 & 7);
          break;
      }
    }
    return O2;
  }, fromJSON(C2) {
    return {};
  }, toJSON(C2) {
    return {};
  }, fromPartial(C2) {
    return de2();
  } };
  function pe2() {
    return { room: "", data: new Uint8Array(), kind: 0, destinationSids: [] };
  }
  a420.SendDataRequest = { encode(C2, b = c.default.Writer.create()) {
    if (C2.room !== void 0 && C2.room !== "" && b.uint32(10).string(C2.room), C2.data !== void 0 && C2.data.length !== 0 && b.uint32(18).bytes(C2.data), C2.kind !== void 0 && C2.kind !== 0 && b.uint32(24).int32(C2.kind), C2.destinationSids !== void 0 && C2.destinationSids.length !== 0)
      for (const E2 of C2.destinationSids)
        b.uint32(34).string(E2);
    return b;
  }, decode(C2, b) {
    const E2 = C2 instanceof c.default.Reader ? C2 : new c.default.Reader(C2);
    let k = b === void 0 ? E2.len : E2.pos + b;
    const O2 = pe2();
    for (; E2.pos < k; ) {
      const A2 = E2.uint32();
      switch (A2 >>> 3) {
        case 1:
          O2.room = E2.string();
          break;
        case 2:
          O2.data = E2.bytes();
          break;
        case 3:
          O2.kind = E2.int32();
          break;
        case 4:
          O2.destinationSids.push(E2.string());
          break;
        default:
          E2.skipType(A2 & 7);
          break;
      }
    }
    return O2;
  }, fromJSON(C2) {
    return { room: z2(C2.room) ? String(C2.room) : "", data: z2(C2.data) ? Te2(C2.data) : new Uint8Array(), kind: z2(C2.kind) ? v2.dataPacket_KindFromJSON(C2.kind) : 0, destinationSids: Array.isArray(C2 == null ? void 0 : C2.destinationSids) ? C2.destinationSids.map((b) => String(b)) : [] };
  }, toJSON(C2) {
    const b = {};
    return C2.room !== void 0 && (b.room = C2.room), C2.data !== void 0 && (b.data = q2(C2.data !== void 0 ? C2.data : new Uint8Array())), C2.kind !== void 0 && (b.kind = v2.dataPacket_KindToJSON(C2.kind)), C2.destinationSids ? b.destinationSids = C2.destinationSids.map((E2) => E2) : b.destinationSids = [], b;
  }, fromPartial(C2) {
    var b, E2, k, O2;
    const A2 = pe2();
    return A2.room = (b = C2.room) !== null && b !== void 0 ? b : "", A2.data = (E2 = C2.data) !== null && E2 !== void 0 ? E2 : new Uint8Array(), A2.kind = (k = C2.kind) !== null && k !== void 0 ? k : 0, A2.destinationSids = ((O2 = C2.destinationSids) === null || O2 === void 0 ? void 0 : O2.map((x2) => x2)) || [], A2;
  } };
  function le2() {
    return {};
  }
  a420.SendDataResponse = { encode(C2, b = c.default.Writer.create()) {
    return b;
  }, decode(C2, b) {
    const E2 = C2 instanceof c.default.Reader ? C2 : new c.default.Reader(C2);
    let k = b === void 0 ? E2.len : E2.pos + b;
    const O2 = le2();
    for (; E2.pos < k; ) {
      const A2 = E2.uint32();
      switch (A2 >>> 3) {
        default:
          E2.skipType(A2 & 7);
          break;
      }
    }
    return O2;
  }, fromJSON(C2) {
    return {};
  }, toJSON(C2) {
    return {};
  }, fromPartial(C2) {
    return le2();
  } };
  function be2() {
    return { room: "", metadata: "" };
  }
  a420.UpdateRoomMetadataRequest = { encode(C2, b = c.default.Writer.create()) {
    return C2.room !== void 0 && C2.room !== "" && b.uint32(10).string(C2.room), C2.metadata !== void 0 && C2.metadata !== "" && b.uint32(18).string(C2.metadata), b;
  }, decode(C2, b) {
    const E2 = C2 instanceof c.default.Reader ? C2 : new c.default.Reader(C2);
    let k = b === void 0 ? E2.len : E2.pos + b;
    const O2 = be2();
    for (; E2.pos < k; ) {
      const A2 = E2.uint32();
      switch (A2 >>> 3) {
        case 1:
          O2.room = E2.string();
          break;
        case 2:
          O2.metadata = E2.string();
          break;
        default:
          E2.skipType(A2 & 7);
          break;
      }
    }
    return O2;
  }, fromJSON(C2) {
    return { room: z2(C2.room) ? String(C2.room) : "", metadata: z2(C2.metadata) ? String(C2.metadata) : "" };
  }, toJSON(C2) {
    const b = {};
    return C2.room !== void 0 && (b.room = C2.room), C2.metadata !== void 0 && (b.metadata = C2.metadata), b;
  }, fromPartial(C2) {
    var b, E2;
    const k = be2();
    return k.room = (b = C2.room) !== null && b !== void 0 ? b : "", k.metadata = (E2 = C2.metadata) !== null && E2 !== void 0 ? E2 : "", k;
  } };
  var ke2 = (() => {
    if (typeof ke2 < "u")
      return ke2;
    if (typeof self < "u")
      return self;
    if (typeof window < "u")
      return window;
    if (typeof commonjsGlobal$1 < "u")
      return commonjsGlobal$1;
    throw "Unable to locate global object";
  })();
  function Te2(C2) {
    if (ke2.Buffer)
      return Uint8Array.from(ke2.Buffer.from(C2, "base64"));
    {
      const b = ke2.atob(C2), E2 = new Uint8Array(b.length);
      for (let k = 0; k < b.length; ++k)
        E2[k] = b.charCodeAt(k);
      return E2;
    }
  }
  function q2(C2) {
    if (ke2.Buffer)
      return ke2.Buffer.from(C2).toString("base64");
    {
      const b = [];
      return C2.forEach((E2) => {
        b.push(String.fromCharCode(E2));
      }), ke2.btoa(b.join(""));
    }
  }
  function z2(C2) {
    return C2 != null;
  }
})(livekit_room);
var __awaiter$1 = commonjsGlobal$1 && commonjsGlobal$1.__awaiter || function(a420, u2, c, l2) {
  function v2(p2) {
    return p2 instanceof c ? p2 : new c(function(_) {
      _(p2);
    });
  }
  return new (c || (c = Promise))(function(p2, _) {
    function I2(F2) {
      try {
        $(l2.next(F2));
      } catch (H2) {
        _(H2);
      }
    }
    function P2(F2) {
      try {
        $(l2.throw(F2));
      } catch (H2) {
        _(H2);
      }
    }
    function $(F2) {
      F2.done ? p2(F2.value) : v2(F2.value).then(I2, P2);
    }
    $((l2 = l2.apply(a420, u2 || [])).next());
  });
}, __importDefault$2 = commonjsGlobal$1 && commonjsGlobal$1.__importDefault || function(a420) {
  return a420 && a420.__esModule ? a420 : { default: a420 };
};
Object.defineProperty(RoomServiceClient$1, "__esModule", { value: true });
RoomServiceClient$1.RoomServiceClient = void 0;
const livekit_models_1$1 = livekit_models, livekit_room_1 = livekit_room, ServiceBase_1 = __importDefault$2(ServiceBase$1), TwirpRPC_1 = TwirpRPC, svc = "RoomService";
class RoomServiceClient extends ServiceBase_1.default {
  /**
  *
  * @param host hostname including protocol. i.e. 'https://cluster.livekit.io'
  * @param apiKey API Key, can be set in env var LIVEKIT_API_KEY
  * @param secret API Secret, can be set in env var LIVEKIT_API_SECRET
  * @param jwt JWT Token, a pregenerated JWT token for authentication.
  * @param hostHeader A host header to send with the request.
  *
  */
  constructor(u2, c, l2, v2, p2) {
    super(c, l2), this.jwt = v2, this.rpc = new TwirpRPC_1.TwirpRpc(u2, TwirpRPC_1.livekitPackage, void 0, p2);
  }
  /**
  * Creates a new room. Explicit room creation is not required, since rooms will
  * be automatically created when the first participant joins. This method can be
  * used to customize room settings.
  * @param options
  */
  createRoom(u2) {
    return __awaiter$1(this, void 0, void 0, function* () {
      const c = yield this.rpc.request(svc, "CreateRoom", livekit_room_1.CreateRoomRequest.toJSON(livekit_room_1.CreateRoomRequest.fromPartial(u2)), this.authHeader({ roomCreate: true }));
      return livekit_models_1$1.Room.fromJSON(c);
    });
  }
  /**
  * List active rooms
  * @param names when undefined or empty, list all rooms.
  *              otherwise returns rooms with matching names
  * @returns
  */
  listRooms(u2) {
    var c;
    return __awaiter$1(this, void 0, void 0, function* () {
      const l2 = yield this.rpc.request(svc, "ListRooms", livekit_room_1.ListRoomsRequest.toJSON({ names: u2 ?? [] }), this.authHeader({ roomList: true }));
      return (c = livekit_room_1.ListRoomsResponse.fromJSON(l2).rooms) !== null && c !== void 0 ? c : [];
    });
  }
  deleteRoom(u2) {
    return __awaiter$1(this, void 0, void 0, function* () {
      yield this.rpc.request(svc, "DeleteRoom", livekit_room_1.DeleteRoomRequest.toJSON({ room: u2 }), this.authHeader({ roomCreate: true }));
    });
  }
  /**
  * Update metadata of a room
  * @param room name of the room
  * @param metadata the new metadata for the room
  */
  updateRoomMetadata(u2, c) {
    return __awaiter$1(this, void 0, void 0, function* () {
      const l2 = yield this.rpc.request(svc, "UpdateRoomMetadata", livekit_room_1.UpdateRoomMetadataRequest.toJSON({ room: u2, metadata: c }), this.authHeader({ roomAdmin: true, room: u2 }));
      return livekit_models_1$1.Room.fromJSON(l2);
    });
  }
  /**
  * List participants in a room
  * @param room name of the room
  */
  listParticipants(u2) {
    var c;
    return __awaiter$1(this, void 0, void 0, function* () {
      const l2 = yield this.rpc.request(svc, "ListParticipants", livekit_room_1.ListParticipantsRequest.toJSON({ room: u2 }), this.authHeader({ roomAdmin: true, room: u2 }));
      return (c = livekit_room_1.ListParticipantsResponse.fromJSON(l2).participants) !== null && c !== void 0 ? c : [];
    });
  }
  /**
  * Get information on a specific participant, including the tracks that participant
  * has published
  * @param room name of the room
  * @param identity identity of the participant to return
  */
  getParticipant(u2, c) {
    return __awaiter$1(this, void 0, void 0, function* () {
      const l2 = yield this.rpc.request(svc, "GetParticipant", livekit_room_1.RoomParticipantIdentity.toJSON({ room: u2, identity: c }), this.authHeader({ roomAdmin: true, room: u2 }));
      return livekit_models_1$1.ParticipantInfo.fromJSON(l2);
    });
  }
  /**
  * Removes a participant in the room. This will disconnect the participant
  * and will emit a Disconnected event for that participant.
  * Even after being removed, the participant can still re-join the room.
  * @param room
  * @param identity
  */
  removeParticipant(u2, c) {
    return __awaiter$1(this, void 0, void 0, function* () {
      yield this.rpc.request(svc, "RemoveParticipant", livekit_room_1.RoomParticipantIdentity.toJSON({ room: u2, identity: c }), this.authHeader({ roomAdmin: true, room: u2 }));
    });
  }
  /**
  * Mutes a track that the participant has published.
  * @param room
  * @param identity
  * @param trackSid sid of the track to be muted
  * @param muted true to mute, false to unmute
  */
  mutePublishedTrack(u2, c, l2, v2) {
    return __awaiter$1(this, void 0, void 0, function* () {
      const p2 = livekit_room_1.MuteRoomTrackRequest.toJSON({ room: u2, identity: c, trackSid: l2, muted: v2 }), _ = yield this.rpc.request(svc, "MutePublishedTrack", p2, this.authHeader({ roomAdmin: true, room: u2 }));
      return livekit_room_1.MuteRoomTrackResponse.fromJSON(_).track;
    });
  }
  /**
  * Updates a participant's metadata or permissions
  * @param room
  * @param identity
  * @param metadata optional, metadata to update
  * @param permission optional, new permissions to assign to participant
  * @param name optional, new name for participant
  */
  updateParticipant(u2, c, l2, v2, p2) {
    return __awaiter$1(this, void 0, void 0, function* () {
      const _ = { room: u2, identity: c, metadata: l2 || "", permission: v2, name: p2 || "" }, I2 = yield this.rpc.request(svc, "UpdateParticipant", livekit_room_1.UpdateParticipantRequest.toJSON(_), this.authHeader({ roomAdmin: true, room: u2 }));
      return livekit_models_1$1.ParticipantInfo.fromJSON(I2);
    });
  }
  /**
  * Updates a participant's subscription to tracks
  * @param room
  * @param identity
  * @param trackSids
  * @param subscribe true to subscribe, false to unsubscribe
  */
  updateSubscriptions(u2, c, l2, v2) {
    return __awaiter$1(this, void 0, void 0, function* () {
      const p2 = livekit_room_1.UpdateSubscriptionsRequest.toJSON({ room: u2, identity: c, trackSids: l2, subscribe: v2, participantTracks: [] });
      yield this.rpc.request(svc, "UpdateSubscriptions", p2, this.authHeader({ roomAdmin: true, room: u2 }));
    });
  }
  /**
  * Sends data message to participants in the room
  * @param room
  * @param data opaque payload to send
  * @param kind delivery reliability
  * @param destinationSids optional. when empty, message is sent to everyone
  */
  sendData(u2, c, l2, v2 = []) {
    return __awaiter$1(this, void 0, void 0, function* () {
      const p2 = livekit_room_1.SendDataRequest.toJSON({ room: u2, data: c, kind: l2, destinationSids: v2 });
      yield this.rpc.request(svc, "SendData", p2, this.authHeader({ roomAdmin: true, room: u2 }));
    });
  }
  authHeader(u2) {
    return this.jwt ? { Authorization: `Bearer ${this.jwt}` } : super.authHeader(u2);
  }
}
RoomServiceClient$1.RoomServiceClient = RoomServiceClient;
var WebhookReceiver$1 = {}, livekit_webhook = {}, __importDefault$1 = commonjsGlobal$1 && commonjsGlobal$1.__importDefault || function(a420) {
  return a420 && a420.__esModule ? a420 : { default: a420 };
};
Object.defineProperty(livekit_webhook, "__esModule", { value: true });
livekit_webhook.WebhookEvent = livekit_webhook.protobufPackage = void 0;
const long_1 = __importDefault$1(umdExports), minimal_1 = __importDefault$1(minimal), livekit_egress_1 = livekit_egress, livekit_ingress_1 = livekit_ingress, livekit_models_1 = livekit_models;
livekit_webhook.protobufPackage = "livekit";
function createBaseWebhookEvent() {
  return { event: "", room: void 0, participant: void 0, egressInfo: void 0, ingressInfo: void 0, track: void 0, id: "", createdAt: 0 };
}
livekit_webhook.WebhookEvent = { encode(a420, u2 = minimal_1.default.Writer.create()) {
  return a420.event !== void 0 && a420.event !== "" && u2.uint32(10).string(a420.event), a420.room !== void 0 && livekit_models_1.Room.encode(a420.room, u2.uint32(18).fork()).ldelim(), a420.participant !== void 0 && livekit_models_1.ParticipantInfo.encode(a420.participant, u2.uint32(26).fork()).ldelim(), a420.egressInfo !== void 0 && livekit_egress_1.EgressInfo.encode(a420.egressInfo, u2.uint32(74).fork()).ldelim(), a420.ingressInfo !== void 0 && livekit_ingress_1.IngressInfo.encode(a420.ingressInfo, u2.uint32(82).fork()).ldelim(), a420.track !== void 0 && livekit_models_1.TrackInfo.encode(a420.track, u2.uint32(66).fork()).ldelim(), a420.id !== void 0 && a420.id !== "" && u2.uint32(50).string(a420.id), a420.createdAt !== void 0 && a420.createdAt !== 0 && u2.uint32(56).int64(a420.createdAt), u2;
}, decode(a420, u2) {
  const c = a420 instanceof minimal_1.default.Reader ? a420 : new minimal_1.default.Reader(a420);
  let l2 = u2 === void 0 ? c.len : c.pos + u2;
  const v2 = createBaseWebhookEvent();
  for (; c.pos < l2; ) {
    const p2 = c.uint32();
    switch (p2 >>> 3) {
      case 1:
        v2.event = c.string();
        break;
      case 2:
        v2.room = livekit_models_1.Room.decode(c, c.uint32());
        break;
      case 3:
        v2.participant = livekit_models_1.ParticipantInfo.decode(c, c.uint32());
        break;
      case 9:
        v2.egressInfo = livekit_egress_1.EgressInfo.decode(c, c.uint32());
        break;
      case 10:
        v2.ingressInfo = livekit_ingress_1.IngressInfo.decode(c, c.uint32());
        break;
      case 8:
        v2.track = livekit_models_1.TrackInfo.decode(c, c.uint32());
        break;
      case 6:
        v2.id = c.string();
        break;
      case 7:
        v2.createdAt = longToNumber(c.int64());
        break;
      default:
        c.skipType(p2 & 7);
        break;
    }
  }
  return v2;
}, fromJSON(a420) {
  return { event: isSet(a420.event) ? String(a420.event) : "", room: isSet(a420.room) ? livekit_models_1.Room.fromJSON(a420.room) : void 0, participant: isSet(a420.participant) ? livekit_models_1.ParticipantInfo.fromJSON(a420.participant) : void 0, egressInfo: isSet(a420.egressInfo) ? livekit_egress_1.EgressInfo.fromJSON(a420.egressInfo) : void 0, ingressInfo: isSet(a420.ingressInfo) ? livekit_ingress_1.IngressInfo.fromJSON(a420.ingressInfo) : void 0, track: isSet(a420.track) ? livekit_models_1.TrackInfo.fromJSON(a420.track) : void 0, id: isSet(a420.id) ? String(a420.id) : "", createdAt: isSet(a420.createdAt) ? Number(a420.createdAt) : 0 };
}, toJSON(a420) {
  const u2 = {};
  return a420.event !== void 0 && (u2.event = a420.event), a420.room !== void 0 && (u2.room = a420.room ? livekit_models_1.Room.toJSON(a420.room) : void 0), a420.participant !== void 0 && (u2.participant = a420.participant ? livekit_models_1.ParticipantInfo.toJSON(a420.participant) : void 0), a420.egressInfo !== void 0 && (u2.egressInfo = a420.egressInfo ? livekit_egress_1.EgressInfo.toJSON(a420.egressInfo) : void 0), a420.ingressInfo !== void 0 && (u2.ingressInfo = a420.ingressInfo ? livekit_ingress_1.IngressInfo.toJSON(a420.ingressInfo) : void 0), a420.track !== void 0 && (u2.track = a420.track ? livekit_models_1.TrackInfo.toJSON(a420.track) : void 0), a420.id !== void 0 && (u2.id = a420.id), a420.createdAt !== void 0 && (u2.createdAt = Math.round(a420.createdAt)), u2;
}, fromPartial(a420) {
  var u2, c, l2;
  const v2 = createBaseWebhookEvent();
  return v2.event = (u2 = a420.event) !== null && u2 !== void 0 ? u2 : "", v2.room = a420.room !== void 0 && a420.room !== null ? livekit_models_1.Room.fromPartial(a420.room) : void 0, v2.participant = a420.participant !== void 0 && a420.participant !== null ? livekit_models_1.ParticipantInfo.fromPartial(a420.participant) : void 0, v2.egressInfo = a420.egressInfo !== void 0 && a420.egressInfo !== null ? livekit_egress_1.EgressInfo.fromPartial(a420.egressInfo) : void 0, v2.ingressInfo = a420.ingressInfo !== void 0 && a420.ingressInfo !== null ? livekit_ingress_1.IngressInfo.fromPartial(a420.ingressInfo) : void 0, v2.track = a420.track !== void 0 && a420.track !== null ? livekit_models_1.TrackInfo.fromPartial(a420.track) : void 0, v2.id = (c = a420.id) !== null && c !== void 0 ? c : "", v2.createdAt = (l2 = a420.createdAt) !== null && l2 !== void 0 ? l2 : 0, v2;
} };
var globalThis$1 = (() => {
  if (typeof globalThis$1 < "u")
    return globalThis$1;
  if (typeof self < "u")
    return self;
  if (typeof window < "u")
    return window;
  if (typeof commonjsGlobal$1 < "u")
    return commonjsGlobal$1;
  throw "Unable to locate global object";
})();
function longToNumber(a420) {
  if (a420.gt(Number.MAX_SAFE_INTEGER))
    throw new globalThis$1.Error("Value is larger than Number.MAX_SAFE_INTEGER");
  return a420.toNumber();
}
minimal_1.default.util.Long !== long_1.default && (minimal_1.default.util.Long = long_1.default, minimal_1.default.configure());
function isSet(a420) {
  return a420 != null;
}
var __importDefault = commonjsGlobal$1 && commonjsGlobal$1.__importDefault || function(a420) {
  return a420 && a420.__esModule ? a420 : { default: a420 };
};
Object.defineProperty(WebhookReceiver$1, "__esModule", { value: true });
WebhookReceiver$1.WebhookReceiver = WebhookReceiver$1.authorizeHeader = void 0;
const crypto_1 = __importDefault(requireCryptoBrowserify()), AccessToken_1 = AccessToken$1, livekit_webhook_1 = livekit_webhook;
WebhookReceiver$1.authorizeHeader = "Authorize";
class WebhookReceiver {
  constructor(u2, c) {
    this.verifier = new AccessToken_1.TokenVerifier(u2, c);
  }
  /**
  *
  * @param body string of the posted body
  * @param authHeader `Authorization` header from the request
  * @param skipAuth true to skip auth validation
  * @returns
  */
  receive(u2, c, l2 = false) {
    if (!l2) {
      if (!c)
        throw new Error("authorization header is empty");
      const v2 = this.verifier.verify(c), p2 = crypto_1.default.createHash("sha256");
      if (p2.update(u2), v2.sha256 !== p2.digest("base64"))
        throw new Error("sha256 checksum of body does not match");
    }
    return livekit_webhook_1.WebhookEvent.fromJSON(JSON.parse(u2));
  }
}
WebhookReceiver$1.WebhookReceiver = WebhookReceiver;
var livekit_internal = {}, livekit_rtc = {};
(function(a420) {
  var u2 = commonjsGlobal$1 && commonjsGlobal$1.__importDefault || function(N2) {
    return N2 && N2.__esModule ? N2 : { default: N2 };
  };
  Object.defineProperty(a420, "__esModule", { value: true }), a420.SimulateScenario = a420.DataChannelInfo = a420.SyncState = a420.SubscriptionPermissionUpdate = a420.SubscriptionPermission = a420.TrackPermission = a420.SubscribedQualityUpdate = a420.SubscribedCodec = a420.SubscribedQuality = a420.StreamStateUpdate = a420.StreamStateInfo = a420.ConnectionQualityUpdate = a420.ConnectionQualityInfo = a420.RoomUpdate = a420.SpeakersChanged = a420.ICEServer = a420.UpdateVideoLayers = a420.LeaveRequest = a420.UpdateTrackSettings = a420.UpdateSubscription = a420.ParticipantUpdate = a420.SessionDescription = a420.TrackUnpublishedResponse = a420.TrackPublishedResponse = a420.JoinResponse = a420.MuteTrackRequest = a420.TrickleRequest = a420.AddTrackRequest = a420.SimulcastCodec = a420.SignalResponse = a420.SignalRequest = a420.candidateProtocolToJSON = a420.candidateProtocolFromJSON = a420.CandidateProtocol = a420.streamStateToJSON = a420.streamStateFromJSON = a420.StreamState = a420.signalTargetToJSON = a420.signalTargetFromJSON = a420.SignalTarget = a420.protobufPackage = void 0;
  const c = u2(umdExports), l2 = u2(minimal), v2 = livekit_models;
  a420.protobufPackage = "livekit";
  var p2;
  (function(N2) {
    N2[N2.PUBLISHER = 0] = "PUBLISHER", N2[N2.SUBSCRIBER = 1] = "SUBSCRIBER", N2[N2.UNRECOGNIZED = -1] = "UNRECOGNIZED";
  })(p2 = a420.SignalTarget || (a420.SignalTarget = {}));
  function _(N2) {
    switch (N2) {
      case 0:
      case "PUBLISHER":
        return p2.PUBLISHER;
      case 1:
      case "SUBSCRIBER":
        return p2.SUBSCRIBER;
      case -1:
      case "UNRECOGNIZED":
      default:
        return p2.UNRECOGNIZED;
    }
  }
  a420.signalTargetFromJSON = _;
  function I2(N2) {
    switch (N2) {
      case p2.PUBLISHER:
        return "PUBLISHER";
      case p2.SUBSCRIBER:
        return "SUBSCRIBER";
      case p2.UNRECOGNIZED:
      default:
        return "UNRECOGNIZED";
    }
  }
  a420.signalTargetToJSON = I2;
  var P2;
  (function(N2) {
    N2[N2.ACTIVE = 0] = "ACTIVE", N2[N2.PAUSED = 1] = "PAUSED", N2[N2.UNRECOGNIZED = -1] = "UNRECOGNIZED";
  })(P2 = a420.StreamState || (a420.StreamState = {}));
  function $(N2) {
    switch (N2) {
      case 0:
      case "ACTIVE":
        return P2.ACTIVE;
      case 1:
      case "PAUSED":
        return P2.PAUSED;
      case -1:
      case "UNRECOGNIZED":
      default:
        return P2.UNRECOGNIZED;
    }
  }
  a420.streamStateFromJSON = $;
  function F2(N2) {
    switch (N2) {
      case P2.ACTIVE:
        return "ACTIVE";
      case P2.PAUSED:
        return "PAUSED";
      case P2.UNRECOGNIZED:
      default:
        return "UNRECOGNIZED";
    }
  }
  a420.streamStateToJSON = F2;
  var H2;
  (function(N2) {
    N2[N2.UDP = 0] = "UDP", N2[N2.TCP = 1] = "TCP", N2[N2.TLS = 2] = "TLS", N2[N2.UNRECOGNIZED = -1] = "UNRECOGNIZED";
  })(H2 = a420.CandidateProtocol || (a420.CandidateProtocol = {}));
  function j(N2) {
    switch (N2) {
      case 0:
      case "UDP":
        return H2.UDP;
      case 1:
      case "TCP":
        return H2.TCP;
      case 2:
      case "TLS":
        return H2.TLS;
      case -1:
      case "UNRECOGNIZED":
      default:
        return H2.UNRECOGNIZED;
    }
  }
  a420.candidateProtocolFromJSON = j;
  function ee2(N2) {
    switch (N2) {
      case H2.UDP:
        return "UDP";
      case H2.TCP:
        return "TCP";
      case H2.TLS:
        return "TLS";
      case H2.UNRECOGNIZED:
      default:
        return "UNRECOGNIZED";
    }
  }
  a420.candidateProtocolToJSON = ee2;
  function X2() {
    return { offer: void 0, answer: void 0, trickle: void 0, addTrack: void 0, mute: void 0, subscription: void 0, trackSetting: void 0, leave: void 0, updateLayers: void 0, subscriptionPermission: void 0, syncState: void 0, simulate: void 0, ping: void 0 };
  }
  a420.SignalRequest = { encode(N2, re2 = l2.default.Writer.create()) {
    return N2.offer !== void 0 && a420.SessionDescription.encode(N2.offer, re2.uint32(10).fork()).ldelim(), N2.answer !== void 0 && a420.SessionDescription.encode(N2.answer, re2.uint32(18).fork()).ldelim(), N2.trickle !== void 0 && a420.TrickleRequest.encode(N2.trickle, re2.uint32(26).fork()).ldelim(), N2.addTrack !== void 0 && a420.AddTrackRequest.encode(N2.addTrack, re2.uint32(34).fork()).ldelim(), N2.mute !== void 0 && a420.MuteTrackRequest.encode(N2.mute, re2.uint32(42).fork()).ldelim(), N2.subscription !== void 0 && a420.UpdateSubscription.encode(N2.subscription, re2.uint32(50).fork()).ldelim(), N2.trackSetting !== void 0 && a420.UpdateTrackSettings.encode(N2.trackSetting, re2.uint32(58).fork()).ldelim(), N2.leave !== void 0 && a420.LeaveRequest.encode(N2.leave, re2.uint32(66).fork()).ldelim(), N2.updateLayers !== void 0 && a420.UpdateVideoLayers.encode(N2.updateLayers, re2.uint32(82).fork()).ldelim(), N2.subscriptionPermission !== void 0 && a420.SubscriptionPermission.encode(N2.subscriptionPermission, re2.uint32(90).fork()).ldelim(), N2.syncState !== void 0 && a420.SyncState.encode(N2.syncState, re2.uint32(98).fork()).ldelim(), N2.simulate !== void 0 && a420.SimulateScenario.encode(N2.simulate, re2.uint32(106).fork()).ldelim(), N2.ping !== void 0 && re2.uint32(112).int64(N2.ping), re2;
  }, decode(N2, re2) {
    const fe2 = N2 instanceof l2.default.Reader ? N2 : new l2.default.Reader(N2);
    let Ne2 = re2 === void 0 ? fe2.len : fe2.pos + re2;
    const Oe2 = X2();
    for (; fe2.pos < Ne2; ) {
      const qe2 = fe2.uint32();
      switch (qe2 >>> 3) {
        case 1:
          Oe2.offer = a420.SessionDescription.decode(fe2, fe2.uint32());
          break;
        case 2:
          Oe2.answer = a420.SessionDescription.decode(fe2, fe2.uint32());
          break;
        case 3:
          Oe2.trickle = a420.TrickleRequest.decode(fe2, fe2.uint32());
          break;
        case 4:
          Oe2.addTrack = a420.AddTrackRequest.decode(fe2, fe2.uint32());
          break;
        case 5:
          Oe2.mute = a420.MuteTrackRequest.decode(fe2, fe2.uint32());
          break;
        case 6:
          Oe2.subscription = a420.UpdateSubscription.decode(fe2, fe2.uint32());
          break;
        case 7:
          Oe2.trackSetting = a420.UpdateTrackSettings.decode(fe2, fe2.uint32());
          break;
        case 8:
          Oe2.leave = a420.LeaveRequest.decode(fe2, fe2.uint32());
          break;
        case 10:
          Oe2.updateLayers = a420.UpdateVideoLayers.decode(fe2, fe2.uint32());
          break;
        case 11:
          Oe2.subscriptionPermission = a420.SubscriptionPermission.decode(fe2, fe2.uint32());
          break;
        case 12:
          Oe2.syncState = a420.SyncState.decode(fe2, fe2.uint32());
          break;
        case 13:
          Oe2.simulate = a420.SimulateScenario.decode(fe2, fe2.uint32());
          break;
        case 14:
          Oe2.ping = xe2(fe2.int64());
          break;
        default:
          fe2.skipType(qe2 & 7);
          break;
      }
    }
    return Oe2;
  }, fromJSON(N2) {
    return { offer: ae2(N2.offer) ? a420.SessionDescription.fromJSON(N2.offer) : void 0, answer: ae2(N2.answer) ? a420.SessionDescription.fromJSON(N2.answer) : void 0, trickle: ae2(N2.trickle) ? a420.TrickleRequest.fromJSON(N2.trickle) : void 0, addTrack: ae2(N2.addTrack) ? a420.AddTrackRequest.fromJSON(N2.addTrack) : void 0, mute: ae2(N2.mute) ? a420.MuteTrackRequest.fromJSON(N2.mute) : void 0, subscription: ae2(N2.subscription) ? a420.UpdateSubscription.fromJSON(N2.subscription) : void 0, trackSetting: ae2(N2.trackSetting) ? a420.UpdateTrackSettings.fromJSON(N2.trackSetting) : void 0, leave: ae2(N2.leave) ? a420.LeaveRequest.fromJSON(N2.leave) : void 0, updateLayers: ae2(N2.updateLayers) ? a420.UpdateVideoLayers.fromJSON(N2.updateLayers) : void 0, subscriptionPermission: ae2(N2.subscriptionPermission) ? a420.SubscriptionPermission.fromJSON(N2.subscriptionPermission) : void 0, syncState: ae2(N2.syncState) ? a420.SyncState.fromJSON(N2.syncState) : void 0, simulate: ae2(N2.simulate) ? a420.SimulateScenario.fromJSON(N2.simulate) : void 0, ping: ae2(N2.ping) ? Number(N2.ping) : void 0 };
  }, toJSON(N2) {
    const re2 = {};
    return N2.offer !== void 0 && (re2.offer = N2.offer ? a420.SessionDescription.toJSON(N2.offer) : void 0), N2.answer !== void 0 && (re2.answer = N2.answer ? a420.SessionDescription.toJSON(N2.answer) : void 0), N2.trickle !== void 0 && (re2.trickle = N2.trickle ? a420.TrickleRequest.toJSON(N2.trickle) : void 0), N2.addTrack !== void 0 && (re2.addTrack = N2.addTrack ? a420.AddTrackRequest.toJSON(N2.addTrack) : void 0), N2.mute !== void 0 && (re2.mute = N2.mute ? a420.MuteTrackRequest.toJSON(N2.mute) : void 0), N2.subscription !== void 0 && (re2.subscription = N2.subscription ? a420.UpdateSubscription.toJSON(N2.subscription) : void 0), N2.trackSetting !== void 0 && (re2.trackSetting = N2.trackSetting ? a420.UpdateTrackSettings.toJSON(N2.trackSetting) : void 0), N2.leave !== void 0 && (re2.leave = N2.leave ? a420.LeaveRequest.toJSON(N2.leave) : void 0), N2.updateLayers !== void 0 && (re2.updateLayers = N2.updateLayers ? a420.UpdateVideoLayers.toJSON(N2.updateLayers) : void 0), N2.subscriptionPermission !== void 0 && (re2.subscriptionPermission = N2.subscriptionPermission ? a420.SubscriptionPermission.toJSON(N2.subscriptionPermission) : void 0), N2.syncState !== void 0 && (re2.syncState = N2.syncState ? a420.SyncState.toJSON(N2.syncState) : void 0), N2.simulate !== void 0 && (re2.simulate = N2.simulate ? a420.SimulateScenario.toJSON(N2.simulate) : void 0), N2.ping !== void 0 && (re2.ping = Math.round(N2.ping)), re2;
  }, fromPartial(N2) {
    var re2;
    const fe2 = X2();
    return fe2.offer = N2.offer !== void 0 && N2.offer !== null ? a420.SessionDescription.fromPartial(N2.offer) : void 0, fe2.answer = N2.answer !== void 0 && N2.answer !== null ? a420.SessionDescription.fromPartial(N2.answer) : void 0, fe2.trickle = N2.trickle !== void 0 && N2.trickle !== null ? a420.TrickleRequest.fromPartial(N2.trickle) : void 0, fe2.addTrack = N2.addTrack !== void 0 && N2.addTrack !== null ? a420.AddTrackRequest.fromPartial(N2.addTrack) : void 0, fe2.mute = N2.mute !== void 0 && N2.mute !== null ? a420.MuteTrackRequest.fromPartial(N2.mute) : void 0, fe2.subscription = N2.subscription !== void 0 && N2.subscription !== null ? a420.UpdateSubscription.fromPartial(N2.subscription) : void 0, fe2.trackSetting = N2.trackSetting !== void 0 && N2.trackSetting !== null ? a420.UpdateTrackSettings.fromPartial(N2.trackSetting) : void 0, fe2.leave = N2.leave !== void 0 && N2.leave !== null ? a420.LeaveRequest.fromPartial(N2.leave) : void 0, fe2.updateLayers = N2.updateLayers !== void 0 && N2.updateLayers !== null ? a420.UpdateVideoLayers.fromPartial(N2.updateLayers) : void 0, fe2.subscriptionPermission = N2.subscriptionPermission !== void 0 && N2.subscriptionPermission !== null ? a420.SubscriptionPermission.fromPartial(N2.subscriptionPermission) : void 0, fe2.syncState = N2.syncState !== void 0 && N2.syncState !== null ? a420.SyncState.fromPartial(N2.syncState) : void 0, fe2.simulate = N2.simulate !== void 0 && N2.simulate !== null ? a420.SimulateScenario.fromPartial(N2.simulate) : void 0, fe2.ping = (re2 = N2.ping) !== null && re2 !== void 0 ? re2 : void 0, fe2;
  } };
  function ie2() {
    return { join: void 0, answer: void 0, offer: void 0, trickle: void 0, update: void 0, trackPublished: void 0, leave: void 0, mute: void 0, speakersChanged: void 0, roomUpdate: void 0, connectionQuality: void 0, streamStateUpdate: void 0, subscribedQualityUpdate: void 0, subscriptionPermissionUpdate: void 0, refreshToken: void 0, trackUnpublished: void 0, pong: void 0 };
  }
  a420.SignalResponse = { encode(N2, re2 = l2.default.Writer.create()) {
    return N2.join !== void 0 && a420.JoinResponse.encode(N2.join, re2.uint32(10).fork()).ldelim(), N2.answer !== void 0 && a420.SessionDescription.encode(N2.answer, re2.uint32(18).fork()).ldelim(), N2.offer !== void 0 && a420.SessionDescription.encode(N2.offer, re2.uint32(26).fork()).ldelim(), N2.trickle !== void 0 && a420.TrickleRequest.encode(N2.trickle, re2.uint32(34).fork()).ldelim(), N2.update !== void 0 && a420.ParticipantUpdate.encode(N2.update, re2.uint32(42).fork()).ldelim(), N2.trackPublished !== void 0 && a420.TrackPublishedResponse.encode(N2.trackPublished, re2.uint32(50).fork()).ldelim(), N2.leave !== void 0 && a420.LeaveRequest.encode(N2.leave, re2.uint32(66).fork()).ldelim(), N2.mute !== void 0 && a420.MuteTrackRequest.encode(N2.mute, re2.uint32(74).fork()).ldelim(), N2.speakersChanged !== void 0 && a420.SpeakersChanged.encode(N2.speakersChanged, re2.uint32(82).fork()).ldelim(), N2.roomUpdate !== void 0 && a420.RoomUpdate.encode(N2.roomUpdate, re2.uint32(90).fork()).ldelim(), N2.connectionQuality !== void 0 && a420.ConnectionQualityUpdate.encode(N2.connectionQuality, re2.uint32(98).fork()).ldelim(), N2.streamStateUpdate !== void 0 && a420.StreamStateUpdate.encode(N2.streamStateUpdate, re2.uint32(106).fork()).ldelim(), N2.subscribedQualityUpdate !== void 0 && a420.SubscribedQualityUpdate.encode(N2.subscribedQualityUpdate, re2.uint32(114).fork()).ldelim(), N2.subscriptionPermissionUpdate !== void 0 && a420.SubscriptionPermissionUpdate.encode(N2.subscriptionPermissionUpdate, re2.uint32(122).fork()).ldelim(), N2.refreshToken !== void 0 && re2.uint32(130).string(N2.refreshToken), N2.trackUnpublished !== void 0 && a420.TrackUnpublishedResponse.encode(N2.trackUnpublished, re2.uint32(138).fork()).ldelim(), N2.pong !== void 0 && re2.uint32(144).int64(N2.pong), re2;
  }, decode(N2, re2) {
    const fe2 = N2 instanceof l2.default.Reader ? N2 : new l2.default.Reader(N2);
    let Ne2 = re2 === void 0 ? fe2.len : fe2.pos + re2;
    const Oe2 = ie2();
    for (; fe2.pos < Ne2; ) {
      const qe2 = fe2.uint32();
      switch (qe2 >>> 3) {
        case 1:
          Oe2.join = a420.JoinResponse.decode(fe2, fe2.uint32());
          break;
        case 2:
          Oe2.answer = a420.SessionDescription.decode(fe2, fe2.uint32());
          break;
        case 3:
          Oe2.offer = a420.SessionDescription.decode(fe2, fe2.uint32());
          break;
        case 4:
          Oe2.trickle = a420.TrickleRequest.decode(fe2, fe2.uint32());
          break;
        case 5:
          Oe2.update = a420.ParticipantUpdate.decode(fe2, fe2.uint32());
          break;
        case 6:
          Oe2.trackPublished = a420.TrackPublishedResponse.decode(fe2, fe2.uint32());
          break;
        case 8:
          Oe2.leave = a420.LeaveRequest.decode(fe2, fe2.uint32());
          break;
        case 9:
          Oe2.mute = a420.MuteTrackRequest.decode(fe2, fe2.uint32());
          break;
        case 10:
          Oe2.speakersChanged = a420.SpeakersChanged.decode(fe2, fe2.uint32());
          break;
        case 11:
          Oe2.roomUpdate = a420.RoomUpdate.decode(fe2, fe2.uint32());
          break;
        case 12:
          Oe2.connectionQuality = a420.ConnectionQualityUpdate.decode(fe2, fe2.uint32());
          break;
        case 13:
          Oe2.streamStateUpdate = a420.StreamStateUpdate.decode(fe2, fe2.uint32());
          break;
        case 14:
          Oe2.subscribedQualityUpdate = a420.SubscribedQualityUpdate.decode(fe2, fe2.uint32());
          break;
        case 15:
          Oe2.subscriptionPermissionUpdate = a420.SubscriptionPermissionUpdate.decode(fe2, fe2.uint32());
          break;
        case 16:
          Oe2.refreshToken = fe2.string();
          break;
        case 17:
          Oe2.trackUnpublished = a420.TrackUnpublishedResponse.decode(fe2, fe2.uint32());
          break;
        case 18:
          Oe2.pong = xe2(fe2.int64());
          break;
        default:
          fe2.skipType(qe2 & 7);
          break;
      }
    }
    return Oe2;
  }, fromJSON(N2) {
    return { join: ae2(N2.join) ? a420.JoinResponse.fromJSON(N2.join) : void 0, answer: ae2(N2.answer) ? a420.SessionDescription.fromJSON(N2.answer) : void 0, offer: ae2(N2.offer) ? a420.SessionDescription.fromJSON(N2.offer) : void 0, trickle: ae2(N2.trickle) ? a420.TrickleRequest.fromJSON(N2.trickle) : void 0, update: ae2(N2.update) ? a420.ParticipantUpdate.fromJSON(N2.update) : void 0, trackPublished: ae2(N2.trackPublished) ? a420.TrackPublishedResponse.fromJSON(N2.trackPublished) : void 0, leave: ae2(N2.leave) ? a420.LeaveRequest.fromJSON(N2.leave) : void 0, mute: ae2(N2.mute) ? a420.MuteTrackRequest.fromJSON(N2.mute) : void 0, speakersChanged: ae2(N2.speakersChanged) ? a420.SpeakersChanged.fromJSON(N2.speakersChanged) : void 0, roomUpdate: ae2(N2.roomUpdate) ? a420.RoomUpdate.fromJSON(N2.roomUpdate) : void 0, connectionQuality: ae2(N2.connectionQuality) ? a420.ConnectionQualityUpdate.fromJSON(N2.connectionQuality) : void 0, streamStateUpdate: ae2(N2.streamStateUpdate) ? a420.StreamStateUpdate.fromJSON(N2.streamStateUpdate) : void 0, subscribedQualityUpdate: ae2(N2.subscribedQualityUpdate) ? a420.SubscribedQualityUpdate.fromJSON(N2.subscribedQualityUpdate) : void 0, subscriptionPermissionUpdate: ae2(N2.subscriptionPermissionUpdate) ? a420.SubscriptionPermissionUpdate.fromJSON(N2.subscriptionPermissionUpdate) : void 0, refreshToken: ae2(N2.refreshToken) ? String(N2.refreshToken) : void 0, trackUnpublished: ae2(N2.trackUnpublished) ? a420.TrackUnpublishedResponse.fromJSON(N2.trackUnpublished) : void 0, pong: ae2(N2.pong) ? Number(N2.pong) : void 0 };
  }, toJSON(N2) {
    const re2 = {};
    return N2.join !== void 0 && (re2.join = N2.join ? a420.JoinResponse.toJSON(N2.join) : void 0), N2.answer !== void 0 && (re2.answer = N2.answer ? a420.SessionDescription.toJSON(N2.answer) : void 0), N2.offer !== void 0 && (re2.offer = N2.offer ? a420.SessionDescription.toJSON(N2.offer) : void 0), N2.trickle !== void 0 && (re2.trickle = N2.trickle ? a420.TrickleRequest.toJSON(N2.trickle) : void 0), N2.update !== void 0 && (re2.update = N2.update ? a420.ParticipantUpdate.toJSON(N2.update) : void 0), N2.trackPublished !== void 0 && (re2.trackPublished = N2.trackPublished ? a420.TrackPublishedResponse.toJSON(N2.trackPublished) : void 0), N2.leave !== void 0 && (re2.leave = N2.leave ? a420.LeaveRequest.toJSON(N2.leave) : void 0), N2.mute !== void 0 && (re2.mute = N2.mute ? a420.MuteTrackRequest.toJSON(N2.mute) : void 0), N2.speakersChanged !== void 0 && (re2.speakersChanged = N2.speakersChanged ? a420.SpeakersChanged.toJSON(N2.speakersChanged) : void 0), N2.roomUpdate !== void 0 && (re2.roomUpdate = N2.roomUpdate ? a420.RoomUpdate.toJSON(N2.roomUpdate) : void 0), N2.connectionQuality !== void 0 && (re2.connectionQuality = N2.connectionQuality ? a420.ConnectionQualityUpdate.toJSON(N2.connectionQuality) : void 0), N2.streamStateUpdate !== void 0 && (re2.streamStateUpdate = N2.streamStateUpdate ? a420.StreamStateUpdate.toJSON(N2.streamStateUpdate) : void 0), N2.subscribedQualityUpdate !== void 0 && (re2.subscribedQualityUpdate = N2.subscribedQualityUpdate ? a420.SubscribedQualityUpdate.toJSON(N2.subscribedQualityUpdate) : void 0), N2.subscriptionPermissionUpdate !== void 0 && (re2.subscriptionPermissionUpdate = N2.subscriptionPermissionUpdate ? a420.SubscriptionPermissionUpdate.toJSON(N2.subscriptionPermissionUpdate) : void 0), N2.refreshToken !== void 0 && (re2.refreshToken = N2.refreshToken), N2.trackUnpublished !== void 0 && (re2.trackUnpublished = N2.trackUnpublished ? a420.TrackUnpublishedResponse.toJSON(N2.trackUnpublished) : void 0), N2.pong !== void 0 && (re2.pong = Math.round(N2.pong)), re2;
  }, fromPartial(N2) {
    var re2, fe2;
    const Ne2 = ie2();
    return Ne2.join = N2.join !== void 0 && N2.join !== null ? a420.JoinResponse.fromPartial(N2.join) : void 0, Ne2.answer = N2.answer !== void 0 && N2.answer !== null ? a420.SessionDescription.fromPartial(N2.answer) : void 0, Ne2.offer = N2.offer !== void 0 && N2.offer !== null ? a420.SessionDescription.fromPartial(N2.offer) : void 0, Ne2.trickle = N2.trickle !== void 0 && N2.trickle !== null ? a420.TrickleRequest.fromPartial(N2.trickle) : void 0, Ne2.update = N2.update !== void 0 && N2.update !== null ? a420.ParticipantUpdate.fromPartial(N2.update) : void 0, Ne2.trackPublished = N2.trackPublished !== void 0 && N2.trackPublished !== null ? a420.TrackPublishedResponse.fromPartial(N2.trackPublished) : void 0, Ne2.leave = N2.leave !== void 0 && N2.leave !== null ? a420.LeaveRequest.fromPartial(N2.leave) : void 0, Ne2.mute = N2.mute !== void 0 && N2.mute !== null ? a420.MuteTrackRequest.fromPartial(N2.mute) : void 0, Ne2.speakersChanged = N2.speakersChanged !== void 0 && N2.speakersChanged !== null ? a420.SpeakersChanged.fromPartial(N2.speakersChanged) : void 0, Ne2.roomUpdate = N2.roomUpdate !== void 0 && N2.roomUpdate !== null ? a420.RoomUpdate.fromPartial(N2.roomUpdate) : void 0, Ne2.connectionQuality = N2.connectionQuality !== void 0 && N2.connectionQuality !== null ? a420.ConnectionQualityUpdate.fromPartial(N2.connectionQuality) : void 0, Ne2.streamStateUpdate = N2.streamStateUpdate !== void 0 && N2.streamStateUpdate !== null ? a420.StreamStateUpdate.fromPartial(N2.streamStateUpdate) : void 0, Ne2.subscribedQualityUpdate = N2.subscribedQualityUpdate !== void 0 && N2.subscribedQualityUpdate !== null ? a420.SubscribedQualityUpdate.fromPartial(N2.subscribedQualityUpdate) : void 0, Ne2.subscriptionPermissionUpdate = N2.subscriptionPermissionUpdate !== void 0 && N2.subscriptionPermissionUpdate !== null ? a420.SubscriptionPermissionUpdate.fromPartial(N2.subscriptionPermissionUpdate) : void 0, Ne2.refreshToken = (re2 = N2.refreshToken) !== null && re2 !== void 0 ? re2 : void 0, Ne2.trackUnpublished = N2.trackUnpublished !== void 0 && N2.trackUnpublished !== null ? a420.TrackUnpublishedResponse.fromPartial(N2.trackUnpublished) : void 0, Ne2.pong = (fe2 = N2.pong) !== null && fe2 !== void 0 ? fe2 : void 0, Ne2;
  } };
  function Q2() {
    return { codec: "", cid: "", enableSimulcastLayers: false };
  }
  a420.SimulcastCodec = { encode(N2, re2 = l2.default.Writer.create()) {
    return N2.codec !== void 0 && N2.codec !== "" && re2.uint32(10).string(N2.codec), N2.cid !== void 0 && N2.cid !== "" && re2.uint32(18).string(N2.cid), N2.enableSimulcastLayers === true && re2.uint32(24).bool(N2.enableSimulcastLayers), re2;
  }, decode(N2, re2) {
    const fe2 = N2 instanceof l2.default.Reader ? N2 : new l2.default.Reader(N2);
    let Ne2 = re2 === void 0 ? fe2.len : fe2.pos + re2;
    const Oe2 = Q2();
    for (; fe2.pos < Ne2; ) {
      const qe2 = fe2.uint32();
      switch (qe2 >>> 3) {
        case 1:
          Oe2.codec = fe2.string();
          break;
        case 2:
          Oe2.cid = fe2.string();
          break;
        case 3:
          Oe2.enableSimulcastLayers = fe2.bool();
          break;
        default:
          fe2.skipType(qe2 & 7);
          break;
      }
    }
    return Oe2;
  }, fromJSON(N2) {
    return { codec: ae2(N2.codec) ? String(N2.codec) : "", cid: ae2(N2.cid) ? String(N2.cid) : "", enableSimulcastLayers: ae2(N2.enableSimulcastLayers) ? !!N2.enableSimulcastLayers : false };
  }, toJSON(N2) {
    const re2 = {};
    return N2.codec !== void 0 && (re2.codec = N2.codec), N2.cid !== void 0 && (re2.cid = N2.cid), N2.enableSimulcastLayers !== void 0 && (re2.enableSimulcastLayers = N2.enableSimulcastLayers), re2;
  }, fromPartial(N2) {
    var re2, fe2, Ne2;
    const Oe2 = Q2();
    return Oe2.codec = (re2 = N2.codec) !== null && re2 !== void 0 ? re2 : "", Oe2.cid = (fe2 = N2.cid) !== null && fe2 !== void 0 ? fe2 : "", Oe2.enableSimulcastLayers = (Ne2 = N2.enableSimulcastLayers) !== null && Ne2 !== void 0 ? Ne2 : false, Oe2;
  } };
  function ne2() {
    return { cid: "", name: "", type: 0, width: 0, height: 0, muted: false, disableDtx: false, source: 0, layers: [], simulcastCodecs: [], sid: "", stereo: false, disableRed: false };
  }
  a420.AddTrackRequest = { encode(N2, re2 = l2.default.Writer.create()) {
    if (N2.cid !== void 0 && N2.cid !== "" && re2.uint32(10).string(N2.cid), N2.name !== void 0 && N2.name !== "" && re2.uint32(18).string(N2.name), N2.type !== void 0 && N2.type !== 0 && re2.uint32(24).int32(N2.type), N2.width !== void 0 && N2.width !== 0 && re2.uint32(32).uint32(N2.width), N2.height !== void 0 && N2.height !== 0 && re2.uint32(40).uint32(N2.height), N2.muted === true && re2.uint32(48).bool(N2.muted), N2.disableDtx === true && re2.uint32(56).bool(N2.disableDtx), N2.source !== void 0 && N2.source !== 0 && re2.uint32(64).int32(N2.source), N2.layers !== void 0 && N2.layers.length !== 0)
      for (const fe2 of N2.layers)
        v2.VideoLayer.encode(fe2, re2.uint32(74).fork()).ldelim();
    if (N2.simulcastCodecs !== void 0 && N2.simulcastCodecs.length !== 0)
      for (const fe2 of N2.simulcastCodecs)
        a420.SimulcastCodec.encode(fe2, re2.uint32(82).fork()).ldelim();
    return N2.sid !== void 0 && N2.sid !== "" && re2.uint32(90).string(N2.sid), N2.stereo === true && re2.uint32(96).bool(N2.stereo), N2.disableRed === true && re2.uint32(104).bool(N2.disableRed), re2;
  }, decode(N2, re2) {
    const fe2 = N2 instanceof l2.default.Reader ? N2 : new l2.default.Reader(N2);
    let Ne2 = re2 === void 0 ? fe2.len : fe2.pos + re2;
    const Oe2 = ne2();
    for (; fe2.pos < Ne2; ) {
      const qe2 = fe2.uint32();
      switch (qe2 >>> 3) {
        case 1:
          Oe2.cid = fe2.string();
          break;
        case 2:
          Oe2.name = fe2.string();
          break;
        case 3:
          Oe2.type = fe2.int32();
          break;
        case 4:
          Oe2.width = fe2.uint32();
          break;
        case 5:
          Oe2.height = fe2.uint32();
          break;
        case 6:
          Oe2.muted = fe2.bool();
          break;
        case 7:
          Oe2.disableDtx = fe2.bool();
          break;
        case 8:
          Oe2.source = fe2.int32();
          break;
        case 9:
          Oe2.layers.push(v2.VideoLayer.decode(fe2, fe2.uint32()));
          break;
        case 10:
          Oe2.simulcastCodecs.push(a420.SimulcastCodec.decode(fe2, fe2.uint32()));
          break;
        case 11:
          Oe2.sid = fe2.string();
          break;
        case 12:
          Oe2.stereo = fe2.bool();
          break;
        case 13:
          Oe2.disableRed = fe2.bool();
          break;
        default:
          fe2.skipType(qe2 & 7);
          break;
      }
    }
    return Oe2;
  }, fromJSON(N2) {
    return { cid: ae2(N2.cid) ? String(N2.cid) : "", name: ae2(N2.name) ? String(N2.name) : "", type: ae2(N2.type) ? v2.trackTypeFromJSON(N2.type) : 0, width: ae2(N2.width) ? Number(N2.width) : 0, height: ae2(N2.height) ? Number(N2.height) : 0, muted: ae2(N2.muted) ? !!N2.muted : false, disableDtx: ae2(N2.disableDtx) ? !!N2.disableDtx : false, source: ae2(N2.source) ? v2.trackSourceFromJSON(N2.source) : 0, layers: Array.isArray(N2 == null ? void 0 : N2.layers) ? N2.layers.map((re2) => v2.VideoLayer.fromJSON(re2)) : [], simulcastCodecs: Array.isArray(N2 == null ? void 0 : N2.simulcastCodecs) ? N2.simulcastCodecs.map((re2) => a420.SimulcastCodec.fromJSON(re2)) : [], sid: ae2(N2.sid) ? String(N2.sid) : "", stereo: ae2(N2.stereo) ? !!N2.stereo : false, disableRed: ae2(N2.disableRed) ? !!N2.disableRed : false };
  }, toJSON(N2) {
    const re2 = {};
    return N2.cid !== void 0 && (re2.cid = N2.cid), N2.name !== void 0 && (re2.name = N2.name), N2.type !== void 0 && (re2.type = v2.trackTypeToJSON(N2.type)), N2.width !== void 0 && (re2.width = Math.round(N2.width)), N2.height !== void 0 && (re2.height = Math.round(N2.height)), N2.muted !== void 0 && (re2.muted = N2.muted), N2.disableDtx !== void 0 && (re2.disableDtx = N2.disableDtx), N2.source !== void 0 && (re2.source = v2.trackSourceToJSON(N2.source)), N2.layers ? re2.layers = N2.layers.map((fe2) => fe2 ? v2.VideoLayer.toJSON(fe2) : void 0) : re2.layers = [], N2.simulcastCodecs ? re2.simulcastCodecs = N2.simulcastCodecs.map((fe2) => fe2 ? a420.SimulcastCodec.toJSON(fe2) : void 0) : re2.simulcastCodecs = [], N2.sid !== void 0 && (re2.sid = N2.sid), N2.stereo !== void 0 && (re2.stereo = N2.stereo), N2.disableRed !== void 0 && (re2.disableRed = N2.disableRed), re2;
  }, fromPartial(N2) {
    var re2, fe2, Ne2, Oe2, qe2, je2, Fe2, yt, Xe2, Ge2, V2, ge2, we2;
    const We2 = ne2();
    return We2.cid = (re2 = N2.cid) !== null && re2 !== void 0 ? re2 : "", We2.name = (fe2 = N2.name) !== null && fe2 !== void 0 ? fe2 : "", We2.type = (Ne2 = N2.type) !== null && Ne2 !== void 0 ? Ne2 : 0, We2.width = (Oe2 = N2.width) !== null && Oe2 !== void 0 ? Oe2 : 0, We2.height = (qe2 = N2.height) !== null && qe2 !== void 0 ? qe2 : 0, We2.muted = (je2 = N2.muted) !== null && je2 !== void 0 ? je2 : false, We2.disableDtx = (Fe2 = N2.disableDtx) !== null && Fe2 !== void 0 ? Fe2 : false, We2.source = (yt = N2.source) !== null && yt !== void 0 ? yt : 0, We2.layers = ((Xe2 = N2.layers) === null || Xe2 === void 0 ? void 0 : Xe2.map((Re2) => v2.VideoLayer.fromPartial(Re2))) || [], We2.simulcastCodecs = ((Ge2 = N2.simulcastCodecs) === null || Ge2 === void 0 ? void 0 : Ge2.map((Re2) => a420.SimulcastCodec.fromPartial(Re2))) || [], We2.sid = (V2 = N2.sid) !== null && V2 !== void 0 ? V2 : "", We2.stereo = (ge2 = N2.stereo) !== null && ge2 !== void 0 ? ge2 : false, We2.disableRed = (we2 = N2.disableRed) !== null && we2 !== void 0 ? we2 : false, We2;
  } };
  function Z2() {
    return { candidateInit: "", target: 0 };
  }
  a420.TrickleRequest = { encode(N2, re2 = l2.default.Writer.create()) {
    return N2.candidateInit !== void 0 && N2.candidateInit !== "" && re2.uint32(10).string(N2.candidateInit), N2.target !== void 0 && N2.target !== 0 && re2.uint32(16).int32(N2.target), re2;
  }, decode(N2, re2) {
    const fe2 = N2 instanceof l2.default.Reader ? N2 : new l2.default.Reader(N2);
    let Ne2 = re2 === void 0 ? fe2.len : fe2.pos + re2;
    const Oe2 = Z2();
    for (; fe2.pos < Ne2; ) {
      const qe2 = fe2.uint32();
      switch (qe2 >>> 3) {
        case 1:
          Oe2.candidateInit = fe2.string();
          break;
        case 2:
          Oe2.target = fe2.int32();
          break;
        default:
          fe2.skipType(qe2 & 7);
          break;
      }
    }
    return Oe2;
  }, fromJSON(N2) {
    return { candidateInit: ae2(N2.candidateInit) ? String(N2.candidateInit) : "", target: ae2(N2.target) ? _(N2.target) : 0 };
  }, toJSON(N2) {
    const re2 = {};
    return N2.candidateInit !== void 0 && (re2.candidateInit = N2.candidateInit), N2.target !== void 0 && (re2.target = I2(N2.target)), re2;
  }, fromPartial(N2) {
    var re2, fe2;
    const Ne2 = Z2();
    return Ne2.candidateInit = (re2 = N2.candidateInit) !== null && re2 !== void 0 ? re2 : "", Ne2.target = (fe2 = N2.target) !== null && fe2 !== void 0 ? fe2 : 0, Ne2;
  } };
  function de2() {
    return { sid: "", muted: false };
  }
  a420.MuteTrackRequest = { encode(N2, re2 = l2.default.Writer.create()) {
    return N2.sid !== void 0 && N2.sid !== "" && re2.uint32(10).string(N2.sid), N2.muted === true && re2.uint32(16).bool(N2.muted), re2;
  }, decode(N2, re2) {
    const fe2 = N2 instanceof l2.default.Reader ? N2 : new l2.default.Reader(N2);
    let Ne2 = re2 === void 0 ? fe2.len : fe2.pos + re2;
    const Oe2 = de2();
    for (; fe2.pos < Ne2; ) {
      const qe2 = fe2.uint32();
      switch (qe2 >>> 3) {
        case 1:
          Oe2.sid = fe2.string();
          break;
        case 2:
          Oe2.muted = fe2.bool();
          break;
        default:
          fe2.skipType(qe2 & 7);
          break;
      }
    }
    return Oe2;
  }, fromJSON(N2) {
    return { sid: ae2(N2.sid) ? String(N2.sid) : "", muted: ae2(N2.muted) ? !!N2.muted : false };
  }, toJSON(N2) {
    const re2 = {};
    return N2.sid !== void 0 && (re2.sid = N2.sid), N2.muted !== void 0 && (re2.muted = N2.muted), re2;
  }, fromPartial(N2) {
    var re2, fe2;
    const Ne2 = de2();
    return Ne2.sid = (re2 = N2.sid) !== null && re2 !== void 0 ? re2 : "", Ne2.muted = (fe2 = N2.muted) !== null && fe2 !== void 0 ? fe2 : false, Ne2;
  } };
  function pe2() {
    return { room: void 0, participant: void 0, otherParticipants: [], serverVersion: "", iceServers: [], subscriberPrimary: false, alternativeUrl: "", clientConfiguration: void 0, serverRegion: "", pingTimeout: 0, pingInterval: 0, serverInfo: void 0 };
  }
  a420.JoinResponse = { encode(N2, re2 = l2.default.Writer.create()) {
    if (N2.room !== void 0 && v2.Room.encode(N2.room, re2.uint32(10).fork()).ldelim(), N2.participant !== void 0 && v2.ParticipantInfo.encode(N2.participant, re2.uint32(18).fork()).ldelim(), N2.otherParticipants !== void 0 && N2.otherParticipants.length !== 0)
      for (const fe2 of N2.otherParticipants)
        v2.ParticipantInfo.encode(fe2, re2.uint32(26).fork()).ldelim();
    if (N2.serverVersion !== void 0 && N2.serverVersion !== "" && re2.uint32(34).string(N2.serverVersion), N2.iceServers !== void 0 && N2.iceServers.length !== 0)
      for (const fe2 of N2.iceServers)
        a420.ICEServer.encode(fe2, re2.uint32(42).fork()).ldelim();
    return N2.subscriberPrimary === true && re2.uint32(48).bool(N2.subscriberPrimary), N2.alternativeUrl !== void 0 && N2.alternativeUrl !== "" && re2.uint32(58).string(N2.alternativeUrl), N2.clientConfiguration !== void 0 && v2.ClientConfiguration.encode(N2.clientConfiguration, re2.uint32(66).fork()).ldelim(), N2.serverRegion !== void 0 && N2.serverRegion !== "" && re2.uint32(74).string(N2.serverRegion), N2.pingTimeout !== void 0 && N2.pingTimeout !== 0 && re2.uint32(80).int32(N2.pingTimeout), N2.pingInterval !== void 0 && N2.pingInterval !== 0 && re2.uint32(88).int32(N2.pingInterval), N2.serverInfo !== void 0 && v2.ServerInfo.encode(N2.serverInfo, re2.uint32(98).fork()).ldelim(), re2;
  }, decode(N2, re2) {
    const fe2 = N2 instanceof l2.default.Reader ? N2 : new l2.default.Reader(N2);
    let Ne2 = re2 === void 0 ? fe2.len : fe2.pos + re2;
    const Oe2 = pe2();
    for (; fe2.pos < Ne2; ) {
      const qe2 = fe2.uint32();
      switch (qe2 >>> 3) {
        case 1:
          Oe2.room = v2.Room.decode(fe2, fe2.uint32());
          break;
        case 2:
          Oe2.participant = v2.ParticipantInfo.decode(fe2, fe2.uint32());
          break;
        case 3:
          Oe2.otherParticipants.push(v2.ParticipantInfo.decode(fe2, fe2.uint32()));
          break;
        case 4:
          Oe2.serverVersion = fe2.string();
          break;
        case 5:
          Oe2.iceServers.push(a420.ICEServer.decode(fe2, fe2.uint32()));
          break;
        case 6:
          Oe2.subscriberPrimary = fe2.bool();
          break;
        case 7:
          Oe2.alternativeUrl = fe2.string();
          break;
        case 8:
          Oe2.clientConfiguration = v2.ClientConfiguration.decode(fe2, fe2.uint32());
          break;
        case 9:
          Oe2.serverRegion = fe2.string();
          break;
        case 10:
          Oe2.pingTimeout = fe2.int32();
          break;
        case 11:
          Oe2.pingInterval = fe2.int32();
          break;
        case 12:
          Oe2.serverInfo = v2.ServerInfo.decode(fe2, fe2.uint32());
          break;
        default:
          fe2.skipType(qe2 & 7);
          break;
      }
    }
    return Oe2;
  }, fromJSON(N2) {
    return { room: ae2(N2.room) ? v2.Room.fromJSON(N2.room) : void 0, participant: ae2(N2.participant) ? v2.ParticipantInfo.fromJSON(N2.participant) : void 0, otherParticipants: Array.isArray(N2 == null ? void 0 : N2.otherParticipants) ? N2.otherParticipants.map((re2) => v2.ParticipantInfo.fromJSON(re2)) : [], serverVersion: ae2(N2.serverVersion) ? String(N2.serverVersion) : "", iceServers: Array.isArray(N2 == null ? void 0 : N2.iceServers) ? N2.iceServers.map((re2) => a420.ICEServer.fromJSON(re2)) : [], subscriberPrimary: ae2(N2.subscriberPrimary) ? !!N2.subscriberPrimary : false, alternativeUrl: ae2(N2.alternativeUrl) ? String(N2.alternativeUrl) : "", clientConfiguration: ae2(N2.clientConfiguration) ? v2.ClientConfiguration.fromJSON(N2.clientConfiguration) : void 0, serverRegion: ae2(N2.serverRegion) ? String(N2.serverRegion) : "", pingTimeout: ae2(N2.pingTimeout) ? Number(N2.pingTimeout) : 0, pingInterval: ae2(N2.pingInterval) ? Number(N2.pingInterval) : 0, serverInfo: ae2(N2.serverInfo) ? v2.ServerInfo.fromJSON(N2.serverInfo) : void 0 };
  }, toJSON(N2) {
    const re2 = {};
    return N2.room !== void 0 && (re2.room = N2.room ? v2.Room.toJSON(N2.room) : void 0), N2.participant !== void 0 && (re2.participant = N2.participant ? v2.ParticipantInfo.toJSON(N2.participant) : void 0), N2.otherParticipants ? re2.otherParticipants = N2.otherParticipants.map((fe2) => fe2 ? v2.ParticipantInfo.toJSON(fe2) : void 0) : re2.otherParticipants = [], N2.serverVersion !== void 0 && (re2.serverVersion = N2.serverVersion), N2.iceServers ? re2.iceServers = N2.iceServers.map((fe2) => fe2 ? a420.ICEServer.toJSON(fe2) : void 0) : re2.iceServers = [], N2.subscriberPrimary !== void 0 && (re2.subscriberPrimary = N2.subscriberPrimary), N2.alternativeUrl !== void 0 && (re2.alternativeUrl = N2.alternativeUrl), N2.clientConfiguration !== void 0 && (re2.clientConfiguration = N2.clientConfiguration ? v2.ClientConfiguration.toJSON(N2.clientConfiguration) : void 0), N2.serverRegion !== void 0 && (re2.serverRegion = N2.serverRegion), N2.pingTimeout !== void 0 && (re2.pingTimeout = Math.round(N2.pingTimeout)), N2.pingInterval !== void 0 && (re2.pingInterval = Math.round(N2.pingInterval)), N2.serverInfo !== void 0 && (re2.serverInfo = N2.serverInfo ? v2.ServerInfo.toJSON(N2.serverInfo) : void 0), re2;
  }, fromPartial(N2) {
    var re2, fe2, Ne2, Oe2, qe2, je2, Fe2, yt;
    const Xe2 = pe2();
    return Xe2.room = N2.room !== void 0 && N2.room !== null ? v2.Room.fromPartial(N2.room) : void 0, Xe2.participant = N2.participant !== void 0 && N2.participant !== null ? v2.ParticipantInfo.fromPartial(N2.participant) : void 0, Xe2.otherParticipants = ((re2 = N2.otherParticipants) === null || re2 === void 0 ? void 0 : re2.map((Ge2) => v2.ParticipantInfo.fromPartial(Ge2))) || [], Xe2.serverVersion = (fe2 = N2.serverVersion) !== null && fe2 !== void 0 ? fe2 : "", Xe2.iceServers = ((Ne2 = N2.iceServers) === null || Ne2 === void 0 ? void 0 : Ne2.map((Ge2) => a420.ICEServer.fromPartial(Ge2))) || [], Xe2.subscriberPrimary = (Oe2 = N2.subscriberPrimary) !== null && Oe2 !== void 0 ? Oe2 : false, Xe2.alternativeUrl = (qe2 = N2.alternativeUrl) !== null && qe2 !== void 0 ? qe2 : "", Xe2.clientConfiguration = N2.clientConfiguration !== void 0 && N2.clientConfiguration !== null ? v2.ClientConfiguration.fromPartial(N2.clientConfiguration) : void 0, Xe2.serverRegion = (je2 = N2.serverRegion) !== null && je2 !== void 0 ? je2 : "", Xe2.pingTimeout = (Fe2 = N2.pingTimeout) !== null && Fe2 !== void 0 ? Fe2 : 0, Xe2.pingInterval = (yt = N2.pingInterval) !== null && yt !== void 0 ? yt : 0, Xe2.serverInfo = N2.serverInfo !== void 0 && N2.serverInfo !== null ? v2.ServerInfo.fromPartial(N2.serverInfo) : void 0, Xe2;
  } };
  function le2() {
    return { cid: "", track: void 0 };
  }
  a420.TrackPublishedResponse = { encode(N2, re2 = l2.default.Writer.create()) {
    return N2.cid !== void 0 && N2.cid !== "" && re2.uint32(10).string(N2.cid), N2.track !== void 0 && v2.TrackInfo.encode(N2.track, re2.uint32(18).fork()).ldelim(), re2;
  }, decode(N2, re2) {
    const fe2 = N2 instanceof l2.default.Reader ? N2 : new l2.default.Reader(N2);
    let Ne2 = re2 === void 0 ? fe2.len : fe2.pos + re2;
    const Oe2 = le2();
    for (; fe2.pos < Ne2; ) {
      const qe2 = fe2.uint32();
      switch (qe2 >>> 3) {
        case 1:
          Oe2.cid = fe2.string();
          break;
        case 2:
          Oe2.track = v2.TrackInfo.decode(fe2, fe2.uint32());
          break;
        default:
          fe2.skipType(qe2 & 7);
          break;
      }
    }
    return Oe2;
  }, fromJSON(N2) {
    return { cid: ae2(N2.cid) ? String(N2.cid) : "", track: ae2(N2.track) ? v2.TrackInfo.fromJSON(N2.track) : void 0 };
  }, toJSON(N2) {
    const re2 = {};
    return N2.cid !== void 0 && (re2.cid = N2.cid), N2.track !== void 0 && (re2.track = N2.track ? v2.TrackInfo.toJSON(N2.track) : void 0), re2;
  }, fromPartial(N2) {
    var re2;
    const fe2 = le2();
    return fe2.cid = (re2 = N2.cid) !== null && re2 !== void 0 ? re2 : "", fe2.track = N2.track !== void 0 && N2.track !== null ? v2.TrackInfo.fromPartial(N2.track) : void 0, fe2;
  } };
  function be2() {
    return { trackSid: "" };
  }
  a420.TrackUnpublishedResponse = { encode(N2, re2 = l2.default.Writer.create()) {
    return N2.trackSid !== void 0 && N2.trackSid !== "" && re2.uint32(10).string(N2.trackSid), re2;
  }, decode(N2, re2) {
    const fe2 = N2 instanceof l2.default.Reader ? N2 : new l2.default.Reader(N2);
    let Ne2 = re2 === void 0 ? fe2.len : fe2.pos + re2;
    const Oe2 = be2();
    for (; fe2.pos < Ne2; ) {
      const qe2 = fe2.uint32();
      switch (qe2 >>> 3) {
        case 1:
          Oe2.trackSid = fe2.string();
          break;
        default:
          fe2.skipType(qe2 & 7);
          break;
      }
    }
    return Oe2;
  }, fromJSON(N2) {
    return { trackSid: ae2(N2.trackSid) ? String(N2.trackSid) : "" };
  }, toJSON(N2) {
    const re2 = {};
    return N2.trackSid !== void 0 && (re2.trackSid = N2.trackSid), re2;
  }, fromPartial(N2) {
    var re2;
    const fe2 = be2();
    return fe2.trackSid = (re2 = N2.trackSid) !== null && re2 !== void 0 ? re2 : "", fe2;
  } };
  function ke2() {
    return { type: "", sdp: "" };
  }
  a420.SessionDescription = { encode(N2, re2 = l2.default.Writer.create()) {
    return N2.type !== void 0 && N2.type !== "" && re2.uint32(10).string(N2.type), N2.sdp !== void 0 && N2.sdp !== "" && re2.uint32(18).string(N2.sdp), re2;
  }, decode(N2, re2) {
    const fe2 = N2 instanceof l2.default.Reader ? N2 : new l2.default.Reader(N2);
    let Ne2 = re2 === void 0 ? fe2.len : fe2.pos + re2;
    const Oe2 = ke2();
    for (; fe2.pos < Ne2; ) {
      const qe2 = fe2.uint32();
      switch (qe2 >>> 3) {
        case 1:
          Oe2.type = fe2.string();
          break;
        case 2:
          Oe2.sdp = fe2.string();
          break;
        default:
          fe2.skipType(qe2 & 7);
          break;
      }
    }
    return Oe2;
  }, fromJSON(N2) {
    return { type: ae2(N2.type) ? String(N2.type) : "", sdp: ae2(N2.sdp) ? String(N2.sdp) : "" };
  }, toJSON(N2) {
    const re2 = {};
    return N2.type !== void 0 && (re2.type = N2.type), N2.sdp !== void 0 && (re2.sdp = N2.sdp), re2;
  }, fromPartial(N2) {
    var re2, fe2;
    const Ne2 = ke2();
    return Ne2.type = (re2 = N2.type) !== null && re2 !== void 0 ? re2 : "", Ne2.sdp = (fe2 = N2.sdp) !== null && fe2 !== void 0 ? fe2 : "", Ne2;
  } };
  function Te2() {
    return { participants: [] };
  }
  a420.ParticipantUpdate = { encode(N2, re2 = l2.default.Writer.create()) {
    if (N2.participants !== void 0 && N2.participants.length !== 0)
      for (const fe2 of N2.participants)
        v2.ParticipantInfo.encode(fe2, re2.uint32(10).fork()).ldelim();
    return re2;
  }, decode(N2, re2) {
    const fe2 = N2 instanceof l2.default.Reader ? N2 : new l2.default.Reader(N2);
    let Ne2 = re2 === void 0 ? fe2.len : fe2.pos + re2;
    const Oe2 = Te2();
    for (; fe2.pos < Ne2; ) {
      const qe2 = fe2.uint32();
      switch (qe2 >>> 3) {
        case 1:
          Oe2.participants.push(v2.ParticipantInfo.decode(fe2, fe2.uint32()));
          break;
        default:
          fe2.skipType(qe2 & 7);
          break;
      }
    }
    return Oe2;
  }, fromJSON(N2) {
    return { participants: Array.isArray(N2 == null ? void 0 : N2.participants) ? N2.participants.map((re2) => v2.ParticipantInfo.fromJSON(re2)) : [] };
  }, toJSON(N2) {
    const re2 = {};
    return N2.participants ? re2.participants = N2.participants.map((fe2) => fe2 ? v2.ParticipantInfo.toJSON(fe2) : void 0) : re2.participants = [], re2;
  }, fromPartial(N2) {
    var re2;
    const fe2 = Te2();
    return fe2.participants = ((re2 = N2.participants) === null || re2 === void 0 ? void 0 : re2.map((Ne2) => v2.ParticipantInfo.fromPartial(Ne2))) || [], fe2;
  } };
  function q2() {
    return { trackSids: [], subscribe: false, participantTracks: [] };
  }
  a420.UpdateSubscription = { encode(N2, re2 = l2.default.Writer.create()) {
    if (N2.trackSids !== void 0 && N2.trackSids.length !== 0)
      for (const fe2 of N2.trackSids)
        re2.uint32(10).string(fe2);
    if (N2.subscribe === true && re2.uint32(16).bool(N2.subscribe), N2.participantTracks !== void 0 && N2.participantTracks.length !== 0)
      for (const fe2 of N2.participantTracks)
        v2.ParticipantTracks.encode(fe2, re2.uint32(26).fork()).ldelim();
    return re2;
  }, decode(N2, re2) {
    const fe2 = N2 instanceof l2.default.Reader ? N2 : new l2.default.Reader(N2);
    let Ne2 = re2 === void 0 ? fe2.len : fe2.pos + re2;
    const Oe2 = q2();
    for (; fe2.pos < Ne2; ) {
      const qe2 = fe2.uint32();
      switch (qe2 >>> 3) {
        case 1:
          Oe2.trackSids.push(fe2.string());
          break;
        case 2:
          Oe2.subscribe = fe2.bool();
          break;
        case 3:
          Oe2.participantTracks.push(v2.ParticipantTracks.decode(fe2, fe2.uint32()));
          break;
        default:
          fe2.skipType(qe2 & 7);
          break;
      }
    }
    return Oe2;
  }, fromJSON(N2) {
    return { trackSids: Array.isArray(N2 == null ? void 0 : N2.trackSids) ? N2.trackSids.map((re2) => String(re2)) : [], subscribe: ae2(N2.subscribe) ? !!N2.subscribe : false, participantTracks: Array.isArray(N2 == null ? void 0 : N2.participantTracks) ? N2.participantTracks.map((re2) => v2.ParticipantTracks.fromJSON(re2)) : [] };
  }, toJSON(N2) {
    const re2 = {};
    return N2.trackSids ? re2.trackSids = N2.trackSids.map((fe2) => fe2) : re2.trackSids = [], N2.subscribe !== void 0 && (re2.subscribe = N2.subscribe), N2.participantTracks ? re2.participantTracks = N2.participantTracks.map((fe2) => fe2 ? v2.ParticipantTracks.toJSON(fe2) : void 0) : re2.participantTracks = [], re2;
  }, fromPartial(N2) {
    var re2, fe2, Ne2;
    const Oe2 = q2();
    return Oe2.trackSids = ((re2 = N2.trackSids) === null || re2 === void 0 ? void 0 : re2.map((qe2) => qe2)) || [], Oe2.subscribe = (fe2 = N2.subscribe) !== null && fe2 !== void 0 ? fe2 : false, Oe2.participantTracks = ((Ne2 = N2.participantTracks) === null || Ne2 === void 0 ? void 0 : Ne2.map((qe2) => v2.ParticipantTracks.fromPartial(qe2))) || [], Oe2;
  } };
  function z2() {
    return { trackSids: [], disabled: false, quality: 0, width: 0, height: 0, fps: 0 };
  }
  a420.UpdateTrackSettings = { encode(N2, re2 = l2.default.Writer.create()) {
    if (N2.trackSids !== void 0 && N2.trackSids.length !== 0)
      for (const fe2 of N2.trackSids)
        re2.uint32(10).string(fe2);
    return N2.disabled === true && re2.uint32(24).bool(N2.disabled), N2.quality !== void 0 && N2.quality !== 0 && re2.uint32(32).int32(N2.quality), N2.width !== void 0 && N2.width !== 0 && re2.uint32(40).uint32(N2.width), N2.height !== void 0 && N2.height !== 0 && re2.uint32(48).uint32(N2.height), N2.fps !== void 0 && N2.fps !== 0 && re2.uint32(56).uint32(N2.fps), re2;
  }, decode(N2, re2) {
    const fe2 = N2 instanceof l2.default.Reader ? N2 : new l2.default.Reader(N2);
    let Ne2 = re2 === void 0 ? fe2.len : fe2.pos + re2;
    const Oe2 = z2();
    for (; fe2.pos < Ne2; ) {
      const qe2 = fe2.uint32();
      switch (qe2 >>> 3) {
        case 1:
          Oe2.trackSids.push(fe2.string());
          break;
        case 3:
          Oe2.disabled = fe2.bool();
          break;
        case 4:
          Oe2.quality = fe2.int32();
          break;
        case 5:
          Oe2.width = fe2.uint32();
          break;
        case 6:
          Oe2.height = fe2.uint32();
          break;
        case 7:
          Oe2.fps = fe2.uint32();
          break;
        default:
          fe2.skipType(qe2 & 7);
          break;
      }
    }
    return Oe2;
  }, fromJSON(N2) {
    return { trackSids: Array.isArray(N2 == null ? void 0 : N2.trackSids) ? N2.trackSids.map((re2) => String(re2)) : [], disabled: ae2(N2.disabled) ? !!N2.disabled : false, quality: ae2(N2.quality) ? v2.videoQualityFromJSON(N2.quality) : 0, width: ae2(N2.width) ? Number(N2.width) : 0, height: ae2(N2.height) ? Number(N2.height) : 0, fps: ae2(N2.fps) ? Number(N2.fps) : 0 };
  }, toJSON(N2) {
    const re2 = {};
    return N2.trackSids ? re2.trackSids = N2.trackSids.map((fe2) => fe2) : re2.trackSids = [], N2.disabled !== void 0 && (re2.disabled = N2.disabled), N2.quality !== void 0 && (re2.quality = v2.videoQualityToJSON(N2.quality)), N2.width !== void 0 && (re2.width = Math.round(N2.width)), N2.height !== void 0 && (re2.height = Math.round(N2.height)), N2.fps !== void 0 && (re2.fps = Math.round(N2.fps)), re2;
  }, fromPartial(N2) {
    var re2, fe2, Ne2, Oe2, qe2, je2;
    const Fe2 = z2();
    return Fe2.trackSids = ((re2 = N2.trackSids) === null || re2 === void 0 ? void 0 : re2.map((yt) => yt)) || [], Fe2.disabled = (fe2 = N2.disabled) !== null && fe2 !== void 0 ? fe2 : false, Fe2.quality = (Ne2 = N2.quality) !== null && Ne2 !== void 0 ? Ne2 : 0, Fe2.width = (Oe2 = N2.width) !== null && Oe2 !== void 0 ? Oe2 : 0, Fe2.height = (qe2 = N2.height) !== null && qe2 !== void 0 ? qe2 : 0, Fe2.fps = (je2 = N2.fps) !== null && je2 !== void 0 ? je2 : 0, Fe2;
  } };
  function C2() {
    return { canReconnect: false, reason: 0 };
  }
  a420.LeaveRequest = { encode(N2, re2 = l2.default.Writer.create()) {
    return N2.canReconnect === true && re2.uint32(8).bool(N2.canReconnect), N2.reason !== void 0 && N2.reason !== 0 && re2.uint32(16).int32(N2.reason), re2;
  }, decode(N2, re2) {
    const fe2 = N2 instanceof l2.default.Reader ? N2 : new l2.default.Reader(N2);
    let Ne2 = re2 === void 0 ? fe2.len : fe2.pos + re2;
    const Oe2 = C2();
    for (; fe2.pos < Ne2; ) {
      const qe2 = fe2.uint32();
      switch (qe2 >>> 3) {
        case 1:
          Oe2.canReconnect = fe2.bool();
          break;
        case 2:
          Oe2.reason = fe2.int32();
          break;
        default:
          fe2.skipType(qe2 & 7);
          break;
      }
    }
    return Oe2;
  }, fromJSON(N2) {
    return { canReconnect: ae2(N2.canReconnect) ? !!N2.canReconnect : false, reason: ae2(N2.reason) ? v2.disconnectReasonFromJSON(N2.reason) : 0 };
  }, toJSON(N2) {
    const re2 = {};
    return N2.canReconnect !== void 0 && (re2.canReconnect = N2.canReconnect), N2.reason !== void 0 && (re2.reason = v2.disconnectReasonToJSON(N2.reason)), re2;
  }, fromPartial(N2) {
    var re2, fe2;
    const Ne2 = C2();
    return Ne2.canReconnect = (re2 = N2.canReconnect) !== null && re2 !== void 0 ? re2 : false, Ne2.reason = (fe2 = N2.reason) !== null && fe2 !== void 0 ? fe2 : 0, Ne2;
  } };
  function b() {
    return { trackSid: "", layers: [] };
  }
  a420.UpdateVideoLayers = { encode(N2, re2 = l2.default.Writer.create()) {
    if (N2.trackSid !== void 0 && N2.trackSid !== "" && re2.uint32(10).string(N2.trackSid), N2.layers !== void 0 && N2.layers.length !== 0)
      for (const fe2 of N2.layers)
        v2.VideoLayer.encode(fe2, re2.uint32(18).fork()).ldelim();
    return re2;
  }, decode(N2, re2) {
    const fe2 = N2 instanceof l2.default.Reader ? N2 : new l2.default.Reader(N2);
    let Ne2 = re2 === void 0 ? fe2.len : fe2.pos + re2;
    const Oe2 = b();
    for (; fe2.pos < Ne2; ) {
      const qe2 = fe2.uint32();
      switch (qe2 >>> 3) {
        case 1:
          Oe2.trackSid = fe2.string();
          break;
        case 2:
          Oe2.layers.push(v2.VideoLayer.decode(fe2, fe2.uint32()));
          break;
        default:
          fe2.skipType(qe2 & 7);
          break;
      }
    }
    return Oe2;
  }, fromJSON(N2) {
    return { trackSid: ae2(N2.trackSid) ? String(N2.trackSid) : "", layers: Array.isArray(N2 == null ? void 0 : N2.layers) ? N2.layers.map((re2) => v2.VideoLayer.fromJSON(re2)) : [] };
  }, toJSON(N2) {
    const re2 = {};
    return N2.trackSid !== void 0 && (re2.trackSid = N2.trackSid), N2.layers ? re2.layers = N2.layers.map((fe2) => fe2 ? v2.VideoLayer.toJSON(fe2) : void 0) : re2.layers = [], re2;
  }, fromPartial(N2) {
    var re2, fe2;
    const Ne2 = b();
    return Ne2.trackSid = (re2 = N2.trackSid) !== null && re2 !== void 0 ? re2 : "", Ne2.layers = ((fe2 = N2.layers) === null || fe2 === void 0 ? void 0 : fe2.map((Oe2) => v2.VideoLayer.fromPartial(Oe2))) || [], Ne2;
  } };
  function E2() {
    return { urls: [], username: "", credential: "" };
  }
  a420.ICEServer = { encode(N2, re2 = l2.default.Writer.create()) {
    if (N2.urls !== void 0 && N2.urls.length !== 0)
      for (const fe2 of N2.urls)
        re2.uint32(10).string(fe2);
    return N2.username !== void 0 && N2.username !== "" && re2.uint32(18).string(N2.username), N2.credential !== void 0 && N2.credential !== "" && re2.uint32(26).string(N2.credential), re2;
  }, decode(N2, re2) {
    const fe2 = N2 instanceof l2.default.Reader ? N2 : new l2.default.Reader(N2);
    let Ne2 = re2 === void 0 ? fe2.len : fe2.pos + re2;
    const Oe2 = E2();
    for (; fe2.pos < Ne2; ) {
      const qe2 = fe2.uint32();
      switch (qe2 >>> 3) {
        case 1:
          Oe2.urls.push(fe2.string());
          break;
        case 2:
          Oe2.username = fe2.string();
          break;
        case 3:
          Oe2.credential = fe2.string();
          break;
        default:
          fe2.skipType(qe2 & 7);
          break;
      }
    }
    return Oe2;
  }, fromJSON(N2) {
    return { urls: Array.isArray(N2 == null ? void 0 : N2.urls) ? N2.urls.map((re2) => String(re2)) : [], username: ae2(N2.username) ? String(N2.username) : "", credential: ae2(N2.credential) ? String(N2.credential) : "" };
  }, toJSON(N2) {
    const re2 = {};
    return N2.urls ? re2.urls = N2.urls.map((fe2) => fe2) : re2.urls = [], N2.username !== void 0 && (re2.username = N2.username), N2.credential !== void 0 && (re2.credential = N2.credential), re2;
  }, fromPartial(N2) {
    var re2, fe2, Ne2;
    const Oe2 = E2();
    return Oe2.urls = ((re2 = N2.urls) === null || re2 === void 0 ? void 0 : re2.map((qe2) => qe2)) || [], Oe2.username = (fe2 = N2.username) !== null && fe2 !== void 0 ? fe2 : "", Oe2.credential = (Ne2 = N2.credential) !== null && Ne2 !== void 0 ? Ne2 : "", Oe2;
  } };
  function k() {
    return { speakers: [] };
  }
  a420.SpeakersChanged = { encode(N2, re2 = l2.default.Writer.create()) {
    if (N2.speakers !== void 0 && N2.speakers.length !== 0)
      for (const fe2 of N2.speakers)
        v2.SpeakerInfo.encode(fe2, re2.uint32(10).fork()).ldelim();
    return re2;
  }, decode(N2, re2) {
    const fe2 = N2 instanceof l2.default.Reader ? N2 : new l2.default.Reader(N2);
    let Ne2 = re2 === void 0 ? fe2.len : fe2.pos + re2;
    const Oe2 = k();
    for (; fe2.pos < Ne2; ) {
      const qe2 = fe2.uint32();
      switch (qe2 >>> 3) {
        case 1:
          Oe2.speakers.push(v2.SpeakerInfo.decode(fe2, fe2.uint32()));
          break;
        default:
          fe2.skipType(qe2 & 7);
          break;
      }
    }
    return Oe2;
  }, fromJSON(N2) {
    return { speakers: Array.isArray(N2 == null ? void 0 : N2.speakers) ? N2.speakers.map((re2) => v2.SpeakerInfo.fromJSON(re2)) : [] };
  }, toJSON(N2) {
    const re2 = {};
    return N2.speakers ? re2.speakers = N2.speakers.map((fe2) => fe2 ? v2.SpeakerInfo.toJSON(fe2) : void 0) : re2.speakers = [], re2;
  }, fromPartial(N2) {
    var re2;
    const fe2 = k();
    return fe2.speakers = ((re2 = N2.speakers) === null || re2 === void 0 ? void 0 : re2.map((Ne2) => v2.SpeakerInfo.fromPartial(Ne2))) || [], fe2;
  } };
  function O2() {
    return { room: void 0 };
  }
  a420.RoomUpdate = { encode(N2, re2 = l2.default.Writer.create()) {
    return N2.room !== void 0 && v2.Room.encode(N2.room, re2.uint32(10).fork()).ldelim(), re2;
  }, decode(N2, re2) {
    const fe2 = N2 instanceof l2.default.Reader ? N2 : new l2.default.Reader(N2);
    let Ne2 = re2 === void 0 ? fe2.len : fe2.pos + re2;
    const Oe2 = O2();
    for (; fe2.pos < Ne2; ) {
      const qe2 = fe2.uint32();
      switch (qe2 >>> 3) {
        case 1:
          Oe2.room = v2.Room.decode(fe2, fe2.uint32());
          break;
        default:
          fe2.skipType(qe2 & 7);
          break;
      }
    }
    return Oe2;
  }, fromJSON(N2) {
    return { room: ae2(N2.room) ? v2.Room.fromJSON(N2.room) : void 0 };
  }, toJSON(N2) {
    const re2 = {};
    return N2.room !== void 0 && (re2.room = N2.room ? v2.Room.toJSON(N2.room) : void 0), re2;
  }, fromPartial(N2) {
    const re2 = O2();
    return re2.room = N2.room !== void 0 && N2.room !== null ? v2.Room.fromPartial(N2.room) : void 0, re2;
  } };
  function A2() {
    return { participantSid: "", quality: 0, score: 0 };
  }
  a420.ConnectionQualityInfo = { encode(N2, re2 = l2.default.Writer.create()) {
    return N2.participantSid !== void 0 && N2.participantSid !== "" && re2.uint32(10).string(N2.participantSid), N2.quality !== void 0 && N2.quality !== 0 && re2.uint32(16).int32(N2.quality), N2.score !== void 0 && N2.score !== 0 && re2.uint32(29).float(N2.score), re2;
  }, decode(N2, re2) {
    const fe2 = N2 instanceof l2.default.Reader ? N2 : new l2.default.Reader(N2);
    let Ne2 = re2 === void 0 ? fe2.len : fe2.pos + re2;
    const Oe2 = A2();
    for (; fe2.pos < Ne2; ) {
      const qe2 = fe2.uint32();
      switch (qe2 >>> 3) {
        case 1:
          Oe2.participantSid = fe2.string();
          break;
        case 2:
          Oe2.quality = fe2.int32();
          break;
        case 3:
          Oe2.score = fe2.float();
          break;
        default:
          fe2.skipType(qe2 & 7);
          break;
      }
    }
    return Oe2;
  }, fromJSON(N2) {
    return { participantSid: ae2(N2.participantSid) ? String(N2.participantSid) : "", quality: ae2(N2.quality) ? v2.connectionQualityFromJSON(N2.quality) : 0, score: ae2(N2.score) ? Number(N2.score) : 0 };
  }, toJSON(N2) {
    const re2 = {};
    return N2.participantSid !== void 0 && (re2.participantSid = N2.participantSid), N2.quality !== void 0 && (re2.quality = v2.connectionQualityToJSON(N2.quality)), N2.score !== void 0 && (re2.score = N2.score), re2;
  }, fromPartial(N2) {
    var re2, fe2, Ne2;
    const Oe2 = A2();
    return Oe2.participantSid = (re2 = N2.participantSid) !== null && re2 !== void 0 ? re2 : "", Oe2.quality = (fe2 = N2.quality) !== null && fe2 !== void 0 ? fe2 : 0, Oe2.score = (Ne2 = N2.score) !== null && Ne2 !== void 0 ? Ne2 : 0, Oe2;
  } };
  function x2() {
    return { updates: [] };
  }
  a420.ConnectionQualityUpdate = { encode(N2, re2 = l2.default.Writer.create()) {
    if (N2.updates !== void 0 && N2.updates.length !== 0)
      for (const fe2 of N2.updates)
        a420.ConnectionQualityInfo.encode(fe2, re2.uint32(10).fork()).ldelim();
    return re2;
  }, decode(N2, re2) {
    const fe2 = N2 instanceof l2.default.Reader ? N2 : new l2.default.Reader(N2);
    let Ne2 = re2 === void 0 ? fe2.len : fe2.pos + re2;
    const Oe2 = x2();
    for (; fe2.pos < Ne2; ) {
      const qe2 = fe2.uint32();
      switch (qe2 >>> 3) {
        case 1:
          Oe2.updates.push(a420.ConnectionQualityInfo.decode(fe2, fe2.uint32()));
          break;
        default:
          fe2.skipType(qe2 & 7);
          break;
      }
    }
    return Oe2;
  }, fromJSON(N2) {
    return { updates: Array.isArray(N2 == null ? void 0 : N2.updates) ? N2.updates.map((re2) => a420.ConnectionQualityInfo.fromJSON(re2)) : [] };
  }, toJSON(N2) {
    const re2 = {};
    return N2.updates ? re2.updates = N2.updates.map((fe2) => fe2 ? a420.ConnectionQualityInfo.toJSON(fe2) : void 0) : re2.updates = [], re2;
  }, fromPartial(N2) {
    var re2;
    const fe2 = x2();
    return fe2.updates = ((re2 = N2.updates) === null || re2 === void 0 ? void 0 : re2.map((Ne2) => a420.ConnectionQualityInfo.fromPartial(Ne2))) || [], fe2;
  } };
  function Y2() {
    return { participantSid: "", trackSid: "", state: 0 };
  }
  a420.StreamStateInfo = { encode(N2, re2 = l2.default.Writer.create()) {
    return N2.participantSid !== void 0 && N2.participantSid !== "" && re2.uint32(10).string(N2.participantSid), N2.trackSid !== void 0 && N2.trackSid !== "" && re2.uint32(18).string(N2.trackSid), N2.state !== void 0 && N2.state !== 0 && re2.uint32(24).int32(N2.state), re2;
  }, decode(N2, re2) {
    const fe2 = N2 instanceof l2.default.Reader ? N2 : new l2.default.Reader(N2);
    let Ne2 = re2 === void 0 ? fe2.len : fe2.pos + re2;
    const Oe2 = Y2();
    for (; fe2.pos < Ne2; ) {
      const qe2 = fe2.uint32();
      switch (qe2 >>> 3) {
        case 1:
          Oe2.participantSid = fe2.string();
          break;
        case 2:
          Oe2.trackSid = fe2.string();
          break;
        case 3:
          Oe2.state = fe2.int32();
          break;
        default:
          fe2.skipType(qe2 & 7);
          break;
      }
    }
    return Oe2;
  }, fromJSON(N2) {
    return { participantSid: ae2(N2.participantSid) ? String(N2.participantSid) : "", trackSid: ae2(N2.trackSid) ? String(N2.trackSid) : "", state: ae2(N2.state) ? $(N2.state) : 0 };
  }, toJSON(N2) {
    const re2 = {};
    return N2.participantSid !== void 0 && (re2.participantSid = N2.participantSid), N2.trackSid !== void 0 && (re2.trackSid = N2.trackSid), N2.state !== void 0 && (re2.state = F2(N2.state)), re2;
  }, fromPartial(N2) {
    var re2, fe2, Ne2;
    const Oe2 = Y2();
    return Oe2.participantSid = (re2 = N2.participantSid) !== null && re2 !== void 0 ? re2 : "", Oe2.trackSid = (fe2 = N2.trackSid) !== null && fe2 !== void 0 ? fe2 : "", Oe2.state = (Ne2 = N2.state) !== null && Ne2 !== void 0 ? Ne2 : 0, Oe2;
  } };
  function B2() {
    return { streamStates: [] };
  }
  a420.StreamStateUpdate = { encode(N2, re2 = l2.default.Writer.create()) {
    if (N2.streamStates !== void 0 && N2.streamStates.length !== 0)
      for (const fe2 of N2.streamStates)
        a420.StreamStateInfo.encode(fe2, re2.uint32(10).fork()).ldelim();
    return re2;
  }, decode(N2, re2) {
    const fe2 = N2 instanceof l2.default.Reader ? N2 : new l2.default.Reader(N2);
    let Ne2 = re2 === void 0 ? fe2.len : fe2.pos + re2;
    const Oe2 = B2();
    for (; fe2.pos < Ne2; ) {
      const qe2 = fe2.uint32();
      switch (qe2 >>> 3) {
        case 1:
          Oe2.streamStates.push(a420.StreamStateInfo.decode(fe2, fe2.uint32()));
          break;
        default:
          fe2.skipType(qe2 & 7);
          break;
      }
    }
    return Oe2;
  }, fromJSON(N2) {
    return { streamStates: Array.isArray(N2 == null ? void 0 : N2.streamStates) ? N2.streamStates.map((re2) => a420.StreamStateInfo.fromJSON(re2)) : [] };
  }, toJSON(N2) {
    const re2 = {};
    return N2.streamStates ? re2.streamStates = N2.streamStates.map((fe2) => fe2 ? a420.StreamStateInfo.toJSON(fe2) : void 0) : re2.streamStates = [], re2;
  }, fromPartial(N2) {
    var re2;
    const fe2 = B2();
    return fe2.streamStates = ((re2 = N2.streamStates) === null || re2 === void 0 ? void 0 : re2.map((Ne2) => a420.StreamStateInfo.fromPartial(Ne2))) || [], fe2;
  } };
  function T2() {
    return { quality: 0, enabled: false };
  }
  a420.SubscribedQuality = { encode(N2, re2 = l2.default.Writer.create()) {
    return N2.quality !== void 0 && N2.quality !== 0 && re2.uint32(8).int32(N2.quality), N2.enabled === true && re2.uint32(16).bool(N2.enabled), re2;
  }, decode(N2, re2) {
    const fe2 = N2 instanceof l2.default.Reader ? N2 : new l2.default.Reader(N2);
    let Ne2 = re2 === void 0 ? fe2.len : fe2.pos + re2;
    const Oe2 = T2();
    for (; fe2.pos < Ne2; ) {
      const qe2 = fe2.uint32();
      switch (qe2 >>> 3) {
        case 1:
          Oe2.quality = fe2.int32();
          break;
        case 2:
          Oe2.enabled = fe2.bool();
          break;
        default:
          fe2.skipType(qe2 & 7);
          break;
      }
    }
    return Oe2;
  }, fromJSON(N2) {
    return { quality: ae2(N2.quality) ? v2.videoQualityFromJSON(N2.quality) : 0, enabled: ae2(N2.enabled) ? !!N2.enabled : false };
  }, toJSON(N2) {
    const re2 = {};
    return N2.quality !== void 0 && (re2.quality = v2.videoQualityToJSON(N2.quality)), N2.enabled !== void 0 && (re2.enabled = N2.enabled), re2;
  }, fromPartial(N2) {
    var re2, fe2;
    const Ne2 = T2();
    return Ne2.quality = (re2 = N2.quality) !== null && re2 !== void 0 ? re2 : 0, Ne2.enabled = (fe2 = N2.enabled) !== null && fe2 !== void 0 ? fe2 : false, Ne2;
  } };
  function D2() {
    return { codec: "", qualities: [] };
  }
  a420.SubscribedCodec = { encode(N2, re2 = l2.default.Writer.create()) {
    if (N2.codec !== void 0 && N2.codec !== "" && re2.uint32(10).string(N2.codec), N2.qualities !== void 0 && N2.qualities.length !== 0)
      for (const fe2 of N2.qualities)
        a420.SubscribedQuality.encode(fe2, re2.uint32(18).fork()).ldelim();
    return re2;
  }, decode(N2, re2) {
    const fe2 = N2 instanceof l2.default.Reader ? N2 : new l2.default.Reader(N2);
    let Ne2 = re2 === void 0 ? fe2.len : fe2.pos + re2;
    const Oe2 = D2();
    for (; fe2.pos < Ne2; ) {
      const qe2 = fe2.uint32();
      switch (qe2 >>> 3) {
        case 1:
          Oe2.codec = fe2.string();
          break;
        case 2:
          Oe2.qualities.push(a420.SubscribedQuality.decode(fe2, fe2.uint32()));
          break;
        default:
          fe2.skipType(qe2 & 7);
          break;
      }
    }
    return Oe2;
  }, fromJSON(N2) {
    return { codec: ae2(N2.codec) ? String(N2.codec) : "", qualities: Array.isArray(N2 == null ? void 0 : N2.qualities) ? N2.qualities.map((re2) => a420.SubscribedQuality.fromJSON(re2)) : [] };
  }, toJSON(N2) {
    const re2 = {};
    return N2.codec !== void 0 && (re2.codec = N2.codec), N2.qualities ? re2.qualities = N2.qualities.map((fe2) => fe2 ? a420.SubscribedQuality.toJSON(fe2) : void 0) : re2.qualities = [], re2;
  }, fromPartial(N2) {
    var re2, fe2;
    const Ne2 = D2();
    return Ne2.codec = (re2 = N2.codec) !== null && re2 !== void 0 ? re2 : "", Ne2.qualities = ((fe2 = N2.qualities) === null || fe2 === void 0 ? void 0 : fe2.map((Oe2) => a420.SubscribedQuality.fromPartial(Oe2))) || [], Ne2;
  } };
  function te2() {
    return { trackSid: "", subscribedQualities: [], subscribedCodecs: [] };
  }
  a420.SubscribedQualityUpdate = { encode(N2, re2 = l2.default.Writer.create()) {
    if (N2.trackSid !== void 0 && N2.trackSid !== "" && re2.uint32(10).string(N2.trackSid), N2.subscribedQualities !== void 0 && N2.subscribedQualities.length !== 0)
      for (const fe2 of N2.subscribedQualities)
        a420.SubscribedQuality.encode(fe2, re2.uint32(18).fork()).ldelim();
    if (N2.subscribedCodecs !== void 0 && N2.subscribedCodecs.length !== 0)
      for (const fe2 of N2.subscribedCodecs)
        a420.SubscribedCodec.encode(fe2, re2.uint32(26).fork()).ldelim();
    return re2;
  }, decode(N2, re2) {
    const fe2 = N2 instanceof l2.default.Reader ? N2 : new l2.default.Reader(N2);
    let Ne2 = re2 === void 0 ? fe2.len : fe2.pos + re2;
    const Oe2 = te2();
    for (; fe2.pos < Ne2; ) {
      const qe2 = fe2.uint32();
      switch (qe2 >>> 3) {
        case 1:
          Oe2.trackSid = fe2.string();
          break;
        case 2:
          Oe2.subscribedQualities.push(a420.SubscribedQuality.decode(fe2, fe2.uint32()));
          break;
        case 3:
          Oe2.subscribedCodecs.push(a420.SubscribedCodec.decode(fe2, fe2.uint32()));
          break;
        default:
          fe2.skipType(qe2 & 7);
          break;
      }
    }
    return Oe2;
  }, fromJSON(N2) {
    return { trackSid: ae2(N2.trackSid) ? String(N2.trackSid) : "", subscribedQualities: Array.isArray(N2 == null ? void 0 : N2.subscribedQualities) ? N2.subscribedQualities.map((re2) => a420.SubscribedQuality.fromJSON(re2)) : [], subscribedCodecs: Array.isArray(N2 == null ? void 0 : N2.subscribedCodecs) ? N2.subscribedCodecs.map((re2) => a420.SubscribedCodec.fromJSON(re2)) : [] };
  }, toJSON(N2) {
    const re2 = {};
    return N2.trackSid !== void 0 && (re2.trackSid = N2.trackSid), N2.subscribedQualities ? re2.subscribedQualities = N2.subscribedQualities.map((fe2) => fe2 ? a420.SubscribedQuality.toJSON(fe2) : void 0) : re2.subscribedQualities = [], N2.subscribedCodecs ? re2.subscribedCodecs = N2.subscribedCodecs.map((fe2) => fe2 ? a420.SubscribedCodec.toJSON(fe2) : void 0) : re2.subscribedCodecs = [], re2;
  }, fromPartial(N2) {
    var re2, fe2, Ne2;
    const Oe2 = te2();
    return Oe2.trackSid = (re2 = N2.trackSid) !== null && re2 !== void 0 ? re2 : "", Oe2.subscribedQualities = ((fe2 = N2.subscribedQualities) === null || fe2 === void 0 ? void 0 : fe2.map((qe2) => a420.SubscribedQuality.fromPartial(qe2))) || [], Oe2.subscribedCodecs = ((Ne2 = N2.subscribedCodecs) === null || Ne2 === void 0 ? void 0 : Ne2.map((qe2) => a420.SubscribedCodec.fromPartial(qe2))) || [], Oe2;
  } };
  function me2() {
    return { participantSid: "", allTracks: false, trackSids: [], participantIdentity: "" };
  }
  a420.TrackPermission = { encode(N2, re2 = l2.default.Writer.create()) {
    if (N2.participantSid !== void 0 && N2.participantSid !== "" && re2.uint32(10).string(N2.participantSid), N2.allTracks === true && re2.uint32(16).bool(N2.allTracks), N2.trackSids !== void 0 && N2.trackSids.length !== 0)
      for (const fe2 of N2.trackSids)
        re2.uint32(26).string(fe2);
    return N2.participantIdentity !== void 0 && N2.participantIdentity !== "" && re2.uint32(34).string(N2.participantIdentity), re2;
  }, decode(N2, re2) {
    const fe2 = N2 instanceof l2.default.Reader ? N2 : new l2.default.Reader(N2);
    let Ne2 = re2 === void 0 ? fe2.len : fe2.pos + re2;
    const Oe2 = me2();
    for (; fe2.pos < Ne2; ) {
      const qe2 = fe2.uint32();
      switch (qe2 >>> 3) {
        case 1:
          Oe2.participantSid = fe2.string();
          break;
        case 2:
          Oe2.allTracks = fe2.bool();
          break;
        case 3:
          Oe2.trackSids.push(fe2.string());
          break;
        case 4:
          Oe2.participantIdentity = fe2.string();
          break;
        default:
          fe2.skipType(qe2 & 7);
          break;
      }
    }
    return Oe2;
  }, fromJSON(N2) {
    return { participantSid: ae2(N2.participantSid) ? String(N2.participantSid) : "", allTracks: ae2(N2.allTracks) ? !!N2.allTracks : false, trackSids: Array.isArray(N2 == null ? void 0 : N2.trackSids) ? N2.trackSids.map((re2) => String(re2)) : [], participantIdentity: ae2(N2.participantIdentity) ? String(N2.participantIdentity) : "" };
  }, toJSON(N2) {
    const re2 = {};
    return N2.participantSid !== void 0 && (re2.participantSid = N2.participantSid), N2.allTracks !== void 0 && (re2.allTracks = N2.allTracks), N2.trackSids ? re2.trackSids = N2.trackSids.map((fe2) => fe2) : re2.trackSids = [], N2.participantIdentity !== void 0 && (re2.participantIdentity = N2.participantIdentity), re2;
  }, fromPartial(N2) {
    var re2, fe2, Ne2, Oe2;
    const qe2 = me2();
    return qe2.participantSid = (re2 = N2.participantSid) !== null && re2 !== void 0 ? re2 : "", qe2.allTracks = (fe2 = N2.allTracks) !== null && fe2 !== void 0 ? fe2 : false, qe2.trackSids = ((Ne2 = N2.trackSids) === null || Ne2 === void 0 ? void 0 : Ne2.map((je2) => je2)) || [], qe2.participantIdentity = (Oe2 = N2.participantIdentity) !== null && Oe2 !== void 0 ? Oe2 : "", qe2;
  } };
  function Ie2() {
    return { allParticipants: false, trackPermissions: [] };
  }
  a420.SubscriptionPermission = { encode(N2, re2 = l2.default.Writer.create()) {
    if (N2.allParticipants === true && re2.uint32(8).bool(N2.allParticipants), N2.trackPermissions !== void 0 && N2.trackPermissions.length !== 0)
      for (const fe2 of N2.trackPermissions)
        a420.TrackPermission.encode(fe2, re2.uint32(18).fork()).ldelim();
    return re2;
  }, decode(N2, re2) {
    const fe2 = N2 instanceof l2.default.Reader ? N2 : new l2.default.Reader(N2);
    let Ne2 = re2 === void 0 ? fe2.len : fe2.pos + re2;
    const Oe2 = Ie2();
    for (; fe2.pos < Ne2; ) {
      const qe2 = fe2.uint32();
      switch (qe2 >>> 3) {
        case 1:
          Oe2.allParticipants = fe2.bool();
          break;
        case 2:
          Oe2.trackPermissions.push(a420.TrackPermission.decode(fe2, fe2.uint32()));
          break;
        default:
          fe2.skipType(qe2 & 7);
          break;
      }
    }
    return Oe2;
  }, fromJSON(N2) {
    return { allParticipants: ae2(N2.allParticipants) ? !!N2.allParticipants : false, trackPermissions: Array.isArray(N2 == null ? void 0 : N2.trackPermissions) ? N2.trackPermissions.map((re2) => a420.TrackPermission.fromJSON(re2)) : [] };
  }, toJSON(N2) {
    const re2 = {};
    return N2.allParticipants !== void 0 && (re2.allParticipants = N2.allParticipants), N2.trackPermissions ? re2.trackPermissions = N2.trackPermissions.map((fe2) => fe2 ? a420.TrackPermission.toJSON(fe2) : void 0) : re2.trackPermissions = [], re2;
  }, fromPartial(N2) {
    var re2, fe2;
    const Ne2 = Ie2();
    return Ne2.allParticipants = (re2 = N2.allParticipants) !== null && re2 !== void 0 ? re2 : false, Ne2.trackPermissions = ((fe2 = N2.trackPermissions) === null || fe2 === void 0 ? void 0 : fe2.map((Oe2) => a420.TrackPermission.fromPartial(Oe2))) || [], Ne2;
  } };
  function $e2() {
    return { participantSid: "", trackSid: "", allowed: false };
  }
  a420.SubscriptionPermissionUpdate = { encode(N2, re2 = l2.default.Writer.create()) {
    return N2.participantSid !== void 0 && N2.participantSid !== "" && re2.uint32(10).string(N2.participantSid), N2.trackSid !== void 0 && N2.trackSid !== "" && re2.uint32(18).string(N2.trackSid), N2.allowed === true && re2.uint32(24).bool(N2.allowed), re2;
  }, decode(N2, re2) {
    const fe2 = N2 instanceof l2.default.Reader ? N2 : new l2.default.Reader(N2);
    let Ne2 = re2 === void 0 ? fe2.len : fe2.pos + re2;
    const Oe2 = $e2();
    for (; fe2.pos < Ne2; ) {
      const qe2 = fe2.uint32();
      switch (qe2 >>> 3) {
        case 1:
          Oe2.participantSid = fe2.string();
          break;
        case 2:
          Oe2.trackSid = fe2.string();
          break;
        case 3:
          Oe2.allowed = fe2.bool();
          break;
        default:
          fe2.skipType(qe2 & 7);
          break;
      }
    }
    return Oe2;
  }, fromJSON(N2) {
    return { participantSid: ae2(N2.participantSid) ? String(N2.participantSid) : "", trackSid: ae2(N2.trackSid) ? String(N2.trackSid) : "", allowed: ae2(N2.allowed) ? !!N2.allowed : false };
  }, toJSON(N2) {
    const re2 = {};
    return N2.participantSid !== void 0 && (re2.participantSid = N2.participantSid), N2.trackSid !== void 0 && (re2.trackSid = N2.trackSid), N2.allowed !== void 0 && (re2.allowed = N2.allowed), re2;
  }, fromPartial(N2) {
    var re2, fe2, Ne2;
    const Oe2 = $e2();
    return Oe2.participantSid = (re2 = N2.participantSid) !== null && re2 !== void 0 ? re2 : "", Oe2.trackSid = (fe2 = N2.trackSid) !== null && fe2 !== void 0 ? fe2 : "", Oe2.allowed = (Ne2 = N2.allowed) !== null && Ne2 !== void 0 ? Ne2 : false, Oe2;
  } };
  function ye2() {
    return { answer: void 0, subscription: void 0, publishTracks: [], dataChannels: [], offer: void 0 };
  }
  a420.SyncState = { encode(N2, re2 = l2.default.Writer.create()) {
    if (N2.answer !== void 0 && a420.SessionDescription.encode(N2.answer, re2.uint32(10).fork()).ldelim(), N2.subscription !== void 0 && a420.UpdateSubscription.encode(N2.subscription, re2.uint32(18).fork()).ldelim(), N2.publishTracks !== void 0 && N2.publishTracks.length !== 0)
      for (const fe2 of N2.publishTracks)
        a420.TrackPublishedResponse.encode(fe2, re2.uint32(26).fork()).ldelim();
    if (N2.dataChannels !== void 0 && N2.dataChannels.length !== 0)
      for (const fe2 of N2.dataChannels)
        a420.DataChannelInfo.encode(fe2, re2.uint32(34).fork()).ldelim();
    return N2.offer !== void 0 && a420.SessionDescription.encode(N2.offer, re2.uint32(42).fork()).ldelim(), re2;
  }, decode(N2, re2) {
    const fe2 = N2 instanceof l2.default.Reader ? N2 : new l2.default.Reader(N2);
    let Ne2 = re2 === void 0 ? fe2.len : fe2.pos + re2;
    const Oe2 = ye2();
    for (; fe2.pos < Ne2; ) {
      const qe2 = fe2.uint32();
      switch (qe2 >>> 3) {
        case 1:
          Oe2.answer = a420.SessionDescription.decode(fe2, fe2.uint32());
          break;
        case 2:
          Oe2.subscription = a420.UpdateSubscription.decode(fe2, fe2.uint32());
          break;
        case 3:
          Oe2.publishTracks.push(a420.TrackPublishedResponse.decode(fe2, fe2.uint32()));
          break;
        case 4:
          Oe2.dataChannels.push(a420.DataChannelInfo.decode(fe2, fe2.uint32()));
          break;
        case 5:
          Oe2.offer = a420.SessionDescription.decode(fe2, fe2.uint32());
          break;
        default:
          fe2.skipType(qe2 & 7);
          break;
      }
    }
    return Oe2;
  }, fromJSON(N2) {
    return { answer: ae2(N2.answer) ? a420.SessionDescription.fromJSON(N2.answer) : void 0, subscription: ae2(N2.subscription) ? a420.UpdateSubscription.fromJSON(N2.subscription) : void 0, publishTracks: Array.isArray(N2 == null ? void 0 : N2.publishTracks) ? N2.publishTracks.map((re2) => a420.TrackPublishedResponse.fromJSON(re2)) : [], dataChannels: Array.isArray(N2 == null ? void 0 : N2.dataChannels) ? N2.dataChannels.map((re2) => a420.DataChannelInfo.fromJSON(re2)) : [], offer: ae2(N2.offer) ? a420.SessionDescription.fromJSON(N2.offer) : void 0 };
  }, toJSON(N2) {
    const re2 = {};
    return N2.answer !== void 0 && (re2.answer = N2.answer ? a420.SessionDescription.toJSON(N2.answer) : void 0), N2.subscription !== void 0 && (re2.subscription = N2.subscription ? a420.UpdateSubscription.toJSON(N2.subscription) : void 0), N2.publishTracks ? re2.publishTracks = N2.publishTracks.map((fe2) => fe2 ? a420.TrackPublishedResponse.toJSON(fe2) : void 0) : re2.publishTracks = [], N2.dataChannels ? re2.dataChannels = N2.dataChannels.map((fe2) => fe2 ? a420.DataChannelInfo.toJSON(fe2) : void 0) : re2.dataChannels = [], N2.offer !== void 0 && (re2.offer = N2.offer ? a420.SessionDescription.toJSON(N2.offer) : void 0), re2;
  }, fromPartial(N2) {
    var re2, fe2;
    const Ne2 = ye2();
    return Ne2.answer = N2.answer !== void 0 && N2.answer !== null ? a420.SessionDescription.fromPartial(N2.answer) : void 0, Ne2.subscription = N2.subscription !== void 0 && N2.subscription !== null ? a420.UpdateSubscription.fromPartial(N2.subscription) : void 0, Ne2.publishTracks = ((re2 = N2.publishTracks) === null || re2 === void 0 ? void 0 : re2.map((Oe2) => a420.TrackPublishedResponse.fromPartial(Oe2))) || [], Ne2.dataChannels = ((fe2 = N2.dataChannels) === null || fe2 === void 0 ? void 0 : fe2.map((Oe2) => a420.DataChannelInfo.fromPartial(Oe2))) || [], Ne2.offer = N2.offer !== void 0 && N2.offer !== null ? a420.SessionDescription.fromPartial(N2.offer) : void 0, Ne2;
  } };
  function he2() {
    return { label: "", id: 0, target: 0 };
  }
  a420.DataChannelInfo = { encode(N2, re2 = l2.default.Writer.create()) {
    return N2.label !== void 0 && N2.label !== "" && re2.uint32(10).string(N2.label), N2.id !== void 0 && N2.id !== 0 && re2.uint32(16).uint32(N2.id), N2.target !== void 0 && N2.target !== 0 && re2.uint32(24).int32(N2.target), re2;
  }, decode(N2, re2) {
    const fe2 = N2 instanceof l2.default.Reader ? N2 : new l2.default.Reader(N2);
    let Ne2 = re2 === void 0 ? fe2.len : fe2.pos + re2;
    const Oe2 = he2();
    for (; fe2.pos < Ne2; ) {
      const qe2 = fe2.uint32();
      switch (qe2 >>> 3) {
        case 1:
          Oe2.label = fe2.string();
          break;
        case 2:
          Oe2.id = fe2.uint32();
          break;
        case 3:
          Oe2.target = fe2.int32();
          break;
        default:
          fe2.skipType(qe2 & 7);
          break;
      }
    }
    return Oe2;
  }, fromJSON(N2) {
    return { label: ae2(N2.label) ? String(N2.label) : "", id: ae2(N2.id) ? Number(N2.id) : 0, target: ae2(N2.target) ? _(N2.target) : 0 };
  }, toJSON(N2) {
    const re2 = {};
    return N2.label !== void 0 && (re2.label = N2.label), N2.id !== void 0 && (re2.id = Math.round(N2.id)), N2.target !== void 0 && (re2.target = I2(N2.target)), re2;
  }, fromPartial(N2) {
    var re2, fe2, Ne2;
    const Oe2 = he2();
    return Oe2.label = (re2 = N2.label) !== null && re2 !== void 0 ? re2 : "", Oe2.id = (fe2 = N2.id) !== null && fe2 !== void 0 ? fe2 : 0, Oe2.target = (Ne2 = N2.target) !== null && Ne2 !== void 0 ? Ne2 : 0, Oe2;
  } };
  function Me2() {
    return { speakerUpdate: void 0, nodeFailure: void 0, migration: void 0, serverLeave: void 0, switchCandidateProtocol: void 0 };
  }
  a420.SimulateScenario = { encode(N2, re2 = l2.default.Writer.create()) {
    return N2.speakerUpdate !== void 0 && re2.uint32(8).int32(N2.speakerUpdate), N2.nodeFailure !== void 0 && re2.uint32(16).bool(N2.nodeFailure), N2.migration !== void 0 && re2.uint32(24).bool(N2.migration), N2.serverLeave !== void 0 && re2.uint32(32).bool(N2.serverLeave), N2.switchCandidateProtocol !== void 0 && re2.uint32(40).int32(N2.switchCandidateProtocol), re2;
  }, decode(N2, re2) {
    const fe2 = N2 instanceof l2.default.Reader ? N2 : new l2.default.Reader(N2);
    let Ne2 = re2 === void 0 ? fe2.len : fe2.pos + re2;
    const Oe2 = Me2();
    for (; fe2.pos < Ne2; ) {
      const qe2 = fe2.uint32();
      switch (qe2 >>> 3) {
        case 1:
          Oe2.speakerUpdate = fe2.int32();
          break;
        case 2:
          Oe2.nodeFailure = fe2.bool();
          break;
        case 3:
          Oe2.migration = fe2.bool();
          break;
        case 4:
          Oe2.serverLeave = fe2.bool();
          break;
        case 5:
          Oe2.switchCandidateProtocol = fe2.int32();
          break;
        default:
          fe2.skipType(qe2 & 7);
          break;
      }
    }
    return Oe2;
  }, fromJSON(N2) {
    return { speakerUpdate: ae2(N2.speakerUpdate) ? Number(N2.speakerUpdate) : void 0, nodeFailure: ae2(N2.nodeFailure) ? !!N2.nodeFailure : void 0, migration: ae2(N2.migration) ? !!N2.migration : void 0, serverLeave: ae2(N2.serverLeave) ? !!N2.serverLeave : void 0, switchCandidateProtocol: ae2(N2.switchCandidateProtocol) ? j(N2.switchCandidateProtocol) : void 0 };
  }, toJSON(N2) {
    const re2 = {};
    return N2.speakerUpdate !== void 0 && (re2.speakerUpdate = Math.round(N2.speakerUpdate)), N2.nodeFailure !== void 0 && (re2.nodeFailure = N2.nodeFailure), N2.migration !== void 0 && (re2.migration = N2.migration), N2.serverLeave !== void 0 && (re2.serverLeave = N2.serverLeave), N2.switchCandidateProtocol !== void 0 && (re2.switchCandidateProtocol = N2.switchCandidateProtocol !== void 0 ? ee2(N2.switchCandidateProtocol) : void 0), re2;
  }, fromPartial(N2) {
    var re2, fe2, Ne2, Oe2, qe2;
    const je2 = Me2();
    return je2.speakerUpdate = (re2 = N2.speakerUpdate) !== null && re2 !== void 0 ? re2 : void 0, je2.nodeFailure = (fe2 = N2.nodeFailure) !== null && fe2 !== void 0 ? fe2 : void 0, je2.migration = (Ne2 = N2.migration) !== null && Ne2 !== void 0 ? Ne2 : void 0, je2.serverLeave = (Oe2 = N2.serverLeave) !== null && Oe2 !== void 0 ? Oe2 : void 0, je2.switchCandidateProtocol = (qe2 = N2.switchCandidateProtocol) !== null && qe2 !== void 0 ? qe2 : void 0, je2;
  } };
  var Ae2 = (() => {
    if (typeof Ae2 < "u")
      return Ae2;
    if (typeof self < "u")
      return self;
    if (typeof window < "u")
      return window;
    if (typeof commonjsGlobal$1 < "u")
      return commonjsGlobal$1;
    throw "Unable to locate global object";
  })();
  function xe2(N2) {
    if (N2.gt(Number.MAX_SAFE_INTEGER))
      throw new Ae2.Error("Value is larger than Number.MAX_SAFE_INTEGER");
    return N2.toNumber();
  }
  l2.default.util.Long !== c.default && (l2.default.util.Long = c.default, l2.default.configure());
  function ae2(N2) {
    return N2 != null;
  }
})(livekit_rtc);
(function(a420) {
  var u2 = commonjsGlobal$1 && commonjsGlobal$1.__importDefault || function(z2) {
    return z2 && z2.__esModule ? z2 : { default: z2 };
  };
  Object.defineProperty(a420, "__esModule", { value: true }), a420.RoomInternal = a420.KeepAlive = a420.RemoveParticipant = a420.EndSession = a420.StartSession = a420.SignalNodeMessage = a420.RTCNodeMessage = a420.NodeStats = a420.Node = a420.nodeStateToJSON = a420.nodeStateFromJSON = a420.NodeState = a420.nodeTypeToJSON = a420.nodeTypeFromJSON = a420.NodeType = a420.protobufPackage = void 0;
  const c = u2(umdExports), l2 = u2(minimal), v2 = livekit_egress, p2 = livekit_models, _ = livekit_room, I2 = livekit_rtc;
  a420.protobufPackage = "livekit";
  var P2;
  (function(z2) {
    z2[z2.SERVER = 0] = "SERVER", z2[z2.CONTROLLER = 1] = "CONTROLLER", z2[z2.MEDIA = 2] = "MEDIA", z2[z2.TURN = 4] = "TURN", z2[z2.UNRECOGNIZED = -1] = "UNRECOGNIZED";
  })(P2 = a420.NodeType || (a420.NodeType = {}));
  function $(z2) {
    switch (z2) {
      case 0:
      case "SERVER":
        return P2.SERVER;
      case 1:
      case "CONTROLLER":
        return P2.CONTROLLER;
      case 2:
      case "MEDIA":
        return P2.MEDIA;
      case 4:
      case "TURN":
        return P2.TURN;
      case -1:
      case "UNRECOGNIZED":
      default:
        return P2.UNRECOGNIZED;
    }
  }
  a420.nodeTypeFromJSON = $;
  function F2(z2) {
    switch (z2) {
      case P2.SERVER:
        return "SERVER";
      case P2.CONTROLLER:
        return "CONTROLLER";
      case P2.MEDIA:
        return "MEDIA";
      case P2.TURN:
        return "TURN";
      case P2.UNRECOGNIZED:
      default:
        return "UNRECOGNIZED";
    }
  }
  a420.nodeTypeToJSON = F2;
  var H2;
  (function(z2) {
    z2[z2.STARTING_UP = 0] = "STARTING_UP", z2[z2.SERVING = 1] = "SERVING", z2[z2.SHUTTING_DOWN = 2] = "SHUTTING_DOWN", z2[z2.UNRECOGNIZED = -1] = "UNRECOGNIZED";
  })(H2 = a420.NodeState || (a420.NodeState = {}));
  function j(z2) {
    switch (z2) {
      case 0:
      case "STARTING_UP":
        return H2.STARTING_UP;
      case 1:
      case "SERVING":
        return H2.SERVING;
      case 2:
      case "SHUTTING_DOWN":
        return H2.SHUTTING_DOWN;
      case -1:
      case "UNRECOGNIZED":
      default:
        return H2.UNRECOGNIZED;
    }
  }
  a420.nodeStateFromJSON = j;
  function ee2(z2) {
    switch (z2) {
      case H2.STARTING_UP:
        return "STARTING_UP";
      case H2.SERVING:
        return "SERVING";
      case H2.SHUTTING_DOWN:
        return "SHUTTING_DOWN";
      case H2.UNRECOGNIZED:
      default:
        return "UNRECOGNIZED";
    }
  }
  a420.nodeStateToJSON = ee2;
  function X2() {
    return { id: "", ip: "", numCpus: 0, stats: void 0, type: 0, state: 0, region: "" };
  }
  a420.Node = { encode(z2, C2 = l2.default.Writer.create()) {
    return z2.id !== void 0 && z2.id !== "" && C2.uint32(10).string(z2.id), z2.ip !== void 0 && z2.ip !== "" && C2.uint32(18).string(z2.ip), z2.numCpus !== void 0 && z2.numCpus !== 0 && C2.uint32(24).uint32(z2.numCpus), z2.stats !== void 0 && a420.NodeStats.encode(z2.stats, C2.uint32(34).fork()).ldelim(), z2.type !== void 0 && z2.type !== 0 && C2.uint32(40).int32(z2.type), z2.state !== void 0 && z2.state !== 0 && C2.uint32(48).int32(z2.state), z2.region !== void 0 && z2.region !== "" && C2.uint32(58).string(z2.region), C2;
  }, decode(z2, C2) {
    const b = z2 instanceof l2.default.Reader ? z2 : new l2.default.Reader(z2);
    let E2 = C2 === void 0 ? b.len : b.pos + C2;
    const k = X2();
    for (; b.pos < E2; ) {
      const O2 = b.uint32();
      switch (O2 >>> 3) {
        case 1:
          k.id = b.string();
          break;
        case 2:
          k.ip = b.string();
          break;
        case 3:
          k.numCpus = b.uint32();
          break;
        case 4:
          k.stats = a420.NodeStats.decode(b, b.uint32());
          break;
        case 5:
          k.type = b.int32();
          break;
        case 6:
          k.state = b.int32();
          break;
        case 7:
          k.region = b.string();
          break;
        default:
          b.skipType(O2 & 7);
          break;
      }
    }
    return k;
  }, fromJSON(z2) {
    return { id: q2(z2.id) ? String(z2.id) : "", ip: q2(z2.ip) ? String(z2.ip) : "", numCpus: q2(z2.numCpus) ? Number(z2.numCpus) : 0, stats: q2(z2.stats) ? a420.NodeStats.fromJSON(z2.stats) : void 0, type: q2(z2.type) ? $(z2.type) : 0, state: q2(z2.state) ? j(z2.state) : 0, region: q2(z2.region) ? String(z2.region) : "" };
  }, toJSON(z2) {
    const C2 = {};
    return z2.id !== void 0 && (C2.id = z2.id), z2.ip !== void 0 && (C2.ip = z2.ip), z2.numCpus !== void 0 && (C2.numCpus = Math.round(z2.numCpus)), z2.stats !== void 0 && (C2.stats = z2.stats ? a420.NodeStats.toJSON(z2.stats) : void 0), z2.type !== void 0 && (C2.type = F2(z2.type)), z2.state !== void 0 && (C2.state = ee2(z2.state)), z2.region !== void 0 && (C2.region = z2.region), C2;
  }, fromPartial(z2) {
    var C2, b, E2, k, O2, A2;
    const x2 = X2();
    return x2.id = (C2 = z2.id) !== null && C2 !== void 0 ? C2 : "", x2.ip = (b = z2.ip) !== null && b !== void 0 ? b : "", x2.numCpus = (E2 = z2.numCpus) !== null && E2 !== void 0 ? E2 : 0, x2.stats = z2.stats !== void 0 && z2.stats !== null ? a420.NodeStats.fromPartial(z2.stats) : void 0, x2.type = (k = z2.type) !== null && k !== void 0 ? k : 0, x2.state = (O2 = z2.state) !== null && O2 !== void 0 ? O2 : 0, x2.region = (A2 = z2.region) !== null && A2 !== void 0 ? A2 : "", x2;
  } };
  function ie2() {
    return { startedAt: 0, updatedAt: 0, numRooms: 0, numClients: 0, numTracksIn: 0, numTracksOut: 0, bytesIn: 0, bytesOut: 0, packetsIn: 0, packetsOut: 0, nackTotal: 0, bytesInPerSec: 0, bytesOutPerSec: 0, packetsInPerSec: 0, packetsOutPerSec: 0, nackPerSec: 0, numCpus: 0, loadAvgLast1min: 0, loadAvgLast5min: 0, loadAvgLast15min: 0, cpuLoad: 0, memoryLoad: 0, sysPacketsOut: 0, sysPacketsDropped: 0, sysPacketsOutPerSec: 0, sysPacketsDroppedPerSec: 0, sysPacketsDroppedPctPerSec: 0, retransmitBytesOut: 0, retransmitPacketsOut: 0, retransmitBytesOutPerSec: 0, retransmitPacketsOutPerSec: 0, participantJoin: 0, participantJoinPerSec: 0 };
  }
  a420.NodeStats = { encode(z2, C2 = l2.default.Writer.create()) {
    return z2.startedAt !== void 0 && z2.startedAt !== 0 && C2.uint32(8).int64(z2.startedAt), z2.updatedAt !== void 0 && z2.updatedAt !== 0 && C2.uint32(16).int64(z2.updatedAt), z2.numRooms !== void 0 && z2.numRooms !== 0 && C2.uint32(24).int32(z2.numRooms), z2.numClients !== void 0 && z2.numClients !== 0 && C2.uint32(32).int32(z2.numClients), z2.numTracksIn !== void 0 && z2.numTracksIn !== 0 && C2.uint32(40).int32(z2.numTracksIn), z2.numTracksOut !== void 0 && z2.numTracksOut !== 0 && C2.uint32(48).int32(z2.numTracksOut), z2.bytesIn !== void 0 && z2.bytesIn !== 0 && C2.uint32(56).uint64(z2.bytesIn), z2.bytesOut !== void 0 && z2.bytesOut !== 0 && C2.uint32(64).uint64(z2.bytesOut), z2.packetsIn !== void 0 && z2.packetsIn !== 0 && C2.uint32(72).uint64(z2.packetsIn), z2.packetsOut !== void 0 && z2.packetsOut !== 0 && C2.uint32(80).uint64(z2.packetsOut), z2.nackTotal !== void 0 && z2.nackTotal !== 0 && C2.uint32(88).uint64(z2.nackTotal), z2.bytesInPerSec !== void 0 && z2.bytesInPerSec !== 0 && C2.uint32(101).float(z2.bytesInPerSec), z2.bytesOutPerSec !== void 0 && z2.bytesOutPerSec !== 0 && C2.uint32(109).float(z2.bytesOutPerSec), z2.packetsInPerSec !== void 0 && z2.packetsInPerSec !== 0 && C2.uint32(117).float(z2.packetsInPerSec), z2.packetsOutPerSec !== void 0 && z2.packetsOutPerSec !== 0 && C2.uint32(125).float(z2.packetsOutPerSec), z2.nackPerSec !== void 0 && z2.nackPerSec !== 0 && C2.uint32(133).float(z2.nackPerSec), z2.numCpus !== void 0 && z2.numCpus !== 0 && C2.uint32(136).uint32(z2.numCpus), z2.loadAvgLast1min !== void 0 && z2.loadAvgLast1min !== 0 && C2.uint32(149).float(z2.loadAvgLast1min), z2.loadAvgLast5min !== void 0 && z2.loadAvgLast5min !== 0 && C2.uint32(157).float(z2.loadAvgLast5min), z2.loadAvgLast15min !== void 0 && z2.loadAvgLast15min !== 0 && C2.uint32(165).float(z2.loadAvgLast15min), z2.cpuLoad !== void 0 && z2.cpuLoad !== 0 && C2.uint32(173).float(z2.cpuLoad), z2.memoryLoad !== void 0 && z2.memoryLoad !== 0 && C2.uint32(269).float(z2.memoryLoad), z2.sysPacketsOut !== void 0 && z2.sysPacketsOut !== 0 && C2.uint32(224).uint32(z2.sysPacketsOut), z2.sysPacketsDropped !== void 0 && z2.sysPacketsDropped !== 0 && C2.uint32(232).uint32(z2.sysPacketsDropped), z2.sysPacketsOutPerSec !== void 0 && z2.sysPacketsOutPerSec !== 0 && C2.uint32(245).float(z2.sysPacketsOutPerSec), z2.sysPacketsDroppedPerSec !== void 0 && z2.sysPacketsDroppedPerSec !== 0 && C2.uint32(253).float(z2.sysPacketsDroppedPerSec), z2.sysPacketsDroppedPctPerSec !== void 0 && z2.sysPacketsDroppedPctPerSec !== 0 && C2.uint32(261).float(z2.sysPacketsDroppedPctPerSec), z2.retransmitBytesOut !== void 0 && z2.retransmitBytesOut !== 0 && C2.uint32(176).uint64(z2.retransmitBytesOut), z2.retransmitPacketsOut !== void 0 && z2.retransmitPacketsOut !== 0 && C2.uint32(184).uint64(z2.retransmitPacketsOut), z2.retransmitBytesOutPerSec !== void 0 && z2.retransmitBytesOutPerSec !== 0 && C2.uint32(197).float(z2.retransmitBytesOutPerSec), z2.retransmitPacketsOutPerSec !== void 0 && z2.retransmitPacketsOutPerSec !== 0 && C2.uint32(205).float(z2.retransmitPacketsOutPerSec), z2.participantJoin !== void 0 && z2.participantJoin !== 0 && C2.uint32(208).uint64(z2.participantJoin), z2.participantJoinPerSec !== void 0 && z2.participantJoinPerSec !== 0 && C2.uint32(221).float(z2.participantJoinPerSec), C2;
  }, decode(z2, C2) {
    const b = z2 instanceof l2.default.Reader ? z2 : new l2.default.Reader(z2);
    let E2 = C2 === void 0 ? b.len : b.pos + C2;
    const k = ie2();
    for (; b.pos < E2; ) {
      const O2 = b.uint32();
      switch (O2 >>> 3) {
        case 1:
          k.startedAt = Te2(b.int64());
          break;
        case 2:
          k.updatedAt = Te2(b.int64());
          break;
        case 3:
          k.numRooms = b.int32();
          break;
        case 4:
          k.numClients = b.int32();
          break;
        case 5:
          k.numTracksIn = b.int32();
          break;
        case 6:
          k.numTracksOut = b.int32();
          break;
        case 7:
          k.bytesIn = Te2(b.uint64());
          break;
        case 8:
          k.bytesOut = Te2(b.uint64());
          break;
        case 9:
          k.packetsIn = Te2(b.uint64());
          break;
        case 10:
          k.packetsOut = Te2(b.uint64());
          break;
        case 11:
          k.nackTotal = Te2(b.uint64());
          break;
        case 12:
          k.bytesInPerSec = b.float();
          break;
        case 13:
          k.bytesOutPerSec = b.float();
          break;
        case 14:
          k.packetsInPerSec = b.float();
          break;
        case 15:
          k.packetsOutPerSec = b.float();
          break;
        case 16:
          k.nackPerSec = b.float();
          break;
        case 17:
          k.numCpus = b.uint32();
          break;
        case 18:
          k.loadAvgLast1min = b.float();
          break;
        case 19:
          k.loadAvgLast5min = b.float();
          break;
        case 20:
          k.loadAvgLast15min = b.float();
          break;
        case 21:
          k.cpuLoad = b.float();
          break;
        case 33:
          k.memoryLoad = b.float();
          break;
        case 28:
          k.sysPacketsOut = b.uint32();
          break;
        case 29:
          k.sysPacketsDropped = b.uint32();
          break;
        case 30:
          k.sysPacketsOutPerSec = b.float();
          break;
        case 31:
          k.sysPacketsDroppedPerSec = b.float();
          break;
        case 32:
          k.sysPacketsDroppedPctPerSec = b.float();
          break;
        case 22:
          k.retransmitBytesOut = Te2(b.uint64());
          break;
        case 23:
          k.retransmitPacketsOut = Te2(b.uint64());
          break;
        case 24:
          k.retransmitBytesOutPerSec = b.float();
          break;
        case 25:
          k.retransmitPacketsOutPerSec = b.float();
          break;
        case 26:
          k.participantJoin = Te2(b.uint64());
          break;
        case 27:
          k.participantJoinPerSec = b.float();
          break;
        default:
          b.skipType(O2 & 7);
          break;
      }
    }
    return k;
  }, fromJSON(z2) {
    return { startedAt: q2(z2.startedAt) ? Number(z2.startedAt) : 0, updatedAt: q2(z2.updatedAt) ? Number(z2.updatedAt) : 0, numRooms: q2(z2.numRooms) ? Number(z2.numRooms) : 0, numClients: q2(z2.numClients) ? Number(z2.numClients) : 0, numTracksIn: q2(z2.numTracksIn) ? Number(z2.numTracksIn) : 0, numTracksOut: q2(z2.numTracksOut) ? Number(z2.numTracksOut) : 0, bytesIn: q2(z2.bytesIn) ? Number(z2.bytesIn) : 0, bytesOut: q2(z2.bytesOut) ? Number(z2.bytesOut) : 0, packetsIn: q2(z2.packetsIn) ? Number(z2.packetsIn) : 0, packetsOut: q2(z2.packetsOut) ? Number(z2.packetsOut) : 0, nackTotal: q2(z2.nackTotal) ? Number(z2.nackTotal) : 0, bytesInPerSec: q2(z2.bytesInPerSec) ? Number(z2.bytesInPerSec) : 0, bytesOutPerSec: q2(z2.bytesOutPerSec) ? Number(z2.bytesOutPerSec) : 0, packetsInPerSec: q2(z2.packetsInPerSec) ? Number(z2.packetsInPerSec) : 0, packetsOutPerSec: q2(z2.packetsOutPerSec) ? Number(z2.packetsOutPerSec) : 0, nackPerSec: q2(z2.nackPerSec) ? Number(z2.nackPerSec) : 0, numCpus: q2(z2.numCpus) ? Number(z2.numCpus) : 0, loadAvgLast1min: q2(z2.loadAvgLast1min) ? Number(z2.loadAvgLast1min) : 0, loadAvgLast5min: q2(z2.loadAvgLast5min) ? Number(z2.loadAvgLast5min) : 0, loadAvgLast15min: q2(z2.loadAvgLast15min) ? Number(z2.loadAvgLast15min) : 0, cpuLoad: q2(z2.cpuLoad) ? Number(z2.cpuLoad) : 0, memoryLoad: q2(z2.memoryLoad) ? Number(z2.memoryLoad) : 0, sysPacketsOut: q2(z2.sysPacketsOut) ? Number(z2.sysPacketsOut) : 0, sysPacketsDropped: q2(z2.sysPacketsDropped) ? Number(z2.sysPacketsDropped) : 0, sysPacketsOutPerSec: q2(z2.sysPacketsOutPerSec) ? Number(z2.sysPacketsOutPerSec) : 0, sysPacketsDroppedPerSec: q2(z2.sysPacketsDroppedPerSec) ? Number(z2.sysPacketsDroppedPerSec) : 0, sysPacketsDroppedPctPerSec: q2(z2.sysPacketsDroppedPctPerSec) ? Number(z2.sysPacketsDroppedPctPerSec) : 0, retransmitBytesOut: q2(z2.retransmitBytesOut) ? Number(z2.retransmitBytesOut) : 0, retransmitPacketsOut: q2(z2.retransmitPacketsOut) ? Number(z2.retransmitPacketsOut) : 0, retransmitBytesOutPerSec: q2(z2.retransmitBytesOutPerSec) ? Number(z2.retransmitBytesOutPerSec) : 0, retransmitPacketsOutPerSec: q2(z2.retransmitPacketsOutPerSec) ? Number(z2.retransmitPacketsOutPerSec) : 0, participantJoin: q2(z2.participantJoin) ? Number(z2.participantJoin) : 0, participantJoinPerSec: q2(z2.participantJoinPerSec) ? Number(z2.participantJoinPerSec) : 0 };
  }, toJSON(z2) {
    const C2 = {};
    return z2.startedAt !== void 0 && (C2.startedAt = Math.round(z2.startedAt)), z2.updatedAt !== void 0 && (C2.updatedAt = Math.round(z2.updatedAt)), z2.numRooms !== void 0 && (C2.numRooms = Math.round(z2.numRooms)), z2.numClients !== void 0 && (C2.numClients = Math.round(z2.numClients)), z2.numTracksIn !== void 0 && (C2.numTracksIn = Math.round(z2.numTracksIn)), z2.numTracksOut !== void 0 && (C2.numTracksOut = Math.round(z2.numTracksOut)), z2.bytesIn !== void 0 && (C2.bytesIn = Math.round(z2.bytesIn)), z2.bytesOut !== void 0 && (C2.bytesOut = Math.round(z2.bytesOut)), z2.packetsIn !== void 0 && (C2.packetsIn = Math.round(z2.packetsIn)), z2.packetsOut !== void 0 && (C2.packetsOut = Math.round(z2.packetsOut)), z2.nackTotal !== void 0 && (C2.nackTotal = Math.round(z2.nackTotal)), z2.bytesInPerSec !== void 0 && (C2.bytesInPerSec = z2.bytesInPerSec), z2.bytesOutPerSec !== void 0 && (C2.bytesOutPerSec = z2.bytesOutPerSec), z2.packetsInPerSec !== void 0 && (C2.packetsInPerSec = z2.packetsInPerSec), z2.packetsOutPerSec !== void 0 && (C2.packetsOutPerSec = z2.packetsOutPerSec), z2.nackPerSec !== void 0 && (C2.nackPerSec = z2.nackPerSec), z2.numCpus !== void 0 && (C2.numCpus = Math.round(z2.numCpus)), z2.loadAvgLast1min !== void 0 && (C2.loadAvgLast1min = z2.loadAvgLast1min), z2.loadAvgLast5min !== void 0 && (C2.loadAvgLast5min = z2.loadAvgLast5min), z2.loadAvgLast15min !== void 0 && (C2.loadAvgLast15min = z2.loadAvgLast15min), z2.cpuLoad !== void 0 && (C2.cpuLoad = z2.cpuLoad), z2.memoryLoad !== void 0 && (C2.memoryLoad = z2.memoryLoad), z2.sysPacketsOut !== void 0 && (C2.sysPacketsOut = Math.round(z2.sysPacketsOut)), z2.sysPacketsDropped !== void 0 && (C2.sysPacketsDropped = Math.round(z2.sysPacketsDropped)), z2.sysPacketsOutPerSec !== void 0 && (C2.sysPacketsOutPerSec = z2.sysPacketsOutPerSec), z2.sysPacketsDroppedPerSec !== void 0 && (C2.sysPacketsDroppedPerSec = z2.sysPacketsDroppedPerSec), z2.sysPacketsDroppedPctPerSec !== void 0 && (C2.sysPacketsDroppedPctPerSec = z2.sysPacketsDroppedPctPerSec), z2.retransmitBytesOut !== void 0 && (C2.retransmitBytesOut = Math.round(z2.retransmitBytesOut)), z2.retransmitPacketsOut !== void 0 && (C2.retransmitPacketsOut = Math.round(z2.retransmitPacketsOut)), z2.retransmitBytesOutPerSec !== void 0 && (C2.retransmitBytesOutPerSec = z2.retransmitBytesOutPerSec), z2.retransmitPacketsOutPerSec !== void 0 && (C2.retransmitPacketsOutPerSec = z2.retransmitPacketsOutPerSec), z2.participantJoin !== void 0 && (C2.participantJoin = Math.round(z2.participantJoin)), z2.participantJoinPerSec !== void 0 && (C2.participantJoinPerSec = z2.participantJoinPerSec), C2;
  }, fromPartial(z2) {
    var C2, b, E2, k, O2, A2, x2, Y2, B2, T2, D2, te2, me2, Ie2, $e2, ye2, he2, Me2, Ae2, xe2, ae2, N2, re2, fe2, Ne2, Oe2, qe2, je2, Fe2, yt, Xe2, Ge2, V2;
    const ge2 = ie2();
    return ge2.startedAt = (C2 = z2.startedAt) !== null && C2 !== void 0 ? C2 : 0, ge2.updatedAt = (b = z2.updatedAt) !== null && b !== void 0 ? b : 0, ge2.numRooms = (E2 = z2.numRooms) !== null && E2 !== void 0 ? E2 : 0, ge2.numClients = (k = z2.numClients) !== null && k !== void 0 ? k : 0, ge2.numTracksIn = (O2 = z2.numTracksIn) !== null && O2 !== void 0 ? O2 : 0, ge2.numTracksOut = (A2 = z2.numTracksOut) !== null && A2 !== void 0 ? A2 : 0, ge2.bytesIn = (x2 = z2.bytesIn) !== null && x2 !== void 0 ? x2 : 0, ge2.bytesOut = (Y2 = z2.bytesOut) !== null && Y2 !== void 0 ? Y2 : 0, ge2.packetsIn = (B2 = z2.packetsIn) !== null && B2 !== void 0 ? B2 : 0, ge2.packetsOut = (T2 = z2.packetsOut) !== null && T2 !== void 0 ? T2 : 0, ge2.nackTotal = (D2 = z2.nackTotal) !== null && D2 !== void 0 ? D2 : 0, ge2.bytesInPerSec = (te2 = z2.bytesInPerSec) !== null && te2 !== void 0 ? te2 : 0, ge2.bytesOutPerSec = (me2 = z2.bytesOutPerSec) !== null && me2 !== void 0 ? me2 : 0, ge2.packetsInPerSec = (Ie2 = z2.packetsInPerSec) !== null && Ie2 !== void 0 ? Ie2 : 0, ge2.packetsOutPerSec = ($e2 = z2.packetsOutPerSec) !== null && $e2 !== void 0 ? $e2 : 0, ge2.nackPerSec = (ye2 = z2.nackPerSec) !== null && ye2 !== void 0 ? ye2 : 0, ge2.numCpus = (he2 = z2.numCpus) !== null && he2 !== void 0 ? he2 : 0, ge2.loadAvgLast1min = (Me2 = z2.loadAvgLast1min) !== null && Me2 !== void 0 ? Me2 : 0, ge2.loadAvgLast5min = (Ae2 = z2.loadAvgLast5min) !== null && Ae2 !== void 0 ? Ae2 : 0, ge2.loadAvgLast15min = (xe2 = z2.loadAvgLast15min) !== null && xe2 !== void 0 ? xe2 : 0, ge2.cpuLoad = (ae2 = z2.cpuLoad) !== null && ae2 !== void 0 ? ae2 : 0, ge2.memoryLoad = (N2 = z2.memoryLoad) !== null && N2 !== void 0 ? N2 : 0, ge2.sysPacketsOut = (re2 = z2.sysPacketsOut) !== null && re2 !== void 0 ? re2 : 0, ge2.sysPacketsDropped = (fe2 = z2.sysPacketsDropped) !== null && fe2 !== void 0 ? fe2 : 0, ge2.sysPacketsOutPerSec = (Ne2 = z2.sysPacketsOutPerSec) !== null && Ne2 !== void 0 ? Ne2 : 0, ge2.sysPacketsDroppedPerSec = (Oe2 = z2.sysPacketsDroppedPerSec) !== null && Oe2 !== void 0 ? Oe2 : 0, ge2.sysPacketsDroppedPctPerSec = (qe2 = z2.sysPacketsDroppedPctPerSec) !== null && qe2 !== void 0 ? qe2 : 0, ge2.retransmitBytesOut = (je2 = z2.retransmitBytesOut) !== null && je2 !== void 0 ? je2 : 0, ge2.retransmitPacketsOut = (Fe2 = z2.retransmitPacketsOut) !== null && Fe2 !== void 0 ? Fe2 : 0, ge2.retransmitBytesOutPerSec = (yt = z2.retransmitBytesOutPerSec) !== null && yt !== void 0 ? yt : 0, ge2.retransmitPacketsOutPerSec = (Xe2 = z2.retransmitPacketsOutPerSec) !== null && Xe2 !== void 0 ? Xe2 : 0, ge2.participantJoin = (Ge2 = z2.participantJoin) !== null && Ge2 !== void 0 ? Ge2 : 0, ge2.participantJoinPerSec = (V2 = z2.participantJoinPerSec) !== null && V2 !== void 0 ? V2 : 0, ge2;
  } };
  function Q2() {
    return { participantKey: "", senderTime: 0, connectionId: "", startSession: void 0, request: void 0, removeParticipant: void 0, muteTrack: void 0, updateParticipant: void 0, deleteRoom: void 0, updateSubscriptions: void 0, sendData: void 0, updateRoomMetadata: void 0, keepAlive: void 0 };
  }
  a420.RTCNodeMessage = { encode(z2, C2 = l2.default.Writer.create()) {
    return z2.participantKey !== void 0 && z2.participantKey !== "" && C2.uint32(10).string(z2.participantKey), z2.senderTime !== void 0 && z2.senderTime !== 0 && C2.uint32(88).int64(z2.senderTime), z2.connectionId !== void 0 && z2.connectionId !== "" && C2.uint32(106).string(z2.connectionId), z2.startSession !== void 0 && a420.StartSession.encode(z2.startSession, C2.uint32(18).fork()).ldelim(), z2.request !== void 0 && I2.SignalRequest.encode(z2.request, C2.uint32(26).fork()).ldelim(), z2.removeParticipant !== void 0 && _.RoomParticipantIdentity.encode(z2.removeParticipant, C2.uint32(34).fork()).ldelim(), z2.muteTrack !== void 0 && _.MuteRoomTrackRequest.encode(z2.muteTrack, C2.uint32(42).fork()).ldelim(), z2.updateParticipant !== void 0 && _.UpdateParticipantRequest.encode(z2.updateParticipant, C2.uint32(50).fork()).ldelim(), z2.deleteRoom !== void 0 && _.DeleteRoomRequest.encode(z2.deleteRoom, C2.uint32(58).fork()).ldelim(), z2.updateSubscriptions !== void 0 && _.UpdateSubscriptionsRequest.encode(z2.updateSubscriptions, C2.uint32(66).fork()).ldelim(), z2.sendData !== void 0 && _.SendDataRequest.encode(z2.sendData, C2.uint32(74).fork()).ldelim(), z2.updateRoomMetadata !== void 0 && _.UpdateRoomMetadataRequest.encode(z2.updateRoomMetadata, C2.uint32(82).fork()).ldelim(), z2.keepAlive !== void 0 && a420.KeepAlive.encode(z2.keepAlive, C2.uint32(98).fork()).ldelim(), C2;
  }, decode(z2, C2) {
    const b = z2 instanceof l2.default.Reader ? z2 : new l2.default.Reader(z2);
    let E2 = C2 === void 0 ? b.len : b.pos + C2;
    const k = Q2();
    for (; b.pos < E2; ) {
      const O2 = b.uint32();
      switch (O2 >>> 3) {
        case 1:
          k.participantKey = b.string();
          break;
        case 11:
          k.senderTime = Te2(b.int64());
          break;
        case 13:
          k.connectionId = b.string();
          break;
        case 2:
          k.startSession = a420.StartSession.decode(b, b.uint32());
          break;
        case 3:
          k.request = I2.SignalRequest.decode(b, b.uint32());
          break;
        case 4:
          k.removeParticipant = _.RoomParticipantIdentity.decode(b, b.uint32());
          break;
        case 5:
          k.muteTrack = _.MuteRoomTrackRequest.decode(b, b.uint32());
          break;
        case 6:
          k.updateParticipant = _.UpdateParticipantRequest.decode(b, b.uint32());
          break;
        case 7:
          k.deleteRoom = _.DeleteRoomRequest.decode(b, b.uint32());
          break;
        case 8:
          k.updateSubscriptions = _.UpdateSubscriptionsRequest.decode(b, b.uint32());
          break;
        case 9:
          k.sendData = _.SendDataRequest.decode(b, b.uint32());
          break;
        case 10:
          k.updateRoomMetadata = _.UpdateRoomMetadataRequest.decode(b, b.uint32());
          break;
        case 12:
          k.keepAlive = a420.KeepAlive.decode(b, b.uint32());
          break;
        default:
          b.skipType(O2 & 7);
          break;
      }
    }
    return k;
  }, fromJSON(z2) {
    return { participantKey: q2(z2.participantKey) ? String(z2.participantKey) : "", senderTime: q2(z2.senderTime) ? Number(z2.senderTime) : 0, connectionId: q2(z2.connectionId) ? String(z2.connectionId) : "", startSession: q2(z2.startSession) ? a420.StartSession.fromJSON(z2.startSession) : void 0, request: q2(z2.request) ? I2.SignalRequest.fromJSON(z2.request) : void 0, removeParticipant: q2(z2.removeParticipant) ? _.RoomParticipantIdentity.fromJSON(z2.removeParticipant) : void 0, muteTrack: q2(z2.muteTrack) ? _.MuteRoomTrackRequest.fromJSON(z2.muteTrack) : void 0, updateParticipant: q2(z2.updateParticipant) ? _.UpdateParticipantRequest.fromJSON(z2.updateParticipant) : void 0, deleteRoom: q2(z2.deleteRoom) ? _.DeleteRoomRequest.fromJSON(z2.deleteRoom) : void 0, updateSubscriptions: q2(z2.updateSubscriptions) ? _.UpdateSubscriptionsRequest.fromJSON(z2.updateSubscriptions) : void 0, sendData: q2(z2.sendData) ? _.SendDataRequest.fromJSON(z2.sendData) : void 0, updateRoomMetadata: q2(z2.updateRoomMetadata) ? _.UpdateRoomMetadataRequest.fromJSON(z2.updateRoomMetadata) : void 0, keepAlive: q2(z2.keepAlive) ? a420.KeepAlive.fromJSON(z2.keepAlive) : void 0 };
  }, toJSON(z2) {
    const C2 = {};
    return z2.participantKey !== void 0 && (C2.participantKey = z2.participantKey), z2.senderTime !== void 0 && (C2.senderTime = Math.round(z2.senderTime)), z2.connectionId !== void 0 && (C2.connectionId = z2.connectionId), z2.startSession !== void 0 && (C2.startSession = z2.startSession ? a420.StartSession.toJSON(z2.startSession) : void 0), z2.request !== void 0 && (C2.request = z2.request ? I2.SignalRequest.toJSON(z2.request) : void 0), z2.removeParticipant !== void 0 && (C2.removeParticipant = z2.removeParticipant ? _.RoomParticipantIdentity.toJSON(z2.removeParticipant) : void 0), z2.muteTrack !== void 0 && (C2.muteTrack = z2.muteTrack ? _.MuteRoomTrackRequest.toJSON(z2.muteTrack) : void 0), z2.updateParticipant !== void 0 && (C2.updateParticipant = z2.updateParticipant ? _.UpdateParticipantRequest.toJSON(z2.updateParticipant) : void 0), z2.deleteRoom !== void 0 && (C2.deleteRoom = z2.deleteRoom ? _.DeleteRoomRequest.toJSON(z2.deleteRoom) : void 0), z2.updateSubscriptions !== void 0 && (C2.updateSubscriptions = z2.updateSubscriptions ? _.UpdateSubscriptionsRequest.toJSON(z2.updateSubscriptions) : void 0), z2.sendData !== void 0 && (C2.sendData = z2.sendData ? _.SendDataRequest.toJSON(z2.sendData) : void 0), z2.updateRoomMetadata !== void 0 && (C2.updateRoomMetadata = z2.updateRoomMetadata ? _.UpdateRoomMetadataRequest.toJSON(z2.updateRoomMetadata) : void 0), z2.keepAlive !== void 0 && (C2.keepAlive = z2.keepAlive ? a420.KeepAlive.toJSON(z2.keepAlive) : void 0), C2;
  }, fromPartial(z2) {
    var C2, b, E2;
    const k = Q2();
    return k.participantKey = (C2 = z2.participantKey) !== null && C2 !== void 0 ? C2 : "", k.senderTime = (b = z2.senderTime) !== null && b !== void 0 ? b : 0, k.connectionId = (E2 = z2.connectionId) !== null && E2 !== void 0 ? E2 : "", k.startSession = z2.startSession !== void 0 && z2.startSession !== null ? a420.StartSession.fromPartial(z2.startSession) : void 0, k.request = z2.request !== void 0 && z2.request !== null ? I2.SignalRequest.fromPartial(z2.request) : void 0, k.removeParticipant = z2.removeParticipant !== void 0 && z2.removeParticipant !== null ? _.RoomParticipantIdentity.fromPartial(z2.removeParticipant) : void 0, k.muteTrack = z2.muteTrack !== void 0 && z2.muteTrack !== null ? _.MuteRoomTrackRequest.fromPartial(z2.muteTrack) : void 0, k.updateParticipant = z2.updateParticipant !== void 0 && z2.updateParticipant !== null ? _.UpdateParticipantRequest.fromPartial(z2.updateParticipant) : void 0, k.deleteRoom = z2.deleteRoom !== void 0 && z2.deleteRoom !== null ? _.DeleteRoomRequest.fromPartial(z2.deleteRoom) : void 0, k.updateSubscriptions = z2.updateSubscriptions !== void 0 && z2.updateSubscriptions !== null ? _.UpdateSubscriptionsRequest.fromPartial(z2.updateSubscriptions) : void 0, k.sendData = z2.sendData !== void 0 && z2.sendData !== null ? _.SendDataRequest.fromPartial(z2.sendData) : void 0, k.updateRoomMetadata = z2.updateRoomMetadata !== void 0 && z2.updateRoomMetadata !== null ? _.UpdateRoomMetadataRequest.fromPartial(z2.updateRoomMetadata) : void 0, k.keepAlive = z2.keepAlive !== void 0 && z2.keepAlive !== null ? a420.KeepAlive.fromPartial(z2.keepAlive) : void 0, k;
  } };
  function ne2() {
    return { connectionId: "", response: void 0, endSession: void 0 };
  }
  a420.SignalNodeMessage = { encode(z2, C2 = l2.default.Writer.create()) {
    return z2.connectionId !== void 0 && z2.connectionId !== "" && C2.uint32(10).string(z2.connectionId), z2.response !== void 0 && I2.SignalResponse.encode(z2.response, C2.uint32(18).fork()).ldelim(), z2.endSession !== void 0 && a420.EndSession.encode(z2.endSession, C2.uint32(26).fork()).ldelim(), C2;
  }, decode(z2, C2) {
    const b = z2 instanceof l2.default.Reader ? z2 : new l2.default.Reader(z2);
    let E2 = C2 === void 0 ? b.len : b.pos + C2;
    const k = ne2();
    for (; b.pos < E2; ) {
      const O2 = b.uint32();
      switch (O2 >>> 3) {
        case 1:
          k.connectionId = b.string();
          break;
        case 2:
          k.response = I2.SignalResponse.decode(b, b.uint32());
          break;
        case 3:
          k.endSession = a420.EndSession.decode(b, b.uint32());
          break;
        default:
          b.skipType(O2 & 7);
          break;
      }
    }
    return k;
  }, fromJSON(z2) {
    return { connectionId: q2(z2.connectionId) ? String(z2.connectionId) : "", response: q2(z2.response) ? I2.SignalResponse.fromJSON(z2.response) : void 0, endSession: q2(z2.endSession) ? a420.EndSession.fromJSON(z2.endSession) : void 0 };
  }, toJSON(z2) {
    const C2 = {};
    return z2.connectionId !== void 0 && (C2.connectionId = z2.connectionId), z2.response !== void 0 && (C2.response = z2.response ? I2.SignalResponse.toJSON(z2.response) : void 0), z2.endSession !== void 0 && (C2.endSession = z2.endSession ? a420.EndSession.toJSON(z2.endSession) : void 0), C2;
  }, fromPartial(z2) {
    var C2;
    const b = ne2();
    return b.connectionId = (C2 = z2.connectionId) !== null && C2 !== void 0 ? C2 : "", b.response = z2.response !== void 0 && z2.response !== null ? I2.SignalResponse.fromPartial(z2.response) : void 0, b.endSession = z2.endSession !== void 0 && z2.endSession !== null ? a420.EndSession.fromPartial(z2.endSession) : void 0, b;
  } };
  function Z2() {
    return { roomName: "", identity: "", connectionId: "", reconnect: false, autoSubscribe: false, hidden: false, client: void 0, recorder: false, name: "", grantsJson: "", adaptiveStream: false, participantId: "" };
  }
  a420.StartSession = { encode(z2, C2 = l2.default.Writer.create()) {
    return z2.roomName !== void 0 && z2.roomName !== "" && C2.uint32(10).string(z2.roomName), z2.identity !== void 0 && z2.identity !== "" && C2.uint32(18).string(z2.identity), z2.connectionId !== void 0 && z2.connectionId !== "" && C2.uint32(26).string(z2.connectionId), z2.reconnect === true && C2.uint32(32).bool(z2.reconnect), z2.autoSubscribe === true && C2.uint32(72).bool(z2.autoSubscribe), z2.hidden === true && C2.uint32(80).bool(z2.hidden), z2.client !== void 0 && p2.ClientInfo.encode(z2.client, C2.uint32(90).fork()).ldelim(), z2.recorder === true && C2.uint32(96).bool(z2.recorder), z2.name !== void 0 && z2.name !== "" && C2.uint32(106).string(z2.name), z2.grantsJson !== void 0 && z2.grantsJson !== "" && C2.uint32(114).string(z2.grantsJson), z2.adaptiveStream === true && C2.uint32(120).bool(z2.adaptiveStream), z2.participantId !== void 0 && z2.participantId !== "" && C2.uint32(130).string(z2.participantId), C2;
  }, decode(z2, C2) {
    const b = z2 instanceof l2.default.Reader ? z2 : new l2.default.Reader(z2);
    let E2 = C2 === void 0 ? b.len : b.pos + C2;
    const k = Z2();
    for (; b.pos < E2; ) {
      const O2 = b.uint32();
      switch (O2 >>> 3) {
        case 1:
          k.roomName = b.string();
          break;
        case 2:
          k.identity = b.string();
          break;
        case 3:
          k.connectionId = b.string();
          break;
        case 4:
          k.reconnect = b.bool();
          break;
        case 9:
          k.autoSubscribe = b.bool();
          break;
        case 10:
          k.hidden = b.bool();
          break;
        case 11:
          k.client = p2.ClientInfo.decode(b, b.uint32());
          break;
        case 12:
          k.recorder = b.bool();
          break;
        case 13:
          k.name = b.string();
          break;
        case 14:
          k.grantsJson = b.string();
          break;
        case 15:
          k.adaptiveStream = b.bool();
          break;
        case 16:
          k.participantId = b.string();
          break;
        default:
          b.skipType(O2 & 7);
          break;
      }
    }
    return k;
  }, fromJSON(z2) {
    return { roomName: q2(z2.roomName) ? String(z2.roomName) : "", identity: q2(z2.identity) ? String(z2.identity) : "", connectionId: q2(z2.connectionId) ? String(z2.connectionId) : "", reconnect: q2(z2.reconnect) ? !!z2.reconnect : false, autoSubscribe: q2(z2.autoSubscribe) ? !!z2.autoSubscribe : false, hidden: q2(z2.hidden) ? !!z2.hidden : false, client: q2(z2.client) ? p2.ClientInfo.fromJSON(z2.client) : void 0, recorder: q2(z2.recorder) ? !!z2.recorder : false, name: q2(z2.name) ? String(z2.name) : "", grantsJson: q2(z2.grantsJson) ? String(z2.grantsJson) : "", adaptiveStream: q2(z2.adaptiveStream) ? !!z2.adaptiveStream : false, participantId: q2(z2.participantId) ? String(z2.participantId) : "" };
  }, toJSON(z2) {
    const C2 = {};
    return z2.roomName !== void 0 && (C2.roomName = z2.roomName), z2.identity !== void 0 && (C2.identity = z2.identity), z2.connectionId !== void 0 && (C2.connectionId = z2.connectionId), z2.reconnect !== void 0 && (C2.reconnect = z2.reconnect), z2.autoSubscribe !== void 0 && (C2.autoSubscribe = z2.autoSubscribe), z2.hidden !== void 0 && (C2.hidden = z2.hidden), z2.client !== void 0 && (C2.client = z2.client ? p2.ClientInfo.toJSON(z2.client) : void 0), z2.recorder !== void 0 && (C2.recorder = z2.recorder), z2.name !== void 0 && (C2.name = z2.name), z2.grantsJson !== void 0 && (C2.grantsJson = z2.grantsJson), z2.adaptiveStream !== void 0 && (C2.adaptiveStream = z2.adaptiveStream), z2.participantId !== void 0 && (C2.participantId = z2.participantId), C2;
  }, fromPartial(z2) {
    var C2, b, E2, k, O2, A2, x2, Y2, B2, T2, D2;
    const te2 = Z2();
    return te2.roomName = (C2 = z2.roomName) !== null && C2 !== void 0 ? C2 : "", te2.identity = (b = z2.identity) !== null && b !== void 0 ? b : "", te2.connectionId = (E2 = z2.connectionId) !== null && E2 !== void 0 ? E2 : "", te2.reconnect = (k = z2.reconnect) !== null && k !== void 0 ? k : false, te2.autoSubscribe = (O2 = z2.autoSubscribe) !== null && O2 !== void 0 ? O2 : false, te2.hidden = (A2 = z2.hidden) !== null && A2 !== void 0 ? A2 : false, te2.client = z2.client !== void 0 && z2.client !== null ? p2.ClientInfo.fromPartial(z2.client) : void 0, te2.recorder = (x2 = z2.recorder) !== null && x2 !== void 0 ? x2 : false, te2.name = (Y2 = z2.name) !== null && Y2 !== void 0 ? Y2 : "", te2.grantsJson = (B2 = z2.grantsJson) !== null && B2 !== void 0 ? B2 : "", te2.adaptiveStream = (T2 = z2.adaptiveStream) !== null && T2 !== void 0 ? T2 : false, te2.participantId = (D2 = z2.participantId) !== null && D2 !== void 0 ? D2 : "", te2;
  } };
  function de2() {
    return {};
  }
  a420.EndSession = { encode(z2, C2 = l2.default.Writer.create()) {
    return C2;
  }, decode(z2, C2) {
    const b = z2 instanceof l2.default.Reader ? z2 : new l2.default.Reader(z2);
    let E2 = C2 === void 0 ? b.len : b.pos + C2;
    const k = de2();
    for (; b.pos < E2; ) {
      const O2 = b.uint32();
      switch (O2 >>> 3) {
        default:
          b.skipType(O2 & 7);
          break;
      }
    }
    return k;
  }, fromJSON(z2) {
    return {};
  }, toJSON(z2) {
    return {};
  }, fromPartial(z2) {
    return de2();
  } };
  function pe2() {
    return { participantId: "" };
  }
  a420.RemoveParticipant = { encode(z2, C2 = l2.default.Writer.create()) {
    return z2.participantId !== void 0 && z2.participantId !== "" && C2.uint32(10).string(z2.participantId), C2;
  }, decode(z2, C2) {
    const b = z2 instanceof l2.default.Reader ? z2 : new l2.default.Reader(z2);
    let E2 = C2 === void 0 ? b.len : b.pos + C2;
    const k = pe2();
    for (; b.pos < E2; ) {
      const O2 = b.uint32();
      switch (O2 >>> 3) {
        case 1:
          k.participantId = b.string();
          break;
        default:
          b.skipType(O2 & 7);
          break;
      }
    }
    return k;
  }, fromJSON(z2) {
    return { participantId: q2(z2.participantId) ? String(z2.participantId) : "" };
  }, toJSON(z2) {
    const C2 = {};
    return z2.participantId !== void 0 && (C2.participantId = z2.participantId), C2;
  }, fromPartial(z2) {
    var C2;
    const b = pe2();
    return b.participantId = (C2 = z2.participantId) !== null && C2 !== void 0 ? C2 : "", b;
  } };
  function le2() {
    return {};
  }
  a420.KeepAlive = { encode(z2, C2 = l2.default.Writer.create()) {
    return C2;
  }, decode(z2, C2) {
    const b = z2 instanceof l2.default.Reader ? z2 : new l2.default.Reader(z2);
    let E2 = C2 === void 0 ? b.len : b.pos + C2;
    const k = le2();
    for (; b.pos < E2; ) {
      const O2 = b.uint32();
      switch (O2 >>> 3) {
        default:
          b.skipType(O2 & 7);
          break;
      }
    }
    return k;
  }, fromJSON(z2) {
    return {};
  }, toJSON(z2) {
    return {};
  }, fromPartial(z2) {
    return le2();
  } };
  function be2() {
    return { trackEgress: void 0 };
  }
  a420.RoomInternal = { encode(z2, C2 = l2.default.Writer.create()) {
    return z2.trackEgress !== void 0 && v2.AutoTrackEgress.encode(z2.trackEgress, C2.uint32(10).fork()).ldelim(), C2;
  }, decode(z2, C2) {
    const b = z2 instanceof l2.default.Reader ? z2 : new l2.default.Reader(z2);
    let E2 = C2 === void 0 ? b.len : b.pos + C2;
    const k = be2();
    for (; b.pos < E2; ) {
      const O2 = b.uint32();
      switch (O2 >>> 3) {
        case 1:
          k.trackEgress = v2.AutoTrackEgress.decode(b, b.uint32());
          break;
        default:
          b.skipType(O2 & 7);
          break;
      }
    }
    return k;
  }, fromJSON(z2) {
    return { trackEgress: q2(z2.trackEgress) ? v2.AutoTrackEgress.fromJSON(z2.trackEgress) : void 0 };
  }, toJSON(z2) {
    const C2 = {};
    return z2.trackEgress !== void 0 && (C2.trackEgress = z2.trackEgress ? v2.AutoTrackEgress.toJSON(z2.trackEgress) : void 0), C2;
  }, fromPartial(z2) {
    const C2 = be2();
    return C2.trackEgress = z2.trackEgress !== void 0 && z2.trackEgress !== null ? v2.AutoTrackEgress.fromPartial(z2.trackEgress) : void 0, C2;
  } };
  var ke2 = (() => {
    if (typeof ke2 < "u")
      return ke2;
    if (typeof self < "u")
      return self;
    if (typeof window < "u")
      return window;
    if (typeof commonjsGlobal$1 < "u")
      return commonjsGlobal$1;
    throw "Unable to locate global object";
  })();
  function Te2(z2) {
    if (z2.gt(Number.MAX_SAFE_INTEGER))
      throw new ke2.Error("Value is larger than Number.MAX_SAFE_INTEGER");
    return z2.toNumber();
  }
  l2.default.util.Long !== c.default && (l2.default.util.Long = c.default, l2.default.configure());
  function q2(z2) {
    return z2 != null;
  }
})(livekit_internal);
(function(a420) {
  var u2 = commonjsGlobal$1 && commonjsGlobal$1.__createBinding || (Object.create ? function(P2, $, F2, H2) {
    H2 === void 0 && (H2 = F2), Object.defineProperty(P2, H2, { enumerable: true, get: function() {
      return $[F2];
    } });
  } : function(P2, $, F2, H2) {
    H2 === void 0 && (H2 = F2), P2[H2] = $[F2];
  }), c = commonjsGlobal$1 && commonjsGlobal$1.__setModuleDefault || (Object.create ? function(P2, $) {
    Object.defineProperty(P2, "default", { enumerable: true, value: $ });
  } : function(P2, $) {
    P2.default = $;
  }), l2 = commonjsGlobal$1 && commonjsGlobal$1.__exportStar || function(P2, $) {
    for (var F2 in P2)
      F2 !== "default" && !Object.prototype.hasOwnProperty.call($, F2) && u2($, P2, F2);
  }, v2 = commonjsGlobal$1 && commonjsGlobal$1.__importStar || function(P2) {
    if (P2 && P2.__esModule)
      return P2;
    var $ = {};
    if (P2 != null)
      for (var F2 in P2)
        F2 !== "default" && Object.prototype.hasOwnProperty.call(P2, F2) && u2($, P2, F2);
    return c($, P2), $;
  };
  Object.defineProperty(a420, "__esModule", { value: true }), a420.LivekitInternal = a420.TrackType = a420.TrackInfo = a420.Room = a420.ParticipantPermission = a420.ParticipantInfo_State = a420.ParticipantInfo = a420.DataPacket_Kind = a420.IngressVideoOptions = a420.IngressState = a420.IngressInput = a420.IngressInfo = a420.IngressAudioOptions = a420.StreamProtocol = a420.StreamOutput = a420.SegmentedFileProtocol = a420.SegmentedFileOutput = a420.EncodingOptionsPreset = a420.EncodingOptions = a420.EncodedFileType = a420.EncodedFileOutput = a420.EgressInfo = a420.DirectFileOutput = void 0, l2(AccessToken$1, a420), l2(EgressClient$1, a420), l2(grants, a420), l2(IngressClient$1, a420);
  var p2 = livekit_egress;
  Object.defineProperty(a420, "DirectFileOutput", { enumerable: true, get: function() {
    return p2.DirectFileOutput;
  } }), Object.defineProperty(a420, "EgressInfo", { enumerable: true, get: function() {
    return p2.EgressInfo;
  } }), Object.defineProperty(a420, "EncodedFileOutput", { enumerable: true, get: function() {
    return p2.EncodedFileOutput;
  } }), Object.defineProperty(a420, "EncodedFileType", { enumerable: true, get: function() {
    return p2.EncodedFileType;
  } }), Object.defineProperty(a420, "EncodingOptions", { enumerable: true, get: function() {
    return p2.EncodingOptions;
  } }), Object.defineProperty(a420, "EncodingOptionsPreset", { enumerable: true, get: function() {
    return p2.EncodingOptionsPreset;
  } }), Object.defineProperty(a420, "SegmentedFileOutput", { enumerable: true, get: function() {
    return p2.SegmentedFileOutput;
  } }), Object.defineProperty(a420, "SegmentedFileProtocol", { enumerable: true, get: function() {
    return p2.SegmentedFileProtocol;
  } }), Object.defineProperty(a420, "StreamOutput", { enumerable: true, get: function() {
    return p2.StreamOutput;
  } }), Object.defineProperty(a420, "StreamProtocol", { enumerable: true, get: function() {
    return p2.StreamProtocol;
  } });
  var _ = livekit_ingress;
  Object.defineProperty(a420, "IngressAudioOptions", { enumerable: true, get: function() {
    return _.IngressAudioOptions;
  } }), Object.defineProperty(a420, "IngressInfo", { enumerable: true, get: function() {
    return _.IngressInfo;
  } }), Object.defineProperty(a420, "IngressInput", { enumerable: true, get: function() {
    return _.IngressInput;
  } }), Object.defineProperty(a420, "IngressState", { enumerable: true, get: function() {
    return _.IngressState;
  } }), Object.defineProperty(a420, "IngressVideoOptions", { enumerable: true, get: function() {
    return _.IngressVideoOptions;
  } });
  var I2 = livekit_models;
  Object.defineProperty(a420, "DataPacket_Kind", { enumerable: true, get: function() {
    return I2.DataPacket_Kind;
  } }), Object.defineProperty(a420, "ParticipantInfo", { enumerable: true, get: function() {
    return I2.ParticipantInfo;
  } }), Object.defineProperty(a420, "ParticipantInfo_State", { enumerable: true, get: function() {
    return I2.ParticipantInfo_State;
  } }), Object.defineProperty(a420, "ParticipantPermission", { enumerable: true, get: function() {
    return I2.ParticipantPermission;
  } }), Object.defineProperty(a420, "Room", { enumerable: true, get: function() {
    return I2.Room;
  } }), Object.defineProperty(a420, "TrackInfo", { enumerable: true, get: function() {
    return I2.TrackInfo;
  } }), Object.defineProperty(a420, "TrackType", { enumerable: true, get: function() {
    return I2.TrackType;
  } }), l2(RoomServiceClient$1, a420), l2(WebhookReceiver$1, a420), a420.LivekitInternal = v2(livekit_internal);
})(dist);
class InvalidTokenError extends Error {
}
InvalidTokenError.prototype.name = "InvalidTokenError";
function b64DecodeUnicode(a420) {
  return decodeURIComponent(atob(a420).replace(/(.)/g, (u2, c) => {
    let l2 = c.charCodeAt(0).toString(16).toUpperCase();
    return l2.length < 2 && (l2 = "0" + l2), "%" + l2;
  }));
}
function base64UrlDecode(a420) {
  let u2 = a420.replace(/-/g, "+").replace(/_/g, "/");
  switch (u2.length % 4) {
    case 0:
      break;
    case 2:
      u2 += "==";
      break;
    case 3:
      u2 += "=";
      break;
    default:
      throw new Error("base64 string is not of the correct length");
  }
  try {
    return b64DecodeUnicode(u2);
  } catch {
    return atob(u2);
  }
}
function jwtDecode(a420, u2) {
  if (typeof a420 != "string")
    throw new InvalidTokenError("Invalid token specified: must be a string");
  u2 || (u2 = {});
  const c = u2.header === true ? 0 : 1, l2 = a420.split(".")[c];
  if (typeof l2 != "string")
    throw new InvalidTokenError(`Invalid token specified: missing part #${c + 1}`);
  let v2;
  try {
    v2 = base64UrlDecode(l2);
  } catch (p2) {
    throw new InvalidTokenError(`Invalid token specified: invalid base64 for part #${c + 1} (${p2.message})`);
  }
  try {
    return JSON.parse(v2);
  } catch (p2) {
    throw new InvalidTokenError(`Invalid token specified: invalid json for part #${c + 1} (${p2.message})`);
  }
}
function _mergeNamespaces(a420, u2) {
  return u2.forEach(function(c) {
    c && typeof c != "string" && !Array.isArray(c) && Object.keys(c).forEach(function(l2) {
      if (l2 !== "default" && !(l2 in a420)) {
        var v2 = Object.getOwnPropertyDescriptor(c, l2);
        Object.defineProperty(a420, l2, v2.get ? v2 : { enumerable: true, get: function() {
          return c[l2];
        } });
      }
    });
  }), Object.freeze(a420);
}
var commonjsGlobal = typeof globalThis < "u" ? globalThis : typeof window < "u" ? window : typeof global$1 < "u" ? global$1 : typeof self < "u" ? self : {};
function getDefaultExportFromCjs(a420) {
  return a420 && a420.__esModule && Object.prototype.hasOwnProperty.call(a420, "default") ? a420.default : a420;
}
var loglevel = { exports: {} };
(function(a420) {
  (function(u2, c) {
    a420.exports ? a420.exports = c() : u2.log = c();
  })(commonjsGlobal, function() {
    var u2 = function() {
    }, c = "undefined", l2 = typeof window !== c && typeof window.navigator !== c && /Trident\/|MSIE /.test(window.navigator.userAgent), v2 = ["trace", "debug", "info", "warn", "error"];
    function p2(ie2, Q2) {
      var ne2 = ie2[Q2];
      if (typeof ne2.bind == "function")
        return ne2.bind(ie2);
      try {
        return Function.prototype.bind.call(ne2, ie2);
      } catch {
        return function() {
          return Function.prototype.apply.apply(ne2, [ie2, arguments]);
        };
      }
    }
    function _() {
      console.log && (console.log.apply ? console.log.apply(console, arguments) : Function.prototype.apply.apply(console.log, [console, arguments])), console.trace && console.trace();
    }
    function I2(ie2) {
      return ie2 === "debug" && (ie2 = "log"), typeof console === c ? false : ie2 === "trace" && l2 ? _ : console[ie2] !== void 0 ? p2(console, ie2) : console.log !== void 0 ? p2(console, "log") : u2;
    }
    function P2(ie2, Q2) {
      for (var ne2 = 0; ne2 < v2.length; ne2++) {
        var Z2 = v2[ne2];
        this[Z2] = ne2 < ie2 ? u2 : this.methodFactory(Z2, ie2, Q2);
      }
      this.log = this.debug;
    }
    function $(ie2, Q2, ne2) {
      return function() {
        typeof console !== c && (P2.call(this, Q2, ne2), this[ie2].apply(this, arguments));
      };
    }
    function F2(ie2, Q2, ne2) {
      return I2(ie2) || $.apply(this, arguments);
    }
    function H2(ie2, Q2, ne2) {
      var Z2 = this, de2;
      Q2 = Q2 ?? "WARN";
      var pe2 = "loglevel";
      typeof ie2 == "string" ? pe2 += ":" + ie2 : typeof ie2 == "symbol" && (pe2 = void 0);
      function le2(q2) {
        var z2 = (v2[q2] || "silent").toUpperCase();
        if (!(typeof window === c || !pe2)) {
          try {
            window.localStorage[pe2] = z2;
            return;
          } catch {
          }
          try {
            window.document.cookie = encodeURIComponent(pe2) + "=" + z2 + ";";
          } catch {
          }
        }
      }
      function be2() {
        var q2;
        if (!(typeof window === c || !pe2)) {
          try {
            q2 = window.localStorage[pe2];
          } catch {
          }
          if (typeof q2 === c)
            try {
              var z2 = window.document.cookie, C2 = z2.indexOf(encodeURIComponent(pe2) + "=");
              C2 !== -1 && (q2 = /^([^;]+)/.exec(z2.slice(C2))[1]);
            } catch {
            }
          return Z2.levels[q2] === void 0 && (q2 = void 0), q2;
        }
      }
      function ke2() {
        if (!(typeof window === c || !pe2)) {
          try {
            window.localStorage.removeItem(pe2);
            return;
          } catch {
          }
          try {
            window.document.cookie = encodeURIComponent(pe2) + "=; expires=Thu, 01 Jan 1970 00:00:00 UTC";
          } catch {
          }
        }
      }
      Z2.name = ie2, Z2.levels = { TRACE: 0, DEBUG: 1, INFO: 2, WARN: 3, ERROR: 4, SILENT: 5 }, Z2.methodFactory = ne2 || F2, Z2.getLevel = function() {
        return de2;
      }, Z2.setLevel = function(q2, z2) {
        if (typeof q2 == "string" && Z2.levels[q2.toUpperCase()] !== void 0 && (q2 = Z2.levels[q2.toUpperCase()]), typeof q2 == "number" && q2 >= 0 && q2 <= Z2.levels.SILENT) {
          if (de2 = q2, z2 !== false && le2(q2), P2.call(Z2, q2, ie2), typeof console === c && q2 < Z2.levels.SILENT)
            return "No console available for logging";
        } else
          throw "log.setLevel() called with invalid level: " + q2;
      }, Z2.setDefaultLevel = function(q2) {
        Q2 = q2, be2() || Z2.setLevel(q2, false);
      }, Z2.resetLevel = function() {
        Z2.setLevel(Q2, false), ke2();
      }, Z2.enableAll = function(q2) {
        Z2.setLevel(Z2.levels.TRACE, q2);
      }, Z2.disableAll = function(q2) {
        Z2.setLevel(Z2.levels.SILENT, q2);
      };
      var Te2 = be2();
      Te2 == null && (Te2 = Q2), Z2.setLevel(Te2, false);
    }
    var j = new H2(), ee2 = {};
    j.getLogger = function(Q2) {
      if (typeof Q2 != "symbol" && typeof Q2 != "string" || Q2 === "")
        throw new TypeError("You must supply a name when creating a logger.");
      var ne2 = ee2[Q2];
      return ne2 || (ne2 = ee2[Q2] = new H2(Q2, j.getLevel(), j.methodFactory)), ne2;
    };
    var X2 = typeof window !== c ? window.log : void 0;
    return j.noConflict = function() {
      return typeof window !== c && window.log === j && (window.log = X2), j;
    }, j.getLoggers = function() {
      return ee2;
    }, j.default = j, j;
  });
})(loglevel);
var loglevelExports = loglevel.exports, LogLevel;
(function(a420) {
  a420[a420.trace = 0] = "trace", a420[a420.debug = 1] = "debug", a420[a420.info = 2] = "info", a420[a420.warn = 3] = "warn", a420[a420.error = 4] = "error", a420[a420.silent = 5] = "silent";
})(LogLevel || (LogLevel = {}));
var LoggerNames;
(function(a420) {
  a420.Default = "livekit", a420.Room = "livekit-room", a420.Participant = "livekit-participant", a420.Track = "livekit-track", a420.Publication = "livekit-track-publication", a420.Engine = "livekit-engine", a420.Signal = "livekit-signal", a420.PCManager = "livekit-pc-manager", a420.PCTransport = "livekit-pc-transport", a420.E2EE = "lk-e2ee";
})(LoggerNames || (LoggerNames = {}));
let livekitLogger = loglevelExports.getLogger("livekit");
livekitLogger.setDefaultLevel(LogLevel.info);
function getLogger(a420) {
  const u2 = loglevelExports.getLogger(a420);
  return u2.setDefaultLevel(livekitLogger.getLevel()), u2;
}
function setLogLevel(a420, u2) {
  u2 && loglevelExports.getLogger(u2).setLevel(a420);
  for (const c of Object.entries(loglevelExports.getLoggers()).filter((l2) => {
    let [v2] = l2;
    return v2.startsWith("livekit");
  }).map((l2) => {
    let [, v2] = l2;
    return v2;
  }))
    c.setLevel(a420);
}
loglevelExports.getLogger("lk-e2ee");
function assert(a420, u2) {
  if (!a420)
    throw new Error(u2);
}
const FLOAT32_MAX = 34028234663852886e22, FLOAT32_MIN = -34028234663852886e22, UINT32_MAX = 4294967295, INT32_MAX = 2147483647, INT32_MIN = -2147483648;
function assertInt32(a420) {
  if (typeof a420 != "number")
    throw new Error("invalid int 32: " + typeof a420);
  if (!Number.isInteger(a420) || a420 > INT32_MAX || a420 < INT32_MIN)
    throw new Error("invalid int 32: " + a420);
}
function assertUInt32(a420) {
  if (typeof a420 != "number")
    throw new Error("invalid uint 32: " + typeof a420);
  if (!Number.isInteger(a420) || a420 > UINT32_MAX || a420 < 0)
    throw new Error("invalid uint 32: " + a420);
}
function assertFloat32(a420) {
  if (typeof a420 != "number")
    throw new Error("invalid float 32: " + typeof a420);
  if (Number.isFinite(a420) && (a420 > FLOAT32_MAX || a420 < FLOAT32_MIN))
    throw new Error("invalid float 32: " + a420);
}
const enumTypeSymbol = Symbol("@bufbuild/protobuf/enum-type");
function getEnumType(a420) {
  const u2 = a420[enumTypeSymbol];
  return assert(u2, "missing enum type on enum object"), u2;
}
function setEnumType(a420, u2, c, l2) {
  a420[enumTypeSymbol] = makeEnumType(u2, c.map((v2) => ({ no: v2.no, name: v2.name, localName: a420[v2.no] })));
}
function makeEnumType(a420, u2, c) {
  const l2 = /* @__PURE__ */ Object.create(null), v2 = /* @__PURE__ */ Object.create(null), p2 = [];
  for (const _ of u2) {
    const I2 = normalizeEnumValue(_);
    p2.push(I2), l2[_.name] = I2, v2[_.no] = I2;
  }
  return {
    typeName: a420,
    values: p2,
    // We do not surface options at this time
    // options: opt?.options ?? Object.create(null),
    findName(_) {
      return l2[_];
    },
    findNumber(_) {
      return v2[_];
    }
  };
}
function makeEnum(a420, u2, c) {
  const l2 = {};
  for (const v2 of u2) {
    const p2 = normalizeEnumValue(v2);
    l2[p2.localName] = p2.no, l2[p2.no] = p2.localName;
  }
  return setEnumType(l2, a420, u2), l2;
}
function normalizeEnumValue(a420) {
  return "localName" in a420 ? a420 : Object.assign(Object.assign({}, a420), { localName: a420.name });
}
class Message {
  /**
  * Compare with a message of the same type.
  */
  equals(u2) {
    return this.getType().runtime.util.equals(this.getType(), this, u2);
  }
  /**
  * Create a deep copy.
  */
  clone() {
    return this.getType().runtime.util.clone(this);
  }
  /**
  * Parse from binary data, merging fields.
  *
  * Repeated fields are appended. Map entries are added, overwriting
  * existing keys.
  *
  * If a message field is already present, it will be merged with the
  * new data.
  */
  fromBinary(u2, c) {
    const l2 = this.getType(), v2 = l2.runtime.bin, p2 = v2.makeReadOptions(c);
    return v2.readMessage(this, p2.readerFactory(u2), u2.byteLength, p2), this;
  }
  /**
  * Parse a message from a JSON value.
  */
  fromJson(u2, c) {
    const l2 = this.getType(), v2 = l2.runtime.json, p2 = v2.makeReadOptions(c);
    return v2.readMessage(l2, u2, p2, this), this;
  }
  /**
  * Parse a message from a JSON string.
  */
  fromJsonString(u2, c) {
    let l2;
    try {
      l2 = JSON.parse(u2);
    } catch (v2) {
      throw new Error("cannot decode ".concat(this.getType().typeName, " from JSON: ").concat(v2 instanceof Error ? v2.message : String(v2)));
    }
    return this.fromJson(l2, c);
  }
  /**
  * Serialize the message to binary data.
  */
  toBinary(u2) {
    const c = this.getType(), l2 = c.runtime.bin, v2 = l2.makeWriteOptions(u2), p2 = v2.writerFactory();
    return l2.writeMessage(this, p2, v2), p2.finish();
  }
  /**
  * Serialize the message to a JSON value, a JavaScript value that can be
  * passed to JSON.stringify().
  */
  toJson(u2) {
    const c = this.getType(), l2 = c.runtime.json, v2 = l2.makeWriteOptions(u2);
    return l2.writeMessage(this, v2);
  }
  /**
  * Serialize the message to a JSON string.
  */
  toJsonString(u2) {
    var c;
    const l2 = this.toJson(u2);
    return JSON.stringify(l2, null, (c = u2 == null ? void 0 : u2.prettySpaces) !== null && c !== void 0 ? c : 0);
  }
  /**
  * Override for serialization behavior. This will be invoked when calling
  * JSON.stringify on this message (i.e. JSON.stringify(msg)).
  *
  * Note that this will not serialize google.protobuf.Any with a packed
  * message because the protobuf JSON format specifies that it needs to be
  * unpacked, and this is only possible with a type registry to look up the
  * message type.  As a result, attempting to serialize a message with this
  * type will throw an Error.
  *
  * This method is protected because you should not need to invoke it
  * directly -- instead use JSON.stringify or toJsonString for
  * stringified JSON.  Alternatively, if actual JSON is desired, you should
  * use toJson.
  */
  toJSON() {
    return this.toJson({ emitDefaultValues: true });
  }
  /**
  * Retrieve the MessageType of this message - a singleton that represents
  * the protobuf message declaration and provides metadata for reflection-
  * based operations.
  */
  getType() {
    return Object.getPrototypeOf(this).constructor;
  }
}
function makeMessageType(a420, u2, c, l2) {
  var v2;
  const p2 = (v2 = l2 == null ? void 0 : l2.localName) !== null && v2 !== void 0 ? v2 : u2.substring(u2.lastIndexOf(".") + 1), _ = { [p2]: function(I2) {
    a420.util.initFields(this), a420.util.initPartial(I2, this);
  } }[p2];
  return Object.setPrototypeOf(_.prototype, new Message()), Object.assign(_, { runtime: a420, typeName: u2, fields: a420.util.newFieldList(c), fromBinary(I2, P2) {
    return new _().fromBinary(I2, P2);
  }, fromJson(I2, P2) {
    return new _().fromJson(I2, P2);
  }, fromJsonString(I2, P2) {
    return new _().fromJsonString(I2, P2);
  }, equals(I2, P2) {
    return a420.util.equals(_, I2, P2);
  } }), _;
}
function makeProtoRuntime(a420, u2, c, l2) {
  return { syntax: a420, json: u2, bin: c, util: l2, makeMessageType(v2, p2, _) {
    return makeMessageType(this, v2, p2, _);
  }, makeEnum, makeEnumType, getEnumType };
}
var ScalarType;
(function(a420) {
  a420[a420.DOUBLE = 1] = "DOUBLE", a420[a420.FLOAT = 2] = "FLOAT", a420[a420.INT64 = 3] = "INT64", a420[a420.UINT64 = 4] = "UINT64", a420[a420.INT32 = 5] = "INT32", a420[a420.FIXED64 = 6] = "FIXED64", a420[a420.FIXED32 = 7] = "FIXED32", a420[a420.BOOL = 8] = "BOOL", a420[a420.STRING = 9] = "STRING", a420[a420.BYTES = 12] = "BYTES", a420[a420.UINT32 = 13] = "UINT32", a420[a420.SFIXED32 = 15] = "SFIXED32", a420[a420.SFIXED64 = 16] = "SFIXED64", a420[a420.SINT32 = 17] = "SINT32", a420[a420.SINT64 = 18] = "SINT64";
})(ScalarType || (ScalarType = {}));
var LongType;
(function(a420) {
  a420[a420.BIGINT = 0] = "BIGINT", a420[a420.STRING = 1] = "STRING";
})(LongType || (LongType = {}));
function varint64read() {
  let a420 = 0, u2 = 0;
  for (let l2 = 0; l2 < 28; l2 += 7) {
    let v2 = this.buf[this.pos++];
    if (a420 |= (v2 & 127) << l2, !(v2 & 128))
      return this.assertBounds(), [a420, u2];
  }
  let c = this.buf[this.pos++];
  if (a420 |= (c & 15) << 28, u2 = (c & 112) >> 4, !(c & 128))
    return this.assertBounds(), [a420, u2];
  for (let l2 = 3; l2 <= 31; l2 += 7) {
    let v2 = this.buf[this.pos++];
    if (u2 |= (v2 & 127) << l2, !(v2 & 128))
      return this.assertBounds(), [a420, u2];
  }
  throw new Error("invalid varint");
}
function varint64write(a420, u2, c) {
  for (let p2 = 0; p2 < 28; p2 = p2 + 7) {
    const _ = a420 >>> p2, I2 = !(!(_ >>> 7) && u2 == 0), P2 = (I2 ? _ | 128 : _) & 255;
    if (c.push(P2), !I2)
      return;
  }
  const l2 = a420 >>> 28 & 15 | (u2 & 7) << 4, v2 = !!(u2 >> 3);
  if (c.push((v2 ? l2 | 128 : l2) & 255), !!v2) {
    for (let p2 = 3; p2 < 31; p2 = p2 + 7) {
      const _ = u2 >>> p2, I2 = !!(_ >>> 7), P2 = (I2 ? _ | 128 : _) & 255;
      if (c.push(P2), !I2)
        return;
    }
    c.push(u2 >>> 31 & 1);
  }
}
const TWO_PWR_32_DBL = 4294967296;
function int64FromString(a420) {
  const u2 = a420[0] === "-";
  u2 && (a420 = a420.slice(1));
  const c = 1e6;
  let l2 = 0, v2 = 0;
  function p2(_, I2) {
    const P2 = Number(a420.slice(_, I2));
    v2 *= c, l2 = l2 * c + P2, l2 >= TWO_PWR_32_DBL && (v2 = v2 + (l2 / TWO_PWR_32_DBL | 0), l2 = l2 % TWO_PWR_32_DBL);
  }
  return p2(-24, -18), p2(-18, -12), p2(-12, -6), p2(-6), u2 ? negate(l2, v2) : newBits(l2, v2);
}
function int64ToString(a420, u2) {
  let c = newBits(a420, u2);
  const l2 = c.hi & 2147483648;
  l2 && (c = negate(c.lo, c.hi));
  const v2 = uInt64ToString(c.lo, c.hi);
  return l2 ? "-" + v2 : v2;
}
function uInt64ToString(a420, u2) {
  if ({ lo: a420, hi: u2 } = toUnsigned(a420, u2), u2 <= 2097151)
    return String(TWO_PWR_32_DBL * u2 + a420);
  const c = a420 & 16777215, l2 = (a420 >>> 24 | u2 << 8) & 16777215, v2 = u2 >> 16 & 65535;
  let p2 = c + l2 * 6777216 + v2 * 6710656, _ = l2 + v2 * 8147497, I2 = v2 * 2;
  const P2 = 1e7;
  return p2 >= P2 && (_ += Math.floor(p2 / P2), p2 %= P2), _ >= P2 && (I2 += Math.floor(_ / P2), _ %= P2), I2.toString() + decimalFrom1e7WithLeadingZeros(_) + decimalFrom1e7WithLeadingZeros(p2);
}
function toUnsigned(a420, u2) {
  return { lo: a420 >>> 0, hi: u2 >>> 0 };
}
function newBits(a420, u2) {
  return { lo: a420 | 0, hi: u2 | 0 };
}
function negate(a420, u2) {
  return u2 = ~u2, a420 ? a420 = ~a420 + 1 : u2 += 1, newBits(a420, u2);
}
const decimalFrom1e7WithLeadingZeros = (a420) => {
  const u2 = String(a420);
  return "0000000".slice(u2.length) + u2;
};
function varint32write(a420, u2) {
  if (a420 >= 0) {
    for (; a420 > 127; )
      u2.push(a420 & 127 | 128), a420 = a420 >>> 7;
    u2.push(a420);
  } else {
    for (let c = 0; c < 9; c++)
      u2.push(a420 & 127 | 128), a420 = a420 >> 7;
    u2.push(1);
  }
}
function varint32read() {
  let a420 = this.buf[this.pos++], u2 = a420 & 127;
  if (!(a420 & 128))
    return this.assertBounds(), u2;
  if (a420 = this.buf[this.pos++], u2 |= (a420 & 127) << 7, !(a420 & 128))
    return this.assertBounds(), u2;
  if (a420 = this.buf[this.pos++], u2 |= (a420 & 127) << 14, !(a420 & 128))
    return this.assertBounds(), u2;
  if (a420 = this.buf[this.pos++], u2 |= (a420 & 127) << 21, !(a420 & 128))
    return this.assertBounds(), u2;
  a420 = this.buf[this.pos++], u2 |= (a420 & 15) << 28;
  for (let c = 5; a420 & 128 && c < 10; c++)
    a420 = this.buf[this.pos++];
  if (a420 & 128)
    throw new Error("invalid varint");
  return this.assertBounds(), u2 >>> 0;
}
function makeInt64Support() {
  const a420 = new DataView(new ArrayBuffer(8));
  if (typeof BigInt == "function" && typeof a420.getBigInt64 == "function" && typeof a420.getBigUint64 == "function" && typeof a420.setBigInt64 == "function" && typeof a420.setBigUint64 == "function" && (typeof process$1 != "object" || typeof process$1.env != "object" || process$1.env.BUF_BIGINT_DISABLE !== "1")) {
    const v2 = BigInt("-9223372036854775808"), p2 = BigInt("9223372036854775807"), _ = BigInt("0"), I2 = BigInt("18446744073709551615");
    return { zero: BigInt(0), supported: true, parse(P2) {
      const $ = typeof P2 == "bigint" ? P2 : BigInt(P2);
      if ($ > p2 || $ < v2)
        throw new Error("int64 invalid: ".concat(P2));
      return $;
    }, uParse(P2) {
      const $ = typeof P2 == "bigint" ? P2 : BigInt(P2);
      if ($ > I2 || $ < _)
        throw new Error("uint64 invalid: ".concat(P2));
      return $;
    }, enc(P2) {
      return a420.setBigInt64(0, this.parse(P2), true), { lo: a420.getInt32(0, true), hi: a420.getInt32(4, true) };
    }, uEnc(P2) {
      return a420.setBigInt64(0, this.uParse(P2), true), { lo: a420.getInt32(0, true), hi: a420.getInt32(4, true) };
    }, dec(P2, $) {
      return a420.setInt32(0, P2, true), a420.setInt32(4, $, true), a420.getBigInt64(0, true);
    }, uDec(P2, $) {
      return a420.setInt32(0, P2, true), a420.setInt32(4, $, true), a420.getBigUint64(0, true);
    } };
  }
  const c = (v2) => assert(/^-?[0-9]+$/.test(v2), "int64 invalid: ".concat(v2)), l2 = (v2) => assert(/^[0-9]+$/.test(v2), "uint64 invalid: ".concat(v2));
  return { zero: "0", supported: false, parse(v2) {
    return typeof v2 != "string" && (v2 = v2.toString()), c(v2), v2;
  }, uParse(v2) {
    return typeof v2 != "string" && (v2 = v2.toString()), l2(v2), v2;
  }, enc(v2) {
    return typeof v2 != "string" && (v2 = v2.toString()), c(v2), int64FromString(v2);
  }, uEnc(v2) {
    return typeof v2 != "string" && (v2 = v2.toString()), l2(v2), int64FromString(v2);
  }, dec(v2, p2) {
    return int64ToString(v2, p2);
  }, uDec(v2, p2) {
    return uInt64ToString(v2, p2);
  } };
}
const protoInt64 = makeInt64Support();
var WireType;
(function(a420) {
  a420[a420.Varint = 0] = "Varint", a420[a420.Bit64 = 1] = "Bit64", a420[a420.LengthDelimited = 2] = "LengthDelimited", a420[a420.StartGroup = 3] = "StartGroup", a420[a420.EndGroup = 4] = "EndGroup", a420[a420.Bit32 = 5] = "Bit32";
})(WireType || (WireType = {}));
class BinaryWriter {
  constructor(u2) {
    this.stack = [], this.textEncoder = u2 ?? new TextEncoder(), this.chunks = [], this.buf = [];
  }
  /**
  * Return all bytes written and reset this writer.
  */
  finish() {
    this.chunks.push(new Uint8Array(this.buf));
    let u2 = 0;
    for (let v2 = 0; v2 < this.chunks.length; v2++)
      u2 += this.chunks[v2].length;
    let c = new Uint8Array(u2), l2 = 0;
    for (let v2 = 0; v2 < this.chunks.length; v2++)
      c.set(this.chunks[v2], l2), l2 += this.chunks[v2].length;
    return this.chunks = [], c;
  }
  /**
  * Start a new fork for length-delimited data like a message
  * or a packed repeated field.
  *
  * Must be joined later with `join()`.
  */
  fork() {
    return this.stack.push({ chunks: this.chunks, buf: this.buf }), this.chunks = [], this.buf = [], this;
  }
  /**
  * Join the last fork. Write its length and bytes, then
  * return to the previous state.
  */
  join() {
    let u2 = this.finish(), c = this.stack.pop();
    if (!c)
      throw new Error("invalid state, fork stack empty");
    return this.chunks = c.chunks, this.buf = c.buf, this.uint32(u2.byteLength), this.raw(u2);
  }
  /**
  * Writes a tag (field number and wire type).
  *
  * Equivalent to `uint32( (fieldNo << 3 | type) >>> 0 )`.
  *
  * Generated code should compute the tag ahead of time and call `uint32()`.
  */
  tag(u2, c) {
    return this.uint32((u2 << 3 | c) >>> 0);
  }
  /**
  * Write a chunk of raw bytes.
  */
  raw(u2) {
    return this.buf.length && (this.chunks.push(new Uint8Array(this.buf)), this.buf = []), this.chunks.push(u2), this;
  }
  /**
  * Write a `uint32` value, an unsigned 32 bit varint.
  */
  uint32(u2) {
    for (assertUInt32(u2); u2 > 127; )
      this.buf.push(u2 & 127 | 128), u2 = u2 >>> 7;
    return this.buf.push(u2), this;
  }
  /**
  * Write a `int32` value, a signed 32 bit varint.
  */
  int32(u2) {
    return assertInt32(u2), varint32write(u2, this.buf), this;
  }
  /**
  * Write a `bool` value, a variant.
  */
  bool(u2) {
    return this.buf.push(u2 ? 1 : 0), this;
  }
  /**
  * Write a `bytes` value, length-delimited arbitrary data.
  */
  bytes(u2) {
    return this.uint32(u2.byteLength), this.raw(u2);
  }
  /**
  * Write a `string` value, length-delimited data converted to UTF-8 text.
  */
  string(u2) {
    let c = this.textEncoder.encode(u2);
    return this.uint32(c.byteLength), this.raw(c);
  }
  /**
  * Write a `float` value, 32-bit floating point number.
  */
  float(u2) {
    assertFloat32(u2);
    let c = new Uint8Array(4);
    return new DataView(c.buffer).setFloat32(0, u2, true), this.raw(c);
  }
  /**
  * Write a `double` value, a 64-bit floating point number.
  */
  double(u2) {
    let c = new Uint8Array(8);
    return new DataView(c.buffer).setFloat64(0, u2, true), this.raw(c);
  }
  /**
  * Write a `fixed32` value, an unsigned, fixed-length 32-bit integer.
  */
  fixed32(u2) {
    assertUInt32(u2);
    let c = new Uint8Array(4);
    return new DataView(c.buffer).setUint32(0, u2, true), this.raw(c);
  }
  /**
  * Write a `sfixed32` value, a signed, fixed-length 32-bit integer.
  */
  sfixed32(u2) {
    assertInt32(u2);
    let c = new Uint8Array(4);
    return new DataView(c.buffer).setInt32(0, u2, true), this.raw(c);
  }
  /**
  * Write a `sint32` value, a signed, zigzag-encoded 32-bit varint.
  */
  sint32(u2) {
    return assertInt32(u2), u2 = (u2 << 1 ^ u2 >> 31) >>> 0, varint32write(u2, this.buf), this;
  }
  /**
  * Write a `fixed64` value, a signed, fixed-length 64-bit integer.
  */
  sfixed64(u2) {
    let c = new Uint8Array(8), l2 = new DataView(c.buffer), v2 = protoInt64.enc(u2);
    return l2.setInt32(0, v2.lo, true), l2.setInt32(4, v2.hi, true), this.raw(c);
  }
  /**
  * Write a `fixed64` value, an unsigned, fixed-length 64 bit integer.
  */
  fixed64(u2) {
    let c = new Uint8Array(8), l2 = new DataView(c.buffer), v2 = protoInt64.uEnc(u2);
    return l2.setInt32(0, v2.lo, true), l2.setInt32(4, v2.hi, true), this.raw(c);
  }
  /**
  * Write a `int64` value, a signed 64-bit varint.
  */
  int64(u2) {
    let c = protoInt64.enc(u2);
    return varint64write(c.lo, c.hi, this.buf), this;
  }
  /**
  * Write a `sint64` value, a signed, zig-zag-encoded 64-bit varint.
  */
  sint64(u2) {
    let c = protoInt64.enc(u2), l2 = c.hi >> 31, v2 = c.lo << 1 ^ l2, p2 = (c.hi << 1 | c.lo >>> 31) ^ l2;
    return varint64write(v2, p2, this.buf), this;
  }
  /**
  * Write a `uint64` value, an unsigned 64-bit varint.
  */
  uint64(u2) {
    let c = protoInt64.uEnc(u2);
    return varint64write(c.lo, c.hi, this.buf), this;
  }
}
class BinaryReader {
  constructor(u2, c) {
    this.varint64 = varint64read, this.uint32 = varint32read, this.buf = u2, this.len = u2.length, this.pos = 0, this.view = new DataView(u2.buffer, u2.byteOffset, u2.byteLength), this.textDecoder = c ?? new TextDecoder();
  }
  /**
  * Reads a tag - field number and wire type.
  */
  tag() {
    let u2 = this.uint32(), c = u2 >>> 3, l2 = u2 & 7;
    if (c <= 0 || l2 < 0 || l2 > 5)
      throw new Error("illegal tag: field no " + c + " wire type " + l2);
    return [c, l2];
  }
  /**
  * Skip one element on the wire and return the skipped data.
  * Supports WireType.StartGroup since v2.0.0-alpha.23.
  */
  skip(u2) {
    let c = this.pos;
    switch (u2) {
      case WireType.Varint:
        for (; this.buf[this.pos++] & 128; )
          ;
        break;
      case WireType.Bit64:
        this.pos += 4;
      case WireType.Bit32:
        this.pos += 4;
        break;
      case WireType.LengthDelimited:
        let l2 = this.uint32();
        this.pos += l2;
        break;
      case WireType.StartGroup:
        let v2;
        for (; (v2 = this.tag()[1]) !== WireType.EndGroup; )
          this.skip(v2);
        break;
      default:
        throw new Error("cant skip wire type " + u2);
    }
    return this.assertBounds(), this.buf.subarray(c, this.pos);
  }
  /**
  * Throws error if position in byte array is out of range.
  */
  assertBounds() {
    if (this.pos > this.len)
      throw new RangeError("premature EOF");
  }
  /**
  * Read a `int32` field, a signed 32 bit varint.
  */
  int32() {
    return this.uint32() | 0;
  }
  /**
  * Read a `sint32` field, a signed, zigzag-encoded 32-bit varint.
  */
  sint32() {
    let u2 = this.uint32();
    return u2 >>> 1 ^ -(u2 & 1);
  }
  /**
  * Read a `int64` field, a signed 64-bit varint.
  */
  int64() {
    return protoInt64.dec(...this.varint64());
  }
  /**
  * Read a `uint64` field, an unsigned 64-bit varint.
  */
  uint64() {
    return protoInt64.uDec(...this.varint64());
  }
  /**
  * Read a `sint64` field, a signed, zig-zag-encoded 64-bit varint.
  */
  sint64() {
    let [u2, c] = this.varint64(), l2 = -(u2 & 1);
    return u2 = (u2 >>> 1 | (c & 1) << 31) ^ l2, c = c >>> 1 ^ l2, protoInt64.dec(u2, c);
  }
  /**
  * Read a `bool` field, a variant.
  */
  bool() {
    let [u2, c] = this.varint64();
    return u2 !== 0 || c !== 0;
  }
  /**
  * Read a `fixed32` field, an unsigned, fixed-length 32-bit integer.
  */
  fixed32() {
    return this.view.getUint32((this.pos += 4) - 4, true);
  }
  /**
  * Read a `sfixed32` field, a signed, fixed-length 32-bit integer.
  */
  sfixed32() {
    return this.view.getInt32((this.pos += 4) - 4, true);
  }
  /**
  * Read a `fixed64` field, an unsigned, fixed-length 64 bit integer.
  */
  fixed64() {
    return protoInt64.uDec(this.sfixed32(), this.sfixed32());
  }
  /**
  * Read a `fixed64` field, a signed, fixed-length 64-bit integer.
  */
  sfixed64() {
    return protoInt64.dec(this.sfixed32(), this.sfixed32());
  }
  /**
  * Read a `float` field, 32-bit floating point number.
  */
  float() {
    return this.view.getFloat32((this.pos += 4) - 4, true);
  }
  /**
  * Read a `double` field, a 64-bit floating point number.
  */
  double() {
    return this.view.getFloat64((this.pos += 8) - 8, true);
  }
  /**
  * Read a `bytes` field, length-delimited arbitrary data.
  */
  bytes() {
    let u2 = this.uint32(), c = this.pos;
    return this.pos += u2, this.assertBounds(), this.buf.subarray(c, c + u2);
  }
  /**
  * Read a `string` field, length-delimited data converted to UTF-8 text.
  */
  string() {
    return this.textDecoder.decode(this.bytes());
  }
}
function wrapField(a420, u2) {
  return u2 instanceof Message || !a420.fieldWrapper ? u2 : a420.fieldWrapper.wrapField(u2);
}
ScalarType.DOUBLE, ScalarType.FLOAT, ScalarType.INT64, ScalarType.UINT64, ScalarType.INT32, ScalarType.UINT32, ScalarType.BOOL, ScalarType.STRING, ScalarType.BYTES;
function scalarEquals(a420, u2, c) {
  if (u2 === c)
    return true;
  if (a420 == ScalarType.BYTES) {
    if (!(u2 instanceof Uint8Array) || !(c instanceof Uint8Array) || u2.length !== c.length)
      return false;
    for (let l2 = 0; l2 < u2.length; l2++)
      if (u2[l2] !== c[l2])
        return false;
    return true;
  }
  switch (a420) {
    case ScalarType.UINT64:
    case ScalarType.FIXED64:
    case ScalarType.INT64:
    case ScalarType.SFIXED64:
    case ScalarType.SINT64:
      return u2 == c;
  }
  return false;
}
function scalarDefaultValue(a420, u2) {
  switch (a420) {
    case ScalarType.BOOL:
      return false;
    case ScalarType.UINT64:
    case ScalarType.FIXED64:
    case ScalarType.INT64:
    case ScalarType.SFIXED64:
    case ScalarType.SINT64:
      return u2 == 0 ? protoInt64.zero : "0";
    case ScalarType.DOUBLE:
    case ScalarType.FLOAT:
      return 0;
    case ScalarType.BYTES:
      return new Uint8Array(0);
    case ScalarType.STRING:
      return "";
    default:
      return 0;
  }
}
function scalarTypeInfo(a420, u2) {
  const c = u2 === void 0;
  let l2 = WireType.Varint, v2 = u2 === 0;
  switch (a420) {
    case ScalarType.STRING:
      v2 = c || !u2.length, l2 = WireType.LengthDelimited;
      break;
    case ScalarType.BOOL:
      v2 = u2 === false;
      break;
    case ScalarType.DOUBLE:
      l2 = WireType.Bit64;
      break;
    case ScalarType.FLOAT:
      l2 = WireType.Bit32;
      break;
    case ScalarType.INT64:
      v2 = c || u2 == 0;
      break;
    case ScalarType.UINT64:
      v2 = c || u2 == 0;
      break;
    case ScalarType.FIXED64:
      v2 = c || u2 == 0, l2 = WireType.Bit64;
      break;
    case ScalarType.BYTES:
      v2 = c || !u2.byteLength, l2 = WireType.LengthDelimited;
      break;
    case ScalarType.FIXED32:
      l2 = WireType.Bit32;
      break;
    case ScalarType.SFIXED32:
      l2 = WireType.Bit32;
      break;
    case ScalarType.SFIXED64:
      v2 = c || u2 == 0, l2 = WireType.Bit64;
      break;
    case ScalarType.SINT64:
      v2 = c || u2 == 0;
      break;
  }
  const p2 = ScalarType[a420].toLowerCase();
  return [l2, p2, c || v2];
}
const unknownFieldsSymbol = Symbol("@bufbuild/protobuf/unknown-fields"), readDefaults = { readUnknownFields: true, readerFactory: (a420) => new BinaryReader(a420) }, writeDefaults = { writeUnknownFields: true, writerFactory: () => new BinaryWriter() };
function makeReadOptions$1(a420) {
  return a420 ? Object.assign(Object.assign({}, readDefaults), a420) : readDefaults;
}
function makeWriteOptions$1(a420) {
  return a420 ? Object.assign(Object.assign({}, writeDefaults), a420) : writeDefaults;
}
function makeBinaryFormatCommon() {
  return { makeReadOptions: makeReadOptions$1, makeWriteOptions: makeWriteOptions$1, listUnknownFields(a420) {
    var u2;
    return (u2 = a420[unknownFieldsSymbol]) !== null && u2 !== void 0 ? u2 : [];
  }, discardUnknownFields(a420) {
    delete a420[unknownFieldsSymbol];
  }, writeUnknownFields(a420, u2) {
    const l2 = a420[unknownFieldsSymbol];
    if (l2)
      for (const v2 of l2)
        u2.tag(v2.no, v2.wireType).raw(v2.data);
  }, onUnknownField(a420, u2, c, l2) {
    const v2 = a420;
    Array.isArray(v2[unknownFieldsSymbol]) || (v2[unknownFieldsSymbol] = []), v2[unknownFieldsSymbol].push({ no: u2, wireType: c, data: l2 });
  }, readMessage(a420, u2, c, l2) {
    const v2 = a420.getType(), p2 = c === void 0 ? u2.len : u2.pos + c;
    for (; u2.pos < p2; ) {
      const [_, I2] = u2.tag(), P2 = v2.fields.find(_);
      if (!P2) {
        const j = u2.skip(I2);
        l2.readUnknownFields && this.onUnknownField(a420, _, I2, j);
        continue;
      }
      let $ = a420, F2 = P2.repeated, H2 = P2.localName;
      switch (P2.oneof && ($ = $[P2.oneof.localName], $.case != H2 && delete $.value, $.case = H2, H2 = "value"), P2.kind) {
        case "scalar":
        case "enum":
          const j = P2.kind == "enum" ? ScalarType.INT32 : P2.T;
          let ee2 = readScalar$1;
          if (P2.kind == "scalar" && P2.L > 0 && (ee2 = readScalarLTString), F2) {
            let ne2 = $[H2];
            if (I2 == WireType.LengthDelimited && j != ScalarType.STRING && j != ScalarType.BYTES) {
              let Z2 = u2.uint32() + u2.pos;
              for (; u2.pos < Z2; )
                ne2.push(ee2(u2, j));
            } else
              ne2.push(ee2(u2, j));
          } else
            $[H2] = ee2(u2, j);
          break;
        case "message":
          const X2 = P2.T;
          F2 ? $[H2].push(readMessageField(u2, new X2(), l2)) : $[H2] instanceof Message ? readMessageField(u2, $[H2], l2) : ($[H2] = readMessageField(u2, new X2(), l2), X2.fieldWrapper && !P2.oneof && !P2.repeated && ($[H2] = X2.fieldWrapper.unwrapField($[H2])));
          break;
        case "map":
          let [ie2, Q2] = readMapEntry(P2, u2, l2);
          $[H2][ie2] = Q2;
          break;
      }
    }
  } };
}
function readMessageField(a420, u2, c) {
  return u2.getType().runtime.bin.readMessage(u2, a420, a420.uint32(), c), u2;
}
function readMapEntry(a420, u2, c) {
  const l2 = u2.uint32(), v2 = u2.pos + l2;
  let p2, _;
  for (; u2.pos < v2; ) {
    let [I2] = u2.tag();
    switch (I2) {
      case 1:
        p2 = readScalar$1(u2, a420.K);
        break;
      case 2:
        switch (a420.V.kind) {
          case "scalar":
            _ = readScalar$1(u2, a420.V.T);
            break;
          case "enum":
            _ = u2.int32();
            break;
          case "message":
            _ = readMessageField(u2, new a420.V.T(), c);
            break;
        }
        break;
    }
  }
  if (p2 === void 0) {
    let I2 = scalarDefaultValue(a420.K, LongType.BIGINT);
    p2 = a420.K == ScalarType.BOOL ? I2.toString() : I2;
  }
  if (typeof p2 != "string" && typeof p2 != "number" && (p2 = p2.toString()), _ === void 0)
    switch (a420.V.kind) {
      case "scalar":
        _ = scalarDefaultValue(a420.V.T, LongType.BIGINT);
        break;
      case "enum":
        _ = 0;
        break;
      case "message":
        _ = new a420.V.T();
        break;
    }
  return [p2, _];
}
function readScalarLTString(a420, u2) {
  const c = readScalar$1(a420, u2);
  return typeof c == "bigint" ? c.toString() : c;
}
function readScalar$1(a420, u2) {
  switch (u2) {
    case ScalarType.STRING:
      return a420.string();
    case ScalarType.BOOL:
      return a420.bool();
    case ScalarType.DOUBLE:
      return a420.double();
    case ScalarType.FLOAT:
      return a420.float();
    case ScalarType.INT32:
      return a420.int32();
    case ScalarType.INT64:
      return a420.int64();
    case ScalarType.UINT64:
      return a420.uint64();
    case ScalarType.FIXED64:
      return a420.fixed64();
    case ScalarType.BYTES:
      return a420.bytes();
    case ScalarType.FIXED32:
      return a420.fixed32();
    case ScalarType.SFIXED32:
      return a420.sfixed32();
    case ScalarType.SFIXED64:
      return a420.sfixed64();
    case ScalarType.SINT64:
      return a420.sint64();
    case ScalarType.UINT32:
      return a420.uint32();
    case ScalarType.SINT32:
      return a420.sint32();
  }
}
function writeMapEntry(a420, u2, c, l2, v2) {
  a420.tag(c.no, WireType.LengthDelimited), a420.fork();
  let p2 = l2;
  switch (c.K) {
    case ScalarType.INT32:
    case ScalarType.FIXED32:
    case ScalarType.UINT32:
    case ScalarType.SFIXED32:
    case ScalarType.SINT32:
      p2 = Number.parseInt(l2);
      break;
    case ScalarType.BOOL:
      assert(l2 == "true" || l2 == "false"), p2 = l2 == "true";
      break;
  }
  switch (writeScalar$1(a420, c.K, 1, p2, true), c.V.kind) {
    case "scalar":
      writeScalar$1(a420, c.V.T, 2, v2, true);
      break;
    case "enum":
      writeScalar$1(a420, ScalarType.INT32, 2, v2, true);
      break;
    case "message":
      writeMessageField(a420, u2, c.V.T, 2, v2);
      break;
  }
  a420.join();
}
function writeMessageField(a420, u2, c, l2, v2) {
  if (v2 !== void 0) {
    const p2 = wrapField(c, v2);
    a420.tag(l2, WireType.LengthDelimited).bytes(p2.toBinary(u2));
  }
}
function writeScalar$1(a420, u2, c, l2, v2) {
  let [p2, _, I2] = scalarTypeInfo(u2, l2);
  (!I2 || v2) && a420.tag(c, p2)[_](l2);
}
function writePacked(a420, u2, c, l2) {
  if (!l2.length)
    return;
  a420.tag(c, WireType.LengthDelimited).fork();
  let [, v2] = scalarTypeInfo(u2);
  for (let p2 = 0; p2 < l2.length; p2++)
    a420[v2](l2[p2]);
  a420.join();
}
function makeBinaryFormatProto3() {
  return Object.assign(Object.assign({}, makeBinaryFormatCommon()), { writeMessage(a420, u2, c) {
    const l2 = a420.getType();
    for (const v2 of l2.fields.byNumber()) {
      let p2, _ = v2.repeated, I2 = v2.localName;
      if (v2.oneof) {
        const P2 = a420[v2.oneof.localName];
        if (P2.case !== I2)
          continue;
        p2 = P2.value;
      } else
        p2 = a420[I2];
      switch (v2.kind) {
        case "scalar":
        case "enum":
          let P2 = v2.kind == "enum" ? ScalarType.INT32 : v2.T;
          if (_) {
            if (v2.packed)
              writePacked(u2, P2, v2.no, p2);
            else
              for (const $ of p2)
                writeScalar$1(u2, P2, v2.no, $, true);
          } else
            p2 !== void 0 && writeScalar$1(u2, P2, v2.no, p2, !!v2.oneof || v2.opt);
          break;
        case "message":
          if (_)
            for (const $ of p2)
              writeMessageField(u2, c, v2.T, v2.no, $);
          else
            writeMessageField(u2, c, v2.T, v2.no, p2);
          break;
        case "map":
          for (const [$, F2] of Object.entries(p2))
            writeMapEntry(u2, c, v2, $, F2);
          break;
      }
    }
    return c.writeUnknownFields && this.writeUnknownFields(a420, u2), u2;
  } });
}
let encTable = "ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/".split(""), decTable = [];
for (let a420 = 0; a420 < encTable.length; a420++)
  decTable[encTable[a420].charCodeAt(0)] = a420;
decTable[45] = encTable.indexOf("+");
decTable[95] = encTable.indexOf("/");
const protoBase64 = {
  /**
  * Decodes a base64 string to a byte array.
  *
  * - ignores white-space, including line breaks and tabs
  * - allows inner padding (can decode concatenated base64 strings)
  * - does not require padding
  * - understands base64url encoding:
  *   "-" instead of "+",
  *   "_" instead of "/",
  *   no padding
  */
  dec(a420) {
    let u2 = a420.length * 3 / 4;
    a420[a420.length - 2] == "=" ? u2 -= 2 : a420[a420.length - 1] == "=" && (u2 -= 1);
    let c = new Uint8Array(u2), l2 = 0, v2 = 0, p2, _ = 0;
    for (let I2 = 0; I2 < a420.length; I2++) {
      if (p2 = decTable[a420.charCodeAt(I2)], p2 === void 0)
        switch (a420[I2]) {
          case "=":
            v2 = 0;
          case `
`:
          case "\r":
          case "	":
          case " ":
            continue;
          default:
            throw Error("invalid base64 string.");
        }
      switch (v2) {
        case 0:
          _ = p2, v2 = 1;
          break;
        case 1:
          c[l2++] = _ << 2 | (p2 & 48) >> 4, _ = p2, v2 = 2;
          break;
        case 2:
          c[l2++] = (_ & 15) << 4 | (p2 & 60) >> 2, _ = p2, v2 = 3;
          break;
        case 3:
          c[l2++] = (_ & 3) << 6 | p2, v2 = 0;
          break;
      }
    }
    if (v2 == 1)
      throw Error("invalid base64 string.");
    return c.subarray(0, l2);
  },
  /**
  * Encode a byte array to a base64 string.
  */
  enc(a420) {
    let u2 = "", c = 0, l2, v2 = 0;
    for (let p2 = 0; p2 < a420.length; p2++)
      switch (l2 = a420[p2], c) {
        case 0:
          u2 += encTable[l2 >> 2], v2 = (l2 & 3) << 4, c = 1;
          break;
        case 1:
          u2 += encTable[v2 | l2 >> 4], v2 = (l2 & 15) << 2, c = 2;
          break;
        case 2:
          u2 += encTable[v2 | l2 >> 6], u2 += encTable[l2 & 63], c = 0;
          break;
      }
    return c && (u2 += encTable[v2], u2 += "=", c == 1 && (u2 += "=")), u2;
  }
}, jsonReadDefaults = { ignoreUnknownFields: false }, jsonWriteDefaults = { emitDefaultValues: false, enumAsInteger: false, useProtoFieldName: false, prettySpaces: 0 };
function makeReadOptions(a420) {
  return a420 ? Object.assign(Object.assign({}, jsonReadDefaults), a420) : jsonReadDefaults;
}
function makeWriteOptions(a420) {
  return a420 ? Object.assign(Object.assign({}, jsonWriteDefaults), a420) : jsonWriteDefaults;
}
function makeJsonFormatCommon(a420) {
  const u2 = a420(writeEnum, writeScalar);
  return { makeReadOptions, makeWriteOptions, readMessage(c, l2, v2, p2) {
    if (l2 == null || Array.isArray(l2) || typeof l2 != "object")
      throw new Error("cannot decode message ".concat(c.typeName, " from JSON: ").concat(this.debug(l2)));
    p2 = p2 ?? new c();
    const _ = {};
    for (const [I2, P2] of Object.entries(l2)) {
      const $ = c.fields.findJsonName(I2);
      if (!$) {
        if (!v2.ignoreUnknownFields)
          throw new Error("cannot decode message ".concat(c.typeName, ' from JSON: key "').concat(I2, '" is unknown'));
        continue;
      }
      let F2 = $.localName, H2 = p2;
      if ($.oneof) {
        if (P2 === null && $.kind == "scalar")
          continue;
        const j = _[$.oneof.localName];
        if (j)
          throw new Error("cannot decode message ".concat(c.typeName, ' from JSON: multiple keys for oneof "').concat($.oneof.name, '" present: "').concat(j, '", "').concat(I2, '"'));
        _[$.oneof.localName] = I2, H2 = H2[$.oneof.localName] = { case: F2 }, F2 = "value";
      }
      if ($.repeated) {
        if (P2 === null)
          continue;
        if (!Array.isArray(P2))
          throw new Error("cannot decode field ".concat(c.typeName, ".").concat($.name, " from JSON: ").concat(this.debug(P2)));
        const j = H2[F2];
        for (const ee2 of P2) {
          if (ee2 === null)
            throw new Error("cannot decode field ".concat(c.typeName, ".").concat($.name, " from JSON: ").concat(this.debug(ee2)));
          let X2;
          switch ($.kind) {
            case "message":
              X2 = $.T.fromJson(ee2, v2);
              break;
            case "enum":
              if (X2 = readEnum($.T, ee2, v2.ignoreUnknownFields), X2 === void 0)
                continue;
              break;
            case "scalar":
              try {
                X2 = readScalar($.T, ee2, $.L);
              } catch (ie2) {
                let Q2 = "cannot decode field ".concat(c.typeName, ".").concat($.name, " from JSON: ").concat(this.debug(ee2));
                throw ie2 instanceof Error && ie2.message.length > 0 && (Q2 += ": ".concat(ie2.message)), new Error(Q2);
              }
              break;
          }
          j.push(X2);
        }
      } else if ($.kind == "map") {
        if (P2 === null)
          continue;
        if (Array.isArray(P2) || typeof P2 != "object")
          throw new Error("cannot decode field ".concat(c.typeName, ".").concat($.name, " from JSON: ").concat(this.debug(P2)));
        const j = H2[F2];
        for (const [ee2, X2] of Object.entries(P2)) {
          if (X2 === null)
            throw new Error("cannot decode field ".concat(c.typeName, ".").concat($.name, " from JSON: map value null"));
          let ie2;
          switch ($.V.kind) {
            case "message":
              ie2 = $.V.T.fromJson(X2, v2);
              break;
            case "enum":
              if (ie2 = readEnum($.V.T, X2, v2.ignoreUnknownFields), ie2 === void 0)
                continue;
              break;
            case "scalar":
              try {
                ie2 = readScalar($.V.T, X2, LongType.BIGINT);
              } catch (Q2) {
                let ne2 = "cannot decode map value for field ".concat(c.typeName, ".").concat($.name, " from JSON: ").concat(this.debug(P2));
                throw Q2 instanceof Error && Q2.message.length > 0 && (ne2 += ": ".concat(Q2.message)), new Error(ne2);
              }
              break;
          }
          try {
            j[readScalar($.K, $.K == ScalarType.BOOL ? ee2 == "true" ? true : ee2 == "false" ? false : ee2 : ee2, LongType.BIGINT).toString()] = ie2;
          } catch (Q2) {
            let ne2 = "cannot decode map key for field ".concat(c.typeName, ".").concat($.name, " from JSON: ").concat(this.debug(P2));
            throw Q2 instanceof Error && Q2.message.length > 0 && (ne2 += ": ".concat(Q2.message)), new Error(ne2);
          }
        }
      } else
        switch ($.kind) {
          case "message":
            const j = $.T;
            if (P2 === null && j.typeName != "google.protobuf.Value") {
              if ($.oneof)
                throw new Error("cannot decode field ".concat(c.typeName, ".").concat($.name, ' from JSON: null is invalid for oneof field "').concat(I2, '"'));
              continue;
            }
            H2[F2] instanceof Message ? H2[F2].fromJson(P2, v2) : (H2[F2] = j.fromJson(P2, v2), j.fieldWrapper && !$.oneof && (H2[F2] = j.fieldWrapper.unwrapField(H2[F2])));
            break;
          case "enum":
            const ee2 = readEnum($.T, P2, v2.ignoreUnknownFields);
            ee2 !== void 0 && (H2[F2] = ee2);
            break;
          case "scalar":
            try {
              H2[F2] = readScalar($.T, P2, $.L);
            } catch (X2) {
              let ie2 = "cannot decode field ".concat(c.typeName, ".").concat($.name, " from JSON: ").concat(this.debug(P2));
              throw X2 instanceof Error && X2.message.length > 0 && (ie2 += ": ".concat(X2.message)), new Error(ie2);
            }
            break;
        }
    }
    return p2;
  }, writeMessage(c, l2) {
    const v2 = c.getType(), p2 = {};
    let _;
    try {
      for (const I2 of v2.fields.byMember()) {
        let P2;
        if (I2.kind == "oneof") {
          const $ = c[I2.localName];
          if ($.value === void 0)
            continue;
          if (_ = I2.findField($.case), !_)
            throw "oneof case not found: " + $.case;
          P2 = u2(_, $.value, l2);
        } else
          _ = I2, P2 = u2(_, c[_.localName], l2);
        P2 !== void 0 && (p2[l2.useProtoFieldName ? _.name : _.jsonName] = P2);
      }
    } catch (I2) {
      const P2 = _ ? "cannot encode field ".concat(v2.typeName, ".").concat(_.name, " to JSON") : "cannot encode message ".concat(v2.typeName, " to JSON"), $ = I2 instanceof Error ? I2.message : String(I2);
      throw new Error(P2 + ($.length > 0 ? ": ".concat($) : ""));
    }
    return p2;
  }, readScalar, writeScalar, debug: debugJsonValue };
}
function debugJsonValue(a420) {
  if (a420 === null)
    return "null";
  switch (typeof a420) {
    case "object":
      return Array.isArray(a420) ? "array" : "object";
    case "string":
      return a420.length > 100 ? "string" : '"'.concat(a420.split('"').join('\\"'), '"');
    default:
      return String(a420);
  }
}
function readScalar(a420, u2, c) {
  switch (a420) {
    case ScalarType.DOUBLE:
    case ScalarType.FLOAT:
      if (u2 === null)
        return 0;
      if (u2 === "NaN")
        return Number.NaN;
      if (u2 === "Infinity")
        return Number.POSITIVE_INFINITY;
      if (u2 === "-Infinity")
        return Number.NEGATIVE_INFINITY;
      if (u2 === "" || typeof u2 == "string" && u2.trim().length !== u2.length || typeof u2 != "string" && typeof u2 != "number")
        break;
      const l2 = Number(u2);
      if (Number.isNaN(l2) || !Number.isFinite(l2))
        break;
      return a420 == ScalarType.FLOAT && assertFloat32(l2), l2;
    case ScalarType.INT32:
    case ScalarType.FIXED32:
    case ScalarType.SFIXED32:
    case ScalarType.SINT32:
    case ScalarType.UINT32:
      if (u2 === null)
        return 0;
      let v2;
      if (typeof u2 == "number" ? v2 = u2 : typeof u2 == "string" && u2.length > 0 && u2.trim().length === u2.length && (v2 = Number(u2)), v2 === void 0)
        break;
      return a420 == ScalarType.UINT32 ? assertUInt32(v2) : assertInt32(v2), v2;
    case ScalarType.INT64:
    case ScalarType.SFIXED64:
    case ScalarType.SINT64:
      if (u2 === null)
        return protoInt64.zero;
      if (typeof u2 != "number" && typeof u2 != "string")
        break;
      const p2 = protoInt64.parse(u2);
      return c ? p2.toString() : p2;
    case ScalarType.FIXED64:
    case ScalarType.UINT64:
      if (u2 === null)
        return protoInt64.zero;
      if (typeof u2 != "number" && typeof u2 != "string")
        break;
      const _ = protoInt64.uParse(u2);
      return c ? _.toString() : _;
    case ScalarType.BOOL:
      if (u2 === null)
        return false;
      if (typeof u2 != "boolean")
        break;
      return u2;
    case ScalarType.STRING:
      if (u2 === null)
        return "";
      if (typeof u2 != "string")
        break;
      try {
        encodeURIComponent(u2);
      } catch {
        throw new Error("invalid UTF8");
      }
      return u2;
    case ScalarType.BYTES:
      if (u2 === null || u2 === "")
        return new Uint8Array(0);
      if (typeof u2 != "string")
        break;
      return protoBase64.dec(u2);
  }
  throw new Error();
}
function readEnum(a420, u2, c) {
  if (u2 === null)
    return 0;
  switch (typeof u2) {
    case "number":
      if (Number.isInteger(u2))
        return u2;
      break;
    case "string":
      const l2 = a420.findName(u2);
      if (l2 || c)
        return l2 == null ? void 0 : l2.no;
      break;
  }
  throw new Error("cannot decode enum ".concat(a420.typeName, " from JSON: ").concat(debugJsonValue(u2)));
}
function writeEnum(a420, u2, c, l2) {
  var v2;
  if (u2 === void 0)
    return u2;
  if (u2 === 0 && !c)
    return;
  if (l2)
    return u2;
  if (a420.typeName == "google.protobuf.NullValue")
    return null;
  const p2 = a420.findNumber(u2);
  return (v2 = p2 == null ? void 0 : p2.name) !== null && v2 !== void 0 ? v2 : u2;
}
function writeScalar(a420, u2, c) {
  if (u2 !== void 0)
    switch (a420) {
      case ScalarType.INT32:
      case ScalarType.SFIXED32:
      case ScalarType.SINT32:
      case ScalarType.FIXED32:
      case ScalarType.UINT32:
        return assert(typeof u2 == "number"), u2 != 0 || c ? u2 : void 0;
      case ScalarType.FLOAT:
      case ScalarType.DOUBLE:
        return assert(typeof u2 == "number"), Number.isNaN(u2) ? "NaN" : u2 === Number.POSITIVE_INFINITY ? "Infinity" : u2 === Number.NEGATIVE_INFINITY ? "-Infinity" : u2 !== 0 || c ? u2 : void 0;
      case ScalarType.STRING:
        return assert(typeof u2 == "string"), u2.length > 0 || c ? u2 : void 0;
      case ScalarType.BOOL:
        return assert(typeof u2 == "boolean"), u2 || c ? u2 : void 0;
      case ScalarType.UINT64:
      case ScalarType.FIXED64:
      case ScalarType.INT64:
      case ScalarType.SFIXED64:
      case ScalarType.SINT64:
        return assert(typeof u2 == "bigint" || typeof u2 == "string" || typeof u2 == "number"), c || u2 != 0 ? u2.toString(10) : void 0;
      case ScalarType.BYTES:
        return assert(u2 instanceof Uint8Array), c || u2.byteLength > 0 ? protoBase64.enc(u2) : void 0;
    }
}
function makeJsonFormatProto3() {
  return makeJsonFormatCommon((a420, u2) => function(l2, v2, p2) {
    if (l2.kind == "map") {
      const _ = {};
      switch (l2.V.kind) {
        case "scalar":
          for (const [P2, $] of Object.entries(v2)) {
            const F2 = u2(l2.V.T, $, true);
            assert(F2 !== void 0), _[P2.toString()] = F2;
          }
          break;
        case "message":
          for (const [P2, $] of Object.entries(v2))
            _[P2.toString()] = $.toJson(p2);
          break;
        case "enum":
          const I2 = l2.V.T;
          for (const [P2, $] of Object.entries(v2)) {
            assert($ === void 0 || typeof $ == "number");
            const F2 = a420(I2, $, true, p2.enumAsInteger);
            assert(F2 !== void 0), _[P2.toString()] = F2;
          }
          break;
      }
      return p2.emitDefaultValues || Object.keys(_).length > 0 ? _ : void 0;
    } else if (l2.repeated) {
      const _ = [];
      switch (l2.kind) {
        case "scalar":
          for (let I2 = 0; I2 < v2.length; I2++)
            _.push(u2(l2.T, v2[I2], true));
          break;
        case "enum":
          for (let I2 = 0; I2 < v2.length; I2++)
            _.push(a420(l2.T, v2[I2], true, p2.enumAsInteger));
          break;
        case "message":
          for (let I2 = 0; I2 < v2.length; I2++)
            _.push(wrapField(l2.T, v2[I2]).toJson(p2));
          break;
      }
      return p2.emitDefaultValues || _.length > 0 ? _ : void 0;
    } else
      switch (l2.kind) {
        case "scalar":
          return u2(l2.T, v2, !!l2.oneof || l2.opt || p2.emitDefaultValues);
        case "enum":
          return a420(l2.T, v2, !!l2.oneof || l2.opt || p2.emitDefaultValues, p2.enumAsInteger);
        case "message":
          return v2 !== void 0 ? wrapField(l2.T, v2).toJson(p2) : void 0;
      }
  });
}
function makeUtilCommon() {
  return { setEnumType, initPartial(a420, u2) {
    if (a420 === void 0)
      return;
    const c = u2.getType();
    for (const l2 of c.fields.byMember()) {
      const v2 = l2.localName, p2 = u2, _ = a420;
      if (_[v2] !== void 0)
        switch (l2.kind) {
          case "oneof":
            const I2 = _[v2].case;
            if (I2 === void 0)
              continue;
            const P2 = l2.findField(I2);
            let $ = _[v2].value;
            P2 && P2.kind == "message" && !($ instanceof P2.T) ? $ = new P2.T($) : P2 && P2.kind === "scalar" && P2.T === ScalarType.BYTES && ($ = toU8Arr($)), p2[v2] = { case: I2, value: $ };
            break;
          case "scalar":
          case "enum":
            let F2 = _[v2];
            l2.T === ScalarType.BYTES && (F2 = l2.repeated ? F2.map(toU8Arr) : toU8Arr(F2)), p2[v2] = F2;
            break;
          case "map":
            switch (l2.V.kind) {
              case "scalar":
              case "enum":
                if (l2.V.T === ScalarType.BYTES)
                  for (const [ee2, X2] of Object.entries(_[v2]))
                    p2[v2][ee2] = toU8Arr(X2);
                else
                  Object.assign(p2[v2], _[v2]);
                break;
              case "message":
                const j = l2.V.T;
                for (const ee2 of Object.keys(_[v2])) {
                  let X2 = _[v2][ee2];
                  j.fieldWrapper || (X2 = new j(X2)), p2[v2][ee2] = X2;
                }
                break;
            }
            break;
          case "message":
            const H2 = l2.T;
            if (l2.repeated)
              p2[v2] = _[v2].map((j) => j instanceof H2 ? j : new H2(j));
            else if (_[v2] !== void 0) {
              const j = _[v2];
              H2.fieldWrapper ? (
                /* We can't use BytesValue.typeName as that will create a circular import */
                H2.typeName === "google.protobuf.BytesValue" ? p2[v2] = toU8Arr(j) : p2[v2] = j
              ) : p2[v2] = j instanceof H2 ? j : new H2(j);
            }
            break;
        }
    }
  }, equals(a420, u2, c) {
    return u2 === c ? true : !u2 || !c ? false : a420.fields.byMember().every((l2) => {
      const v2 = u2[l2.localName], p2 = c[l2.localName];
      if (l2.repeated) {
        if (v2.length !== p2.length)
          return false;
        switch (l2.kind) {
          case "message":
            return v2.every((_, I2) => l2.T.equals(_, p2[I2]));
          case "scalar":
            return v2.every((_, I2) => scalarEquals(l2.T, _, p2[I2]));
          case "enum":
            return v2.every((_, I2) => scalarEquals(ScalarType.INT32, _, p2[I2]));
        }
        throw new Error("repeated cannot contain ".concat(l2.kind));
      }
      switch (l2.kind) {
        case "message":
          return l2.T.equals(v2, p2);
        case "enum":
          return scalarEquals(ScalarType.INT32, v2, p2);
        case "scalar":
          return scalarEquals(l2.T, v2, p2);
        case "oneof":
          if (v2.case !== p2.case)
            return false;
          const _ = l2.findField(v2.case);
          if (_ === void 0)
            return true;
          switch (_.kind) {
            case "message":
              return _.T.equals(v2.value, p2.value);
            case "enum":
              return scalarEquals(ScalarType.INT32, v2.value, p2.value);
            case "scalar":
              return scalarEquals(_.T, v2.value, p2.value);
          }
          throw new Error("oneof cannot contain ".concat(_.kind));
        case "map":
          const I2 = Object.keys(v2).concat(Object.keys(p2));
          switch (l2.V.kind) {
            case "message":
              const P2 = l2.V.T;
              return I2.every((F2) => P2.equals(v2[F2], p2[F2]));
            case "enum":
              return I2.every((F2) => scalarEquals(ScalarType.INT32, v2[F2], p2[F2]));
            case "scalar":
              const $ = l2.V.T;
              return I2.every((F2) => scalarEquals($, v2[F2], p2[F2]));
          }
          break;
      }
    });
  }, clone(a420) {
    const u2 = a420.getType(), c = new u2(), l2 = c;
    for (const v2 of u2.fields.byMember()) {
      const p2 = a420[v2.localName];
      let _;
      if (v2.repeated)
        _ = p2.map(cloneSingularField);
      else if (v2.kind == "map") {
        _ = l2[v2.localName];
        for (const [I2, P2] of Object.entries(p2))
          _[I2] = cloneSingularField(P2);
      } else
        v2.kind == "oneof" ? _ = v2.findField(p2.case) ? { case: p2.case, value: cloneSingularField(p2.value) } : { case: void 0 } : _ = cloneSingularField(p2);
      l2[v2.localName] = _;
    }
    return c;
  } };
}
function cloneSingularField(a420) {
  if (a420 === void 0)
    return a420;
  if (a420 instanceof Message)
    return a420.clone();
  if (a420 instanceof Uint8Array) {
    const u2 = new Uint8Array(a420.byteLength);
    return u2.set(a420), u2;
  }
  return a420;
}
function toU8Arr(a420) {
  return a420 instanceof Uint8Array ? a420 : new Uint8Array(a420);
}
class InternalFieldList {
  constructor(u2, c) {
    this._fields = u2, this._normalizer = c;
  }
  findJsonName(u2) {
    if (!this.jsonNames) {
      const c = {};
      for (const l2 of this.list())
        c[l2.jsonName] = c[l2.name] = l2;
      this.jsonNames = c;
    }
    return this.jsonNames[u2];
  }
  find(u2) {
    if (!this.numbers) {
      const c = {};
      for (const l2 of this.list())
        c[l2.no] = l2;
      this.numbers = c;
    }
    return this.numbers[u2];
  }
  list() {
    return this.all || (this.all = this._normalizer(this._fields)), this.all;
  }
  byNumber() {
    return this.numbersAsc || (this.numbersAsc = this.list().concat().sort((u2, c) => u2.no - c.no)), this.numbersAsc;
  }
  byMember() {
    if (!this.members) {
      this.members = [];
      const u2 = this.members;
      let c;
      for (const l2 of this.list())
        l2.oneof ? l2.oneof !== c && (c = l2.oneof, u2.push(c)) : u2.push(l2);
    }
    return this.members;
  }
}
function localFieldName(a420, u2) {
  const c = protoCamelCase(a420);
  return u2 ? c : safeObjectProperty(safeMessageProperty(c));
}
function localOneofName(a420) {
  return localFieldName(a420, false);
}
const fieldJsonName = protoCamelCase;
function protoCamelCase(a420) {
  let u2 = false;
  const c = [];
  for (let l2 = 0; l2 < a420.length; l2++) {
    let v2 = a420.charAt(l2);
    switch (v2) {
      case "_":
        u2 = true;
        break;
      case "0":
      case "1":
      case "2":
      case "3":
      case "4":
      case "5":
      case "6":
      case "7":
      case "8":
      case "9":
        c.push(v2), u2 = false;
        break;
      default:
        u2 && (u2 = false, v2 = v2.toUpperCase()), c.push(v2);
        break;
    }
  }
  return c.join("");
}
const reservedObjectProperties = /* @__PURE__ */ new Set([
  // names reserved by JavaScript
  "constructor",
  "toString",
  "toJSON",
  "valueOf"
]), reservedMessageProperties = /* @__PURE__ */ new Set([
  // names reserved by the runtime
  "getType",
  "clone",
  "equals",
  "fromBinary",
  "fromJson",
  "fromJsonString",
  "toBinary",
  "toJson",
  "toJsonString",
  // names reserved by the runtime for the future
  "toObject"
]), fallback = (a420) => "".concat(a420, "$"), safeMessageProperty = (a420) => reservedMessageProperties.has(a420) ? fallback(a420) : a420, safeObjectProperty = (a420) => reservedObjectProperties.has(a420) ? fallback(a420) : a420;
class InternalOneofInfo {
  constructor(u2) {
    this.kind = "oneof", this.repeated = false, this.packed = false, this.opt = false, this.default = void 0, this.fields = [], this.name = u2, this.localName = localOneofName(u2);
  }
  addField(u2) {
    assert(u2.oneof === this, "field ".concat(u2.name, " not one of ").concat(this.name)), this.fields.push(u2);
  }
  findField(u2) {
    if (!this._lookup) {
      this._lookup = /* @__PURE__ */ Object.create(null);
      for (let c = 0; c < this.fields.length; c++)
        this._lookup[this.fields[c].localName] = this.fields[c];
    }
    return this._lookup[u2];
  }
}
const proto3 = makeProtoRuntime("proto3", makeJsonFormatProto3(), makeBinaryFormatProto3(), Object.assign(Object.assign({}, makeUtilCommon()), { newFieldList(a420) {
  return new InternalFieldList(a420, normalizeFieldInfosProto3);
}, initFields(a420) {
  for (const u2 of a420.getType().fields.byMember()) {
    if (u2.opt)
      continue;
    const c = u2.localName, l2 = a420;
    if (u2.repeated) {
      l2[c] = [];
      continue;
    }
    switch (u2.kind) {
      case "oneof":
        l2[c] = { case: void 0 };
        break;
      case "enum":
        l2[c] = 0;
        break;
      case "map":
        l2[c] = {};
        break;
      case "scalar":
        l2[c] = scalarDefaultValue(u2.T, u2.L);
        break;
    }
  }
} }));
function normalizeFieldInfosProto3(a420) {
  var u2, c, l2, v2;
  const p2 = [];
  let _;
  for (const I2 of typeof a420 == "function" ? a420() : a420) {
    const P2 = I2;
    if (P2.localName = localFieldName(I2.name, I2.oneof !== void 0), P2.jsonName = (u2 = I2.jsonName) !== null && u2 !== void 0 ? u2 : fieldJsonName(I2.name), P2.repeated = (c = I2.repeated) !== null && c !== void 0 ? c : false, I2.kind == "scalar" && (P2.L = (l2 = I2.L) !== null && l2 !== void 0 ? l2 : LongType.BIGINT), P2.packed = (v2 = I2.packed) !== null && v2 !== void 0 ? v2 : I2.kind == "enum" || I2.kind == "scalar" && I2.T != ScalarType.BYTES && I2.T != ScalarType.STRING, I2.oneof !== void 0) {
      const $ = typeof I2.oneof == "string" ? I2.oneof : I2.oneof.name;
      (!_ || _.name != $) && (_ = new InternalOneofInfo($)), P2.oneof = _, _.addField(P2);
    }
    p2.push(P2);
  }
  return p2;
}
class Timestamp extends Message {
  constructor(u2) {
    super(), this.seconds = protoInt64.zero, this.nanos = 0, proto3.util.initPartial(u2, this);
  }
  fromJson(u2, c) {
    if (typeof u2 != "string")
      throw new Error("cannot decode google.protobuf.Timestamp from JSON: ".concat(proto3.json.debug(u2)));
    const l2 = u2.match(/^([0-9]{4})-([0-9]{2})-([0-9]{2})T([0-9]{2}):([0-9]{2}):([0-9]{2})(?:Z|\.([0-9]{3,9})Z|([+-][0-9][0-9]:[0-9][0-9]))$/);
    if (!l2)
      throw new Error("cannot decode google.protobuf.Timestamp from JSON: invalid RFC 3339 string");
    const v2 = Date.parse(l2[1] + "-" + l2[2] + "-" + l2[3] + "T" + l2[4] + ":" + l2[5] + ":" + l2[6] + (l2[8] ? l2[8] : "Z"));
    if (Number.isNaN(v2))
      throw new Error("cannot decode google.protobuf.Timestamp from JSON: invalid RFC 3339 string");
    if (v2 < Date.parse("0001-01-01T00:00:00Z") || v2 > Date.parse("9999-12-31T23:59:59Z"))
      throw new Error("cannot decode message google.protobuf.Timestamp from JSON: must be from 0001-01-01T00:00:00Z to 9999-12-31T23:59:59Z inclusive");
    return this.seconds = protoInt64.parse(v2 / 1e3), this.nanos = 0, l2[7] && (this.nanos = parseInt("1" + l2[7] + "0".repeat(9 - l2[7].length)) - 1e9), this;
  }
  toJson(u2) {
    const c = Number(this.seconds) * 1e3;
    if (c < Date.parse("0001-01-01T00:00:00Z") || c > Date.parse("9999-12-31T23:59:59Z"))
      throw new Error("cannot encode google.protobuf.Timestamp to JSON: must be from 0001-01-01T00:00:00Z to 9999-12-31T23:59:59Z inclusive");
    if (this.nanos < 0)
      throw new Error("cannot encode google.protobuf.Timestamp to JSON: nanos must not be negative");
    let l2 = "Z";
    if (this.nanos > 0) {
      const v2 = (this.nanos + 1e9).toString().substring(1);
      v2.substring(3) === "000000" ? l2 = "." + v2.substring(0, 3) + "Z" : v2.substring(6) === "000" ? l2 = "." + v2.substring(0, 6) + "Z" : l2 = "." + v2 + "Z";
    }
    return new Date(c).toISOString().replace(".000Z", l2);
  }
  toDate() {
    return new Date(Number(this.seconds) * 1e3 + Math.ceil(this.nanos / 1e6));
  }
  static now() {
    return Timestamp.fromDate(/* @__PURE__ */ new Date());
  }
  static fromDate(u2) {
    const c = u2.getTime();
    return new Timestamp({ seconds: protoInt64.parse(Math.floor(c / 1e3)), nanos: c % 1e3 * 1e6 });
  }
  static fromBinary(u2, c) {
    return new Timestamp().fromBinary(u2, c);
  }
  static fromJson(u2, c) {
    return new Timestamp().fromJson(u2, c);
  }
  static fromJsonString(u2, c) {
    return new Timestamp().fromJsonString(u2, c);
  }
  static equals(u2, c) {
    return proto3.util.equals(Timestamp, u2, c);
  }
}
Timestamp.runtime = proto3;
Timestamp.typeName = "google.protobuf.Timestamp";
Timestamp.fields = proto3.util.newFieldList(() => [{
  no: 1,
  name: "seconds",
  kind: "scalar",
  T: 3
  /* ScalarType.INT64 */
}, {
  no: 2,
  name: "nanos",
  kind: "scalar",
  T: 5
  /* ScalarType.INT32 */
}]);
var AudioCodec$1;
(function(a420) {
  a420[a420.DEFAULT_AC = 0] = "DEFAULT_AC", a420[a420.OPUS = 1] = "OPUS", a420[a420.AAC = 2] = "AAC";
})(AudioCodec$1 || (AudioCodec$1 = {}));
proto3.util.setEnumType(AudioCodec$1, "livekit.AudioCodec", [{ no: 0, name: "DEFAULT_AC" }, { no: 1, name: "OPUS" }, { no: 2, name: "AAC" }]);
var VideoCodec$1;
(function(a420) {
  a420[a420.DEFAULT_VC = 0] = "DEFAULT_VC", a420[a420.H264_BASELINE = 1] = "H264_BASELINE", a420[a420.H264_MAIN = 2] = "H264_MAIN", a420[a420.H264_HIGH = 3] = "H264_HIGH", a420[a420.VP8 = 4] = "VP8";
})(VideoCodec$1 || (VideoCodec$1 = {}));
proto3.util.setEnumType(VideoCodec$1, "livekit.VideoCodec", [{ no: 0, name: "DEFAULT_VC" }, { no: 1, name: "H264_BASELINE" }, { no: 2, name: "H264_MAIN" }, { no: 3, name: "H264_HIGH" }, { no: 4, name: "VP8" }]);
var ImageCodec;
(function(a420) {
  a420[a420.IC_DEFAULT = 0] = "IC_DEFAULT", a420[a420.IC_JPEG = 1] = "IC_JPEG";
})(ImageCodec || (ImageCodec = {}));
proto3.util.setEnumType(ImageCodec, "livekit.ImageCodec", [{ no: 0, name: "IC_DEFAULT" }, { no: 1, name: "IC_JPEG" }]);
var TrackType;
(function(a420) {
  a420[a420.AUDIO = 0] = "AUDIO", a420[a420.VIDEO = 1] = "VIDEO", a420[a420.DATA = 2] = "DATA";
})(TrackType || (TrackType = {}));
proto3.util.setEnumType(TrackType, "livekit.TrackType", [{ no: 0, name: "AUDIO" }, { no: 1, name: "VIDEO" }, { no: 2, name: "DATA" }]);
var TrackSource;
(function(a420) {
  a420[a420.UNKNOWN = 0] = "UNKNOWN", a420[a420.CAMERA = 1] = "CAMERA", a420[a420.MICROPHONE = 2] = "MICROPHONE", a420[a420.SCREEN_SHARE = 3] = "SCREEN_SHARE", a420[a420.SCREEN_SHARE_AUDIO = 4] = "SCREEN_SHARE_AUDIO";
})(TrackSource || (TrackSource = {}));
proto3.util.setEnumType(TrackSource, "livekit.TrackSource", [{ no: 0, name: "UNKNOWN" }, { no: 1, name: "CAMERA" }, { no: 2, name: "MICROPHONE" }, { no: 3, name: "SCREEN_SHARE" }, { no: 4, name: "SCREEN_SHARE_AUDIO" }]);
var VideoQuality$1;
(function(a420) {
  a420[a420.LOW = 0] = "LOW", a420[a420.MEDIUM = 1] = "MEDIUM", a420[a420.HIGH = 2] = "HIGH", a420[a420.OFF = 3] = "OFF";
})(VideoQuality$1 || (VideoQuality$1 = {}));
proto3.util.setEnumType(VideoQuality$1, "livekit.VideoQuality", [{ no: 0, name: "LOW" }, { no: 1, name: "MEDIUM" }, { no: 2, name: "HIGH" }, { no: 3, name: "OFF" }]);
var ConnectionQuality$1;
(function(a420) {
  a420[a420.POOR = 0] = "POOR", a420[a420.GOOD = 1] = "GOOD", a420[a420.EXCELLENT = 2] = "EXCELLENT", a420[a420.LOST = 3] = "LOST";
})(ConnectionQuality$1 || (ConnectionQuality$1 = {}));
proto3.util.setEnumType(ConnectionQuality$1, "livekit.ConnectionQuality", [{ no: 0, name: "POOR" }, { no: 1, name: "GOOD" }, { no: 2, name: "EXCELLENT" }, { no: 3, name: "LOST" }]);
var ClientConfigSetting;
(function(a420) {
  a420[a420.UNSET = 0] = "UNSET", a420[a420.DISABLED = 1] = "DISABLED", a420[a420.ENABLED = 2] = "ENABLED";
})(ClientConfigSetting || (ClientConfigSetting = {}));
proto3.util.setEnumType(ClientConfigSetting, "livekit.ClientConfigSetting", [{ no: 0, name: "UNSET" }, { no: 1, name: "DISABLED" }, { no: 2, name: "ENABLED" }]);
var DisconnectReason;
(function(a420) {
  a420[a420.UNKNOWN_REASON = 0] = "UNKNOWN_REASON", a420[a420.CLIENT_INITIATED = 1] = "CLIENT_INITIATED", a420[a420.DUPLICATE_IDENTITY = 2] = "DUPLICATE_IDENTITY", a420[a420.SERVER_SHUTDOWN = 3] = "SERVER_SHUTDOWN", a420[a420.PARTICIPANT_REMOVED = 4] = "PARTICIPANT_REMOVED", a420[a420.ROOM_DELETED = 5] = "ROOM_DELETED", a420[a420.STATE_MISMATCH = 6] = "STATE_MISMATCH", a420[a420.JOIN_FAILURE = 7] = "JOIN_FAILURE", a420[a420.MIGRATION = 8] = "MIGRATION", a420[a420.SIGNAL_CLOSE = 9] = "SIGNAL_CLOSE";
})(DisconnectReason || (DisconnectReason = {}));
proto3.util.setEnumType(DisconnectReason, "livekit.DisconnectReason", [{ no: 0, name: "UNKNOWN_REASON" }, { no: 1, name: "CLIENT_INITIATED" }, { no: 2, name: "DUPLICATE_IDENTITY" }, { no: 3, name: "SERVER_SHUTDOWN" }, { no: 4, name: "PARTICIPANT_REMOVED" }, { no: 5, name: "ROOM_DELETED" }, { no: 6, name: "STATE_MISMATCH" }, { no: 7, name: "JOIN_FAILURE" }, { no: 8, name: "MIGRATION" }, { no: 9, name: "SIGNAL_CLOSE" }]);
var ReconnectReason;
(function(a420) {
  a420[a420.RR_UNKNOWN = 0] = "RR_UNKNOWN", a420[a420.RR_SIGNAL_DISCONNECTED = 1] = "RR_SIGNAL_DISCONNECTED", a420[a420.RR_PUBLISHER_FAILED = 2] = "RR_PUBLISHER_FAILED", a420[a420.RR_SUBSCRIBER_FAILED = 3] = "RR_SUBSCRIBER_FAILED", a420[a420.RR_SWITCH_CANDIDATE = 4] = "RR_SWITCH_CANDIDATE";
})(ReconnectReason || (ReconnectReason = {}));
proto3.util.setEnumType(ReconnectReason, "livekit.ReconnectReason", [{ no: 0, name: "RR_UNKNOWN" }, { no: 1, name: "RR_SIGNAL_DISCONNECTED" }, { no: 2, name: "RR_PUBLISHER_FAILED" }, { no: 3, name: "RR_SUBSCRIBER_FAILED" }, { no: 4, name: "RR_SWITCH_CANDIDATE" }]);
var SubscriptionError;
(function(a420) {
  a420[a420.SE_UNKNOWN = 0] = "SE_UNKNOWN", a420[a420.SE_CODEC_UNSUPPORTED = 1] = "SE_CODEC_UNSUPPORTED", a420[a420.SE_TRACK_NOTFOUND = 2] = "SE_TRACK_NOTFOUND";
})(SubscriptionError || (SubscriptionError = {}));
proto3.util.setEnumType(SubscriptionError, "livekit.SubscriptionError", [{ no: 0, name: "SE_UNKNOWN" }, { no: 1, name: "SE_CODEC_UNSUPPORTED" }, { no: 2, name: "SE_TRACK_NOTFOUND" }]);
let Room$1 = class Gt extends Message {
  constructor(u2) {
    super(), this.sid = "", this.name = "", this.emptyTimeout = 0, this.maxParticipants = 0, this.creationTime = protoInt64.zero, this.turnPassword = "", this.enabledCodecs = [], this.metadata = "", this.numParticipants = 0, this.numPublishers = 0, this.activeRecording = false, proto3.util.initPartial(u2, this);
  }
  static fromBinary(u2, c) {
    return new Gt().fromBinary(u2, c);
  }
  static fromJson(u2, c) {
    return new Gt().fromJson(u2, c);
  }
  static fromJsonString(u2, c) {
    return new Gt().fromJsonString(u2, c);
  }
  static equals(u2, c) {
    return proto3.util.equals(Gt, u2, c);
  }
};
Room$1.runtime = proto3;
Room$1.typeName = "livekit.Room";
Room$1.fields = proto3.util.newFieldList(() => [{
  no: 1,
  name: "sid",
  kind: "scalar",
  T: 9
  /* ScalarType.STRING */
}, {
  no: 2,
  name: "name",
  kind: "scalar",
  T: 9
  /* ScalarType.STRING */
}, {
  no: 3,
  name: "empty_timeout",
  kind: "scalar",
  T: 13
  /* ScalarType.UINT32 */
}, {
  no: 4,
  name: "max_participants",
  kind: "scalar",
  T: 13
  /* ScalarType.UINT32 */
}, {
  no: 5,
  name: "creation_time",
  kind: "scalar",
  T: 3
  /* ScalarType.INT64 */
}, {
  no: 6,
  name: "turn_password",
  kind: "scalar",
  T: 9
  /* ScalarType.STRING */
}, { no: 7, name: "enabled_codecs", kind: "message", T: Codec, repeated: true }, {
  no: 8,
  name: "metadata",
  kind: "scalar",
  T: 9
  /* ScalarType.STRING */
}, {
  no: 9,
  name: "num_participants",
  kind: "scalar",
  T: 13
  /* ScalarType.UINT32 */
}, {
  no: 11,
  name: "num_publishers",
  kind: "scalar",
  T: 13
  /* ScalarType.UINT32 */
}, {
  no: 10,
  name: "active_recording",
  kind: "scalar",
  T: 8
  /* ScalarType.BOOL */
}, { no: 13, name: "version", kind: "message", T: TimedVersion }]);
class Codec extends Message {
  constructor(u2) {
    super(), this.mime = "", this.fmtpLine = "", proto3.util.initPartial(u2, this);
  }
  static fromBinary(u2, c) {
    return new Codec().fromBinary(u2, c);
  }
  static fromJson(u2, c) {
    return new Codec().fromJson(u2, c);
  }
  static fromJsonString(u2, c) {
    return new Codec().fromJsonString(u2, c);
  }
  static equals(u2, c) {
    return proto3.util.equals(Codec, u2, c);
  }
}
Codec.runtime = proto3;
Codec.typeName = "livekit.Codec";
Codec.fields = proto3.util.newFieldList(() => [{
  no: 1,
  name: "mime",
  kind: "scalar",
  T: 9
  /* ScalarType.STRING */
}, {
  no: 2,
  name: "fmtp_line",
  kind: "scalar",
  T: 9
  /* ScalarType.STRING */
}]);
class PlayoutDelay extends Message {
  constructor(u2) {
    super(), this.enabled = false, this.min = 0, this.max = 0, proto3.util.initPartial(u2, this);
  }
  static fromBinary(u2, c) {
    return new PlayoutDelay().fromBinary(u2, c);
  }
  static fromJson(u2, c) {
    return new PlayoutDelay().fromJson(u2, c);
  }
  static fromJsonString(u2, c) {
    return new PlayoutDelay().fromJsonString(u2, c);
  }
  static equals(u2, c) {
    return proto3.util.equals(PlayoutDelay, u2, c);
  }
}
PlayoutDelay.runtime = proto3;
PlayoutDelay.typeName = "livekit.PlayoutDelay";
PlayoutDelay.fields = proto3.util.newFieldList(() => [{
  no: 1,
  name: "enabled",
  kind: "scalar",
  T: 8
  /* ScalarType.BOOL */
}, {
  no: 2,
  name: "min",
  kind: "scalar",
  T: 13
  /* ScalarType.UINT32 */
}, {
  no: 3,
  name: "max",
  kind: "scalar",
  T: 13
  /* ScalarType.UINT32 */
}]);
class ParticipantPermission extends Message {
  constructor(u2) {
    super(), this.canSubscribe = false, this.canPublish = false, this.canPublishData = false, this.canPublishSources = [], this.hidden = false, this.recorder = false, this.canUpdateMetadata = false, this.agent = false, proto3.util.initPartial(u2, this);
  }
  static fromBinary(u2, c) {
    return new ParticipantPermission().fromBinary(u2, c);
  }
  static fromJson(u2, c) {
    return new ParticipantPermission().fromJson(u2, c);
  }
  static fromJsonString(u2, c) {
    return new ParticipantPermission().fromJsonString(u2, c);
  }
  static equals(u2, c) {
    return proto3.util.equals(ParticipantPermission, u2, c);
  }
}
ParticipantPermission.runtime = proto3;
ParticipantPermission.typeName = "livekit.ParticipantPermission";
ParticipantPermission.fields = proto3.util.newFieldList(() => [{
  no: 1,
  name: "can_subscribe",
  kind: "scalar",
  T: 8
  /* ScalarType.BOOL */
}, {
  no: 2,
  name: "can_publish",
  kind: "scalar",
  T: 8
  /* ScalarType.BOOL */
}, {
  no: 3,
  name: "can_publish_data",
  kind: "scalar",
  T: 8
  /* ScalarType.BOOL */
}, { no: 9, name: "can_publish_sources", kind: "enum", T: proto3.getEnumType(TrackSource), repeated: true }, {
  no: 7,
  name: "hidden",
  kind: "scalar",
  T: 8
  /* ScalarType.BOOL */
}, {
  no: 8,
  name: "recorder",
  kind: "scalar",
  T: 8
  /* ScalarType.BOOL */
}, {
  no: 10,
  name: "can_update_metadata",
  kind: "scalar",
  T: 8
  /* ScalarType.BOOL */
}, {
  no: 11,
  name: "agent",
  kind: "scalar",
  T: 8
  /* ScalarType.BOOL */
}]);
class ParticipantInfo extends Message {
  constructor(u2) {
    super(), this.sid = "", this.identity = "", this.state = ParticipantInfo_State.JOINING, this.tracks = [], this.metadata = "", this.joinedAt = protoInt64.zero, this.name = "", this.version = 0, this.region = "", this.isPublisher = false, this.kind = ParticipantInfo_Kind.STANDARD, proto3.util.initPartial(u2, this);
  }
  static fromBinary(u2, c) {
    return new ParticipantInfo().fromBinary(u2, c);
  }
  static fromJson(u2, c) {
    return new ParticipantInfo().fromJson(u2, c);
  }
  static fromJsonString(u2, c) {
    return new ParticipantInfo().fromJsonString(u2, c);
  }
  static equals(u2, c) {
    return proto3.util.equals(ParticipantInfo, u2, c);
  }
}
ParticipantInfo.runtime = proto3;
ParticipantInfo.typeName = "livekit.ParticipantInfo";
ParticipantInfo.fields = proto3.util.newFieldList(() => [{
  no: 1,
  name: "sid",
  kind: "scalar",
  T: 9
  /* ScalarType.STRING */
}, {
  no: 2,
  name: "identity",
  kind: "scalar",
  T: 9
  /* ScalarType.STRING */
}, { no: 3, name: "state", kind: "enum", T: proto3.getEnumType(ParticipantInfo_State) }, { no: 4, name: "tracks", kind: "message", T: TrackInfo, repeated: true }, {
  no: 5,
  name: "metadata",
  kind: "scalar",
  T: 9
  /* ScalarType.STRING */
}, {
  no: 6,
  name: "joined_at",
  kind: "scalar",
  T: 3
  /* ScalarType.INT64 */
}, {
  no: 9,
  name: "name",
  kind: "scalar",
  T: 9
  /* ScalarType.STRING */
}, {
  no: 10,
  name: "version",
  kind: "scalar",
  T: 13
  /* ScalarType.UINT32 */
}, { no: 11, name: "permission", kind: "message", T: ParticipantPermission }, {
  no: 12,
  name: "region",
  kind: "scalar",
  T: 9
  /* ScalarType.STRING */
}, {
  no: 13,
  name: "is_publisher",
  kind: "scalar",
  T: 8
  /* ScalarType.BOOL */
}, { no: 14, name: "kind", kind: "enum", T: proto3.getEnumType(ParticipantInfo_Kind) }]);
var ParticipantInfo_State;
(function(a420) {
  a420[a420.JOINING = 0] = "JOINING", a420[a420.JOINED = 1] = "JOINED", a420[a420.ACTIVE = 2] = "ACTIVE", a420[a420.DISCONNECTED = 3] = "DISCONNECTED";
})(ParticipantInfo_State || (ParticipantInfo_State = {}));
proto3.util.setEnumType(ParticipantInfo_State, "livekit.ParticipantInfo.State", [{ no: 0, name: "JOINING" }, { no: 1, name: "JOINED" }, { no: 2, name: "ACTIVE" }, { no: 3, name: "DISCONNECTED" }]);
var ParticipantInfo_Kind;
(function(a420) {
  a420[a420.STANDARD = 0] = "STANDARD", a420[a420.INGRESS = 1] = "INGRESS", a420[a420.EGRESS = 2] = "EGRESS", a420[a420.SIP = 3] = "SIP", a420[a420.AGENT = 4] = "AGENT";
})(ParticipantInfo_Kind || (ParticipantInfo_Kind = {}));
proto3.util.setEnumType(ParticipantInfo_Kind, "livekit.ParticipantInfo.Kind", [{ no: 0, name: "STANDARD" }, { no: 1, name: "INGRESS" }, { no: 2, name: "EGRESS" }, { no: 3, name: "SIP" }, { no: 4, name: "AGENT" }]);
class Encryption extends Message {
  constructor(u2) {
    super(), proto3.util.initPartial(u2, this);
  }
  static fromBinary(u2, c) {
    return new Encryption().fromBinary(u2, c);
  }
  static fromJson(u2, c) {
    return new Encryption().fromJson(u2, c);
  }
  static fromJsonString(u2, c) {
    return new Encryption().fromJsonString(u2, c);
  }
  static equals(u2, c) {
    return proto3.util.equals(Encryption, u2, c);
  }
}
Encryption.runtime = proto3;
Encryption.typeName = "livekit.Encryption";
Encryption.fields = proto3.util.newFieldList(() => []);
var Encryption_Type;
(function(a420) {
  a420[a420.NONE = 0] = "NONE", a420[a420.GCM = 1] = "GCM", a420[a420.CUSTOM = 2] = "CUSTOM";
})(Encryption_Type || (Encryption_Type = {}));
proto3.util.setEnumType(Encryption_Type, "livekit.Encryption.Type", [{ no: 0, name: "NONE" }, { no: 1, name: "GCM" }, { no: 2, name: "CUSTOM" }]);
class SimulcastCodecInfo extends Message {
  constructor(u2) {
    super(), this.mimeType = "", this.mid = "", this.cid = "", this.layers = [], proto3.util.initPartial(u2, this);
  }
  static fromBinary(u2, c) {
    return new SimulcastCodecInfo().fromBinary(u2, c);
  }
  static fromJson(u2, c) {
    return new SimulcastCodecInfo().fromJson(u2, c);
  }
  static fromJsonString(u2, c) {
    return new SimulcastCodecInfo().fromJsonString(u2, c);
  }
  static equals(u2, c) {
    return proto3.util.equals(SimulcastCodecInfo, u2, c);
  }
}
SimulcastCodecInfo.runtime = proto3;
SimulcastCodecInfo.typeName = "livekit.SimulcastCodecInfo";
SimulcastCodecInfo.fields = proto3.util.newFieldList(() => [{
  no: 1,
  name: "mime_type",
  kind: "scalar",
  T: 9
  /* ScalarType.STRING */
}, {
  no: 2,
  name: "mid",
  kind: "scalar",
  T: 9
  /* ScalarType.STRING */
}, {
  no: 3,
  name: "cid",
  kind: "scalar",
  T: 9
  /* ScalarType.STRING */
}, { no: 4, name: "layers", kind: "message", T: VideoLayer, repeated: true }]);
class TrackInfo extends Message {
  constructor(u2) {
    super(), this.sid = "", this.type = TrackType.AUDIO, this.name = "", this.muted = false, this.width = 0, this.height = 0, this.simulcast = false, this.disableDtx = false, this.source = TrackSource.UNKNOWN, this.layers = [], this.mimeType = "", this.mid = "", this.codecs = [], this.stereo = false, this.disableRed = false, this.encryption = Encryption_Type.NONE, this.stream = "", proto3.util.initPartial(u2, this);
  }
  static fromBinary(u2, c) {
    return new TrackInfo().fromBinary(u2, c);
  }
  static fromJson(u2, c) {
    return new TrackInfo().fromJson(u2, c);
  }
  static fromJsonString(u2, c) {
    return new TrackInfo().fromJsonString(u2, c);
  }
  static equals(u2, c) {
    return proto3.util.equals(TrackInfo, u2, c);
  }
}
TrackInfo.runtime = proto3;
TrackInfo.typeName = "livekit.TrackInfo";
TrackInfo.fields = proto3.util.newFieldList(() => [{
  no: 1,
  name: "sid",
  kind: "scalar",
  T: 9
  /* ScalarType.STRING */
}, { no: 2, name: "type", kind: "enum", T: proto3.getEnumType(TrackType) }, {
  no: 3,
  name: "name",
  kind: "scalar",
  T: 9
  /* ScalarType.STRING */
}, {
  no: 4,
  name: "muted",
  kind: "scalar",
  T: 8
  /* ScalarType.BOOL */
}, {
  no: 5,
  name: "width",
  kind: "scalar",
  T: 13
  /* ScalarType.UINT32 */
}, {
  no: 6,
  name: "height",
  kind: "scalar",
  T: 13
  /* ScalarType.UINT32 */
}, {
  no: 7,
  name: "simulcast",
  kind: "scalar",
  T: 8
  /* ScalarType.BOOL */
}, {
  no: 8,
  name: "disable_dtx",
  kind: "scalar",
  T: 8
  /* ScalarType.BOOL */
}, { no: 9, name: "source", kind: "enum", T: proto3.getEnumType(TrackSource) }, { no: 10, name: "layers", kind: "message", T: VideoLayer, repeated: true }, {
  no: 11,
  name: "mime_type",
  kind: "scalar",
  T: 9
  /* ScalarType.STRING */
}, {
  no: 12,
  name: "mid",
  kind: "scalar",
  T: 9
  /* ScalarType.STRING */
}, { no: 13, name: "codecs", kind: "message", T: SimulcastCodecInfo, repeated: true }, {
  no: 14,
  name: "stereo",
  kind: "scalar",
  T: 8
  /* ScalarType.BOOL */
}, {
  no: 15,
  name: "disable_red",
  kind: "scalar",
  T: 8
  /* ScalarType.BOOL */
}, { no: 16, name: "encryption", kind: "enum", T: proto3.getEnumType(Encryption_Type) }, {
  no: 17,
  name: "stream",
  kind: "scalar",
  T: 9
  /* ScalarType.STRING */
}, { no: 18, name: "version", kind: "message", T: TimedVersion }]);
class VideoLayer extends Message {
  constructor(u2) {
    super(), this.quality = VideoQuality$1.LOW, this.width = 0, this.height = 0, this.bitrate = 0, this.ssrc = 0, proto3.util.initPartial(u2, this);
  }
  static fromBinary(u2, c) {
    return new VideoLayer().fromBinary(u2, c);
  }
  static fromJson(u2, c) {
    return new VideoLayer().fromJson(u2, c);
  }
  static fromJsonString(u2, c) {
    return new VideoLayer().fromJsonString(u2, c);
  }
  static equals(u2, c) {
    return proto3.util.equals(VideoLayer, u2, c);
  }
}
VideoLayer.runtime = proto3;
VideoLayer.typeName = "livekit.VideoLayer";
VideoLayer.fields = proto3.util.newFieldList(() => [{ no: 1, name: "quality", kind: "enum", T: proto3.getEnumType(VideoQuality$1) }, {
  no: 2,
  name: "width",
  kind: "scalar",
  T: 13
  /* ScalarType.UINT32 */
}, {
  no: 3,
  name: "height",
  kind: "scalar",
  T: 13
  /* ScalarType.UINT32 */
}, {
  no: 4,
  name: "bitrate",
  kind: "scalar",
  T: 13
  /* ScalarType.UINT32 */
}, {
  no: 5,
  name: "ssrc",
  kind: "scalar",
  T: 13
  /* ScalarType.UINT32 */
}]);
class DataPacket extends Message {
  constructor(u2) {
    super(), this.kind = DataPacket_Kind.RELIABLE, this.value = { case: void 0 }, proto3.util.initPartial(u2, this);
  }
  static fromBinary(u2, c) {
    return new DataPacket().fromBinary(u2, c);
  }
  static fromJson(u2, c) {
    return new DataPacket().fromJson(u2, c);
  }
  static fromJsonString(u2, c) {
    return new DataPacket().fromJsonString(u2, c);
  }
  static equals(u2, c) {
    return proto3.util.equals(DataPacket, u2, c);
  }
}
DataPacket.runtime = proto3;
DataPacket.typeName = "livekit.DataPacket";
DataPacket.fields = proto3.util.newFieldList(() => [{ no: 1, name: "kind", kind: "enum", T: proto3.getEnumType(DataPacket_Kind) }, { no: 2, name: "user", kind: "message", T: UserPacket, oneof: "value" }, { no: 3, name: "speaker", kind: "message", T: ActiveSpeakerUpdate, oneof: "value" }]);
var DataPacket_Kind;
(function(a420) {
  a420[a420.RELIABLE = 0] = "RELIABLE", a420[a420.LOSSY = 1] = "LOSSY";
})(DataPacket_Kind || (DataPacket_Kind = {}));
proto3.util.setEnumType(DataPacket_Kind, "livekit.DataPacket.Kind", [{ no: 0, name: "RELIABLE" }, { no: 1, name: "LOSSY" }]);
class ActiveSpeakerUpdate extends Message {
  constructor(u2) {
    super(), this.speakers = [], proto3.util.initPartial(u2, this);
  }
  static fromBinary(u2, c) {
    return new ActiveSpeakerUpdate().fromBinary(u2, c);
  }
  static fromJson(u2, c) {
    return new ActiveSpeakerUpdate().fromJson(u2, c);
  }
  static fromJsonString(u2, c) {
    return new ActiveSpeakerUpdate().fromJsonString(u2, c);
  }
  static equals(u2, c) {
    return proto3.util.equals(ActiveSpeakerUpdate, u2, c);
  }
}
ActiveSpeakerUpdate.runtime = proto3;
ActiveSpeakerUpdate.typeName = "livekit.ActiveSpeakerUpdate";
ActiveSpeakerUpdate.fields = proto3.util.newFieldList(() => [{ no: 1, name: "speakers", kind: "message", T: SpeakerInfo, repeated: true }]);
class SpeakerInfo extends Message {
  constructor(u2) {
    super(), this.sid = "", this.level = 0, this.active = false, proto3.util.initPartial(u2, this);
  }
  static fromBinary(u2, c) {
    return new SpeakerInfo().fromBinary(u2, c);
  }
  static fromJson(u2, c) {
    return new SpeakerInfo().fromJson(u2, c);
  }
  static fromJsonString(u2, c) {
    return new SpeakerInfo().fromJsonString(u2, c);
  }
  static equals(u2, c) {
    return proto3.util.equals(SpeakerInfo, u2, c);
  }
}
SpeakerInfo.runtime = proto3;
SpeakerInfo.typeName = "livekit.SpeakerInfo";
SpeakerInfo.fields = proto3.util.newFieldList(() => [{
  no: 1,
  name: "sid",
  kind: "scalar",
  T: 9
  /* ScalarType.STRING */
}, {
  no: 2,
  name: "level",
  kind: "scalar",
  T: 2
  /* ScalarType.FLOAT */
}, {
  no: 3,
  name: "active",
  kind: "scalar",
  T: 8
  /* ScalarType.BOOL */
}]);
class UserPacket extends Message {
  constructor(u2) {
    super(), this.participantSid = "", this.participantIdentity = "", this.payload = new Uint8Array(0), this.destinationSids = [], this.destinationIdentities = [], proto3.util.initPartial(u2, this);
  }
  static fromBinary(u2, c) {
    return new UserPacket().fromBinary(u2, c);
  }
  static fromJson(u2, c) {
    return new UserPacket().fromJson(u2, c);
  }
  static fromJsonString(u2, c) {
    return new UserPacket().fromJsonString(u2, c);
  }
  static equals(u2, c) {
    return proto3.util.equals(UserPacket, u2, c);
  }
}
UserPacket.runtime = proto3;
UserPacket.typeName = "livekit.UserPacket";
UserPacket.fields = proto3.util.newFieldList(() => [{
  no: 1,
  name: "participant_sid",
  kind: "scalar",
  T: 9
  /* ScalarType.STRING */
}, {
  no: 5,
  name: "participant_identity",
  kind: "scalar",
  T: 9
  /* ScalarType.STRING */
}, {
  no: 2,
  name: "payload",
  kind: "scalar",
  T: 12
  /* ScalarType.BYTES */
}, { no: 3, name: "destination_sids", kind: "scalar", T: 9, repeated: true }, { no: 6, name: "destination_identities", kind: "scalar", T: 9, repeated: true }, { no: 4, name: "topic", kind: "scalar", T: 9, opt: true }]);
class ParticipantTracks extends Message {
  constructor(u2) {
    super(), this.participantSid = "", this.trackSids = [], proto3.util.initPartial(u2, this);
  }
  static fromBinary(u2, c) {
    return new ParticipantTracks().fromBinary(u2, c);
  }
  static fromJson(u2, c) {
    return new ParticipantTracks().fromJson(u2, c);
  }
  static fromJsonString(u2, c) {
    return new ParticipantTracks().fromJsonString(u2, c);
  }
  static equals(u2, c) {
    return proto3.util.equals(ParticipantTracks, u2, c);
  }
}
ParticipantTracks.runtime = proto3;
ParticipantTracks.typeName = "livekit.ParticipantTracks";
ParticipantTracks.fields = proto3.util.newFieldList(() => [{
  no: 1,
  name: "participant_sid",
  kind: "scalar",
  T: 9
  /* ScalarType.STRING */
}, { no: 2, name: "track_sids", kind: "scalar", T: 9, repeated: true }]);
class ServerInfo extends Message {
  constructor(u2) {
    super(), this.edition = ServerInfo_Edition.Standard, this.version = "", this.protocol = 0, this.region = "", this.nodeId = "", this.debugInfo = "", proto3.util.initPartial(u2, this);
  }
  static fromBinary(u2, c) {
    return new ServerInfo().fromBinary(u2, c);
  }
  static fromJson(u2, c) {
    return new ServerInfo().fromJson(u2, c);
  }
  static fromJsonString(u2, c) {
    return new ServerInfo().fromJsonString(u2, c);
  }
  static equals(u2, c) {
    return proto3.util.equals(ServerInfo, u2, c);
  }
}
ServerInfo.runtime = proto3;
ServerInfo.typeName = "livekit.ServerInfo";
ServerInfo.fields = proto3.util.newFieldList(() => [{ no: 1, name: "edition", kind: "enum", T: proto3.getEnumType(ServerInfo_Edition) }, {
  no: 2,
  name: "version",
  kind: "scalar",
  T: 9
  /* ScalarType.STRING */
}, {
  no: 3,
  name: "protocol",
  kind: "scalar",
  T: 5
  /* ScalarType.INT32 */
}, {
  no: 4,
  name: "region",
  kind: "scalar",
  T: 9
  /* ScalarType.STRING */
}, {
  no: 5,
  name: "node_id",
  kind: "scalar",
  T: 9
  /* ScalarType.STRING */
}, {
  no: 6,
  name: "debug_info",
  kind: "scalar",
  T: 9
  /* ScalarType.STRING */
}]);
var ServerInfo_Edition;
(function(a420) {
  a420[a420.Standard = 0] = "Standard", a420[a420.Cloud = 1] = "Cloud";
})(ServerInfo_Edition || (ServerInfo_Edition = {}));
proto3.util.setEnumType(ServerInfo_Edition, "livekit.ServerInfo.Edition", [{ no: 0, name: "Standard" }, { no: 1, name: "Cloud" }]);
class ClientInfo extends Message {
  constructor(u2) {
    super(), this.sdk = ClientInfo_SDK.UNKNOWN, this.version = "", this.protocol = 0, this.os = "", this.osVersion = "", this.deviceModel = "", this.browser = "", this.browserVersion = "", this.address = "", this.network = "", proto3.util.initPartial(u2, this);
  }
  static fromBinary(u2, c) {
    return new ClientInfo().fromBinary(u2, c);
  }
  static fromJson(u2, c) {
    return new ClientInfo().fromJson(u2, c);
  }
  static fromJsonString(u2, c) {
    return new ClientInfo().fromJsonString(u2, c);
  }
  static equals(u2, c) {
    return proto3.util.equals(ClientInfo, u2, c);
  }
}
ClientInfo.runtime = proto3;
ClientInfo.typeName = "livekit.ClientInfo";
ClientInfo.fields = proto3.util.newFieldList(() => [{ no: 1, name: "sdk", kind: "enum", T: proto3.getEnumType(ClientInfo_SDK) }, {
  no: 2,
  name: "version",
  kind: "scalar",
  T: 9
  /* ScalarType.STRING */
}, {
  no: 3,
  name: "protocol",
  kind: "scalar",
  T: 5
  /* ScalarType.INT32 */
}, {
  no: 4,
  name: "os",
  kind: "scalar",
  T: 9
  /* ScalarType.STRING */
}, {
  no: 5,
  name: "os_version",
  kind: "scalar",
  T: 9
  /* ScalarType.STRING */
}, {
  no: 6,
  name: "device_model",
  kind: "scalar",
  T: 9
  /* ScalarType.STRING */
}, {
  no: 7,
  name: "browser",
  kind: "scalar",
  T: 9
  /* ScalarType.STRING */
}, {
  no: 8,
  name: "browser_version",
  kind: "scalar",
  T: 9
  /* ScalarType.STRING */
}, {
  no: 9,
  name: "address",
  kind: "scalar",
  T: 9
  /* ScalarType.STRING */
}, {
  no: 10,
  name: "network",
  kind: "scalar",
  T: 9
  /* ScalarType.STRING */
}]);
var ClientInfo_SDK;
(function(a420) {
  a420[a420.UNKNOWN = 0] = "UNKNOWN", a420[a420.JS = 1] = "JS", a420[a420.SWIFT = 2] = "SWIFT", a420[a420.ANDROID = 3] = "ANDROID", a420[a420.FLUTTER = 4] = "FLUTTER", a420[a420.GO = 5] = "GO", a420[a420.UNITY = 6] = "UNITY", a420[a420.REACT_NATIVE = 7] = "REACT_NATIVE", a420[a420.RUST = 8] = "RUST", a420[a420.PYTHON = 9] = "PYTHON", a420[a420.CPP = 10] = "CPP";
})(ClientInfo_SDK || (ClientInfo_SDK = {}));
proto3.util.setEnumType(ClientInfo_SDK, "livekit.ClientInfo.SDK", [{ no: 0, name: "UNKNOWN" }, { no: 1, name: "JS" }, { no: 2, name: "SWIFT" }, { no: 3, name: "ANDROID" }, { no: 4, name: "FLUTTER" }, { no: 5, name: "GO" }, { no: 6, name: "UNITY" }, { no: 7, name: "REACT_NATIVE" }, { no: 8, name: "RUST" }, { no: 9, name: "PYTHON" }, { no: 10, name: "CPP" }]);
class ClientConfiguration extends Message {
  constructor(u2) {
    super(), this.resumeConnection = ClientConfigSetting.UNSET, this.forceRelay = ClientConfigSetting.UNSET, proto3.util.initPartial(u2, this);
  }
  static fromBinary(u2, c) {
    return new ClientConfiguration().fromBinary(u2, c);
  }
  static fromJson(u2, c) {
    return new ClientConfiguration().fromJson(u2, c);
  }
  static fromJsonString(u2, c) {
    return new ClientConfiguration().fromJsonString(u2, c);
  }
  static equals(u2, c) {
    return proto3.util.equals(ClientConfiguration, u2, c);
  }
}
ClientConfiguration.runtime = proto3;
ClientConfiguration.typeName = "livekit.ClientConfiguration";
ClientConfiguration.fields = proto3.util.newFieldList(() => [{ no: 1, name: "video", kind: "message", T: VideoConfiguration }, { no: 2, name: "screen", kind: "message", T: VideoConfiguration }, { no: 3, name: "resume_connection", kind: "enum", T: proto3.getEnumType(ClientConfigSetting) }, { no: 4, name: "disabled_codecs", kind: "message", T: DisabledCodecs }, { no: 5, name: "force_relay", kind: "enum", T: proto3.getEnumType(ClientConfigSetting) }]);
class VideoConfiguration extends Message {
  constructor(u2) {
    super(), this.hardwareEncoder = ClientConfigSetting.UNSET, proto3.util.initPartial(u2, this);
  }
  static fromBinary(u2, c) {
    return new VideoConfiguration().fromBinary(u2, c);
  }
  static fromJson(u2, c) {
    return new VideoConfiguration().fromJson(u2, c);
  }
  static fromJsonString(u2, c) {
    return new VideoConfiguration().fromJsonString(u2, c);
  }
  static equals(u2, c) {
    return proto3.util.equals(VideoConfiguration, u2, c);
  }
}
VideoConfiguration.runtime = proto3;
VideoConfiguration.typeName = "livekit.VideoConfiguration";
VideoConfiguration.fields = proto3.util.newFieldList(() => [{ no: 1, name: "hardware_encoder", kind: "enum", T: proto3.getEnumType(ClientConfigSetting) }]);
class DisabledCodecs extends Message {
  constructor(u2) {
    super(), this.codecs = [], this.publish = [], proto3.util.initPartial(u2, this);
  }
  static fromBinary(u2, c) {
    return new DisabledCodecs().fromBinary(u2, c);
  }
  static fromJson(u2, c) {
    return new DisabledCodecs().fromJson(u2, c);
  }
  static fromJsonString(u2, c) {
    return new DisabledCodecs().fromJsonString(u2, c);
  }
  static equals(u2, c) {
    return proto3.util.equals(DisabledCodecs, u2, c);
  }
}
DisabledCodecs.runtime = proto3;
DisabledCodecs.typeName = "livekit.DisabledCodecs";
DisabledCodecs.fields = proto3.util.newFieldList(() => [{ no: 1, name: "codecs", kind: "message", T: Codec, repeated: true }, { no: 2, name: "publish", kind: "message", T: Codec, repeated: true }]);
class RTPDrift extends Message {
  constructor(u2) {
    super(), this.duration = 0, this.startTimestamp = protoInt64.zero, this.endTimestamp = protoInt64.zero, this.rtpClockTicks = protoInt64.zero, this.driftSamples = protoInt64.zero, this.driftMs = 0, this.clockRate = 0, proto3.util.initPartial(u2, this);
  }
  static fromBinary(u2, c) {
    return new RTPDrift().fromBinary(u2, c);
  }
  static fromJson(u2, c) {
    return new RTPDrift().fromJson(u2, c);
  }
  static fromJsonString(u2, c) {
    return new RTPDrift().fromJsonString(u2, c);
  }
  static equals(u2, c) {
    return proto3.util.equals(RTPDrift, u2, c);
  }
}
RTPDrift.runtime = proto3;
RTPDrift.typeName = "livekit.RTPDrift";
RTPDrift.fields = proto3.util.newFieldList(() => [{ no: 1, name: "start_time", kind: "message", T: Timestamp }, { no: 2, name: "end_time", kind: "message", T: Timestamp }, {
  no: 3,
  name: "duration",
  kind: "scalar",
  T: 1
  /* ScalarType.DOUBLE */
}, {
  no: 4,
  name: "start_timestamp",
  kind: "scalar",
  T: 4
  /* ScalarType.UINT64 */
}, {
  no: 5,
  name: "end_timestamp",
  kind: "scalar",
  T: 4
  /* ScalarType.UINT64 */
}, {
  no: 6,
  name: "rtp_clock_ticks",
  kind: "scalar",
  T: 4
  /* ScalarType.UINT64 */
}, {
  no: 7,
  name: "drift_samples",
  kind: "scalar",
  T: 3
  /* ScalarType.INT64 */
}, {
  no: 8,
  name: "drift_ms",
  kind: "scalar",
  T: 1
  /* ScalarType.DOUBLE */
}, {
  no: 9,
  name: "clock_rate",
  kind: "scalar",
  T: 1
  /* ScalarType.DOUBLE */
}]);
class RTPStats extends Message {
  constructor(u2) {
    super(), this.duration = 0, this.packets = 0, this.packetRate = 0, this.bytes = protoInt64.zero, this.headerBytes = protoInt64.zero, this.bitrate = 0, this.packetsLost = 0, this.packetLossRate = 0, this.packetLossPercentage = 0, this.packetsDuplicate = 0, this.packetDuplicateRate = 0, this.bytesDuplicate = protoInt64.zero, this.headerBytesDuplicate = protoInt64.zero, this.bitrateDuplicate = 0, this.packetsPadding = 0, this.packetPaddingRate = 0, this.bytesPadding = protoInt64.zero, this.headerBytesPadding = protoInt64.zero, this.bitratePadding = 0, this.packetsOutOfOrder = 0, this.frames = 0, this.frameRate = 0, this.jitterCurrent = 0, this.jitterMax = 0, this.gapHistogram = {}, this.nacks = 0, this.nackAcks = 0, this.nackMisses = 0, this.nackRepeated = 0, this.plis = 0, this.firs = 0, this.rttCurrent = 0, this.rttMax = 0, this.keyFrames = 0, this.layerLockPlis = 0, proto3.util.initPartial(u2, this);
  }
  static fromBinary(u2, c) {
    return new RTPStats().fromBinary(u2, c);
  }
  static fromJson(u2, c) {
    return new RTPStats().fromJson(u2, c);
  }
  static fromJsonString(u2, c) {
    return new RTPStats().fromJsonString(u2, c);
  }
  static equals(u2, c) {
    return proto3.util.equals(RTPStats, u2, c);
  }
}
RTPStats.runtime = proto3;
RTPStats.typeName = "livekit.RTPStats";
RTPStats.fields = proto3.util.newFieldList(() => [{ no: 1, name: "start_time", kind: "message", T: Timestamp }, { no: 2, name: "end_time", kind: "message", T: Timestamp }, {
  no: 3,
  name: "duration",
  kind: "scalar",
  T: 1
  /* ScalarType.DOUBLE */
}, {
  no: 4,
  name: "packets",
  kind: "scalar",
  T: 13
  /* ScalarType.UINT32 */
}, {
  no: 5,
  name: "packet_rate",
  kind: "scalar",
  T: 1
  /* ScalarType.DOUBLE */
}, {
  no: 6,
  name: "bytes",
  kind: "scalar",
  T: 4
  /* ScalarType.UINT64 */
}, {
  no: 39,
  name: "header_bytes",
  kind: "scalar",
  T: 4
  /* ScalarType.UINT64 */
}, {
  no: 7,
  name: "bitrate",
  kind: "scalar",
  T: 1
  /* ScalarType.DOUBLE */
}, {
  no: 8,
  name: "packets_lost",
  kind: "scalar",
  T: 13
  /* ScalarType.UINT32 */
}, {
  no: 9,
  name: "packet_loss_rate",
  kind: "scalar",
  T: 1
  /* ScalarType.DOUBLE */
}, {
  no: 10,
  name: "packet_loss_percentage",
  kind: "scalar",
  T: 2
  /* ScalarType.FLOAT */
}, {
  no: 11,
  name: "packets_duplicate",
  kind: "scalar",
  T: 13
  /* ScalarType.UINT32 */
}, {
  no: 12,
  name: "packet_duplicate_rate",
  kind: "scalar",
  T: 1
  /* ScalarType.DOUBLE */
}, {
  no: 13,
  name: "bytes_duplicate",
  kind: "scalar",
  T: 4
  /* ScalarType.UINT64 */
}, {
  no: 40,
  name: "header_bytes_duplicate",
  kind: "scalar",
  T: 4
  /* ScalarType.UINT64 */
}, {
  no: 14,
  name: "bitrate_duplicate",
  kind: "scalar",
  T: 1
  /* ScalarType.DOUBLE */
}, {
  no: 15,
  name: "packets_padding",
  kind: "scalar",
  T: 13
  /* ScalarType.UINT32 */
}, {
  no: 16,
  name: "packet_padding_rate",
  kind: "scalar",
  T: 1
  /* ScalarType.DOUBLE */
}, {
  no: 17,
  name: "bytes_padding",
  kind: "scalar",
  T: 4
  /* ScalarType.UINT64 */
}, {
  no: 41,
  name: "header_bytes_padding",
  kind: "scalar",
  T: 4
  /* ScalarType.UINT64 */
}, {
  no: 18,
  name: "bitrate_padding",
  kind: "scalar",
  T: 1
  /* ScalarType.DOUBLE */
}, {
  no: 19,
  name: "packets_out_of_order",
  kind: "scalar",
  T: 13
  /* ScalarType.UINT32 */
}, {
  no: 20,
  name: "frames",
  kind: "scalar",
  T: 13
  /* ScalarType.UINT32 */
}, {
  no: 21,
  name: "frame_rate",
  kind: "scalar",
  T: 1
  /* ScalarType.DOUBLE */
}, {
  no: 22,
  name: "jitter_current",
  kind: "scalar",
  T: 1
  /* ScalarType.DOUBLE */
}, {
  no: 23,
  name: "jitter_max",
  kind: "scalar",
  T: 1
  /* ScalarType.DOUBLE */
}, { no: 24, name: "gap_histogram", kind: "map", K: 5, V: {
  kind: "scalar",
  T: 13
  /* ScalarType.UINT32 */
} }, {
  no: 25,
  name: "nacks",
  kind: "scalar",
  T: 13
  /* ScalarType.UINT32 */
}, {
  no: 37,
  name: "nack_acks",
  kind: "scalar",
  T: 13
  /* ScalarType.UINT32 */
}, {
  no: 26,
  name: "nack_misses",
  kind: "scalar",
  T: 13
  /* ScalarType.UINT32 */
}, {
  no: 38,
  name: "nack_repeated",
  kind: "scalar",
  T: 13
  /* ScalarType.UINT32 */
}, {
  no: 27,
  name: "plis",
  kind: "scalar",
  T: 13
  /* ScalarType.UINT32 */
}, { no: 28, name: "last_pli", kind: "message", T: Timestamp }, {
  no: 29,
  name: "firs",
  kind: "scalar",
  T: 13
  /* ScalarType.UINT32 */
}, { no: 30, name: "last_fir", kind: "message", T: Timestamp }, {
  no: 31,
  name: "rtt_current",
  kind: "scalar",
  T: 13
  /* ScalarType.UINT32 */
}, {
  no: 32,
  name: "rtt_max",
  kind: "scalar",
  T: 13
  /* ScalarType.UINT32 */
}, {
  no: 33,
  name: "key_frames",
  kind: "scalar",
  T: 13
  /* ScalarType.UINT32 */
}, { no: 34, name: "last_key_frame", kind: "message", T: Timestamp }, {
  no: 35,
  name: "layer_lock_plis",
  kind: "scalar",
  T: 13
  /* ScalarType.UINT32 */
}, { no: 36, name: "last_layer_lock_pli", kind: "message", T: Timestamp }, { no: 44, name: "packet_drift", kind: "message", T: RTPDrift }, { no: 45, name: "report_drift", kind: "message", T: RTPDrift }]);
class TimedVersion extends Message {
  constructor(u2) {
    super(), this.unixMicro = protoInt64.zero, this.ticks = 0, proto3.util.initPartial(u2, this);
  }
  static fromBinary(u2, c) {
    return new TimedVersion().fromBinary(u2, c);
  }
  static fromJson(u2, c) {
    return new TimedVersion().fromJson(u2, c);
  }
  static fromJsonString(u2, c) {
    return new TimedVersion().fromJsonString(u2, c);
  }
  static equals(u2, c) {
    return proto3.util.equals(TimedVersion, u2, c);
  }
}
TimedVersion.runtime = proto3;
TimedVersion.typeName = "livekit.TimedVersion";
TimedVersion.fields = proto3.util.newFieldList(() => [{
  no: 1,
  name: "unix_micro",
  kind: "scalar",
  T: 3
  /* ScalarType.INT64 */
}, {
  no: 2,
  name: "ticks",
  kind: "scalar",
  T: 5
  /* ScalarType.INT32 */
}]);
const maxRetryDelay = 7e3, DEFAULT_RETRY_DELAYS_IN_MS = [0, 300, 2 * 2 * 300, 3 * 3 * 300, 4 * 4 * 300, maxRetryDelay, maxRetryDelay, maxRetryDelay, maxRetryDelay, maxRetryDelay];
class DefaultReconnectPolicy {
  constructor(u2) {
    this._retryDelays = u2 !== void 0 ? [...u2] : DEFAULT_RETRY_DELAYS_IN_MS;
  }
  nextRetryDelayInMs(u2) {
    if (u2.retryCount >= this._retryDelays.length)
      return null;
    const c = this._retryDelays[u2.retryCount];
    return u2.retryCount <= 1 ? c : c + Math.random() * 1e3;
  }
}
function __awaiter(a420, u2, c, l2) {
  function v2(p2) {
    return p2 instanceof c ? p2 : new c(function(_) {
      _(p2);
    });
  }
  return new (c || (c = Promise))(function(p2, _) {
    function I2(F2) {
      try {
        $(l2.next(F2));
      } catch (H2) {
        _(H2);
      }
    }
    function P2(F2) {
      try {
        $(l2.throw(F2));
      } catch (H2) {
        _(H2);
      }
    }
    function $(F2) {
      F2.done ? p2(F2.value) : v2(F2.value).then(I2, P2);
    }
    $((l2 = l2.apply(a420, u2 || [])).next());
  });
}
function __values(a420) {
  var u2 = typeof Symbol == "function" && Symbol.iterator, c = u2 && a420[u2], l2 = 0;
  if (c)
    return c.call(a420);
  if (a420 && typeof a420.length == "number")
    return { next: function() {
      return a420 && l2 >= a420.length && (a420 = void 0), { value: a420 && a420[l2++], done: !a420 };
    } };
  throw new TypeError(u2 ? "Object is not iterable." : "Symbol.iterator is not defined.");
}
function __asyncValues(a420) {
  if (!Symbol.asyncIterator)
    throw new TypeError("Symbol.asyncIterator is not defined.");
  var u2 = a420[Symbol.asyncIterator], c;
  return u2 ? u2.call(a420) : (a420 = typeof __values == "function" ? __values(a420) : a420[Symbol.iterator](), c = {}, l2("next"), l2("throw"), l2("return"), c[Symbol.asyncIterator] = function() {
    return this;
  }, c);
  function l2(p2) {
    c[p2] = a420[p2] && function(_) {
      return new Promise(function(I2, P2) {
        _ = a420[p2](_), v2(I2, P2, _.done, _.value);
      });
    };
  }
  function v2(p2, _, I2, P2) {
    Promise.resolve(P2).then(function($) {
      p2({ value: $, done: I2 });
    }, _);
  }
}
typeof SuppressedError == "function" && SuppressedError;
var events = { exports: {} }, R = typeof Reflect == "object" ? Reflect : null, ReflectApply = R && typeof R.apply == "function" ? R.apply : function a401(u2, c, l2) {
  return Function.prototype.apply.call(u2, c, l2);
}, ReflectOwnKeys;
R && typeof R.ownKeys == "function" ? ReflectOwnKeys = R.ownKeys : Object.getOwnPropertySymbols ? ReflectOwnKeys = function(u2) {
  return Object.getOwnPropertyNames(u2).concat(Object.getOwnPropertySymbols(u2));
} : ReflectOwnKeys = function(u2) {
  return Object.getOwnPropertyNames(u2);
};
function ProcessEmitWarning(a420) {
  console && console.warn && console.warn(a420);
}
var NumberIsNaN = Number.isNaN || function a402(u2) {
  return u2 !== u2;
};
function EventEmitter() {
  EventEmitter.init.call(this);
}
events.exports = EventEmitter;
events.exports.once = once;
EventEmitter.EventEmitter = EventEmitter;
EventEmitter.prototype._events = void 0;
EventEmitter.prototype._eventsCount = 0;
EventEmitter.prototype._maxListeners = void 0;
var defaultMaxListeners = 10;
function checkListener(a420) {
  if (typeof a420 != "function")
    throw new TypeError('The "listener" argument must be of type Function. Received type ' + typeof a420);
}
Object.defineProperty(EventEmitter, "defaultMaxListeners", { enumerable: true, get: function() {
  return defaultMaxListeners;
}, set: function(a420) {
  if (typeof a420 != "number" || a420 < 0 || NumberIsNaN(a420))
    throw new RangeError('The value of "defaultMaxListeners" is out of range. It must be a non-negative number. Received ' + a420 + ".");
  defaultMaxListeners = a420;
} });
EventEmitter.init = function() {
  (this._events === void 0 || this._events === Object.getPrototypeOf(this)._events) && (this._events = /* @__PURE__ */ Object.create(null), this._eventsCount = 0), this._maxListeners = this._maxListeners || void 0;
};
EventEmitter.prototype.setMaxListeners = function a403(u2) {
  if (typeof u2 != "number" || u2 < 0 || NumberIsNaN(u2))
    throw new RangeError('The value of "n" is out of range. It must be a non-negative number. Received ' + u2 + ".");
  return this._maxListeners = u2, this;
};
function _getMaxListeners(a420) {
  return a420._maxListeners === void 0 ? EventEmitter.defaultMaxListeners : a420._maxListeners;
}
EventEmitter.prototype.getMaxListeners = function a404() {
  return _getMaxListeners(this);
};
EventEmitter.prototype.emit = function a405(u2) {
  for (var c = [], l2 = 1; l2 < arguments.length; l2++)
    c.push(arguments[l2]);
  var v2 = u2 === "error", p2 = this._events;
  if (p2 !== void 0)
    v2 = v2 && p2.error === void 0;
  else if (!v2)
    return false;
  if (v2) {
    var _;
    if (c.length > 0 && (_ = c[0]), _ instanceof Error)
      throw _;
    var I2 = new Error("Unhandled error." + (_ ? " (" + _.message + ")" : ""));
    throw I2.context = _, I2;
  }
  var P2 = p2[u2];
  if (P2 === void 0)
    return false;
  if (typeof P2 == "function")
    ReflectApply(P2, this, c);
  else
    for (var $ = P2.length, F2 = arrayClone(P2, $), l2 = 0; l2 < $; ++l2)
      ReflectApply(F2[l2], this, c);
  return true;
};
function _addListener(a420, u2, c, l2) {
  var v2, p2, _;
  if (checkListener(c), p2 = a420._events, p2 === void 0 ? (p2 = a420._events = /* @__PURE__ */ Object.create(null), a420._eventsCount = 0) : (p2.newListener !== void 0 && (a420.emit("newListener", u2, c.listener ? c.listener : c), p2 = a420._events), _ = p2[u2]), _ === void 0)
    _ = p2[u2] = c, ++a420._eventsCount;
  else if (typeof _ == "function" ? _ = p2[u2] = l2 ? [c, _] : [_, c] : l2 ? _.unshift(c) : _.push(c), v2 = _getMaxListeners(a420), v2 > 0 && _.length > v2 && !_.warned) {
    _.warned = true;
    var I2 = new Error("Possible EventEmitter memory leak detected. " + _.length + " " + String(u2) + " listeners added. Use emitter.setMaxListeners() to increase limit");
    I2.name = "MaxListenersExceededWarning", I2.emitter = a420, I2.type = u2, I2.count = _.length, ProcessEmitWarning(I2);
  }
  return a420;
}
EventEmitter.prototype.addListener = function a406(u2, c) {
  return _addListener(this, u2, c, false);
};
EventEmitter.prototype.on = EventEmitter.prototype.addListener;
EventEmitter.prototype.prependListener = function a407(u2, c) {
  return _addListener(this, u2, c, true);
};
function onceWrapper() {
  if (!this.fired)
    return this.target.removeListener(this.type, this.wrapFn), this.fired = true, arguments.length === 0 ? this.listener.call(this.target) : this.listener.apply(this.target, arguments);
}
function _onceWrap(a420, u2, c) {
  var l2 = { fired: false, wrapFn: void 0, target: a420, type: u2, listener: c }, v2 = onceWrapper.bind(l2);
  return v2.listener = c, l2.wrapFn = v2, v2;
}
EventEmitter.prototype.once = function a408(u2, c) {
  return checkListener(c), this.on(u2, _onceWrap(this, u2, c)), this;
};
EventEmitter.prototype.prependOnceListener = function a409(u2, c) {
  return checkListener(c), this.prependListener(u2, _onceWrap(this, u2, c)), this;
};
EventEmitter.prototype.removeListener = function a410(u2, c) {
  var l2, v2, p2, _, I2;
  if (checkListener(c), v2 = this._events, v2 === void 0)
    return this;
  if (l2 = v2[u2], l2 === void 0)
    return this;
  if (l2 === c || l2.listener === c)
    --this._eventsCount === 0 ? this._events = /* @__PURE__ */ Object.create(null) : (delete v2[u2], v2.removeListener && this.emit("removeListener", u2, l2.listener || c));
  else if (typeof l2 != "function") {
    for (p2 = -1, _ = l2.length - 1; _ >= 0; _--)
      if (l2[_] === c || l2[_].listener === c) {
        I2 = l2[_].listener, p2 = _;
        break;
      }
    if (p2 < 0)
      return this;
    p2 === 0 ? l2.shift() : spliceOne(l2, p2), l2.length === 1 && (v2[u2] = l2[0]), v2.removeListener !== void 0 && this.emit("removeListener", u2, I2 || c);
  }
  return this;
};
EventEmitter.prototype.off = EventEmitter.prototype.removeListener;
EventEmitter.prototype.removeAllListeners = function a411(u2) {
  var c, l2, v2;
  if (l2 = this._events, l2 === void 0)
    return this;
  if (l2.removeListener === void 0)
    return arguments.length === 0 ? (this._events = /* @__PURE__ */ Object.create(null), this._eventsCount = 0) : l2[u2] !== void 0 && (--this._eventsCount === 0 ? this._events = /* @__PURE__ */ Object.create(null) : delete l2[u2]), this;
  if (arguments.length === 0) {
    var p2 = Object.keys(l2), _;
    for (v2 = 0; v2 < p2.length; ++v2)
      _ = p2[v2], _ !== "removeListener" && this.removeAllListeners(_);
    return this.removeAllListeners("removeListener"), this._events = /* @__PURE__ */ Object.create(null), this._eventsCount = 0, this;
  }
  if (c = l2[u2], typeof c == "function")
    this.removeListener(u2, c);
  else if (c !== void 0)
    for (v2 = c.length - 1; v2 >= 0; v2--)
      this.removeListener(u2, c[v2]);
  return this;
};
function _listeners(a420, u2, c) {
  var l2 = a420._events;
  if (l2 === void 0)
    return [];
  var v2 = l2[u2];
  return v2 === void 0 ? [] : typeof v2 == "function" ? c ? [v2.listener || v2] : [v2] : c ? unwrapListeners(v2) : arrayClone(v2, v2.length);
}
EventEmitter.prototype.listeners = function a412(u2) {
  return _listeners(this, u2, true);
};
EventEmitter.prototype.rawListeners = function a413(u2) {
  return _listeners(this, u2, false);
};
EventEmitter.listenerCount = function(a420, u2) {
  return typeof a420.listenerCount == "function" ? a420.listenerCount(u2) : listenerCount.call(a420, u2);
};
EventEmitter.prototype.listenerCount = listenerCount;
function listenerCount(a420) {
  var u2 = this._events;
  if (u2 !== void 0) {
    var c = u2[a420];
    if (typeof c == "function")
      return 1;
    if (c !== void 0)
      return c.length;
  }
  return 0;
}
EventEmitter.prototype.eventNames = function a414() {
  return this._eventsCount > 0 ? ReflectOwnKeys(this._events) : [];
};
function arrayClone(a420, u2) {
  for (var c = new Array(u2), l2 = 0; l2 < u2; ++l2)
    c[l2] = a420[l2];
  return c;
}
function spliceOne(a420, u2) {
  for (; u2 + 1 < a420.length; u2++)
    a420[u2] = a420[u2 + 1];
  a420.pop();
}
function unwrapListeners(a420) {
  for (var u2 = new Array(a420.length), c = 0; c < u2.length; ++c)
    u2[c] = a420[c].listener || a420[c];
  return u2;
}
function once(a420, u2) {
  return new Promise(function(c, l2) {
    function v2(_) {
      a420.removeListener(u2, p2), l2(_);
    }
    function p2() {
      typeof a420.removeListener == "function" && a420.removeListener("error", v2), c([].slice.call(arguments));
    }
    eventTargetAgnosticAddListener(a420, u2, p2, { once: true }), u2 !== "error" && addErrorHandlerIfEventEmitter(a420, v2, { once: true });
  });
}
function addErrorHandlerIfEventEmitter(a420, u2, c) {
  typeof a420.on == "function" && eventTargetAgnosticAddListener(a420, "error", u2, c);
}
function eventTargetAgnosticAddListener(a420, u2, c, l2) {
  if (typeof a420.on == "function")
    l2.once ? a420.once(u2, c) : a420.on(u2, c);
  else if (typeof a420.addEventListener == "function")
    a420.addEventListener(u2, function v2(p2) {
      l2.once && a420.removeEventListener(u2, v2), c(p2);
    });
  else
    throw new TypeError('The "emitter" argument must be of type EventEmitter. Received type ' + typeof a420);
}
var eventsExports = events.exports;
let logDisabled_ = true, deprecationWarnings_ = true;
function extractVersion(a420, u2, c) {
  const l2 = a420.match(u2);
  return l2 && l2.length >= c && parseInt(l2[c], 10);
}
function wrapPeerConnectionEvent(a420, u2, c) {
  if (!a420.RTCPeerConnection)
    return;
  const l2 = a420.RTCPeerConnection.prototype, v2 = l2.addEventListener;
  l2.addEventListener = function(_, I2) {
    if (_ !== u2)
      return v2.apply(this, arguments);
    const P2 = ($) => {
      const F2 = c($);
      F2 && (I2.handleEvent ? I2.handleEvent(F2) : I2(F2));
    };
    return this._eventMap = this._eventMap || {}, this._eventMap[u2] || (this._eventMap[u2] = /* @__PURE__ */ new Map()), this._eventMap[u2].set(I2, P2), v2.apply(this, [_, P2]);
  };
  const p2 = l2.removeEventListener;
  l2.removeEventListener = function(_, I2) {
    if (_ !== u2 || !this._eventMap || !this._eventMap[u2])
      return p2.apply(this, arguments);
    if (!this._eventMap[u2].has(I2))
      return p2.apply(this, arguments);
    const P2 = this._eventMap[u2].get(I2);
    return this._eventMap[u2].delete(I2), this._eventMap[u2].size === 0 && delete this._eventMap[u2], Object.keys(this._eventMap).length === 0 && delete this._eventMap, p2.apply(this, [_, P2]);
  }, Object.defineProperty(l2, "on" + u2, { get() {
    return this["_on" + u2];
  }, set(_) {
    this["_on" + u2] && (this.removeEventListener(u2, this["_on" + u2]), delete this["_on" + u2]), _ && this.addEventListener(u2, this["_on" + u2] = _);
  }, enumerable: true, configurable: true });
}
function disableLog(a420) {
  return typeof a420 != "boolean" ? new Error("Argument type: " + typeof a420 + ". Please use a boolean.") : (logDisabled_ = a420, a420 ? "adapter.js logging disabled" : "adapter.js logging enabled");
}
function disableWarnings(a420) {
  return typeof a420 != "boolean" ? new Error("Argument type: " + typeof a420 + ". Please use a boolean.") : (deprecationWarnings_ = !a420, "adapter.js deprecation warnings " + (a420 ? "disabled" : "enabled"));
}
function log() {
  if (typeof window == "object") {
    if (logDisabled_)
      return;
    typeof console < "u" && typeof console.log == "function" && console.log.apply(console, arguments);
  }
}
function deprecated(a420, u2) {
  deprecationWarnings_ && console.warn(a420 + " is deprecated, please use " + u2 + " instead.");
}
function detectBrowser(a420) {
  const u2 = { browser: null, version: null };
  if (typeof a420 > "u" || !a420.navigator || !a420.navigator.userAgent)
    return u2.browser = "Not a browser.", u2;
  const { navigator: c } = a420;
  if (c.mozGetUserMedia)
    u2.browser = "firefox", u2.version = extractVersion(c.userAgent, /Firefox\/(\d+)\./, 1);
  else if (c.webkitGetUserMedia || a420.isSecureContext === false && a420.webkitRTCPeerConnection)
    u2.browser = "chrome", u2.version = extractVersion(c.userAgent, /Chrom(e|ium)\/(\d+)\./, 2);
  else if (a420.RTCPeerConnection && c.userAgent.match(/AppleWebKit\/(\d+)\./))
    u2.browser = "safari", u2.version = extractVersion(c.userAgent, /AppleWebKit\/(\d+)\./, 1), u2.supportsUnifiedPlan = a420.RTCRtpTransceiver && "currentDirection" in a420.RTCRtpTransceiver.prototype;
  else
    return u2.browser = "Not a supported browser.", u2;
  return u2;
}
function isObject(a420) {
  return Object.prototype.toString.call(a420) === "[object Object]";
}
function compactObject(a420) {
  return isObject(a420) ? Object.keys(a420).reduce(function(u2, c) {
    const l2 = isObject(a420[c]), v2 = l2 ? compactObject(a420[c]) : a420[c], p2 = l2 && !Object.keys(v2).length;
    return v2 === void 0 || p2 ? u2 : Object.assign(u2, { [c]: v2 });
  }, {}) : a420;
}
function walkStats(a420, u2, c) {
  !u2 || c.has(u2.id) || (c.set(u2.id, u2), Object.keys(u2).forEach((l2) => {
    l2.endsWith("Id") ? walkStats(a420, a420.get(u2[l2]), c) : l2.endsWith("Ids") && u2[l2].forEach((v2) => {
      walkStats(a420, a420.get(v2), c);
    });
  }));
}
function filterStats(a420, u2, c) {
  const l2 = c ? "outbound-rtp" : "inbound-rtp", v2 = /* @__PURE__ */ new Map();
  if (u2 === null)
    return v2;
  const p2 = [];
  return a420.forEach((_) => {
    _.type === "track" && _.trackIdentifier === u2.id && p2.push(_);
  }), p2.forEach((_) => {
    a420.forEach((I2) => {
      I2.type === l2 && I2.trackId === _.id && walkStats(a420, I2, v2);
    });
  }), v2;
}
const logging = log;
function shimGetUserMedia$2(a420, u2) {
  const c = a420 && a420.navigator;
  if (!c.mediaDevices)
    return;
  const l2 = function(I2) {
    if (typeof I2 != "object" || I2.mandatory || I2.optional)
      return I2;
    const P2 = {};
    return Object.keys(I2).forEach(($) => {
      if ($ === "require" || $ === "advanced" || $ === "mediaSource")
        return;
      const F2 = typeof I2[$] == "object" ? I2[$] : { ideal: I2[$] };
      F2.exact !== void 0 && typeof F2.exact == "number" && (F2.min = F2.max = F2.exact);
      const H2 = function(j, ee2) {
        return j ? j + ee2.charAt(0).toUpperCase() + ee2.slice(1) : ee2 === "deviceId" ? "sourceId" : ee2;
      };
      if (F2.ideal !== void 0) {
        P2.optional = P2.optional || [];
        let j = {};
        typeof F2.ideal == "number" ? (j[H2("min", $)] = F2.ideal, P2.optional.push(j), j = {}, j[H2("max", $)] = F2.ideal, P2.optional.push(j)) : (j[H2("", $)] = F2.ideal, P2.optional.push(j));
      }
      F2.exact !== void 0 && typeof F2.exact != "number" ? (P2.mandatory = P2.mandatory || {}, P2.mandatory[H2("", $)] = F2.exact) : ["min", "max"].forEach((j) => {
        F2[j] !== void 0 && (P2.mandatory = P2.mandatory || {}, P2.mandatory[H2(j, $)] = F2[j]);
      });
    }), I2.advanced && (P2.optional = (P2.optional || []).concat(I2.advanced)), P2;
  }, v2 = function(I2, P2) {
    if (u2.version >= 61)
      return P2(I2);
    if (I2 = JSON.parse(JSON.stringify(I2)), I2 && typeof I2.audio == "object") {
      const $ = function(F2, H2, j) {
        H2 in F2 && !(j in F2) && (F2[j] = F2[H2], delete F2[H2]);
      };
      I2 = JSON.parse(JSON.stringify(I2)), $(I2.audio, "autoGainControl", "googAutoGainControl"), $(I2.audio, "noiseSuppression", "googNoiseSuppression"), I2.audio = l2(I2.audio);
    }
    if (I2 && typeof I2.video == "object") {
      let $ = I2.video.facingMode;
      $ = $ && (typeof $ == "object" ? $ : { ideal: $ });
      const F2 = u2.version < 66;
      if ($ && ($.exact === "user" || $.exact === "environment" || $.ideal === "user" || $.ideal === "environment") && !(c.mediaDevices.getSupportedConstraints && c.mediaDevices.getSupportedConstraints().facingMode && !F2)) {
        delete I2.video.facingMode;
        let H2;
        if ($.exact === "environment" || $.ideal === "environment" ? H2 = ["back", "rear"] : ($.exact === "user" || $.ideal === "user") && (H2 = ["front"]), H2)
          return c.mediaDevices.enumerateDevices().then((j) => {
            j = j.filter((X2) => X2.kind === "videoinput");
            let ee2 = j.find((X2) => H2.some((ie2) => X2.label.toLowerCase().includes(ie2)));
            return !ee2 && j.length && H2.includes("back") && (ee2 = j[j.length - 1]), ee2 && (I2.video.deviceId = $.exact ? { exact: ee2.deviceId } : { ideal: ee2.deviceId }), I2.video = l2(I2.video), logging("chrome: " + JSON.stringify(I2)), P2(I2);
          });
      }
      I2.video = l2(I2.video);
    }
    return logging("chrome: " + JSON.stringify(I2)), P2(I2);
  }, p2 = function(I2) {
    return u2.version >= 64 ? I2 : { name: { PermissionDeniedError: "NotAllowedError", PermissionDismissedError: "NotAllowedError", InvalidStateError: "NotAllowedError", DevicesNotFoundError: "NotFoundError", ConstraintNotSatisfiedError: "OverconstrainedError", TrackStartError: "NotReadableError", MediaDeviceFailedDueToShutdown: "NotAllowedError", MediaDeviceKillSwitchOn: "NotAllowedError", TabCaptureError: "AbortError", ScreenCaptureError: "AbortError", DeviceCaptureError: "AbortError" }[I2.name] || I2.name, message: I2.message, constraint: I2.constraint || I2.constraintName, toString() {
      return this.name + (this.message && ": ") + this.message;
    } };
  }, _ = function(I2, P2, $) {
    v2(I2, (F2) => {
      c.webkitGetUserMedia(F2, P2, (H2) => {
        $ && $(p2(H2));
      });
    });
  };
  if (c.getUserMedia = _.bind(c), c.mediaDevices.getUserMedia) {
    const I2 = c.mediaDevices.getUserMedia.bind(c.mediaDevices);
    c.mediaDevices.getUserMedia = function(P2) {
      return v2(P2, ($) => I2($).then((F2) => {
        if ($.audio && !F2.getAudioTracks().length || $.video && !F2.getVideoTracks().length)
          throw F2.getTracks().forEach((H2) => {
            H2.stop();
          }), new DOMException("", "NotFoundError");
        return F2;
      }, (F2) => Promise.reject(p2(F2))));
    };
  }
}
function shimGetDisplayMedia$1(a420, u2) {
  if (!(a420.navigator.mediaDevices && "getDisplayMedia" in a420.navigator.mediaDevices) && a420.navigator.mediaDevices) {
    if (typeof u2 != "function") {
      console.error("shimGetDisplayMedia: getSourceId argument is not a function");
      return;
    }
    a420.navigator.mediaDevices.getDisplayMedia = function(l2) {
      return u2(l2).then((v2) => {
        const p2 = l2.video && l2.video.width, _ = l2.video && l2.video.height, I2 = l2.video && l2.video.frameRate;
        return l2.video = { mandatory: { chromeMediaSource: "desktop", chromeMediaSourceId: v2, maxFrameRate: I2 || 3 } }, p2 && (l2.video.mandatory.maxWidth = p2), _ && (l2.video.mandatory.maxHeight = _), a420.navigator.mediaDevices.getUserMedia(l2);
      });
    };
  }
}
function shimMediaStream(a420) {
  a420.MediaStream = a420.MediaStream || a420.webkitMediaStream;
}
function shimOnTrack$1(a420) {
  if (typeof a420 == "object" && a420.RTCPeerConnection && !("ontrack" in a420.RTCPeerConnection.prototype)) {
    Object.defineProperty(a420.RTCPeerConnection.prototype, "ontrack", { get() {
      return this._ontrack;
    }, set(c) {
      this._ontrack && this.removeEventListener("track", this._ontrack), this.addEventListener("track", this._ontrack = c);
    }, enumerable: true, configurable: true });
    const u2 = a420.RTCPeerConnection.prototype.setRemoteDescription;
    a420.RTCPeerConnection.prototype.setRemoteDescription = function() {
      return this._ontrackpoly || (this._ontrackpoly = (l2) => {
        l2.stream.addEventListener("addtrack", (v2) => {
          let p2;
          a420.RTCPeerConnection.prototype.getReceivers ? p2 = this.getReceivers().find((I2) => I2.track && I2.track.id === v2.track.id) : p2 = { track: v2.track };
          const _ = new Event("track");
          _.track = v2.track, _.receiver = p2, _.transceiver = { receiver: p2 }, _.streams = [l2.stream], this.dispatchEvent(_);
        }), l2.stream.getTracks().forEach((v2) => {
          let p2;
          a420.RTCPeerConnection.prototype.getReceivers ? p2 = this.getReceivers().find((I2) => I2.track && I2.track.id === v2.id) : p2 = { track: v2 };
          const _ = new Event("track");
          _.track = v2, _.receiver = p2, _.transceiver = { receiver: p2 }, _.streams = [l2.stream], this.dispatchEvent(_);
        });
      }, this.addEventListener("addstream", this._ontrackpoly)), u2.apply(this, arguments);
    };
  } else
    wrapPeerConnectionEvent(a420, "track", (u2) => (u2.transceiver || Object.defineProperty(u2, "transceiver", { value: { receiver: u2.receiver } }), u2));
}
function shimGetSendersWithDtmf(a420) {
  if (typeof a420 == "object" && a420.RTCPeerConnection && !("getSenders" in a420.RTCPeerConnection.prototype) && "createDTMFSender" in a420.RTCPeerConnection.prototype) {
    const u2 = function(v2, p2) {
      return { track: p2, get dtmf() {
        return this._dtmf === void 0 && (p2.kind === "audio" ? this._dtmf = v2.createDTMFSender(p2) : this._dtmf = null), this._dtmf;
      }, _pc: v2 };
    };
    if (!a420.RTCPeerConnection.prototype.getSenders) {
      a420.RTCPeerConnection.prototype.getSenders = function() {
        return this._senders = this._senders || [], this._senders.slice();
      };
      const v2 = a420.RTCPeerConnection.prototype.addTrack;
      a420.RTCPeerConnection.prototype.addTrack = function(I2, P2) {
        let $ = v2.apply(this, arguments);
        return $ || ($ = u2(this, I2), this._senders.push($)), $;
      };
      const p2 = a420.RTCPeerConnection.prototype.removeTrack;
      a420.RTCPeerConnection.prototype.removeTrack = function(I2) {
        p2.apply(this, arguments);
        const P2 = this._senders.indexOf(I2);
        P2 !== -1 && this._senders.splice(P2, 1);
      };
    }
    const c = a420.RTCPeerConnection.prototype.addStream;
    a420.RTCPeerConnection.prototype.addStream = function(p2) {
      this._senders = this._senders || [], c.apply(this, [p2]), p2.getTracks().forEach((_) => {
        this._senders.push(u2(this, _));
      });
    };
    const l2 = a420.RTCPeerConnection.prototype.removeStream;
    a420.RTCPeerConnection.prototype.removeStream = function(p2) {
      this._senders = this._senders || [], l2.apply(this, [p2]), p2.getTracks().forEach((_) => {
        const I2 = this._senders.find((P2) => P2.track === _);
        I2 && this._senders.splice(this._senders.indexOf(I2), 1);
      });
    };
  } else if (typeof a420 == "object" && a420.RTCPeerConnection && "getSenders" in a420.RTCPeerConnection.prototype && "createDTMFSender" in a420.RTCPeerConnection.prototype && a420.RTCRtpSender && !("dtmf" in a420.RTCRtpSender.prototype)) {
    const u2 = a420.RTCPeerConnection.prototype.getSenders;
    a420.RTCPeerConnection.prototype.getSenders = function() {
      const l2 = u2.apply(this, []);
      return l2.forEach((v2) => v2._pc = this), l2;
    }, Object.defineProperty(a420.RTCRtpSender.prototype, "dtmf", { get() {
      return this._dtmf === void 0 && (this.track.kind === "audio" ? this._dtmf = this._pc.createDTMFSender(this.track) : this._dtmf = null), this._dtmf;
    } });
  }
}
function shimGetStats(a420) {
  if (!a420.RTCPeerConnection)
    return;
  const u2 = a420.RTCPeerConnection.prototype.getStats;
  a420.RTCPeerConnection.prototype.getStats = function() {
    const [l2, v2, p2] = arguments;
    if (arguments.length > 0 && typeof l2 == "function")
      return u2.apply(this, arguments);
    if (u2.length === 0 && (arguments.length === 0 || typeof l2 != "function"))
      return u2.apply(this, []);
    const _ = function(P2) {
      const $ = {};
      return P2.result().forEach((H2) => {
        const j = { id: H2.id, timestamp: H2.timestamp, type: { localcandidate: "local-candidate", remotecandidate: "remote-candidate" }[H2.type] || H2.type };
        H2.names().forEach((ee2) => {
          j[ee2] = H2.stat(ee2);
        }), $[j.id] = j;
      }), $;
    }, I2 = function(P2) {
      return new Map(Object.keys(P2).map(($) => [$, P2[$]]));
    };
    if (arguments.length >= 2) {
      const P2 = function($) {
        v2(I2(_($)));
      };
      return u2.apply(this, [P2, l2]);
    }
    return new Promise((P2, $) => {
      u2.apply(this, [function(F2) {
        P2(I2(_(F2)));
      }, $]);
    }).then(v2, p2);
  };
}
function shimSenderReceiverGetStats(a420) {
  if (!(typeof a420 == "object" && a420.RTCPeerConnection && a420.RTCRtpSender && a420.RTCRtpReceiver))
    return;
  if (!("getStats" in a420.RTCRtpSender.prototype)) {
    const c = a420.RTCPeerConnection.prototype.getSenders;
    c && (a420.RTCPeerConnection.prototype.getSenders = function() {
      const p2 = c.apply(this, []);
      return p2.forEach((_) => _._pc = this), p2;
    });
    const l2 = a420.RTCPeerConnection.prototype.addTrack;
    l2 && (a420.RTCPeerConnection.prototype.addTrack = function() {
      const p2 = l2.apply(this, arguments);
      return p2._pc = this, p2;
    }), a420.RTCRtpSender.prototype.getStats = function() {
      const p2 = this;
      return this._pc.getStats().then((_) => (
        /* Note: this will include stats of all senders that
        *   send a track with the same id as sender.track as
        *   it is not possible to identify the RTCRtpSender.
        */
        filterStats(_, p2.track, true)
      ));
    };
  }
  if (!("getStats" in a420.RTCRtpReceiver.prototype)) {
    const c = a420.RTCPeerConnection.prototype.getReceivers;
    c && (a420.RTCPeerConnection.prototype.getReceivers = function() {
      const v2 = c.apply(this, []);
      return v2.forEach((p2) => p2._pc = this), v2;
    }), wrapPeerConnectionEvent(a420, "track", (l2) => (l2.receiver._pc = l2.srcElement, l2)), a420.RTCRtpReceiver.prototype.getStats = function() {
      const v2 = this;
      return this._pc.getStats().then((p2) => filterStats(p2, v2.track, false));
    };
  }
  if (!("getStats" in a420.RTCRtpSender.prototype && "getStats" in a420.RTCRtpReceiver.prototype))
    return;
  const u2 = a420.RTCPeerConnection.prototype.getStats;
  a420.RTCPeerConnection.prototype.getStats = function() {
    if (arguments.length > 0 && arguments[0] instanceof a420.MediaStreamTrack) {
      const l2 = arguments[0];
      let v2, p2, _;
      return this.getSenders().forEach((I2) => {
        I2.track === l2 && (v2 ? _ = true : v2 = I2);
      }), this.getReceivers().forEach((I2) => (I2.track === l2 && (p2 ? _ = true : p2 = I2), I2.track === l2)), _ || v2 && p2 ? Promise.reject(new DOMException("There are more than one sender or receiver for the track.", "InvalidAccessError")) : v2 ? v2.getStats() : p2 ? p2.getStats() : Promise.reject(new DOMException("There is no sender or receiver for the track.", "InvalidAccessError"));
    }
    return u2.apply(this, arguments);
  };
}
function shimAddTrackRemoveTrackWithNative(a420) {
  a420.RTCPeerConnection.prototype.getLocalStreams = function() {
    return this._shimmedLocalStreams = this._shimmedLocalStreams || {}, Object.keys(this._shimmedLocalStreams).map((_) => this._shimmedLocalStreams[_][0]);
  };
  const u2 = a420.RTCPeerConnection.prototype.addTrack;
  a420.RTCPeerConnection.prototype.addTrack = function(_, I2) {
    if (!I2)
      return u2.apply(this, arguments);
    this._shimmedLocalStreams = this._shimmedLocalStreams || {};
    const P2 = u2.apply(this, arguments);
    return this._shimmedLocalStreams[I2.id] ? this._shimmedLocalStreams[I2.id].indexOf(P2) === -1 && this._shimmedLocalStreams[I2.id].push(P2) : this._shimmedLocalStreams[I2.id] = [I2, P2], P2;
  };
  const c = a420.RTCPeerConnection.prototype.addStream;
  a420.RTCPeerConnection.prototype.addStream = function(_) {
    this._shimmedLocalStreams = this._shimmedLocalStreams || {}, _.getTracks().forEach(($) => {
      if (this.getSenders().find((H2) => H2.track === $))
        throw new DOMException("Track already exists.", "InvalidAccessError");
    });
    const I2 = this.getSenders();
    c.apply(this, arguments);
    const P2 = this.getSenders().filter(($) => I2.indexOf($) === -1);
    this._shimmedLocalStreams[_.id] = [_].concat(P2);
  };
  const l2 = a420.RTCPeerConnection.prototype.removeStream;
  a420.RTCPeerConnection.prototype.removeStream = function(_) {
    return this._shimmedLocalStreams = this._shimmedLocalStreams || {}, delete this._shimmedLocalStreams[_.id], l2.apply(this, arguments);
  };
  const v2 = a420.RTCPeerConnection.prototype.removeTrack;
  a420.RTCPeerConnection.prototype.removeTrack = function(_) {
    return this._shimmedLocalStreams = this._shimmedLocalStreams || {}, _ && Object.keys(this._shimmedLocalStreams).forEach((I2) => {
      const P2 = this._shimmedLocalStreams[I2].indexOf(_);
      P2 !== -1 && this._shimmedLocalStreams[I2].splice(P2, 1), this._shimmedLocalStreams[I2].length === 1 && delete this._shimmedLocalStreams[I2];
    }), v2.apply(this, arguments);
  };
}
function shimAddTrackRemoveTrack(a420, u2) {
  if (!a420.RTCPeerConnection)
    return;
  if (a420.RTCPeerConnection.prototype.addTrack && u2.version >= 65)
    return shimAddTrackRemoveTrackWithNative(a420);
  const c = a420.RTCPeerConnection.prototype.getLocalStreams;
  a420.RTCPeerConnection.prototype.getLocalStreams = function() {
    const F2 = c.apply(this);
    return this._reverseStreams = this._reverseStreams || {}, F2.map((H2) => this._reverseStreams[H2.id]);
  };
  const l2 = a420.RTCPeerConnection.prototype.addStream;
  a420.RTCPeerConnection.prototype.addStream = function(F2) {
    if (this._streams = this._streams || {}, this._reverseStreams = this._reverseStreams || {}, F2.getTracks().forEach((H2) => {
      if (this.getSenders().find((ee2) => ee2.track === H2))
        throw new DOMException("Track already exists.", "InvalidAccessError");
    }), !this._reverseStreams[F2.id]) {
      const H2 = new a420.MediaStream(F2.getTracks());
      this._streams[F2.id] = H2, this._reverseStreams[H2.id] = F2, F2 = H2;
    }
    l2.apply(this, [F2]);
  };
  const v2 = a420.RTCPeerConnection.prototype.removeStream;
  a420.RTCPeerConnection.prototype.removeStream = function(F2) {
    this._streams = this._streams || {}, this._reverseStreams = this._reverseStreams || {}, v2.apply(this, [this._streams[F2.id] || F2]), delete this._reverseStreams[this._streams[F2.id] ? this._streams[F2.id].id : F2.id], delete this._streams[F2.id];
  }, a420.RTCPeerConnection.prototype.addTrack = function(F2, H2) {
    if (this.signalingState === "closed")
      throw new DOMException("The RTCPeerConnection's signalingState is 'closed'.", "InvalidStateError");
    const j = [].slice.call(arguments, 1);
    if (j.length !== 1 || !j[0].getTracks().find((ie2) => ie2 === F2))
      throw new DOMException("The adapter.js addTrack polyfill only supports a single  stream which is associated with the specified track.", "NotSupportedError");
    if (this.getSenders().find((ie2) => ie2.track === F2))
      throw new DOMException("Track already exists.", "InvalidAccessError");
    this._streams = this._streams || {}, this._reverseStreams = this._reverseStreams || {};
    const X2 = this._streams[H2.id];
    if (X2)
      X2.addTrack(F2), Promise.resolve().then(() => {
        this.dispatchEvent(new Event("negotiationneeded"));
      });
    else {
      const ie2 = new a420.MediaStream([F2]);
      this._streams[H2.id] = ie2, this._reverseStreams[ie2.id] = H2, this.addStream(ie2);
    }
    return this.getSenders().find((ie2) => ie2.track === F2);
  };
  function p2($, F2) {
    let H2 = F2.sdp;
    return Object.keys($._reverseStreams || []).forEach((j) => {
      const ee2 = $._reverseStreams[j], X2 = $._streams[ee2.id];
      H2 = H2.replace(new RegExp(X2.id, "g"), ee2.id);
    }), new RTCSessionDescription({ type: F2.type, sdp: H2 });
  }
  function _($, F2) {
    let H2 = F2.sdp;
    return Object.keys($._reverseStreams || []).forEach((j) => {
      const ee2 = $._reverseStreams[j], X2 = $._streams[ee2.id];
      H2 = H2.replace(new RegExp(ee2.id, "g"), X2.id);
    }), new RTCSessionDescription({ type: F2.type, sdp: H2 });
  }
  ["createOffer", "createAnswer"].forEach(function($) {
    const F2 = a420.RTCPeerConnection.prototype[$], H2 = { [$]() {
      const j = arguments;
      return arguments.length && typeof arguments[0] == "function" ? F2.apply(this, [(X2) => {
        const ie2 = p2(this, X2);
        j[0].apply(null, [ie2]);
      }, (X2) => {
        j[1] && j[1].apply(null, X2);
      }, arguments[2]]) : F2.apply(this, arguments).then((X2) => p2(this, X2));
    } };
    a420.RTCPeerConnection.prototype[$] = H2[$];
  });
  const I2 = a420.RTCPeerConnection.prototype.setLocalDescription;
  a420.RTCPeerConnection.prototype.setLocalDescription = function() {
    return !arguments.length || !arguments[0].type ? I2.apply(this, arguments) : (arguments[0] = _(this, arguments[0]), I2.apply(this, arguments));
  };
  const P2 = Object.getOwnPropertyDescriptor(a420.RTCPeerConnection.prototype, "localDescription");
  Object.defineProperty(a420.RTCPeerConnection.prototype, "localDescription", { get() {
    const $ = P2.get.apply(this);
    return $.type === "" ? $ : p2(this, $);
  } }), a420.RTCPeerConnection.prototype.removeTrack = function(F2) {
    if (this.signalingState === "closed")
      throw new DOMException("The RTCPeerConnection's signalingState is 'closed'.", "InvalidStateError");
    if (!F2._pc)
      throw new DOMException("Argument 1 of RTCPeerConnection.removeTrack does not implement interface RTCRtpSender.", "TypeError");
    if (!(F2._pc === this))
      throw new DOMException("Sender was not created by this connection.", "InvalidAccessError");
    this._streams = this._streams || {};
    let j;
    Object.keys(this._streams).forEach((ee2) => {
      this._streams[ee2].getTracks().find((ie2) => F2.track === ie2) && (j = this._streams[ee2]);
    }), j && (j.getTracks().length === 1 ? this.removeStream(this._reverseStreams[j.id]) : j.removeTrack(F2.track), this.dispatchEvent(new Event("negotiationneeded")));
  };
}
function shimPeerConnection$1(a420, u2) {
  !a420.RTCPeerConnection && a420.webkitRTCPeerConnection && (a420.RTCPeerConnection = a420.webkitRTCPeerConnection), a420.RTCPeerConnection && u2.version < 53 && ["setLocalDescription", "setRemoteDescription", "addIceCandidate"].forEach(function(c) {
    const l2 = a420.RTCPeerConnection.prototype[c], v2 = { [c]() {
      return arguments[0] = new (c === "addIceCandidate" ? a420.RTCIceCandidate : a420.RTCSessionDescription)(arguments[0]), l2.apply(this, arguments);
    } };
    a420.RTCPeerConnection.prototype[c] = v2[c];
  });
}
function fixNegotiationNeeded(a420, u2) {
  wrapPeerConnectionEvent(a420, "negotiationneeded", (c) => {
    const l2 = c.target;
    if (!((u2.version < 72 || l2.getConfiguration && l2.getConfiguration().sdpSemantics === "plan-b") && l2.signalingState !== "stable"))
      return c;
  });
}
var chromeShim = /* @__PURE__ */ Object.freeze({ __proto__: null, fixNegotiationNeeded, shimAddTrackRemoveTrack, shimAddTrackRemoveTrackWithNative, shimGetDisplayMedia: shimGetDisplayMedia$1, shimGetSendersWithDtmf, shimGetStats, shimGetUserMedia: shimGetUserMedia$2, shimMediaStream, shimOnTrack: shimOnTrack$1, shimPeerConnection: shimPeerConnection$1, shimSenderReceiverGetStats });
function shimGetUserMedia$1(a420, u2) {
  const c = a420 && a420.navigator, l2 = a420 && a420.MediaStreamTrack;
  if (c.getUserMedia = function(v2, p2, _) {
    deprecated("navigator.getUserMedia", "navigator.mediaDevices.getUserMedia"), c.mediaDevices.getUserMedia(v2).then(p2, _);
  }, !(u2.version > 55 && "autoGainControl" in c.mediaDevices.getSupportedConstraints())) {
    const v2 = function(_, I2, P2) {
      I2 in _ && !(P2 in _) && (_[P2] = _[I2], delete _[I2]);
    }, p2 = c.mediaDevices.getUserMedia.bind(c.mediaDevices);
    if (c.mediaDevices.getUserMedia = function(_) {
      return typeof _ == "object" && typeof _.audio == "object" && (_ = JSON.parse(JSON.stringify(_)), v2(_.audio, "autoGainControl", "mozAutoGainControl"), v2(_.audio, "noiseSuppression", "mozNoiseSuppression")), p2(_);
    }, l2 && l2.prototype.getSettings) {
      const _ = l2.prototype.getSettings;
      l2.prototype.getSettings = function() {
        const I2 = _.apply(this, arguments);
        return v2(I2, "mozAutoGainControl", "autoGainControl"), v2(I2, "mozNoiseSuppression", "noiseSuppression"), I2;
      };
    }
    if (l2 && l2.prototype.applyConstraints) {
      const _ = l2.prototype.applyConstraints;
      l2.prototype.applyConstraints = function(I2) {
        return this.kind === "audio" && typeof I2 == "object" && (I2 = JSON.parse(JSON.stringify(I2)), v2(I2, "autoGainControl", "mozAutoGainControl"), v2(I2, "noiseSuppression", "mozNoiseSuppression")), _.apply(this, [I2]);
      };
    }
  }
}
function shimGetDisplayMedia(a420, u2) {
  a420.navigator.mediaDevices && "getDisplayMedia" in a420.navigator.mediaDevices || a420.navigator.mediaDevices && (a420.navigator.mediaDevices.getDisplayMedia = function(l2) {
    if (!(l2 && l2.video)) {
      const v2 = new DOMException("getDisplayMedia without video constraints is undefined");
      return v2.name = "NotFoundError", v2.code = 8, Promise.reject(v2);
    }
    return l2.video === true ? l2.video = { mediaSource: u2 } : l2.video.mediaSource = u2, a420.navigator.mediaDevices.getUserMedia(l2);
  });
}
function shimOnTrack(a420) {
  typeof a420 == "object" && a420.RTCTrackEvent && "receiver" in a420.RTCTrackEvent.prototype && !("transceiver" in a420.RTCTrackEvent.prototype) && Object.defineProperty(a420.RTCTrackEvent.prototype, "transceiver", { get() {
    return { receiver: this.receiver };
  } });
}
function shimPeerConnection(a420, u2) {
  if (typeof a420 != "object" || !(a420.RTCPeerConnection || a420.mozRTCPeerConnection))
    return;
  !a420.RTCPeerConnection && a420.mozRTCPeerConnection && (a420.RTCPeerConnection = a420.mozRTCPeerConnection), u2.version < 53 && ["setLocalDescription", "setRemoteDescription", "addIceCandidate"].forEach(function(v2) {
    const p2 = a420.RTCPeerConnection.prototype[v2], _ = { [v2]() {
      return arguments[0] = new (v2 === "addIceCandidate" ? a420.RTCIceCandidate : a420.RTCSessionDescription)(arguments[0]), p2.apply(this, arguments);
    } };
    a420.RTCPeerConnection.prototype[v2] = _[v2];
  });
  const c = { inboundrtp: "inbound-rtp", outboundrtp: "outbound-rtp", candidatepair: "candidate-pair", localcandidate: "local-candidate", remotecandidate: "remote-candidate" }, l2 = a420.RTCPeerConnection.prototype.getStats;
  a420.RTCPeerConnection.prototype.getStats = function() {
    const [p2, _, I2] = arguments;
    return l2.apply(this, [p2 || null]).then((P2) => {
      if (u2.version < 53 && !_)
        try {
          P2.forEach(($) => {
            $.type = c[$.type] || $.type;
          });
        } catch ($) {
          if ($.name !== "TypeError")
            throw $;
          P2.forEach((F2, H2) => {
            P2.set(H2, Object.assign({}, F2, { type: c[F2.type] || F2.type }));
          });
        }
      return P2;
    }).then(_, I2);
  };
}
function shimSenderGetStats(a420) {
  if (!(typeof a420 == "object" && a420.RTCPeerConnection && a420.RTCRtpSender) || a420.RTCRtpSender && "getStats" in a420.RTCRtpSender.prototype)
    return;
  const u2 = a420.RTCPeerConnection.prototype.getSenders;
  u2 && (a420.RTCPeerConnection.prototype.getSenders = function() {
    const v2 = u2.apply(this, []);
    return v2.forEach((p2) => p2._pc = this), v2;
  });
  const c = a420.RTCPeerConnection.prototype.addTrack;
  c && (a420.RTCPeerConnection.prototype.addTrack = function() {
    const v2 = c.apply(this, arguments);
    return v2._pc = this, v2;
  }), a420.RTCRtpSender.prototype.getStats = function() {
    return this.track ? this._pc.getStats(this.track) : Promise.resolve(/* @__PURE__ */ new Map());
  };
}
function shimReceiverGetStats(a420) {
  if (!(typeof a420 == "object" && a420.RTCPeerConnection && a420.RTCRtpSender) || a420.RTCRtpSender && "getStats" in a420.RTCRtpReceiver.prototype)
    return;
  const u2 = a420.RTCPeerConnection.prototype.getReceivers;
  u2 && (a420.RTCPeerConnection.prototype.getReceivers = function() {
    const l2 = u2.apply(this, []);
    return l2.forEach((v2) => v2._pc = this), l2;
  }), wrapPeerConnectionEvent(a420, "track", (c) => (c.receiver._pc = c.srcElement, c)), a420.RTCRtpReceiver.prototype.getStats = function() {
    return this._pc.getStats(this.track);
  };
}
function shimRemoveStream(a420) {
  !a420.RTCPeerConnection || "removeStream" in a420.RTCPeerConnection.prototype || (a420.RTCPeerConnection.prototype.removeStream = function(c) {
    deprecated("removeStream", "removeTrack"), this.getSenders().forEach((l2) => {
      l2.track && c.getTracks().includes(l2.track) && this.removeTrack(l2);
    });
  });
}
function shimRTCDataChannel(a420) {
  a420.DataChannel && !a420.RTCDataChannel && (a420.RTCDataChannel = a420.DataChannel);
}
function shimAddTransceiver(a420) {
  if (!(typeof a420 == "object" && a420.RTCPeerConnection))
    return;
  const u2 = a420.RTCPeerConnection.prototype.addTransceiver;
  u2 && (a420.RTCPeerConnection.prototype.addTransceiver = function() {
    this.setParametersPromises = [];
    let l2 = arguments[1] && arguments[1].sendEncodings;
    l2 === void 0 && (l2 = []), l2 = [...l2];
    const v2 = l2.length > 0;
    v2 && l2.forEach((_) => {
      if ("rid" in _ && !/^[a-z0-9]{0,16}$/i.test(_.rid))
        throw new TypeError("Invalid RID value provided.");
      if ("scaleResolutionDownBy" in _ && !(parseFloat(_.scaleResolutionDownBy) >= 1))
        throw new RangeError("scale_resolution_down_by must be >= 1.0");
      if ("maxFramerate" in _ && !(parseFloat(_.maxFramerate) >= 0))
        throw new RangeError("max_framerate must be >= 0.0");
    });
    const p2 = u2.apply(this, arguments);
    if (v2) {
      const { sender: _ } = p2, I2 = _.getParameters();
      (!("encodings" in I2) || // Avoid being fooled by patched getParameters() below.
      I2.encodings.length === 1 && Object.keys(I2.encodings[0]).length === 0) && (I2.encodings = l2, _.sendEncodings = l2, this.setParametersPromises.push(_.setParameters(I2).then(() => {
        delete _.sendEncodings;
      }).catch(() => {
        delete _.sendEncodings;
      })));
    }
    return p2;
  });
}
function shimGetParameters(a420) {
  if (!(typeof a420 == "object" && a420.RTCRtpSender))
    return;
  const u2 = a420.RTCRtpSender.prototype.getParameters;
  u2 && (a420.RTCRtpSender.prototype.getParameters = function() {
    const l2 = u2.apply(this, arguments);
    return "encodings" in l2 || (l2.encodings = [].concat(this.sendEncodings || [{}])), l2;
  });
}
function shimCreateOffer(a420) {
  if (!(typeof a420 == "object" && a420.RTCPeerConnection))
    return;
  const u2 = a420.RTCPeerConnection.prototype.createOffer;
  a420.RTCPeerConnection.prototype.createOffer = function() {
    return this.setParametersPromises && this.setParametersPromises.length ? Promise.all(this.setParametersPromises).then(() => u2.apply(this, arguments)).finally(() => {
      this.setParametersPromises = [];
    }) : u2.apply(this, arguments);
  };
}
function shimCreateAnswer(a420) {
  if (!(typeof a420 == "object" && a420.RTCPeerConnection))
    return;
  const u2 = a420.RTCPeerConnection.prototype.createAnswer;
  a420.RTCPeerConnection.prototype.createAnswer = function() {
    return this.setParametersPromises && this.setParametersPromises.length ? Promise.all(this.setParametersPromises).then(() => u2.apply(this, arguments)).finally(() => {
      this.setParametersPromises = [];
    }) : u2.apply(this, arguments);
  };
}
var firefoxShim = /* @__PURE__ */ Object.freeze({ __proto__: null, shimAddTransceiver, shimCreateAnswer, shimCreateOffer, shimGetDisplayMedia, shimGetParameters, shimGetUserMedia: shimGetUserMedia$1, shimOnTrack, shimPeerConnection, shimRTCDataChannel, shimReceiverGetStats, shimRemoveStream, shimSenderGetStats });
function shimLocalStreamsAPI(a420) {
  if (!(typeof a420 != "object" || !a420.RTCPeerConnection)) {
    if ("getLocalStreams" in a420.RTCPeerConnection.prototype || (a420.RTCPeerConnection.prototype.getLocalStreams = function() {
      return this._localStreams || (this._localStreams = []), this._localStreams;
    }), !("addStream" in a420.RTCPeerConnection.prototype)) {
      const u2 = a420.RTCPeerConnection.prototype.addTrack;
      a420.RTCPeerConnection.prototype.addStream = function(l2) {
        this._localStreams || (this._localStreams = []), this._localStreams.includes(l2) || this._localStreams.push(l2), l2.getAudioTracks().forEach((v2) => u2.call(this, v2, l2)), l2.getVideoTracks().forEach((v2) => u2.call(this, v2, l2));
      }, a420.RTCPeerConnection.prototype.addTrack = function(l2) {
        for (var v2 = arguments.length, p2 = new Array(v2 > 1 ? v2 - 1 : 0), _ = 1; _ < v2; _++)
          p2[_ - 1] = arguments[_];
        return p2 && p2.forEach((I2) => {
          this._localStreams ? this._localStreams.includes(I2) || this._localStreams.push(I2) : this._localStreams = [I2];
        }), u2.apply(this, arguments);
      };
    }
    "removeStream" in a420.RTCPeerConnection.prototype || (a420.RTCPeerConnection.prototype.removeStream = function(c) {
      this._localStreams || (this._localStreams = []);
      const l2 = this._localStreams.indexOf(c);
      if (l2 === -1)
        return;
      this._localStreams.splice(l2, 1);
      const v2 = c.getTracks();
      this.getSenders().forEach((p2) => {
        v2.includes(p2.track) && this.removeTrack(p2);
      });
    });
  }
}
function shimRemoteStreamsAPI(a420) {
  if (!(typeof a420 != "object" || !a420.RTCPeerConnection) && ("getRemoteStreams" in a420.RTCPeerConnection.prototype || (a420.RTCPeerConnection.prototype.getRemoteStreams = function() {
    return this._remoteStreams ? this._remoteStreams : [];
  }), !("onaddstream" in a420.RTCPeerConnection.prototype))) {
    Object.defineProperty(a420.RTCPeerConnection.prototype, "onaddstream", { get() {
      return this._onaddstream;
    }, set(c) {
      this._onaddstream && (this.removeEventListener("addstream", this._onaddstream), this.removeEventListener("track", this._onaddstreampoly)), this.addEventListener("addstream", this._onaddstream = c), this.addEventListener("track", this._onaddstreampoly = (l2) => {
        l2.streams.forEach((v2) => {
          if (this._remoteStreams || (this._remoteStreams = []), this._remoteStreams.includes(v2))
            return;
          this._remoteStreams.push(v2);
          const p2 = new Event("addstream");
          p2.stream = v2, this.dispatchEvent(p2);
        });
      });
    } });
    const u2 = a420.RTCPeerConnection.prototype.setRemoteDescription;
    a420.RTCPeerConnection.prototype.setRemoteDescription = function() {
      const l2 = this;
      return this._onaddstreampoly || this.addEventListener("track", this._onaddstreampoly = function(v2) {
        v2.streams.forEach((p2) => {
          if (l2._remoteStreams || (l2._remoteStreams = []), l2._remoteStreams.indexOf(p2) >= 0)
            return;
          l2._remoteStreams.push(p2);
          const _ = new Event("addstream");
          _.stream = p2, l2.dispatchEvent(_);
        });
      }), u2.apply(l2, arguments);
    };
  }
}
function shimCallbacksAPI(a420) {
  if (typeof a420 != "object" || !a420.RTCPeerConnection)
    return;
  const u2 = a420.RTCPeerConnection.prototype, c = u2.createOffer, l2 = u2.createAnswer, v2 = u2.setLocalDescription, p2 = u2.setRemoteDescription, _ = u2.addIceCandidate;
  u2.createOffer = function($, F2) {
    const H2 = arguments.length >= 2 ? arguments[2] : arguments[0], j = c.apply(this, [H2]);
    return F2 ? (j.then($, F2), Promise.resolve()) : j;
  }, u2.createAnswer = function($, F2) {
    const H2 = arguments.length >= 2 ? arguments[2] : arguments[0], j = l2.apply(this, [H2]);
    return F2 ? (j.then($, F2), Promise.resolve()) : j;
  };
  let I2 = function(P2, $, F2) {
    const H2 = v2.apply(this, [P2]);
    return F2 ? (H2.then($, F2), Promise.resolve()) : H2;
  };
  u2.setLocalDescription = I2, I2 = function(P2, $, F2) {
    const H2 = p2.apply(this, [P2]);
    return F2 ? (H2.then($, F2), Promise.resolve()) : H2;
  }, u2.setRemoteDescription = I2, I2 = function(P2, $, F2) {
    const H2 = _.apply(this, [P2]);
    return F2 ? (H2.then($, F2), Promise.resolve()) : H2;
  }, u2.addIceCandidate = I2;
}
function shimGetUserMedia(a420) {
  const u2 = a420 && a420.navigator;
  if (u2.mediaDevices && u2.mediaDevices.getUserMedia) {
    const c = u2.mediaDevices, l2 = c.getUserMedia.bind(c);
    u2.mediaDevices.getUserMedia = (v2) => l2(shimConstraints(v2));
  }
  !u2.getUserMedia && u2.mediaDevices && u2.mediaDevices.getUserMedia && (u2.getUserMedia = (function(l2, v2, p2) {
    u2.mediaDevices.getUserMedia(l2).then(v2, p2);
  }).bind(u2));
}
function shimConstraints(a420) {
  return a420 && a420.video !== void 0 ? Object.assign({}, a420, { video: compactObject(a420.video) }) : a420;
}
function shimRTCIceServerUrls(a420) {
  if (!a420.RTCPeerConnection)
    return;
  const u2 = a420.RTCPeerConnection;
  a420.RTCPeerConnection = function(l2, v2) {
    if (l2 && l2.iceServers) {
      const p2 = [];
      for (let _ = 0; _ < l2.iceServers.length; _++) {
        let I2 = l2.iceServers[_];
        I2.urls === void 0 && I2.url ? (deprecated("RTCIceServer.url", "RTCIceServer.urls"), I2 = JSON.parse(JSON.stringify(I2)), I2.urls = I2.url, delete I2.url, p2.push(I2)) : p2.push(l2.iceServers[_]);
      }
      l2.iceServers = p2;
    }
    return new u2(l2, v2);
  }, a420.RTCPeerConnection.prototype = u2.prototype, "generateCertificate" in u2 && Object.defineProperty(a420.RTCPeerConnection, "generateCertificate", { get() {
    return u2.generateCertificate;
  } });
}
function shimTrackEventTransceiver(a420) {
  typeof a420 == "object" && a420.RTCTrackEvent && "receiver" in a420.RTCTrackEvent.prototype && !("transceiver" in a420.RTCTrackEvent.prototype) && Object.defineProperty(a420.RTCTrackEvent.prototype, "transceiver", { get() {
    return { receiver: this.receiver };
  } });
}
function shimCreateOfferLegacy(a420) {
  const u2 = a420.RTCPeerConnection.prototype.createOffer;
  a420.RTCPeerConnection.prototype.createOffer = function(l2) {
    if (l2) {
      typeof l2.offerToReceiveAudio < "u" && (l2.offerToReceiveAudio = !!l2.offerToReceiveAudio);
      const v2 = this.getTransceivers().find((_) => _.receiver.track.kind === "audio");
      l2.offerToReceiveAudio === false && v2 ? v2.direction === "sendrecv" ? v2.setDirection ? v2.setDirection("sendonly") : v2.direction = "sendonly" : v2.direction === "recvonly" && (v2.setDirection ? v2.setDirection("inactive") : v2.direction = "inactive") : l2.offerToReceiveAudio === true && !v2 && this.addTransceiver("audio", { direction: "recvonly" }), typeof l2.offerToReceiveVideo < "u" && (l2.offerToReceiveVideo = !!l2.offerToReceiveVideo);
      const p2 = this.getTransceivers().find((_) => _.receiver.track.kind === "video");
      l2.offerToReceiveVideo === false && p2 ? p2.direction === "sendrecv" ? p2.setDirection ? p2.setDirection("sendonly") : p2.direction = "sendonly" : p2.direction === "recvonly" && (p2.setDirection ? p2.setDirection("inactive") : p2.direction = "inactive") : l2.offerToReceiveVideo === true && !p2 && this.addTransceiver("video", { direction: "recvonly" });
    }
    return u2.apply(this, arguments);
  };
}
function shimAudioContext(a420) {
  typeof a420 != "object" || a420.AudioContext || (a420.AudioContext = a420.webkitAudioContext);
}
var safariShim = /* @__PURE__ */ Object.freeze({ __proto__: null, shimAudioContext, shimCallbacksAPI, shimConstraints, shimCreateOfferLegacy, shimGetUserMedia, shimLocalStreamsAPI, shimRTCIceServerUrls, shimRemoteStreamsAPI, shimTrackEventTransceiver }), sdp$1 = { exports: {} };
(function(a420) {
  const u2 = {};
  u2.generateIdentifier = function() {
    return Math.random().toString(36).substring(2, 12);
  }, u2.localCName = u2.generateIdentifier(), u2.splitLines = function(c) {
    return c.trim().split(`
`).map((l2) => l2.trim());
  }, u2.splitSections = function(c) {
    return c.split(`
m=`).map((v2, p2) => (p2 > 0 ? "m=" + v2 : v2).trim() + `\r
`);
  }, u2.getDescription = function(c) {
    const l2 = u2.splitSections(c);
    return l2 && l2[0];
  }, u2.getMediaSections = function(c) {
    const l2 = u2.splitSections(c);
    return l2.shift(), l2;
  }, u2.matchPrefix = function(c, l2) {
    return u2.splitLines(c).filter((v2) => v2.indexOf(l2) === 0);
  }, u2.parseCandidate = function(c) {
    let l2;
    c.indexOf("a=candidate:") === 0 ? l2 = c.substring(12).split(" ") : l2 = c.substring(10).split(" ");
    const v2 = {
      foundation: l2[0],
      component: { 1: "rtp", 2: "rtcp" }[l2[1]] || l2[1],
      protocol: l2[2].toLowerCase(),
      priority: parseInt(l2[3], 10),
      ip: l2[4],
      address: l2[4],
      // address is an alias for ip.
      port: parseInt(l2[5], 10),
      // skip parts[6] == 'typ'
      type: l2[7]
    };
    for (let p2 = 8; p2 < l2.length; p2 += 2)
      switch (l2[p2]) {
        case "raddr":
          v2.relatedAddress = l2[p2 + 1];
          break;
        case "rport":
          v2.relatedPort = parseInt(l2[p2 + 1], 10);
          break;
        case "tcptype":
          v2.tcpType = l2[p2 + 1];
          break;
        case "ufrag":
          v2.ufrag = l2[p2 + 1], v2.usernameFragment = l2[p2 + 1];
          break;
        default:
          v2[l2[p2]] === void 0 && (v2[l2[p2]] = l2[p2 + 1]);
          break;
      }
    return v2;
  }, u2.writeCandidate = function(c) {
    const l2 = [];
    l2.push(c.foundation);
    const v2 = c.component;
    v2 === "rtp" ? l2.push(1) : v2 === "rtcp" ? l2.push(2) : l2.push(v2), l2.push(c.protocol.toUpperCase()), l2.push(c.priority), l2.push(c.address || c.ip), l2.push(c.port);
    const p2 = c.type;
    return l2.push("typ"), l2.push(p2), p2 !== "host" && c.relatedAddress && c.relatedPort && (l2.push("raddr"), l2.push(c.relatedAddress), l2.push("rport"), l2.push(c.relatedPort)), c.tcpType && c.protocol.toLowerCase() === "tcp" && (l2.push("tcptype"), l2.push(c.tcpType)), (c.usernameFragment || c.ufrag) && (l2.push("ufrag"), l2.push(c.usernameFragment || c.ufrag)), "candidate:" + l2.join(" ");
  }, u2.parseIceOptions = function(c) {
    return c.substring(14).split(" ");
  }, u2.parseRtpMap = function(c) {
    let l2 = c.substring(9).split(" ");
    const v2 = {
      payloadType: parseInt(l2.shift(), 10)
      // was: id
    };
    return l2 = l2[0].split("/"), v2.name = l2[0], v2.clockRate = parseInt(l2[1], 10), v2.channels = l2.length === 3 ? parseInt(l2[2], 10) : 1, v2.numChannels = v2.channels, v2;
  }, u2.writeRtpMap = function(c) {
    let l2 = c.payloadType;
    c.preferredPayloadType !== void 0 && (l2 = c.preferredPayloadType);
    const v2 = c.channels || c.numChannels || 1;
    return "a=rtpmap:" + l2 + " " + c.name + "/" + c.clockRate + (v2 !== 1 ? "/" + v2 : "") + `\r
`;
  }, u2.parseExtmap = function(c) {
    const l2 = c.substring(9).split(" ");
    return { id: parseInt(l2[0], 10), direction: l2[0].indexOf("/") > 0 ? l2[0].split("/")[1] : "sendrecv", uri: l2[1], attributes: l2.slice(2).join(" ") };
  }, u2.writeExtmap = function(c) {
    return "a=extmap:" + (c.id || c.preferredId) + (c.direction && c.direction !== "sendrecv" ? "/" + c.direction : "") + " " + c.uri + (c.attributes ? " " + c.attributes : "") + `\r
`;
  }, u2.parseFmtp = function(c) {
    const l2 = {};
    let v2;
    const p2 = c.substring(c.indexOf(" ") + 1).split(";");
    for (let _ = 0; _ < p2.length; _++)
      v2 = p2[_].trim().split("="), l2[v2[0].trim()] = v2[1];
    return l2;
  }, u2.writeFmtp = function(c) {
    let l2 = "", v2 = c.payloadType;
    if (c.preferredPayloadType !== void 0 && (v2 = c.preferredPayloadType), c.parameters && Object.keys(c.parameters).length) {
      const p2 = [];
      Object.keys(c.parameters).forEach((_) => {
        c.parameters[_] !== void 0 ? p2.push(_ + "=" + c.parameters[_]) : p2.push(_);
      }), l2 += "a=fmtp:" + v2 + " " + p2.join(";") + `\r
`;
    }
    return l2;
  }, u2.parseRtcpFb = function(c) {
    const l2 = c.substring(c.indexOf(" ") + 1).split(" ");
    return { type: l2.shift(), parameter: l2.join(" ") };
  }, u2.writeRtcpFb = function(c) {
    let l2 = "", v2 = c.payloadType;
    return c.preferredPayloadType !== void 0 && (v2 = c.preferredPayloadType), c.rtcpFeedback && c.rtcpFeedback.length && c.rtcpFeedback.forEach((p2) => {
      l2 += "a=rtcp-fb:" + v2 + " " + p2.type + (p2.parameter && p2.parameter.length ? " " + p2.parameter : "") + `\r
`;
    }), l2;
  }, u2.parseSsrcMedia = function(c) {
    const l2 = c.indexOf(" "), v2 = { ssrc: parseInt(c.substring(7, l2), 10) }, p2 = c.indexOf(":", l2);
    return p2 > -1 ? (v2.attribute = c.substring(l2 + 1, p2), v2.value = c.substring(p2 + 1)) : v2.attribute = c.substring(l2 + 1), v2;
  }, u2.parseSsrcGroup = function(c) {
    const l2 = c.substring(13).split(" ");
    return { semantics: l2.shift(), ssrcs: l2.map((v2) => parseInt(v2, 10)) };
  }, u2.getMid = function(c) {
    const l2 = u2.matchPrefix(c, "a=mid:")[0];
    if (l2)
      return l2.substring(6);
  }, u2.parseFingerprint = function(c) {
    const l2 = c.substring(14).split(" ");
    return {
      algorithm: l2[0].toLowerCase(),
      // algorithm is case-sensitive in Edge.
      value: l2[1].toUpperCase()
      // the definition is upper-case in RFC 4572.
    };
  }, u2.getDtlsParameters = function(c, l2) {
    return { role: "auto", fingerprints: u2.matchPrefix(c + l2, "a=fingerprint:").map(u2.parseFingerprint) };
  }, u2.writeDtlsParameters = function(c, l2) {
    let v2 = "a=setup:" + l2 + `\r
`;
    return c.fingerprints.forEach((p2) => {
      v2 += "a=fingerprint:" + p2.algorithm + " " + p2.value + `\r
`;
    }), v2;
  }, u2.parseCryptoLine = function(c) {
    const l2 = c.substring(9).split(" ");
    return { tag: parseInt(l2[0], 10), cryptoSuite: l2[1], keyParams: l2[2], sessionParams: l2.slice(3) };
  }, u2.writeCryptoLine = function(c) {
    return "a=crypto:" + c.tag + " " + c.cryptoSuite + " " + (typeof c.keyParams == "object" ? u2.writeCryptoKeyParams(c.keyParams) : c.keyParams) + (c.sessionParams ? " " + c.sessionParams.join(" ") : "") + `\r
`;
  }, u2.parseCryptoKeyParams = function(c) {
    if (c.indexOf("inline:") !== 0)
      return null;
    const l2 = c.substring(7).split("|");
    return { keyMethod: "inline", keySalt: l2[0], lifeTime: l2[1], mkiValue: l2[2] ? l2[2].split(":")[0] : void 0, mkiLength: l2[2] ? l2[2].split(":")[1] : void 0 };
  }, u2.writeCryptoKeyParams = function(c) {
    return c.keyMethod + ":" + c.keySalt + (c.lifeTime ? "|" + c.lifeTime : "") + (c.mkiValue && c.mkiLength ? "|" + c.mkiValue + ":" + c.mkiLength : "");
  }, u2.getCryptoParameters = function(c, l2) {
    return u2.matchPrefix(c + l2, "a=crypto:").map(u2.parseCryptoLine);
  }, u2.getIceParameters = function(c, l2) {
    const v2 = u2.matchPrefix(c + l2, "a=ice-ufrag:")[0], p2 = u2.matchPrefix(c + l2, "a=ice-pwd:")[0];
    return v2 && p2 ? { usernameFragment: v2.substring(12), password: p2.substring(10) } : null;
  }, u2.writeIceParameters = function(c) {
    let l2 = "a=ice-ufrag:" + c.usernameFragment + `\r
a=ice-pwd:` + c.password + `\r
`;
    return c.iceLite && (l2 += `a=ice-lite\r
`), l2;
  }, u2.parseRtpParameters = function(c) {
    const l2 = { codecs: [], headerExtensions: [], fecMechanisms: [], rtcp: [] }, p2 = u2.splitLines(c)[0].split(" ");
    l2.profile = p2[2];
    for (let I2 = 3; I2 < p2.length; I2++) {
      const P2 = p2[I2], $ = u2.matchPrefix(c, "a=rtpmap:" + P2 + " ")[0];
      if ($) {
        const F2 = u2.parseRtpMap($), H2 = u2.matchPrefix(c, "a=fmtp:" + P2 + " ");
        switch (F2.parameters = H2.length ? u2.parseFmtp(H2[0]) : {}, F2.rtcpFeedback = u2.matchPrefix(c, "a=rtcp-fb:" + P2 + " ").map(u2.parseRtcpFb), l2.codecs.push(F2), F2.name.toUpperCase()) {
          case "RED":
          case "ULPFEC":
            l2.fecMechanisms.push(F2.name.toUpperCase());
            break;
        }
      }
    }
    u2.matchPrefix(c, "a=extmap:").forEach((I2) => {
      l2.headerExtensions.push(u2.parseExtmap(I2));
    });
    const _ = u2.matchPrefix(c, "a=rtcp-fb:* ").map(u2.parseRtcpFb);
    return l2.codecs.forEach((I2) => {
      _.forEach((P2) => {
        I2.rtcpFeedback.find((F2) => F2.type === P2.type && F2.parameter === P2.parameter) || I2.rtcpFeedback.push(P2);
      });
    }), l2;
  }, u2.writeRtpDescription = function(c, l2) {
    let v2 = "";
    v2 += "m=" + c + " ", v2 += l2.codecs.length > 0 ? "9" : "0", v2 += " " + (l2.profile || "UDP/TLS/RTP/SAVPF") + " ", v2 += l2.codecs.map((_) => _.preferredPayloadType !== void 0 ? _.preferredPayloadType : _.payloadType).join(" ") + `\r
`, v2 += `c=IN IP4 0.0.0.0\r
`, v2 += `a=rtcp:9 IN IP4 0.0.0.0\r
`, l2.codecs.forEach((_) => {
      v2 += u2.writeRtpMap(_), v2 += u2.writeFmtp(_), v2 += u2.writeRtcpFb(_);
    });
    let p2 = 0;
    return l2.codecs.forEach((_) => {
      _.maxptime > p2 && (p2 = _.maxptime);
    }), p2 > 0 && (v2 += "a=maxptime:" + p2 + `\r
`), l2.headerExtensions && l2.headerExtensions.forEach((_) => {
      v2 += u2.writeExtmap(_);
    }), v2;
  }, u2.parseRtpEncodingParameters = function(c) {
    const l2 = [], v2 = u2.parseRtpParameters(c), p2 = v2.fecMechanisms.indexOf("RED") !== -1, _ = v2.fecMechanisms.indexOf("ULPFEC") !== -1, I2 = u2.matchPrefix(c, "a=ssrc:").map((j) => u2.parseSsrcMedia(j)).filter((j) => j.attribute === "cname"), P2 = I2.length > 0 && I2[0].ssrc;
    let $;
    const F2 = u2.matchPrefix(c, "a=ssrc-group:FID").map((j) => j.substring(17).split(" ").map((X2) => parseInt(X2, 10)));
    F2.length > 0 && F2[0].length > 1 && F2[0][0] === P2 && ($ = F2[0][1]), v2.codecs.forEach((j) => {
      if (j.name.toUpperCase() === "RTX" && j.parameters.apt) {
        let ee2 = { ssrc: P2, codecPayloadType: parseInt(j.parameters.apt, 10) };
        P2 && $ && (ee2.rtx = { ssrc: $ }), l2.push(ee2), p2 && (ee2 = JSON.parse(JSON.stringify(ee2)), ee2.fec = { ssrc: P2, mechanism: _ ? "red+ulpfec" : "red" }, l2.push(ee2));
      }
    }), l2.length === 0 && P2 && l2.push({ ssrc: P2 });
    let H2 = u2.matchPrefix(c, "b=");
    return H2.length && (H2[0].indexOf("b=TIAS:") === 0 ? H2 = parseInt(H2[0].substring(7), 10) : H2[0].indexOf("b=AS:") === 0 ? H2 = parseInt(H2[0].substring(5), 10) * 1e3 * 0.95 - 50 * 40 * 8 : H2 = void 0, l2.forEach((j) => {
      j.maxBitrate = H2;
    })), l2;
  }, u2.parseRtcpParameters = function(c) {
    const l2 = {}, v2 = u2.matchPrefix(c, "a=ssrc:").map((I2) => u2.parseSsrcMedia(I2)).filter((I2) => I2.attribute === "cname")[0];
    v2 && (l2.cname = v2.value, l2.ssrc = v2.ssrc);
    const p2 = u2.matchPrefix(c, "a=rtcp-rsize");
    l2.reducedSize = p2.length > 0, l2.compound = p2.length === 0;
    const _ = u2.matchPrefix(c, "a=rtcp-mux");
    return l2.mux = _.length > 0, l2;
  }, u2.writeRtcpParameters = function(c) {
    let l2 = "";
    return c.reducedSize && (l2 += `a=rtcp-rsize\r
`), c.mux && (l2 += `a=rtcp-mux\r
`), c.ssrc !== void 0 && c.cname && (l2 += "a=ssrc:" + c.ssrc + " cname:" + c.cname + `\r
`), l2;
  }, u2.parseMsid = function(c) {
    let l2;
    const v2 = u2.matchPrefix(c, "a=msid:");
    if (v2.length === 1)
      return l2 = v2[0].substring(7).split(" "), { stream: l2[0], track: l2[1] };
    const p2 = u2.matchPrefix(c, "a=ssrc:").map((_) => u2.parseSsrcMedia(_)).filter((_) => _.attribute === "msid");
    if (p2.length > 0)
      return l2 = p2[0].value.split(" "), { stream: l2[0], track: l2[1] };
  }, u2.parseSctpDescription = function(c) {
    const l2 = u2.parseMLine(c), v2 = u2.matchPrefix(c, "a=max-message-size:");
    let p2;
    v2.length > 0 && (p2 = parseInt(v2[0].substring(19), 10)), isNaN(p2) && (p2 = 65536);
    const _ = u2.matchPrefix(c, "a=sctp-port:");
    if (_.length > 0)
      return { port: parseInt(_[0].substring(12), 10), protocol: l2.fmt, maxMessageSize: p2 };
    const I2 = u2.matchPrefix(c, "a=sctpmap:");
    if (I2.length > 0) {
      const P2 = I2[0].substring(10).split(" ");
      return { port: parseInt(P2[0], 10), protocol: P2[1], maxMessageSize: p2 };
    }
  }, u2.writeSctpDescription = function(c, l2) {
    let v2 = [];
    return c.protocol !== "DTLS/SCTP" ? v2 = ["m=" + c.kind + " 9 " + c.protocol + " " + l2.protocol + `\r
`, `c=IN IP4 0.0.0.0\r
`, "a=sctp-port:" + l2.port + `\r
`] : v2 = ["m=" + c.kind + " 9 " + c.protocol + " " + l2.port + `\r
`, `c=IN IP4 0.0.0.0\r
`, "a=sctpmap:" + l2.port + " " + l2.protocol + ` 65535\r
`], l2.maxMessageSize !== void 0 && v2.push("a=max-message-size:" + l2.maxMessageSize + `\r
`), v2.join("");
  }, u2.generateSessionId = function() {
    return Math.random().toString().substr(2, 22);
  }, u2.writeSessionBoilerplate = function(c, l2, v2) {
    let p2;
    const _ = l2 !== void 0 ? l2 : 2;
    return c ? p2 = c : p2 = u2.generateSessionId(), `v=0\r
o=` + (v2 || "thisisadapterortc") + " " + p2 + " " + _ + ` IN IP4 127.0.0.1\r
s=-\r
t=0 0\r
`;
  }, u2.getDirection = function(c, l2) {
    const v2 = u2.splitLines(c);
    for (let p2 = 0; p2 < v2.length; p2++)
      switch (v2[p2]) {
        case "a=sendrecv":
        case "a=sendonly":
        case "a=recvonly":
        case "a=inactive":
          return v2[p2].substring(2);
      }
    return l2 ? u2.getDirection(l2) : "sendrecv";
  }, u2.getKind = function(c) {
    return u2.splitLines(c)[0].split(" ")[0].substring(2);
  }, u2.isRejected = function(c) {
    return c.split(" ", 2)[1] === "0";
  }, u2.parseMLine = function(c) {
    const v2 = u2.splitLines(c)[0].substring(2).split(" ");
    return { kind: v2[0], port: parseInt(v2[1], 10), protocol: v2[2], fmt: v2.slice(3).join(" ") };
  }, u2.parseOLine = function(c) {
    const v2 = u2.matchPrefix(c, "o=")[0].substring(2).split(" ");
    return { username: v2[0], sessionId: v2[1], sessionVersion: parseInt(v2[2], 10), netType: v2[3], addressType: v2[4], address: v2[5] };
  }, u2.isValidSDP = function(c) {
    if (typeof c != "string" || c.length === 0)
      return false;
    const l2 = u2.splitLines(c);
    for (let v2 = 0; v2 < l2.length; v2++)
      if (l2[v2].length < 2 || l2[v2].charAt(1) !== "=")
        return false;
    return true;
  }, a420.exports = u2;
})(sdp$1);
var sdpExports = sdp$1.exports, SDPUtils = /* @__PURE__ */ getDefaultExportFromCjs(sdpExports), sdp = /* @__PURE__ */ _mergeNamespaces({ __proto__: null, default: SDPUtils }, [sdpExports]);
function shimRTCIceCandidate(a420) {
  if (!a420.RTCIceCandidate || a420.RTCIceCandidate && "foundation" in a420.RTCIceCandidate.prototype)
    return;
  const u2 = a420.RTCIceCandidate;
  a420.RTCIceCandidate = function(l2) {
    if (typeof l2 == "object" && l2.candidate && l2.candidate.indexOf("a=") === 0 && (l2 = JSON.parse(JSON.stringify(l2)), l2.candidate = l2.candidate.substring(2)), l2.candidate && l2.candidate.length) {
      const v2 = new u2(l2), p2 = SDPUtils.parseCandidate(l2.candidate);
      for (const _ in p2)
        _ in v2 || Object.defineProperty(v2, _, { value: p2[_] });
      return v2.toJSON = function() {
        return { candidate: v2.candidate, sdpMid: v2.sdpMid, sdpMLineIndex: v2.sdpMLineIndex, usernameFragment: v2.usernameFragment };
      }, v2;
    }
    return new u2(l2);
  }, a420.RTCIceCandidate.prototype = u2.prototype, wrapPeerConnectionEvent(a420, "icecandidate", (c) => (c.candidate && Object.defineProperty(c, "candidate", { value: new a420.RTCIceCandidate(c.candidate), writable: "false" }), c));
}
function shimRTCIceCandidateRelayProtocol(a420) {
  !a420.RTCIceCandidate || a420.RTCIceCandidate && "relayProtocol" in a420.RTCIceCandidate.prototype || wrapPeerConnectionEvent(a420, "icecandidate", (u2) => {
    if (u2.candidate) {
      const c = SDPUtils.parseCandidate(u2.candidate.candidate);
      c.type === "relay" && (u2.candidate.relayProtocol = { 0: "tls", 1: "tcp", 2: "udp" }[c.priority >> 24]);
    }
    return u2;
  });
}
function shimMaxMessageSize(a420, u2) {
  if (!a420.RTCPeerConnection)
    return;
  "sctp" in a420.RTCPeerConnection.prototype || Object.defineProperty(a420.RTCPeerConnection.prototype, "sctp", { get() {
    return typeof this._sctp > "u" ? null : this._sctp;
  } });
  const c = function(I2) {
    if (!I2 || !I2.sdp)
      return false;
    const P2 = SDPUtils.splitSections(I2.sdp);
    return P2.shift(), P2.some(($) => {
      const F2 = SDPUtils.parseMLine($);
      return F2 && F2.kind === "application" && F2.protocol.indexOf("SCTP") !== -1;
    });
  }, l2 = function(I2) {
    const P2 = I2.sdp.match(/mozilla...THIS_IS_SDPARTA-(\d+)/);
    if (P2 === null || P2.length < 2)
      return -1;
    const $ = parseInt(P2[1], 10);
    return $ !== $ ? -1 : $;
  }, v2 = function(I2) {
    let P2 = 65536;
    return u2.browser === "firefox" && (u2.version < 57 ? I2 === -1 ? P2 = 16384 : P2 = 2147483637 : u2.version < 60 ? P2 = u2.version === 57 ? 65535 : 65536 : P2 = 2147483637), P2;
  }, p2 = function(I2, P2) {
    let $ = 65536;
    u2.browser === "firefox" && u2.version === 57 && ($ = 65535);
    const F2 = SDPUtils.matchPrefix(I2.sdp, "a=max-message-size:");
    return F2.length > 0 ? $ = parseInt(F2[0].substring(19), 10) : u2.browser === "firefox" && P2 !== -1 && ($ = 2147483637), $;
  }, _ = a420.RTCPeerConnection.prototype.setRemoteDescription;
  a420.RTCPeerConnection.prototype.setRemoteDescription = function() {
    if (this._sctp = null, u2.browser === "chrome" && u2.version >= 76) {
      const { sdpSemantics: P2 } = this.getConfiguration();
      P2 === "plan-b" && Object.defineProperty(this, "sctp", { get() {
        return typeof this._sctp > "u" ? null : this._sctp;
      }, enumerable: true, configurable: true });
    }
    if (c(arguments[0])) {
      const P2 = l2(arguments[0]), $ = v2(P2), F2 = p2(arguments[0], P2);
      let H2;
      $ === 0 && F2 === 0 ? H2 = Number.POSITIVE_INFINITY : $ === 0 || F2 === 0 ? H2 = Math.max($, F2) : H2 = Math.min($, F2);
      const j = {};
      Object.defineProperty(j, "maxMessageSize", { get() {
        return H2;
      } }), this._sctp = j;
    }
    return _.apply(this, arguments);
  };
}
function shimSendThrowTypeError(a420) {
  if (!(a420.RTCPeerConnection && "createDataChannel" in a420.RTCPeerConnection.prototype))
    return;
  function u2(l2, v2) {
    const p2 = l2.send;
    l2.send = function() {
      const I2 = arguments[0], P2 = I2.length || I2.size || I2.byteLength;
      if (l2.readyState === "open" && v2.sctp && P2 > v2.sctp.maxMessageSize)
        throw new TypeError("Message too large (can send a maximum of " + v2.sctp.maxMessageSize + " bytes)");
      return p2.apply(l2, arguments);
    };
  }
  const c = a420.RTCPeerConnection.prototype.createDataChannel;
  a420.RTCPeerConnection.prototype.createDataChannel = function() {
    const v2 = c.apply(this, arguments);
    return u2(v2, this), v2;
  }, wrapPeerConnectionEvent(a420, "datachannel", (l2) => (u2(l2.channel, l2.target), l2));
}
function shimConnectionState(a420) {
  if (!a420.RTCPeerConnection || "connectionState" in a420.RTCPeerConnection.prototype)
    return;
  const u2 = a420.RTCPeerConnection.prototype;
  Object.defineProperty(u2, "connectionState", { get() {
    return { completed: "connected", checking: "connecting" }[this.iceConnectionState] || this.iceConnectionState;
  }, enumerable: true, configurable: true }), Object.defineProperty(u2, "onconnectionstatechange", { get() {
    return this._onconnectionstatechange || null;
  }, set(c) {
    this._onconnectionstatechange && (this.removeEventListener("connectionstatechange", this._onconnectionstatechange), delete this._onconnectionstatechange), c && this.addEventListener("connectionstatechange", this._onconnectionstatechange = c);
  }, enumerable: true, configurable: true }), ["setLocalDescription", "setRemoteDescription"].forEach((c) => {
    const l2 = u2[c];
    u2[c] = function() {
      return this._connectionstatechangepoly || (this._connectionstatechangepoly = (v2) => {
        const p2 = v2.target;
        if (p2._lastConnectionState !== p2.connectionState) {
          p2._lastConnectionState = p2.connectionState;
          const _ = new Event("connectionstatechange", v2);
          p2.dispatchEvent(_);
        }
        return v2;
      }, this.addEventListener("iceconnectionstatechange", this._connectionstatechangepoly)), l2.apply(this, arguments);
    };
  });
}
function removeExtmapAllowMixed(a420, u2) {
  if (!a420.RTCPeerConnection || u2.browser === "chrome" && u2.version >= 71 || u2.browser === "safari" && u2.version >= 605)
    return;
  const c = a420.RTCPeerConnection.prototype.setRemoteDescription;
  a420.RTCPeerConnection.prototype.setRemoteDescription = function(v2) {
    if (v2 && v2.sdp && v2.sdp.indexOf(`
a=extmap-allow-mixed`) !== -1) {
      const p2 = v2.sdp.split(`
`).filter((_) => _.trim() !== "a=extmap-allow-mixed").join(`
`);
      a420.RTCSessionDescription && v2 instanceof a420.RTCSessionDescription ? arguments[0] = new a420.RTCSessionDescription({ type: v2.type, sdp: p2 }) : v2.sdp = p2;
    }
    return c.apply(this, arguments);
  };
}
function shimAddIceCandidateNullOrEmpty(a420, u2) {
  if (!(a420.RTCPeerConnection && a420.RTCPeerConnection.prototype))
    return;
  const c = a420.RTCPeerConnection.prototype.addIceCandidate;
  !c || c.length === 0 || (a420.RTCPeerConnection.prototype.addIceCandidate = function() {
    return arguments[0] ? (u2.browser === "chrome" && u2.version < 78 || u2.browser === "firefox" && u2.version < 68 || u2.browser === "safari") && arguments[0] && arguments[0].candidate === "" ? Promise.resolve() : c.apply(this, arguments) : (arguments[1] && arguments[1].apply(null), Promise.resolve());
  });
}
function shimParameterlessSetLocalDescription(a420, u2) {
  if (!(a420.RTCPeerConnection && a420.RTCPeerConnection.prototype))
    return;
  const c = a420.RTCPeerConnection.prototype.setLocalDescription;
  !c || c.length === 0 || (a420.RTCPeerConnection.prototype.setLocalDescription = function() {
    let v2 = arguments[0] || {};
    if (typeof v2 != "object" || v2.type && v2.sdp)
      return c.apply(this, arguments);
    if (v2 = { type: v2.type, sdp: v2.sdp }, !v2.type)
      switch (this.signalingState) {
        case "stable":
        case "have-local-offer":
        case "have-remote-pranswer":
          v2.type = "offer";
          break;
        default:
          v2.type = "answer";
          break;
      }
    return v2.sdp || v2.type !== "offer" && v2.type !== "answer" ? c.apply(this, [v2]) : (v2.type === "offer" ? this.createOffer : this.createAnswer).apply(this).then((_) => c.apply(this, [_]));
  });
}
var commonShim = /* @__PURE__ */ Object.freeze({ __proto__: null, removeExtmapAllowMixed, shimAddIceCandidateNullOrEmpty, shimConnectionState, shimMaxMessageSize, shimParameterlessSetLocalDescription, shimRTCIceCandidate, shimRTCIceCandidateRelayProtocol, shimSendThrowTypeError });
function adapterFactory() {
  let { window: a420 } = arguments.length > 0 && arguments[0] !== void 0 ? arguments[0] : {}, u2 = arguments.length > 1 && arguments[1] !== void 0 ? arguments[1] : { shimChrome: true, shimFirefox: true, shimSafari: true };
  const c = log, l2 = detectBrowser(a420), v2 = {
    browserDetails: l2,
    commonShim,
    extractVersion,
    disableLog,
    disableWarnings,
    // Expose sdp as a convenience. For production apps include directly.
    sdp
  };
  switch (l2.browser) {
    case "chrome":
      if (!chromeShim || !shimPeerConnection$1 || !u2.shimChrome)
        return c("Chrome shim is not included in this adapter release."), v2;
      if (l2.version === null)
        return c("Chrome shim can not determine version, not shimming."), v2;
      c("adapter.js shimming chrome."), v2.browserShim = chromeShim, shimAddIceCandidateNullOrEmpty(a420, l2), shimParameterlessSetLocalDescription(a420), shimGetUserMedia$2(a420, l2), shimMediaStream(a420), shimPeerConnection$1(a420, l2), shimOnTrack$1(a420), shimAddTrackRemoveTrack(a420, l2), shimGetSendersWithDtmf(a420), shimGetStats(a420), shimSenderReceiverGetStats(a420), fixNegotiationNeeded(a420, l2), shimRTCIceCandidate(a420), shimRTCIceCandidateRelayProtocol(a420), shimConnectionState(a420), shimMaxMessageSize(a420, l2), shimSendThrowTypeError(a420), removeExtmapAllowMixed(a420, l2);
      break;
    case "firefox":
      if (!firefoxShim || !shimPeerConnection || !u2.shimFirefox)
        return c("Firefox shim is not included in this adapter release."), v2;
      c("adapter.js shimming firefox."), v2.browserShim = firefoxShim, shimAddIceCandidateNullOrEmpty(a420, l2), shimParameterlessSetLocalDescription(a420), shimGetUserMedia$1(a420, l2), shimPeerConnection(a420, l2), shimOnTrack(a420), shimRemoveStream(a420), shimSenderGetStats(a420), shimReceiverGetStats(a420), shimRTCDataChannel(a420), shimAddTransceiver(a420), shimGetParameters(a420), shimCreateOffer(a420), shimCreateAnswer(a420), shimRTCIceCandidate(a420), shimConnectionState(a420), shimMaxMessageSize(a420, l2), shimSendThrowTypeError(a420);
      break;
    case "safari":
      if (!safariShim || !u2.shimSafari)
        return c("Safari shim is not included in this adapter release."), v2;
      c("adapter.js shimming safari."), v2.browserShim = safariShim, shimAddIceCandidateNullOrEmpty(a420, l2), shimParameterlessSetLocalDescription(a420), shimRTCIceServerUrls(a420), shimCreateOfferLegacy(a420), shimCallbacksAPI(a420), shimLocalStreamsAPI(a420), shimRemoteStreamsAPI(a420), shimTrackEventTransceiver(a420), shimGetUserMedia(a420), shimAudioContext(a420), shimRTCIceCandidate(a420), shimRTCIceCandidateRelayProtocol(a420), shimMaxMessageSize(a420, l2), shimSendThrowTypeError(a420), removeExtmapAllowMixed(a420, l2);
      break;
    default:
      c("Unsupported browser!");
      break;
  }
  return v2;
}
adapterFactory({ window: typeof window > "u" ? void 0 : window });
const DECRYPTION_FAILURE_TOLERANCE = 10, E2EE_FLAG = "lk_e2ee", SALT = "LKFrameEncryptionKey", KEY_PROVIDER_DEFAULTS = { sharedKey: false, ratchetSalt: SALT, ratchetWindowSize: 8, failureTolerance: DECRYPTION_FAILURE_TOLERANCE };
var KeyProviderEvent;
(function(a420) {
  a420.SetKey = "setKey", a420.RatchetRequest = "ratchetRequest", a420.KeyRatcheted = "keyRatcheted";
})(KeyProviderEvent || (KeyProviderEvent = {}));
var KeyHandlerEvent;
(function(a420) {
  a420.KeyRatcheted = "keyRatcheted";
})(KeyHandlerEvent || (KeyHandlerEvent = {}));
var EncryptionEvent;
(function(a420) {
  a420.ParticipantEncryptionStatusChanged = "participantEncryptionStatusChanged", a420.EncryptionError = "encryptionError";
})(EncryptionEvent || (EncryptionEvent = {}));
var CryptorEvent;
(function(a420) {
  a420.Error = "cryptorError";
})(CryptorEvent || (CryptorEvent = {}));
function isE2EESupported() {
  return isInsertableStreamSupported() || isScriptTransformSupported();
}
function isScriptTransformSupported() {
  return typeof window.RTCRtpScriptTransform < "u";
}
function isInsertableStreamSupported() {
  return typeof window.RTCRtpSender < "u" && // @ts-ignore
  typeof window.RTCRtpSender.prototype.createEncodedStreams < "u";
}
class BaseKeyProvider extends eventsExports.EventEmitter {
  constructor() {
    let u2 = arguments.length > 0 && arguments[0] !== void 0 ? arguments[0] : {};
    super(), this.onKeyRatcheted = (c, l2) => {
      livekitLogger.debug("key ratcheted event received", { material: c, keyIndex: l2 });
    }, this.keyInfoMap = /* @__PURE__ */ new Map(), this.options = Object.assign(Object.assign({}, KEY_PROVIDER_DEFAULTS), u2), this.on(KeyProviderEvent.KeyRatcheted, this.onKeyRatcheted);
  }
  /**
  * callback to invoke once a key has been set for a participant
  * @param key
  * @param participantIdentity
  * @param keyIndex
  */
  onSetEncryptionKey(u2, c, l2) {
    const v2 = { key: u2, participantIdentity: c, keyIndex: l2 };
    this.keyInfoMap.set("".concat(c ?? "shared", "-").concat(l2 ?? 0), v2), this.emit(KeyProviderEvent.SetKey, v2);
  }
  getKeys() {
    return Array.from(this.keyInfoMap.values());
  }
  getOptions() {
    return this.options;
  }
  ratchetKey(u2, c) {
    this.emit(KeyProviderEvent.RatchetRequest, u2, c);
  }
}
class LivekitError extends Error {
  constructor(u2, c) {
    super(c || "an error has occured"), this.code = u2;
  }
}
class ConnectionError extends LivekitError {
  constructor(u2, c, l2) {
    super(1, u2), this.status = l2, this.reason = c;
  }
}
class DeviceUnsupportedError extends LivekitError {
  constructor(u2) {
    super(21, u2 ?? "device is unsupported");
  }
}
class TrackInvalidError extends LivekitError {
  constructor(u2) {
    super(20, u2 ?? "track is invalid");
  }
}
class UnsupportedServer extends LivekitError {
  constructor(u2) {
    super(10, u2 ?? "unsupported server");
  }
}
class UnexpectedConnectionState extends LivekitError {
  constructor(u2) {
    super(12, u2 ?? "unexpected connection state");
  }
}
class NegotiationError extends LivekitError {
  constructor(u2) {
    super(13, u2 ?? "unable to negotiate");
  }
}
var MediaDeviceFailure;
(function(a420) {
  a420.PermissionDenied = "PermissionDenied", a420.NotFound = "NotFound", a420.DeviceInUse = "DeviceInUse", a420.Other = "Other";
})(MediaDeviceFailure || (MediaDeviceFailure = {}));
(function(a420) {
  function u2(c) {
    if (c && "name" in c)
      return c.name === "NotFoundError" || c.name === "DevicesNotFoundError" ? a420.NotFound : c.name === "NotAllowedError" || c.name === "PermissionDeniedError" ? a420.PermissionDenied : c.name === "NotReadableError" || c.name === "TrackStartError" ? a420.DeviceInUse : a420.Other;
  }
  a420.getFailure = u2;
})(MediaDeviceFailure || (MediaDeviceFailure = {}));
var RoomEvent;
(function(a420) {
  a420.Connected = "connected", a420.Reconnecting = "reconnecting", a420.Reconnected = "reconnected", a420.Disconnected = "disconnected", a420.ConnectionStateChanged = "connectionStateChanged", a420.MediaDevicesChanged = "mediaDevicesChanged", a420.ParticipantConnected = "participantConnected", a420.ParticipantDisconnected = "participantDisconnected", a420.TrackPublished = "trackPublished", a420.TrackSubscribed = "trackSubscribed", a420.TrackSubscriptionFailed = "trackSubscriptionFailed", a420.TrackUnpublished = "trackUnpublished", a420.TrackUnsubscribed = "trackUnsubscribed", a420.TrackMuted = "trackMuted", a420.TrackUnmuted = "trackUnmuted", a420.LocalTrackPublished = "localTrackPublished", a420.LocalTrackUnpublished = "localTrackUnpublished", a420.LocalAudioSilenceDetected = "localAudioSilenceDetected", a420.ActiveSpeakersChanged = "activeSpeakersChanged", a420.ParticipantMetadataChanged = "participantMetadataChanged", a420.ParticipantNameChanged = "participantNameChanged", a420.RoomMetadataChanged = "roomMetadataChanged", a420.DataReceived = "dataReceived", a420.ConnectionQualityChanged = "connectionQualityChanged", a420.TrackStreamStateChanged = "trackStreamStateChanged", a420.TrackSubscriptionPermissionChanged = "trackSubscriptionPermissionChanged", a420.TrackSubscriptionStatusChanged = "trackSubscriptionStatusChanged", a420.AudioPlaybackStatusChanged = "audioPlaybackChanged", a420.VideoPlaybackStatusChanged = "videoPlaybackChanged", a420.MediaDevicesError = "mediaDevicesError", a420.ParticipantPermissionsChanged = "participantPermissionsChanged", a420.SignalConnected = "signalConnected", a420.RecordingStatusChanged = "recordingStatusChanged", a420.ParticipantEncryptionStatusChanged = "participantEncryptionStatusChanged", a420.EncryptionError = "encryptionError", a420.DCBufferStatusChanged = "dcBufferStatusChanged", a420.ActiveDeviceChanged = "activeDeviceChanged";
})(RoomEvent || (RoomEvent = {}));
var ParticipantEvent;
(function(a420) {
  a420.TrackPublished = "trackPublished", a420.TrackSubscribed = "trackSubscribed", a420.TrackSubscriptionFailed = "trackSubscriptionFailed", a420.TrackUnpublished = "trackUnpublished", a420.TrackUnsubscribed = "trackUnsubscribed", a420.TrackMuted = "trackMuted", a420.TrackUnmuted = "trackUnmuted", a420.LocalTrackPublished = "localTrackPublished", a420.LocalTrackUnpublished = "localTrackUnpublished", a420.ParticipantMetadataChanged = "participantMetadataChanged", a420.ParticipantNameChanged = "participantNameChanged", a420.DataReceived = "dataReceived", a420.IsSpeakingChanged = "isSpeakingChanged", a420.ConnectionQualityChanged = "connectionQualityChanged", a420.TrackStreamStateChanged = "trackStreamStateChanged", a420.TrackSubscriptionPermissionChanged = "trackSubscriptionPermissionChanged", a420.TrackSubscriptionStatusChanged = "trackSubscriptionStatusChanged", a420.MediaDevicesError = "mediaDevicesError", a420.AudioStreamAcquired = "audioStreamAcquired", a420.ParticipantPermissionsChanged = "participantPermissionsChanged", a420.PCTrackAdded = "pcTrackAdded";
})(ParticipantEvent || (ParticipantEvent = {}));
var EngineEvent;
(function(a420) {
  a420.TransportsCreated = "transportsCreated", a420.Connected = "connected", a420.Disconnected = "disconnected", a420.Resuming = "resuming", a420.Resumed = "resumed", a420.Restarting = "restarting", a420.Restarted = "restarted", a420.SignalResumed = "signalResumed", a420.SignalRestarted = "signalRestarted", a420.Closing = "closing", a420.MediaTrackAdded = "mediaTrackAdded", a420.ActiveSpeakersUpdate = "activeSpeakersUpdate", a420.DataPacketReceived = "dataPacketReceived", a420.RTPVideoMapUpdate = "rtpVideoMapUpdate", a420.DCBufferStatusChanged = "dcBufferStatusChanged", a420.ParticipantUpdate = "participantUpdate", a420.RoomUpdate = "roomUpdate", a420.SpeakersChanged = "speakersChanged", a420.StreamStateChanged = "streamStateChanged", a420.ConnectionQualityUpdate = "connectionQualityUpdate", a420.SubscriptionError = "subscriptionError", a420.SubscriptionPermissionUpdate = "subscriptionPermissionUpdate", a420.RemoteMute = "remoteMute", a420.SubscribedQualityUpdate = "subscribedQualityUpdate", a420.LocalTrackUnpublished = "localTrackUnpublished";
})(EngineEvent || (EngineEvent = {}));
var TrackEvent;
(function(a420) {
  a420.Message = "message", a420.Muted = "muted", a420.Unmuted = "unmuted", a420.Restarted = "restarted", a420.Ended = "ended", a420.Subscribed = "subscribed", a420.Unsubscribed = "unsubscribed", a420.UpdateSettings = "updateSettings", a420.UpdateSubscription = "updateSubscription", a420.AudioPlaybackStarted = "audioPlaybackStarted", a420.AudioPlaybackFailed = "audioPlaybackFailed", a420.AudioSilenceDetected = "audioSilenceDetected", a420.VisibilityChanged = "visibilityChanged", a420.VideoDimensionsChanged = "videoDimensionsChanged", a420.VideoPlaybackStarted = "videoPlaybackStarted", a420.VideoPlaybackFailed = "videoPlaybackFailed", a420.ElementAttached = "elementAttached", a420.ElementDetached = "elementDetached", a420.UpstreamPaused = "upstreamPaused", a420.UpstreamResumed = "upstreamResumed", a420.SubscriptionPermissionChanged = "subscriptionPermissionChanged", a420.SubscriptionStatusChanged = "subscriptionStatusChanged", a420.SubscriptionFailed = "subscriptionFailed";
})(TrackEvent || (TrackEvent = {}));
function r(a420, u2, c) {
  var l2, v2, p2;
  u2 === void 0 && (u2 = 50), c === void 0 && (c = {});
  var _ = (l2 = c.isImmediate) != null && l2, I2 = (v2 = c.callback) != null && v2, P2 = c.maxWait, $ = Date.now(), F2 = [];
  function H2() {
    if (P2 !== void 0) {
      var ee2 = Date.now() - $;
      if (ee2 + u2 >= P2)
        return P2 - ee2;
    }
    return u2;
  }
  var j = function() {
    var ee2 = [].slice.call(arguments), X2 = this;
    return new Promise(function(ie2, Q2) {
      var ne2 = _ && p2 === void 0;
      if (p2 !== void 0 && clearTimeout(p2), p2 = setTimeout(function() {
        if (p2 = void 0, $ = Date.now(), !_) {
          var de2 = a420.apply(X2, ee2);
          I2 && I2(de2), F2.forEach(function(pe2) {
            return (0, pe2.resolve)(de2);
          }), F2 = [];
        }
      }, H2()), ne2) {
        var Z2 = a420.apply(X2, ee2);
        return I2 && I2(Z2), ie2(Z2);
      }
      F2.push({ resolve: ie2, reject: Q2 });
    });
  };
  return j.cancel = function(ee2) {
    p2 !== void 0 && clearTimeout(p2), F2.forEach(function(X2) {
      return (0, X2.reject)(ee2);
    }), F2 = [];
  }, j;
}
const commonVersionIdentifier = /version\/(\d+(\.?_?\d+)+)/i;
let browserDetails;
function getBrowser(a420) {
  let u2 = arguments.length > 1 && arguments[1] !== void 0 ? arguments[1] : true;
  if (typeof a420 > "u" && typeof navigator > "u")
    return;
  const c = (a420 ?? navigator.userAgent).toLowerCase();
  if (browserDetails === void 0 || u2) {
    const l2 = browsersList.find((v2) => {
      let { test: p2 } = v2;
      return p2.test(c);
    });
    browserDetails = l2 == null ? void 0 : l2.describe(c);
  }
  return browserDetails;
}
const browsersList = [
  { test: /firefox|iceweasel|fxios/i, describe(a420) {
    return { name: "Firefox", version: getMatch(/(?:firefox|iceweasel|fxios)[\s/](\d+(\.?_?\d+)+)/i, a420), os: a420.toLowerCase().includes("fxios") ? "iOS" : void 0 };
  } },
  { test: /chrom|crios|crmo/i, describe(a420) {
    return { name: "Chrome", version: getMatch(/(?:chrome|chromium|crios|crmo)\/(\d+(\.?_?\d+)+)/i, a420), os: a420.toLowerCase().includes("crios") ? "iOS" : void 0 };
  } },
  /* Safari */
  { test: /safari|applewebkit/i, describe(a420) {
    return { name: "Safari", version: getMatch(commonVersionIdentifier, a420), os: a420.includes("mobile/") ? "iOS" : "macOS" };
  } }
];
function getMatch(a420, u2) {
  let c = arguments.length > 2 && arguments[2] !== void 0 ? arguments[2] : 1;
  const l2 = u2.match(a420);
  return l2 && l2.length >= c && l2[c] || "";
}
var version$1 = "2.0.1";
const version = version$1, protocolVersion = 12;
class CriticalTimers {
}
CriticalTimers.setTimeout = function() {
  return setTimeout(...arguments);
};
CriticalTimers.setInterval = function() {
  return setInterval(...arguments);
};
CriticalTimers.clearTimeout = function() {
  return clearTimeout(...arguments);
};
CriticalTimers.clearInterval = function() {
  return clearInterval(...arguments);
};
class VideoPreset {
  constructor(u2, c, l2, v2, p2) {
    this.width = u2, this.height = c, this.encoding = { maxBitrate: l2, maxFramerate: v2, priority: p2 };
  }
  get resolution() {
    return { width: this.width, height: this.height, frameRate: this.encoding.maxFramerate, aspectRatio: this.width / this.height };
  }
}
const backupCodecs = ["vp8", "h264"], videoCodecs = ["vp8", "h264", "vp9", "av1"];
function isBackupCodec(a420) {
  return !!backupCodecs.find((u2) => u2 === a420);
}
var AudioPresets;
(function(a420) {
  a420.telephone = { maxBitrate: 12e3 }, a420.speech = { maxBitrate: 2e4 }, a420.music = { maxBitrate: 32e3 }, a420.musicStereo = { maxBitrate: 48e3 }, a420.musicHighQuality = { maxBitrate: 64e3 }, a420.musicHighQualityStereo = { maxBitrate: 96e3 };
})(AudioPresets || (AudioPresets = {}));
const VideoPresets = { h90: new VideoPreset(160, 90, 9e4, 20), h180: new VideoPreset(320, 180, 16e4, 20), h216: new VideoPreset(384, 216, 18e4, 20), h360: new VideoPreset(640, 360, 45e4, 20), h540: new VideoPreset(960, 540, 8e5, 25), h720: new VideoPreset(1280, 720, 17e5, 30), h1080: new VideoPreset(1920, 1080, 3e6, 30), h1440: new VideoPreset(2560, 1440, 5e6, 30), h2160: new VideoPreset(3840, 2160, 8e6, 30) }, VideoPresets43 = { h120: new VideoPreset(160, 120, 7e4, 20), h180: new VideoPreset(240, 180, 125e3, 20), h240: new VideoPreset(320, 240, 14e4, 20), h360: new VideoPreset(480, 360, 33e4, 20), h480: new VideoPreset(640, 480, 5e5, 20), h540: new VideoPreset(720, 540, 6e5, 25), h720: new VideoPreset(960, 720, 13e5, 30), h1080: new VideoPreset(1440, 1080, 23e5, 30), h1440: new VideoPreset(1920, 1440, 38e5, 30) }, ScreenSharePresets = {
  h360fps3: new VideoPreset(640, 360, 2e5, 3, "medium"),
  h360fps15: new VideoPreset(640, 360, 4e5, 15, "medium"),
  h720fps5: new VideoPreset(1280, 720, 8e5, 5, "medium"),
  h720fps15: new VideoPreset(1280, 720, 15e5, 15, "medium"),
  h720fps30: new VideoPreset(1280, 720, 2e6, 30, "medium"),
  h1080fps15: new VideoPreset(1920, 1080, 25e5, 15, "medium"),
  h1080fps30: new VideoPreset(1920, 1080, 5e6, 30, "medium"),
  // original resolution, without resizing
  original: new VideoPreset(0, 0, 7e6, 30, "medium")
};
var SignalTarget;
(function(a420) {
  a420[a420.PUBLISHER = 0] = "PUBLISHER", a420[a420.SUBSCRIBER = 1] = "SUBSCRIBER";
})(SignalTarget || (SignalTarget = {}));
proto3.util.setEnumType(SignalTarget, "livekit.SignalTarget", [{ no: 0, name: "PUBLISHER" }, { no: 1, name: "SUBSCRIBER" }]);
var StreamState;
(function(a420) {
  a420[a420.ACTIVE = 0] = "ACTIVE", a420[a420.PAUSED = 1] = "PAUSED";
})(StreamState || (StreamState = {}));
proto3.util.setEnumType(StreamState, "livekit.StreamState", [{ no: 0, name: "ACTIVE" }, { no: 1, name: "PAUSED" }]);
var CandidateProtocol;
(function(a420) {
  a420[a420.UDP = 0] = "UDP", a420[a420.TCP = 1] = "TCP", a420[a420.TLS = 2] = "TLS";
})(CandidateProtocol || (CandidateProtocol = {}));
proto3.util.setEnumType(CandidateProtocol, "livekit.CandidateProtocol", [{ no: 0, name: "UDP" }, { no: 1, name: "TCP" }, { no: 2, name: "TLS" }]);
class SignalRequest extends Message {
  constructor(u2) {
    super(), this.message = { case: void 0 }, proto3.util.initPartial(u2, this);
  }
  static fromBinary(u2, c) {
    return new SignalRequest().fromBinary(u2, c);
  }
  static fromJson(u2, c) {
    return new SignalRequest().fromJson(u2, c);
  }
  static fromJsonString(u2, c) {
    return new SignalRequest().fromJsonString(u2, c);
  }
  static equals(u2, c) {
    return proto3.util.equals(SignalRequest, u2, c);
  }
}
SignalRequest.runtime = proto3;
SignalRequest.typeName = "livekit.SignalRequest";
SignalRequest.fields = proto3.util.newFieldList(() => [{ no: 1, name: "offer", kind: "message", T: SessionDescription, oneof: "message" }, { no: 2, name: "answer", kind: "message", T: SessionDescription, oneof: "message" }, { no: 3, name: "trickle", kind: "message", T: TrickleRequest, oneof: "message" }, { no: 4, name: "add_track", kind: "message", T: AddTrackRequest, oneof: "message" }, { no: 5, name: "mute", kind: "message", T: MuteTrackRequest, oneof: "message" }, { no: 6, name: "subscription", kind: "message", T: UpdateSubscription, oneof: "message" }, { no: 7, name: "track_setting", kind: "message", T: UpdateTrackSettings, oneof: "message" }, { no: 8, name: "leave", kind: "message", T: LeaveRequest, oneof: "message" }, { no: 10, name: "update_layers", kind: "message", T: UpdateVideoLayers, oneof: "message" }, { no: 11, name: "subscription_permission", kind: "message", T: SubscriptionPermission, oneof: "message" }, { no: 12, name: "sync_state", kind: "message", T: SyncState, oneof: "message" }, { no: 13, name: "simulate", kind: "message", T: SimulateScenario, oneof: "message" }, { no: 14, name: "ping", kind: "scalar", T: 3, oneof: "message" }, { no: 15, name: "update_metadata", kind: "message", T: UpdateParticipantMetadata, oneof: "message" }, { no: 16, name: "ping_req", kind: "message", T: Ping, oneof: "message" }]);
class SignalResponse extends Message {
  constructor(u2) {
    super(), this.message = { case: void 0 }, proto3.util.initPartial(u2, this);
  }
  static fromBinary(u2, c) {
    return new SignalResponse().fromBinary(u2, c);
  }
  static fromJson(u2, c) {
    return new SignalResponse().fromJson(u2, c);
  }
  static fromJsonString(u2, c) {
    return new SignalResponse().fromJsonString(u2, c);
  }
  static equals(u2, c) {
    return proto3.util.equals(SignalResponse, u2, c);
  }
}
SignalResponse.runtime = proto3;
SignalResponse.typeName = "livekit.SignalResponse";
SignalResponse.fields = proto3.util.newFieldList(() => [{ no: 1, name: "join", kind: "message", T: JoinResponse, oneof: "message" }, { no: 2, name: "answer", kind: "message", T: SessionDescription, oneof: "message" }, { no: 3, name: "offer", kind: "message", T: SessionDescription, oneof: "message" }, { no: 4, name: "trickle", kind: "message", T: TrickleRequest, oneof: "message" }, { no: 5, name: "update", kind: "message", T: ParticipantUpdate, oneof: "message" }, { no: 6, name: "track_published", kind: "message", T: TrackPublishedResponse, oneof: "message" }, { no: 8, name: "leave", kind: "message", T: LeaveRequest, oneof: "message" }, { no: 9, name: "mute", kind: "message", T: MuteTrackRequest, oneof: "message" }, { no: 10, name: "speakers_changed", kind: "message", T: SpeakersChanged, oneof: "message" }, { no: 11, name: "room_update", kind: "message", T: RoomUpdate, oneof: "message" }, { no: 12, name: "connection_quality", kind: "message", T: ConnectionQualityUpdate, oneof: "message" }, { no: 13, name: "stream_state_update", kind: "message", T: StreamStateUpdate, oneof: "message" }, { no: 14, name: "subscribed_quality_update", kind: "message", T: SubscribedQualityUpdate, oneof: "message" }, { no: 15, name: "subscription_permission_update", kind: "message", T: SubscriptionPermissionUpdate, oneof: "message" }, { no: 16, name: "refresh_token", kind: "scalar", T: 9, oneof: "message" }, { no: 17, name: "track_unpublished", kind: "message", T: TrackUnpublishedResponse, oneof: "message" }, { no: 18, name: "pong", kind: "scalar", T: 3, oneof: "message" }, { no: 19, name: "reconnect", kind: "message", T: ReconnectResponse, oneof: "message" }, { no: 20, name: "pong_resp", kind: "message", T: Pong, oneof: "message" }, { no: 21, name: "subscription_response", kind: "message", T: SubscriptionResponse, oneof: "message" }]);
class SimulcastCodec extends Message {
  constructor(u2) {
    super(), this.codec = "", this.cid = "", proto3.util.initPartial(u2, this);
  }
  static fromBinary(u2, c) {
    return new SimulcastCodec().fromBinary(u2, c);
  }
  static fromJson(u2, c) {
    return new SimulcastCodec().fromJson(u2, c);
  }
  static fromJsonString(u2, c) {
    return new SimulcastCodec().fromJsonString(u2, c);
  }
  static equals(u2, c) {
    return proto3.util.equals(SimulcastCodec, u2, c);
  }
}
SimulcastCodec.runtime = proto3;
SimulcastCodec.typeName = "livekit.SimulcastCodec";
SimulcastCodec.fields = proto3.util.newFieldList(() => [{
  no: 1,
  name: "codec",
  kind: "scalar",
  T: 9
  /* ScalarType.STRING */
}, {
  no: 2,
  name: "cid",
  kind: "scalar",
  T: 9
  /* ScalarType.STRING */
}]);
class AddTrackRequest extends Message {
  constructor(u2) {
    super(), this.cid = "", this.name = "", this.type = TrackType.AUDIO, this.width = 0, this.height = 0, this.muted = false, this.disableDtx = false, this.source = TrackSource.UNKNOWN, this.layers = [], this.simulcastCodecs = [], this.sid = "", this.stereo = false, this.disableRed = false, this.encryption = Encryption_Type.NONE, this.stream = "", proto3.util.initPartial(u2, this);
  }
  static fromBinary(u2, c) {
    return new AddTrackRequest().fromBinary(u2, c);
  }
  static fromJson(u2, c) {
    return new AddTrackRequest().fromJson(u2, c);
  }
  static fromJsonString(u2, c) {
    return new AddTrackRequest().fromJsonString(u2, c);
  }
  static equals(u2, c) {
    return proto3.util.equals(AddTrackRequest, u2, c);
  }
}
AddTrackRequest.runtime = proto3;
AddTrackRequest.typeName = "livekit.AddTrackRequest";
AddTrackRequest.fields = proto3.util.newFieldList(() => [{
  no: 1,
  name: "cid",
  kind: "scalar",
  T: 9
  /* ScalarType.STRING */
}, {
  no: 2,
  name: "name",
  kind: "scalar",
  T: 9
  /* ScalarType.STRING */
}, { no: 3, name: "type", kind: "enum", T: proto3.getEnumType(TrackType) }, {
  no: 4,
  name: "width",
  kind: "scalar",
  T: 13
  /* ScalarType.UINT32 */
}, {
  no: 5,
  name: "height",
  kind: "scalar",
  T: 13
  /* ScalarType.UINT32 */
}, {
  no: 6,
  name: "muted",
  kind: "scalar",
  T: 8
  /* ScalarType.BOOL */
}, {
  no: 7,
  name: "disable_dtx",
  kind: "scalar",
  T: 8
  /* ScalarType.BOOL */
}, { no: 8, name: "source", kind: "enum", T: proto3.getEnumType(TrackSource) }, { no: 9, name: "layers", kind: "message", T: VideoLayer, repeated: true }, { no: 10, name: "simulcast_codecs", kind: "message", T: SimulcastCodec, repeated: true }, {
  no: 11,
  name: "sid",
  kind: "scalar",
  T: 9
  /* ScalarType.STRING */
}, {
  no: 12,
  name: "stereo",
  kind: "scalar",
  T: 8
  /* ScalarType.BOOL */
}, {
  no: 13,
  name: "disable_red",
  kind: "scalar",
  T: 8
  /* ScalarType.BOOL */
}, { no: 14, name: "encryption", kind: "enum", T: proto3.getEnumType(Encryption_Type) }, {
  no: 15,
  name: "stream",
  kind: "scalar",
  T: 9
  /* ScalarType.STRING */
}]);
class TrickleRequest extends Message {
  constructor(u2) {
    super(), this.candidateInit = "", this.target = SignalTarget.PUBLISHER, proto3.util.initPartial(u2, this);
  }
  static fromBinary(u2, c) {
    return new TrickleRequest().fromBinary(u2, c);
  }
  static fromJson(u2, c) {
    return new TrickleRequest().fromJson(u2, c);
  }
  static fromJsonString(u2, c) {
    return new TrickleRequest().fromJsonString(u2, c);
  }
  static equals(u2, c) {
    return proto3.util.equals(TrickleRequest, u2, c);
  }
}
TrickleRequest.runtime = proto3;
TrickleRequest.typeName = "livekit.TrickleRequest";
TrickleRequest.fields = proto3.util.newFieldList(() => [{
  no: 1,
  name: "candidateInit",
  kind: "scalar",
  T: 9
  /* ScalarType.STRING */
}, { no: 2, name: "target", kind: "enum", T: proto3.getEnumType(SignalTarget) }]);
class MuteTrackRequest extends Message {
  constructor(u2) {
    super(), this.sid = "", this.muted = false, proto3.util.initPartial(u2, this);
  }
  static fromBinary(u2, c) {
    return new MuteTrackRequest().fromBinary(u2, c);
  }
  static fromJson(u2, c) {
    return new MuteTrackRequest().fromJson(u2, c);
  }
  static fromJsonString(u2, c) {
    return new MuteTrackRequest().fromJsonString(u2, c);
  }
  static equals(u2, c) {
    return proto3.util.equals(MuteTrackRequest, u2, c);
  }
}
MuteTrackRequest.runtime = proto3;
MuteTrackRequest.typeName = "livekit.MuteTrackRequest";
MuteTrackRequest.fields = proto3.util.newFieldList(() => [{
  no: 1,
  name: "sid",
  kind: "scalar",
  T: 9
  /* ScalarType.STRING */
}, {
  no: 2,
  name: "muted",
  kind: "scalar",
  T: 8
  /* ScalarType.BOOL */
}]);
class JoinResponse extends Message {
  constructor(u2) {
    super(), this.otherParticipants = [], this.serverVersion = "", this.iceServers = [], this.subscriberPrimary = false, this.alternativeUrl = "", this.serverRegion = "", this.pingTimeout = 0, this.pingInterval = 0, this.sifTrailer = new Uint8Array(0), proto3.util.initPartial(u2, this);
  }
  static fromBinary(u2, c) {
    return new JoinResponse().fromBinary(u2, c);
  }
  static fromJson(u2, c) {
    return new JoinResponse().fromJson(u2, c);
  }
  static fromJsonString(u2, c) {
    return new JoinResponse().fromJsonString(u2, c);
  }
  static equals(u2, c) {
    return proto3.util.equals(JoinResponse, u2, c);
  }
}
JoinResponse.runtime = proto3;
JoinResponse.typeName = "livekit.JoinResponse";
JoinResponse.fields = proto3.util.newFieldList(() => [{ no: 1, name: "room", kind: "message", T: Room$1 }, { no: 2, name: "participant", kind: "message", T: ParticipantInfo }, { no: 3, name: "other_participants", kind: "message", T: ParticipantInfo, repeated: true }, {
  no: 4,
  name: "server_version",
  kind: "scalar",
  T: 9
  /* ScalarType.STRING */
}, { no: 5, name: "ice_servers", kind: "message", T: ICEServer, repeated: true }, {
  no: 6,
  name: "subscriber_primary",
  kind: "scalar",
  T: 8
  /* ScalarType.BOOL */
}, {
  no: 7,
  name: "alternative_url",
  kind: "scalar",
  T: 9
  /* ScalarType.STRING */
}, { no: 8, name: "client_configuration", kind: "message", T: ClientConfiguration }, {
  no: 9,
  name: "server_region",
  kind: "scalar",
  T: 9
  /* ScalarType.STRING */
}, {
  no: 10,
  name: "ping_timeout",
  kind: "scalar",
  T: 5
  /* ScalarType.INT32 */
}, {
  no: 11,
  name: "ping_interval",
  kind: "scalar",
  T: 5
  /* ScalarType.INT32 */
}, { no: 12, name: "server_info", kind: "message", T: ServerInfo }, {
  no: 13,
  name: "sif_trailer",
  kind: "scalar",
  T: 12
  /* ScalarType.BYTES */
}]);
class ReconnectResponse extends Message {
  constructor(u2) {
    super(), this.iceServers = [], proto3.util.initPartial(u2, this);
  }
  static fromBinary(u2, c) {
    return new ReconnectResponse().fromBinary(u2, c);
  }
  static fromJson(u2, c) {
    return new ReconnectResponse().fromJson(u2, c);
  }
  static fromJsonString(u2, c) {
    return new ReconnectResponse().fromJsonString(u2, c);
  }
  static equals(u2, c) {
    return proto3.util.equals(ReconnectResponse, u2, c);
  }
}
ReconnectResponse.runtime = proto3;
ReconnectResponse.typeName = "livekit.ReconnectResponse";
ReconnectResponse.fields = proto3.util.newFieldList(() => [{ no: 1, name: "ice_servers", kind: "message", T: ICEServer, repeated: true }, { no: 2, name: "client_configuration", kind: "message", T: ClientConfiguration }]);
class TrackPublishedResponse extends Message {
  constructor(u2) {
    super(), this.cid = "", proto3.util.initPartial(u2, this);
  }
  static fromBinary(u2, c) {
    return new TrackPublishedResponse().fromBinary(u2, c);
  }
  static fromJson(u2, c) {
    return new TrackPublishedResponse().fromJson(u2, c);
  }
  static fromJsonString(u2, c) {
    return new TrackPublishedResponse().fromJsonString(u2, c);
  }
  static equals(u2, c) {
    return proto3.util.equals(TrackPublishedResponse, u2, c);
  }
}
TrackPublishedResponse.runtime = proto3;
TrackPublishedResponse.typeName = "livekit.TrackPublishedResponse";
TrackPublishedResponse.fields = proto3.util.newFieldList(() => [{
  no: 1,
  name: "cid",
  kind: "scalar",
  T: 9
  /* ScalarType.STRING */
}, { no: 2, name: "track", kind: "message", T: TrackInfo }]);
class TrackUnpublishedResponse extends Message {
  constructor(u2) {
    super(), this.trackSid = "", proto3.util.initPartial(u2, this);
  }
  static fromBinary(u2, c) {
    return new TrackUnpublishedResponse().fromBinary(u2, c);
  }
  static fromJson(u2, c) {
    return new TrackUnpublishedResponse().fromJson(u2, c);
  }
  static fromJsonString(u2, c) {
    return new TrackUnpublishedResponse().fromJsonString(u2, c);
  }
  static equals(u2, c) {
    return proto3.util.equals(TrackUnpublishedResponse, u2, c);
  }
}
TrackUnpublishedResponse.runtime = proto3;
TrackUnpublishedResponse.typeName = "livekit.TrackUnpublishedResponse";
TrackUnpublishedResponse.fields = proto3.util.newFieldList(() => [{
  no: 1,
  name: "track_sid",
  kind: "scalar",
  T: 9
  /* ScalarType.STRING */
}]);
class SessionDescription extends Message {
  constructor(u2) {
    super(), this.type = "", this.sdp = "", proto3.util.initPartial(u2, this);
  }
  static fromBinary(u2, c) {
    return new SessionDescription().fromBinary(u2, c);
  }
  static fromJson(u2, c) {
    return new SessionDescription().fromJson(u2, c);
  }
  static fromJsonString(u2, c) {
    return new SessionDescription().fromJsonString(u2, c);
  }
  static equals(u2, c) {
    return proto3.util.equals(SessionDescription, u2, c);
  }
}
SessionDescription.runtime = proto3;
SessionDescription.typeName = "livekit.SessionDescription";
SessionDescription.fields = proto3.util.newFieldList(() => [{
  no: 1,
  name: "type",
  kind: "scalar",
  T: 9
  /* ScalarType.STRING */
}, {
  no: 2,
  name: "sdp",
  kind: "scalar",
  T: 9
  /* ScalarType.STRING */
}]);
class ParticipantUpdate extends Message {
  constructor(u2) {
    super(), this.participants = [], proto3.util.initPartial(u2, this);
  }
  static fromBinary(u2, c) {
    return new ParticipantUpdate().fromBinary(u2, c);
  }
  static fromJson(u2, c) {
    return new ParticipantUpdate().fromJson(u2, c);
  }
  static fromJsonString(u2, c) {
    return new ParticipantUpdate().fromJsonString(u2, c);
  }
  static equals(u2, c) {
    return proto3.util.equals(ParticipantUpdate, u2, c);
  }
}
ParticipantUpdate.runtime = proto3;
ParticipantUpdate.typeName = "livekit.ParticipantUpdate";
ParticipantUpdate.fields = proto3.util.newFieldList(() => [{ no: 1, name: "participants", kind: "message", T: ParticipantInfo, repeated: true }]);
class UpdateSubscription extends Message {
  constructor(u2) {
    super(), this.trackSids = [], this.subscribe = false, this.participantTracks = [], proto3.util.initPartial(u2, this);
  }
  static fromBinary(u2, c) {
    return new UpdateSubscription().fromBinary(u2, c);
  }
  static fromJson(u2, c) {
    return new UpdateSubscription().fromJson(u2, c);
  }
  static fromJsonString(u2, c) {
    return new UpdateSubscription().fromJsonString(u2, c);
  }
  static equals(u2, c) {
    return proto3.util.equals(UpdateSubscription, u2, c);
  }
}
UpdateSubscription.runtime = proto3;
UpdateSubscription.typeName = "livekit.UpdateSubscription";
UpdateSubscription.fields = proto3.util.newFieldList(() => [{ no: 1, name: "track_sids", kind: "scalar", T: 9, repeated: true }, {
  no: 2,
  name: "subscribe",
  kind: "scalar",
  T: 8
  /* ScalarType.BOOL */
}, { no: 3, name: "participant_tracks", kind: "message", T: ParticipantTracks, repeated: true }]);
class UpdateTrackSettings extends Message {
  constructor(u2) {
    super(), this.trackSids = [], this.disabled = false, this.quality = VideoQuality$1.LOW, this.width = 0, this.height = 0, this.fps = 0, this.priority = 0, proto3.util.initPartial(u2, this);
  }
  static fromBinary(u2, c) {
    return new UpdateTrackSettings().fromBinary(u2, c);
  }
  static fromJson(u2, c) {
    return new UpdateTrackSettings().fromJson(u2, c);
  }
  static fromJsonString(u2, c) {
    return new UpdateTrackSettings().fromJsonString(u2, c);
  }
  static equals(u2, c) {
    return proto3.util.equals(UpdateTrackSettings, u2, c);
  }
}
UpdateTrackSettings.runtime = proto3;
UpdateTrackSettings.typeName = "livekit.UpdateTrackSettings";
UpdateTrackSettings.fields = proto3.util.newFieldList(() => [{ no: 1, name: "track_sids", kind: "scalar", T: 9, repeated: true }, {
  no: 3,
  name: "disabled",
  kind: "scalar",
  T: 8
  /* ScalarType.BOOL */
}, { no: 4, name: "quality", kind: "enum", T: proto3.getEnumType(VideoQuality$1) }, {
  no: 5,
  name: "width",
  kind: "scalar",
  T: 13
  /* ScalarType.UINT32 */
}, {
  no: 6,
  name: "height",
  kind: "scalar",
  T: 13
  /* ScalarType.UINT32 */
}, {
  no: 7,
  name: "fps",
  kind: "scalar",
  T: 13
  /* ScalarType.UINT32 */
}, {
  no: 8,
  name: "priority",
  kind: "scalar",
  T: 13
  /* ScalarType.UINT32 */
}]);
class LeaveRequest extends Message {
  constructor(u2) {
    super(), this.canReconnect = false, this.reason = DisconnectReason.UNKNOWN_REASON, this.action = LeaveRequest_Action.DISCONNECT, proto3.util.initPartial(u2, this);
  }
  static fromBinary(u2, c) {
    return new LeaveRequest().fromBinary(u2, c);
  }
  static fromJson(u2, c) {
    return new LeaveRequest().fromJson(u2, c);
  }
  static fromJsonString(u2, c) {
    return new LeaveRequest().fromJsonString(u2, c);
  }
  static equals(u2, c) {
    return proto3.util.equals(LeaveRequest, u2, c);
  }
}
LeaveRequest.runtime = proto3;
LeaveRequest.typeName = "livekit.LeaveRequest";
LeaveRequest.fields = proto3.util.newFieldList(() => [{
  no: 1,
  name: "can_reconnect",
  kind: "scalar",
  T: 8
  /* ScalarType.BOOL */
}, { no: 2, name: "reason", kind: "enum", T: proto3.getEnumType(DisconnectReason) }, { no: 3, name: "action", kind: "enum", T: proto3.getEnumType(LeaveRequest_Action) }, { no: 4, name: "regions", kind: "message", T: RegionSettings }]);
var LeaveRequest_Action;
(function(a420) {
  a420[a420.DISCONNECT = 0] = "DISCONNECT", a420[a420.RESUME = 1] = "RESUME", a420[a420.RECONNECT = 2] = "RECONNECT";
})(LeaveRequest_Action || (LeaveRequest_Action = {}));
proto3.util.setEnumType(LeaveRequest_Action, "livekit.LeaveRequest.Action", [{ no: 0, name: "DISCONNECT" }, { no: 1, name: "RESUME" }, { no: 2, name: "RECONNECT" }]);
class UpdateVideoLayers extends Message {
  constructor(u2) {
    super(), this.trackSid = "", this.layers = [], proto3.util.initPartial(u2, this);
  }
  static fromBinary(u2, c) {
    return new UpdateVideoLayers().fromBinary(u2, c);
  }
  static fromJson(u2, c) {
    return new UpdateVideoLayers().fromJson(u2, c);
  }
  static fromJsonString(u2, c) {
    return new UpdateVideoLayers().fromJsonString(u2, c);
  }
  static equals(u2, c) {
    return proto3.util.equals(UpdateVideoLayers, u2, c);
  }
}
UpdateVideoLayers.runtime = proto3;
UpdateVideoLayers.typeName = "livekit.UpdateVideoLayers";
UpdateVideoLayers.fields = proto3.util.newFieldList(() => [{
  no: 1,
  name: "track_sid",
  kind: "scalar",
  T: 9
  /* ScalarType.STRING */
}, { no: 2, name: "layers", kind: "message", T: VideoLayer, repeated: true }]);
class UpdateParticipantMetadata extends Message {
  constructor(u2) {
    super(), this.metadata = "", this.name = "", proto3.util.initPartial(u2, this);
  }
  static fromBinary(u2, c) {
    return new UpdateParticipantMetadata().fromBinary(u2, c);
  }
  static fromJson(u2, c) {
    return new UpdateParticipantMetadata().fromJson(u2, c);
  }
  static fromJsonString(u2, c) {
    return new UpdateParticipantMetadata().fromJsonString(u2, c);
  }
  static equals(u2, c) {
    return proto3.util.equals(UpdateParticipantMetadata, u2, c);
  }
}
UpdateParticipantMetadata.runtime = proto3;
UpdateParticipantMetadata.typeName = "livekit.UpdateParticipantMetadata";
UpdateParticipantMetadata.fields = proto3.util.newFieldList(() => [{
  no: 1,
  name: "metadata",
  kind: "scalar",
  T: 9
  /* ScalarType.STRING */
}, {
  no: 2,
  name: "name",
  kind: "scalar",
  T: 9
  /* ScalarType.STRING */
}]);
class ICEServer extends Message {
  constructor(u2) {
    super(), this.urls = [], this.username = "", this.credential = "", proto3.util.initPartial(u2, this);
  }
  static fromBinary(u2, c) {
    return new ICEServer().fromBinary(u2, c);
  }
  static fromJson(u2, c) {
    return new ICEServer().fromJson(u2, c);
  }
  static fromJsonString(u2, c) {
    return new ICEServer().fromJsonString(u2, c);
  }
  static equals(u2, c) {
    return proto3.util.equals(ICEServer, u2, c);
  }
}
ICEServer.runtime = proto3;
ICEServer.typeName = "livekit.ICEServer";
ICEServer.fields = proto3.util.newFieldList(() => [{ no: 1, name: "urls", kind: "scalar", T: 9, repeated: true }, {
  no: 2,
  name: "username",
  kind: "scalar",
  T: 9
  /* ScalarType.STRING */
}, {
  no: 3,
  name: "credential",
  kind: "scalar",
  T: 9
  /* ScalarType.STRING */
}]);
class SpeakersChanged extends Message {
  constructor(u2) {
    super(), this.speakers = [], proto3.util.initPartial(u2, this);
  }
  static fromBinary(u2, c) {
    return new SpeakersChanged().fromBinary(u2, c);
  }
  static fromJson(u2, c) {
    return new SpeakersChanged().fromJson(u2, c);
  }
  static fromJsonString(u2, c) {
    return new SpeakersChanged().fromJsonString(u2, c);
  }
  static equals(u2, c) {
    return proto3.util.equals(SpeakersChanged, u2, c);
  }
}
SpeakersChanged.runtime = proto3;
SpeakersChanged.typeName = "livekit.SpeakersChanged";
SpeakersChanged.fields = proto3.util.newFieldList(() => [{ no: 1, name: "speakers", kind: "message", T: SpeakerInfo, repeated: true }]);
class RoomUpdate extends Message {
  constructor(u2) {
    super(), proto3.util.initPartial(u2, this);
  }
  static fromBinary(u2, c) {
    return new RoomUpdate().fromBinary(u2, c);
  }
  static fromJson(u2, c) {
    return new RoomUpdate().fromJson(u2, c);
  }
  static fromJsonString(u2, c) {
    return new RoomUpdate().fromJsonString(u2, c);
  }
  static equals(u2, c) {
    return proto3.util.equals(RoomUpdate, u2, c);
  }
}
RoomUpdate.runtime = proto3;
RoomUpdate.typeName = "livekit.RoomUpdate";
RoomUpdate.fields = proto3.util.newFieldList(() => [{ no: 1, name: "room", kind: "message", T: Room$1 }]);
class ConnectionQualityInfo extends Message {
  constructor(u2) {
    super(), this.participantSid = "", this.quality = ConnectionQuality$1.POOR, this.score = 0, proto3.util.initPartial(u2, this);
  }
  static fromBinary(u2, c) {
    return new ConnectionQualityInfo().fromBinary(u2, c);
  }
  static fromJson(u2, c) {
    return new ConnectionQualityInfo().fromJson(u2, c);
  }
  static fromJsonString(u2, c) {
    return new ConnectionQualityInfo().fromJsonString(u2, c);
  }
  static equals(u2, c) {
    return proto3.util.equals(ConnectionQualityInfo, u2, c);
  }
}
ConnectionQualityInfo.runtime = proto3;
ConnectionQualityInfo.typeName = "livekit.ConnectionQualityInfo";
ConnectionQualityInfo.fields = proto3.util.newFieldList(() => [{
  no: 1,
  name: "participant_sid",
  kind: "scalar",
  T: 9
  /* ScalarType.STRING */
}, { no: 2, name: "quality", kind: "enum", T: proto3.getEnumType(ConnectionQuality$1) }, {
  no: 3,
  name: "score",
  kind: "scalar",
  T: 2
  /* ScalarType.FLOAT */
}]);
class ConnectionQualityUpdate extends Message {
  constructor(u2) {
    super(), this.updates = [], proto3.util.initPartial(u2, this);
  }
  static fromBinary(u2, c) {
    return new ConnectionQualityUpdate().fromBinary(u2, c);
  }
  static fromJson(u2, c) {
    return new ConnectionQualityUpdate().fromJson(u2, c);
  }
  static fromJsonString(u2, c) {
    return new ConnectionQualityUpdate().fromJsonString(u2, c);
  }
  static equals(u2, c) {
    return proto3.util.equals(ConnectionQualityUpdate, u2, c);
  }
}
ConnectionQualityUpdate.runtime = proto3;
ConnectionQualityUpdate.typeName = "livekit.ConnectionQualityUpdate";
ConnectionQualityUpdate.fields = proto3.util.newFieldList(() => [{ no: 1, name: "updates", kind: "message", T: ConnectionQualityInfo, repeated: true }]);
class StreamStateInfo extends Message {
  constructor(u2) {
    super(), this.participantSid = "", this.trackSid = "", this.state = StreamState.ACTIVE, proto3.util.initPartial(u2, this);
  }
  static fromBinary(u2, c) {
    return new StreamStateInfo().fromBinary(u2, c);
  }
  static fromJson(u2, c) {
    return new StreamStateInfo().fromJson(u2, c);
  }
  static fromJsonString(u2, c) {
    return new StreamStateInfo().fromJsonString(u2, c);
  }
  static equals(u2, c) {
    return proto3.util.equals(StreamStateInfo, u2, c);
  }
}
StreamStateInfo.runtime = proto3;
StreamStateInfo.typeName = "livekit.StreamStateInfo";
StreamStateInfo.fields = proto3.util.newFieldList(() => [{
  no: 1,
  name: "participant_sid",
  kind: "scalar",
  T: 9
  /* ScalarType.STRING */
}, {
  no: 2,
  name: "track_sid",
  kind: "scalar",
  T: 9
  /* ScalarType.STRING */
}, { no: 3, name: "state", kind: "enum", T: proto3.getEnumType(StreamState) }]);
class StreamStateUpdate extends Message {
  constructor(u2) {
    super(), this.streamStates = [], proto3.util.initPartial(u2, this);
  }
  static fromBinary(u2, c) {
    return new StreamStateUpdate().fromBinary(u2, c);
  }
  static fromJson(u2, c) {
    return new StreamStateUpdate().fromJson(u2, c);
  }
  static fromJsonString(u2, c) {
    return new StreamStateUpdate().fromJsonString(u2, c);
  }
  static equals(u2, c) {
    return proto3.util.equals(StreamStateUpdate, u2, c);
  }
}
StreamStateUpdate.runtime = proto3;
StreamStateUpdate.typeName = "livekit.StreamStateUpdate";
StreamStateUpdate.fields = proto3.util.newFieldList(() => [{ no: 1, name: "stream_states", kind: "message", T: StreamStateInfo, repeated: true }]);
class SubscribedQuality extends Message {
  constructor(u2) {
    super(), this.quality = VideoQuality$1.LOW, this.enabled = false, proto3.util.initPartial(u2, this);
  }
  static fromBinary(u2, c) {
    return new SubscribedQuality().fromBinary(u2, c);
  }
  static fromJson(u2, c) {
    return new SubscribedQuality().fromJson(u2, c);
  }
  static fromJsonString(u2, c) {
    return new SubscribedQuality().fromJsonString(u2, c);
  }
  static equals(u2, c) {
    return proto3.util.equals(SubscribedQuality, u2, c);
  }
}
SubscribedQuality.runtime = proto3;
SubscribedQuality.typeName = "livekit.SubscribedQuality";
SubscribedQuality.fields = proto3.util.newFieldList(() => [{ no: 1, name: "quality", kind: "enum", T: proto3.getEnumType(VideoQuality$1) }, {
  no: 2,
  name: "enabled",
  kind: "scalar",
  T: 8
  /* ScalarType.BOOL */
}]);
class SubscribedCodec extends Message {
  constructor(u2) {
    super(), this.codec = "", this.qualities = [], proto3.util.initPartial(u2, this);
  }
  static fromBinary(u2, c) {
    return new SubscribedCodec().fromBinary(u2, c);
  }
  static fromJson(u2, c) {
    return new SubscribedCodec().fromJson(u2, c);
  }
  static fromJsonString(u2, c) {
    return new SubscribedCodec().fromJsonString(u2, c);
  }
  static equals(u2, c) {
    return proto3.util.equals(SubscribedCodec, u2, c);
  }
}
SubscribedCodec.runtime = proto3;
SubscribedCodec.typeName = "livekit.SubscribedCodec";
SubscribedCodec.fields = proto3.util.newFieldList(() => [{
  no: 1,
  name: "codec",
  kind: "scalar",
  T: 9
  /* ScalarType.STRING */
}, { no: 2, name: "qualities", kind: "message", T: SubscribedQuality, repeated: true }]);
class SubscribedQualityUpdate extends Message {
  constructor(u2) {
    super(), this.trackSid = "", this.subscribedQualities = [], this.subscribedCodecs = [], proto3.util.initPartial(u2, this);
  }
  static fromBinary(u2, c) {
    return new SubscribedQualityUpdate().fromBinary(u2, c);
  }
  static fromJson(u2, c) {
    return new SubscribedQualityUpdate().fromJson(u2, c);
  }
  static fromJsonString(u2, c) {
    return new SubscribedQualityUpdate().fromJsonString(u2, c);
  }
  static equals(u2, c) {
    return proto3.util.equals(SubscribedQualityUpdate, u2, c);
  }
}
SubscribedQualityUpdate.runtime = proto3;
SubscribedQualityUpdate.typeName = "livekit.SubscribedQualityUpdate";
SubscribedQualityUpdate.fields = proto3.util.newFieldList(() => [{
  no: 1,
  name: "track_sid",
  kind: "scalar",
  T: 9
  /* ScalarType.STRING */
}, { no: 2, name: "subscribed_qualities", kind: "message", T: SubscribedQuality, repeated: true }, { no: 3, name: "subscribed_codecs", kind: "message", T: SubscribedCodec, repeated: true }]);
class TrackPermission extends Message {
  constructor(u2) {
    super(), this.participantSid = "", this.allTracks = false, this.trackSids = [], this.participantIdentity = "", proto3.util.initPartial(u2, this);
  }
  static fromBinary(u2, c) {
    return new TrackPermission().fromBinary(u2, c);
  }
  static fromJson(u2, c) {
    return new TrackPermission().fromJson(u2, c);
  }
  static fromJsonString(u2, c) {
    return new TrackPermission().fromJsonString(u2, c);
  }
  static equals(u2, c) {
    return proto3.util.equals(TrackPermission, u2, c);
  }
}
TrackPermission.runtime = proto3;
TrackPermission.typeName = "livekit.TrackPermission";
TrackPermission.fields = proto3.util.newFieldList(() => [{
  no: 1,
  name: "participant_sid",
  kind: "scalar",
  T: 9
  /* ScalarType.STRING */
}, {
  no: 2,
  name: "all_tracks",
  kind: "scalar",
  T: 8
  /* ScalarType.BOOL */
}, { no: 3, name: "track_sids", kind: "scalar", T: 9, repeated: true }, {
  no: 4,
  name: "participant_identity",
  kind: "scalar",
  T: 9
  /* ScalarType.STRING */
}]);
class SubscriptionPermission extends Message {
  constructor(u2) {
    super(), this.allParticipants = false, this.trackPermissions = [], proto3.util.initPartial(u2, this);
  }
  static fromBinary(u2, c) {
    return new SubscriptionPermission().fromBinary(u2, c);
  }
  static fromJson(u2, c) {
    return new SubscriptionPermission().fromJson(u2, c);
  }
  static fromJsonString(u2, c) {
    return new SubscriptionPermission().fromJsonString(u2, c);
  }
  static equals(u2, c) {
    return proto3.util.equals(SubscriptionPermission, u2, c);
  }
}
SubscriptionPermission.runtime = proto3;
SubscriptionPermission.typeName = "livekit.SubscriptionPermission";
SubscriptionPermission.fields = proto3.util.newFieldList(() => [{
  no: 1,
  name: "all_participants",
  kind: "scalar",
  T: 8
  /* ScalarType.BOOL */
}, { no: 2, name: "track_permissions", kind: "message", T: TrackPermission, repeated: true }]);
class SubscriptionPermissionUpdate extends Message {
  constructor(u2) {
    super(), this.participantSid = "", this.trackSid = "", this.allowed = false, proto3.util.initPartial(u2, this);
  }
  static fromBinary(u2, c) {
    return new SubscriptionPermissionUpdate().fromBinary(u2, c);
  }
  static fromJson(u2, c) {
    return new SubscriptionPermissionUpdate().fromJson(u2, c);
  }
  static fromJsonString(u2, c) {
    return new SubscriptionPermissionUpdate().fromJsonString(u2, c);
  }
  static equals(u2, c) {
    return proto3.util.equals(SubscriptionPermissionUpdate, u2, c);
  }
}
SubscriptionPermissionUpdate.runtime = proto3;
SubscriptionPermissionUpdate.typeName = "livekit.SubscriptionPermissionUpdate";
SubscriptionPermissionUpdate.fields = proto3.util.newFieldList(() => [{
  no: 1,
  name: "participant_sid",
  kind: "scalar",
  T: 9
  /* ScalarType.STRING */
}, {
  no: 2,
  name: "track_sid",
  kind: "scalar",
  T: 9
  /* ScalarType.STRING */
}, {
  no: 3,
  name: "allowed",
  kind: "scalar",
  T: 8
  /* ScalarType.BOOL */
}]);
class SyncState extends Message {
  constructor(u2) {
    super(), this.publishTracks = [], this.dataChannels = [], this.trackSidsDisabled = [], proto3.util.initPartial(u2, this);
  }
  static fromBinary(u2, c) {
    return new SyncState().fromBinary(u2, c);
  }
  static fromJson(u2, c) {
    return new SyncState().fromJson(u2, c);
  }
  static fromJsonString(u2, c) {
    return new SyncState().fromJsonString(u2, c);
  }
  static equals(u2, c) {
    return proto3.util.equals(SyncState, u2, c);
  }
}
SyncState.runtime = proto3;
SyncState.typeName = "livekit.SyncState";
SyncState.fields = proto3.util.newFieldList(() => [{ no: 1, name: "answer", kind: "message", T: SessionDescription }, { no: 2, name: "subscription", kind: "message", T: UpdateSubscription }, { no: 3, name: "publish_tracks", kind: "message", T: TrackPublishedResponse, repeated: true }, { no: 4, name: "data_channels", kind: "message", T: DataChannelInfo, repeated: true }, { no: 5, name: "offer", kind: "message", T: SessionDescription }, { no: 6, name: "track_sids_disabled", kind: "scalar", T: 9, repeated: true }]);
class DataChannelInfo extends Message {
  constructor(u2) {
    super(), this.label = "", this.id = 0, this.target = SignalTarget.PUBLISHER, proto3.util.initPartial(u2, this);
  }
  static fromBinary(u2, c) {
    return new DataChannelInfo().fromBinary(u2, c);
  }
  static fromJson(u2, c) {
    return new DataChannelInfo().fromJson(u2, c);
  }
  static fromJsonString(u2, c) {
    return new DataChannelInfo().fromJsonString(u2, c);
  }
  static equals(u2, c) {
    return proto3.util.equals(DataChannelInfo, u2, c);
  }
}
DataChannelInfo.runtime = proto3;
DataChannelInfo.typeName = "livekit.DataChannelInfo";
DataChannelInfo.fields = proto3.util.newFieldList(() => [{
  no: 1,
  name: "label",
  kind: "scalar",
  T: 9
  /* ScalarType.STRING */
}, {
  no: 2,
  name: "id",
  kind: "scalar",
  T: 13
  /* ScalarType.UINT32 */
}, { no: 3, name: "target", kind: "enum", T: proto3.getEnumType(SignalTarget) }]);
class SimulateScenario extends Message {
  constructor(u2) {
    super(), this.scenario = { case: void 0 }, proto3.util.initPartial(u2, this);
  }
  static fromBinary(u2, c) {
    return new SimulateScenario().fromBinary(u2, c);
  }
  static fromJson(u2, c) {
    return new SimulateScenario().fromJson(u2, c);
  }
  static fromJsonString(u2, c) {
    return new SimulateScenario().fromJsonString(u2, c);
  }
  static equals(u2, c) {
    return proto3.util.equals(SimulateScenario, u2, c);
  }
}
SimulateScenario.runtime = proto3;
SimulateScenario.typeName = "livekit.SimulateScenario";
SimulateScenario.fields = proto3.util.newFieldList(() => [{ no: 1, name: "speaker_update", kind: "scalar", T: 5, oneof: "scenario" }, { no: 2, name: "node_failure", kind: "scalar", T: 8, oneof: "scenario" }, { no: 3, name: "migration", kind: "scalar", T: 8, oneof: "scenario" }, { no: 4, name: "server_leave", kind: "scalar", T: 8, oneof: "scenario" }, { no: 5, name: "switch_candidate_protocol", kind: "enum", T: proto3.getEnumType(CandidateProtocol), oneof: "scenario" }, { no: 6, name: "subscriber_bandwidth", kind: "scalar", T: 3, oneof: "scenario" }, { no: 7, name: "disconnect_signal_on_resume", kind: "scalar", T: 8, oneof: "scenario" }, { no: 8, name: "disconnect_signal_on_resume_no_messages", kind: "scalar", T: 8, oneof: "scenario" }]);
class Ping extends Message {
  constructor(u2) {
    super(), this.timestamp = protoInt64.zero, this.rtt = protoInt64.zero, proto3.util.initPartial(u2, this);
  }
  static fromBinary(u2, c) {
    return new Ping().fromBinary(u2, c);
  }
  static fromJson(u2, c) {
    return new Ping().fromJson(u2, c);
  }
  static fromJsonString(u2, c) {
    return new Ping().fromJsonString(u2, c);
  }
  static equals(u2, c) {
    return proto3.util.equals(Ping, u2, c);
  }
}
Ping.runtime = proto3;
Ping.typeName = "livekit.Ping";
Ping.fields = proto3.util.newFieldList(() => [{
  no: 1,
  name: "timestamp",
  kind: "scalar",
  T: 3
  /* ScalarType.INT64 */
}, {
  no: 2,
  name: "rtt",
  kind: "scalar",
  T: 3
  /* ScalarType.INT64 */
}]);
class Pong extends Message {
  constructor(u2) {
    super(), this.lastPingTimestamp = protoInt64.zero, this.timestamp = protoInt64.zero, proto3.util.initPartial(u2, this);
  }
  static fromBinary(u2, c) {
    return new Pong().fromBinary(u2, c);
  }
  static fromJson(u2, c) {
    return new Pong().fromJson(u2, c);
  }
  static fromJsonString(u2, c) {
    return new Pong().fromJsonString(u2, c);
  }
  static equals(u2, c) {
    return proto3.util.equals(Pong, u2, c);
  }
}
Pong.runtime = proto3;
Pong.typeName = "livekit.Pong";
Pong.fields = proto3.util.newFieldList(() => [{
  no: 1,
  name: "last_ping_timestamp",
  kind: "scalar",
  T: 3
  /* ScalarType.INT64 */
}, {
  no: 2,
  name: "timestamp",
  kind: "scalar",
  T: 3
  /* ScalarType.INT64 */
}]);
class RegionSettings extends Message {
  constructor(u2) {
    super(), this.regions = [], proto3.util.initPartial(u2, this);
  }
  static fromBinary(u2, c) {
    return new RegionSettings().fromBinary(u2, c);
  }
  static fromJson(u2, c) {
    return new RegionSettings().fromJson(u2, c);
  }
  static fromJsonString(u2, c) {
    return new RegionSettings().fromJsonString(u2, c);
  }
  static equals(u2, c) {
    return proto3.util.equals(RegionSettings, u2, c);
  }
}
RegionSettings.runtime = proto3;
RegionSettings.typeName = "livekit.RegionSettings";
RegionSettings.fields = proto3.util.newFieldList(() => [{ no: 1, name: "regions", kind: "message", T: RegionInfo, repeated: true }]);
class RegionInfo extends Message {
  constructor(u2) {
    super(), this.region = "", this.url = "", this.distance = protoInt64.zero, proto3.util.initPartial(u2, this);
  }
  static fromBinary(u2, c) {
    return new RegionInfo().fromBinary(u2, c);
  }
  static fromJson(u2, c) {
    return new RegionInfo().fromJson(u2, c);
  }
  static fromJsonString(u2, c) {
    return new RegionInfo().fromJsonString(u2, c);
  }
  static equals(u2, c) {
    return proto3.util.equals(RegionInfo, u2, c);
  }
}
RegionInfo.runtime = proto3;
RegionInfo.typeName = "livekit.RegionInfo";
RegionInfo.fields = proto3.util.newFieldList(() => [{
  no: 1,
  name: "region",
  kind: "scalar",
  T: 9
  /* ScalarType.STRING */
}, {
  no: 2,
  name: "url",
  kind: "scalar",
  T: 9
  /* ScalarType.STRING */
}, {
  no: 3,
  name: "distance",
  kind: "scalar",
  T: 3
  /* ScalarType.INT64 */
}]);
class SubscriptionResponse extends Message {
  constructor(u2) {
    super(), this.trackSid = "", this.err = SubscriptionError.SE_UNKNOWN, proto3.util.initPartial(u2, this);
  }
  static fromBinary(u2, c) {
    return new SubscriptionResponse().fromBinary(u2, c);
  }
  static fromJson(u2, c) {
    return new SubscriptionResponse().fromJson(u2, c);
  }
  static fromJsonString(u2, c) {
    return new SubscriptionResponse().fromJsonString(u2, c);
  }
  static equals(u2, c) {
    return proto3.util.equals(SubscriptionResponse, u2, c);
  }
}
SubscriptionResponse.runtime = proto3;
SubscriptionResponse.typeName = "livekit.SubscriptionResponse";
SubscriptionResponse.fields = proto3.util.newFieldList(() => [{
  no: 1,
  name: "track_sid",
  kind: "scalar",
  T: 9
  /* ScalarType.STRING */
}, { no: 2, name: "err", kind: "enum", T: proto3.getEnumType(SubscriptionError) }]);
function cloneDeep(a420) {
  if (!(typeof a420 > "u"))
    return typeof structuredClone == "function" ? structuredClone(a420) : JSON.parse(JSON.stringify(a420));
}
const BACKGROUND_REACTION_DELAY = 5e3, recycledElements = [];
var VideoQuality;
(function(a420) {
  a420[a420.LOW = 0] = "LOW", a420[a420.MEDIUM = 1] = "MEDIUM", a420[a420.HIGH = 2] = "HIGH";
})(VideoQuality || (VideoQuality = {}));
class Track extends eventsExports.EventEmitter {
  constructor(u2, c) {
    let l2 = arguments.length > 2 && arguments[2] !== void 0 ? arguments[2] : {};
    var v2;
    super(), this.attachedElements = [], this.isMuted = false, this.streamState = Track.StreamState.Active, this.isInBackground = false, this._currentBitrate = 0, this.log = livekitLogger, this.appVisibilityChangedListener = () => {
      this.backgroundTimeout && clearTimeout(this.backgroundTimeout), document.visibilityState === "hidden" ? this.backgroundTimeout = setTimeout(() => this.handleAppVisibilityChanged(), BACKGROUND_REACTION_DELAY) : this.handleAppVisibilityChanged();
    }, this.log = getLogger((v2 = l2.loggerName) !== null && v2 !== void 0 ? v2 : LoggerNames.Track), this.loggerContextCb = l2.loggerContextCb, this.setMaxListeners(100), this.kind = c, this._mediaStreamTrack = u2, this._mediaStreamID = u2.id, this.source = Track.Source.Unknown;
  }
  get logContext() {
    var u2;
    return Object.assign(Object.assign({}, (u2 = this.loggerContextCb) === null || u2 === void 0 ? void 0 : u2.call(this)), getLogContextFromTrack(this));
  }
  /** current receive bits per second */
  get currentBitrate() {
    return this._currentBitrate;
  }
  get mediaStreamTrack() {
    return this._mediaStreamTrack;
  }
  /**
  * @internal
  * used for keep mediaStream's first id, since it's id might change
  * if we disable/enable a track
  */
  get mediaStreamID() {
    return this._mediaStreamID;
  }
  attach(u2) {
    let c = "audio";
    this.kind === Track.Kind.Video && (c = "video"), this.attachedElements.length === 0 && Track.Kind.Video && this.addAppVisibilityListener(), u2 || (c === "audio" && (recycledElements.forEach((p2) => {
      p2.parentElement === null && !u2 && (u2 = p2);
    }), u2 && recycledElements.splice(recycledElements.indexOf(u2), 1)), u2 || (u2 = document.createElement(c))), this.attachedElements.includes(u2) || this.attachedElements.push(u2), attachToElement(this.mediaStreamTrack, u2);
    const l2 = u2.srcObject.getTracks(), v2 = l2.some((p2) => p2.kind === "audio");
    return u2.play().then(() => {
      this.emit(v2 ? TrackEvent.AudioPlaybackStarted : TrackEvent.VideoPlaybackStarted);
    }).catch((p2) => {
      p2.name === "NotAllowedError" ? this.emit(v2 ? TrackEvent.AudioPlaybackFailed : TrackEvent.VideoPlaybackFailed, p2) : p2.name === "AbortError" ? livekitLogger.debug("".concat(v2 ? "audio" : "video", " playback aborted, likely due to new play request")) : livekitLogger.warn("could not playback ".concat(v2 ? "audio" : "video"), p2), v2 && u2 && l2.some((_) => _.kind === "video") && p2.name === "NotAllowedError" && (u2.muted = true, u2.play().catch(() => {
      }));
    }), this.emit(TrackEvent.ElementAttached, u2), u2;
  }
  detach(u2) {
    try {
      if (u2) {
        detachTrack(this.mediaStreamTrack, u2);
        const l2 = this.attachedElements.indexOf(u2);
        return l2 >= 0 && (this.attachedElements.splice(l2, 1), this.recycleElement(u2), this.emit(TrackEvent.ElementDetached, u2)), u2;
      }
      const c = [];
      return this.attachedElements.forEach((l2) => {
        detachTrack(this.mediaStreamTrack, l2), c.push(l2), this.recycleElement(l2), this.emit(TrackEvent.ElementDetached, l2);
      }), this.attachedElements = [], c;
    } finally {
      this.attachedElements.length === 0 && this.removeAppVisibilityListener();
    }
  }
  stop() {
    this.stopMonitor(), this._mediaStreamTrack.stop();
  }
  enable() {
    this._mediaStreamTrack.enabled = true;
  }
  disable() {
    this._mediaStreamTrack.enabled = false;
  }
  /* @internal */
  stopMonitor() {
    this.monitorInterval && clearInterval(this.monitorInterval);
  }
  /** @internal */
  updateLoggerOptions(u2) {
    u2.loggerName && (this.log = getLogger(u2.loggerName)), u2.loggerContextCb && (this.loggerContextCb = u2.loggerContextCb);
  }
  recycleElement(u2) {
    if (u2 instanceof HTMLAudioElement) {
      let c = true;
      u2.pause(), recycledElements.forEach((l2) => {
        l2.parentElement || (c = false);
      }), c && recycledElements.push(u2);
    }
  }
  handleAppVisibilityChanged() {
    return __awaiter(this, void 0, void 0, function* () {
      this.isInBackground = document.visibilityState === "hidden";
    });
  }
  addAppVisibilityListener() {
    isWeb() ? (this.isInBackground = document.visibilityState === "hidden", document.addEventListener("visibilitychange", this.appVisibilityChangedListener)) : this.isInBackground = false;
  }
  removeAppVisibilityListener() {
    isWeb() && document.removeEventListener("visibilitychange", this.appVisibilityChangedListener);
  }
}
function attachToElement(a420, u2) {
  let c;
  u2.srcObject instanceof MediaStream ? c = u2.srcObject : c = new MediaStream();
  let l2;
  a420.kind === "audio" ? l2 = c.getAudioTracks() : l2 = c.getVideoTracks(), l2.includes(a420) || (l2.forEach((v2) => {
    c.removeTrack(v2);
  }), c.addTrack(a420)), (!isSafari() || !(u2 instanceof HTMLVideoElement)) && (u2.autoplay = true), u2.muted = c.getAudioTracks().length === 0, u2 instanceof HTMLVideoElement && (u2.playsInline = true), u2.srcObject !== c && (u2.srcObject = c, (isSafari() || isFireFox()) && u2 instanceof HTMLVideoElement && setTimeout(() => {
    u2.srcObject = c, u2.play().catch(() => {
    });
  }, 0));
}
function detachTrack(a420, u2) {
  if (u2.srcObject instanceof MediaStream) {
    const c = u2.srcObject;
    c.removeTrack(a420), c.getTracks().length > 0 ? u2.srcObject = c : u2.srcObject = null;
  }
}
(function(a420) {
  let u2;
  (function($) {
    $.Audio = "audio", $.Video = "video", $.Unknown = "unknown";
  })(u2 = a420.Kind || (a420.Kind = {}));
  let c;
  (function($) {
    $.Camera = "camera", $.Microphone = "microphone", $.ScreenShare = "screen_share", $.ScreenShareAudio = "screen_share_audio", $.Unknown = "unknown";
  })(c = a420.Source || (a420.Source = {}));
  let l2;
  (function($) {
    $.Active = "active", $.Paused = "paused", $.Unknown = "unknown";
  })(l2 = a420.StreamState || (a420.StreamState = {}));
  function v2($) {
    switch ($) {
      case u2.Audio:
        return TrackType.AUDIO;
      case u2.Video:
        return TrackType.VIDEO;
      default:
        return TrackType.DATA;
    }
  }
  a420.kindToProto = v2;
  function p2($) {
    switch ($) {
      case TrackType.AUDIO:
        return u2.Audio;
      case TrackType.VIDEO:
        return u2.Video;
      default:
        return u2.Unknown;
    }
  }
  a420.kindFromProto = p2;
  function _($) {
    switch ($) {
      case c.Camera:
        return TrackSource.CAMERA;
      case c.Microphone:
        return TrackSource.MICROPHONE;
      case c.ScreenShare:
        return TrackSource.SCREEN_SHARE;
      case c.ScreenShareAudio:
        return TrackSource.SCREEN_SHARE_AUDIO;
      default:
        return TrackSource.UNKNOWN;
    }
  }
  a420.sourceToProto = _;
  function I2($) {
    switch ($) {
      case TrackSource.CAMERA:
        return c.Camera;
      case TrackSource.MICROPHONE:
        return c.Microphone;
      case TrackSource.SCREEN_SHARE:
        return c.ScreenShare;
      case TrackSource.SCREEN_SHARE_AUDIO:
        return c.ScreenShareAudio;
      default:
        return c.Unknown;
    }
  }
  a420.sourceFromProto = I2;
  function P2($) {
    switch ($) {
      case StreamState.ACTIVE:
        return l2.Active;
      case StreamState.PAUSED:
        return l2.Paused;
      default:
        return l2.Unknown;
    }
  }
  a420.streamStateFromProto = P2;
})(Track || (Track = {}));
function mergeDefaultOptions(a420, u2, c) {
  var l2;
  const v2 = (l2 = cloneDeep(a420)) !== null && l2 !== void 0 ? l2 : {};
  return v2.audio === true && (v2.audio = {}), v2.video === true && (v2.video = {}), v2.audio && mergeObjectWithoutOverwriting(v2.audio, u2), v2.video && mergeObjectWithoutOverwriting(v2.video, c), v2;
}
function mergeObjectWithoutOverwriting(a420, u2) {
  return Object.keys(u2).forEach((c) => {
    a420[c] === void 0 && (a420[c] = u2[c]);
  }), a420;
}
function constraintsForOptions(a420) {
  const u2 = {};
  if (a420.video) {
    if (typeof a420.video == "object") {
      const c = {}, l2 = c, v2 = a420.video;
      Object.keys(v2).forEach((p2) => {
        switch (p2) {
          case "resolution":
            mergeObjectWithoutOverwriting(l2, v2.resolution);
            break;
          default:
            l2[p2] = v2[p2];
        }
      }), u2.video = c;
    } else
      u2.video = a420.video;
  } else
    u2.video = false;
  return a420.audio ? typeof a420.audio == "object" ? u2.audio = a420.audio : u2.audio = true : u2.audio = false, u2;
}
function detectSilence(a420) {
  let u2 = arguments.length > 1 && arguments[1] !== void 0 ? arguments[1] : 200;
  return __awaiter(this, void 0, void 0, function* () {
    const c = getNewAudioContext();
    if (c) {
      const l2 = c.createAnalyser();
      l2.fftSize = 2048;
      const v2 = l2.frequencyBinCount, p2 = new Uint8Array(v2);
      c.createMediaStreamSource(new MediaStream([a420.mediaStreamTrack])).connect(l2), yield sleep(u2), l2.getByteTimeDomainData(p2);
      const I2 = p2.some((P2) => P2 !== 128 && P2 !== 0);
      return c.close(), !I2;
    }
    return false;
  });
}
function getNewAudioContext() {
  const a420 = (
    // @ts-ignore
    typeof window < "u" && (window.AudioContext || window.webkitAudioContext)
  );
  if (a420)
    return new a420({ latencyHint: "interactive" });
}
function sourceToKind(a420) {
  return a420 === Track.Source.Microphone ? "audioinput" : a420 === Track.Source.Camera ? "videoinput" : void 0;
}
function screenCaptureToDisplayMediaStreamOptions(a420) {
  var u2, c;
  let l2 = (u2 = a420.video) !== null && u2 !== void 0 ? u2 : true;
  return a420.resolution && a420.resolution.width > 0 && a420.resolution.height > 0 && (l2 = typeof l2 == "boolean" ? {} : l2, isSafari() ? l2 = Object.assign(Object.assign({}, l2), { width: { max: a420.resolution.width }, height: { max: a420.resolution.height }, frameRate: a420.resolution.frameRate }) : l2 = Object.assign(Object.assign({}, l2), { width: { ideal: a420.resolution.width }, height: { ideal: a420.resolution.height }, frameRate: a420.resolution.frameRate })), {
    audio: (c = a420.audio) !== null && c !== void 0 ? c : false,
    video: l2,
    // @ts-expect-error support for experimental display media features
    controller: a420.controller,
    selfBrowserSurface: a420.selfBrowserSurface,
    surfaceSwitching: a420.surfaceSwitching,
    systemAudio: a420.systemAudio
  };
}
function mimeTypeToVideoCodecString(a420) {
  const u2 = a420.split("/")[1].toLowerCase();
  if (!videoCodecs.includes(u2))
    throw Error("Video codec not supported: ".concat(u2));
  return u2;
}
function getTrackPublicationInfo(a420) {
  const u2 = [];
  return a420.forEach((c) => {
    c.track !== void 0 && u2.push(new TrackPublishedResponse({ cid: c.track.mediaStreamID, track: c.trackInfo }));
  }), u2;
}
function getLogContextFromTrack(a420) {
  return a420 instanceof Track ? { trackSid: a420.sid, trackSource: a420.source, trackMuted: a420.isMuted, trackEnabled: a420.mediaStreamTrack.enabled, trackKind: a420.kind } : { trackSid: a420.trackSid, trackName: a420.trackName, track: a420.track ? getLogContextFromTrack(a420.track) : void 0, trackEnabled: a420.isEnabled, trackEncrypted: a420.isEncrypted, trackMimeType: a420.mimeType };
}
const separator = "|", ddExtensionURI = "https://aomediacodec.github.io/av1-rtp-spec/#dependency-descriptor-rtp-header-extension";
function unpackStreamId(a420) {
  const u2 = a420.split(separator);
  return u2.length > 1 ? [u2[0], a420.substr(u2[0].length + 1)] : [a420, ""];
}
function sleep(a420) {
  return __awaiter(this, void 0, void 0, function* () {
    return new Promise((u2) => CriticalTimers.setTimeout(u2, a420));
  });
}
function supportsTransceiver() {
  return "addTransceiver" in RTCPeerConnection.prototype;
}
function supportsAddTrack() {
  return "addTrack" in RTCPeerConnection.prototype;
}
function supportsAV1() {
  if (!("getCapabilities" in RTCRtpSender) || isSafari())
    return false;
  const a420 = RTCRtpSender.getCapabilities("video");
  let u2 = false;
  if (a420) {
    for (const c of a420.codecs)
      if (c.mimeType === "video/AV1") {
        u2 = true;
        break;
      }
  }
  return u2;
}
function supportsVP9() {
  if (!("getCapabilities" in RTCRtpSender) || isFireFox())
    return false;
  if (isSafari()) {
    const c = getBrowser();
    if (c != null && c.version && compareVersions(c.version, "16") < 0)
      return false;
  }
  const a420 = RTCRtpSender.getCapabilities("video");
  let u2 = false;
  if (a420) {
    for (const c of a420.codecs)
      if (c.mimeType === "video/VP9") {
        u2 = true;
        break;
      }
  }
  return u2;
}
function isSVCCodec(a420) {
  return a420 === "av1" || a420 === "vp9";
}
function supportsSetSinkId(a420) {
  return document ? (a420 || (a420 = document.createElement("audio")), "setSinkId" in a420) : false;
}
const setCodecPreferencesVersions = { Chrome: "100", Safari: "15", Firefox: "100" };
function supportsSetCodecPreferences(a420) {
  if (!isWeb() || !("setCodecPreferences" in a420))
    return false;
  const u2 = getBrowser();
  if (!(u2 != null && u2.name) || !u2.version)
    return false;
  const c = setCodecPreferencesVersions[u2.name];
  return c ? compareVersions(u2.version, c) >= 0 : false;
}
function isFireFox() {
  var a420;
  return ((a420 = getBrowser()) === null || a420 === void 0 ? void 0 : a420.name) === "Firefox";
}
function isSafari() {
  var a420;
  return ((a420 = getBrowser()) === null || a420 === void 0 ? void 0 : a420.name) === "Safari";
}
function isSafari17() {
  const a420 = getBrowser();
  return (a420 == null ? void 0 : a420.name) === "Safari" && a420.version.startsWith("17.");
}
function isMobile() {
  return isWeb() ? /Tablet|iPad|Mobile|Android|BlackBerry/.test(navigator.userAgent) : false;
}
function isWeb() {
  return typeof document < "u";
}
function isReactNative() {
  return navigator.product == "ReactNative";
}
function isCloud(a420) {
  return a420.hostname.endsWith(".livekit.cloud") || a420.hostname.endsWith(".livekit.run");
}
function getLKReactNativeInfo() {
  if (global$1 && global$1.LiveKitReactNativeGlobal)
    return global$1.LiveKitReactNativeGlobal;
}
function getReactNativeOs() {
  if (!isReactNative())
    return;
  let a420 = getLKReactNativeInfo();
  if (a420)
    return a420.platform;
}
function getDevicePixelRatio() {
  if (isWeb())
    return window.devicePixelRatio;
  if (isReactNative()) {
    let a420 = getLKReactNativeInfo();
    if (a420)
      return a420.devicePixelRatio;
  }
  return 1;
}
function compareVersions(a420, u2) {
  const c = a420.split("."), l2 = u2.split("."), v2 = Math.min(c.length, l2.length);
  for (let p2 = 0; p2 < v2; ++p2) {
    const _ = parseInt(c[p2], 10), I2 = parseInt(l2[p2], 10);
    if (_ > I2)
      return 1;
    if (_ < I2)
      return -1;
    if (p2 === v2 - 1 && _ === I2)
      return 0;
  }
  return a420 === "" && u2 !== "" ? -1 : u2 === "" ? 1 : c.length == l2.length ? 0 : c.length < l2.length ? -1 : 1;
}
function roDispatchCallback(a420) {
  for (const u2 of a420)
    u2.target.handleResize(u2);
}
function ioDispatchCallback(a420) {
  for (const u2 of a420)
    u2.target.handleVisibilityChanged(u2);
}
let resizeObserver = null;
const getResizeObserver = () => (resizeObserver || (resizeObserver = new ResizeObserver(roDispatchCallback)), resizeObserver);
let intersectionObserver = null;
const getIntersectionObserver = () => (intersectionObserver || (intersectionObserver = new IntersectionObserver(ioDispatchCallback, { root: null, rootMargin: "0px" })), intersectionObserver);
function getClientInfo() {
  var a420;
  const u2 = new ClientInfo({ sdk: ClientInfo_SDK.JS, protocol: protocolVersion, version });
  return isReactNative() && (u2.os = (a420 = getReactNativeOs()) !== null && a420 !== void 0 ? a420 : ""), u2;
}
function createDummyVideoStreamTrack() {
  let a420 = arguments.length > 0 && arguments[0] !== void 0 ? arguments[0] : 16, u2 = arguments.length > 1 && arguments[1] !== void 0 ? arguments[1] : 16, c = arguments.length > 2 && arguments[2] !== void 0 ? arguments[2] : false, l2 = arguments.length > 3 && arguments[3] !== void 0 ? arguments[3] : false;
  const v2 = document.createElement("canvas");
  v2.width = a420, v2.height = u2;
  const p2 = v2.getContext("2d");
  p2 == null || p2.fillRect(0, 0, v2.width, v2.height), l2 && p2 && (p2.beginPath(), p2.arc(a420 / 2, u2 / 2, 50, 0, Math.PI * 2, true), p2.closePath(), p2.fillStyle = "grey", p2.fill());
  const _ = v2.captureStream(), [I2] = _.getTracks();
  if (!I2)
    throw Error("Could not get empty media stream video track");
  return I2.enabled = c, I2;
}
let emptyAudioStreamTrack;
function getEmptyAudioStreamTrack() {
  if (!emptyAudioStreamTrack) {
    const a420 = new AudioContext(), u2 = a420.createOscillator(), c = a420.createGain();
    c.gain.setValueAtTime(0, 0);
    const l2 = a420.createMediaStreamDestination();
    if (u2.connect(c), c.connect(l2), u2.start(), [emptyAudioStreamTrack] = l2.stream.getAudioTracks(), !emptyAudioStreamTrack)
      throw Error("Could not get empty media stream audio track");
    emptyAudioStreamTrack.enabled = false;
  }
  return emptyAudioStreamTrack.clone();
}
class Future {
  constructor(u2, c) {
    this.onFinally = c, this.promise = new Promise((l2, v2) => __awaiter(this, void 0, void 0, function* () {
      this.resolve = l2, this.reject = v2, u2 && (yield u2(l2, v2));
    })).finally(() => {
      var l2;
      return (l2 = this.onFinally) === null || l2 === void 0 ? void 0 : l2.call(this);
    });
  }
}
class Mutex {
  constructor() {
    this._locking = Promise.resolve(), this._locks = 0;
  }
  isLocked() {
    return this._locks > 0;
  }
  lock() {
    this._locks += 1;
    let u2;
    const c = new Promise((v2) => u2 = () => {
      this._locks -= 1, v2();
    }), l2 = this._locking.then(() => u2);
    return this._locking = this._locking.then(() => c), l2;
  }
}
function isVideoCodec(a420) {
  return videoCodecs.includes(a420);
}
function unwrapConstraint(a420) {
  if (typeof a420 == "string")
    return a420;
  if (Array.isArray(a420))
    return a420[0];
  if (a420.exact)
    return Array.isArray(a420.exact) ? a420.exact[0] : a420.exact;
  if (a420.ideal)
    return Array.isArray(a420.ideal) ? a420.ideal[0] : a420.ideal;
  throw Error("could not unwrap constraint");
}
function toWebsocketUrl(a420) {
  return a420.startsWith("http") ? a420.replace(/^(http)/, "ws") : a420;
}
function toHttpUrl(a420) {
  return a420.startsWith("ws") ? a420.replace(/^(ws)/, "http") : a420;
}
const defaultId = "default";
class DeviceManager {
  static getInstance() {
    return this.instance === void 0 && (this.instance = new DeviceManager()), this.instance;
  }
  getDevices(u2) {
    let c = arguments.length > 1 && arguments[1] !== void 0 ? arguments[1] : true;
    var l2;
    return __awaiter(this, void 0, void 0, function* () {
      if (((l2 = DeviceManager.userMediaPromiseMap) === null || l2 === void 0 ? void 0 : l2.size) > 0) {
        livekitLogger.debug("awaiting getUserMedia promise");
        try {
          u2 ? yield DeviceManager.userMediaPromiseMap.get(u2) : yield Promise.all(DeviceManager.userMediaPromiseMap.values());
        } catch {
          livekitLogger.warn("error waiting for media permissons");
        }
      }
      let v2 = yield navigator.mediaDevices.enumerateDevices();
      if (c && // for safari we need to skip this check, as otherwise it will re-acquire user media and fail on iOS https://bugs.webkit.org/show_bug.cgi?id=179363
      !(isSafari() && this.hasDeviceInUse(u2)) && (v2.length === 0 || v2.some((_) => {
        const I2 = _.label === "", P2 = u2 ? _.kind === u2 : true;
        return I2 && P2;
      }))) {
        const _ = { video: u2 !== "audioinput" && u2 !== "audiooutput", audio: u2 !== "videoinput" }, I2 = yield navigator.mediaDevices.getUserMedia(_);
        v2 = yield navigator.mediaDevices.enumerateDevices(), I2.getTracks().forEach((P2) => {
          P2.stop();
        });
      }
      return u2 && (v2 = v2.filter((p2) => p2.kind === u2)), v2;
    });
  }
  normalizeDeviceId(u2, c, l2) {
    return __awaiter(this, void 0, void 0, function* () {
      if (c !== defaultId)
        return c;
      const p2 = (yield this.getDevices(u2)).find((_) => _.groupId === l2 && _.deviceId !== defaultId);
      return p2 == null ? void 0 : p2.deviceId;
    });
  }
  hasDeviceInUse(u2) {
    return u2 ? DeviceManager.userMediaPromiseMap.has(u2) : DeviceManager.userMediaPromiseMap.size > 0;
  }
}
DeviceManager.mediaDeviceKinds = ["audioinput", "audiooutput", "videoinput"];
DeviceManager.userMediaPromiseMap = /* @__PURE__ */ new Map();
const defaultDimensionsTimeout = 1e3;
class LocalTrack extends Track {
  get constraints() {
    return this._constraints;
  }
  /**
  *
  * @param mediaTrack
  * @param kind
  * @param constraints MediaTrackConstraints that are being used when restarting or reacquiring tracks
  * @param userProvidedTrack Signals to the SDK whether or not the mediaTrack should be managed (i.e. released and reacquired) internally by the SDK
  */
  constructor(u2, c, l2) {
    let v2 = arguments.length > 3 && arguments[3] !== void 0 ? arguments[3] : false, p2 = arguments.length > 4 ? arguments[4] : void 0;
    super(u2, c, p2), this._isUpstreamPaused = false, this.handleTrackMuteEvent = () => this.debouncedTrackMuteHandler().catch(() => this.log.debug("track mute bounce got cancelled by an unmute event", this.logContext)), this.debouncedTrackMuteHandler = r(() => __awaiter(this, void 0, void 0, function* () {
      yield this.pauseUpstream();
    }), 5e3), this.handleTrackUnmuteEvent = () => __awaiter(this, void 0, void 0, function* () {
      this.debouncedTrackMuteHandler.cancel("unmute"), yield this.resumeUpstream();
    }), this.handleEnded = () => {
      this.isInBackground && (this.reacquireTrack = true), this._mediaStreamTrack.removeEventListener("mute", this.handleTrackMuteEvent), this._mediaStreamTrack.removeEventListener("unmute", this.handleTrackUnmuteEvent), this.emit(TrackEvent.Ended, this);
    }, this.reacquireTrack = false, this.providedByUser = v2, this.muteLock = new Mutex(), this.pauseUpstreamLock = new Mutex(), this.processorLock = new Mutex(), this.setMediaStreamTrack(u2, true), this._constraints = u2.getConstraints(), l2 && (this._constraints = l2);
  }
  get id() {
    return this._mediaStreamTrack.id;
  }
  get dimensions() {
    if (this.kind !== Track.Kind.Video)
      return;
    const { width: u2, height: c } = this._mediaStreamTrack.getSettings();
    if (u2 && c)
      return { width: u2, height: c };
  }
  get isUpstreamPaused() {
    return this._isUpstreamPaused;
  }
  get isUserProvided() {
    return this.providedByUser;
  }
  get mediaStreamTrack() {
    var u2, c;
    return (c = (u2 = this.processor) === null || u2 === void 0 ? void 0 : u2.processedTrack) !== null && c !== void 0 ? c : this._mediaStreamTrack;
  }
  setMediaStreamTrack(u2, c) {
    return __awaiter(this, void 0, void 0, function* () {
      if (u2 === this._mediaStreamTrack && !c)
        return;
      this._mediaStreamTrack && (this.attachedElements.forEach((v2) => {
        detachTrack(this._mediaStreamTrack, v2);
      }), this.debouncedTrackMuteHandler.cancel("new-track"), this._mediaStreamTrack.removeEventListener("ended", this.handleEnded), this._mediaStreamTrack.removeEventListener("mute", this.handleTrackMuteEvent), this._mediaStreamTrack.removeEventListener("unmute", this.handleTrackUnmuteEvent)), this.mediaStream = new MediaStream([u2]), u2 && (u2.addEventListener("ended", this.handleEnded), u2.addEventListener("mute", this.handleTrackMuteEvent), u2.addEventListener("unmute", this.handleTrackUnmuteEvent), this._constraints = u2.getConstraints());
      let l2;
      if (this.processor && u2 && this.processorElement) {
        if (this.log.debug("restarting processor", this.logContext), this.kind === "unknown")
          throw TypeError("cannot set processor on track of unknown kind");
        attachToElement(u2, this.processorElement), this.processorElement.muted = true, yield this.processor.restart({ track: u2, kind: this.kind, element: this.processorElement }), l2 = this.processor.processedTrack;
      }
      this.sender && (yield this.sender.replaceTrack(l2 ?? u2)), !this.providedByUser && this._mediaStreamTrack !== u2 && this._mediaStreamTrack.stop(), this._mediaStreamTrack = u2, u2 && (this._mediaStreamTrack.enabled = !this.isMuted, yield this.resumeUpstream(), this.attachedElements.forEach((v2) => {
        attachToElement(l2 ?? u2, v2);
      }));
    });
  }
  waitForDimensions() {
    let u2 = arguments.length > 0 && arguments[0] !== void 0 ? arguments[0] : defaultDimensionsTimeout;
    var c;
    return __awaiter(this, void 0, void 0, function* () {
      if (this.kind === Track.Kind.Audio)
        throw new Error("cannot get dimensions for audio tracks");
      ((c = getBrowser()) === null || c === void 0 ? void 0 : c.os) === "iOS" && (yield sleep(10));
      const l2 = Date.now();
      for (; Date.now() - l2 < u2; ) {
        const v2 = this.dimensions;
        if (v2)
          return v2;
        yield sleep(50);
      }
      throw new TrackInvalidError("unable to get track dimensions after timeout");
    });
  }
  /**
  * @returns DeviceID of the device that is currently being used for this track
  */
  getDeviceId() {
    return __awaiter(this, void 0, void 0, function* () {
      if (this.source === Track.Source.ScreenShare)
        return;
      const { deviceId: u2, groupId: c } = this._mediaStreamTrack.getSettings(), l2 = this.kind === Track.Kind.Audio ? "audioinput" : "videoinput";
      return DeviceManager.getInstance().normalizeDeviceId(l2, u2, c);
    });
  }
  mute() {
    return __awaiter(this, void 0, void 0, function* () {
      return this.setTrackMuted(true), this;
    });
  }
  unmute() {
    return __awaiter(this, void 0, void 0, function* () {
      return this.setTrackMuted(false), this;
    });
  }
  replaceTrack(u2) {
    let c = arguments.length > 1 && arguments[1] !== void 0 ? arguments[1] : true;
    return __awaiter(this, void 0, void 0, function* () {
      if (!this.sender)
        throw new TrackInvalidError("unable to replace an unpublished track");
      return this.log.debug("replace MediaStreamTrack", this.logContext), yield this.setMediaStreamTrack(u2), this.providedByUser = c, this.processor && (yield this.stopProcessor()), this;
    });
  }
  restart(u2) {
    return __awaiter(this, void 0, void 0, function* () {
      u2 || (u2 = this._constraints), this.log.debug("restarting track with constraints", Object.assign(Object.assign({}, this.logContext), { constraints: u2 }));
      const c = { audio: false, video: false };
      this.kind === Track.Kind.Video ? c.video = u2 : c.audio = u2, this.attachedElements.forEach((p2) => {
        detachTrack(this.mediaStreamTrack, p2);
      }), this._mediaStreamTrack.removeEventListener("ended", this.handleEnded), this._mediaStreamTrack.stop();
      const v2 = (yield navigator.mediaDevices.getUserMedia(c)).getTracks()[0];
      return v2.addEventListener("ended", this.handleEnded), this.log.debug("re-acquired MediaStreamTrack", this.logContext), yield this.setMediaStreamTrack(v2), this._constraints = u2, this.emit(TrackEvent.Restarted, this), this;
    });
  }
  setTrackMuted(u2) {
    this.log.debug("setting ".concat(this.kind, " track ").concat(u2 ? "muted" : "unmuted"), this.logContext), !(this.isMuted === u2 && this._mediaStreamTrack.enabled !== u2) && (this.isMuted = u2, this._mediaStreamTrack.enabled = !u2, this.emit(u2 ? TrackEvent.Muted : TrackEvent.Unmuted, this));
  }
  get needsReAcquisition() {
    return this._mediaStreamTrack.readyState !== "live" || this._mediaStreamTrack.muted || !this._mediaStreamTrack.enabled || this.reacquireTrack;
  }
  handleAppVisibilityChanged() {
    const u2 = Object.create(null, { handleAppVisibilityChanged: { get: () => super.handleAppVisibilityChanged } });
    return __awaiter(this, void 0, void 0, function* () {
      yield u2.handleAppVisibilityChanged.call(this), isMobile() && (this.log.debug("visibility changed, is in Background: ".concat(this.isInBackground), this.logContext), !this.isInBackground && this.needsReAcquisition && !this.isUserProvided && !this.isMuted && (this.log.debug("track needs to be reacquired, restarting ".concat(this.source), this.logContext), yield this.restart(), this.reacquireTrack = false));
    });
  }
  stop() {
    var u2;
    super.stop(), this._mediaStreamTrack.removeEventListener("ended", this.handleEnded), this._mediaStreamTrack.removeEventListener("mute", this.handleTrackMuteEvent), this._mediaStreamTrack.removeEventListener("unmute", this.handleTrackUnmuteEvent), (u2 = this.processor) === null || u2 === void 0 || u2.destroy(), this.processor = void 0;
  }
  /**
  * pauses publishing to the server without disabling the local MediaStreamTrack
  * this is used to display a user's own video locally while pausing publishing to
  * the server.
  * this API is unsupported on Safari < 12 due to a bug
  **/
  pauseUpstream() {
    return __awaiter(this, void 0, void 0, function* () {
      const u2 = yield this.pauseUpstreamLock.lock();
      try {
        if (this._isUpstreamPaused === true)
          return;
        if (!this.sender) {
          this.log.warn("unable to pause upstream for an unpublished track", this.logContext);
          return;
        }
        this._isUpstreamPaused = true, this.emit(TrackEvent.UpstreamPaused, this);
        const c = getBrowser();
        if ((c == null ? void 0 : c.name) === "Safari" && compareVersions(c.version, "12.0") < 0)
          throw new DeviceUnsupportedError("pauseUpstream is not supported on Safari < 12.");
        yield this.sender.replaceTrack(null);
      } finally {
        u2();
      }
    });
  }
  resumeUpstream() {
    return __awaiter(this, void 0, void 0, function* () {
      const u2 = yield this.pauseUpstreamLock.lock();
      try {
        if (this._isUpstreamPaused === false)
          return;
        if (!this.sender) {
          this.log.warn("unable to resume upstream for an unpublished track", this.logContext);
          return;
        }
        this._isUpstreamPaused = false, this.emit(TrackEvent.UpstreamResumed, this), yield this.sender.replaceTrack(this._mediaStreamTrack);
      } finally {
        u2();
      }
    });
  }
  /**
  * Gets the RTCStatsReport for the LocalTrack's underlying RTCRtpSender
  * See https://developer.mozilla.org/en-US/docs/Web/API/RTCStatsReport
  *
  * @returns Promise<RTCStatsReport> | undefined
  */
  getRTCStatsReport() {
    var u2;
    return __awaiter(this, void 0, void 0, function* () {
      return !((u2 = this.sender) === null || u2 === void 0) && u2.getStats ? yield this.sender.getStats() : void 0;
    });
  }
  /**
  * Sets a processor on this track.
  * See https://github.com/livekit/track-processors-js for example usage
  *
  * @experimental
  *
  * @param processor
  * @param showProcessedStreamLocally
  * @returns
  */
  setProcessor(u2) {
    let c = arguments.length > 1 && arguments[1] !== void 0 ? arguments[1] : true;
    var l2, v2;
    return __awaiter(this, void 0, void 0, function* () {
      const p2 = yield this.processorLock.lock();
      try {
        if (this.log.debug("setting up processor", this.logContext), this.processor && (yield this.stopProcessor()), this.kind === "unknown")
          throw TypeError("cannot set processor on track of unknown kind");
        this.processorElement = (l2 = this.processorElement) !== null && l2 !== void 0 ? l2 : document.createElement(this.kind), attachToElement(this._mediaStreamTrack, this.processorElement), this.processorElement.muted = true, this.processorElement.play().catch((I2) => this.log.error("failed to play processor element", Object.assign(Object.assign({}, this.logContext), { error: I2 })));
        const _ = { kind: this.kind, track: this._mediaStreamTrack, element: this.processorElement };
        if (yield u2.init(_), this.processor = u2, this.processor.processedTrack) {
          for (const I2 of this.attachedElements)
            I2 !== this.processorElement && c && (detachTrack(this._mediaStreamTrack, I2), attachToElement(this.processor.processedTrack, I2));
          yield (v2 = this.sender) === null || v2 === void 0 ? void 0 : v2.replaceTrack(this.processor.processedTrack);
        }
      } finally {
        p2();
      }
    });
  }
  getProcessor() {
    return this.processor;
  }
  /**
  * Stops the track processor
  * See https://github.com/livekit/track-processors-js for example usage
  *
  * @experimental
  * @returns
  */
  stopProcessor() {
    var u2, c;
    return __awaiter(this, void 0, void 0, function* () {
      this.processor && (this.log.debug("stopping processor", this.logContext), (u2 = this.processor.processedTrack) === null || u2 === void 0 || u2.stop(), yield this.processor.destroy(), this.processor = void 0, (c = this.processorElement) === null || c === void 0 || c.remove(), this.processorElement = void 0, yield this.restart());
    });
  }
}
class E2EEManager extends eventsExports.EventEmitter {
  constructor(u2) {
    super(), this.onWorkerMessage = (c) => {
      var l2, v2;
      const { kind: p2, data: _ } = c.data;
      switch (p2) {
        case "error":
          livekitLogger.error(_.error.message), this.emit(EncryptionEvent.EncryptionError, _.error);
          break;
        case "initAck":
          _.enabled && this.keyProvider.getKeys().forEach((I2) => {
            this.postKey(I2);
          });
          break;
        case "enable":
          if (this.encryptionEnabled !== _.enabled && _.participantIdentity === ((l2 = this.room) === null || l2 === void 0 ? void 0 : l2.localParticipant.identity))
            this.emit(EncryptionEvent.ParticipantEncryptionStatusChanged, _.enabled, this.room.localParticipant), this.encryptionEnabled = _.enabled;
          else if (_.participantIdentity) {
            const I2 = (v2 = this.room) === null || v2 === void 0 ? void 0 : v2.getParticipantByIdentity(_.participantIdentity);
            if (!I2)
              throw TypeError("couldn't set encryption status, participant not found".concat(_.participantIdentity));
            this.emit(EncryptionEvent.ParticipantEncryptionStatusChanged, _.enabled, I2);
          }
          this.encryptionEnabled && this.keyProvider.getKeys().forEach((I2) => {
            this.postKey(I2);
          });
          break;
        case "ratchetKey":
          this.keyProvider.emit(KeyProviderEvent.KeyRatcheted, _.material, _.keyIndex);
          break;
      }
    }, this.onWorkerError = (c) => {
      livekitLogger.error("e2ee worker encountered an error:", { error: c.error }), this.emit(EncryptionEvent.EncryptionError, c.error);
    }, this.keyProvider = u2.keyProvider, this.worker = u2.worker, this.encryptionEnabled = false;
  }
  /**
  * @internal
  */
  setup(u2) {
    if (!isE2EESupported())
      throw new DeviceUnsupportedError("tried to setup end-to-end encryption on an unsupported browser");
    if (livekitLogger.info("setting up e2ee"), u2 !== this.room) {
      this.room = u2, this.setupEventListeners(u2, this.keyProvider);
      const c = { kind: "init", data: { keyProviderOptions: this.keyProvider.getOptions() } };
      this.worker && (livekitLogger.info("initializing worker", { worker: this.worker }), this.worker.onmessage = this.onWorkerMessage, this.worker.onerror = this.onWorkerError, this.worker.postMessage(c));
    }
  }
  /**
  * @internal
  */
  setParticipantCryptorEnabled(u2, c) {
    livekitLogger.debug("set e2ee to ".concat(u2, " for participant ").concat(c)), this.postEnable(u2, c);
  }
  /**
  * @internal
  */
  setSifTrailer(u2) {
    !u2 || u2.length === 0 ? livekitLogger.warn("ignoring server sent trailer as it's empty") : this.postSifTrailer(u2);
  }
  setupEngine(u2) {
    u2.on(EngineEvent.RTPVideoMapUpdate, (c) => {
      this.postRTPMap(c);
    });
  }
  setupEventListeners(u2, c) {
    u2.on(RoomEvent.TrackPublished, (l2, v2) => this.setParticipantCryptorEnabled(l2.trackInfo.encryption !== Encryption_Type.NONE, v2.identity)), u2.on(RoomEvent.ConnectionStateChanged, (l2) => {
      l2 === ConnectionState.Connected && u2.remoteParticipants.forEach((v2) => {
        v2.trackPublications.forEach((p2) => {
          this.setParticipantCryptorEnabled(p2.trackInfo.encryption !== Encryption_Type.NONE, v2.identity);
        });
      });
    }).on(RoomEvent.TrackUnsubscribed, (l2, v2, p2) => {
      var _;
      const I2 = { kind: "removeTransform", data: { participantIdentity: p2.identity, trackId: l2.mediaStreamID } };
      (_ = this.worker) === null || _ === void 0 || _.postMessage(I2);
    }).on(RoomEvent.TrackSubscribed, (l2, v2, p2) => {
      this.setupE2EEReceiver(l2, p2.identity, v2.trackInfo);
    }).on(RoomEvent.SignalConnected, () => {
      if (!this.room)
        throw new TypeError("expected room to be present on signal connect");
      this.setParticipantCryptorEnabled(this.room.localParticipant.isE2EEEnabled, this.room.localParticipant.identity), c.getKeys().forEach((l2) => {
        this.postKey(l2);
      });
    }), u2.localParticipant.on(ParticipantEvent.LocalTrackPublished, (l2) => __awaiter(this, void 0, void 0, function* () {
      this.setupE2EESender(l2.track, l2.track.sender);
    })), c.on(KeyProviderEvent.SetKey, (l2) => this.postKey(l2)).on(KeyProviderEvent.RatchetRequest, (l2, v2) => this.postRatchetRequest(l2, v2));
  }
  postRatchetRequest(u2, c) {
    if (!this.worker)
      throw Error("could not ratchet key, worker is missing");
    const l2 = { kind: "ratchetRequest", data: { participantIdentity: u2, keyIndex: c } };
    this.worker.postMessage(l2);
  }
  postKey(u2) {
    let { key: c, participantIdentity: l2, keyIndex: v2 } = u2;
    var p2;
    if (!this.worker)
      throw Error("could not set key, worker is missing");
    const _ = { kind: "setKey", data: { participantIdentity: l2, isPublisher: l2 === ((p2 = this.room) === null || p2 === void 0 ? void 0 : p2.localParticipant.identity), key: c, keyIndex: v2 } };
    this.worker.postMessage(_);
  }
  postEnable(u2, c) {
    if (this.worker) {
      const l2 = { kind: "enable", data: { enabled: u2, participantIdentity: c } };
      this.worker.postMessage(l2);
    } else
      throw new ReferenceError("failed to enable e2ee, worker is not ready");
  }
  postRTPMap(u2) {
    var c;
    if (!this.worker)
      throw TypeError("could not post rtp map, worker is missing");
    if (!(!((c = this.room) === null || c === void 0) && c.localParticipant.identity))
      throw TypeError("could not post rtp map, local participant identity is missing");
    const l2 = { kind: "setRTPMap", data: { map: u2, participantIdentity: this.room.localParticipant.identity } };
    this.worker.postMessage(l2);
  }
  postSifTrailer(u2) {
    if (!this.worker)
      throw Error("could not post SIF trailer, worker is missing");
    const c = { kind: "setSifTrailer", data: { trailer: u2 } };
    this.worker.postMessage(c);
  }
  setupE2EEReceiver(u2, c, l2) {
    if (u2.receiver) {
      if (!(l2 != null && l2.mimeType) || l2.mimeType === "")
        throw new TypeError("MimeType missing from trackInfo, cannot set up E2EE cryptor");
      this.handleReceiver(u2.receiver, u2.mediaStreamID, c, u2.kind === "video" ? mimeTypeToVideoCodecString(l2.mimeType) : void 0);
    }
  }
  setupE2EESender(u2, c) {
    if (!(u2 instanceof LocalTrack) || !c) {
      c || livekitLogger.warn("early return because sender is not ready");
      return;
    }
    this.handleSender(c, u2.mediaStreamID, void 0);
  }
  /**
  * Handles the given {@code RTCRtpReceiver} by creating a {@code TransformStream} which will inject
  * a frame decoder.
  *
  */
  handleReceiver(u2, c, l2, v2) {
    return __awaiter(this, void 0, void 0, function* () {
      if (this.worker) {
        if (isScriptTransformSupported()) {
          const p2 = { kind: "decode", participantIdentity: l2, trackId: c, codec: v2 };
          u2.transform = new RTCRtpScriptTransform(this.worker, p2);
        } else {
          if (E2EE_FLAG in u2 && v2) {
            const P2 = { kind: "updateCodec", data: { trackId: c, codec: v2, participantIdentity: l2 } };
            this.worker.postMessage(P2);
            return;
          }
          let p2 = u2.writableStream, _ = u2.readableStream;
          if (!p2 || !_) {
            const P2 = u2.createEncodedStreams();
            u2.writableStream = P2.writable, p2 = P2.writable, u2.readableStream = P2.readable, _ = P2.readable;
          }
          const I2 = { kind: "decode", data: { readableStream: _, writableStream: p2, trackId: c, codec: v2, participantIdentity: l2 } };
          this.worker.postMessage(I2, [_, p2]);
        }
        u2[E2EE_FLAG] = true;
      }
    });
  }
  /**
  * Handles the given {@code RTCRtpSender} by creating a {@code TransformStream} which will inject
  * a frame encoder.
  *
  */
  handleSender(u2, c, l2) {
    var v2;
    if (!(E2EE_FLAG in u2 || !this.worker)) {
      if (!(!((v2 = this.room) === null || v2 === void 0) && v2.localParticipant.identity) || this.room.localParticipant.identity === "")
        throw TypeError("local identity needs to be known in order to set up encrypted sender");
      if (isScriptTransformSupported()) {
        livekitLogger.info("initialize script transform");
        const p2 = { kind: "encode", participantIdentity: this.room.localParticipant.identity, trackId: c, codec: l2 };
        u2.transform = new RTCRtpScriptTransform(this.worker, p2);
      } else {
        livekitLogger.info("initialize encoded streams");
        const p2 = u2.createEncodedStreams(), _ = { kind: "encode", data: { readableStream: p2.readable, writableStream: p2.writable, codec: l2, trackId: c, participantIdentity: this.room.localParticipant.identity } };
        this.worker.postMessage(_, [p2.readable, p2.writable]);
      }
      u2[E2EE_FLAG] = true;
    }
  }
}
var QueueTaskStatus;
(function(a420) {
  a420[a420.WAITING = 0] = "WAITING", a420[a420.RUNNING = 1] = "RUNNING", a420[a420.COMPLETED = 2] = "COMPLETED";
})(QueueTaskStatus || (QueueTaskStatus = {}));
class AsyncQueue {
  constructor() {
    this.pendingTasks = /* @__PURE__ */ new Map(), this.taskMutex = new Mutex(), this.nextTaskIndex = 0;
  }
  run(u2) {
    return __awaiter(this, void 0, void 0, function* () {
      const c = { id: this.nextTaskIndex++, enqueuedAt: Date.now(), status: QueueTaskStatus.WAITING };
      this.pendingTasks.set(c.id, c);
      const l2 = yield this.taskMutex.lock();
      try {
        return c.executedAt = Date.now(), c.status = QueueTaskStatus.RUNNING, yield u2();
      } finally {
        c.status = QueueTaskStatus.COMPLETED, this.pendingTasks.delete(c.id), l2();
      }
    });
  }
  flush() {
    return __awaiter(this, void 0, void 0, function* () {
      return this.run(() => __awaiter(this, void 0, void 0, function* () {
      }));
    });
  }
  snapshot() {
    return Array.from(this.pendingTasks.values());
  }
}
const passThroughQueueSignals = ["syncState", "trickle", "offer", "answer", "simulate", "leave"];
function canPassThroughQueue(a420) {
  const u2 = passThroughQueueSignals.indexOf(a420.case) >= 0;
  return livekitLogger.trace("request allowed to bypass queue:", { canPass: u2, req: a420 }), u2;
}
var SignalConnectionState;
(function(a420) {
  a420[a420.CONNECTING = 0] = "CONNECTING", a420[a420.CONNECTED = 1] = "CONNECTED", a420[a420.RECONNECTING = 2] = "RECONNECTING", a420[a420.DISCONNECTING = 3] = "DISCONNECTING", a420[a420.DISCONNECTED = 4] = "DISCONNECTED";
})(SignalConnectionState || (SignalConnectionState = {}));
class SignalClient {
  get currentState() {
    return this.state;
  }
  get isDisconnected() {
    return this.state === SignalConnectionState.DISCONNECTING || this.state === SignalConnectionState.DISCONNECTED;
  }
  get isEstablishingConnection() {
    return this.state === SignalConnectionState.CONNECTING || this.state === SignalConnectionState.RECONNECTING;
  }
  constructor() {
    let u2 = arguments.length > 0 && arguments[0] !== void 0 ? arguments[0] : false, c = arguments.length > 1 && arguments[1] !== void 0 ? arguments[1] : {};
    var l2;
    this.rtt = 0, this.state = SignalConnectionState.DISCONNECTED, this.log = livekitLogger, this.resetCallbacks = () => {
      this.onAnswer = void 0, this.onLeave = void 0, this.onLocalTrackPublished = void 0, this.onLocalTrackUnpublished = void 0, this.onNegotiateRequested = void 0, this.onOffer = void 0, this.onRemoteMuteChanged = void 0, this.onSubscribedQualityUpdate = void 0, this.onTokenRefresh = void 0, this.onTrickle = void 0, this.onClose = void 0;
    }, this.log = getLogger((l2 = c.loggerName) !== null && l2 !== void 0 ? l2 : LoggerNames.Signal), this.loggerContextCb = c.loggerContextCb, this.useJSON = u2, this.requestQueue = new AsyncQueue(), this.queuedRequests = [], this.closingLock = new Mutex(), this.connectionLock = new Mutex(), this.state = SignalConnectionState.DISCONNECTED;
  }
  get logContext() {
    var u2, c;
    return (c = (u2 = this.loggerContextCb) === null || u2 === void 0 ? void 0 : u2.call(this)) !== null && c !== void 0 ? c : {};
  }
  join(u2, c, l2, v2) {
    return __awaiter(this, void 0, void 0, function* () {
      return this.state = SignalConnectionState.CONNECTING, this.options = l2, yield this.connect(u2, c, l2, v2);
    });
  }
  reconnect(u2, c, l2, v2) {
    return __awaiter(this, void 0, void 0, function* () {
      if (!this.options) {
        this.log.warn("attempted to reconnect without signal options being set, ignoring", this.logContext);
        return;
      }
      return this.state = SignalConnectionState.RECONNECTING, this.clearPingInterval(), yield this.connect(u2, c, Object.assign(Object.assign({}, this.options), { reconnect: true, sid: l2, reconnectReason: v2 }));
    });
  }
  connect(u2, c, l2, v2) {
    this.connectOptions = l2, u2 = toWebsocketUrl(u2), u2 = u2.replace(/\/$/, ""), u2 += "/rtc";
    const p2 = getClientInfo(), _ = createConnectionParams(c, p2, l2);
    return new Promise((I2, P2) => __awaiter(this, void 0, void 0, function* () {
      const $ = yield this.connectionLock.lock();
      try {
        const F2 = () => __awaiter(this, void 0, void 0, function* () {
          this.close(), clearTimeout(H2), P2(new ConnectionError("room connection has been cancelled (signal)"));
        }), H2 = setTimeout(() => {
          this.close(), P2(new ConnectionError("room connection has timed out (signal)"));
        }, l2.websocketTimeout);
        v2 != null && v2.aborted && F2(), v2 == null || v2.addEventListener("abort", F2), this.log.debug("connecting to ".concat(u2 + _), this.logContext), this.ws && (yield this.close(false)), this.ws = new WebSocket(u2 + _), this.ws.binaryType = "arraybuffer", this.ws.onopen = () => {
          clearTimeout(H2);
        }, this.ws.onerror = (j) => __awaiter(this, void 0, void 0, function* () {
          if (this.state !== SignalConnectionState.CONNECTED) {
            clearTimeout(H2);
            try {
              const ee2 = yield fetch("http".concat(u2.substring(2), "/validate").concat(_));
              if (ee2.status.toFixed(0).startsWith("4")) {
                const X2 = yield ee2.text();
                P2(new ConnectionError(X2, 0, ee2.status));
              } else
                P2(new ConnectionError("Internal error", 2, ee2.status));
            } catch {
              P2(new ConnectionError(
                "server was not reachable",
                1
                /* ConnectionErrorReason.ServerUnreachable */
              ));
            }
            return;
          }
          this.handleWSError(j);
        }), this.ws.onmessage = (j) => __awaiter(this, void 0, void 0, function* () {
          var ee2, X2, ie2, Q2;
          let ne2;
          if (typeof j.data == "string") {
            const Z2 = JSON.parse(j.data);
            ne2 = SignalResponse.fromJson(Z2);
          } else if (j.data instanceof ArrayBuffer)
            ne2 = SignalResponse.fromBinary(new Uint8Array(j.data));
          else {
            this.log.error("could not decode websocket message: ".concat(typeof j.data), this.logContext);
            return;
          }
          if (this.state !== SignalConnectionState.CONNECTED) {
            let Z2 = false;
            if (((ee2 = ne2.message) === null || ee2 === void 0 ? void 0 : ee2.case) === "join" ? (this.state = SignalConnectionState.CONNECTED, v2 == null || v2.removeEventListener("abort", F2), this.pingTimeoutDuration = ne2.message.value.pingTimeout, this.pingIntervalDuration = ne2.message.value.pingInterval, this.pingTimeoutDuration && this.pingTimeoutDuration > 0 && (this.log.debug("ping config", Object.assign(Object.assign({}, this.logContext), { timeout: this.pingTimeoutDuration, interval: this.pingIntervalDuration })), this.startPingInterval()), I2(ne2.message.value)) : this.state === SignalConnectionState.RECONNECTING && ne2.message.case !== "leave" ? (this.state = SignalConnectionState.CONNECTED, v2 == null || v2.removeEventListener("abort", F2), this.startPingInterval(), ((X2 = ne2.message) === null || X2 === void 0 ? void 0 : X2.case) === "reconnect" ? I2((ie2 = ne2.message) === null || ie2 === void 0 ? void 0 : ie2.value) : (I2(), Z2 = true)) : this.isEstablishingConnection && ne2.message.case === "leave" ? P2(new ConnectionError(
              "Received leave request while trying to (re)connect",
              4
              /* ConnectionErrorReason.LeaveRequest */
            )) : l2.reconnect || P2(new ConnectionError("did not receive join response, got ".concat((Q2 = ne2.message) === null || Q2 === void 0 ? void 0 : Q2.case, " instead"))), !Z2)
              return;
          }
          this.signalLatency && (yield sleep(this.signalLatency)), this.handleSignalResponse(ne2);
        }), this.ws.onclose = (j) => {
          this.isEstablishingConnection && P2(new ConnectionError("Websocket got closed during a (re)connection attempt")), this.log.warn("websocket closed", Object.assign(Object.assign({}, this.logContext), { reason: j.reason, code: j.code, wasClean: j.wasClean, state: this.state })), this.handleOnClose(j.reason);
        };
      } finally {
        $();
      }
    }));
  }
  close() {
    let u2 = arguments.length > 0 && arguments[0] !== void 0 ? arguments[0] : true;
    return __awaiter(this, void 0, void 0, function* () {
      const c = yield this.closingLock.lock();
      try {
        if (u2 && (this.state = SignalConnectionState.DISCONNECTING), this.ws) {
          this.ws.onmessage = null, this.ws.onopen = null, this.ws.onclose = null;
          const l2 = new Promise((v2) => {
            this.ws ? this.ws.onclose = () => {
              v2();
            } : v2();
          });
          this.ws.readyState < this.ws.CLOSING && (this.ws.close(), yield Promise.race([l2, sleep(250)])), this.ws = void 0;
        }
      } finally {
        u2 && (this.state = SignalConnectionState.DISCONNECTED), this.clearPingInterval(), c();
      }
    });
  }
  // initial offer after joining
  sendOffer(u2) {
    this.log.debug("sending offer", Object.assign(Object.assign({}, this.logContext), { offerSdp: u2.sdp })), this.sendRequest({ case: "offer", value: toProtoSessionDescription(u2) });
  }
  // answer a server-initiated offer
  sendAnswer(u2) {
    return this.log.debug("sending answer", Object.assign(Object.assign({}, this.logContext), { answerSdp: u2.sdp })), this.sendRequest({ case: "answer", value: toProtoSessionDescription(u2) });
  }
  sendIceCandidate(u2, c) {
    return this.log.trace("sending ice candidate", Object.assign(Object.assign({}, this.logContext), { candidate: u2 })), this.sendRequest({ case: "trickle", value: new TrickleRequest({ candidateInit: JSON.stringify(u2), target: c }) });
  }
  sendMuteTrack(u2, c) {
    return this.sendRequest({ case: "mute", value: new MuteTrackRequest({ sid: u2, muted: c }) });
  }
  sendAddTrack(u2) {
    return this.sendRequest({ case: "addTrack", value: u2 });
  }
  sendUpdateLocalMetadata(u2, c) {
    return this.sendRequest({ case: "updateMetadata", value: new UpdateParticipantMetadata({ metadata: u2, name: c }) });
  }
  sendUpdateTrackSettings(u2) {
    this.sendRequest({ case: "trackSetting", value: u2 });
  }
  sendUpdateSubscription(u2) {
    return this.sendRequest({ case: "subscription", value: u2 });
  }
  sendSyncState(u2) {
    return this.sendRequest({ case: "syncState", value: u2 });
  }
  sendUpdateVideoLayers(u2, c) {
    return this.sendRequest({ case: "updateLayers", value: new UpdateVideoLayers({ trackSid: u2, layers: c }) });
  }
  sendUpdateSubscriptionPermissions(u2, c) {
    return this.sendRequest({ case: "subscriptionPermission", value: new SubscriptionPermission({ allParticipants: u2, trackPermissions: c }) });
  }
  sendSimulateScenario(u2) {
    return this.sendRequest({ case: "simulate", value: u2 });
  }
  sendPing() {
    return Promise.all([this.sendRequest({ case: "ping", value: protoInt64.parse(Date.now()) }), this.sendRequest({ case: "pingReq", value: new Ping({ timestamp: protoInt64.parse(Date.now()), rtt: protoInt64.parse(this.rtt) }) })]);
  }
  sendLeave() {
    return this.sendRequest({ case: "leave", value: new LeaveRequest({ canReconnect: false, reason: DisconnectReason.CLIENT_INITIATED }) });
  }
  sendRequest(u2) {
    let c = arguments.length > 1 && arguments[1] !== void 0 ? arguments[1] : false;
    return __awaiter(this, void 0, void 0, function* () {
      if (!c && !canPassThroughQueue(u2) && this.state === SignalConnectionState.RECONNECTING) {
        this.queuedRequests.push(() => __awaiter(this, void 0, void 0, function* () {
          yield this.sendRequest(u2, true);
        }));
        return;
      }
      if (c || (yield this.requestQueue.flush()), this.signalLatency && (yield sleep(this.signalLatency)), !this.ws || this.ws.readyState !== this.ws.OPEN) {
        this.log.error("cannot send signal request before connected, type: ".concat(u2 == null ? void 0 : u2.case), this.logContext);
        return;
      }
      const v2 = new SignalRequest({ message: u2 });
      try {
        this.useJSON ? this.ws.send(v2.toJsonString()) : this.ws.send(v2.toBinary());
      } catch (p2) {
        this.log.error("error sending signal message", Object.assign(Object.assign({}, this.logContext), { error: p2 }));
      }
    });
  }
  handleSignalResponse(u2) {
    var c, l2;
    const v2 = u2.message;
    if (v2 == null) {
      this.log.debug("received unsupported message", this.logContext);
      return;
    }
    let p2 = false;
    if (v2.case === "answer") {
      const _ = fromProtoSessionDescription(v2.value);
      this.onAnswer && this.onAnswer(_);
    } else if (v2.case === "offer") {
      const _ = fromProtoSessionDescription(v2.value);
      this.onOffer && this.onOffer(_);
    } else if (v2.case === "trickle") {
      const _ = JSON.parse(v2.value.candidateInit);
      this.onTrickle && this.onTrickle(_, v2.value.target);
    } else
      v2.case === "update" ? this.onParticipantUpdate && this.onParticipantUpdate((c = v2.value.participants) !== null && c !== void 0 ? c : []) : v2.case === "trackPublished" ? this.onLocalTrackPublished && this.onLocalTrackPublished(v2.value) : v2.case === "speakersChanged" ? this.onSpeakersChanged && this.onSpeakersChanged((l2 = v2.value.speakers) !== null && l2 !== void 0 ? l2 : []) : v2.case === "leave" ? this.onLeave && this.onLeave(v2.value) : v2.case === "mute" ? this.onRemoteMuteChanged && this.onRemoteMuteChanged(v2.value.sid, v2.value.muted) : v2.case === "roomUpdate" ? this.onRoomUpdate && v2.value.room && this.onRoomUpdate(v2.value.room) : v2.case === "connectionQuality" ? this.onConnectionQuality && this.onConnectionQuality(v2.value) : v2.case === "streamStateUpdate" ? this.onStreamStateUpdate && this.onStreamStateUpdate(v2.value) : v2.case === "subscribedQualityUpdate" ? this.onSubscribedQualityUpdate && this.onSubscribedQualityUpdate(v2.value) : v2.case === "subscriptionPermissionUpdate" ? this.onSubscriptionPermissionUpdate && this.onSubscriptionPermissionUpdate(v2.value) : v2.case === "refreshToken" ? this.onTokenRefresh && this.onTokenRefresh(v2.value) : v2.case === "trackUnpublished" ? this.onLocalTrackUnpublished && this.onLocalTrackUnpublished(v2.value) : v2.case === "subscriptionResponse" ? this.onSubscriptionError && this.onSubscriptionError(v2.value) : v2.case === "pong" || (v2.case === "pongResp" ? (this.rtt = Date.now() - Number.parseInt(v2.value.lastPingTimestamp.toString()), this.resetPingTimeout(), p2 = true) : this.log.debug("unsupported message", Object.assign(Object.assign({}, this.logContext), { msgCase: v2.case })));
    p2 || this.resetPingTimeout();
  }
  setReconnected() {
    for (; this.queuedRequests.length > 0; ) {
      const u2 = this.queuedRequests.shift();
      u2 && this.requestQueue.run(u2);
    }
  }
  handleOnClose(u2) {
    return __awaiter(this, void 0, void 0, function* () {
      if (this.state === SignalConnectionState.DISCONNECTED)
        return;
      const c = this.onClose;
      yield this.close(), this.log.debug("websocket connection closed: ".concat(u2), Object.assign(Object.assign({}, this.logContext), { reason: u2 })), c && c(u2);
    });
  }
  handleWSError(u2) {
    this.log.error("websocket error", Object.assign(Object.assign({}, this.logContext), { error: u2 }));
  }
  /**
  * Resets the ping timeout and starts a new timeout.
  * Call this after receiving a pong message
  */
  resetPingTimeout() {
    if (this.clearPingTimeout(), !this.pingTimeoutDuration) {
      this.log.warn("ping timeout duration not set", this.logContext);
      return;
    }
    this.pingTimeout = CriticalTimers.setTimeout(() => {
      this.log.warn("ping timeout triggered. last pong received at: ".concat(new Date(Date.now() - this.pingTimeoutDuration * 1e3).toUTCString()), this.logContext), this.handleOnClose("ping timeout");
    }, this.pingTimeoutDuration * 1e3);
  }
  /**
  * Clears ping timeout (does not start a new timeout)
  */
  clearPingTimeout() {
    this.pingTimeout && CriticalTimers.clearTimeout(this.pingTimeout);
  }
  startPingInterval() {
    if (this.clearPingInterval(), this.resetPingTimeout(), !this.pingIntervalDuration) {
      this.log.warn("ping interval duration not set", this.logContext);
      return;
    }
    this.log.debug("start ping interval", this.logContext), this.pingInterval = CriticalTimers.setInterval(() => {
      this.sendPing();
    }, this.pingIntervalDuration * 1e3);
  }
  clearPingInterval() {
    this.log.debug("clearing ping interval", this.logContext), this.clearPingTimeout(), this.pingInterval && CriticalTimers.clearInterval(this.pingInterval);
  }
}
function fromProtoSessionDescription(a420) {
  const u2 = { type: "offer", sdp: a420.sdp };
  switch (a420.type) {
    case "answer":
    case "offer":
    case "pranswer":
    case "rollback":
      u2.type = a420.type;
      break;
  }
  return u2;
}
function toProtoSessionDescription(a420) {
  return new SessionDescription({ sdp: a420.sdp, type: a420.type });
}
function createConnectionParams(a420, u2, c) {
  var l2;
  const v2 = new URLSearchParams();
  return v2.set("access_token", a420), c.reconnect && (v2.set("reconnect", "1"), c.sid && v2.set("sid", c.sid)), v2.set("auto_subscribe", c.autoSubscribe ? "1" : "0"), v2.set("sdk", isReactNative() ? "reactnative" : "js"), v2.set("version", u2.version), v2.set("protocol", u2.protocol.toString()), u2.deviceModel && v2.set("device_model", u2.deviceModel), u2.os && v2.set("os", u2.os), u2.osVersion && v2.set("os_version", u2.osVersion), u2.browser && v2.set("browser", u2.browser), u2.browserVersion && v2.set("browser_version", u2.browserVersion), c.adaptiveStream && v2.set("adaptive_stream", "1"), c.reconnectReason && v2.set("reconnect_reason", c.reconnectReason.toString()), !((l2 = navigator.connection) === null || l2 === void 0) && l2.type && v2.set("network", navigator.connection.type), "?".concat(v2.toString());
}
var parser$1 = {}, grammar$2 = { exports: {} }, grammar$1 = grammar$2.exports = {
  v: [{ name: "version", reg: /^(\d*)$/ }],
  o: [{
    // o=- 20518 0 IN IP4 203.0.113.1
    // NB: sessionId will be a String in most cases because it is huge
    name: "origin",
    reg: /^(\S*) (\d*) (\d*) (\S*) IP(\d) (\S*)/,
    names: ["username", "sessionId", "sessionVersion", "netType", "ipVer", "address"],
    format: "%s %s %d %s IP%d %s"
  }],
  // default parsing of these only (though some of these feel outdated)
  s: [{ name: "name" }],
  i: [{ name: "description" }],
  u: [{ name: "uri" }],
  e: [{ name: "email" }],
  p: [{ name: "phone" }],
  z: [{ name: "timezones" }],
  // TODO: this one can actually be parsed properly...
  r: [{ name: "repeats" }],
  // TODO: this one can also be parsed properly
  // k: [{}], // outdated thing ignored
  t: [{
    // t=0 0
    name: "timing",
    reg: /^(\d*) (\d*)/,
    names: ["start", "stop"],
    format: "%d %d"
  }],
  c: [{
    // c=IN IP4 10.47.197.26
    name: "connection",
    reg: /^IN IP(\d) (\S*)/,
    names: ["version", "ip"],
    format: "IN IP%d %s"
  }],
  b: [{
    // b=AS:4000
    push: "bandwidth",
    reg: /^(TIAS|AS|CT|RR|RS):(\d*)/,
    names: ["type", "limit"],
    format: "%s:%s"
  }],
  m: [{
    // m=video 51744 RTP/AVP 126 97 98 34 31
    // NB: special - pushes to session
    // TODO: rtp/fmtp should be filtered by the payloads found here?
    reg: /^(\w*) (\d*) ([\w/]*)(?: (.*))?/,
    names: ["type", "port", "protocol", "payloads"],
    format: "%s %d %s %s"
  }],
  a: [
    {
      // a=rtpmap:110 opus/48000/2
      push: "rtp",
      reg: /^rtpmap:(\d*) ([\w\-.]*)(?:\s*\/(\d*)(?:\s*\/(\S*))?)?/,
      names: ["payload", "codec", "rate", "encoding"],
      format: function(a420) {
        return a420.encoding ? "rtpmap:%d %s/%s/%s" : a420.rate ? "rtpmap:%d %s/%s" : "rtpmap:%d %s";
      }
    },
    {
      // a=fmtp:108 profile-level-id=24;object=23;bitrate=64000
      // a=fmtp:111 minptime=10; useinbandfec=1
      push: "fmtp",
      reg: /^fmtp:(\d*) ([\S| ]*)/,
      names: ["payload", "config"],
      format: "fmtp:%d %s"
    },
    {
      // a=control:streamid=0
      name: "control",
      reg: /^control:(.*)/,
      format: "control:%s"
    },
    {
      // a=rtcp:65179 IN IP4 193.84.77.194
      name: "rtcp",
      reg: /^rtcp:(\d*)(?: (\S*) IP(\d) (\S*))?/,
      names: ["port", "netType", "ipVer", "address"],
      format: function(a420) {
        return a420.address != null ? "rtcp:%d %s IP%d %s" : "rtcp:%d";
      }
    },
    {
      // a=rtcp-fb:98 trr-int 100
      push: "rtcpFbTrrInt",
      reg: /^rtcp-fb:(\*|\d*) trr-int (\d*)/,
      names: ["payload", "value"],
      format: "rtcp-fb:%s trr-int %d"
    },
    {
      // a=rtcp-fb:98 nack rpsi
      push: "rtcpFb",
      reg: /^rtcp-fb:(\*|\d*) ([\w-_]*)(?: ([\w-_]*))?/,
      names: ["payload", "type", "subtype"],
      format: function(a420) {
        return a420.subtype != null ? "rtcp-fb:%s %s %s" : "rtcp-fb:%s %s";
      }
    },
    {
      // a=extmap:2 urn:ietf:params:rtp-hdrext:toffset
      // a=extmap:1/recvonly URI-gps-string
      // a=extmap:3 urn:ietf:params:rtp-hdrext:encrypt urn:ietf:params:rtp-hdrext:smpte-tc 25@600/24
      push: "ext",
      reg: /^extmap:(\d+)(?:\/(\w+))?(?: (urn:ietf:params:rtp-hdrext:encrypt))? (\S*)(?: (\S*))?/,
      names: ["value", "direction", "encrypt-uri", "uri", "config"],
      format: function(a420) {
        return "extmap:%d" + (a420.direction ? "/%s" : "%v") + (a420["encrypt-uri"] ? " %s" : "%v") + " %s" + (a420.config ? " %s" : "");
      }
    },
    {
      // a=extmap-allow-mixed
      name: "extmapAllowMixed",
      reg: /^(extmap-allow-mixed)/
    },
    {
      // a=crypto:1 AES_CM_128_HMAC_SHA1_80 inline:PS1uQCVeeCFCanVmcjkpPywjNWhcYD0mXXtxaVBR|2^20|1:32
      push: "crypto",
      reg: /^crypto:(\d*) ([\w_]*) (\S*)(?: (\S*))?/,
      names: ["id", "suite", "config", "sessionConfig"],
      format: function(a420) {
        return a420.sessionConfig != null ? "crypto:%d %s %s %s" : "crypto:%d %s %s";
      }
    },
    {
      // a=setup:actpass
      name: "setup",
      reg: /^setup:(\w*)/,
      format: "setup:%s"
    },
    {
      // a=connection:new
      name: "connectionType",
      reg: /^connection:(new|existing)/,
      format: "connection:%s"
    },
    {
      // a=mid:1
      name: "mid",
      reg: /^mid:([^\s]*)/,
      format: "mid:%s"
    },
    {
      // a=msid:0c8b064d-d807-43b4-b434-f92a889d8587 98178685-d409-46e0-8e16-7ef0db0db64a
      name: "msid",
      reg: /^msid:(.*)/,
      format: "msid:%s"
    },
    {
      // a=ptime:20
      name: "ptime",
      reg: /^ptime:(\d*(?:\.\d*)*)/,
      format: "ptime:%d"
    },
    {
      // a=maxptime:60
      name: "maxptime",
      reg: /^maxptime:(\d*(?:\.\d*)*)/,
      format: "maxptime:%d"
    },
    {
      // a=sendrecv
      name: "direction",
      reg: /^(sendrecv|recvonly|sendonly|inactive)/
    },
    {
      // a=ice-lite
      name: "icelite",
      reg: /^(ice-lite)/
    },
    {
      // a=ice-ufrag:F7gI
      name: "iceUfrag",
      reg: /^ice-ufrag:(\S*)/,
      format: "ice-ufrag:%s"
    },
    {
      // a=ice-pwd:x9cml/YzichV2+XlhiMu8g
      name: "icePwd",
      reg: /^ice-pwd:(\S*)/,
      format: "ice-pwd:%s"
    },
    {
      // a=fingerprint:SHA-1 00:11:22:33:44:55:66:77:88:99:AA:BB:CC:DD:EE:FF:00:11:22:33
      name: "fingerprint",
      reg: /^fingerprint:(\S*) (\S*)/,
      names: ["type", "hash"],
      format: "fingerprint:%s %s"
    },
    {
      // a=candidate:0 1 UDP 2113667327 203.0.113.1 54400 typ host
      // a=candidate:1162875081 1 udp 2113937151 192.168.34.75 60017 typ host generation 0 network-id 3 network-cost 10
      // a=candidate:3289912957 2 udp 1845501695 193.84.77.194 60017 typ srflx raddr 192.168.34.75 rport 60017 generation 0 network-id 3 network-cost 10
      // a=candidate:229815620 1 tcp 1518280447 192.168.150.19 60017 typ host tcptype active generation 0 network-id 3 network-cost 10
      // a=candidate:3289912957 2 tcp 1845501695 193.84.77.194 60017 typ srflx raddr 192.168.34.75 rport 60017 tcptype passive generation 0 network-id 3 network-cost 10
      push: "candidates",
      reg: /^candidate:(\S*) (\d*) (\S*) (\d*) (\S*) (\d*) typ (\S*)(?: raddr (\S*) rport (\d*))?(?: tcptype (\S*))?(?: generation (\d*))?(?: network-id (\d*))?(?: network-cost (\d*))?/,
      names: ["foundation", "component", "transport", "priority", "ip", "port", "type", "raddr", "rport", "tcptype", "generation", "network-id", "network-cost"],
      format: function(a420) {
        var u2 = "candidate:%s %d %s %d %s %d typ %s";
        return u2 += a420.raddr != null ? " raddr %s rport %d" : "%v%v", u2 += a420.tcptype != null ? " tcptype %s" : "%v", a420.generation != null && (u2 += " generation %d"), u2 += a420["network-id"] != null ? " network-id %d" : "%v", u2 += a420["network-cost"] != null ? " network-cost %d" : "%v", u2;
      }
    },
    {
      // a=end-of-candidates (keep after the candidates line for readability)
      name: "endOfCandidates",
      reg: /^(end-of-candidates)/
    },
    {
      // a=remote-candidates:1 203.0.113.1 54400 2 203.0.113.1 54401 ...
      name: "remoteCandidates",
      reg: /^remote-candidates:(.*)/,
      format: "remote-candidates:%s"
    },
    {
      // a=ice-options:google-ice
      name: "iceOptions",
      reg: /^ice-options:(\S*)/,
      format: "ice-options:%s"
    },
    {
      // a=ssrc:2566107569 cname:t9YU8M1UxTF8Y1A1
      push: "ssrcs",
      reg: /^ssrc:(\d*) ([\w_-]*)(?::(.*))?/,
      names: ["id", "attribute", "value"],
      format: function(a420) {
        var u2 = "ssrc:%d";
        return a420.attribute != null && (u2 += " %s", a420.value != null && (u2 += ":%s")), u2;
      }
    },
    {
      // a=ssrc-group:FEC 1 2
      // a=ssrc-group:FEC-FR 3004364195 1080772241
      push: "ssrcGroups",
      // token-char = %x21 / %x23-27 / %x2A-2B / %x2D-2E / %x30-39 / %x41-5A / %x5E-7E
      reg: /^ssrc-group:([\x21\x23\x24\x25\x26\x27\x2A\x2B\x2D\x2E\w]*) (.*)/,
      names: ["semantics", "ssrcs"],
      format: "ssrc-group:%s %s"
    },
    {
      // a=msid-semantic: WMS Jvlam5X3SX1OP6pn20zWogvaKJz5Hjf9OnlV
      name: "msidSemantic",
      reg: /^msid-semantic:\s?(\w*) (\S*)/,
      names: ["semantic", "token"],
      format: "msid-semantic: %s %s"
      // space after ':' is not accidental
    },
    {
      // a=group:BUNDLE audio video
      push: "groups",
      reg: /^group:(\w*) (.*)/,
      names: ["type", "mids"],
      format: "group:%s %s"
    },
    {
      // a=rtcp-mux
      name: "rtcpMux",
      reg: /^(rtcp-mux)/
    },
    {
      // a=rtcp-rsize
      name: "rtcpRsize",
      reg: /^(rtcp-rsize)/
    },
    {
      // a=sctpmap:5000 webrtc-datachannel 1024
      name: "sctpmap",
      reg: /^sctpmap:([\w_/]*) (\S*)(?: (\S*))?/,
      names: ["sctpmapNumber", "app", "maxMessageSize"],
      format: function(a420) {
        return a420.maxMessageSize != null ? "sctpmap:%s %s %s" : "sctpmap:%s %s";
      }
    },
    {
      // a=x-google-flag:conference
      name: "xGoogleFlag",
      reg: /^x-google-flag:([^\s]*)/,
      format: "x-google-flag:%s"
    },
    {
      // a=rid:1 send max-width=1280;max-height=720;max-fps=30;depend=0
      push: "rids",
      reg: /^rid:([\d\w]+) (\w+)(?: ([\S| ]*))?/,
      names: ["id", "direction", "params"],
      format: function(a420) {
        return a420.params ? "rid:%s %s %s" : "rid:%s %s";
      }
    },
    {
      // a=imageattr:97 send [x=800,y=640,sar=1.1,q=0.6] [x=480,y=320] recv [x=330,y=250]
      // a=imageattr:* send [x=800,y=640] recv *
      // a=imageattr:100 recv [x=320,y=240]
      push: "imageattrs",
      reg: new RegExp(
        // a=imageattr:97
        "^imageattr:(\\d+|\\*)[\\s\\t]+(send|recv)[\\s\\t]+(\\*|\\[\\S+\\](?:[\\s\\t]+\\[\\S+\\])*)(?:[\\s\\t]+(recv|send)[\\s\\t]+(\\*|\\[\\S+\\](?:[\\s\\t]+\\[\\S+\\])*))?"
      ),
      names: ["pt", "dir1", "attrs1", "dir2", "attrs2"],
      format: function(a420) {
        return "imageattr:%s %s %s" + (a420.dir2 ? " %s %s" : "");
      }
    },
    {
      // a=simulcast:send 1,2,3;~4,~5 recv 6;~7,~8
      // a=simulcast:recv 1;4,5 send 6;7
      name: "simulcast",
      reg: new RegExp(
        // a=simulcast:
        "^simulcast:(send|recv) ([a-zA-Z0-9\\-_~;,]+)(?:\\s?(send|recv) ([a-zA-Z0-9\\-_~;,]+))?$"
      ),
      names: ["dir1", "list1", "dir2", "list2"],
      format: function(a420) {
        return "simulcast:%s %s" + (a420.dir2 ? " %s %s" : "");
      }
    },
    {
      // old simulcast draft 03 (implemented by Firefox)
      //   https://tools.ietf.org/html/draft-ietf-mmusic-sdp-simulcast-03
      // a=simulcast: recv pt=97;98 send pt=97
      // a=simulcast: send rid=5;6;7 paused=6,7
      name: "simulcast_03",
      reg: /^simulcast:[\s\t]+([\S+\s\t]+)$/,
      names: ["value"],
      format: "simulcast: %s"
    },
    {
      // a=framerate:25
      // a=framerate:29.97
      name: "framerate",
      reg: /^framerate:(\d+(?:$|\.\d+))/,
      format: "framerate:%s"
    },
    {
      // RFC4570
      // a=source-filter: incl IN IP4 239.5.2.31 10.1.15.5
      name: "sourceFilter",
      reg: /^source-filter: *(excl|incl) (\S*) (IP4|IP6|\*) (\S*) (.*)/,
      names: ["filterMode", "netType", "addressTypes", "destAddress", "srcList"],
      format: "source-filter: %s %s %s %s %s"
    },
    {
      // a=bundle-only
      name: "bundleOnly",
      reg: /^(bundle-only)/
    },
    {
      // a=label:1
      name: "label",
      reg: /^label:(.+)/,
      format: "label:%s"
    },
    {
      // RFC version 26 for SCTP over DTLS
      // https://tools.ietf.org/html/draft-ietf-mmusic-sctp-sdp-26#section-5
      name: "sctpPort",
      reg: /^sctp-port:(\d+)$/,
      format: "sctp-port:%s"
    },
    {
      // RFC version 26 for SCTP over DTLS
      // https://tools.ietf.org/html/draft-ietf-mmusic-sctp-sdp-26#section-6
      name: "maxMessageSize",
      reg: /^max-message-size:(\d+)$/,
      format: "max-message-size:%s"
    },
    {
      // RFC7273
      // a=ts-refclk:ptp=IEEE1588-2008:39-A7-94-FF-FE-07-CB-D0:37
      push: "tsRefClocks",
      reg: /^ts-refclk:([^\s=]*)(?:=(\S*))?/,
      names: ["clksrc", "clksrcExt"],
      format: function(a420) {
        return "ts-refclk:%s" + (a420.clksrcExt != null ? "=%s" : "");
      }
    },
    {
      // RFC7273
      // a=mediaclk:direct=963214424
      name: "mediaClk",
      reg: /^mediaclk:(?:id=(\S*))? *([^\s=]*)(?:=(\S*))?(?: *rate=(\d+)\/(\d+))?/,
      names: ["id", "mediaClockName", "mediaClockValue", "rateNumerator", "rateDenominator"],
      format: function(a420) {
        var u2 = "mediaclk:";
        return u2 += a420.id != null ? "id=%s %s" : "%v%s", u2 += a420.mediaClockValue != null ? "=%s" : "", u2 += a420.rateNumerator != null ? " rate=%s" : "", u2 += a420.rateDenominator != null ? "/%s" : "", u2;
      }
    },
    {
      // a=keywds:keywords
      name: "keywords",
      reg: /^keywds:(.+)$/,
      format: "keywds:%s"
    },
    {
      // a=content:main
      name: "content",
      reg: /^content:(.+)/,
      format: "content:%s"
    },
    // BFCP https://tools.ietf.org/html/rfc4583
    {
      // a=floorctrl:c-s
      name: "bfcpFloorCtrl",
      reg: /^floorctrl:(c-only|s-only|c-s)/,
      format: "floorctrl:%s"
    },
    {
      // a=confid:1
      name: "bfcpConfId",
      reg: /^confid:(\d+)/,
      format: "confid:%s"
    },
    {
      // a=userid:1
      name: "bfcpUserId",
      reg: /^userid:(\d+)/,
      format: "userid:%s"
    },
    {
      // a=floorid:1
      name: "bfcpFloorId",
      reg: /^floorid:(.+) (?:m-stream|mstrm):(.+)/,
      names: ["id", "mStream"],
      format: "floorid:%s mstrm:%s"
    },
    {
      // any a= that we don't understand is kept verbatim on media.invalid
      push: "invalid",
      names: ["value"]
    }
  ]
};
Object.keys(grammar$1).forEach(function(a420) {
  var u2 = grammar$1[a420];
  u2.forEach(function(c) {
    c.reg || (c.reg = /(.*)/), c.format || (c.format = "%s");
  });
});
var grammarExports = grammar$2.exports;
(function(a420) {
  var u2 = function(I2) {
    return String(Number(I2)) === I2 ? Number(I2) : I2;
  }, c = function(I2, P2, $, F2) {
    if (F2 && !$)
      P2[F2] = u2(I2[1]);
    else
      for (var H2 = 0; H2 < $.length; H2 += 1)
        I2[H2 + 1] != null && (P2[$[H2]] = u2(I2[H2 + 1]));
  }, l2 = function(I2, P2, $) {
    var F2 = I2.name && I2.names;
    I2.push && !P2[I2.push] ? P2[I2.push] = [] : F2 && !P2[I2.name] && (P2[I2.name] = {});
    var H2 = I2.push ? {} : (
      // blank object that will be pushed
      F2 ? P2[I2.name] : P2
    );
    c($.match(I2.reg), H2, I2.names, I2.name), I2.push && P2[I2.push].push(H2);
  }, v2 = grammarExports, p2 = RegExp.prototype.test.bind(/^([a-z])=(.*)/);
  a420.parse = function(I2) {
    var P2 = {}, $ = [], F2 = P2;
    return I2.split(/(\r\n|\r|\n)/).filter(p2).forEach(function(H2) {
      var j = H2[0], ee2 = H2.slice(2);
      j === "m" && ($.push({ rtp: [], fmtp: [] }), F2 = $[$.length - 1]);
      for (var X2 = 0; X2 < (v2[j] || []).length; X2 += 1) {
        var ie2 = v2[j][X2];
        if (ie2.reg.test(ee2))
          return l2(ie2, F2, ee2);
      }
    }), P2.media = $, P2;
  };
  var _ = function(I2, P2) {
    var $ = P2.split(/=(.+)/, 2);
    return $.length === 2 ? I2[$[0]] = u2($[1]) : $.length === 1 && P2.length > 1 && (I2[$[0]] = void 0), I2;
  };
  a420.parseParams = function(I2) {
    return I2.split(/;\s?/).reduce(_, {});
  }, a420.parseFmtpConfig = a420.parseParams, a420.parsePayloads = function(I2) {
    return I2.toString().split(" ").map(Number);
  }, a420.parseRemoteCandidates = function(I2) {
    for (var P2 = [], $ = I2.split(" ").map(u2), F2 = 0; F2 < $.length; F2 += 3)
      P2.push({ component: $[F2], ip: $[F2 + 1], port: $[F2 + 2] });
    return P2;
  }, a420.parseImageAttributes = function(I2) {
    return I2.split(" ").map(function(P2) {
      return P2.substring(1, P2.length - 1).split(",").reduce(_, {});
    });
  }, a420.parseSimulcastStreamList = function(I2) {
    return I2.split(";").map(function(P2) {
      return P2.split(",").map(function($) {
        var F2, H2 = false;
        return $[0] !== "~" ? F2 = u2($) : (F2 = u2($.substring(1, $.length)), H2 = true), { scid: F2, paused: H2 };
      });
    });
  };
})(parser$1);
var grammar = grammarExports, formatRegExp = /%[sdv%]/g, format = function(a420) {
  var u2 = 1, c = arguments, l2 = c.length;
  return a420.replace(formatRegExp, function(v2) {
    if (u2 >= l2)
      return v2;
    var p2 = c[u2];
    switch (u2 += 1, v2) {
      case "%%":
        return "%";
      case "%s":
        return String(p2);
      case "%d":
        return Number(p2);
      case "%v":
        return "";
    }
  });
}, makeLine = function(a420, u2, c) {
  var l2 = u2.format instanceof Function ? u2.format(u2.push ? c : c[u2.name]) : u2.format, v2 = [a420 + "=" + l2];
  if (u2.names)
    for (var p2 = 0; p2 < u2.names.length; p2 += 1) {
      var _ = u2.names[p2];
      u2.name ? v2.push(c[u2.name][_]) : v2.push(c[u2.names[p2]]);
    }
  else
    v2.push(c[u2.name]);
  return format.apply(null, v2);
}, defaultOuterOrder = ["v", "o", "s", "i", "u", "e", "p", "c", "b", "t", "r", "z", "a"], defaultInnerOrder = ["i", "c", "b", "a"], writer$1 = function(a420, u2) {
  u2 = u2 || {}, a420.version == null && (a420.version = 0), a420.name == null && (a420.name = " "), a420.media.forEach(function(p2) {
    p2.payloads == null && (p2.payloads = "");
  });
  var c = u2.outerOrder || defaultOuterOrder, l2 = u2.innerOrder || defaultInnerOrder, v2 = [];
  return c.forEach(function(p2) {
    grammar[p2].forEach(function(_) {
      _.name in a420 && a420[_.name] != null ? v2.push(makeLine(p2, _, a420)) : _.push in a420 && a420[_.push] != null && a420[_.push].forEach(function(I2) {
        v2.push(makeLine(p2, _, I2));
      });
    });
  }), a420.media.forEach(function(p2) {
    v2.push(makeLine("m", grammar.m[0], p2)), l2.forEach(function(_) {
      grammar[_].forEach(function(I2) {
        I2.name in p2 && p2[I2.name] != null ? v2.push(makeLine(_, I2, p2)) : I2.push in p2 && p2[I2.push] != null && p2[I2.push].forEach(function(P2) {
          v2.push(makeLine(_, I2, P2));
        });
      });
    });
  }), v2.join(`\r
`) + `\r
`;
}, parser = parser$1, writer = writer$1, write = writer, parse$1 = parser.parse;
const startBitrateForSVC = 0.7, PCEvents = { NegotiationStarted: "negotiationStarted", NegotiationComplete: "negotiationComplete", RTPVideoPayloadTypes: "rtpVideoPayloadTypes" };
class PCTransport extends eventsExports.EventEmitter {
  get pc() {
    return this._pc || (this._pc = this.createPC()), this._pc;
  }
  constructor(u2) {
    let c = arguments.length > 1 && arguments[1] !== void 0 ? arguments[1] : {};
    var l2;
    super(), this.log = livekitLogger, this.pendingCandidates = [], this.restartingIce = false, this.renegotiate = false, this.trackBitrates = [], this.remoteStereoMids = [], this.remoteNackMids = [], this.negotiate = r((v2) => __awaiter(this, void 0, void 0, function* () {
      this.emit(PCEvents.NegotiationStarted);
      try {
        yield this.createAndSendOffer();
      } catch (p2) {
        if (v2)
          v2(p2);
        else
          throw p2;
      }
    }), 100), this.close = () => {
      this._pc && (this._pc.close(), this._pc.onconnectionstatechange = null, this._pc.oniceconnectionstatechange = null, this._pc.onicegatheringstatechange = null, this._pc.ondatachannel = null, this._pc.onnegotiationneeded = null, this._pc.onsignalingstatechange = null, this._pc.onicecandidate = null, this._pc.ondatachannel = null, this._pc.ontrack = null, this._pc.onconnectionstatechange = null, this._pc.oniceconnectionstatechange = null, this._pc = null);
    }, this.log = getLogger((l2 = c.loggerName) !== null && l2 !== void 0 ? l2 : LoggerNames.PCTransport), this.loggerOptions = c, this.config = u2, this._pc = this.createPC();
  }
  createPC() {
    const u2 = new RTCPeerConnection(this.config);
    return u2.onicecandidate = (c) => {
      var l2;
      c.candidate && ((l2 = this.onIceCandidate) === null || l2 === void 0 || l2.call(this, c.candidate));
    }, u2.onicecandidateerror = (c) => {
      var l2;
      (l2 = this.onIceCandidateError) === null || l2 === void 0 || l2.call(this, c);
    }, u2.oniceconnectionstatechange = () => {
      var c;
      (c = this.onIceConnectionStateChange) === null || c === void 0 || c.call(this, u2.iceConnectionState);
    }, u2.onsignalingstatechange = () => {
      var c;
      (c = this.onSignalingStatechange) === null || c === void 0 || c.call(this, u2.signalingState);
    }, u2.onconnectionstatechange = () => {
      var c;
      (c = this.onConnectionStateChange) === null || c === void 0 || c.call(this, u2.connectionState);
    }, u2.ondatachannel = (c) => {
      var l2;
      (l2 = this.onDataChannel) === null || l2 === void 0 || l2.call(this, c);
    }, u2.ontrack = (c) => {
      var l2;
      (l2 = this.onTrack) === null || l2 === void 0 || l2.call(this, c);
    }, u2;
  }
  get logContext() {
    var u2, c;
    return Object.assign({}, (c = (u2 = this.loggerOptions).loggerContextCb) === null || c === void 0 ? void 0 : c.call(u2));
  }
  get isICEConnected() {
    return this._pc !== null && (this.pc.iceConnectionState === "connected" || this.pc.iceConnectionState === "completed");
  }
  addIceCandidate(u2) {
    return __awaiter(this, void 0, void 0, function* () {
      if (this.pc.remoteDescription && !this.restartingIce)
        return this.pc.addIceCandidate(u2);
      this.pendingCandidates.push(u2);
    });
  }
  setRemoteDescription(u2) {
    var c;
    return __awaiter(this, void 0, void 0, function* () {
      let l2;
      if (u2.type === "offer") {
        let { stereoMids: v2, nackMids: p2 } = extractStereoAndNackAudioFromOffer(u2);
        this.remoteStereoMids = v2, this.remoteNackMids = p2;
      } else if (u2.type === "answer") {
        const v2 = parse$1((c = u2.sdp) !== null && c !== void 0 ? c : "");
        v2.media.forEach((p2) => {
          p2.type === "audio" && this.trackBitrates.some((_) => {
            if (!_.transceiver || p2.mid != _.transceiver.mid)
              return false;
            let I2 = 0;
            if (p2.rtp.some(($) => $.codec.toUpperCase() === _.codec.toUpperCase() ? (I2 = $.payload, true) : false), I2 === 0)
              return true;
            let P2 = false;
            for (const $ of p2.fmtp)
              if ($.payload === I2) {
                $.config = $.config.split(";").filter((F2) => !F2.includes("maxaveragebitrate")).join(";"), _.maxbr > 0 && ($.config += ";maxaveragebitrate=".concat(_.maxbr * 1e3)), P2 = true;
                break;
              }
            return P2 || _.maxbr > 0 && p2.fmtp.push({ payload: I2, config: "maxaveragebitrate=".concat(_.maxbr * 1e3) }), true;
          });
        }), l2 = write(v2);
      }
      yield this.setMungedSDP(u2, l2, true), this.pendingCandidates.forEach((v2) => {
        this.pc.addIceCandidate(v2);
      }), this.pendingCandidates = [], this.restartingIce = false, this.renegotiate ? (this.renegotiate = false, yield this.createAndSendOffer()) : u2.type === "answer" && (this.emit(PCEvents.NegotiationComplete), u2.sdp && parse$1(u2.sdp).media.forEach((p2) => {
        p2.type === "video" && this.emit(PCEvents.RTPVideoPayloadTypes, p2.rtp);
      }));
    });
  }
  createAndSendOffer(u2) {
    var c;
    return __awaiter(this, void 0, void 0, function* () {
      if (this.onOffer === void 0)
        return;
      if (u2 != null && u2.iceRestart && (this.log.debug("restarting ICE", this.logContext), this.restartingIce = true), this._pc && this._pc.signalingState === "have-local-offer") {
        const p2 = this._pc.remoteDescription;
        if (u2 != null && u2.iceRestart && p2)
          yield this._pc.setRemoteDescription(p2);
        else {
          this.renegotiate = true;
          return;
        }
      } else if (!this._pc || this._pc.signalingState === "closed") {
        this.log.warn("could not createOffer with closed peer connection", this.logContext);
        return;
      }
      this.log.debug("starting to negotiate", this.logContext);
      const l2 = yield this.pc.createOffer(u2), v2 = parse$1((c = l2.sdp) !== null && c !== void 0 ? c : "");
      v2.media.forEach((p2) => {
        p2.type === "audio" ? ensureAudioNackAndStereo(p2, [], []) : p2.type === "video" && (ensureVideoDDExtensionForSVC(p2), this.trackBitrates.some((_) => {
          if (!p2.msid || !_.cid || !p2.msid.includes(_.cid))
            return false;
          let I2 = 0;
          if (p2.rtp.some(($) => $.codec.toUpperCase() === _.codec.toUpperCase() ? (I2 = $.payload, true) : false), I2 === 0)
            return true;
          let P2 = false;
          for (const $ of p2.fmtp)
            if ($.payload === I2) {
              $.config.includes("x-google-start-bitrate") || ($.config += ";x-google-start-bitrate=".concat(Math.round(_.maxbr * startBitrateForSVC))), $.config.includes("x-google-max-bitrate") || ($.config += ";x-google-max-bitrate=".concat(_.maxbr)), P2 = true;
              break;
            }
          return P2 || p2.fmtp.push({ payload: I2, config: "x-google-start-bitrate=".concat(Math.round(_.maxbr * startBitrateForSVC), ";x-google-max-bitrate=").concat(_.maxbr) }), true;
        }));
      }), yield this.setMungedSDP(l2, write(v2)), this.onOffer(l2);
    });
  }
  createAndSetAnswer() {
    var u2;
    return __awaiter(this, void 0, void 0, function* () {
      const c = yield this.pc.createAnswer(), l2 = parse$1((u2 = c.sdp) !== null && u2 !== void 0 ? u2 : "");
      return l2.media.forEach((v2) => {
        v2.type === "audio" && ensureAudioNackAndStereo(v2, this.remoteStereoMids, this.remoteNackMids);
      }), yield this.setMungedSDP(c, write(l2)), c;
    });
  }
  createDataChannel(u2, c) {
    return this.pc.createDataChannel(u2, c);
  }
  addTransceiver(u2, c) {
    return this.pc.addTransceiver(u2, c);
  }
  addTrack(u2) {
    if (!this._pc)
      throw new UnexpectedConnectionState("PC closed, cannot add track");
    return this._pc.addTrack(u2);
  }
  setTrackCodecBitrate(u2) {
    this.trackBitrates.push(u2);
  }
  setConfiguration(u2) {
    var c;
    if (!this._pc)
      throw new UnexpectedConnectionState("PC closed, cannot configure");
    return (c = this._pc) === null || c === void 0 ? void 0 : c.setConfiguration(u2);
  }
  canRemoveTrack() {
    var u2;
    return !!(!((u2 = this._pc) === null || u2 === void 0) && u2.removeTrack);
  }
  removeTrack(u2) {
    var c;
    return (c = this._pc) === null || c === void 0 ? void 0 : c.removeTrack(u2);
  }
  getConnectionState() {
    var u2, c;
    return (c = (u2 = this._pc) === null || u2 === void 0 ? void 0 : u2.connectionState) !== null && c !== void 0 ? c : "closed";
  }
  getICEConnectionState() {
    var u2, c;
    return (c = (u2 = this._pc) === null || u2 === void 0 ? void 0 : u2.iceConnectionState) !== null && c !== void 0 ? c : "closed";
  }
  getSignallingState() {
    var u2, c;
    return (c = (u2 = this._pc) === null || u2 === void 0 ? void 0 : u2.signalingState) !== null && c !== void 0 ? c : "closed";
  }
  getTransceivers() {
    var u2, c;
    return (c = (u2 = this._pc) === null || u2 === void 0 ? void 0 : u2.getTransceivers()) !== null && c !== void 0 ? c : [];
  }
  getSenders() {
    var u2, c;
    return (c = (u2 = this._pc) === null || u2 === void 0 ? void 0 : u2.getSenders()) !== null && c !== void 0 ? c : [];
  }
  getLocalDescription() {
    var u2;
    return (u2 = this._pc) === null || u2 === void 0 ? void 0 : u2.localDescription;
  }
  getRemoteDescription() {
    var u2;
    return (u2 = this.pc) === null || u2 === void 0 ? void 0 : u2.remoteDescription;
  }
  getStats() {
    return this.pc.getStats();
  }
  getConnectedAddress() {
    var u2;
    return __awaiter(this, void 0, void 0, function* () {
      if (!this._pc)
        return;
      let c = "";
      const l2 = /* @__PURE__ */ new Map(), v2 = /* @__PURE__ */ new Map();
      if ((yield this._pc.getStats()).forEach((I2) => {
        switch (I2.type) {
          case "transport":
            c = I2.selectedCandidatePairId;
            break;
          case "candidate-pair":
            c === "" && I2.selected && (c = I2.id), l2.set(I2.id, I2);
            break;
          case "remote-candidate":
            v2.set(I2.id, "".concat(I2.address, ":").concat(I2.port));
            break;
        }
      }), c === "")
        return;
      const _ = (u2 = l2.get(c)) === null || u2 === void 0 ? void 0 : u2.remoteCandidateId;
      if (_ !== void 0)
        return v2.get(_);
    });
  }
  setMungedSDP(u2, c, l2) {
    return __awaiter(this, void 0, void 0, function* () {
      if (c) {
        const v2 = u2.sdp;
        u2.sdp = c;
        try {
          this.log.debug("setting munged ".concat(l2 ? "remote" : "local", " description"), this.logContext), l2 ? yield this.pc.setRemoteDescription(u2) : yield this.pc.setLocalDescription(u2);
          return;
        } catch (p2) {
          this.log.warn("not able to set ".concat(u2.type, ", falling back to unmodified sdp"), Object.assign(Object.assign({}, this.logContext), { error: p2, sdp: c })), u2.sdp = v2;
        }
      }
      try {
        l2 ? yield this.pc.setRemoteDescription(u2) : yield this.pc.setLocalDescription(u2);
      } catch (v2) {
        let p2 = "unknown error";
        v2 instanceof Error ? p2 = v2.message : typeof v2 == "string" && (p2 = v2);
        const _ = { error: p2, sdp: u2.sdp };
        throw !l2 && this.pc.remoteDescription && (_.remoteSdp = this.pc.remoteDescription), this.log.error("unable to set ".concat(u2.type), Object.assign(Object.assign({}, this.logContext), { fields: _ })), new NegotiationError(p2);
      }
    });
  }
}
function ensureAudioNackAndStereo(a420, u2, c) {
  let l2 = 0;
  a420.rtp.some((v2) => v2.codec === "opus" ? (l2 = v2.payload, true) : false), l2 > 0 && (a420.rtcpFb || (a420.rtcpFb = []), c.includes(a420.mid) && !a420.rtcpFb.some((v2) => v2.payload === l2 && v2.type === "nack") && a420.rtcpFb.push({ payload: l2, type: "nack" }), u2.includes(a420.mid) && a420.fmtp.some((v2) => v2.payload === l2 ? (v2.config.includes("stereo=1") || (v2.config += ";stereo=1"), true) : false));
}
function ensureVideoDDExtensionForSVC(a420) {
  var u2, c, l2, v2;
  const p2 = (c = (u2 = a420.rtp[0]) === null || u2 === void 0 ? void 0 : u2.codec) === null || c === void 0 ? void 0 : c.toLowerCase();
  if (!isSVCCodec(p2))
    return;
  let _ = 0;
  ((l2 = a420.ext) === null || l2 === void 0 ? void 0 : l2.some((P2) => P2.uri === ddExtensionURI ? true : (P2.value > _ && (_ = P2.value), false))) || (v2 = a420.ext) === null || v2 === void 0 || v2.push({ value: _ + 1, uri: ddExtensionURI });
}
function extractStereoAndNackAudioFromOffer(a420) {
  var u2;
  const c = [], l2 = [], v2 = parse$1((u2 = a420.sdp) !== null && u2 !== void 0 ? u2 : "");
  let p2 = 0;
  return v2.media.forEach((_) => {
    var I2;
    _.type === "audio" && (_.rtp.some((P2) => P2.codec === "opus" ? (p2 = P2.payload, true) : false), !((I2 = _.rtcpFb) === null || I2 === void 0) && I2.some((P2) => P2.payload === p2 && P2.type === "nack") && l2.push(_.mid), _.fmtp.some((P2) => P2.payload === p2 ? (P2.config.includes("sprop-stereo=1") && c.push(_.mid), true) : false));
  }), { stereoMids: c, nackMids: l2 };
}
const defaultVideoCodec = "vp8", publishDefaults = { audioPreset: AudioPresets.music, dtx: true, red: true, forceStereo: false, simulcast: true, screenShareEncoding: ScreenSharePresets.h1080fps15.encoding, stopMicTrackOnMute: false, videoCodec: defaultVideoCodec, backupCodec: true }, audioDefaults = { autoGainControl: true, echoCancellation: true, noiseSuppression: true }, videoDefaults = { resolution: VideoPresets.h720.resolution }, roomOptionDefaults = { adaptiveStream: false, dynacast: false, stopLocalTrackOnUnpublish: true, reconnectPolicy: new DefaultReconnectPolicy(), disconnectOnPageLeave: true, webAudioMix: true }, roomConnectOptionDefaults = { autoSubscribe: true, maxRetries: 1, peerConnectionTimeout: 15e3, websocketTimeout: 15e3 };
var PCTransportState;
(function(a420) {
  a420[a420.NEW = 0] = "NEW", a420[a420.CONNECTING = 1] = "CONNECTING", a420[a420.CONNECTED = 2] = "CONNECTED", a420[a420.FAILED = 3] = "FAILED", a420[a420.CLOSING = 4] = "CLOSING", a420[a420.CLOSED = 5] = "CLOSED";
})(PCTransportState || (PCTransportState = {}));
class PCTransportManager {
  get needsPublisher() {
    return this.isPublisherConnectionRequired;
  }
  get needsSubscriber() {
    return this.isSubscriberConnectionRequired;
  }
  get currentState() {
    return this.state;
  }
  constructor(u2, c, l2) {
    var v2;
    this.peerConnectionTimeout = roomConnectOptionDefaults.peerConnectionTimeout, this.log = livekitLogger, this.updateState = () => {
      var p2;
      const _ = this.state, I2 = this.requiredTransports.map((P2) => P2.getConnectionState());
      I2.every((P2) => P2 === "connected") ? this.state = PCTransportState.CONNECTED : I2.some((P2) => P2 === "failed") ? this.state = PCTransportState.FAILED : I2.some((P2) => P2 === "connecting") ? this.state = PCTransportState.CONNECTING : I2.every((P2) => P2 === "closed") ? this.state = PCTransportState.CLOSED : I2.some((P2) => P2 === "closed") ? this.state = PCTransportState.CLOSING : I2.every((P2) => P2 === "new") && (this.state = PCTransportState.NEW), _ !== this.state && (this.log.debug("pc state change: from ".concat(PCTransportState[_], " to ").concat(PCTransportState[this.state]), this.logContext), (p2 = this.onStateChange) === null || p2 === void 0 || p2.call(this, this.state, this.publisher.getConnectionState(), this.subscriber.getConnectionState()));
    }, this.log = getLogger((v2 = l2.loggerName) !== null && v2 !== void 0 ? v2 : LoggerNames.PCManager), this.loggerOptions = l2, this.isPublisherConnectionRequired = !c, this.isSubscriberConnectionRequired = c, this.publisher = new PCTransport(u2, l2), this.subscriber = new PCTransport(u2, l2), this.publisher.onConnectionStateChange = this.updateState, this.subscriber.onConnectionStateChange = this.updateState, this.publisher.onIceConnectionStateChange = this.updateState, this.subscriber.onIceConnectionStateChange = this.updateState, this.publisher.onSignalingStatechange = this.updateState, this.subscriber.onSignalingStatechange = this.updateState, this.publisher.onIceCandidate = (p2) => {
      var _;
      (_ = this.onIceCandidate) === null || _ === void 0 || _.call(this, p2, SignalTarget.PUBLISHER);
    }, this.subscriber.onIceCandidate = (p2) => {
      var _;
      (_ = this.onIceCandidate) === null || _ === void 0 || _.call(this, p2, SignalTarget.SUBSCRIBER);
    }, this.subscriber.onDataChannel = (p2) => {
      var _;
      (_ = this.onDataChannel) === null || _ === void 0 || _.call(this, p2);
    }, this.subscriber.onTrack = (p2) => {
      var _;
      (_ = this.onTrack) === null || _ === void 0 || _.call(this, p2);
    }, this.publisher.onOffer = (p2) => {
      var _;
      (_ = this.onPublisherOffer) === null || _ === void 0 || _.call(this, p2);
    }, this.state = PCTransportState.NEW, this.connectionLock = new Mutex();
  }
  get logContext() {
    var u2, c;
    return Object.assign({}, (c = (u2 = this.loggerOptions).loggerContextCb) === null || c === void 0 ? void 0 : c.call(u2));
  }
  requirePublisher() {
    let u2 = arguments.length > 0 && arguments[0] !== void 0 ? arguments[0] : true;
    this.isPublisherConnectionRequired = u2, this.updateState();
  }
  requireSubscriber() {
    let u2 = arguments.length > 0 && arguments[0] !== void 0 ? arguments[0] : true;
    this.isSubscriberConnectionRequired = u2, this.updateState();
  }
  createAndSendPublisherOffer(u2) {
    return this.publisher.createAndSendOffer(u2);
  }
  setPublisherAnswer(u2) {
    return this.publisher.setRemoteDescription(u2);
  }
  removeTrack(u2) {
    return this.publisher.removeTrack(u2);
  }
  close() {
    return __awaiter(this, void 0, void 0, function* () {
      if (this.publisher && this.publisher.getSignallingState() !== "closed") {
        const u2 = this.publisher;
        for (const c of u2.getSenders())
          try {
            u2.canRemoveTrack() && u2.removeTrack(c);
          } catch (l2) {
            this.log.warn("could not removeTrack", Object.assign(Object.assign({}, this.logContext), { error: l2 }));
          }
      }
      yield Promise.all([this.publisher.close(), this.subscriber.close()]), this.updateState();
    });
  }
  triggerIceRestart() {
    return __awaiter(this, void 0, void 0, function* () {
      this.subscriber.restartingIce = true, this.needsPublisher && (yield this.createAndSendPublisherOffer({ iceRestart: true }));
    });
  }
  addIceCandidate(u2, c) {
    return __awaiter(this, void 0, void 0, function* () {
      c === SignalTarget.PUBLISHER ? yield this.publisher.addIceCandidate(u2) : yield this.subscriber.addIceCandidate(u2);
    });
  }
  createSubscriberAnswerFromOffer(u2) {
    return __awaiter(this, void 0, void 0, function* () {
      return this.log.debug("received server offer", Object.assign(Object.assign({}, this.logContext), { RTCSdpType: u2.type, sdp: u2.sdp, signalingState: this.subscriber.getSignallingState().toString() })), yield this.subscriber.setRemoteDescription(u2), yield this.subscriber.createAndSetAnswer();
    });
  }
  updateConfiguration(u2, c) {
    this.publisher.setConfiguration(u2), this.subscriber.setConfiguration(u2), c && this.triggerIceRestart();
  }
  ensurePCTransportConnection(u2, c) {
    var l2;
    return __awaiter(this, void 0, void 0, function* () {
      const v2 = yield this.connectionLock.lock();
      try {
        this.isPublisherConnectionRequired && this.publisher.getConnectionState() !== "connected" && this.publisher.getConnectionState() !== "connecting" && (this.log.debug("negotiation required, start negotiating", this.logContext), this.publisher.negotiate()), yield Promise.all((l2 = this.requiredTransports) === null || l2 === void 0 ? void 0 : l2.map((p2) => this.ensureTransportConnected(p2, u2, c)));
      } finally {
        v2();
      }
    });
  }
  negotiate(u2) {
    return __awaiter(this, void 0, void 0, function* () {
      return new Promise((c, l2) => __awaiter(this, void 0, void 0, function* () {
        const v2 = setTimeout(() => {
          l2("negotiation timed out");
        }, this.peerConnectionTimeout), p2 = () => {
          clearTimeout(v2), l2("negotiation aborted");
        };
        u2.signal.addEventListener("abort", p2), this.publisher.once(PCEvents.NegotiationStarted, () => {
          u2.signal.aborted || this.publisher.once(PCEvents.NegotiationComplete, () => {
            clearTimeout(v2), c();
          });
        }), yield this.publisher.negotiate((_) => {
          clearTimeout(v2), l2(_);
        });
      }));
    });
  }
  addPublisherTransceiver(u2, c) {
    return this.publisher.addTransceiver(u2, c);
  }
  addPublisherTrack(u2) {
    return this.publisher.addTrack(u2);
  }
  createPublisherDataChannel(u2, c) {
    return this.publisher.createDataChannel(u2, c);
  }
  /**
  * Returns the first required transport's address if no explicit target is specified
  */
  getConnectedAddress(u2) {
    return u2 === SignalTarget.PUBLISHER ? this.publisher.getConnectedAddress() : u2 === SignalTarget.SUBSCRIBER ? this.publisher.getConnectedAddress() : this.requiredTransports[0].getConnectedAddress();
  }
  get requiredTransports() {
    const u2 = [];
    return this.isPublisherConnectionRequired && u2.push(this.publisher), this.isSubscriberConnectionRequired && u2.push(this.subscriber), u2;
  }
  ensureTransportConnected(u2, c) {
    let l2 = arguments.length > 2 && arguments[2] !== void 0 ? arguments[2] : this.peerConnectionTimeout;
    return __awaiter(this, void 0, void 0, function* () {
      if (u2.getConnectionState() !== "connected")
        return new Promise((p2, _) => __awaiter(this, void 0, void 0, function* () {
          const I2 = () => {
            this.log.warn("abort transport connection", this.logContext), CriticalTimers.clearTimeout(P2), _(new ConnectionError(
              "room connection has been cancelled",
              3
              /* ConnectionErrorReason.Cancelled */
            ));
          };
          c != null && c.signal.aborted && I2(), c == null || c.signal.addEventListener("abort", I2);
          const P2 = CriticalTimers.setTimeout(() => {
            c == null || c.signal.removeEventListener("abort", I2), _(new ConnectionError("could not establish pc connection"));
          }, l2);
          for (; this.state !== PCTransportState.CONNECTED; )
            if (yield sleep(50), c != null && c.signal.aborted) {
              _(new ConnectionError(
                "room connection has been cancelled",
                3
                /* ConnectionErrorReason.Cancelled */
              ));
              return;
            }
          CriticalTimers.clearTimeout(P2), c == null || c.signal.removeEventListener("abort", I2), p2();
        }));
    });
  }
}
const lossyDataChannel = "_lossy", reliableDataChannel = "_reliable", minReconnectWait = 2 * 1e3, leaveReconnect = "leave-reconnect";
var PCState;
(function(a420) {
  a420[a420.New = 0] = "New", a420[a420.Connected = 1] = "Connected", a420[a420.Disconnected = 2] = "Disconnected", a420[a420.Reconnecting = 3] = "Reconnecting", a420[a420.Closed = 4] = "Closed";
})(PCState || (PCState = {}));
class RTCEngine extends eventsExports.EventEmitter {
  get isClosed() {
    return this._isClosed;
  }
  get pendingReconnect() {
    return !!this.reconnectTimeout;
  }
  constructor(u2) {
    var c;
    super(), this.options = u2, this.rtcConfig = {}, this.peerConnectionTimeout = roomConnectOptionDefaults.peerConnectionTimeout, this.fullReconnectOnNext = false, this.subscriberPrimary = false, this.pcState = PCState.New, this._isClosed = true, this.pendingTrackResolvers = {}, this.reconnectAttempts = 0, this.reconnectStart = 0, this.attemptingReconnect = false, this.joinAttempts = 0, this.maxJoinAttempts = 1, this.shouldFailNext = false, this.log = livekitLogger, this.handleDataChannel = (l2) => {
      let { channel: v2 } = l2;
      return __awaiter(this, void 0, void 0, function* () {
        if (v2) {
          if (v2.label === reliableDataChannel)
            this.reliableDCSub = v2;
          else if (v2.label === lossyDataChannel)
            this.lossyDCSub = v2;
          else
            return;
          this.log.debug("on data channel ".concat(v2.id, ", ").concat(v2.label), this.logContext), v2.onmessage = this.handleDataMessage;
        }
      });
    }, this.handleDataMessage = (l2) => __awaiter(this, void 0, void 0, function* () {
      var v2, p2;
      const _ = yield this.dataProcessLock.lock();
      try {
        let I2;
        if (l2.data instanceof ArrayBuffer)
          I2 = l2.data;
        else if (l2.data instanceof Blob)
          I2 = yield l2.data.arrayBuffer();
        else {
          this.log.error("unsupported data type", Object.assign(Object.assign({}, this.logContext), { data: l2.data }));
          return;
        }
        const P2 = DataPacket.fromBinary(new Uint8Array(I2));
        ((v2 = P2.value) === null || v2 === void 0 ? void 0 : v2.case) === "speaker" ? this.emit(EngineEvent.ActiveSpeakersUpdate, P2.value.value.speakers) : ((p2 = P2.value) === null || p2 === void 0 ? void 0 : p2.case) === "user" && this.emit(EngineEvent.DataPacketReceived, P2.value.value, P2.kind);
      } finally {
        _();
      }
    }), this.handleDataError = (l2) => {
      const p2 = l2.currentTarget.maxRetransmits === 0 ? "lossy" : "reliable";
      if (l2 instanceof ErrorEvent && l2.error) {
        const { error: _ } = l2.error;
        this.log.error("DataChannel error on ".concat(p2, ": ").concat(l2.message), Object.assign(Object.assign({}, this.logContext), { error: _ }));
      } else
        this.log.error("Unknown DataChannel error on ".concat(p2), Object.assign(Object.assign({}, this.logContext), { event: l2 }));
    }, this.handleBufferedAmountLow = (l2) => {
      const p2 = l2.currentTarget.maxRetransmits === 0 ? DataPacket_Kind.LOSSY : DataPacket_Kind.RELIABLE;
      this.updateAndEmitDCBufferStatus(p2);
    }, this.handleDisconnect = (l2, v2) => {
      if (this._isClosed)
        return;
      this.log.warn("".concat(l2, " disconnected"), this.logContext), this.reconnectAttempts === 0 && (this.reconnectStart = Date.now());
      const p2 = (P2) => {
        this.log.warn("could not recover connection after ".concat(this.reconnectAttempts, " attempts, ").concat(P2, "ms. giving up"), this.logContext), this.emit(EngineEvent.Disconnected), this.close();
      }, _ = Date.now() - this.reconnectStart;
      let I2 = this.getNextRetryDelay({ elapsedMs: _, retryCount: this.reconnectAttempts });
      if (I2 === null) {
        p2(_);
        return;
      }
      l2 === leaveReconnect && (I2 = 0), this.log.debug("reconnecting in ".concat(I2, "ms"), this.logContext), this.clearReconnectTimeout(), this.token && this.regionUrlProvider && this.regionUrlProvider.updateToken(this.token), this.reconnectTimeout = CriticalTimers.setTimeout(() => this.attemptReconnect(v2).finally(() => this.reconnectTimeout = void 0), I2);
    }, this.waitForRestarted = () => new Promise((l2, v2) => {
      this.pcState === PCState.Connected && l2();
      const p2 = () => {
        this.off(EngineEvent.Disconnected, _), l2();
      }, _ = () => {
        this.off(EngineEvent.Restarted, p2), v2();
      };
      this.once(EngineEvent.Restarted, p2), this.once(EngineEvent.Disconnected, _);
    }), this.updateAndEmitDCBufferStatus = (l2) => {
      const v2 = this.isBufferStatusLow(l2);
      typeof v2 < "u" && v2 !== this.dcBufferStatus.get(l2) && (this.dcBufferStatus.set(l2, v2), this.emit(EngineEvent.DCBufferStatusChanged, v2, l2));
    }, this.isBufferStatusLow = (l2) => {
      const v2 = this.dataChannelForKind(l2);
      if (v2)
        return v2.bufferedAmount <= v2.bufferedAmountLowThreshold;
    }, this.handleBrowserOnLine = () => {
      this.client.currentState === SignalConnectionState.RECONNECTING && (this.clearReconnectTimeout(), this.attemptReconnect(ReconnectReason.RR_SIGNAL_DISCONNECTED));
    }, this.log = getLogger((c = u2.loggerName) !== null && c !== void 0 ? c : LoggerNames.Engine), this.loggerOptions = { loggerName: u2.loggerName, loggerContextCb: () => this.logContext }, this.client = new SignalClient(void 0, this.loggerOptions), this.client.signalLatency = this.options.expSignalLatency, this.reconnectPolicy = this.options.reconnectPolicy, this.registerOnLineListener(), this.closingLock = new Mutex(), this.dataProcessLock = new Mutex(), this.dcBufferStatus = /* @__PURE__ */ new Map([[DataPacket_Kind.LOSSY, true], [DataPacket_Kind.RELIABLE, true]]), this.client.onParticipantUpdate = (l2) => this.emit(EngineEvent.ParticipantUpdate, l2), this.client.onConnectionQuality = (l2) => this.emit(EngineEvent.ConnectionQualityUpdate, l2), this.client.onRoomUpdate = (l2) => this.emit(EngineEvent.RoomUpdate, l2), this.client.onSubscriptionError = (l2) => this.emit(EngineEvent.SubscriptionError, l2), this.client.onSubscriptionPermissionUpdate = (l2) => this.emit(EngineEvent.SubscriptionPermissionUpdate, l2), this.client.onSpeakersChanged = (l2) => this.emit(EngineEvent.SpeakersChanged, l2), this.client.onStreamStateUpdate = (l2) => this.emit(EngineEvent.StreamStateChanged, l2);
  }
  /** @internal */
  get logContext() {
    var u2, c, l2, v2, p2, _;
    return { room: (c = (u2 = this.latestJoinResponse) === null || u2 === void 0 ? void 0 : u2.room) === null || c === void 0 ? void 0 : c.name, roomSid: (v2 = (l2 = this.latestJoinResponse) === null || l2 === void 0 ? void 0 : l2.room) === null || v2 === void 0 ? void 0 : v2.sid, identity: (_ = (p2 = this.latestJoinResponse) === null || p2 === void 0 ? void 0 : p2.participant) === null || _ === void 0 ? void 0 : _.identity };
  }
  join(u2, c, l2, v2) {
    return __awaiter(this, void 0, void 0, function* () {
      this.url = u2, this.token = c, this.signalOpts = l2, this.maxJoinAttempts = l2.maxRetries;
      try {
        this.joinAttempts += 1, this.setupSignalClientCallbacks();
        const p2 = yield this.client.join(u2, c, l2, v2);
        return this._isClosed = false, this.latestJoinResponse = p2, this.subscriberPrimary = p2.subscriberPrimary, this.pcManager || (yield this.configure(p2)), this.subscriberPrimary || this.negotiate(), this.clientConfiguration = p2.clientConfiguration, p2;
      } catch (p2) {
        if (p2 instanceof ConnectionError && p2.reason === 1 && (this.log.warn("Couldn't connect to server, attempt ".concat(this.joinAttempts, " of ").concat(this.maxJoinAttempts), this.logContext), this.joinAttempts < this.maxJoinAttempts))
          return this.join(u2, c, l2, v2);
        throw p2;
      }
    });
  }
  close() {
    return __awaiter(this, void 0, void 0, function* () {
      const u2 = yield this.closingLock.lock();
      if (this.isClosed) {
        u2();
        return;
      }
      try {
        this._isClosed = true, this.emit(EngineEvent.Closing), this.removeAllListeners(), this.deregisterOnLineListener(), this.clearPendingReconnect(), yield this.cleanupPeerConnections(), yield this.cleanupClient();
      } finally {
        u2();
      }
    });
  }
  cleanupPeerConnections() {
    var u2;
    return __awaiter(this, void 0, void 0, function* () {
      yield (u2 = this.pcManager) === null || u2 === void 0 ? void 0 : u2.close(), this.pcManager = void 0;
      const c = (l2) => {
        l2 && (l2.close(), l2.onbufferedamountlow = null, l2.onclose = null, l2.onclosing = null, l2.onerror = null, l2.onmessage = null, l2.onopen = null);
      };
      c(this.lossyDC), c(this.lossyDCSub), c(this.reliableDC), c(this.reliableDCSub), this.lossyDC = void 0, this.lossyDCSub = void 0, this.reliableDC = void 0, this.reliableDCSub = void 0;
    });
  }
  cleanupClient() {
    return __awaiter(this, void 0, void 0, function* () {
      yield this.client.close(), this.client.resetCallbacks();
    });
  }
  addTrack(u2) {
    if (this.pendingTrackResolvers[u2.cid])
      throw new TrackInvalidError("a track with the same ID has already been published");
    return new Promise((c, l2) => {
      const v2 = setTimeout(() => {
        delete this.pendingTrackResolvers[u2.cid], l2(new ConnectionError("publication of local track timed out, no response from server"));
      }, 1e4);
      this.pendingTrackResolvers[u2.cid] = { resolve: (p2) => {
        clearTimeout(v2), c(p2);
      }, reject: () => {
        clearTimeout(v2), l2(new Error("Cancelled publication by calling unpublish"));
      } }, this.client.sendAddTrack(u2);
    });
  }
  /**
  * Removes sender from PeerConnection, returning true if it was removed successfully
  * and a negotiation is necessary
  * @param sender
  * @returns
  */
  removeTrack(u2) {
    if (u2.track && this.pendingTrackResolvers[u2.track.id]) {
      const { reject: c } = this.pendingTrackResolvers[u2.track.id];
      c && c(), delete this.pendingTrackResolvers[u2.track.id];
    }
    try {
      return this.pcManager.removeTrack(u2), true;
    } catch (c) {
      this.log.warn("failed to remove track", Object.assign(Object.assign({}, this.logContext), { error: c }));
    }
    return false;
  }
  updateMuteStatus(u2, c) {
    this.client.sendMuteTrack(u2, c);
  }
  get dataSubscriberReadyState() {
    var u2;
    return (u2 = this.reliableDCSub) === null || u2 === void 0 ? void 0 : u2.readyState;
  }
  getConnectedServerAddress() {
    var u2;
    return __awaiter(this, void 0, void 0, function* () {
      return (u2 = this.pcManager) === null || u2 === void 0 ? void 0 : u2.getConnectedAddress();
    });
  }
  /* @internal */
  setRegionUrlProvider(u2) {
    this.regionUrlProvider = u2;
  }
  configure(u2) {
    var c;
    return __awaiter(this, void 0, void 0, function* () {
      if (this.pcManager && this.pcManager.currentState !== PCTransportState.NEW)
        return;
      this.participantSid = (c = u2.participant) === null || c === void 0 ? void 0 : c.sid;
      const l2 = this.makeRTCConfiguration(u2);
      this.pcManager = new PCTransportManager(l2, u2.subscriberPrimary, this.loggerOptions), this.emit(EngineEvent.TransportsCreated, this.pcManager.publisher, this.pcManager.subscriber), this.pcManager.onIceCandidate = (v2, p2) => {
        this.client.sendIceCandidate(v2, p2);
      }, this.pcManager.onPublisherOffer = (v2) => {
        this.client.sendOffer(v2);
      }, this.pcManager.onDataChannel = this.handleDataChannel, this.pcManager.onStateChange = (v2, p2, _) => __awaiter(this, void 0, void 0, function* () {
        if (this.log.debug("primary PC state changed ".concat(v2), this.logContext), v2 === PCTransportState.CONNECTED) {
          const I2 = this.pcState === PCState.New;
          this.pcState = PCState.Connected, I2 && this.emit(EngineEvent.Connected, u2);
        } else
          v2 === PCTransportState.FAILED && this.pcState === PCState.Connected && (this.pcState = PCState.Disconnected, this.handleDisconnect("peerconnection failed", _ === "failed" ? ReconnectReason.RR_SUBSCRIBER_FAILED : ReconnectReason.RR_PUBLISHER_FAILED));
      }), this.pcManager.onTrack = (v2) => {
        this.emit(EngineEvent.MediaTrackAdded, v2.track, v2.streams[0], v2.receiver);
      }, this.createDataChannels();
    });
  }
  setupSignalClientCallbacks() {
    this.client.onAnswer = (u2) => __awaiter(this, void 0, void 0, function* () {
      this.pcManager && (this.log.debug("received server answer", Object.assign(Object.assign({}, this.logContext), { RTCSdpType: u2.type })), yield this.pcManager.setPublisherAnswer(u2));
    }), this.client.onTrickle = (u2, c) => {
      this.pcManager && (this.log.trace("got ICE candidate from peer", Object.assign(Object.assign({}, this.logContext), { candidate: u2, target: c })), this.pcManager.addIceCandidate(u2, c));
    }, this.client.onOffer = (u2) => __awaiter(this, void 0, void 0, function* () {
      if (!this.pcManager)
        return;
      const c = yield this.pcManager.createSubscriberAnswerFromOffer(u2);
      this.client.sendAnswer(c);
    }), this.client.onLocalTrackPublished = (u2) => {
      var c;
      if (this.log.debug("received trackPublishedResponse", Object.assign(Object.assign({}, this.logContext), { cid: u2.cid, track: (c = u2.track) === null || c === void 0 ? void 0 : c.sid })), !this.pendingTrackResolvers[u2.cid]) {
        this.log.error("missing track resolver for ".concat(u2.cid), Object.assign(Object.assign({}, this.logContext), { cid: u2.cid }));
        return;
      }
      const { resolve: l2 } = this.pendingTrackResolvers[u2.cid];
      delete this.pendingTrackResolvers[u2.cid], l2(u2.track);
    }, this.client.onLocalTrackUnpublished = (u2) => {
      this.emit(EngineEvent.LocalTrackUnpublished, u2);
    }, this.client.onTokenRefresh = (u2) => {
      this.token = u2;
    }, this.client.onRemoteMuteChanged = (u2, c) => {
      this.emit(EngineEvent.RemoteMute, u2, c);
    }, this.client.onSubscribedQualityUpdate = (u2) => {
      this.emit(EngineEvent.SubscribedQualityUpdate, u2);
    }, this.client.onClose = () => {
      this.handleDisconnect("signal", ReconnectReason.RR_SIGNAL_DISCONNECTED);
    }, this.client.onLeave = (u2) => {
      u2 != null && u2.canReconnect ? (this.fullReconnectOnNext = true, this.handleDisconnect(leaveReconnect)) : (this.emit(EngineEvent.Disconnected, u2 == null ? void 0 : u2.reason), this.close()), this.log.debug("client leave request", Object.assign(Object.assign({}, this.logContext), { reason: u2 == null ? void 0 : u2.reason }));
    };
  }
  makeRTCConfiguration(u2) {
    var c;
    const l2 = Object.assign({}, this.rtcConfig);
    if (!((c = this.signalOpts) === null || c === void 0) && c.e2eeEnabled && (this.log.debug("E2EE - setting up transports with insertable streams", this.logContext), l2.encodedInsertableStreams = true), u2.iceServers && !l2.iceServers) {
      const v2 = [];
      u2.iceServers.forEach((p2) => {
        const _ = { urls: p2.urls };
        p2.username && (_.username = p2.username), p2.credential && (_.credential = p2.credential), v2.push(_);
      }), l2.iceServers = v2;
    }
    return u2.clientConfiguration && u2.clientConfiguration.forceRelay === ClientConfigSetting.ENABLED && (l2.iceTransportPolicy = "relay"), l2.sdpSemantics = "unified-plan", l2.continualGatheringPolicy = "gather_continually", l2;
  }
  createDataChannels() {
    this.pcManager && (this.lossyDC && (this.lossyDC.onmessage = null, this.lossyDC.onerror = null), this.reliableDC && (this.reliableDC.onmessage = null, this.reliableDC.onerror = null), this.lossyDC = this.pcManager.createPublisherDataChannel(lossyDataChannel, {
      // will drop older packets that arrive
      ordered: true,
      maxRetransmits: 0
    }), this.reliableDC = this.pcManager.createPublisherDataChannel(reliableDataChannel, { ordered: true }), this.lossyDC.onmessage = this.handleDataMessage, this.reliableDC.onmessage = this.handleDataMessage, this.lossyDC.onerror = this.handleDataError, this.reliableDC.onerror = this.handleDataError, this.lossyDC.bufferedAmountLowThreshold = 65535, this.reliableDC.bufferedAmountLowThreshold = 65535, this.lossyDC.onbufferedamountlow = this.handleBufferedAmountLow, this.reliableDC.onbufferedamountlow = this.handleBufferedAmountLow);
  }
  setPreferredCodec(u2, c, l2) {
    if (!("getCapabilities" in RTCRtpSender))
      return;
    const v2 = RTCRtpSender.getCapabilities(c);
    if (!v2)
      return;
    this.log.debug("get sender capabilities", Object.assign(Object.assign({}, this.logContext), { cap: v2 }));
    const p2 = [], _ = [], I2 = [];
    v2.codecs.forEach((P2) => {
      const $ = P2.mimeType.toLowerCase();
      if ($ === "audio/opus") {
        p2.push(P2);
        return;
      }
      if (!($ === "video/".concat(l2))) {
        I2.push(P2);
        return;
      }
      if (l2 === "h264") {
        P2.sdpFmtpLine && P2.sdpFmtpLine.includes("profile-level-id=42e01f") ? p2.push(P2) : _.push(P2);
        return;
      }
      p2.push(P2);
    }), supportsSetCodecPreferences(u2) && u2.setCodecPreferences(p2.concat(_, I2));
  }
  createSender(u2, c, l2) {
    return __awaiter(this, void 0, void 0, function* () {
      if (supportsTransceiver())
        return yield this.createTransceiverRTCRtpSender(u2, c, l2);
      if (supportsAddTrack())
        return this.log.warn("using add-track fallback", this.logContext), yield this.createRTCRtpSender(u2.mediaStreamTrack);
      throw new UnexpectedConnectionState("Required webRTC APIs not supported on this device");
    });
  }
  createSimulcastSender(u2, c, l2, v2) {
    return __awaiter(this, void 0, void 0, function* () {
      if (supportsTransceiver())
        return this.createSimulcastTransceiverSender(u2, c, l2, v2);
      if (supportsAddTrack())
        return this.log.debug("using add-track fallback", this.logContext), this.createRTCRtpSender(u2.mediaStreamTrack);
      throw new UnexpectedConnectionState("Cannot stream on this device");
    });
  }
  createTransceiverRTCRtpSender(u2, c, l2) {
    return __awaiter(this, void 0, void 0, function* () {
      if (!this.pcManager)
        throw new UnexpectedConnectionState("publisher is closed");
      const v2 = [];
      u2.mediaStream && v2.push(u2.mediaStream);
      const p2 = { direction: "sendonly", streams: v2 };
      l2 && (p2.sendEncodings = l2);
      const _ = yield this.pcManager.addPublisherTransceiver(u2.mediaStreamTrack, p2);
      return u2.kind === Track.Kind.Video && c.videoCodec && (this.setPreferredCodec(_, u2.kind, c.videoCodec), u2.codec = c.videoCodec), _.sender;
    });
  }
  createSimulcastTransceiverSender(u2, c, l2, v2) {
    return __awaiter(this, void 0, void 0, function* () {
      if (!this.pcManager)
        throw new UnexpectedConnectionState("publisher is closed");
      const p2 = { direction: "sendonly" };
      v2 && (p2.sendEncodings = v2);
      const _ = yield this.pcManager.addPublisherTransceiver(c.mediaStreamTrack, p2);
      if (l2.videoCodec)
        return this.setPreferredCodec(_, u2.kind, l2.videoCodec), u2.setSimulcastTrackSender(l2.videoCodec, _.sender), _.sender;
    });
  }
  createRTCRtpSender(u2) {
    return __awaiter(this, void 0, void 0, function* () {
      if (!this.pcManager)
        throw new UnexpectedConnectionState("publisher is closed");
      return this.pcManager.addPublisherTrack(u2);
    });
  }
  attemptReconnect(u2) {
    var c, l2, v2;
    return __awaiter(this, void 0, void 0, function* () {
      if (!this._isClosed) {
        if (this.attemptingReconnect) {
          livekitLogger.warn("already attempting reconnect, returning early", this.logContext);
          return;
        }
        (((c = this.clientConfiguration) === null || c === void 0 ? void 0 : c.resumeConnection) === ClientConfigSetting.DISABLED || // signaling state could change to closed due to hardware sleep
        // those connections cannot be resumed
        ((v2 = (l2 = this.pcManager) === null || l2 === void 0 ? void 0 : l2.currentState) !== null && v2 !== void 0 ? v2 : PCTransportState.NEW) === PCTransportState.NEW) && (this.fullReconnectOnNext = true);
        try {
          this.attemptingReconnect = true, this.fullReconnectOnNext ? yield this.restartConnection() : yield this.resumeConnection(u2), this.clearPendingReconnect(), this.fullReconnectOnNext = false;
        } catch (p2) {
          this.reconnectAttempts += 1;
          let _ = true;
          p2 instanceof UnexpectedConnectionState ? (this.log.debug("received unrecoverable error", Object.assign(Object.assign({}, this.logContext), { error: p2 })), _ = false) : p2 instanceof SignalReconnectError || (this.fullReconnectOnNext = true), _ ? this.handleDisconnect("reconnect", ReconnectReason.RR_UNKNOWN) : (this.log.info("could not recover connection after ".concat(this.reconnectAttempts, " attempts, ").concat(Date.now() - this.reconnectStart, "ms. giving up"), this.logContext), this.emit(EngineEvent.Disconnected), yield this.close());
        } finally {
          this.attemptingReconnect = false;
        }
      }
    });
  }
  getNextRetryDelay(u2) {
    try {
      return this.reconnectPolicy.nextRetryDelayInMs(u2);
    } catch (c) {
      this.log.warn("encountered error in reconnect policy", Object.assign(Object.assign({}, this.logContext), { error: c }));
    }
    return null;
  }
  restartConnection(u2) {
    var c, l2, v2;
    return __awaiter(this, void 0, void 0, function* () {
      try {
        if (!this.url || !this.token)
          throw new UnexpectedConnectionState("could not reconnect, url or token not saved");
        this.log.info("reconnecting, attempt: ".concat(this.reconnectAttempts), this.logContext), this.emit(EngineEvent.Restarting), this.client.isDisconnected || (yield this.client.sendLeave()), yield this.cleanupPeerConnections(), yield this.cleanupClient();
        let p2;
        try {
          if (!this.signalOpts)
            throw this.log.warn("attempted connection restart, without signal options present", this.logContext), new SignalReconnectError();
          p2 = yield this.join(u2 ?? this.url, this.token, this.signalOpts);
        } catch (_) {
          throw _ instanceof ConnectionError && _.reason === 0 ? new UnexpectedConnectionState("could not reconnect, token might be expired") : new SignalReconnectError();
        }
        if (this.shouldFailNext)
          throw this.shouldFailNext = false, new Error("simulated failure");
        if (this.client.setReconnected(), this.emit(EngineEvent.SignalRestarted, p2), yield this.waitForPCReconnected(), this.client.currentState !== SignalConnectionState.CONNECTED)
          throw new SignalReconnectError("Signal connection got severed during reconnect");
        (c = this.regionUrlProvider) === null || c === void 0 || c.resetAttempts(), this.emit(EngineEvent.Restarted);
      } catch (p2) {
        const _ = yield (l2 = this.regionUrlProvider) === null || l2 === void 0 ? void 0 : l2.getNextBestRegionUrl();
        if (_) {
          yield this.restartConnection(_);
          return;
        } else
          throw (v2 = this.regionUrlProvider) === null || v2 === void 0 || v2.resetAttempts(), p2;
      }
    });
  }
  resumeConnection(u2) {
    var c;
    return __awaiter(this, void 0, void 0, function* () {
      if (!this.url || !this.token)
        throw new UnexpectedConnectionState("could not reconnect, url or token not saved");
      if (!this.pcManager)
        throw new UnexpectedConnectionState("publisher and subscriber connections unset");
      this.log.info("resuming signal connection, attempt ".concat(this.reconnectAttempts), this.logContext), this.emit(EngineEvent.Resuming);
      try {
        this.setupSignalClientCallbacks();
        const l2 = yield this.client.reconnect(this.url, this.token, this.participantSid, u2);
        if (l2) {
          const v2 = this.makeRTCConfiguration(l2);
          this.pcManager.updateConfiguration(v2);
        }
      } catch (l2) {
        let v2 = "";
        throw l2 instanceof Error && (v2 = l2.message, this.log.error(l2.message, Object.assign(Object.assign({}, this.logContext), { error: l2 }))), l2 instanceof ConnectionError && l2.reason === 0 ? new UnexpectedConnectionState("could not reconnect, token might be expired") : l2 instanceof ConnectionError && l2.reason === 4 ? l2 : new SignalReconnectError(v2);
      }
      if (this.emit(EngineEvent.SignalResumed), this.shouldFailNext)
        throw this.shouldFailNext = false, new Error("simulated failure");
      if (yield this.pcManager.triggerIceRestart(), yield this.waitForPCReconnected(), this.client.currentState !== SignalConnectionState.CONNECTED)
        throw new SignalReconnectError("Signal connection got severed during reconnect");
      this.client.setReconnected(), ((c = this.reliableDC) === null || c === void 0 ? void 0 : c.readyState) === "open" && this.reliableDC.id === null && this.createDataChannels(), this.emit(EngineEvent.Resumed);
    });
  }
  waitForPCInitialConnection(u2, c) {
    return __awaiter(this, void 0, void 0, function* () {
      if (!this.pcManager)
        throw new UnexpectedConnectionState("PC manager is closed");
      yield this.pcManager.ensurePCTransportConnection(c, u2);
    });
  }
  waitForPCReconnected() {
    return __awaiter(this, void 0, void 0, function* () {
      this.pcState = PCState.Reconnecting, this.log.debug("waiting for peer connection to reconnect", this.logContext);
      try {
        if (yield sleep(minReconnectWait), !this.pcManager)
          throw new UnexpectedConnectionState("PC manager is closed");
        yield this.pcManager.ensurePCTransportConnection(void 0, this.peerConnectionTimeout), this.pcState = PCState.Connected;
      } catch (u2) {
        throw this.pcState = PCState.Disconnected, new ConnectionError("could not establish PC connection, ".concat(u2.message));
      }
    });
  }
  /* @internal */
  sendDataPacket(u2, c) {
    return __awaiter(this, void 0, void 0, function* () {
      const l2 = u2.toBinary();
      yield this.ensurePublisherConnected(c);
      const v2 = this.dataChannelForKind(c);
      v2 && v2.send(l2), this.updateAndEmitDCBufferStatus(c);
    });
  }
  /**
  * @internal
  */
  ensureDataTransportConnected(u2) {
    let c = arguments.length > 1 && arguments[1] !== void 0 ? arguments[1] : this.subscriberPrimary;
    var l2;
    return __awaiter(this, void 0, void 0, function* () {
      if (!this.pcManager)
        throw new UnexpectedConnectionState("PC manager is closed");
      const v2 = c ? this.pcManager.subscriber : this.pcManager.publisher, p2 = c ? "Subscriber" : "Publisher";
      if (!v2)
        throw new ConnectionError("".concat(p2, " connection not set"));
      !c && !this.pcManager.publisher.isICEConnected && this.pcManager.publisher.getICEConnectionState() !== "checking" && this.negotiate();
      const _ = this.dataChannelForKind(u2, c);
      if ((_ == null ? void 0 : _.readyState) === "open")
        return;
      const I2 = (/* @__PURE__ */ new Date()).getTime() + this.peerConnectionTimeout;
      for (; (/* @__PURE__ */ new Date()).getTime() < I2; ) {
        if (v2.isICEConnected && ((l2 = this.dataChannelForKind(u2, c)) === null || l2 === void 0 ? void 0 : l2.readyState) === "open")
          return;
        yield sleep(50);
      }
      throw new ConnectionError("could not establish ".concat(p2, " connection, state: ").concat(v2.getICEConnectionState()));
    });
  }
  ensurePublisherConnected(u2) {
    return __awaiter(this, void 0, void 0, function* () {
      yield this.ensureDataTransportConnected(u2, false);
    });
  }
  /* @internal */
  verifyTransport() {
    return !(!this.pcManager || this.pcManager.currentState !== PCTransportState.CONNECTED || !this.client.ws || this.client.ws.readyState === WebSocket.CLOSED);
  }
  /** @internal */
  negotiate() {
    return __awaiter(this, void 0, void 0, function* () {
      return new Promise((u2, c) => __awaiter(this, void 0, void 0, function* () {
        if (!this.pcManager) {
          c(new NegotiationError("PC manager is closed"));
          return;
        }
        this.pcManager.requirePublisher();
        const l2 = new AbortController(), v2 = () => {
          l2.abort(), this.log.debug("engine disconnected while negotiation was ongoing", this.logContext), u2();
        };
        this.isClosed && c("cannot negotiate on closed engine"), this.on(EngineEvent.Closing, v2), this.pcManager.publisher.once(PCEvents.RTPVideoPayloadTypes, (p2) => {
          const _ = /* @__PURE__ */ new Map();
          p2.forEach((I2) => {
            const P2 = I2.codec.toLowerCase();
            isVideoCodec(P2) && _.set(I2.payload, P2);
          }), this.emit(EngineEvent.RTPVideoMapUpdate, _);
        });
        try {
          yield this.pcManager.negotiate(l2), u2();
        } catch (p2) {
          p2 instanceof NegotiationError && (this.fullReconnectOnNext = true), this.handleDisconnect("negotiation", ReconnectReason.RR_UNKNOWN), c(p2);
        } finally {
          this.off(EngineEvent.Closing, v2);
        }
      }));
    });
  }
  dataChannelForKind(u2, c) {
    if (c) {
      if (u2 === DataPacket_Kind.LOSSY)
        return this.lossyDCSub;
      if (u2 === DataPacket_Kind.RELIABLE)
        return this.reliableDCSub;
    } else {
      if (u2 === DataPacket_Kind.LOSSY)
        return this.lossyDC;
      if (u2 === DataPacket_Kind.RELIABLE)
        return this.reliableDC;
    }
  }
  /** @internal */
  sendSyncState(u2, c) {
    var l2, v2;
    if (!this.pcManager) {
      this.log.warn("sync state cannot be sent without peer connection setup", this.logContext);
      return;
    }
    const p2 = this.pcManager.subscriber.getLocalDescription(), _ = this.pcManager.subscriber.getRemoteDescription(), I2 = (v2 = (l2 = this.signalOpts) === null || l2 === void 0 ? void 0 : l2.autoSubscribe) !== null && v2 !== void 0 ? v2 : true, P2 = new Array(), $ = new Array();
    u2.forEach((F2) => {
      F2.isDesired !== I2 && P2.push(F2.trackSid), F2.isEnabled || $.push(F2.trackSid);
    }), this.client.sendSyncState(new SyncState({ answer: p2 ? toProtoSessionDescription({ sdp: p2.sdp, type: p2.type }) : void 0, offer: _ ? toProtoSessionDescription({ sdp: _.sdp, type: _.type }) : void 0, subscription: new UpdateSubscription({ trackSids: P2, subscribe: !I2, participantTracks: [] }), publishTracks: getTrackPublicationInfo(c), dataChannels: this.dataChannelsInfo(), trackSidsDisabled: $ }));
  }
  /* @internal */
  failNext() {
    this.shouldFailNext = true;
  }
  dataChannelsInfo() {
    const u2 = [], c = (l2, v2) => {
      (l2 == null ? void 0 : l2.id) !== void 0 && l2.id !== null && u2.push(new DataChannelInfo({ label: l2.label, id: l2.id, target: v2 }));
    };
    return c(this.dataChannelForKind(DataPacket_Kind.LOSSY), SignalTarget.PUBLISHER), c(this.dataChannelForKind(DataPacket_Kind.RELIABLE), SignalTarget.PUBLISHER), c(this.dataChannelForKind(DataPacket_Kind.LOSSY, true), SignalTarget.SUBSCRIBER), c(this.dataChannelForKind(DataPacket_Kind.RELIABLE, true), SignalTarget.SUBSCRIBER), u2;
  }
  clearReconnectTimeout() {
    this.reconnectTimeout && CriticalTimers.clearTimeout(this.reconnectTimeout);
  }
  clearPendingReconnect() {
    this.clearReconnectTimeout(), this.reconnectAttempts = 0;
  }
  registerOnLineListener() {
    isWeb() && window.addEventListener("online", this.handleBrowserOnLine);
  }
  deregisterOnLineListener() {
    isWeb() && window.removeEventListener("online", this.handleBrowserOnLine);
  }
}
class SignalReconnectError extends Error {
}
class RegionUrlProvider {
  constructor(u2, c) {
    this.lastUpdateAt = 0, this.settingsCacheTime = 3e3, this.attemptedRegions = [], this.serverUrl = new URL(u2), this.token = c;
  }
  updateToken(u2) {
    this.token = u2;
  }
  isCloud() {
    return isCloud(this.serverUrl);
  }
  getServerUrl() {
    return this.serverUrl;
  }
  getNextBestRegionUrl(u2) {
    return __awaiter(this, void 0, void 0, function* () {
      if (!this.isCloud())
        throw Error("region availability is only supported for LiveKit Cloud domains");
      (!this.regionSettings || Date.now() - this.lastUpdateAt > this.settingsCacheTime) && (this.regionSettings = yield this.fetchRegionSettings(u2));
      const c = this.regionSettings.regions.filter((l2) => !this.attemptedRegions.find((v2) => v2.url === l2.url));
      if (c.length > 0) {
        const l2 = c[0];
        return this.attemptedRegions.push(l2), livekitLogger.debug("next region: ".concat(l2.region)), l2.url;
      } else
        return null;
    });
  }
  resetAttempts() {
    this.attemptedRegions = [];
  }
  /* @internal */
  fetchRegionSettings(u2) {
    return __awaiter(this, void 0, void 0, function* () {
      const c = yield fetch("".concat(getCloudConfigUrl(this.serverUrl), "/regions"), { headers: { authorization: "Bearer ".concat(this.token) }, signal: u2 });
      if (c.ok) {
        const l2 = yield c.json();
        return this.lastUpdateAt = Date.now(), l2;
      } else
        throw new ConnectionError("Could not fetch region settings: ".concat(c.statusText), c.status === 401 ? 0 : void 0, c.status);
    });
  }
}
function getCloudConfigUrl(a420) {
  return "".concat(a420.protocol.replace("ws", "http"), "//").concat(a420.host, "/settings");
}
const monitorFrequency = 2e3;
function computeBitrate(a420, u2) {
  if (!u2)
    return 0;
  let c, l2;
  return "bytesReceived" in a420 ? (c = a420.bytesReceived, l2 = u2.bytesReceived) : "bytesSent" in a420 && (c = a420.bytesSent, l2 = u2.bytesSent), c === void 0 || l2 === void 0 || a420.timestamp === void 0 || u2.timestamp === void 0 ? 0 : (c - l2) * 8 * 1e3 / (a420.timestamp - u2.timestamp);
}
class LocalAudioTrack extends LocalTrack {
  /**
  *
  * @param mediaTrack
  * @param constraints MediaTrackConstraints that are being used when restarting or reacquiring tracks
  * @param userProvidedTrack Signals to the SDK whether or not the mediaTrack should be managed (i.e. released and reacquired) internally by the SDK
  */
  constructor(u2, c) {
    let l2 = arguments.length > 2 && arguments[2] !== void 0 ? arguments[2] : true, v2 = arguments.length > 3 ? arguments[3] : void 0, p2 = arguments.length > 4 ? arguments[4] : void 0;
    super(u2, Track.Kind.Audio, c, l2, p2), this.stopOnMute = false, this.monitorSender = () => __awaiter(this, void 0, void 0, function* () {
      if (!this.sender) {
        this._currentBitrate = 0;
        return;
      }
      let _;
      try {
        _ = yield this.getSenderStats();
      } catch (I2) {
        this.log.error("could not get audio sender stats", Object.assign(Object.assign({}, this.logContext), { error: I2 }));
        return;
      }
      _ && this.prevStats && (this._currentBitrate = computeBitrate(_, this.prevStats)), this.prevStats = _;
    }), this.audioContext = v2, this.checkForSilence();
  }
  setDeviceId(u2) {
    return __awaiter(this, void 0, void 0, function* () {
      return this._constraints.deviceId === u2 ? true : (this._constraints.deviceId = u2, this.isMuted || (yield this.restartTrack()), this.isMuted || unwrapConstraint(u2) === this.mediaStreamTrack.getSettings().deviceId);
    });
  }
  mute() {
    const u2 = Object.create(null, { mute: { get: () => super.mute } });
    return __awaiter(this, void 0, void 0, function* () {
      const c = yield this.muteLock.lock();
      try {
        return this.source === Track.Source.Microphone && this.stopOnMute && !this.isUserProvided && (this.log.debug("stopping mic track", this.logContext), this._mediaStreamTrack.stop()), yield u2.mute.call(this), this;
      } finally {
        c();
      }
    });
  }
  unmute() {
    const u2 = Object.create(null, { unmute: { get: () => super.unmute } });
    return __awaiter(this, void 0, void 0, function* () {
      const c = yield this.muteLock.lock();
      try {
        const l2 = this._constraints.deviceId && this._mediaStreamTrack.getSettings().deviceId !== unwrapConstraint(this._constraints.deviceId);
        return this.source === Track.Source.Microphone && (this.stopOnMute || this._mediaStreamTrack.readyState === "ended" || l2) && !this.isUserProvided && (this.log.debug("reacquiring mic track", this.logContext), yield this.restartTrack()), yield u2.unmute.call(this), this;
      } finally {
        c();
      }
    });
  }
  restartTrack(u2) {
    return __awaiter(this, void 0, void 0, function* () {
      let c;
      if (u2) {
        const l2 = constraintsForOptions({ audio: u2 });
        typeof l2.audio != "boolean" && (c = l2.audio);
      }
      yield this.restart(c);
    });
  }
  restart(u2) {
    const c = Object.create(null, { restart: { get: () => super.restart } });
    return __awaiter(this, void 0, void 0, function* () {
      const l2 = yield c.restart.call(this, u2);
      return this.checkForSilence(), l2;
    });
  }
  /* @internal */
  startMonitor() {
    isWeb() && (this.monitorInterval || (this.monitorInterval = setInterval(() => {
      this.monitorSender();
    }, monitorFrequency)));
  }
  setProcessor(u2) {
    var c;
    return __awaiter(this, void 0, void 0, function* () {
      const l2 = yield this.processorLock.lock();
      try {
        if (!this.audioContext)
          throw Error("Audio context needs to be set on LocalAudioTrack in order to enable processors");
        if (this.processor && (yield this.stopProcessor()), this.kind === "unknown")
          throw TypeError("cannot set processor on track of unknown kind");
        const v2 = { kind: this.kind, track: this._mediaStreamTrack, audioContext: this.audioContext };
        this.log.debug("setting up audio processor ".concat(u2.name), this.logContext), yield u2.init(v2), this.processor = u2, this.processor.processedTrack && (yield (c = this.sender) === null || c === void 0 ? void 0 : c.replaceTrack(this.processor.processedTrack));
      } finally {
        l2();
      }
    });
  }
  /**
  * @internal
  * @experimental
  */
  setAudioContext(u2) {
    this.audioContext = u2;
  }
  getSenderStats() {
    var u2;
    return __awaiter(this, void 0, void 0, function* () {
      if (!(!((u2 = this.sender) === null || u2 === void 0) && u2.getStats))
        return;
      const c = yield this.sender.getStats();
      let l2;
      return c.forEach((v2) => {
        v2.type === "outbound-rtp" && (l2 = { type: "audio", streamId: v2.id, packetsSent: v2.packetsSent, packetsLost: v2.packetsLost, bytesSent: v2.bytesSent, timestamp: v2.timestamp, roundTripTime: v2.roundTripTime, jitter: v2.jitter });
      }), l2;
    });
  }
  checkForSilence() {
    return __awaiter(this, void 0, void 0, function* () {
      const u2 = yield detectSilence(this);
      return u2 && (this.isMuted || this.log.warn("silence detected on local audio track", this.logContext), this.emit(TrackEvent.AudioSilenceDetected)), u2;
    });
  }
}
function mediaTrackToLocalTrack(a420, u2, c) {
  switch (a420.kind) {
    case "audio":
      return new LocalAudioTrack(a420, u2, false, void 0, c);
    case "video":
      return new LocalVideoTrack(a420, u2, false, c);
    default:
      throw new TrackInvalidError("unsupported track type: ".concat(a420.kind));
  }
}
const presets169 = Object.values(VideoPresets), presets43 = Object.values(VideoPresets43), presetsScreenShare = Object.values(ScreenSharePresets), defaultSimulcastPresets169 = [VideoPresets.h180, VideoPresets.h360], defaultSimulcastPresets43 = [VideoPresets43.h180, VideoPresets43.h360], computeDefaultScreenShareSimulcastPresets = (a420) => [{ scaleResolutionDownBy: 2, fps: a420.encoding.maxFramerate }].map((c) => {
  var l2, v2;
  return new VideoPreset(Math.floor(a420.width / c.scaleResolutionDownBy), Math.floor(a420.height / c.scaleResolutionDownBy), Math.max(15e4, Math.floor(a420.encoding.maxBitrate / (Math.pow(c.scaleResolutionDownBy, 2) * (((l2 = a420.encoding.maxFramerate) !== null && l2 !== void 0 ? l2 : 30) / ((v2 = c.fps) !== null && v2 !== void 0 ? v2 : 30))))), c.fps, a420.encoding.priority);
}), videoRids = ["q", "h", "f"];
function computeVideoEncodings(a420, u2, c, l2) {
  var v2, p2;
  let _ = l2 == null ? void 0 : l2.videoEncoding;
  a420 && (_ = l2 == null ? void 0 : l2.screenShareEncoding);
  const I2 = l2 == null ? void 0 : l2.simulcast, P2 = l2 == null ? void 0 : l2.scalabilityMode, $ = l2 == null ? void 0 : l2.videoCodec;
  if (!_ && !I2 && !P2 || !u2 || !c)
    return [{}];
  _ || (_ = determineAppropriateEncoding(a420, u2, c, $), livekitLogger.debug("using video encoding", _));
  const F2 = new VideoPreset(u2, c, _.maxBitrate, _.maxFramerate, _.priority);
  if (P2 && isSVCCodec($)) {
    livekitLogger.debug("using svc with scalabilityMode ".concat(P2));
    const ee2 = new ScalabilityMode(P2), X2 = [];
    if (ee2.spatial > 3)
      throw new Error("unsupported scalabilityMode: ".concat(P2));
    for (let ie2 = 0; ie2 < ee2.spatial; ie2 += 1)
      X2.push({
        rid: videoRids[2 - ie2],
        maxBitrate: _.maxBitrate / Math.pow(3, ie2),
        /* @ts-ignore */
        maxFramerate: F2.encoding.maxFramerate
      });
    return X2[0].scalabilityMode = P2, livekitLogger.debug("encodings", X2), X2;
  }
  if (!I2)
    return [_];
  let H2 = [];
  a420 ? H2 = (v2 = sortPresets(l2 == null ? void 0 : l2.screenShareSimulcastLayers)) !== null && v2 !== void 0 ? v2 : defaultSimulcastLayers(a420, F2) : H2 = (p2 = sortPresets(l2 == null ? void 0 : l2.videoSimulcastLayers)) !== null && p2 !== void 0 ? p2 : defaultSimulcastLayers(a420, F2);
  let j;
  if (H2.length > 0) {
    const ee2 = H2[0];
    H2.length > 1 && ([, j] = H2);
    const X2 = Math.max(u2, c);
    if (X2 >= 960 && j)
      return encodingsFromPresets(u2, c, [ee2, j, F2]);
    if (X2 >= 480)
      return encodingsFromPresets(u2, c, [ee2, F2]);
  }
  return encodingsFromPresets(u2, c, [F2]);
}
function computeTrackBackupEncodings(a420, u2, c) {
  var l2, v2, p2, _;
  if (!c.backupCodec || c.backupCodec === true || c.backupCodec.codec === c.videoCodec)
    return;
  u2 !== c.backupCodec.codec && livekitLogger.warn("requested a different codec than specified as backup", { serverRequested: u2, backup: c.backupCodec.codec }), c.videoCodec = u2, c.videoEncoding = c.backupCodec.encoding;
  const I2 = a420.mediaStreamTrack.getSettings(), P2 = (l2 = I2.width) !== null && l2 !== void 0 ? l2 : (v2 = a420.dimensions) === null || v2 === void 0 ? void 0 : v2.width, $ = (p2 = I2.height) !== null && p2 !== void 0 ? p2 : (_ = a420.dimensions) === null || _ === void 0 ? void 0 : _.height;
  return computeVideoEncodings(a420.source === Track.Source.ScreenShare, P2, $, c);
}
function determineAppropriateEncoding(a420, u2, c, l2) {
  const v2 = presetsForResolution(a420, u2, c);
  let { encoding: p2 } = v2[0];
  const _ = Math.max(u2, c);
  for (let I2 = 0; I2 < v2.length; I2 += 1) {
    const P2 = v2[I2];
    if (p2 = P2.encoding, P2.width >= _)
      break;
  }
  if (l2)
    switch (l2) {
      case "av1":
        p2 = Object.assign({}, p2), p2.maxBitrate = p2.maxBitrate * 0.7;
        break;
      case "vp9":
        p2 = Object.assign({}, p2), p2.maxBitrate = p2.maxBitrate * 0.85;
        break;
    }
  return p2;
}
function presetsForResolution(a420, u2, c) {
  if (a420)
    return presetsScreenShare;
  const l2 = u2 > c ? u2 / c : c / u2;
  return Math.abs(l2 - 16 / 9) < Math.abs(l2 - 4 / 3) ? presets169 : presets43;
}
function defaultSimulcastLayers(a420, u2) {
  if (a420)
    return computeDefaultScreenShareSimulcastPresets(u2);
  const { width: c, height: l2 } = u2, v2 = c > l2 ? c / l2 : l2 / c;
  return Math.abs(v2 - 16 / 9) < Math.abs(v2 - 4 / 3) ? defaultSimulcastPresets169 : defaultSimulcastPresets43;
}
function encodingsFromPresets(a420, u2, c) {
  const l2 = [];
  if (c.forEach((v2, p2) => {
    if (p2 >= videoRids.length)
      return;
    const _ = Math.min(a420, u2), P2 = { rid: videoRids[p2], scaleResolutionDownBy: Math.max(1, _ / Math.min(v2.width, v2.height)), maxBitrate: v2.encoding.maxBitrate };
    v2.encoding.maxFramerate && (P2.maxFramerate = v2.encoding.maxFramerate);
    const $ = isFireFox() || p2 === 0;
    v2.encoding.priority && $ && (P2.priority = v2.encoding.priority, P2.networkPriority = v2.encoding.priority), l2.push(P2);
  }), isReactNative() && getReactNativeOs() === "ios") {
    let v2;
    l2.forEach((_) => {
      v2 ? _.maxFramerate && _.maxFramerate > v2 && (v2 = _.maxFramerate) : v2 = _.maxFramerate;
    });
    let p2 = true;
    l2.forEach((_) => {
      var I2;
      _.maxFramerate != v2 && (p2 && (p2 = false, livekitLogger.info("Simulcast on iOS React-Native requires all encodings to share the same framerate.")), livekitLogger.info('Setting framerate of encoding "'.concat((I2 = _.rid) !== null && I2 !== void 0 ? I2 : "", '" to ').concat(v2)), _.maxFramerate = v2);
    });
  }
  return l2;
}
function sortPresets(a420) {
  if (a420)
    return a420.sort((u2, c) => {
      const { encoding: l2 } = u2, { encoding: v2 } = c;
      return l2.maxBitrate > v2.maxBitrate ? 1 : l2.maxBitrate < v2.maxBitrate ? -1 : l2.maxBitrate === v2.maxBitrate && l2.maxFramerate && v2.maxFramerate ? l2.maxFramerate > v2.maxFramerate ? 1 : -1 : 0;
    });
}
class ScalabilityMode {
  constructor(u2) {
    const c = u2.match(/^L(\d)T(\d)(h|_KEY|_KEY_SHIFT){0,1}$/);
    if (!c)
      throw new Error("invalid scalability mode");
    if (this.spatial = parseInt(c[1]), this.temporal = parseInt(c[2]), c.length > 3)
      switch (c[3]) {
        case "h":
        case "_KEY":
        case "_KEY_SHIFT":
          this.suffix = c[3];
      }
  }
  toString() {
    var u2;
    return "L".concat(this.spatial, "T").concat(this.temporal).concat((u2 = this.suffix) !== null && u2 !== void 0 ? u2 : "");
  }
}
const refreshSubscribedCodecAfterNewCodec = 5e3;
class LocalVideoTrack extends LocalTrack {
  /**
  *
  * @param mediaTrack
  * @param constraints MediaTrackConstraints that are being used when restarting or reacquiring tracks
  * @param userProvidedTrack Signals to the SDK whether or not the mediaTrack should be managed (i.e. released and reacquired) internally by the SDK
  */
  constructor(u2, c) {
    let l2 = arguments.length > 2 && arguments[2] !== void 0 ? arguments[2] : true, v2 = arguments.length > 3 ? arguments[3] : void 0;
    super(u2, Track.Kind.Video, c, l2, v2), this.simulcastCodecs = /* @__PURE__ */ new Map(), this.monitorSender = () => __awaiter(this, void 0, void 0, function* () {
      if (!this.sender) {
        this._currentBitrate = 0;
        return;
      }
      let p2;
      try {
        p2 = yield this.getSenderStats();
      } catch (I2) {
        this.log.error("could not get audio sender stats", Object.assign(Object.assign({}, this.logContext), { error: I2 }));
        return;
      }
      const _ = new Map(p2.map((I2) => [I2.rid, I2]));
      if (this.prevStats) {
        let I2 = 0;
        _.forEach((P2, $) => {
          var F2;
          const H2 = (F2 = this.prevStats) === null || F2 === void 0 ? void 0 : F2.get($);
          I2 += computeBitrate(P2, H2);
        }), this._currentBitrate = I2;
      }
      this.prevStats = _;
    }), this.senderLock = new Mutex();
  }
  get isSimulcast() {
    return !!(this.sender && this.sender.getParameters().encodings.length > 1);
  }
  /* @internal */
  startMonitor(u2) {
    var c;
    if (this.signalClient = u2, !isWeb())
      return;
    const l2 = (c = this.sender) === null || c === void 0 ? void 0 : c.getParameters();
    l2 && (this.encodings = l2.encodings), !this.monitorInterval && (this.monitorInterval = setInterval(() => {
      this.monitorSender();
    }, monitorFrequency));
  }
  stop() {
    this._mediaStreamTrack.getConstraints(), this.simulcastCodecs.forEach((u2) => {
      u2.mediaStreamTrack.stop();
    }), super.stop();
  }
  pauseUpstream() {
    const u2 = Object.create(null, { pauseUpstream: { get: () => super.pauseUpstream } });
    var c, l2, v2, p2, _;
    return __awaiter(this, void 0, void 0, function* () {
      yield u2.pauseUpstream.call(this);
      try {
        for (var I2 = true, P2 = __asyncValues(this.simulcastCodecs.values()), $; $ = yield P2.next(), c = $.done, !c; I2 = true)
          p2 = $.value, I2 = false, yield (_ = p2.sender) === null || _ === void 0 ? void 0 : _.replaceTrack(null);
      } catch (F2) {
        l2 = { error: F2 };
      } finally {
        try {
          !I2 && !c && (v2 = P2.return) && (yield v2.call(P2));
        } finally {
          if (l2)
            throw l2.error;
        }
      }
    });
  }
  resumeUpstream() {
    const u2 = Object.create(null, { resumeUpstream: { get: () => super.resumeUpstream } });
    var c, l2, v2, p2, _;
    return __awaiter(this, void 0, void 0, function* () {
      yield u2.resumeUpstream.call(this);
      try {
        for (var I2 = true, P2 = __asyncValues(this.simulcastCodecs.values()), $; $ = yield P2.next(), c = $.done, !c; I2 = true) {
          p2 = $.value, I2 = false;
          const F2 = p2;
          yield (_ = F2.sender) === null || _ === void 0 ? void 0 : _.replaceTrack(F2.mediaStreamTrack);
        }
      } catch (F2) {
        l2 = { error: F2 };
      } finally {
        try {
          !I2 && !c && (v2 = P2.return) && (yield v2.call(P2));
        } finally {
          if (l2)
            throw l2.error;
        }
      }
    });
  }
  mute() {
    const u2 = Object.create(null, { mute: { get: () => super.mute } });
    return __awaiter(this, void 0, void 0, function* () {
      const c = yield this.muteLock.lock();
      try {
        return this.source === Track.Source.Camera && !this.isUserProvided && (this.log.debug("stopping camera track", this.logContext), this._mediaStreamTrack.stop()), yield u2.mute.call(this), this;
      } finally {
        c();
      }
    });
  }
  unmute() {
    const u2 = Object.create(null, { unmute: { get: () => super.unmute } });
    return __awaiter(this, void 0, void 0, function* () {
      const c = yield this.muteLock.lock();
      try {
        return this.source === Track.Source.Camera && !this.isUserProvided && (this.log.debug("reacquiring camera track", this.logContext), yield this.restartTrack()), yield u2.unmute.call(this), this;
      } finally {
        c();
      }
    });
  }
  setTrackMuted(u2) {
    super.setTrackMuted(u2);
    for (const c of this.simulcastCodecs.values())
      c.mediaStreamTrack.enabled = !u2;
  }
  getSenderStats() {
    var u2;
    return __awaiter(this, void 0, void 0, function* () {
      if (!(!((u2 = this.sender) === null || u2 === void 0) && u2.getStats))
        return [];
      const c = [], l2 = yield this.sender.getStats();
      return l2.forEach((v2) => {
        var p2;
        if (v2.type === "outbound-rtp") {
          const _ = { type: "video", streamId: v2.id, frameHeight: v2.frameHeight, frameWidth: v2.frameWidth, firCount: v2.firCount, pliCount: v2.pliCount, nackCount: v2.nackCount, packetsSent: v2.packetsSent, bytesSent: v2.bytesSent, framesSent: v2.framesSent, timestamp: v2.timestamp, rid: (p2 = v2.rid) !== null && p2 !== void 0 ? p2 : v2.id, retransmittedPacketsSent: v2.retransmittedPacketsSent, qualityLimitationReason: v2.qualityLimitationReason, qualityLimitationResolutionChanges: v2.qualityLimitationResolutionChanges }, I2 = l2.get(v2.remoteId);
          I2 && (_.jitter = I2.jitter, _.packetsLost = I2.packetsLost, _.roundTripTime = I2.roundTripTime), c.push(_);
        }
      }), c;
    });
  }
  setPublishingQuality(u2) {
    const c = [];
    for (let l2 = VideoQuality.LOW; l2 <= VideoQuality.HIGH; l2 += 1)
      c.push(new SubscribedQuality({ quality: l2, enabled: l2 <= u2 }));
    this.log.debug("setting publishing quality. max quality ".concat(u2), this.logContext), this.setPublishingLayers(c);
  }
  setDeviceId(u2) {
    return __awaiter(this, void 0, void 0, function* () {
      return this._constraints.deviceId === u2 && this._mediaStreamTrack.getSettings().deviceId === unwrapConstraint(u2) ? true : (this._constraints.deviceId = u2, this.isMuted || (yield this.restartTrack()), this.isMuted || unwrapConstraint(u2) === this._mediaStreamTrack.getSettings().deviceId);
    });
  }
  restartTrack(u2) {
    var c, l2, v2, p2;
    return __awaiter(this, void 0, void 0, function* () {
      let _;
      if (u2) {
        const F2 = constraintsForOptions({ video: u2 });
        typeof F2.video != "boolean" && (_ = F2.video);
      }
      yield this.restart(_);
      try {
        for (var I2 = true, P2 = __asyncValues(this.simulcastCodecs.values()), $; $ = yield P2.next(), c = $.done, !c; I2 = true) {
          p2 = $.value, I2 = false;
          const F2 = p2;
          F2.sender && (F2.mediaStreamTrack = this.mediaStreamTrack.clone(), yield F2.sender.replaceTrack(F2.mediaStreamTrack));
        }
      } catch (F2) {
        l2 = { error: F2 };
      } finally {
        try {
          !I2 && !c && (v2 = P2.return) && (yield v2.call(P2));
        } finally {
          if (l2)
            throw l2.error;
        }
      }
    });
  }
  setProcessor(u2) {
    let c = arguments.length > 1 && arguments[1] !== void 0 ? arguments[1] : true;
    const l2 = Object.create(null, { setProcessor: { get: () => super.setProcessor } });
    var v2, p2, _, I2, P2, $;
    return __awaiter(this, void 0, void 0, function* () {
      if (yield l2.setProcessor.call(this, u2, c), !((P2 = this.processor) === null || P2 === void 0) && P2.processedTrack)
        try {
          for (var F2 = true, H2 = __asyncValues(this.simulcastCodecs.values()), j; j = yield H2.next(), v2 = j.done, !v2; F2 = true)
            I2 = j.value, F2 = false, yield ($ = I2.sender) === null || $ === void 0 ? void 0 : $.replaceTrack(this.processor.processedTrack);
        } catch (ee2) {
          p2 = { error: ee2 };
        } finally {
          try {
            !F2 && !v2 && (_ = H2.return) && (yield _.call(H2));
          } finally {
            if (p2)
              throw p2.error;
          }
        }
    });
  }
  addSimulcastTrack(u2, c) {
    if (this.simulcastCodecs.has(u2)) {
      this.log.error("".concat(u2, " already added, skipping adding simulcast codec"), this.logContext);
      return;
    }
    const l2 = { codec: u2, mediaStreamTrack: this.mediaStreamTrack.clone(), sender: void 0, encodings: c };
    return this.simulcastCodecs.set(u2, l2), l2;
  }
  setSimulcastTrackSender(u2, c) {
    const l2 = this.simulcastCodecs.get(u2);
    l2 && (l2.sender = c, setTimeout(() => {
      this.subscribedCodecs && this.setPublishingCodecs(this.subscribedCodecs);
    }, refreshSubscribedCodecAfterNewCodec));
  }
  /**
  * @internal
  * Sets codecs that should be publishing, returns new codecs that have not yet
  * been published
  */
  setPublishingCodecs(u2) {
    var c, l2, v2, p2, _, I2, P2;
    return __awaiter(this, void 0, void 0, function* () {
      if (this.log.debug("setting publishing codecs", Object.assign(Object.assign({}, this.logContext), { codecs: u2, currentCodec: this.codec })), !this.codec && u2.length > 0)
        return yield this.setPublishingLayers(u2[0].qualities), [];
      this.subscribedCodecs = u2;
      const $ = [];
      try {
        for (c = true, l2 = __asyncValues(u2); v2 = yield l2.next(), p2 = v2.done, !p2; c = true) {
          P2 = v2.value, c = false;
          const F2 = P2;
          if (!this.codec || this.codec === F2.codec)
            yield this.setPublishingLayers(F2.qualities);
          else {
            const H2 = this.simulcastCodecs.get(F2.codec);
            if (this.log.debug("try setPublishingCodec for ".concat(F2.codec), Object.assign(Object.assign({}, this.logContext), { simulcastCodecInfo: H2 })), !H2 || !H2.sender) {
              for (const j of F2.qualities)
                if (j.enabled) {
                  $.push(F2.codec);
                  break;
                }
            } else
              H2.encodings && (this.log.debug("try setPublishingLayersForSender ".concat(F2.codec), this.logContext), yield setPublishingLayersForSender(H2.sender, H2.encodings, F2.qualities, this.senderLock, this.log, this.logContext));
          }
        }
      } catch (F2) {
        _ = { error: F2 };
      } finally {
        try {
          !c && !p2 && (I2 = l2.return) && (yield I2.call(l2));
        } finally {
          if (_)
            throw _.error;
        }
      }
      return $;
    });
  }
  /**
  * @internal
  * Sets layers that should be publishing
  */
  setPublishingLayers(u2) {
    return __awaiter(this, void 0, void 0, function* () {
      this.log.debug("setting publishing layers", Object.assign(Object.assign({}, this.logContext), { qualities: u2 })), !(!this.sender || !this.encodings) && (yield setPublishingLayersForSender(this.sender, this.encodings, u2, this.senderLock, this.log, this.logContext));
    });
  }
  handleAppVisibilityChanged() {
    const u2 = Object.create(null, { handleAppVisibilityChanged: { get: () => super.handleAppVisibilityChanged } });
    return __awaiter(this, void 0, void 0, function* () {
      yield u2.handleAppVisibilityChanged.call(this), isMobile() && this.isInBackground && this.source === Track.Source.Camera && (this._mediaStreamTrack.enabled = false);
    });
  }
}
function setPublishingLayersForSender(a420, u2, c, l2, v2, p2) {
  return __awaiter(this, void 0, void 0, function* () {
    const _ = yield l2.lock();
    v2.debug("setPublishingLayersForSender", Object.assign(Object.assign({}, p2), { sender: a420, qualities: c, senderEncodings: u2 }));
    try {
      const I2 = a420.getParameters(), { encodings: P2 } = I2;
      if (!P2)
        return;
      if (P2.length !== u2.length) {
        v2.warn("cannot set publishing layers, encodings mismatch");
        return;
      }
      let $ = false;
      P2.forEach((H2, j) => {
        var ee2;
        let X2 = (ee2 = H2.rid) !== null && ee2 !== void 0 ? ee2 : "";
        X2 === "" && (X2 = "q");
        const ie2 = videoQualityForRid(X2), Q2 = c.find((ne2) => ne2.quality === ie2);
        Q2 && H2.active !== Q2.enabled && ($ = true, H2.active = Q2.enabled, v2.debug("setting layer ".concat(Q2.quality, " to ").concat(H2.active ? "enabled" : "disabled"), p2), isFireFox() && (Q2.enabled ? (H2.scaleResolutionDownBy = u2[j].scaleResolutionDownBy, H2.maxBitrate = u2[j].maxBitrate, H2.maxFrameRate = u2[j].maxFrameRate) : (H2.scaleResolutionDownBy = 4, H2.maxBitrate = 10, H2.maxFrameRate = 2)));
      }), $ && (I2.encodings = P2, v2.debug("setting encodings", Object.assign(Object.assign({}, p2), { encodings: I2.encodings })), yield a420.setParameters(I2));
    } finally {
      _();
    }
  });
}
function videoQualityForRid(a420) {
  switch (a420) {
    case "f":
      return VideoQuality.HIGH;
    case "h":
      return VideoQuality.MEDIUM;
    case "q":
      return VideoQuality.LOW;
    default:
      return VideoQuality.HIGH;
  }
}
function videoLayersFromEncodings(a420, u2, c, l2) {
  if (!c)
    return [new VideoLayer({ quality: VideoQuality.HIGH, width: a420, height: u2, bitrate: 0, ssrc: 0 })];
  if (l2) {
    const v2 = c[0].scalabilityMode, p2 = new ScalabilityMode(v2), _ = [];
    for (let I2 = 0; I2 < p2.spatial; I2 += 1)
      _.push(new VideoLayer({ quality: VideoQuality.HIGH - I2, width: Math.ceil(a420 / Math.pow(2, I2)), height: Math.ceil(u2 / Math.pow(2, I2)), bitrate: c[0].maxBitrate ? Math.ceil(c[0].maxBitrate / Math.pow(3, I2)) : 0, ssrc: 0 }));
    return _;
  }
  return c.map((v2) => {
    var p2, _, I2;
    const P2 = (p2 = v2.scaleResolutionDownBy) !== null && p2 !== void 0 ? p2 : 1;
    let $ = videoQualityForRid((_ = v2.rid) !== null && _ !== void 0 ? _ : "");
    return new VideoLayer({ quality: $, width: Math.ceil(a420 / P2), height: Math.ceil(u2 / P2), bitrate: (I2 = v2.maxBitrate) !== null && I2 !== void 0 ? I2 : 0, ssrc: 0 });
  });
}
class RemoteTrack extends Track {
  constructor(u2, c, l2, v2, p2) {
    super(u2, l2, p2), this.sid = c, this.receiver = v2;
  }
  /** @internal */
  setMuted(u2) {
    this.isMuted !== u2 && (this.isMuted = u2, this._mediaStreamTrack.enabled = !u2, this.emit(u2 ? TrackEvent.Muted : TrackEvent.Unmuted, this));
  }
  /** @internal */
  setMediaStream(u2) {
    this.mediaStream = u2;
    const c = (l2) => {
      l2.track === this._mediaStreamTrack && (u2.removeEventListener("removetrack", c), this.receiver = void 0, this._currentBitrate = 0, this.emit(TrackEvent.Ended, this));
    };
    u2.addEventListener("removetrack", c);
  }
  start() {
    this.startMonitor(), super.enable();
  }
  stop() {
    this.stopMonitor(), super.disable();
  }
  /**
  * Gets the RTCStatsReport for the RemoteTrack's underlying RTCRtpReceiver
  * See https://developer.mozilla.org/en-US/docs/Web/API/RTCStatsReport
  *
  * @returns Promise<RTCStatsReport> | undefined
  */
  getRTCStatsReport() {
    var u2;
    return __awaiter(this, void 0, void 0, function* () {
      return !((u2 = this.receiver) === null || u2 === void 0) && u2.getStats ? yield this.receiver.getStats() : void 0;
    });
  }
  /* @internal */
  startMonitor() {
    this.monitorInterval || (this.monitorInterval = setInterval(() => this.monitorReceiver(), monitorFrequency));
  }
}
class RemoteAudioTrack extends RemoteTrack {
  constructor(u2, c, l2, v2, p2, _) {
    super(u2, c, Track.Kind.Audio, l2, _), this.monitorReceiver = () => __awaiter(this, void 0, void 0, function* () {
      if (!this.receiver) {
        this._currentBitrate = 0;
        return;
      }
      const I2 = yield this.getReceiverStats();
      I2 && this.prevStats && this.receiver && (this._currentBitrate = computeBitrate(I2, this.prevStats)), this.prevStats = I2;
    }), this.audioContext = v2, this.webAudioPluginNodes = [], p2 && (this.sinkId = p2.deviceId);
  }
  /**
  * sets the volume for all attached audio elements
  */
  setVolume(u2) {
    var c;
    for (const l2 of this.attachedElements)
      this.audioContext ? (c = this.gainNode) === null || c === void 0 || c.gain.setTargetAtTime(u2, 0, 0.1) : l2.volume = u2;
    isReactNative() && this._mediaStreamTrack._setVolume(u2), this.elementVolume = u2;
  }
  /**
  * gets the volume of attached audio elements (loudest)
  */
  getVolume() {
    if (this.elementVolume)
      return this.elementVolume;
    if (isReactNative())
      return 1;
    let u2 = 0;
    return this.attachedElements.forEach((c) => {
      c.volume > u2 && (u2 = c.volume);
    }), u2;
  }
  /**
  * calls setSinkId on all attached elements, if supported
  * @param deviceId audio output device
  */
  setSinkId(u2) {
    return __awaiter(this, void 0, void 0, function* () {
      this.sinkId = u2, yield Promise.all(this.attachedElements.map((c) => {
        if (supportsSetSinkId(c))
          return c.setSinkId(u2);
      }));
    });
  }
  attach(u2) {
    const c = this.attachedElements.length === 0;
    return u2 ? super.attach(u2) : u2 = super.attach(), this.sinkId && supportsSetSinkId(u2) && u2.setSinkId(this.sinkId), this.audioContext && c && (this.log.debug("using audio context mapping", this.logContext), this.connectWebAudio(this.audioContext, u2), u2.volume = 0, u2.muted = true), this.elementVolume && this.setVolume(this.elementVolume), u2;
  }
  detach(u2) {
    let c;
    return u2 ? (c = super.detach(u2), this.audioContext && (this.attachedElements.length > 0 ? this.connectWebAudio(this.audioContext, this.attachedElements[0]) : this.disconnectWebAudio())) : (c = super.detach(), this.disconnectWebAudio()), c;
  }
  /**
  * @internal
  * @experimental
  */
  setAudioContext(u2) {
    this.audioContext = u2, u2 && this.attachedElements.length > 0 ? this.connectWebAudio(u2, this.attachedElements[0]) : u2 || this.disconnectWebAudio();
  }
  /**
  * @internal
  * @experimental
  * @param {AudioNode[]} nodes - An array of WebAudio nodes. These nodes should not be connected to each other when passed, as the sdk will take care of connecting them in the order of the array.
  */
  setWebAudioPlugins(u2) {
    this.webAudioPluginNodes = u2, this.attachedElements.length > 0 && this.audioContext && this.connectWebAudio(this.audioContext, this.attachedElements[0]);
  }
  connectWebAudio(u2, c) {
    this.disconnectWebAudio(), this.sourceNode = u2.createMediaStreamSource(c.srcObject);
    let l2 = this.sourceNode;
    this.webAudioPluginNodes.forEach((v2) => {
      l2.connect(v2), l2 = v2;
    }), this.gainNode = u2.createGain(), l2.connect(this.gainNode), this.gainNode.connect(u2.destination), this.elementVolume && this.gainNode.gain.setTargetAtTime(this.elementVolume, 0, 0.1), u2.state !== "running" && u2.resume().then(() => {
      u2.state !== "running" && this.emit(TrackEvent.AudioPlaybackFailed, new Error("Audio Context couldn't be started automatically"));
    }).catch((v2) => {
      this.emit(TrackEvent.AudioPlaybackFailed, v2);
    });
  }
  disconnectWebAudio() {
    var u2, c;
    (u2 = this.gainNode) === null || u2 === void 0 || u2.disconnect(), (c = this.sourceNode) === null || c === void 0 || c.disconnect(), this.gainNode = void 0, this.sourceNode = void 0;
  }
  getReceiverStats() {
    return __awaiter(this, void 0, void 0, function* () {
      if (!this.receiver || !this.receiver.getStats)
        return;
      const u2 = yield this.receiver.getStats();
      let c;
      return u2.forEach((l2) => {
        l2.type === "inbound-rtp" && (c = { type: "audio", timestamp: l2.timestamp, jitter: l2.jitter, bytesReceived: l2.bytesReceived, concealedSamples: l2.concealedSamples, concealmentEvents: l2.concealmentEvents, silentConcealedSamples: l2.silentConcealedSamples, silentConcealmentEvents: l2.silentConcealmentEvents, totalAudioEnergy: l2.totalAudioEnergy, totalSamplesDuration: l2.totalSamplesDuration });
      }), c;
    });
  }
}
const REACTION_DELAY = 100;
class RemoteVideoTrack extends RemoteTrack {
  constructor(u2, c, l2, v2, p2) {
    super(u2, c, Track.Kind.Video, l2, p2), this.elementInfos = [], this.monitorReceiver = () => __awaiter(this, void 0, void 0, function* () {
      if (!this.receiver) {
        this._currentBitrate = 0;
        return;
      }
      const _ = yield this.getReceiverStats();
      _ && this.prevStats && this.receiver && (this._currentBitrate = computeBitrate(_, this.prevStats)), this.prevStats = _;
    }), this.debouncedHandleResize = r(() => {
      this.updateDimensions();
    }, REACTION_DELAY), this.adaptiveStreamSettings = v2;
  }
  get isAdaptiveStream() {
    return this.adaptiveStreamSettings !== void 0;
  }
  /**
  * Note: When using adaptiveStream, you need to use remoteVideoTrack.attach() to add the track to a HTMLVideoElement, otherwise your video tracks might never start
  */
  get mediaStreamTrack() {
    return this._mediaStreamTrack;
  }
  /** @internal */
  setMuted(u2) {
    super.setMuted(u2), this.attachedElements.forEach((c) => {
      u2 ? detachTrack(this._mediaStreamTrack, c) : attachToElement(this._mediaStreamTrack, c);
    });
  }
  attach(u2) {
    if (u2 ? super.attach(u2) : u2 = super.attach(), this.adaptiveStreamSettings && this.elementInfos.find((c) => c.element === u2) === void 0) {
      const c = new HTMLElementInfo(u2);
      this.observeElementInfo(c);
    }
    return u2;
  }
  /**
  * Observe an ElementInfo for changes when adaptive streaming.
  * @param elementInfo
  * @internal
  */
  observeElementInfo(u2) {
    this.adaptiveStreamSettings && this.elementInfos.find((c) => c === u2) === void 0 ? (u2.handleResize = () => {
      this.debouncedHandleResize();
    }, u2.handleVisibilityChanged = () => {
      this.updateVisibility();
    }, this.elementInfos.push(u2), u2.observe(), this.debouncedHandleResize(), this.updateVisibility()) : this.log.warn("visibility resize observer not triggered", this.logContext);
  }
  /**
  * Stop observing an ElementInfo for changes.
  * @param elementInfo
  * @internal
  */
  stopObservingElementInfo(u2) {
    if (!this.isAdaptiveStream) {
      this.log.warn("stopObservingElementInfo ignored", this.logContext);
      return;
    }
    const c = this.elementInfos.filter((l2) => l2 === u2);
    for (const l2 of c)
      l2.stopObserving();
    this.elementInfos = this.elementInfos.filter((l2) => l2 !== u2), this.updateVisibility(), this.debouncedHandleResize();
  }
  detach(u2) {
    let c = [];
    if (u2)
      return this.stopObservingElement(u2), super.detach(u2);
    c = super.detach();
    for (const l2 of c)
      this.stopObservingElement(l2);
    return c;
  }
  /** @internal */
  getDecoderImplementation() {
    var u2;
    return (u2 = this.prevStats) === null || u2 === void 0 ? void 0 : u2.decoderImplementation;
  }
  getReceiverStats() {
    return __awaiter(this, void 0, void 0, function* () {
      if (!this.receiver || !this.receiver.getStats)
        return;
      const u2 = yield this.receiver.getStats();
      let c, l2 = "", v2 = /* @__PURE__ */ new Map();
      return u2.forEach((p2) => {
        p2.type === "inbound-rtp" ? (l2 = p2.codecId, c = { type: "video", framesDecoded: p2.framesDecoded, framesDropped: p2.framesDropped, framesReceived: p2.framesReceived, packetsReceived: p2.packetsReceived, packetsLost: p2.packetsLost, frameWidth: p2.frameWidth, frameHeight: p2.frameHeight, pliCount: p2.pliCount, firCount: p2.firCount, nackCount: p2.nackCount, jitter: p2.jitter, timestamp: p2.timestamp, bytesReceived: p2.bytesReceived, decoderImplementation: p2.decoderImplementation }) : p2.type === "codec" && v2.set(p2.id, p2);
      }), c && l2 !== "" && v2.get(l2) && (c.mimeType = v2.get(l2).mimeType), c;
    });
  }
  stopObservingElement(u2) {
    const c = this.elementInfos.filter((l2) => l2.element === u2);
    for (const l2 of c)
      this.stopObservingElementInfo(l2);
  }
  handleAppVisibilityChanged() {
    const u2 = Object.create(null, { handleAppVisibilityChanged: { get: () => super.handleAppVisibilityChanged } });
    return __awaiter(this, void 0, void 0, function* () {
      yield u2.handleAppVisibilityChanged.call(this), this.isAdaptiveStream && this.updateVisibility();
    });
  }
  updateVisibility() {
    var u2, c;
    const l2 = this.elementInfos.reduce((I2, P2) => Math.max(I2, P2.visibilityChangedAt || 0), 0), v2 = !((c = (u2 = this.adaptiveStreamSettings) === null || u2 === void 0 ? void 0 : u2.pauseVideoInBackground) !== null && c !== void 0) || c ? this.isInBackground : false, p2 = this.elementInfos.some((I2) => I2.pictureInPicture), _ = this.elementInfos.some((I2) => I2.visible) && !v2 || p2;
    if (this.lastVisible !== _) {
      if (!_ && Date.now() - l2 < REACTION_DELAY) {
        CriticalTimers.setTimeout(() => {
          this.updateVisibility();
        }, REACTION_DELAY);
        return;
      }
      this.lastVisible = _, this.emit(TrackEvent.VisibilityChanged, _, this);
    }
  }
  updateDimensions() {
    var u2, c;
    let l2 = 0, v2 = 0;
    const p2 = this.getPixelDensity();
    for (const _ of this.elementInfos) {
      const I2 = _.width() * p2, P2 = _.height() * p2;
      I2 + P2 > l2 + v2 && (l2 = I2, v2 = P2);
    }
    ((u2 = this.lastDimensions) === null || u2 === void 0 ? void 0 : u2.width) === l2 && ((c = this.lastDimensions) === null || c === void 0 ? void 0 : c.height) === v2 || (this.lastDimensions = { width: l2, height: v2 }, this.emit(TrackEvent.VideoDimensionsChanged, this.lastDimensions, this));
  }
  getPixelDensity() {
    var u2;
    const c = (u2 = this.adaptiveStreamSettings) === null || u2 === void 0 ? void 0 : u2.pixelDensity;
    return c === "screen" ? getDevicePixelRatio() : c || (getDevicePixelRatio() > 2 ? 2 : 1);
  }
}
class HTMLElementInfo {
  get visible() {
    return this.isPiP || this.isIntersecting;
  }
  get pictureInPicture() {
    return this.isPiP;
  }
  constructor(u2, c) {
    this.onVisibilityChanged = (l2) => {
      var v2;
      const { target: p2, isIntersecting: _ } = l2;
      p2 === this.element && (this.isIntersecting = _, this.visibilityChangedAt = Date.now(), (v2 = this.handleVisibilityChanged) === null || v2 === void 0 || v2.call(this));
    }, this.onEnterPiP = () => {
      var l2;
      this.isPiP = true, (l2 = this.handleVisibilityChanged) === null || l2 === void 0 || l2.call(this);
    }, this.onLeavePiP = () => {
      var l2;
      this.isPiP = false, (l2 = this.handleVisibilityChanged) === null || l2 === void 0 || l2.call(this);
    }, this.element = u2, this.isIntersecting = c ?? isElementInViewport(u2), this.isPiP = isWeb() && document.pictureInPictureElement === u2, this.visibilityChangedAt = 0;
  }
  width() {
    return this.element.clientWidth;
  }
  height() {
    return this.element.clientHeight;
  }
  observe() {
    this.isIntersecting = isElementInViewport(this.element), this.isPiP = document.pictureInPictureElement === this.element, this.element.handleResize = () => {
      var u2;
      (u2 = this.handleResize) === null || u2 === void 0 || u2.call(this);
    }, this.element.handleVisibilityChanged = this.onVisibilityChanged, getIntersectionObserver().observe(this.element), getResizeObserver().observe(this.element), this.element.addEventListener("enterpictureinpicture", this.onEnterPiP), this.element.addEventListener("leavepictureinpicture", this.onLeavePiP);
  }
  stopObserving() {
    var u2, c;
    (u2 = getIntersectionObserver()) === null || u2 === void 0 || u2.unobserve(this.element), (c = getResizeObserver()) === null || c === void 0 || c.unobserve(this.element), this.element.removeEventListener("enterpictureinpicture", this.onEnterPiP), this.element.removeEventListener("leavepictureinpicture", this.onLeavePiP);
  }
}
function isElementInViewport(a420) {
  let u2 = a420.offsetTop, c = a420.offsetLeft;
  const l2 = a420.offsetWidth, v2 = a420.offsetHeight, { hidden: p2 } = a420, { opacity: _, display: I2 } = getComputedStyle(a420);
  for (; a420.offsetParent; )
    a420 = a420.offsetParent, u2 += a420.offsetTop, c += a420.offsetLeft;
  return u2 < window.pageYOffset + window.innerHeight && c < window.pageXOffset + window.innerWidth && u2 + v2 > window.pageYOffset && c + l2 > window.pageXOffset && !p2 && (_ !== "" ? parseFloat(_) > 0 : true) && I2 !== "none";
}
class TrackPublication extends eventsExports.EventEmitter {
  constructor(u2, c, l2, v2) {
    var p2;
    super(), this.metadataMuted = false, this.encryption = Encryption_Type.NONE, this.log = livekitLogger, this.handleMuted = () => {
      this.emit(TrackEvent.Muted);
    }, this.handleUnmuted = () => {
      this.emit(TrackEvent.Unmuted);
    }, this.log = getLogger((p2 = v2 == null ? void 0 : v2.loggerName) !== null && p2 !== void 0 ? p2 : LoggerNames.Publication), this.loggerContextCb = this.loggerContextCb, this.setMaxListeners(100), this.kind = u2, this.trackSid = c, this.trackName = l2, this.source = Track.Source.Unknown;
  }
  /** @internal */
  setTrack(u2) {
    this.track && (this.track.off(TrackEvent.Muted, this.handleMuted), this.track.off(TrackEvent.Unmuted, this.handleUnmuted)), this.track = u2, u2 && (u2.on(TrackEvent.Muted, this.handleMuted), u2.on(TrackEvent.Unmuted, this.handleUnmuted));
  }
  get logContext() {
    var u2;
    return Object.assign(Object.assign({}, (u2 = this.loggerContextCb) === null || u2 === void 0 ? void 0 : u2.call(this)), getLogContextFromTrack(this));
  }
  get isMuted() {
    return this.metadataMuted;
  }
  get isEnabled() {
    return true;
  }
  get isSubscribed() {
    return this.track !== void 0;
  }
  get isEncrypted() {
    return this.encryption !== Encryption_Type.NONE;
  }
  /**
  * an [AudioTrack] if this publication holds an audio track
  */
  get audioTrack() {
    if (this.track instanceof LocalAudioTrack || this.track instanceof RemoteAudioTrack)
      return this.track;
  }
  /**
  * an [VideoTrack] if this publication holds a video track
  */
  get videoTrack() {
    if (this.track instanceof LocalVideoTrack || this.track instanceof RemoteVideoTrack)
      return this.track;
  }
  /** @internal */
  updateInfo(u2) {
    this.trackSid = u2.sid, this.trackName = u2.name, this.source = Track.sourceFromProto(u2.source), this.mimeType = u2.mimeType, this.kind === Track.Kind.Video && u2.width > 0 && (this.dimensions = { width: u2.width, height: u2.height }, this.simulcasted = u2.simulcast), this.encryption = u2.encryption, this.trackInfo = u2, this.log.debug("update publication info", Object.assign(Object.assign({}, this.logContext), { info: u2 }));
  }
}
(function(a420) {
  (function(u2) {
    u2.Desired = "desired", u2.Subscribed = "subscribed", u2.Unsubscribed = "unsubscribed";
  })(a420.SubscriptionStatus || (a420.SubscriptionStatus = {})), function(u2) {
    u2.Allowed = "allowed", u2.NotAllowed = "not_allowed";
  }(a420.PermissionStatus || (a420.PermissionStatus = {}));
})(TrackPublication || (TrackPublication = {}));
class LocalTrackPublication extends TrackPublication {
  get isUpstreamPaused() {
    var u2;
    return (u2 = this.track) === null || u2 === void 0 ? void 0 : u2.isUpstreamPaused;
  }
  constructor(u2, c, l2, v2) {
    super(u2, c.sid, c.name, v2), this.track = void 0, this.handleTrackEnded = () => {
      this.emit(TrackEvent.Ended);
    }, this.updateInfo(c), this.setTrack(l2);
  }
  setTrack(u2) {
    this.track && this.track.off(TrackEvent.Ended, this.handleTrackEnded), super.setTrack(u2), u2 && u2.on(TrackEvent.Ended, this.handleTrackEnded);
  }
  get isMuted() {
    return this.track ? this.track.isMuted : super.isMuted;
  }
  get audioTrack() {
    return super.audioTrack;
  }
  get videoTrack() {
    return super.videoTrack;
  }
  /**
  * Mute the track associated with this publication
  */
  mute() {
    var u2;
    return __awaiter(this, void 0, void 0, function* () {
      return (u2 = this.track) === null || u2 === void 0 ? void 0 : u2.mute();
    });
  }
  /**
  * Unmute track associated with this publication
  */
  unmute() {
    var u2;
    return __awaiter(this, void 0, void 0, function* () {
      return (u2 = this.track) === null || u2 === void 0 ? void 0 : u2.unmute();
    });
  }
  /**
  * Pauses the media stream track associated with this publication from being sent to the server
  * and signals "muted" event to other participants
  * Useful if you want to pause the stream without pausing the local media stream track
  */
  pauseUpstream() {
    var u2;
    return __awaiter(this, void 0, void 0, function* () {
      yield (u2 = this.track) === null || u2 === void 0 ? void 0 : u2.pauseUpstream();
    });
  }
  /**
  * Resumes sending the media stream track associated with this publication to the server after a call to [[pauseUpstream()]]
  * and signals "unmuted" event to other participants (unless the track is explicitly muted)
  */
  resumeUpstream() {
    var u2;
    return __awaiter(this, void 0, void 0, function* () {
      yield (u2 = this.track) === null || u2 === void 0 ? void 0 : u2.resumeUpstream();
    });
  }
}
var ConnectionQuality;
(function(a420) {
  a420.Excellent = "excellent", a420.Good = "good", a420.Poor = "poor", a420.Lost = "lost", a420.Unknown = "unknown";
})(ConnectionQuality || (ConnectionQuality = {}));
function qualityFromProto(a420) {
  switch (a420) {
    case ConnectionQuality$1.EXCELLENT:
      return ConnectionQuality.Excellent;
    case ConnectionQuality$1.GOOD:
      return ConnectionQuality.Good;
    case ConnectionQuality$1.POOR:
      return ConnectionQuality.Poor;
    case ConnectionQuality$1.LOST:
      return ConnectionQuality.Lost;
    default:
      return ConnectionQuality.Unknown;
  }
}
let Participant$1 = class Participant2 extends eventsExports.EventEmitter {
  get logContext() {
    var u2, c;
    return Object.assign(Object.assign({}, (c = (u2 = this.loggerOptions) === null || u2 === void 0 ? void 0 : u2.loggerContextCb) === null || c === void 0 ? void 0 : c.call(u2)), { participantSid: this.sid, participantId: this.identity });
  }
  get isEncrypted() {
    return this.trackPublications.size > 0 && Array.from(this.trackPublications.values()).every((u2) => u2.isEncrypted);
  }
  get isAgent() {
    var u2, c;
    return (c = (u2 = this.permissions) === null || u2 === void 0 ? void 0 : u2.agent) !== null && c !== void 0 ? c : false;
  }
  /** @internal */
  constructor(u2, c, l2, v2, p2) {
    var _;
    super(), this.audioLevel = 0, this.isSpeaking = false, this._connectionQuality = ConnectionQuality.Unknown, this.log = livekitLogger, this.log = getLogger((_ = p2 == null ? void 0 : p2.loggerName) !== null && _ !== void 0 ? _ : LoggerNames.Participant), this.loggerOptions = p2, this.setMaxListeners(100), this.sid = u2, this.identity = c, this.name = l2, this.metadata = v2, this.audioTrackPublications = /* @__PURE__ */ new Map(), this.videoTrackPublications = /* @__PURE__ */ new Map(), this.trackPublications = /* @__PURE__ */ new Map();
  }
  getTrackPublications() {
    return Array.from(this.trackPublications.values());
  }
  /**
  * Finds the first track that matches the source filter, for example, getting
  * the user's camera track with getTrackBySource(Track.Source.Camera).
  */
  getTrackPublication(u2) {
    for (const [, c] of this.trackPublications)
      if (c.source === u2)
        return c;
  }
  /**
  * Finds the first track that matches the track's name.
  */
  getTrackPublicationByName(u2) {
    for (const [, c] of this.trackPublications)
      if (c.trackName === u2)
        return c;
  }
  get connectionQuality() {
    return this._connectionQuality;
  }
  get isCameraEnabled() {
    var u2;
    const c = this.getTrackPublication(Track.Source.Camera);
    return !(!((u2 = c == null ? void 0 : c.isMuted) !== null && u2 !== void 0) || u2);
  }
  get isMicrophoneEnabled() {
    var u2;
    const c = this.getTrackPublication(Track.Source.Microphone);
    return !(!((u2 = c == null ? void 0 : c.isMuted) !== null && u2 !== void 0) || u2);
  }
  get isScreenShareEnabled() {
    return !!this.getTrackPublication(Track.Source.ScreenShare);
  }
  get isLocal() {
    return false;
  }
  /** when participant joined the room */
  get joinedAt() {
    return this.participantInfo ? new Date(Number.parseInt(this.participantInfo.joinedAt.toString()) * 1e3) : /* @__PURE__ */ new Date();
  }
  /** @internal */
  updateInfo(u2) {
    return this.participantInfo && this.participantInfo.sid === u2.sid && this.participantInfo.version > u2.version ? false : (this.identity = u2.identity, this.sid = u2.sid, this._setName(u2.name), this._setMetadata(u2.metadata), u2.permission && this.setPermissions(u2.permission), this.participantInfo = u2, this.log.trace("update participant info", Object.assign(Object.assign({}, this.logContext), { info: u2 })), true);
  }
  /**
  * Updates metadata from server
  **/
  _setMetadata(u2) {
    const c = this.metadata !== u2, l2 = this.metadata;
    this.metadata = u2, c && this.emit(ParticipantEvent.ParticipantMetadataChanged, l2);
  }
  _setName(u2) {
    const c = this.name !== u2;
    this.name = u2, c && this.emit(ParticipantEvent.ParticipantNameChanged, u2);
  }
  /** @internal */
  setPermissions(u2) {
    var c, l2, v2, p2, _;
    const I2 = this.permissions, P2 = u2.canPublish !== ((c = this.permissions) === null || c === void 0 ? void 0 : c.canPublish) || u2.canSubscribe !== ((l2 = this.permissions) === null || l2 === void 0 ? void 0 : l2.canSubscribe) || u2.canPublishData !== ((v2 = this.permissions) === null || v2 === void 0 ? void 0 : v2.canPublishData) || u2.hidden !== ((p2 = this.permissions) === null || p2 === void 0 ? void 0 : p2.hidden) || u2.recorder !== ((_ = this.permissions) === null || _ === void 0 ? void 0 : _.recorder) || u2.canPublishSources.length !== this.permissions.canPublishSources.length || u2.canPublishSources.some(($, F2) => {
      var H2;
      return $ !== ((H2 = this.permissions) === null || H2 === void 0 ? void 0 : H2.canPublishSources[F2]);
    });
    return this.permissions = u2, P2 && this.emit(ParticipantEvent.ParticipantPermissionsChanged, I2), P2;
  }
  /** @internal */
  setIsSpeaking(u2) {
    u2 !== this.isSpeaking && (this.isSpeaking = u2, u2 && (this.lastSpokeAt = /* @__PURE__ */ new Date()), this.emit(ParticipantEvent.IsSpeakingChanged, u2));
  }
  /** @internal */
  setConnectionQuality(u2) {
    const c = this._connectionQuality;
    this._connectionQuality = qualityFromProto(u2), c !== this._connectionQuality && this.emit(ParticipantEvent.ConnectionQualityChanged, this._connectionQuality);
  }
  /**
  * @internal
  */
  setAudioContext(u2) {
    this.audioContext = u2, this.audioTrackPublications.forEach((c) => (c.track instanceof RemoteAudioTrack || c.track instanceof LocalAudioTrack) && c.track.setAudioContext(u2));
  }
  addTrackPublication(u2) {
    u2.on(TrackEvent.Muted, () => {
      this.emit(ParticipantEvent.TrackMuted, u2);
    }), u2.on(TrackEvent.Unmuted, () => {
      this.emit(ParticipantEvent.TrackUnmuted, u2);
    });
    const c = u2;
    switch (c.track && (c.track.sid = u2.trackSid), this.trackPublications.set(u2.trackSid, u2), u2.kind) {
      case Track.Kind.Audio:
        this.audioTrackPublications.set(u2.trackSid, u2);
        break;
      case Track.Kind.Video:
        this.videoTrackPublications.set(u2.trackSid, u2);
        break;
    }
  }
};
function trackPermissionToProto(a420) {
  var u2, c, l2;
  if (!a420.participantSid && !a420.participantIdentity)
    throw new Error("Invalid track permission, must provide at least one of participantIdentity and participantSid");
  return new TrackPermission({ participantIdentity: (u2 = a420.participantIdentity) !== null && u2 !== void 0 ? u2 : "", participantSid: (c = a420.participantSid) !== null && c !== void 0 ? c : "", allTracks: (l2 = a420.allowAll) !== null && l2 !== void 0 ? l2 : false, trackSids: a420.allowedTrackSids || [] });
}
class LocalParticipant extends Participant$1 {
  /** @internal */
  constructor(u2, c, l2, v2) {
    super(u2, c, void 0, void 0, { loggerName: v2.loggerName, loggerContextCb: () => this.engine.logContext }), this.pendingPublishing = /* @__PURE__ */ new Set(), this.pendingPublishPromises = /* @__PURE__ */ new Map(), this.participantTrackPermissions = [], this.allParticipantsAllowedToSubscribe = true, this.encryptionType = Encryption_Type.NONE, this.handleReconnecting = () => {
      this.reconnectFuture || (this.reconnectFuture = new Future());
    }, this.handleReconnected = () => {
      var p2, _;
      (_ = (p2 = this.reconnectFuture) === null || p2 === void 0 ? void 0 : p2.resolve) === null || _ === void 0 || _.call(p2), this.reconnectFuture = void 0, this.updateTrackSubscriptionPermissions();
    }, this.handleDisconnected = () => {
      var p2, _;
      this.reconnectFuture && (this.reconnectFuture.promise.catch((I2) => this.log.warn(I2.message, this.logContext)), (_ = (p2 = this.reconnectFuture) === null || p2 === void 0 ? void 0 : p2.reject) === null || _ === void 0 || _.call(p2, "Got disconnected during reconnection attempt"), this.reconnectFuture = void 0);
    }, this.updateTrackSubscriptionPermissions = () => {
      this.log.debug("updating track subscription permissions", Object.assign(Object.assign({}, this.logContext), { allParticipantsAllowed: this.allParticipantsAllowedToSubscribe, participantTrackPermissions: this.participantTrackPermissions })), this.engine.client.sendUpdateSubscriptionPermissions(this.allParticipantsAllowedToSubscribe, this.participantTrackPermissions.map((p2) => trackPermissionToProto(p2)));
    }, this.onTrackUnmuted = (p2) => {
      this.onTrackMuted(p2, p2.isUpstreamPaused);
    }, this.onTrackMuted = (p2, _) => {
      if (_ === void 0 && (_ = true), !p2.sid) {
        this.log.error("could not update mute status for unpublished track", Object.assign(Object.assign({}, this.logContext), getLogContextFromTrack(p2)));
        return;
      }
      this.engine.updateMuteStatus(p2.sid, _);
    }, this.onTrackUpstreamPaused = (p2) => {
      this.log.debug("upstream paused", Object.assign(Object.assign({}, this.logContext), getLogContextFromTrack(p2))), this.onTrackMuted(p2, true);
    }, this.onTrackUpstreamResumed = (p2) => {
      this.log.debug("upstream resumed", Object.assign(Object.assign({}, this.logContext), getLogContextFromTrack(p2))), this.onTrackMuted(p2, p2.isMuted);
    }, this.handleSubscribedQualityUpdate = (p2) => __awaiter(this, void 0, void 0, function* () {
      var _, I2, P2, $, F2, H2;
      if (!(!((F2 = this.roomOptions) === null || F2 === void 0) && F2.dynacast))
        return;
      const j = this.videoTrackPublications.get(p2.trackSid);
      if (!j) {
        this.log.warn("received subscribed quality update for unknown track", Object.assign(Object.assign({}, this.logContext), { trackSid: p2.trackSid }));
        return;
      }
      if (p2.subscribedCodecs.length > 0) {
        if (!j.videoTrack)
          return;
        const Q2 = yield j.videoTrack.setPublishingCodecs(p2.subscribedCodecs);
        try {
          for (var ee2 = true, X2 = __asyncValues(Q2), ie2; ie2 = yield X2.next(), _ = ie2.done, !_; ee2 = true) {
            $ = ie2.value, ee2 = false;
            const ne2 = $;
            isBackupCodec(ne2) && (this.log.debug("publish ".concat(ne2, " for ").concat(j.videoTrack.sid), Object.assign(Object.assign({}, this.logContext), getLogContextFromTrack(j))), yield this.publishAdditionalCodecForTrack(j.videoTrack, ne2, j.options));
          }
        } catch (ne2) {
          I2 = { error: ne2 };
        } finally {
          try {
            !ee2 && !_ && (P2 = X2.return) && (yield P2.call(X2));
          } finally {
            if (I2)
              throw I2.error;
          }
        }
      } else
        p2.subscribedQualities.length > 0 && (yield (H2 = j.videoTrack) === null || H2 === void 0 ? void 0 : H2.setPublishingLayers(p2.subscribedQualities));
    }), this.handleLocalTrackUnpublished = (p2) => {
      const _ = this.trackPublications.get(p2.trackSid);
      if (!_) {
        this.log.warn("received unpublished event for unknown track", Object.assign(Object.assign({}, this.logContext), { trackSid: p2.trackSid }));
        return;
      }
      this.unpublishTrack(_.track);
    }, this.handleTrackEnded = (p2) => __awaiter(this, void 0, void 0, function* () {
      if (p2.source === Track.Source.ScreenShare || p2.source === Track.Source.ScreenShareAudio)
        this.log.debug("unpublishing local track due to TrackEnded", Object.assign(Object.assign({}, this.logContext), getLogContextFromTrack(p2))), this.unpublishTrack(p2);
      else if (p2.isUserProvided)
        yield p2.mute();
      else if (p2 instanceof LocalAudioTrack || p2 instanceof LocalVideoTrack)
        try {
          if (isWeb())
            try {
              const _ = yield navigator == null ? void 0 : navigator.permissions.query({
                // the permission query for camera and microphone currently not supported in Safari and Firefox
                // @ts-ignore
                name: p2.source === Track.Source.Camera ? "camera" : "microphone"
              });
              if (_ && _.state === "denied")
                throw this.log.warn("user has revoked access to ".concat(p2.source), Object.assign(Object.assign({}, this.logContext), getLogContextFromTrack(p2))), _.onchange = () => {
                  _.state !== "denied" && (p2.isMuted || p2.restartTrack(), _.onchange = null);
                }, new Error("GetUserMedia Permission denied");
            } catch {
            }
          p2.isMuted || (this.log.debug("track ended, attempting to use a different device", Object.assign(Object.assign({}, this.logContext), getLogContextFromTrack(p2))), yield p2.restartTrack());
        } catch {
          this.log.warn("could not restart track, muting instead", Object.assign(Object.assign({}, this.logContext), getLogContextFromTrack(p2))), yield p2.mute();
        }
    }), this.audioTrackPublications = /* @__PURE__ */ new Map(), this.videoTrackPublications = /* @__PURE__ */ new Map(), this.trackPublications = /* @__PURE__ */ new Map(), this.engine = l2, this.roomOptions = v2, this.setupEngine(l2), this.activeDeviceMap = /* @__PURE__ */ new Map();
  }
  get lastCameraError() {
    return this.cameraError;
  }
  get lastMicrophoneError() {
    return this.microphoneError;
  }
  get isE2EEEnabled() {
    return this.encryptionType !== Encryption_Type.NONE;
  }
  getTrackPublication(u2) {
    const c = super.getTrackPublication(u2);
    if (c)
      return c;
  }
  getTrackPublicationByName(u2) {
    const c = super.getTrackPublicationByName(u2);
    if (c)
      return c;
  }
  /**
  * @internal
  */
  setupEngine(u2) {
    this.engine = u2, this.engine.on(EngineEvent.RemoteMute, (c, l2) => {
      const v2 = this.trackPublications.get(c);
      !v2 || !v2.track || (l2 ? v2.mute() : v2.unmute());
    }), this.engine.on(EngineEvent.Connected, this.handleReconnected).on(EngineEvent.SignalRestarted, this.handleReconnected).on(EngineEvent.SignalResumed, this.handleReconnected).on(EngineEvent.Restarting, this.handleReconnecting).on(EngineEvent.Resuming, this.handleReconnecting).on(EngineEvent.LocalTrackUnpublished, this.handleLocalTrackUnpublished).on(EngineEvent.SubscribedQualityUpdate, this.handleSubscribedQualityUpdate).on(EngineEvent.Disconnected, this.handleDisconnected);
  }
  /**
  * Sets and updates the metadata of the local participant.
  * The change does not take immediate effect.
  * If successful, a `ParticipantEvent.MetadataChanged` event will be emitted on the local participant.
  * Note: this requires `canUpdateOwnMetadata` permission.
  * @param metadata
  */
  setMetadata(u2) {
    var c;
    this.engine.client.sendUpdateLocalMetadata(u2, (c = this.name) !== null && c !== void 0 ? c : "");
  }
  /**
  * Sets and updates the name of the local participant.
  * The change does not take immediate effect.
  * If successful, a `ParticipantEvent.ParticipantNameChanged` event will be emitted on the local participant.
  * Note: this requires `canUpdateOwnMetadata` permission.
  * @param metadata
  */
  setName(u2) {
    var c;
    this.engine.client.sendUpdateLocalMetadata((c = this.metadata) !== null && c !== void 0 ? c : "", u2);
  }
  /**
  * Enable or disable a participant's camera track.
  *
  * If a track has already published, it'll mute or unmute the track.
  * Resolves with a `LocalTrackPublication` instance if successful and `undefined` otherwise
  */
  setCameraEnabled(u2, c, l2) {
    return this.setTrackEnabled(Track.Source.Camera, u2, c, l2);
  }
  /**
  * Enable or disable a participant's microphone track.
  *
  * If a track has already published, it'll mute or unmute the track.
  * Resolves with a `LocalTrackPublication` instance if successful and `undefined` otherwise
  */
  setMicrophoneEnabled(u2, c, l2) {
    return this.setTrackEnabled(Track.Source.Microphone, u2, c, l2);
  }
  /**
  * Start or stop sharing a participant's screen
  * Resolves with a `LocalTrackPublication` instance if successful and `undefined` otherwise
  */
  setScreenShareEnabled(u2, c, l2) {
    return this.setTrackEnabled(Track.Source.ScreenShare, u2, c, l2);
  }
  /** @internal */
  setPermissions(u2) {
    const c = this.permissions, l2 = super.setPermissions(u2);
    return l2 && c && this.emit(ParticipantEvent.ParticipantPermissionsChanged, c), l2;
  }
  /** @internal */
  setE2EEEnabled(u2) {
    return __awaiter(this, void 0, void 0, function* () {
      this.encryptionType = u2 ? Encryption_Type.GCM : Encryption_Type.NONE, yield this.republishAllTracks(void 0, false);
    });
  }
  setTrackEnabled(u2, c, l2, v2) {
    var p2, _;
    return __awaiter(this, void 0, void 0, function* () {
      this.log.debug("setTrackEnabled", Object.assign(Object.assign({}, this.logContext), { source: u2, enabled: c }));
      let I2 = this.getTrackPublication(u2);
      if (c) {
        if (I2)
          yield I2.unmute();
        else {
          let P2;
          if (this.pendingPublishing.has(u2)) {
            this.log.info("skipping duplicate published source", Object.assign(Object.assign({}, this.logContext), { source: u2 }));
            return;
          }
          this.pendingPublishing.add(u2);
          try {
            switch (u2) {
              case Track.Source.Camera:
                P2 = yield this.createTracks({ video: (p2 = l2) !== null && p2 !== void 0 ? p2 : true });
                break;
              case Track.Source.Microphone:
                P2 = yield this.createTracks({ audio: (_ = l2) !== null && _ !== void 0 ? _ : true });
                break;
              case Track.Source.ScreenShare:
                P2 = yield this.createScreenTracks(Object.assign({}, l2));
                break;
              default:
                throw new TrackInvalidError(u2);
            }
            const $ = [];
            for (const H2 of P2)
              this.log.info("publishing track", Object.assign(Object.assign({}, this.logContext), getLogContextFromTrack(H2))), $.push(this.publishTrack(H2, v2));
            [I2] = yield Promise.all($);
          } catch ($) {
            throw P2 == null || P2.forEach((F2) => {
              F2.stop();
            }), $ instanceof Error && !($ instanceof TrackInvalidError) && this.emit(ParticipantEvent.MediaDevicesError, $), $;
          } finally {
            this.pendingPublishing.delete(u2);
          }
        }
      } else if (I2 && I2.track)
        if (u2 === Track.Source.ScreenShare) {
          I2 = yield this.unpublishTrack(I2.track);
          const P2 = this.getTrackPublication(Track.Source.ScreenShareAudio);
          P2 && P2.track && this.unpublishTrack(P2.track);
        } else
          yield I2.mute();
      return I2;
    });
  }
  /**
  * Publish both camera and microphone at the same time. This is useful for
  * displaying a single Permission Dialog box to the end user.
  */
  enableCameraAndMicrophone() {
    return __awaiter(this, void 0, void 0, function* () {
      if (!(this.pendingPublishing.has(Track.Source.Camera) || this.pendingPublishing.has(Track.Source.Microphone))) {
        this.pendingPublishing.add(Track.Source.Camera), this.pendingPublishing.add(Track.Source.Microphone);
        try {
          const u2 = yield this.createTracks({ audio: true, video: true });
          yield Promise.all(u2.map((c) => this.publishTrack(c)));
        } finally {
          this.pendingPublishing.delete(Track.Source.Camera), this.pendingPublishing.delete(Track.Source.Microphone);
        }
      }
    });
  }
  /**
  * Create local camera and/or microphone tracks
  * @param options
  * @returns
  */
  createTracks(u2) {
    var c, l2;
    return __awaiter(this, void 0, void 0, function* () {
      const v2 = mergeDefaultOptions(u2, (c = this.roomOptions) === null || c === void 0 ? void 0 : c.audioCaptureDefaults, (l2 = this.roomOptions) === null || l2 === void 0 ? void 0 : l2.videoCaptureDefaults), p2 = constraintsForOptions(v2);
      let _;
      try {
        _ = yield navigator.mediaDevices.getUserMedia(p2);
      } catch (I2) {
        throw I2 instanceof Error && (p2.audio && (this.microphoneError = I2), p2.video && (this.cameraError = I2)), I2;
      }
      return p2.audio && (this.microphoneError = void 0, this.emit(ParticipantEvent.AudioStreamAcquired)), p2.video && (this.cameraError = void 0), _.getTracks().map((I2) => {
        const P2 = I2.kind === "audio";
        P2 ? u2.audio : u2.video;
        let $;
        const F2 = P2 ? p2.audio : p2.video;
        typeof F2 != "boolean" && ($ = F2);
        const H2 = mediaTrackToLocalTrack(I2, $, { loggerName: this.roomOptions.loggerName, loggerContextCb: () => this.logContext });
        return H2.kind === Track.Kind.Video ? H2.source = Track.Source.Camera : H2.kind === Track.Kind.Audio && (H2.source = Track.Source.Microphone), H2.mediaStream = _, H2;
      });
    });
  }
  /**
  * Creates a screen capture tracks with getDisplayMedia().
  * A LocalVideoTrack is always created and returned.
  * If { audio: true }, and the browser supports audio capture, a LocalAudioTrack is also created.
  */
  createScreenTracks(u2) {
    return __awaiter(this, void 0, void 0, function* () {
      if (u2 === void 0 && (u2 = {}), navigator.mediaDevices.getDisplayMedia === void 0)
        throw new DeviceUnsupportedError("getDisplayMedia not supported");
      u2.resolution === void 0 && !isSafari17() && (u2.resolution = ScreenSharePresets.h1080fps30.resolution);
      const c = screenCaptureToDisplayMediaStreamOptions(u2), l2 = yield navigator.mediaDevices.getDisplayMedia(c), v2 = l2.getVideoTracks();
      if (v2.length === 0)
        throw new TrackInvalidError("no video track found");
      const p2 = new LocalVideoTrack(v2[0], void 0, false, { loggerName: this.roomOptions.loggerName, loggerContextCb: () => this.logContext });
      p2.source = Track.Source.ScreenShare, u2.contentHint && (p2.mediaStreamTrack.contentHint = u2.contentHint);
      const _ = [p2];
      if (l2.getAudioTracks().length > 0) {
        this.emit(ParticipantEvent.AudioStreamAcquired);
        const I2 = new LocalAudioTrack(l2.getAudioTracks()[0], void 0, false, this.audioContext, { loggerName: this.roomOptions.loggerName, loggerContextCb: () => this.logContext });
        I2.source = Track.Source.ScreenShareAudio, _.push(I2);
      }
      return _;
    });
  }
  /**
  * Publish a new track to the room
  * @param track
  * @param options
  */
  publishTrack(u2, c) {
    var l2, v2, p2, _;
    return __awaiter(this, void 0, void 0, function* () {
      yield (l2 = this.reconnectFuture) === null || l2 === void 0 ? void 0 : l2.promise, u2 instanceof LocalTrack && this.pendingPublishPromises.has(u2) && (yield this.pendingPublishPromises.get(u2));
      let I2;
      if (u2 instanceof MediaStreamTrack)
        I2 = u2.getConstraints();
      else {
        I2 = u2.constraints;
        let ee2;
        switch (u2.source) {
          case Track.Source.Microphone:
            ee2 = "audioinput";
            break;
          case Track.Source.Camera:
            ee2 = "videoinput";
        }
        ee2 && this.activeDeviceMap.has(ee2) && (I2 = Object.assign(Object.assign({}, I2), { deviceId: this.activeDeviceMap.get(ee2) }));
      }
      if (u2 instanceof MediaStreamTrack)
        switch (u2.kind) {
          case "audio":
            u2 = new LocalAudioTrack(u2, I2, true, this.audioContext, { loggerName: this.roomOptions.loggerName, loggerContextCb: () => this.logContext });
            break;
          case "video":
            u2 = new LocalVideoTrack(u2, I2, true, { loggerName: this.roomOptions.loggerName, loggerContextCb: () => this.logContext });
            break;
          default:
            throw new TrackInvalidError("unsupported MediaStreamTrack kind ".concat(u2.kind));
        }
      else
        u2.updateLoggerOptions({ loggerName: this.roomOptions.loggerName, loggerContextCb: () => this.logContext });
      u2 instanceof LocalAudioTrack && u2.setAudioContext(this.audioContext);
      let P2;
      if (this.trackPublications.forEach((ee2) => {
        ee2.track && ee2.track === u2 && (P2 = ee2);
      }), P2)
        return this.log.warn("track has already been published, skipping", Object.assign(Object.assign({}, this.logContext), getLogContextFromTrack(P2))), P2;
      const $ = "channelCount" in u2.mediaStreamTrack.getSettings() && // @ts-ignore `channelCount` on getSettings() is currently only available for Safari, but is generally the best way to determine a stereo track https://developer.mozilla.org/en-US/docs/Web/API/MediaTrackSettings/channelCount
      u2.mediaStreamTrack.getSettings().channelCount === 2 || u2.mediaStreamTrack.getConstraints().channelCount === 2, F2 = (v2 = c == null ? void 0 : c.forceStereo) !== null && v2 !== void 0 ? v2 : $;
      F2 && (c || (c = {}), c.dtx === void 0 && this.log.info("Opus DTX will be disabled for stereo tracks by default. Enable them explicitly to make it work.", Object.assign(Object.assign({}, this.logContext), getLogContextFromTrack(u2))), c.red === void 0 && this.log.info("Opus RED will be disabled for stereo tracks by default. Enable them explicitly to make it work."), (p2 = c.dtx) !== null && p2 !== void 0 || (c.dtx = false), (_ = c.red) !== null && _ !== void 0 || (c.red = false));
      const H2 = Object.assign(Object.assign({}, this.roomOptions.publishDefaults), c);
      isSafari() && this.roomOptions.e2ee && (this.log.info("End-to-end encryption is set up, simulcast publishing will be disabled on Safari", Object.assign({}, this.logContext)), H2.simulcast = false), H2.source && (u2.source = H2.source);
      const j = this.publish(u2, H2, F2);
      this.pendingPublishPromises.set(u2, j);
      try {
        return yield j;
      } catch (ee2) {
        throw ee2;
      } finally {
        this.pendingPublishPromises.delete(u2);
      }
    });
  }
  publish(u2, c, l2) {
    var v2, p2, _, I2, P2, $, F2, H2, j, ee2, X2, ie2;
    return __awaiter(this, void 0, void 0, function* () {
      Array.from(this.trackPublications.values()).find((ke2) => u2 instanceof LocalTrack && ke2.source === u2.source) && u2.source !== Track.Source.Unknown && this.log.info("publishing a second track with the same source: ".concat(u2.source), Object.assign(Object.assign({}, this.logContext), getLogContextFromTrack(u2))), c.stopMicTrackOnMute && u2 instanceof LocalAudioTrack && (u2.stopOnMute = true), u2.source === Track.Source.ScreenShare && isFireFox() && (c.simulcast = false), c.videoCodec === "av1" && !supportsAV1() && (c.videoCodec = void 0), c.videoCodec === "vp9" && !supportsVP9() && (c.videoCodec = void 0), c.videoCodec === void 0 && (c.videoCodec = defaultVideoCodec);
      const ne2 = c.videoCodec;
      u2.on(TrackEvent.Muted, this.onTrackMuted), u2.on(TrackEvent.Unmuted, this.onTrackUnmuted), u2.on(TrackEvent.Ended, this.handleTrackEnded), u2.on(TrackEvent.UpstreamPaused, this.onTrackUpstreamPaused), u2.on(TrackEvent.UpstreamResumed, this.onTrackUpstreamResumed);
      const Z2 = new AddTrackRequest({
        // get local track id for use during publishing
        cid: u2.mediaStreamTrack.id,
        name: c.name,
        type: Track.kindToProto(u2.kind),
        muted: u2.isMuted,
        source: Track.sourceToProto(u2.source),
        disableDtx: !(!((v2 = c.dtx) !== null && v2 !== void 0) || v2),
        encryption: this.encryptionType,
        stereo: l2,
        disableRed: this.isE2EEEnabled || !(!((p2 = c.red) !== null && p2 !== void 0) || p2),
        stream: c == null ? void 0 : c.stream
      });
      let de2;
      if (u2.kind === Track.Kind.Video) {
        let ke2 = { width: 0, height: 0 };
        try {
          ke2 = yield u2.waitForDimensions();
        } catch {
          const q2 = (I2 = (_ = this.roomOptions.videoCaptureDefaults) === null || _ === void 0 ? void 0 : _.resolution) !== null && I2 !== void 0 ? I2 : VideoPresets.h720.resolution;
          ke2 = { width: q2.width, height: q2.height }, this.log.error("could not determine track dimensions, using defaults", Object.assign(Object.assign(Object.assign({}, this.logContext), getLogContextFromTrack(u2)), { dims: ke2 }));
        }
        Z2.width = ke2.width, Z2.height = ke2.height, u2 instanceof LocalVideoTrack && (isSVCCodec(ne2) && (u2.source === Track.Source.ScreenShare && ne2 === "vp9" && (c.scalabilityMode = "L1T3"), c.scalabilityMode = (P2 = c.scalabilityMode) !== null && P2 !== void 0 ? P2 : "L3T3_KEY"), Z2.simulcastCodecs = [new SimulcastCodec({ codec: ne2, cid: u2.mediaStreamTrack.id })], c.backupCodec === true && (c.backupCodec = { codec: defaultVideoCodec }), c.backupCodec && ne2 !== c.backupCodec.codec && // TODO remove this once e2ee is supported for backup codecs
        Z2.encryption === Encryption_Type.NONE && (this.roomOptions.dynacast || (this.roomOptions.dynacast = true), Z2.simulcastCodecs.push(new SimulcastCodec({ codec: c.backupCodec.codec, cid: "" })))), de2 = computeVideoEncodings(u2.source === Track.Source.ScreenShare, Z2.width, Z2.height, c), Z2.layers = videoLayersFromEncodings(Z2.width, Z2.height, de2, isSVCCodec(c.videoCodec));
      } else
        u2.kind === Track.Kind.Audio && (de2 = [{ maxBitrate: ($ = c.audioPreset) === null || $ === void 0 ? void 0 : $.maxBitrate, priority: (H2 = (F2 = c.audioPreset) === null || F2 === void 0 ? void 0 : F2.priority) !== null && H2 !== void 0 ? H2 : "high", networkPriority: (ee2 = (j = c.audioPreset) === null || j === void 0 ? void 0 : j.priority) !== null && ee2 !== void 0 ? ee2 : "high" }]);
      if (!this.engine || this.engine.isClosed)
        throw new UnexpectedConnectionState("cannot publish track when not connected");
      const pe2 = yield this.engine.addTrack(Z2);
      let le2;
      if (pe2.codecs.forEach((ke2) => {
        le2 === void 0 && (le2 = ke2.mimeType);
      }), le2 && u2.kind === Track.Kind.Video) {
        const ke2 = mimeTypeToVideoCodecString(le2);
        ke2 !== ne2 && (this.log.debug("falling back to server selected codec", Object.assign(Object.assign(Object.assign({}, this.logContext), getLogContextFromTrack(u2)), { codec: ke2 })), c.videoCodec = ke2, de2 = computeVideoEncodings(u2.source === Track.Source.ScreenShare, Z2.width, Z2.height, c));
      }
      const be2 = new LocalTrackPublication(u2.kind, pe2, u2, { loggerName: this.roomOptions.loggerName, loggerContextCb: () => this.logContext });
      if (be2.options = c, u2.sid = pe2.sid, !this.engine.pcManager)
        throw new UnexpectedConnectionState("pcManager is not ready");
      if (this.log.debug("publishing ".concat(u2.kind, " with encodings"), Object.assign(Object.assign({}, this.logContext), { encodings: de2, trackInfo: pe2 })), u2.sender = yield this.engine.createSender(u2, c, de2), de2)
        if (isFireFox() && u2.kind === Track.Kind.Audio) {
          let ke2;
          for (const Te2 of this.engine.pcManager.publisher.getTransceivers())
            if (Te2.sender === u2.sender) {
              ke2 = Te2;
              break;
            }
          ke2 && this.engine.pcManager.publisher.setTrackCodecBitrate({ transceiver: ke2, codec: "opus", maxbr: !((X2 = de2[0]) === null || X2 === void 0) && X2.maxBitrate ? de2[0].maxBitrate / 1e3 : 0 });
        } else
          u2.codec && isSVCCodec(u2.codec) && !((ie2 = de2[0]) === null || ie2 === void 0) && ie2.maxBitrate && this.engine.pcManager.publisher.setTrackCodecBitrate({ cid: Z2.cid, codec: u2.codec, maxbr: de2[0].maxBitrate / 1e3 });
      return yield this.engine.negotiate(), u2 instanceof LocalVideoTrack ? u2.startMonitor(this.engine.client) : u2 instanceof LocalAudioTrack && u2.startMonitor(), this.addTrackPublication(be2), this.emit(ParticipantEvent.LocalTrackPublished, be2), be2;
    });
  }
  get isLocal() {
    return true;
  }
  /** @internal
  * publish additional codec to existing track
  */
  publishAdditionalCodecForTrack(u2, c, l2) {
    var v2;
    return __awaiter(this, void 0, void 0, function* () {
      if (this.encryptionType !== Encryption_Type.NONE)
        return;
      let p2;
      if (this.trackPublications.forEach((H2) => {
        H2.track && H2.track === u2 && (p2 = H2);
      }), !p2)
        throw new TrackInvalidError("track is not published");
      if (!(u2 instanceof LocalVideoTrack))
        throw new TrackInvalidError("track is not a video track");
      const _ = Object.assign(Object.assign({}, (v2 = this.roomOptions) === null || v2 === void 0 ? void 0 : v2.publishDefaults), l2), I2 = computeTrackBackupEncodings(u2, c, _);
      if (!I2) {
        this.log.info("backup codec has been disabled, ignoring request to add additional codec for track", Object.assign(Object.assign({}, this.logContext), getLogContextFromTrack(u2)));
        return;
      }
      const P2 = u2.addSimulcastTrack(c, I2);
      if (!P2)
        return;
      const $ = new AddTrackRequest({ cid: P2.mediaStreamTrack.id, type: Track.kindToProto(u2.kind), muted: u2.isMuted, source: Track.sourceToProto(u2.source), sid: u2.sid, simulcastCodecs: [{ codec: _.videoCodec, cid: P2.mediaStreamTrack.id }] });
      if ($.layers = videoLayersFromEncodings($.width, $.height, I2), !this.engine || this.engine.isClosed)
        throw new UnexpectedConnectionState("cannot publish track when not connected");
      const F2 = yield this.engine.addTrack($);
      yield this.engine.createSimulcastSender(u2, P2, _, I2), yield this.engine.negotiate(), this.log.debug("published ".concat(c, " for track ").concat(u2.sid), Object.assign(Object.assign({}, this.logContext), { encodings: I2, trackInfo: F2 }));
    });
  }
  unpublishTrack(u2, c) {
    var l2, v2;
    return __awaiter(this, void 0, void 0, function* () {
      const p2 = this.getPublicationForTrack(u2), _ = p2 ? getLogContextFromTrack(p2) : void 0;
      if (this.log.debug("unpublishing track", Object.assign(Object.assign({}, this.logContext), _)), !p2 || !p2.track) {
        this.log.warn("track was not unpublished because no publication was found", Object.assign(Object.assign({}, this.logContext), _));
        return;
      }
      u2 = p2.track, u2.off(TrackEvent.Muted, this.onTrackMuted), u2.off(TrackEvent.Unmuted, this.onTrackUnmuted), u2.off(TrackEvent.Ended, this.handleTrackEnded), u2.off(TrackEvent.UpstreamPaused, this.onTrackUpstreamPaused), u2.off(TrackEvent.UpstreamResumed, this.onTrackUpstreamResumed), c === void 0 && (c = (v2 = (l2 = this.roomOptions) === null || l2 === void 0 ? void 0 : l2.stopLocalTrackOnUnpublish) !== null && v2 !== void 0 ? v2 : true), c && u2.stop();
      let I2 = false;
      const P2 = u2.sender;
      if (u2.sender = void 0, this.engine.pcManager && this.engine.pcManager.currentState < PCTransportState.FAILED && P2)
        try {
          for (const $ of this.engine.pcManager.publisher.getTransceivers())
            $.sender === P2 && ($.direction = "inactive", I2 = true);
          if (this.engine.removeTrack(P2) && (I2 = true), u2 instanceof LocalVideoTrack) {
            for (const [, $] of u2.simulcastCodecs)
              $.sender && (this.engine.removeTrack($.sender) && (I2 = true), $.sender = void 0);
            u2.simulcastCodecs.clear();
          }
        } catch ($) {
          this.log.warn("failed to unpublish track", Object.assign(Object.assign(Object.assign({}, this.logContext), _), { error: $ }));
        }
      switch (this.trackPublications.delete(p2.trackSid), p2.kind) {
        case Track.Kind.Audio:
          this.audioTrackPublications.delete(p2.trackSid);
          break;
        case Track.Kind.Video:
          this.videoTrackPublications.delete(p2.trackSid);
          break;
      }
      return this.emit(ParticipantEvent.LocalTrackUnpublished, p2), p2.setTrack(void 0), I2 && (yield this.engine.negotiate()), p2;
    });
  }
  unpublishTracks(u2) {
    return __awaiter(this, void 0, void 0, function* () {
      return (yield Promise.all(u2.map((l2) => this.unpublishTrack(l2)))).filter((l2) => l2 instanceof LocalTrackPublication);
    });
  }
  republishAllTracks(u2) {
    let c = arguments.length > 1 && arguments[1] !== void 0 ? arguments[1] : true;
    return __awaiter(this, void 0, void 0, function* () {
      const l2 = [];
      this.trackPublications.forEach((v2) => {
        v2.track && (u2 && (v2.options = Object.assign(Object.assign({}, v2.options), u2)), l2.push(v2));
      }), yield Promise.all(l2.map((v2) => __awaiter(this, void 0, void 0, function* () {
        const p2 = v2.track;
        yield this.unpublishTrack(p2, false), c && !p2.isMuted && p2.source !== Track.Source.ScreenShare && p2.source !== Track.Source.ScreenShareAudio && (p2 instanceof LocalAudioTrack || p2 instanceof LocalVideoTrack) && !p2.isUserProvided && (this.log.debug("restarting existing track", Object.assign(Object.assign({}, this.logContext), { track: v2.trackSid })), yield p2.restartTrack()), yield this.publishTrack(p2, v2.options);
      })));
    });
  }
  /**
  * Publish a new data payload to the room. Data will be forwarded to each
  * participant in the room if the destination field in publishOptions is empty
  *
  * @param data Uint8Array of the payload. To send string data, use TextEncoder.encode
  * @param options optionally specify a `reliable`, `topic` and `destination`
  */
  publishData(u2) {
    let c = arguments.length > 1 && arguments[1] !== void 0 ? arguments[1] : {};
    return __awaiter(this, void 0, void 0, function* () {
      const l2 = c.reliable ? DataPacket_Kind.RELIABLE : DataPacket_Kind.LOSSY, v2 = c.destinationIdentities, p2 = c.topic, _ = new DataPacket({ kind: l2, value: { case: "user", value: new UserPacket({ participantIdentity: this.identity, payload: u2, destinationIdentities: v2, topic: p2 }) } });
      yield this.engine.sendDataPacket(_, l2);
    });
  }
  /**
  * Control who can subscribe to LocalParticipant's published tracks.
  *
  * By default, all participants can subscribe. This allows fine-grained control over
  * who is able to subscribe at a participant and track level.
  *
  * Note: if access is given at a track-level (i.e. both [allParticipantsAllowed] and
  * [ParticipantTrackPermission.allTracksAllowed] are false), any newer published tracks
  * will not grant permissions to any participants and will require a subsequent
  * permissions update to allow subscription.
  *
  * @param allParticipantsAllowed Allows all participants to subscribe all tracks.
  *  Takes precedence over [[participantTrackPermissions]] if set to true.
  *  By default this is set to true.
  * @param participantTrackPermissions Full list of individual permissions per
  *  participant/track. Any omitted participants will not receive any permissions.
  */
  setTrackSubscriptionPermissions(u2) {
    let c = arguments.length > 1 && arguments[1] !== void 0 ? arguments[1] : [];
    this.participantTrackPermissions = c, this.allParticipantsAllowedToSubscribe = u2, this.engine.client.isDisconnected || this.updateTrackSubscriptionPermissions();
  }
  /** @internal */
  updateInfo(u2) {
    return u2.sid !== this.sid || !super.updateInfo(u2) ? false : (u2.tracks.forEach((c) => {
      var l2, v2;
      const p2 = this.trackPublications.get(c.sid);
      if (p2) {
        const _ = p2.isMuted || ((v2 = (l2 = p2.track) === null || l2 === void 0 ? void 0 : l2.isUpstreamPaused) !== null && v2 !== void 0 ? v2 : false);
        _ !== c.muted && (this.log.debug("updating server mute state after reconcile", Object.assign(Object.assign(Object.assign({}, this.logContext), getLogContextFromTrack(p2)), { mutedOnServer: _ })), this.engine.client.sendMuteTrack(c.sid, _));
      }
    }), true);
  }
  getPublicationForTrack(u2) {
    let c;
    return this.trackPublications.forEach((l2) => {
      const v2 = l2.track;
      v2 && (u2 instanceof MediaStreamTrack ? (v2 instanceof LocalAudioTrack || v2 instanceof LocalVideoTrack) && v2.mediaStreamTrack === u2 && (c = l2) : u2 === v2 && (c = l2));
    }), c;
  }
}
class RemoteTrackPublication extends TrackPublication {
  constructor(u2, c, l2, v2) {
    super(u2, c.sid, c.name, v2), this.track = void 0, this.allowed = true, this.disabled = false, this.currentVideoQuality = VideoQuality.HIGH, this.handleEnded = (p2) => {
      this.setTrack(void 0), this.emit(TrackEvent.Ended, p2);
    }, this.handleVisibilityChange = (p2) => {
      this.log.debug("adaptivestream video visibility ".concat(this.trackSid, ", visible=").concat(p2), this.logContext), this.disabled = !p2, this.emitTrackUpdate();
    }, this.handleVideoDimensionsChange = (p2) => {
      this.log.debug("adaptivestream video dimensions ".concat(p2.width, "x").concat(p2.height), this.logContext), this.videoDimensions = p2, this.emitTrackUpdate();
    }, this.subscribed = l2, this.updateInfo(c);
  }
  /**
  * Subscribe or unsubscribe to this remote track
  * @param subscribed true to subscribe to a track, false to unsubscribe
  */
  setSubscribed(u2) {
    const c = this.subscriptionStatus, l2 = this.permissionStatus;
    this.subscribed = u2, u2 && (this.allowed = true);
    const v2 = new UpdateSubscription({ trackSids: [this.trackSid], subscribe: this.subscribed, participantTracks: [new ParticipantTracks({
      // sending an empty participant id since TrackPublication doesn't keep it
      // this is filled in by the participant that receives this message
      participantSid: "",
      trackSids: [this.trackSid]
    })] });
    this.emit(TrackEvent.UpdateSubscription, v2), this.emitSubscriptionUpdateIfChanged(c), this.emitPermissionUpdateIfChanged(l2);
  }
  get subscriptionStatus() {
    return this.subscribed === false ? TrackPublication.SubscriptionStatus.Unsubscribed : super.isSubscribed ? TrackPublication.SubscriptionStatus.Subscribed : TrackPublication.SubscriptionStatus.Desired;
  }
  get permissionStatus() {
    return this.allowed ? TrackPublication.PermissionStatus.Allowed : TrackPublication.PermissionStatus.NotAllowed;
  }
  /**
  * Returns true if track is subscribed, and ready for playback
  */
  get isSubscribed() {
    return this.subscribed === false ? false : super.isSubscribed;
  }
  // returns client's desire to subscribe to a track, also true if autoSubscribe is enabled
  get isDesired() {
    return this.subscribed !== false;
  }
  get isEnabled() {
    return !this.disabled;
  }
  /**
  * disable server from sending down data for this track. this is useful when
  * the participant is off screen, you may disable streaming down their video
  * to reduce bandwidth requirements
  * @param enabled
  */
  setEnabled(u2) {
    !this.isManualOperationAllowed() || this.disabled === !u2 || (this.disabled = !u2, this.emitTrackUpdate());
  }
  /**
  * for tracks that support simulcasting, adjust subscribed quality
  *
  * This indicates the highest quality the client can accept. if network
  * bandwidth does not allow, server will automatically reduce quality to
  * optimize for uninterrupted video
  */
  setVideoQuality(u2) {
    !this.isManualOperationAllowed() || this.currentVideoQuality === u2 || (this.currentVideoQuality = u2, this.videoDimensions = void 0, this.emitTrackUpdate());
  }
  setVideoDimensions(u2) {
    var c, l2;
    this.isManualOperationAllowed() && (((c = this.videoDimensions) === null || c === void 0 ? void 0 : c.width) === u2.width && ((l2 = this.videoDimensions) === null || l2 === void 0 ? void 0 : l2.height) === u2.height || (this.track instanceof RemoteVideoTrack && (this.videoDimensions = u2), this.currentVideoQuality = void 0, this.emitTrackUpdate()));
  }
  setVideoFPS(u2) {
    this.isManualOperationAllowed() && this.track instanceof RemoteVideoTrack && this.fps !== u2 && (this.fps = u2, this.emitTrackUpdate());
  }
  get videoQuality() {
    return this.currentVideoQuality;
  }
  /** @internal */
  setTrack(u2) {
    const c = this.subscriptionStatus, l2 = this.permissionStatus, v2 = this.track;
    v2 !== u2 && (v2 && (v2.off(TrackEvent.VideoDimensionsChanged, this.handleVideoDimensionsChange), v2.off(TrackEvent.VisibilityChanged, this.handleVisibilityChange), v2.off(TrackEvent.Ended, this.handleEnded), v2.detach(), v2.stopMonitor(), this.emit(TrackEvent.Unsubscribed, v2)), super.setTrack(u2), u2 && (u2.sid = this.trackSid, u2.on(TrackEvent.VideoDimensionsChanged, this.handleVideoDimensionsChange), u2.on(TrackEvent.VisibilityChanged, this.handleVisibilityChange), u2.on(TrackEvent.Ended, this.handleEnded), this.emit(TrackEvent.Subscribed, u2)), this.emitPermissionUpdateIfChanged(l2), this.emitSubscriptionUpdateIfChanged(c));
  }
  /** @internal */
  setAllowed(u2) {
    const c = this.subscriptionStatus, l2 = this.permissionStatus;
    this.allowed = u2, this.emitPermissionUpdateIfChanged(l2), this.emitSubscriptionUpdateIfChanged(c);
  }
  /** @internal */
  setSubscriptionError(u2) {
    this.emit(TrackEvent.SubscriptionFailed, u2);
  }
  /** @internal */
  updateInfo(u2) {
    super.updateInfo(u2);
    const c = this.metadataMuted;
    this.metadataMuted = u2.muted, this.track ? this.track.setMuted(u2.muted) : c !== u2.muted && this.emit(u2.muted ? TrackEvent.Muted : TrackEvent.Unmuted);
  }
  emitSubscriptionUpdateIfChanged(u2) {
    const c = this.subscriptionStatus;
    u2 !== c && this.emit(TrackEvent.SubscriptionStatusChanged, c, u2);
  }
  emitPermissionUpdateIfChanged(u2) {
    this.permissionStatus !== u2 && this.emit(TrackEvent.SubscriptionPermissionChanged, this.permissionStatus, u2);
  }
  isManualOperationAllowed() {
    return this.kind === Track.Kind.Video && this.isAdaptiveStream ? (this.log.warn("adaptive stream is enabled, cannot change video track settings", this.logContext), false) : this.isDesired ? true : (this.log.warn("cannot update track settings when not subscribed", this.logContext), false);
  }
  get isAdaptiveStream() {
    return this.track instanceof RemoteVideoTrack && this.track.isAdaptiveStream;
  }
  /* @internal */
  emitTrackUpdate() {
    const u2 = new UpdateTrackSettings({ trackSids: [this.trackSid], disabled: this.disabled, fps: this.fps });
    this.videoDimensions ? (u2.width = Math.ceil(this.videoDimensions.width), u2.height = Math.ceil(this.videoDimensions.height)) : this.currentVideoQuality !== void 0 ? u2.quality = this.currentVideoQuality : u2.quality = VideoQuality.HIGH, this.emit(TrackEvent.UpdateSettings, u2);
  }
}
class RemoteParticipant extends Participant$1 {
  /** @internal */
  static fromParticipantInfo(u2, c) {
    return new RemoteParticipant(u2, c.sid, c.identity, c.name, c.metadata);
  }
  /** @internal */
  constructor(u2, c, l2, v2, p2, _) {
    super(c, l2 || "", v2, p2, _), this.signalClient = u2, this.trackPublications = /* @__PURE__ */ new Map(), this.audioTrackPublications = /* @__PURE__ */ new Map(), this.videoTrackPublications = /* @__PURE__ */ new Map(), this.volumeMap = /* @__PURE__ */ new Map();
  }
  addTrackPublication(u2) {
    super.addTrackPublication(u2), u2.on(TrackEvent.UpdateSettings, (c) => {
      this.log.debug("send update settings", Object.assign(Object.assign({}, this.logContext), getLogContextFromTrack(u2))), this.signalClient.sendUpdateTrackSettings(c);
    }), u2.on(TrackEvent.UpdateSubscription, (c) => {
      c.participantTracks.forEach((l2) => {
        l2.participantSid = this.sid;
      }), this.signalClient.sendUpdateSubscription(c);
    }), u2.on(TrackEvent.SubscriptionPermissionChanged, (c) => {
      this.emit(ParticipantEvent.TrackSubscriptionPermissionChanged, u2, c);
    }), u2.on(TrackEvent.SubscriptionStatusChanged, (c) => {
      this.emit(ParticipantEvent.TrackSubscriptionStatusChanged, u2, c);
    }), u2.on(TrackEvent.Subscribed, (c) => {
      this.emit(ParticipantEvent.TrackSubscribed, c, u2);
    }), u2.on(TrackEvent.Unsubscribed, (c) => {
      this.emit(ParticipantEvent.TrackUnsubscribed, c, u2);
    }), u2.on(TrackEvent.SubscriptionFailed, (c) => {
      this.emit(ParticipantEvent.TrackSubscriptionFailed, u2.trackSid, c);
    });
  }
  getTrackPublication(u2) {
    const c = super.getTrackPublication(u2);
    if (c)
      return c;
  }
  getTrackPublicationByName(u2) {
    const c = super.getTrackPublicationByName(u2);
    if (c)
      return c;
  }
  /**
  * sets the volume on the participant's audio track
  * by default, this affects the microphone publication
  * a different source can be passed in as a second argument
  * if no track exists the volume will be applied when the microphone track is added
  */
  setVolume(u2) {
    let c = arguments.length > 1 && arguments[1] !== void 0 ? arguments[1] : Track.Source.Microphone;
    this.volumeMap.set(c, u2);
    const l2 = this.getTrackPublication(c);
    l2 && l2.track && l2.track.setVolume(u2);
  }
  /**
  * gets the volume on the participant's microphone track
  */
  getVolume() {
    let u2 = arguments.length > 0 && arguments[0] !== void 0 ? arguments[0] : Track.Source.Microphone;
    const c = this.getTrackPublication(u2);
    return c && c.track ? c.track.getVolume() : this.volumeMap.get(u2);
  }
  /** @internal */
  addSubscribedMediaTrack(u2, c, l2, v2, p2, _) {
    let I2 = this.getTrackPublicationBySid(c);
    if (I2 || c.startsWith("TR") || this.trackPublications.forEach((F2) => {
      !I2 && u2.kind === F2.kind.toString() && (I2 = F2);
    }), !I2) {
      if (_ === 0) {
        this.log.error("could not find published track", Object.assign(Object.assign({}, this.logContext), { trackSid: c })), this.emit(ParticipantEvent.TrackSubscriptionFailed, c);
        return;
      }
      _ === void 0 && (_ = 20), setTimeout(() => {
        this.addSubscribedMediaTrack(u2, c, l2, v2, p2, _ - 1);
      }, 150);
      return;
    }
    if (u2.readyState === "ended") {
      this.log.error("unable to subscribe because MediaStreamTrack is ended. Do not call MediaStreamTrack.stop()", Object.assign(Object.assign({}, this.logContext), getLogContextFromTrack(I2))), this.emit(ParticipantEvent.TrackSubscriptionFailed, c);
      return;
    }
    const P2 = u2.kind === "video";
    let $;
    return P2 ? $ = new RemoteVideoTrack(u2, c, v2, p2) : $ = new RemoteAudioTrack(u2, c, v2, this.audioContext, this.audioOutput), $.source = I2.source, $.isMuted = I2.isMuted, $.setMediaStream(l2), $.start(), I2.setTrack($), this.volumeMap.has(I2.source) && $ instanceof RemoteAudioTrack && $.setVolume(this.volumeMap.get(I2.source)), I2;
  }
  /** @internal */
  get hasMetadata() {
    return !!this.participantInfo;
  }
  /**
  * @internal
  */
  getTrackPublicationBySid(u2) {
    return this.trackPublications.get(u2);
  }
  /** @internal */
  updateInfo(u2) {
    if (!super.updateInfo(u2))
      return false;
    const c = /* @__PURE__ */ new Map(), l2 = /* @__PURE__ */ new Map();
    return u2.tracks.forEach((v2) => {
      var p2, _;
      let I2 = this.getTrackPublicationBySid(v2.sid);
      if (I2)
        I2.updateInfo(v2);
      else {
        const P2 = Track.kindFromProto(v2.type);
        if (!P2)
          return;
        I2 = new RemoteTrackPublication(P2, v2, (p2 = this.signalClient.connectOptions) === null || p2 === void 0 ? void 0 : p2.autoSubscribe, { loggerContextCb: () => this.logContext, loggerName: (_ = this.loggerOptions) === null || _ === void 0 ? void 0 : _.loggerName }), I2.updateInfo(v2), l2.set(v2.sid, I2);
        const $ = Array.from(this.trackPublications.values()).find((F2) => F2.source === (I2 == null ? void 0 : I2.source));
        $ && I2.source !== Track.Source.Unknown && this.log.debug("received a second track publication for ".concat(this.identity, " with the same source: ").concat(I2.source), Object.assign(Object.assign({}, this.logContext), { oldTrack: getLogContextFromTrack($), newTrack: getLogContextFromTrack(I2) })), this.addTrackPublication(I2);
      }
      c.set(v2.sid, I2);
    }), this.trackPublications.forEach((v2) => {
      c.has(v2.trackSid) || (this.log.trace("detected removed track on remote participant, unpublishing", Object.assign(Object.assign({}, this.logContext), getLogContextFromTrack(v2))), this.unpublishTrack(v2.trackSid, true));
    }), l2.forEach((v2) => {
      this.emit(ParticipantEvent.TrackPublished, v2);
    }), true;
  }
  /** @internal */
  unpublishTrack(u2, c) {
    const l2 = this.trackPublications.get(u2);
    if (!l2)
      return;
    const { track: v2 } = l2;
    switch (v2 && (v2.stop(), l2.setTrack(void 0)), this.trackPublications.delete(u2), l2.kind) {
      case Track.Kind.Audio:
        this.audioTrackPublications.delete(u2);
        break;
      case Track.Kind.Video:
        this.videoTrackPublications.delete(u2);
        break;
    }
    c && this.emit(ParticipantEvent.TrackUnpublished, l2);
  }
  /**
  * @internal
  */
  setAudioOutput(u2) {
    return __awaiter(this, void 0, void 0, function* () {
      this.audioOutput = u2;
      const c = [];
      this.audioTrackPublications.forEach((l2) => {
        var v2;
        l2.track instanceof RemoteAudioTrack && c.push(l2.track.setSinkId((v2 = u2.deviceId) !== null && v2 !== void 0 ? v2 : "default"));
      }), yield Promise.all(c);
    });
  }
  /** @internal */
  emit(u2) {
    for (var c = arguments.length, l2 = new Array(c > 1 ? c - 1 : 0), v2 = 1; v2 < c; v2++)
      l2[v2 - 1] = arguments[v2];
    return this.log.trace("participant event", Object.assign(Object.assign({}, this.logContext), { event: u2, args: l2 })), super.emit(u2, ...l2);
  }
}
var ConnectionState;
(function(a420) {
  a420.Disconnected = "disconnected", a420.Connecting = "connecting", a420.Connected = "connected", a420.Reconnecting = "reconnecting";
})(ConnectionState || (ConnectionState = {}));
const connectionReconcileFrequency = 2 * 1e3;
let Room$2 = class Room2 extends eventsExports.EventEmitter {
  /**
  * Creates a new Room, the primary construct for a LiveKit session.
  * @param options
  */
  constructor(u2) {
    var c, l2, v2;
    super(), c = this, this.state = ConnectionState.Disconnected, this.activeSpeakers = [], this.isE2EEEnabled = false, this.audioEnabled = true, this.isVideoPlaybackBlocked = false, this.log = livekitLogger, this.bufferedEvents = [], this.isResuming = false, this.connect = (p2, _, I2) => __awaiter(this, void 0, void 0, function* () {
      var P2;
      const $ = yield this.disconnectLock.lock();
      if (this.state === ConnectionState.Connected)
        return this.log.info("already connected to room ".concat(this.name), this.logContext), $(), Promise.resolve();
      if (this.connectFuture)
        return $(), this.connectFuture.promise;
      this.setAndEmitConnectionState(ConnectionState.Connecting), ((P2 = this.regionUrlProvider) === null || P2 === void 0 ? void 0 : P2.getServerUrl().toString()) !== p2 && (this.regionUrl = void 0, this.regionUrlProvider = void 0), isCloud(new URL(p2)) && (this.regionUrlProvider === void 0 ? this.regionUrlProvider = new RegionUrlProvider(p2, _) : this.regionUrlProvider.updateToken(_), this.regionUrlProvider.fetchRegionSettings().catch((j) => {
        this.log.warn("could not fetch region settings", Object.assign(Object.assign({}, this.logContext), { error: j }));
      }));
      const F2 = (j, ee2, X2) => __awaiter(this, void 0, void 0, function* () {
        var ie2;
        this.abortController && this.abortController.abort();
        const Q2 = new AbortController();
        this.abortController = Q2, $ == null || $();
        try {
          yield this.attemptConnection(X2 ?? p2, _, I2, Q2), this.abortController = void 0, j();
        } catch (ne2) {
          if (this.regionUrlProvider && ne2 instanceof ConnectionError && ne2.reason !== 3 && ne2.reason !== 0) {
            let Z2 = null;
            try {
              Z2 = yield this.regionUrlProvider.getNextBestRegionUrl((ie2 = this.abortController) === null || ie2 === void 0 ? void 0 : ie2.signal);
            } catch (de2) {
              if (de2 instanceof ConnectionError && (de2.status === 401 || de2.reason === 3)) {
                this.handleDisconnect(this.options.stopLocalTrackOnUnpublish), ee2(de2);
                return;
              }
            }
            Z2 ? (this.log.info("Initial connection failed with ConnectionError: ".concat(ne2.message, ". Retrying with another region: ").concat(Z2), this.logContext), yield F2(j, ee2, Z2)) : (this.handleDisconnect(this.options.stopLocalTrackOnUnpublish), ee2(ne2));
          } else
            this.handleDisconnect(this.options.stopLocalTrackOnUnpublish), ee2(ne2);
        }
      }), H2 = this.regionUrl;
      return this.regionUrl = void 0, this.connectFuture = new Future((j, ee2) => {
        F2(j, ee2, H2);
      }, () => {
        this.clearConnectionFutures();
      }), this.connectFuture.promise;
    }), this.connectSignal = (p2, _, I2, P2, $, F2) => __awaiter(this, void 0, void 0, function* () {
      var H2, j, ee2;
      const X2 = yield I2.join(p2, _, { autoSubscribe: P2.autoSubscribe, adaptiveStream: typeof $.adaptiveStream == "object" ? true : $.adaptiveStream, maxRetries: P2.maxRetries, e2eeEnabled: !!this.e2eeManager, websocketTimeout: P2.websocketTimeout }, F2.signal);
      let ie2 = X2.serverInfo;
      if (ie2 || (ie2 = { version: X2.serverVersion, region: X2.serverRegion }), this.log.debug("connected to Livekit Server ".concat(Object.entries(ie2).map((Q2) => {
        let [ne2, Z2] = Q2;
        return "".concat(ne2, ": ").concat(Z2);
      }).join(", ")), { room: (H2 = X2.room) === null || H2 === void 0 ? void 0 : H2.name, roomSid: (j = X2.room) === null || j === void 0 ? void 0 : j.sid, identity: (ee2 = X2.participant) === null || ee2 === void 0 ? void 0 : ee2.identity }), !X2.serverVersion)
        throw new UnsupportedServer("unknown server version");
      return X2.serverVersion === "0.15.1" && this.options.dynacast && (this.log.debug("disabling dynacast due to server version", this.logContext), $.dynacast = false), X2;
    }), this.applyJoinResponse = (p2) => {
      const _ = p2.participant;
      this.localParticipant.sid = _.sid, this.localParticipant.identity = _.identity, this.handleParticipantUpdates([_, ...p2.otherParticipants]), p2.room && this.handleRoomUpdate(p2.room), this.options.e2ee && this.e2eeManager && this.e2eeManager.setSifTrailer(p2.sifTrailer);
    }, this.attemptConnection = (p2, _, I2, P2) => __awaiter(this, void 0, void 0, function* () {
      var $, F2, H2;
      this.state === ConnectionState.Reconnecting || this.isResuming || !(($ = this.engine) === null || $ === void 0) && $.pendingReconnect ? (this.log.info("Reconnection attempt replaced by new connection attempt", this.logContext), this.recreateEngine()) : this.maybeCreateEngine(), !((F2 = this.regionUrlProvider) === null || F2 === void 0) && F2.isCloud() && this.engine.setRegionUrlProvider(this.regionUrlProvider), this.acquireAudioContext(), this.connOptions = Object.assign(Object.assign({}, roomConnectOptionDefaults), I2), this.connOptions.rtcConfig && (this.engine.rtcConfig = this.connOptions.rtcConfig), this.connOptions.peerConnectionTimeout && (this.engine.peerConnectionTimeout = this.connOptions.peerConnectionTimeout);
      try {
        const j = yield this.connectSignal(p2, _, this.engine, this.connOptions, this.options, P2);
        this.applyJoinResponse(j), this.setupLocalParticipantEvents(), this.emit(RoomEvent.SignalConnected);
      } catch (j) {
        yield this.engine.close(), this.recreateEngine();
        const ee2 = new ConnectionError("could not establish signal connection");
        throw j instanceof Error && (ee2.message = "".concat(ee2.message, ": ").concat(j.message)), j instanceof ConnectionError && (ee2.reason = j.reason, ee2.status = j.status), this.log.debug("error trying to establish signal connection", Object.assign(Object.assign({}, this.logContext), { error: j })), ee2;
      }
      if (P2.signal.aborted)
        throw yield this.engine.close(), this.recreateEngine(), new ConnectionError("Connection attempt aborted");
      try {
        yield this.engine.waitForPCInitialConnection(this.connOptions.peerConnectionTimeout, P2);
      } catch (j) {
        throw yield this.engine.close(), this.recreateEngine(), j;
      }
      isWeb() && this.options.disconnectOnPageLeave && (window.addEventListener("pagehide", this.onPageLeave), window.addEventListener("beforeunload", this.onPageLeave)), isWeb() && (document.addEventListener("freeze", this.onPageLeave), (H2 = navigator.mediaDevices) === null || H2 === void 0 || H2.addEventListener("devicechange", this.handleDeviceChange)), this.setAndEmitConnectionState(ConnectionState.Connected), this.emit(RoomEvent.Connected), this.registerConnectionReconcile();
    }), this.disconnect = function() {
      let p2 = arguments.length > 0 && arguments[0] !== void 0 ? arguments[0] : true;
      return __awaiter(c, void 0, void 0, function* () {
        var _, I2, P2, $;
        const F2 = yield this.disconnectLock.lock();
        try {
          if (this.state === ConnectionState.Disconnected) {
            this.log.debug("already disconnected", this.logContext);
            return;
          }
          this.log.info("disconnect from room", Object.assign({}, this.logContext)), (this.state === ConnectionState.Connecting || this.state === ConnectionState.Reconnecting || this.isResuming) && (this.log.warn("abort connection attempt", this.logContext), (_ = this.abortController) === null || _ === void 0 || _.abort(), (P2 = (I2 = this.connectFuture) === null || I2 === void 0 ? void 0 : I2.reject) === null || P2 === void 0 || P2.call(I2, new ConnectionError("Client initiated disconnect")), this.connectFuture = void 0), !(($ = this.engine) === null || $ === void 0) && $.client.isDisconnected || (yield this.engine.client.sendLeave()), this.engine && (yield this.engine.close()), this.handleDisconnect(p2, DisconnectReason.CLIENT_INITIATED), this.engine = void 0;
        } finally {
          F2();
        }
      });
    }, this.onPageLeave = () => __awaiter(this, void 0, void 0, function* () {
      yield this.disconnect();
    }), this.startAudio = () => __awaiter(this, void 0, void 0, function* () {
      const p2 = [], _ = getBrowser();
      if (_ && _.os === "iOS") {
        const I2 = "livekit-dummy-audio-el";
        let P2 = document.getElementById(I2);
        if (!P2) {
          P2 = document.createElement("audio"), P2.id = I2, P2.autoplay = true, P2.hidden = true;
          const $ = getEmptyAudioStreamTrack();
          $.enabled = true;
          const F2 = new MediaStream([$]);
          P2.srcObject = F2, document.addEventListener("visibilitychange", () => {
            P2 && (P2.srcObject = document.hidden ? null : F2, document.hidden || (this.log.debug("page visible again, triggering startAudio to resume playback and update playback status", this.logContext), this.startAudio()));
          }), document.body.append(P2), this.once(RoomEvent.Disconnected, () => {
            P2 == null || P2.remove(), P2 = null;
          });
        }
        p2.push(P2);
      }
      this.remoteParticipants.forEach((I2) => {
        I2.audioTrackPublications.forEach((P2) => {
          P2.track && P2.track.attachedElements.forEach(($) => {
            p2.push($);
          });
        });
      });
      try {
        yield Promise.all([this.acquireAudioContext(), ...p2.map((I2) => (I2.muted = false, I2.play()))]), this.handleAudioPlaybackStarted();
      } catch (I2) {
        throw this.handleAudioPlaybackFailed(I2), I2;
      }
    }), this.startVideo = () => __awaiter(this, void 0, void 0, function* () {
      const p2 = [];
      for (const _ of this.remoteParticipants.values())
        _.videoTrackPublications.forEach((I2) => {
          var P2;
          (P2 = I2.track) === null || P2 === void 0 || P2.attachedElements.forEach(($) => {
            p2.includes($) || p2.push($);
          });
        });
      yield Promise.all(p2.map((_) => _.play())).then(() => {
        this.handleVideoPlaybackStarted();
      }).catch((_) => {
        _.name === "NotAllowedError" ? this.handleVideoPlaybackFailed() : this.log.warn("Resuming video playback failed, make sure you call `startVideo` directly in a user gesture handler", this.logContext);
      });
    }), this.handleRestarting = () => {
      this.clearConnectionReconcile(), this.isResuming = false;
      for (const p2 of this.remoteParticipants.values())
        this.handleParticipantDisconnected(p2.identity, p2);
      this.setAndEmitConnectionState(ConnectionState.Reconnecting) && this.emit(RoomEvent.Reconnecting);
    }, this.handleSignalRestarted = (p2) => __awaiter(this, void 0, void 0, function* () {
      this.log.debug("signal reconnected to server, region ".concat(p2.serverRegion), Object.assign(Object.assign({}, this.logContext), { region: p2.serverRegion })), this.bufferedEvents = [], this.applyJoinResponse(p2);
      try {
        yield this.localParticipant.republishAllTracks(void 0, true);
      } catch (_) {
        this.log.error("error trying to re-publish tracks after reconnection", Object.assign(Object.assign({}, this.logContext), { error: _ }));
      }
      try {
        yield this.engine.waitForRestarted(), this.log.debug("fully reconnected to server", Object.assign(Object.assign({}, this.logContext), { region: p2.serverRegion }));
      } catch {
        return;
      }
      this.setAndEmitConnectionState(ConnectionState.Connected), this.emit(RoomEvent.Reconnected), this.registerConnectionReconcile(), this.emitBufferedEvents();
    }), this.handleParticipantUpdates = (p2) => {
      p2.forEach((_) => {
        var I2;
        if (_.identity === this.localParticipant.identity) {
          this.localParticipant.updateInfo(_);
          return;
        }
        _.identity === "" && (_.identity = (I2 = this.sidToIdentity.get(_.sid)) !== null && I2 !== void 0 ? I2 : "");
        let P2 = this.remoteParticipants.get(_.identity);
        _.state === ParticipantInfo_State.DISCONNECTED ? this.handleParticipantDisconnected(_.identity, P2) : P2 = this.getOrCreateParticipant(_.identity, _);
      });
    }, this.handleActiveSpeakersUpdate = (p2) => {
      const _ = [], I2 = {};
      p2.forEach((P2) => {
        if (I2[P2.sid] = true, P2.sid === this.localParticipant.sid)
          this.localParticipant.audioLevel = P2.level, this.localParticipant.setIsSpeaking(true), _.push(this.localParticipant);
        else {
          const $ = this.getRemoteParticipantBySid(P2.sid);
          $ && ($.audioLevel = P2.level, $.setIsSpeaking(true), _.push($));
        }
      }), I2[this.localParticipant.sid] || (this.localParticipant.audioLevel = 0, this.localParticipant.setIsSpeaking(false)), this.remoteParticipants.forEach((P2) => {
        I2[P2.sid] || (P2.audioLevel = 0, P2.setIsSpeaking(false));
      }), this.activeSpeakers = _, this.emitWhenConnected(RoomEvent.ActiveSpeakersChanged, _);
    }, this.handleSpeakersChanged = (p2) => {
      const _ = /* @__PURE__ */ new Map();
      this.activeSpeakers.forEach((P2) => {
        _.set(P2.sid, P2);
      }), p2.forEach((P2) => {
        let $ = this.getRemoteParticipantBySid(P2.sid);
        P2.sid === this.localParticipant.sid && ($ = this.localParticipant), $ && ($.audioLevel = P2.level, $.setIsSpeaking(P2.active), P2.active ? _.set(P2.sid, $) : _.delete(P2.sid));
      });
      const I2 = Array.from(_.values());
      I2.sort((P2, $) => $.audioLevel - P2.audioLevel), this.activeSpeakers = I2, this.emitWhenConnected(RoomEvent.ActiveSpeakersChanged, I2);
    }, this.handleStreamStateUpdate = (p2) => {
      p2.streamStates.forEach((_) => {
        const I2 = this.getRemoteParticipantBySid(_.participantSid);
        if (!I2)
          return;
        const P2 = I2.getTrackPublicationBySid(_.trackSid);
        !P2 || !P2.track || (P2.track.streamState = Track.streamStateFromProto(_.state), I2.emit(ParticipantEvent.TrackStreamStateChanged, P2, P2.track.streamState), this.emitWhenConnected(RoomEvent.TrackStreamStateChanged, P2, P2.track.streamState, I2));
      });
    }, this.handleSubscriptionPermissionUpdate = (p2) => {
      const _ = this.getRemoteParticipantBySid(p2.participantSid);
      if (!_)
        return;
      const I2 = _.getTrackPublicationBySid(p2.trackSid);
      I2 && I2.setAllowed(p2.allowed);
    }, this.handleSubscriptionError = (p2) => {
      const _ = Array.from(this.remoteParticipants.values()).find((P2) => P2.trackPublications.has(p2.trackSid));
      if (!_)
        return;
      const I2 = _.getTrackPublicationBySid(p2.trackSid);
      I2 && I2.setSubscriptionError(p2.err);
    }, this.handleDataPacket = (p2, _) => {
      const I2 = this.remoteParticipants.get(p2.participantIdentity);
      this.emit(RoomEvent.DataReceived, p2.payload, I2, _, p2.topic), I2 == null || I2.emit(ParticipantEvent.DataReceived, p2.payload, _);
    }, this.handleAudioPlaybackStarted = () => {
      this.canPlaybackAudio || (this.audioEnabled = true, this.emit(RoomEvent.AudioPlaybackStatusChanged, true));
    }, this.handleAudioPlaybackFailed = (p2) => {
      this.log.warn("could not playback audio", Object.assign(Object.assign({}, this.logContext), { error: p2 })), this.canPlaybackAudio && (this.audioEnabled = false, this.emit(RoomEvent.AudioPlaybackStatusChanged, false));
    }, this.handleVideoPlaybackStarted = () => {
      this.isVideoPlaybackBlocked && (this.isVideoPlaybackBlocked = false, this.emit(RoomEvent.VideoPlaybackStatusChanged, true));
    }, this.handleVideoPlaybackFailed = () => {
      this.isVideoPlaybackBlocked || (this.isVideoPlaybackBlocked = true, this.emit(RoomEvent.VideoPlaybackStatusChanged, false));
    }, this.handleDeviceChange = () => __awaiter(this, void 0, void 0, function* () {
      this.emit(RoomEvent.MediaDevicesChanged);
    }), this.handleRoomUpdate = (p2) => {
      const _ = this.roomInfo;
      this.roomInfo = p2, _ && _.metadata !== p2.metadata && this.emitWhenConnected(RoomEvent.RoomMetadataChanged, p2.metadata), (_ == null ? void 0 : _.activeRecording) !== p2.activeRecording && this.emitWhenConnected(RoomEvent.RecordingStatusChanged, p2.activeRecording);
    }, this.handleConnectionQualityUpdate = (p2) => {
      p2.updates.forEach((_) => {
        if (_.participantSid === this.localParticipant.sid) {
          this.localParticipant.setConnectionQuality(_.quality);
          return;
        }
        const I2 = this.getRemoteParticipantBySid(_.participantSid);
        I2 && I2.setConnectionQuality(_.quality);
      });
    }, this.onLocalParticipantMetadataChanged = (p2) => {
      this.emit(RoomEvent.ParticipantMetadataChanged, p2, this.localParticipant);
    }, this.onLocalParticipantNameChanged = (p2) => {
      this.emit(RoomEvent.ParticipantNameChanged, p2, this.localParticipant);
    }, this.onLocalTrackMuted = (p2) => {
      this.emit(RoomEvent.TrackMuted, p2, this.localParticipant);
    }, this.onLocalTrackUnmuted = (p2) => {
      this.emit(RoomEvent.TrackUnmuted, p2, this.localParticipant);
    }, this.onLocalTrackPublished = (p2) => __awaiter(this, void 0, void 0, function* () {
      var _;
      this.emit(RoomEvent.LocalTrackPublished, p2, this.localParticipant), p2.track instanceof LocalAudioTrack && (yield p2.track.checkForSilence()) && this.emit(RoomEvent.LocalAudioSilenceDetected, p2);
      const I2 = yield (_ = p2.track) === null || _ === void 0 ? void 0 : _.getDeviceId(), P2 = sourceToKind(p2.source);
      P2 && I2 && I2 !== this.localParticipant.activeDeviceMap.get(P2) && (this.localParticipant.activeDeviceMap.set(P2, I2), this.emit(RoomEvent.ActiveDeviceChanged, P2, I2));
    }), this.onLocalTrackUnpublished = (p2) => {
      this.emit(RoomEvent.LocalTrackUnpublished, p2, this.localParticipant);
    }, this.onLocalConnectionQualityChanged = (p2) => {
      this.emit(RoomEvent.ConnectionQualityChanged, p2, this.localParticipant);
    }, this.onMediaDevicesError = (p2) => {
      this.emit(RoomEvent.MediaDevicesError, p2);
    }, this.onLocalParticipantPermissionsChanged = (p2) => {
      this.emit(RoomEvent.ParticipantPermissionsChanged, p2, this.localParticipant);
    }, this.setMaxListeners(100), this.remoteParticipants = /* @__PURE__ */ new Map(), this.sidToIdentity = /* @__PURE__ */ new Map(), this.options = Object.assign(Object.assign({}, roomOptionDefaults), u2), this.log = getLogger((l2 = this.options.loggerName) !== null && l2 !== void 0 ? l2 : LoggerNames.Room), this.options.audioCaptureDefaults = Object.assign(Object.assign({}, audioDefaults), u2 == null ? void 0 : u2.audioCaptureDefaults), this.options.videoCaptureDefaults = Object.assign(Object.assign({}, videoDefaults), u2 == null ? void 0 : u2.videoCaptureDefaults), this.options.publishDefaults = Object.assign(Object.assign({}, publishDefaults), u2 == null ? void 0 : u2.publishDefaults), this.maybeCreateEngine(), this.disconnectLock = new Mutex(), this.localParticipant = new LocalParticipant("", "", this.engine, this.options), this.options.videoCaptureDefaults.deviceId && this.localParticipant.activeDeviceMap.set("videoinput", unwrapConstraint(this.options.videoCaptureDefaults.deviceId)), this.options.audioCaptureDefaults.deviceId && this.localParticipant.activeDeviceMap.set("audioinput", unwrapConstraint(this.options.audioCaptureDefaults.deviceId)), !((v2 = this.options.audioOutput) === null || v2 === void 0) && v2.deviceId && this.switchActiveDevice("audiooutput", unwrapConstraint(this.options.audioOutput.deviceId)).catch((p2) => this.log.warn("Could not set audio output: ".concat(p2.message), this.logContext)), this.options.e2ee && this.setupE2EE();
  }
  /**
  * @experimental
  */
  setE2EEEnabled(u2) {
    return __awaiter(this, void 0, void 0, function* () {
      if (this.e2eeManager)
        yield Promise.all([this.localParticipant.setE2EEEnabled(u2)]), this.localParticipant.identity !== "" && this.e2eeManager.setParticipantCryptorEnabled(u2, this.localParticipant.identity);
      else
        throw Error("e2ee not configured, please set e2ee settings within the room options");
    });
  }
  setupE2EE() {
    var u2;
    this.options.e2ee && (this.e2eeManager = new E2EEManager(this.options.e2ee), this.e2eeManager.on(EncryptionEvent.ParticipantEncryptionStatusChanged, (c, l2) => {
      l2 instanceof LocalParticipant && (this.isE2EEEnabled = c), this.emit(RoomEvent.ParticipantEncryptionStatusChanged, c, l2);
    }), this.e2eeManager.on(EncryptionEvent.EncryptionError, (c) => this.emit(RoomEvent.EncryptionError, c)), (u2 = this.e2eeManager) === null || u2 === void 0 || u2.setup(this));
  }
  get logContext() {
    var u2;
    return { room: this.name, roomSid: (u2 = this.roomInfo) === null || u2 === void 0 ? void 0 : u2.sid, identity: this.localParticipant.identity };
  }
  /**
  * if the current room has a participant with `recorder: true` in its JWT grant
  **/
  get isRecording() {
    var u2, c;
    return (c = (u2 = this.roomInfo) === null || u2 === void 0 ? void 0 : u2.activeRecording) !== null && c !== void 0 ? c : false;
  }
  /**
  * server assigned unique room id.
  * returns once a sid has been issued by the server.
  */
  getSid() {
    return __awaiter(this, void 0, void 0, function* () {
      return this.state === ConnectionState.Disconnected ? "" : this.roomInfo && this.roomInfo.sid !== "" ? this.roomInfo.sid : new Promise((u2, c) => {
        const l2 = (v2) => {
          v2.sid !== "" && (this.engine.off(EngineEvent.RoomUpdate, l2), u2(v2.sid));
        };
        this.engine.on(EngineEvent.RoomUpdate, l2), this.once(RoomEvent.Disconnected, () => {
          this.engine.off(EngineEvent.RoomUpdate, l2), c("Room disconnected before room server id was available");
        });
      });
    });
  }
  /** user assigned name, derived from JWT token */
  get name() {
    var u2, c;
    return (c = (u2 = this.roomInfo) === null || u2 === void 0 ? void 0 : u2.name) !== null && c !== void 0 ? c : "";
  }
  /** room metadata */
  get metadata() {
    var u2;
    return (u2 = this.roomInfo) === null || u2 === void 0 ? void 0 : u2.metadata;
  }
  get numParticipants() {
    var u2, c;
    return (c = (u2 = this.roomInfo) === null || u2 === void 0 ? void 0 : u2.numParticipants) !== null && c !== void 0 ? c : 0;
  }
  get numPublishers() {
    var u2, c;
    return (c = (u2 = this.roomInfo) === null || u2 === void 0 ? void 0 : u2.numPublishers) !== null && c !== void 0 ? c : 0;
  }
  maybeCreateEngine() {
    this.engine && !this.engine.isClosed || (this.engine = new RTCEngine(this.options), this.engine.on(EngineEvent.ParticipantUpdate, this.handleParticipantUpdates).on(EngineEvent.RoomUpdate, this.handleRoomUpdate).on(EngineEvent.SpeakersChanged, this.handleSpeakersChanged).on(EngineEvent.StreamStateChanged, this.handleStreamStateUpdate).on(EngineEvent.ConnectionQualityUpdate, this.handleConnectionQualityUpdate).on(EngineEvent.SubscriptionError, this.handleSubscriptionError).on(EngineEvent.SubscriptionPermissionUpdate, this.handleSubscriptionPermissionUpdate).on(EngineEvent.MediaTrackAdded, (u2, c, l2) => {
      this.onTrackAdded(u2, c, l2);
    }).on(EngineEvent.Disconnected, (u2) => {
      this.handleDisconnect(this.options.stopLocalTrackOnUnpublish, u2);
    }).on(EngineEvent.ActiveSpeakersUpdate, this.handleActiveSpeakersUpdate).on(EngineEvent.DataPacketReceived, this.handleDataPacket).on(EngineEvent.Resuming, () => {
      this.clearConnectionReconcile(), this.isResuming = true, this.log.info("Resuming signal connection", this.logContext);
    }).on(EngineEvent.Resumed, () => {
      this.registerConnectionReconcile(), this.isResuming = false, this.log.info("Resumed signal connection", this.logContext), this.updateSubscriptions(), this.emitBufferedEvents();
    }).on(EngineEvent.SignalResumed, () => {
      this.bufferedEvents = [], (this.state === ConnectionState.Reconnecting || this.isResuming) && this.sendSyncState();
    }).on(EngineEvent.Restarting, this.handleRestarting).on(EngineEvent.SignalRestarted, this.handleSignalRestarted).on(EngineEvent.DCBufferStatusChanged, (u2, c) => {
      this.emit(RoomEvent.DCBufferStatusChanged, u2, c);
    }), this.localParticipant && this.localParticipant.setupEngine(this.engine), this.e2eeManager && this.e2eeManager.setupEngine(this.engine));
  }
  /**
  * getLocalDevices abstracts navigator.mediaDevices.enumerateDevices.
  * In particular, it handles Chrome's unique behavior of creating `default`
  * devices. When encountered, it'll be removed from the list of devices.
  * The actual default device will be placed at top.
  * @param kind
  * @returns a list of available local devices
  */
  static getLocalDevices(u2) {
    let c = arguments.length > 1 && arguments[1] !== void 0 ? arguments[1] : true;
    return DeviceManager.getInstance().getDevices(u2, c);
  }
  /**
  * prepareConnection should be called as soon as the page is loaded, in order
  * to speed up the connection attempt. This function will
  * - perform DNS resolution and pre-warm the DNS cache
  * - establish TLS connection and cache TLS keys
  *
  * With LiveKit Cloud, it will also determine the best edge data center for
  * the current client to connect to if a token is provided.
  */
  prepareConnection(u2, c) {
    return __awaiter(this, void 0, void 0, function* () {
      if (this.state === ConnectionState.Disconnected) {
        this.log.debug("prepareConnection to ".concat(u2), this.logContext);
        try {
          if (isCloud(new URL(u2)) && c) {
            this.regionUrlProvider = new RegionUrlProvider(u2, c);
            const l2 = yield this.regionUrlProvider.getNextBestRegionUrl();
            l2 && this.state === ConnectionState.Disconnected && (this.regionUrl = l2, yield fetch(toHttpUrl(l2), { method: "HEAD" }), this.log.debug("prepared connection to ".concat(l2), this.logContext));
          } else
            yield fetch(toHttpUrl(u2), { method: "HEAD" });
        } catch (l2) {
          this.log.warn("could not prepare connection", Object.assign(Object.assign({}, this.logContext), { error: l2 }));
        }
      }
    });
  }
  /**
  * retrieves a participant by identity
  * @param identity
  * @returns
  */
  getParticipantByIdentity(u2) {
    return this.localParticipant.identity === u2 ? this.localParticipant : this.remoteParticipants.get(u2);
  }
  clearConnectionFutures() {
    this.connectFuture = void 0;
  }
  /**
  * @internal for testing
  */
  simulateScenario(u2, c) {
    return __awaiter(this, void 0, void 0, function* () {
      let l2 = () => {
      }, v2;
      switch (u2) {
        case "signal-reconnect":
          yield this.engine.client.handleOnClose("simulate disconnect");
          break;
        case "speaker":
          v2 = new SimulateScenario({ scenario: { case: "speakerUpdate", value: 3 } });
          break;
        case "node-failure":
          v2 = new SimulateScenario({ scenario: { case: "nodeFailure", value: true } });
          break;
        case "server-leave":
          v2 = new SimulateScenario({ scenario: { case: "serverLeave", value: true } });
          break;
        case "migration":
          v2 = new SimulateScenario({ scenario: { case: "migration", value: true } });
          break;
        case "resume-reconnect":
          this.engine.failNext(), yield this.engine.client.handleOnClose("simulate resume-disconnect");
          break;
        case "disconnect-signal-on-resume":
          l2 = () => __awaiter(this, void 0, void 0, function* () {
            yield this.engine.client.handleOnClose("simulate resume-disconnect");
          }), v2 = new SimulateScenario({ scenario: { case: "disconnectSignalOnResume", value: true } });
          break;
        case "disconnect-signal-on-resume-no-messages":
          l2 = () => __awaiter(this, void 0, void 0, function* () {
            yield this.engine.client.handleOnClose("simulate resume-disconnect");
          }), v2 = new SimulateScenario({ scenario: { case: "disconnectSignalOnResumeNoMessages", value: true } });
          break;
        case "full-reconnect":
          this.engine.fullReconnectOnNext = true, yield this.engine.client.handleOnClose("simulate full-reconnect");
          break;
        case "force-tcp":
        case "force-tls":
          v2 = new SimulateScenario({ scenario: { case: "switchCandidateProtocol", value: u2 === "force-tls" ? 2 : 1 } }), l2 = () => __awaiter(this, void 0, void 0, function* () {
            const p2 = this.engine.client.onLeave;
            p2 && p2(new LeaveRequest({ reason: DisconnectReason.CLIENT_INITIATED, canReconnect: true }));
          });
          break;
        case "subscriber-bandwidth":
          if (c === void 0 || typeof c != "number")
            throw new Error("subscriber-bandwidth requires a number as argument");
          v2 = new SimulateScenario({ scenario: { case: "subscriberBandwidth", value: BigInt(c) } });
          break;
      }
      v2 && (yield this.engine.client.sendSimulateScenario(v2), yield l2());
    });
  }
  /**
  * Returns true if audio playback is enabled
  */
  get canPlaybackAudio() {
    return this.audioEnabled;
  }
  /**
  * Returns true if video playback is enabled
  */
  get canPlaybackVideo() {
    return !this.isVideoPlaybackBlocked;
  }
  getActiveDevice(u2) {
    return this.localParticipant.activeDeviceMap.get(u2);
  }
  /**
  * Switches all active devices used in this room to the given device.
  *
  * Note: setting AudioOutput is not supported on some browsers. See [setSinkId](https://developer.mozilla.org/en-US/docs/Web/API/HTMLMediaElement/setSinkId#browser_compatibility)
  *
  * @param kind use `videoinput` for camera track,
  *  `audioinput` for microphone track,
  *  `audiooutput` to set speaker for all incoming audio tracks
  * @param deviceId
  */
  switchActiveDevice(u2, c) {
    let l2 = arguments.length > 2 && arguments[2] !== void 0 ? arguments[2] : false;
    var v2, p2, _;
    return __awaiter(this, void 0, void 0, function* () {
      let I2 = false, P2 = true;
      const $ = l2 ? { exact: c } : c;
      if (u2 === "audioinput") {
        const F2 = this.options.audioCaptureDefaults.deviceId;
        this.options.audioCaptureDefaults.deviceId = $, I2 = F2 !== $;
        const H2 = Array.from(this.localParticipant.audioTrackPublications.values()).filter((j) => j.source === Track.Source.Microphone);
        try {
          P2 = (yield Promise.all(H2.map((j) => {
            var ee2;
            return (ee2 = j.audioTrack) === null || ee2 === void 0 ? void 0 : ee2.setDeviceId($);
          }))).every((j) => j === true);
        } catch (j) {
          throw this.options.audioCaptureDefaults.deviceId = F2, j;
        }
      } else if (u2 === "videoinput") {
        const F2 = this.options.videoCaptureDefaults.deviceId;
        this.options.videoCaptureDefaults.deviceId = $, I2 = F2 !== $;
        const H2 = Array.from(this.localParticipant.videoTrackPublications.values()).filter((j) => j.source === Track.Source.Camera);
        try {
          P2 = (yield Promise.all(H2.map((j) => {
            var ee2;
            return (ee2 = j.videoTrack) === null || ee2 === void 0 ? void 0 : ee2.setDeviceId($);
          }))).every((j) => j === true);
        } catch (j) {
          throw this.options.videoCaptureDefaults.deviceId = F2, j;
        }
      } else if (u2 === "audiooutput") {
        if (!supportsSetSinkId() && !this.options.webAudioMix || this.options.webAudioMix && this.audioContext && !("setSinkId" in this.audioContext))
          throw new Error("cannot switch audio output, setSinkId not supported");
        (v2 = (_ = this.options).audioOutput) !== null && v2 !== void 0 || (_.audioOutput = {});
        const F2 = this.options.audioOutput.deviceId;
        this.options.audioOutput.deviceId = c, I2 = F2 !== $;
        try {
          this.options.webAudioMix ? (p2 = this.audioContext) === null || p2 === void 0 || p2.setSinkId(c) : yield Promise.all(Array.from(this.remoteParticipants.values()).map((H2) => H2.setAudioOutput({ deviceId: c })));
        } catch (H2) {
          throw this.options.audioOutput.deviceId = F2, H2;
        }
      }
      return I2 && P2 && (this.localParticipant.activeDeviceMap.set(u2, c), this.emit(RoomEvent.ActiveDeviceChanged, u2, c)), P2;
    });
  }
  setupLocalParticipantEvents() {
    this.localParticipant.on(ParticipantEvent.ParticipantMetadataChanged, this.onLocalParticipantMetadataChanged).on(ParticipantEvent.ParticipantNameChanged, this.onLocalParticipantNameChanged).on(ParticipantEvent.TrackMuted, this.onLocalTrackMuted).on(ParticipantEvent.TrackUnmuted, this.onLocalTrackUnmuted).on(ParticipantEvent.LocalTrackPublished, this.onLocalTrackPublished).on(ParticipantEvent.LocalTrackUnpublished, this.onLocalTrackUnpublished).on(ParticipantEvent.ConnectionQualityChanged, this.onLocalConnectionQualityChanged).on(ParticipantEvent.MediaDevicesError, this.onMediaDevicesError).on(ParticipantEvent.AudioStreamAcquired, this.startAudio).on(ParticipantEvent.ParticipantPermissionsChanged, this.onLocalParticipantPermissionsChanged);
  }
  recreateEngine() {
    var u2;
    (u2 = this.engine) === null || u2 === void 0 || u2.close(), this.engine = void 0, this.isResuming = false, this.remoteParticipants.clear(), this.sidToIdentity.clear(), this.bufferedEvents = [], this.maybeCreateEngine();
  }
  onTrackAdded(u2, c, l2) {
    if (this.state === ConnectionState.Connecting || this.state === ConnectionState.Reconnecting) {
      const F2 = () => {
        this.onTrackAdded(u2, c, l2), H2();
      }, H2 = () => {
        this.off(RoomEvent.Reconnected, F2), this.off(RoomEvent.Connected, F2), this.off(RoomEvent.Disconnected, H2);
      };
      this.once(RoomEvent.Reconnected, F2), this.once(RoomEvent.Connected, F2), this.once(RoomEvent.Disconnected, H2);
      return;
    }
    if (this.state === ConnectionState.Disconnected) {
      this.log.warn("skipping incoming track after Room disconnected", this.logContext);
      return;
    }
    const v2 = unpackStreamId(c.id), p2 = v2[0];
    let _ = v2[1], I2 = u2.id;
    if (_ && _.startsWith("TR") && (I2 = _), p2 === this.localParticipant.sid) {
      this.log.warn("tried to create RemoteParticipant for local participant", this.logContext);
      return;
    }
    const P2 = Array.from(this.remoteParticipants.values()).find((F2) => F2.sid === p2);
    if (!P2) {
      this.log.error("Tried to add a track for a participant, that's not present. Sid: ".concat(p2), this.logContext);
      return;
    }
    let $;
    this.options.adaptiveStream && (typeof this.options.adaptiveStream == "object" ? $ = this.options.adaptiveStream : $ = {}), P2.addSubscribedMediaTrack(u2, I2, c, l2, $);
  }
  handleDisconnect() {
    let u2 = arguments.length > 0 && arguments[0] !== void 0 ? arguments[0] : true, c = arguments.length > 1 ? arguments[1] : void 0;
    var l2;
    if (this.clearConnectionReconcile(), this.isResuming = false, this.bufferedEvents = [], this.state !== ConnectionState.Disconnected) {
      this.regionUrl = void 0;
      try {
        this.remoteParticipants.forEach((v2) => {
          v2.trackPublications.forEach((p2) => {
            v2.unpublishTrack(p2.trackSid);
          });
        }), this.localParticipant.trackPublications.forEach((v2) => {
          var p2, _;
          v2.track && this.localParticipant.unpublishTrack(v2.track, u2), u2 && ((p2 = v2.track) === null || p2 === void 0 || p2.detach(), (_ = v2.track) === null || _ === void 0 || _.stop());
        }), this.localParticipant.off(ParticipantEvent.ParticipantMetadataChanged, this.onLocalParticipantMetadataChanged).off(ParticipantEvent.ParticipantNameChanged, this.onLocalParticipantNameChanged).off(ParticipantEvent.TrackMuted, this.onLocalTrackMuted).off(ParticipantEvent.TrackUnmuted, this.onLocalTrackUnmuted).off(ParticipantEvent.LocalTrackPublished, this.onLocalTrackPublished).off(ParticipantEvent.LocalTrackUnpublished, this.onLocalTrackUnpublished).off(ParticipantEvent.ConnectionQualityChanged, this.onLocalConnectionQualityChanged).off(ParticipantEvent.MediaDevicesError, this.onMediaDevicesError).off(ParticipantEvent.AudioStreamAcquired, this.startAudio).off(ParticipantEvent.ParticipantPermissionsChanged, this.onLocalParticipantPermissionsChanged), this.localParticipant.trackPublications.clear(), this.localParticipant.videoTrackPublications.clear(), this.localParticipant.audioTrackPublications.clear(), this.remoteParticipants.clear(), this.sidToIdentity.clear(), this.activeSpeakers = [], this.audioContext && typeof this.options.webAudioMix == "boolean" && (this.audioContext.close(), this.audioContext = void 0), isWeb() && (window.removeEventListener("beforeunload", this.onPageLeave), window.removeEventListener("pagehide", this.onPageLeave), window.removeEventListener("freeze", this.onPageLeave), (l2 = navigator.mediaDevices) === null || l2 === void 0 || l2.removeEventListener("devicechange", this.handleDeviceChange));
      } finally {
        this.setAndEmitConnectionState(ConnectionState.Disconnected), this.emit(RoomEvent.Disconnected, c);
      }
    }
  }
  handleParticipantDisconnected(u2, c) {
    this.remoteParticipants.delete(u2), c && (c.trackPublications.forEach((l2) => {
      c.unpublishTrack(l2.trackSid, true);
    }), this.emit(RoomEvent.ParticipantDisconnected, c));
  }
  acquireAudioContext() {
    var u2, c;
    return __awaiter(this, void 0, void 0, function* () {
      if (typeof this.options.webAudioMix != "boolean" && this.options.webAudioMix.audioContext ? this.audioContext = this.options.webAudioMix.audioContext : (!this.audioContext || this.audioContext.state === "closed") && (this.audioContext = (u2 = getNewAudioContext()) !== null && u2 !== void 0 ? u2 : void 0), this.audioContext && this.audioContext.state === "suspended")
        try {
          yield this.audioContext.resume();
        } catch (v2) {
          this.log.warn("Could not resume audio context", Object.assign(Object.assign({}, this.logContext), { error: v2 }));
        }
      this.options.webAudioMix && this.remoteParticipants.forEach((v2) => v2.setAudioContext(this.audioContext)), this.localParticipant.setAudioContext(this.audioContext);
      const l2 = ((c = this.audioContext) === null || c === void 0 ? void 0 : c.state) === "running";
      l2 !== this.canPlaybackAudio && (this.audioEnabled = l2, this.emit(RoomEvent.AudioPlaybackStatusChanged, l2));
    });
  }
  createParticipant(u2, c) {
    var l2;
    let v2;
    return c ? v2 = RemoteParticipant.fromParticipantInfo(this.engine.client, c) : v2 = new RemoteParticipant(this.engine.client, "", u2, void 0, void 0, { loggerContextCb: () => this.logContext, loggerName: this.options.loggerName }), this.options.webAudioMix && v2.setAudioContext(this.audioContext), !((l2 = this.options.audioOutput) === null || l2 === void 0) && l2.deviceId && v2.setAudioOutput(this.options.audioOutput).catch((p2) => this.log.warn("Could not set audio output: ".concat(p2.message), this.logContext)), v2;
  }
  getOrCreateParticipant(u2, c) {
    if (this.remoteParticipants.has(u2)) {
      const v2 = this.remoteParticipants.get(u2);
      return c && v2.updateInfo(c) && this.sidToIdentity.set(c.sid, c.identity), v2;
    }
    const l2 = this.createParticipant(u2, c);
    return this.remoteParticipants.set(u2, l2), this.sidToIdentity.set(c.sid, c.identity), this.emitWhenConnected(RoomEvent.ParticipantConnected, l2), l2.on(ParticipantEvent.TrackPublished, (v2) => {
      this.emitWhenConnected(RoomEvent.TrackPublished, v2, l2);
    }).on(ParticipantEvent.TrackSubscribed, (v2, p2) => {
      v2.kind === Track.Kind.Audio ? (v2.on(TrackEvent.AudioPlaybackStarted, this.handleAudioPlaybackStarted), v2.on(TrackEvent.AudioPlaybackFailed, this.handleAudioPlaybackFailed)) : v2.kind === Track.Kind.Video && (v2.on(TrackEvent.VideoPlaybackFailed, this.handleVideoPlaybackFailed), v2.on(TrackEvent.VideoPlaybackStarted, this.handleVideoPlaybackStarted)), this.emit(RoomEvent.TrackSubscribed, v2, p2, l2);
    }).on(ParticipantEvent.TrackUnpublished, (v2) => {
      this.emit(RoomEvent.TrackUnpublished, v2, l2);
    }).on(ParticipantEvent.TrackUnsubscribed, (v2, p2) => {
      this.emit(RoomEvent.TrackUnsubscribed, v2, p2, l2);
    }).on(ParticipantEvent.TrackSubscriptionFailed, (v2) => {
      this.emit(RoomEvent.TrackSubscriptionFailed, v2, l2);
    }).on(ParticipantEvent.TrackMuted, (v2) => {
      this.emitWhenConnected(RoomEvent.TrackMuted, v2, l2);
    }).on(ParticipantEvent.TrackUnmuted, (v2) => {
      this.emitWhenConnected(RoomEvent.TrackUnmuted, v2, l2);
    }).on(ParticipantEvent.ParticipantMetadataChanged, (v2) => {
      this.emitWhenConnected(RoomEvent.ParticipantMetadataChanged, v2, l2);
    }).on(ParticipantEvent.ParticipantNameChanged, (v2) => {
      this.emitWhenConnected(RoomEvent.ParticipantNameChanged, v2, l2);
    }).on(ParticipantEvent.ConnectionQualityChanged, (v2) => {
      this.emitWhenConnected(RoomEvent.ConnectionQualityChanged, v2, l2);
    }).on(ParticipantEvent.ParticipantPermissionsChanged, (v2) => {
      this.emitWhenConnected(RoomEvent.ParticipantPermissionsChanged, v2, l2);
    }).on(ParticipantEvent.TrackSubscriptionStatusChanged, (v2, p2) => {
      this.emitWhenConnected(RoomEvent.TrackSubscriptionStatusChanged, v2, p2, l2);
    }).on(ParticipantEvent.TrackSubscriptionFailed, (v2, p2) => {
      this.emit(RoomEvent.TrackSubscriptionFailed, v2, l2, p2);
    }).on(ParticipantEvent.TrackSubscriptionPermissionChanged, (v2, p2) => {
      this.emitWhenConnected(RoomEvent.TrackSubscriptionPermissionChanged, v2, p2, l2);
    }), c && l2.updateInfo(c), l2;
  }
  sendSyncState() {
    const u2 = Array.from(this.remoteParticipants.values()).reduce((l2, v2) => (l2.push(...v2.getTrackPublications()), l2), []), c = this.localParticipant.getTrackPublications();
    this.engine.sendSyncState(u2, c);
  }
  /**
  * After resuming, we'll need to notify the server of the current
  * subscription settings.
  */
  updateSubscriptions() {
    for (const u2 of this.remoteParticipants.values())
      for (const c of u2.videoTrackPublications.values())
        c.isSubscribed && c instanceof RemoteTrackPublication && c.emitTrackUpdate();
  }
  getRemoteParticipantBySid(u2) {
    const c = this.sidToIdentity.get(u2);
    if (c)
      return this.remoteParticipants.get(c);
  }
  registerConnectionReconcile() {
    this.clearConnectionReconcile();
    let u2 = 0;
    this.connectionReconcileInterval = CriticalTimers.setInterval(() => {
      !this.engine || // engine detected close, but Room missed it
      this.engine.isClosed || // transports failed without notifying engine
      !this.engine.verifyTransport() ? (u2++, this.log.warn("detected connection state mismatch", Object.assign(Object.assign({}, this.logContext), { numFailures: u2, engine: { closed: this.engine.isClosed, transportsConnected: this.engine.verifyTransport() } })), u2 >= 3 && (this.recreateEngine(), this.handleDisconnect(this.options.stopLocalTrackOnUnpublish, DisconnectReason.STATE_MISMATCH))) : u2 = 0;
    }, connectionReconcileFrequency);
  }
  clearConnectionReconcile() {
    this.connectionReconcileInterval && CriticalTimers.clearInterval(this.connectionReconcileInterval);
  }
  setAndEmitConnectionState(u2) {
    return u2 === this.state ? false : (this.state = u2, this.emit(RoomEvent.ConnectionStateChanged, this.state), true);
  }
  emitBufferedEvents() {
    this.bufferedEvents.forEach((u2) => {
      let [c, l2] = u2;
      this.emit(c, ...l2);
    }), this.bufferedEvents = [];
  }
  emitWhenConnected(u2) {
    for (var c = arguments.length, l2 = new Array(c > 1 ? c - 1 : 0), v2 = 1; v2 < c; v2++)
      l2[v2 - 1] = arguments[v2];
    if (this.state === ConnectionState.Reconnecting || this.isResuming || !this.engine || this.engine.pendingReconnect)
      this.bufferedEvents.push([u2, l2]);
    else if (this.state === ConnectionState.Connected)
      return this.emit(u2, ...l2);
    return false;
  }
  /**
  * Allows to populate a room with simulated participants.
  * No actual connection to a server will be established, all state is
  * @experimental
  */
  simulateParticipants(u2) {
    var c, l2;
    return __awaiter(this, void 0, void 0, function* () {
      const v2 = Object.assign({ audio: true, video: true, useRealTracks: false }, u2.publish), p2 = Object.assign({ count: 9, audio: false, video: true, aspectRatios: [1.66, 1.7, 1.3] }, u2.participants);
      if (this.handleDisconnect(), this.roomInfo = new Room$1({ sid: "RM_SIMULATED", name: "simulated-room", emptyTimeout: 0, maxParticipants: 0, creationTime: protoInt64.parse((/* @__PURE__ */ new Date()).getTime()), metadata: "", numParticipants: 1, numPublishers: 1, turnPassword: "", enabledCodecs: [], activeRecording: false }), this.localParticipant.updateInfo(new ParticipantInfo({ identity: "simulated-local", name: "local-name" })), this.setupLocalParticipantEvents(), this.emit(RoomEvent.SignalConnected), this.emit(RoomEvent.Connected), this.setAndEmitConnectionState(ConnectionState.Connected), v2.video) {
        const _ = new LocalTrackPublication(Track.Kind.Video, new TrackInfo({ source: TrackSource.CAMERA, sid: Math.floor(Math.random() * 1e4).toString(), type: TrackType.AUDIO, name: "video-dummy" }), new LocalVideoTrack(v2.useRealTracks ? (yield window.navigator.mediaDevices.getUserMedia({ video: true })).getVideoTracks()[0] : createDummyVideoStreamTrack(160 * ((c = p2.aspectRatios[0]) !== null && c !== void 0 ? c : 1), 160, true, true), void 0, false, { loggerName: this.options.loggerName, loggerContextCb: () => this.logContext }), { loggerName: this.options.loggerName, loggerContextCb: () => this.logContext });
        this.localParticipant.addTrackPublication(_), this.localParticipant.emit(ParticipantEvent.LocalTrackPublished, _);
      }
      if (v2.audio) {
        const _ = new LocalTrackPublication(Track.Kind.Audio, new TrackInfo({ source: TrackSource.MICROPHONE, sid: Math.floor(Math.random() * 1e4).toString(), type: TrackType.AUDIO }), new LocalAudioTrack(v2.useRealTracks ? (yield navigator.mediaDevices.getUserMedia({ audio: true })).getAudioTracks()[0] : getEmptyAudioStreamTrack(), void 0, false, this.audioContext, { loggerName: this.options.loggerName, loggerContextCb: () => this.logContext }), { loggerName: this.options.loggerName, loggerContextCb: () => this.logContext });
        this.localParticipant.addTrackPublication(_), this.localParticipant.emit(ParticipantEvent.LocalTrackPublished, _);
      }
      for (let _ = 0; _ < p2.count - 1; _ += 1) {
        let I2 = new ParticipantInfo({ sid: Math.floor(Math.random() * 1e4).toString(), identity: "simulated-".concat(_), state: ParticipantInfo_State.ACTIVE, tracks: [], joinedAt: protoInt64.parse(Date.now()) });
        const P2 = this.getOrCreateParticipant(I2.identity, I2);
        if (p2.video) {
          const $ = createDummyVideoStreamTrack(160 * ((l2 = p2.aspectRatios[_ % p2.aspectRatios.length]) !== null && l2 !== void 0 ? l2 : 1), 160, false, true), F2 = new TrackInfo({ source: TrackSource.CAMERA, sid: Math.floor(Math.random() * 1e4).toString(), type: TrackType.AUDIO });
          P2.addSubscribedMediaTrack($, F2.sid, new MediaStream([$])), I2.tracks = [...I2.tracks, F2];
        }
        if (p2.audio) {
          const $ = getEmptyAudioStreamTrack(), F2 = new TrackInfo({ source: TrackSource.MICROPHONE, sid: Math.floor(Math.random() * 1e4).toString(), type: TrackType.AUDIO });
          P2.addSubscribedMediaTrack($, F2.sid, new MediaStream([$])), I2.tracks = [...I2.tracks, F2];
        }
        P2.updateInfo(I2);
      }
    });
  }
  // /** @internal */
  emit(u2) {
    for (var c = arguments.length, l2 = new Array(c > 1 ? c - 1 : 0), v2 = 1; v2 < c; v2++)
      l2[v2 - 1] = arguments[v2];
    if (u2 !== RoomEvent.ActiveSpeakersChanged) {
      const p2 = mapArgs(l2).filter((_) => _ !== void 0);
      this.log.debug("room event ".concat(u2), Object.assign(Object.assign({}, this.logContext), { event: u2, args: p2 }));
    }
    return super.emit(u2, ...l2);
  }
};
function mapArgs(a420) {
  return a420.map((u2) => {
    if (u2)
      return Array.isArray(u2) ? mapArgs(u2) : typeof u2 == "object" ? "logContext" in u2 && u2.logContext : u2;
  });
}
var CheckStatus;
(function(a420) {
  a420[a420.IDLE = 0] = "IDLE", a420[a420.RUNNING = 1] = "RUNNING", a420[a420.SKIPPED = 2] = "SKIPPED", a420[a420.SUCCESS = 3] = "SUCCESS", a420[a420.FAILED = 4] = "FAILED";
})(CheckStatus || (CheckStatus = {}));
class Checker extends eventsExports.EventEmitter {
  constructor(u2, c) {
    let l2 = arguments.length > 2 && arguments[2] !== void 0 ? arguments[2] : {};
    super(), this.status = CheckStatus.IDLE, this.logs = [], this.errorsAsWarnings = false, this.url = u2, this.token = c, this.name = this.constructor.name, this.room = new Room$2(l2.roomOptions), this.connectOptions = l2.connectOptions, l2.errorsAsWarnings && (this.errorsAsWarnings = l2.errorsAsWarnings);
  }
  run(u2) {
    return __awaiter(this, void 0, void 0, function* () {
      if (this.status !== CheckStatus.IDLE)
        throw Error("check is running already");
      this.setStatus(CheckStatus.RUNNING);
      try {
        yield this.perform();
      } catch (c) {
        c instanceof Error && (this.errorsAsWarnings ? this.appendWarning(c.message) : this.appendError(c.message));
      }
      return yield this.disconnect(), yield new Promise((c) => setTimeout(c, 500)), this.status !== CheckStatus.SKIPPED && this.setStatus(this.isSuccess() ? CheckStatus.SUCCESS : CheckStatus.FAILED), u2 && u2(), this.getInfo();
    });
  }
  isSuccess() {
    return !this.logs.some((u2) => u2.level === "error");
  }
  connect() {
    return __awaiter(this, void 0, void 0, function* () {
      return this.room.state === ConnectionState.Connected ? this.room : (yield this.room.connect(this.url, this.token), this.room);
    });
  }
  disconnect() {
    return __awaiter(this, void 0, void 0, function* () {
      this.room && this.room.state !== ConnectionState.Disconnected && (yield this.room.disconnect(), yield new Promise((u2) => setTimeout(u2, 500)));
    });
  }
  skip() {
    this.setStatus(CheckStatus.SKIPPED);
  }
  appendMessage(u2) {
    this.logs.push({ level: "info", message: u2 }), this.emit("update", this.getInfo());
  }
  appendWarning(u2) {
    this.logs.push({ level: "warning", message: u2 }), this.emit("update", this.getInfo());
  }
  appendError(u2) {
    this.logs.push({ level: "error", message: u2 }), this.emit("update", this.getInfo());
  }
  setStatus(u2) {
    this.status = u2, this.emit("update", this.getInfo());
  }
  get engine() {
    var u2;
    return (u2 = this.room) === null || u2 === void 0 ? void 0 : u2.engine;
  }
  getInfo() {
    return { logs: this.logs, name: this.name, status: this.status, description: this.description };
  }
}
function createLocalTracks(a420) {
  var u2, c;
  return __awaiter(this, void 0, void 0, function* () {
    a420 ?? (a420 = {}), (u2 = a420.audio) !== null && u2 !== void 0 || (a420.audio = true), (c = a420.video) !== null && c !== void 0 || (a420.video = true);
    const l2 = mergeDefaultOptions(a420, audioDefaults, videoDefaults), v2 = constraintsForOptions(l2), p2 = navigator.mediaDevices.getUserMedia(v2);
    a420.audio && (DeviceManager.userMediaPromiseMap.set("audioinput", p2), p2.catch(() => DeviceManager.userMediaPromiseMap.delete("audioinput"))), a420.video && (DeviceManager.userMediaPromiseMap.set("videoinput", p2), p2.catch(() => DeviceManager.userMediaPromiseMap.delete("videoinput")));
    const _ = yield p2;
    return _.getTracks().map((I2) => {
      const P2 = I2.kind === "audio";
      P2 ? a420.audio : a420.video;
      let $;
      const F2 = P2 ? v2.audio : v2.video;
      typeof F2 != "boolean" && ($ = F2), $ ? $.deviceId = I2.getSettings().deviceId : $ = { deviceId: I2.getSettings().deviceId };
      const H2 = mediaTrackToLocalTrack(I2, $);
      return H2.kind === Track.Kind.Video ? H2.source = Track.Source.Camera : H2.kind === Track.Kind.Audio && (H2.source = Track.Source.Microphone), H2.mediaStream = _, H2;
    });
  });
}
function createLocalVideoTrack(a420) {
  return __awaiter(this, void 0, void 0, function* () {
    return (yield createLocalTracks({ audio: false, video: a420 }))[0];
  });
}
function createLocalAudioTrack(a420) {
  return __awaiter(this, void 0, void 0, function* () {
    return (yield createLocalTracks({ audio: a420, video: false }))[0];
  });
}
class PublishAudioCheck extends Checker {
  get description() {
    return "Can publish audio";
  }
  perform() {
    var u2;
    return __awaiter(this, void 0, void 0, function* () {
      const c = yield this.connect(), l2 = yield createLocalAudioTrack();
      c.localParticipant.publishTrack(l2), yield new Promise((_) => setTimeout(_, 3e3));
      const v2 = yield (u2 = l2.sender) === null || u2 === void 0 ? void 0 : u2.getStats();
      if (!v2)
        throw new Error("Could not get RTCStats");
      let p2 = 0;
      if (v2.forEach((_) => {
        _.type === "outbound-rtp" && _.mediaType === "audio" && (p2 = _.packetsSent);
      }), p2 === 0)
        throw new Error("Could not determine packets are sent");
      this.appendMessage("published ".concat(p2, " audio packets"));
    });
  }
}
class PublishVideoCheck extends Checker {
  get description() {
    return "Can publish video";
  }
  perform() {
    var u2;
    return __awaiter(this, void 0, void 0, function* () {
      const c = yield this.connect(), l2 = yield createLocalVideoTrack();
      c.localParticipant.publishTrack(l2), yield new Promise((_) => setTimeout(_, 3e3));
      const v2 = yield (u2 = l2.sender) === null || u2 === void 0 ? void 0 : u2.getStats();
      if (!v2)
        throw new Error("Could not get RTCStats");
      let p2 = 0;
      if (v2.forEach((_) => {
        _.type === "outbound-rtp" && _.mediaType === "video" && (p2 = _.packetsSent);
      }), p2 === 0)
        throw new Error("Could not determine packets are sent");
      this.appendMessage("published ".concat(p2, " video packets"));
    });
  }
}
class ReconnectCheck extends Checker {
  get description() {
    return "Resuming connection after interruption";
  }
  perform() {
    var u2;
    return __awaiter(this, void 0, void 0, function* () {
      const c = yield this.connect();
      let l2 = false, v2 = false, p2;
      const _ = new Promise((P2) => {
        setTimeout(P2, 5e3), p2 = P2;
      });
      c.on(RoomEvent.Reconnecting, () => {
        l2 = true;
      }).on(RoomEvent.Reconnected, () => {
        v2 = true, p2(true);
      }), (u2 = c.engine.client.ws) === null || u2 === void 0 || u2.close();
      const I2 = c.engine.client.onClose;
      if (I2 && I2(""), yield _, l2) {
        if (!v2 || c.state !== ConnectionState.Connected)
          throw this.appendWarning("reconnection is only possible in Redis-based configurations"), new Error("Not able to reconnect");
      } else
        throw new Error("Did not attempt to reconnect");
    });
  }
}
class TURNCheck extends Checker {
  get description() {
    return "Can connect via TURN";
  }
  perform() {
    var u2, c;
    return __awaiter(this, void 0, void 0, function* () {
      const l2 = new SignalClient(), v2 = yield l2.join(this.url, this.token, { autoSubscribe: true, maxRetries: 0, e2eeEnabled: false, websocketTimeout: 15e3 });
      let p2 = false, _ = false, I2 = false;
      for (let P2 of v2.iceServers)
        for (let $ of P2.urls)
          $.startsWith("turn:") ? (_ = true, I2 = true) : $.startsWith("turns:") && (_ = true, I2 = true, p2 = true), $.startsWith("stun:") && (I2 = true);
      I2 ? _ && !p2 && this.appendWarning("TURN is configured server side, but TURN/TLS is unavailable.") : this.appendWarning("No STUN servers configured on server side."), yield l2.close(), !((c = (u2 = this.connectOptions) === null || u2 === void 0 ? void 0 : u2.rtcConfig) === null || c === void 0) && c.iceServers || _ ? yield this.room.connect(this.url, this.token, { rtcConfig: { iceTransportPolicy: "relay" } }) : (this.appendWarning("No TURN servers configured."), this.skip(), yield new Promise((P2) => setTimeout(P2, 0)));
    });
  }
}
class WebRTCCheck extends Checker {
  get description() {
    return "Establishing WebRTC connection";
  }
  perform() {
    return __awaiter(this, void 0, void 0, function* () {
      let u2 = false, c = false;
      this.room.on(RoomEvent.SignalConnected, () => {
        const l2 = this.room.engine.client.onTrickle;
        this.room.engine.client.onTrickle = (v2, p2) => {
          if (v2.candidate) {
            const _ = new RTCIceCandidate(v2);
            let I2 = "".concat(_.protocol, " ").concat(_.address, ":").concat(_.port, " ").concat(_.type);
            _.address && (isIPPrivate(_.address) ? I2 += " (private)" : _.protocol === "tcp" && _.tcpType === "passive" ? (u2 = true, I2 += " (passive)") : _.protocol === "udp" && (c = true)), this.appendMessage(I2);
          }
          l2 && l2(v2, p2);
        }, this.room.engine.pcManager && (this.room.engine.pcManager.subscriber.onIceCandidateError = (v2) => {
          v2 instanceof RTCPeerConnectionIceErrorEvent && this.appendWarning("error with ICE candidate: ".concat(v2.errorCode, " ").concat(v2.errorText, " ").concat(v2.url));
        });
      });
      try {
        yield this.connect(), livekitLogger.info("now the room is connected");
      } catch (l2) {
        throw this.appendWarning("ports need to be open on firewall in order to connect."), l2;
      }
      u2 || this.appendWarning("Server is not configured for ICE/TCP"), c || this.appendWarning("No public IPv4 UDP candidates were found. Your server is likely not configured correctly");
    });
  }
}
function isIPPrivate(a420) {
  const u2 = a420.split(".");
  if (u2.length === 4) {
    if (u2[0] === "10")
      return true;
    if (u2[0] === "192" && u2[1] === "168")
      return true;
    if (u2[0] === "172") {
      const c = parseInt(u2[1], 10);
      if (c >= 16 && c <= 31)
        return true;
    }
  }
  return false;
}
class WebSocketCheck extends Checker {
  get description() {
    return "Connecting to signal connection via WebSocket";
  }
  perform() {
    var u2, c, l2;
    return __awaiter(this, void 0, void 0, function* () {
      (this.url.startsWith("ws:") || this.url.startsWith("http:")) && this.appendWarning("Server is insecure, clients may block connections to it");
      let v2 = new SignalClient();
      const p2 = yield v2.join(this.url, this.token, { autoSubscribe: true, maxRetries: 0, e2eeEnabled: false, websocketTimeout: 15e3 });
      this.appendMessage("Connected to server, version ".concat(p2.serverVersion, ".")), ((u2 = p2.serverInfo) === null || u2 === void 0 ? void 0 : u2.edition) === ServerInfo_Edition.Cloud && !((c = p2.serverInfo) === null || c === void 0) && c.region && this.appendMessage("LiveKit Cloud: ".concat((l2 = p2.serverInfo) === null || l2 === void 0 ? void 0 : l2.region)), yield v2.close();
    });
  }
}
class ConnectionCheck extends eventsExports.EventEmitter {
  constructor(u2, c) {
    super(), this.checkResults = /* @__PURE__ */ new Map(), this.url = u2, this.token = c;
  }
  getNextCheckId() {
    const u2 = this.checkResults.size;
    return this.checkResults.set(u2, { logs: [], status: CheckStatus.IDLE, name: "", description: "" }), u2;
  }
  updateCheck(u2, c) {
    this.checkResults.set(u2, c), this.emit("checkUpdate", u2, c);
  }
  isSuccess() {
    return Array.from(this.checkResults.values()).every((u2) => u2.status !== CheckStatus.FAILED);
  }
  getResults() {
    return Array.from(this.checkResults.values());
  }
  createAndRunCheck(u2) {
    return __awaiter(this, void 0, void 0, function* () {
      const c = this.getNextCheckId(), l2 = new u2(this.url, this.token), v2 = (_) => {
        this.updateCheck(c, _);
      };
      l2.on("update", v2);
      const p2 = yield l2.run();
      return l2.off("update", v2), p2;
    });
  }
  checkWebsocket() {
    return __awaiter(this, void 0, void 0, function* () {
      return this.createAndRunCheck(WebSocketCheck);
    });
  }
  checkWebRTC() {
    return __awaiter(this, void 0, void 0, function* () {
      return this.createAndRunCheck(WebRTCCheck);
    });
  }
  checkTURN() {
    return __awaiter(this, void 0, void 0, function* () {
      return this.createAndRunCheck(TURNCheck);
    });
  }
  checkReconnect() {
    return __awaiter(this, void 0, void 0, function* () {
      return this.createAndRunCheck(ReconnectCheck);
    });
  }
  checkPublishAudio() {
    return __awaiter(this, void 0, void 0, function* () {
      return this.createAndRunCheck(PublishAudioCheck);
    });
  }
  checkPublishVideo() {
    return __awaiter(this, void 0, void 0, function* () {
      return this.createAndRunCheck(PublishVideoCheck);
    });
  }
}
lib$2.LiveApiModel.Rendering;
lib$2.LiveApiModel.VideoRendering;
lib$2.LiveApiModel.AudioRendering;
lib$2.LiveApiModel.RenderingQuality;
lib$2.LiveApiModel.Encoding;
lib$2.LiveApiModel.VideoEncoding;
lib$2.LiveApiModel.AudioEncoding;
const ProjectBroadcastPhase = lib$2.LiveApiModel.ProjectBroadcastPhase, Role = lib$2.LiveApiModel.Role;
lib$2.LiveApiModel.DestinationAddress;
lib$2.LiveApiModel.VideoCodec;
lib$2.LiveApiModel.AudioCodec;
lib$2.LiveApiModel.VideoCodecRateControl;
lib$2.LiveApiModel.VideoCodecProfile;
var Permission = /* @__PURE__ */ ((a420) => (a420[a420.ReadProject = 0] = "ReadProject", a420[a420.UpdateProject = 1] = "UpdateProject", a420[a420.JoinRoom = 2] = "JoinRoom", a420[a420.InviteGuests = 3] = "InviteGuests", a420[a420.ManageGuests = 4] = "ManageGuests", a420[a420.ManageBroadcast = 5] = "ManageBroadcast", a420[a420.ManageSelf = 6] = "ManageSelf", a420))(Permission || {});
const permissions = { [Role.ROLE_HOST]: [
  0,
  1,
  2,
  3,
  4,
  5
  /* ManageBroadcast */
], [Role.ROLE_COHOST]: [
  0,
  1,
  2,
  3,
  4,
  5
  /* ManageBroadcast */
], [Role.ROLE_CONTRIBUTOR]: [
  0,
  1,
  2,
  3
  /* InviteGuests */
], [Role.ROLE_GUEST]: [
  0,
  2,
  6
  /* ManageSelf */
], [Role.ROLE_VIEWER]: [
  0,
  2
  /* JoinRoom */
], [Role.ROLE_IMPERSONATE]: [
  0,
  1,
  3,
  4,
  5
  /* ManageBroadcast */
] }, hasPermission = (a420, u2) => {
  var c;
  return a420 ? !!((c = permissions[a420]) != null && c.find((l2) => l2 === u2)) : false;
};
var DataType = /* @__PURE__ */ ((a420) => (a420.ChatMessage = "ChatMessage", a420.ParticipantMetadataUpdate = "ParticipantMetadataUpdate", a420))(DataType || {}), SpecialEvent = /* @__PURE__ */ ((a420) => (a420.Chat = "Chat", a420))(SpecialEvent || {});
const decoder$1 = new TextDecoder(), encoder$1 = new TextEncoder();
class RoomsManager {
  constructor() {
    qt(this, "rooms");
    this.rooms = /* @__PURE__ */ new Map(), this.addRoom = this.addRoom.bind(this), this.ensureRoom = this.ensureRoom.bind(this), this.removeRoom = this.removeRoom.bind(this);
  }
  addRoom(u2, c, l2) {
    const v2 = new RoomContext(u2, c, l2, this);
    return this.rooms.set(c, v2), v2;
  }
  ensureRoom(u2, c, l2) {
    return this.rooms.get(c) ? (this.rooms.get(c).token = l2, this.rooms.get(c)) : this.addRoom(u2, c, l2);
  }
  async removeRoom(u2) {
    const c = this.rooms.get(u2);
    if (!Room$2)
      throw new Error("room not found!");
    if (c.isConnecting)
      throw new Error("Cannot remove room: Room is in connecting state");
    c.livekitRoom && await c.livekitRoom.disconnect(true), this.rooms.delete(u2);
  }
}
class RoomContext {
  /**
  * @param baseUrl base url for the webrtc server
  * @param token get
  */
  constructor(u2, c, l2, v2) {
    qt(this, "_baseUrl");
    qt(this, "_chatHistory");
    qt(this, "_connectListeners");
    qt(this, "_roomEventListenerRegistry");
    qt(this, "_localParticipantEventListenerRegistry");
    qt(this, "_specialEventListenerRegistry");
    qt(this, "_jwt");
    qt(this, "_manager");
    qt(this, "_apiClient");
    qt(this, "audioTracks");
    qt(this, "isConnecting");
    qt(this, "livekitRoom");
    qt(this, "participants");
    qt(this, "guestParticipantMetadata");
    qt(this, "roomName");
    qt(this, "_admin");
    let p2 = CoreContext.logLevel.toLowerCase();
    setLogLevel(p2), this.livekitRoom = new Room$2({
      // automatically manage subscribed video quality
      // adaptiveStream: true,
      // optimize publishing bandwidth and CPU for published tracks
      dynacast: true,
      // default capture settings
      videoCaptureDefaults: { resolution: VideoPresets.h720.resolution }
    }), this._baseUrl = u2, this._connectListeners = [], this._roomEventListenerRegistry = {}, this._jwt = l2, Object.values(RoomEvent).forEach((_) => {
      this._roomEventListenerRegistry[_] = /* @__PURE__ */ new Set();
    }), this._localParticipantEventListenerRegistry = {}, Object.values(ParticipantEvent).forEach((_) => {
      this._localParticipantEventListenerRegistry[_] = /* @__PURE__ */ new Set();
    }), this._specialEventListenerRegistry = {}, this._manager = v2, this._chatHistory = [], this.roomName = c, this.audioTracks = [], this.participants = [], this.guestParticipantMetadata = [], this.isConnecting = false, this.subscribeToRoomEvent(RoomEvent.DataReceived, (_, I2) => {
      var F2;
      const P2 = decoder$1.decode(_);
      switch (JSON.parse(P2).type) {
        case "ChatMessage":
          return this._appendChat(_, I2);
        case "ParticipantMetadataUpdate": {
          const H2 = decoder$1.decode(_), j = JSON.parse(H2);
          hasPermission((F2 = j == null ? void 0 : j.metadata) == null ? void 0 : F2.participantRole, Permission.ManageSelf) && this._updateGuestParticipantsStore(j);
          return;
        }
        default:
          return;
      }
    }), this.connect = this.connect.bind(this), this.subscribeToRoomEvent = this.subscribeToRoomEvent.bind(this), this.subscribeToConnect = this.subscribeToConnect.bind(this), this.subscribeToLocalParticipantEvent = this.subscribeToLocalParticipantEvent.bind(this), this.subscribeToSpecialEvent = this.subscribeToSpecialEvent.bind(this), this.unsubscribeFromRoomEvent = this.unsubscribeFromRoomEvent.bind(this), this.unsubscribeFromSpecialEvent = this.unsubscribeFromSpecialEvent.bind(this), this.unsubscribeFromConnect = this.unsubscribeFromConnect.bind(this), this.unsubscribeFromLocalParticipantEvent = this.unsubscribeFromLocalParticipantEvent.bind(this), this.sendChatMessage = this.sendChatMessage.bind(this), this.kickParticipant = this.kickParticipant.bind(this), this.updateParticipant = this.updateParticipant.bind(this), this.muteTrackAsAdmin = this.muteTrackAsAdmin.bind(this), this._updateParticipants = this._updateParticipants.bind(this), this.subscribeToRoomEvent(RoomEvent.ParticipantConnected, this._updateParticipants), this.subscribeToRoomEvent(RoomEvent.ParticipantDisconnected, this._updateParticipants), this.subscribeToRoomEvent(RoomEvent.TrackSubscribed, this._updateParticipants), this.subscribeToRoomEvent(RoomEvent.TrackUnsubscribed, this._updateParticipants), this.subscribeToRoomEvent(RoomEvent.LocalTrackPublished, this._updateParticipants), this.subscribeToRoomEvent(RoomEvent.LocalTrackUnpublished, this._updateParticipants), this.subscribeToRoomEvent(RoomEvent.Disconnected, () => {
      this._updateParticipants();
    }), this.subscribeToRoomEvent(RoomEvent.ParticipantMetadataChanged, (_, I2) => {
      if (_ !== (I2 == null ? void 0 : I2.metadata)) {
        const P2 = JSON.parse(I2 == null ? void 0 : I2.metadata);
        if (hasPermission(P2 == null ? void 0 : P2.participantRole, Permission.ManageSelf)) {
          if (P2.hasOwnProperty("isMirrored")) {
            const $ = {
              participantId: I2 == null ? void 0 : I2.identity,
              metadata: P2,
              type: "ParticipantMetadataUpdate"
              /* ParticipantMetadataUpdate */
            };
            this._updateGuestParticipantsStore($);
          }
          return;
        }
      }
    });
  }
  bindApiClient(u2) {
    this._apiClient = u2;
  }
  get isAdmin() {
    return jwtDecode(this._jwt).video.roomAdmin;
  }
  set isAdmin(u2) {
    log$1.warn("isAdmin cannot be set");
  }
  get token() {
    return this._jwt;
  }
  set token(u2) {
    this._jwt = u2;
  }
  get url() {
    return this._baseUrl;
  }
  set url(u2) {
  }
  get chatHistory() {
    return this._chatHistory;
  }
  set chatHistory(u2) {
    this._chatHistory = u2;
  }
  _updateGuestParticipantsStore(u2) {
    if (!this.guestParticipantMetadata.length)
      this.guestParticipantMetadata.push(u2);
    else {
      const c = this.guestParticipantMetadata.findIndex((l2) => l2.participantId === (u2 == null ? void 0 : u2.participantId));
      c > -1 ? this.guestParticipantMetadata[c] = u2 : this.guestParticipantMetadata.push(u2);
    }
  }
  _updateParticipants() {
    if (!this.livekitRoom || this.livekitRoom.state === ConnectionState.Disconnected) {
      this.participants = [];
      return;
    } else {
      const u2 = Array.from(this.livekitRoom.remoteParticipants.values()), c = [this.livekitRoom.localParticipant];
      c.push(...u2), this.guestParticipantMetadata = this.guestParticipantMetadata.filter((l2) => c.find((v2) => (v2 == null ? void 0 : v2.identity) === (l2 == null ? void 0 : l2.participantId))), this.participants = c;
    }
  }
  /**
  * @param identity Identity of the user that you wish to kick
  */
  async kickParticipant(u2) {
    if (this._admin)
      this._admin.removeParticipant(this.roomName, u2);
    else
      throw new Error("no admin permissions");
  }
  updateParticipant(u2, c) {
    if (this._admin) {
      const l2 = JSON.stringify(c);
      this._admin.updateParticipant(this.roomName, u2, l2);
    } else
      throw new Error("no admin permissions");
  }
  muteTrackAsAdmin(u2, c = true) {
    if (this._admin) {
      const l2 = this.participants.find((v2) => [...v2.audioTrackPublications.values(), ...v2.videoTrackPublications.values()].find((p2) => p2.trackSid === u2));
      if (!l2) {
        log$1.warn("Could not find participant for track:", { trackSid: u2 });
        return;
      }
      this._admin.mutePublishedTrack(this.roomName, l2 == null ? void 0 : l2.identity, u2, c);
    } else
      throw new Error("no admin permissions");
  }
  _appendChat(u2, c) {
    const l2 = decoder$1.decode(u2), v2 = JSON.parse(l2), p2 = c.identity, _ = c.name, I2 = { ...v2, displayName: _, sender: p2 };
    this.chatHistory = [...this.chatHistory, I2], this._triggerSpecialEvents("Chat", I2);
  }
  subscribeToConnect(u2) {
    return this._connectListeners.push(u2), () => this.unsubscribeFromConnect(u2);
  }
  unsubscribeFromConnect(u2) {
    this._connectListeners = this._connectListeners.filter((c) => c !== u2);
  }
  subscribeToSpecialEvent(u2, c) {
    return this._specialEventListenerRegistry[u2] || (this._specialEventListenerRegistry[u2] = /* @__PURE__ */ new Set()), this._specialEventListenerRegistry[u2].add(c), () => {
      this.unsubscribeFromSpecialEvent(u2, c);
    };
  }
  unsubscribeFromSpecialEvent(u2, c) {
    this._specialEventListenerRegistry[u2] || (this._specialEventListenerRegistry[u2] = /* @__PURE__ */ new Set()), this._specialEventListenerRegistry[u2].delete(c);
  }
  _triggerSpecialEvents(u2, ...c) {
    this._specialEventListenerRegistry[u2] || (this._specialEventListenerRegistry[u2] = /* @__PURE__ */ new Set()), this._specialEventListenerRegistry[u2].forEach((l2) => {
      l2(...c);
    });
  }
  /**
  * connect to livekit webrtc room
  * @param {string} identity unique user name to be displayed to other users
  */
  async connect(u2 = {}) {
    var c, l2;
    try {
      if (this.livekitRoom.state === "connected" || this.isConnecting)
        return;
      this.isConnecting = true, await this.livekitRoom.connect(`wss://${this._baseUrl}`, this._jwt, { ...u2 }), this.isConnecting = false, Object.values(RoomEvent).forEach((v2) => {
        this.livekitRoom.on(v2, (...p2) => {
          this._roomEventListenerRegistry[v2].forEach((_) => {
            _(...p2);
          });
        });
      }), Object.values(ParticipantEvent).forEach((v2) => {
        this.livekitRoom.localParticipant.on(v2, (...p2) => {
          this._localParticipantEventListenerRegistry[v2].forEach((_) => {
            _(...p2);
          });
        });
      }), this._updateParticipants(), this._connectListeners.forEach((v2) => v2(this.livekitRoom)), lib$2.LiveKitUtils.isRoomAdmin(this._jwt) ? (log$1.info("Room: Granting admin permissions"), log$1.debug("Livekit server: ", (c = this._apiClient) == null ? void 0 : c.getLiveKitServer(true)), this._admin = new dist.RoomServiceClient((l2 = this._apiClient) == null ? void 0 : l2.getLiveKitServer(true), void 0, void 0, this._jwt)) : log$1.debug("Room: Not an admin");
    } catch (v2) {
      this.isConnecting = false, log$1.error(v2);
    }
  }
  subscribeToLocalParticipantEvent(u2, c) {
    return this._localParticipantEventListenerRegistry[u2] || (this._localParticipantEventListenerRegistry[u2] = /* @__PURE__ */ new Set()), this._localParticipantEventListenerRegistry[u2].add(c), () => {
      this.unsubscribeFromLocalParticipantEvent(u2, c);
    };
  }
  unsubscribeFromLocalParticipantEvent(u2, c) {
    this._localParticipantEventListenerRegistry[u2] || (this._localParticipantEventListenerRegistry[u2] = /* @__PURE__ */ new Set()), this._localParticipantEventListenerRegistry[u2].delete(c);
  }
  subscribeToRoomEvent(u2, c) {
    return this._roomEventListenerRegistry[u2] || (this._roomEventListenerRegistry[u2] = /* @__PURE__ */ new Set()), this._roomEventListenerRegistry[u2].add(c), () => {
      this.unsubscribeFromRoomEvent(u2, c);
    };
  }
  unsubscribeFromRoomEvent(u2, c) {
    this._roomEventListenerRegistry[u2] || (this._roomEventListenerRegistry[u2] = /* @__PURE__ */ new Set()), this._roomEventListenerRegistry[u2].delete(c);
  }
  /**
  * Sends chat message to entire livekit room, or a private message (if specified) from local participant
  * @param {string[]} [recipients] The identities of the recipient participants. If undefined, will send message to all participants in the chat.
  * Only specify for private messages.
  * Do not include the local participant's identity in this.
  */
  sendChatMessage(u2) {
    const { message: c, recipients: l2, metadata: v2 } = u2;
    if (!this.livekitRoom || this.livekitRoom.state !== "connected")
      return;
    const p2 = { type: "ChatMessage", recipients: l2, metadata: v2, content: c, timestamp: Date.now() }, _ = JSON.stringify(p2), I2 = encoder$1.encode(_);
    if ({ ...p2, sender: this.livekitRoom.localParticipant.identity, displayName: this.livekitRoom.localParticipant.identity }, l2) {
      const P2 = l2.map(this.livekitRoom.getParticipantByIdentity);
      return this.livekitRoom.localParticipant.publishData(I2, { reliable: true, destinationIdentities: P2.map(($) => $.identity) }).then(() => {
        this._appendChat(I2, this.livekitRoom.localParticipant);
      });
    } else
      return this.livekitRoom.localParticipant.publishData(I2, { reliable: true }).then(() => {
        this._appendChat(I2, this.livekitRoom.localParticipant);
      });
  }
}
const webrtcManager = new RoomsManager(), encoder = new TextEncoder(), decoder = new TextDecoder(), simpleRooms = /* @__PURE__ */ new Map(), getRoom = (a420) => {
  if (!a420)
    return null;
  if (simpleRooms.get(a420))
    return simpleRooms.get(a420);
  const u2 = webrtcManager.rooms.get(a420);
  if (!u2)
    return null;
  const c = u2.livekitRoom, l2 = c == null ? void 0 : c.localParticipant;
  window.__StudioRoom = c, l2 || log$1.warn("No local participant!");
  const v2 = { useTracks: /* @__PURE__ */ new Set(), useTrack: /* @__PURE__ */ new Map(), useParticipants: /* @__PURE__ */ new Set(), useParticipant: /* @__PURE__ */ new Map(), useChatHistory: /* @__PURE__ */ new Set() };
  let p2 = { tracks: [], participants: [], result: { participants: [], tracks: [] }, chat: u2.chatHistory };
  const _ = () => {
    const ie2 = u2.participants, Q2 = u2.guestParticipantMetadata, ne2 = ie2.flatMap((de2) => de2.getTrackPublications().map((pe2) => ({ ...pe2, participant: de2 }))), Z2 = { participants: ie2.map((de2) => {
      const pe2 = Q2.find((be2) => be2.participantId === de2.identity);
      if (pe2) {
        let be2 = JSON.parse(de2.metadata);
        be2 = { ...be2, ...pe2.metadata }, de2.metadata = JSON.stringify(be2);
      }
      const le2 = JSON.parse(de2.metadata);
      return { id: de2.identity, isSelf: de2 === l2, connectionQuality: de2.connectionQuality, displayName: le2.displayName || de2.name, joinedAt: de2.joinedAt, role: le2.participantRole, meta: le2, trackIds: ne2.filter((be2) => be2.participant.sid === de2.sid).map((be2) => be2.trackSid) };
    }), tracks: ne2.map((de2) => {
      var le2, be2, ke2, Te2;
      const pe2 = JSON.parse((le2 = de2 == null ? void 0 : de2.participant) == null ? void 0 : le2.metadata);
      return { mediaStreamTrack: (be2 = de2.track) == null ? void 0 : be2.mediaStreamTrack, id: de2.trackSid, participantId: (ke2 = de2.participant) == null ? void 0 : ke2.identity, isMuted: (Te2 = de2.track) == null ? void 0 : Te2.isMuted, type: de2.source, isExternal: !!(pe2 != null && pe2[de2.trackSid]) };
    }) };
    p2 = { tracks: ne2, participants: ie2, result: Z2, chat: u2.chatHistory }, v2.useTracks.forEach((de2) => de2(Z2.tracks)), v2.useTrack.forEach((de2, pe2) => {
      pe2($(de2));
    }), v2.useParticipants.forEach((de2) => de2(Z2.participants)), v2.useParticipant.forEach((de2, pe2) => {
      pe2(F2(de2));
    }), v2.useChatHistory.forEach((de2) => {
      de2(p2.chat);
    });
  }, I2 = [RoomEvent.ParticipantConnected, RoomEvent.ParticipantDisconnected, RoomEvent.ParticipantMetadataChanged, RoomEvent.Disconnected, RoomEvent.TrackSubscribed, RoomEvent.TrackUnsubscribed, RoomEvent.LocalTrackPublished, RoomEvent.LocalTrackUnpublished, RoomEvent.ConnectionQualityChanged, RoomEvent.TrackMuted, RoomEvent.TrackUnmuted, RoomEvent.TrackStreamStateChanged];
  u2.subscribeToRoomEvent(RoomEvent.DataReceived, (ie2, Q2, ne2) => {
    const Z2 = decoder.decode(ie2);
    JSON.parse(Z2).type === DataType.ParticipantMetadataUpdate && _();
  }), I2.map((ie2) => u2.subscribeToRoomEvent(ie2, () => _())).push(u2.subscribeToSpecialEvent(SpecialEvent.Chat, _));
  const $ = (ie2) => p2.result.tracks.find((Q2) => Q2.id === ie2), F2 = (ie2) => p2.result.participants.find((Q2) => Q2.id === ie2), H2 = (ie2, Q2) => {
    const ne2 = l2.getTrackPublications().find((Z2) => Z2.trackSid === ie2);
    ne2 && (Q2 ? ne2.mute() : ne2.unmute());
  };
  let j, ee2;
  const X2 = {
    id: u2.roomName,
    participantId: l2.identity,
    setTrackEnabled: H2,
    setCameraEnabled: (ie2 = true) => l2.setCameraEnabled(ie2),
    setMicrophoneEnabled: (ie2 = true) => l2.setMicrophoneEnabled(ie2),
    setCamera: async (ie2 = {}) => {
      var ne2;
      if (j) {
        log$1.warn("Cannot set camera until previous has resolved");
        return;
      }
      j = true;
      let Q2;
      try {
        const de2 = l2.getTrackPublications().filter((le2) => (le2 == null ? void 0 : le2.source) === Track.Source.Camera).find((le2) => !$(le2 == null ? void 0 : le2.trackSid).isExternal), pe2 = await l2.createTracks({ video: { deviceId: ie2.deviceId, resolution: ie2.resolution || { width: 1280, height: 720, frameRate: 30, aspectRatio: 16 / 9 } } });
        de2 != null && de2.isMuted && pe2.forEach((le2) => {
          le2.mute();
        }), Q2 = await Promise.all(pe2.map((le2) => l2.publishTrack(le2))), de2 && l2.unpublishTrack(de2.track);
      } catch (Z2) {
        throw Z2;
      } finally {
        return j = false, $((ne2 = Q2[0]) == null ? void 0 : ne2.trackSid);
      }
    },
    setMicrophone: async (ie2) => {
      var ne2;
      if (ee2) {
        log$1.warn("Cannot set microphone until previous has resolved");
        return;
      }
      ee2 = true;
      let Q2;
      try {
        const de2 = l2.getTrackPublications().filter((le2) => le2.source === Track.Source.Microphone).find((le2) => !$(le2 == null ? void 0 : le2.trackSid).isExternal), pe2 = await l2.createTracks({ audio: ie2 || true });
        de2 != null && de2.isMuted && pe2.forEach((le2) => {
          le2.mute();
        }), Q2 = await Promise.all(pe2.map((le2) => l2.publishTrack(le2))), de2 && l2.unpublishTrack(de2.track);
      } catch (Z2) {
        throw Z2;
      } finally {
        return ee2 = false, $((ne2 = Q2[0]) == null ? void 0 : ne2.trackSid);
      }
    },
    addMicrophone: async (ie2) => {
      var pe2;
      if (ee2) {
        log$1.warn("Cannot set microphone until previous has resolved");
        return;
      }
      ee2 = true;
      const Q2 = await l2.createTracks({ audio: ie2 || true }), Z2 = l2.getTrackPublications().filter((le2) => le2.source === Track.Source.Microphone).find((le2) => {
        var ke2, Te2;
        const be2 = $(le2 == null ? void 0 : le2.trackSid);
        ((Te2 = (ke2 = be2 == null ? void 0 : be2.mediaStreamTrack) == null ? void 0 : ke2.getSettings()) == null ? void 0 : Te2.deviceId) === ie2.deviceId && (be2 == null || be2.isExternal);
      });
      Z2 != null && Z2.isMuted && Q2.forEach((le2) => {
        le2.mute();
      });
      const de2 = await Promise.all(Q2.map((le2) => l2.publishTrack(le2)));
      return Z2 && l2.unpublishTrack(Z2.track), ee2 = false, $((pe2 = de2[0]) == null ? void 0 : pe2.trackSid);
    },
    addCamera: async (ie2 = {}) => {
      var de2;
      const Q2 = await l2.createTracks({ video: { deviceId: ie2.deviceId, resolution: ie2.resolution || { width: 1280, height: 720, frameRate: 30, aspectRatio: 1.7777777777777777 } } }), ne2 = l2.getTrackPublications().find((pe2) => {
        var le2, be2, ke2;
        return (pe2 == null ? void 0 : pe2.source) === Track.Source.Camera && ((ke2 = (be2 = (le2 = pe2 == null ? void 0 : pe2.track) == null ? void 0 : le2.mediaStreamTrack) == null ? void 0 : be2.getSettings()) == null ? void 0 : ke2.deviceId) === ie2.deviceId;
      });
      ne2 != null && ne2.isMuted && Q2.forEach((pe2) => {
        pe2.mute();
      });
      const Z2 = await Promise.all(Q2.map((pe2) => l2.publishTrack(pe2)));
      return ne2 && l2.unpublishTrack(ne2.track), ee2 = false, $((de2 = Z2[0]) == null ? void 0 : de2.trackSid);
    },
    addScreen: async (ie2 = { audio: false }) => {
      const Q2 = await l2.createScreenTracks(ie2), ne2 = await Promise.all(Q2.map((pe2) => l2.publishTrack(pe2))), Z2 = ne2.find((pe2) => pe2.kind === "video"), de2 = ne2.find((pe2) => pe2.kind === "audio");
      return { screen: $(Z2 == null ? void 0 : Z2.trackSid), audio: $(de2 == null ? void 0 : de2.trackSid) };
    },
    removeTrack: async (ie2) => {
      const Q2 = p2.tracks.find((ne2) => ne2.trackSid === ie2);
      l2.unpublishTrack(Q2.track);
    },
    /* Setting the local participant metadata. */
    setLocalParticipantMetadata: async (ie2, Q2) => {
      const ne2 = JSON.stringify(Q2), Z2 = encoder.encode(JSON.stringify({ metadata: Q2, type: DataType.ParticipantMetadataUpdate, participantId: ie2 }));
      return l2.setMetadata(ne2), await l2.publishData(Z2, { reliable: true });
    },
    setParticipantMetadata: (ie2, Q2) => u2.updateParticipant(ie2, Q2),
    kickParticipant: u2.kickParticipant,
    muteTrackAsAdmin: u2.muteTrackAsAdmin,
    sendChatMessage: u2.sendChatMessage,
    // Callbacks
    getTracks: () => p2.result.tracks,
    useTracks: (ie2) => (v2.useTracks.add(ie2), ie2(p2.result.tracks), () => {
      v2.useTracks.delete(ie2);
    }),
    getTrack: $,
    useTrack: (ie2, Q2) => (v2.useTrack.set(Q2, ie2), Q2($(ie2)), () => {
      v2.useTrack.delete(Q2);
    }),
    getParticipant: F2,
    getParticipants: () => p2.result.participants,
    useParticipants: (ie2) => (v2.useParticipants.add(ie2), ie2(p2.result.participants), () => {
      v2.useParticipants.delete(ie2);
    }),
    useParticipant: (ie2, Q2) => (v2.useParticipant.set(Q2, ie2), Q2(F2(ie2)), () => {
      v2.useTrack.delete(Q2);
    }),
    useChatHistory: (ie2) => (v2.useChatHistory.add(ie2), ie2(p2.chat), () => {
      v2.useChatHistory.delete(ie2);
    }),
    useActiveSpeakers: (ie2) => {
      var ne2, Z2;
      const Q2 = (de2) => {
        ie2(de2.map((pe2) => pe2.identity));
      };
      return (ne2 = u2.livekitRoom) == null || ne2.on(RoomEvent.ActiveSpeakersChanged, Q2), Q2((Z2 = u2.livekitRoom) == null ? void 0 : Z2.activeSpeakers), () => {
        var de2;
        (de2 = u2.livekitRoom) == null || de2.off(RoomEvent.ActiveSpeakersChanged, Q2);
      };
    },
    sendData: (ie2, Q2 = []) => {
      const ne2 = encoder.encode(JSON.stringify(ie2)), Z2 = Q2 == null ? void 0 : Q2.map((de2) => {
        var pe2;
        return (pe2 = u2.livekitRoom) == null ? void 0 : pe2.getParticipantByIdentity(de2);
      }).filter(Boolean);
      return l2.publishData(ne2, { reliable: true, destinationIdentities: Z2.map((de2) => de2.identity) });
    },
    onData: (ie2) => {
      var ne2;
      const Q2 = (Z2, de2) => {
        const pe2 = JSON.parse(decoder.decode(Z2));
        ie2(pe2, de2 == null ? void 0 : de2.identity);
      };
      return (ne2 = u2.livekitRoom) == null || ne2.on(RoomEvent.DataReceived, Q2), () => {
        var Z2;
        (Z2 = u2.livekitRoom) == null || Z2.off(RoomEvent.DataReceived, Q2);
      };
    },
    connect: () => u2.connect(),
    disconnect: () => {
      var ie2;
      return (ie2 = u2.livekitRoom) == null ? void 0 : ie2.disconnect();
    },
    onDisconnected: (ie2) => {
      var Q2;
      return (Q2 = u2.livekitRoom) == null || Q2.on(RoomEvent.Disconnected, ie2), () => {
        var ne2;
        (ne2 = u2.livekitRoom) == null || ne2.off(RoomEvent.DataReceived, ie2);
      };
    },
    setAudioOutput: (ie2) => {
      var Q2;
      return (Q2 = u2.livekitRoom) == null ? void 0 : Q2.switchActiveDevice("audiooutput", ie2);
    }
  };
  return _(), simpleRooms.set(a420, X2), X2;
}, { state: state$2 } = CoreContext, getAccessTokenData = () => {
  var a420;
  return ((a420 = CoreContext.clients.accessTokenClaims) == null ? void 0 : a420.user) || {};
}, getBaseUser = () => state$2.user ? { id: state$2.user.id, props: state$2.user.props, name: state$2.user.name, projects: state$2.projects.map(toBaseProject), sources: state$2.sources.map(toBaseSource) } : null, toBaseProject = (a420) => {
  const { compositor: u2, videoApi: c, props: l2 = {}, role: v2 } = a420, { destinations: p2, encoding: _, rendering: I2, sources: P2 } = c.project, $ = { get: u2.get, getRoot: u2.getRoot, getParent: u2.getParent };
  Object.defineProperty($, "nodes", { get() {
    return u2.nodes.filter((j) => !j._deleted);
  } });
  const F2 = a420.videoApi.phase, H2 = a420.videoApi.broadcastId || null;
  return { broadcastPhase: F2, role: v2, broadcastId: H2, isLive: [ProjectBroadcastPhase.PROJECT_BROADCAST_PHASE_RUNNING, ProjectBroadcastPhase.PROJECT_BROADCAST_PHASE_STOPPING].includes(F2), scene: $, joinRoom: async (j = {}) => CoreContext.Command.joinRoom({ projectId: a420.id, ...j }), subscribe: (j) => CoreContext.subscribe((ee2, X2) => {
    X2.projectId && (X2 == null ? void 0 : X2.projectId) === a420.id && j(ee2, X2);
  }), destinations: p2.map(toBaseDestination), sources: P2.map(toBaseSource), encoding: _, rendering: I2, id: a420.id, hostDisplayName: a420.props.hostDisplayName, props: l2 };
}, toBaseDestination = (a420) => {
  var u2;
  return {
    id: a420.destinationId,
    enabled: a420.enabled,
    address: a420.address,
    // For backward compatibility, fall back to "metadata" as props.
    //  All new projects have a dedicated "props" field
    props: ((u2 = a420.metadata) == null ? void 0 : u2.props) || (a420 == null ? void 0 : a420.metadata) || {}
  };
}, toBaseSource = (a420) => {
  var u2;
  return { id: a420.sourceId, address: a420.address, props: ((u2 = a420.metadata) == null ? void 0 : u2.props) || {} };
}, hydrateProject = async (a420, u2, c) => {
  const l2 = a420.metadata || {}, v2 = { collectionId: a420.collectionId, projectId: a420.projectId, updateMask: [] };
  hasPermission(u2, Permission.ManageBroadcast) && a420.composition.studioSdk.version !== CoreContext.rendererVersion && (v2.composition = { studioSdk: { version: CoreContext.rendererVersion } }, v2.updateMask.push("composition.studioSdk.version")), c && (v2.rendering = { video: { width: c.x, height: c.y, framerate: 30 } }, v2.updateMask.push("rendering")), v2.updateMask.length && await CoreContext.clients.LiveApi().project.updateProject(v2);
  const _ = await layoutToProject(l2.layoutId, c);
  return {
    id: a420.projectId,
    compositor: _,
    role: u2,
    videoApi: { project: a420, phase: ProjectBroadcastPhase.PROJECT_BROADCAST_PHASE_UNSPECIFIED },
    layoutApi: { layoutId: l2.layoutId },
    // For backward compatibility, fall back to "metadata" as props.
    //  All new projects have a dedicated "props" field
    props: (l2 == null ? void 0 : l2.props) || l2
  };
}, sceneNodeToLayer = (a420) => {
  const { id: u2, props: c = {}, children: l2 = [] } = a420;
  return { ...u2 ? { id: u2 } : {}, type: c.type, data: { ...c }, children: l2.map((v2) => v2.id) };
}, nodeToLayer = (a420) => ({ id: a420.id, type: a420.props.type, data: { ...a420.props }, children: a420.childIds.map((u2) => u2) }), layerToNode = (a420) => ({ id: String(a420.id), props: { type: a420.type, ...a420.data }, childIds: a420.children.map((u2) => String(u2)) }), layoutToProject = async (a420, u2) => {
  const { layers: c } = await CoreContext.clients.LayoutApi().layer.listLayers({ layoutId: a420 });
  if (u2 && c) {
    const { x: _, y: I2 } = u2, P2 = c == null ? void 0 : c.reduce(($, F2) => $ ? $.data.isRoot ? $ : F2.data.isRoot || !c.some((H2) => H2.children.includes(F2.id)) ? F2 : $ : F2, null);
    if (P2) {
      const $ = await CoreContext.clients.LayoutApi().layer.updateLayer({ layoutId: P2.layoutId, layerId: P2.id, layer: { x: _, y: I2, data: { ...P2.data, size: { x: _, y: I2 } } } }), F2 = c.findIndex((H2) => H2.id === $.id);
      c[F2] = $;
    }
  }
  const l2 = c.map(layerToNode), v2 = l2.reduce((_, I2) => _ ? _.props.isRoot ? _ : I2.props.isRoot || !l2.some((P2) => P2.childIds.includes(I2.id)) ? I2 : _ : I2, null), p2 = v2 ? toSceneTree(l2, v2.id) : null;
  return CoreContext.compositor.loadProject(p2, a420);
}, getUser = () => {
  const a420 = state$2.user;
  if (!a420)
    throw new Error("User not loaded");
  return a420;
}, getProject = (a420) => state$2.projects.find((u2) => u2.id === a420), getProjectByLayoutId = (a420) => state$2.projects.find((u2) => u2.compositor.id === a420), getProjectRoom = (a420) => {
  var u2;
  return getRoom((u2 = getProject(a420)) == null ? void 0 : u2.roomId);
}, { connectionId } = CoreContext, latestUpdateVersion = {}, getNextNodeVersion = (a420) => (latestUpdateVersion[a420] || (latestUpdateVersion[a420] = 0), ++latestUpdateVersion[a420]), request = (a420, u2) => {
  const c = u2.map((l2) => {
    const [v2, p2] = l2;
    return { [v2]: p2 };
  });
  return log$1.debug("Batch request", c), CoreContext.clients.LayoutApi().layer.batch({ layoutId: a420, layers: c, requestMetadata: { connectionId, layoutId: a420, updateVersions: u2.filter(([l2]) => l2 === "update").map(([l2, v2]) => ({ [v2.id]: getNextNodeVersion(v2.id) })).reduce((l2, v2) => ({ ...v2, ...l2 }), {}) } });
}, compositorAdapter = (a420, u2) => ({
  async insert(c = {}, l2, v2) {
    const p2 = nodeToLayer({ id: null, props: c, childIds: [] });
    l2 ? p2.type = "child" : p2.type = "root", log$1.debug("Insert layer", p2);
    const _ = await CoreContext.clients.LayoutApi().layer.createLayer({ layoutId: a420, layer: { ...p2, requestMetadata: { connectionId, layoutId: a420 } } });
    if (_.code)
      throw new Error(_.message);
    const I2 = await u2.get(l2);
    if (l2 && !I2)
      throw Error("Parent not found with ID");
    if (I2) {
      const P2 = nodeToLayer(I2), $ = insertAt$1(v2, _.id, P2.children), F2 = { layoutId: a420, layerId: P2.id, layer: { children: $, requestMetadata: { connectionId, layoutId: a420, updateVersion: { [p2.id]: getNextNodeVersion(p2.id) } } } };
      await CoreContext.clients.LayoutApi().layer.updateLayer(F2);
    }
    return String(_.id);
  },
  async update(c, l2 = {}) {
    const v2 = u2.get(c), p2 = nodeToLayer({ ...v2, props: { ...v2.props, ...l2 } }), _ = { layoutId: a420, layerId: p2.id, layer: { ...p2, requestMetadata: { connectionId, layoutId: a420, updateVersions: { [p2.id]: getNextNodeVersion(p2.id) } } } };
    log$1.debug("Update layer", _), await CoreContext.clients.LayoutApi().layer.updateLayer(_);
  },
  async remove(c) {
    const l2 = await u2.getParent(c);
    if (l2) {
      const v2 = nodeToLayer(l2), p2 = v2.children.filter((I2) => I2 !== c), _ = { layoutId: a420, layerId: v2.id, layer: { children: p2, requestMetadata: { connectionId, layoutId: a420, updateVersions: { [v2.id]: getNextNodeVersion(v2.id) } } } };
      await CoreContext.clients.LayoutApi().layer.updateLayer(_);
    }
    await CoreContext.clients.LayoutApi().layer.deleteLayer({ layoutId: a420, layerId: c, payload: { requestMetadata: { connectionId, layoutId: a420 } } });
  },
  // @ts-ignore
  async reorder(c, l2) {
    const v2 = u2.get(c), p2 = nodeToLayer({ ...v2, childIds: l2 });
    log$1.debug("Reorder layer children", p2), await CoreContext.clients.LayoutApi().layer.updateLayer({ layoutId: a420, layerId: p2.id, layer: { children: p2.children, requestMetadata: { connectionId, layoutId: a420, updateVersions: { [p2.id]: getNextNodeVersion(p2.id) } } } });
  },
  // @ts-ignore
  async move(c, l2, v2) {
    const p2 = u2.get(c), _ = u2.get(u2.getParent(c).id), I2 = nodeToLayer({ ..._, childIds: pull$1(_.childIds, p2.id) }), P2 = u2.get(l2), $ = nodeToLayer({ ...P2, childIds: insertAt$1(v2, p2.id, P2.childIds) });
    log$1.debug("Move layers"), await Promise.all([CoreContext.clients.LayoutApi().layer.updateLayer({ layoutId: a420, layerId: I2.id, layer: { children: I2.children, requestMetadata: { connectionId, layoutId: a420, updateVersions: { [I2.id]: getNextNodeVersion(I2.id) } } } }), CoreContext.clients.LayoutApi().layer.updateLayer({ layoutId: a420, layerId: $.id, layer: { children: $.children, requestMetadata: { connectionId, layoutId: a420, updateVersions: { [$.id]: getNextNodeVersion($.id) } } } })]);
  },
  async batch(c) {
    const l2 = c.map(([p2, _]) => [p2, sceneNodeToLayer(_)]), v2 = await request(a420, l2);
    return log$1.debug("Batch response", v2), v2;
  }
}), config$1 = (a420) => ({ defaults: { previewTokenDuration: 1e3 * 60 * 60, guestTokenDuration: 1e3 * 60 * 60 * 12, transforms: { RoomParticipant: "LS-Room-Participant", Image: "LS-Image", Banner: "LS-Banner", Text: "LS-Text" } } });
var createRoot, m = ReactDOM;
if (process$1.env.NODE_ENV === "production")
  createRoot = m.createRoot, m.hydrateRoot;
else {
  var i = m.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED;
  createRoot = function(a420, u2) {
    i.usingClientEntryPoint = true;
    try {
      return m.createRoot(a420, u2);
    } finally {
      i.usingClientEntryPoint = false;
    }
  };
}
const RoomParticipant$1 = { name: "LS-Room-Participant", sourceType: "RoomParticipant", props: { isMuted: { type: Boolean, required: false, default: false }, volume: { type: Number, required: false, default: 1 } }, useSource(a420, u2) {
  return a420.find((c) => isMatch(c.props, u2.sourceProps));
}, create({ onUpdate: a420, onNewSource: u2, onRemove: c }, l2) {
  const v2 = document.createElement("div"), p2 = getProject(CoreContext.state.activeProjectId), _ = getProjectRoom(CoreContext.state.activeProjectId);
  Object.assign(v2.style, { position: "relative" });
  let I2, P2 = l2;
  const $ = (ee2, X2) => {
    const ie2 = ee2 / X2.width;
    return ie2 >= 0.5 ? 3 : ie2 > 0.25 ? 2 : ie2 > 0.15 ? 1 : 0;
  }, F2 = ({ props: ee2, source: X2 }) => {
    var ke2, Te2, q2;
    const ie2 = reactExports.useRef(), { volume: Q2 = 1, isHidden: ne2 = false } = ee2 || {}, [Z2, de2] = reactExports.useState(0), le2 = (X2 == null ? void 0 : X2.id) === (_ == null ? void 0 : _.participantId) || ((ke2 = X2 == null ? void 0 : X2.props) == null ? void 0 : ke2.participantId) === (_ == null ? void 0 : _.participantId) || (ee2 == null ? void 0 : ee2.isMuted), be2 = !(ee2 != null && ee2.isHidden) && ((Te2 = X2 == null ? void 0 : X2.props) == null ? void 0 : Te2.videoEnabled);
    return reactExports.useEffect(() => {
      ie2.current && (ie2.current.play().catch((z2) => {
        document.addEventListener("click", () => {
          var C2;
          return (C2 = ie2.current) == null ? void 0 : C2.play();
        }, { once: true });
      }), X2 != null && X2.value && (X2 == null ? void 0 : X2.value) !== ie2.current.srcObject ? ie2.current.srcObject = X2 == null ? void 0 : X2.value : X2 != null && X2.value || (ie2.current.srcObject = null));
    }, [ie2.current, X2 == null ? void 0 : X2.value]), reactExports.useEffect(() => {
      !ee2 && ie2.current && (ie2.current.srcObject = null, ie2.current = null);
    }, [ee2]), reactExports.useLayoutEffect(() => {
      if (!ie2.current)
        return;
      const z2 = () => {
        const b = ie2.current;
        b && de2($(b.clientWidth, { width: p2.compositor.getRoot().props.size.x, height: p2.compositor.getRoot().props.size.y }));
      }, C2 = new ResizeObserver((b) => {
        z2();
      });
      return z2(), C2 == null || C2.observe(ie2.current), () => {
        ie2.current && (C2 == null || C2.unobserve(ie2.current), ie2.current.srcObject = null);
      };
    }, [ie2.current, p2]), reactExports.useEffect(() => {
      ie2.current && (ie2.current.volume = Q2);
    }, [ie2.current, Q2]), /* @__PURE__ */ jsxs("div", { style: { position: "relative", display: "flex", height: "100%", width: "100%" }, children: [/* @__PURE__ */ jsx("div", { style: { background: "#222", position: "absolute", height: "100%", width: "100%", fontSize: "43px", color: "rgba(255,255,255,0.6)", display: "flex", alignItems: "center", justifyContent: "center", opacity: be2 ? "0" : "1" }, children: (X2 == null ? void 0 : X2.props.displayName) && /* @__PURE__ */ jsx("div", { style: { borderRadius: "50%", background: "#555", width: "70px", height: "70px", textTransform: "uppercase", display: "flex", alignItems: "center", justifyContent: "center", lineHeight: "1em" }, children: (X2 == null ? void 0 : X2.props.displayName.slice(0, 1)) || "" }) }), /* @__PURE__ */ jsx("div", { style: { position: "relative", display: "flex", height: "100%", width: "100%", ...!!((q2 = X2 == null ? void 0 : X2.props) != null && q2.mirrored) && { transform: "scaleX(-1)" } }, children: /* @__PURE__ */ jsx("video", { ref: ie2, autoPlay: true, muted: le2, disablePictureInPicture: true, playsInline: true, style: { left: "50%", top: "50%", position: "relative", transform: "translate3d(-50%, -50%, 0)", height: "100%", opacity: be2 ? "1" : "0", objectFit: (X2 == null ? void 0 : X2.props.type) === "screen" ? "contain" : "cover", background: "rgba(0,0,0,0.6)" } }) }), (X2 == null ? void 0 : X2.props.displayName) && /* @__PURE__ */ jsx("div", { className: "NameBannerContainer", style: { width: "100%", height: "100%", position: "absolute" }, children: /* @__PURE__ */ jsx("div", { className: "NameBanner", "data-size": Z2, style: { padding: "12px 30px", width: "fit-content", height: "fit-content", top: "100%", transform: "translateY(-100%)", left: 0 }, children: /* @__PURE__ */ jsx("div", { className: "NameBanner-body", children: X2.props.displayName }) }) })] });
  }, H2 = createRoot(v2), j = () => H2.render(/* @__PURE__ */ jsx(F2, { source: I2, props: P2 }));
  return a420((ee2) => {
    P2 = ee2, j();
  }), u2((ee2) => {
    I2 = ee2, j();
  }), c((ee2) => {
    P2 = ee2, j();
  }), { root: v2 };
} }, Square = { name: "LS-Square", props: { color: { default: "green" } }, create({ onUpdate: a420 }) {
  const u2 = document.createElement("div");
  return a420(({ color: c }) => {
    Object.assign(u2.style, { width: "100%", height: "100%", background: c || "red" });
  }), { root: u2 };
} }, Image$1 = { name: "LS-Image", props: { src: {}, fit: {} }, create({ onUpdate: a420 }) {
  const u2 = document.createElement("img");
  return a420(({ src: c, fit: l2 }) => {
    u2.setAttribute("src", c), Object.assign(u2.style, { width: "100%", height: "100%", objectFit: l2 });
  }), { root: u2 };
} }, Element$1 = { name: "Element", sourceType: "Element", create({ onUpdate: a420 }, { tagName: u2 }) {
  const c = document.createElement(u2);
  return a420(({ tagName: l2, attributes: v2 = {}, fields: p2 = {} }) => {
    l2 === "img" ? (c == null ? void 0 : c.src) !== v2.src && Object.keys(v2).forEach((_) => {
      c.setAttribute(_, v2[_]);
    }) : Object.keys(v2).forEach((_) => {
      c.setAttribute(_, v2[_]);
    }), Object.keys(p2).forEach((_) => {
      Object.assign(c[_], p2[_]);
    });
  }), { root: c };
} }, Video = { name: "LS-Video", sourceType: "LS-Video", create({ onUpdate: a420, onEvent: u2, onRemove: c }) {
  c(() => {
    clearInterval(v2);
  });
  const l2 = document.createElement("video");
  let v2;
  return a420(({ attributes: p2 = {}, fields: _ = {}, sourceProps: I2 = {}, id: P2 }) => {
    (l2.src !== p2.src || l2.id !== p2.id && p2.id) && (v2 && clearInterval(v2), Object.keys(p2).forEach(($) => {
      l2.setAttribute($, p2[$]);
    }), l2.onloadedmetadata = () => {
      p2.muted ? (l2.muted = true, l2.play()) : l2.muted = false;
    }, v2 = setInterval(() => {
      if (l2.duration) {
        const $ = l2.duration - l2.currentTime;
        trigger$1("VideoTimeUpdate", { category: P2, id: I2 == null ? void 0 : I2.id, time: Math.floor($) });
      }
    }, 1e3), l2.loop = !!p2.loop, l2.onended = () => {
      v2 && clearInterval(v2), trigger$1("VideoEnded", { id: I2 == null ? void 0 : I2.id, category: P2 });
    }, Object.keys(_).forEach(($) => {
      Object.assign(l2[$], _[$]);
    }));
  }), { root: l2 };
} }, Banner$1 = { name: "LS-Banner", sourceType: "Banner", props: { bannerId: { type: String, required: true } }, useSource(a420, u2) {
  return a420.find((c) => c.id === u2.bannerId);
}, create({ onUpdate: a420, onNewSource: u2 }, c) {
  const l2 = document.createElement("div");
  let v2, p2, _;
  const I2 = ({ currentSource: F2, latestSource: H2 }) => {
    const [j, ee2] = reactExports.useState(false), { headerText: X2, bodyText: ie2 } = (H2 == null ? void 0 : H2.value) || {};
    return reactExports.useEffect(() => {
      window.setTimeout(() => {
        ee2(!!F2);
      }), F2 || ee2(false);
    }, [F2]), /* @__PURE__ */ jsx("div", { className: "BannerContainer", style: { position: "absolute", top: 0, left: 0, width: "100%", height: "100%", display: "flex", flexDirection: "row", justifyContent: "flex-start", alignItems: "flex-end", transition: "200ms ease all", ...j ? { zIndex: 2, opacity: 1, transform: "translateX(0)" } : { zIndex: 1, opacity: 0, transform: "translateX(-200px)" } }, children: /* @__PURE__ */ jsxs("div", { className: "Banner", style: { padding: 10, background: "orange", width: "fit-content", height: "fit-content", maxWidth: "84%", position: "relative" }, children: [X2 && /* @__PURE__ */ jsx("div", { className: "Banner-header", style: { marginBottom: 6 }, children: X2 }), ie2 && /* @__PURE__ */ jsx("div", { className: "Banner-body", children: ie2 })] }) });
  }, P2 = createRoot(l2), $ = () => P2.render(/* @__PURE__ */ jsxs(Fragment, { children: [_ && _.id !== p2.id && /* @__PURE__ */ jsx(I2, { currentSource: null, latestSource: _ }, _ == null ? void 0 : _.id), /* @__PURE__ */ jsx(I2, { currentSource: v2, latestSource: p2 }, p2 == null ? void 0 : p2.id)] }));
  return a420(() => {
    $();
  }), u2((F2) => {
    _ = v2, v2 = F2, v2 && (p2 = v2), $();
  }), { root: l2 };
} };
function _extends() {
  return _extends = Object.assign ? Object.assign.bind() : function(a420) {
    for (var u2 = 1; u2 < arguments.length; u2++) {
      var c = arguments[u2];
      for (var l2 in c)
        Object.prototype.hasOwnProperty.call(c, l2) && (a420[l2] = c[l2]);
    }
    return a420;
  }, _extends.apply(this, arguments);
}
function _objectWithoutPropertiesLoose(a420, u2) {
  if (a420 == null)
    return {};
  var c = {}, l2 = Object.keys(a420), v2, p2;
  for (p2 = 0; p2 < l2.length; p2++)
    v2 = l2[p2], !(u2.indexOf(v2) >= 0) && (c[v2] = a420[v2]);
  return c;
}
function _setPrototypeOf(a420, u2) {
  return _setPrototypeOf = Object.setPrototypeOf ? Object.setPrototypeOf.bind() : function(l2, v2) {
    return l2.__proto__ = v2, l2;
  }, _setPrototypeOf(a420, u2);
}
function _inheritsLoose(a420, u2) {
  a420.prototype = Object.create(u2.prototype), a420.prototype.constructor = a420, _setPrototypeOf(a420, u2);
}
var propTypes = { exports: {} }, reactIs = { exports: {} }, reactIs_production_min = {};
/** @license React v16.13.1
* react-is.production.min.js
*
* Copyright (c) Facebook, Inc. and its affiliates.
*
* This source code is licensed under the MIT license found in the
* LICENSE file in the root directory of this source tree.
*/
var hasRequiredReactIs_production_min;
function requireReactIs_production_min() {
  if (hasRequiredReactIs_production_min)
    return reactIs_production_min;
  hasRequiredReactIs_production_min = 1;
  var a420 = typeof Symbol == "function" && Symbol.for, u2 = a420 ? Symbol.for("react.element") : 60103, c = a420 ? Symbol.for("react.portal") : 60106, l2 = a420 ? Symbol.for("react.fragment") : 60107, v2 = a420 ? Symbol.for("react.strict_mode") : 60108, p2 = a420 ? Symbol.for("react.profiler") : 60114, _ = a420 ? Symbol.for("react.provider") : 60109, I2 = a420 ? Symbol.for("react.context") : 60110, P2 = a420 ? Symbol.for("react.async_mode") : 60111, $ = a420 ? Symbol.for("react.concurrent_mode") : 60111, F2 = a420 ? Symbol.for("react.forward_ref") : 60112, H2 = a420 ? Symbol.for("react.suspense") : 60113, j = a420 ? Symbol.for("react.suspense_list") : 60120, ee2 = a420 ? Symbol.for("react.memo") : 60115, X2 = a420 ? Symbol.for("react.lazy") : 60116, ie2 = a420 ? Symbol.for("react.block") : 60121, Q2 = a420 ? Symbol.for("react.fundamental") : 60117, ne2 = a420 ? Symbol.for("react.responder") : 60118, Z2 = a420 ? Symbol.for("react.scope") : 60119;
  function de2(le2) {
    if (typeof le2 == "object" && le2 !== null) {
      var be2 = le2.$$typeof;
      switch (be2) {
        case u2:
          switch (le2 = le2.type, le2) {
            case P2:
            case $:
            case l2:
            case p2:
            case v2:
            case H2:
              return le2;
            default:
              switch (le2 = le2 && le2.$$typeof, le2) {
                case I2:
                case F2:
                case X2:
                case ee2:
                case _:
                  return le2;
                default:
                  return be2;
              }
          }
        case c:
          return be2;
      }
    }
  }
  function pe2(le2) {
    return de2(le2) === $;
  }
  return reactIs_production_min.AsyncMode = P2, reactIs_production_min.ConcurrentMode = $, reactIs_production_min.ContextConsumer = I2, reactIs_production_min.ContextProvider = _, reactIs_production_min.Element = u2, reactIs_production_min.ForwardRef = F2, reactIs_production_min.Fragment = l2, reactIs_production_min.Lazy = X2, reactIs_production_min.Memo = ee2, reactIs_production_min.Portal = c, reactIs_production_min.Profiler = p2, reactIs_production_min.StrictMode = v2, reactIs_production_min.Suspense = H2, reactIs_production_min.isAsyncMode = function(le2) {
    return pe2(le2) || de2(le2) === P2;
  }, reactIs_production_min.isConcurrentMode = pe2, reactIs_production_min.isContextConsumer = function(le2) {
    return de2(le2) === I2;
  }, reactIs_production_min.isContextProvider = function(le2) {
    return de2(le2) === _;
  }, reactIs_production_min.isElement = function(le2) {
    return typeof le2 == "object" && le2 !== null && le2.$$typeof === u2;
  }, reactIs_production_min.isForwardRef = function(le2) {
    return de2(le2) === F2;
  }, reactIs_production_min.isFragment = function(le2) {
    return de2(le2) === l2;
  }, reactIs_production_min.isLazy = function(le2) {
    return de2(le2) === X2;
  }, reactIs_production_min.isMemo = function(le2) {
    return de2(le2) === ee2;
  }, reactIs_production_min.isPortal = function(le2) {
    return de2(le2) === c;
  }, reactIs_production_min.isProfiler = function(le2) {
    return de2(le2) === p2;
  }, reactIs_production_min.isStrictMode = function(le2) {
    return de2(le2) === v2;
  }, reactIs_production_min.isSuspense = function(le2) {
    return de2(le2) === H2;
  }, reactIs_production_min.isValidElementType = function(le2) {
    return typeof le2 == "string" || typeof le2 == "function" || le2 === l2 || le2 === $ || le2 === p2 || le2 === v2 || le2 === H2 || le2 === j || typeof le2 == "object" && le2 !== null && (le2.$$typeof === X2 || le2.$$typeof === ee2 || le2.$$typeof === _ || le2.$$typeof === I2 || le2.$$typeof === F2 || le2.$$typeof === Q2 || le2.$$typeof === ne2 || le2.$$typeof === Z2 || le2.$$typeof === ie2);
  }, reactIs_production_min.typeOf = de2, reactIs_production_min;
}
var reactIs_development = {}, hasRequiredReactIs_development;
function requireReactIs_development() {
  return hasRequiredReactIs_development || (hasRequiredReactIs_development = 1, process$1.env.NODE_ENV !== "production" && function() {
    var a420 = typeof Symbol == "function" && Symbol.for, u2 = a420 ? Symbol.for("react.element") : 60103, c = a420 ? Symbol.for("react.portal") : 60106, l2 = a420 ? Symbol.for("react.fragment") : 60107, v2 = a420 ? Symbol.for("react.strict_mode") : 60108, p2 = a420 ? Symbol.for("react.profiler") : 60114, _ = a420 ? Symbol.for("react.provider") : 60109, I2 = a420 ? Symbol.for("react.context") : 60110, P2 = a420 ? Symbol.for("react.async_mode") : 60111, $ = a420 ? Symbol.for("react.concurrent_mode") : 60111, F2 = a420 ? Symbol.for("react.forward_ref") : 60112, H2 = a420 ? Symbol.for("react.suspense") : 60113, j = a420 ? Symbol.for("react.suspense_list") : 60120, ee2 = a420 ? Symbol.for("react.memo") : 60115, X2 = a420 ? Symbol.for("react.lazy") : 60116, ie2 = a420 ? Symbol.for("react.block") : 60121, Q2 = a420 ? Symbol.for("react.fundamental") : 60117, ne2 = a420 ? Symbol.for("react.responder") : 60118, Z2 = a420 ? Symbol.for("react.scope") : 60119;
    function de2(N2) {
      return typeof N2 == "string" || typeof N2 == "function" || // Note: its typeof might be other than 'symbol' or 'number' if it's a polyfill.
      N2 === l2 || N2 === $ || N2 === p2 || N2 === v2 || N2 === H2 || N2 === j || typeof N2 == "object" && N2 !== null && (N2.$$typeof === X2 || N2.$$typeof === ee2 || N2.$$typeof === _ || N2.$$typeof === I2 || N2.$$typeof === F2 || N2.$$typeof === Q2 || N2.$$typeof === ne2 || N2.$$typeof === Z2 || N2.$$typeof === ie2);
    }
    function pe2(N2) {
      if (typeof N2 == "object" && N2 !== null) {
        var re2 = N2.$$typeof;
        switch (re2) {
          case u2:
            var fe2 = N2.type;
            switch (fe2) {
              case P2:
              case $:
              case l2:
              case p2:
              case v2:
              case H2:
                return fe2;
              default:
                var Ne2 = fe2 && fe2.$$typeof;
                switch (Ne2) {
                  case I2:
                  case F2:
                  case X2:
                  case ee2:
                  case _:
                    return Ne2;
                  default:
                    return re2;
                }
            }
          case c:
            return re2;
        }
      }
    }
    var le2 = P2, be2 = $, ke2 = I2, Te2 = _, q2 = u2, z2 = F2, C2 = l2, b = X2, E2 = ee2, k = c, O2 = p2, A2 = v2, x2 = H2, Y2 = false;
    function B2(N2) {
      return Y2 || (Y2 = true, console.warn("The ReactIs.isAsyncMode() alias has been deprecated, and will be removed in React 17+. Update your code to use ReactIs.isConcurrentMode() instead. It has the exact same API.")), T2(N2) || pe2(N2) === P2;
    }
    function T2(N2) {
      return pe2(N2) === $;
    }
    function D2(N2) {
      return pe2(N2) === I2;
    }
    function te2(N2) {
      return pe2(N2) === _;
    }
    function me2(N2) {
      return typeof N2 == "object" && N2 !== null && N2.$$typeof === u2;
    }
    function Ie2(N2) {
      return pe2(N2) === F2;
    }
    function $e2(N2) {
      return pe2(N2) === l2;
    }
    function ye2(N2) {
      return pe2(N2) === X2;
    }
    function he2(N2) {
      return pe2(N2) === ee2;
    }
    function Me2(N2) {
      return pe2(N2) === c;
    }
    function Ae2(N2) {
      return pe2(N2) === p2;
    }
    function xe2(N2) {
      return pe2(N2) === v2;
    }
    function ae2(N2) {
      return pe2(N2) === H2;
    }
    reactIs_development.AsyncMode = le2, reactIs_development.ConcurrentMode = be2, reactIs_development.ContextConsumer = ke2, reactIs_development.ContextProvider = Te2, reactIs_development.Element = q2, reactIs_development.ForwardRef = z2, reactIs_development.Fragment = C2, reactIs_development.Lazy = b, reactIs_development.Memo = E2, reactIs_development.Portal = k, reactIs_development.Profiler = O2, reactIs_development.StrictMode = A2, reactIs_development.Suspense = x2, reactIs_development.isAsyncMode = B2, reactIs_development.isConcurrentMode = T2, reactIs_development.isContextConsumer = D2, reactIs_development.isContextProvider = te2, reactIs_development.isElement = me2, reactIs_development.isForwardRef = Ie2, reactIs_development.isFragment = $e2, reactIs_development.isLazy = ye2, reactIs_development.isMemo = he2, reactIs_development.isPortal = Me2, reactIs_development.isProfiler = Ae2, reactIs_development.isStrictMode = xe2, reactIs_development.isSuspense = ae2, reactIs_development.isValidElementType = de2, reactIs_development.typeOf = pe2;
  }()), reactIs_development;
}
var hasRequiredReactIs;
function requireReactIs() {
  return hasRequiredReactIs || (hasRequiredReactIs = 1, process$1.env.NODE_ENV === "production" ? reactIs.exports = requireReactIs_production_min() : reactIs.exports = requireReactIs_development()), reactIs.exports;
}
/*
object-assign
(c) Sindre Sorhus
@license MIT
*/
var objectAssign, hasRequiredObjectAssign;
function requireObjectAssign() {
  if (hasRequiredObjectAssign)
    return objectAssign;
  hasRequiredObjectAssign = 1;
  var a420 = Object.getOwnPropertySymbols, u2 = Object.prototype.hasOwnProperty, c = Object.prototype.propertyIsEnumerable;
  function l2(p2) {
    if (p2 == null)
      throw new TypeError("Object.assign cannot be called with null or undefined");
    return Object(p2);
  }
  function v2() {
    try {
      if (!Object.assign)
        return false;
      var p2 = new String("abc");
      if (p2[5] = "de", Object.getOwnPropertyNames(p2)[0] === "5")
        return false;
      for (var _ = {}, I2 = 0; I2 < 10; I2++)
        _["_" + String.fromCharCode(I2)] = I2;
      var P2 = Object.getOwnPropertyNames(_).map(function(F2) {
        return _[F2];
      });
      if (P2.join("") !== "0123456789")
        return false;
      var $ = {};
      return "abcdefghijklmnopqrst".split("").forEach(function(F2) {
        $[F2] = F2;
      }), Object.keys(Object.assign({}, $)).join("") === "abcdefghijklmnopqrst";
    } catch {
      return false;
    }
  }
  return objectAssign = v2() ? Object.assign : function(p2, _) {
    for (var I2, P2 = l2(p2), $, F2 = 1; F2 < arguments.length; F2++) {
      I2 = Object(arguments[F2]);
      for (var H2 in I2)
        u2.call(I2, H2) && (P2[H2] = I2[H2]);
      if (a420) {
        $ = a420(I2);
        for (var j = 0; j < $.length; j++)
          c.call(I2, $[j]) && (P2[$[j]] = I2[$[j]]);
      }
    }
    return P2;
  }, objectAssign;
}
var ReactPropTypesSecret_1, hasRequiredReactPropTypesSecret;
function requireReactPropTypesSecret() {
  if (hasRequiredReactPropTypesSecret)
    return ReactPropTypesSecret_1;
  hasRequiredReactPropTypesSecret = 1;
  var a420 = "SECRET_DO_NOT_PASS_THIS_OR_YOU_WILL_BE_FIRED";
  return ReactPropTypesSecret_1 = a420, ReactPropTypesSecret_1;
}
var has, hasRequiredHas;
function requireHas() {
  return hasRequiredHas || (hasRequiredHas = 1, has = Function.call.bind(Object.prototype.hasOwnProperty)), has;
}
var checkPropTypes_1, hasRequiredCheckPropTypes;
function requireCheckPropTypes() {
  if (hasRequiredCheckPropTypes)
    return checkPropTypes_1;
  hasRequiredCheckPropTypes = 1;
  var a420 = function() {
  };
  if (process$1.env.NODE_ENV !== "production") {
    var u2 = requireReactPropTypesSecret(), c = {}, l2 = requireHas();
    a420 = function(p2) {
      var _ = "Warning: " + p2;
      typeof console < "u" && console.error(_);
      try {
        throw new Error(_);
      } catch {
      }
    };
  }
  function v2(p2, _, I2, P2, $) {
    if (process$1.env.NODE_ENV !== "production") {
      for (var F2 in p2)
        if (l2(p2, F2)) {
          var H2;
          try {
            if (typeof p2[F2] != "function") {
              var j = Error((P2 || "React class") + ": " + I2 + " type `" + F2 + "` is invalid; it must be a function, usually from the `prop-types` package, but received `" + typeof p2[F2] + "`.This often happens because of typos such as `PropTypes.function` instead of `PropTypes.func`.");
              throw j.name = "Invariant Violation", j;
            }
            H2 = p2[F2](_, F2, P2, I2, null, u2);
          } catch (X2) {
            H2 = X2;
          }
          if (H2 && !(H2 instanceof Error) && a420((P2 || "React class") + ": type specification of " + I2 + " `" + F2 + "` is invalid; the type checker function must return `null` or an `Error` but returned a " + typeof H2 + ". You may have forgotten to pass an argument to the type checker creator (arrayOf, instanceOf, objectOf, oneOf, oneOfType, and shape all require an argument)."), H2 instanceof Error && !(H2.message in c)) {
            c[H2.message] = true;
            var ee2 = $ ? $() : "";
            a420("Failed " + I2 + " type: " + H2.message + (ee2 ?? ""));
          }
        }
    }
  }
  return v2.resetWarningCache = function() {
    process$1.env.NODE_ENV !== "production" && (c = {});
  }, checkPropTypes_1 = v2, checkPropTypes_1;
}
var factoryWithTypeCheckers, hasRequiredFactoryWithTypeCheckers;
function requireFactoryWithTypeCheckers() {
  if (hasRequiredFactoryWithTypeCheckers)
    return factoryWithTypeCheckers;
  hasRequiredFactoryWithTypeCheckers = 1;
  var a420 = requireReactIs(), u2 = requireObjectAssign(), c = requireReactPropTypesSecret(), l2 = requireHas(), v2 = requireCheckPropTypes(), p2 = function() {
  };
  process$1.env.NODE_ENV !== "production" && (p2 = function(I2) {
    var P2 = "Warning: " + I2;
    typeof console < "u" && console.error(P2);
    try {
      throw new Error(P2);
    } catch {
    }
  });
  function _() {
    return null;
  }
  return factoryWithTypeCheckers = function(I2, P2) {
    var $ = typeof Symbol == "function" && Symbol.iterator, F2 = "@@iterator";
    function H2(T2) {
      var D2 = T2 && ($ && T2[$] || T2[F2]);
      if (typeof D2 == "function")
        return D2;
    }
    var j = "<<anonymous>>", ee2 = { array: ne2("array"), bigint: ne2("bigint"), bool: ne2("boolean"), func: ne2("function"), number: ne2("number"), object: ne2("object"), string: ne2("string"), symbol: ne2("symbol"), any: Z2(), arrayOf: de2, element: pe2(), elementType: le2(), instanceOf: be2, node: z2(), objectOf: Te2, oneOf: ke2, oneOfType: q2, shape: b, exact: E2 };
    function X2(T2, D2) {
      return T2 === D2 ? T2 !== 0 || 1 / T2 === 1 / D2 : T2 !== T2 && D2 !== D2;
    }
    function ie2(T2, D2) {
      this.message = T2, this.data = D2 && typeof D2 == "object" ? D2 : {}, this.stack = "";
    }
    ie2.prototype = Error.prototype;
    function Q2(T2) {
      if (process$1.env.NODE_ENV !== "production")
        var D2 = {}, te2 = 0;
      function me2($e2, ye2, he2, Me2, Ae2, xe2, ae2) {
        if (Me2 = Me2 || j, xe2 = xe2 || he2, ae2 !== c) {
          if (P2) {
            var N2 = new Error("Calling PropTypes validators directly is not supported by the `prop-types` package. Use `PropTypes.checkPropTypes()` to call them. Read more at http://fb.me/use-check-prop-types");
            throw N2.name = "Invariant Violation", N2;
          } else if (process$1.env.NODE_ENV !== "production" && typeof console < "u") {
            var re2 = Me2 + ":" + he2;
            !D2[re2] && // Avoid spamming the console because they are often not actionable except for lib authors
            te2 < 3 && (p2("You are manually calling a React.PropTypes validation function for the `" + xe2 + "` prop on `" + Me2 + "`. This is deprecated and will throw in the standalone `prop-types` package. You may be seeing this warning due to a third-party PropTypes library. See https://fb.me/react-warning-dont-call-proptypes for details."), D2[re2] = true, te2++);
          }
        }
        return ye2[he2] == null ? $e2 ? ye2[he2] === null ? new ie2("The " + Ae2 + " `" + xe2 + "` is marked as required " + ("in `" + Me2 + "`, but its value is `null`.")) : new ie2("The " + Ae2 + " `" + xe2 + "` is marked as required in " + ("`" + Me2 + "`, but its value is `undefined`.")) : null : T2(ye2, he2, Me2, Ae2, xe2);
      }
      var Ie2 = me2.bind(null, false);
      return Ie2.isRequired = me2.bind(null, true), Ie2;
    }
    function ne2(T2) {
      function D2(te2, me2, Ie2, $e2, ye2, he2) {
        var Me2 = te2[me2], Ae2 = A2(Me2);
        if (Ae2 !== T2) {
          var xe2 = x2(Me2);
          return new ie2("Invalid " + $e2 + " `" + ye2 + "` of type " + ("`" + xe2 + "` supplied to `" + Ie2 + "`, expected ") + ("`" + T2 + "`."), { expectedType: T2 });
        }
        return null;
      }
      return Q2(D2);
    }
    function Z2() {
      return Q2(_);
    }
    function de2(T2) {
      function D2(te2, me2, Ie2, $e2, ye2) {
        if (typeof T2 != "function")
          return new ie2("Property `" + ye2 + "` of component `" + Ie2 + "` has invalid PropType notation inside arrayOf.");
        var he2 = te2[me2];
        if (!Array.isArray(he2)) {
          var Me2 = A2(he2);
          return new ie2("Invalid " + $e2 + " `" + ye2 + "` of type " + ("`" + Me2 + "` supplied to `" + Ie2 + "`, expected an array."));
        }
        for (var Ae2 = 0; Ae2 < he2.length; Ae2++) {
          var xe2 = T2(he2, Ae2, Ie2, $e2, ye2 + "[" + Ae2 + "]", c);
          if (xe2 instanceof Error)
            return xe2;
        }
        return null;
      }
      return Q2(D2);
    }
    function pe2() {
      function T2(D2, te2, me2, Ie2, $e2) {
        var ye2 = D2[te2];
        if (!I2(ye2)) {
          var he2 = A2(ye2);
          return new ie2("Invalid " + Ie2 + " `" + $e2 + "` of type " + ("`" + he2 + "` supplied to `" + me2 + "`, expected a single ReactElement."));
        }
        return null;
      }
      return Q2(T2);
    }
    function le2() {
      function T2(D2, te2, me2, Ie2, $e2) {
        var ye2 = D2[te2];
        if (!a420.isValidElementType(ye2)) {
          var he2 = A2(ye2);
          return new ie2("Invalid " + Ie2 + " `" + $e2 + "` of type " + ("`" + he2 + "` supplied to `" + me2 + "`, expected a single ReactElement type."));
        }
        return null;
      }
      return Q2(T2);
    }
    function be2(T2) {
      function D2(te2, me2, Ie2, $e2, ye2) {
        if (!(te2[me2] instanceof T2)) {
          var he2 = T2.name || j, Me2 = B2(te2[me2]);
          return new ie2("Invalid " + $e2 + " `" + ye2 + "` of type " + ("`" + Me2 + "` supplied to `" + Ie2 + "`, expected ") + ("instance of `" + he2 + "`."));
        }
        return null;
      }
      return Q2(D2);
    }
    function ke2(T2) {
      if (!Array.isArray(T2))
        return process$1.env.NODE_ENV !== "production" && (arguments.length > 1 ? p2("Invalid arguments supplied to oneOf, expected an array, got " + arguments.length + " arguments. A common mistake is to write oneOf(x, y, z) instead of oneOf([x, y, z]).") : p2("Invalid argument supplied to oneOf, expected an array.")), _;
      function D2(te2, me2, Ie2, $e2, ye2) {
        for (var he2 = te2[me2], Me2 = 0; Me2 < T2.length; Me2++)
          if (X2(he2, T2[Me2]))
            return null;
        var Ae2 = JSON.stringify(T2, function(ae2, N2) {
          var re2 = x2(N2);
          return re2 === "symbol" ? String(N2) : N2;
        });
        return new ie2("Invalid " + $e2 + " `" + ye2 + "` of value `" + String(he2) + "` " + ("supplied to `" + Ie2 + "`, expected one of " + Ae2 + "."));
      }
      return Q2(D2);
    }
    function Te2(T2) {
      function D2(te2, me2, Ie2, $e2, ye2) {
        if (typeof T2 != "function")
          return new ie2("Property `" + ye2 + "` of component `" + Ie2 + "` has invalid PropType notation inside objectOf.");
        var he2 = te2[me2], Me2 = A2(he2);
        if (Me2 !== "object")
          return new ie2("Invalid " + $e2 + " `" + ye2 + "` of type " + ("`" + Me2 + "` supplied to `" + Ie2 + "`, expected an object."));
        for (var Ae2 in he2)
          if (l2(he2, Ae2)) {
            var xe2 = T2(he2, Ae2, Ie2, $e2, ye2 + "." + Ae2, c);
            if (xe2 instanceof Error)
              return xe2;
          }
        return null;
      }
      return Q2(D2);
    }
    function q2(T2) {
      if (!Array.isArray(T2))
        return process$1.env.NODE_ENV !== "production" && p2("Invalid argument supplied to oneOfType, expected an instance of array."), _;
      for (var D2 = 0; D2 < T2.length; D2++) {
        var te2 = T2[D2];
        if (typeof te2 != "function")
          return p2("Invalid argument supplied to oneOfType. Expected an array of check functions, but received " + Y2(te2) + " at index " + D2 + "."), _;
      }
      function me2(Ie2, $e2, ye2, he2, Me2) {
        for (var Ae2 = [], xe2 = 0; xe2 < T2.length; xe2++) {
          var ae2 = T2[xe2], N2 = ae2(Ie2, $e2, ye2, he2, Me2, c);
          if (N2 == null)
            return null;
          N2.data && l2(N2.data, "expectedType") && Ae2.push(N2.data.expectedType);
        }
        var re2 = Ae2.length > 0 ? ", expected one of type [" + Ae2.join(", ") + "]" : "";
        return new ie2("Invalid " + he2 + " `" + Me2 + "` supplied to " + ("`" + ye2 + "`" + re2 + "."));
      }
      return Q2(me2);
    }
    function z2() {
      function T2(D2, te2, me2, Ie2, $e2) {
        return k(D2[te2]) ? null : new ie2("Invalid " + Ie2 + " `" + $e2 + "` supplied to " + ("`" + me2 + "`, expected a ReactNode."));
      }
      return Q2(T2);
    }
    function C2(T2, D2, te2, me2, Ie2) {
      return new ie2((T2 || "React class") + ": " + D2 + " type `" + te2 + "." + me2 + "` is invalid; it must be a function, usually from the `prop-types` package, but received `" + Ie2 + "`.");
    }
    function b(T2) {
      function D2(te2, me2, Ie2, $e2, ye2) {
        var he2 = te2[me2], Me2 = A2(he2);
        if (Me2 !== "object")
          return new ie2("Invalid " + $e2 + " `" + ye2 + "` of type `" + Me2 + "` " + ("supplied to `" + Ie2 + "`, expected `object`."));
        for (var Ae2 in T2) {
          var xe2 = T2[Ae2];
          if (typeof xe2 != "function")
            return C2(Ie2, $e2, ye2, Ae2, x2(xe2));
          var ae2 = xe2(he2, Ae2, Ie2, $e2, ye2 + "." + Ae2, c);
          if (ae2)
            return ae2;
        }
        return null;
      }
      return Q2(D2);
    }
    function E2(T2) {
      function D2(te2, me2, Ie2, $e2, ye2) {
        var he2 = te2[me2], Me2 = A2(he2);
        if (Me2 !== "object")
          return new ie2("Invalid " + $e2 + " `" + ye2 + "` of type `" + Me2 + "` " + ("supplied to `" + Ie2 + "`, expected `object`."));
        var Ae2 = u2({}, te2[me2], T2);
        for (var xe2 in Ae2) {
          var ae2 = T2[xe2];
          if (l2(T2, xe2) && typeof ae2 != "function")
            return C2(Ie2, $e2, ye2, xe2, x2(ae2));
          if (!ae2)
            return new ie2("Invalid " + $e2 + " `" + ye2 + "` key `" + xe2 + "` supplied to `" + Ie2 + "`.\nBad object: " + JSON.stringify(te2[me2], null, "  ") + `
Valid keys: ` + JSON.stringify(Object.keys(T2), null, "  "));
          var N2 = ae2(he2, xe2, Ie2, $e2, ye2 + "." + xe2, c);
          if (N2)
            return N2;
        }
        return null;
      }
      return Q2(D2);
    }
    function k(T2) {
      switch (typeof T2) {
        case "number":
        case "string":
        case "undefined":
          return true;
        case "boolean":
          return !T2;
        case "object":
          if (Array.isArray(T2))
            return T2.every(k);
          if (T2 === null || I2(T2))
            return true;
          var D2 = H2(T2);
          if (D2) {
            var te2 = D2.call(T2), me2;
            if (D2 !== T2.entries) {
              for (; !(me2 = te2.next()).done; )
                if (!k(me2.value))
                  return false;
            } else
              for (; !(me2 = te2.next()).done; ) {
                var Ie2 = me2.value;
                if (Ie2 && !k(Ie2[1]))
                  return false;
              }
          } else
            return false;
          return true;
        default:
          return false;
      }
    }
    function O2(T2, D2) {
      return T2 === "symbol" ? true : D2 ? D2["@@toStringTag"] === "Symbol" || typeof Symbol == "function" && D2 instanceof Symbol : false;
    }
    function A2(T2) {
      var D2 = typeof T2;
      return Array.isArray(T2) ? "array" : T2 instanceof RegExp ? "object" : O2(D2, T2) ? "symbol" : D2;
    }
    function x2(T2) {
      if (typeof T2 > "u" || T2 === null)
        return "" + T2;
      var D2 = A2(T2);
      if (D2 === "object") {
        if (T2 instanceof Date)
          return "date";
        if (T2 instanceof RegExp)
          return "regexp";
      }
      return D2;
    }
    function Y2(T2) {
      var D2 = x2(T2);
      switch (D2) {
        case "array":
        case "object":
          return "an " + D2;
        case "boolean":
        case "date":
        case "regexp":
          return "a " + D2;
        default:
          return D2;
      }
    }
    function B2(T2) {
      return !T2.constructor || !T2.constructor.name ? j : T2.constructor.name;
    }
    return ee2.checkPropTypes = v2, ee2.resetWarningCache = v2.resetWarningCache, ee2.PropTypes = ee2, ee2;
  }, factoryWithTypeCheckers;
}
var factoryWithThrowingShims, hasRequiredFactoryWithThrowingShims;
function requireFactoryWithThrowingShims() {
  if (hasRequiredFactoryWithThrowingShims)
    return factoryWithThrowingShims;
  hasRequiredFactoryWithThrowingShims = 1;
  var a420 = requireReactPropTypesSecret();
  function u2() {
  }
  function c() {
  }
  return c.resetWarningCache = u2, factoryWithThrowingShims = function() {
    function l2(_, I2, P2, $, F2, H2) {
      if (H2 !== a420) {
        var j = new Error("Calling PropTypes validators directly is not supported by the `prop-types` package. Use PropTypes.checkPropTypes() to call them. Read more at http://fb.me/use-check-prop-types");
        throw j.name = "Invariant Violation", j;
      }
    }
    l2.isRequired = l2;
    function v2() {
      return l2;
    }
    var p2 = { array: l2, bigint: l2, bool: l2, func: l2, number: l2, object: l2, string: l2, symbol: l2, any: l2, arrayOf: v2, element: l2, elementType: l2, instanceOf: v2, node: l2, objectOf: v2, oneOf: v2, oneOfType: v2, shape: v2, exact: v2, checkPropTypes: c, resetWarningCache: u2 };
    return p2.PropTypes = p2, p2;
  }, factoryWithThrowingShims;
}
if (process$1.env.NODE_ENV !== "production") {
  var ReactIs = requireReactIs(), throwOnDirectAccess = true;
  propTypes.exports = requireFactoryWithTypeCheckers()(ReactIs.isElement, throwOnDirectAccess);
} else
  propTypes.exports = requireFactoryWithThrowingShims()();
var propTypesExports = propTypes.exports;
const PropTypes = /* @__PURE__ */ getDefaultExportFromCjs$2(propTypesExports);
function hasClass(a420, u2) {
  return a420.classList ? !!u2 && a420.classList.contains(u2) : (" " + (a420.className.baseVal || a420.className) + " ").indexOf(" " + u2 + " ") !== -1;
}
function addClass(a420, u2) {
  a420.classList ? a420.classList.add(u2) : hasClass(a420, u2) || (typeof a420.className == "string" ? a420.className = a420.className + " " + u2 : a420.setAttribute("class", (a420.className && a420.className.baseVal || "") + " " + u2));
}
function replaceClassName(a420, u2) {
  return a420.replace(new RegExp("(^|\\s)" + u2 + "(?:\\s|$)", "g"), "$1").replace(/\s+/g, " ").replace(/^\s*|\s*$/g, "");
}
function removeClass$1(a420, u2) {
  a420.classList ? a420.classList.remove(u2) : typeof a420.className == "string" ? a420.className = replaceClassName(a420.className, u2) : a420.setAttribute("class", replaceClassName(a420.className && a420.className.baseVal || "", u2));
}
const config$4 = { disabled: false };
var timeoutsShape = process$1.env.NODE_ENV !== "production" ? PropTypes.oneOfType([PropTypes.number, PropTypes.shape({ enter: PropTypes.number, exit: PropTypes.number, appear: PropTypes.number }).isRequired]) : null, classNamesShape = process$1.env.NODE_ENV !== "production" ? PropTypes.oneOfType([PropTypes.string, PropTypes.shape({ enter: PropTypes.string, exit: PropTypes.string, active: PropTypes.string }), PropTypes.shape({ enter: PropTypes.string, enterDone: PropTypes.string, enterActive: PropTypes.string, exit: PropTypes.string, exitDone: PropTypes.string, exitActive: PropTypes.string })]) : null;
const TransitionGroupContext = React.createContext(null);
var forceReflow = function a415(u2) {
  return u2.scrollTop;
}, UNMOUNTED = "unmounted", EXITED = "exited", ENTERING = "entering", ENTERED = "entered", EXITING = "exiting", Transition = /* @__PURE__ */ function(a420) {
  _inheritsLoose(u2, a420);
  function u2(l2, v2) {
    var p2;
    p2 = a420.call(this, l2, v2) || this;
    var _ = v2, I2 = _ && !_.isMounting ? l2.enter : l2.appear, P2;
    return p2.appearStatus = null, l2.in ? I2 ? (P2 = EXITED, p2.appearStatus = ENTERING) : P2 = ENTERED : l2.unmountOnExit || l2.mountOnEnter ? P2 = UNMOUNTED : P2 = EXITED, p2.state = { status: P2 }, p2.nextCallback = null, p2;
  }
  u2.getDerivedStateFromProps = function(v2, p2) {
    var _ = v2.in;
    return _ && p2.status === UNMOUNTED ? { status: EXITED } : null;
  };
  var c = u2.prototype;
  return c.componentDidMount = function() {
    this.updateStatus(true, this.appearStatus);
  }, c.componentDidUpdate = function(v2) {
    var p2 = null;
    if (v2 !== this.props) {
      var _ = this.state.status;
      this.props.in ? _ !== ENTERING && _ !== ENTERED && (p2 = ENTERING) : (_ === ENTERING || _ === ENTERED) && (p2 = EXITING);
    }
    this.updateStatus(false, p2);
  }, c.componentWillUnmount = function() {
    this.cancelNextCallback();
  }, c.getTimeouts = function() {
    var v2 = this.props.timeout, p2, _, I2;
    return p2 = _ = I2 = v2, v2 != null && typeof v2 != "number" && (p2 = v2.exit, _ = v2.enter, I2 = v2.appear !== void 0 ? v2.appear : _), { exit: p2, enter: _, appear: I2 };
  }, c.updateStatus = function(v2, p2) {
    if (v2 === void 0 && (v2 = false), p2 !== null) {
      if (this.cancelNextCallback(), p2 === ENTERING) {
        if (this.props.unmountOnExit || this.props.mountOnEnter) {
          var _ = this.props.nodeRef ? this.props.nodeRef.current : ReactDOM.findDOMNode(this);
          _ && forceReflow(_);
        }
        this.performEnter(v2);
      } else
        this.performExit();
    } else
      this.props.unmountOnExit && this.state.status === EXITED && this.setState({ status: UNMOUNTED });
  }, c.performEnter = function(v2) {
    var p2 = this, _ = this.props.enter, I2 = this.context ? this.context.isMounting : v2, P2 = this.props.nodeRef ? [I2] : [ReactDOM.findDOMNode(this), I2], $ = P2[0], F2 = P2[1], H2 = this.getTimeouts(), j = I2 ? H2.appear : H2.enter;
    if (!v2 && !_ || config$4.disabled) {
      this.safeSetState({ status: ENTERED }, function() {
        p2.props.onEntered($);
      });
      return;
    }
    this.props.onEnter($, F2), this.safeSetState({ status: ENTERING }, function() {
      p2.props.onEntering($, F2), p2.onTransitionEnd(j, function() {
        p2.safeSetState({ status: ENTERED }, function() {
          p2.props.onEntered($, F2);
        });
      });
    });
  }, c.performExit = function() {
    var v2 = this, p2 = this.props.exit, _ = this.getTimeouts(), I2 = this.props.nodeRef ? void 0 : ReactDOM.findDOMNode(this);
    if (!p2 || config$4.disabled) {
      this.safeSetState({ status: EXITED }, function() {
        v2.props.onExited(I2);
      });
      return;
    }
    this.props.onExit(I2), this.safeSetState({ status: EXITING }, function() {
      v2.props.onExiting(I2), v2.onTransitionEnd(_.exit, function() {
        v2.safeSetState({ status: EXITED }, function() {
          v2.props.onExited(I2);
        });
      });
    });
  }, c.cancelNextCallback = function() {
    this.nextCallback !== null && (this.nextCallback.cancel(), this.nextCallback = null);
  }, c.safeSetState = function(v2, p2) {
    p2 = this.setNextCallback(p2), this.setState(v2, p2);
  }, c.setNextCallback = function(v2) {
    var p2 = this, _ = true;
    return this.nextCallback = function(I2) {
      _ && (_ = false, p2.nextCallback = null, v2(I2));
    }, this.nextCallback.cancel = function() {
      _ = false;
    }, this.nextCallback;
  }, c.onTransitionEnd = function(v2, p2) {
    this.setNextCallback(p2);
    var _ = this.props.nodeRef ? this.props.nodeRef.current : ReactDOM.findDOMNode(this), I2 = v2 == null && !this.props.addEndListener;
    if (!_ || I2) {
      setTimeout(this.nextCallback, 0);
      return;
    }
    if (this.props.addEndListener) {
      var P2 = this.props.nodeRef ? [this.nextCallback] : [_, this.nextCallback], $ = P2[0], F2 = P2[1];
      this.props.addEndListener($, F2);
    }
    v2 != null && setTimeout(this.nextCallback, v2);
  }, c.render = function() {
    var v2 = this.state.status;
    if (v2 === UNMOUNTED)
      return null;
    var p2 = this.props, _ = p2.children;
    p2.in, p2.mountOnEnter, p2.unmountOnExit, p2.appear, p2.enter, p2.exit, p2.timeout, p2.addEndListener, p2.onEnter, p2.onEntering, p2.onEntered, p2.onExit, p2.onExiting, p2.onExited, p2.nodeRef;
    var I2 = _objectWithoutPropertiesLoose(p2, ["children", "in", "mountOnEnter", "unmountOnExit", "appear", "enter", "exit", "timeout", "addEndListener", "onEnter", "onEntering", "onEntered", "onExit", "onExiting", "onExited", "nodeRef"]);
    return (
      // allows for nested Transitions
      /* @__PURE__ */ jsx(TransitionGroupContext.Provider, { value: null, children: typeof _ == "function" ? _(v2, I2) : React.cloneElement(React.Children.only(_), I2) })
    );
  }, u2;
}(React.Component);
Transition.contextType = TransitionGroupContext;
Transition.propTypes = process$1.env.NODE_ENV !== "production" ? {
  /**
  * A React reference to DOM element that need to transition:
  * https://stackoverflow.com/a/51127130/4671932
  *
  *   - When `nodeRef` prop is used, `node` is not passed to callback functions
  *      (e.g. `onEnter`) because user already has direct access to the node.
  *   - When changing `key` prop of `Transition` in a `TransitionGroup` a new
  *     `nodeRef` need to be provided to `Transition` with changed `key` prop
  *     (see
  *     [test/CSSTransition-test.js](https://github.com/reactjs/react-transition-group/blob/13435f897b3ab71f6e19d724f145596f5910581c/test/CSSTransition-test.js#L362-L437)).
  */
  nodeRef: PropTypes.shape({ current: typeof Element > "u" ? PropTypes.any : function(a420, u2, c, l2, v2, p2) {
    var _ = a420[u2];
    return PropTypes.instanceOf(_ && "ownerDocument" in _ ? _.ownerDocument.defaultView.Element : Element)(a420, u2, c, l2, v2, p2);
  } }),
  /**
  * A `function` child can be used instead of a React element. This function is
  * called with the current transition status (`'entering'`, `'entered'`,
  * `'exiting'`, `'exited'`), which can be used to apply context
  * specific props to a component.
  *
  * ```jsx
  * <Transition in={this.state.in} timeout={150}>
  *   {state => (
  *     <MyComponent className={`fade fade-${state}`} />
  *   )}
  * </Transition>
  * ```
  */
  children: PropTypes.oneOfType([PropTypes.func.isRequired, PropTypes.element.isRequired]).isRequired,
  /**
  * Show the component; triggers the enter or exit states
  */
  in: PropTypes.bool,
  /**
  * By default the child component is mounted immediately along with
  * the parent `Transition` component. If you want to "lazy mount" the component on the
  * first `in={true}` you can set `mountOnEnter`. After the first enter transition the component will stay
  * mounted, even on "exited", unless you also specify `unmountOnExit`.
  */
  mountOnEnter: PropTypes.bool,
  /**
  * By default the child component stays mounted after it reaches the `'exited'` state.
  * Set `unmountOnExit` if you'd prefer to unmount the component after it finishes exiting.
  */
  unmountOnExit: PropTypes.bool,
  /**
  * By default the child component does not perform the enter transition when
  * it first mounts, regardless of the value of `in`. If you want this
  * behavior, set both `appear` and `in` to `true`.
  *
  * > **Note**: there are no special appear states like `appearing`/`appeared`, this prop
  * > only adds an additional enter transition. However, in the
  * > `<CSSTransition>` component that first enter transition does result in
  * > additional `.appear-*` classes, that way you can choose to style it
  * > differently.
  */
  appear: PropTypes.bool,
  /**
  * Enable or disable enter transitions.
  */
  enter: PropTypes.bool,
  /**
  * Enable or disable exit transitions.
  */
  exit: PropTypes.bool,
  /**
  * The duration of the transition, in milliseconds.
  * Required unless `addEndListener` is provided.
  *
  * You may specify a single timeout for all transitions:
  *
  * ```jsx
  * timeout={500}
  * ```
  *
  * or individually:
  *
  * ```jsx
  * timeout={{
  *  appear: 500,
  *  enter: 300,
  *  exit: 500,
  * }}
  * ```
  *
  * - `appear` defaults to the value of `enter`
  * - `enter` defaults to `0`
  * - `exit` defaults to `0`
  *
  * @type {number | { enter?: number, exit?: number, appear?: number }}
  */
  timeout: function a416(u2) {
    var c = timeoutsShape;
    u2.addEndListener || (c = c.isRequired);
    for (var l2 = arguments.length, v2 = new Array(l2 > 1 ? l2 - 1 : 0), p2 = 1; p2 < l2; p2++)
      v2[p2 - 1] = arguments[p2];
    return c.apply(void 0, [u2].concat(v2));
  },
  /**
  * Add a custom transition end trigger. Called with the transitioning
  * DOM node and a `done` callback. Allows for more fine grained transition end
  * logic. Timeouts are still used as a fallback if provided.
  *
  * **Note**: when `nodeRef` prop is passed, `node` is not passed.
  *
  * ```jsx
  * addEndListener={(node, done) => {
  *   // use the css transitionend event to mark the finish of a transition
  *   node.addEventListener('transitionend', done, false);
  * }}
  * ```
  */
  addEndListener: PropTypes.func,
  /**
  * Callback fired before the "entering" status is applied. An extra parameter
  * `isAppearing` is supplied to indicate if the enter stage is occurring on the initial mount
  *
  * **Note**: when `nodeRef` prop is passed, `node` is not passed.
  *
  * @type Function(node: HtmlElement, isAppearing: bool) -> void
  */
  onEnter: PropTypes.func,
  /**
  * Callback fired after the "entering" status is applied. An extra parameter
  * `isAppearing` is supplied to indicate if the enter stage is occurring on the initial mount
  *
  * **Note**: when `nodeRef` prop is passed, `node` is not passed.
  *
  * @type Function(node: HtmlElement, isAppearing: bool)
  */
  onEntering: PropTypes.func,
  /**
  * Callback fired after the "entered" status is applied. An extra parameter
  * `isAppearing` is supplied to indicate if the enter stage is occurring on the initial mount
  *
  * **Note**: when `nodeRef` prop is passed, `node` is not passed.
  *
  * @type Function(node: HtmlElement, isAppearing: bool) -> void
  */
  onEntered: PropTypes.func,
  /**
  * Callback fired before the "exiting" status is applied.
  *
  * **Note**: when `nodeRef` prop is passed, `node` is not passed.
  *
  * @type Function(node: HtmlElement) -> void
  */
  onExit: PropTypes.func,
  /**
  * Callback fired after the "exiting" status is applied.
  *
  * **Note**: when `nodeRef` prop is passed, `node` is not passed.
  *
  * @type Function(node: HtmlElement) -> void
  */
  onExiting: PropTypes.func,
  /**
  * Callback fired after the "exited" status is applied.
  *
  * **Note**: when `nodeRef` prop is passed, `node` is not passed
  *
  * @type Function(node: HtmlElement) -> void
  */
  onExited: PropTypes.func
} : {};
function noop() {
}
Transition.defaultProps = { in: false, mountOnEnter: false, unmountOnExit: false, appear: false, enter: true, exit: true, onEnter: noop, onEntering: noop, onEntered: noop, onExit: noop, onExiting: noop, onExited: noop };
Transition.UNMOUNTED = UNMOUNTED;
Transition.EXITED = EXITED;
Transition.ENTERING = ENTERING;
Transition.ENTERED = ENTERED;
Transition.EXITING = EXITING;
const Transition$1 = Transition;
var _addClass = function a417(u2, c) {
  return u2 && c && c.split(" ").forEach(function(l2) {
    return addClass(u2, l2);
  });
}, removeClass = function a418(u2, c) {
  return u2 && c && c.split(" ").forEach(function(l2) {
    return removeClass$1(u2, l2);
  });
}, CSSTransition = /* @__PURE__ */ function(a420) {
  _inheritsLoose(u2, a420);
  function u2() {
    for (var l2, v2 = arguments.length, p2 = new Array(v2), _ = 0; _ < v2; _++)
      p2[_] = arguments[_];
    return l2 = a420.call.apply(a420, [this].concat(p2)) || this, l2.appliedClasses = { appear: {}, enter: {}, exit: {} }, l2.onEnter = function(I2, P2) {
      var $ = l2.resolveArguments(I2, P2), F2 = $[0], H2 = $[1];
      l2.removeClasses(F2, "exit"), l2.addClass(F2, H2 ? "appear" : "enter", "base"), l2.props.onEnter && l2.props.onEnter(I2, P2);
    }, l2.onEntering = function(I2, P2) {
      var $ = l2.resolveArguments(I2, P2), F2 = $[0], H2 = $[1], j = H2 ? "appear" : "enter";
      l2.addClass(F2, j, "active"), l2.props.onEntering && l2.props.onEntering(I2, P2);
    }, l2.onEntered = function(I2, P2) {
      var $ = l2.resolveArguments(I2, P2), F2 = $[0], H2 = $[1], j = H2 ? "appear" : "enter";
      l2.removeClasses(F2, j), l2.addClass(F2, j, "done"), l2.props.onEntered && l2.props.onEntered(I2, P2);
    }, l2.onExit = function(I2) {
      var P2 = l2.resolveArguments(I2), $ = P2[0];
      l2.removeClasses($, "appear"), l2.removeClasses($, "enter"), l2.addClass($, "exit", "base"), l2.props.onExit && l2.props.onExit(I2);
    }, l2.onExiting = function(I2) {
      var P2 = l2.resolveArguments(I2), $ = P2[0];
      l2.addClass($, "exit", "active"), l2.props.onExiting && l2.props.onExiting(I2);
    }, l2.onExited = function(I2) {
      var P2 = l2.resolveArguments(I2), $ = P2[0];
      l2.removeClasses($, "exit"), l2.addClass($, "exit", "done"), l2.props.onExited && l2.props.onExited(I2);
    }, l2.resolveArguments = function(I2, P2) {
      return l2.props.nodeRef ? [l2.props.nodeRef.current, I2] : [I2, P2];
    }, l2.getClassNames = function(I2) {
      var P2 = l2.props.classNames, $ = typeof P2 == "string", F2 = $ && P2 ? P2 + "-" : "", H2 = $ ? "" + F2 + I2 : P2[I2], j = $ ? H2 + "-active" : P2[I2 + "Active"], ee2 = $ ? H2 + "-done" : P2[I2 + "Done"];
      return { baseClassName: H2, activeClassName: j, doneClassName: ee2 };
    }, l2;
  }
  var c = u2.prototype;
  return c.addClass = function(v2, p2, _) {
    var I2 = this.getClassNames(p2)[_ + "ClassName"], P2 = this.getClassNames("enter"), $ = P2.doneClassName;
    p2 === "appear" && _ === "done" && $ && (I2 += " " + $), _ === "active" && v2 && forceReflow(v2), I2 && (this.appliedClasses[p2][_] = I2, _addClass(v2, I2));
  }, c.removeClasses = function(v2, p2) {
    var _ = this.appliedClasses[p2], I2 = _.base, P2 = _.active, $ = _.done;
    this.appliedClasses[p2] = {}, I2 && removeClass(v2, I2), P2 && removeClass(v2, P2), $ && removeClass(v2, $);
  }, c.render = function() {
    var v2 = this.props;
    v2.classNames;
    var p2 = _objectWithoutPropertiesLoose(v2, ["classNames"]);
    return /* @__PURE__ */ jsx(Transition$1, { ...p2, onEnter: this.onEnter, onEntered: this.onEntered, onEntering: this.onEntering, onExit: this.onExit, onExiting: this.onExiting, onExited: this.onExited });
  }, u2;
}(React.Component);
CSSTransition.defaultProps = { classNames: "" };
CSSTransition.propTypes = process$1.env.NODE_ENV !== "production" ? _extends({}, Transition$1.propTypes, {
  /**
  * The animation classNames applied to the component as it appears, enters,
  * exits or has finished the transition. A single name can be provided, which
  * will be suffixed for each stage, e.g. `classNames="fade"` applies:
  *
  * - `fade-appear`, `fade-appear-active`, `fade-appear-done`
  * - `fade-enter`, `fade-enter-active`, `fade-enter-done`
  * - `fade-exit`, `fade-exit-active`, `fade-exit-done`
  *
  * A few details to note about how these classes are applied:
  *
  * 1. They are _joined_ with the ones that are already defined on the child
  *    component, so if you want to add some base styles, you can use
  *    `className` without worrying that it will be overridden.
  *
  * 2. If the transition component mounts with `in={false}`, no classes are
  *    applied yet. You might be expecting `*-exit-done`, but if you think
  *    about it, a component cannot finish exiting if it hasn't entered yet.
  *
  * 2. `fade-appear-done` and `fade-enter-done` will _both_ be applied. This
  *    allows you to define different behavior for when appearing is done and
  *    when regular entering is done, using selectors like
  *    `.fade-enter-done:not(.fade-appear-done)`. For example, you could apply
  *    an epic entrance animation when element first appears in the DOM using
  *    [Animate.css](https://daneden.github.io/animate.css/). Otherwise you can
  *    simply use `fade-enter-done` for defining both cases.
  *
  * Each individual classNames can also be specified independently like:
  *
  * ```js
  * classNames={{
  *  appear: 'my-appear',
  *  appearActive: 'my-active-appear',
  *  appearDone: 'my-done-appear',
  *  enter: 'my-enter',
  *  enterActive: 'my-active-enter',
  *  enterDone: 'my-done-enter',
  *  exit: 'my-exit',
  *  exitActive: 'my-active-exit',
  *  exitDone: 'my-done-exit',
  * }}
  * ```
  *
  * If you want to set these classes using CSS Modules:
  *
  * ```js
  * import styles from './styles.css';
  * ```
  *
  * you might want to use camelCase in your CSS file, that way could simply
  * spread them instead of listing them one by one:
  *
  * ```js
  * classNames={{ ...styles }}
  * ```
  *
  * @type {string | {
  *  appear?: string,
  *  appearActive?: string,
  *  appearDone?: string,
  *  enter?: string,
  *  enterActive?: string,
  *  enterDone?: string,
  *  exit?: string,
  *  exitActive?: string,
  *  exitDone?: string,
  * }}
  */
  classNames: classNamesShape,
  /**
  * A `<Transition>` callback fired immediately after the 'enter' or 'appear' class is
  * applied.
  *
  * **Note**: when `nodeRef` prop is passed, `node` is not passed.
  *
  * @type Function(node: HtmlElement, isAppearing: bool)
  */
  onEnter: PropTypes.func,
  /**
  * A `<Transition>` callback fired immediately after the 'enter-active' or
  * 'appear-active' class is applied.
  *
  * **Note**: when `nodeRef` prop is passed, `node` is not passed.
  *
  * @type Function(node: HtmlElement, isAppearing: bool)
  */
  onEntering: PropTypes.func,
  /**
  * A `<Transition>` callback fired immediately after the 'enter' or
  * 'appear' classes are **removed** and the `done` class is added to the DOM node.
  *
  * **Note**: when `nodeRef` prop is passed, `node` is not passed.
  *
  * @type Function(node: HtmlElement, isAppearing: bool)
  */
  onEntered: PropTypes.func,
  /**
  * A `<Transition>` callback fired immediately after the 'exit' class is
  * applied.
  *
  * **Note**: when `nodeRef` prop is passed, `node` is not passed
  *
  * @type Function(node: HtmlElement)
  */
  onExit: PropTypes.func,
  /**
  * A `<Transition>` callback fired immediately after the 'exit-active' is applied.
  *
  * **Note**: when `nodeRef` prop is passed, `node` is not passed
  *
  * @type Function(node: HtmlElement)
  */
  onExiting: PropTypes.func,
  /**
  * A `<Transition>` callback fired immediately after the 'exit' classes
  * are **removed** and the `exit-done` class is added to the DOM node.
  *
  * **Note**: when `nodeRef` prop is passed, `node` is not passed
  *
  * @type Function(node: HtmlElement)
  */
  onExited: PropTypes.func
}) : {};
const CSSTransition$1 = CSSTransition;
var _leaveRenders, _enterRenders;
function areChildrenDifferent(a420, u2) {
  return !(a420 === u2 || React.isValidElement(a420) && React.isValidElement(u2) && a420.key != null && a420.key === u2.key);
}
var modes = { out: "out-in", in: "in-out" }, callHook = function a419(u2, c, l2) {
  return function() {
    var v2;
    u2.props[c] && (v2 = u2.props)[c].apply(v2, arguments), l2();
  };
}, leaveRenders = (_leaveRenders = {}, _leaveRenders[modes.out] = function(a420) {
  var u2 = a420.current, c = a420.changeState;
  return React.cloneElement(u2, { in: false, onExited: callHook(u2, "onExited", function() {
    c(ENTERING, null);
  }) });
}, _leaveRenders[modes.in] = function(a420) {
  var u2 = a420.current, c = a420.changeState, l2 = a420.children;
  return [u2, React.cloneElement(l2, { in: true, onEntered: callHook(l2, "onEntered", function() {
    c(ENTERING);
  }) })];
}, _leaveRenders), enterRenders = (_enterRenders = {}, _enterRenders[modes.out] = function(a420) {
  var u2 = a420.children, c = a420.changeState;
  return React.cloneElement(u2, { in: true, onEntered: callHook(u2, "onEntered", function() {
    c(ENTERED, React.cloneElement(u2, { in: true }));
  }) });
}, _enterRenders[modes.in] = function(a420) {
  var u2 = a420.current, c = a420.children, l2 = a420.changeState;
  return [React.cloneElement(u2, { in: false, onExited: callHook(u2, "onExited", function() {
    l2(ENTERED, React.cloneElement(c, { in: true }));
  }) }), React.cloneElement(c, { in: true })];
}, _enterRenders), SwitchTransition = /* @__PURE__ */ function(a420) {
  _inheritsLoose(u2, a420);
  function u2() {
    for (var l2, v2 = arguments.length, p2 = new Array(v2), _ = 0; _ < v2; _++)
      p2[_] = arguments[_];
    return l2 = a420.call.apply(a420, [this].concat(p2)) || this, l2.state = { status: ENTERED, current: null }, l2.appeared = false, l2.changeState = function(I2, P2) {
      P2 === void 0 && (P2 = l2.state.current), l2.setState({ status: I2, current: P2 });
    }, l2;
  }
  var c = u2.prototype;
  return c.componentDidMount = function() {
    this.appeared = true;
  }, u2.getDerivedStateFromProps = function(v2, p2) {
    return v2.children == null ? { current: null } : p2.status === ENTERING && v2.mode === modes.in ? { status: ENTERING } : p2.current && areChildrenDifferent(p2.current, v2.children) ? { status: EXITING } : { current: React.cloneElement(v2.children, { in: true }) };
  }, c.render = function() {
    var v2 = this.props, p2 = v2.children, _ = v2.mode, I2 = this.state, P2 = I2.status, $ = I2.current, F2 = { children: p2, current: $, changeState: this.changeState, status: P2 }, H2;
    switch (P2) {
      case ENTERING:
        H2 = enterRenders[_](F2);
        break;
      case EXITING:
        H2 = leaveRenders[_](F2);
        break;
      case ENTERED:
        H2 = $;
    }
    return /* @__PURE__ */ jsx(TransitionGroupContext.Provider, { value: { isMounting: !this.appeared }, children: H2 });
  }, u2;
}(React.Component);
SwitchTransition.propTypes = process$1.env.NODE_ENV !== "production" ? {
  /**
  * Transition modes.
  * `out-in`: Current element transitions out first, then when complete, the new element transitions in.
  * `in-out`: New element transitions in first, then when complete, the current element transitions out.
  *
  * @type {'out-in'|'in-out'}
  */
  mode: PropTypes.oneOf([modes.in, modes.out]),
  /**
  * Any `Transition` or `CSSTransition` component.
  */
  children: PropTypes.oneOfType([PropTypes.element.isRequired])
} : {};
SwitchTransition.defaultProps = { mode: modes.out };
const SwitchTransition$1 = SwitchTransition, Animations = { "fade-in": ".fade-in{-webkit-animation:fade-in;animation:fade-in}@-webkit-keyframes fade-in{0%{opacity:0}100%{opacity:1}}@keyframes fade-in{0%{opacity:0}100%{opacity:1}}", "fade-out": ".fade-out{-webkit-animation:fade-out;animation:fade-out}@-webkit-keyframes fade-out{0%{opacity:1}100%{opacity:0}}@keyframes fade-out{0%{opacity:1}100%{opacity:0}}", "slide-in-blurred-top": ".slide-in-blurred-top{-webkit-animation:slide-in-blurred-top .6s cubic-bezier(.23,1.000,.32,1.000) both;animation:slide-in-blurred-top .6s cubic-bezier(.23,1.000,.32,1.000) both}@-webkit-keyframes slide-in-blurred-top{0%{-webkit-transform:translateY(-1000px) scaleY(2.5) scaleX(.2);transform:translateY(-1000px) scaleY(2.5) scaleX(.2);-webkit-transform-origin:50% 0;transform-origin:50% 0;-webkit-filter:blur(40px);filter:blur(40px);opacity:0}100%{-webkit-transform:translateY(0) scaleY(1) scaleX(1);transform:translateY(0) scaleY(1) scaleX(1);-webkit-transform-origin:50% 50%;transform-origin:50% 50%;-webkit-filter:blur(0);filter:blur(0);opacity:1}}@keyframes slide-in-blurred-top{0%{-webkit-transform:translateY(-1000px) scaleY(2.5) scaleX(.2);transform:translateY(-1000px) scaleY(2.5) scaleX(.2);-webkit-transform-origin:50% 0;transform-origin:50% 0;-webkit-filter:blur(40px);filter:blur(40px);opacity:0}100%{-webkit-transform:translateY(0) scaleY(1) scaleX(1);transform:translateY(0) scaleY(1) scaleX(1);-webkit-transform-origin:50% 50%;transform-origin:50% 50%;-webkit-filter:blur(0);filter:blur(0);opacity:1}}", "slide-in-left": ".slide-in-left{-webkit-animation:slide-in-left .5s cubic-bezier(.25,.46,.45,.94) both;animation:slide-in-left .5s cubic-bezier(.25,.46,.45,.94) both}@-webkit-keyframes slide-in-left{0%{-webkit-transform:translateX(-1000px);transform:translateX(-1000px);opacity:0}100%{-webkit-transform:translateX(0);transform:translateX(0);opacity:1}}@keyframes slide-in-left{0%{-webkit-transform:translateX(-1000px);transform:translateX(-1000px);opacity:0}100%{-webkit-transform:translateX(0);transform:translateX(0);opacity:1}}", "slide-out-left": ".slide-out-left{-webkit-animation:slide-out-left .5s cubic-bezier(.55,.085,.68,.53) both;animation:slide-out-left .5s cubic-bezier(.55,.085,.68,.53) both}@-webkit-keyframes slide-out-left{0%{-webkit-transform:translateX(0);transform:translateX(0);opacity:1}100%{-webkit-transform:translateX(-1000px);transform:translateX(-1000px);opacity:0}}@keyframes slide-out-left{0%{-webkit-transform:translateX(0);transform:translateX(0);opacity:1}100%{-webkit-transform:translateX(-1000px);transform:translateX(-1000px);opacity:0}}" }, APIKitAnimation = (a420) => {
  const { enter: u2, exit: c, children: l2, tag: v2 = "div", direction: p2 = "normal", duration: _ = 500, id: I2, type: P2 } = a420, $ = I2 ? `${P2}-${I2}` : `${P2}-api-kit-animation`;
  return /* @__PURE__ */ jsxs("div", { style: { height: "100%", width: "100%" }, children: [/* @__PURE__ */ jsx("style", { dangerouslySetInnerHTML: { __html: renderStyle(P2, u2, c, _, p2) } }), /* @__PURE__ */ jsx(SwitchTransition$1, { mode: "out-in", children: /* @__PURE__ */ jsx(CSSTransition$1, { addEndListener: (F2, H2) => {
    F2.addEventListener("transitionend", H2, false);
  }, classNames: { enter: `${P2}-default-enter`, enterActive: u2, exit: `${P2}-default-leave`, exitActive: c }, timeout: _, children: /* @__PURE__ */ jsx("div", { style: { height: "100%", width: "100%" }, children: l2 }) }, $) })] });
}, renderStyle = (a420, u2, c, l2, v2) => `
        body {
          margin: 0;
          padding: 0;
        }
        
        ${Animations[u2]}
        
        ${Animations[c]}

        .${a420}-transition {
          transition: opacity ${l2}ms ease-out};
        }

        .${a420}-default-enter {
          opacity: 0;
        }

        .${a420}-default-enter.${u2} {
          animation-direction: ${v2};
          animation-duration: ${l2 / 1e3}s;
          animation-fill-mode: both;
          animation-timing-function: ease-out;
        }

        .${a420}-default-leave {
          opacity: 1;
        }

        .${a420}-default-leave.${c} {
          animation-direction: ${v2};
          animation-duration: ${l2 / 1e3}s;
          animation-timing-function: ease-out;
          animation-fill-mode: both;
        }
        `, APIKitAnimation$1 = APIKitAnimation;
var APIKitAnimationTypes = /* @__PURE__ */ ((a420) => (a420.FADE_IN = "fade-in", a420.FADE_OUT = "fade-out", a420.SLIDE_IN_BLURRED_TOP = "slide-in-blurred-top", a420.SLIDE_IN_LEFT = "slide-in-left", a420.SLIDE_OUT_LEFT = "slide-out-left", a420))(APIKitAnimationTypes || {});
const Logo$1 = { name: "LS-Logo", sourceType: "Logo", create({ onUpdate: a420 }, { sourceProps: u2 }) {
  const c = document.createElement("div"), v2 = getProject(CoreContext.state.activeProjectId).compositor.getRoot(), { x: p2 } = v2.props.size, _ = (p2 ?? 1280) / 1920, I2 = (H2) => H2 * _ + "px", P2 = ({ source: H2 }) => {
    var le2;
    const { src: j, meta: ee2 } = (H2 == null ? void 0 : H2.sourceProps) || {}, { id: X2 } = H2 || {}, [ie2, Q2] = React.useState(false);
    reactExports.useEffect(() => {
      Q2(false);
    }, [X2]);
    const { offsetX: ne2 = 40, offsetY: Z2 = 40, height: de2 = 135, width: pe2 = 240 } = (ee2 == null ? void 0 : ee2.style) || {};
    return /* @__PURE__ */ jsx(APIKitAnimation$1, { type: "logo", id: X2, enter: APIKitAnimationTypes.FADE_IN, exit: APIKitAnimationTypes.FADE_OUT, duration: 400, children: /* @__PURE__ */ jsx("div", { style: { opacity: ie2 ? 1 : 0, width: "100%", height: "100%" }, className: "logo-transition", children: j && /* @__PURE__ */ jsx("div", { className: "logo wrapper", style: { padding: `${I2(Z2)} ${I2(ne2)}` }, children: /* @__PURE__ */ jsx("img", { style: { height: "100%", width: "100%", maxHeight: de2 ? I2(de2) : "none", maxWidth: pe2 ? I2(pe2) : "none", ...(le2 = u2 == null ? void 0 : u2.meta) == null ? void 0 : le2.style, ...ee2 == null ? void 0 : ee2.style }, src: j, onLoad: () => Q2(true) }) }) }) });
  }, $ = createRoot(c), F2 = (H2) => $.render(/* @__PURE__ */ jsx(P2, { source: H2 }));
  return a420((H2) => {
    F2({ ...H2 });
  }), { root: c };
} }, Iframe = ({ url: a420, allowFullScreen: u2, position: c, display: l2, height: v2, width: p2, overflow: _, styles: I2, onLoad: P2, id: $, frameBorder: F2, className: H2, name: j, target: ee2, iframeRef: X2, children: ie2, src: Q2 }) => {
  const ne2 = Object.assign({ src: Q2 || a420, target: ee2 || null, style: { position: c || null, display: l2 || "block", overflow: _ || null, ...I2 }, name: j || null, className: H2 || null, id: $ || null, onLoad: P2 || null, height: v2 || "100%", width: p2 || "100%", allow: "autoplay" });
  let Z2 = /* @__PURE__ */ Object.create(null);
  for (let de2 of Object.keys(ne2))
    ne2[de2] != null && (Z2[de2] = ne2[de2]);
  for (let de2 of Object.keys(Z2.style))
    Z2.style[de2] == null && delete Z2.style[de2];
  if (u2)
    if ("allow" in Z2) {
      const de2 = Z2.allow.replace("fullscreen", "");
      Z2.allow = `fullscreen ${de2.trim()}`.trim();
    } else
      Z2.allow = "fullscreen";
  return F2 >= 0 && (Z2.style.hasOwnProperty("border") || (Z2.style.border = F2)), /* @__PURE__ */ jsx(Fragment, { children: ie2 ? /* @__PURE__ */ jsx("iframe", { ref: X2, ...Z2, children: ie2 }) : /* @__PURE__ */ jsx("iframe", { ref: X2, ...Z2 }) });
}, Iframe$1 = Iframe, Overlay = { name: "LS-Overlay", sourceType: "Overlay", create({ onUpdate: a420, onRemove: u2 }, { sourceProps: c }) {
  u2(() => {
    clearInterval(p2);
  });
  const l2 = document.createElement("div"), v2 = getProject(CoreContext.state.activeProjectId).role;
  let p2;
  const _ = ({ source: j, setStartAnimation: ee2 }) => {
    const { src: X2, meta: ie2, height: Q2, width: ne2 } = (j == null ? void 0 : j.sourceProps) || {}, Z2 = React.useRef(null);
    reactExports.useEffect(() => {
      Z2.current && (Z2.current.style.removeProperty("transformOrigin"), Z2.current.style.removeProperty("transform"));
    }, [X2]);
    const de2 = () => {
      if (Z2.current) {
        const le2 = getProject(CoreContext.state.activeProjectId).compositor.getRoot(), { x: be2, y: ke2 } = le2.props.size;
        let Te2 = Z2.current.clientWidth, q2 = Z2.current.clientHeight, z2;
        Te2 && q2 ? z2 = Math.min(be2 / Te2, ke2 / q2) : z2 = 1, Z2.current.style.willChange = "transform", Z2.current.style.transformOrigin = "0 0", Z2.current.style.transform = `scale(${z2}) translateZ(0)`, ee2(true);
      }
    };
    return /* @__PURE__ */ jsx(Fragment, { children: /* @__PURE__ */ jsx(Iframe$1, { url: X2, frameBorder: 0, iframeRef: Z2, height: Q2, width: ne2, onLoad: de2, styles: { ...ie2 == null ? void 0 : ie2.style } }, j.id) });
  }, I2 = ({ source: j, setStartAnimation: ee2 }) => {
    var z2;
    const { src: X2, type: ie2, meta: Q2, loop: ne2 } = (j == null ? void 0 : j.sourceProps) || {}, { id: Z2, sourceType: de2 } = j || {}, [pe2, le2] = React.useState(null), be2 = React.useRef(null);
    console.log("Updated current time", (z2 = be2 == null ? void 0 : be2.current) == null ? void 0 : z2.currentTime);
    const ke2 = React.useCallback((C2) => {
      be2.current = C2, le2(C2 ? C2.id : null);
    }, []), Te2 = React.useCallback(() => {
      be2 != null && be2.current && be2.current.play().catch(() => {
        var C2;
        be2.current.muted = true, (C2 = be2.current) == null || C2.play();
      });
    }, [X2]), q2 = React.useCallback(() => {
      p2 && clearInterval(p2), hasPermission(v2, Permission.UpdateProject) && trigger$1("VideoEnded", { id: Z2, category: ie2 });
    }, [X2]);
    return React.useEffect(() => {
      Q2 && be2 != null && be2.current && pe2 && hasPermission(v2, Permission.ManageSelf) && Q2 != null && Q2.time && (be2.current.currentTime = Number(Q2 == null ? void 0 : Q2.time));
    }, [Q2 == null ? void 0 : Q2.time, pe2]), React.useEffect(() => () => {
      p2 && clearInterval(p2);
    }, [Z2]), React.useEffect(() => {
      pe2 ? be2.current && (be2.current.src = X2, be2.current.play().catch(() => {
        be2.current.muted = true, be2.current.play();
      }), hasPermission(v2, Permission.UpdateProject) && (p2 = setInterval(() => {
        if (be2.current.duration) {
          const C2 = be2.current.duration - be2.current.currentTime;
          trigger$1("VideoTimeUpdate", { category: de2, id: Z2, time: Math.floor(C2) });
        }
      }, 1e3))) : p2 && clearInterval(p2);
    }, [pe2]), /* @__PURE__ */ jsx(Fragment, { children: X2 && /* @__PURE__ */ jsx("video", { loop: ne2, id: Z2, ref: ke2, style: { ...c.meta.style, ...Q2.style }, onLoadedData: Te2, onEnded: q2, onCanPlay: () => ee2(true) }) });
  }, P2 = ({ source: j, setStartAnimation: ee2 }) => {
    const { src: X2, meta: ie2 } = (j == null ? void 0 : j.sourceProps) || {};
    return /* @__PURE__ */ jsx(Fragment, { children: X2 && /* @__PURE__ */ jsx("img", { style: { ...c.meta.style, ...ie2.style }, src: X2, onLoad: () => ee2(true) }) });
  }, $ = ({ source: j }) => {
    const { type: ee2 } = (j == null ? void 0 : j.sourceProps) || {}, { id: X2 } = j || {}, [ie2, Q2] = React.useState(false);
    return reactExports.useEffect(() => {
      Q2(false);
    }, [X2]), /* @__PURE__ */ jsx(APIKitAnimation$1, { id: X2, type: "overlay", enter: APIKitAnimationTypes.FADE_IN, exit: APIKitAnimationTypes.FADE_OUT, duration: 400, children: /* @__PURE__ */ jsxs("div", { style: { opacity: ie2 ? 1 : 0 }, className: "overlayContainer overlay-transition", children: [X2 && ee2 === "image" && /* @__PURE__ */ jsx(P2, { source: j, setStartAnimation: Q2 }), X2 && ee2 === "video" && /* @__PURE__ */ jsx(I2, { source: j, setStartAnimation: Q2 }), X2 && ee2 === "custom" && /* @__PURE__ */ jsx(_, { source: j, setStartAnimation: Q2 })] }) });
  }, F2 = createRoot(l2), H2 = (j) => F2.render(/* @__PURE__ */ jsx(Fragment, { children: /* @__PURE__ */ jsx($, { source: j }) }));
  return a420((j) => {
    H2({ ...j });
  }), { root: l2 };
} };
var functionExpression = /[\s]*([a-z-]+)[\s]*\([\s]*([^\)]+)[\s]*\)[\s]*/i, floatExpression = /^(\-?\d+\.?\d{0,5})/, toFloat = parseFloat;
function ensurePercent(a420) {
  return typeof a420 == "number" ? a420 : toFloat(a420) * 0.01;
}
function formatPercent(a420) {
  return formatFloat(a420 * 100) + "%";
}
function formatFloat(a420) {
  return floatExpression.exec(a420.toString())[1];
}
function parseCSSFunction(a420) {
  var u2 = functionExpression.exec(a420);
  if (!(!u2 || !u2.length))
    return [u2[1]].concat(u2[2].split(","));
}
function cssFunction(a420, u2) {
  var c = Array.prototype.join.call(u2, ", ");
  return a420 + "(" + c + ")";
}
var math = Math, round = math.round;
function roundFloat(a420, u2) {
  return round(a420 * u2) / u2;
}
var _a, RGB = "rgb", HSL = "hsl", converters = (_a = {}, _a[RGB + HSL] = RGBtoHSL, _a[HSL + RGB] = HSLtoRGB, _a), maxChannelValues = { r: 255, g: 255, b: 255, h: 360, s: 1, l: 1, a: 1 };
function color(a420) {
  return parseHexCode(a420) || parseColorFunction(a420) || rgb(255, 0, 0);
}
function rgb(a420, u2, c, l2) {
  return new ColorHelper(
    RGB,
    a420,
    u2,
    c,
    l2 === void 0 ? 1 : ensurePercent(l2),
    l2 !== void 0
    /* hasAlpha*/
  );
}
function convertHelper(a420, u2, c) {
  var l2 = u2.f, v2 = u2.r, p2 = u2.g, _ = u2.b, I2 = u2.a, P2 = c === void 0 ? u2.o : c;
  return l2 !== a420 ? converters[l2 + a420](v2, p2, _, I2, P2) : c === void 0 ? u2 : new ColorHelper(l2, v2, p2, _, I2, P2);
}
var ColorHelper = (
  /** @class */
  function() {
    function a420(u2, c, l2, v2, p2, _) {
      var I2 = this;
      I2.f = u2, I2.o = _;
      var P2 = u2 === HSL;
      I2.r = clampColor(P2 ? "h" : "r", c), I2.g = clampColor(P2 ? "s" : "g", l2), I2.b = clampColor(P2 ? "l" : "b", v2), I2.a = clampColor("a", p2);
    }
    return a420.prototype.toString = function() {
      var u2 = this, c = u2.o, l2 = u2.f, v2 = u2.r, p2 = u2.g, _ = u2.b, I2 = u2.a, P2, $;
      if (l2 === RGB)
        P2 = c ? "rgba" : RGB, $ = [round(v2), round(p2), round(_)];
      else if (l2 === HSL)
        P2 = c ? "hsla" : HSL, $ = [round(v2), formatPercent(roundFloat(p2, 100)), formatPercent(roundFloat(_, 100))];
      else
        throw new Error("Invalid color format");
      return c && $.push(formatFloat(roundFloat(I2, 1e5))), cssFunction(P2, $);
    }, a420.prototype.toHexString = function() {
      var u2 = convertHelper(RGB, this);
      return "#" + (toHex(u2.r) + toHex(u2.g) + toHex(u2.b)).toUpperCase();
    }, a420.prototype.toHSL = function() {
      return convertHelper(HSL, this, false);
    }, a420.prototype.toHSLA = function() {
      return convertHelper(HSL, this, true);
    }, a420.prototype.toRGB = function() {
      return convertHelper(RGB, this, false);
    }, a420.prototype.toRGBA = function() {
      return convertHelper(RGB, this, true);
    }, a420.prototype.red = function() {
      var u2 = this;
      return (u2.f === RGB ? u2 : u2.toRGB()).r;
    }, a420.prototype.green = function() {
      var u2 = this;
      return (u2.f === RGB ? u2 : u2.toRGB()).g;
    }, a420.prototype.blue = function() {
      var u2 = this;
      return (u2.f === RGB ? u2 : u2.toRGB()).b;
    }, a420.prototype.hue = function() {
      var u2 = this;
      return (u2.f === HSL ? u2 : u2.toHSL()).r;
    }, a420.prototype.saturation = function() {
      var u2 = this;
      return (u2.f === HSL ? u2 : u2.toHSL()).g;
    }, a420.prototype.lightness = function() {
      var u2 = this;
      return (u2.f === HSL ? u2 : u2.toHSL()).b;
    }, a420.prototype.alpha = function() {
      return this.a;
    }, a420.prototype.opacity = function() {
      return this.a;
    }, a420.prototype.invert = function() {
      var u2 = this, c = convertHelper(RGB, u2);
      return convertHelper(u2.f, new a420(RGB, 255 - c.r, 255 - c.g, 255 - c.b, u2.a, u2.o));
    }, a420.prototype.lighten = function(u2, c) {
      var l2 = this, v2 = convertHelper(HSL, l2), p2 = maxChannelValues.l, _ = v2.b + (c ? p2 - v2.b : p2) * ensurePercent(u2);
      return convertHelper(l2.f, new a420(HSL, v2.r, v2.g, _, l2.a, l2.o));
    }, a420.prototype.darken = function(u2, c) {
      var l2 = this, v2 = convertHelper(HSL, l2), p2 = v2.b - (c ? v2.b : maxChannelValues.l) * ensurePercent(u2);
      return convertHelper(l2.f, new a420(HSL, v2.r, v2.g, p2, l2.a, l2.o));
    }, a420.prototype.saturate = function(u2, c) {
      var l2 = this, v2 = convertHelper(HSL, l2), p2 = maxChannelValues.s, _ = v2.g + (c ? p2 - v2.g : p2) * ensurePercent(u2);
      return convertHelper(l2.f, new a420(HSL, v2.r, _, v2.b, l2.a, l2.o));
    }, a420.prototype.desaturate = function(u2, c) {
      var l2 = this, v2 = convertHelper(HSL, l2), p2 = maxChannelValues.s, _ = v2.g - (c ? v2.g : p2) * ensurePercent(u2);
      return convertHelper(l2.f, new a420(HSL, v2.r, _, v2.b, l2.a, l2.o));
    }, a420.prototype.grayscale = function() {
      return this.desaturate(1);
    }, a420.prototype.fade = function(u2) {
      var c = this, l2 = clampColor("a", ensurePercent(u2));
      return convertHelper(c.f, new a420(c.f, c.r, c.g, c.b, l2, true));
    }, a420.prototype.fadeOut = function(u2, c) {
      var l2 = this, v2 = 1, p2 = clampColor("a", l2.a - (c ? l2.a : v2) * ensurePercent(u2));
      return convertHelper(l2.f, new a420(l2.f, l2.r, l2.g, l2.b, p2, true));
    }, a420.prototype.fadeIn = function(u2, c) {
      var l2 = this, v2 = 1, p2 = clampColor("a", l2.a + (c ? l2.a : v2) * ensurePercent(u2));
      return convertHelper(l2.f, new a420(l2.f, l2.r, l2.g, l2.b, p2, true));
    }, a420.prototype.mix = function(u2, c) {
      var l2 = this, v2 = ensureColor(u2), p2 = convertHelper(RGB, l2), _ = convertHelper(RGB, v2), I2 = c === void 0 ? 0.5 : c, P2 = 2 * I2 - 1, $ = Math.abs(p2.a - _.a), F2 = ((P2 * $ === -1 ? P2 : (P2 + $) / (1 + P2 * $)) + 1) / 2, H2 = 1 - F2, j = new a420(RGB, round(p2.r * F2 + _.r * H2), round(p2.g * F2 + _.g * H2), round(p2.b * F2 + _.b * H2), p2.a * I2 + _.a * (1 - I2), l2.o || v2.o);
      return convertHelper(this.f, j);
    }, a420.prototype.tint = function(u2) {
      return rgb(255, 255, 255).mix(this, u2);
    }, a420.prototype.shade = function(u2) {
      return rgb(0, 0, 0).mix(this, u2);
    }, a420.prototype.spin = function(u2) {
      var c = this, l2 = convertHelper(HSL, c);
      return convertHelper(c.f, new a420(HSL, modDegrees(l2.r + u2), l2.g, l2.b, c.a, c.o));
    }, a420;
  }()
);
function toHex(a420) {
  var u2 = round(a420);
  return (u2 < 16 ? "0" : "") + u2.toString(16);
}
function modDegrees(a420) {
  return ((a420 < 0 ? 360 : 0) + a420 % 360) % 360;
}
function RGBtoHSL(a420, u2, c, l2, v2) {
  var p2 = a420 / 255, _ = u2 / 255, I2 = c / 255, P2 = Math.min(p2, _, I2), $ = Math.max(p2, _, I2), F2 = (P2 + $) / 2, H2 = $ - P2, j;
  $ === P2 ? j = 0 : p2 === $ ? j = (_ - I2) / H2 : _ === $ ? j = 2 + (I2 - p2) / H2 : I2 === $ ? j = 4 + (p2 - _) / H2 : j = 0, j = Math.min(j * 60, 360), j < 0 && (j += 360);
  var ee2;
  return $ === P2 ? ee2 = 0 : F2 <= 0.5 ? ee2 = H2 / ($ + P2) : ee2 = H2 / (2 - $ - P2), new ColorHelper(HSL, j, ee2, F2, l2, v2);
}
function HSLtoRGB(a420, u2, c, l2, v2) {
  var p2 = a420 / 360, _ = u2, I2 = c;
  if (_ === 0) {
    var P2 = I2 * 255;
    return new ColorHelper(RGB, P2, P2, P2, l2, v2);
  }
  for (var $ = I2 < 0.5 ? I2 * (1 + _) : I2 + _ - I2 * _, F2 = 2 * I2 - $, H2 = 0, j = 0, ee2 = 0, X2 = 0; X2 < 3; X2++) {
    var ie2 = p2 + 0.3333333333333333 * -(X2 - 1);
    ie2 < 0 && ie2++, ie2 > 1 && ie2--;
    var P2 = void 0;
    6 * ie2 < 1 ? P2 = F2 + ($ - F2) * 6 * ie2 : 2 * ie2 < 1 ? P2 = $ : 3 * ie2 < 2 ? P2 = F2 + ($ - F2) * (2 / 3 - ie2) * 6 : P2 = F2, P2 *= 255, X2 === 0 ? H2 = P2 : X2 === 1 ? j = P2 : ee2 = P2;
  }
  return new ColorHelper(RGB, H2, j, ee2, l2, v2);
}
function clampColor(a420, u2) {
  var c = 0, l2 = maxChannelValues[a420];
  return u2 < c ? c : u2 > l2 ? l2 : u2;
}
function ensureColor(a420) {
  return a420 instanceof ColorHelper ? a420 : color(a420);
}
function parseHexCode(a420) {
  var u2 = a420.match(/#(([a-f0-9]{6})|([a-f0-9]{3}))$/i);
  if (u2) {
    var c = u2[1], l2 = parseInt(c.length === 3 ? c[0] + c[0] + c[1] + c[1] + c[2] + c[2] : c, 16), v2 = l2 >> 16 & 255, p2 = l2 >> 8 & 255, _ = l2 & 255;
    return new ColorHelper(RGB, v2, p2, _, 1, false);
  }
}
function parseColorFunction(a420) {
  var u2 = parseCSSFunction(a420);
  if (!(!u2 || !(u2.length === 4 || u2.length === 5))) {
    var c = u2[0], l2 = c === "rgba", v2 = c === "hsla", p2 = c === RGB, _ = c === HSL, I2 = v2 || l2, P2;
    if (p2 || l2)
      P2 = RGB;
    else if (_ || v2)
      P2 = HSL;
    else
      throw new Error("unsupported color string");
    var $ = toFloat(u2[1]), F2 = p2 || l2 ? toFloat(u2[2]) : ensurePercent(u2[2]), H2 = p2 || l2 ? toFloat(u2[3]) : ensurePercent(u2[3]), j = I2 ? toFloat(u2[4]) : 1;
    return new ColorHelper(P2, $, F2, H2, j, I2);
  }
}
color("rgba(0,0,0,0)");
color("#ffffff");
color("#000000");
const weights = { primary: { 50: "#EAFAF5", 100: "#D5F6EB", 200: "#ABEDD7", 300: "#82E3C3", 400: "#58DAAF", 500: "#26AD80", 600: "#25A77C", 700: "#1C7D5D", 800: "#12543E" }, secondary: { 50: "#FBEAEA", 100: "#F7D4D4", 200: "#EFA9A9", 300: "#E77E7E", 400: "#FF6F64", 500: "#E9554A", 600: "#CB362B", 700: "#811818", 800: "#561010" }, neutral: { 0: "#ffffff", 10: "#f5f5f5", 200: "#d9d9d9", 300: "#bababa", 350: "#999999", 400: "#9e9e9e", 500: "#808080", 600: "#666666", 700: "#4d4d4d", 800: "#303030", 900: "#141414", 1e3: "#000000" }, warning: { 400: "#FFC28A", 500: "#FFAE64", 600: "#F29540" } }, weight = (a420) => (u2) => {
  const c = weights[a420];
  if (c[u2])
    return c[u2];
  const l2 = Object.keys(weights.primary).map(Number), v2 = l2.find((p2) => u2 <= p2);
  return v2 ? c[v2] : c[l2.slice(l2.length - 1)[0]];
}, neutral = weight("neutral");
color("#26ad80");
color("#9156ff");
color("#2867b2");
color("#ff0000");
color("#1877f2");
color("#1da1f2");
/* @__PURE__ */ jsxs("svg", { style: { flex: "0 0 100%" }, viewBox: "0 0 24 24", children: [/* @__PURE__ */ jsx("rect", { x: "8", y: "9", width: "9", height: "7", fill: neutral(0) }), /* @__PURE__ */ jsx("path", { d: "M19.6465 8.53711C19.4707 7.83398 18.9141 7.27734 18.2402 7.10156C16.9805 6.75 12 6.75 12 6.75C12 6.75 6.99023 6.75 5.73047 7.10156C5.05664 7.27734 4.5 7.83398 4.32422 8.53711C3.97266 9.76758 3.97266 12.4043 3.97266 12.4043C3.97266 12.4043 3.97266 15.0117 4.32422 16.2715C4.5 16.9746 5.05664 17.502 5.73047 17.6777C6.99023 18 12 18 12 18C12 18 16.9805 18 18.2402 17.6777C18.9141 17.502 19.4707 16.9746 19.6465 16.2715C19.998 15.0117 19.998 12.4043 19.998 12.4043C19.998 12.4043 19.998 9.76758 19.6465 8.53711ZM10.3594 14.7773V10.0312L14.5195 12.4043L10.3594 14.7773Z" })] });
/* @__PURE__ */ jsxs("svg", { style: { flex: "0 0 100%" }, viewBox: "0 0 24 24", children: [/* @__PURE__ */ jsx("path", { d: "M19 6.5H9L8.8125 17.5H13.5L19 13V6.5Z", fill: neutral(0) }), /* @__PURE__ */ jsx("path", { d: "M16.9551 8.92188H15.8125V12.1445H16.9551V8.92188ZM13.8496 8.89258H12.707V12.1152H13.8496V8.89258ZM9.01562 5.875L6.20312 8.57031V18.209H9.60156V20.875L12.4141 18.209H14.6699L19.7676 13.375V5.875H9.01562ZM18.6543 12.8477L16.3691 14.9863H14.1133L12.1504 16.8613V14.9863H9.60156V6.95898H18.6543V12.8477Z" })] });
const dragImageSvg = `
  <svg height="75" width="120" viewBox="0 0 120 75" xmlns="http://www.w3.org/2000/svg" style="">
    <rect width="120" height="75" rx="3" style="
      opacity: 0.4;
      stroke: white;
      stroke-width: 3px;
      stroke-opacity: 0.7;
    "/>
  </svg>`;
let dragImage;
const loadDragImage = () => dragImage || (dragImage = new Image(), dragImage.src = URL.createObjectURL(new Blob([dragImageSvg], { type: "image/svg+xml" })), dragImage);
class ErrorBoundary extends React.Component {
  constructor(u2) {
    super(u2), this.state = { error: null };
  }
  componentDidCatch(u2, c) {
    log$1.warn(u2, c);
  }
  static getDerivedStateFromError() {
    return { error: true };
  }
  render() {
    return this.state.error ? null : this.props.children;
  }
}
const onDrop = async (a420, u2) => {
  u2.preventDefault(), u2.stopPropagation();
  const { dropNodeId: c, dropType: l2, project: v2 } = a420, p2 = u2.dataTransfer.getData("text/plain");
  if (log$1.debug("Compositor: Dropping", { dropType: l2, dragNodeId: p2, dropNodeId: c }), c === p2)
    return;
  const [_, I2, P2, $] = await Promise.all([v2.compositor.get(p2), v2.compositor.get(c), v2.compositor.getParent(p2), v2.compositor.getParent(c)]);
  if (l2 === "layout")
    return P2.id === c ? void 0 : CoreContext.Command.moveNode({ projectId: v2.id, nodeId: _.id, parentId: I2.id });
  if (P2.id !== ($ == null ? void 0 : $.id))
    return CoreContext.Command.swapNodes({ projectId: v2.id, nodeAId: _.id, nodeBId: I2.id });
  const F2 = P2.children.map((H2) => H2.id);
  return CoreContext.Command.reorderNodes({ projectId: v2.id, parentId: P2.id, childIds: swapItems(_.id, I2.id, F2) });
};
let foundDropTarget = false;
const ElementTree = (a420) => {
  var de2, pe2;
  const u2 = reactExports.useRef(false), c = reactExports.useRef(), l2 = reactExports.useRef(), v2 = reactExports.useRef(), { project: p2, interactive: _ = true, onElementDoubleClick: I2, checkIsDragTarget: P2, checkIsDropTarget: $ } = reactExports.useContext(CompositorContext), { nodeId: F2 } = a420, H2 = p2.compositor.get(F2);
  if (!H2)
    return null;
  const j = CoreContext.compositor.getElement(H2), ee2 = H2.props.layout || "Row", X2 = _ && P2(H2), ie2 = _ && $(H2);
  let Q2 = ie2 ? { onDrop: (le2) => (foundDropTarget = true, onDrop({ dropType: "layout", dropNodeId: H2.id, project: p2 }, le2)), onDragOver: (le2) => {
    var be2;
    le2.preventDefault(), le2.stopPropagation(), (be2 = v2.current) == null || be2.toggleAttribute("data-layout-drop-target-active", true);
  }, onDragLeave: (le2) => {
    var be2;
    le2.preventDefault(), le2.stopPropagation(), (be2 = v2.current) == null || be2.toggleAttribute("data-layout-drop-target-active", false);
  } } : {}, ne2 = X2 ? {
    draggable: true,
    // If a target is draggable, it will also be treated as
    //  a drop target (swap element positions)
    ondrop: (le2) => (foundDropTarget = true, onDrop(
      { dropType: "transform", dropNodeId: H2.id, project: p2 },
      // @ts-ignore TODO: Convert all to native drag events
      le2
    )),
    ondragstart: (le2) => {
      var be2;
      u2.current = true, wrapperEl.toggleAttribute("data-dragging", true), log$1.debug("Compositor: Dragging", H2.id), foundDropTarget = false, le2.dataTransfer.setData("text/plain", H2.id), le2.dataTransfer.dropEffect = "move", le2.dataTransfer.setDragImage(dragImage, 10, 10), (be2 = v2.current) == null || be2.toggleAttribute("data-drag-target-active", true), window.__dragging = true;
    },
    ondragend: (le2) => {
      var be2;
      u2.current = false, foundDropTarget || (log$1.info("Compositor: No drop target - deleting node", H2), CoreContext.Command.deleteNode({ nodeId: H2.id })), wrapperEl.toggleAttribute("data-dragging", true), log$1.debug("Compositor: DragEnd", le2), (be2 = v2.current) == null || be2.toggleAttribute("data-drag-target-active", false), wrapperEl.querySelectorAll("[data-item]").forEach((ke2) => {
        ke2.toggleAttribute("data-drag-target-active", false), ke2.toggleAttribute("data-layout-drop-target-active", false), ke2.toggleAttribute("data-transform-drop-target-active", false);
      }), window.__dragging = false;
    },
    ondragover: (le2) => {
      var be2;
      le2.preventDefault(), le2.stopPropagation(), !u2.current && ((be2 = v2.current) == null || be2.toggleAttribute("data-transform-drop-target-active", true));
    },
    ondragleave: (le2) => {
      var be2;
      le2.preventDefault(), le2.stopPropagation(), (be2 = v2.current) == null || be2.toggleAttribute("data-transform-drop-target-active", false);
    }
  } : {};
  reactExports.useEffect(() => {
    l2.current && j && (l2.current.appendChild(j.root), Object.assign(l2.current.style, { width: "100%", height: "100%", position: "relative", overflow: "hidden" }), Object.assign(j.root.style, { pointerEvents: X2 ? "all" : "none", width: "100%", height: "100%", position: "relative", ...H2.props.style || {} }));
  }, [l2.current, j]), reactExports.useEffect(() => {
    const le2 = X2 ? () => I2(H2) : () => {
    };
    return c.current && (Object.assign(c.current, ne2), Object.assign(c.current.style, { pointerEvents: X2 ? "all" : "none" }), c.current.addEventListener("dblclick", le2)), () => {
      var be2;
      (be2 = c.current) == null || be2.removeEventListener("dblclick", le2);
    };
  }, [c.current]);
  const Z2 = { layout: ee2, ...H2.props.layoutProps ?? {} };
  return /* @__PURE__ */ jsxs("div", { ref: v2, "data-id": H2.id + "-x", "data-item": true, ...X2 && { "data-drag-target": true }, ...ie2 && { "data-drop-target": true }, ...Q2, style: { position: "relative", width: ((de2 = H2.props.size) == null ? void 0 : de2.x) || "100%", height: ((pe2 = H2.props.size) == null ? void 0 : pe2.y) || "100%", pointerEvents: "none" }, children: [/* @__PURE__ */ jsx("div", { className: "interactive-overlay", ref: c, style: { height: "100%", width: "100%", position: "absolute", zIndex: 2 } }), /* @__PURE__ */ jsxs("div", { className: "item-element", style: { display: "flex", flex: "0 0 auto", justifyContent: "center", width: "100%", height: "100%" }, children: [/* @__PURE__ */ jsx("div", { ref: l2 }), /* @__PURE__ */ jsx(ErrorBoundary, { children: /* @__PURE__ */ jsx("ls-layout", { "data-id": H2.id + "-x", props: JSON.stringify(Z2), layout: ee2, children: H2.children.map((le2) => /* @__PURE__ */ jsx(ElementTree, { nodeId: le2.id }, le2.id)) }) })] })] });
}, Root = (a420) => {
  const { project: u2 } = reactExports.useContext(CompositorContext), [c, l2] = reactExports.useState(null);
  return reactExports.useEffect(() => (l2(u2.compositor.renderTree()), CoreContext.onInternal("NodeChanged", () => {
    l2(u2.compositor.renderTree());
  })), []), reactExports.useEffect(() => {
    const v2 = u2.compositor.getRoot(), { x: p2 } = v2.props.size, _ = () => {
      var ee2, X2, ie2;
      const { bannerStyle: I2 = "default", primaryColor: P2 = "#ABABAB", showNameBanners: $ } = u2.props ?? {}, F2 = ((ee2 = u2.props) == null ? void 0 : ee2.logoPosition) ?? ((ie2 = (X2 = u2.props) == null ? void 0 : X2.logo) == null ? void 0 : ie2.logoPosition) ?? "top-right";
      if (!I2 || !P2 || !F2)
        return;
      const H2 = themes[I2](P2, $, p2 / 1920), j = themes[F2](p2 / 1920);
      a420.setStyle(`${H2} ${j}` || "");
    };
    return _(), CoreContext.onInternal("ProjectChanged", _);
  }, [u2]), c ? /* @__PURE__ */ jsx("div", { onDrop: (v2) => {
    foundDropTarget = true, v2.preventDefault();
  }, onDragOver: (v2) => {
    v2.preventDefault();
  }, onDragLeave: (v2) => {
    v2.preventDefault();
  }, style: { userSelect: "none", width: `${c.props.size.x + PADDING * 2}px`, height: `${c.props.size.y + PADDING * 2}px`, margin: PADDING + "px" }, children: /* @__PURE__ */ jsx("div", { style: { width: "100%", height: "100%", overflow: "hidden" }, children: /* @__PURE__ */ jsx(ElementTree, { nodeId: c.id }) }) }) : null;
};
let wrapperEl, customStyleEl;
const PADDING = 0, render$1 = (a420) => {
  const { containerEl: u2, projectId: c, dragAndDrop: l2 = false, checkDragTarget: v2 = scenelessProjectDragCheck, checkDropTarget: p2 = scenelessProjectDropCheck } = a420, _ = getProject(c);
  CoreContext.clients.LayoutApi().subscribeToLayout(_.layoutApi.layoutId), loadDragImage();
  const I2 = a420.onElementDoubleClick ?? (() => {
  });
  if (!u2 || !_)
    return;
  if (!u2.shadowRoot) {
    u2.attachShadow({ mode: "open" }), customStyleEl = document.createElement("style");
    const X2 = document.createElement("style");
    X2.textContent = getStyle(), wrapperEl = document.createElement("div"), wrapperEl.id = "compositor-root", Object.assign(wrapperEl.style, { width: "100%", height: "100%", display: "flex", alignItems: "center", justifyContent: "center", transformOrigin: "center" }), u2.shadowRoot.appendChild(X2), u2.shadowRoot.appendChild(customStyleEl), u2.shadowRoot.appendChild(wrapperEl), new ResizeObserver((Q2) => {
      H2();
    }).observe(u2);
  }
  const P2 = _.compositor.getRoot(), { x: $, y: F2 } = P2.props.size, H2 = () => {
    let { width: X2, height: ie2 } = u2.getBoundingClientRect();
    const Q2 = X2 / ie2, ne2 = $ / F2;
    let Z2;
    X2 && ie2 ? ne2 > Q2 ? Z2 = X2 / ($ + PADDING * 2) : Z2 = ie2 / (F2 + PADDING * 2) : Z2 = 1, wrapperEl.style.willChange = "transform", wrapperEl.style.transform = `scale(${Z2}) translateZ(0)`, window.__scale = Z2, ee2();
  }, j = createRoot(wrapperEl), ee2 = () => {
    j.render(/* @__PURE__ */ jsx(CompositorProvider, { project: _, interactive: l2, onElementDoubleClick: I2, checkIsDropTarget: p2, checkIsDragTarget: v2, children: /* @__PURE__ */ jsx(Root, { setStyle: (X2) => {
      customStyleEl.textContent = X2;
    } }) }));
  };
  H2();
}, scenelessProjectDragCheck = (a420) => a420.props.name === "Participant" || a420.props.sourceType === "RoomParticipant" || a420.props.sourceType === "RTMP", scenelessProjectDropCheck = (a420) => a420.props.name === "Content", CompositorContext = React.createContext({ interactive: false, project: null, checkIsDragTarget: () => false, checkIsDropTarget: () => false, onElementDoubleClick: () => {
} }), CompositorProvider = ({ children: a420, ...u2 }) => /* @__PURE__ */ jsx(CompositorContext.Provider, { value: { ...u2 }, children: a420 }), getStyle = () => `
* {
  margin: 0;
  padding: 0;
  box-sizing: border-box;
  font-family: 'Arial';
}

video {
  width: 100%;
  height: 100%;
  object-fit: contain;
}

.NameBanner {
  top: 100%;
  transform: translateY(-100%);
  left: 0;
  height: 30px;
  background: linear-gradient(90deg, rgba(0, 0, 0, 0.5) 50%, rgba(0, 0, 0, 0) 100%);
  padding: 0px 0px 0px 10px;
  color: rgba(255, 255, 255, 0.9);
  font-weight: bold;
  line-height: 30px;
  width: 100%;
  font-size: 28px;
  position: absolute;
}

ls-layout[layout="Presentation"][props*="\\"cover\\"\\:true"] > :first-child .NameBanner {
  top: 0% !important;
  transform: translateY(0%) !important;
}

[layout="Layered"] > [data-item] {
  transform: scale(1.003) !important;
}
[layout="Layered"] > [data-item]:nth-child(2) {
  transform: scale(1.0015) !important;
}
[layout="Layered"] > [data-item]:nth-child(1) {
  transform: scale(1) !important;
}

.logo {
  position: absolute !important;
}

#compositor-root[data-dragging] {}

[data-drag-target] {}
[data-drag-target]:hover > .interactive-overlay {
  box-shadow: 0 0 0 3px inset rgba(255, 255, 255, 0.5);
  cursor: grab;
}
[data-drop-target] {}
[data-drop-target]:hover {}
[data-drag-target][data-drag-target-active] > .interactive-overlay {
  box-shadow: 0 0 0 3px inset rgba(255, 255, 255, 0.2);
}
[data-drag-target][data-drag-target-active] > .item-element {
  opacity: 0.8;
}
[data-layout-drop-target-active] > .interactive-overlay {
  box-shadow: 0 0 0 3px inset yellow;
}
[data-transform-drop-target-active] > .interactive-overlay {
  box-shadow: 0 0 0 3px inset white;
}
`;
var BannerStyle = /* @__PURE__ */ ((a420) => (a420.DEFAULT = "default", a420.MINIMAL = "minimal", a420.BUBBLE = "bubble", a420))(BannerStyle || {});
const themes = { "top-left": (a420 = 1280 / 1920) => `
      .wrapper {
       top:0;
       left:0;
    }`, "top-right": (a420 = 1280 / 1920) => `
      .wrapper {
       top:0;
       right:0;
    }`, "bottom-left": (a420 = 1280 / 1920) => `
      .wrapper {
       bottom:0;
       left:0;
    }`, "bottom-right": (a420 = 1280 / 1920) => `
      .wrapper {
       bottom:0;
       right:0;
    }`, default: (a420 = "#ABABAB", u2 = true, c = 1280 / 1920) => {
  const l2 = color(a420).lightness() < 0.6 ? "#FFF" : "#000", v2 = color(a420).lightness() < 0.6 ? "#FFF" : "#000", p2 = color(a420).lightness() < 0.6 ? "#000" : "#FFF", _ = (I2) => I2 * c + "px";
  return `
      .ChatOverlay {
        background: ${a420} !important;
        margin-bottom: ${_(40)} !important;
        transition: 300ms ease all;
        left: 0;

        /* Default Size 4 */
        font-size: ${_(44)} !important;
        padding: ${_(40)} ${_(100)} !important;
        border-radius: ${_(20)} !important;
      }
      
      .ChatOverlay-badge-icon {
          width:${_(32)};
          height: ${_(32)};
          fill: currentcolor;
          color: ${p2};
      }

       .ChatOverlay-badge-container {
          background-color:${v2};
          display:flex;
          flex-direction:row;
          padding: ${_(6)} ${_(12)} ${_(6)} ${_(6)};
          border-radius: ${_(10)};
          align-items: center;
          border-bottom-left-radius: 0px !important;
          position: relative;
          border: none;
          cursor: pointer;
       }
      
       .ChatOverlay-badge-username {
          color:${p2};
          padding:${_(6)};
          font-size:${_(18)};
          font-weight:700;
          text-transform: capitalize; 
       }
       
       .ChatOverlay-badge-container::before {
          content:"";
          width:15px;
          height:15px;
          background-color:${v2};
          position: absolute;
          bottom:-14px;
          left:0;
          clip-path:polygon(0 100%, 12% 87%, 26% 73%, 45% 53%, 59% 40%, 71% 28%, 85% 14%, 100% 0, 0 0);
        }
       

       .ChatOverlay-avatar {
          height: ${_(120)};
          width: ${_(120)};
          left:0;
          right:0;
          top:0;
          bottom:0;
          border-radius:50%;
       }

      .Banner, .NameBanner, .ChatOverlay {
        background: ${a420} !important;
        margin-bottom: ${_(40)} !important;
        transition: 300ms ease all;
        left: 0;

        /* Default Size 4 */
        font-size: ${_(44)} !important;
        padding: ${_(40)} ${_(100)} !important;
        border-top-right-radius: ${_(20)} !important;
        border-bottom-right-radius: ${_(20)} !important;
      }

      .Banner-body, .NameBanner-body, .ChatOverlay-body {
        color: ${l2} !important;
        font-family: 'Roboto' !important;
        font-style: normal !important;
        font-weight: 700 !important;
        line-height: 120% !important;
      }

      .NameBanner {
        transform-origin: 0 100%;
        margin: 0 !important;
        transform: translateX(-100%);
        opacity: 0 !important;
        white-space: nowrap;
        ${u2 && `
          opacity: 1 !important;
          transform: translateX(0);
        `}
      }

      .NameBanner[data-size="4"] {
        padding: ${_(40)} ${_(100)} !important;
        font-size: ${_(44)} !important;
        border-top-right-radius: ${_(20)} !important;
        border-bottom-right-radius: ${_(20)} !important;
      }
      .NameBanner[data-size="3"] {
        padding: ${_(12)} ${_(30)} !important;
        font-size: ${_(44)} !important;
        border-top-right-radius: ${_(20)} !important;
        border-bottom-right-radius: ${_(20)} !important;
      }
      .NameBanner[data-size="2"] {
        padding: ${_(12)} ${_(20)} !important;
        font-size: ${_(28)} !important;
        border-top-right-radius: ${_(16)} !important;
        border-bottom-right-radius: ${_(16)} !important;
      }
      .NameBanner[data-size="1"], .NameBanner[data-size="0"] {
        padding: ${_(8)} ${_(8)} !important;
        font-size: ${_(20)} !important;
        border-top-right-radius: ${_(8)} !important;
        border-bottom-right-radius: ${_(8)} !important;
      }
      .NameBanner[data-size="0"] {
        opacity: 0;
        transform: translateX(-100%);
      }
    `;
}, minimal: (a420 = "#ABABAB", u2 = true, c = 1280 / 1920) => {
  const l2 = "white", v2 = "#fff", p2 = "#000", _ = (I2) => I2 * c + "px";
  return `

      .ChatOverlay-badge-icon {
          width:${_(32)};
          height: ${_(32)};
          fill: currentcolor;
          color: ${p2};
      }

       .ChatOverlay-badge-container {
          background-color:${v2};
          display:flex;
          flex-direction:row;
          padding: ${_(6)} ${_(12)} ${_(6)} ${_(6)};
          align-items: center;
          position: relative;
          border: none;
          cursor: pointer;
       }

       .ChatOverlay-badge-username {
          color:${p2};
          padding:${_(6)};
          font-size:${_(18)};
          font-weight:700;
          text-transform: capitalize; 
       }

       .ChatOverlay-avatar {
          height: ${_(120)};
          width: ${_(120)};
          left:0;
          right:0;
          top:0;
          bottom:0;
          border-radius:50%;
       }


    .Banner, .NameBanner, .ChatOverlay {
        background: ${color(a420).fade(color(a420).alpha() * 0.7).toString()} !important;
        padding: ${_(40)} ${_(40)} ${_(40)} ${_(60)} !important;
        position: relative !important;
        margin-bottom: ${_(40)} !important;
        transition: 300ms ease all;
        font-size: ${_(34)} !important;
        left: 0;
      }

      .Banner:before, .NameBanner:before, .ChatOverlay:before {
        z-index: 1;
        content: "";
        position: absolute;
        left: 0;
        top: 0;
        width: 100%;
        height: 100%;
        background: rgba(0,0,0,0.6);
        transition: 300ms ease all;
        opacity: ${color(a420).alpha()};
      }
      .Banner:after, .NameBanner:after, .ChatOverlay:after {
        z-index: 1;
        content: "";
        position: absolute;
        left: 0;
        top: 0;
        height: 100%;
        transition: 300ms ease all;
        width: ${_(20)};
        background: ${color(a420)};
        opacity: ${color(a420).alpha()};
      }
      .Banner-body, .NameBanner-body, .ChatOverlay-body {
        color: ${l2} !important;
        font-family: 'Roboto' !important;
        font-style: normal !important;
        font-weight: 700 !important;
        line-height: 120% !important;
        position: relative;
        z-index: 2;
      }
      .Banner-header {
        font-size: ${_(90)};
        position: relative;
        z-index: 2;
      }
      .NameBanner {
        transform-origin: 0 100%;
        margin: 0 !important;
        transform: translateX(-100%);
        opacity: 0 !important;
        white-space: nowrap;
        ${u2 && `
          opacity: 1 !important;
          transform: translateX(0);
        `}
      }

      .NameBanner[data-size="4"] {
        padding: ${_(40)} ${_(40)} ${_(40)} ${_(60)} !important;
        font-size: ${_(34)} !important;
      }
      .NameBanner[data-size="3"] {
        padding: ${_(16)} ${_(40)} ${_(16)} ${_(60)} !important;
        font-size: ${_(34)} !important;
      }
      .NameBanner[data-size="2"] {
        padding: ${_(12)} ${_(24)} ${_(12)} ${_(44)} !important;
        font-size: ${_(24)} !important;
      }
      .NameBanner[data-size="1"], .NameBanner[data-size="0"] {
        padding: ${_(12)} ${_(16)} ${_(12)} ${_(36)} !important;
        font-size: ${_(18)} !important;
      }
      .NameBanner[data-size="0"] {
        opacity: 0 !important;
        transform: translateX(-100%);
      }
    `;
}, bubble: (a420 = "#ABABAB", u2 = true, c = 1280 / 1920) => {
  const l2 = color(a420).lightness() < 0.6 ? "#FFF" : "#000", v2 = color(a420).lightness() < 0.6 ? "#FFF" : "#000", p2 = color(a420).lightness() < 0.6 ? "#000" : "#FFF", _ = (I2) => I2 * c + "px";
  return `
      .ChatOverlay-badge-icon {
          width:${_(32)};
          height: ${_(32)};
          fill: currentcolor;
          color: ${p2};
      }


       .ChatOverlay-badge-container {
          background-color:${v2};
          display:flex;
          flex-direction:row;
          padding: ${_(6)} ${_(12)} ${_(6)} ${_(6)};
          align-items: center;
          z-index: 1;
          border: none;
          cursor: pointer;
          top: 0;
          margin-bottom: 2px;
          margin-left: -${_(30)};
          border-radius: 30px;
       }

       .ChatOverlay-badge-username {
          color:${p2};
          padding:${_(6)};
          font-size:${_(18)};
          font-weight:700;
          text-transform: capitalize; 
       }

       .ChatOverlayAvatar-container {
          height: ${_(120)};
          width: ${_(120)};
          top: 0;
       }
       .ChatOverlay-avatar {
          height: ${_(120)};
          width: ${_(120)};
          left:0;
          right:0;
          top:0;
          bottom:0;
          border-radius:50%;
       }


      .Banner, .ChatOverlay {
        transform: translateX(-50%);
        left: 50%;
        margin-bottom: ${_(40)} !important;
      }

      .Banner, .NameBanner, .ChatOverlay {
        background: ${color(a420)} !important;
        color: ${l2} !important;
        border-radius: 500px !important;
        transition: 300ms ease all;

        /* Default Style */
        border: 4px solid ${l2} !important;
        padding: ${_(40)} ${_(80)} !important;
        font-size: ${_(40)} !important;
      }
      .Banner-body, .NameBanner-body, .ChatOverlay-body {
        color: ${l2} !important;
        text-align: center !important;
        font-family: 'Roboto' !important;
        font-style: normal !important;
        font-weight: 700 !important;
        line-height: 120% !important;
      }
      .NameBanner {
        transform-origin: 0% 100%;
        transform: translateX(-100%);
        opacity: 0 !important;
        white-space: nowrap;
        ${u2 && `
          opacity: 1 !important;
          transform: translateX(0);
        `}
      }

      ls-layout[layout="Presentation"][props*="\\"cover\\"\\:true"] > :first-child .NameBanner {
        top: 0% !important;
        transform: translateY(0%) !important;
        margin: ${_(20)} ${_(20)};
      }


      .NameBanner[data-size="4"] {
        padding: ${_(40)} ${_(80)} ${_(40)} ${_(80)} !important;
        font-size: ${_(40)} !important;
      }
      .NameBanner[data-size="3"] {
        padding: ${_(12)} ${_(30)} ${_(12)} ${_(30)} !important;
        font-size: ${_(40)} !important;
        margin: -${_(20)} ${_(20)};
      }
      .NameBanner[data-size="2"] {
        padding: ${_(12)} ${_(30)} ${_(12)} ${_(30)} !important;
        font-size: ${_(26)} !important;
        margin: -${_(8)} ${_(8)};
      }
      .NameBanner[data-size="1"], .NameBanner[data-size="0"] {
        padding: ${_(8)} ${_(16)} ${_(8)} ${_(16)} !important;
        font-size: ${_(18)} !important;
        border-width: ${_(2)} !important;
        margin: -${_(16)} ${_(8)};
      }
      .NameBanner[data-size="0"] {
        opacity: 0 !important;
        transform: translateX(-100%);
      }
    `;
} }, fixLink = (a420) => !a420.startsWith("http:") && !a420.startsWith("https:") ? `https://${a420}` : a420, ChatOverlay = { name: "LS-ChatOverlay", sourceType: "ChatOverlay", create({ onUpdate: a420, onEvent: u2 }, c) {
  const l2 = document.createElement("div"), v2 = getProject(CoreContext.state.activeProjectId), p2 = v2.compositor.getRoot(), { x: _ } = p2.props.size, I2 = (_ ?? 1280) / 1920, P2 = (Q2) => Q2 * I2 + "px";
  let $;
  CoreContext.onInternal("ProjectChanged", () => {
    const { bannerStyle: Q2 } = v2.props ?? {};
    Q2 && ie2({ ...$, metadata: { ...$.metadata, bannerStyle: Q2 } });
  });
  React.memo((Q2) => {
    var ne2, Z2, de2;
    return (Q2 == null ? void 0 : Q2.type) === "emoticon" && ((ne2 = Q2 == null ? void 0 : Q2.data) == null ? void 0 : ne2.type) === "direct" ? /* @__PURE__ */ jsx("img", { src: (Z2 = Q2 == null ? void 0 : Q2.data) == null ? void 0 : Z2.url, style: { height: P2(36) }, alt: Q2 == null ? void 0 : Q2.text }) : (Q2 == null ? void 0 : Q2.type) === "link" ? /* @__PURE__ */ jsx("a", { style: { color: "#FFF", wordBreak: "break-all" }, target: "_blank", rel: "noreferrer", href: fixLink((de2 = Q2 == null ? void 0 : Q2.data) == null ? void 0 : de2.url), children: Q2 == null ? void 0 : Q2.text }) : /* @__PURE__ */ jsx("span", { children: Q2 == null ? void 0 : Q2.text });
  });
  const X2 = createRoot(l2), ie2 = (Q2) => X2.render(/* @__PURE__ */ jsx("ee", { ...Q2 }));
  return a420((Q2) => {
    const { bannerStyle: ne2 = BannerStyle.DEFAULT } = v2.props ?? {};
    $ = { ...Q2, metadata: { ...Q2.metadata, bannerStyle: ne2 } }, ie2($);
  }), { root: l2 };
} }, Background$1 = { name: "LS-Background", sourceType: "Background", create({ onUpdate: a420, onRemove: u2 }, { sourceProps: c }) {
  u2(() => {
    clearInterval(p2);
  });
  const l2 = document.createElement("div"), v2 = getProject(CoreContext.state.activeProjectId).role;
  let p2;
  const _ = ({ source: H2, setStartAnimation: j }) => {
    var q2, z2;
    const { src: ee2, type: X2, meta: ie2, loop: Q2 } = (H2 == null ? void 0 : H2.sourceProps) || {}, { id: ne2, sourceType: Z2 } = H2 || {}, [de2, pe2] = React.useState(null), le2 = React.useRef(null);
    console.log("Updated current time", (q2 = le2 == null ? void 0 : le2.current) == null ? void 0 : q2.currentTime);
    const be2 = React.useCallback((C2) => {
      le2.current = C2, pe2(C2 ? C2.id : null);
    }, []), ke2 = React.useCallback(() => {
      le2 != null && le2.current && le2.current.play().catch(() => {
        var C2;
        le2.current.muted = true, (C2 = le2.current) == null || C2.play();
      });
    }, [ee2]), Te2 = React.useCallback(() => {
      p2 && clearInterval(p2), hasPermission(v2, Permission.UpdateProject) && trigger$1("VideoEnded", { id: ne2, category: X2 });
    }, [ee2]);
    return React.useEffect(() => {
      ie2 && le2 != null && le2.current && de2 && hasPermission(v2, Permission.ManageSelf) && ie2 != null && ie2.time && (le2.current.currentTime = Number(ie2 == null ? void 0 : ie2.time));
    }, [ie2 == null ? void 0 : ie2.time, de2]), React.useEffect(() => () => {
      p2 && clearInterval(p2);
    }, [ne2]), React.useEffect(() => {
      de2 ? le2.current && (le2.current.src = ee2, le2.current.play().catch(() => {
        le2.current.muted = true, le2.current.play();
      }), hasPermission(v2, Permission.UpdateProject) && (p2 = setInterval(() => {
        if (le2.current.duration) {
          const C2 = le2.current.duration - le2.current.currentTime;
          trigger$1("VideoTimeUpdate", { category: Z2, id: ne2, time: Math.floor(C2) });
        }
      }, 1e3))) : p2 && clearInterval(p2);
    }, [de2]), /* @__PURE__ */ jsx(Fragment, { children: ee2 && /* @__PURE__ */ jsx("video", { loop: Q2, id: ne2, ref: be2, style: { ...(z2 = c == null ? void 0 : c.meta) == null ? void 0 : z2.style, ...ie2.style }, onLoadedData: ke2, onEnded: Te2, onCanPlay: () => j(true) }) });
  }, I2 = ({ source: H2, setStartAnimation: j }) => {
    var ne2;
    const { src: ee2, meta: X2, type: ie2 } = (H2 == null ? void 0 : H2.sourceProps) || {};
    return /* @__PURE__ */ jsx(Fragment, { children: ee2 && /* @__PURE__ */ jsx("img", { style: { ...(ne2 = c == null ? void 0 : c.meta) == null ? void 0 : ne2.style, ...X2 == null ? void 0 : X2.style }, src: ee2, onLoad: () => j(true) }) });
  }, P2 = ({ source: H2 }) => {
    const { type: j } = H2.sourceProps, { id: ee2 } = H2 || {}, [X2, ie2] = React.useState(false);
    return reactExports.useEffect(() => {
      ie2(false);
    }, [ee2]), /* @__PURE__ */ jsx(APIKitAnimation$1, { id: ee2, type: "background", enter: APIKitAnimationTypes.FADE_IN, exit: APIKitAnimationTypes.FADE_OUT, duration: 400, children: /* @__PURE__ */ jsxs("div", { style: { opacity: X2 ? 1 : 0 }, className: "backgroundContainer background-transition", children: [ee2 && j === "image" && /* @__PURE__ */ jsx(I2, { source: H2, setStartAnimation: ie2 }), ee2 && j === "video" && /* @__PURE__ */ jsx(_, { source: H2, setStartAnimation: ie2 })] }) });
  }, $ = createRoot(l2), F2 = (H2) => $.render(/* @__PURE__ */ jsx(Fragment, { children: /* @__PURE__ */ jsx(P2, { source: H2 }) }));
  return a420((H2) => {
    F2({ ...H2 });
  }), { root: l2 };
} }, SourceTriggerMap = [{ sourceType: "Overlay", trigger: "OverlayMetadataUpdate" }, { sourceType: "Background", trigger: "BackgroundMetadataUpdate" }], Video2 = { name: "LS-Video-2", sourceType: "Video2", props: { id: { type: String, required: true } }, useSource(a420, u2) {
  return a420.find((c) => c.props.type === u2.id);
}, create({ onUpdate: a420, onNewSource: u2, onRemove: c }, l2) {
  c(() => {
    clearInterval(P2);
  });
  const v2 = document.createElement("div"), p2 = getProjectRoom(CoreContext.state.activeProjectId), _ = getProject(CoreContext.state.activeProjectId).role;
  let I2, P2;
  const $ = ({ source: j }) => {
    var C2;
    const ee2 = SourceTriggerMap.find((b) => b.sourceType === l2.proxySource), { src: X2, type: ie2, meta: Q2, loop: ne2 } = (j == null ? void 0 : j.value) || {}, { id: Z2 } = j || {}, [de2, pe2] = React.useState(null), le2 = React.useRef(null), [be2, ke2] = React.useState(false);
    console.log("Updated current time", (C2 = le2 == null ? void 0 : le2.current) == null ? void 0 : C2.currentTime), React.useEffect(() => {
      ke2(false);
    }, [Z2]);
    const Te2 = React.useCallback((b) => {
      le2.current = b, pe2(b ? b.id : null);
    }, []), q2 = React.useCallback(() => {
      le2 != null && le2.current && le2.current.play().catch(() => {
        var b;
        le2.current.muted = true, (b = le2.current) == null || b.play();
      });
    }, [X2]), z2 = React.useCallback(() => {
      P2 && clearInterval(P2), trigger$1("VideoEnded", { id: Z2, category: ie2 });
    }, [X2]);
    return React.useEffect(() => {
      Q2 && le2 != null && le2.current && de2 && hasPermission(_, Permission.ManageSelf) && (le2.current.currentTime = Number(Q2 == null ? void 0 : Q2.time));
    }, [Q2 == null ? void 0 : Q2.time, de2]), React.useEffect(() => () => {
      P2 && clearInterval(P2);
    }, [Z2]), React.useEffect(() => {
      if (!de2)
        P2 && clearInterval(P2);
      else if (le2.current)
        return le2.current.src = X2, ne2 && (le2.current.loop = !!ne2), le2.current.play().catch(() => {
          le2.current.muted = true, le2.current.play();
        }), P2 = setInterval(() => {
          if (le2.current.duration) {
            const b = le2.current.duration - le2.current.currentTime;
            trigger$1("VideoTimeUpdate", { category: ie2, id: Z2, time: Math.floor(b) });
          }
        }, 1e3), p2 == null ? void 0 : p2.onData((b, E2) => {
          var k, O2;
          (k = le2 == null ? void 0 : le2.current) != null && k.currentTime && b.type === "UserJoined" && hasPermission(_, Permission.ManageGuests) && triggerInternal$1(ee2.trigger, { projectId: CoreContext.state.activeProjectId, role: _, sourceId: de2, doTrigger: true, metadata: { time: Math.floor((O2 = le2 == null ? void 0 : le2.current) == null ? void 0 : O2.currentTime) || 0, owner: p2 == null ? void 0 : p2.participantId, guest: E2 } });
        });
    }, [de2]), /* @__PURE__ */ jsx(APIKitAnimation$1, { id: Z2, type: "video", enter: APIKitAnimationTypes.FADE_IN, exit: APIKitAnimationTypes.FADE_OUT, duration: 400, children: /* @__PURE__ */ jsx("div", { style: { opacity: be2 ? 1 : 0, width: "100%", height: "100%" }, className: "video-transition", children: X2 && /* @__PURE__ */ jsx("video", { id: Z2, ref: Te2, style: l2.style, ...l2.props, onLoadedData: q2, onEnded: z2, onCanPlayThrough: () => ke2(true) }) }) });
  }, F2 = createRoot(v2), H2 = () => F2.render(/* @__PURE__ */ jsx($, { source: I2 }));
  return a420(() => {
    H2();
  }), u2((j) => {
    I2 = j, H2();
  }), { root: v2 };
} }, Image2 = { name: "LS-Image-2", sourceType: "Image2", props: { id: { type: String, required: true } }, useSource(a420, u2) {
  return a420.find((c) => c.props.type === u2.id);
}, create({ onUpdate: a420, onNewSource: u2 }, c) {
  const l2 = document.createElement("div");
  let v2;
  const _ = createRoot(l2), I2 = () => _.render(/* @__PURE__ */ jsx("p", { source: v2 }));
  return a420(() => {
    I2();
  }), u2((P2) => {
    v2 = P2, I2();
  }), { root: l2 };
} }, RTMPSource = { name: "LS-RTMP-Source", sourceType: "RTMP", props: {}, useSource(a420, u2) {
  return a420.find((c) => isMatch(c.props, u2.sourceProps));
}, create({ onUpdate: a420, onNewSource: u2, onRemove: c }, l2) {
  const v2 = document.createElement("div"), p2 = getProject(CoreContext.state.activeProjectId);
  getProjectRoom(CoreContext.state.activeProjectId), Object.assign(v2.style, { position: "relative" });
  let _, I2 = l2;
  const P2 = (j, ee2) => {
    const X2 = j / ee2.width;
    return X2 >= 0.5 ? 3 : X2 > 0.25 ? 2 : X2 > 0.15 ? 1 : 0;
  }, $ = ({ props: j, source: ee2 }) => {
    var le2, be2;
    const X2 = reactExports.useRef(), { volume: ie2 = 1, isHidden: Q2 = false } = j || {}, [ne2, Z2] = reactExports.useState(0), de2 = j == null ? void 0 : j.isMuted, pe2 = !(j != null && j.isHidden) && ((le2 = ee2 == null ? void 0 : ee2.props) == null ? void 0 : le2.videoEnabled);
    return reactExports.useEffect(() => {
      X2.current && (X2.current.play().catch((ke2) => {
        document.addEventListener("click", () => {
          var Te2;
          return (Te2 = X2.current) == null ? void 0 : Te2.play();
        }, { once: true });
      }), ee2 != null && ee2.value && (ee2 == null ? void 0 : ee2.value) !== X2.current.srcObject ? X2.current.srcObject = ee2 == null ? void 0 : ee2.value : ee2 != null && ee2.value || (X2.current.srcObject = null));
    }, [X2.current, ee2 == null ? void 0 : ee2.value]), reactExports.useEffect(() => {
      !j && X2.current && (X2.current.srcObject = null, X2.current = null);
    }, [j]), reactExports.useLayoutEffect(() => {
      if (!X2.current)
        return;
      const ke2 = () => {
        const q2 = X2.current;
        q2 && Z2(P2(q2.clientWidth, { width: p2.compositor.getRoot().props.size.x, height: p2.compositor.getRoot().props.size.y }));
      }, Te2 = new ResizeObserver((q2) => {
        ke2();
      });
      return ke2(), Te2 == null || Te2.observe(X2.current), () => {
        X2.current && (Te2 == null || Te2.unobserve(X2.current), X2.current.srcObject = null);
      };
    }, [X2.current, p2]), reactExports.useEffect(() => {
      X2.current && (X2.current.volume = ie2);
    }, [X2.current, ie2]), /* @__PURE__ */ jsxs("div", { style: { position: "relative", display: "flex", height: "100%", width: "100%" }, children: [/* @__PURE__ */ jsx("div", { style: { background: "#222", position: "absolute", height: "100%", width: "100%", fontSize: "43px", color: "rgba(255,255,255,0.6)", display: "flex", alignItems: "center", justifyContent: "center", opacity: pe2 ? "0" : "1" }, children: !!ee2 && /* @__PURE__ */ jsx("div", { style: { borderRadius: "50%", background: "#555", width: "70px", height: "70px", textTransform: "uppercase", display: "flex", alignItems: "center", justifyContent: "center", lineHeight: "1em" }, children: "RTMP" }) }), /* @__PURE__ */ jsx("div", { style: { position: "relative", display: "flex", height: "100%", width: "100%", ...!!((be2 = ee2 == null ? void 0 : ee2.props) != null && be2.mirrored) && { transform: "scaleX(-1)" } }, children: /* @__PURE__ */ jsx("video", { ref: X2, autoPlay: true, muted: de2, disablePictureInPicture: true, playsInline: true, style: { left: "50%", top: "50%", position: "relative", transform: "translate3d(-50%, -50%, 0)", height: "100%", opacity: pe2 ? "1" : "0", objectFit: "cover", background: "rgba(0,0,0,0.6)" } }) }), !!(ee2 != null && ee2.props.displayName) && /* @__PURE__ */ jsx("div", { className: "NameBannerContainer", style: { width: "100%", height: "100%", position: "absolute" }, children: /* @__PURE__ */ jsx("div", { className: "NameBanner", "data-size": ne2, style: { padding: "12px 30px", width: "fit-content", height: "fit-content", top: "100%", transform: "translateY(-100%)", left: 0 }, children: /* @__PURE__ */ jsx("div", { className: "NameBanner-body", children: ee2 == null ? void 0 : ee2.props.displayName }) }) })] });
  }, F2 = createRoot(v2), H2 = () => F2.render(/* @__PURE__ */ jsx($, { source: _, props: I2 }));
  return a420((j) => {
    I2 = j, H2();
  }), u2((j) => {
    _ = j, H2();
  }), c((j) => {
    I2 = j, H2();
  }), { root: v2 };
} }, Transforms = /* @__PURE__ */ Object.freeze(/* @__PURE__ */ Object.defineProperty({ __proto__: null, Background: Background$1, Banner: Banner$1, ChatOverlay, Element: Element$1, Image: Image$1, Image2, Logo: Logo$1, Overlay, RTMPSource, RoomParticipant: RoomParticipant$1, Square, Video, Video2 }, Symbol.toStringTag, { value: "Module" }));
/*! (c) Andrea Giammarchi - ISC */
var self$1 = {};
try {
  self$1.WeakMap = WeakMap;
} catch (a420) {
  self$1.WeakMap = function(u2, c) {
    var l2 = c.defineProperty, v2 = c.hasOwnProperty, p2 = _.prototype;
    return p2.delete = function(P2) {
      return this.has(P2) && delete P2[this._];
    }, p2.get = function(P2) {
      return this.has(P2) ? P2[this._] : void 0;
    }, p2.has = function(P2) {
      return v2.call(P2, this._);
    }, p2.set = function(P2, $) {
      return l2(P2, this._, { configurable: true, value: $ }), this;
    }, _;
    function _(P2) {
      l2(this, "_", { value: "_@ungap/weakmap" + u2++ }), P2 && P2.forEach(I2, this);
    }
    function I2(P2) {
      this.set(P2[0], P2[1]);
    }
  }(Math.random(), Object);
}
const WeakMap$1 = self$1.WeakMap;
/*! (c) Andrea Giammarchi - ISC */
var UID = "-" + Math.random().toFixed(6) + "%", UID_IE = false;
try {
  (function(a420, u2, c) {
    return u2 in a420 && (a420.innerHTML = "<p " + c + '="' + UID + '"></p>', a420[u2].childNodes[0].getAttribute(c) == UID);
  })(document.createElement("template"), "content", "tabindex") || (UID = "_dt: " + UID.slice(1, -1) + ";", UID_IE = true);
} catch (a420) {
}
var UIDC = "<!--" + UID + "-->", COMMENT_NODE = 8, ELEMENT_NODE$1 = 1, TEXT_NODE = 3, SHOULD_USE_TEXT_CONTENT = /^(?:plaintext|script|style|textarea|title|xmp)$/i, VOID_ELEMENTS = /^(?:area|base|br|col|embed|hr|img|input|keygen|link|menuitem|meta|param|source|track|wbr)$/i;
/*! (c) Andrea Giammarchi - ISC */
function domsanitizer(a420) {
  return a420.join(UIDC).replace(selfClosing, fullClosing).replace(attrSeeker, attrReplacer);
}
var spaces = " \\f\\n\\r\\t", almostEverything = "[^" + spaces + `\\/>"'=]+`, attrName = "[" + spaces + "]+" + almostEverything, tagName = "<([A-Za-z]+[A-Za-z0-9:._-]*)((?:", attrPartials = `(?:\\s*=\\s*(?:'[^']*?'|"[^"]*?"|<[^>]*?>|` + almostEverything.replace("\\/", "") + "))?)", attrSeeker = new RegExp(tagName + attrName + attrPartials + "+)([" + spaces + "]*/?>)", "g"), selfClosing = new RegExp(tagName + attrName + attrPartials + "*)([" + spaces + "]*/>)", "g"), findAttributes = new RegExp("(" + attrName + `\\s*=\\s*)(['"]?)` + UIDC + "\\2", "gi");
function attrReplacer(a420, u2, c, l2) {
  return "<" + u2 + c.replace(findAttributes, replaceAttributes) + l2;
}
function replaceAttributes(a420, u2, c) {
  return u2 + (c || '"') + UID + (c || '"');
}
function fullClosing(a420, u2, c) {
  return VOID_ELEMENTS.test(u2) ? a420 : "<" + u2 + c + "></" + u2 + ">";
}
const { isArray } = Array, { indexOf, slice } = [], umap = (a420) => ({
  // About: get: _.get.bind(_)
  // It looks like WebKit/Safari didn't optimize bind at all,
  // so that using bind slows it down by 60%.
  // Firefox and Chrome are just fine in both cases,
  // so let's use the approach that works fast everywhere 👍
  get: (u2) => a420.get(u2),
  set: (u2, c) => (a420.set(u2, c), c)
}), ELEMENT_NODE = 1, nodeType = 111, remove = ({ firstChild: a420, lastChild: u2 }) => {
  const c = document.createRange();
  return c.setStartAfter(a420), c.setEndAfter(u2), c.deleteContents(), a420;
}, diffable = (a420, u2) => a420.nodeType === nodeType ? 1 / u2 < 0 ? u2 ? remove(a420) : a420.lastChild : u2 ? a420.valueOf() : a420.firstChild : a420, persistent = (a420) => {
  const { childNodes: u2 } = a420, { length: c } = u2;
  if (c < 2)
    return c ? u2[0] : a420;
  const l2 = slice.call(u2, 0), v2 = l2[0], p2 = l2[c - 1];
  return { ELEMENT_NODE, nodeType, firstChild: v2, lastChild: p2, valueOf() {
    if (u2.length !== c) {
      let _ = 0;
      for (; _ < c; )
        a420.appendChild(l2[_++]);
    }
    return a420;
  } };
};
/*! (c) Andrea Giammarchi - ISC */
var createContent = function(a420) {
  var u2 = "fragment", c = "template", l2 = "content" in _(c), v2 = l2 ? function(P2) {
    var $ = _(c);
    return $.innerHTML = P2, $.content;
  } : function(P2) {
    var $ = _(u2), F2 = _(c), H2 = null;
    if (/^[^\S]*?<(col(?:group)?|t(?:head|body|foot|r|d|h))/i.test(P2)) {
      var j = RegExp.$1;
      F2.innerHTML = "<table>" + P2 + "</table>", H2 = F2.querySelectorAll(j);
    } else
      F2.innerHTML = P2, H2 = F2.childNodes;
    return p2($, H2), $;
  };
  return function($, F2) {
    return (F2 === "svg" ? I2 : v2)($);
  };
  function p2(P2, $) {
    for (var F2 = $.length; F2--; )
      P2.appendChild($[0]);
  }
  function _(P2) {
    return P2 === u2 ? a420.createDocumentFragment() : a420.createElementNS("http://www.w3.org/1999/xhtml", P2);
  }
  function I2(P2) {
    var $ = _(u2), F2 = _("div");
    return F2.innerHTML = '<svg xmlns="http://www.w3.org/2000/svg">' + P2 + "</svg>", p2($, F2.firstChild.childNodes), $;
  }
}(document);
const udomdiff = (a420, u2, c, l2, v2) => {
  const p2 = c.length;
  let _ = u2.length, I2 = p2, P2 = 0, $ = 0, F2 = null;
  for (; P2 < _ || $ < I2; )
    if (_ === P2) {
      const H2 = I2 < p2 ? $ ? l2(c[$ - 1], -0).nextSibling : l2(c[I2 - $], 0) : v2;
      for (; $ < I2; )
        a420.insertBefore(l2(c[$++], 1), H2);
    } else if (I2 === $)
      for (; P2 < _; )
        (!F2 || !F2.has(u2[P2])) && a420.removeChild(l2(u2[P2], -1)), P2++;
    else if (u2[P2] === c[$])
      P2++, $++;
    else if (u2[_ - 1] === c[I2 - 1])
      _--, I2--;
    else if (u2[P2] === c[I2 - 1] && c[$] === u2[_ - 1]) {
      const H2 = l2(u2[--_], -1).nextSibling;
      a420.insertBefore(l2(c[$++], 1), l2(u2[P2++], -1).nextSibling), a420.insertBefore(l2(c[--I2], 1), H2), u2[_] = c[I2];
    } else {
      if (!F2) {
        F2 = /* @__PURE__ */ new Map();
        let H2 = $;
        for (; H2 < I2; )
          F2.set(c[H2], H2++);
      }
      if (F2.has(u2[P2])) {
        const H2 = F2.get(u2[P2]);
        if ($ < H2 && H2 < I2) {
          let j = P2, ee2 = 1;
          for (; ++j < _ && j < I2 && F2.get(u2[j]) === H2 + ee2; )
            ee2++;
          if (ee2 > H2 - $) {
            const X2 = l2(u2[P2], 0);
            for (; $ < H2; )
              a420.insertBefore(l2(c[$++], 1), X2);
          } else
            a420.replaceChild(l2(c[$++], 1), l2(u2[P2++], -1));
        } else
          P2++;
      } else
        a420.removeChild(l2(u2[P2++], -1));
    }
  return c;
};
/*! (c) Andrea Giammarchi - ISC */
var importNode = function(a420, u2, c, l2, v2) {
  var p2 = v2 in a420, _ = a420.createDocumentFragment();
  _[u2](a420[l2]("g")), _[u2](a420[l2](""));
  var I2 = p2 ? a420[v2](_, true) : _[c](true);
  return I2.childNodes.length < 2 ? function P2($, F2) {
    for (var H2 = $[c](), j = $.childNodes || [], ee2 = j.length, X2 = 0; F2 && X2 < ee2; X2++)
      H2[u2](P2(j[X2], F2));
    return H2;
  } : (
    /* istanbul ignore next */
    p2 ? a420[v2] : function(P2, $) {
      return P2[c](!!$);
    }
  );
}(document, "appendChild", "cloneNode", "createTextNode", "importNode"), trim = "".trim || /* istanbul ignore next */
function() {
  return String(this).replace(/^\s+|\s+/g, "");
}, normalizeAttributes = UID_IE ? function(a420, u2) {
  var c = u2.join(" ");
  return u2.slice.call(a420, 0).sort(function(l2, v2) {
    return c.indexOf(l2.name) <= c.indexOf(v2.name) ? -1 : 1;
  });
} : function(a420, u2) {
  return u2.slice.call(a420, 0);
};
function find(a420, u2) {
  for (var c = u2.length, l2 = 0; l2 < c; )
    a420 = a420.childNodes[u2[l2++]];
  return a420;
}
function parse(a420, u2, c, l2) {
  for (var v2 = a420.childNodes, p2 = v2.length, _ = 0; _ < p2; ) {
    var I2 = v2[_];
    switch (I2.nodeType) {
      case ELEMENT_NODE$1:
        var P2 = l2.concat(_);
        parseAttributes(I2, u2, c, P2), parse(I2, u2, c, P2);
        break;
      case COMMENT_NODE:
        var $ = I2.textContent;
        if ($ === UID)
          c.shift(), u2.push(
            // basicHTML or other non standard engines
            // might end up having comments in nodes
            // where they shouldn't, hence this check.
            SHOULD_USE_TEXT_CONTENT.test(a420.nodeName) ? Text(a420, l2) : Any(I2, l2.concat(_))
          );
        else
          switch ($.slice(0, 2)) {
            case "/*":
              if ($.slice(-2) !== "*/")
                break;
            case "👻":
              a420.removeChild(I2), _--, p2--;
          }
        break;
      case TEXT_NODE:
        SHOULD_USE_TEXT_CONTENT.test(a420.nodeName) && trim.call(I2.textContent) === UIDC && (c.shift(), u2.push(Text(a420, l2)));
        break;
    }
    _++;
  }
}
function parseAttributes(a420, u2, c, l2) {
  for (var v2 = a420.attributes, p2 = [], _ = [], I2 = normalizeAttributes(v2, c), P2 = I2.length, $ = 0; $ < P2; ) {
    var F2 = I2[$++], H2 = F2.value === UID, j;
    if (H2 || 1 < (j = F2.value.split(UIDC)).length) {
      var ee2 = F2.name;
      if (p2.indexOf(ee2) < 0) {
        p2.push(ee2);
        var X2 = c.shift().replace(H2 ? /^(?:|[\S\s]*?\s)(\S+?)\s*=\s*('|")?$/ : new RegExp("^(?:|[\\S\\s]*?\\s)(" + ee2 + `)\\s*=\\s*('|")[\\S\\s]*`, "i"), "$1"), ie2 = v2[X2] || // the following ignore is covered by browsers
        // while basicHTML is already case-sensitive
        /* istanbul ignore next */
        v2[X2.toLowerCase()];
        if (H2)
          u2.push(Attr(ie2, l2, X2, null));
        else {
          for (var Q2 = j.length - 2; Q2--; )
            c.shift();
          u2.push(Attr(ie2, l2, X2, j));
        }
      }
      _.push(F2);
    }
  }
  P2 = _.length, $ = 0;
  for (var ne2 = 0 < P2 && UID_IE && !("ownerSVGElement" in a420); $ < P2; ) {
    var Z2 = _[$++];
    ne2 && (Z2.value = ""), a420.removeAttribute(Z2.name);
  }
  var de2 = a420.nodeName;
  if (/^script$/i.test(de2)) {
    var pe2 = document.createElement(de2);
    for (P2 = v2.length, $ = 0; $ < P2; )
      pe2.setAttributeNode(v2[$++].cloneNode(true));
    pe2.textContent = a420.textContent, a420.parentNode.replaceChild(pe2, a420);
  }
}
function Any(a420, u2) {
  return { type: "any", node: a420, path: u2 };
}
function Attr(a420, u2, c, l2) {
  return { type: "attr", node: a420, path: u2, name: c, sparse: l2 };
}
function Text(a420, u2) {
  return { type: "text", node: a420, path: u2 };
}
var parsed = umap(new WeakMap$1());
function createInfo(a420, u2) {
  var c = (a420.convert || domsanitizer)(u2), l2 = a420.transform;
  l2 && (c = l2(c));
  var v2 = createContent(c, a420.type);
  cleanContent(v2);
  var p2 = [];
  return parse(v2, p2, u2.slice(0), []), { content: v2, updates: function(_) {
    for (var I2 = [], P2 = p2.length, $ = 0, F2 = 0; $ < P2; ) {
      var H2 = p2[$++], j = find(_, H2.path);
      switch (H2.type) {
        case "any":
          I2.push({ fn: a420.any(j, []), sparse: false });
          break;
        case "attr":
          var ee2 = H2.sparse, X2 = a420.attribute(j, H2.name, H2.node);
          ee2 === null ? I2.push({ fn: X2, sparse: false }) : (F2 += ee2.length - 2, I2.push({ fn: X2, sparse: true, values: ee2 }));
          break;
        case "text":
          I2.push({ fn: a420.text(j), sparse: false }), j.textContent = "";
          break;
      }
    }
    return P2 += F2, function() {
      var ie2 = arguments.length;
      if (P2 !== ie2 - 1)
        throw new Error(ie2 - 1 + " values instead of " + P2 + `
` + u2.join("${value}"));
      for (var Q2 = 1, ne2 = 1; Q2 < ie2; ) {
        var Z2 = I2[Q2 - ne2];
        if (Z2.sparse) {
          var de2 = Z2.values, pe2 = de2[0], le2 = 1, be2 = de2.length;
          for (ne2 += be2 - 2; le2 < be2; )
            pe2 += arguments[Q2++] + de2[le2++];
          Z2.fn(pe2);
        } else
          Z2.fn(arguments[Q2++]);
      }
      return _;
    };
  } };
}
function createDetails(a420, u2) {
  var c = parsed.get(u2) || parsed.set(u2, createInfo(a420, u2));
  return c.updates(importNode.call(document, c.content, true));
}
var empty = [];
function domtagger(a420) {
  var u2 = empty, c = cleanContent;
  return function(l2) {
    return u2 !== l2 && (c = createDetails(a420, u2 = l2)), c.apply(null, arguments);
  };
}
function cleanContent(a420) {
  for (var u2 = a420.childNodes, c = u2.length; c--; ) {
    var l2 = u2[c];
    l2.nodeType !== 1 && trim.call(l2.textContent).length === 0 && a420.removeChild(l2);
  }
}
/*! (c) Andrea Giammarchi - ISC */
var hyperStyle = /* @__PURE__ */ function() {
  var a420 = /acit|ex(?:s|g|n|p|$)|rph|ows|mnc|ntw|ine[ch]|zoo|^ord/i, u2 = /([^A-Z])([A-Z]+)/g;
  return function(I2, P2) {
    return "ownerSVGElement" in I2 ? l2(I2, P2) : p2(I2.style, false);
  };
  function c(_, I2, P2) {
    return I2 + "-" + P2.toLowerCase();
  }
  function l2(_, I2) {
    var P2;
    return I2 ? P2 = I2.cloneNode(true) : (_.setAttribute("style", "--hyper:style;"), P2 = _.getAttributeNode("style")), P2.value = "", _.setAttributeNode(P2), p2(P2, true);
  }
  function v2(_) {
    var I2, P2 = [];
    for (I2 in _)
      P2.push(I2.replace(u2, c), ":", _[I2], ";");
    return P2.join("");
  }
  function p2(_, I2) {
    var P2, $;
    return function(F2) {
      var H2, j, ee2, X2;
      switch (typeof F2) {
        case "object":
          if (F2) {
            if (P2 === "object") {
              if (!I2 && $ !== F2)
                for (j in $)
                  j in F2 || (_[j] = "");
            } else
              I2 ? _.value = "" : _.cssText = "";
            H2 = I2 ? {} : _;
            for (j in F2)
              X2 = F2[j], ee2 = typeof X2 == "number" && !a420.test(j) ? X2 + "px" : X2, !I2 && /^--/.test(j) ? H2.setProperty(j, ee2) : H2[j] = ee2;
            P2 = "object", I2 ? _.value = v2($ = H2) : $ = F2;
            break;
          }
        default:
          $ != F2 && (P2 = "string", $ = F2, I2 ? _.value = F2 || "" : _.cssText = F2 || "");
          break;
      }
    };
  }
}();
const aria = (a420) => (u2) => {
  for (const c in u2) {
    const l2 = c === "role" ? c : `aria-${c}`, v2 = u2[c];
    v2 == null ? a420.removeAttribute(l2) : a420.setAttribute(l2, v2);
  }
}, attribute = (a420, u2) => {
  let c, l2 = true;
  const v2 = document.createAttributeNS(null, u2);
  return (p2) => {
    c !== p2 && (c = p2, c == null ? l2 || (a420.removeAttributeNode(v2), l2 = true) : (v2.value = p2, l2 && (a420.setAttributeNodeNS(v2), l2 = false)));
  };
}, boolean = (a420, u2, c) => (l2) => {
  c !== !!l2 && ((c = !!l2) ? a420.setAttribute(u2, "") : a420.removeAttribute(u2));
}, data = ({ dataset: a420 }) => (u2) => {
  for (const c in u2) {
    const l2 = u2[c];
    l2 == null ? delete a420[c] : a420[c] = l2;
  }
}, event = (a420, u2) => {
  let c, l2 = u2.slice(2);
  return !(u2 in a420) && u2.toLowerCase() in a420 && (l2 = l2.toLowerCase()), (v2) => {
    const p2 = isArray(v2) ? v2 : [v2, false];
    c !== p2[0] && (c && a420.removeEventListener(l2, c, p2[1]), (c = p2[0]) && a420.addEventListener(l2, c, p2[1]));
  };
}, ref = (a420) => (u2) => {
  typeof u2 == "function" ? u2(a420) : u2.current = a420;
}, setter = (a420, u2) => u2 === "dataset" ? data(a420) : (c) => {
  a420[u2] = c;
}, hyperProperty = (a420, u2) => {
  let c;
  return (l2) => {
    c !== l2 && (c = l2, a420[u2] !== l2 && (l2 == null ? (a420[u2] = "", a420.removeAttribute(u2)) : a420[u2] = l2));
  };
}, readOnly = /^(?:form|list)$/i, text = (a420, u2) => a420.ownerDocument.createTextNode(u2);
function Tagger(a420) {
  return this.type = a420, domtagger(this);
}
Tagger.prototype = {
  // there are four kind of attributes, and related behavior:
  //  * events, with a name starting with `on`, to add/remove event listeners
  //  * special, with a name present in their inherited prototype, accessed directly
  //  * regular, accessed through get/setAttribute standard DOM methods
  //  * style, the only regular attribute that also accepts an object as value
  //    so that you can style=${{width: 120}}. In this case, the behavior has been
  //    fully inspired by Preact library and its simplicity.
  attribute(a420, u2, c) {
    const l2 = this.type === "svg";
    switch (u2) {
      case "class":
        if (l2)
          return attribute(a420, u2);
        u2 = "className";
      case "props":
        return setter(a420, u2);
      case "aria":
        return aria(a420);
      case "style":
        return hyperStyle(a420, c, l2);
      case "ref":
        return ref(a420);
      case ".dataset":
        return data(a420);
      default:
        return u2.slice(0, 1) === "." ? setter(a420, u2.slice(1)) : u2.slice(0, 1) === "?" ? boolean(a420, u2.slice(1)) : u2.slice(0, 2) === "on" ? event(a420, u2) : u2 in a420 && !(l2 || readOnly.test(u2)) ? hyperProperty(a420, u2) : attribute(a420, u2);
    }
  },
  // in a hyper(node)`<div>${content}</div>` case
  // everything could happen:
  //  * it's a JS primitive, stored as text
  //  * it's null or undefined, the node should be cleaned
  //  * it's a promise, update the content once resolved
  //  * it's an explicit intent, perform the desired operation
  //  * it's an Array, resolve all values if Promises and/or
  //    update the node with the resulting list of content
  any(a420, u2) {
    const { type: c } = this;
    let l2 = false, v2;
    const p2 = (_) => {
      switch (typeof _) {
        case "string":
        case "number":
        case "boolean":
          l2 ? v2 !== _ && (v2 = _, u2[0].textContent = _) : (l2 = true, v2 = _, u2 = udomdiff(a420.parentNode, u2, [text(a420, _)], diffable, a420));
          break;
        case "function":
          p2(_(a420));
          break;
        case "object":
        case "undefined":
          if (_ == null) {
            l2 = false, u2 = udomdiff(a420.parentNode, u2, [], diffable, a420);
            break;
          }
        default:
          if (l2 = false, v2 = _, isArray(_)) {
            if (_.length === 0)
              u2.length && (u2 = udomdiff(a420.parentNode, u2, [], diffable, a420));
            else
              switch (typeof _[0]) {
                case "string":
                case "number":
                case "boolean":
                  p2(String(_));
                  break;
                case "function":
                  p2(_.map(invoke, a420));
                  break;
                case "object":
                  isArray(_[0]) && (_ = _.concat.apply([], _));
                default:
                  u2 = udomdiff(a420.parentNode, u2, _, diffable, a420);
                  break;
              }
          } else
            "ELEMENT_NODE" in _ ? u2 = udomdiff(a420.parentNode, u2, _.nodeType === 11 ? slice.call(_.childNodes) : [_], diffable, a420) : "text" in _ ? p2(String(_.text)) : "any" in _ ? p2(_.any) : "html" in _ ? u2 = udomdiff(a420.parentNode, u2, slice.call(createContent([].concat(_.html).join(""), c).childNodes), diffable, a420) : "length" in _ && p2(slice.call(_));
          break;
      }
    };
    return p2;
  },
  // style or textareas don't accept HTML as content
  // it's pointless to transform or analyze anything
  // different from text there but it's worth checking
  // for possible defined intents.
  text(a420) {
    let u2;
    const c = (l2) => {
      if (u2 !== l2) {
        u2 = l2;
        const v2 = typeof l2;
        v2 === "object" && l2 ? "text" in l2 ? c(String(l2.text)) : "any" in l2 ? c(l2.any) : "html" in l2 ? c([].concat(l2.html).join("")) : "length" in l2 && c(slice.call(l2).join("")) : v2 === "function" ? c(l2(a420)) : a420.textContent = l2 ?? "";
      }
    };
    return c;
  }
};
function invoke(a420) {
  return a420(this);
}
const { create: create$1, freeze, keys } = Object, cache = umap(new WeakMap$1()), createRender = (a420) => ({ html: outer("html", a420), svg: outer("svg", a420), render(u2, c) {
  const l2 = typeof c == "function" ? c() : c, v2 = cache.get(u2) || cache.set(u2, createCache()), p2 = l2 instanceof LighterHole ? unroll(a420, v2, l2) : l2;
  return p2 !== v2.wire && (v2.wire = p2, u2.textContent = "", u2.appendChild(p2.valueOf())), u2;
} }), createCache = () => ({ stack: [], entry: null, wire: null }), outer = (a420, u2) => {
  const c = umap(new WeakMap$1()), l2 = (p2) => function() {
    return unroll(u2, p2, v2.apply(null, arguments));
  };
  return v2.for = (p2, _) => {
    const I2 = c.get(p2) || c.set(p2, create$1(null));
    return I2[_] || (I2[_] = l2(createCache()));
  }, v2.node = function() {
    return unroll(u2, createCache(), v2.apply(null, arguments)).valueOf();
  }, v2;
  function v2() {
    return new LighterHole(a420, tta.apply(null, arguments));
  }
}, unroll = (a420, u2, { type: c, template: l2, values: v2 }) => {
  const { length: p2 } = v2;
  unrollValues(a420, u2, v2, p2);
  let { entry: _ } = u2;
  if (!_ || _.template !== l2 || _.type !== c) {
    const I2 = new a420(c);
    u2.entry = _ = { type: c, template: l2, tag: I2, wire: persistent(I2(l2, ...v2)) };
  } else
    _.tag(l2, ...v2);
  return _.wire;
}, unrollValues = (a420, { stack: u2 }, c, l2) => {
  for (let v2 = 0; v2 < l2; v2++) {
    const p2 = c[v2];
    p2 instanceof Hole ? c[v2] = unroll(a420, u2[v2] || (u2[v2] = createCache()), p2) : isArray(p2) ? unrollValues(a420, u2[v2] || (u2[v2] = createCache()), p2, p2.length) : u2[v2] = null;
  }
  l2 < u2.length && u2.splice(l2);
};
freeze(LighterHole);
function LighterHole(a420, u2) {
  this.type = a420, this.template = u2.shift(), this.values = u2;
}
const Hole = LighterHole, { render, html, svg } = createRender(Tagger);
function tta() {
  let a420 = [], u2 = 0, { length: c } = arguments;
  for (; u2 < c; )
    a420.push(arguments[u2++]);
  return a420;
}
const Free = { name: "Free", layout: ({ props: a420, children: u2, size: c }) => u2.reduce((l2, v2) => {
  const { size: p2 = { x: "100%", y: "100%" }, position: _ = { x: 0, y: 0 }, opacity: I2 = 1 } = v2.props;
  return { ...l2, [v2.id]: { position: { x: _.x, y: _.y }, size: { x: p2.x, y: p2.y }, opacity: I2 } };
}, {}) }, Column = { name: "Column", layout: ({ props: a420 = {}, children: u2, size: c }) => {
  let { justify: l2 = "center", align: v2 = "center", cover: p2 = false, margin: _ = {}, dimensions: I2 = 16 / 9, reverse: P2 = false } = a420;
  const $ = p2 ? 0 : Math.min(c.y / 6, 12);
  _ = { left: $, right: $, top: $, bottom: $, between: $, ..._ };
  const F2 = c.y - _.top - _.bottom, H2 = c.x - _.left - _.right, j = _.between * ((u2.length || 1) - 1), ee2 = Math.min(H2, (F2 - j) / (u2.length || 1) * I2), X2 = ee2 / I2;
  return html.node`
      <div style=${{ height: "100%", width: p2 ? c.x + "px" : "auto", display: "flex", flexDirection: P2 ? "column-reverse" : "column", justifyContent: l2, alignItems: v2, paddingLeft: _.left + "px", paddingTop: _.top + "px", paddingBottom: _.bottom + "px", paddingRight: _.right + "px" }}>
      ${u2.map((ie2, Q2) => html.node`<div data-node-id=${ie2.id} .data=${{ entryTransition: { delay: 400 + Q2 * 100, offset: { x: 0, y: "100%" }, scale: { x: 0.8, y: 0.8 }, opacity: 0 }, exitTransition: { offset: { x: 0, y: 1e3 }, scale: { x: 0.8, y: 0.8 }, opacity: 0 }, borderRadius: p2 ? 0 : 5 }} style=${{ display: "flex", width: p2 ? "100%" : ee2 + "px", height: p2 ? X2 + "px" : "auto", aspectRatio: I2, marginBottom: Q2 === u2.length - 1 ? 0 : _.between + "px", flexGrow: 0, flexShrink: 1, flexBasis: X2 + "px" }}></div>`)}
      </div>
    `;
} }, Row = { name: "Row", layout: ({ props: a420 = {}, children: u2, size: c }) => {
  let { justify: l2 = "center", align: v2 = "center", cover: p2 = false, margin: _ = {}, dimensions: I2, maxWidth: P2 = 1, reverse: $ = false } = a420;
  const F2 = p2 ? 0 : Math.min(c.y / 6, 12);
  _ = { left: F2, right: F2, top: F2, bottom: F2, between: F2, ..._ };
  const H2 = c.y - _.top - _.bottom, j = c.x - _.left - _.right, ee2 = _.between * ((u2.length || 1) - 1);
  let X2 = H2, ie2 = Math.min((j - ee2) / (u2.length || 1), I2 ? H2 * I2 : j, P2 * c.x);
  return I2 && (X2 = ie2 / I2), html.node`
      <div style=${{ height: p2 ? c.y + "px" : "auto", width: "100%", display: "flex", flexDirection: $ ? "row-reverse" : "row", justifyContent: l2, alignItems: v2, paddingLeft: _.left + "px", paddingTop: _.top + "px", paddingBottom: _.bottom + "px", paddingRight: _.right + "px" }}>
          ${u2.map((Q2, ne2) => html.node`<div data-node-id=${Q2.id} .data=${{ entryTransition: { delay: 400 + ne2 * 100, offset: { x: 0, y: "100%" }, scale: { x: 0.8, y: 0.8 }, opacity: 0 }, exitTransition: { offset: { x: 0, y: 1e3 }, scale: { x: 0.8, y: 0.8 }, opacity: 0 }, borderRadius: p2 ? 0 : 5 }} style=${{ display: "flex", height: p2 ? "100%" : X2 + "px", width: ie2 + "px", marginRight: ne2 === u2.length - 1 ? 0 : _.between + "px", flexGrow: 0, flexShrink: 1, flexBasis: ie2 + "px" }}></div>`)}
      </div>
    `;
} }, toMatrix = (a420, u2) => a420.reduce((c, l2, v2) => (v2 % u2 == 0 ? c.push([v2]) : c[c.length - 1].push(v2)) && c, []), Grid = { name: "Grid", layout: ({ props: a420 = {}, children: u2, size: c }) => {
  let { dimensions: l2, numPerRow: v2, margin: p2, cover: _ = false, maxWidth: I2, between: P2 } = a420;
  const $ = u2.length === 0 || _ ? 0 : P2 || Math.min(c.y / u2.length / 10, 30);
  p2 = p2 ?? $;
  const F2 = c.x < c.y;
  P2 = typeof P2 == "number" ? P2 : p2;
  let H2 = [];
  v2 ? H2 = toMatrix(u2, v2) : H2 = F2 ? getTallGrid(u2.length) : getWideGrid(u2.length);
  const j = (c.y - (p2 * 2 + P2 * (H2.length - 1))) / H2.length, ee2 = c.x - p2 * 2;
  return html.node`
    <div style=${{ display: "flex", width: "100%", height: "100%", flexDirection: "column", justifyContent: "center", padding: p2 + "px", gap: P2 + "px", flexGrow: 0 }}>${H2.map((X2, ie2) => Row.layout({ props: { justify: "center", dimensions: l2, cover: _, maxWidth: I2 || 1 / (H2[0].length || 1), margin: { top: 0, right: 0, left: 0, bottom: 0, between: P2 } }, children: X2.map((Q2) => u2[Q2]), size: { y: j, x: ee2 } }))}</div>`;
} }, Presentation = { name: "Presentation", layout: ({ props: a420 = {}, children: u2, size: c }) => {
  let { margin: l2, cover: v2 = false, barWidth: p2 = 0.2, barPosition: _ = "side", presentationDimensions: I2 = 16 / 9, viewerDimensions: P2 = 16 / 9, justifyViewers: $ = "center", useGrid: F2 = false, reverse: H2 = false } = a420;
  const j = _ === "side" ? c.x * p2 : c.y * p2, ee2 = u2[0], X2 = u2.filter((le2) => le2 !== ee2), ie2 = u2.length <= 1 ? 0 : Math.min(c.x / 80, 30);
  if (l2 = l2 ?? ie2, !ee2)
    return Grid.layout({ props: a420, children: u2, size: c });
  const Q2 = u2[1], ne2 = { ...c };
  Q2 && (_ === "side" ? (ne2.x = c.x - j, ne2.y = ne2.x / I2) : (ne2.y = c.y - j, ne2.x = ne2.y * I2));
  let Z2, de2 = {};
  F2 ? (Z2 = Grid.layout, de2 = { cover: v2, ...v2 ? { maxWidth: 1 } : { margin: l2 } }) : (Z2 = _ === "side" ? Column.layout : Row.layout, de2 = { margin: { top: l2, left: l2, bottom: l2, right: l2, between: l2 }, dimensions: P2, justify: $, align: "flex-end" });
  const pe2 = _ === "side" ? H2 ? "left" : "right" : H2 ? "top" : "bottom";
  return html.node`
      <div style=${{ display: "flex", flexDirection: (_ === "side" ? "row" : "column") + (H2 ? "-reverse" : ""), justifyContent: "space-around", alignItems: "center", position: "relative", padding: v2 ? 0 : l2, [`padding-${pe2}`]: 0 }}>
        ${u2[0] && html.node`<div style=${{
    // aspectRatio: String(presentationDimensions),
    width: ne2.x,
    height: ne2.y,
    display: "flex",
    flexGrow: 1
  }}>
            <div data-node-id=${ee2.id} .data=${{ dimensions: I2, borderRadius: v2 ? 0 : 5, entryTransition: { delay: 0, offset: { x: 0, y: 1e3 }, scale: { x: 0.5, y: 0.5 }, opacity: 0 }, exitTransition: { offset: { x: 0, y: 1e3 }, scale: { x: 2, y: 2 }, opacity: 0 } }} style=${{ width: "100%", height: "100%", ...v2 ? { position: "absolute", top: 0, left: 0, width: F2 && Q2 ? 100 - p2 * 100 + "%" : "100%", height: "100%" } : {} }} />
          </div>`}
        ${html.node`<div style=${{ ..._ === "side" ? { maxWidth: p2 * 100 + "%", height: "100%" } : { maxHeight: p2 * 100 + "%", width: "100%" } }}>${Q2 && Z2({ props: de2, children: X2, size: _ === "side" ? { x: j, y: c.y } : { x: c.x, y: j } })}</div>`}
      </div>
    `;
} }, Layered = { name: "Layered", layout: ({ props: a420 = {}, children: u2, size: c }) => html.node`<div style=${{ width: "100%", height: "100%", position: "relative" }}>
      ${u2.map((l2, v2) => html.node`<div data-node-id=${l2.id} .data=${{ zIndex: v2 + 1 }} style=${{ position: "absolute", inset: "0px" }}></div>`)}
    </div>` }, getWideGrid = (a420 = 0) => {
  switch (a420) {
    case 0:
      return [[]];
    case 1:
      return [[0]];
    case 2:
      return [[0, 1]];
    case 3:
      return [[0, 1], [2]];
    case 4:
      return [[0, 1], [2, 3]];
    case 5:
      return [[0, 1, 2], [3, 4]];
    case 6:
      return [[0, 1, 2], [3, 4, 5]];
    case 7:
      return [[0, 1, 2], [3, 4, 5], [6]];
    case 8:
      return [[0, 1, 2], [3, 4, 5], [6, 7]];
  }
  const u2 = Array(a420).fill(null).map((c, l2) => l2);
  return toMatrix(u2, Math.round(Math.sqrt(a420)));
}, getTallGrid = (a420 = 0) => {
  switch (a420) {
    case 0:
      return [[]];
    case 1:
      return [[0]];
    case 2:
      return [[0], [1]];
    case 3:
      return [[0, 1], [2]];
    case 4:
      return [[0, 1], [2, 3]];
    case 5:
      return [[0, 1], [2, 3], [4]];
    case 6:
      return [[0, 1], [2, 3], [4, 5]];
    case 7:
      return [[0, 1], [2, 3], [4, 5], [6]];
    case 8:
      return [[0, 1], [2, 3], [4, 5], [6, 7]];
  }
  const u2 = Array(a420).fill(null).map((c, l2) => l2);
  return toMatrix(u2, Math.ceil(Math.sqrt(u2.length)) - 1);
}, Layouts = /* @__PURE__ */ Object.freeze(/* @__PURE__ */ Object.defineProperty({ __proto__: null, Column, Free, Grid, Layered, Presentation, Row }, Symbol.toStringTag, { value: "Module" })), deviceWatchers = /* @__PURE__ */ new Set(), updateMediaStreamTracks = (a420, u2) => {
  const c = { audio: a420.getAudioTracks()[0], video: a420.getVideoTracks()[0] };
  c.audio !== u2.audio && (c.audio && a420.removeTrack(c.audio), u2.audio && a420.addTrack(u2.audio)), c.video !== u2.video && (c.video && a420.removeTrack(c.video), u2.video && a420.addTrack(u2.video));
}, getDevicePermissions = async () => {
  const a420 = { audio: true, video: true };
  return Promise.all([navigator.mediaDevices.getUserMedia({ video: true }).then((u2) => {
    u2.getTracks().forEach((c) => c.stop());
  }).catch((u2) => {
    u2.name === "NotAllowedError" && (a420.video = false);
  }), navigator.mediaDevices.getUserMedia({ audio: true }).then((u2) => {
    u2.getTracks().forEach((c) => c.stop());
  }).catch((u2) => {
    u2.name === "NotAllowedError" && (a420.audio = false);
  })]).then(() => a420);
}, ensureDevicePermissions = async () => getDevicePermissions(), watchDevices = (a420) => (deviceWatchers.size === 0 && navigator.mediaDevices.addEventListener("devicechange", reportDevices), deviceWatchers.add(a420), reportDevices().catch(() => {
}), () => {
  deviceWatchers.delete(a420), deviceWatchers.size === 0 && navigator.mediaDevices.removeEventListener("devicechange", reportDevices);
}), getUserMedia = async (...a420) => {
  const u2 = await navigator.mediaDevices.getUserMedia(...a420);
  return reportDevices(), u2;
}, deviceWithDefaultLabel = (a420, u2) => ({ deviceId: a420.deviceId, groupId: a420.groupId, kind: a420.kind, label: a420.label || u2 }), reportDevices = async () => {
  const a420 = await navigator.mediaDevices.enumerateDevices(), u2 = a420.filter((v2) => v2.kind === "videoinput").map((v2, p2) => deviceWithDefaultLabel(v2, "Camera " + (p2 + 1))), c = a420.filter((v2) => v2.kind === "audioinput").map((v2, p2) => deviceWithDefaultLabel(v2, "Microphone " + (p2 + 1))), l2 = a420.filter((v2) => v2.kind === "audiooutput").map((v2, p2) => deviceWithDefaultLabel(v2, "Speaker " + (p2 + 1)));
  deviceWatchers.forEach((v2) => v2({ webcams: u2, microphones: c, speakers: l2 }));
}, webrtc = /* @__PURE__ */ Object.freeze(/* @__PURE__ */ Object.defineProperty({ __proto__: null, ensureDevicePermissions, getDevicePermissions, getUserMedia, updateMediaStreamTracks, watchDevices }, Symbol.toStringTag, { value: "Module" })), RoomParticipant = { type: "RoomParticipant", valueType: MediaStream, props: {
  id: {},
  type: {},
  // 'screen' | 'camera'
  videoEnabled: {},
  audioEnabled: {}
}, init({ addSource: a420, removeSource: u2, updateSource: c, getSource: l2 }) {
  CoreContext.on("RoomJoined", ({ room: v2 }) => {
    let p2 = {}, _ = [], I2 = [], P2 = {};
    const $ = () => {
      _.filter((F2) => (F2 == null ? void 0 : F2.type) === "camera" && (F2 == null ? void 0 : F2.isExternal) === true).forEach((F2) => {
        var H2, j, ee2;
        if (F2.type === "camera") {
          const X2 = P2[F2.id], ie2 = v2.getParticipant(F2.participantId), Q2 = v2.getTrack(F2.id);
          if (l2(F2 == null ? void 0 : F2.id)) {
            const Z2 = v2.getTrack((H2 = ie2 == null ? void 0 : ie2.meta[F2.id]) == null ? void 0 : H2.microphone);
            updateMediaStreamTracks(X2, { video: Q2 == null ? void 0 : Q2.mediaStreamTrack, audio: Z2 == null ? void 0 : Z2.mediaStreamTrack }), c(F2.id, { videoEnabled: !!(Q2 && !Q2.isMuted), audioEnabled: !!(Z2 && !Z2.isMuted), displayName: ((j = ie2 == null ? void 0 : ie2.meta[F2.id]) == null ? void 0 : j.displayName) || "External Track", mirrored: (ee2 = ie2 == null ? void 0 : ie2.meta[F2.id]) == null ? void 0 : ee2.isMirrored, microphone: Z2, external: F2 == null ? void 0 : F2.isExternal });
          }
        }
      }), I2.forEach((F2) => {
        var de2;
        const H2 = P2[F2.id], j = P2[F2.id + "-screen"], ee2 = F2.trackIds.find((pe2) => {
          const le2 = v2.getTrack(pe2);
          return (le2 == null ? void 0 : le2.type) === "camera" && !(le2 != null && le2.isExternal);
        }), X2 = F2.trackIds.find((pe2) => {
          const le2 = v2.getTrack(pe2);
          return (le2 == null ? void 0 : le2.type) === "microphone" && !(le2 != null && le2.isExternal);
        }), ie2 = F2.trackIds.find((pe2) => {
          const le2 = v2.getTrack(pe2);
          return (le2 == null ? void 0 : le2.type) === "screen_share";
        }), Q2 = v2.getTrack(ee2), ne2 = v2.getTrack(X2), Z2 = v2.getTrack(ie2);
        updateMediaStreamTracks(H2, { video: Q2 == null ? void 0 : Q2.mediaStreamTrack, audio: ne2 == null ? void 0 : ne2.mediaStreamTrack }), updateMediaStreamTracks(j, { video: Z2 == null ? void 0 : Z2.mediaStreamTrack }), c(F2.id, { videoEnabled: !!(Q2 && !Q2.isMuted), audioEnabled: !!(ne2 && !ne2.isMuted), displayName: F2.displayName, mirrored: (de2 = F2 == null ? void 0 : F2.meta) == null ? void 0 : de2.isMirrored, external: Q2 == null ? void 0 : Q2.isExternal }), c(F2.id + "-screen", { videoEnabled: !!(Z2 && !Z2.isMuted), displayName: F2.meta.screenDisplayName || `${F2.displayName}'s Screen` });
      });
    };
    v2.useTracks((F2) => {
      const H2 = F2.filter((ee2) => !_.some((X2) => X2.id === ee2.id) && !!(ee2 != null && ee2.mediaStreamTrack)), j = _.filter((ee2) => !F2.some((X2) => X2.id === ee2.id));
      _ = F2.filter((ee2) => !!(ee2 != null && ee2.mediaStreamTrack)), H2.forEach((ee2) => {
        const X2 = new MediaStream([]);
        P2[ee2.id] = X2;
        const { id: ie2, participantId: Q2, type: ne2, mediaStreamTrack: Z2 } = v2.getTrack(ee2.id);
        Z2 && a420({ id: ie2, isActive: true, value: X2, props: { id: ie2, trackId: ie2, participantId: Q2, isMuted: ee2.isMuted, type: ne2 } });
      }), j.forEach((ee2) => {
        var X2;
        u2(ee2.id), (X2 = p2[ee2.id]) == null || X2.call(p2);
      }), $();
    }), v2.useParticipants((F2) => {
      const H2 = F2.filter((ee2) => !I2.some((X2) => X2.id === ee2.id)), j = I2.filter((ee2) => !F2.some((X2) => X2.id === ee2.id));
      I2 = F2, H2.forEach((ee2) => {
        var ne2;
        const { id: X2 } = ee2, ie2 = new MediaStream([]), Q2 = new MediaStream([]);
        P2[X2] = ie2, P2[X2 + "-screen"] = Q2, a420({ id: X2, isActive: true, value: ie2, props: { id: X2, type: "camera", displayName: ee2.displayName || ee2.id, audioEnabled: false, videoEnabled: false, mirrored: (ne2 = ee2 == null ? void 0 : ee2.meta) == null ? void 0 : ne2.isMirrored } }), a420({ id: X2 + "-screen", isActive: true, value: Q2, props: { id: X2, type: "screen", displayName: ee2.displayName || ee2.id, audioEnabled: false, videoEnabled: false } });
      }), $(), j.forEach((ee2) => {
        var X2;
        u2(ee2.id), (X2 = p2[ee2.id]) == null || X2.call(p2);
      });
    });
  });
} }, Banner = { type: "Banner", valueType: Object, props: {}, init({ addSource: a420, removeSource: u2, updateSource: c, getSource: l2, modifySourceValue: v2 }) {
  let p2 = [];
  const _ = (I2 = []) => {
    const P2 = I2.filter((H2) => !p2.some((j) => j.id === H2.id)), $ = p2.filter((H2) => !I2.some((j) => j.id === H2.id)), F2 = I2.filter((H2) => {
      const j = p2.find((ee2) => ee2.id === H2.id);
      return !deepEqual(H2, j);
    });
    P2.forEach((H2) => a420({
      id: H2.id,
      value: { headerText: H2.props.headerText, bodyText: H2.props.bodyText },
      // TODO: It feels odd to have "props" match "value" exactly.
      //  They probably shouldn't be necessary here.
      props: H2.props
    })), $.forEach((H2) => u2(H2.id)), F2.forEach((H2) => {
      c(H2.id, H2.props), v2(H2.id, (j) => {
        j.headerText = H2.props.headerText, j.bodyText = H2.props.bodyText;
      });
    }), p2 = I2;
  };
  CoreContext.on("ActiveProjectChanged", ({ projectId: I2 }) => {
    var $;
    if (p2 = [], !I2)
      return;
    const P2 = getProject(I2);
    _((($ = P2.props) == null ? void 0 : $.banners) ?? []);
  }), CoreContext.on("ProjectChanged", ({ project: I2 }) => {
    var P2;
    _(((P2 = I2.props) == null ? void 0 : P2.banners) ?? []);
  });
} }, Overlays = { type: "Overlay", valueType: Object, props: {}, init({ addSource: a420, removeSource: u2, updateSource: c, getSource: l2, modifySourceValue: v2 }) {
  let p2 = [];
  const _ = (I2 = []) => {
    const P2 = I2.filter((H2) => !p2.some((j) => j.id === H2.id)), $ = p2.filter((H2) => !I2.some((j) => j.id === H2.id)), F2 = I2.filter((H2) => {
      const j = p2.find((ee2) => ee2.id === H2.id);
      return !deepEqual(H2, j);
    });
    P2.forEach((H2) => a420({
      id: H2.id,
      value: { ...H2.props },
      // TODO: It feels odd to have "props" match "value" exactly.
      //  They probably shouldn't be necessary here.
      props: H2.props
    })), $.forEach((H2) => u2(H2.id)), F2.forEach((H2) => {
      c(H2.id, H2.props), v2(H2.id, (j) => {
        Object.keys(H2.props).forEach((ee2) => {
          j[ee2] = H2.props[ee2];
        });
      });
    }), p2 = JSON.parse(JSON.stringify(I2));
  };
  CoreContext.on("ActiveProjectChanged", ({ projectId: I2 }) => {
    if (p2 = [], !I2)
      return;
    const P2 = getProject(I2);
    _(P2.props.overlays);
  }), CoreContext.on("ProjectChanged", ({ project: I2 }) => {
    _(I2.props.overlays);
  });
} }, Background = { type: "Background", valueType: Object, props: {}, init({ addSource: a420, removeSource: u2, updateSource: c, getSource: l2, modifySourceValue: v2 }) {
  let p2;
  const _ = (I2) => {
    if (!I2)
      return;
    const P2 = (p2 == null ? void 0 : p2.id) !== (I2 == null ? void 0 : I2.id) ? I2 : null, $ = deepEqual(I2, p2) ? null : I2;
    P2 && (a420({
      id: P2 == null ? void 0 : P2.id,
      value: { ...P2 == null ? void 0 : P2.props },
      // TODO: It feels odd to have "props" match "value" exactly.
      //  They probably shouldn't be necessary here.
      props: P2 == null ? void 0 : P2.props
    }), u2(p2 == null ? void 0 : p2.id)), $ && (c($ == null ? void 0 : $.id, $ == null ? void 0 : $.props), v2($ == null ? void 0 : $.id, (F2) => {
      Object.keys($ == null ? void 0 : $.props).forEach((H2) => {
        F2[H2] = $ == null ? void 0 : $.props[H2];
      });
    })), p2 = JSON.parse(JSON.stringify(I2));
  };
  CoreContext.on("ActiveProjectChanged", ({ projectId: I2 }) => {
    if (p2 = null, !I2)
      return;
    const P2 = getProject(I2);
    _(P2.props.background);
  }), CoreContext.on("ProjectChanged", ({ project: I2 }) => {
    _(I2.props.background);
  });
} }, Logo = { type: "Logo", valueType: Object, props: {}, init({ addSource: a420, removeSource: u2, updateSource: c, getSource: l2, modifySourceValue: v2 }) {
  let p2;
  const _ = (I2) => {
    if (!I2) {
      p2 && (u2(p2 == null ? void 0 : p2.id), p2 = null);
      return;
    }
    const P2 = (p2 == null ? void 0 : p2.id) !== (I2 == null ? void 0 : I2.id) ? I2 : null, $ = deepEqual(I2, p2) ? null : I2;
    P2 && (a420({
      id: P2 == null ? void 0 : P2.id,
      value: { ...P2 == null ? void 0 : P2.props },
      // TODO: It feels odd to have "props" match "value" exactly.
      //  They probably shouldn't be necessary here.
      props: P2 == null ? void 0 : P2.props
    }), u2(p2 == null ? void 0 : p2.id)), $ && (c($ == null ? void 0 : $.id, $ == null ? void 0 : $.props), v2($ == null ? void 0 : $.id, (F2) => {
      Object.keys($ == null ? void 0 : $.props).forEach((H2) => {
        F2[H2] = $ == null ? void 0 : $.props[H2];
      });
    })), p2 = JSON.parse(JSON.stringify(I2));
  };
  CoreContext.on("ActiveProjectChanged", ({ projectId: I2 }) => {
    if (p2 = null, !I2)
      return;
    const P2 = getProject(I2);
    _(P2.props.logo);
  }), CoreContext.on("ProjectChanged", ({ project: I2 }) => {
    _(I2.props.logo);
  });
} }, { state: state$1 } = CoreContext, updateUserProps = async (a420) => {
  const u2 = getUser();
  if (!u2)
    return;
  const c = { ...u2.props, ...a420.props }, l2 = await CoreContext.clients.LiveApi().collection.updateCollection({ collectionId: u2.id, updateMask: ["metadata"], metadata: { ...u2.metadata, props: c } });
  await triggerInternal$1("UserChanged", l2.collection);
}, createSource = async (a420) => {
  const u2 = getUser().id, { source: c } = await CoreContext.clients.LiveApi().source.createSource({ metadata: {}, collectionId: u2, address: { rtmpPush: { enabled: true } }, preview: { webrtc: { enabled: true, displayName: a420.displayName || "RTMP Source" } } });
  await triggerInternal$1("SourceAdded", c);
  const l2 = await CoreContext.clients.LiveApi().source.addSourceToProject({ collectionId: u2, projectId: a420.projectId, sourceId: c.sourceId });
  return await triggerInternal$1("ProjectSourceAdded", { projectId: l2.project.projectId, source: c }), c;
}, updateSource = async (a420) => {
  const u2 = getUser().id;
  let c = [], l2 = {};
  a420.metadata && (c.push("metadata"), l2.metadata = a420.metadata), a420.displayName && (c.push("preview.webrtc.displayName"), l2 = { ...l2, preview: { webrtc: { displayName: a420.displayName } } });
  const { source: v2 } = await CoreContext.clients.LiveApi().source.updateSource({ collectionId: u2, updateMask: c, sourceId: a420.sourceId, ...l2 });
  return await triggerInternal$1("SourceChanged", v2), v2;
}, deleteSource = async (a420) => {
  const u2 = getUser().id;
  await CoreContext.clients.LiveApi().source.removeSourceFromProject({ collectionId: u2, projectId: a420.projectId, sourceId: a420.sourceId }), await triggerInternal$1("ProjectSourceRemoved", { projectId: a420.projectId, sourceId: a420.sourceId });
  const c = await CoreContext.clients.LiveApi().source.deleteSource({ sourceId: a420.sourceId, collectionId: u2 });
  return await triggerInternal$1("SourceRemoved", a420.sourceId), c;
}, createProject$1 = async (a420 = {}) => {
  const { props: u2 = {}, size: c, settings: l2 = {} } = a420, v2 = await CoreContext.Request.createProject({ settings: l2, props: u2, size: c });
  await triggerInternal$1("ProjectAdded", v2.project);
  const p2 = await hydrateProject(v2.project, "ROLE_HOST");
  return toBaseProject(p2);
}, recreateLayout = async (a420) => {
  const { projectId: u2, props: c = {} } = a420, l2 = getUser().id, v2 = await CoreContext.clients.LiveApi().project.getProject({ collectionId: l2, projectId: u2, status: true });
  if ([ProjectBroadcastPhase.PROJECT_BROADCAST_PHASE_RUNNING, ProjectBroadcastPhase.PROJECT_BROADCAST_PHASE_STARTING].includes(v2.status.phase))
    return;
  const p2 = v2.project.metadata || {}, { layoutId: _ } = p2, { video: I2 } = v2.project.rendering, { type: P2 } = v2.project.metadata.props || {}, $ = await CoreContext.Request.createLayout({ collectionId: l2, projectId: u2, type: P2 || "sceneless", settings: {}, size: { x: I2.width, y: I2.height } }), F2 = await CoreContext.clients.LiveApi().project.updateProject({ collectionId: l2, projectId: u2, updateMask: ["metadata"], metadata: { ...p2, layoutId: $.id } });
  CoreContext.log.debug("New layout assigned to project:", { layout: $ }), await triggerInternal$1("ProjectChanged", { project: F2.project }), await CoreContext.clients.LayoutApi().layout.deleteLayout({ layoutId: _ }), CoreContext.log.debug("Previous layout deleted:", { layoutId: _ });
  const H2 = await hydrateProject(F2.project, "ROLE_HOST");
  return await H2.compositor.update(H2.compositor.getRoot().id, c), { project: toBaseProject(H2), internalProject: H2 };
}, deleteProject$1 = async (a420) => {
  const { projectId: u2 } = a420;
  await CoreContext.Request.deleteProject({ projectId: u2 }), await triggerInternal$1("ProjectRemoved", { projectId: u2 });
}, updateProjectProps = async (a420) => {
  const { projectId: u2 } = a420, c = getUser().id, l2 = getProject(u2), v2 = { ...l2.props, ...a420.props }, p2 = await CoreContext.clients.LiveApi().project.updateProject({ collectionId: c, projectId: u2, updateMask: ["metadata"], metadata: { ...l2.videoApi.project.metadata, props: v2 } });
  await triggerInternal$1("ProjectChanged", { project: p2.project });
}, updateProjectPropsWithoutTrigger = async (a420) => {
  const { projectId: u2 } = a420, c = getUser().id, l2 = getProject(u2), v2 = { ...l2.props, ...a420.props };
  await CoreContext.clients.LiveApi().project.updateProject({ collectionId: c, projectId: u2, updateMask: ["metadata"], metadata: { ...l2.videoApi.project.metadata, props: v2 } });
}, setActiveProject = async (a420) => {
  const u2 = state$1.projects.find((l2) => l2.id === a420.projectId);
  if (!u2) {
    state$1.activeProjectId = null, triggerInternal$1("ActiveProjectChanged", { projectId: null });
    return;
  }
  const c = state$1.projects.find((l2) => l2.id === state$1.activeProjectId);
  if (u2 !== c)
    return c && (Array.from(webrtcManager.rooms.keys()).map(webrtcManager.removeRoom), await CoreContext.clients.LayoutApi().unsubscribeFromLayout(c.layoutApi.layoutId), await CoreContext.clients.LiveApi().unsubscribeFromProject(c.videoApi.project.collectionId, c.videoApi.project.projectId)), await CoreContext.clients.LayoutApi().subscribeToLayout(u2.layoutApi.layoutId), await CoreContext.clients.LiveApi().subscribeToProject(u2.videoApi.project.collectionId, u2.videoApi.project.projectId), CoreContext.clients.LiveApi().project.getProject({ collectionId: u2.videoApi.project.collectionId, projectId: u2.videoApi.project.projectId, status: true }).then((l2) => {
      var v2, p2;
      triggerInternal$1("ProjectChanged", { project: l2.project, phase: (v2 = l2.status) == null ? void 0 : v2.phase, broadcastId: (p2 = l2.status) == null ? void 0 : p2.broadcastId });
    }), triggerInternal$1("ActiveProjectChanged", { projectId: u2.id }), toBaseProject(u2);
}, joinRoom = async (a420) => {
  const { projectId: u2, displayName: c = "Guest" } = a420, l2 = state$1.projects.find((H2) => H2.id === u2);
  let v2 = l2.sfuToken;
  if (!v2) {
    let { webrtcAccess: H2 } = await CoreContext.clients.LiveApi().authentication.createWebRtcAccessToken({ collectionId: l2.videoApi.project.collectionId, projectId: l2.videoApi.project.projectId, displayName: c });
    v2 = H2.accessToken;
  }
  const _ = jwtDecode(v2).video.room, I2 = new URL(CoreContext.clients.getLiveKitServer()), P2 = I2.host + I2.pathname, $ = webrtcManager.ensureRoom(P2, _, v2);
  $.bindApiClient(CoreContext.clients), await $.connect(), l2.sfuToken = v2, l2.roomId = _;
  const F2 = getRoom(_);
  return trigger$1("RoomJoined", { projectId: l2.id, room: F2 }), F2;
}, createNode = async (a420) => {
  let { props: u2 = {}, parentId: c, index: l2, projectId: v2 = state$1.activeProjectId } = a420;
  const p2 = getProject(v2), _ = await p2.compositor.insert(u2, c, l2);
  return triggerInternal$1("NodeAdded", { projectId: v2, nodeId: _ }), triggerInternal$1("NodeChanged", { projectId: v2, nodeId: c }), p2.compositor.get(_);
}, deleteNode = async (a420) => {
  var p2;
  let { nodeId: u2, projectId: c = state$1.activeProjectId } = a420;
  const l2 = getProject(c), v2 = (p2 = l2.compositor.getParent(u2)) == null ? void 0 : p2.id;
  l2.compositor.remove(u2), triggerInternal$1("NodeRemoved", { projectId: c, nodeId: u2 }), triggerInternal$1("NodeChanged", { projectId: c, nodeId: v2 });
}, updateNode = async (a420) => {
  let { nodeId: u2, props: c = {}, projectId: l2 = state$1.activeProjectId } = a420;
  const v2 = getProject(l2);
  return delete c.type, delete c.sourceType, v2.compositor.update(u2, c), triggerInternal$1("NodeChanged", { projectId: l2, nodeId: u2 }), v2.compositor.get(u2);
}, setNodeLayout = async (a420) => {
  let { nodeId: u2, layout: c, projectId: l2 = state$1.activeProjectId, layoutProps: v2 = {} } = a420;
  getProject(l2).compositor.update(u2, { layout: c, layoutProps: v2 }), triggerInternal$1("NodeChanged", { projectId: l2, nodeId: u2 });
}, moveNode = async (a420) => {
  const { nodeId: u2, parentId: c, projectId: l2 = state$1.activeProjectId, index: v2 } = a420;
  getProject(l2).compositor.move(u2, c, v2), triggerInternal$1("NodeChanged", { projectId: l2, nodeId: u2 });
}, swapNodes = async (a420) => {
  var I2, P2;
  const { nodeAId: u2, nodeBId: c, projectId: l2 = state$1.activeProjectId } = a420, v2 = getProject(l2), p2 = (I2 = v2.compositor.getParent(u2)) == null ? void 0 : I2.id, _ = (P2 = v2.compositor.getParent(c)) == null ? void 0 : P2.id;
  v2.compositor.swap(u2, c), triggerInternal$1("NodeChanged", { projectId: l2, nodeId: p2 }), triggerInternal$1("NodeChanged", { projectId: l2, nodeId: _ });
}, reorderNodes = async (a420) => {
  const { parentId: u2, childIds: c, projectId: l2 = state$1.activeProjectId } = a420;
  getProject(l2).compositor.reorder(u2, c), triggerInternal$1("NodeChanged", { projectId: l2, nodeId: u2 });
}, startBroadcast = async (a420) => {
  const { projectId: u2 = state$1.activeProjectId } = a420, c = getProject(u2);
  await CoreContext.clients.LiveApi().project.startProjectBroadcast({ collectionId: c.videoApi.project.collectionId, projectId: c.videoApi.project.projectId });
}, stopBroadcast = async (a420) => {
  const { projectId: u2 = state$1.activeProjectId } = a420, c = getProject(u2);
  await CoreContext.clients.LiveApi().project.stopProjectBroadcast({ collectionId: c.videoApi.project.collectionId, projectId: c.videoApi.project.projectId });
}, addDestination = async (a420) => {
  var $;
  const { rtmpUrl: u2, rtmpKey: c, enabled: l2, projectId: v2 = state$1.activeProjectId, props: p2 = {} } = a420, _ = getProject(v2), I2 = { rtmpPush: { key: c, url: u2 } }, P2 = await (($ = CoreContext.clients.LiveApi().destination) == null ? void 0 : $.createDestination({ collectionId: _.videoApi.project.collectionId, projectId: _.videoApi.project.projectId, address: I2, enabled: l2, metadata: { props: p2 } }));
  return await triggerInternal$1("DestinationAdded", P2.destination), toBaseDestination(P2.destination);
}, removeDestination = async (a420) => {
  var v2;
  const { destinationId: u2, projectId: c = state$1.activeProjectId } = a420, l2 = getProject(c);
  await ((v2 = CoreContext.clients.LiveApi().destination) == null ? void 0 : v2.deleteDestination({ collectionId: l2.videoApi.project.collectionId, projectId: l2.videoApi.project.projectId, destinationId: u2 })), await triggerInternal$1("DestinationRemoved", { projectId: c, destinationId: u2 });
}, updateDestination = async (a420) => {
  var P2;
  const { rtmpUrl: u2, rtmpKey: c, destinationId: l2, projectId: v2 = state$1.activeProjectId } = a420, p2 = getProject(v2), _ = { key: c, url: u2 }, I2 = await ((P2 = CoreContext.clients.LiveApi().destination) == null ? void 0 : P2.updateDestination({ collectionId: p2.videoApi.project.collectionId, projectId: p2.videoApi.project.projectId, destinationId: l2, updateMask: ["address.rtmpPush"], address: { rtmpPush: _ } }));
  await triggerInternal$1("DestinationChanged", I2.destination);
}, updateDestinationProps = async (a420) => {
  var I2, P2;
  const { projectId: u2 = state$1.activeProjectId, destinationId: c, props: l2 = {} } = a420, v2 = getProject(u2), p2 = v2.videoApi.project.destinations.find(($) => $.destinationId === c);
  if (!p2)
    return;
  const _ = await ((P2 = CoreContext.clients.LiveApi().destination) == null ? void 0 : P2.updateDestination({ collectionId: v2.videoApi.project.collectionId, projectId: v2.videoApi.project.projectId, destinationId: c, updateMask: ["metadata"], metadata: { ...p2.metadata || {}, props: { ...((I2 = p2.metadata) == null ? void 0 : I2.props) || {}, ...l2 } } }));
  await triggerInternal$1("DestinationChanged", _.destination);
}, setDestinationEnabled = async (a420) => {
  var I2;
  const { enabled: u2, destinationId: c, projectId: l2 = state$1.activeProjectId } = a420, v2 = getProject(l2);
  if (v2.videoApi.project.destinations.find((P2) => c === P2.destinationId).enabled === u2)
    return;
  const _ = await ((I2 = CoreContext.clients.LiveApi().destination) == null ? void 0 : I2.updateDestination({ collectionId: v2.videoApi.project.collectionId, projectId: v2.videoApi.project.projectId, destinationId: c, updateMask: ["enabled"], enabled: u2 }));
  await triggerInternal$1("DestinationChanged", _.destination);
}, setDestination = async (a420) => {
  var I2, P2;
  const { rtmpUrl: u2, rtmpKey: c, projectId: l2 = state$1.activeProjectId } = a420, v2 = getProject(l2), p2 = { key: c, url: u2 }, _ = true;
  if (v2.videoApi.project.destinations.length > 0) {
    const $ = await ((I2 = CoreContext.clients.LiveApi().destination) == null ? void 0 : I2.updateDestination({ collectionId: v2.videoApi.project.collectionId, projectId: v2.videoApi.project.projectId, destinationId: v2.videoApi.project.destinations[0].destinationId, updateMask: ["address.rtmpPush"], address: { rtmpPush: p2 } }));
    await triggerInternal$1("DestinationChanged", $.destination);
  } else {
    const $ = await ((P2 = CoreContext.clients.LiveApi().destination) == null ? void 0 : P2.createDestination({ collectionId: v2.videoApi.project.collectionId, projectId: v2.videoApi.project.projectId, address: { rtmpPush: p2 }, enabled: _ }));
    await triggerInternal$1("DestinationAdded", $.destination);
  }
}, commands$1 = /* @__PURE__ */ Object.freeze(/* @__PURE__ */ Object.defineProperty({ __proto__: null, addDestination, createNode, createProject: createProject$1, createSource, deleteNode, deleteProject: deleteProject$1, deleteSource, joinRoom, moveNode, recreateLayout, removeDestination, reorderNodes, setActiveProject, setDestination, setDestinationEnabled, setNodeLayout, startBroadcast, stopBroadcast, swapNodes, updateDestination, updateDestinationProps, updateNode, updateProjectProps, updateProjectPropsWithoutTrigger, updateSource, updateUserProps }, Symbol.toStringTag, { value: "Module" })), useActiveProjectRoom$1 = () => {
  const [a420, u2] = reactExports.useState(null);
  return reactExports.useEffect(() => useActiveProjectRoom(u2), []), a420;
}, useDevices$1 = () => {
  const [a420, u2] = reactExports.useState({ webcams: [], microphones: [], speakers: [] });
  return reactExports.useEffect(() => watchDevices(u2), []), a420;
}, StudioContext$1 = React.createContext({ studio: null, project: null, room: null, webcamId: null, microphoneId: null, setStudio: () => {
}, setProject: () => {
}, setRoom: () => {
}, setWebcamId: () => {
}, setMicrophoneId: () => {
}, projectCommands: {} }), useStudio$2 = () => reactExports.useContext(StudioContext$1);
let stored = { webcamId: null, microphoneId: null };
try {
  stored.webcamId = localStorage == null ? void 0 : localStorage.getItem("__LS_webcam"), stored.microphoneId = localStorage == null ? void 0 : localStorage.getItem("__LS_microphone");
} catch {
}
const StudioProvider = ({ children: a420 }) => {
  const [u2, c] = reactExports.useState(), [l2, v2] = reactExports.useState(), [p2, _] = reactExports.useState(), [I2, P2] = reactExports.useState(stored.webcamId), [$, F2] = reactExports.useState(stored.microphoneId), H2 = reactExports.useMemo(() => l2 ? commands(l2) : null, [l2]);
  return reactExports.useEffect(() => {
  }, [l2]), reactExports.useEffect(() => {
    u2 && (I2 && u2.setCamera({ deviceId: I2 }).catch((j) => {
      console.warn(j);
    }), $ && u2.setMicrophone({ deviceId: $ }).catch((j) => {
      console.warn(j);
    }));
  }, [u2, I2, $]), /* @__PURE__ */ jsx(StudioContext$1.Provider, { value: { studio: p2, project: l2, room: u2, webcamId: I2, microphoneId: $, setStudio: _, setProject: v2, setRoom: c, setWebcamId: (j) => {
    try {
      localStorage == null || localStorage.setItem("__LS_webcam", j);
    } catch {
    }
    P2(j);
  }, setMicrophoneId: (j) => {
    try {
      localStorage == null || localStorage.setItem("__LS_microphone", j);
    } catch {
    }
    F2(j);
  }, projectCommands: H2 }, children: a420 });
}, react = /* @__PURE__ */ Object.freeze(/* @__PURE__ */ Object.defineProperty({ __proto__: null, StudioContext: StudioContext$1, StudioProvider, useActiveProjectRoom: useActiveProjectRoom$1, useDevices: useDevices$1, useStudio: useStudio$2 }, Symbol.toStringTag, { value: "Module" })), ForegroundLayers = [{ name: "ImageIframeOverlayContainer", id: "fg-image-iframe", layout: "Free" }, { name: "BannerContainer", id: "fg-banners", layout: "Column", layoutProps: { cover: true } }, { name: "VideoOverlayContainer", id: "fg-video", layout: "Free" }, { name: "LogoContainer", layout: "Free", id: "logo" }], defaultStyles = { custom: { display: "block" }, video: { height: "100%", width: "100%" }, image: { height: "100%", width: "100%" }, logo: { objectFit: "contain", position: "unset" } }, validateEachChildren = (a420, u2) => {
  let c = true;
  return a420.forEach((l2) => {
    var v2, p2;
    (v2 = l2.props) != null && v2.sourceType && !u2.includes((p2 = l2.props) == null ? void 0 : p2.sourceType) ? c = false : l2.children.length > 0 && (c = c && validateEachChildren(l2.children, u2));
  }), c;
}, addingCache = { camera: /* @__PURE__ */ new Set(), screen: /* @__PURE__ */ new Set(), rtmp: /* @__PURE__ */ new Set() }, commands = (a420) => {
  var ne2, Z2, de2, pe2;
  const u2 = a420.id, c = a420.scene.getRoot(), { Command: l2 } = CoreContext, v2 = c.children.find((le2) => le2.props.id === "bg"), p2 = c.children.find((le2) => le2.props.id === "content"), _ = c.children.find((le2) => le2.props.id === "foreground");
  let I2 = (ne2 = _ == null ? void 0 : _.children) == null ? void 0 : ne2.find((le2) => le2.props.id === "fg-image-iframe"), P2 = (Z2 = _ == null ? void 0 : _.children) == null ? void 0 : Z2.find((le2) => le2.props.id === "logo"), $ = (de2 = _ == null ? void 0 : _.children) == null ? void 0 : de2.find((le2) => le2.props.id === "fg-video");
  const F2 = getProject(a420.id);
  let H2 = (pe2 = _ == null ? void 0 : _.children) == null ? void 0 : pe2.find((le2) => le2.props.id === "fg-banners");
  const j = async () => {
    var le2, be2;
    ((le2 = v2 == null ? void 0 : v2.props) == null ? void 0 : le2.layout) !== "Layered" && await F2.compositor.update(v2.id, { name: "Background", id: "bg", layout: "Layered" }), ((be2 = _ == null ? void 0 : _.props) == null ? void 0 : be2.layout) !== "Layered" && await F2.compositor.update(_.id, { id: "foreground", name: "Overlays", layout: "Layered" });
  }, ee2 = async () => {
    validateEachChildren(v2.children, ["Background"]) || v2.children.forEach(async (le2) => {
      await CoreContext.Command.deleteNode({ nodeId: le2.id });
    });
  }, X2 = async () => {
    const le2 = async () => {
      var q2;
      if (H2)
        return H2.id;
      {
        const z2 = await F2.compositor.insert({ name: "BannerContainer", id: "fg-banners", layout: "Column", layoutProps: { cover: true } }, _.id);
        return H2 = (q2 = _ == null ? void 0 : _.children) == null ? void 0 : q2.find((C2) => C2.id === z2), z2;
      }
    }, be2 = async () => {
      var q2;
      if (I2)
        return I2.id;
      {
        const z2 = await F2.compositor.insert({ name: "ImageIframeOverlay", id: "fg-image-iframe", layout: "Free" }, _.id);
        return I2 = (q2 = _ == null ? void 0 : _.children) == null ? void 0 : q2.find((C2) => C2.id === z2), z2;
      }
    }, ke2 = async () => {
      var q2;
      if ($)
        return $.id;
      {
        const z2 = await F2.compositor.insert({ name: "VideoOverlay", id: "fg-video", layout: "Free" }, _.id);
        return $ = (q2 = _ == null ? void 0 : _.children) == null ? void 0 : q2.find((C2) => C2.id === z2), z2;
      }
    }, Te2 = async () => {
      var q2;
      if (P2)
        return P2.id;
      {
        const z2 = await F2.compositor.insert({ name: "Logo", layout: "Free", sourceType: "Logo", id: "logo", style: { width: "100%", height: "100%", objectFit: "contain", position: "unset" } }, _.id);
        return P2 = (q2 = _ == null ? void 0 : _.children) == null ? void 0 : q2.find((C2) => C2.id === z2), z2;
      }
    };
    try {
      const q2 = await Promise.all([le2(), be2(), ke2(), Te2()]);
      await F2.compositor.reorder(_.id, q2);
    } catch {
    }
  }, ie2 = {
    getBackground() {
      return v2;
    },
    getContent() {
      return p2;
    },
    getForeground() {
      return _;
    },
    getLayout() {
      return p2.props.layout;
    },
    getBanners() {
      var le2;
      return ((le2 = getProject(a420.id).props) == null ? void 0 : le2.banners) || [];
    },
    getOverlays() {
      return getProject(a420.id).props.overlays || [];
    },
    getParticipants() {
      return p2.children.filter((le2) => le2.props.sourceType === "RoomParticipant");
    },
    getLogo() {
      var le2, be2;
      return (be2 = (le2 = P2 == null ? void 0 : P2.children[0]) == null ? void 0 : le2.props) == null ? void 0 : be2.id;
    },
    async removeLogo() {
      const [le2, ...be2] = (P2 == null ? void 0 : P2.children) || [];
      be2.forEach((ke2) => {
        CoreContext.Command.deleteNode({ nodeId: ke2.id });
      }), le2 && await CoreContext.Command.deleteNode({ nodeId: le2.id });
    },
    getImageOverlay() {
      var be2, ke2;
      const le2 = (be2 = I2 == null ? void 0 : I2.children) == null ? void 0 : be2.find((Te2) => {
        var q2, z2;
        return ((z2 = (q2 = Te2 == null ? void 0 : Te2.props) == null ? void 0 : q2.sourceProps) == null ? void 0 : z2.type) === "image";
      });
      return (ke2 = le2 == null ? void 0 : le2.props) == null ? void 0 : ke2.id;
    },
    getVideoOverlay() {
      var be2, ke2;
      const le2 = (be2 = $ == null ? void 0 : $.children) == null ? void 0 : be2.find((Te2) => {
        var q2, z2;
        return ((z2 = (q2 = Te2 == null ? void 0 : Te2.props) == null ? void 0 : q2.sourceProps) == null ? void 0 : z2.type) === "video";
      });
      return (ke2 = le2 == null ? void 0 : le2.props) == null ? void 0 : ke2.id;
    },
    autoPlayBackgroundVideo(le2 = { muted: true, autoplay: true }) {
      const be2 = v2.children.find((ke2) => ke2.props.id === "bg-video");
      be2 && CoreContext.Command.updateNode({ nodeId: be2.id, props: { ...be2.props, attributes: { ...be2.props.attributes, ...le2 } } });
    },
    autoPlayVideoOverlay(le2, be2 = { muted: true, autoplay: true }) {
      var Te2;
      const ke2 = (Te2 = $ == null ? void 0 : $.children) == null ? void 0 : Te2.find((q2) => {
        var z2, C2;
        return ((C2 = (z2 = q2.props) == null ? void 0 : z2.sourceProps) == null ? void 0 : C2.id) === le2;
      });
      ke2 && ke2.props.sourceProps.type === "video" && CoreContext.Command.updateNode({ nodeId: ke2.id, props: { ...ke2.props, attributes: { ...ke2.props.attributes, ...be2 } } });
    },
    getBackgroundMedia() {
      var be2, ke2;
      return (ke2 = (be2 = v2.children.filter((Te2) => Te2)[0]) == null ? void 0 : be2.props) == null ? void 0 : ke2.id;
    },
    getBackgroundImage() {
      var be2;
      const le2 = v2.children.find((ke2) => {
        var Te2, q2;
        return ((q2 = (Te2 = ke2.props) == null ? void 0 : Te2.sourceProps) == null ? void 0 : q2.type) === "image";
      });
      return (be2 = le2 == null ? void 0 : le2.props) == null ? void 0 : be2.id;
    },
    getBackgroundVideo() {
      var be2;
      const le2 = v2.children.find((ke2) => {
        var Te2, q2;
        return ((q2 = (Te2 = ke2.props) == null ? void 0 : Te2.sourceProps) == null ? void 0 : q2.type) === "video";
      });
      return (be2 = le2 == null ? void 0 : le2.props) == null ? void 0 : be2.id;
    },
    async addLogo(le2, be2) {
      const [ke2, ...Te2] = (P2 == null ? void 0 : P2.children) || [];
      Te2.forEach((q2) => {
        CoreContext.Command.deleteNode({ nodeId: q2.id });
      }), ke2 ? await CoreContext.Command.updateNode({ nodeId: ke2.id, props: { sourceType: "Logo", id: le2, sourceProps: { ...be2, meta: { style: { ...defaultStyles.logo }, ...be2.meta } } } }) : await CoreContext.Command.createNode({ parentId: P2 == null ? void 0 : P2.id, props: { sourceType: "Logo", id: le2, sourceProps: { ...be2, meta: { style: { ...defaultStyles.logo }, ...be2.meta } } } });
    },
    addBanner(le2 = {}) {
      var q2;
      const be2 = le2.meta || {}, ke2 = { id: generateId(), props: { ...le2, meta: be2 } }, Te2 = ((q2 = getProject(u2).props) == null ? void 0 : q2.banners) || [];
      return l2.updateProjectProps({ projectId: u2, props: { banners: [...Te2, ke2] } });
    },
    editBanner(le2, be2 = {}) {
      const Te2 = ie2.getBanners().map((q2) => q2.id !== le2 ? q2 : { ...q2, props: be2 });
      return l2.updateProjectProps({ projectId: u2, props: { banners: Te2 } });
    },
    removeBanner(le2) {
      var ke2;
      const be2 = ie2.getBanners();
      return (ke2 = H2 == null ? void 0 : H2.children) == null || ke2.forEach((Te2) => {
        Te2.props.bannerId === le2 && CoreContext.Command.deleteNode({ nodeId: Te2.id });
      }), l2.updateProjectProps({ projectId: u2, props: { banners: be2.filter((Te2) => Te2.id !== le2) } });
    },
    async setActiveBanner(le2) {
      var q2, z2;
      const [be2, ...{}] = (H2 == null ? void 0 : H2.children) || [];
      ((z2 = (q2 = be2 == null ? void 0 : be2.props) == null ? void 0 : q2.sourceType) == null ? void 0 : z2.toLowerCase()) === "chatoverlay" && await CoreContext.Command.deleteNode({ nodeId: be2.id });
      const [ke2, ...Te2] = (H2 == null ? void 0 : H2.children) || [];
      if (Te2.forEach((C2) => {
        CoreContext.Command.deleteNode({ nodeId: C2.id });
      }), ke2)
        CoreContext.Command.updateNode({ nodeId: ke2.id, props: { sourceType: "Banner", bannerId: le2 } });
      else
        return CoreContext.Command.createNode({ parentId: H2 == null ? void 0 : H2.id, props: { sourceType: "Banner", bannerId: le2 } });
    },
    getActiveBanner() {
      var le2, be2, ke2;
      return ((ke2 = (be2 = (le2 = H2.children) == null ? void 0 : le2[0]) == null ? void 0 : be2.props) == null ? void 0 : ke2.bannerId) ?? null;
    },
    async addChatOverlay(le2, be2) {
      var z2, C2;
      const [ke2, ...{}] = (H2 == null ? void 0 : H2.children) || [];
      ((C2 = (z2 = ke2 == null ? void 0 : ke2.props) == null ? void 0 : z2.sourceType) == null ? void 0 : C2.toLowerCase()) === "banner" && await CoreContext.Command.deleteNode({ nodeId: ke2.id });
      const [Te2, ...q2] = (H2 == null ? void 0 : H2.children) || [];
      q2.forEach((b) => {
        CoreContext.Command.deleteNode({ nodeId: b.id });
      }), Te2 ? await CoreContext.Command.updateNode({ nodeId: Te2.id, props: { sourceType: "ChatOverlay", chatOverlayId: le2, id: le2, ...be2 } }) : await CoreContext.Command.createNode({ parentId: H2 == null ? void 0 : H2.id, props: { sourceType: "ChatOverlay", chatOverlayId: le2, id: le2, ...be2 } });
    },
    async removeChatOverlay(le2) {
      var be2;
      (be2 = H2 == null ? void 0 : H2.children) == null || be2.forEach(async (ke2) => {
        ke2.props.chatOverlayId === le2 && await CoreContext.Command.deleteNode({ nodeId: ke2.id });
      });
    },
    getChatOverlay() {
      var le2, be2, ke2, Te2, q2;
      return (ke2 = (be2 = (le2 = H2.children) == null ? void 0 : le2[0]) == null ? void 0 : be2.props) != null && ke2.chatOverlayId && ((q2 = (Te2 = H2.children) == null ? void 0 : Te2[0]) == null ? void 0 : q2.props) || null;
    },
    getCustomOverlay() {
      var be2, ke2;
      const le2 = (be2 = I2 == null ? void 0 : I2.children) == null ? void 0 : be2.find((Te2) => {
        var q2, z2;
        return ((z2 = (q2 = Te2 == null ? void 0 : Te2.props) == null ? void 0 : q2.sourceProps) == null ? void 0 : z2.type) === "custom";
      });
      return (ke2 = le2 == null ? void 0 : le2.props) == null ? void 0 : ke2.id;
    },
    async addImageOverlay(le2, be2) {
      const [ke2, ...Te2] = (I2 == null ? void 0 : I2.children) || [];
      Te2.forEach((z2) => {
        CoreContext.Command.deleteNode({ nodeId: z2.id });
      });
      const q2 = { ...defaultStyles.image, ...($ == null ? void 0 : $.children.length) && { opacity: 0 } };
      ke2 ? await CoreContext.Command.updateNode({ nodeId: ke2 == null ? void 0 : ke2.id, props: { sourceType: "Overlay", id: le2, sourceProps: { ...be2, type: "image", meta: { style: { ...q2 } } } } }) : await CoreContext.Command.createNode({ parentId: I2 == null ? void 0 : I2.id, props: { sourceType: "Overlay", id: le2, sourceProps: { ...be2, type: "image", meta: { style: { ...q2 } } } } });
    },
    async addVideoOverlay(le2, be2) {
      const [ke2, ...Te2] = ($ == null ? void 0 : $.children) || [];
      Te2.forEach((q2) => {
        CoreContext.Command.deleteNode({ nodeId: q2.id });
      }), I2.children.forEach(({ id: q2, props: z2 }) => {
        var C2, b;
        if (((b = (C2 = z2.sourceProps.meta) == null ? void 0 : C2.style) == null ? void 0 : b.opacity) !== 0) {
          const E2 = z2.sourceProps.type, k = { ...defaultStyles[E2], opacity: 0 };
          CoreContext.Command.updateNode({ nodeId: q2, props: { ...z2, sourceProps: { ...z2.sourceProps, meta: { style: { ...k } } } } });
        }
      }), ke2 ? await CoreContext.Command.updateNode({ nodeId: ke2 == null ? void 0 : ke2.id, props: { sourceType: "Overlay", id: le2, sourceProps: { ...be2, type: "video", meta: { style: { ...defaultStyles.video }, ...be2.meta } } } }) : await CoreContext.Command.createNode({ parentId: $ == null ? void 0 : $.id, props: { sourceType: "Overlay", id: le2, sourceProps: { ...be2, type: "video", meta: { style: { ...defaultStyles.video }, ...be2.meta } } } });
    },
    async updateVideoOverlayProps(le2, be2) {
      var Te2, q2;
      const ke2 = ((Te2 = $ == null ? void 0 : $.children) == null ? void 0 : Te2.find((z2) => {
        var C2;
        return ((C2 = z2 == null ? void 0 : z2.props) == null ? void 0 : C2.id) === le2;
      })) || null;
      ke2 && await CoreContext.Command.updateNode({ nodeId: ke2 == null ? void 0 : ke2.id, props: { sourceType: "Overlay", id: le2, sourceProps: { ...(q2 = ke2 == null ? void 0 : ke2.props) == null ? void 0 : q2.sourceProps, ...be2, meta: { style: { ...defaultStyles.video }, ...be2.meta } } } });
    },
    async addCustomOverlay(le2, be2) {
      const [ke2, ...Te2] = (I2 == null ? void 0 : I2.children) || [];
      Te2.forEach((z2) => {
        CoreContext.Command.deleteNode({ nodeId: z2.id });
      });
      const q2 = { ...defaultStyles.custom, ...($ == null ? void 0 : $.children.length) && { opacity: 0 } };
      ke2 ? await CoreContext.Command.updateNode({ nodeId: ke2 == null ? void 0 : ke2.id, props: { sourceType: "Overlay", id: le2, sourceProps: { ...be2, type: "custom", meta: { style: { ...q2 } } } } }) : await CoreContext.Command.createNode({ parentId: I2 == null ? void 0 : I2.id, props: { sourceType: "Overlay", id: le2, sourceProps: { ...be2, type: "custom", meta: { style: { ...q2 } } } } });
    },
    async removeCustomOverlay() {
      var ke2, Te2;
      const [le2, ...be2] = (I2 == null ? void 0 : I2.children) || [];
      be2.forEach((q2) => {
        CoreContext.Command.deleteNode({ nodeId: q2.id });
      }), le2 && ((Te2 = (ke2 = le2 == null ? void 0 : le2.props) == null ? void 0 : ke2.sourceProps) == null ? void 0 : Te2.type) === "custom" && await CoreContext.Command.deleteNode({ nodeId: le2.id });
    },
    async removeImageOverlay() {
      var ke2, Te2;
      const [le2, ...be2] = (I2 == null ? void 0 : I2.children) || [];
      be2.forEach((q2) => {
        CoreContext.Command.deleteNode({ nodeId: q2.id });
      }), le2 && ((Te2 = (ke2 = le2 == null ? void 0 : le2.props) == null ? void 0 : ke2.sourceProps) == null ? void 0 : Te2.type) === "image" && await CoreContext.Command.deleteNode({ nodeId: le2.id });
    },
    async removeVideoOverlay() {
      const [le2, ...be2] = ($ == null ? void 0 : $.children) || [];
      be2.forEach((ke2) => {
        CoreContext.Command.deleteNode({ nodeId: ke2.id });
      }), le2 && await CoreContext.Command.deleteNode({ nodeId: le2.id }), I2 == null || I2.children.forEach(({ id: ke2, props: Te2 }) => {
        var q2, z2;
        if (((z2 = (q2 = Te2.sourceProps.meta) == null ? void 0 : q2.style) == null ? void 0 : z2.opacity) === 0) {
          const C2 = Te2.sourceProps.type, b = { ...defaultStyles[C2], opacity: 1 };
          CoreContext.Command.updateNode({ nodeId: ke2, props: { ...Te2, sourceProps: { ...Te2.sourceProps, meta: { style: { ...b } } } } });
        }
      });
    },
    setLayout(le2, be2 = {}) {
      const ke2 = p2.props.layoutProps.showcase;
      l2.setNodeLayout({ nodeId: p2.id, layout: le2, layoutProps: { showcase: ke2, ...be2 } });
    },
    async setBackgroundImage(le2, be2) {
      const [ke2, ...Te2] = (v2 == null ? void 0 : v2.children) || [];
      Te2.forEach((q2) => {
        CoreContext.Command.deleteNode({ nodeId: q2.id });
      }), ke2 ? await CoreContext.Command.updateNode({ nodeId: ke2.id, props: { id: le2, sourceType: "Background", sourceProps: { ...be2, type: "image", meta: { style: { ...defaultStyles.image }, ...be2 == null ? void 0 : be2.meta } } } }) : await CoreContext.Command.createNode({ parentId: v2 == null ? void 0 : v2.id, props: { id: le2, sourceType: "Background", sourceProps: { ...be2, type: "image", meta: { style: { ...defaultStyles.image }, ...be2 == null ? void 0 : be2.meta } } } });
    },
    async setBackgroundVideo(le2, be2) {
      const [ke2, ...Te2] = (v2 == null ? void 0 : v2.children) || [];
      Te2.forEach((q2) => {
        CoreContext.Command.deleteNode({ nodeId: q2.id });
      }), ke2 ? await CoreContext.Command.updateNode({ nodeId: ke2.id, props: { id: le2, sourceType: "Background", sourceProps: { ...be2, type: "video", meta: { style: { ...defaultStyles.video }, ...be2 == null ? void 0 : be2.meta } } } }) : await CoreContext.Command.createNode({ parentId: v2 == null ? void 0 : v2.id, props: { id: le2, sourceType: "Background", sourceProps: { ...be2, type: "video", meta: { style: { ...defaultStyles.video }, ...be2 == null ? void 0 : be2.meta } } } });
    },
    async updateBackgroundVideoProps(le2, be2) {
      var Te2, q2;
      const ke2 = ((Te2 = v2 == null ? void 0 : v2.children) == null ? void 0 : Te2.find((z2) => {
        var C2;
        return ((C2 = z2 == null ? void 0 : z2.props) == null ? void 0 : C2.id) === le2;
      })) || null;
      ke2 && await CoreContext.Command.updateNode({ nodeId: ke2 == null ? void 0 : ke2.id, props: { sourceType: "Background", id: le2, sourceProps: { ...(q2 = ke2 == null ? void 0 : ke2.props) == null ? void 0 : q2.sourceProps, ...be2, meta: { style: { ...defaultStyles.video }, ...be2.meta } } } });
    },
    async removeBackgroundImage() {
      const [le2, ...be2] = (v2 == null ? void 0 : v2.children) || [];
      be2.forEach((ke2) => {
        CoreContext.Command.deleteNode({ nodeId: ke2.id });
      }), le2 && le2.props.sourceProps.type === "image" && await CoreContext.Command.deleteNode({ nodeId: le2.id });
    },
    async removeBackgroundVideo() {
      const [le2, ...be2] = (v2 == null ? void 0 : v2.children) || [];
      be2.forEach((ke2) => {
        CoreContext.Command.deleteNode({ nodeId: ke2.id });
      }), le2 && le2.props.sourceProps.type === "video" && await CoreContext.Command.deleteNode({ nodeId: le2.id });
    },
    /* A function that takes in a sourceType and a callback function. It then creates a shallow copy of
    the root node and finds all the nodes that have the same sourceType as the one passed in. It then
    creates a listener for when the node changes, is added, or is removed. When any of these events
    happen, it will call the callback function with the new state. */
    useLayerState(le2, be2) {
      const ke2 = cloneDeep$1(c);
      let Te2 = findAll(ke2, (E2) => E2.props.sourceType === le2);
      const q2 = () => {
        be2((Te2 == null ? void 0 : Te2.map((E2) => E2.props)) || {});
      }, z2 = CoreContext.onInternal("NodeChanged", (E2) => {
        const k = Te2 == null ? void 0 : Te2.find((x2) => x2.id === E2.nodeId);
        if (Te2 != null && Te2.length && !k)
          return;
        const O2 = Te2, A2 = cloneDeep$1(c);
        Te2 = findAll(A2, (x2) => {
          var Y2;
          return ((Y2 = x2 == null ? void 0 : x2.props) == null ? void 0 : Y2.sourceType) === le2;
        }), deepEqual(O2, Te2) || q2();
      }), C2 = CoreContext.onInternal("NodeAdded", (E2) => {
        var x2;
        if (Te2 == null ? void 0 : Te2.find((Y2) => Y2.id === E2.nodeId))
          return;
        const O2 = cloneDeep$1(c);
        Te2 = findAll(O2, (Y2) => {
          var B2;
          return ((B2 = Y2 == null ? void 0 : Y2.props) == null ? void 0 : B2.sourceType) === le2;
        });
        const A2 = Te2 == null ? void 0 : Te2.find((Y2) => Y2.id === E2.nodeId);
        ((x2 = A2 == null ? void 0 : A2.props) == null ? void 0 : x2.sourceType) === le2 && q2();
      }), b = CoreContext.onInternal("NodeRemoved", (E2) => {
        var O2;
        const k = Te2 == null ? void 0 : Te2.find((A2) => A2.id === E2.nodeId);
        k && (Te2 = Te2 == null ? void 0 : Te2.filter((A2) => A2.id !== E2.nodeId), ((O2 = k == null ? void 0 : k.props) == null ? void 0 : O2.sourceType) === le2 && q2());
      });
      return q2(), () => {
        z2(), C2(), b();
      };
    },
    setShowcase(le2, be2 = "camera") {
      const ke2 = ie2.getParticipantNode(le2, be2);
      return CoreContext.Command.updateNode({ nodeId: p2.id, props: { layoutProps: { ...p2.props.layoutProps, showcase: (ke2 == null ? void 0 : ke2.id) ?? null } } });
    },
    useShowcase(le2) {
      const be2 = () => {
        const ke2 = p2.props.layoutProps.showcase, Te2 = p2.children.find((z2) => z2.id === ke2);
        if (!Te2)
          return le2({ participantId: null, type: null });
        const { sourceProps: q2 } = Te2.props;
        return le2({ participantId: q2.id, type: q2.type });
      };
      return be2(), CoreContext.onInternal("NodeChanged", (ke2) => {
        ke2.nodeId === p2.id && be2();
      });
    },
    getRTMPNode(le2) {
      return p2.children.find((be2) => {
        var ke2, Te2;
        return ((ke2 = be2.props.sourceProps) == null ? void 0 : ke2.id) === le2 && ((Te2 = be2.props.sourceProps) == null ? void 0 : Te2.type) === "rtmp";
      });
    },
    useRTMPNodes(le2) {
      let be2 = [];
      const ke2 = () => {
        const z2 = p2.children.filter((C2) => {
          var b, E2;
          return ((E2 = (b = C2.props) == null ? void 0 : b.sourceProps) == null ? void 0 : E2.type) === "rtmp";
        });
        return be2 = z2.map((C2) => C2.id), le2(z2);
      };
      ke2();
      const Te2 = CoreContext.onInternal("NodeAdded", (z2) => {
        var b, E2;
        const C2 = a420.scene.get(z2.nodeId);
        ((E2 = (b = C2 == null ? void 0 : C2.props) == null ? void 0 : b.sourceProps) == null ? void 0 : E2.type) === "rtmp" && ke2();
      }), q2 = CoreContext.onInternal("NodeRemoved", (z2) => {
        be2.indexOf(z2.nodeId) !== -1 && ke2();
      });
      return () => {
        Te2(), q2();
      };
    },
    async addRTMPSource(le2, be2 = { isMuted: true, isHidden: false, volume: 0 }) {
      const ke2 = "rtmp";
      if (addingCache[ke2].has(le2))
        return;
      const { isMuted: Te2 = false, isHidden: q2 = false, volume: z2 = 1 } = be2;
      if (p2.children.find((E2) => {
        var k, O2;
        return ((k = E2.props.sourceProps) == null ? void 0 : k.id) === le2 && ((O2 = E2.props.sourceProps) == null ? void 0 : O2.type) === ke2;
      }))
        return;
      addingCache[ke2].add(le2), p2.children[0];
      let b = p2.children.length;
      await CoreContext.Command.createNode({ props: { name: "RTMP", sourceType: "RTMP", sourceProps: { type: ke2, id: le2 }, volume: z2, isMuted: Te2, isHidden: q2 }, parentId: p2.id, index: b }).finally(() => {
        addingCache[ke2].delete(le2);
      });
    },
    removeRTMPSource(le2) {
      const be2 = "rtmp";
      p2.children.filter((ke2) => {
        var Te2, q2;
        return ((Te2 = ke2.props.sourceProps) == null ? void 0 : Te2.id) === le2 && ((q2 = ke2.props.sourceProps) == null ? void 0 : q2.type) === be2 && ke2.props.sourceType === "RTMP";
      }).forEach((ke2) => {
        CoreContext.Command.deleteNode({ nodeId: ke2.id });
      });
    },
    async addParticipantTrack(le2, be2 = { isMuted: true, isHidden: false, volume: 0 }, ke2 = "camera") {
      if (addingCache[ke2].has(le2))
        return;
      const { isMuted: Te2 = false, isHidden: q2 = false, volume: z2 = 1 } = be2;
      if (p2.children.find((k) => {
        var O2, A2;
        return ((O2 = k.props.sourceProps) == null ? void 0 : O2.id) === le2 && ((A2 = k.props.sourceProps) == null ? void 0 : A2.type) === ke2;
      }))
        return;
      addingCache[ke2].add(le2);
      const b = p2.children[0];
      let E2 = p2.children.length;
      ke2 === "screen" && (b == null ? void 0 : b.props.sourceProps.type) !== "screen" && (E2 = 0), await CoreContext.Command.createNode({ props: { name: "Participant", sourceType: "RoomParticipant", sourceProps: { type: ke2, id: le2 }, volume: z2, isMuted: Te2, isHidden: q2 }, parentId: p2.id, index: E2 }).finally(() => {
        addingCache[ke2].delete(le2);
      });
    },
    removeParticipantTrack(le2, be2 = "camera") {
      p2.children.filter((ke2) => {
        var Te2, q2;
        return ((Te2 = ke2.props.sourceProps) == null ? void 0 : Te2.id) === le2 && ((q2 = ke2.props.sourceProps) == null ? void 0 : q2.type) === be2 && ke2.props.sourceType === "RoomParticipant";
      }).forEach((ke2) => {
        CoreContext.Command.deleteNode({ nodeId: ke2.id });
      });
    },
    async addParticipant(le2, be2 = {}, ke2 = "camera") {
      if (addingCache[ke2].has(le2))
        return;
      const { isMuted: Te2 = false, isHidden: q2 = false, volume: z2 = 1 } = be2;
      if (p2.children.find((k) => {
        var O2, A2;
        return ((O2 = k.props.sourceProps) == null ? void 0 : O2.id) === le2 && ((A2 = k.props.sourceProps) == null ? void 0 : A2.type) === ke2;
      }))
        return;
      addingCache[ke2].add(le2);
      const b = p2.children[0];
      let E2 = p2.children.length;
      ke2 === "screen" && (b == null ? void 0 : b.props.sourceProps.type) !== "screen" && (E2 = 0), await CoreContext.Command.createNode({ props: { name: "Participant", sourceType: "RoomParticipant", sourceProps: { type: ke2, id: le2 }, volume: z2, isMuted: Te2, isHidden: q2 }, parentId: p2.id, index: E2 }).finally(() => {
        addingCache[ke2].delete(le2);
      });
    },
    removeParticipant(le2, be2 = "camera") {
      p2.children.filter((ke2) => {
        var Te2, q2;
        return ((Te2 = ke2.props.sourceProps) == null ? void 0 : Te2.id) === le2 && ((q2 = ke2.props.sourceProps) == null ? void 0 : q2.type) === be2 && ke2.props.sourceType === "RoomParticipant";
      }).forEach((ke2) => {
        CoreContext.Command.deleteNode({ nodeId: ke2.id });
      });
    },
    getParticipantNode(le2, be2 = "camera") {
      return p2.children.find((ke2) => {
        var Te2, q2;
        return ((Te2 = ke2.props.sourceProps) == null ? void 0 : Te2.id) === le2 && ((q2 = ke2.props.sourceProps) == null ? void 0 : q2.type) === be2;
      });
    },
    getParticipantState(le2, be2 = "camera") {
      var ke2;
      return (ke2 = ie2.getParticipantNode(le2, be2)) == null ? void 0 : ke2.props;
    },
    useParticipantState(le2, be2, ke2 = "camera") {
      let Te2 = ie2.getParticipantNode(le2, ke2);
      const q2 = () => {
        be2(Te2 == null ? void 0 : Te2.props);
      }, z2 = CoreContext.onInternal("NodeChanged", (b) => {
        if (b.nodeId !== p2.id)
          return;
        const E2 = Te2;
        Te2 = ie2.getParticipantNode(le2, ke2), E2 !== Te2 && q2();
      }), C2 = CoreContext.onInternal("NodeChanged", (b) => {
        !Te2 || b.nodeId !== Te2.id || q2();
      });
      return q2(), () => {
        z2(), C2();
      };
    },
    setParticipantVolume(le2, be2) {
      const ke2 = ie2.getParticipantNode(le2);
      ke2 && CoreContext.Command.updateNode({ nodeId: ke2.id, props: { volume: be2 } });
    },
    setParticipantMuted(le2, be2) {
      const ke2 = ie2.getParticipantNode(le2);
      ke2 && CoreContext.Command.updateNode({ nodeId: ke2.id, props: { isMuted: be2 } });
    },
    setParticipantHidden(le2, be2) {
      const ke2 = ie2.getParticipantNode(le2);
      ke2 && CoreContext.Command.updateNode({ nodeId: ke2.id, props: { isHidden: be2 } });
    },
    pruneParticipants() {
      const le2 = getProjectRoom(u2);
      le2 && p2.children.filter((be2) => {
        var b, E2, k;
        if (be2.props.sourceType !== "RoomParticipant")
          return false;
        const ke2 = (b = be2.props.sourceProps) == null ? void 0 : b.type, Te2 = le2.getParticipant((E2 = be2.props.sourceProps) == null ? void 0 : E2.id), q2 = le2.getTrack((k = be2.props.sourceProps) == null ? void 0 : k.id);
        return !Te2 && !q2 ? true : ke2 === "camera" ? false : !Te2.trackIds.map((O2) => le2.getTrack(O2)).filter(Boolean).some((O2) => (O2.type === Track.Source.Camera || O2.type === Track.Source.Microphone ? "camera" : "screen") === ke2);
      }).forEach((be2) => {
        CoreContext.Command.deleteNode({ nodeId: be2.id });
      });
    },
    getProp(le2) {
      return getProject(a420.id).props[le2];
    },
    setProp(le2, be2) {
      return l2.updateProjectProps({ projectId: u2, props: { [le2]: be2 } });
    },
    useProp(le2, be2) {
      return CoreContext.on("ProjectChanged", (ke2) => {
        u2 === ke2.project.id && be2(ke2.project.props[le2]);
      });
    },
    createSource(le2) {
      return CoreContext.Command.createSource(le2);
    },
    deleteSource(le2) {
      const be2 = "rtmp";
      return p2.children.filter((ke2) => {
        var Te2, q2;
        return ((Te2 = ke2.props.sourceProps) == null ? void 0 : Te2.id) === le2.sourceId && ((q2 = ke2.props.sourceProps) == null ? void 0 : q2.type) === be2 && ke2.props.sourceType === "RTMP";
      }).forEach((ke2) => {
        CoreContext.Command.deleteNode({ nodeId: ke2.id });
      }), CoreContext.Command.deleteSource(le2);
    }
  };
  return (async () => {
    await j(), await ee2(), await X2();
  })(), ie2;
}, create = async (a420 = {}, u2 = {}, c) => CoreContext.Command.createProject({ settings: a420, props: u2, size: c }), createCompositor = async (a420, u2, c) => {
  const { layout: l2, layoutProps: v2 = {} } = c, p2 = await CoreContext.compositor.createProject({ props: { name: "Root", type: "sceneless-project", sourceType: "Element", layout: "Layered", size: u2, isRoot: true, tagName: "div", version: "beta", fields: { style: { background: "black" } } } }, a420), _ = p2.getRoot(), I2 = await Promise.all([p2.insert({ name: "Background", id: "bg", layout: "Layered" }, _.id), p2.insert({ id: "content", name: "Content", layout: l2, layoutProps: v2 }, _.id), p2.insert({ id: "foreground", name: "Overlays", layout: "Layered" }, _.id)]);
  await p2.reorder(_.id, I2);
  const P2 = _.children.find((H2) => H2.props.id === "foreground"), $ = ForegroundLayers.map((H2) => p2.insert(H2, P2.id)), F2 = await Promise.all($);
  return await p2.reorder(P2.id, F2), p2;
}, scenelessProject = /* @__PURE__ */ Object.freeze(/* @__PURE__ */ Object.defineProperty({ __proto__: null, commands, create, createCompositor }, Symbol.toStringTag, { value: "Module" })), useActiveProjectRoom = (a420) => {
  const u2 = getProject(CoreContext.state.activeProjectId);
  return a420(u2 ? getRoom(u2.roomId) : null), CoreContext.on("RoomJoined", () => {
    const c = getProject(CoreContext.state.activeProjectId);
    a420(c ? getRoom(c.roomId) : null);
  });
}, callbacks = /* @__PURE__ */ Object.freeze(/* @__PURE__ */ Object.defineProperty({ __proto__: null, useActiveProjectRoom }, Symbol.toStringTag, { value: "Module" })), index$1 = /* @__PURE__ */ Object.freeze(/* @__PURE__ */ Object.defineProperty({ __proto__: null, Callback: callbacks, React: react, Room: webrtc, ScenelessProject: scenelessProject }, Symbol.toStringTag, { value: "Module" })), runFilters = (a420, u2 = []) => u2.reduce((c, l2) => l2(c), a420), createDefault = () => ({ root: document.createElement("div") }), init$2 = (a420 = {}, u2, c) => {
  const l2 = {}, v2 = a420.defaultTransforms || {}, p2 = (Q2) => {
    asArray(Q2).forEach((ne2) => {
      l2[ne2.name] = ne2;
    });
  }, _ = {}, I2 = {}, P2 = {}, $ = (Q2) => P2[Q2] || [], F2 = (Q2) => I2[Q2] || [], H2 = (Q2) => _[Q2], j = (Q2) => l2[Q2];
  u2.on("SourceChanged", (Q2) => {
    F2(Q2.id).forEach((Z2) => {
      const de2 = u2.getNode(Z2.nodeId);
      Z2._onUpdateHandlers.forEach((pe2) => pe2(de2.props || {}));
    });
  }), u2.on("AvailableSourcesChanged", ({ type: Q2, sources: ne2 }) => {
    $(Q2).forEach((de2) => {
      ee2(de2.nodeId);
    });
  });
  const ee2 = (Q2) => {
    var q2, z2, C2;
    const ne2 = H2(Q2);
    if (!ne2)
      return;
    const Z2 = j(ne2.transformName);
    if (!Z2.useSource)
      return;
    const de2 = u2.getNode(Q2), pe2 = ne2.proxySource ? ne2.proxySource : ne2.sourceType, le2 = c.getSources(pe2), be2 = Z2.useSource(le2, de2.props), ke2 = ne2.sourceValue, Te2 = be2 == null ? void 0 : be2.value;
    ne2.source !== be2 && (I2[(q2 = ne2.source) == null ? void 0 : q2.id] && (I2[(z2 = ne2.source) == null ? void 0 : z2.id] = I2[(C2 = ne2.source) == null ? void 0 : C2.id].filter((b) => b.nodeId !== Q2)), I2[be2 == null ? void 0 : be2.id] = [...I2[be2 == null ? void 0 : be2.id] || [], ne2]), ne2.source = be2, ne2.sourceValue = Te2, Object.is(ke2, Te2) || ne2._onNewSourceHandlers.forEach((b) => b(be2));
  }, X2 = (Q2) => {
    const ne2 = ie2(Q2), de2 = runFilters(Q2, []);
    return ee2(Q2.id), ne2 == null || ne2._onUpdateHandlers.forEach((pe2) => pe2(Q2.props || {})), { ...de2, children: de2.children.map(X2) };
  }, ie2 = (Q2) => {
    if (_[Q2.id])
      return _[Q2.id];
    const { props: ne2 = {} } = Q2, { sourceType: Z2, proxySource: de2 } = ne2;
    if (!Z2)
      return null;
    let pe2 = v2[Z2], le2;
    if (pe2 ? le2 = l2[pe2] : le2 = Object.values(l2).find((k) => k.sourceType === Z2), !le2)
      throw new Error("Could not find matching transform for sourceType: " + Z2);
    const be2 = [], ke2 = [], Te2 = [], q2 = [], C2 = { ...(le2.create || createDefault)({ onEvent: (k, O2, ...A2) => {
      const x2 = u2.on(k, O2, ...A2);
      return q2.push(x2), x2;
    }, onNewSource: (k) => be2.push(k), onUpdate: (k) => ke2.push(k), onRemove: (k) => Te2.push(k) }, Q2.props), proxySource: de2, sourceType: Z2, nodeId: Q2.id, transformName: le2.name, _onNewSourceHandlers: be2, _onUpdateHandlers: ke2, _disposables: q2 };
    _[Q2.id] = C2;
    const b = de2 || Z2;
    P2[b] = [...P2[b] || [], C2], le2.useSource && ee2(Q2.id);
    const E2 = [
      // Dispose when node is removed
      u2.on("NodeRemoved", ({ nodeId: k }) => {
        if (k === Q2.id) {
          const O2 = u2.getNode(k), { sourceType: A2 = "Element" } = O2.props;
          E2.forEach((Y2) => Y2 == null ? void 0 : Y2()), q2.forEach((Y2) => Y2 == null ? void 0 : Y2()), Te2.forEach((Y2) => Y2 == null ? void 0 : Y2()), delete _[O2.id];
          const x2 = de2 || A2;
          P2[x2] = P2[x2].filter((Y2) => Y2 !== _[O2.id]);
        }
      })
    ];
    return C2;
  };
  return { transforms: l2, nodeElementIndex: _, elementSourceTypeIndex: P2, registerTransform: p2, getElementsBySourceType: $, getElementByNodeId: H2, getTransformByName: j, updateSourceForNode: ee2, renderTree: X2, getElement: ie2 };
}, TRANSITION_DURATION = 300, findLayoutUp = (a420, u2, c = 0) => {
  const v2 = a420.parentElement;
  return v2 instanceof Layout && (c = 0, !u2 || u2(v2)) ? v2 : v2 ? c > 4 ? null : findLayoutUp(v2, u2, c + 1) : null;
}, TRANSITION_FIELDS = "opacity, transform, width, height, left, right, top, bottom, inset", layoutIndex = {}, parentIdIndex = {}, childIndex = {};
let rootLayout, _cid = 1;
const ignoredAttributes = ["style", "id", "className"];
let tickOps = {};
const tick = () => {
  if (nextTick = null, window.__dragging) {
    nextTick = nextTick || requestAnimationFrame(tick);
    return;
  }
  const a420 = /* @__PURE__ */ new Set(), u2 = /* @__PURE__ */ new Set(), c = /* @__PURE__ */ new Set();
  Object.entries(tickOps).forEach(([l2, v2]) => {
    v2.forEach(([p2, _, I2]) => {
      switch (p2) {
        case "childInserted": {
          u2.has(I2) ? u2.delete(I2) : a420.add(I2);
          break;
        }
        case "childRemoved": {
          a420.has(I2) ? a420.delete(I2) : u2.add(I2);
          break;
        }
        case "childRemoveFinished": {
          c.add(I2);
          break;
        }
      }
    });
  });
  try {
    u2.forEach((v2) => {
      var I2, P2, $;
      const p2 = childIndex[v2], _ = Array.from(((I2 = p2.parentEl) == null ? void 0 : I2.children) || []);
      p2.nextSiblingEl && _.includes(p2.nextSiblingEl) ? (P2 = p2.parentEl) == null || P2.insertBefore(p2, p2.nextSiblingEl) : (p2.nextSiblingEl = null, ($ = p2.parentEl) == null || $.append(p2)), p2.runRemove();
    }), c.forEach((v2) => {
      const p2 = childIndex[v2];
      if (p2.removed) {
        p2.previousSiblingEl && (p2.previousSiblingEl.nextSiblingEl = p2.nextSiblingEl), p2.nextSiblingEl && (p2.nextSiblingEl.previousSiblingEl = p2.previousSiblingEl);
        return;
      }
    });
    const l2 = window.__scale;
    Object.entries(tickOps).forEach(([v2, p2]) => {
      const _ = layoutIndex[v2], I2 = _.getBoundingClientRect(), P2 = { x: I2.width / l2, y: I2.height / l2 };
      _.updatePositions({ size: P2, inserted: a420, removed: u2 });
    });
  } catch (l2) {
    log$1.warn("Failed to run Layout ops", l2);
  }
  tickOps = {};
};
let nextTick;
const queueOp = (a420) => {
  const [u2, c] = a420, l2 = tickOps[c] || [];
  tickOps[c] = [...l2, a420], nextTick = nextTick || requestAnimationFrame(tick);
};
class Layout extends HTMLElement {
  constructor() {
    super();
    qt(this, "parentEl");
    qt(this, "slotEl");
    qt(this, "parentLayout");
    qt(this, "nodes");
    qt(this, "mutationObserver");
    qt(this, "latestSize");
    qt(this, "isFirst", true);
    qt(this, "isUpdating", false);
    qt(this, "cid");
    this.cid = ++_cid;
  }
  log(...c) {
    var l2;
    log$1.debug(...c, { id: this.dataset.id, parent: (l2 = this.parentLayout) == null ? void 0 : l2.dataset.id }, this);
  }
  connectedCallback() {
    var c;
    this.parentEl = this.parentElement, this.parentLayout = findLayoutUp(this), this.slotEl = this.closest("[data-layout-child]"), Array.from(this.children).forEach((l2) => this.initializeChild(l2)), rootLayout || (rootLayout = this), layoutIndex[this.dataset.id] = this, parentIdIndex[this.dataset.id] = (c = this.parentLayout) == null ? void 0 : c.id, Object.assign(this.style, { width: "100%", height: "100%", position: "absolute", top: "0px", left: "0px", pointerEvents: "none", boxSizing: "border-box" }), this.mutationObserver && this.mutationObserver.disconnect(), this.mutationObserver = new MutationObserver((l2) => {
      this.isConnected && l2.forEach((v2) => {
        v2.type === "attributes" && !ignoredAttributes.includes(v2.attributeName) ? queueOp(["attributesChanged", this.dataset.id]) : v2.type === "childList" && (v2.addedNodes.forEach((p2) => {
          const _ = childIndex[p2.dataset.id];
          p2.removed || (_ ? _ !== p2 && (this.initializeChild(p2), p2.setAttribute("style", _.getAttribute("style")), p2.data = _.data) : this.initializeChild(p2), queueOp(["childInserted", this.dataset.id, p2.dataset.id]));
        }), v2.removedNodes.forEach((p2) => {
          p2.removed || queueOp(["childRemoved", this.dataset.id, p2.dataset.id]);
        }));
      });
    }), this.mutationObserver.observe(this, { childList: true, attributes: true }), this.latestSize || queueOp(["attributesChanged", this.dataset.id]);
  }
  disconnectedCallback() {
  }
  adoptedCallback() {
  }
  updatePositions(c) {
    if (this.isUpdating)
      return;
    this.isUpdating = true;
    const { size: l2, inserted: v2 = /* @__PURE__ */ new Set(), removed: p2 = /* @__PURE__ */ new Set() } = c;
    this.nodes = Array.from(this.children || []).filter(($) => !$.removed).map(($, F2) => {
      const H2 = getElementAttributes($);
      return {
        // TODO: Does this work well enough? Think through keying
        id: $.dataset.id,
        props: H2,
        children: []
      };
    });
    const _ = JSON.parse(this.getAttribute("props") || "{}");
    this.latestSize = l2;
    const I2 = { id: this.dataset.id, props: _, children: this.nodes, size: l2 };
    let P2 = layoutChildren(I2);
    Promise.all(Object.entries(P2).map(async ([$, F2]) => {
      var pe2, le2, be2, ke2;
      let H2 = childIndex[$] || this.querySelector(`[data-layout-child][data-id="${$}"]`);
      const j = { ...H2.data, ...F2 };
      H2.data = j;
      const { size: ee2, position: X2, zIndex: ie2 = 1, opacity: Q2 = 1, borderRadius: ne2 = 0, entryTransition: Z2 = {}, exitTransition: de2 = {} } = j;
      if (H2) {
        if (H2.removed)
          return;
        de2 && (H2.data.exitTransition = de2), Z2 && (H2.data.entryTransition = Z2), H2.data.size = ee2, H2.data.position = X2;
        const Te2 = window.__scale, q2 = this.getBoundingClientRect(), z2 = q2.width / Te2, C2 = z2 - sizeToNum(X2.x, z2) - sizeToNum(ee2.x, z2), b = q2.height / Te2, E2 = b - sizeToNum(X2.y, b) - sizeToNum(ee2.y, b);
        Object.assign(H2.style, { position: "absolute", transformOrigin: "50% 50%", transitionDuration: "0ms", transitionDelay: "0ms", transform: "translate3d(0, 0, 0) scaleX(1) scaleY(1)", visibility: "visible", boxSizing: "border-box", overflow: "hidden", borderRadius: ne2 + "px", width: "auto", height: "auto" });
        let k = "0ms", O2 = this.isFirst ? asDuration(0) : asDuration(TRANSITION_DURATION);
        if (v2.has($))
          Object.assign(H2.style, { transitionProperty: TRANSITION_FIELDS, transitionDuration: "0ms", transitionTimingFunction: Z2.timingFn ?? "ease", transform: `translate3d(calc(${asSize(((pe2 = Z2.offset) == null ? void 0 : pe2.x) ?? 0)}), calc(${asSize(((le2 = Z2.offset) == null ? void 0 : le2.y) ?? 0)}), 0) scaleX(${((be2 = Z2.scale) == null ? void 0 : be2.x) ?? 1}) scaleY(${((ke2 = Z2.scale) == null ? void 0 : ke2.y) ?? 1})`, opacity: Z2.opacity ?? Q2, left: asSize(X2.x) || 0, right: asSize(C2) || 0, top: asSize(X2.y) || 0, bottom: asSize(E2) || 0 }), k = asDuration(Z2.delay ?? 0);
        else if (H2.data.rootOffset) {
          const Y2 = rootLayout.getBoundingClientRect(), B2 = this.getBoundingClientRect(), T2 = { x: B2.x / Te2 - Y2.x / Te2, y: B2.y / Te2 - Y2.y / Te2 };
          T2.x + B2.width / Te2;
          H2.data.rootOffset.x + Number(H2.data.size.x);
          T2.y + B2.height / Te2;
          H2.data.rootOffset.y + Number(H2.data.size.y);
          H2.data.rootOffset.x - T2.x, H2.data.rootOffset.y - T2.y;
        }
        H2.addEventListener("transitionstart", () => {
          H2.style.zIndex = String(ie2 + 1);
        }), await new Promise((Y2) => window.setTimeout(Y2)), Object.assign(H2.style, { transitionProperty: TRANSITION_FIELDS, transitionDuration: O2, transitionDelay: k, transform: "translate3d(0, 0, 0) scaleX(1) scaleY(1)", opacity: Q2, left: asSize(X2.x) || 0, top: asSize(X2.y) || 0, width: z2 ? "auto" : ee2.x, right: z2 ? asSize(C2) || 0 : "auto", height: b ? "auto" : ee2.y, bottom: b ? asSize(E2) || 0 : "auto", zIndex: ie2 });
        const x2 = () => {
          const Y2 = rootLayout.getBoundingClientRect(), B2 = H2.getBoundingClientRect();
          H2.data.rootOffset = { x: B2.x / Te2 - Y2.x / Te2, y: B2.y / Te2 - Y2.y / Te2 };
        };
        x2(), H2.addEventListener("transitionend", () => {
          H2.style.zIndex = String(ie2), x2();
        });
      }
    })).then(() => {
      this.isUpdating = false;
    }), this.isFirst = false, Array.from(this.querySelectorAll("ls-layout")).forEach(($) => {
      if (!P2[$.dataset.id])
        return;
      const F2 = P2[$.dataset.id].size;
      $.updatePositions({ size: { x: sizeToNum(F2.x, l2.x), y: sizeToNum(F2.y, l2.y) } });
    });
  }
  initializeChild(c) {
    var v2;
    if (!((v2 = c.dataset) != null && v2.id))
      return log$1.warn("Layout: Child requires `data-id` at the time it is added to a Layout");
    c._remove = c.remove, c.remove = () => {
      this.removeChild(c);
    }, c.mutationObserver || (c.mutationObserver = new MutationObserver((p2) => {
      p2.forEach((_) => {
        if (_.type === "attributes") {
          if (_.attributeName === "style")
            return;
          queueOp(["childAttributesChanged", this.dataset.id, c.dataset.id]);
        }
      });
    }), c.mutationObserver.observe(c, { childList: true, attributes: true }));
    const l2 = { entryTransition: { delay: 0, opacity: 0, scale: { x: 1, y: 1 }, offset: { x: 0, y: 0 } }, exitTransition: { delay: 0, opacity: 0, scale: { x: 1, y: 1 }, offset: { x: 0, y: 0 } }, position: { x: 0, y: 0 }, size: { x: 0, y: 0 }, opacity: 0, fit: "cover", borderRadius: 0, zIndex: 1 };
    c.data = l2, c.parentEl = c.parentElement, c.nextSiblingEl = c.nextSibling, c.previousSiblingEl = c.previousSibling, c.previousSiblingEl && (c.previousSiblingEl.nextSiblingEl = c), c.toggleAttribute("data-layout-child", true), childIndex[c.dataset.id] = c, c.runRemove = async () => {
      var _, I2, P2, $;
      c.removed = true;
      const p2 = TRANSITION_DURATION;
      return await new Promise((F2) => window.setTimeout(F2)), Object.assign(c.style, { zIndex: 0, transitionDelay: asDuration(0), transitionDuration: asDuration(p2), transitionProperty: TRANSITION_FIELDS, transitionTimingFunction: l2.exitTransition.timingFn ?? "ease", transform: `translate3d(calc(${asSize(((_ = l2.exitTransition.offset) == null ? void 0 : _.x) ?? 0)}), calc( ${asSize(((I2 = l2.exitTransition.offset) == null ? void 0 : I2.y) ?? 0)}), 0) scaleX(${((P2 = l2.exitTransition.scale) == null ? void 0 : P2.x) ?? 1}) scaleY(${(($ = l2.exitTransition.scale) == null ? void 0 : $.y) ?? 1})`, opacity: l2.exitTransition.opacity ?? 0 }), c.removed = true, c.transition = new Promise((F2) => {
        const H2 = () => {
          c.transition = null, c._remove(), queueOp(["childRemoveFinished", this.dataset.id, c.dataset.id]), clearTimeout(j), F2();
        }, j = window.setTimeout(H2, parseInt(String(p2)) + 600);
        c.addEventListener("transitionend", H2, { once: true });
      }), c.transition;
    };
  }
}
const ensureLayoutContainer = (a420) => {
  const u2 = document.getElementById("__ls-layout-container");
  if (u2)
    return Object.assign(u2.style, { width: a420.x + "px", height: a420.y + "px" }), u2;
  const c = document.createElement("div");
  return c.id = "__ls-layout-container", Object.assign(c.style, {
    position: "fixed",
    // pointerEvents: 'none',
    visibility: "hidden",
    top: "0px",
    left: "0px",
    zIndex: -1,
    width: a420.x + "px",
    height: a420.y + "px"
  }), document.body.append(c), c;
}, layoutChildren = ({ id: a420, props: u2 = {}, children: c, size: l2 }) => {
  const v2 = { props: u2, children: c, size: l2 }, p2 = htmlLayouts[u2.layout] ? htmlLayouts[u2.layout].layout(v2) : htmlLayouts.Free.layout(v2);
  if (!(p2 instanceof HTMLElement))
    return p2;
  const _ = Array.from(p2.querySelectorAll("[data-node-id]")), I2 = document.createElement("div");
  I2.style.height = p2.style.height = l2.y + "px", I2.style.width = p2.style.width = l2.x + "px", I2.style.position = "absolute", I2.style.top = "0px", I2.style.left = "0px", I2.style.boxSizing = "border-box", I2.setAttribute("data-wrapper-id", a420), I2.append(p2);
  const P2 = ensureLayoutContainer(l2), $ = P2.querySelector(`[data-wrapper-id="${a420}"]`);
  $ ? $.replaceWith(I2) : P2.append(I2);
  const F2 = p2.getBoundingClientRect(), H2 = {};
  return _.forEach((j) => {
    var ne2, Z2, de2, pe2;
    const ee2 = j.dataset.nodeId;
    if (!ee2)
      return;
    const X2 = Number(j.dataset.opacity ?? (j.style.opacity || 1)), ie2 = j.getBoundingClientRect();
    let Q2 = { position: { x: ie2.x - F2.x + "px", y: ie2.y - F2.y + "px" }, size: { x: ie2.width + "px", y: ie2.height + "px" }, opacity: X2, zIndex: (ne2 = j.data) == null ? void 0 : ne2.zIndex, entryTransition: ((Z2 = j.data) == null ? void 0 : Z2.entryTransition) ?? {}, exitTransition: ((de2 = j.data) == null ? void 0 : de2.exitTransition) ?? {}, borderRadius: ((pe2 = j.data) == null ? void 0 : pe2.borderRadius) ?? 0 };
    `${u2.showcase}-x` === ee2 && (Q2.position = { x: F2.x + "px", y: F2.y + "px" }, Q2.size = { x: F2.width + "px", y: F2.height + "px" }, Q2.zIndex = 10), H2[ee2] = Q2, positionIndex[j.dataset.nodeId] = Q2;
  }), H2;
}, positionIndex = {}, htmlLayouts = {}, registerLayout = (a420) => {
  asArray(a420).forEach((u2) => {
    htmlLayouts[u2.name] = u2;
  });
}, sourceTypes = {}, init$1 = (a420 = {}, u2) => {
  const c = {}, l2 = {}, v2 = (P2) => {
    u2.triggerEvent("SourceChanged", P2);
  }, p2 = (P2) => {
    u2.triggerEvent("AvailableSourcesChanged", { type: P2, sources: l2[P2] });
  }, I2 = {
    sourceIndex: c,
    sourceTypeIndex: l2,
    registerSource: (P2) => {
      asArray(P2).forEach(($) => {
        var H2;
        const F2 = (j) => {
          const ee2 = c[j];
          if (ee2 && ee2.type !== $.type)
            throw new Error(`Attempted to modify source of type ${ee2.type} from ${$.type}`);
        };
        (H2 = $.init) == null || H2.call($, { getSource: (j) => I2.getSource(j), removeSource: (j) => (F2(j), I2.removeSource(j)), setSourceActive: (j, ee2) => (F2(j), I2.setSourceActive(j, ee2)), updateSource: (j, ee2) => (F2(j), I2.updateSource(j, ee2)), modifySourceValue(j, ee2) {
          return F2(j), I2.modifySourceValue(j, ee2);
        }, addSource: (j) => I2.addSource($.type, j) }), sourceTypes[$.type] = $;
      });
    },
    getSource: (P2) => c[P2],
    getSources: (P2) => l2[P2] || [],
    useSource: (P2, $) => ($(c[P2]), u2.on("SourceChanged", (F2) => {
      F2.id === P2 && $(F2);
    })),
    useSources: (P2, $) => ($(l2[P2] || []), u2.on("AvailableSourcesChanged", (F2) => {
      F2.type === P2 && $(F2.sources);
    })),
    addSource: (P2, $) => {
      if (!$.id)
        throw new Error('Cannot add source without field "id"');
      if (c[$.id])
        return;
      if (!$.value)
        throw new Error('Cannot add source with an empty field "value"');
      if (!sourceTypes[P2])
        throw new Error("Could not find definition for source type: " + P2);
      const { id: H2, value: j = null, props: ee2 = {}, isActive: X2 = true } = $;
      c[H2] = { id: H2, type: P2, props: ee2, value: j, isActive: X2 }, l2[P2] = [...l2[P2] || [], c[H2]], v2(c[H2]), p2(P2);
    },
    removeSource: (P2) => {
      const $ = c[P2];
      $ && (delete c[P2], l2[$.type] = l2[$.type].filter((F2) => F2.id !== P2), p2($.type));
    },
    updateSource: (P2, $) => {
      const F2 = c[P2];
      F2.props = { ...F2.props, ...$ }, v2(F2), p2(F2.type);
    },
    /**
    * Imperatively update a Source's value.
    * Triggers an event to inform elements to re-render.
    */
    modifySourceValue: async (P2, $) => {
      const F2 = c[P2];
      await $(F2.value), v2(F2);
    },
    setSourceActive: (P2, $ = true) => {
      const F2 = c[P2];
      F2.isActive = $, p2(F2.type);
    }
  };
  return I2;
}, { forEachDown, insertAt, toDataNode, pull, replaceItem } = Logic;
let compositor;
const start = (a420) => {
  if (compositor)
    return compositor;
  const { dbAdapter: u2, transformSettings: c = {}, sourceSettings: l2 = {} } = a420, v2 = {}, p2 = {};
  try {
    customElements.define("ls-layout", Layout);
  } catch (ne2) {
    log$1.warn(ne2);
  }
  const _ = {}, I2 = {}, P2 = {};
  let $ = 0;
  const F2 = /* @__PURE__ */ new Map(), H2 = (ne2, Z2) => {
    if (typeof ne2 != "function")
      return;
    const de2 = ++$;
    return F2.set(de2, ne2), ne2.nodeId = Z2, () => {
      F2.delete(de2);
    };
  }, j = (ne2, Z2, de2) => H2((pe2, le2) => {
    pe2 === ne2 && Z2(le2);
  }, de2), ee2 = (ne2, Z2) => {
    F2.forEach((de2) => {
      de2.nodeId ? Z2 != null && Z2.nodeId && (Z2 == null ? void 0 : Z2.nodeId) === de2.nodeId && de2(ne2, Z2) : de2(ne2, Z2);
    });
  }, X2 = { projects: p2, subscribe: H2, on: j, triggerEvent: ee2, getProject: (ne2) => p2[ne2], getNodeProject: (ne2) => p2[_[ne2]], getNodeParent: (ne2) => P2[I2[ne2]], getNode: (ne2) => P2[ne2], createProject: async (ne2 = {}, Z2) => {
    const { id: de2, props: pe2 = {}, children: le2 = [] } = ne2, be2 = await u2(Z2, { get: () => null, getParent: () => null }).insert(pe2), ke2 = { id: be2, props: pe2, children: le2 };
    return forEachDown(ne2, (Te2) => {
    }), P2[be2] = ke2, compositor.loadProject(ke2, Z2);
  }, loadProject: (ne2, Z2) => {
    if (!ne2)
      return;
    if (Z2 = Z2 || ne2.id, p2[Z2])
      return p2[Z2];
    forEachDown(ne2, (be2, ke2) => {
      P2[be2.id] = be2, I2[be2.id] = ke2 == null ? void 0 : ke2.id, _[be2.id] = Z2;
    });
    const de2 = { insert: async (be2, ke2, Te2 = 0) => {
      if (be2.id && P2[be2.id])
        return P2[be2.id];
      if (be2.children || (be2.children = []), be2.props || (be2.props = {}), ke2) {
        const q2 = P2[ke2];
        if (!q2)
          throw "Parent node not found with ID";
        q2.children = insertAt(Te2, be2, q2.children || []), I2[be2.id] = ke2;
      }
      return P2[be2.id] = be2, _[be2.id] = Z2, be2.id;
    }, update: async (be2, ke2 = {}, Te2) => {
      const q2 = P2[be2];
      if (Te2) {
        const z2 = Te2.map((C2) => {
          const b = P2[C2];
          return I2[b.id] = be2, b;
        });
        q2.children = z2;
      }
      q2.props = { ...q2.props, ...ke2 };
    }, remove: async (be2) => {
      const ke2 = P2[I2[be2]];
      ke2 && (ke2.children = ke2.children.filter((q2) => q2.id !== be2));
      const Te2 = P2[be2];
      forEachDown(Te2, (q2) => {
        P2[q2.id] && (P2[q2.id]._deleted = true), ee2("NodeRemoved", { projectId: pe2.id, nodeId: q2.id });
      });
    } }, pe2 = { id: Z2, getRoot: () => ne2, get(be2) {
      return P2[be2];
    }, getParent(be2) {
      return P2[I2[be2]];
    }, renderTree() {
      return Q2.renderTree(ne2);
    }, local: de2, insert: async (be2 = {}, ke2, Te2 = 0) => {
      const z2 = { id: await le2.insert(be2, ke2, Te2), props: be2, children: [] };
      return de2.insert(z2, ke2, Te2);
    }, update: async (be2, ke2) => (await de2.update(be2, ke2), le2.update(be2, ke2)), remove: async (be2) => {
      await de2.remove(be2);
      const ke2 = P2[I2[be2]], Te2 = ke2.children.filter((q2) => q2.id !== be2);
      return le2.batch([["delete", { id: be2 }], ["update", { ...ke2, children: Te2 }]]);
    }, reorder: async (be2, ke2) => {
      const Te2 = P2[be2];
      return Te2.children = ke2.map((q2) => Te2.children.find((z2) => z2.id === q2)), le2.batch([["update", Te2]]);
    }, move: async (be2, ke2, Te2 = 0) => {
      const q2 = P2[be2], z2 = P2[I2[be2]], C2 = P2[ke2];
      z2.children = pull(z2.children, q2), C2.children = insertAt(Te2, q2, C2.children), le2.batch([["update", C2], ["update", z2]]), I2[be2] = ke2;
    }, swap: async (be2, ke2) => {
      const Te2 = P2[be2], q2 = P2[ke2], z2 = P2[I2[be2]], C2 = P2[I2[ke2]];
      z2.children = replaceItem((b) => b.id === be2, q2, z2.children), C2.children = replaceItem((b) => b.id === ke2, Te2, C2.children), I2[be2] = C2.id, I2[ke2] = z2.id, le2.batch([["update", z2], ["update", C2]]);
    } };
    Object.defineProperty(pe2, "nodes", { get() {
      return Object.values(P2).filter((be2) => _[be2.id] === pe2.id);
    } });
    const le2 = v2[Z2] || u2(Z2, { get: (be2) => toDataNode(pe2.get(be2)), getParent: (be2) => toDataNode(pe2.getParent(be2)) });
    return v2[Z2] = le2, p2[Z2] = pe2, pe2;
  } }, ie2 = init$1(l2, X2), Q2 = init$2(c, X2, ie2);
  return compositor = { registerLayout, registerTransform: Q2.registerTransform, registerSource: ie2.registerSource, getElement: Q2.getElement, getSource: ie2.getSource, getSources: ie2.getSources, useSource: ie2.useSource, useSources: ie2.useSources, ...X2 }, compositor;
}, createProject = async (a420) => {
  const u2 = getUser().id, c = a420.type || "sceneless", l2 = a420.size || { x: 1280, y: 720 }, v2 = a420.settings || {};
  let p2 = await CoreContext.clients.LiveApi().project.createProject({ collectionId: u2, rendering: { video: { width: l2.x, height: l2.y, framerate: 30 } }, composition: { studioSdk: { version: CoreContext.rendererVersion } }, metadata: {}, webrtc: { hosted: {} } });
  const _ = await createLayout({ projectId: p2.project.projectId, collectionId: p2.project.collectionId, settings: v2, size: l2, type: c }), { displayName: I2 } = getAccessTokenData(), P2 = { type: c, layoutId: _.id, hostDisplayName: I2, props: a420.props || {} };
  let $ = await CoreContext.clients.LiveApi().project.updateProject({ collectionId: u2, projectId: p2.project.projectId, updateMask: ["metadata"], metadata: P2 });
  return p2.project = $.project, p2.project.metadata = P2, p2;
}, deleteProject = async (a420) => {
  const { projectId: u2 } = a420, c = getProject(u2), l2 = getUser().id;
  await Promise.all([CoreContext.clients.LiveApi().project.deleteProject({ collectionId: l2, projectId: u2 }), CoreContext.clients.LayoutApi().layout.deleteLayout({ layoutId: c.layoutApi.layoutId })]);
}, loadUser = async (a420) => {
  var _;
  const u2 = await loadCollections();
  let c;
  const { displayName: l2, serviceUserId: v2 } = getAccessTokenData();
  u2.length === 0 ? c = (await CoreContext.clients.LiveApi().collection.createCollection({ metadata: { serviceUserId: v2, displayName: l2, props: {} } })).collection : c = u2[0], await CoreContext.clients.LiveApi().subscribeToCollection(c.collectionId);
  const p2 = await Promise.all(c.projects.filter((I2) => {
    var P2;
    return !!((P2 = I2.metadata) != null && P2.layoutId);
  }).map((I2) => hydrateProject(I2, "ROLE_HOST", a420)));
  return { user: { id: c.collectionId, metadata: c.metadata, props: ((_ = c.metadata) == null ? void 0 : _.props) || {}, name: l2 }, projects: p2, sources: c.sources };
}, loadCollections = async () => (await CoreContext.clients.LiveApi().collection.getCollections({})).collections, createLayout = async (a420) => {
  const { settings: u2, size: c, type: l2, projectId: v2, collectionId: p2 } = a420, _ = await CoreContext.clients.LayoutApi().layout.createLayout({ layout: { projectId: v2, collectionId: p2 } });
  return l2 === "sceneless" ? await createCompositor(_.id, c, u2) : await CoreContext.compositor.createProject({ props: { name: "Root", layout: "Free", ...u2, isRoot: true, size: c } }, _.id), _;
}, requests = /* @__PURE__ */ Object.freeze(/* @__PURE__ */ Object.defineProperty({ __proto__: null, createLayout, createProject, deleteProject, loadCollections, loadUser }, Symbol.toStringTag, { value: "Module" }));
class EngineWebsocket {
  constructor(u2, c) {
    qt(this, "ws", null);
    qt(this, "sources", /* @__PURE__ */ new Set());
    this.connectSource = u2, this.disconnectSource = c, this.connect = this.connect.bind(this), this.handleMessage = this.handleMessage.bind(this);
  }
  connect() {
    const u2 = this.handleMessage.bind(this);
    this.ws = new WebSocket("ws://127.0.0.1:8000"), this.ws.addEventListener("message", u2), this.ws.addEventListener("error", (c) => {
      console.error("Unable to connect to websocket", c);
    }), this.ws.addEventListener("close", () => {
      var c, l2;
      (c = this.ws) == null || c.removeEventListener("message", u2);
      try {
        (l2 = this.ws) == null || l2.close(), this.ws = null;
      } catch {
      }
      setTimeout(() => {
        this.connect();
      }, 1e3);
    });
  }
  handleMessage(u2) {
    try {
      const c = JSON.parse(u2.data);
      if (c.name === "state") {
        this.sources.clear(), console.info("[Engine]: state", c.payload);
        for (const l2 of c.payload.sources)
          l2.connected && (this.sources.has(l2.id) || (this.sources.add(l2.id), this.connectSource(l2.id)));
      } else
        c.name === "source.disconnect" ? (console.info("[Engine]: source disconnect", c.payload.id), this.sources.delete(c.payload.id), this.disconnectSource(c.payload.id)) : c.name === "source.connect" && (console.info("[Engine]: source connect", c.payload.id), this.sources.add(c.payload.id), this.connectSource(c.payload.id));
    } catch (c) {
      console.error("unable to handle message: ", c);
    }
  }
}
function setupEngineWebsocket(a420, u2) {
  return new EngineWebsocket(a420, u2);
}
const lookupDevice = (a420, u2) => {
  const c = a420.find((v2) => v2.label === u2 && v2.kind === "videoinput"), l2 = a420.find((v2) => v2.label === `Monitor of ${u2}` && v2.kind === "audioinput");
  if (c && l2)
    return { videoDevice: c, audioDevice: l2 };
  if (c) {
    if (c.label === "Logitech BRIO (046d:085e)") {
      const v2 = a420.find((p2) => (
        /*(device.groupId === videoDevice.groupId) &&*/
        p2.kind === "audioinput" && p2.label === "Loopback Audio 2 (Virtual)"
      ));
      return { videoDevice: c, audioDevice: v2 };
    }
    if (c.label === "OBS Virtual Camera (m-de:vice)") {
      const v2 = a420.find((p2) => (
        /*(device.groupId === videoDevice.groupId) &&*/
        p2.kind === "audioinput" && p2.label === "Loopback Audio (Virtual)"
      ));
      return { videoDevice: c, audioDevice: v2 };
    }
    return { videoDevice: c, audioDevice: null };
  }
  return null;
}, connectDevice = async (a420) => {
  new MediaStream([]);
  const u2 = await navigator.mediaDevices.enumerateDevices(), c = lookupDevice(u2, a420);
  if (c) {
    const l2 = { video: { width: 999999, height: 999999, deviceId: { exact: c.videoDevice.deviceId } } };
    c.audioDevice && (l2.audio = {
      autoGainControl: false,
      channelCount: 2,
      echoCancellation: false,
      // @ts-ignore: https://developer.mozilla.org/en-US/docs/Web/API/MediaTrackConstraints/latency
      latency: 0,
      noiseSuppression: false,
      sampleRate: 128e3,
      sampleSize: 16,
      deviceId: { exact: c.audioDevice.deviceId }
    });
    const v2 = await navigator.mediaDevices.getUserMedia(l2);
    if (v2)
      return v2;
    console.warn(`No stream found for source ${a420}.`);
  } else
    console.warn(`No device found for source ${a420}.`);
}, RTMP = { type: "RTMP", valueType: MediaStream, props: { id: {}, type: {}, videoEnabled: {}, audioEnabled: {} }, init({ addSource: a420, removeSource: u2, updateSource: c, getSource: l2 }) {
  let v2, p2 = {}, _ = [], I2 = [];
  const P2 = ($) => {
    const F2 = $.filter((j) => !I2.some((ee2) => ee2.id === j.id)), H2 = I2.filter((j) => !$.some((ee2) => ee2.id === j.id));
    I2 = $, F2.forEach(async (j) => {
      const ee2 = new MediaStream([]);
      p2[j.id] = ee2;
      const X2 = ee2.getVideoTracks();
      a420({ id: `rtmp-${j.id}`, isActive: true, value: ee2, props: { id: j.id, isMuted: false, participantId: j.id, type: "rtmp", videoEnabled: !!X2.length, audioEnabled: true } });
    }), H2.forEach((j) => {
      u2(`rtmp-${j.id}`);
    });
  };
  CoreContext.on("ActiveProjectChanged", ({ projectId: $ }) => {
    const F2 = toBaseProject(getProject($));
    P2(F2.sources), F2.role === Role.ROLE_RENDERER && (v2 || (v2 = setupEngineWebsocket(async function(j) {
      const ee2 = p2[j];
      toBaseProject(getProject($));
      const X2 = await connectDevice(j);
      if (l2(`rtmp-${j}`) && X2) {
        const Q2 = X2.getAudioTracks()[0], ne2 = X2.getVideoTracks()[0];
        updateMediaStreamTracks(ee2, { video: ne2, audio: Q2 }), c(`rtmp-${j}`, { videoEnabled: !!ne2, audioEnabled: !!Q2, mirrored: false, external: true });
      }
    }, async function(j) {
      toBaseProject(getProject($)).sources.find((Q2) => Q2.id === j);
      const X2 = p2[j];
      (X2 == null ? void 0 : X2.getTracks()).forEach((Q2) => {
        p2[j].removeTrack(Q2);
      });
    }), v2.connect()));
  }), CoreContext.on("RoomJoined", ({ projectId: $, room: F2 }) => {
    if (toBaseProject(getProject($)).role !== Role.ROLE_RENDERER) {
      const j = () => {
        _.filter((ee2) => (ee2 == null ? void 0 : ee2.type) === "screen_share" && (ee2 == null ? void 0 : ee2.isExternal) === true).forEach((ee2) => {
          var X2;
          if (ee2.type === "screen_share") {
            const ie2 = p2[ee2.participantId], Q2 = F2.getParticipant(ee2.participantId);
            if (I2.some((ne2) => ne2.id === Q2.id)) {
              const ne2 = F2.getTrack(ee2.id);
              if (l2(`rtmp-${Q2 == null ? void 0 : Q2.id}`)) {
                const de2 = F2.getTracks().find((pe2) => pe2.participantId === Q2.id && pe2.mediaStreamTrack.kind === "audio");
                updateMediaStreamTracks(ie2, { video: ne2 == null ? void 0 : ne2.mediaStreamTrack, audio: de2 == null ? void 0 : de2.mediaStreamTrack }), c(`rtmp-${Q2 == null ? void 0 : Q2.id}`, { videoEnabled: !!(ne2 != null && ne2.mediaStreamTrack && !ne2.isMuted), audioEnabled: !!(de2 && !de2.isMuted), mirrored: (X2 = Q2 == null ? void 0 : Q2.meta[ee2.id]) == null ? void 0 : X2.isMirrored, external: ee2 == null ? void 0 : ee2.isExternal });
              }
            }
          }
        });
      };
      F2.useTracks((ee2) => {
        const X2 = ee2.filter((ne2) => I2.some((Z2) => Z2.id === ne2.participantId)).filter((ne2) => ["screen_share"].includes(ne2.type)), ie2 = X2.filter((ne2) => !_.some((Z2) => Z2.id === ne2.id) && !!(ne2 != null && ne2.mediaStreamTrack)), Q2 = _.filter((ne2) => !X2.some((Z2) => Z2.id === ne2.id));
        _ = X2.filter((ne2) => !!(ne2 != null && ne2.mediaStreamTrack)), Q2.forEach((ne2) => {
          const Z2 = p2[ne2.participantId];
          ne2.mediaStreamTrack.kind === "video" && (updateMediaStreamTracks(Z2, { video: null }), c(`rtmp-${ne2.participantId}`, { videoEnabled: false })), ne2.mediaStreamTrack.kind === "audio" && (updateMediaStreamTracks(Z2, { audio: null }), c(`rtmp-${ne2.participantId}`, { audioEnabled: false }));
        }), ie2.forEach((ne2) => {
          if (ne2.type === "screen_share" && ne2.mediaStreamTrack.kind === "video") {
            const Z2 = p2[ne2.participantId], de2 = _.find((pe2) => {
              var le2;
              return pe2.participantId === ne2.participantId && ((le2 = pe2.mediaStreamTrack) == null ? void 0 : le2.kind) === "audio";
            });
            updateMediaStreamTracks(Z2, { video: ne2 == null ? void 0 : ne2.mediaStreamTrack, audio: de2 == null ? void 0 : de2.mediaStreamTrack }), c(`rtmp-${ne2.participantId}`, { videoEnabled: !!(ne2 && !(ne2 != null && ne2.isMuted)), audioEnabled: !!(de2 && !(de2 != null && de2.isMuted)) });
          }
        }), j();
      });
    }
  }), CoreContext.on("ProjectSourceAdded", ({ source: $, projectId: F2 }) => {
    const H2 = toBaseProject(getProject(F2));
    P2(H2 == null ? void 0 : H2.sources);
  }), CoreContext.on("ProjectSourceRemoved", ({ sourceId: $, projectId: F2 }) => {
    const H2 = toBaseProject(getProject(F2));
    P2(H2 == null ? void 0 : H2.sources);
  });
} }, Sources = /* @__PURE__ */ Object.freeze(/* @__PURE__ */ Object.defineProperty({ __proto__: null, Background, Banner, Logo, Overlays, RTMP, RoomParticipant }, Symbol.toStringTag, { value: "Module" })), { state } = CoreContext, prepareInternalEvents = () => {
  subscribeInternal(async (a420, u2) => {
    var c, l2, v2, p2, _;
    switch (a420) {
      case "UserChanged": {
        const { metadata: I2 } = u2;
        state.user.metadata = I2 || {}, state.user.props = (I2 == null ? void 0 : I2.props) || {}, trigger$1("UserChanged", { user: getBaseUser() });
        return;
      }
      case "ActiveProjectChanged": {
        const { projectId: I2 } = u2;
        state.activeProjectId = I2, trigger$1("ActiveProjectChanged", { projectId: I2 });
        return;
      }
      case "ProjectAdded": {
        const P2 = await hydrateProject(u2, "ROLE_HOST"), $ = toBaseProject(P2);
        state.projects = [...state.projects, P2], trigger$1("ProjectAdded", { project: $ });
        return;
      }
      case "ProjectRemoved": {
        const { projectId: I2 } = u2;
        state.projects = state.projects.filter((P2) => P2.id !== I2), trigger$1("ProjectRemoved", { projectId: I2 });
        return;
      }
      case "ProjectChanged": {
        const { project: I2, phase: P2, broadcastId: $ } = u2, F2 = getProject(I2.projectId);
        if (!F2)
          return;
        P2 && (F2.videoApi.phase = P2), typeof $ < "u" && (F2.videoApi.broadcastId = $);
        const H2 = (c = I2.metadata) == null ? void 0 : c.layoutId;
        H2 !== F2.layoutApi.layoutId && (F2.layoutApi.layoutId = (l2 = I2.metadata) == null ? void 0 : l2.layoutId, F2.compositor = await layoutToProject(H2)), F2.videoApi.project = I2, F2.props = ((v2 = I2.metadata) == null ? void 0 : v2.props) ?? {}, trigger$1("ProjectChanged", { project: toBaseProject(F2) });
        return;
      }
      case "DestinationAdded": {
        const { projectId: I2 } = u2, P2 = getProject(I2);
        if (!P2)
          return;
        P2.videoApi.project.destinations.push(u2), trigger$1("DestinationAdded", { projectId: I2, destination: toBaseDestination(u2) });
        return;
      }
      case "DestinationRemoved": {
        const { projectId: I2, destinationId: P2 } = u2, $ = getProject(I2);
        if (!$)
          return;
        $.videoApi.project.destinations = $.videoApi.project.destinations.filter((F2) => F2.destinationId !== P2), trigger$1("DestinationRemoved", { projectId: I2, destinationId: P2 });
        return;
      }
      case "DestinationChanged": {
        const I2 = u2, { projectId: P2, destinationId: $ } = I2, F2 = getProject(P2);
        if (!F2)
          return;
        const H2 = F2.videoApi.project.destinations.find((j) => j.destinationId === $);
        if (!H2)
          return;
        Object.assign(H2, I2), trigger$1("DestinationChanged", { projectId: P2, destination: toBaseDestination(H2) });
        return;
      }
      case "SourceAdded": {
        const I2 = u2;
        trigger$1("SourceAdded", { source: { id: I2.sourceId, props: I2.metadata, address: I2.address } });
        return;
      }
      case "SourceRemoved":
        return;
      case "SourceChanged":
        return;
      case "ProjectSourceAdded": {
        const { projectId: I2, source: P2 } = u2, $ = getProject(I2);
        if (!$)
          return;
        $.videoApi.project.sources.push(P2), trigger$1("ProjectSourceAdded", { source: { id: P2.sourceId, address: P2.address, preview: P2.preview, props: P2.metadata ?? {} }, projectId: I2 });
        return;
      }
      case "ProjectSourceRemoved": {
        const { projectId: I2, sourceId: P2 } = u2, $ = getProject(I2);
        if (!$)
          return;
        $.videoApi.project.sources = $.videoApi.project.sources.filter((F2) => F2.sourceId !== P2), trigger$1("ProjectSourceRemoved", { sourceId: P2, projectId: I2 });
      }
      case "NodeAdded":
        return;
      case "NodeRemoved":
        return;
      case "NodeChanged":
        return;
      case "BackgroundMetadataUpdate": {
        const { Command: I2 } = CoreContext, { projectId: P2, metadata: $, sourceId: F2, doTrigger: H2, role: j } = u2;
        if (j === "ROLE_HOST" || j === "ROLE_COHOST") {
          const ee2 = getProject(P2);
          if (!ee2 || ee2.props.background.id !== F2)
            return;
          let X2 = (p2 = ee2 == null ? void 0 : ee2.props) == null ? void 0 : p2.background;
          X2 && (X2 = { ...X2, props: { ...X2.props, meta: { ...X2.props.meta, ...$ } } }, H2 ? I2.updateProjectProps({ projectId: P2, props: { background: X2 } }) : I2.updateProjectPropsWithoutTrigger({ projectId: P2, props: { background: X2 } }));
        }
        return;
      }
      case "OverlayMetadataUpdate": {
        const { Command: I2 } = CoreContext, { projectId: P2, metadata: $, sourceId: F2, doTrigger: H2, role: j } = u2;
        if (j === "ROLE_HOST" || j === "ROLE_COHOST") {
          const ee2 = getProject(P2);
          if (!ee2)
            return;
          let X2 = ee2.props.overlays.find((ie2) => ie2.id === F2);
          if (X2) {
            X2 = { ...X2, props: { ...X2.props, meta: { ...X2.props.meta, ...$ } } };
            const ie2 = ee2.props.overlays.findIndex((Q2) => Q2.id === F2);
            if (ie2 > -1) {
              const Q2 = JSON.parse(JSON.stringify((_ = ee2 == null ? void 0 : ee2.props) == null ? void 0 : _.overlays));
              Q2.splice(ie2, 1, X2), H2 ? I2.updateProjectProps({ projectId: P2, props: { overlays: Q2 } }) : I2.updateProjectPropsWithoutTrigger({ projectId: P2, props: { overlays: Q2 } });
            }
          }
        }
        return;
      }
    }
  }), subscribeInternal(() => log$1.debug({ nextState: { ...state } }));
}, BroadcastPhase = lib$2.LiveApiModel.ProjectBroadcastPhase, { trigger, triggerInternal } = CoreContext, EventType = lib$2.LiveApiModel.EventType, EventSubType = lib$2.LiveApiModel.EventSubType, init = async (a420 = {}) => {
  prepareInternalEvents();
  const u2 = a420.env || "prod", c = a420.logLevel || "Warn";
  log$1.getLogger("livekit").setLevel(c), log$1.setLevel(c), log$1.info("Initializing Studio SDK...");
  const { layouts: v2 = [], transforms: p2 = [], sources: _ = [], defaultTransforms: I2 = {}, useLatestRenderer: P2 = false, guestToken: $, rendererVersion: F2 } = a420, H2 = new lib$2.ApiStream({ sdkVersion: CoreContext.version, env: u2, logLevel: c }), j = config$1(), ee2 = start({ dbAdapter: compositorAdapter, transformSettings: { defaultTransforms: { ...I2, ...j.defaults.transforms } } });
  CoreContext.config = j, CoreContext.clients = H2, CoreContext.compositor = ee2, CoreContext.logLevel = c, CoreContext.Request = await Promise.resolve().then(() => requests), CoreContext.Command = await Promise.resolve().then(() => commands$1), CoreContext.rendererVersion = P2 ? "latest-v2" : F2 || CoreContext.version, window.__StudioKit = { ...CoreContext }, ee2 && (ee2.registerSource([...Object.values(Sources), ..._]), ee2.registerTransform([...Object.values(Transforms), ...p2]), ee2.registerLayout([...Object.values(Layouts), ...v2]));
  const X2 = await H2.load($);
  let ie2;
  X2 && await H2.LiveApi().project.getProject({ ...X2 }).then((ne2) => hydrateProject(ne2.project, X2.role)).then(async (ne2) => {
    setAppState({
      // As a contributor, `user` refers to the collection
      //  that the project belongs to. This will be referenced
      //  when making requests requiring `collectionId`.
      user: { id: X2.collectionId, props: {}, name: null, metadata: {} },
      // TODO: Populate
      sources: [],
      projects: [ne2],
      activeProjectId: null
    }), ne2.isInitial = true, ie2 = await CoreContext.Command.setActiveProject({ projectId: ne2.id });
  }), H2.LiveApi().on(EventType.EVENT_TYPE_COLLECTION, (ne2, Z2) => {
    switch (log$1.info("Received: Collection event", Z2, ne2), Z2) {
      case EventSubType.EVENT_SUB_TYPE_UPDATE: {
        triggerInternal("UserChanged", ne2.update.collection);
        return;
      }
    }
  }), H2.LiveApi().on(EventType.EVENT_TYPE_DESTINATION, (ne2, Z2) => {
    switch (log$1.info("Received: Destination event", Z2, ne2), Z2) {
      case EventSubType.EVENT_SUB_TYPE_CREATE: {
        const { destination: de2 } = ne2.create;
        triggerInternal("DestinationAdded", de2);
        return;
      }
      case EventSubType.EVENT_SUB_TYPE_UPDATE: {
        const { destination: de2 } = ne2.update;
        triggerInternal("DestinationChanged", de2);
        return;
      }
      case EventSubType.EVENT_SUB_TYPE_DELETE: {
        triggerInternal("DestinationRemoved", ne2.delete);
        return;
      }
    }
  }), H2.LiveApi().on(EventType.EVENT_TYPE_SOURCE, (ne2, Z2) => {
    switch (log$1.info("Received: Source event", Z2, ne2), Z2) {
      case EventSubType.EVENT_SUB_TYPE_CREATE: {
        triggerInternal("SourceAdded", ne2.create.source);
        return;
      }
      case EventSubType.EVENT_SUB_TYPE_UPDATE: {
        triggerInternal("SourceChanged", ne2.update.source);
        return;
      }
      case EventSubType.EVENT_SUB_TYPE_DELETE: {
        triggerInternal("SourceRemoved", ne2.delete.sourceId);
        return;
      }
      case EventSubType.EVENT_SUB_TYPE_ADD: {
        triggerInternal("ProjectSourceAdded", { projectId: ne2.add.projectId, source: ne2.add.source });
        return;
      }
      case EventSubType.EVENT_SUB_TYPE_REMOVE: {
        triggerInternal("ProjectSourceRemoved", { projectId: ne2.add.projectId, sourceId: ne2.add.sourceId });
        return;
      }
    }
  }), H2.LiveApi().on(EventType.EVENT_TYPE_PROJECT, (ne2, Z2) => {
    var de2;
    switch (log$1.info("Received: Project event", Z2, ne2), Z2) {
      case EventSubType.EVENT_SUB_TYPE_CREATE: {
        const pe2 = ne2.create.project;
        if (getProject(pe2.projectId))
          return;
        triggerInternal("ProjectAdded", pe2);
        return;
      }
      case EventSubType.EVENT_SUB_TYPE_UPDATE: {
        const { project: pe2 } = ne2.update, le2 = getProject(pe2.projectId);
        if (!le2)
          return;
        triggerInternal("ProjectChanged", { project: pe2, phase: le2.videoApi.phase });
        return;
      }
      case EventSubType.EVENT_SUB_TYPE_DELETE: {
        triggerInternal("ProjectRemoved", { projectId: ne2.delete.projectId });
        return;
      }
      case EventSubType.EVENT_SUB_TYPE_STATE: {
        const pe2 = getProject((de2 = ne2.state) == null ? void 0 : de2.projectId);
        if (!pe2)
          return;
        let le2 = ne2.state.broadcastId;
        if (ne2.state.error && trigger("BroadcastError", { projectId: pe2.id, broadcastId: ne2.state.broadcastId, error: ne2.state.error }), ne2.state.phase) {
          const be2 = ne2.state.phase;
          be2 === BroadcastPhase.PROJECT_BROADCAST_PHASE_RUNNING ? trigger("BroadcastStarted", { projectId: pe2.id, broadcastId: ne2.state.broadcastId }) : be2 === BroadcastPhase.PROJECT_BROADCAST_PHASE_STOPPED && (le2 = null, trigger("BroadcastStopped", { projectId: pe2.id, broadcastId: ne2.state.broadcastId }));
        }
        triggerInternal("ProjectChanged", { project: pe2.videoApi.project, phase: ne2.state.phase, broadcastId: le2 });
        return;
      }
    }
  }), H2.LayoutApi().on(lib$2.LayoutApiModel.EventType.EVENT_TYPE_LAYER, (ne2, Z2) => {
    var de2;
    if (Z2 === lib$2.LayoutApiModel.EventSubType.EVENT_SUB_TYPE_CREATE) {
      log$1.debug("Received: Node Insert", ne2.create);
      const { connectionId: pe2, layoutId: le2 } = ne2.create.requestMetadata;
      if (CoreContext.connectionId === pe2)
        return;
      const be2 = layerToNode(ne2.create), ke2 = getProjectByLayoutId(le2), Te2 = [be2, ...ke2.compositor.nodes.map(toDataNode$1)], q2 = toSceneTree(Te2, be2.id);
      ke2.compositor.local.insert(q2), triggerInternal("NodeAdded", { projectId: ke2.id, nodeId: be2.id });
    } else if (Z2 === lib$2.LayoutApiModel.EventSubType.EVENT_SUB_TYPE_UPDATE) {
      log$1.debug("Received: Node Update", ne2.update);
      const { connectionId: pe2, layoutId: le2, updateVersions: be2 = {} } = ((de2 = ne2.update) == null ? void 0 : de2.requestMetadata) || {};
      if (CoreContext.connectionId === pe2)
        return;
      const ke2 = layerToNode(ne2.update);
      if ((latestUpdateVersion[ke2.id] || 0) > be2[ke2.id])
        return log$1.info("Ignoring node update - updateID is less than latest.");
      latestUpdateVersion[ke2.id] = be2[ke2.id];
      const q2 = getProjectByLayoutId(le2);
      q2.compositor.local.update(ne2.update.id, ke2.props, ke2.childIds), triggerInternal("NodeChanged", { projectId: q2.id, nodeId: ke2.id });
    } else if (Z2 === lib$2.LayoutApiModel.EventSubType.EVENT_SUB_TYPE_DELETE) {
      log$1.debug("Received: Node Delete", ne2.delete);
      const { connectionId: pe2, layoutId: le2 } = ne2.delete.requestMetadata;
      if (CoreContext.connectionId === pe2)
        return;
      const be2 = getProjectByLayoutId(le2);
      be2.compositor.local.remove(ne2.delete.id), triggerInternal("NodeRemoved", { projectId: be2.id, nodeId: ne2.delete.id });
    } else if (Z2 === lib$2.LayoutApiModel.EventSubType.EVENT_SUB_TYPE_BATCH) {
      log$1.debug("Received: Node Batch Update", ne2.batch);
      const { connectionId: pe2, layoutId: le2, updateVersions: be2 = {} } = ne2.batch.requestMetadata;
      if (CoreContext.connectionId === pe2)
        return;
      const ke2 = getProjectByLayoutId(le2);
      ne2.batch.layers.forEach((Te2) => {
        try {
          const [q2, z2] = Object.entries(Te2)[0];
          if (q2 === "create") {
            const C2 = layerToNode(z2);
            ke2.compositor.local.insert(C2), triggerInternal("NodeAdded", { projectId: ke2.id, nodeId: C2.id });
          } else if (q2 === "update") {
            const C2 = layerToNode(z2);
            if ((latestUpdateVersion[C2.id] || 0) > be2[C2.id])
              return log$1.info("Ignoring node update - updateID is less than latest.");
            latestUpdateVersion[C2.id] = be2[C2.id], ke2.compositor.local.update(C2.id, C2.props, C2.childIds), triggerInternal("NodeChanged", { projectId: ke2.id, nodeId: C2.id });
          } else
            q2 === "delete" && (ke2.compositor.local.remove(z2.id), triggerInternal("NodeRemoved", { projectId: ke2.id, nodeId: z2.id }));
        } catch (q2) {
          log$1.warn("Error handling batch item", q2, { item: Te2 });
        }
      }), ke2 && triggerInternal("NodeChanged", { projectId: ke2.id, nodeId: ke2.compositor.getRoot().id });
    }
  });
  const Q2 = (ne2 = {}, Z2) => {
    const { displayName: de2, role: pe2, maxDuration: le2 = CoreContext.config.defaults.guestTokenDuration, projectId: be2 = CoreContext.state.activeProjectId } = ne2, ke2 = getProject(be2), Te2 = de2 ? { direct: { displayName: de2 } } : { exchange: { maxDuration: le2 } };
    return H2.LiveApi().authentication.createGuestAccessToken({ projectId: be2, token: Te2, url: Z2, collectionId: ke2.videoApi.project.collectionId, maxDuration: le2, role: pe2 || lib$2.LiveApiModel.Role.ROLE_GUEST });
  };
  return { ...omit(CoreContext, ["clients", "config", "connectionId", "Request", "state", "trigger"]), createDemoToken: async () => (console.warn("createDemoToken() is currently unavailable."), ""), createPreviewLink: async (ne2 = {}) => {
    const { maxDuration: Z2, projectId: de2 = CoreContext.state.activeProjectId } = ne2, pe2 = getProject(de2), le2 = pe2.videoApi.project.composition.studioSdk.rendererUrl;
    return (await H2.LiveApi().authentication.createGuestAccessToken({ projectId: de2, token: { direct: { displayName: "Preview" } }, url: le2, collectionId: pe2.videoApi.project.collectionId, maxDuration: Z2 || CoreContext.config.defaults.previewTokenDuration, role: lib$2.LiveApiModel.Role.ROLE_VIEWER })).url;
  }, createGuestLink: async (ne2, Z2 = {}) => (await Q2(Z2, ne2)).url, createGuestToken: async (ne2 = {}) => (await Q2(ne2)).accessToken, initialProject: ie2, load, render: render$1 };
}, load = async (a420, u2) => {
  let c = getBaseUser();
  if (c)
    return log$1.info("Attempted to load user again - returning existing user"), c;
  if (!a420) {
    log$1.warn("Access token required for load()");
    return;
  }
  log$1.info("Loading user..."), await CoreContext.clients.load(a420);
  const v2 = await CoreContext.Request.loadUser(u2);
  return setAppState({ user: v2.user, sources: v2.sources, projects: v2.projects, activeProjectId: null }), c = getBaseUser(), trigger("UserLoaded", c), c;
};
const AppContext = React.createContext({
  isHost: false
});
const AppProvider = ({
  isHost,
  children
}) => {
  return /* @__PURE__ */ jsx(AppContext.Provider, {
    value: {
      isHost
    },
    children
  });
};
const column = "_column_xzlw3_5";
const row = "_row_xzlw3_11";
const Style$1 = {
  column,
  row
};
const {
  Room
} = index$1;
const {
  useStudio: useStudio$1
} = index$1.React;
const Participants = ({
  room,
  projectCommands,
  studio
}) => {
  const {
    isHost
  } = reactExports.useContext(AppContext);
  const {
    project
  } = useStudio$1();
  const [participants, setParticipants] = reactExports.useState([]);
  reactExports.useEffect(() => {
    if (!room)
      return;
    return room.useParticipants((participants2) => {
      const sourceIds = project.sources.map((s2) => s2.id);
      setParticipants(participants2.filter((p2) => sourceIds.some((id2) => id2 === p2.id)));
      if (isHost)
        projectCommands.pruneParticipants();
    });
  }, [room]);
  return /* @__PURE__ */ jsx("div", {
    className: Style$1.column,
    children: participants.map((x2) => /* @__PURE__ */ jsx("div", {
      style: {
        marginBottom: 10
      },
      children: /* @__PURE__ */ jsx(Participant, {
        participant: x2,
        room,
        projectCommands
      })
    }, x2.id))
  });
};
const ParticipantCamera = ({
  participant,
  webcam,
  microphone,
  projectCommands,
  room
}) => {
  const {
    isHost
  } = reactExports.useContext(AppContext);
  const {
    id: id2,
    displayName
  } = participant;
  const ref2 = reactExports.useRef();
  const [srcObject] = reactExports.useState(new MediaStream([]));
  const isEnabled = (webcam == null ? void 0 : webcam.mediaStreamTrack) && !(webcam == null ? void 0 : webcam.isMuted);
  reactExports.useEffect(() => {
    Room.updateMediaStreamTracks(srcObject, {
      video: webcam == null ? void 0 : webcam.mediaStreamTrack,
      audio: microphone == null ? void 0 : microphone.mediaStreamTrack
    });
  }, [webcam == null ? void 0 : webcam.mediaStreamTrack, microphone == null ? void 0 : microphone.mediaStreamTrack]);
  reactExports.useEffect(() => {
    if (ref2.current) {
      ref2.current.srcObject = srcObject;
    }
  }, [ref2 == null ? void 0 : ref2.current, srcObject, isEnabled]);
  return /* @__PURE__ */ jsxs("div", {
    className: Style$1.column,
    style: {
      padding: 6,
      borderRadius: 3,
      background: "#000000cc",
      border: "1px solid rgba(255, 255, 255, 0.2)"
    },
    children: [/* @__PURE__ */ jsx("div", {
      children: displayName
    }), /* @__PURE__ */ jsxs("div", {
      style: {
        height: 160,
        width: 160 * 16 / 9,
        position: "relative"
      },
      children: [/* @__PURE__ */ jsx("div", {
        // Background to show when webcam is not enabled
        style: {
          background: "#222",
          height: "100%",
          width: "100%",
          position: "absolute",
          zIndex: -1
        }
      }), isEnabled && /* @__PURE__ */ jsx("video", {
        // Mute because audio is only communicated through the compositor
        muted: true,
        autoPlay: true,
        ref: ref2,
        style: {
          background: "transparent",
          objectFit: "cover",
          height: "100%",
          width: "100%"
        }
      })]
    }), isHost && /* @__PURE__ */ jsx(HostControls, {
      participant,
      room,
      projectCommands,
      type: "camera"
    })]
  });
};
const ParticipantScreenshare = ({
  participant,
  screenshare
}) => {
  const {
    isHost
  } = reactExports.useContext(AppContext);
  useStudio$1();
  const {
    id: id2,
    displayName
  } = participant;
  const ref2 = reactExports.useRef();
  const [srcObject] = reactExports.useState(new MediaStream([]));
  reactExports.useEffect(() => {
    Room.updateMediaStreamTracks(srcObject, {
      video: screenshare == null ? void 0 : screenshare.mediaStreamTrack
    });
  }, [screenshare == null ? void 0 : screenshare.mediaStreamTrack]);
  reactExports.useEffect(() => {
    if (ref2.current) {
      ref2.current.srcObject = srcObject;
    }
  }, [ref2 == null ? void 0 : ref2.current, srcObject]);
  return /* @__PURE__ */ jsxs("div", {
    className: Style$1.column,
    style: {
      padding: 6,
      borderRadius: 3,
      background: "#000000cc",
      border: "1px solid rgba(255, 255, 255, 0.2)"
    },
    children: [/* @__PURE__ */ jsxs("div", {
      children: [displayName, " (Screen)"]
    }), /* @__PURE__ */ jsx("div", {
      style: {
        height: 160,
        width: 160 * 16 / 9,
        position: "relative"
      },
      children: /* @__PURE__ */ jsx("video", {
        // Mute because audio is only communicated through the compositor
        muted: true,
        autoPlay: true,
        ref: ref2,
        style: {
          background: "transparent",
          objectFit: "cover",
          height: "100%",
          width: "100%"
        }
      })
    }), isHost && /* @__PURE__ */ jsx(HostControls, {
      participant,
      type: "screen"
    })]
  });
};
const Participant = ({
  participant,
  room,
  projectCommands
}) => {
  const [tracks, setTracks] = reactExports.useState([]);
  const screenshare = tracks.find((x2) => x2.type === "screen_share");
  const webcam = tracks.find((x2) => x2.type === "camera");
  const microphone = tracks.find((x2) => x2.type === "microphone");
  reactExports.useEffect(() => {
    if (!room)
      return;
    setTracks(participant.trackIds.map(room.getTrack).filter(Boolean));
  }, [participant == null ? void 0 : participant.trackIds, room]);
  return /* @__PURE__ */ jsxs(Fragment, {
    children: [/* @__PURE__ */ jsx(ParticipantCamera, {
      projectCommands,
      participant,
      webcam,
      room,
      microphone
    }), screenshare && /* @__PURE__ */ jsx("div", {
      style: {
        marginTop: 10
      },
      children: /* @__PURE__ */ jsx(ParticipantScreenshare, {
        participant,
        screenshare
      })
    })]
  });
};
const HostControls = ({
  participant,
  type: type2,
  projectCommands,
  room
}) => {
  const {
    project
  } = useStudio$1();
  const {
    id: id2
  } = participant;
  const projectParticipant = reactExports.useMemo(() => projectCommands == null ? void 0 : projectCommands.getParticipantState(id2, type2), []);
  const [onStream, setOnStream] = reactExports.useState(Boolean(projectParticipant));
  const [isMuted, setIsMuted] = reactExports.useState((projectParticipant == null ? void 0 : projectParticipant.isMuted) ?? false);
  const [volume, setVolume] = reactExports.useState((projectParticipant == null ? void 0 : projectParticipant.volume) ?? 1);
  const [isShowcase, setIsShowcase] = reactExports.useState(false);
  reactExports.useEffect(() => {
    return projectCommands == null ? void 0 : projectCommands.useParticipantState(id2, (x2) => {
      setOnStream(Boolean(x2));
    }, type2);
  }, []);
  reactExports.useEffect(() => projectCommands == null ? void 0 : projectCommands.useShowcase((showcase) => {
    setIsShowcase(showcase.participantId === id2 && showcase.type === type2);
  }), []);
  return /* @__PURE__ */ jsxs("div", {
    style: {
      display: "flex",
      justifyContent: "space-between",
      alignItems: "center",
      width: "100%",
      marginTop: 4
    },
    children: [/* @__PURE__ */ jsxs("div", {
      style: {
        display: "flex",
        flexDirection: "column"
      },
      children: [/* @__PURE__ */ jsxs("label", {
        children: [/* @__PURE__ */ jsx("input", {
          type: "checkbox",
          checked: onStream,
          style: {
            marginTop: 0,
            marginBottom: 0
          },
          onChange: (e2) => {
            const checked = e2.target.checked;
            if (checked) {
              if (project.sources.some((source) => source.id === id2)) {
                projectCommands == null ? void 0 : projectCommands.addRTMPSource(id2, {});
              } else {
                projectCommands == null ? void 0 : projectCommands.addParticipant(id2, {
                  isMuted,
                  volume
                }, type2);
              }
            } else {
              if (project.sources.some((source) => source.id === id2)) {
                projectCommands == null ? void 0 : projectCommands.removeRTMPSource(id2);
              } else {
                projectCommands == null ? void 0 : projectCommands.removeParticipant(id2, type2);
              }
            }
            setOnStream(checked);
          }
        }), "On stream"]
      }), /* @__PURE__ */ jsxs("label", {
        children: [/* @__PURE__ */ jsx("input", {
          type: "checkbox",
          checked: onStream,
          style: {
            marginTop: 0,
            marginBottom: 0
          },
          onChange: (e2) => {
            const checked = e2.target.checked;
            if (checked) {
              room.setLocalParticipantMetadata(room == null ? void 0 : room.participantId, {
                ...participant.meta,
                isMirrored: true
              });
            } else {
              room.setLocalParticipantMetadata(room == null ? void 0 : room.participantId, {
                ...participant.meta,
                isMirrored: false
              });
            }
            setOnStream(checked);
          }
        }), "On Mirror"]
      }), /* @__PURE__ */ jsxs("label", {
        style: {
          opacity: onStream ? 1 : 0.5
        },
        children: [/* @__PURE__ */ jsx("input", {
          type: "checkbox",
          style: {
            marginTop: 0,
            marginBottom: 0
          },
          disabled: !onStream,
          checked: isShowcase,
          onChange: () => {
            if (isShowcase) {
              projectCommands == null ? void 0 : projectCommands.setShowcase(null);
            } else {
              projectCommands == null ? void 0 : projectCommands.setShowcase(id2, type2);
            }
          }
        }), "Showcase"]
      })]
    }), /* @__PURE__ */ jsx("span", {
      children: type2 === "camera" && /* @__PURE__ */ jsxs(Fragment, {
        children: [/* @__PURE__ */ jsx("input", {
          type: "range",
          min: 0,
          max: 1,
          step: 0.01,
          value: volume,
          style: {
            opacity: isMuted ? 0.4 : 1
          },
          onChange: (e2) => {
            const value = Number(e2.target.value);
            projectCommands == null ? void 0 : projectCommands.setParticipantVolume(id2, value);
            setVolume(value);
            if (isMuted) {
              projectCommands == null ? void 0 : projectCommands.setParticipantMuted(id2, false);
              setIsMuted(false);
            }
          }
        }), /* @__PURE__ */ jsx("input", {
          type: "checkbox",
          checked: !isMuted,
          onChange: (e2) => {
            const checked = e2.target.checked;
            projectCommands == null ? void 0 : projectCommands.setParticipantMuted(id2, !checked);
            setIsMuted(!checked);
          }
        })]
      })
    })]
  });
};
const {
  useStudio,
  useDevices
} = index$1.React;
const DeviceSelection = () => {
  const {
    webcamId,
    microphoneId,
    setWebcamId,
    setMicrophoneId
  } = useStudio();
  const devices = useDevices();
  reactExports.useEffect(() => {
    var _a2;
    if (!webcamId)
      setWebcamId((_a2 = devices.webcams[0]) == null ? void 0 : _a2.deviceId);
  }, [webcamId, devices]);
  reactExports.useEffect(() => {
    var _a2;
    if (!microphoneId)
      setMicrophoneId((_a2 = devices.microphones[0]) == null ? void 0 : _a2.deviceId);
  }, [microphoneId, devices]);
  return /* @__PURE__ */ jsxs("div", {
    children: [/* @__PURE__ */ jsxs("div", {
      className: Style$1.column,
      children: [/* @__PURE__ */ jsx("label", {
        children: "Webcam"
      }), /* @__PURE__ */ jsx("select", {
        value: webcamId,
        onChange: (e2) => {
          setWebcamId(e2.target.value);
        },
        children: devices.webcams.map((x2) => /* @__PURE__ */ jsx("option", {
          value: x2.deviceId,
          children: x2.label
        }, x2.deviceId))
      })]
    }), /* @__PURE__ */ jsxs("div", {
      className: Style$1.column,
      children: [/* @__PURE__ */ jsx("label", {
        children: "Microphone"
      }), /* @__PURE__ */ jsx("select", {
        value: microphoneId,
        onChange: (e2) => {
          setMicrophoneId(e2.target.value);
        },
        children: devices.microphones.map((x2) => /* @__PURE__ */ jsx("option", {
          value: x2.deviceId,
          children: x2.label
        }, x2.deviceId))
      })]
    })]
  });
};
const ControlPanel = ({
  room,
  projectCommands
}) => {
  const [isSharingScreen, setIsSharingScreen] = reactExports.useState(false);
  const [participant, setParticipant] = reactExports.useState();
  reactExports.useEffect(() => {
    if (!room)
      return;
    return room.useParticipant(room.participantId, setParticipant);
  }, [room]);
  reactExports.useEffect(() => {
    if (!participant)
      return;
    const screenshare = participant.trackIds.find((x2) => {
      var _a2;
      return ((_a2 = room.getTrack(x2)) == null ? void 0 : _a2.type) === "screen_share";
    });
    if (!screenshare) {
      projectCommands.removeParticipant(room.participantId, "screen");
    }
    setIsSharingScreen(Boolean(screenshare));
  }, [participant == null ? void 0 : participant.trackIds]);
  return /* @__PURE__ */ jsxs("div", {
    children: [/* @__PURE__ */ jsxs("label", {
      children: [/* @__PURE__ */ jsx("input", {
        type: "checkbox",
        onChange: async (e2) => {
          const track = await room.addCamera({
            deviceId: "7360456cb5f177a56d708c3dc4981b540ecc5197ec79fb67ee5e573bf434a760"
          });
          setTimeout(() => {
            projectCommands.addParticipantTrack(track.id, {}, "camera");
          }, 5e3);
        }
      }), "Add Additional Camera"]
    }), /* @__PURE__ */ jsxs("label", {
      children: [/* @__PURE__ */ jsx("input", {
        type: "checkbox",
        onChange: (e2) => {
          const muted = e2.target.checked;
          room.setMicrophoneEnabled(!muted);
        }
      }), "Mute microphone"]
    }), /* @__PURE__ */ jsxs("label", {
      children: [/* @__PURE__ */ jsx("input", {
        type: "checkbox",
        onChange: (e2) => {
          const hidden = e2.target.checked;
          room.setCameraEnabled(!hidden);
        }
      }), "Hide webcam"]
    }), /* @__PURE__ */ jsxs("label", {
      children: [/* @__PURE__ */ jsx("input", {
        type: "checkbox",
        checked: isSharingScreen,
        onChange: (e2) => {
          const enabled = e2.target.checked;
          if (enabled) {
            room.addScreen();
          } else {
            room.getParticipant(room.participantId).trackIds.forEach((x2) => {
              if (room.getTrack(x2).type === "screen_share") {
                room.removeTrack(x2);
              }
            });
          }
        }
      }), "Screenshare"]
    })]
  });
};
const chatUsernameCell = "_chatUsernameCell_qtjny_5";
const chatTimeCell = "_chatTimeCell_qtjny_10";
const chatItem = "_chatItem_qtjny_16";
const chatTop = "_chatTop_qtjny_20";
const scrollbox = "_scrollbox_qtjny_25";
const textarea = "_textarea_qtjny_35";
const chatbox = "_chatbox_qtjny_45";
const emptyMessage = "_emptyMessage_qtjny_54";
const Style = {
  chatUsernameCell,
  chatTimeCell,
  chatItem,
  chatTop,
  scrollbox,
  textarea,
  chatbox,
  emptyMessage
};
const {
  StudioContext
} = index$1.React;
const displayTimeComponent = (component) => component < 10 ? `0${component}` : String(component);
const displayTime = (time) => `${time.getHours()}:${displayTimeComponent(time.getMinutes())}:${displayTimeComponent(time.getSeconds())}`;
const ChatMessage = ({
  message
}) => {
  const sent = new Date(message.timestamp);
  return /* @__PURE__ */ jsxs("div", {
    className: Style.chatItem,
    children: [/* @__PURE__ */ jsxs("div", {
      className: Style.chatTop,
      children: [/* @__PURE__ */ jsx("span", {
        className: Style.chatUsernameCell,
        children: message.displayName
      }), /* @__PURE__ */ jsx("span", {
        className: Style.chatTimeCell,
        children: displayTime(sent)
      })]
    }), /* @__PURE__ */ jsx("div", {
      className: Style.chatMessageContent,
      children: message.content
    })]
  });
};
const Chat = () => {
  const {
    room
  } = reactExports.useContext(StudioContext);
  const [chatHistory, setChatHistory] = reactExports.useState([]);
  const [draft, setDraft] = reactExports.useState("");
  const scrollbox2 = reactExports.useRef(null);
  const onSendMessage = () => {
    if (!draft.trim()) {
      return;
    }
    room.sendChatMessage({
      message: draft.trim()
    });
    setDraft("");
  };
  reactExports.useEffect(() => {
    if (!room)
      return;
    return room.useChatHistory((history) => {
      const scrollY = scrollbox2.current.scrollHeight - scrollbox2.current.clientHeight;
      setChatHistory(history);
      if (scrollbox2.current.scrollTop === scrollY) {
        scrollbox2.current.scrollTo({
          top: scrollbox2.current.scrollHeight - scrollbox2.current.clientHeight
        });
      }
    });
  }, [room]);
  return /* @__PURE__ */ jsxs("div", {
    className: Style.chatbox,
    children: [/* @__PURE__ */ jsxs("div", {
      ref: scrollbox2,
      className: Style.scrollbox,
      children: [chatHistory.length === 0 && /* @__PURE__ */ jsx("div", {
        className: Style.emptyMessage,
        children: "Private chat between host and guests."
      }), chatHistory.map((chat, i2) => {
        return /* @__PURE__ */ jsx(ChatMessage, {
          message: chat
        }, i2);
      })]
    }), /* @__PURE__ */ jsx("textarea", {
      placeholder: "Write a message...",
      className: Style.textarea,
      value: draft,
      onChange: (e2) => {
        setDraft(e2.target.value);
      }
    }), /* @__PURE__ */ jsx("button", {
      onClick: onSendMessage,
      children: "Send Message"
    })]
  });
};
const LOCAL_ENV = "stage";
const config = {
  env: location.hostname === "live.api.stream" ? "prod" : LOCAL_ENV,
  logLevel: "Debug",
  recaptchaKey: "6Lc0HIUfAAAAAIdsyq7vB_3c3skiVvltzdUTCUSx"
};
const url = "/studiokit/example/assets/logo-DYIKx3v7.png";
export {
  AppProvider as A,
  ControlPanel as C,
  DeviceSelection as D,
  Participants as P,
  React as R,
  Style$1 as S,
  init as a,
  jsxs as b,
  config as c,
  Chat as d,
  ReactDOM as e,
  Participant as f,
  getDefaultExportFromCjs$3 as g,
  index$1 as i,
  jsx as j,
  reactExports as r,
  url as u
};
//# sourceMappingURL=index-CunY2vUB.js.map
